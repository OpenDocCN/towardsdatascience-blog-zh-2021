<html>
<head>
<title>A/B/C Tests: How to Analyze Results From Multi-Group Experiments</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">A/B/C测试:如何分析多组实验的结果</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-b-c-tests-how-to-analyze-results-from-multi-group-experiments-ad5d5cee0b05?source=collection_archive---------18-----------------------#2021-05-14">https://towardsdatascience.com/a-b-c-tests-how-to-analyze-results-from-multi-group-experiments-ad5d5cee0b05?source=collection_archive---------18-----------------------#2021-05-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="392b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">方差分析的解释(ANOVA)</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/90ccc0c9f9083465b6ab946133ade86f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rw5i_RT5Rc5OasoWXeo1KA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://pixabay.com/illustrations/speed-internet-high-download-4028234/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></p></figure><p id="1eb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在科技初创公司中，实验被广泛用于决定是否推出新产品功能、用户界面设计变化、营销活动等，通常目标是提高转化率、收入和/或销量。通常，我们想要测试一个改变(治疗组)对现状(对照组)的影响，但是如果我们正在考虑几个选项，并且想要对两个以上的组进行实验呢？</p><p id="d58f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将介绍单向方差分析背后的直觉，以及如何使用它来分析您在多组实验中的结果。</p><h1 id="49ce" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">为什么你不应该做多重t检验</h1><p id="8495" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">你可能想知道在你的实验中是否可以使用t检验来比较各组之间的差异。简短的回答是不，你不应该这样做！不仅会变得乏味，而且如果您使用t-test来比较许多对，您犯I型错误(假阳性)的几率会增加。</p><p id="ef7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了说明这一点，考虑一个有5个不同组的实验。在这种情况下，我们需要运行的t测试的数量是<code class="fe ms mt mu mv b">5 Choose 2</code> = 10个t测试！如果我们进行这10次t检验，即使我们将每个t检验的显著性水平设为0.05，I型错误的概率也不再是5%。</p><p id="d9b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相反，类型I错误的概率增加到<code class="fe ms mt mu mv b">1 — (1 — 0.05) ^ 10 = 0.40</code>，因为我们正在进行十次比较，并且在所有测试中没有获得<em class="mw">任何</em>显著结果的概率现在是<code class="fe ms mt mu mv b">0.95 ^ 10 = 0.60</code>。这意味着，如果我们做10次t检验来比较实验中5组之间的平均值，我们最终会在40%的时间里错误地拒绝零假设，而不是在5%的时间里！</p><h1 id="8051" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">关于ANOVA</h1><p id="5a2a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">ANOVA代表方差分析，是对两组或多组平均值之间差异的统计显著性的检验。本质上，它将数据中的总方差划分为不同的类别，允许我们比较组的平均值之间的<em class="mw">变化量和每组</em>内的单个观察值之间的<em class="mw">变化量。</em></p><h2 id="ab2b" class="mx lw it bd lx my mz dn mb na nb dp mf li nc nd mh lm ne nf mj lq ng nh ml ni bi translated">假设</h2><p id="a398" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在进行ANOVA检验之前，我们需要确保满足以下三个假设:<br/> 1。<em class="mw">我们从中抽取样本的基础人群是正态分布的。</em>检查的一种方法是绘制观察值的直方图，以直观显示分布是否呈正态分布。</p><p id="c4d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.<em class="mw">样本所来自的总体的方差相等。</em>我们可以用箱线图检查这一点，看看观察值的方差是否相等。</p><p id="34e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.<em class="mw">每组中的观测值是相互独立的，每组内的观测值是随机抽样的。</em>我们需要确保实验是精心设计的，以保证组间的独立性和组内的随机抽样。</p><h2 id="e797" class="mx lw it bd lx my mz dn mb na nb dp mf li nc nd mh lm ne nf mj lq ng nh ml ni bi translated">假设检验</h2><p id="ced5" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在这一节中，我将介绍计算检验统计量和进行假设检验所需的步骤。在单因素方差分析中，零假设是所有组的平均值相等，而另一个假设是至少有一个平均值不同。</p><p id="90ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">R和Python中有许多<a class="ae ky" href="https://goodcalculators.com/one-way-anova-calculator/" rel="noopener ugc nofollow" target="_blank">计算器</a>在线和统计软件包，您可以使用它们来执行计算，但是以下步骤中的细节旨在帮助您理解方法和概念。如果公式看起来很吓人，不要担心，相反更重要的是理解每一步的直觉！</p><ol class=""><li id="af17" class="nj nk it lb b lc ld lf lg li nl lm nm lq nn lu no np nq nr bi translated"><strong class="lb iu">计算平方和</strong></li></ol><p id="b359" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在简单的方差分析中，我们可以将总平方和(SS_T)视为组内平方和(SS_w)和组间平方和(SS_B)之和:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/4ecf5f134d9f8edb3284d534f9530622.png" data-original-src="https://miro.medium.com/v2/resize:fit:408/1*ZcEkO1RtLrl6gHElZ64QYw.gif"/></div></figure><p id="5e0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">组内平方和(SS_w)代表组内可变性的数量，但不受组间总体差异的影响。组内平方和等于一个组内所有观察值与其组均值的偏差平方和，即所有组的总和。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/4ce784ebf819bbcc3893e515402dc6f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:464/1*wXRhtq7lfn9JDrYVo5_xrQ.gif"/></div></figure><p id="309a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">组间平方和(SS_B)可视为组间差异，但不受组内变异量的影响。它可以计算为总体大平均值的组平均值之间的平方和。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/4e1414d90e9080a7b6e0f64eb9f01e30.png" data-original-src="https://miro.medium.com/v2/resize:fit:478/1*KbTk9l82oOlF4uI7u3Wbtw.gif"/></div></figure><p id="9fce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 2。计算自由度</strong></p><p id="d262" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们需要计算自由度。类似于平方和，总自由度等于组内自由度(df_w)和组间自由度(df_B)之和:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/fe5712712e35c9a9a7a7f6f2afa4e6b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:344/1*aEEDQt3MMbwtuByjoAjCXg.gif"/></div></figure><p id="3510" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">组内自由度(df_w)是观察数-组数，而组间自由度(df_B)是组数- 1。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/fe9fbf6e267b8123b8caeb12964eea31.png" data-original-src="https://miro.medium.com/v2/resize:fit:278/1*0n-lVeQAC-J1Eu9Jq6EBMA.gif"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/cbb2a74c4d993626a9e879a8d74f822c.png" data-original-src="https://miro.medium.com/v2/resize:fit:246/1*eeR51R-HTP490Yp3-fqKsA.gif"/></div></figure><p id="c0f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 3。计算均方值</strong></p><p id="5755" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了能够比较平方和，我们将它们除以相关的自由度(df)以获得均方值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/b6bcc3a0397a1b1595e847f52bb3dfc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:294/1*-HJWyZJtWFv69GGkjORnEw.gif"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/6299de0956ce7e7499ace2eb200fb27d.png" data-original-src="https://miro.medium.com/v2/resize:fit:274/1*NFCqzW-4X4MPkx0rnz__FA.gif"/></div></figure><p id="78ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 4。计算F统计量</strong></p><p id="234f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">检验(F)统计量是组间均方(MS_B)与组内均方(MS_w)的比值</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/fde9262d571fe31a22ca174f52e198a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:270/1*OHZq9q_5dRwhNL7rkSLisg.gif"/></div></figure><p id="3f75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 5。求F的临界值</strong></p><p id="eda4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于α、组内自由度(N - k)和组间自由度(k - 1)的相应值，从<a class="ae ky" href="http://homepages.wmich.edu/~hillenbr/619/AnovaTable.pdf" rel="noopener ugc nofollow" target="_blank"> F分布表</a>中确定F的临界值。</p><p id="7d46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 6。方差分析测试的结论</strong></p><p id="652e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果从你的实验中得到的F (F_obt)值大于F (F_crit)的临界值，我们可以拒绝均值之间没有差异的零假设。这意味着至少一个平均值在统计学上显著不同于一个或多个其他平均值。</p><h2 id="0d91" class="mx lw it bd lx my mz dn mb na nb dp mf li nc nd mh lm ne nf mj lq ng nh ml ni bi translated">比较成对平均值:谢弗法</h2><p id="7113" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">能够拒绝方差分析检验的零假设告诉我们至少有一个均值是显著不同的，但是我们如何知道哪个均值是不同的呢？</p><p id="6f08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">回想一下我们上面进行多重t检验的例子，这将导致I型错误的增加。然而，如果我们能够使用ANOVA拒绝均值无差异的零假设，我们可以使用事后分析的Scheffé方法来比较任何一对均值，而不用担心增加I型误差。</p><p id="f1aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用Scheffé方法计算一个称为C的统计量。计算从我们的实验中获得的C的公式是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/95fc6ef9dca526e63ea7de16b93adb6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:562/1*xlwqTzxDQxhtAJHTPlyjtw.gif"/></div></figure><p id="54ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其中，x̄₁和x̄₂是被比较的两组的平均值，N₁和N₂是这两组中的观察次数，MS_w是来自方差分析的组内均方值。</p><p id="a53d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们可以将从我们的观察中获得的C值与C的临界值进行比较。C的临界值可以从以下公式中找到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/8cba42fa33bcbd181b5ad01b02140cb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:522/1*a22rNzu9E618cs86YbcQcA.gif"/></div></figure><p id="3978" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其中K是组的数量，F_crit是F的临界值，您可以从<a class="ae ky" href="http://homepages.wmich.edu/~hillenbr/619/AnovaTable.pdf" rel="noopener ugc nofollow" target="_blank"> F分布表</a>中查找相应的自由度和显著性水平。</p><p id="60fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果得到的C值大于C的临界值，可以拒绝均值对相等的零假设。</p><h2 id="db78" class="mx lw it bd lx my mz dn mb na nb dp mf li nc nd mh lm ne nf mj lq ng nh ml ni bi translated">关联强度:ω平方</h2><p id="2114" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">来自ANOVA的检验统计可以告诉我们组间均值的差异是否具有统计学意义，但不能告诉我们效果大小。为了确定治疗效果的强度，我们可以使用下面的公式来计算ω平方(ω2):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/687e4d1c3b53149db12a1047198176f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/1*EaVeaiFjlJ9m732-5APp2g.gif"/></div></figure><p id="7fc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其中，SS_B为组间平方和，K为组数，MS_w为组内均方，SS_T为平方和。</p><p id="d97a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ω平方(ω2)告诉我们治疗效果可以解释多少总可变性，可以取-1到+1之间的任何值，0表示没有任何影响。</p><h1 id="f003" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="51b4" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我希望这篇文章能帮助你更好地理解什么是方差分析，以及如何用它来解释多变量实验的结果。以下是一些关键要点:</p><ul class=""><li id="c154" class="nj nk it lb b lc ld lf lg li nl lm nm lq nn lu oe np nq nr bi translated">ANOVA是对两组或多组平均值之间差异的统计显著性的检验。</li><li id="da6e" class="nj nk it lb b lc of lf og li oh lm oi lq oj lu oe np nq nr bi translated">如果您能够使用ANOVA拒绝均值无差异的零假设，您可以使用事后分析的Scheffé方法来比较任何一对均值，而不用担心增加I型误差。</li><li id="e37e" class="nj nk it lb b lc of lf og li oh lm oi lq oj lu oe np nq nr bi translated">为了确定治疗效果的关联强度，您可以计算ω平方(ω2)，这可以告诉您治疗效果可以解释多少总可变性。</li></ul><p id="8b9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">实验需要时间和资源来设计、设置和部署到生产中。希望这有助于您将测试工具包扩展到多元实验中！</p></div></div>    
</body>
</html>