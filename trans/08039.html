<html>
<head>
<title>A Pandas Tutorial Highlighting 8 Essential Functionalities</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫教程强调了8个基本功能</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/8-pandas-functionalities-for-every-data-scientist-f2cd3d890795?source=collection_archive---------17-----------------------#2021-07-23">https://towardsdatascience.com/8-pandas-functionalities-for-every-data-scientist-f2cd3d890795?source=collection_archive---------17-----------------------#2021-07-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="eb7f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">关于您将在每个项目中使用的函数和代码的教程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2f6708869a76dafa58f43703a205f0d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mwTOuFwSsx2IGy64"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@chuttersnap?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> CHUTTERSNAP </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="b9bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论您有一个杂乱的数据集需要清理和分析，还是想要为机器学习模型准备数据，pandas都是您的图书馆。它使用简单，快速，非常直观。</p><p id="5308" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas的<a class="ae ky" href="https://en.wikipedia.org/wiki/Wes_McKinney" rel="noopener ugc nofollow" target="_blank">是专门为数据科学而创作的</a>，并且打包了来自其他库的附加特性。这意味着你只能在pandas中工作，而不能导入其他库，我们将在文章中看到。</p><p id="b283" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">熊猫的一个很大的缺点是它在大数据上失败了。这是因为pandas将其数据结构存储在RAM中，随着数据大小的增加，RAM可能会耗尽内存。为此，使用<a class="ae ky" href="https://www.analyticsvidhya.com/blog/2016/10/spark-dataframe-and-operations/" rel="noopener ugc nofollow" target="_blank"> PySpark </a>或<a class="ae ky" href="https://docs.dask.org/en/latest/dataframe.html" rel="noopener ugc nofollow" target="_blank"> Dask </a>。</p><p id="8f17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要开始在Jupyter笔记本中使用pandas，首先要将库导入到当前运行时。我们提供了一个别名<code class="fe lv lw lx ly b">pd</code>，我们将在代码中引用它。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="8aaf" class="md me it ly b gy mf mg l mh mi">import pandas as pd</span></pre><p id="b6e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用来自Kaggle的谷物数据集<a class="ae ky" href="https://www.kaggle.com/crawford/80-cereals" rel="noopener ugc nofollow" target="_blank">进行演示。我们先来定义一些教程中反复使用的常用词。</a></p><ol class=""><li id="9c0a" class="mj mk it lb b lc ld lf lg li ml lm mm lq mn lu mo mp mq mr bi translated"><em class="ms"> DataFrame </em> —一个带有标签列和标签行的二维表格。这是熊猫的数据结构之一。</li><li id="8df3" class="mj mk it lb b lc mt lf mu li mv lm mw lq mx lu mo mp mq mr bi translated"><em class="ms">系列</em> —一列值及其索引。它也是一种数据结构。DataFrame是Series对象的集合。</li><li id="32a7" class="mj mk it lb b lc mt lf mu li mv lm mw lq mx lu mo mp mq mr bi translated"><em class="ms">索引</em> —数据帧或系列中每一行(观察值)的标签。我们将索引称为行标签，它通常位于数据帧或系列的第一列。</li><li id="a190" class="mj mk it lb b lc mt lf mu li mv lm mw lq mx lu mo mp mq mr bi translated"><em class="ms">列名</em> —数据帧中每一列的标题。</li><li id="5b01" class="mj mk it lb b lc mt lf mu li mv lm mw lq mx lu mo mp mq mr bi translated"><em class="ms">特征</em> —数据框中的一列。</li></ol><h2 id="ec34" class="md me it bd my mz na dn nb nc nd dp ne li nf ng nh lm ni nj nk lq nl nm nn no bi translated">第一部分。数据理解</h2><p id="dc71" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated"><strong class="lb iu"> 1。将数据读入Jupyter笔记本</strong></p><p id="5249" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas可以读取一系列文本、二进制和SQL文件来返回pandas对象，该对象通常是Dataframe。</p><p id="9e5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用<code class="fe lv lw lx ly b">pandas.read_csv()</code>读取文本文件。<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html#pandas-read-csv" rel="noopener ugc nofollow" target="_blank">该文档</a>解释了<em class="ms">要包含的几个可选参数</em>，比如要在顶部跳过多少行(<code class="fe lv lw lx ly b">skip_rows</code>)、要加载哪些列(<code class="fe lv lw lx ly b">usecols</code>)以及要用作索引的列(<code class="fe lv lw lx ly b">index_col</code>)。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="147c" class="md me it ly b gy mf mg l mh mi">pd.read_csv('file.csv')</span></pre><p id="b5a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html" rel="noopener ugc nofollow" target="_blank">其他</a>数据加载功能有<code class="fe lv lw lx ly b">pd.read_excel()</code>、<code class="fe lv lw lx ly b">pd.read_json()</code>和<code class="fe lv lw lx ly b">pd.read_sql()</code>。</p><p id="6f7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 2。查看数据</strong></p><p id="990a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">加载数据集后，您可以查看其内容。</p><p id="2540" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df.head()</code>、<code class="fe lv lw lx ly b">df.tail()</code>和<code class="fe lv lw lx ly b">df.sample()</code>分别显示前5个观察值、后5个观察值和一个随机选择的观察值。每个函数为行数选择一个可选的<code class="fe lv lw lx ly b">n</code>参数，例如<code class="fe lv lw lx ly b">df.sample(5)</code>。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="f6d5" class="md me it ly b gy mf mg l mh mi">df.head() #the first 5 rows<br/>df.tail() #the last 5<br/>df.sample() #one random row</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/9707766f4005ab070c17d73768954688.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qcHt4c6MzU-9evC8crj7Nw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="75a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df.columns</code>和<code class="fe lv lw lx ly b">df.index</code>分别以列表形式返回列名和行索引值。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="1c55" class="md me it ly b gy mf mg l mh mi">df.columns</span><span id="a416" class="md me it ly b gy nv mg l mh mi">##Results<br/>Index(['name', 'mfr', 'type', 'calories', 'protein', 'fat', 'sodium', 'fiber', 'carbo', 'sugars', 'potass', 'vitamins', 'shelf', 'weight', 'cups', 'rating'], dtype='object')<br/></span><span id="f6be" class="md me it ly b gy nv mg l mh mi">df.index</span><span id="91c5" class="md me it ly b gy nv mg l mh mi">###Results<br/>RangeIndex(start=0, stop=77, step=1)</span></pre><p id="2f7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意</strong>我们的指数值显示它是一个<a class="ae ky" href="https://pandas.pydata.org/docs/reference/api/pandas.RangeIndex.html" rel="noopener ugc nofollow" target="_blank"> RangeIndex </a>。这是在没有指定列作为索引的情况下加载数据帧时创建的默认索引。它由从0到总行数的整数组成，在我们的例子中是77行。</p><p id="afac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下面的代码中，我们使用<code class="fe lv lw lx ly b">pd.read_csv(filename, index_col). </code>显式地将“name”列设置为索引，也可以使用<code class="fe lv lw lx ly b">df.set_index(‘name’)</code>。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="df06" class="md me it ly b gy mf mg l mh mi">df2 = pd.read_csv('cereal.csv', <br/>                  <strong class="ly iu">index_col='name'</strong>)</span><span id="e934" class="md me it ly b gy nv mg l mh mi">print(df2.index)</span><span id="d7c9" class="md me it ly b gy nv mg l mh mi">###Results<br/><em class="ms">Index(['100% Bran', '100% Natural Bran', 'All-Bran',<br/>       'All-Bran with Extra Fiber', 'Almond Delight',...</em></span></pre><p id="2191" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，所有索引值都显示为一个列表。</p><p id="31cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 3。了解数据</strong></p><p id="6782" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">熊猫让我们了解数据帧的结构和它所包含的信息类型。</p><p id="3e18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df.shape</code>返回一个<a class="ae ky" rel="noopener" target="_blank" href="/ultimate-guide-to-lists-tuples-arrays-and-dictionaries-for-beginners-8d1497f9777c?source=your_stories_page-------------------------------------">元组</a>来表示行数和列数。在我们的例子中，有77行和16列。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="dcaa" class="md me it ly b gy mf mg l mh mi">df.shape<br/><em class="ms">(77, 16)</em></span></pre><p id="2f62" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df.dtypes</code>返回每列的数据类型。我们看到我们混合了分类(<code class="fe lv lw lx ly b">object</code>)和数字(<code class="fe lv lw lx ly b">int </code>和<code class="fe lv lw lx ly b">float</code>)特征。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/9fd5a6e36952c0f69af6f0c45f9e2ade.png" data-original-src="https://miro.medium.com/v2/resize:fit:334/format:webp/1*yj65XUytfrYmQViD6n4GqQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="4817" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df.info()</code>返回有关数据的信息，如列计数、每列中值的数量(非空意味着不为空或不缺失)以及它们的数据类型。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/694371636330216de115c151b5d4db61.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*MsTrf4xzFuwMNTtV6eAk_g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="a925" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df.describe()</code>返回每个<strong class="lb iu">数字</strong>特征的描述性统计。在这里，我们得到每一列的值的数量(计数)、平均值、标准偏差和百分位数。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/622775cc35c687cce1b51c1057a1a319.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QgYuleK0oDxnL3w6Afh65g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="2b05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe lv lw lx ly b"> df.describe(include=’object’)</code>返回<strong class="lb iu">分类</strong>(对象)列的描述性统计数据。我们得到每一列中唯一类别的数量、最常见的类别及其出现的次数。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/43000ed012c9208ffaf97726b9238ca6.png" data-original-src="https://miro.medium.com/v2/resize:fit:558/format:webp/1*B6zSvbgTeswEK1HfKT80wA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="b776" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您还可以获得关于DataFrame或Series对象的单个统计信息。<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/basics.html#descriptive-statistics" rel="noopener ugc nofollow" target="_blank">本文档</a>展示了<code class="fe lv lw lx ly b">max()</code>和<code class="fe lv lw lx ly b">mean()</code>等聚合函数，以及<code class="fe lv lw lx ly b">cumsum()</code>等元素操作。</p><p id="e29b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 4。通过选择查看数据</strong></p><p id="9001" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms">使用方括号[]选择列</em> </strong></p><p id="7342" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df[‘rating’]</code>选择“评级”栏。返回一个系列对象。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="801d" class="md me it ly b gy mf mg l mh mi">0     68.402973<br/>1     33.983679<br/>2     59.425505<br/>3     93.704912<br/>4     34.384843<br/>        ...</span></pre><p id="c64f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df[[‘name’, ‘calories’, ‘rating’]]</code>选择三列。请注意双括号[[。内括号用于保存列的列表，而外括号用于索引和返回列。返回一个数据帧。</p><p id="0c00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms"> df.loc[]按名称选择数据</em> </strong></p><p id="d32d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df.loc</code>允许您选择要显示的行和列。这些参数是索引的<strong class="lb iu">名称</strong>和(或)列。</p><p id="648d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df.loc[0, ‘name’]</code>在“名称”列下显示索引0处的值。</p><p id="688c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df.loc[1:4, ‘protein’:’sugars’]</code>返回从索引1到4的行，以及“蛋白质”和“糖”之间的所有列。冒号的使用意味着一个范围。<strong class="lb iu">注:</strong>范围内的两个值(开始和结束)都包含在结果的<strong class="lb iu">中。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/344837008d408fa30ae5319b1bf30da3.png" data-original-src="https://miro.medium.com/v2/resize:fit:736/format:webp/1*9rYHVfBLZx7O88Qh0uf65A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="f143" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df.loc[[1,4], [‘name’,’calories’]]</code>仅返回第1行和第4行，以及“姓名”和“卡路里”列。行和列在一个列表中，因此只返回这些，而不是一个范围。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/1cef2dc4a106a61fc940ee593a018c93.png" data-original-src="https://miro.medium.com/v2/resize:fit:494/format:webp/1*0qx9x6jxAaWUh5ZwHkK7Pw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="7def" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df.loc[:, :]</code>返回所有行和所有列。<strong class="lb iu">注意:</strong>一个完整的冒号从头到尾返回所有内容。把冒号前或冒号后的空想象成“结束”。例如<code class="fe lv lw lx ly b">[:5]</code>表示从一个‘端’到索引5，而<code class="fe lv lw lx ly b">[5:]</code>表示从索引5到‘端’。</p><p id="333e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms"> df.iloc[]按位置选择数据</em> </strong></p><p id="4c44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，我们提供行和(或)列的<strong class="lb iu">位置</strong>。把它想成‘索引位置’，所有位置都从0开始。<strong class="lb iu">注:</strong>在范围的情况下，结束值(finish)是从结果中排除的<strong class="lb iu">。</strong></p><p id="1c45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df.iloc[[3,5,16], [3,4,5]]</code>返回索引为3、5和16的行以及位置为3、4和5的列。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/32ba269865b04b9b62325f8c6654fe3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:446/format:webp/1*egjVQZbwLFoMLHVaOKQh8Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="11dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df.iloc[1:3, 2:4]</code>返回从第1行到第3行、第2列到第4列的范围，<strong class="lb iu">不包括</strong>索引3和第4列。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="c114" class="md me it ly b gy mf mg l mh mi">   type  calories<br/>1    C       120<br/>2    C        70</span></pre><p id="0985" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df.iloc[[0,2], -3:]</code>返回第0行、第2行和最后3列。<code class="fe lv lw lx ly b">-3:</code>表示“从倒数第三列返回到最后一列”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/fd61e7914677648c8baa976b868fc068.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/1*FkHLDD9xu-4NwGS1L73Hgg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="b2bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms">根据数据类型选择列</em> </strong></p><p id="2ded" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df.select_dtypes()</code>根据参数<code class="fe lv lw lx ly b">include=dtype </code>或<code class="fe lv lw lx ly b">exclude=dtype</code>返回特定数据类型的列。</p><p id="3eac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df.select_dtypes(include=’object’)</code>仅返回包含字符串值的列。<code class="fe lv lw lx ly b">include=’number’</code>返回整数和浮点数。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/32d3e692870e55e25e09d98ad5c927c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*W0TC37vQiI7gU17SJ3bjVQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="1e32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df.select_dtypes(exclude=[‘float’,’int’])</code>返回除以外的所有列<em class="ms">，其值为<code class="fe lv lw lx ly b">floats </code>或<code class="fe lv lw lx ly b">ints</code>。更多选项在<a class="ae ky" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.select_dtypes.html" rel="noopener ugc nofollow" target="_blank">本文档</a>中。</em></p><p id="135f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms">根据条件选择数据</em> </strong></p><p id="990c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这使您能够选择满足特定条件的数据，例如年龄在18到24岁之间的所有学生。这也被称为<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html" rel="noopener ugc nofollow" target="_blank">布尔索引</a>。</p><p id="200d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先你创建一个<strong class="lb iu">遮罩</strong>，这是应该满足的条件。然后<strong class="lb iu">将蒙版</strong>应用到方括号[]内的数据框，就像我们选择列时所做的那样。这里我们索引并返回一个条件。</p><p id="b2a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的代码显示评分高于70的所有谷物。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="ad40" class="md me it ly b gy mf mg l mh mi">mask = df['rating'] &gt; 70<br/>df[mask]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/aa5c9275c14cd3280579eee781fcccec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A5OEwyo4nOsCYYvcPxZ0aQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="c843" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些是德国生产的谷物。也可以使用<code class="fe lv lw lx ly b">df[‘mfr’] == ‘G’</code></p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="38ed" class="md me it ly b gy mf mg l mh mi">mask = df['mfr'].isin(['G'])<br/>df[mask]</span></pre><p id="6ba0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些是卡路里在100到150之间的谷物。在这里，你也可以使用<code class="fe lv lw lx ly b">(df[‘calories’] &gt;= 100) &amp; (df[‘calories’] &lt;= 150)</code>。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="9cfb" class="md me it ly b gy mf mg l mh mi">mask = df['calories'].between(100,150)<br/>df[mask]</span></pre><p id="728c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意:要否定</strong>一个条件并返回相反的结果，请在掩码前包含波浪号<code class="fe lv lw lx ly b">~</code>符号。</p><p id="1270" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里是所有名字中没有“小麦”的谷物。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="0427" class="md me it ly b gy mf mg l mh mi">mask = <strong class="ly iu">~</strong>df['name'].str.contains('wheat', case=False)<br/>df[mask]</span></pre><h2 id="faab" class="md me it bd my mz na dn nb nc nd dp ne li nf ng nh lm ni nj nk lq nl nm nn no bi translated">第2部分:可视化数据</h2><p id="de43" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">数据可视化包括从数据中绘制图表和图形。像离群值、稀疏类和偏斜特征这样的细微见解，使用图表比我们之前使用的普通数字更容易发现。</p><p id="b14b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用熊猫来绘制系列或数据框对象。Pandas默认在后端使用matplotlib，但是后面的剧情不需要导入matplotlib库。</p><p id="4946" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 5。制作基本情节</strong></p><p id="d4af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms">线条图。</em> </strong>这是默认的熊猫图，它显示数据在整个数据集中每一列的变化情况。y轴是数据集中所有观察值的数字行，在我们的例子中是0到77行。然后，对于每个数字特征，绘制点，并绘制一条穿过所有点的线。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="4314" class="md me it ly b gy mf mg l mh mi">df.plot()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/9eea13649f20306222e24697f7b6cd40.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*VIomvkf5TV37m1ySTvRk4Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者绘制的线图</p></figure><p id="45d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到钠和钾的含量最高，某些谷物的含量超过300。</p><p id="c6cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms">直方图。</em> </strong>显示数值特征中数值的分布，或数值的变化程度。我们包括参数<code class="fe lv lw lx ly b">kind=’box’</code>并且也旋转轴。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="7dbb" class="md me it ly b gy mf mg l mh mi">df.plot(kind='box', rot=45)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/7354c5e579da2002e72bb028105a48f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/1*s_ynUT3lLHSXv3TWthLCKw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者的箱线图</p></figure><p id="971b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，我们看到钠和钾在不同的谷物中变化很大，一些谷物含钠300，而另一些谷物含钠0。</p><p id="3f19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms">散点图。</em> </strong>这显示了两个数字特征如何通过绘制它们的关系而一起移动。我们必须提供<code class="fe lv lw lx ly b">x,y,</code>和<code class="fe lv lw lx ly b">kind</code>参数。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="bc3d" class="md me it ly b gy mf mg l mh mi">df.plot(x = 'calories', y ='sugars'  ,kind='scatter')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/c9a9c54863054bf6846bd10c829e565f.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*H9TewTr6nd7MnfHnBInhwA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者散点图</p></figure><p id="ceec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到糖和卡路里之间的正相关。</p><p id="36c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms">酒吧剧情。</em> </strong>显示数字特征如何分布在分类特征中。在下面的代码中，我们修改了数据帧，将索引设置为“name ”,然后使用<code class="fe lv lw lx ly b">df.T</code>翻转列和行(转置),稍后将介绍。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/626b322970662601986f5d94e77c5d1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G-M8Ddi1xScrzhHGksMypg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按作者转置的数据框架</p></figure><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="85e8" class="md me it ly b gy mf mg l mh mi">df_t = df.set_index('name').T<br/>df_t.iloc[[2,4,6,8,10,-1], :5].plot(kind='bar')</span></pre><p id="59bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们使用<code class="fe lv lw lx ly b">df.iloc</code>选择行(矿物质和等级)来分析前5种谷物。注意评分最高的谷类食物是如何含有最少的卡路里、脂肪和糖，以及最高的纤维含量的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/305924e3e2771baf387e1f5574ac6994.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*BewcGOv-_Pet2Il5qGXoHA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者的条形图</p></figure><p id="ad56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/visualization.html#other-plots" rel="noopener ugc nofollow" target="_blank">您可以使用pandas创建的其他图</a>是<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/visualization.html#visualization-area-plot" rel="noopener ugc nofollow" target="_blank">区域</a>图、<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/visualization.html#visualization-hexbin" rel="noopener ugc nofollow" target="_blank"> hexbin </a>图和<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/visualization.html#visualization-pie" rel="noopener ugc nofollow" target="_blank">饼图。</a></p><p id="ffbf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas提供了基本的<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/visualization.html#plot-formatting" rel="noopener ugc nofollow" target="_blank">格式化</a>选项，例如移除图例、更改x和y标签、旋转轴标签以提高可读性，以及创建支线剧情。</p><p id="d165" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，这些图看起来并不令人惊讶，你可以使用<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/version/0.13.1/visualization.html" rel="noopener ugc nofollow" target="_blank"> matplotlib </a>、<a class="ae ky" href="http://seaborn.pydata.org/introduction.html" rel="noopener ugc nofollow" target="_blank"> seaborn、</a>和这里提到的<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/ecosystem.html#ecosystem-visualization" rel="noopener ugc nofollow" target="_blank">的其他库</a>来进一步扩展pandas的功能。</p><h2 id="13ed" class="md me it bd my mz na dn nb nc nd dp ne li nf ng nh lm ni nj nk lq nl nm nn no bi translated">第3部分:操作数据</h2><p id="93ec" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">6。重命名列和行索引</p><p id="c3ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时，您希望更改部分或全部列名，以使它们具有可读性。没有标题的数据帧需要一组全新的列名。</p><p id="8b8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms">重命名列</em> </strong></p><p id="af8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">要更改特定的</strong>列名，使用<code class="fe lv lw lx ly b">df.rename(columns=dict).</code>。dict参数包含需要重命名的列的“旧名称”到“新名称”的映射。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="0ca4" class="md me it ly b gy mf mg l mh mi">df.rename(columns = <br/>          {'mfr': 'manufacturer',<br/>          'potass': 'potassium'})</span></pre><p id="442c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">要更改所有</strong>列名，使用<code class="fe lv lw lx ly b">df.columns=list.</code>该列表包含所有<em class="ms">列的名称。</em></p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="3158" class="md me it ly b gy mf mg l mh mi">df3.columns = ['name', 'mfr', 'type', 'calories', 'protein', 'fat', 'sodium', 'fiber', 'carbo', 'sugars', 'potass', 'vitamins', 'shelf', 'weight', 'cups', 'rating']</span></pre><p id="99c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms">重命名行索引</em> </strong></p><p id="6fca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用了相同的函数<code class="fe lv lw lx ly b">df.rename(index=dict)</code>，但是使用了<code class="fe lv lw lx ly b">index</code>参数。字典是一个“旧索引名”对的字典。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="6bc1" class="md me it ly b gy mf mg l mh mi">df.rename(index={0:1000,<br/>                1:1001})</span></pre><p id="ad36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要同时重命名索引和列名，请在<code class="fe lv lw lx ly b">df.rename</code>函数中包含<code class="fe lv lw lx ly b">index</code>和<code class="fe lv lw lx ly b">column</code>参数。</p><p id="3f64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">7。删除和插入数据</p><p id="a63d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms">添加一列</em> </strong></p><p id="b2c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将从四个方面来看，但是首先让我们创建一个包含新列中的值的列表。值的数量必须等于它填充的行数，否则会导致<a class="ae ky" href="https://docs.python.org/3/library/exceptions.html#ValueError" rel="noopener ugc nofollow" target="_blank"> ValueError </a>。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="74c8" class="md me it ly b gy mf mg l mh mi">import numpy as np</span><span id="9c1a" class="md me it ly b gy nv mg l mh mi">rand_list = np.random.randint(0, 20, len(df))</span></pre><p id="dc6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用<a class="ae ky" rel="noopener" target="_blank" href="/4-fundamental-numpy-properties-every-data-scientist-must-master-c906236eb44b"> numpy库</a>来创建范围在0到20之间的随机整数，值的数量将等于行数。</p><p id="a685" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">方法一:<code class="fe lv lw lx ly b">df['col'] = values</code></p><p id="3133" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，我们引用方括号中的新列名，然后使用等号(=)来赋值。此方法也可用于替换现有列的值。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="8ac4" class="md me it ly b gy mf mg l mh mi">df['new_col'] = rand_list</span></pre><p id="d230" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，此新列显示为最后一列。</p><p id="4ce6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">方法二:<code class="fe lv lw lx ly b">df.loc[:, column_name] = values</code></p><p id="11b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还记得我们之前看的<code class="fe lv lw lx ly b">.loc</code>函数吗？第一部分引用行(and:表示所有行)。逗号后面的第二部分引用新列。然后我们赋值，新列出现在最后一个位置。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="be4c" class="md me it ly b gy mf mg l mh mi">df.loc[:, 'new_col'] = rand_list</span></pre><p id="09e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">方法三:<code class="fe lv lw lx ly b">df.insert(location, column_name, values)</code></p><p id="df1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，我们使用<code class="fe lv lw lx ly b">.insert</code>并提供我们想要插入列的位置(position )(位置从0开始计数)、列名和要填充的值。如果提供了一个值，则用它填充整个列。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="e8d8" class="md me it ly b gy mf mg l mh mi">df.insert(1, 'new_col', rand_list)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/535285c708fad6b9a06d8599a5ca6769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fktPVsooWl1NfwRhaP57Eg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="24db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，该方法就地修改原始数据帧<a class="ae ky" href="https://www.tutorialspoint.com/inplace-operator-in-python" rel="noopener ugc nofollow" target="_blank">而不制作副本。</a></p><p id="842c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">方法四:<code class="fe lv lw lx ly b">df.assign(col_name=values)</code></p><p id="14cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个方法返回一个修改过的数据帧，而不改变原来的数据帧，然后将这个修改过的副本赋给df变量。新列出现在最后一个位置。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="7b1f" class="md me it ly b gy mf mg l mh mi">df = df.assign(new_col = rand_list)</span></pre><p id="0a41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms">插入一行</em> </strong></p><p id="a51c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用类似于上面创建列的方法二的<code class="fe lv lw lx ly b">df.loc[index_name] = values</code>。首先，我们创建一个值列表来填充新行。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="9fb6" class="md me it ly b gy mf mg l mh mi">row_list = ['Awesome Oats', 'K', 'C', 100, 3, 1, 180, 2.0, 15.0, 5, 40, 25, 3, 1.0, 0.63, 75.345423]</span></pre><p id="8604" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们使用<code class="fe lv lw lx ly b">df.loc[name]</code>来指向那个索引，如果它不存在就创建它。然后我们使用赋值操作符(=)来赋值。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="c391" class="md me it ly b gy mf mg l mh mi">df.loc[77] = row_list</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/3eeaab0e947f1ff9f12cc24457d108d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R6Ddicdiym0q96UZ6JG5vw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="573a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要一次添加几行，您可以<a class="ae ky" href="https://www.kite.com/python/answers/how-to-create-a-pandas-dataframe-from-a-list-of-dictionaries-in-python" rel="noopener ugc nofollow" target="_blank">用新行创建一个新的数据框</a>，并使用<code class="fe lv lw lx ly b">pd.concat(df, df_new)</code>或<code class="fe lv lw lx ly b">df.append(df_new)</code>。</p><p id="47bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms">移除(删除)一列</em> </strong></p><p id="e00f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe lv lw lx ly b"> df.drop(columns=cols)</code>删除一列或多列。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="d9d9" class="md me it ly b gy mf mg l mh mi">df.drop(columns='sodium', inplace=True)</span></pre><p id="0c5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码删除了<code class="fe lv lw lx ly b">‘sodium’</code>列。<code class="fe lv lw lx ly b">inplace=True</code>就地修改原始数据帧，否则保留原始数据帧并返回修改后的df。</p><p id="c802" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms">删除一行</em> </strong></p><p id="6375" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe lv lw lx ly b">df.drop(index=row_index)</code>删除一行。查看此处的文档<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.drop.html" rel="noopener ugc nofollow" target="_blank">了解更多参数。</a></p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="a9fc" class="md me it ly b gy mf mg l mh mi">df.drop(index=76)</span></pre><p id="b3d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms">改变列顺序</em> </strong></p><p id="eae3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">方法1: <code class="fe lv lw lx ly b">df[[col2, col1, col5, col3]]</code>内部的方括号包含所需顺序的列名。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="d307" class="md me it ly b gy mf mg l mh mi">new_order = np.random.choice(col_list, 16)</span><span id="223e" class="md me it ly b gy nv mg l mh mi">df = df[new_order]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/194ea6134da6be3eb0b173b0b8a147e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9unvRvQFlZOBpMvFQNW3KA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按作者排序的列的图像</p></figure><p id="49e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">方法2: <code class="fe lv lw lx ly b">df.reindex(columns=col_list). </code>这个函数接受要返回的列名列表。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="2ea4" class="md me it ly b gy mf mg l mh mi">df.reindex(columns = new_order)</span></pre><p id="f8de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用这两种方法中的任何一种来分割数据帧并返回较少的列。</p><p id="ca14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms">翻转列与行(转置)</em> </strong></p><p id="ef2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用<code class="fe lv lw lx ly b">df.transpose()</code>或<code class="fe lv lw lx ly b">df.T</code>函数来交换行和列。例如，假设我们希望将谷物的名称作为特性，将特性作为行索引。</p><p id="4180" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先我们使用<code class="fe lv lw lx ly b">df.set_index</code>来设置名称作为索引。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/fd32e8d9dbf0587675a8d71383f7ec9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eS_i2yO4YEpdyKLaKAw9uA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="5048" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们调用<code class="fe lv lw lx ly b">df2.T</code>来转置索引和列。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/6ede9a8d568c090b603bdf6150458684.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*7y0vgMxHL1JOxlENZHYOBA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">转置数据帧bu作者</p></figure><p id="aba0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 8。分类数据</strong></p><p id="2739" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以对一列(Series对象)中的值进行排序，也可以按列对整个数据帧进行排序。</p><p id="6858" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms">排序一列</em> </strong></p><p id="2f31" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对“名称”列进行排序，并返回一个系列对象。参数<code class="fe lv lw lx ly b">ascending=False</code>按降序排序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/8199f0d0781bc5e509b25b31731e581d.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/format:webp/1*hClngMEf7_twNBtt9kjMfA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按作者排序的列</p></figure><p id="1776" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df.sort_values(‘name’)</code>返回按<code class="fe lv lw lx ly b">‘name’</code>列排序的整个数据帧。必须提供参数<code class="fe lv lw lx ly b">by=</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/55ab95c99025cdfe5d15db1d9e2c4763.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ysCYoop_hkdOLIX20gwcsw.png"/></div></div></figure><p id="6a2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ms">排序指标:</em> </strong></p><p id="ccc5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df[‘name’].sort_index()</code>按索引对“名称”列进行排序(下面的0到4)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/a56e5950af13d25932fe49c3838cc7d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:514/format:webp/1*YAb3YrTPxfegW68f9ZF4pw.png"/></div></figure><p id="c16e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">df2.sort_index(ascending=False)</code>按索引降序排列整个数据帧。当索引是日期时，这尤其有用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/16215b88fe399c32220817262ec7288f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O6bq5mfHHHr3x6UD-DSXNg.png"/></div></div></figure></div><div class="ab cl ot ou hx ov" role="separator"><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy"/></div><div class="im in io ip iq"><h2 id="7d05" class="md me it bd my mz na dn nb nc nd dp ne li nf ng nh lm ni nj nk lq nl nm nn no bi translated">结论</h2><p id="c4d6" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">在本教程中，我们使用<a class="ae ky" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> pandas </a>库进行<a class="ae ky" href="https://pandas.pydata.org/docs/user_guide/10min.html#min" rel="noopener ugc nofollow" target="_blank">数据分析</a>和操作。我们还研究了一些<a class="ae ky" href="https://pandas.pydata.org/docs/user_guide/visualization.html" rel="noopener ugc nofollow" target="_blank">可视化</a>技术，以及如何使用额外的<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/ecosystem.html#ecosystem-visualization" rel="noopener ugc nofollow" target="_blank">库</a>来扩展它们的功能。</p><p id="14f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这绝不是熊猫的详尽视图，文档<a class="ae ky" href="https://pandas.pydata.org/docs/reference/index.html#api" rel="noopener ugc nofollow" target="_blank">提供了深入的代码和功能。我鼓励您使用这里共享的代码片段的几种变体进行实践，并尝试几个参数。只有这样做，你才能了解熊猫的全部力量。</a></p><p id="c140" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有使用的代码都是GitHub上的<a class="ae ky" href="https://github.com/suemnjeri/medium-articles/blob/d44fcd70d67e7704627ca7c58ee2652cfad6a9f2/Pandas%20functions/Pandas%20tutorial.ipynb" rel="noopener ugc nofollow" target="_blank">这里</a>。感谢您的阅读！</p></div></div>    
</body>
</html>