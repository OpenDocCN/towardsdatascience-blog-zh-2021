<html>
<head>
<title>A Practical Summary of Pandas in 30 Python Snippets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">30个Python片段中的熊猫实用摘要</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-practical-summary-of-pandas-in-30-python-snippets-c2d6ce84415e?source=collection_archive---------36-----------------------#2021-10-04">https://towardsdatascience.com/a-practical-summary-of-pandas-in-30-python-snippets-c2d6ce84415e?source=collection_archive---------36-----------------------#2021-10-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/0e06df7f443eeab2a009b3c18e705b9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*R4c3M97criflbB_P"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://unsplash.com/@kmuza?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卡洛斯·穆扎</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><div class=""/><div class=""><h2 id="1c44" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">理解pandas库中主要功能的基本脚本</h2></div><p id="55c8" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Pandas是数据科学和机器学习最重要的Python库之一。我几乎每天都使用它，但我总是觉得我错过了有用的功能，所以我决定写一个压缩的总结来帮助指导我的熊猫技能的进步。</p><p id="e2fa" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我将用30个Python片段来分享pandas库主要功能的实用摘要。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="9b48" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">这些功能</h1><p id="ba8f" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">我们将在此介绍的功能包括:</p><ul class=""><li id="190c" class="my mz jj la b lb lc le lf lh na ll nb lp nc lt nd ne nf ng bi translated">使用数据框架</li><li id="4fe2" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">读取和写入表格数据</li><li id="6736" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">过滤数据帧中的行</li><li id="d0a6" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">选择特定的行和列</li><li id="c126" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">创建地块</li><li id="1cfd" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">从现有列创建新列</li><li id="8493" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">计算汇总统计数据</li><li id="a745" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">对表中的值进行排序</li><li id="4732" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">组合多个表中的数据</li><li id="2552" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">处理时间序列数据</li><li id="d25e" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">操作文本数据</li></ul><p id="9be1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们开始吧！</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="c51f" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">使用数据框架</h1><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/18e148584677ccce25c63b67ee27cf64.png" data-original-src="https://miro.medium.com/v2/format:webp/1*h80dDktLwbZEwVDrwWVb5w.png"/></div></figure><p id="3709" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们从从字典创建一个基本数据帧开始:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="50e2" class="nw mc jj ns b gy nx ny l nz oa">import pandas as pd<br/><br/>data = {"Country": ["Portugal", "USA", "France"],<br/>             "Population": [10.31*10**6, 329.5*10**6, 67.39*10**6]<br/>               }<br/><br/>df = pd.DataFrame(data)<br/><br/>df</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/405165e9f9ba9ee76b1133afc0506a0a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*7NGJ8VBDSag2s39C-PESqA.png"/></div></figure><p id="2564" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当您使用Python字典创建pandas数据帧时，字典中的键将是数据帧的列标题，相应的值将是列。您可以在同一数据帧中存储多种数据类型。</p><p id="5f79" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要从pandas数据框架中选择一列，我们需要:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="a091" class="nw mc jj ns b gy nx ny l nz oa">df["Country"]</span><span id="c65b" class="nw mc jj ns b gy ob ny l nz oa"># Output</span><span id="bc3c" class="nw mc jj ns b gy ob ny l nz oa">0    Portugal<br/>1         USA<br/>2      France<br/>Name: Country, dtype: object</span></pre><p id="6764" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用方括号“[]”，这将返回一个<code class="fe oc od oe ns b">Series</code>对象。</p><p id="6e0d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如文档中所述:</p><blockquote class="of og oh"><p id="2523" class="ky kz oi la b lb lc kk ld le lf kn lg oj li lj lk ok lm ln lo ol lq lr ls lt im bi translated">pandas系列没有列标签，因为它只是数据帧中的一列。系列确实有行标签。</p></blockquote><p id="e0a9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们还可以根据pandas的解释检查每一列的数据类型:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="ec13" class="nw mc jj ns b gy nx ny l nz oa">df.dtypes</span><span id="ae8f" class="nw mc jj ns b gy ob ny l nz oa">Country        object<br/>Population    float64<br/>dtype: object</span></pre><p id="e227" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这种情况下，数据类型是浮点(<code class="fe oc od oe ns b">float64</code>)和字符串(<code class="fe oc od oe ns b">object</code>)</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="015c" class="nw mc jj bd md om on dn mh oo op dp ml lh oq or mn ll os ot mp lp ou ov mr ow bi translated">读取和写入表格数据</h2><p id="9c4c" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">Pandas提供了<code class="fe oc od oe ns b">read_csv()</code>功能，将存储为csv文件的数据读入pandas数据帧。Pandas支持许多不同的文件格式或现成的数据源(csv、excel、sql、json、parquet)。</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="e36f" class="nw mc jj ns b gy nx ny l nz oa">df = pd.read_csv("Advertising.csv")<br/><br/>df</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/b2f905159607356922c291cd87516675.png" data-original-src="https://miro.medium.com/v2/format:webp/1*L75zvEfgv3Ge4T_uHmDz6A.png"/></div></figure><p id="f547" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您想查看数据的受控子集，您可以:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="6fe1" class="nw mc jj ns b gy nx ny l nz oa">df.head(8)</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/25489c75cc53f404aa4cad4d87701838.png" data-original-src="https://miro.medium.com/v2/format:webp/1*XXrnP02E9iI5dYJSLHysqg.png"/></div></figure><p id="c355" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里我们只显示了数据帧的前8行。</p><p id="4d2c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们想要可视化数据帧的最后8行，我们可以:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="e18c" class="nw mc jj ns b gy nx ny l nz oa">df.tail(8)</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/7db66d49ce8ebbaea8e34f99dfc94686.png" data-original-src="https://miro.medium.com/v2/format:webp/1*kz68XTrPieaYeVwg1Ciz1g.png"/></div></figure><p id="bf0d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们还可以用熊猫轻松读取excel文件:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="3b31" class="nw mc jj ns b gy nx ny l nz oa">df = pd.read_excel("Advertising.xlsx")<br/>df</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/b2f905159607356922c291cd87516675.png" data-original-src="https://miro.medium.com/v2/format:webp/1*L75zvEfgv3Ge4T_uHmDz6A.png"/></div></figure><p id="bc25" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以从数据帧中获得技术总结:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="f288" class="nw mc jj ns b gy nx ny l nz oa">df.info()</span><span id="6ed5" class="nw mc jj ns b gy ob ny l nz oa"># Output</span><span id="a43c" class="nw mc jj ns b gy ob ny l nz oa">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 200 entries, 0 to 199<br/>Data columns (total 4 columns):<br/> #   Column     Non-Null Count  Dtype  <br/>---  ------     --------------  -----  <br/> 0   TV         200 non-null    float64<br/> 1   radio      200 non-null    float64<br/> 2   newspaper  200 non-null    float64<br/> 3   sales      200 non-null    float64<br/>dtypes: float64(4)<br/>memory usage: 6.4 KB</span></pre><p id="1c21" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这将输出关于数据帧的技术信息，如条目数、数据类型、列数、空值数等。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="b1ae" class="nw mc jj bd md om on dn mh oo op dp ml lh oq or mn ll os ot mp lp ou ov mr ow bi translated">过滤数据帧中的行</h2><p id="e9c8" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">假设我对收视率大于100.0的电视节目感兴趣，我如何过滤我的数据帧以获得特定的子集？</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="c2cf" class="nw mc jj ns b gy nx ny l nz oa">df[df["TV"]&gt;100]</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/f5ebbf0569e27f71b73092bc3c18514a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*7Wxilq5sDM6B9XwlRBky7g.png"/></div></figure><p id="aa3a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们还可以使用条件表达式来帮助过滤。例如，假设我们有titanic数据集(与Pandas文档中使用的相同):</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="af27" class="nw mc jj ns b gy nx ny l nz oa">df = pd.read_csv("titanic.csv")<br/>df</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/d87603774f826400d0a6c6bcf275e9db.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Y__3Mscf5GMjPVitKA3gQQ.png"/></div></figure><p id="b572" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们希望从35岁以下的幸存者那里获得信息，然后我们会使用:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="addc" class="nw mc jj ns b gy nx ny l nz oa">survived_under_35 = df[(df["Survived"]==1) &amp; (df["Age"]&lt;35)]<br/>survived_under_35</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/1ec4bd9a67028be9eadc4c65a5769f09.png" data-original-src="https://miro.medium.com/v2/format:webp/1*0NxbZdmfBGcRetrVbYt5qw.png"/></div></figure><p id="defb" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这里，我们使用括号内的条件表达式结合这里的<code class="fe oc od oe ns b">and</code>操作符作为<code class="fe oc od oe ns b">&amp;</code>来组合两个过滤语句。</p><p id="8877" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们只想处理特定列中非空的值，我们可以使用条件函数<code class="fe oc od oe ns b">notna()</code>，它返回<code class="fe oc od oe ns b">True</code>每一行的值都不是空值。</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="1a86" class="nw mc jj ns b gy nx ny l nz oa">df[df["Age"].notna()]</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/791d8d22f7d2a6ae0f4ab173df4c8d6a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*azEFzn5-cgUuN-3tugLAXA.png"/></div></figure><p id="3cb2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">关于条件表达式和过滤的更多信息，请参见<a class="ae jg" href="https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/03_subset_data.html" rel="noopener ugc nofollow" target="_blank"> pandas文档</a>的这一部分。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="9f77" class="nw mc jj bd md om on dn mh oo op dp ml lh oq or mn ll os ot mp lp ou ov mr ow bi translated">选择特定的行和列</h2><p id="1b44" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">假设我想要40岁以上乘客的名字。因为我想要行和列的子集，仅仅使用选择括号<code class="fe oc od oe ns b">[]</code>已经不够了，所以我使用了<code class="fe oc od oe ns b">loc/iloc</code>操作符:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="9d69" class="nw mc jj ns b gy nx ny l nz oa">df.loc[df["Age"]&gt;40, "Name"]</span><span id="6658" class="nw mc jj ns b gy ob ny l nz oa">6                                McCarthy, Mr. Timothy J<br/>11                              Bonnell, Miss. Elizabeth<br/>15                      Hewlett, Mrs. (Mary D Kingcome) <br/>33                                 Wheadon, Mr. Edward H<br/>35                        Holverson, Mr. Alexander Oskar<br/>                             ...                        <br/>862    Swift, Mrs. Frederick Joel (Margaret Welles Ba...<br/>865                             Bystrom, Mrs. (Karolina)<br/>871     Beckwith, Mrs. Richard Leonard (Sallie Monypeny)<br/>873                          Vander Cruyssen, Mr. Victor<br/>879        Potter, Mrs. Thomas Jr (Lily Alexenia Wilson)<br/>Name: Name, Length: 150, dtype: object</span></pre><p id="2f61" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如文档中所述:</p><blockquote class="of og oh"><p id="6101" class="ky kz oi la b lb lc kk ld le lf kn lg oj li lj lk ok lm ln lo ol lq lr ls lt im bi translated">使用loc/iloc时，逗号前的部分是您想要的行，逗号后的部分是您想要选择的列。</p></blockquote><p id="836f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用列名、行标签或条件表达式时，在选择括号<code class="fe oc od oe ns b">[]</code>前使用loc运算符。</p><p id="7401" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于逗号前后的部分，可以使用单个标签、标签列表、标签片段、条件表达式或冒号。如果您使用冒号，这意味着您想要选择所有行或列。</p><p id="7ce9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当您的选择基于表上的位置时，例如使用<code class="fe oc od oe ns b">iloc.</code>,假设您想要23到42行和1到3列:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="6dd0" class="nw mc jj ns b gy nx ny l nz oa">df.iloc[22:42, 0:3]</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/872ec7dba5df8c15565c15354e268bb1.png" data-original-src="https://miro.medium.com/v2/format:webp/1*W_0fOpsyyS2dKoBKsm3OoQ.png"/></div></figure><p id="4977" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当使用<code class="fe oc od oe ns b">loc|iloc</code>选择特定的行和/或列时，新值可以分配给所选数据。例如，将名称anonymous分配给第三列的前三个元素。有关选择的更多信息，请参见<a class="ae jg" href="https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/03_subset_data.html" rel="noopener ugc nofollow" target="_blank">此处</a>。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="61bf" class="nw mc jj bd md om on dn mh oo op dp ml lh oq or mn ll os ot mp lp ou ov mr ow bi translated">创建地块</h2><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="8258" class="nw mc jj ns b gy nx ny l nz oa">df = pd.read_csv("Advertising.csv")</span></pre><p id="6ca1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您想快速可视化数据，您可以简单地调用<code class="fe oc od oe ns b">.plot()</code>方法:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="a5d0" class="nw mc jj ns b gy nx ny l nz oa">df.plot();</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/9090228b9e80857836fed0031109b2eb.png" data-original-src="https://miro.medium.com/v2/format:webp/1*73kPdvObcm90OC7wSKIznw.png"/></div></figure><p id="7e0b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这里，pandas用数字数据为每一列创建了一个单线图。如果您想得到具体的数据，您可以选择所需的列，例如，假设您只想绘制销售额:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="5628" class="nw mc jj ns b gy nx ny l nz oa">df["sales"].plot();</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/08a23aeff54f5b16ec3c052caf278bc0.png" data-original-src="https://miro.medium.com/v2/format:webp/1*INkqYMubA14q4yFysGRAOA.png"/></div></figure><p id="cf30" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你想评估电视/广播/报纸收视率对销售额的影响，你可以将它们一个一个地对比:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="5549" class="nw mc jj ns b gy nx ny l nz oa">df.plot.scatter(x="TV", y="sales", alpha=0.6);</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/0649657febfca17d88c2c74adf85aeb3.png" data-original-src="https://miro.medium.com/v2/format:webp/1*GPnr-Qy4NjFLDIW7Xvj3AQ.png"/></div></figure><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="59ca" class="nw mc jj ns b gy nx ny l nz oa">df.plot.scatter(x="radio", y="sales", alpha=0.6);</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/7a2eb03568db155dfb06814176c77de1.png" data-original-src="https://miro.medium.com/v2/format:webp/1*tsPoXj5n7bntrPemQxJZ4Q.png"/></div></figure><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="aa5b" class="nw mc jj ns b gy nx ny l nz oa">df.plot.scatter(x="newspaper", y="sales", alpha=0.6);</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/dc3cc1f055b9eabf7004ba322f73db74.png" data-original-src="https://miro.medium.com/v2/format:webp/1*YvdBr0hRj2eshRIkza6twA.png"/></div></figure><p id="75dd" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">pandas中有许多绘图选项，我们可以使用Python中内置的dir()函数来检查它们:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="e4f2" class="nw mc jj ns b gy nx ny l nz oa">for method_name in dir(df.plot):<br/>    if not method_name.startswith("_"):<br/>        print(method_name)</span><span id="24de" class="nw mc jj ns b gy ob ny l nz oa">area<br/>bar<br/>barh<br/>box<br/>density<br/>hexbin<br/>hist<br/>kde<br/>line<br/>pie<br/>scatter</span></pre><p id="8ab1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">关于熊猫的更多绘图，查看熊猫文档的这一部分。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="1f6d" class="nw mc jj bd md om on dn mh oo op dp ml lh oq or mn ll os ot mp lp ou ov mr ow bi translated">从现有列创建新列</h2><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/be7b158fdaa3018a42ce4abaca3ec048.png" data-original-src="https://miro.medium.com/v2/format:webp/1*-BlBWFEPsoDrnsEET8yU9w.png"/></div></figure><p id="5a1d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在pandas中创建新的专栏很简单。只需使用括号<code class="fe oc od oe ns b">[]</code>在左侧分配新的列名，在右侧分配该列的数据:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="2d50" class="nw mc jj ns b gy nx ny l nz oa">df["Date"] = pd.date_range("1965-01-01", periods=len(df))<br/>df</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/7d531b6b0ad0bcd66c77a47b9c121a3c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*S399UH1YIzMPWcMKc8_jjA.png"/></div></figure><p id="9ae0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="oi">注意:这里我还使用了另一个名为</em> <code class="fe oc od oe ns b"><em class="oi">date_range</em></code> <em class="oi">的cool pandas方法，它以</em> <code class="fe oc od oe ns b"><em class="oi">period</em></code> <em class="oi">参数指定的周期从一个起点生成一个日期值列表。</em></p><p id="0cc1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，如果我们想从一个现有的列创建一个新的列呢？例如，假设我们有熊猫文档使用的空气质量数据集:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="aec4" class="nw mc jj ns b gy nx ny l nz oa">df = pd.read_csv("air_quality_no2.csv")<br/>df</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/faba2727b6be0be2afd9d29f67b7269f.png" data-original-src="https://miro.medium.com/v2/format:webp/1*knrPgmeofsKAVWqizDDTmg.png"/></div></figure><p id="f242" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">假设您想要检查安特卫普与伦敦的值的比率，并将结果保存为新列:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="0dbf" class="nw mc jj ns b gy nx ny l nz oa">df["ratio_antwerp_london"] = (df["station_antwerp"] / df["station_london"])<br/>df</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/0bd81d3f0fc3e72c3beb8224bc72950d.png" data-original-src="https://miro.medium.com/v2/format:webp/1*kdfr3iww7gBi-fDvRj52UQ.png"/></div></figure><p id="1318" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您想对一列应用一个更复杂的函数，并将结果保存为dataframe的一个新列，您可以使用<code class="fe oc od oe ns b">.apply()</code>方法。</p><p id="37eb" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，让我们对来自伦敦站的NO2值应用条件，其中，如果它们大于阈值，则输出将为“高”，否则为“低”:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="b557" class="nw mc jj ns b gy nx ny l nz oa">def highLow(temp):<br/>    if temp &gt; 24.77:<br/>        return "High"<br/>    else:<br/>        return "Low"<br/>df["station_london_high_low"] = df["station_london"].apply(highLow)<br/>df</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/ae5fbebffa42d4b2aa2ea93d58559888.png" data-original-src="https://miro.medium.com/v2/format:webp/1*NOo8-1mFy5BgoWFT_z5DFA.png"/></div></figure><p id="f139" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用熊猫<code class="fe oc od oe ns b">.rename()</code>重命名数据列:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="9ba1" class="nw mc jj ns b gy nx ny l nz oa">data = {"Name": ["John", "Mary", "Paul"],<br/>             "Age": [20,25,30],<br/>             "Occupation": ["Software Engineer", "Artist", "Product Manager"]<br/>               }<br/><br/>df = pd.DataFrame(data)<br/><br/>df_renamed = df.rename(columns={"Name":"First Name", <br/>                                     "Occupation": "Job"})<br/>df_renamed</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/bb56fab93bbd021defa87726492df35d.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Tyl6HEXA8Uy6P4FD_C0qeg.png"/></div></figure><p id="9c5d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">注意，我不必重命名所有的列，因为<code class="fe oc od oe ns b">Age</code>列保持不变。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="6d22" class="nw mc jj bd md om on dn mh oo op dp ml lh oq or mn ll os ot mp lp ou ov mr ow bi translated">计算汇总统计数据</h2><p id="cf35" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">计算熊猫的统计数据非常简单:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="bade" class="nw mc jj ns b gy nx ny l nz oa">df = pd.read_csv("titanic.csv")<br/><br/>print(df["Age"].mean())<br/>print(df["Age"].max())<br/>print(df["Age"].min())<br/>print(df["Age"].median())</span><span id="2d71" class="nw mc jj ns b gy ob ny l nz oa">29.69911764705882<br/>80.0<br/>0.42<br/>28.0</span><span id="fd3f" class="nw mc jj ns b gy ob ny l nz oa">df.describe()</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/73232d0cccd062e8649fccd1fc38b9b5.png" data-original-src="https://miro.medium.com/v2/format:webp/1*CKMzx-MydoXYWbgLuG70cg.png"/></div></figure><p id="0e8f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您还可以计算给定列的聚合统计信息的特定组合:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="291e" class="nw mc jj ns b gy nx ny l nz oa">df.agg(<br/>    {<br/>        "Age": ["min", "max", "mean"],<br/>        "Parch": ["min", "max", "mean"]<br/>    }<br/>)</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/9c074294015f4401a10387702db0bec9.png" data-original-src="https://miro.medium.com/v2/format:webp/1*oFKUiZt7M35-lmAWR-WfRg.png"/></div></figure><p id="5dbb" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe oc od oe ns b">.describe()</code>方法可以方便地加快速度:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="7a00" class="nw mc jj ns b gy nx ny l nz oa">df.describe()</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/62d5152e9d2e728c94e3cbf15f08e4ba.png" data-original-src="https://miro.medium.com/v2/format:webp/1*uibEpITdP59RADJRDmbwIw.png"/></div></figure><p id="0ff6" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它提供了表格中数字数据的快速概览。您还可以通过一行代码按类别计算值/记录的数量:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="e185" class="nw mc jj ns b gy nx ny l nz oa">df["Pclass"].value_counts()</span><span id="4caa" class="nw mc jj ns b gy ob ny l nz oa">3    491<br/>1    216<br/>2    184<br/>Name: Pclass, dtype: int64</span></pre><p id="ff7f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以在这个<a class="ae jg" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/basics.html#basics-stats" rel="noopener ugc nofollow" target="_blank">部分</a>看到更多细节。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="cdd1" class="nw mc jj bd md om on dn mh oo op dp ml lh oq or mn ll os ot mp lp ou ov mr ow bi translated">对表中的值进行排序</h2><p id="facb" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">假设你有一个姓名和年龄的数据集:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="abbe" class="nw mc jj ns b gy nx ny l nz oa">data = {<br/>                "Name": ["Lucas", "Beatriz", "Clara", "Sara"],<br/>                "Age": [30, 26, 20, 22]<br/>               }<br/>df = pd.DataFrame(data)<br/>df</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/412cabbe0701fa934ba2f162e39f9f1f.png" data-original-src="https://miro.medium.com/v2/format:webp/1*bZM9j03Dzst-Nsi9VRMgzQ.png"/></div></figure><p id="9f18" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你想按年龄分类:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="cf0f" class="nw mc jj ns b gy nx ny l nz oa">df.sort_values(by="Age")</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/9bc16dd7d206f574d2336095870ad112.png" data-original-src="https://miro.medium.com/v2/format:webp/1*AC9K3xXUgYN964g2_uFQqA.png"/></div></figure><p id="34c9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您也可以按降序排列:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="9816" class="nw mc jj ns b gy nx ny l nz oa">df.sort_values(by="Age", ascending=False)</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/3f35caa01724b51b5aace128909a1076.png" data-original-src="https://miro.medium.com/v2/format:webp/1*MbIxLz647mCN3j8sFGuiZg.png"/></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="cdd2" class="nw mc jj bd md om on dn mh oo op dp ml lh oq or mn ll os ot mp lp ou ov mr ow bi translated">组合多个表中的数据</h2><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="0972" class="nw mc jj ns b gy nx ny l nz oa">df1 = pd.DataFrame(<br/>    {<br/>        "Name": ["Lucas", "Beatriz", "Clara", "Sara"],<br/>         "Age": [30, 26, 20, 22]<br/>    }<br/>)<br/><br/>df2 = pd.DataFrame(<br/>     {<br/>         "Name": ["John", "Mary"],<br/>         "Age": [45, 38]<br/>     }<br/>)<br/>df_names_ages = pd.concat([df1, df2], axis=0)<br/>df_names_ages</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/90e8ebe34f486a2f4d03e3be40c46579.png" data-original-src="https://miro.medium.com/v2/format:webp/1*D7mK-W4Qnuo4j9HgZMnWtg.png"/></div></figure><p id="fbde" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">也可以使用共享列合并两个数据帧。</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="2e41" class="nw mc jj ns b gy nx ny l nz oa">df1 = pd.DataFrame(<br/>    {<br/>        "Name": ["Lucas", "Beatriz", "Clara", "Sara"],<br/>         "Age": [30, 26, 20, 22],<br/>        "City": ["Lisbon", "Barcelona", "London", "Paris"],<br/>    }<br/>)<br/><br/>df2 = pd.DataFrame(<br/>     {<br/>         "City": ["Lisbon", "Barcelona", "London", "Paris"],<br/>         "Occupation": ["Machine Learning Enginner", "Scientist", "Writer","Teacher"]<br/>     }<br/>)<br/><br/>df_merged = pd.merge(df1,df2,how="left", on="City")<br/>df_merged</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/d2c26bc96ffc50870e821dfbb88321f2.png" data-original-src="https://miro.medium.com/v2/format:webp/1*SFx1nF25nqDztfo_H5Qj6Q.png"/></div></figure><p id="18d9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这个<a class="ae jg" href="https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/08_combine_dataframes.html" rel="noopener ugc nofollow" target="_blank">部分</a>你可以了解更多关于pandas中的连接和合并。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="e8cd" class="nw mc jj bd md om on dn mh oo op dp ml lh oq or mn ll os ot mp lp ou ov mr ow bi translated">处理时间序列数据</h2><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="077c" class="nw mc jj ns b gy nx ny l nz oa">import pandas as pd<br/>import matplotlib.pyplot as plt</span></pre><p id="e143" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">假设我们有这样一个数据集:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="d2f8" class="nw mc jj ns b gy nx ny l nz oa">df = pd.read_csv("typingPerformance.csv")<br/>df</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/f79001f58a0c0e2974e4533c6ac481c9.png" data-original-src="https://miro.medium.com/v2/format:webp/1*l2nYY4gzLJFU_8IO2uc2lQ.png"/></div></figure><p id="c0b5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="oi">这实际上是我创建的一个数据集，用来跟踪我的触摸打字性能，以显示我在键盘上打字的速度。</em></p><p id="711a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里的一个问题是“日期”列的数据类型是一个<code class="fe oc od oe ns b">string</code>。我希望它是一个<code class="fe oc od oe ns b">datetime</code>对象，这样我就可以对它执行标准的日期操作。Pandas提供了一种将列转换为datetime对象的简单方法:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="7ef4" class="nw mc jj ns b gy nx ny l nz oa">df["date"] = pd.to_datetime(df["date"])<br/>df</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/f79001f58a0c0e2974e4533c6ac481c9.png" data-original-src="https://miro.medium.com/v2/format:webp/1*l2nYY4gzLJFU_8IO2uc2lQ.png"/></div></figure><p id="2505" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，我们可以检查数据类型以确保它是<code class="fe oc od oe ns b">datetime</code>:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="ce33" class="nw mc jj ns b gy nx ny l nz oa">df.dtypes</span><span id="e1df" class="nw mc jj ns b gy ob ny l nz oa">date        datetime64[ns]<br/>wpm                 object<br/>accuracy           float64<br/>dtype: object</span></pre><p id="f2c9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">完美！现在我们可以用简单的表达回答问题了。比如，我什么时候开始跟踪我的打字表现？</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="0211" class="nw mc jj ns b gy nx ny l nz oa">df["date"].min()</span><span id="7cb8" class="nw mc jj ns b gy ob ny l nz oa">Timestamp('2021-01-14 00:00:00')</span></pre><p id="4010" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我上次练习是什么时候？</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="5d7f" class="nw mc jj ns b gy nx ny l nz oa">df["date"].max()</span><span id="e8a4" class="nw mc jj ns b gy ob ny l nz oa">Timestamp('2021-10-01 00:00:00')</span></pre><p id="a7d1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我追踪了多久？</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="c8f7" class="nw mc jj ns b gy nx ny l nz oa">df["date"].max() - df['date'].min()</span><span id="dd6c" class="nw mc jj ns b gy ob ny l nz oa">Timedelta('260 days 00:00:00')</span></pre><p id="f90c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，我可以创建一个新列，指定一些关于日期的信息，如创建该数据点的月份:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="a8ab" class="nw mc jj ns b gy nx ny l nz oa">df["month"] = df["date"].dt.month<br/>df</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/d04c7702b83c5a92b745f0ba2f338403.png" data-original-src="https://miro.medium.com/v2/format:webp/1*nPzL9qjtS-GObkJ7syJZBA.png"/></div></figure><p id="9fe9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，我可以画出每个月的平均wpm(每分钟字数)表现:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="20ca" class="nw mc jj ns b gy nx ny l nz oa">df_monthly_performance = df.groupby("month")["wpm"].mean()</span><span id="484f" class="nw mc jj ns b gy ob ny l nz oa">df_monthly_performance.plot()<br/>plt.ylabel("wpm");</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/10d88b69c6f430a5d3a2966630b73a9a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*FsDHAKBxJevWx0rF23P_WA.png"/></div></figure><p id="9d77" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">pandas中有大量与日期相关的功能，我建议查看文档的这一<a class="ae jg" href="https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/09_timeseries.html" rel="noopener ugc nofollow" target="_blank">部分，以了解更多信息！</a></p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="030c" class="nw mc jj bd md om on dn mh oo op dp ml lh oq or mn ll os ot mp lp ou ov mr ow bi translated">操作文本数据</h2><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="194c" class="nw mc jj ns b gy nx ny l nz oa">data = {"Full Name": ["Mark Harrison Junior", "Mary Elisabeth"],<br/>             "Age": [40, 50]}<br/><br/>df = pd.DataFrame(data)<br/>df</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/0b94e748f53bfa0364c50cbe54764840.png" data-original-src="https://miro.medium.com/v2/format:webp/1*CHg7AuB9KKIYX8_r1uIkwQ.png"/></div></figure><p id="c6bd" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以使用<code class="fe oc od oe ns b">.str()</code>方法来处理字符串列。例如，我们可以使给定列中的所有字符串都小写:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="65bb" class="nw mc jj ns b gy nx ny l nz oa">df["Full Name"].str.lower()</span><span id="30ee" class="nw mc jj ns b gy ob ny l nz oa">0    mark harrison junior<br/>1          mary elisabeth<br/>Name: Full Name, dtype: object</span></pre><p id="f615" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">或者基于给定列的文本操作创建另一列:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="580a" class="nw mc jj ns b gy nx ny l nz oa">df["Last Name"] = df["Full Name"].str.split(" ").str.get(-1)<br/>df</span></pre><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="ab gu cl nq"><img src="../Images/363ff14bf38deb0f1f83ac7afbfdabab.png" data-original-src="https://miro.medium.com/v2/format:webp/1*kgBvNZmTle4gLcm3d9wy4A.png"/></div></figure><p id="3604" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以检查字符串列是否包含某个字符串:</p><pre class="nm nn no np gt nr ns nt nu aw nv bi"><span id="dfdf" class="nw mc jj ns b gy nx ny l nz oa">df["Full Name"].str.contains("Junior")</span><span id="64c4" class="nw mc jj ns b gy ob ny l nz oa">0     True<br/>1    False<br/>Name: Full Name, dtype: bool</span></pre><p id="830d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以在本<a class="ae jg" href="https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/10_text_data.html" rel="noopener ugc nofollow" target="_blank">部分</a>中了解更多关于文本操作的信息。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="6f7f" class="nw mc jj bd md om on dn mh oo op dp ml lh oq or mn ll os ot mp lp ou ov mr ow bi translated">学习熊猫</h2><p id="a675" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">Pandas是数据科学家和机器学习工程师最常用的Python库之一。它具有惊人的功能，如果掌握得当，在处理数据和加快工作流程时会有很大的帮助。</p><p id="5704" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">花时间以正确的方式学习pandas，阅读文档，练习每个项目中经常出现的单个功能，我保证结果会不言自明。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><p id="7aa9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你想了解更多关于熊猫的知识，可以看看Udemy的这两门课程:</p><ul class=""><li id="0d8d" class="my mz jj la b lb lc le lf lh na ll nb lp nc lt nd ne nf ng bi translated"><a class="ae jg" href="http://seekoapp.io/6159992e0b3251000962ac59" rel="noopener ugc nofollow" target="_blank">终极熊猫训练营</a></li><li id="58b6" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated"><a class="ae jg" href="http://seekoapp.io/615999688ff9b600082a55e3" rel="noopener ugc nofollow" target="_blank">熊猫数据分析</a></li></ul><blockquote class="of og oh"><p id="ef77" class="ky kz oi la b lb lc kk ld le lf kn lg oj li lj lk ok lm ln lo ol lq lr ls lt im bi translated">(这些是附属链接，如果你使用它们，我会得到一小笔佣金，干杯！:))</p></blockquote></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><p id="0398" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你喜欢这篇文章，在<a class="ae jg" href="https://lucas-soares.medium.com/" rel="noopener">媒体</a>、<a class="ae jg" href="https://lucas-soares.medium.com/subscribe" rel="noopener">上关注我，订阅我的时事通讯</a>，或者<a class="ae jg" href="https://lucas-soares.medium.com/membership" rel="noopener">加入媒体</a>(如果你还没有的话:)。在<a class="ae jg" href="https://twitter.com/LucasEnkrateia" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae jg" href="https://www.linkedin.com/in/lucas-soares-969044167/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae jg" href="https://www.instagram.com/theaugmentedself/" rel="noopener ugc nofollow" target="_blank"> Instagram </a>上和我联系！谢谢，下次再见！:)</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="67ff" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">参考</h1><ul class=""><li id="9286" class="my mz jj la b lb mt le mu lh ox ll oy lp oz lt nd ne nf ng bi translated"><a class="ae jg" href="https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/01_table_oriented.html#min-tut-01-tableoriented" rel="noopener ugc nofollow" target="_blank">熊猫文档</a></li><li id="069b" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated"><a class="ae jg" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/index.html#user-guide" rel="noopener ugc nofollow" target="_blank">熊猫用户指南</a></li><li id="cc50" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated"><a class="ae jg" href="https://excalidraw.com/" rel="noopener ugc nofollow" target="_blank"> excalidraw </a></li></ul></div></div>    
</body>
</html>