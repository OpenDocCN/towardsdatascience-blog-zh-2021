<html>
<head>
<title>Selecting the Best Predictors for Linear Regression in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">选择R中线性回归的最佳预测值</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/selecting-the-best-predictors-for-linear-regression-in-r-f385bf3d93e9?source=collection_archive---------2-----------------------#2021-05-23">https://towardsdatascience.com/selecting-the-best-predictors-for-linear-regression-in-r-f385bf3d93e9?source=collection_archive---------2-----------------------#2021-05-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b4b4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用R中的leaps软件包选择线性回归的最显著因变量</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/85ce526c6d22ec5785b2de867e15ca10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Hzd4NWRXOW6Z9FlH"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">萨法尔·萨法罗夫在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="41d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了获得多元回归模型的最佳拟合，包含数据集中最重要的预测子集非常重要。然而，在一大组预测因子中，要了解哪些预测因子对我们的目标变量有重大影响是相当具有挑战性的。考虑到每个变量的p值是针对模型中的其他项进行调整的，这可能会特别麻烦。</p><p id="884d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇文章中，我将演示如何使用R的leaps包来获得最好的回归模型。</p><h1 id="1cc7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">什么是飞跃？</h1><p id="3a1d" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Leaps是一个回归子集选择工具，它执行详尽的搜索，以确定对我们的模型<a class="ae kv" href="https://cran.r-project.org/web/packages/leaps/leaps.pdf" rel="noopener ugc nofollow" target="_blank"> (Lumley，2020) </a>最有影响的预测因子。通过评估导致最佳<a class="ae kv" href="https://www.statisticshowto.com/probability-and-statistics/statistics-definitions/adjusted-r2/#:~:text=R2%20shows%20how%20well,adjusted%20r%2Dsquared%20will%20decrease.&amp;text=N%20is%20the%20number%20of%20points%20in%20your%20data%20sample." rel="noopener ugc nofollow" target="_blank">调整r </a>和<a class="ae kv" href="https://blog.minitab.com/en/statistics-and-quality-data-analysis/cp-and-cpk-two-process-perspectives-one-process-reality#:~:text=Cp%20is%20a%20ratio%20of,indicate%20a%20more%20capable%20process.&amp;text=When%20the%20specification%20spread%20is%20less,process%20spread%2C%20Cp%20is%20low." rel="noopener ugc nofollow" target="_blank"> Mallow的CP的组合来选择最佳预测器。</a></p><p id="11f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用Cortez和莫莱斯2007年<a class="ae kv" href="https://data.world/uci/forest-fires" rel="noopener ugc nofollow" target="_blank">森林火灾</a>数据集上的regsubsets()函数，来预测葡萄牙Montesinho自然公园的过火面积(ha)。</p><h1 id="c82e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">跳跃变量选择</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/df8d665f506ad187f145241d76683e77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Vsgjh1XRiD5FNQ4q"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@landonparenteau?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Landon parentau</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="8926" class="mq lt iq bd lu mr ms dn ly mt mu dp mc lf mv mw me lj mx my mg ln mz na mi nb bi translated">关于数据的一点点..</h2><p id="8c45" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">森林火灾数据集包含葡萄牙Montesinho自然公园517起森林火灾的信息。数据集中有12个属性。</p><p id="85b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在EDA过程中，我注意到几个因变量之间的多重共线性，因此该数据集是特征选择的良好候选。</p><p id="a0f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在建模之前，原始数据集也被转换以满足线性回归的<a class="ae kv" href="https://www.statology.org/linear-regression-assumptions/" rel="noopener ugc nofollow" target="_blank">假设。还添加了额外的虚拟变量，因为我们对时间上的相互作用感兴趣。</a></p><p id="35cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们已经准备好数据集，让我们开始建模。</p><p id="8726" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 1。用所有预测值进行线性回归</strong></p><p id="79a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在为我们的回归选择预测因子的最佳子集之前，让我们使用所有预测因子对数据集运行一个简单的线性回归，以设置用于比较的基本调整r。</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="2f8c" class="mq lt iq nd b gy nh ni l nj nk"><br/>lm1 &lt;- lm(fires.clean1,formula=area ~.)<br/>summary(lm1)<br/></span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/07b711b3d5b38fce3a16e99c9a2e84b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*XIymFZM4HtXKIblu8pVfJg.png"/></div></figure><p id="5417" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以看到，在模型中包含所有变量的情况下，基础调整后的r为0.02，剩余标准误差为0.6454。然而，这种关系在P <.05 level.=""/></p><p id="da8e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 2并不显著。安装并加载leaps库</strong></p><p id="5000" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装leaps包加载后，库使用以下命令:</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="8c14" class="mq lt iq nd b gy nh ni l nj nk">library(leaps)</span></pre><p id="13af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 3。Regsubsets() </strong></p><p id="84b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对所有变量运行regsubsets()函数。</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="dd45" class="mq lt iq nd b gy nh ni l nj nk">Best_Subset &lt;-<br/>    regsubsets(area~.,<br/>               data =fires.clean1,<br/>               nbest = 1,      # 1 best model for each number of predictors<br/>               nvmax = NULL,    # NULL for no limit on number of variables<br/>               force.in = NULL, force.out = NULL,<br/>               method = "exhaustive")</span><span id="7e3f" class="mq lt iq nd b gy nm ni l nj nk">summary_best_subset &lt;- summary(regsubsets.out)<br/>as.data.frame(summary_best_subset$outmat)</span></pre><p id="6953" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 4。预测器数量</strong></p><p id="b81a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们已经在我们的数据集上运行了leaps，让我们看看软件包在数据集使用的预测因子数量方面有什么建议。</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="fd0f" class="mq lt iq nd b gy nh ni l nj nk"><br/>which.max(summary_best_subset$adjr2)<br/></span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/8615db611127c475c5320c41e6913c89.png" data-original-src="https://miro.medium.com/v2/resize:fit:126/format:webp/1*yHqeRKC1c8DtMJykNrNyig.png"/></div></figure><p id="fa1c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">似乎我们必须使用13个预测器来获得最佳模型。</p><p id="21bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 5。最好的预测因素是什么？</strong></p><p id="a86f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的汇总表提供了模型使用的预测因子的详细信息。最佳预测值用“真”表示。</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="67cf" class="mq lt iq nd b gy nh ni l nj nk">summary_best_subset$which[13,]</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/8069c262c2d8f81d35afea618a2a0f09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*59ih2qUEUrVi_XhTT1KfuA.png"/></div></div></figure><p id="2cba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看起来仅包含以下预测值将为我们的线性回归模型提供最佳模型拟合:day.thu、month.aug、month.dec、month.jan、month.jul、month.jun、month.mar、month.oct、month.sep、X、DMC、temp和RH</p><p id="e8bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 6。使用最佳预测值运行回归模型</strong></p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="ed84" class="mq lt iq nd b gy nh ni l nj nk">best.model &lt;- lm(area ~ day.thu + month.aug + month.dec + month.jan + month.jul+ month.jun+month.mar+month.oct+month.sep+X+Y+DMC+temp+RH, data = fires.clean1)<br/>summary(best.model)<br/>```</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/b3a7b64bf99795fb5335569bf0f74a3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*kYf8js1gc4Lpn67AQpo0mQ.png"/></div></figure><p id="8043" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以看到，与步骤1中的模型相比，我们调整后的r显著提高(从0.02提高到0.05)，非常显著。</p><h1 id="533f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">后续步骤</h1><p id="a6ab" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">下一步将是通过查看诊断图来进一步评估该模型。如果数据集被分为训练集和测试集，我们还可以使用predict()函数在测试数据集上运行该模型，然后评估这些结果以全面了解我们的模型性能。</p><p id="9f0f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">需要注意的一点是，我们调整后的r仍然很低。最好的模型只能解释数据中5%的可变性。这可能意味着我们需要进一步转换数据集，或者尝试不同的转换方法。这也意味着我们的数据集可能不是线性回归的最佳候选。</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="bab6" class="ls lt iq bd lu lv nx lx ly lz ny mb mc jw nz jx me jz oa ka mg kc ob kd mi mj bi translated">结论</h1><p id="90a7" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这篇文章的目的是演示如何使用leaps包为线性回归模型选择变量。欢迎对变量选择的方法或替代(高级)方法提出意见和建议。请查看下面的参考资料，了解更多关于使用leaps进行变量选择的信息。</p><h1 id="51ea" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">参考</h1><p id="21d6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">(2018年4月27日)。于2021年5月23日从<a class="ae kv" href="https://www.youtube.com/watch?v=3HKMjEK02Cs" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=3HKMjEK02Cs</a>检索</p><p id="d620" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">托马斯·拉姆利(2020年1月16日)。包装飞跃。https://cran.r-project.org/web/packages/leaps/leaps.pdf<a class="ae kv" href="https://cran.r-project.org/web/packages/leaps/leaps.pdf" rel="noopener ugc nofollow" target="_blank"/></p><p id="4a5e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Kassambara (2018年11月3日)。<em class="oc">用于高通量数据分析的统计工具。</em><a class="ae kv" href="http://www.sthda.com/english/articles/37-model-selection-essentials-in-r/155-best-subsets-regression-essentials-in-r/" rel="noopener ugc nofollow" target="_blank">http://www . sthda . com/English/articles/37-model-selection-essentials-in-r/155-best-subsets-regression-essentials-in-r/</a></p><p id="c2b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">leaps、bestglm、glmulti和meifly的所有子集回归。2021年5月23日检索自<a class="ae kv" href="https://rstudio-pubs-static.s3.amazonaws.com/2897_9220b21cfc0c43a396ff9abf122bb351.html" rel="noopener ugc nofollow" target="_blank">https://r studio-pubs-static . S3 . amazonaws . com/2897 _ 9220 b 21 CFC 0 c 43 a 396 ff 9 abf 122 bb 351 . html</a></p><p id="4ef1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Minitab (2017年6月29日)。Cp和Cpk:两种过程视角，一种过程现实。<em class="oc"> Minitab。</em><a class="ae kv" href="https://blog.minitab.com/en/statistics-and-quality-data-analysis/cp-and-cpk-two-process-perspectives-one-process-reality#:~:text=Cp%20is%20a%20ratio%20of,indicate%20a%20more%20capable%20process.&amp;text=When%20the%20specification%20spread%20is%20less,process%20spread,%20Cp%20is%20low" rel="noopener ugc nofollow" target="_blank">https://blog . minitab . com/en/statistics-and-quality-data-analysis/Cp-and-cpk-two-process-perspectives-one-process-reality #:~:text = Cp % 20 is % 20a % 20 ratio % 20 of，表示% 20a % 20 more % 20 capable % 20 process。&amp;text =当% 20规格% 20展开% 20无，过程% 20展开% 20为% 20低</a>。</p><p id="e7f9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">斯蒂芬妮·格伦(2021)。调整后的R2 /调整后的R平方:它是做什么用的？<a class="ae kv" href="https://www.statisticshowto.com/" rel="noopener ugc nofollow" target="_blank"><em class="oc">StatisticsHowTo.com</em></a>:我们其他人的基本统计！<a class="ae kv" href="https://www.statisticshowto.com/probability-and-statistics/statistics-definitions/adjusted-r2/" rel="noopener ugc nofollow" target="_blank">https://www . statistics show to . com/probability-and-statistics/statistics-definitions/adjusted-R2/</a></p><p id="967e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">页（page的缩写）科尔特斯和莫莱斯(2007年12月1日)。利用气象数据预测森林火灾的数据挖掘方法。<em class="oc">第十三届EPIA 2007 —葡萄牙人工智能会议论文集，2007年12月</em>。(http://www.dsi.uminho.pt/~pcortez/fires.pdf)</p><p id="9a25" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">扎克(2020，08年1月)。<em class="oc">线性回归的四个假设。</em>静态学。<a class="ae kv" href="https://www.statology.org/linear-regression-assumptions/" rel="noopener ugc nofollow" target="_blank">https://www . statology . org/linear-regression-assumptions/https://www . statology . org/linear-regression-assumptions/</a></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="of oe l"/></div></figure><div class="og oh gp gr oi oj"><a href="http://www.sthda.com/english/articles/37-model-selection-essentials-in-r/155-best-subsets-regression-essentials-in-r/" rel="noopener  ugc nofollow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd ir gy z fp oo fr fs op fu fw ip bi translated">R中的最佳子集回归本质</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">最佳子集回归是一种模型选择方法，包括…</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">www.sthda.com</p></div></div><div class="os l"><div class="ot l ou ov ow os ox kp oj"/></div></div></a></div></div></div>    
</body>
</html>