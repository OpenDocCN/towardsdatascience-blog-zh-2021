<html>
<head>
<title>How to Build a Machine Learning App in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python构建机器学习App</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-build-a-machine-learning-app-a9dfed2616fb?source=collection_archive---------9-----------------------#2021-05-27">https://towardsdatascience.com/how-to-build-a-machine-learning-app-a9dfed2616fb?source=collection_archive---------9-----------------------#2021-05-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/c3d2cb36a2bf463302a68922de446567.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Oc_SouTyu95dRWLX10XqRA.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://1.envato.market/c/2346717/628379/4662" rel="noopener ugc nofollow" target="_blank"> envato elements </a>的<a class="ae jg" href="https://elements.envato.com/user/alexdndz/graphics" rel="noopener ugc nofollow" target="_blank"> alexdndz </a>使用图像创建(经许可)。</p></figure><h2 id="ee47" class="jh ji jj bd b dl jk jl jm jn jo jp dk jq translated" aria-label="kicker paragraph"><a class="ae ep" href="https://medium.com/tag/data-science" rel="noopener">数据科学</a> | <a class="ae ep" href="https://medium.com/tag/machine-learning" rel="noopener">机器学习</a></h2><div class=""/><div class=""><h2 id="fec6" class="pw-subtitle-paragraph kp js jj bd b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dk translated">&lt; 150 lines of Python code</h2></div></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><p id="f3cd" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">Have you ever wished for a web app that would allow you to build a machine learning model automatically by simply uploading a CSV file? In this article, you will learn how to build your very own machine learning web app in Python in a little over 100 lines of code.</p><p id="25f6" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">The contents of this article is based on a YouTube video by the same name that I published a few months ago on my YouTube channel (<a class="ae jg" href="https://www.youtube.com/channel/UCV8e2g4IWQqK71bbzGDEI4Q" rel="noopener ugc nofollow" target="_blank">数据教授</a>中从头开始的一步一步教程)，作为本文的补充。</p><figure class="mk ml mm mn gt iv"><div class="bz fp l di"><div class="mo mp l"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><a class="ae jg" href="https://youtu.be/eT3JMZagMnE" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">如何搭建机器学习App | Streamlit # 13</strong></a><strong class="ak">@</strong><a class="ae jg" href="https://www.youtube.com/channel/UCV8e2g4IWQqK71bbzGDEI4Q" rel="noopener ugc nofollow" target="_blank"><strong class="ak">数据教授</strong> </a> <strong class="ak"> YouTube频道</strong></p></figure><h1 id="7297" class="mq mr jj bd ms mt mu mv mw mx my mz na ky nb kz nc lb nd lc ne le nf lf ng nh bi translated">模型部署的重要性</h1><p id="2b2f" class="pw-post-body-paragraph lo lp jj lq b lr ni kt lt lu nj kw lw lx nk lz ma mb nl md me mf nm mh mi mj im bi translated">在深入探讨之前，让我们先退后一步，看看全局。数据收集、数据清理、探索性数据分析、模型构建和模型部署都是数据科学生命周期的一部分。以下是生命周期的摘要信息图:</p><figure class="mk ml mm mn gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nn"><img src="../Images/77fce44b70ac639ccabad03638b57ea2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ryyHPENemMT4foe-.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><strong class="bd no">数据科学生命周期。</strong>(由Chanin Nantasenamat又名数据教授绘制)</p></figure><p id="bbf3" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">作为数据科学家或机器学习工程师，能够部署我们的数据科学项目以完成数据科学生命周期对我们来说至关重要。使用Django或Flask等已建立的框架部署机器学习模型可能是一项艰巨和/或耗时的任务。</p><h1 id="65d7" class="mq mr jj bd ms mt mu mv mw mx my mz na ky nb kz nc lb nd lc ne le nf lf ng nh bi translated">机器学习应用概述</h1><p id="f008" class="pw-post-body-paragraph lo lp jj lq b lr ni kt lt lu nj kw lw lx nk lz ma mb nl md me mf nm mh mi mj im bi translated">概括地说，我们今天要构建的web应用程序本质上将接受一个CSV文件作为输入数据，应用程序将使用它来构建一个使用随机森林算法的回归模型。</p><p id="c6c2" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">现在，让我们详细了解一下web应用程序前端和后端的情况。</p><h2 id="5f45" class="np mr jj bd ms nq nr dn mw ns nt dp na lx nu nv nc mb nw nx ne mf ny nz ng jp bi translated">前端</h2><p id="4ed1" class="pw-post-body-paragraph lo lp jj lq b lr ni kt lt lu nj kw lw lx nk lz ma mb nl md me mf nm mh mi mj im bi translated">用户可以将自己的数据集上传为CSV文件，还可以调整学习参数(在左侧面板中)，调整这些参数后，将构建一个新的机器学习模型，然后显示其模型性能(在右侧面板中)。</p><figure class="mk ml mm mn gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oa"><img src="../Images/813d799944df936b04d7bf7a695b70b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cci-rdLdmgAoK4ndWTsvfQ.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><strong class="bd no">机器学习app的解剖。</strong>左侧面板接受输入，右侧面板显示结果。</p></figure><p id="8e03" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated"><strong class="lq jt">上传CSV数据作为输入</strong><br/>CSV文件的第一行应该有一个标题(包含列名),随后是数据集的后续行(第2行及之后)。我们可以看到，在左侧面板的上传框下方有一个到示例CSV文件的链接(<a class="ae jg" href="https://raw.githubusercontent.com/dataprofessor/data/master/delaney_solubility_with_descriptors.csv" rel="noopener ugc nofollow" target="_blank"> <em class="ob">示例CSV输入文件</em> </a>)。让我们看看下面显示的这个示例CSV文件:</p><figure class="mk ml mm mn gt iv"><div class="bz fp l di"><div class="oc mp l"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><strong class="ak">应用程序中链接的示例CSV文件的前几行摘录。</strong></p></figure><p id="3509" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated"><strong class="lq jt">调整学习参数</strong> <br/>上传CSV文件后，你应该可以看到已经建立了一个机器学习模型，其结果显示在右边的面板中。应当注意，该模型是使用默认参数构建的。用户可以通过滑块输入来调整学习参数，每次调整都会建立一个新的模型。</p><h2 id="cd1f" class="np mr jj bd ms nq nr dn mw ns nt dp na lx nu nv nc mb nw nx ne mf ny nz ng jp bi translated">模型输出(右侧面板)</h2><p id="2e89" class="pw-post-body-paragraph lo lp jj lq b lr ni kt lt lu nj kw lw lx nk lz ma mb nl md me mf nm mh mi mj im bi translated">在右侧面板中，我们可以看到显示的第一个数据是<em class="ob"> 1中的输入数据帧。数据集</em>部分及其结果将显示在<em class="ob"> 2中。型号性能</em>部分。最后，模型构建中使用的学习参数在<em class="ob"> 3中提供。型号参数</em>部分。</p><figure class="mk ml mm mn gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi od"><img src="../Images/22e601b468dbf1a1bd2f1cc004c49c28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wFEB17UcTGRzOj6mv_53OA.gif"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><strong class="bd no">上传输入CSV文件后建立的模型。</strong></p></figure><p id="0764" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">至于模型性能，显示了训练集和测试集的性能度量。由于这是一个回归模型，决定系数(R^2)and误差(均方误差或平均绝对误差)。</p><h2 id="763f" class="np mr jj bd ms nq nr dn mw ns nt dp na lx nu nv nc mb nw nx ne mf ny nz ng jp bi translated">后端</h2><p id="f5d6" class="pw-post-body-paragraph lo lp jj lq b lr ni kt lt lu nj kw lw lx nk lz ma mb nl md me mf nm mh mi mj im bi translated">现在，让我们从更高的层面来看看这款应用的内部工作原理。</p><p id="e03c" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">上传输入CSV文件后，该文件的内容将被转换成Pandas数据帧并赋给<code class="fe oe of og oh b">df</code>变量。然后，数据帧将被分成<code class="fe oe of og oh b">X</code>和<code class="fe oe of og oh b">y</code>变量，以准备作为Scikit-learn的输入。接下来，这两个变量用于使用用户在左侧面板中指定的值进行数据分割(默认情况下使用80/20分割比率)。关于数据分割维度和列名的详细信息打印在应用程序前端的右侧面板中。然后，使用主要子集(80%子集)构建随机森林模型，并应用构建的模型对主要子集(80%)和次要子集(20%)进行预测。然后，该回归模型的模型性能被报告到<em class="ob"> 2下的右侧面板中。模型性能部分</em>。</p><h1 id="e09a" class="mq mr jj bd ms mt mu mv mw mx my mz na ky nb kz nc lb nd lc ne le nf lf ng nh bi translated">本教程中使用的技术堆栈</h1><p id="2258" class="pw-post-body-paragraph lo lp jj lq b lr ni kt lt lu nj kw lw lx nk lz ma mb nl md me mf nm mh mi mj im bi translated">这将只使用3个Python库来实现，包括Streamlit、Pandas和Scikit-learn。</p><p id="46f6" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">Streamlit是一个易于使用的web框架，允许您立即快速实施数据驱动的应用程序。</p><p id="f038" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">Pandas是一个数据结构工具，可以处理、操作和转换表格数据集。</p><p id="1f86" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">Scikit-learn是一个强大的工具，它为用户提供了构建机器学习模型(即，可以执行各种学习任务，包括分类、回归和聚类)的能力，并配备了示例数据集和特征工程功能。</p><h1 id="6030" class="mq mr jj bd ms mt mu mv mw mx my mz na ky nb kz nc lb nd lc ne le nf lf ng nh bi translated">逐行解释</h1><p id="63c1" class="pw-post-body-paragraph lo lp jj lq b lr ni kt lt lu nj kw lw lx nk lz ma mb nl md me mf nm mh mi mj im bi translated">这个应用程序的完整代码如下所示。代码跨度为131行，为了使代码可读，在注释行旁边添加了空格。</p><figure class="mk ml mm mn gt iv"><div class="bz fp l di"><div class="oc mp l"/></div></figure><h2 id="95af" class="np mr jj bd ms nq nr dn mw ns nt dp na lx nu nv nc mb nw nx ne mf ny nz ng jp bi translated">第1–6行</h2><ul class=""><li id="d889" class="oi oj jj lq b lr ni lu nj lx ok mb ol mf om mj on oo op oq bi translated">从scikit-learn库中导入由<code class="fe oe of og oh b">streamlit</code>、<code class="fe oe of og oh b">pandas</code>和各种函数组成的必备库。</li></ul><h2 id="1c63" class="np mr jj bd ms nq nr dn mw ns nt dp na lx nu nv nc mb nw nx ne mf ny nz ng jp bi translated"><strong class="ak">第8–12行</strong></h2><ul class=""><li id="732c" class="oi oj jj lq b lr ni lu nj lx ok mb ol mf om mj on oo op oq bi translated"><strong class="lq jt">第8–10行:</strong>注释解释了第11–12行的作用。</li><li id="c26d" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated"><strong class="lq jt">第11–12行:</strong>使用<code class="fe oe of og oh b">st.set_page_config()</code>功能设置页面标题及其布局。在这里，我们可以看到我们将<code class="fe oe of og oh b">page_title</code>设置为<code class="fe oe of og oh b">'The Machine Learning App’</code>，而<code class="fe oe of og oh b">layout</code>设置为<code class="fe oe of og oh b">'wide’</code>，这将允许应用程序的内容适合浏览器的整个宽度(即，否则默认情况下，内容将被限制在固定宽度)。</li></ul><h2 id="8c95" class="np mr jj bd ms nq nr dn mw ns nt dp na lx nu nv nc mb nw nx ne mf ny nz ng jp bi translated">第14–65行</h2><ul class=""><li id="5632" class="oi oj jj lq b lr ni lu nj lx ok mb ol mf om mj on oo op oq bi translated"><strong class="lq jt">第14–15行:</strong>解释第16–65行的注释。</li><li id="0292" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated"><strong class="lq jt">第16行:</strong>这里我们定义了一个名为<code class="fe oe of og oh b">build_model()</code>的自定义函数，下面从第17行开始的语句将指示这个函数将做什么</li><li id="abd4" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated"><strong class="lq jt">第17-18行:</strong>存储在<code class="fe oe of og oh b">df</code>变量中的输入数据帧的内容将被分成两个变量(<code class="fe oe of og oh b">X</code>和<code class="fe oe of og oh b">Y</code>)。在第17行，除了最后一列之外的所有列都将被分配给<code class="fe oe of og oh b">X</code>变量，而最后一列将被分配给<code class="fe oe of og oh b">Y</code>变量。</li><li id="1fc3" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated"><strong class="lq jt">第20–21行:</strong>第20行是注释，说明第21行在做什么，就是使用<code class="fe oe of og oh b">train_test_split()</code>函数对输入数据(存储在<code class="fe oe of og oh b">X</code>和<code class="fe oe of og oh b">Y</code>变量中)进行数据拆分。默认情况下，数据将以80/20的比例分割，80%的子集将分配给<code class="fe oe of og oh b">X_train</code>和<code class="fe oe of og oh b">Y_train</code>，而20%的子集将分配给<code class="fe oe of og oh b">X_test</code>和<code class="fe oe of og oh b">Y_test</code>。</li><li id="2da5" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated"><strong class="lq jt">第23–27行:</strong>第23行使用Markdown语法将<code class="fe oe of og oh b">1.2. Data splits</code>打印为粗体文本(也就是说，在这里我们可以看到，我们在短语之前和之后使用了**符号，我们希望使文本像在<code class="fe oe of og oh b">**1.2. Data splits**</code>中一样粗体)。接下来，我们将打印<code class="fe oe of og oh b">X</code>和<code class="fe oe of og oh b">Y</code>变量的数据维度，其中第24行和第26行将使用<code class="fe oe of og oh b">st.write()</code>函数打印出<code class="fe oe of og oh b">Training set</code>和<code class="fe oe of og oh b">Testing set</code>，而第25行和第27行将使用<code class="fe oe of og oh b">st.info()</code>函数打印出数据维度，方法是分别在<code class="fe oe of og oh b">X_train</code>和<code class="fe oe of og oh b">X_test</code>变量后添加<code class="fe oe of og oh b">.shape</code>，如<code class="fe oe of og oh b">X_train.shape</code>和<code class="fe oe of og oh b">X_test.shape</code>所示。请注意，<code class="fe oe of og oh b">st.info()</code>功能将在变量输出周围创建一个彩色框。</li><li id="9360" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated"><strong class="lq jt">第29–33行:</strong>与第23–27行的代码块类似，该代码块将打印出分别存储在<code class="fe oe of og oh b">X.columns</code>和<code class="fe oe of og oh b">Y.name</code>中的X和Y变量名。</li><li id="2165" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated"><strong class="lq jt">第35–43行:</strong><code class="fe oe of og oh b">RandomForestRegressor()</code>函数将用于建立回归模型。构建随机森林模型的各种输入参数将使用应用程序前端左侧面板中的用户指定值(在后端，对应于第82–97行)。</li><li id="68cf" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated"><strong class="lq jt">第44行:</strong>现在将使用<code class="fe oe of og oh b">rf.fit()</code>函数训练模型，作为输入参数，我们将使用<code class="fe oe of og oh b">X_train</code>和<code class="fe oe of og oh b">Y_train</code>。</li><li id="c9b3" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated"><strong class="lq jt">第46行:</strong>使用<code class="fe oe of og oh b">st.subheader()</code>功能将打印出<code class="fe oe of og oh b">2. Model performance</code>部分的标题。</li><li id="6994" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated"><strong class="lq jt">第48–54行:</strong>第48行使用<code class="fe oe of og oh b">st.markdown()</code>功能打印<code class="fe oe of og oh b">2.1. Training set</code>的标题。第49行使用<code class="fe oe of og oh b">rd.predict()</code>函数，使用<code class="fe oe of og oh b">X_test</code>作为输入参数，应用训练模型对训练集进行预测。第50行打印要为决定系数(R2)打印的性能指标的文本。第51行使用<code class="fe oe of og oh b">st.info()</code>函数，通过使用<code class="fe oe of og oh b">Y_train</code>和<code class="fe oe of og oh b">Y_pred_train</code>(代表训练集的实际Y值和预测Y值)作为输入参数，经由<code class="fe oe of og oh b">r2_score()</code>函数打印R2分数。第53行使用<code class="fe oe of og oh b">st.write()</code>函数打印下一个性能指标的文本，这是错误。接下来，第54行通过使用<code class="fe oe of og oh b">Y_train</code>和<code class="fe oe of og oh b">Y_pred_train</code>作为输入参数，使用<code class="fe oe of og oh b">st.info()</code>函数通过<code class="fe oe of og oh b">mean_squared_error()</code>函数打印均方误差值。</li><li id="f506" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated"><strong class="lq jt">第56–59行:</strong>这段代码执行完全相同的过程，但是它将在测试集上执行，而不是在训练集上执行。因此，不使用训练集数据(<code class="fe oe of og oh b">Y_train</code>和<code class="fe oe of og oh b">Y_pred_train</code>)，而是使用测试集数据(<code class="fe oe of og oh b">Y_test</code>和<code class="fe oe of og oh b">Y_pred_test</code>)。</li><li id="2302" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated"><strong class="lq jt">第64–65行:</strong>第64行使用<code class="fe oe of og oh b">st.subheader()</code>功能打印标题<code class="fe oe of og oh b">3. Model Parameters</code>。</li></ul><h2 id="b4e3" class="np mr jj bd ms nq nr dn mw ns nt dp na lx nu nv nc mb nw nx ne mf ny nz ng jp bi translated"><strong class="ak">第67–75行</strong></h2><p id="0d88" class="pw-post-body-paragraph lo lp jj lq b lr ni kt lt lu nj kw lw lx nk lz ma mb nl md me mf nm mh mi mj im bi translated">此处将打印web应用程序的标题。第68行和第75行开始和结束使用<code class="fe oe of og oh b">st.write()</code>函数以Mardown语法编写页面标题。第69行使用<code class="fe oe of og oh b">#</code>符号将文本设为标题1大小(根据Markdown语法)。第71和73行将打印关于web应用程序的描述。</p><h2 id="6fdf" class="np mr jj bd ms nq nr dn mw ns nt dp na lx nu nv nc mb nw nx ne mf ny nz ng jp bi translated"><strong class="ak">第78–100行</strong></h2><ul class=""><li id="2ac5" class="oi oj jj lq b lr ni lu nj lx ok mb ol mf om mj on oo op oq bi translated">这里描述了左侧工具条面板的几个代码块。第78行注释了接下来的几个代码块是关于什么的，哪个是用于收集用户指定输入的左侧边栏面板。</li><li id="affc" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated">第79–83行定义了CSV上传框。第79行通过<code class="fe oe of og oh b">st.sidebar.header()</code>功能将<code class="fe oe of og oh b">1. Upload your CSV data</code>打印为标题。请注意，我们在<code class="fe oe of og oh b">st</code>和<code class="fe oe of og oh b">header</code>之间添加了<code class="fe oe of og oh b">.sidebar</code>，以指定这个标题应该进入侧边栏。否则，如果它被写成<code class="fe oe of og oh b">st.header()</code>，那么它将转到右边的面板。第80行将<code class="fe oe of og oh b">st.sidebar.file_uploader()</code>函数分配给<code class="fe oe of og oh b">uploaded_file</code>变量(即，该变量现在将表示用户上传的CSV文件内容)。第81–83行将打印到示例CSV文件的链接，用户可以使用该文件来测试应用程序(在这里，您可以随意用CSV文件格式的自定义数据集替换它)。</li><li id="d6eb" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated">第85–87行以注释开始，说明下面的代码块将与随机森林模型的参数设置有关。第86行然后使用<code class="fe oe of og oh b">st.sidebar.header()</code>函数打印<code class="fe oe of og oh b">2. Set Parameters</code>作为标题文本。最后，第87行使用<code class="fe oe of og oh b">st.sidebar.slider()</code>函数创建了一个滑动条，其中它的输入参数指定<code class="fe oe of og oh b">Data split ratio (% for Training Set)</code>作为滑块的文本标签，而4组数值(<code class="fe oe of og oh b">10, 90, 80, 5</code>)代表最小值、最大值、默认值和增量步长值。最小值和最大值用于设置滑动条的边界，我们可以看到最小值是10(显示在滑动条的最左边)，最大值是90(显示在滑动条的最右边)。如果用户不调整滚动条，将使用默认值80。增量步长将允许用户以步长5(例如75、80、85等)递增或递减滑块值。)</li><li id="aa28" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated">第89–93行定义了<code class="fe oe of og oh b">2.1. Learning Parameters</code>中学习参数的各种滑动条，与第87行描述的方式相似。这些参数包括<code class="fe oe of og oh b">n_estimators</code>、<code class="fe oe of og oh b">max_features</code>、<code class="fe oe of og oh b">min_samples_split</code>和<code class="fe oe of og oh b">min_samples_leaf</code>。</li><li id="3b26" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated">第95–100行以类似于第87行描述的方式定义了<code class="fe oe of og oh b">2.2. General Parameters</code>中通用参数的各种滑动条。这些参数包括<code class="fe oe of og oh b">random_state</code>、<code class="fe oe of og oh b">criterion</code>、<code class="fe oe of og oh b">bootstrap</code>、<code class="fe oe of og oh b">oob_score</code>和<code class="fe oe of og oh b">n_jobs</code>。</li></ul><h2 id="8e4b" class="np mr jj bd ms nq nr dn mw ns nt dp na lx nu nv nc mb nw nx ne mf ny nz ng jp bi translated"><strong class="ak">第102–103行</strong></h2><p id="0d0e" class="pw-post-body-paragraph lo lp jj lq b lr ni kt lt lu nj kw lw lx nk lz ma mb nl md me mf nm mh mi mj im bi translated">注释:接下来的代码块将把模型输出打印到主面板或右侧面板中。</p><h2 id="a8e0" class="np mr jj bd ms nq nr dn mw ns nt dp na lx nu nv nc mb nw nx ne mf ny nz ng jp bi translated"><strong class="ak">第108–134行</strong></h2><ul class=""><li id="34ba" class="oi oj jj lq b lr ni lu nj lx ok mb ol mf om mj on oo op oq bi translated">应用if-else语句来检测CSV文件是否已上载。首次加载web应用程序时，它将默认为<code class="fe oe of og oh b">else</code>语句，因为尚未上传任何CSV文件。加载CSV文件后，<code class="fe oe of og oh b">if</code>语句被激活。</li><li id="22e6" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated">如果<code class="fe oe of og oh b">else</code>语句(第113-134行)被激活，我们将看到一条消息，显示<code class="fe oe of og oh b">Awaiting for CSV file to be uploaded</code>以及一个可点击的按钮<code class="fe oe of og oh b">Press to use Example Dataset</code>(稍后我们将解释这个按钮的作用)。</li><li id="c4ca" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated">如果<code class="fe oe of og oh b">if</code>语句(第108-112行)被激活，上传的CSV文件(其内容包含在<code class="fe oe of og oh b">uploaded_file</code>变量中)将被分配给<code class="fe oe of og oh b">df</code>变量(第109行)。接下来，使用<code class="fe oe of og oh b">st.markdown()</code>函数打印标题<code class="fe oe of og oh b">1.1. Glimpse of dataset</code>(第110行)，然后打印<code class="fe oe of og oh b">df</code>变量的数据帧内容(第111行)。然后，<code class="fe oe of og oh b">df</code>变量中的dataframe内容将被用作<code class="fe oe of og oh b">build_model()</code>自定义函数的输入参数(即前面第14–65行中描述的),在该函数中将构建随机森林模型，其模型结果将被显示到前端。</li></ul><h1 id="90b1" class="mq mr jj bd ms mt mu mv mw mx my mz na ky nb kz nc lb nd lc ne le nf lf ng nh bi translated">运行web应用程序</h1><p id="c6bc" class="pw-post-body-paragraph lo lp jj lq b lr ni kt lt lu nj kw lw lx nk lz ma mb nl md me mf nm mh mi mj im bi translated">好了，现在web应用程序已经编写好了。让我们继续运行web应用程序。</p><h2 id="1658" class="np mr jj bd ms nq nr dn mw ns nt dp na lx nu nv nc mb nw nx ne mf ny nz ng jp bi translated">创造康达环境</h2><p id="ba82" class="pw-post-body-paragraph lo lp jj lq b lr ni kt lt lu nj kw lw lx nk lz ma mb nl md me mf nm mh mi mj im bi translated">让我们假设您是从零开始，您将必须创建一个新的conda环境(这是一个确保代码可再现性的好主意)。</p><p id="8d2a" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">首先，在终端命令行中创建一个名为<code class="fe oe of og oh b">ml</code>的新conda环境，如下所示:</p><pre class="mk ml mm mn gt ow oh ox oy aw oz bi"><span id="e12a" class="np mr jj oh b gy pa pb l pc pd">conda create -n ml python=3.7.9</span></pre><p id="7113" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">其次，我们将登录到<code class="fe oe of og oh b">ml</code>环境</p><pre class="mk ml mm mn gt ow oh ox oy aw oz bi"><span id="fa45" class="np mr jj oh b gy pa pb l pc pd">conda activate ml</span></pre><h2 id="edfe" class="np mr jj bd ms nq nr dn mw ns nt dp na lx nu nv nc mb nw nx ne mf ny nz ng jp bi translated">安装必备库</h2><p id="c344" class="pw-post-body-paragraph lo lp jj lq b lr ni kt lt lu nj kw lw lx nk lz ma mb nl md me mf nm mh mi mj im bi translated">首先，下载requirements.txt文件</p><pre class="mk ml mm mn gt ow oh ox oy aw oz bi"><span id="719d" class="np mr jj oh b gy pa pb l pc pd">wget <a class="ae jg" href="https://raw.githubusercontent.com/dataprofessor/ml-auto-app/main/requirements.txt" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/dataprofessor/ml-auto-app/main/requirements.txt</a></span></pre><p id="cb02" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">其次，安装如下所示的库</p><pre class="mk ml mm mn gt ow oh ox oy aw oz bi"><span id="7333" class="np mr jj oh b gy pa pb l pc pd">pip install -r requirements.txt</span></pre><h2 id="6a36" class="np mr jj bd ms nq nr dn mw ns nt dp na lx nu nv nc mb nw nx ne mf ny nz ng jp bi translated">下载机器学习web应用程序文件</h2><p id="c88a" class="pw-post-body-paragraph lo lp jj lq b lr ni kt lt lu nj kw lw lx nk lz ma mb nl md me mf nm mh mi mj im bi translated">现在，下载数据教授的GitHub repo上托管的web应用程序文件，或者使用上面找到的134行代码。</p><pre class="mk ml mm mn gt ow oh ox oy aw oz bi"><span id="36a5" class="np mr jj oh b gy pa pb l pc pd">wget <a class="ae jg" href="https://github.com/dataprofessor/ml-app/archive/main.zip" rel="noopener ugc nofollow" target="_blank">https://github.com/dataprofessor/ml-app/archive/main.zip</a></span></pre><p id="5ca7" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">然后解压缩内容</p><pre class="mk ml mm mn gt ow oh ox oy aw oz bi"><span id="bd27" class="np mr jj oh b gy pa pb l pc pd">unzip main.zip</span></pre><p id="4953" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">进入<code class="fe oe of og oh b">main</code>目录</p><pre class="mk ml mm mn gt ow oh ox oy aw oz bi"><span id="4f58" class="np mr jj oh b gy pa pb l pc pd">cd main</span></pre><p id="d139" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">现在你在<code class="fe oe of og oh b">main</code>目录中，你应该能够看到<code class="fe oe of og oh b">ml-app.py</code>文件。</p><h2 id="016f" class="np mr jj bd ms nq nr dn mw ns nt dp na lx nu nv nc mb nw nx ne mf ny nz ng jp bi translated">启动web应用程序</h2><p id="d127" class="pw-post-body-paragraph lo lp jj lq b lr ni kt lt lu nj kw lw lx nk lz ma mb nl md me mf nm mh mi mj im bi translated">要启动应用程序，请在终端命令行中键入以下内容(即，还要确保<code class="fe oe of og oh b">ml-app.py</code>文件位于当前工作目录中):</p><pre class="mk ml mm mn gt ow oh ox oy aw oz bi"><span id="0487" class="np mr jj oh b gy pa pb l pc pd">streamlit run ml-app.py</span></pre><p id="7b84" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">稍后，您将在终端提示符下看到以下消息。</p><pre class="mk ml mm mn gt ow oh ox oy aw oz bi"><span id="2cc6" class="np mr jj oh b gy pa pb l pc pd">&gt; streamlit run ml-app.py</span><span id="cc7d" class="np mr jj oh b gy pe pb l pc pd">You can now view your Streamlit app in your browser.</span><span id="b52b" class="np mr jj oh b gy pe pb l pc pd">Local URL: http://localhost:8501<br/>Network URL: http://10.0.0.11:8501</span></pre><p id="1aad" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">最后会弹出一个浏览器，你会看到应用。</p><figure class="mk ml mm mn gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pf"><img src="../Images/102959e79be4ac215618f46433196ff1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BfFYDLdpxVD2K-GMPzo12A.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><strong class="bd no">机器学习web app截图。</strong></p></figure><p id="d871" class="pw-post-body-paragraph lo lp jj lq b lr ls kt lt lu lv kw lw lx ly lz ma mb mc md me mf mg mh mi mj im bi translated">恭喜，您现在已经创建了机器学习web应用程序！</p><h1 id="061e" class="mq mr jj bd ms mt mu mv mw mx my mz na ky nb kz nc lb nd lc ne le nf lf ng nh bi translated">接下来呢？</h1><p id="d3a3" class="pw-post-body-paragraph lo lp jj lq b lr ni kt lt lu nj kw lw lx nk lz ma mb nl md me mf nm mh mi mj im bi translated">要使您的web应用程序对全世界公开和可用，您可以将其部署到互联网。我在YouTube上制作了一个视频，展示如何在<a class="ae jg" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank"> <em class="ob"> Heroku </em> </a>和<a class="ae jg" href="https://streamlit.io/sharing" rel="noopener ugc nofollow" target="_blank"><em class="ob">Streamlit Sharing</em></a>上做到这一点。</p><ul class=""><li id="b24a" class="oi oj jj lq b lr ls lu lv lx pg mb ph mf pi mj on oo op oq bi translated"><a class="ae jg" href="https://www.youtube.com/watch?v=zK4Ch6e1zq8" rel="noopener ugc nofollow" target="_blank">如何将数据科学Web App部署到Heroku </a></li><li id="e9fa" class="oi oj jj lq b lr or lu os lx ot mb ou mf ov mj on oo op oq bi translated"><a class="ae jg" href="https://www.youtube.com/watch?v=kXvmqg8hc70" rel="noopener ugc nofollow" target="_blank">如何部署Data Science Web App以简化it共享</a></li></ul></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><h2 id="f9ac" class="np mr jj bd ms nq nr dn mw ns nt dp na lx nu nv nc mb nw nx ne mf ny nz ng jp bi translated">订阅我的邮件列表，获取我在数据科学方面的最佳更新(偶尔还有免费赠品)!</h2></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><h1 id="a8eb" class="mq mr jj bd ms mt pj mv mw mx pk mz na ky pl kz nc lb pm lc ne le pn lf ng nh bi translated">关于我</h1><p id="f1d4" class="pw-post-body-paragraph lo lp jj lq b lr ni kt lt lu nj kw lw lx nk lz ma mb nl md me mf nm mh mi mj im bi translated">我是泰国一所研究型大学的生物信息学副教授和数据挖掘和生物医学信息学负责人。在我下班后的时间里，我是一名YouTuber(又名<a class="ae jg" href="http://bit.ly/dataprofessor/" rel="noopener ugc nofollow" target="_blank">数据教授</a>)制作关于数据科学的在线视频。在我做的所有教程视频中，我也在GitHub上分享Jupyter笔记本(<a class="ae jg" href="https://github.com/dataprofessor/" rel="noopener ugc nofollow" target="_blank">数据教授GitHub page </a>)。</p><div class="is it gp gr iu po"><a href="https://www.youtube.com/dataprofessor" rel="noopener  ugc nofollow" target="_blank"><div class="pp ab fo"><div class="pq ab pr cl cj ps"><h2 class="bd jt gy z fp pt fr fs pu fu fw js bi translated">数据教授</h2><div class="pv l"><h3 class="bd b gy z fp pt fr fs pu fu fw dk translated">数据科学、机器学习、生物信息学、研究和教学是我的激情所在。数据教授YouTube…</h3></div><div class="pw l"><p class="bd b dl z fp pt fr fs pu fu fw dk translated">www.youtube.com</p></div></div><div class="px l"><div class="py l pz qa qb px qc ja po"/></div></div></a></div><h1 id="0ee5" class="mq mr jj bd ms mt mu mv mw mx my mz na ky nb kz nc lb nd lc ne le nf lf ng nh bi translated">在社交网络上与我联系</h1><p id="6f07" class="pw-post-body-paragraph lo lp jj lq b lr ni kt lt lu nj kw lw lx nk lz ma mb nl md me mf nm mh mi mj im bi translated">YouTube:<a class="ae jg" href="http://youtube.com/dataprofessor/" rel="noopener ugc nofollow" target="_blank">【http://YouTube . com/data proper/</a><br/>网站:<a class="ae jg" href="https://www.youtube.com/redirect?redir_token=w4MajL6v6Oi_kOAZNbMprRRJrvJ8MTU5MjI5NjQzN0AxNTkyMjEwMDM3&amp;q=http%3A%2F%2Fdataprofessor.org%2F&amp;event=video_description&amp;v=ZZ4B0QUHuNc" rel="noopener ugc nofollow" target="_blank">【http://data proper . org/</a>【正在建设】<br/>LinkedIn:<a class="ae jg" href="https://www.linkedin.com/company/dataprofessor/" rel="noopener ugc nofollow" target="_blank">【https://www . LinkedIn . com/company/data proper/</a></p></div></div>    
</body>
</html>