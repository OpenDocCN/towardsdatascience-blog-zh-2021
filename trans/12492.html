<html>
<head>
<title>Create Panel Figure Layouts in Matplotlib with Gridspec</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Gridspec 在 Matplotlib 中创建面板图形布局</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/create-panel-figure-layouts-in-matplotlib-with-gridspec-7ec79c218df0?source=collection_archive---------21-----------------------#2021-12-21">https://towardsdatascience.com/create-panel-figure-layouts-in-matplotlib-with-gridspec-7ec79c218df0?source=collection_archive---------21-----------------------#2021-12-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="ff65" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">Python 科学绘图</h2><div class=""/><div class=""><h2 id="d477" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用 gridspec 布局您的图形，而不需要导出多个图形，并使用另一个程序将它们组合在一起</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/849520be6f22dfada4daa49839671028.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*E_ioFqwSaYCQ6npQ"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://unsplash.com/@d_mccullough?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丹尼尔·麦卡洛</a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">unplash</a>拍摄的照片</p></figure><p id="359b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">出版物人物通常需要将多个情节放入镶板布局中来讲述一个故事。一种简单的拖放方法是单独创建每个绘图，然后使用图像编辑程序甚至 Powerpoint 将绘图排列成完整的图形并保存为一个图像。这种方法的问题；然而，字体之间大小一致性等。如果您必须继续编辑单个绘图、调整大小和移动以适应您的图形布局，这是很困难的。确保所有单个图形格式一致的一种方法是直接在<code class="fe me mf mg mh b">matplotlib</code>中创建面板图形，并导出为一个图像。对我们来说幸运的是，有一个强大的工具叫做<code class="fe me mf mg mh b">gridspec</code>，我们可以用它让<code class="fe me mf mg mh b">matplotlib</code>为我们做大部分的工作。让我们从创建一个 10 x 10 英寸大小的空白图形开始:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="b83c" class="mm mn it mh b gy mo mp l mq mr"><strong class="mh jd"># Import Libraries<br/></strong>import matplotlib.pyplot as plt<br/>import numpy as np</span><span id="33e7" class="mm mn it mh b gy ms mp l mq mr"><strong class="mh jd"># Create Blank Figure<br/></strong>fig = plt.figure(figsize=(10, 10))</span></pre><p id="80b6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">假设这是我们希望最终从脚本中生成的布局:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mt"><img src="../Images/c40e31f9e59a344d3b5ebc5e93ce8d0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZBAF0l9ASkeDtmIDzmwhfg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">我们镶板图形的理想布局</p></figure><p id="1e13" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果我们想利用<code class="fe me mf mg mh b">gridspec</code>的优势，我们需要将我们的布局简化成一个网格。因此，为了设计布局，我们可以把上面的图想象成一个 4×4 的网格，其中<code class="fe me mf mg mh b">Plot 3</code>占据了底部的两个正方形。我们可以如下创建这个初始网格:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="3de8" class="mm mn it mh b gy mo mp l mq mr"><strong class="mh jd"># Create 4x4 Grid<br/></strong>gs = fig.add_gridspec(nrows=2, ncols=2)</span></pre><p id="dc16" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在我们有了网格，我们可以创建三个轴对象，对应于上面布局中的三个图。我们可以像索引任何二维数组或列表一样索引<code class="fe me mf mg mh b">gridspec</code>。注意对于<code class="fe me mf mg mh b">ax3</code>我们索引<code class="fe me mf mg mh b">gs[1, :]</code>，这意味着轴对象将跨越第二行和两列。</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="6a26" class="mm mn it mh b gy mo mp l mq mr"><strong class="mh jd"># Create Three Axes Objects<br/></strong>ax1 = fig.add_subplot(gs[0, 0])<br/>ax2 = fig.add_subplot(gs[0, 1])<br/>ax3 = fig.add_subplot(gs[1, :])</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mu"><img src="../Images/efd809eff61373c72a755aefe6f1df6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lv4TdARFXdrxxWRPM61_0A.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">基本 gridspec 布局</p></figure><p id="b2eb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在那里！我们有了最初尝试创建的基本布局。当前的布局是使用 4 个大小相等的正方形，它们之间有默认的间距。假设我们想要对布局有更多的控制——我们可以从图中各个图之间的水平和垂直间隙开始，我们可以通过<code class="fe me mf mg mh b">hspace</code>(高度空间)和<code class="fe me mf mg mh b">wspace</code>(宽度空间)作为参数。这些关键字参数采用对应于平均轴高度和宽度的一部分的浮点值。</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="97e4" class="mm mn it mh b gy mo mp l mq mr"><strong class="mh jd"># Edit gridspec to change hspace and wspace<br/></strong>gs = fig.add_gridspec(nrows=2, ncols=2, hspace=0.5, wspace=0.5)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mu"><img src="../Images/0ce81974b73ccf65e04ced25cb7c756a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4AuKZqC_g2_DOf5-LNRvjg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">hspace 和 wspace 值为 0.5 的 Gridspec 布局</p></figure><p id="4d4d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如您所见，这些图现在间隔得更远了，因为空间是按平均轴宽和高度的一半来计算的。现在，假设我们实际上希望<code class="fe me mf mg mh b">Plot 1</code>的宽度是<code class="fe me mf mg mh b">Plot 2</code>的两倍，而<code class="fe me mf mg mh b">Plot 3</code>的高度是<code class="fe me mf mg mh b">Plot 1</code>和<code class="fe me mf mg mh b">Plot 2</code>的一半。我们可以使用关键字参数<code class="fe me mf mg mh b">height_ratios</code>和<code class="fe me mf mg mh b">width_ratios</code>对此进行调整。这两个参数都接受一个浮点数列表，分别描述轴的高度和宽度的比率。</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="18cb" class="mm mn it mh b gy mo mp l mq mr"><strong class="mh jd"># Edit gridspec to change height_ratios and width_ratios<br/></strong>gs = fig.add_gridspec(nrows=2, ncols=2, height_ratios=[2, 1], width_ratios=[2, 1])</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mu"><img src="../Images/408b0d5b743764d242dbe73f5f60f610.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4dYLDB7iOFmEPD-61Pbg7w.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">height_ratios 和 width_ratios 已更改的 Gridspec 布局</p></figure><p id="5bd6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这里，我们非常简单地创建了具有不同高度和宽度的更复杂的网格布局。现在，让我们使用最后的布局来创建最终的面板图:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="c197" class="mm mn it mh b gy mo mp l mq mr"><strong class="mh jd"># Styling<br/></strong>plt.style.use("seaborn-darkgrid")<br/>plt.rcParams["font.family"] = "Avenir"<br/>plt.rcParams["font.size"] = 16</span><span id="a886" class="mm mn it mh b gy ms mp l mq mr"><strong class="mh jd"># Create Blank Figure<br/></strong>fig = plt.figure(figsize=(10, 10))</span><span id="7a2b" class="mm mn it mh b gy ms mp l mq mr"><strong class="mh jd"># Create 4x4 Grid</strong><br/>gs = fig.add_gridspec(nrows=2, ncols=2, height_ratios=[2, 1], width_ratios=[2, 1])</span><span id="20c2" class="mm mn it mh b gy ms mp l mq mr"><strong class="mh jd"># Create Three Axes Objects<br/></strong>ax1 = fig.add_subplot(gs[0, 0])<br/>ax2 = fig.add_subplot(gs[0, 1])<br/>ax3 = fig.add_subplot(gs[1, :])</span><span id="f873" class="mm mn it mh b gy ms mp l mq mr"><strong class="mh jd"># Dummy Data<br/></strong>x = np.linspace(0, 2*np.pi, 1000)</span><span id="fe7c" class="mm mn it mh b gy ms mp l mq mr"><strong class="mh jd"># Plot Data<br/></strong>ax1.plot(x, np.sin(x))<br/>ax2.plot(x, np.sin(x)**2)<br/>ax3.plot(x, np.sin(x) + np.cos(3*x))</span><span id="2117" class="mm mn it mh b gy ms mp l mq mr"><strong class="mh jd"># Set axis labels<br/></strong>ax1.set_ylabel("y", size=20)<br/>ax3.set_xlabel("x", size=20)<br/>ax3.set_ylabel("y", size=20)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mv"><img src="../Images/64a6c9d57be4b2c53ba2d35087d1fe6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AgMgkqr-LhMDgXmxZBYXpA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">最终面板图</p></figure><p id="d124" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们做到了！我们能够非常简单地使用<code class="fe me mf mg mh b">matplotlib</code>中的<code class="fe me mf mg mh b">gridspec</code>来创建我们的面板图形。</p><h1 id="513d" class="mw mn it bd mx my mz na nb nc nd ne nf ki ng kj nh kl ni km nj ko nk kp nl nm bi translated">结论</h1><p id="b27c" class="pw-post-body-paragraph li lj it lk b ll nn kd ln lo no kg lq lr np lt lu lv nq lx ly lz nr mb mc md im bi translated">这是一个非常基本的介绍，介绍如何使用<code class="fe me mf mg mh b">gridspec</code>创建带有多个图的面板图形。您可以使用本文中显示的设置来创建一些非常复杂的布局，甚至可以利用在一些网格元素中使用空白地块来创建空间区域。本文中的<code class="fe me mf mg mh b">gridspec.ipynb</code>笔记本将在这个<a class="ae lh" href="https://github.com/venkatesannaveen/python-science-tutorial" rel="noopener ugc nofollow" target="_blank"> Github 资源库</a>中提供。</p><p id="1294" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">感谢您的阅读！我感谢任何反馈，你可以在<a class="ae lh" href="https://twitter.com/naveenv_92" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上找到我，并在<a class="ae lh" href="https://www.linkedin.com/in/naveenvenkatesan/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上与我联系，以获取更多更新和文章。</p></div></div>    
</body>
</html>