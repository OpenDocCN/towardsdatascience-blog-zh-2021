<html>
<head>
<title>Visualizing Geospatial traffic data in Kepler.gl</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Kepler.gl 中可视化地理空间交通数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/visualizing-geospatial-traffic-data-in-kepler-gl-773dd14fc98a?source=collection_archive---------15-----------------------#2021-11-25">https://towardsdatascience.com/visualizing-geospatial-traffic-data-in-kepler-gl-773dd14fc98a?source=collection_archive---------15-----------------------#2021-11-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bb36" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用 Kepler.gl 和 HERE traffic data，对数十万个交通数据点进行快速、优雅的地理空间可视化</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0d6ce0a4bbda68281fde303a69376463.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SKI0RYPNdgL6ixkxgWae0Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用 Kepler.gl |塞犍陀·维维克可视化波士顿交通</p></figure><p id="41e5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Kepler.gl 是优步的开源地理空间工具箱。通常，可视化大规模地理空间数据集可能相当具有挑战性。有很多 Python 包包括 leav、GeoPandas 和 Plotly 都做得很好；但是找到合适的情节背景可能是一个挑战。在本地机器上绘制数千或数十万个数据点在计算上也具有挑战性。</p><p id="b8ab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这就是 Kepler.gl 有巨大优势的地方。Kepler.gl 是一个基于浏览器的框架，可以轻松加载 CSV、JSON 或 GeoJSON 数据，并以最少的格式生成优雅的可视化效果。在这个例子中，我在几秒钟内可视化了从 HERE Traffic API 获得的成千上万的流量数据点。</p><p id="5f30" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们开始吧！</p><h1 id="b912" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">获取交通数据:</h1><p id="55de" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我已经从<a class="ae lu" href="https://developer.here.com/pricing" rel="noopener ugc nofollow" target="_blank">HERE Technologies traffic flow API</a>获得了交通数据。我写过几篇文章，重点介绍如何提取交通流量数据:</p><div class="ms mt gp gr mu mv"><a rel="noopener follow" target="_blank" href="/visualizing-real-time-traffic-patterns-using-here-traffic-api-5f61528d563"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd iu gy z fp na fr fs nb fu fw is bi translated">使用 HERE traffic api 可视化实时交通模式</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">虽然谷歌地图显示的是实时交通状况，但却无法访问底层的交通数据。这里的技术提供了…</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">towardsdatascience.com</p></div></div><div class="ne l"><div class="nf l ng nh ni ne nj ks mv"/></div></div></a></div><div class="ms mt gp gr mu mv"><a rel="noopener follow" target="_blank" href="/visualizing-dc-real-time-traffic-during-the-curfew-after-riots-2007cc6838f6"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd iu gy z fp na fr fs nb fu fw is bi translated">骚乱后宵禁期间 DC 实时交通可视化</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">流动性是城市的生命线。让我们想象一下，在今天不幸的混乱之后，宵禁期间的 DC…</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">towardsdatascience.com</p></div></div><div class="ne l"><div class="nk l ng nh ni ne nj ks mv"/></div></div></a></div><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div></figure><h1 id="2835" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">保存文件</h1><p id="57e4" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">Kepler.gl 喜欢将文件保存为 CSV 格式，有不同的列。如果您想要一个即时的地理空间图，您需要将这两列标记为“纬度”和“经度”，用于空间位置，第三列用于颜色偏好(在交通信息的情况下是速度)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div></figure><h1 id="9893" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">在 Kepler.gl 中可视化</h1><p id="c015" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">既然我们已经以正确的格式保存了数据，我们就可以拖放了——就这么简单！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/13442f1cec3ef05257926cc5b504cbf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J4nKG-ykV7sGsf3W2m19ig.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在 Kepler.gl 中加载文件</p></figure><p id="aca8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你会自动得到一个可以保存的漂亮图像。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/e1362651474c3d8755e870802d8f1560.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wn8WFrOFfNxIddmu4S06SQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从 Kepler.gl 导出图像</p></figure><p id="0443" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，当你仔细观察时——色阶是根据分位数显示的——这取决于数据以及数据的比例和速度。例如，如果大部分交通是快速移动的(通常是在深夜或清晨)，颜色味觉将偏向这些更高的速度。然而，这不是我们想要的。我们希望颜色能清楚地表明绝对速度:就像谷歌地图中的交通一样。在这种情况下，我们根据量化值而不是分位数来选择颜色，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/eb21e0467141d7b0617da72791b87d5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*p-iy5nfamsP9jNgvPiGCjA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">选择是基于 Kepler.gl 中的量化值还是分位数来着色</p></figure><p id="724a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">还有一些选项可以改变符号的外观和颜色。这样做，我们可以生成一些非常优雅的可视化效果——如本文的标题图片所示！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/7f5ff3fa26d6efc67acef6ac5c3ad53f.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/1*-9ZTfWIqoV-lfaZdHzBkLw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在 Kepler.gl 中修改颜色和符号</p></figure><h1 id="8693" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="95b0" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">Kepler.gl 非常适合以最小的努力相对快速地生成优雅的可视化效果。相比之下，使用 OSMnx 和其他 Python 库在我的本地机器上绘制成千上万个点需要更长的时间。</p><p id="8dc8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，在 Kepler.gl 以最少的输入在可视化方面做得很好的地方，人们也遇到了最小可定制性的问题。例如，基本上只有 3 种背景——黑暗、明亮和卫星。可能存在需要其他类型背景的情况。</p><p id="4f11" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是 Kepler.gl 在地理空间可视化方面做得很好。</p><p id="ba9b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="https://medium.com/@skanda.vivek" rel="noopener"> <em class="nr">关注我</em> </a> <em class="nr">如果你喜欢这篇文章——我经常写复杂系统、物理学、数据科学和社会的界面。</em></p><p id="9c44" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="nr">如果你还不是中会员，想支持我这样的作家，可以通过我的推荐链接随意报名:</em><a class="ae lu" href="https://skanda-vivek.medium.com/membership" rel="noopener"><em class="nr">https://skanda-vivek.medium.com/membership</em></a></p></div></div>    
</body>
</html>