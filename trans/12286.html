<html>
<head>
<title>Visualizing Decision Trees with Pybaobabdt</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Pybaobabdt可视化决策树</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/visualizing-decision-trees-with-pybaobabdt-f8eb5b3d0d17?source=collection_archive---------9-----------------------#2021-12-14">https://towardsdatascience.com/visualizing-decision-trees-with-pybaobabdt-f8eb5b3d0d17?source=collection_archive---------9-----------------------#2021-12-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="64f4" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a></h2><div class=""/><div class=""><h2 id="0b88" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">一个用于决策树可视化和模型解释的开源包</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/a98213801959c4560bf93b70fa9e539c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9QlM6He9AybMTpqbvLbW-g.png"/></div></div></figure><blockquote class="ld"><p id="f497" class="le lf it bd lg lh li lj lk ll lm ln dk translated"><em class="lo">数据可视化是决策的语言。好的图表有效地传达信息。伟大的图表使决策成为可能，提供信息，并改善决策:</em> <strong class="ak"> <em class="lo">但丁·维塔利亚诺</em> </strong></p></blockquote><p id="0cd1" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj ln im bi translated">决策树可以以多种方式可视化。以<strong class="lr jd">缩进节点</strong>为例，其中每个内部节点和叶节点都被描述为文本，而父子关系是通过相对于父节点缩进子节点来显示的。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/f2371b2d3ef77d15ee96d7ee4b30962c.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*y-wbnPnlSVJKFURlIRGLAA.png"/></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">缩进图|作者图片</p></figure><p id="7be5" class="pw-post-body-paragraph lp lq it lr b ls mp kd lu lv mq kg lx ly mr ma mb mc ms me mf mg mt mi mj ln im bi translated">然后是<strong class="lr jd">节点-链路图。</strong>这是可视化决策树最常用的方法之一，决策树中的节点通过字形表示，父节点和子节点通过链接连接。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/0fe9055e7e69d832e56995825c3d398a.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*Vq8m0k_mybm8Jy7zc5I2Tw.png"/></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">节点链接图|作者图片</p></figure><p id="7668" class="pw-post-body-paragraph lp lq it lr b ls mp kd lu lv mq kg lx ly mr ma mb mc ms me mf mg mt mi mj ln im bi translated"><strong class="lr jd">冰柱</strong>图<strong class="lr jd">图</strong>是同样的另一个选项。除了显示关系，这些图还有助于描述节点大小。他们的名字来源于这样一个事实，即最终的可视化看起来像冰柱。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mv"><img src="../Images/1e65c7ee13b99f204c9e37956177a365.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TEVfJxHxe1R5H4Gxa0F3nQ.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">由https://www . cs . middlebury . edu/~ can drews/showcase/infovis _ techniques _ s16/icicle _ plots/icicle plots . html| CC-经许可</p></figure><p id="6853" class="pw-post-body-paragraph lp lq it lr b ls mp kd lu lv mq kg lx ly mr ma mb mc ms me mf mg mt mi mj ln im bi translated">虽然这些技术很有帮助，但是它们不能很好地扩展，尤其是当数据量增加时。在这种情况下，不仅可视化数据变得困难，而且解释和理解树也是一个挑战。<strong class="lr jd"> BaobabView </strong>是一个为解决这类问题而创建的库，在本文中，我们将通过例子详细介绍它的python实现<strong class="lr jd"> pybaobabdt </strong>。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="100a" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">绘制决策树的几个软件包</h1><p id="8b87" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj ln im bi translated">我们通过讨论可视化决策树的多种方式开始了这篇文章。查看各种帮助绘制决策树的库也是值得的。</p><h2 id="8243" class="ob nf it bd ng oc od dn nk oe of dp no ly og oh nq mc oi oj ns mg ok ol nu iz bi translated">资料组</h2><p id="00f0" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj ln im bi translated">这里我们将使用<a class="ae mw" href="https://allisonhorst.github.io/palmerpenguins/articles/intro.html" rel="noopener ugc nofollow" target="_blank">帕尔默企鹅</a>数据集作为公共数据集。这是一个众所周知的数据集，通常是iris数据集的替代物，目标是根据给定的特征预测<strong class="lr jd">企鹅种类</strong>。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi om"><img src="../Images/fc3c9b84d6a7163b47839e7303ffdbe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VKS2OnK9W0s8Tu2d.png"/></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">数据集|图像的前五行(按作者)</p></figure><h2 id="a624" class="ob nf it bd ng oc od dn nk oe of dp no ly og oh nq mc oi oj ns mg ok ol nu iz bi translated"><code class="fe on oo op oq b">1. Visualization using <a class="ae mw" href="https://scikit-learn.org/stable/modules/classes.html#module-sklearn.tree" rel="noopener ugc nofollow" target="_blank">sklearn.tree</a></code>。绘图树</h2><p id="72bb" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj ln im bi translated">这是默认的方式，也是最常用的方法。它是scikit-learn的默认选项。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi or"><img src="../Images/c5bdc53f0d847513fd2565a5b8a5be47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VZNBIPuSfgPontp0g2ceBA.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated"><code class="fe on oo op oq b">Visualization using <a class="ae mw" href="https://scikit-learn.org/stable/modules/classes.html#module-sklearn.tree" rel="noopener ugc nofollow" target="_blank">sklearn.tree</a></code>。plot_tree |作者图片</p></figure><p id="a7e8" class="pw-post-body-paragraph lp lq it lr b ls mp kd lu lv mq kg lx ly mr ma mb mc ms me mf mg mt mi mj ln im bi translated">在这个例子中，树的<code class="fe on oo op oq b">max_depth</code>被限制为3。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi os"><img src="../Images/088851b5ac907bb8f58e65bcfd8b8eaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CR9X1zvy9YBEVuG7ioVLww.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated"><code class="fe on oo op oq b">Visualization using <a class="ae mw" href="https://scikit-learn.org/stable/modules/classes.html#module-sklearn.tree" rel="noopener ugc nofollow" target="_blank">sklearn.tree</a></code>。plot_tree |作者图片</p></figure><h2 id="c4ee" class="ob nf it bd ng oc od dn nk oe of dp no ly og oh nq mc oi oj ns mg ok ol nu iz bi translated">2.<code class="fe on oo op oq b">Visualization using </code>达特里维兹</h2><p id="fe4e" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj ln im bi translated"><a class="ae mw" href="https://github.com/parrt/dtreeviz" rel="noopener ugc nofollow" target="_blank"> dtreeviz </a>库提供了更好的外观和直观的可视化，同时提供了更好的可解释性选项。图书馆的灵感来源于<a class="ae mw" href="http://www.r2d3.us/" rel="noopener ugc nofollow" target="_blank"><em class="ot">r2d 3</em></a><em class="ot">的<em class="ot">教育动画；</em> <a class="ae mw" href="http://www.r2d3.us/visual-intro-to-machine-learning-part-1/" rel="noopener ugc nofollow" target="_blank"> <em class="ot">机器学习视觉入门</em> </a> <em class="ot">。</em></em></p><p id="e296" class="pw-post-body-paragraph lp lq it lr b ls mp kd lu lv mq kg lx ly mr ma mb mc ms me mf mg mt mi mj ln im bi translated"><strong class="lr jd">链接到文章</strong> : <a class="ae mw" rel="noopener" target="_blank" href="/a-better-way-to-visualize-decision-trees-with-the-dtreeviz-library-758994cdf05e">用dtreeviz库可视化决策树的更好方法</a></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ou"><img src="../Images/8092e0ebdd91924ab2715fad3ae1e282.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0dLiUqGpxOPWhF0dtagX8w.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated"><code class="fe on oo op oq b">Visualization using </code> dtreeviz |作者图片</p></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ov"><img src="../Images/bada0db2de26a588058204db4d15a11f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4AcBjVhWDk8Pza40zOC9gg.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated"><code class="fe on oo op oq b">Visualization using </code>作者图片</p></figure><h2 id="109b" class="ob nf it bd ng oc od dn nk oe of dp no ly og oh nq mc oi oj ns mg ok ol nu iz bi translated">3.张量流决策森林</h2><p id="44f4" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj ln im bi translated">TensorFlow决策森林是为训练、服务、推理和解释这些决策森林模型而创建的库。它为基于树的模型和神经网络提供了统一的API。TensorFlow决策森林具有内置的交互式绘图方法来绘制和帮助理解树结构。</p><p id="133b" class="pw-post-body-paragraph lp lq it lr b ls mp kd lu lv mq kg lx ly mr ma mb mc ms me mf mg mt mi mj ln im bi translated"><strong class="lr jd">链接到文章</strong> : <a class="ae mw" rel="noopener" target="_blank" href="/reviewing-the-tensorflow-decision-forests-library-1ecf50ae00c3">回顾TensorFlow决策森林库</a></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ou"><img src="../Images/287db9c9eb6948f314fab9f017477250.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R8rOnzsD2C-Ncuq2DIyiBw.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated"><code class="fe on oo op oq b">Visualization using </code>张量流决策森林(TF-DF) |图片由作者提供</p></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ow"><img src="../Images/029beb63e66c9ca99f2b71848077f223.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ivkk_XyOHRJqmDgY.gif"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">张量流决策森林(TF-DF) |图片由作者提供</p></figure></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="f835" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">镇上的新成员</h1><p id="0ac2" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj ln im bi translated">一篇名为<a class="ae mw" href="https://ieeexplore.ieee.org/document/6102453" rel="noopener ugc nofollow" target="_blank"> <strong class="lr jd">猴面包树视图:决策树的交互式构建和分析</strong> </a> <strong class="lr jd"> </strong>的论文展示了一种可视化决策树的独特技术。这种技术不仅可扩展，而且使专家能够将他们的领域知识注入到决策树的构造中。该方法被称为<strong class="lr jd"> BaobabView </strong>和<strong class="lr jd"> </strong>依赖于可视化、交互和算法支持这三个关键方面。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ox"><img src="../Images/847bbba14ccb76859d131407db4ca6e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8jVuUAJnD7mK46YQCL1ZZw.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">BaobabView的三个关键方面:可视化、交互和算法支持|作者图片</p></figure><p id="1844" class="pw-post-body-paragraph lp lq it lr b ls mp kd lu lv mq kg lx ly mr ma mb mc ms me mf mg mt mi mj ln im bi translated">以下是这篇论文的摘录，具体强调了这一点:</p><blockquote class="oy oz pa"><p id="e341" class="lp lq ot lr b ls mp kd lu lv mq kg lx pb mr ma mb pc ms me mf pd mt mi mj ln im bi translated">我们认为我们的工具提供了一个可视化分析方法的双重例子。我们展示了如何使用交互和可视化来增强机器学习方法；我们还展示了人工构建和分析是如何得到算法和自动化支持的。</p></blockquote><h2 id="3489" class="ob nf it bd ng oc od dn nk oe of dp no ly og oh nq mc oi oj ns mg ok ol nu iz bi translated">名字里有什么？</h2><p id="5498" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj ln im bi translated">你想知道这个奇怪的名字吗？这个词源于<strong class="lr jd"> <em class="ot">非洲猴面包树</em> </strong>或<a class="ae mw" href="https://en.wikipedia.org/wiki/Adansonia_digitata" rel="noopener ugc nofollow" target="_blank"> <strong class="lr jd">非洲猴面包树</strong> </a> <strong class="lr jd"> </strong>，因为它与树的结构惊人地相似。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pe"><img src="../Images/43573f876c4614172aa2a6e5246fba1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xeRpdLTJ-CX3AWiG9A_AiQ.jpeg"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated"><a class="ae mw" href="https://commons.wikimedia.org/wiki/File:Baobab_and_elephant,_Tanzania.jpg" rel="noopener ugc nofollow" target="_blank">荷兰阿纳姆的费迪南·勒乌斯</a>，<a class="ae mw" href="https://creativecommons.org/licenses/by-sa/2.0" rel="noopener ugc nofollow" target="_blank"> CC BY-SA 2.0 </a>，通过维基共享</p></figure><p id="9a16" class="pw-post-body-paragraph lp lq it lr b ls mp kd lu lv mq kg lx ly mr ma mb mc ms me mf mg mt mi mj ln im bi translated">pybaobabdt包是BaobabView的python实现。现在让我们从这个库的安装开始，稍微深入一点这个库的细节。</p><h2 id="fe32" class="ob nf it bd ng oc od dn nk oe of dp no ly og oh nq mc oi oj ns mg ok ol nu iz bi translated">装置</h2><p id="51f6" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj ln im bi translated">该软件包可以按如下方式安装:</p><pre class="ks kt ku kv gt pf oq pg ph aw pi bi"><span id="daba" class="ob nf it oq b gy pj pk l pl pm">pip install pybaobabdt</span></pre><p id="138b" class="pw-post-body-paragraph lp lq it lr b ls mp kd lu lv mq kg lx ly mr ma mb mc ms me mf mg mt mi mj ln im bi translated">但是，需要满足一些要求:</p><ul class=""><li id="30a4" class="pn po it lr b ls mp lv mq ly pp mc pq mg pr ln ps pt pu pv bi translated">Python版本≥ 3.6</li><li id="f2e7" class="pn po it lr b ls pw lv px ly py mc pz mg qa ln ps pt pu pv bi translated"><a class="ae mw" href="https://pygraphviz.github.io/" rel="noopener ugc nofollow" target="_blank"> PyGraphviz </a></li><li id="fd31" class="pn po it lr b ls pw lv px ly py mc pz mg qa ln ps pt pu pv bi translated">还应该安装像sklearn、numpy、pygraphviz、matplotlib、scipy、pandas这样的流行python包。</li></ul><p id="ba03" class="pw-post-body-paragraph lp lq it lr b ls mp kd lu lv mq kg lx ly mr ma mb mc ms me mf mg mt mi mj ln im bi translated">我在安装<code class="fe on oo op oq b">pygraphviz</code>的时候经历了几次打嗝。如果您面临同样的问题，请参考随附的代码笔记本。</p><div class="qb qc gp gr qd qe"><a href="https://github.com/parulnith/Data-Science-Articles/tree/main/Visualizing%20decision%20trees%20with%20Pybaobabdt" rel="noopener  ugc nofollow" target="_blank"><div class="qf ab fo"><div class="qg ab qh cl cj qi"><h2 class="bd jd gy z fp qj fr fs qk fu fw jc bi translated">数据-科学-文章/以Pybaobabdt为主的可视化决策树</h2><div class="ql l"><h3 class="bd b gy z fp qj fr fs qk fu fw dk translated">我关于数据科学和机器学习的博客集。-数据-科学-文章/可视化决策树与…</h3></div><div class="qm l"><p class="bd b dl z fp qj fr fs qk fu fw dk translated">github.com</p></div></div><div class="qn l"><div class="qo l qp qq qr qn qs lb qe"/></div></div></a></div><h2 id="4e13" class="ob nf it bd ng oc od dn nk oe of dp no ly og oh nq mc oi oj ns mg ok ol nu iz bi translated">Pybaobabdt在行动</h2><p id="7321" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj ln im bi translated">我们将继续我们的企鹅数据集，并建立一个决策树，根据给定的特征预测<strong class="lr jd">企鹅物种</strong>。</p><pre class="ks kt ku kv gt pf oq pg ph aw pi bi"><span id="e137" class="ob nf it oq b gy pj pk l pl pm">from sklearn.tree import DecisionTreeClassifier<br/>y = list(df['Species'])<br/>features = list(df.columns)<br/>target = df['Species']<br/>features.remove('Species')<br/>X = df.loc[:, features]</span><span id="2a42" class="ob nf it oq b gy qt pk l pl pm">clf = DecisionTreeClassifier().fit(X,y)</span></pre><p id="ddaa" class="pw-post-body-paragraph lp lq it lr b ls mp kd lu lv mq kg lx ly mr ma mb mc ms me mf mg mt mi mj ln im bi translated">上面的代码初始化并训练一个分类树。一旦完成，下一个任务就是使用<code class="fe on oo op oq b">pybaobabdt</code>包来可视化树，这只需要一行代码就可以完成。</p><pre class="ks kt ku kv gt pf oq pg ph aw pi bi"><span id="c35d" class="ob nf it oq b gy pj pk l pl pm">ax = pybaobabdt.drawTree(clf, size=10, dpi=300, features=features, ratio=0.8,colormap='Set1')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qu"><img src="../Images/62385d95b55fb19ae00fce0f89bef067.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*ZI4oxIs-5N_ja5_CdLakag.png"/></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">使用Pybaobabdt软件包可视化决策树分类器|图片由作者提供</p></figure><p id="21bc" class="pw-post-body-paragraph lp lq it lr b ls mp kd lu lv mq kg lx ly mr ma mb mc ms me mf mg mt mi mj ln im bi translated">这就对了。你有一个决策树分类器，每一类物种用不同的颜色表示。在随机森林的情况下，也可以可视化单个的树。然后，这些树可以保存为更高分辨率的图像，以便进行深入检查。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="57eb" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">自定义</h1><p id="6090" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj ln im bi translated">pybaobabdt库也提供了许多定制。我将在这里展示其中的一些:</p><h2 id="41fa" class="ob nf it bd ng oc od dn nk oe of dp no ly og oh nq mc oi oj ns mg ok ol nu iz bi translated">彩色地图</h2><p id="b08c" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj ln im bi translated">pybaobabdt支持所有matplotlib <a class="ae mw" href="https://matplotlib.org/stable/tutorials/colors/colormaps.html" rel="noopener ugc nofollow" target="_blank">颜色映射</a>。我们已经看到了<code class="fe on oo op oq b">Set1</code>色图的样子，但是你可以从许多不同的选项中选择。以下是它们在使用时出现的次数:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qv"><img src="../Images/a88dcc81bee0b945bdda3e41f3443022.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XuBqZwL05aTRtVILseAgsw.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">使用Pybaoabdt和不同的颜色图进行决策树可视化|图片由作者提供</p></figure><p id="ab56" class="pw-post-body-paragraph lp lq it lr b ls mp kd lu lv mq kg lx ly mr ma mb mc ms me mf mg mt mi mj ln im bi translated">但是您并不局限于可用的色彩映射表。你甚至可以自己定义一个。假设我们只想突出显示数据集中的一个特定类，而将所有其他类置于背景中。我们可以这样做:</p><pre class="ks kt ku kv gt pf oq pg ph aw pi bi"><span id="5afc" class="ob nf it oq b gy pj pk l pl pm">from matplotlib.colors import ListedColormap</span><span id="aeb9" class="ob nf it oq b gy qt pk l pl pm">colors = ["green", "gray", "gray"]<br/>colorMap = ListedColormap(colors)</span><span id="b3f0" class="ob nf it oq b gy qt pk l pl pm">ax = pybaobabdt.drawTree(clf, size=10, features=features, ratio=0.8,colormap=colorMap)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qw"><img src="../Images/21325231163b1b3ff673ae27d83a07b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*btC5uXE77Zkz5DWtax4j3A.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">仅突出显示决策树中的特定类别|作者图片</p></figure><h2 id="00ea" class="ob nf it bd ng oc od dn nk oe of dp no ly og oh nq mc oi oj ns mg ok ol nu iz bi translated">比例</h2><p id="ec5d" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj ln im bi translated">比率选项用于设置树的比率，默认值为1。下面是这两个比率的比较，以及它们在屏幕上的显示方式。</p><pre class="ks kt ku kv gt pf oq pg ph aw pi bi"><span id="3793" class="ob nf it oq b gy pj pk l pl pm">ax = pybaobabdt.drawTree(clf, size=10, dpi=300, features=features, ratio=0.5,colormap='viridis')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qx"><img src="../Images/8cc154b1149c7fc300dfe052d4d7aa16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gXddygHUtZhteFvpjlm5OQ.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">不同的比例如何影响体型|作者图片</p></figure><h2 id="c4d8" class="ob nf it bd ng oc od dn nk oe of dp no ly og oh nq mc oi oj ns mg ok ol nu iz bi translated">最大深度=3</h2><p id="1f26" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj ln im bi translated">参数<code class="fe on oo op oq b">maxdepth</code>控制树的深度。较低的数字限制了树的分裂，也显示了顶部分裂。如果上述树的<code class="fe on oo op oq b">max_depth</code>设置为3，我们将得到一个发育不良的树:</p><pre class="ks kt ku kv gt pf oq pg ph aw pi bi"><span id="85cc" class="ob nf it oq b gy pj pk l pl pm">ax = pybaobabdt.drawTree(clf, size=10, maxdepth = 3,features=features, ratio=1,colormap='plasma')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qy"><img src="../Images/0a979af2544d9b537e7bd031ca6b4d44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jI8i5VQKfYBinZiekXZU0w.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">调整树的最大深度以控制树的大小|图片由作者提供</p></figure></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="85ea" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">保存图像</h1><p id="e90f" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj ln im bi translated">输出图形可以保存如下:</p><pre class="ks kt ku kv gt pf oq pg ph aw pi bi"><span id="8410" class="ob nf it oq b gy pj pk l pl pm">ax.get_figure().savefig('claasifier_tree.png', format='png', dpi=300, transparent=True)</span></pre></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="f65c" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">结论</h1><p id="fb2d" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj ln im bi translated">pybaobabdt包为可视化提供了一个新的视角。它包括了在它的对应物中没有见过的特征。主要思想是通过有意义的可视化来帮助用户理解和解释树。本文使用了一个简单的例子来演示这个库。然而，将它用于更广泛和更复杂的数据集，以了解它在实际意义上的优势，这将是一个很好的练习。我将把它留给读者做练习。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="6893" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">参考资料和进一步阅读:</h1><ul class=""><li id="019d" class="pn po it lr b ls nw lv nx ly qz mc ra mg rb ln ps pt pu pv bi translated"><a class="ae mw" href="https://gitlab.tue.nl/20040367/pybaobab/-/tree/main" rel="noopener ugc nofollow" target="_blank">pybaobabdt包的官方Github库。</a></li><li id="1447" class="pn po it lr b ls pw lv px ly py mc pz mg qa ln ps pt pu pv bi translated"><a class="ae mw" href="http://alexandria.tue.nl/extra1/afstversl/wsk-i/elzen2011.pdf" rel="noopener ugc nofollow" target="_blank"> <strong class="lr jd">决策树的交互式构建、分析和可视化</strong>，<em class="ot">斯特夫·范·登·埃尔森</em>，理学硕士。论文，埃因霍温工业大学，2011年</a></li><li id="69be" class="pn po it lr b ls pw lv px ly py mc pz mg qa ln ps pt pu pv bi translated"><a class="ae mw" href="https://medium.com/analytics-vidhya/a-guide-to-machine-learning-in-r-for-beginners-decision-trees-c24dfd490abb" rel="noopener">了解决策树</a></li></ul></div></div>    
</body>
</html>