<html>
<head>
<title>Replicating Minecraft World Generation in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python复制《我的世界》世界一代</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/replicating-minecraft-world-generation-in-python-1b491bc9b9a4?source=collection_archive---------0-----------------------#2021-11-17">https://towardsdatascience.com/replicating-minecraft-world-generation-in-python-1b491bc9b9a4?source=collection_archive---------0-----------------------#2021-11-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2ece" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Voronoi图和大量柏林/单纯形噪声</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/adc2e33ba9401219d5978a51f598f067.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EQ60tIVyp0fyMEBLjML5CA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。</p></figure><p id="782b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">《我的世界》，有史以来最畅销的游戏，以其像素化的积木和<em class="lu">无限世界</em>而闻名，有着惊人的程序生成的地形，有洞穴，水域，甚至不同的生物群落。</p><p id="6bf8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">过程生成是计算机图形学的重要组成部分。它主要用于视频游戏或电影中。它有助于生成没有“机器般”感觉的随机结构。</p><p id="69ab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">同样，过程化生成在机器学习中起着重要的作用。它可以帮助生成难以收集的数据。训练机器学习模型需要庞大的数据集，收集和处理这些数据集可能很困难，成本也很高。按程序生成数据可以很容易地适应所需数据的确切类型。</p><p id="7e8c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我小时候经常玩《我的世界》，我总是想知道它是如何产生永无止境的世界的。在本文中，我将尝试用Python来复制这一点。</p><h1 id="929f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">定义和限制</h1><p id="5219" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我们首先要定义我们的世界将如何产生。</p><ul class=""><li id="27c7" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated">世界是三维的、离散的(由单位大小的块组成)，在z轴上由<code class="fe nb nc nd ne b">0</code>和<code class="fe nb nc nd ne b">255</code>界定，在x轴和y轴上没有界限。</li><li id="10d2" class="ms mt it la b lb nf le ng lh nh ll ni lp nj lt mx my mz na bi translated">世界包含生物群落，每一个都跨越大的水平区域，定义了生物群落所占据的空间的性质。</li><li id="aaaa" class="ms mt it la b lb nf le ng lh nh ll ni lp nj lt mx my mz na bi translated">世界包含河流、湖泊和海洋。</li></ul><p id="d203" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">每个世界都是由一粒种子定义的。<strong class="la iu">同样的种子将永远产生同样的世界。</strong></p><h1 id="66dc" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">生成世界</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/36b0d3820e22b4e6fd8a8c20343d90bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e23CzMSVwx12KBvkYsNR4g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一大块。图片作者。</p></figure><p id="8566" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了使生成过程简单，我们将把我们的世界分成块。每个块将占用1024×1024×256个块的空间。</p><p id="a60f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">每个块都是单独生成的。这将帮助我们保存、加载世界，并轻松生成世界的更多部分。</p><h1 id="adc8" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">生物群落边界</h1><p id="78eb" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我们要做的第一件事是将我们的世界分成x轴<strong class="la iu">和y轴</strong>上的细胞，每一个细胞都是特定的生物群落。我们将为每个细胞指定一个代表其中心的点。</p><h2 id="f3c5" class="nl lw it bd lx nm nn dn mb no np dp mf lh nq nr mh ll ns nt mj lp nu nv ml nw bi translated">Voronoi图</h2><p id="ed1b" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">给定一组点，Voronoi图将帮助我们把我们的世界分成单元。Voronoi图背后的主要思想是一个点所属的单元是其中心最近的单元。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/b56d4bd44e9503c4e9c0c69addc718a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*KFFI7ujwv_deOPwSjq9mWg.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">移动的点用离它最近的点的颜色来着色。图片作者。</p></figure><p id="a136" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以对<strong class="la iu"> xy </strong>平面中的每一个点都这样做，以获得这3个点的Voronoi图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/ed592a106657a6c4438bf03b2add4015.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*UsJrEJpMEqSZdBJhe-H3VA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">3点的Voronoi图，动画。作者图片</p></figure><p id="4de7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">虽然这种方法很有效，但是它非常慢，尤其是当点数很多的时候。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/5a46984653954a3575ac40f5ee4a575a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ajMwG6RnChlZyVlTezbS4A.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">20点的Voronoi图，动画。图片作者。</p></figure><p id="0ce4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在Python中，<code class="fe nb nc nd ne b">scipy.spatial</code>有一个名为<code class="fe nb nc nd ne b">Voronoi</code>的类，可以更高效地计算Voronoi图，并为我们提供更多关于图的信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/79f1b2807152af983ce5308ab70f51ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iAlSQF4E3PDep7cFT8-7Og.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者使用scipy.spatial. Image计算的Voronoi图。</p></figure><p id="0a15" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe nb nc nd ne b">scipy.spatial</code>的<code class="fe nb nc nd ne b">Voronoi</code>返回一个顶点、区域和脊的列表，这在以后会很有用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/e1d80e7ef9c57853b27e43d69e76115b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eZWlrHh-OSYE9xxdF0_e-A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Voronoi图中的区域和脊。图片作者。</p></figure><p id="bfbf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些额外的点有助于形成所谓的<strong class="la iu">德劳内镶嵌</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/ab0c0a3cccf83e7493b892fd94e16f43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P4hVhM6SKCXkG1tzMnOGaQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Voronoi镶嵌上的Delaunay镶嵌。图片作者。</p></figure><h2 id="5312" class="nl lw it bd lx nm nn dn mb no np dp mf lh nq nr mh ll ns nt mj lp nu nv ml nw bi translated">劳埃德松弛算法</h2><p id="5f99" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">现在，我们必须生成细胞所在的随机点。</p><p id="4c83" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们使用来自<code class="fe nb nc nd ne b">numpy.random</code>的类似<code class="fe nb nc nd ne b">random</code>的函数来生成多个点并计算其Voronoi图，我们会得到以下结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/bfca09e55709278269c026c2f27f1830.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8K2ykuUsgQreVFfYD8Cq5A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">随机点的Voronoi图。图片作者。</p></figure><p id="6520" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可能已经注意到有些点彼此靠得太近了。这就是所谓的集群。细胞应该是均匀分布的。</p><p id="b844" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我们缩小(或增加点数)时，这一点更加明显:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/73ff4e6a434f53f95e0804bc929f10c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Te8lGp-6TjXVICdrDW7w-A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">请注意一些点是如何聚集在一起的，而其他区域是空的。图片作者。</p></figure><p id="b71e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了解决这个问题，我们必须把这些点分开。</p><p id="04b1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">解决这个问题的一种方法是使用<a class="ae nz" href="https://en.wikipedia.org/wiki/Lloyd%27s_algorithm" rel="noopener ugc nofollow" target="_blank">劳埃德松弛算法</a>，该算法利用了点的Voronoi图。</p><p id="8521" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">劳埃德算法<strong class="la iu">背后的思想是计算我们点的Voronoi图，然后将每个点移动到其单元的<em class="lu">质心</em>。并且重复该过程一定次数</strong></p><p id="5fff" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">多边形的质心是其顶点的平均值。</p><p id="db24" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是一个Voronoi图，单元格点用蓝色<strong class="la iu">表示，单元格质心用红色</strong>表示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/6dd085b0b74599b4a7e4caa9dba99733.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wZFsBCO18y_ht6GzyD9-BQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带有单元点(蓝色)和单元质心(红色)的Voronoi图。图片作者。</p></figure><p id="4f6e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，我们可以一遍又一遍地用细胞质心(红色)替换细胞点(蓝色)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/043a5a228874a6af8173376e0725cabb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*L4F99Q1csHGW-0PvpHETFw.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">劳埃德松弛算法动画。图片作者。</p></figure><p id="7004" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这会产生更好看的随机点。</p><h1 id="6aa1" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">柏林/单工噪声:我们为什么需要它？</h1><p id="922b" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">为了生成随机地形，我们必须生成随空间随机变化的属性，如海拔、温度或降雨量。</p><p id="7fad" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">人们可以想到使用<code class="fe nb nc nd ne b">random</code>，这是有道理的。</p><p id="82b8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将为我们世界中的<strong class="la iu"> xy </strong>平面上的每个区块生成一个0到255之间的随机数。</p><p id="3c6a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这会产生以下结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/066f9dc5cc84176eecaac9f5c1936e78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rlQkKzB-R59IUJ_jyueesQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这太随意了。图片作者。</p></figure><p id="b45c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">嗯，这看起来更像一个二维码，而不是《我的世界》世界。</p><p id="5ccd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">问题是我们的随机值没有连贯的结构。每个值都是单独生成的，与相邻值无关。</p><p id="f9a0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了克服这个问题，我们将使用<a class="ae nz" href="https://en.wikipedia.org/wiki/Perlin_noise" rel="noopener ugc nofollow" target="_blank">柏林噪声</a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/a7c1232c1cf67cb0fc7e6d6a5a10eae6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_P1aldg5PJPDnYZ5TbOzBw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">柏林噪音。图片作者。</p></figure><p id="44b3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">柏林噪音是由肯·柏林在1983年发明的。不像普通的随机噪音，它是有结构的。它看起来更接近于自然界中发现的随机模式(云、森林分布)。</p><p id="bdb9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">单工噪声也是由肯·佩林自己创造的。它比柏林噪声有许多优点。柏林噪声和单纯形噪声今天被用于几乎所有的程序生成。</p><p id="4baa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将使用Python中名为<code class="fe nb nc nd ne b">noise</code>的单工噪声实现。(Python模块)。</p><p id="da9f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们有4个变量可以玩:<strong class="la iu">音阶</strong>，<strong class="la iu">八度音阶</strong>，<strong class="la iu">持续性</strong>，<strong class="la iu">空隙度</strong>。我不会解释每一个是做什么的，但是我会给你留下我制作的这些gif，让你自己感受一下。</p><div class="kj kk kl km gt ab cb"><figure class="oa kn ob oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/dbeb06a1ea9b2204be39fcd05ef40dca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*A_XXd9U6eRcR3kfj_Lx0Bw.gif"/></div></figure><figure class="oa kn ob oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/4683738006f579d7f2af9bf1905713a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*6J-uKRsEZyKZrypB_RFGjA.gif"/></div></figure></div><div class="ab cb"><figure class="oa kn ob oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/43c390e63bd519bfcb73b96a349dbd67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*kskmiFqojapY_bevEZg_wQ.gif"/></div></figure><figure class="oa kn ob oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/ac0b9910bdb664cbdb8cb5204ffeec43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*APVrjvCe05fextSPF2p4hQ.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk og di oh oi translated">参数变化时的柏林噪声。图片作者。</p></figure></div><p id="4c5c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">返回的噪声值介于-1和1之间。</p><h2 id="7017" class="nl lw it bd lx nm nn dn mb no np dp mf lh nq nr mh ll ns nt mj lp nu nv ml nw bi translated">细胞的规则性——模糊边界</h2><p id="6a0f" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">虽然我们上面为细胞生成的点间隔得很好，但我们的细胞看起来几乎像正多边形。</p><p id="f3ae" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了克服这个问题，我们将使用柏林噪声。对于每个点，我们将在其邻域中选择一个随机点，并将新选择的点的单元分配给当前点。</p><p id="470b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为此，我们需要两张噪波图，一张用于x轴的位移，另一张用于y轴。</p><p id="a009" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以通过将噪声(值在-1和1之间)乘以一个恒定长度来控制边界的噪声。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/d882a4e0e355122e8a8897480a7581bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*fJePgzK_wVGYcw8UgZxc7w.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">边界噪声长度动画。图片作者。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/b3fcd163476a22dfb8ad8939ef178c76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*BAyM5_BZIK-e-u9_rlziJQ.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">边界噪声八度动画。图片作者。</p></figure><h1 id="676d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">选择生物群落</h1><p id="2564" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">《我的世界》有60多个不同的生物群落。每个都有不同的属性。既然我们已经把我们的世界分成了细胞，我们必须给每个细胞分配一个生物群落。为此，我们将使用柏林噪声。</p><h2 id="15c5" class="nl lw it bd lx nm nn dn mb no np dp mf lh nq nr mh ll ns nt mj lp nu nv ml nw bi translated">温度-降水图</h2><p id="7b02" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我们将根据两个参数定义生物群落:<strong class="la iu">温度</strong>和<strong class="la iu">降水</strong>，使用<strong class="la iu">温度-降水图</strong>。在环境生物学中，生物群落通常是这样定义的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/4a55f8a68d6b2f5e3529fd6615a501a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0_Z1AmjRz8c6wIJMb71Ehg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><em class="ok">纳瓦拉的《气候对陆地生物群落的影响》属于公共领域，CC0 </em></p></figure><p id="5204" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将以此图为灵感，设计我们自己的温度-降水量图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/b28cc5d01aafc15ae4ba52d031a54817.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0em5YZpYRjVIYpwiqmZBDQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">温度-降水图。图片作者。</p></figure><h2 id="f5a5" class="nl lw it bd lx nm nn dn mb no np dp mf lh nq nr mh ll ns nt mj lp nu nv ml nw bi translated">温度和降水图</h2><p id="1bad" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">现在，我们将使用柏林噪声为每个像元分配一个温度和一个降水量值。我们将生成两个图，每个图包含块中所有块的噪声值。</p><div class="kj kk kl km gt ab cb"><figure class="oa kn ob oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/bf06629406d41f9c43cb9936854acc7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*c2YnEn0FkNRRx-QIXrIYyA.png"/></div></figure><figure class="oa kn ob oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/9ec7183870c1ed9d79811fa49698f16d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*Isl9HBUsTsQBSEOGwQ6MyA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk og di oh oi translated">温度和降水地图。图片作者。</p></figure></div><h2 id="2092" class="nl lw it bd lx nm nn dn mb no np dp mf lh nq nr mh ll ns nt mj lp nu nv ml nw bi translated">直方图均衡</h2><p id="b70e" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">如果我们使用上面的温度和降水图，我们会遇到一个问题。基于柏林噪声的值不一致。接近<em class="lu"> 0 </em>的值比接近<em class="lu"> -1 </em>或<em class="lu"> 1 </em>的值多。这区分了温度-降水图边缘的生物群落。</p><p id="6b0c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了进一步理解这种不均匀性，我绘制了温度和降水图的1D直方图和令人惊叹的2D直方图。</p><div class="kj kk kl km gt ab cb"><figure class="oa kn om oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/078745073237916730e90ccd1b22b0a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*hOzrJJ9eLTe1x7iweu-5nw.png"/></div></figure><figure class="oa kn on oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/67a345dfb77a4bb0f022915eea95fa1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*f_7O_353rAUldsGF8V7nxQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk oo di op oi translated">温度和降水图的1D直方图(左)和2D直方图(右)。图片作者。</p></figure></div><p id="74a9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如你所见，边缘的值受到歧视。为了解决这个问题，我们将使我们的价值观平等。</p><p id="654d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae nz" href="https://en.wikipedia.org/wiki/Histogram_equalization" rel="noopener ugc nofollow" target="_blank">直方图均衡</a>用于调整图像的曝光。为此我用了<code class="fe nb nc nd ne b">skimage</code>的<code class="fe nb nc nd ne b">exposure</code>函数。</p><p id="d8d8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">均衡的直方图是平坦的。</p><div class="kj kk kl km gt ab cb"><figure class="oa kn oq oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/9ba7de3b8f19a8bddec3d779a41ce1ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/1*dUThwWyTkhoFohid5Yyzfw.png"/></div></figure><figure class="oa kn or oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/6bf3df5278ec940c9607ba898845f655.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/1*gCthjq1EdNr4KvuwxTB0vw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk os di ot oi translated">温度和降水图的均衡1D直方图(左)和均衡2D直方图(右)。图片作者。</p></figure></div><p id="6c24" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">由于我们分别均衡了温度和降水量，2D直方图并不完全平坦。</p><p id="c22d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可能不希望直方图完全平坦。如果我们想对直方图的平坦度有一些控制，我们可以混合不均衡的值和均衡的值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/7ee4ae30afc9f8fcac5242e93b7d2dba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*lTR8Q1irOZ7JQsiFRu7weg.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">直方图均衡化动画。图片作者。</p></figure><p id="f157" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，我们可以控制我们的价值观有多平等。</p><h2 id="8f40" class="nl lw it bd lx nm nn dn mb no np dp mf lh nq nr mh ll ns nt mj lp nu nv ml nw bi translated">平均单元格</h2><p id="ad31" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我们将对每个像元内的地图进行平均，以获得每个像元的温度和降水量值。</p><div class="kj kk kl km gt ab cb"><figure class="oa kn ob oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/a012e09bac7c069a62a1ff0e00e719ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*trN5pDqrnfguBRuo_D-3Ug.png"/></div></figure><figure class="oa kn ob oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/7e88c491c3d17325fadf7e41894adf0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*OIWctlVy9bl7eBEN5qVTuQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk og di oh oi translated">细胞温度和降水图。图片作者。</p></figure></div><p id="3a6d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，每个单元格都有一个温度和一个降水值，在<em class="lu"> -1 </em>和<em class="lu"> 1 </em>之间。</p><h2 id="0b75" class="nl lw it bd lx nm nn dn mb no np dp mf lh nq nr mh ll ns nt mj lp nu nv ml nw bi translated">量化</h2><p id="3462" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">为了简化我们处理温度和降水值的方式，我们将把它们转换成整数。我们将使用<code class="fe nb nc nd ne b">np.uint8</code>作为数据类型来存储这些值。</p><p id="64af" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了转换上面映射中的值，我们将它们映射到[0，<em class="lu"> 255] </em>，并将值四舍五入为最接近的整数。</p><p id="5481" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">量子化不会改变温度和降水的样子。</p><p id="9be8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，我们可以通过一张<em class="lu"> 256×256 </em>的图像来定义我们的温度-降水量图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/7134ae61725a3d3de4773dc3b8bc6c29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hG4_kUiH65iPBSnJfHD6iQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">温度-降水图。图片作者。</p></figure><h2 id="62db" class="nl lw it bd lx nm nn dn mb no np dp mf lh nq nr mh ll ns nt mj lp nu nv ml nw bi translated">生物群落图</h2><p id="e328" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我们可以使用温度-降水图、温度图和降水图为每个细胞指定一个生物群落。对每个单元格都这样做，会产生以下结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/5939ae5ac42ff35b9333d5d667420382.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*I2mg_-g6cTn71bUG4xSzrA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">彩色生物群落地图。图片作者。</p></figure><h1 id="513c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">高度图</h1><p id="a74d" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我们二维世界中的每一个点都有一个高度。为了生成高度图，我们将使用噪波图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/1f5798d4333736f2abc69ad83aa65507.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cxoY-LlAcs4lLk_EzJtOvw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">高度遮罩。图片作者。</p></figure><p id="0d2a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用这个高度图(值在-1和1之间)，我们可以创建一个空白的遮罩。大于0的值是陆地，小于0的值是海洋。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/9ba50e4f23490703fcaaf17c17f304f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*kL1nuziFI2BBviF2jh_cIA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">陆地面具。图片作者。</p></figure><p id="89e7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">结合之前生成的图像:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/c167a332d11bcfe80b914ece189fe4f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*u4rSkVmvXjbIyR0KmGZCqQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">应用了土地遮罩的生物群落地图。图片作者。</p></figure><p id="b3d3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了可视化的高度，我们将添加一些阴影到地图上。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/25e5125001be376b35f568221ba8c516.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*opKyxs6nQG1wDmGyMR3NJw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带土地掩膜的生物群落图(左)，带土地掩膜的阴影生物群落图(右)。图片作者。</p></figure><p id="dc91" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">到目前为止，结果看起来很有希望。但是高度与生物群落无关。我们需要改变每个生物群落的高度图。我们将通过在高度图上应用一个函数来实现这一点。</p><h2 id="a920" class="nl lw it bd lx nm nn dn mb no np dp mf lh nq nr mh ll ns nt mj lp nu nv ml nw bi translated">高度图细节</h2><p id="6356" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我们将使用两个不同细节层次的高度图。这是通过改变柏林噪声中八度音阶的数量来实现的。</p><p id="02ed" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是我们的两张身高图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/bbb69159a20009bf0f37472ff11c7bf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*stMQXeler7eDaeAAilbW5Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">清晰(左)和平滑(右)高度图。图片作者。</p></figure><h2 id="4c7b" class="nl lw it bd lx nm nn dn mb no np dp mf lh nq nr mh ll ns nt mj lp nu nv ml nw bi translated">高度贴图过滤器</h2><p id="6dc0" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我们将使用陆地中的高度图(值在0和1之间)。每个生物群落都将使用两种高度图的组合(平滑和清晰的高度图)。然后对其应用过滤器(函数)。</p><p id="ecb6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">应用滤镜的想法将受到Photoshop曲线的启发。我们将使用<strong class="la iu">三次贝塞尔曲线</strong>来定义一个我们将应用于高度图的函数。</p><p id="7ad2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是一些过滤器示例:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/90801c1e9170e69a183f6b4c4d724e0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z_hgXQq7KjmQAICHQ-2gKQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/678185e91833e1da03d850754ea4b404.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k0A-DBjxsW4g4bDapgir6g.png"/></div></div></figure><p id="986f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将为每个生物群落创建并调整过滤器。</p><div class="kj kk kl km gt ab cb"><figure class="oa kn pa oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/76c6aac394143e2c726a16fbc6f27ba4.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*K0oyYD_-4iid0Akv9rWzrg.jpeg"/></div></figure><figure class="oa kn pa oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/7e3a5d44ae070906305e7e31fcfafb1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*3tde2_A3RvMpPmHTYDPqCQ.jpeg"/></div></figure><figure class="oa kn pa oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/f7880443c71cc785dec98cae42a0c9b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*bUxOdsmoW_THAc60DvsGTQ.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk pb di pc oi translated">沙漠，稀树草原和热带林地过滤器。图片作者。</p></figure></div><div class="ab cb"><figure class="oa kn pa oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/f303406fca558567c0efb74044478f87.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*P71zR9gcQQczZ1E-M2zs_w.jpeg"/></div></figure><figure class="oa kn pa oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/3b958cf84d13a5f4ee27a310ed5fcd24.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*jpjfX2x6nQryoBVwootK-g.jpeg"/></div></figure><figure class="oa kn pa oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/a1df0a3888b0eb97cda739cfa0e6525e.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*nP1nqeqfHTrbLnSVVBtbdw.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk pb di pc oi translated">苔原、季节性森林和雨林过滤器。图片作者。</p></figure></div><div class="ab cb"><figure class="oa kn pa oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/c9fcdfadce0a7d420e583f3b1dabebf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*C5xOc5zrmR5dBgj-FEP39A.jpeg"/></div></figure><figure class="oa kn pa oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/a842d635bdce8e835cf82ac233534e7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*TMmm5WXSeRv1Qh4TWObmAw.jpeg"/></div></figure><figure class="oa kn pa oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/39d1e8fcd931ad79e02079f778dc5bee.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*TalTx4h2NE5vshsUX1BflQ.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk pb di pc oi translated">温带森林、温带雨林和北方过滤器。图片作者。</p></figure></div><p id="28d7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了将这些滤镜应用到我们的高度贴图中，我们将使用遮罩。蒙版是一张地图，在某个生物群落区包含1，在其他区包含0。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/eebf981de4546c0d9e9c9ecdd379d617.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*1COQADW_JoSSHekElzqihQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">生物群落面具。图片作者。</p></figure><p id="9744" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们使用硬地图，我们将有巨大的高度变化。这就是为什么我们在使用口罩之前会将它们羽化。我们还将从这张地图中移除海洋(通过乘以陆地遮罩)，因此我们只对陆地应用滤镜。</p><div class="kj kk kl km gt ab cb"><figure class="oa kn ob oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/0520d32c7dabb0b3105e98729b215b90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*o6e0Dc3FqHb8PBQ7TCmzZg.png"/></div></figure><figure class="oa kn ob oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/35f6d1a246f62353632842c8c0ed3eb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*m8UMgJ9jj0W--_lJC7t3lQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk og di oh oi translated">羽化(模糊)的生物群落遮罩(左)，只有陆地(右)。图片作者。</p></figure></div><p id="e0d0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将使用上面的遮罩在高度图上应用每个生物群落的过滤器。我们得到以下结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/acc32d8b81190926a85e22e8c80cbc9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hdL3GQL5Vc_JGYl_B-LeMQ.png"/></div></div></figure><h2 id="c681" class="nl lw it bd lx nm nn dn mb no np dp mf lh nq nr mh ll ns nt mj lp nu nv ml nw bi translated">最终的3D高度图结果</h2><p id="40b4" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我们可以使用Blender来渲染这些3D地图。我们将在Blender的置换修改器中使用高度贴图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/9693395853e9dc6255734b756f9cb97d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-qJZ5PGLDo-xIgtxl7lk1Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">彩色生物群落的高度图渲染。用搅拌机做的。图片作者。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/adc2e33ba9401219d5978a51f598f067.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EQ60tIVyp0fyMEBLjML5CA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">彩色生物群落的高度图渲染。用搅拌机做的。图片作者。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b77569f5bd925a9815d9392c0d058ed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iJplNzomGCkotaQ9uQyxKg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">彩色生物群落的高度图渲染。用搅拌机做的。图片作者。</p></figure><h1 id="fbc1" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">河流和湖泊</h1><h2 id="934a" class="nl lw it bd lx nm nn dn mb no np dp mf lh nq nr mh ll ns nt mj lp nu nv ml nw bi translated">边界</h2><p id="165c" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我们将在生物群落的边界之间增加河流。首先，我们需要计算生物群落之间的界限。</p><p id="9081" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为此，我们将遍历地图上的每个点。如果该点的所有邻居都属于同一生物群落，则该点不在边界上。如果它的邻居有一种以上的生物群落，那么它就是边界的一部分。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/7e10f3f942f8660e8c7f3ade158e0300.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WIQdccEpbzbDUb-uktCP6Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">边框像素的插图。图片作者。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/41e1c6f05da8f23f2fe239c22d82f720.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XkuOKkR2vFYSOnNrJ0GccA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">边界的示例。图片作者。</p></figure><p id="9b48" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">将这种技术应用于我们的生物群落图会产生以下结果。</p><div class="kj kk kl km gt ab cb"><figure class="oa kn ob oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/d74d91c2c484ad1c2989dcd331827187.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*b_FgpnahDsNVqRqx5TbNCg.png"/></div></figure><figure class="oa kn ob oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/5be58cec21aebb42b1f55157de54023a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*hCN5J56Mea9tbcM2O3iWpw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk og di oh oi translated">生物群落地图(左)和河流(右)。图片作者。</p></figure></div><p id="f5a1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以通过改变包含邻居的盒子的大小来控制河流的大小。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/0a0d9a8b88acb38c3a5445174058008c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*b_m2m4z5o8FR2xdKJiHNDg.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">大小不一的河流。图片作者。</p></figure><p id="d503" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将使用2种不同的河流:生物群落河和细胞河。生物群落河比较大，放在生物群落的边界，而细胞河比较小，放在细胞的边界。然后，我们使用陆地遮罩将河流限制为陆地。</p><p id="19ca" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">河流也将被限制在中低海拔。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/a9f0f1f1150f16170379e932297fb02d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*1cH125-mN8k0Hsf5MAvFVg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">河流。图片作者。</p></figure><p id="4257" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将使用这个河流遮罩来更改高度图。我们将模糊这个河流蒙版，然后用原来的河流蒙版来蒙版。这将创建一个在河流中间具有高值的地图，这些高值在河流的边缘慢慢淡化为低值。</p><p id="753c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里是河流面具与模糊和蒙面河流面具的比较。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/b8b03ed302798a45d2da389d5eb66b6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c1BqkoZibsfO0RlcVd49nw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">河流面具。图片作者。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/7c84599fd5ad126a28c3a168c49ad2d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XrbljPBNLHS2j3NDV4DmTQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">河流面具的横截面。图片作者。</p></figure><p id="de91" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将使用此地图在高度图中“雕刻”河流。</p><div class="kj kk kl km gt ab cb"><figure class="oa kn ob oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/6e57d53559d08df199cad2972721c5ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*etHv1l2nQUH2gy2j8U_Qzw.png"/></div></figure><figure class="oa kn ob oc od oe of paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/d536ea3fa503f590abf9124e5e566383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*TBJmXLFbuY4YHIz0lipnCQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk og di oh oi translated">生物群落图(左)和带有河流的生物群落图(右)。图片作者。</p></figure></div><h1 id="8fe5" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">树木和植被</h1><p id="92fa" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">为了给我们的地图添加树，我们将使用前面讨论过的劳埃德松弛算法。这种采样方法有助于我们生成间隔开的随机点。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/0c46560a47d9f41f9da6cff39787668c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EuW2JXo-QPeC7goGVsaLlQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">随机采样点(左)，放松点(右)。图片作者。</p></figure><p id="b3ed" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将根据生物群落生成不同密度的树木。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pj"><img src="../Images/3115330531655006705258f652e9ed47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GKyJle3TuSYilEHhtbsHZw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">不同等级的树木密度。作者图片，</p></figure><p id="a617" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将把一组树木与之前讨论过的生物群落遮罩和土地遮罩结合起来，用树木填充生物群落。每个生物群落都有不同的密度，当然也有不同种类的树木。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/55f9549c60d83d67503b08053d2e5e5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*gvLT1j5TZEgFly4ODtmeXg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">有树的生物群落地图。</p></figure><p id="9b1c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我的混合技能限制了我用树来可视化3D地图。</p><h1 id="4579" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">源代码</h1><blockquote class="pk"><p id="c68a" class="pl pm it bd pn po pp pq pr ps pt lt dk translated">这里有一个<a class="ae nz" href="https://github.com/BilHim/minecraft-word-generation" rel="noopener ugc nofollow" target="_blank"> <strong class="ak"> Jupyter笔记本</strong> </a>包含了文章中所有步骤的代码。</p></blockquote><p id="3aff" class="pw-post-body-paragraph ky kz it la b lb pu ju ld le pv jx lg lh pw lj lk ll px ln lo lp py lr ls lt im bi translated"><strong class="la iu">警告:</strong>代码很乱，没有文档记录。</p><h1 id="0466" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="78a0" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">程序生成是计算机图形学中非常强大的一部分。它让生成的内容看起来很随意，但却很有艺术感和结构感。如前所述，这可以用于机器学习，以生成覆盖使用正常真实世界数据收集难以覆盖或成本高昂的区域的数据集。</p><p id="d213" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这篇文章只是一个有趣的项目，我想做一年多。一路走来，我学到了很多概念，也获得了很多乐趣。还欠缺很多。例如，我需要创建地下洞穴、村庄，并创建一个可以无缝组合组块的算法。</p><h1 id="a386" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">灵感</h1><p id="41ac" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">在写我的文章时，我受到了许多文章的启发。如果你喜欢这篇文章，那么你肯定也想看看这些:</p><ul class=""><li id="7d1c" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated"><a class="ae nz" href="https://pvigier.github.io/2019/05/12/vagabond-map-generation.html" rel="noopener ugc nofollow" target="_blank">流浪者——地图生成| pvigier的博客</a></li><li id="bf54" class="ms mt it la b lb nf le ng lh nh ll ni lp nj lt mx my mz na bi translated"><a class="ae nz" href="http://www-cs-students.stanford.edu/~amitp/game-programming/polygon-map-generation/" rel="noopener ugc nofollow" target="_blank">为游戏生成多边形地图(stanford.edu)</a></li><li id="dfab" class="ms mt it la b lb nf le ng lh nh ll ni lp nj lt mx my mz na bi translated">【程序世界:2016年7月(procworld.blogspot.com)T2</li></ul></div><div class="ab cl pz qa hx qb" role="separator"><span class="qc bw bk qd qe qf"/><span class="qc bw bk qd qe qf"/><span class="qc bw bk qd qe"/></div><div class="im in io ip iq"><p id="13bb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你也可以看看我之前的一篇关于用Python  进行<a class="ae nz" rel="noopener" target="_blank" href="/simulating-traffic-flow-in-python-ee1eab4dd20f"> <strong class="la iu">交通模拟的文章，这篇文章讲述了如何程序化地生成交通数据。</strong></a></p></div></div>    
</body>
</html>