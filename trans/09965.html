<html>
<head>
<title>How to Generate Professional API Docs in Minutes from Docstrings</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在几分钟内从Docstrings生成专业的API文档</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-generate-professional-api-docs-in-minutes-from-docstrings-aed0341bbda7?source=collection_archive---------3-----------------------#2021-09-20">https://towardsdatascience.com/how-to-generate-professional-api-docs-in-minutes-from-docstrings-aed0341bbda7?source=collection_archive---------3-----------------------#2021-09-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ad61" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在一个小Python包的帮助下，生成高质量的文档变得简单而直观。包括降价和乳胶。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2f92aa975ac15640f68d4040ea904788.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JXowggeRh0oIApJh0Lqivg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd ky">图片来源</strong> : <a class="ae kz" href="https://pixabay.com/photos/writing-pen-man-ink-paper-pencils-1149962/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>(免费使用)</p></figure><h1 id="3a0f" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">文档很重要</h1><p id="cc22" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">当我们使用一个新的库(或者第一百万次重用我们最喜欢的库)时，我们都喜欢好的和全面的文档，不是吗？</p><p id="8ba6" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">想象一下，如果他们从Scikit-learn或TensorFlow网站上拿走所有的文档，你会有什么感觉。你会感到很无力，不是吗？</p><p id="fdf8" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">文档很重要。高质量的文档(特别是对于一个开源项目)证明，</p><ul class=""><li id="acf0" class="mt mu it lu b lv mo ly mp mb mv mf mw mj mx mn my mz na nb bi translated">关心这个项目</li><li id="a70a" class="mt mu it lu b lv nc ly nd mb ne mf nf mj ng mn my mz na nb bi translated">关心最终用户或客户(<a class="ae kz" href="https://retrocomputing.stackexchange.com/questions/15724/who-are-we-quoting-when-we-note-that-code-is-written-once-but-read-many-times" rel="noopener ugc nofollow" target="_blank"> <strong class="lu iu">你的代码被阅读的次数比它被编写的次数多得多</strong> </a>)</li><li id="4c33" class="mt mu it lu b lv nc ly nd mb ne mf nf mj ng mn my mz na nb bi translated">富有成效的思维，这样开发人员可以更有效地利用代码库进行调试和参考，否则用户很容易产生错误/问题(<a class="ae kz" href="https://medium.com/productive-data-science/why-and-how-should-you-learn-productive-data-science-53377b473f37" rel="noopener"> <strong class="lu iu">什么是富有成效的数据科学</strong> </a>)</li><li id="e890" class="mt mu it lu b lv nc ly nd mb ne mf nf mj ng mn my mz na nb bi translated">倾向于将技术项目进行逻辑总结，即，不要将个人爱好项目停留在Jupyter笔记本级别，而是使其可重用并值得为更大的用户群分发(<a class="ae kz" rel="noopener" target="_blank" href="/how-to-distinguish-yourself-from-hundreds-of-data-science-candidates-62457dd8f385"> <strong class="lu iu">这样你就可以将自己与其他数据科学家区分开来</strong> </a>)</li></ul><p id="26ab" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">这里有一篇文章，里面有一些优秀的例子…</p><div class="nh ni gp gr nj nk"><a href="https://nordicapis.com/5-examples-of-excellent-api-documentation/" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd iu gy z fp np fr fs nq fu fw is bi translated">优秀API文档的5个例子(以及我们为什么这么认为)|北欧APIs |</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">如果你在Nordic APIs博客上花了很多时间，你会知道开发者体验是我们…</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">nordicapis.com</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny ks nk"/></div></div></a></div><p id="0755" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">但是，编写文档经常感觉像是一件苦差事。这是每个开发人员在大规模项目中经历的认知负荷之上的额外负担。</p><p id="2ee4" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">如果我们有一个工具可以生成<strong class="lu iu">专业外观的文档</strong>，也就是说，可以直接从我们编写的原始Python函数推送到docs服务器或网站供公众使用，那会怎么样？</p><p id="2655" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">在本文中，我们介绍了这样一个漂亮的小工具，并展示了一些基本的例子。</p><h1 id="5ac8" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">` pdoc3` —一个直观但功能强大的编写Python文档的工具</h1><p id="6115" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">我们都为我们的数据科学项目和开源包编写了大量的Python函数并创建了大量的Python类，不是吗？其实即使是因果分析和爱好项目，我们也应该<a class="ae kz" rel="noopener" target="_blank" href="/how-a-simple-mix-of-object-oriented-programming-can-sharpen-your-deep-learning-prototype-19893bd969bd"> <strong class="lu iu">把这种面向对象编程风格的习惯</strong> </a>构建到我们的代码库中。</p><p id="383a" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">如果能够直接从这些函数和类定义中生成好看的API文档，而无需编写一行额外的HTML/CSS代码，那就太好了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/5977c5d20ef95cc2ad73e8c38f45f8dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MURluWKdSEgRi0wzlnuQ3g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd ky">图片来源</strong>:作者创作</p></figure><h2 id="2078" class="oa lb it bd lc ob oc dn lg od oe dp lk mb of og lm mf oh oi lo mj oj ok lq ol bi translated">安装和基本使用</h2><p id="cd33" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">只要pip安装软件包，</p><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="a989" class="oa lb it on b gy or os l ot ou">pip install pdoc3</span></pre><p id="b7a1" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated"><strong class="lu iu">注</strong>:有一个<strong class="lu iu">比较老的包叫</strong> <code class="fe ov ow ox on b"><strong class="lu iu">pdoc</strong></code>。你也可以用它来建立文档，这是这个项目的一个分支。但是这里我们使用的是更新的框架。</p><p id="3aaa" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">从一个简单的加法函数开始。假设它包含在本地工作区中名为<code class="fe ov ow ox on b">math-func.py</code>的文件中。</p><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="bbc8" class="oa lb it on b gy or os l ot ou">def addition(num1, num2=0):<br/>    """<br/>    Adds two numbers<br/>    <br/>    Args:<br/>    <br/>    num1: The first number<br/>    <br/>    num2: The second number, default 0<br/>    <br/>    Returns:<br/>    <br/>    The result of the addition process<br/>    """<br/>    <br/>    return (num1+num2)</span></pre><p id="17f3" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">因此，实际的代码只是一个返回语句，但是docstring很长。</p><p id="e1d5" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated"><strong class="lu iu">这就是关键。文档字符串。</strong></p><p id="6810" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">docstring是pdoc工作方式的核心。从他们的<a class="ae kz" href="https://pdoc.dev/docs/pdoc.html" rel="noopener ugc nofollow" target="_blank">网站</a>来看，它是“<em class="oy">命令行应用程序，可用于将项目文档呈现为静态HTML文件。它还包括一个实时重新加载的web服务器来预览更改</em>。</p><p id="04bd" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">所以，上面的流程变成了，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/604cbdb5b1a3c904373a8d39f49ab376.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aFQ2lNWp-0eYfq04sDU6mQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd ky">图片来源</strong>:作者创作</p></figure><p id="0f07" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">那么，如何生成web预览呢？只需一个CLI命令。</p><p id="e6c9" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated"><code class="fe ov ow ox on b">pdoc --http localhost:8080 math-func.py</code></p><p id="44a7" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">它在<code class="fe ov ow ox on b">localhost:8080</code>端口启动一个活动的web服务器。当您在浏览器中打开该页面时，</p><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="0913" class="oa lb it on b gy or os l ot ou">Starting pdoc server on localhost:8080<br/>pdoc server ready at <a class="ae kz" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank">http://localhost:8080</a></span></pre><p id="298a" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">您的浏览器显示如下页面。首先，你会看到有两个链接的页面，当你点击<code class="fe ov ow ox on b">math-func</code>链接时，你会看到API。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/b587674125dae1f72daefebc6dd49657.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*Ww66vJ-1irB4XRVN0MCBEQ.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/49b3461e7d3c1b95357f419e9b42869c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gbkZHbdbfj6woDBfBq8E5g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd ky">图片来源</strong>:作者创作</p></figure><p id="7cce" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">很酷，不是吗？但是看起来很基础。让我们看看我们是否能给它添加一些小铃铛和哨子。</p><h2 id="35b5" class="oa lb it bd lc ob oc dn lg od oe dp lk mb of og lm mf oh oi lo mj oj ok lq ol bi translated">降价——美化和可用性的关键</h2><p id="a041" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">我是编写文档的markdown格式的忠实粉丝。你不是经常在Github Readme文档中使用它吗？pdoc的伟大之处在于它允许在docstring中无缝集成markdown文本。</p><p id="c41e" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">假设，我们将第二个函数<code class="fe ov ow ox on b">mult</code>添加到我们的<code class="fe ov ow ox on b">math-func.py</code>模块中，</p><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="f1fc" class="oa lb it on b gy or os l ot ou">def mult(num1, num2=1):<br/>    """<br/>    Multiplies two numbers<br/>    <br/>    Args:<br/>    <br/>    `num1`: The first number<br/>        <br/>    `num2`: The second number, default `1`<br/>    <br/>    Returns:<br/>    <br/>    The result of the **multiplication** process<br/>    """<br/>    <br/>    return (num1*num2)</span></pre><p id="7f36" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">请注意对docstring的细微更改，其中有一些标记符号，如粗体的反勾号<code class="fe ov ow ox on b">`…`</code>和<code class="fe ov ow ox on b">** … **</code>。</p><p id="a261" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">现在，如果您只是保存这个文件，网页会自动重新载入您的更改。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/fdfa6f08b0506a511d50fc5bff072122.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YsIvQ4etAiGRajkVe6FsEg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd ky">图片来源</strong>:作者创作</p></figure><p id="2e97" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">请注意参数<code class="fe ov ow ox on b">num1</code>和<code class="fe ov ow ox on b">num2</code>是如何作为内联代码块呈现的，以及单词<strong class="lu iu">乘法</strong>是如何在API文档中以粗体显示的。这就是markdown magic，就在你的docstring里面。</p><p id="d3a3" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">您甚至可以在docstring 中显示带有三个反勾号的代码块。最终的API(用于我们的下一个<code class="fe ov ow ox on b">divide</code>函数)，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/e5ae9fde6e4c8c00e035e7d2e47cb253.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W9vRmAoB9Kx3xKdFqcEtZA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd ky">图片来源</strong>:作者创作</p></figure><p id="daac" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我们所要做的就是把这个放到docstring中，</p><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="56c4" class="oa lb it on b gy or os l ot ou">"""</span><span id="31b4" class="oa lb it on b gy pe os l ot ou">...</span><span id="38ec" class="oa lb it on b gy pe os l ot ou">Handles exception by a check,<br/>    <br/>    ```python<br/>    if num2 != 0:<br/>        return (num1/num2)<br/>    else:<br/>        raise ValueError('The second argument cannot be zero')<br/>    ```<br/>    <br/> """</span></pre><p id="efda" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">请注意，在三个反勾号之后使用了<strong class="lu iu">标识符</strong> <code class="fe ov ow ox on b"><strong class="lu iu">python</strong></code>，以便在API文档中以格式良好的方式呈现代码块。</p><h2 id="5517" class="oa lb it bd lc ob oc dn lg od oe dp lk mb of og lm mf oh oi lo mj oj ok lq ol bi translated">LaTeX math</h2><p id="d9e5" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">您可以在docstring中包含基本的LaTeX数学表达式，并在API doc上漂亮地呈现它们。例如，我们用下面的docstring编写一个毕达哥拉斯距离计算函数，</p><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="50dc" class="oa lb it on b gy or os l ot ou">def pythagorus(num1, num2=0):</span><span id="1fc9" class="oa lb it on b gy pe os l ot ou">    """<br/>    ### Description:<br/>    <br/>    Calculates the root-sum-of-square of two numbers<br/>    <br/>    ### Args:<br/>    <br/>    `num1`: The first number<br/>        <br/>    `num2`: The second number, default `0`<br/>    <br/>    ### Returns:<br/>    <br/>    The result of the **pythagorus** formula<br/>    <br/>    $$dist = \\sqrt { a^2+b^2 }$$<br/>    """</span></pre><p id="9f1a" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我们需要做以下两件事，</p><ul class=""><li id="9841" class="mt mu it lu b lv mo ly mp mb mv mf mw mj mx mn my mz na nb bi translated">使用<code class="fe ov ow ox on b">$$ … $$</code>包装一个LaTeX表达式</li><li id="21b3" class="mt mu it lu b lv nc ly nd mb ne mf nf mj ng mn my mz na nb bi translated">使用两个反斜杠字符来表示LaTeX表达式中常见的反斜杠。这是为了处理反斜杠作为Python docstring中的转义字符的常见角色。</li></ul><p id="92ce" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">结果是，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/02a1c2c5cec6f4e6d5f121237aebf7b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_BI8tGSIAwLe_eAaGkQezg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd ky">图片来源</strong>:作者创作</p></figure><h2 id="078c" class="oa lb it bd lc ob oc dn lg od oe dp lk mb of og lm mf oh oi lo mj oj ok lq ol bi translated">建立函数索引</h2><p id="5e13" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">还要注意我们在页面左侧构建的函数索引。这就像一个目录，当你点击那些链接到相应的功能时，它会把你带到文档中的任何地方。这是一个模块一个模块构建的。这里我们的主模块当然是<code class="fe ov ow ox on b">math-func.py</code>文件。</p><p id="e22b" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">您可能已经注意到，<strong class="lu iu">索引是按字母顺序排序的</strong>(根据函数名)。虽然在我们的源代码中，我们在<code class="fe ov ow ox on b">mult</code>函数之后添加了<code class="fe ov ow ox on b">divide</code>函数，但是它被索引在第二位。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/5a4fbdcbb89818c231a37568a657c049.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nsAUYSGDQL4nigLYDWHdog.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd ky">图片来源</strong>:作者创作</p></figure><h1 id="cfcd" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">其他选项和实用程序</h1><p id="8025" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">我们在上一节中介绍了基本用法和选项。在这里，我们想要展示更多的全局选项和实用程序，它们可以用于更多的控制和可用性。</p><h2 id="7f32" class="oa lb it bd lc ob oc dn lg od oe dp lk mb of og lm mf oh oi lo mj oj ok lq ol bi translated">输出选项</h2><p id="aa30" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">你可以生成，</p><ul class=""><li id="5fa2" class="mt mu it lu b lv mo ly mp mb mv mf mw mj mx mn my mz na nb bi translated"><strong class="lu iu"> HTML页面</strong>:带<code class="fe ov ow ox on b">pdoc --html &lt;filename.py&gt; </code>。这会将模块HTML文件放在工作目录下的./html文件夹中。您可以使用一个可选的目录标志将HTML文件放入其中。</li><li id="fd9c" class="mt mu it lu b lv nc ly nd mb ne mf nf mj ng mn my mz na nb bi translated"><strong class="lu iu">服务器</strong>:带<code class="fe ov ow ox on b">pdoc --http HOST:PORT &lt;filename.py&gt;</code>在网页上显示API文档的实时预览，带自定义<code class="fe ov ow ox on b">HOST</code>和<code class="fe ov ow ox on b">PORT</code>。</li></ul><h2 id="f7e3" class="oa lb it bd lc ob oc dn lg od oe dp lk mb of og lm mf oh oi lo mj oj ok lq ol bi translated">对于类对象</h2><p id="a65c" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">你可以像函数一样用标准类对象构建文档。例如，我们将整个<code class="fe ov ow ox on b">math-func</code>代码转换成一个类，并在我们的模块中添加第二个<code class="fe ov ow ox on b">Dataframe</code>类。当我们为此生成文档时，它看起来像是，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/2aedb064c73d53a3616f5a4a283ac028.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Z5hLeGbgYQ0Pb_putps3Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd ky">图片来源</strong>:作者创作</p></figure><h2 id="cd55" class="oa lb it bd lc ob oc dn lg od oe dp lk mb of og lm mf oh oi lo mj oj ok lq ol bi translated">一起</h2><p id="9b93" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">如果你把你的类和函数放在一个单独的Python脚本(模块)中，那么它会像这样显示，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/834344ea49a7fc69222a78ef1a97f85e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qdiAkyVZ3IUzC-fPOzQxUw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd ky">图片来源</strong>:作者创作</p></figure><h2 id="866c" class="oa lb it bd lc ob oc dn lg od oe dp lk mb of og lm mf oh oi lo mj oj ok lq ol bi translated">程序化生成</h2><p id="752c" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">从根本上说，<code class="fe ov ow ox on b">pdoc3</code>是一个Python包，因此您可以在Python代码中使用它以编程的方式生成文档。这是一个样板代码示例，</p><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="1ea8" class="oa lb it on b gy or os l ot ou">import pdoc</span><span id="68c1" class="oa lb it on b gy pe os l ot ou">modules = ['a', 'b']  # Public submodules are auto-imported<br/>context = pdoc.Context()</span><span id="d86a" class="oa lb it on b gy pe os l ot ou">modules = [pdoc.Module(mod, context=context)<br/>           for mod in modules]<br/>pdoc.link_inheritance(context)</span><span id="61db" class="oa lb it on b gy pe os l ot ou">def recursive_htmls(mod):<br/>    yield mod.name, mod.html()<br/>    for submod in mod.submodules():<br/>        yield from recursive_htmls(submod)</span><span id="832e" class="oa lb it on b gy pe os l ot ou">for mod in modules:<br/>    for module_name, html in recursive_htmls(mod):<br/>        ...  # Process</span></pre><p id="852b" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">注意<code class="fe ov ow ox on b">mod.html()</code>本质上是一个在处理模块的文档字符串后返回原始HTML字符串的函数。这是使用<code class="fe ov ow ox on b">pdoc --html &lt;filename.py&gt;</code>命令渲染的内容。在上面的代码中，您直接使用您的代码检索它，并可以进一步操作它。</p><h2 id="f777" class="oa lb it bd lc ob oc dn lg od oe dp lk mb of og lm mf oh oi lo mj oj ok lq ol bi translated">构建完整的模块</h2><p id="ace4" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">您可以使用pdoc3一次性构建一个完整的模块。为此，您只需将必要的文件放在通常的模块/子模块层次结构中，就像标准的Python包一样。</p><p id="bea9" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">例如，我们可能有这样一个简单的目录结构(注意Python名称空间要求的<code class="fe ov ow ox on b">__init__.py</code>)目录<code class="fe ov ow ox on b">math-mod</code>，在这个目录中，我们将这些文件放在子目录中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/336aebf0195104c7f9fc22fc77445fd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:442/format:webp/1*3rUJ2FpiQMG0RYtaJnKJ1w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd ky">图片来源</strong>:作者创作</p></figure><p id="2ca0" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我们可以运行一行命令，</p><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="914f" class="oa lb it on b gy or os l ot ou">pdoc --http localhost:8080 -c latex_math=True math-mod</span></pre><p id="a6c2" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我们将得到下面的结构，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/6703846183774e3d1be3c8cfcc7bff2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kMuCGWS94rWhZiYpIsDIig.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd ky">图片来源</strong>:作者创作</p></figure><h1 id="2084" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">摘要</h1><p id="3aeb" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">构建高质量的文档感觉起来像是软件项目中编程和技术问题解决部分的额外负担。数据科学也不例外。然而，伟大的数据科学和机器学习项目和框架是真正伟大的，因为它们因其广泛的API文档而易于任何人使用。</p><p id="8105" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">在本文中，我们展示了如何使用一个漂亮的小Python包来创建漂亮的API文档(包括markdown语法和LaTeX math渲染),就在舒适的docstrings函数中。</p><p id="b8da" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">希望这能打破为您正在从事的下一个开源项目制作良好文档的障碍。</p></div><div class="ab cl pl pm hx pn" role="separator"><span class="po bw bk pp pq pr"/><span class="po bw bk pp pq pr"/><span class="po bw bk pp pq"/></div><div class="im in io ip iq"><p id="7a1b" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">喜欢这篇文章吗？成为 <a class="ae kz" href="https://medium.com/@tirthajyoti/membership" rel="noopener"> <strong class="lu iu"> <em class="oy">中等会员</em> </strong> </a> <em class="oy">继续</em> <strong class="lu iu"> <em class="oy">无限制学习</em> </strong> <em class="oy">。如果您使用下面的链接，</em> <strong class="lu iu"> <em class="oy">，我将收取您的一部分会员费，而不会对您产生额外费用</em> </strong> <em class="oy">。</em></p><div class="nh ni gp gr nj nk"><a href="https://medium.com/@tirthajyoti/membership" rel="noopener follow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd iu gy z fp np fr fs nq fu fw is bi translated">通过我的推荐链接加入Medium—Tirthajyoti Sarkar</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">medium.com</p></div></div><div class="nt l"><div class="ps l nv nw nx nt ny ks nk"/></div></div></a></div></div></div>    
</body>
</html>