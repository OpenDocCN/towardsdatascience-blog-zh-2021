<html>
<head>
<title>PostgreSQL: basics to get you up and running [PART 2] (macOS)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PostgreSQL:启动和运行的基础知识[第2部分] (macOS)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/postgresql-basics-to-get-you-up-and-running-part-2-macos-c29cb15e8483?source=collection_archive---------19-----------------------#2021-03-21">https://towardsdatascience.com/postgresql-basics-to-get-you-up-and-running-part-2-macos-c29cb15e8483?source=collection_archive---------19-----------------------#2021-03-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/cb076c9e83a555df54dad51babd0430a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UNx603Eys8VA3wscIDwaSw.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">照片由来自<a class="ae kf" href="https://www.pexels.com/photo/black-internal-hdd-on-black-surface-117729/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的<a class="ae kf" href="https://www.pexels.com/@bohed?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">阿扎马特·埃森纳列夫</a>拍摄</p></figure><p id="553c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本系列的第1部分中，我介绍了PostgreSQL是什么，它是如何工作的，如何开始添加数据库和表来创建存储信息的关系数据库。在本文中，我将假设您已经下载了所有内容，并且有了可以使用的数据库/表格。我将经历一些我过去经常在谷歌上搜索的手术。如果你觉得这个信息有用，它将是你书签的一个很好的补充。我们开始吧！</p><h2 id="66c5" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">如何导入CSV？</h2><p id="90c6" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">假设您有一个CSV文件，希望使用pgAdmin将其导入postgres数据库。您需要做的第一件事是在pgAdmin中创建一个表，按照您想要的名称命名它，然后根据CSV顺序声明适当数量的列。例如，我将导入一个包含两列的CSV:名称、编号。name列将是一个字符串，第二列将是一个随机数。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/bae31f5c42ab1c17dc8f070bdb159598.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*es2S0esMipe7atFxfwJPJg.png"/></div></figure><p id="2ad8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在pgAdmin中，让我们创建一个名为locations的新表，如本系列的第1部分所述。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mh"><img src="../Images/26c4d41d29c7d655b0d6ca1f7722b9d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2A-3ECHoY1I9N4FZ-Gf0mg.png"/></div></div></figure><p id="fd4a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请记住，我们需要声明这些列，并且这些列需要按照它们在CSV中出现的顺序进行声明。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mi"><img src="../Images/afaf0c8b6d8d4ee3cc9074be60a7980d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y3kqs8VcN8KJ5jhh2D3V3w.png"/></div></div></figure><p id="04ce" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们点击save时，我们将得到一个名为(namedb)的表，它有两列。要将数据从CSV获取到<em class="mj"> namedb </em>表中，右键单击pgAdmin中的表。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mk"><img src="../Images/689f9912fb96a763f9d292312d8edf43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9NEphwnSzkGLXBEQDtCqIw.png"/></div></div></figure><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ml"><img src="../Images/4ea33059fb13d7ec3df4d56f9d66597d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XU-VktejfT_h83XvaJAWIA.png"/></div></div></figure><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mm"><img src="../Images/55bb49a7ee9abcf5ee336f504c289b10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IOQcJ_69piHBKAa-9ngKuw.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">导入完成后，会弹出一个对话框。</p></figure><p id="8d6c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">也可以通过右键单击pgAdmin中的表，选择查询工具，并使用以下SQL语句来导入数据:</p><pre class="md me mf mg gt mn mo mp mq aw mr bi"><span id="ef1d" class="le lf it mo b gy ms mt l mu mv">COPY namedb(name, locations)<br/>FROM '/Users/brendanferris/Desktop/scripts/postgres_blog/people.csv'<br/>DELIMITER ','<br/>CSV HEADER;</span></pre><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mw"><img src="../Images/98d05496fd72e4157ef9bd9dc1a82d5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_q5uxkibi-z7fyUHK_TtLQ.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">现在我们的数据在数据库里。</p></figure><h2 id="12ea" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">向现有表中添加ID列。</h2><p id="dcfa" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">现在我们在表中有了名称和位置，我们想添加一个id列，可能用作键<a class="ae kf" href="https://www.essentialsql.com/what-is-the-difference-between-a-primary-key-and-a-foreign-key/" rel="noopener ugc nofollow" target="_blank">键</a>，使我们能够将信息与其他表中的其他信息连接起来。为此，让我们向<em class="mj"> namedb </em>表添加一个<em class="mj"> name_id </em>列。</p><pre class="md me mf mg gt mn mo mp mq aw mr bi"><span id="3a0f" class="le lf it mo b gy ms mt l mu mv">ALTER TABLE namedb ADD COLUMN name_id serial PRIMARY KEY;</span></pre><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mx"><img src="../Images/480b68b2e40c2d60f74c3eadede1ef22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SFxkj0d3AKKd8upu87Ed2A.png"/></div></div></figure><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/12e12d2f3f51adfcb1917517391fad51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RjMeQo4rXNzqyLa_jbHrsg.png"/></div></div></figure><h2 id="a322" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">将查询结果保存到CSV文件中。</h2><p id="a259" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">假设我们想获得数据库中姓名以“A”开头的所有人，然后将结果保存在它自己的CSV文件中。我们可以通过首先获取我们想要的信息来实现这一点，在本例中:</p><pre class="md me mf mg gt mn mo mp mq aw mr bi"><span id="c34d" class="le lf it mo b gy ms mt l mu mv">SELECT name, locations FROM namedb<br/>WHERE name ILIKE('a%');</span></pre><p id="50d1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">结果信息应该显示在数据输出窗口中。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/ea379af3624f7189974c608e2c12a075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_mNFjLfVrPBMtvujTSfPxA.png"/></div></div></figure><p id="a916" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了将这两行输出到CSV中，我们需要使用以下查询格式:</p><pre class="md me mf mg gt mn mo mp mq aw mr bi"><span id="8f95" class="le lf it mo b gy ms mt l mu mv"><strong class="mo iu">COPY</strong> ([Query]) <strong class="mo iu">TO</strong> '[File Name]' <strong class="mo iu">DELIMITER</strong> ',' CSV HEADER;</span></pre><p id="dd9b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们只需要在COPY关键字后面的括号中输入我们的查询，并以指定的格式将文件发送到特定的位置。我们指定的格式是CSV，因为我们将分隔符声明为逗号。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/12d8b04d45f4052ae94d0efbd89beac9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tHAZmvAbNTr6xQRmomBeqA.png"/></div></div></figure><p id="9674" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">无论您指定哪个路径，都可以找到该文件。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nb"><img src="../Images/bbe13059f4162b34dd26a32b625a9b34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l8Qjz60UUwUaC6UPpqBjgg.png"/></div></div></figure><p id="f59c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些是我发现自己在过去执行的一些更常见的操作，我希望这个小纲要在将来能为您节省一些时间。</p><p id="53c5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">编码快乐！</p><p id="1a7f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">💻请随意查看我的<a class="ae kf" href="https://brendanferris.com/" rel="noopener ugc nofollow" target="_blank">网站</a>。</p></div></div>    
</body>
</html>