<html>
<head>
<title>Demystify Mortgage Loan By Building a Python Simulator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过构建Python模拟器来揭开抵押贷款的神秘面纱</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/demystify-mortgage-loan-by-building-a-python-simulator-7c192d201cf6?source=collection_archive---------13-----------------------#2021-04-13">https://towardsdatascience.com/demystify-mortgage-loan-by-building-a-python-simulator-7c192d201cf6?source=collection_archive---------13-----------------------#2021-04-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="e966" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">一步一步的指南，建立一个有用的Python模拟器，帮助你更好地了解你的房屋净值及其潜在的未来增长。</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/3df53ae5193ce15f4a8d151b4ef9f1c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cGHKLUlfY0dvurmBnI0UgA.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">托德·肯特在<a class="ae kz" href="https://unsplash.com/s/photos/house?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="a95a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">抵押贷款不仅仅是在规定的支付期限内根据商定的金额每月还款。如果没有很好地了解其还款机制和潜在风险，抵押贷款很容易危及我们的财务。</p><p id="8903" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这里，我们将通过一步一步的实践指南来开发一个可以模拟长期抵押贷款偿还的<strong class="lc iv"> Python模拟器</strong>。该模拟器还将使我们能够可视化贷款摊销和我们的房屋净值的未来增长。你可能会惊讶地发现，看似略高的贷款利率会严重影响房屋净值。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="3526" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">必备Python库</h1><p id="1dad" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">在开始开发过程之前，我们需要确保以下库在我们的机器中可用:</p><ol class=""><li id="843a" class="na nb iu lc b ld le lg lh lj nc ln nd lr ne lv nf ng nh ni bi translated">细流—<a class="ae kz" href="https://www.streamlit.io/" rel="noopener ugc nofollow" target="_blank">https://www.streamlit.io/</a></li><li id="22d3" class="na nb iu lc b ld nj lg nk lj nl ln nm lr nn lv nf ng nh ni bi translated">阴谋地—<a class="ae kz" href="https://plotly.com/python/" rel="noopener ugc nofollow" target="_blank">https://plotly.com/python/</a></li><li id="86df" class="na nb iu lc b ld nj lg nk lj nl ln nm lr nn lv nf ng nh ni bi translated">numpy—<a class="ae kz" href="https://numpy.org/" rel="noopener ugc nofollow" target="_blank">https://numpy.org/</a></li></ol></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="7f90" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">GitHub回购</h1><p id="93a0" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">如果您希望使用我的代码来跟踪这篇文章，您可以在我的<a class="ae kz" href="https://github.com/teobeeguan/MortgageSimulator" rel="noopener ugc nofollow" target="_blank"> Github Repo </a>获得完整的源代码。</p><p id="7ad5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">你也可以运行我从GitHub repo(mortgage simulator . py)获得的代码来预览这个应用。确保您已在机器中正确设置了Streamlit。您可以参考<a class="ae kz" href="https://docs.streamlit.io/en/stable/index.html" rel="noopener ugc nofollow" target="_blank"> Streamlit网站</a>了解更多信息。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="e9cb" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">抵押贷款模拟器的开发</h1><h2 id="1af9" class="no me iu bd mf np nq dn mj nr ns dp mn lj nt nu mp ln nv nw mr lr nx ny mt nz bi translated">1.导入库</h2><p id="ca0f" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">首先，我们在程序中导入所有需要的库。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oa ob l"/></div></figure><h2 id="12fb" class="no me iu bd mf np nq dn mj nr ns dp mn lj nt nu mp ln nv nw mr lr nx ny mt nz bi translated">2.设置页面标题</h2><p id="c019" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">在这里，我们将开始使用Streamlit来构建我们的模拟器。<a class="ae kz" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>是一个开发数据app的开源Python框架。</p><p id="949d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">首先，让我们为浏览器选项卡和主页设置页面标题。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oa ob l"/></div></figure><p id="7b26" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第1行:</strong>使用Streamlit<em class="oc">set _ page _ config</em>中的<em class="oc"> page_title </em>为我们的浏览器标签页定义一个标题。</p><p id="f6cb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第2行:</strong>创建我们模拟器的主标题。</p><p id="d2fb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此时，我们可以尝试运行Streamlit应用程序来可视化输出。为此，我们在终端/命令提示符下键入以下命令。</p><pre class="kk kl km kn gu od oe of og aw oh bi"><span id="7fc7" class="no me iu oe b gz oi oj l ok ol">streamlit run YourPythonFileName.py</span></pre><p id="5bd2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><em class="oc">(注意:</em> <strong class="lc iv"> <em class="oc"> </em> </strong> <em class="oc">在运行应用程序之前，请确保您已经导航到保存脚本文件的目录。)</em></p><p id="091a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们应该会看到如下输出:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj om"><img src="../Images/872a6ef7eee8744b762be455bf9b13dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wLoebttLidZFgfjDvrog_A.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者准备的图像</p></figure><h2 id="98df" class="no me iu bd mf np nq dn mj nr ns dp mn lj nt nu mp ln nv nw mr lr nx ny mt nz bi translated">3.为抵押详细信息创建输入字段</h2><p id="3c20" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">为了模拟按揭付款，我们需要四条信息，它们是<em class="oc"> </em> <strong class="lc iv"> <em class="oc">房屋价值、首付比例、贷款利率和付款期限</em> </strong>。</p><p id="093e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在本节中，我们将使用Streamlit构建四个数字输入字段，以获取用户对上述四条信息的输入。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oa ob l"/></div></figure><p id="d4bb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第1行:</strong>创建标题。</p><p id="8082" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第2行:</strong>定义两列来放置我们的输入字段。</p><p id="3000" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第4–9行:</strong>在第一列中，创建相关的副标题，并使用Streamlit <em class="oc"> number_input </em>方法创建房屋价值和利率的数字输入字段。我们将最小值设置为零，并将输入格式设置为十进制数。</p><p id="4eec" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第11–16行:</strong>在第二列中，重复上述类似过程，为首期付款百分比和付款期(年)创建相关副标题和数字输入字段。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj on"><img src="../Images/0a1801610734c9029630eca64e7a376f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6-lQ8Lt6QV1CuW7oTJ-_NA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者准备的图像</p></figure><h2 id="e674" class="no me iu bd mf np nq dn mj nr ns dp mn lj nt nu mp ln nv nw mr lr nx ny mt nz bi translated">4.每月分期付款计算</h2><p id="04cc" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">有了这四条信息，我们现在可以开始计算每月分期付款。这将会给我们一个粗略的概念，我们每月的抵押贷款还款承诺。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oa ob l"/></div></figure><p id="053d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第1–4行:</strong>从房屋价值中扣除首付款，计算贷款金额。将付款年数乘以12，得到付款月总数。将利率转换成小数。</p><p id="b69a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第5–6行:</strong>根据输入的利率，我们使用以下公式计算定期利率</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj oo"><img src="../Images/314692f49e0128ced13b68212b7eba3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*OZx4XwUaSj2XIOXY1-tcmw.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者准备的图像</p></figure><p id="680e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">定期利率是在较短时间内(如1个月)表示的年利率。由于抵押贷款是按月偿还的，这里我们的目标是获得每月定期利息，因此N=12。最后，使用<em class="oc"> Numpy pmt </em>方法，根据周期利率、还款总月数和贷款金额计算每月的还款金额。<em class="oc"> Numpy pmt </em>方法将封装计算逻辑并自动得出每月分期付款金额。</p><p id="972e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第8–10行:</strong>向我们的模拟器显示首期付款、贷款金额和每月分期付款。</p><p id="5d3f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们尝试在抵押详细信息的数字输入字段中输入一组示例值:</p><p id="7326" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><em class="oc">房屋价值— 500000 </em></p><p id="9bd2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><em class="oc">首付比例— 10 </em></p><p id="a372" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><em class="oc">贷款利率— 4.5 </em></p><p id="b2cd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><em class="oc">目标付款年限— 30年</em></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj op"><img src="../Images/d0c18414d8d0e0f993acf8df1be962b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*207e2LWzYv6VyZiLhTaEqw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者准备的图像</p></figure><p id="6904" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">模拟器处理我们的样本输入，结果是每月分期付款2256.02美元。</p><h2 id="7659" class="no me iu bd mf np nq dn mj nr ns dp mn lj nt nu mp ln nv nw mr lr nx ny mt nz bi translated">5.抵押贷款分期偿还</h2><p id="3c9c" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">在这个阶段，我们的模拟器能够根据我们提供的抵押贷款详细信息的输入值来估计每月分期付款金额。然而，每月分期付款金额本身并不能让我们知道我们的付款分别对贷款本金和贷款利息产生了多大的影响。虽然每月的分期付款总额是相同的，但包含贷款本金和贷款利息的金额部分会随着时间的推移而有所不同。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oq"><img src="../Images/1fd37eb0243048ac4dd284c231f4eca8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qTDqjFtJ5dexi6_flshpGA.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@alexandermils?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Alexander Mils </a>在<a class="ae kz" href="https://unsplash.com/s/photos/loan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="e249" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在本节中，我们将为抵押贷款生成一个<a class="ae kz" href="https://www.investopedia.com/terms/a/amortization_schedule.asp" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv">分期偿还计划</strong> </a>。摊销时间表是一个表，显示了贷款本金和贷款利息的金额，包括每个月的分期付款，直到贷款全部还清。此外，我们还将绘制一个图表，以显示构成我们每月分期付款的贷款本金和贷款利息的每月变化。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oa ob l"/></div></figure><p id="d782" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第4–6行:</strong>创建三个Numpy系列来保存每月剩余本金、已付本金和已付利息的值。用零初始化每个Numpy系列。</p><p id="ff0b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第8–23行:</strong>创建一个循环来迭代计算构成当月分期付款的本金和利息。当前的利息支付是基于定期利率与先前剩余本金的乘积计算的(第15行)。从每月分期付款中减去由此产生的利息付款将得到该特定月份的本金付款(第16行)。将当前的利息支付、本金支付和剩余本金存储到前面创建的三个Numpy系列中(第21–23行)。</p><p id="9995" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第31–37行:</strong>使用Python Plotly<em class="oc">make _ subplots</em>方法创建一个包含表格和图表的合成图形。</p><p id="3d52" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第39–49行:</strong>使用Plotly <em class="oc"> go。Table </em>对象创建一个显示每月本金支付、利息支付和剩余本金的表。将之前创建的Numpy系列插入到单元格的值中(第44–46行)。使用<em class="oc"> add_trace </em>方法将表格添加到复合图形对象中。</p><p id="6472" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第51–58行:</strong>使用Plotly <em class="oc"> go。散点图</em>对象为几个月内的本金支付创建一个折线图。将本金支付的Numpy系列设置为y轴值。再次使用<em class="oc"> add_trace </em>方法将绘图添加到复合图形对象。</p><p id="1932" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第60–67行:</strong>以类似的方式，使用Plotly <em class="oc"> go。散点图</em>对象为几个月的利息支付创建一个折线图。此时，我们使用<em class="oc"> append_trace </em>方法添加线图，这样它将与同一图表中本金支付的线图重叠。</p><p id="3e7b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第69–81行:</strong>通过设置相关的标题、尺寸和图例来配置组合图的布局。</p><p id="60ce" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第83行:</strong>使用Streamlit <em class="oc"> plotly_chart </em>方法渲染合成图。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj or"><img src="../Images/7526dec7cf8692e24823ed16a88470fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DaMujkdQ__utA0cZIOKSnw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者准备的图像</p></figure><p id="cb54" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">从上面的分期偿还表和线图中，我们可以观察到我们每月分期付款的大部分用于支付我们付款计划早期阶段的贷款利息。在最初几年里，我们分期付款中只有一小部分用于支付本金。</p><p id="d088" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然而，随着时间的推移，这种趋势正在改变。由于利息支付是根据之前剩余本金的定期利率计算的，因此持续还款将导致利息支付从一个月到另一个月稳步减少。在分期偿还计划的后期，我们会发现每月分期付款的大部分用于支付我们的贷款本金。</p><h2 id="e44a" class="no me iu bd mf np nq dn mj nr ns dp mn lj nt nu mp ln nv nw mr lr nx ny mt nz bi translated">6.房屋净值(市场价值不变)</h2><p id="7173" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">持续偿还抵押贷款不仅可以减少我们不时支付的利息，还可以不断增加我们的房屋净值。基本上，房产净值是我们在任何给定时间实际拥有的房产现值的一部分。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj os"><img src="../Images/eecb8cac16cb6f9c1954648d26c170d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q6PM-_5_bFDX6AHfq1pt9w.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">罗尼·乔治在<a class="ae kz" href="https://unsplash.com/s/photos/real-estate?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="1e65" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">假设我们以50万美元的市场价购买了一处房产，我们的首付是10%。这意味着我们最初的房屋净值相当于我们的首付50，000美元。当我们开始偿还抵押贷款时，无论何时分期付款，我们的房屋净值都会累积。例如，如果我们支付了三个月的分期付款，累计本金支付总额为2700美元，我们最新的房屋净值为50，000美元+2700美元= 52700美元。</p><p id="3578" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">假设房子的市场价值在我们的还款期内保持不变，我们的房屋净值将相当于我们抵押贷款期限结束时500，000美元的市场价格。</p><p id="74a6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们给我们的模拟器添加一个情节，以显示一个更清晰的画面。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oa ob l"/></div></figure><p id="e663" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第4–5行:</strong>使用Numpy <em class="oc"> cumsum </em>方法获得本金支付和利息支付系列的累计和。本金支付的累计金额相当于累计房屋净值(假设房产的市场价值保持不变)。</p><p id="4dd7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第7行:</strong>创建一个plottly<em class="oc">Fig</em>对象来显示线条图。</p><p id="cb81" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第8–14行:</strong>使用Plotly <em class="oc"> go。散点图</em>对象创建一个折线图来显示几个月内的累计房屋净值。使用<em class="oc"> add_trace </em>方法将线图添加到<em class="oc"> fig </em>对象中。</p><p id="9c2c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第16–22行:</strong>以类似的方式，使用Plotly <em class="oc"> go。散点图</em>对象创建另一个折线图来显示几个月来支付的累计利息，并将其添加到<em class="oc">图</em>对象中。</p><p id="6db4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第24–36行:</strong>通过设置图表图形的标题名称、x轴&amp; y轴标题、尺寸和图例来配置布局。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ot"><img src="../Images/404cedc95cdd6fa4805d994efcbf96ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*XSUPAC8QaH_K57NL8OVoKw.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者准备的图像</p></figure><p id="2a24" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">从上面的线图中，我们可以看到我们的累计房屋净值逐月增加，直到在还款期结束时达到顶峰。此外，我们还可以观察到，我们的累计房屋净值大约在第314个月后(接近还款期结束时)才会超过累计利息支付。</p><p id="2a1b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">假设我们在模拟器中调整贷款年利率，从4.5降到4。一旦一个值被改变，我们的图将自动更新如下。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ou"><img src="../Images/0f627353cf935726e0a3ad21d47e3418.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D7uJsxt_r_Qh7QqXpxjrWQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者准备的图像</p></figure><p id="8a7e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">年利率降低0.5%，我们可以观察到最终支付的累计利息明显减少。大约在278个月后，我们的累计房屋净值将超过累计利息。这就是为什么我们总是寻找一个金融机构，可以为我们提供最好的抵押贷款利率。</p><p id="dae8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，如果我们把我们的付款期从30年调整到25年呢？让我们看看它将如何影响我们的累计房屋净值随着时间的推移。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ov"><img src="../Images/5b17ed3794a094e852ef310a53eb12d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*TJB6LDZ7RDU1M2AA3c0OXA.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者准备的图像</p></figure><p id="6866" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">随着贷款偿还期限的缩短，累计支付的利息大幅减少。我们的累积房屋净值将会高于大约在我们的抵押贷款期中期后支付的累积利息。这表明，虽然我们可以支付较低的每月分期付款和较长的任期，但从长远来看，我们承担了巨大的利息成本。在控制我们当前的财务承诺和长期利润之间应该有一个平衡。</p><h2 id="1310" class="no me iu bd mf np nq dn mj nr ns dp mn lj nt nu mp ln nv nw mr lr nx ny mt nz bi translated">7.房屋净值增长预测</h2><p id="52f6" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">最后，让我们为我们的抵押贷款模拟器添加一个增长预测特性。在上一节中，我们的房屋净值的演变完全基于我们在整个贷款期限内的本金支付，没有考虑房屋市场价值的增长。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ow"><img src="../Images/fbdf1a756d00c6aaecaafd26145d60bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vDcD_MCw65prGFVu1qNMDQ.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">沃洛季米尔·赫里先科在<a class="ae kz" href="https://unsplash.com/s/photos/chart?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="4f63" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果我们房屋的市场价值每年都在变化(这种情况经常发生)，我们的房屋净值会发生什么变化。值得注意的是，增长不一定是正的。也可能出现负增长。</p><p id="69f7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这里，我们添加了另一个输入字段，让用户输入我们模拟器中的预测增长率，并创建一个折线图来显示一段时间内的预测房屋价值和预测房屋净值。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oa ob l"/></div></figure><p id="90e2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第4–5行:</strong>创建一个相关的副标题和一个新的数字输入字段，用于表示国内市场价值的年增长率。</p><p id="3647" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第7–8行:</strong>将年度预测增长率转换为月度增长率。使用Numpy <em class="oc"> full </em>方法创建一个增长数组，并用月增长率填充它。</p><p id="786e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第9–10行:</strong>使用Numpy <em class="oc"> cumprod </em>方法计算各月增长率的累计乘积。将由此产生的累积增长乘以原始房屋价值。这将产生一个预测家庭价值系列。</p><p id="7b2f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第11–12行:</strong>计算几个月内房屋所有权的累计百分比。将该累计百分比乘以预测房屋价值系列，这将得到预测房屋净值系列。</p><p id="06c1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第14–51行:</strong>重复上一节介绍的类似步骤，创建线形图，以显示几个月内的预测房屋价值、几个月内的预测房屋净值和几个月内的剩余本金。使用Plotly <em class="oc"> add_trace </em>方法将三个线图添加到同一个图表中。通过设置相关标题、x轴&amp; y轴标题、尺寸和图例来配置图表图形布局。</p><p id="a590" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第53行:</strong>渲染图表图形。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ox"><img src="../Images/ff0ce696c895bfede5c79277ddf2396e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QxuaZyliL5uRGew0Pe_B4Q.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者准备的图像</p></figure><p id="03a0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">通过设定每年3%的增长率，我们将看到我们的国内市场价值在300个月后(25年)将翻一番。当我们还在用同样的月供还房贷时，202个月后，我们的房屋净值已经超过了原始房屋价值(500，000美元)。在我们的还款期结束时，我们的房屋净值相当于预测房屋价值，是原始房屋价值的200%。这种房屋净值的增加可以为我们提供一个申请<a class="ae kz" href="https://www.investopedia.com/terms/h/homeequityloan.asp" rel="noopener ugc nofollow" target="_blank">房屋净值贷款</a>的机会，可以将我们的股权转换为现金。</p><p id="61bf" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，让我们尝试用负值-5再次调整增长率，看看它如何影响我们的房屋净值。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oy"><img src="../Images/8f8cb58f32e0172fbce185e0ea3a4189.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wKl5_EEyaZKW3TiqGtAAeA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者准备的图像</p></figure><p id="2230" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">从上面的线图中，我们可以观察到房屋价值在300个月(25年)后严重贬值到原始市场价值的30%左右。这也意味着我们的房屋净值也将在抵押贷款期限结束时贬值。我们因财产贬值遭受了巨大损失。</p><p id="8857" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此外，有相当长的一段时间(大约第-57个月到第-169个月)，我们的房屋价值属于剩余本金金额。这样的情况被称为<a class="ae kz" href="https://www.investopedia.com/terms/u/underwater-mortgage.asp" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv">水下抵押</strong> </a>。在此期间，我们将没有任何股本可用于信贷，甚至可能阻止我们出售房屋，除非我们有足够的现金支付损失。水下抵押贷款是2008年金融危机期间的一个普遍问题。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oz"><img src="../Images/ead514fd56d1961a5e4d7c3a64f2bed6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xn0rZs6-Mx44ISacRffzaQ.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">来自<a class="ae kz" href="https://www.pexels.com/photo/sad-mature-businessman-thinking-about-problems-in-living-room-3772618/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的<a class="ae kz" href="https://www.pexels.com/@olly?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Andrea Piacquadio </a>的照片</p></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="0b50" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">结论</h1><p id="63b2" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">家庭投资可以是非常有益的，但这是一个长期的过程，充满了风险。在我们自己的财务规划中，它需要仔细的市场分析和良好的自制力。希望这里展示的Python模拟器能给你一些关于抵押贷款的生动想法。任何投资都不会是一种随意的猜测活动，而是需要对未来情景进行一些可靠的预测，这将有助于我们做出更明智的决定。</p><p id="6ee7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我希望你喜欢阅读这篇文章。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="b654" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">参考</h1><ol class=""><li id="5847" class="na nb iu lc b ld mv lg mw lj pa ln pb lr pc lv nf ng nh ni bi translated"><a class="ae kz" href="https://www.investopedia.com/terms/h/home_equity.asp" rel="noopener ugc nofollow" target="_blank">https://www.investopedia.com/terms/h/home_equity.asp</a></li><li id="5032" class="na nb iu lc b ld nj lg nk lj nl ln nm lr nn lv nf ng nh ni bi translated">https://www.investopedia.com/terms/h/homeequityloan.asp<a class="ae kz" href="https://www.investopedia.com/terms/h/homeequityloan.asp" rel="noopener ugc nofollow" target="_blank"/></li><li id="bc63" class="na nb iu lc b ld nj lg nk lj nl ln nm lr nn lv nf ng nh ni bi translated">【https://www.cnbc.com/id/100543831 T4】</li><li id="8fd0" class="na nb iu lc b ld nj lg nk lj nl ln nm lr nn lv nf ng nh ni bi translated"><a class="ae kz" href="https://www.investopedia.com/terms/u/underwater-mortgage.asp" rel="noopener ugc nofollow" target="_blank">https://www . investopedia . com/terms/u/under water-mortgage . ASP</a></li><li id="4e12" class="na nb iu lc b ld nj lg nk lj nl ln nm lr nn lv nf ng nh ni bi translated"><a class="ae kz" href="https://www.investopedia.com/terms/a/amortization_schedule.asp" rel="noopener ugc nofollow" target="_blank">https://www . investopedia . com/terms/a/摊销_时间表. asp </a></li></ol></div></div>    
</body>
</html>