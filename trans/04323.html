<html>
<head>
<title>5 Simple Tips for Viewing and Organizing Pandas DataFrames</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">查看和组织熊猫数据框的5个简单技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/5-simple-tips-for-viewing-and-organizing-pandas-dataframes-97f5cd09d51b?source=collection_archive---------32-----------------------#2021-04-12">https://towardsdatascience.com/5-simple-tips-for-viewing-and-organizing-pandas-dataframes-97f5cd09d51b?source=collection_archive---------32-----------------------#2021-04-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="af22" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">实际上只有5件事我希望能早点知道</h2></div><p id="1589" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我喜欢在熊猫图书馆工作。随着我越来越多地使用它，我越来越欣赏它。</p><p id="9513" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我将讲述5件多少有些随意的事情，当你查看和组织你的熊猫数据框时，它们会让你的生活变得更简单。没有什么真正突破性的东西，但有5件简单的事情，当我知道它们存在时，我很感激。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/6851e841eeaa5b8c075ce0f192c1b34f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*VZE3llfxA_8Igzo4vO9Fow.jpeg"/></div><p class="lj lk gj gh gi ll lm bd b be z dk translated">照片由<a class="ae ln" href="https://unsplash.com/@wuyyyying?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">吴颖</a>在<a class="ae ln" href="https://unsplash.com/s/photos/panda?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="ae10" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我最近在连接来自3个不同文件的数据时使用了所有这5种方法，所以我将提供这个一般过程的具体代码示例。</p><h1 id="ae60" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">1.<code class="fe mg mh mi mj b">usecols</code>参数</h1><p id="80b2" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">有时，对于任何给定的任务，数据文件中的列数都比您感兴趣的要多。您可以读取整个文件:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mp mq l"/></div></figure><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mr"><img src="../Images/cadbd37df7f848748090904cba428bc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iLwMu3Un7p8Fu6MqykrzDQ.png"/></div></div><p class="lj lk gj gh gi ll lm bd b be z dk translated">作者提供的数据帧截图</p></figure><p id="c796" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者您可以通过使用<code class="fe mg mh mi mj b">usecols</code>参数简单地读取您真正感兴趣的列:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mp mq l"/></div></figure><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mw"><img src="../Images/b50f3923b4503e218adf31ffb2bfde79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c3k9B3quCBMQhUz3W20dJQ.png"/></div></div><p class="lj lk gj gh gi ll lm bd b be z dk translated">作者提供的数据帧截图</p></figure><p id="44ed" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你知道你想要什么，并且你不打算使用它的剩余部分，为什么要把东西加载到内存中？</p></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><h1 id="6dc6" class="lo lp iq bd lq lr ne lt lu lv nf lx ly jw ng jx ma jz nh ka mc kc ni kd me mf bi translated">2.快速重命名列</h1><p id="f449" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">我不太喜欢我们在上面读到的数据帧中的最后两个列名。我不想键入这些，也不想记录大写和小写。我宁愿用小写字母写较短的列名。由于它们都是一个应用程序的标识符，我更希望它们有相似的格式。类似于应用商店ID的<code class="fe mg mh mi mj b">as_id</code>和Google Play ID的<code class="fe mg mh mi mj b">gp_id</code>。</p><p id="e219" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我可以使用<code class="fe mg mh mi mj b">rename()</code>方法，输入一个字典，将原始列名映射到我想要的列名。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="733b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是根据具体的上下文，我通常更喜欢做以下事情:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mp mq l"/></div></figure><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nj"><img src="../Images/730b48aaf59941d957f918d179660a03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gw8P3c50VpU30Cn_ZuZ_dA.png"/></div></div><p class="lj lk gj gh gi ll lm bd b be z dk translated">作者提供的数据帧截图</p></figure><p id="c041" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这两种方法都将产生上述具有所需列名的数据帧。但是将列名直接设置为一个列表，而不使用映射器，这还是令人满意的。</p><p id="edbd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，当直接将列名设置为名称列表时，您需要记住两点:</p><ol class=""><li id="8958" class="nk nl iq kh b ki kj kl km ko nm ks nn kw no la np nq nr ns bi translated"><strong class="kh ir">您必须为每一列提供一个名称。</strong></li><li id="4b17" class="nk nl iq kh b ki nt kl nu ko nv ks nw kw nx la np nq nr ns bi translated"><strong class="kh ir">顺序问题。</strong></li></ol><p id="1753" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你不小心，你很容易把这里的事情弄糟。使用<code class="fe mg mh mi mj b">rename()</code>方法，你不必担心那么多。</p><p id="bbfb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，<code class="fe mg mh mi mj b">df.columns =</code>方法在某些情况下特别有用。假设您将数据文件读入一个Pandas数据帧，您的列名如下所示:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nj"><img src="../Images/068488400bedc95f75cb0050928c3e8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BmmOi5kF6pLkfDwOe9G9Xw.png"/></div></div><p class="lj lk gj gh gi ll lm bd b be z dk translated">作者提供的数据帧截图</p></figure><p id="749d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这些地方工作会很烦人。但是您可以使用下面的代码快速修复该问题，该代码将所有列名中的所有空格替换为下划线:</p><pre class="lc ld le lf gt ny mj nz oa aw ob bi"><span id="8116" class="oc lp iq mj b gy od oe l of og">app_df.columns = [col.replace(' ', '_') for col in app_df.columns]</span></pre><p id="6206" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者说你在你的文件中阅读，列名全部是大写字母(或者奇怪和不一致的大写字母)并且很难阅读。您可以使用以下命令将所有列名全部更改为小写:</p><pre class="lc ld le lf gt ny mj nz oa aw ob bi"><span id="9ac7" class="oc lp iq mj b gy od oe l of og">app_df.columns = [col.lower() for col in app_df.columns]</span></pre><p id="29a7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有了这样的列表理解，您不必担心显式地为每一列提供名称，或者确保列名的顺序正确。当您使用<code class="fe mg mh mi mj b">columns</code>属性遍历原始列名时，这将自动发生。</p></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><h1 id="47f4" class="lo lp iq bd lq lr ne lt lu lv nf lx ly jw ng jx ma jz nh ka mc kc ni kd me mf bi translated">3.更改要显示的最大列数</h1><p id="32a3" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">我是一个极度视觉化的思考者，我喜欢能够看到我正在处理的东西。我在工作时不断地检查数据帧，我经常希望能够一次看到所有可用的列。默认情况下，Pandas只显示20列。</p><p id="8806" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面我们看到总共有50列的数据帧的前10列。中间的30列是隐藏的(用红色突出显示的省略号表示)，如果我们向右滚动，就会看到最后10列。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi oh"><img src="../Images/4a56bbced50de3be80ad996ff93e3937.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LlLr_-8JLxljjYO0XdUHCg.png"/></div></div><p class="lj lk gj gh gi ll lm bd b be z dk translated">作者提供的数据帧截图</p></figure><p id="56a7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我想知道所有列的名称，我可以简单地打印出<code class="fe mg mh mi mj b">df.columns</code>，但是那样我也不能看到每一列中的数据类型。因此，我将使用<code class="fe mg mh mi mj b">pd.options.display.max_columns = 50</code>一次性显示所有50列。</p><p id="a6c8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面我们看到最初默认隐藏的30列中的第一部分:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi oi"><img src="../Images/ddf8c920db8aac6dc707d07d9b1201cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pHoqXT6g5ovtAwhnTpUqIw.png"/></div></div><p class="lj lk gj gh gi ll lm bd b be z dk translated">作者提供的数据帧截图</p></figure><p id="5e80" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您也可以通过调整<code class="fe mg mh mi mj b">pd.options.display.max_rows</code>来调整数据帧显示的最大行数。</p></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><h1 id="e34d" class="lo lp iq bd lq lr ne lt lu lv nf lx ly jw ng jx ma jz nh ka mc kc ni kd me mf bi translated">4.用双括号对列进行切片和重新排序</h1><p id="43f3" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">你有没有遇到过这样的情况，当你处理一个数据帧时，你知道以后你只能处理列的子集？也许您更希望按照对您更有意义的特定顺序排列这些列的子集？</p><p id="72a7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设您有下面的数据帧，并且您只想要按顺序排列的<code class="fe mg mh mi mj b">app_id</code>、<code class="fe mg mh mi mj b">review</code>、<code class="fe mg mh mi mj b">rating</code>和<code class="fe mg mh mi mj b">date</code>列。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi oj"><img src="../Images/af9b605129cea4b946a44b9dbd9fdb87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FmtGK7iXuefleXF45Whc7Q.png"/></div></div><p class="lj lk gj gh gi ll lm bd b be z dk translated">作者提供的数据帧截图</p></figure><p id="3993" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以使用双括号和所需列的列表从原始数据帧创建切片:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mp mq l"/></div></figure><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi ok"><img src="../Images/0aebaaf36cbff86779a9d9ea280ea40d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*70OsopNR8SpEEzlEFX-grw.png"/></div></div><p class="lj lk gj gh gi ll lm bd b be z dk translated">作者提供的数据帧截图</p></figure></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><h1 id="daa1" class="lo lp iq bd lq lr ne lt lu lv nf lx ly jw ng jx ma jz nh ka mc kc ni kd me mf bi translated">5.insert()方法</h1><p id="2c3b" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">假设我们想要添加一个列来标识我们在上面制作的切片中的评论来自于App Store。当我们将它与来自Google Play的评论连接起来时，这将非常有用，因为我们将知道每个评论来自哪里。为我们的应用商店切片这样做非常简单:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mp mq l"/></div></figure><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi ol"><img src="../Images/6f7ead5da013b8a836268c86c5eee7a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K7DEYS3ixC5RN9kcz0LhYg.png"/></div></div><p class="lj lk gj gh gi ll lm bd b be z dk translated">作者提供的数据帧截图</p></figure><p id="98ad" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了一个充满1的列，以表明是的，这些评论来自App Store，而不是Google Play。以这种方式创建新列总是将它们附加到数据帧的末尾。对于我们刚刚创建的这个指标变量来说，这一切都很好，但我喜欢将相关的东西放在一起。接下来我想创建一个变量，让我知道每个评论字符串有多长。我真的希望这个新列位于<code class="fe mg mh mi mj b">review</code>和<code class="fe mg mh mi mj b">rating</code>列之间。</p><p id="ae96" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这可以通过<code class="fe mg mh mi mj b">insert()</code>方法来实现，该方法有三个参数:</p><ol class=""><li id="3dc9" class="nk nl iq kh b ki kj kl km ko nm ks nn kw no la np nq nr ns bi translated">新列的所需索引</li><li id="e392" class="nk nl iq kh b ki nt kl nu ko nv ks nw kw nx la np nq nr ns bi translated">新列的名称</li><li id="d4d7" class="nk nl iq kh b ki nt kl nu ko nv ks nw kw nx la np nq nr ns bi translated">用来填充新列的值</li></ol><p id="965e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的例子中，索引需要为2，因为我希望新列紧接在第二列之后出现(和正常情况一样，索引从0开始)。我们将新列命名为<code class="fe mg mh mi mj b">rvw_len</code>。最后，我们将一个lambda函数映射到第三个参数。在这里，我们指定要用每行对应的<code class="fe mg mh mi mj b">review</code>字符串的长度来填充新列。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mp mq l"/></div></figure><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi om"><img src="../Images/7ddd8514ef09dd61a0f4a754b0c9f7d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HOTUHDc-EgVHkhMnBMBybg.png"/></div></div><p class="lj lk gj gh gi ll lm bd b be z dk translated">作者提供的数据帧截图</p></figure><p id="23bc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">成功！我们的新专栏<code class="fe mg mh mi mj b">rvw_len</code>被插在其他所有内容的中间，放在一个对我来说有实际意义的地方。</p></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><h1 id="ea9b" class="lo lp iq bd lq lr ne lt lu lv nf lx ly jw ng jx ma jz nh ka mc kc ni kd me mf bi translated">概括一下</h1><ol class=""><li id="5a7f" class="nk nl iq kh b ki mk kl ml ko on ks oo kw op la np nq nr ns bi translated">如果您只想从一个文件中读入一组特定的列，那么使用<code class="fe mg mh mi mj b">usecols</code>参数和您实际需要的列名列表。</li><li id="3b8c" class="nk nl iq kh b ki nt kl nu ko nv ks nw kw nx la np nq nr ns bi translated">如果您想重命名所有列，请设置<code class="fe mg mh mi mj b">df.columns = [list of desired column names]</code>。</li><li id="7e43" class="nk nl iq kh b ki nt kl nu ko nv ks nw kw nx la np nq nr ns bi translated">想要看到比熊猫默认显示更多的列(或行)吗？用<code class="fe mg mh mi mj b">pd.options.display.max_columns =</code>(或<code class="fe mg mh mi mj b">.max_rows</code>)调整显示选项。</li><li id="46ab" class="nk nl iq kh b ki nt kl nu ko nv ks nw kw nx la np nq nr ns bi translated">想要一部分特定的列并以特定的顺序获取这些列吗？在数据框架上使用双括号，将所需列的列表放在里面。</li><li id="70ef" class="nk nl iq kh b ki nt kl nu ko nv ks nw kw nx la np nq nr ns bi translated">如果您想在特定的索引处插入一个新列，而不是把它作为最后一列，请使用<code class="fe mg mh mi mj b">insert()</code>方法。</li></ol><p id="22e4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我希望你能发现这些信息，并能把你学到的东西应用到你自己的工作中。感谢阅读！</p></div></div>    
</body>
</html>