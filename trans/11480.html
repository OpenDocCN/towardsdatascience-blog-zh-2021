<html>
<head>
<title>How to Debug Flask Applications in VS Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在VS代码中调试Flask应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-debug-flask-applications-in-vs-code-c65c9bdbef21?source=collection_archive---------1-----------------------#2021-11-12">https://towardsdatascience.com/how-to-debug-flask-applications-in-vs-code-c65c9bdbef21?source=collection_archive---------1-----------------------#2021-11-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2279" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用flask创建一个基本的web服务，然后在VS代码集成开发环境中单步调试并完全调试代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/29e38ebb9ed3867db261ccc102fba581.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WhR0GNM_wrfEawQ4HfU2ZQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/s/photos/computer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@clemhlrdt?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Clément Hélardot </a>拍摄</p></figure><h2 id="877a" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">介绍</h2><p id="dbdd" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">Flask应用是使用flask库用Python编程语言开发的web服务应用。</p><p id="33fe" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">它们是快速开发任何编程语言(包括Python、C#)都可以使用的web服务的好方法。NET、Java等。但是直到最近，我还不知道如何在VS代码中调试，这样我就可以一步一步地调试flask应用程序代码。</p><p id="f7ac" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">本文展示了一个简单的分步指南，它将使您能够完成设置和配置，从而轻松调试flask应用程序。</p><h2 id="b11c" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">步骤1:开发一个基本的烧瓶应用程序</h2><p id="0e6f" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">第一步是使用flask创建一个基本的web服务。有许多在线教程向您展示如何做到这一点，包括我发现特别有用的这个教程——<a class="ae ky" href="https://programminghistorian.org/en/lessons/creating-apis-with-python-and-flask" rel="noopener ugc nofollow" target="_blank">https://programminghistorian . org/en/lessons/creating-APIs-with-python-and-flask</a>。</p><p id="27bc" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">出于本教程的目的，我们将使用基本应用程序来探索如何调试flask应用程序如下-</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="3ad5" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">您应该在VS代码环境中创建flask应用程序，并且应该创建一个。py文件，并将其命名为<code class="fe mv mw mx my b">app.py</code>。</p><p id="865a" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">有一些方法可以修改配置，为您的代码文件使用不同的名称<code class="fe mv mw mx my b">app.py</code>,但是因为您在flask web app中只允许使用一个Python文件(在flask web app中，您可以创建任意多的web服务),所以更改它似乎没有多大意义。</p><p id="d715" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">如果到目前为止您一直在学习，那么您的VS代码环境和Python代码应该是这样的</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/ae870639321542cb72c8b327f64af404.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B84dfRbx_5ql6WMJEZYn0Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="26ac" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">步骤2:创建并配置一个launch.json配置文件</h2><p id="e7bd" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">如果您单击ide左侧的“运行和调试”图标，或者键入Ctrl+Shift+D，您将看到“运行和调试”窗口。</p><p id="fb50" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">现在点击“创建launch.json文件”链接，当提示“选择调试配置”时，选择“Python文件调试当前活动的Python文件”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/f38c4691f4aae901058dcb641f7d83ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DOG39hTqeaZeeeRaX-8lQw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="84c8" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">VS代码现在会自动为您创建一个launch.json配置文件，该文件预先填充了一些基本设置。</p><p id="09da" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">首先要做的是删除注释，因为这些注释会在稍后执行flask应用程序时导致错误/警告-</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/b1d86fc921097c19b7273434b93da005.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jF-xTMzTTkd2uQvng2WX_A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="0390" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">下一步是最关键的。当VS代码创建launch.json文件和相关的配置时，它不包括必要的配置来告诉环境和web服务器在哪里可以找到conda环境，这必须手动添加，否则调试将永远无法在VS代码中工作。</p><ol class=""><li id="9b3b" class="nb nc it lx b ly mo mb mp li nd lm ne lq nf mn ng nh ni nj bi translated">在你的电脑上找一找你的Anaconda文件夹，其中包含一个名为<code class="fe mv mw mx my b">_conda.exe</code>的文件</li><li id="b0ff" class="nb nc it lx b ly nk mb nl li nm lm nn lq no mn ng nh ni nj bi translated">在launch.json中为名为<code class="fe mv mw mx my b">"python.condaPath"</code>的参数创建一个新的配置行，其值指向正确的路径</li></ol><p id="22e5" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">完成的launch.json文件应该如下所示</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/3cc8d82b13180e32fdca5f8baa20e840.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vnlgy9fDol8jvpoJKBFS4w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="6b36" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">注意:在Windows环境中有三种方式可以启动VS代码</p><ol class=""><li id="d19b" class="nb nc it lx b ly mo mb mp li nd lm ne lq nf mn ng nh ni nj bi translated">转到Windows开始菜单，启动VS代码</li><li id="db6d" class="nb nc it lx b ly nk mb nl li nm lm nn lq no mn ng nh ni nj bi translated">启动Anaconda环境并点击VS代码下的“Launch”</li><li id="0fb7" class="nb nc it lx b ly nk mb nl li nm lm nn lq no mn ng nh ni nj bi translated">启动Anaconda命令提示符并键入“code”</li></ol><p id="d70f" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">只有在使用第一种方法时，才需要在launch.json中添加一行来设置<code class="fe mv mw mx my b">"python.condaPath"</code>。</p><p id="9e6f" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">如果您使用方法2或3，这将指示VS代码环境使用基本conda环境，因此不需要额外的配置。</p><h2 id="2b65" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">步骤3:启动调试器</h2><p id="3ddb" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">下一步是回到代码文件中，在编辑器的空白处单击，在代码中创建一些断点。在下面的例子中，我点击了第33行和第39行-</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/0622f38f0763101963d312d759b70c81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5iVgWSbArBj72RNZ2h9uuw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="0d69" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">现在回到“运行和调试”窗口，点击“Python: Current File”旁边的绿色箭头，开始调试会话</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/2042155c32788f68f25ca9c3cf944b38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bzMadIAPuYyCByT68VKbvQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="3426" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">当您启动调试器时，可能会收到“Exception has occure:system exit message ”,但这并不重要，不会阻止您调试代码。</p><p id="d78a" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">只需点击调试工具栏中的蓝色“播放”按钮，调试会话将继续-</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/2d1efde452f7e238ffbd901ab78201e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l23-6Bplompn8t_oQrjgtw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="67b6" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">如果一切正常，你在终端窗口得到的最后一条消息将是-</p><p id="c524" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated"><code class="fe mv mw mx my b">* Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)</code></p><h2 id="8a9a" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">步骤4:调用Web服务</h2><p id="18d4" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">您现在需要打开一个web浏览器，在URL中键入<code class="fe mv mw mx my b">http://127.0.0.1:5000/</code>,以调用正在调试器和VS代码ide中运行的web服务</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/abf82da5a2b22c0d9490740d73da8982.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GdKlXpQ_E_Y_N4ZNe00zlw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="27ca" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">一旦按下<code class="fe mv mw mx my b">return</code>键，您将看到以下内容-</p><ol class=""><li id="ea49" class="nb nc it lx b ly mo mb mp li nd lm ne lq nf mn ng nh ni nj bi translated">浏览器调用已经调用了web服务</li><li id="1a82" class="nb nc it lx b ly nk mb nl li nm lm nn lq no mn ng nh ni nj bi translated">在VS代码中，web服务已被调用，并在调试器中您添加断点的地方暂停</li><li id="0a8c" class="nb nc it lx b ly nk mb nl li nm lm nn lq no mn ng nh ni nj bi translated">现在，您可以使用VS代码调试工具栏来调试代码</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/01bcbfad5dee1622ac006a97275586e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nSSju_2tuxE98B8UoLBGtA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="5c56" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">当您单步执行代码并退出web服务函数时，web服务的输出将返回给调用该服务的web浏览器</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/adbb8cba8f3d61efcb9128361bfe83e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kXFiRtQ9dYnVJgxW45dvUQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="2472" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">如果您想要调用返回所有数据科学书籍的第二个服务，请返回到web浏览器并修改URL，如下所示</p><p id="399b" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated"><code class="fe mv mw mx my b"><a class="ae ky" href="http://127.0.0.1:5000/api/v1/resources/books/all" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:5000/api/v1/resources/books/all</a></code></p><p id="a0f1" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">现在将在调试器中调用和暂停第二个web服务。一旦你完成了代码并执行了函数，代表数据科学手册库的json将作为输出返回给浏览器</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/e67d50c4fe1b4e7b4e36dcd622789234.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q0wClqMRvJFqU3qur4LPaw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="18a8" class="nq la it bd lb nr ns nt le nu nv nw lh jz nx ka ll kc ny kd lp kf nz kg lt oa bi translated">结论</h1><p id="51df" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">第一次用VS代码设置flask web应用程序的调试有点笨拙，尤其是当你不知道把最重要的<code class="fe mv mw mx my b">"python.condaPath": "C:\\Users\\GHarrison\\Anaconda3"</code>行添加到<code class="fe mv mw mx my b">launch.json</code>文件中的时候。</p><p id="428f" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">然而，对于web服务来说，一旦完成一次，它将只适用于所有后续会话，并且一旦这些web服务超出这里给出的基本示例的规模，成为真实世界的复杂web服务，能够单步调试flask web应用程序的能力就变得至关重要。</p><h1 id="b578" class="nq la it bd lb nr ns nt le nu nv nw lh jz nx ka ll kc ny kd lp kf nz kg lt oa bi translated">感谢您的阅读！</h1><p id="aab5" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">如果你喜欢读这篇文章，为什么不看看我在<a class="ae ky" href="https://grahamharrison-86487.medium.com/" rel="noopener">https://grahamharrison-86487.medium.com/</a>的其他文章呢？此外，我很乐意听到您对这篇文章、我的任何其他文章或任何与数据科学和数据分析相关的内容的看法。</p><p id="793d" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">如果你想联系我讨论这些话题，请在LinkedIn上找我—<a class="ae ky" href="https://www.linkedin.com/in/grahamharrison1" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/grahamharrison1</a>或者发邮件给我<a class="ae ky" href="mailto:GHarrison@lincolncollege.ac.uk" rel="noopener ugc nofollow" target="_blank">ghar rison @ Lincoln college . AC . uk</a>。</p><p id="c40b" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">如果你想通过订阅来支持作者和全世界1000个为文章写作做出贡献的人，请使用这个链接——<a class="ae ky" href="https://grahamharrison-86487.medium.com/membership" rel="noopener">https://grahamharrison-86487.medium.com/membership</a>(注意:如果你使用这个链接注册，作者将收到一定比例的费用)。</p></div></div>    
</body>
</html>