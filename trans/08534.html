<html>
<head>
<title>Node customization for stunning networks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于惊艳网络的节点定制</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/node-customization-for-stunning-networks-d1f74cf2e46d?source=collection_archive---------23-----------------------#2021-08-06">https://towardsdatascience.com/node-customization-for-stunning-networks-d1f74cf2e46d?source=collection_archive---------23-----------------------#2021-08-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="ddb2" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a></h2><div class=""/><div class=""><h2 id="9242" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">将igraph与visNetwork合并</h2></div><p id="cf19" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">正如我们之前看到的<a class="ae lk" href="https://thatdarndata.com/from-igraph-to-visnetwork-makeover/" rel="noopener ugc nofollow" target="_blank"/>，在R中使用<strong class="kq ja"> visNetwork </strong>软件包，网络可视化变得轻而易举。这些图表非常漂亮，具有交互性，玩起来很有趣。在本文中，我们将了解如何定制网络节点来传递更多信息。首先，我们将学习如何用一个变量给一个网络着色。然后，我们将利用的功能来查找并突出显示具有高中心性得分的节点。最后，我们将再次使用<strong class="kq ja"> igraph </strong>来识别和着色社区。要继续编码，点击<a class="ae lk" href="https://github.com/thatdarndata/BlogPosts/blob/main/igraph2visNetwork/NodeCustomization.Rmd" rel="noopener ugc nofollow" target="_blank">这里</a>进入R笔记本。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ll"><img src="../Images/bd03e87fd1671b579c4b3defa9962d73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a0Ve4jk_XRvWkC_SS1S79w.jpeg"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated"><a class="ae lk" href="https://unsplash.com/@chuklanov?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Avel Chuklanov </a>在<a class="ae lk" href="https://unsplash.com/@brooke_tdd/likes?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><h1 id="7a78" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">视觉网络基础</h1><p id="2da1" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">在我们开始之前，让我们花点时间来讨论一下<strong class="kq ja"> visNetwork </strong>的基础知识。在之前的<a class="ae lk" href="https://thatdarndata.com/from-igraph-to-visnetwork-makeover/" rel="noopener ugc nofollow" target="_blank">教程</a>中，我们使用<strong class="kq ja"> visIgraph() </strong>来绘制我们的网络。这一次，我们将使用<strong class="kq ja"> visNetwork() </strong>函数。为什么？很简单，通过使用<strong class="kq ja"> visNetwork() </strong>函数，我们可以更好地控制节点的外观。<strong class="kq ja"> visNetwork() </strong>函数有两个参数:1)描述网络中<strong class="kq ja">节点</strong>的数据帧，2)描述网络中<strong class="kq ja">边</strong>的数据帧。</p><h1 id="f13c" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">节点</h1><p id="8d57" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated"><strong class="kq ja">节点</strong>数据帧至少需要一个<strong class="kq ja"> id </strong>列来标识每个节点。每个节点必须有一个唯一的<em class="my"/><strong class="kq ja">id</strong>。现在，这个<strong class="kq ja"> id </strong>不一定是您希望您的节点命名的名称。它<em class="my">可以</em>是，默认情况下它<em class="my">会</em>是，但实际上是<strong class="kq ja">标签</strong>控制你的节点名。与<strong class="kq ja"> id </strong>不同，节点<strong class="kq ja">标签</strong>不需要唯一。这样，如果两个节点有相同的名字，<strong class="kq ja"> visNetwork </strong>将能够通过它们的<strong class="kq ja"> id </strong>来区分它们。</p><p id="92ab" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">例如，如果您的网络由学生组成，那么<strong class="kq ja"> id </strong>将是学生的id号，而<strong class="kq ja">标签</strong>将是学生的姓名。可能有多个名为Ashley Brown的学生，但是每个Ashley都有自己唯一的学号来区分他们。</p><h1 id="e0f9" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">优势</h1><p id="93ca" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">另一方面，<strong class="kq ja">边缘</strong>数据帧需要至少两列:<em class="my">从</em>和<em class="my">到</em>。这些列将告诉<strong class="kq ja"> visNetwork </strong>绘制一条线<em class="my">从</em>一个特定的节点，如其<strong class="kq ja"> id </strong>、<em class="my">到</em>另一个节点，也由其<strong class="kq ja"> id </strong>指定。</p><h1 id="6d19" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">向节点和边数据框添加列</h1><p id="12f9" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">要自定义网络中的结点或边，只需向相应的数据框中添加额外的列，并指定要修改的属性。例如，如果您想为每个节点指定一个标签，那么在<strong class="kq ja">节点</strong>数据框中创建一个<strong class="kq ja">标签</strong>列，为网络中的每个节点指定一个标签。您可以修改的其他节点属性包括形状、大小、颜色和阴影。要查看所有可用选项，请使用<strong class="kq ja">查看文档。视觉节点</strong>和<strong class="kq ja">？粘边</strong>。</p><h1 id="50ae" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">将igraph网络转换为visNetwork格式</h1><p id="a5ed" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">将一个<strong class="kq ja"> igraph </strong>对象转换成一个<strong class="kq ja">节点</strong>和<strong class="kq ja">边缘</strong>数据帧非常简单(<em class="my">通常是</em> …🤞)使用<strong class="kq ja"> toVisNetworkData() </strong>函数。向<strong class="kq ja"> toVisNetworkData() </strong>提供一个<strong class="kq ja"> igraph </strong>网络将返回一个<em class="my">列表</em>，其中包含<strong class="kq ja">节点</strong>和<strong class="kq ja">边</strong>数据帧。很简单！</p><h1 id="adc5" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">扎卡里网络</h1><p id="3814" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">对于本教程，我们将使用著名的扎卡里网络(1977)。扎卡里网络是一个追踪空手道俱乐部中的友谊的社交网络🥋。总的来说，这个俱乐部有34个成员和78个朋友。换句话说，我们的网络有34个节点，每个节点代表一个成员，还有78条边，每条边代表一段友谊。让我们从加载<strong class="kq ja"> igraph </strong>和<strong class="kq ja"> visNetwork </strong>包开始。然后，我们将使用<strong class="kq ja"> graph.famous() </strong>加载Zachary图，并使用<strong class="kq ja"> visIgraph() </strong>快速绘制它，让我们了解我们的网络是什么样子。</p><pre class="lm ln lo lp gt mz na nb nc aw nd bi"><span id="5553" class="ne mc iq na b gy nf ng l nh ni"># Load packages. <br/>library(igraph) <br/>library(visNetwork) </span><span id="e32b" class="ne mc iq na b gy nj ng l nh ni"># Load famous Zachary graph. <br/>zach &lt;- graph.famous("Zachary") </span><span id="a0c3" class="ne mc iq na b gy nj ng l nh ni"># Plot quickly. <br/>visIgraph(zach)</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nk"><img src="../Images/dd0757f622655577961f5fadd68d64e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xNh2s9yo_SW3_H9JKm3yCw.png"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">使用visIgraph()的默认Zachary网络。图片作者。</p></figure><h1 id="cb37" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">用带状颜色给节点着色</h1><p id="0574" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">在空手道中，佩戴腰带代表学生的等级。如果我们知道每个学生的腰带颜色，我们可以给我们的网络着色，这样每个成员的节点都会反映他们的腰带颜色。不幸的是，我们不知道每个成员的腰带颜色。但是，我们可以假装知道，并创建自己的代表皮带颜色的变量。</p><p id="446e" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们将首先创建一个调色板来匹配空手道腰带的颜色。空手道有9种不同的腰带颜色:白色、黄色、橙色、绿色、蓝色、紫色、红色、棕色和黑色。为了创建我们的腰带颜色变量，我们将使用<strong class="kq ja"> sample() </strong>从调色板中为每个成员随机选择一种腰带颜色。但是，我们不会给每条腰带相同的入选概率。相反，我们将假设，由于每条腰带越来越难挣，我们将看到与排名较低的腰带相比，排名较高的腰带人数较少。</p><pre class="lm ln lo lp gt mz na nb nc aw nd bi"><span id="77a4" class="ne mc iq na b gy nf ng l nh ni">set.seed(4) <br/># HTML color codes for white, yellow, orange, <br/># green, blue, purple, red, brown, black <br/>colPal &lt;- c("#ECECEC", "#F9D597", "#EE9C77", "#46887C", "#4270A4", "#786696", "#A8534C", "#624E4D", "#232323") </span><span id="89e4" class="ne mc iq na b gy nj ng l nh ni"># Probability of selecting each belt color. <br/>probs &lt;- c(0.5, 0.25, 0.1, 0.05, 0.03, 0.03, 0.03, 0.005, 0.005) </span><span id="b93e" class="ne mc iq na b gy nj ng l nh ni"># Get a belt color for each member. <br/>beltColors &lt;- sample(colPal, size = 34, replace = TRUE, prob = probs)</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nl"><img src="../Images/fe47cc42daa16b4bdeb24c43d6eff99b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BBufN5KrhubBT1b5zQRs5Q.png"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">腰带颜色向量。图片作者。</p></figure><p id="56a5" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">现在我们有了每个成员的腰带颜色向量，我们想把它作为一列添加到我们的<strong class="kq ja">节点</strong>数据框中。但是等等！我们还没有一个<strong class="kq ja">节点</strong>数据框！让我们使用<strong class="kq ja"> toVisNetworkData() </strong>函数生成我们的<strong class="kq ja">节点</strong>和<strong class="kq ja">边</strong>数据帧。回想一下，<strong class="kq ja"> toVisNetworkData() </strong>返回一个由<strong class="kq ja">节点</strong>和<strong class="kq ja">边</strong>数据帧组成的列表。我们将把列表分开，以便于阅读。然而，这真的没有必要。如果您习惯使用列表，那么在向<strong class="kq ja">节点</strong>数据框添加列时，您可以跳过这一部分并使用列表符号。</p><pre class="lm ln lo lp gt mz na nb nc aw nd bi"><span id="265b" class="ne mc iq na b gy nf ng l nh ni"># Convert igraph network into visNetwork format <br/>visZach &lt;- toVisNetworkData(zach) </span><span id="ac9c" class="ne mc iq na b gy nj ng l nh ni"># Grab nodes data frame. <br/>nodes &lt;- visZach$nodes </span><span id="9595" class="ne mc iq na b gy nj ng l nh ni"># Grab edges data frame. <br/>edges &lt;- visZach$edges</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nm"><img src="../Images/393bff1ab7f8de9c9ca96e3f7ce94915.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*afqlZKzEleijqVN3ZVOJKA.png"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">前六行节点数据框(左)和边数据框(右)。图片作者。</p></figure><p id="34de" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们现在有了我们的<strong class="kq ja">节点</strong>和<strong class="kq ja">边</strong>数据帧！注意，<strong class="kq ja">节点</strong>数据帧有一个与<strong class="kq ja"> id </strong>列匹配的<strong class="kq ja">标签</strong>列。除非另有说明，<strong class="kq ja"> visNetwork </strong>将使用<strong class="kq ja"> id </strong>作为节点<strong class="kq ja">标签</strong>。如果我们碰巧知道我们成员的名字，我们可以更新我们的标签来反映每个成员的名字。不幸的是，我们没有。😔但是如果你愿意，你可以随时创建一些！</p><p id="ead6" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">现在，让我们将beltColors向量添加到节点数据框中。因为我们指定了节点的颜色，所以我们将新列命名为<strong class="kq ja"> color </strong>。我们可以看出<strong class="kq ja"> color </strong>是一个有效的列名，它将被<strong class="kq ja"> visNetwork </strong>识别，因为它是<strong class="kq ja"> visNodes() </strong>中列出的参数之一。</p><pre class="lm ln lo lp gt mz na nb nc aw nd bi"><span id="1527" class="ne mc iq na b gy nf ng l nh ni"># Add color column to nodes data frame. <br/>nodes$color &lt;- beltColors</span></pre><p id="849a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">为了绘制网络，我们将为<strong class="kq ja"> visNetwork() </strong>提供我们的<strong class="kq ja">节点</strong>和<strong class="kq ja">边</strong>数据帧。</p><pre class="lm ln lo lp gt mz na nb nc aw nd bi"><span id="bcc4" class="ne mc iq na b gy nf ng l nh ni"># Plot. <br/>visNetwork(nodes, edges)</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nn"><img src="../Images/03d7a0327f6f4a9e32ada8e3711483a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OaVbgObm4Aw7u48T.png"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">Zachary网络，节点按成员带颜色着色。图片作者。</p></figure><p id="d48b" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们走吧！我们现在可以看到我们的Zachary网络被每个成员的腰带颜色所着色。注意大多数成员都有白色或黄色的腰带。</p><h1 id="0979" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">突出显示具有高中心性分数的节点</h1><p id="1e63" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">让我们交换一下，看看如何给具有高中心性分数的节点着色。为此，我们将使用<strong class="kq ja"> igraph </strong>来计算我们的中心性得分。为了在这个练习中获得一点变化，我们将用两种不同的方式给我们的节点着色。首先，我们将查看度中心性，并突出显示具有9个或更多友谊的节点。其次，我们将查看特征向量的中心性，并根据其中心性得分为每个节点着色。</p><h2 id="87c1" class="ne mc iq bd md no np dn mh nq nr dp ml kx ns nt mn lb nu nv mp lf nw nx mr iw bi translated">程度中心性</h2><p id="9fd7" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">度中心性通过计算连接到每个节点的边的数量来测量节点的连通性。为了找到每个节点的度数，或者与每个节点相关联的友谊数量，我们将使用来自<strong class="kq ja"> igraph </strong>的<strong class="kq ja"> degree() </strong>函数。<strong class="kq ja"> degree() </strong>函数将返回一个向量，列出与每个节点关联的度数。</p><pre class="lm ln lo lp gt mz na nb nc aw nd bi"><span id="a6ed" class="ne mc iq na b gy nf ng l nh ni"># Calculate degree for each node. <br/>degree(zach)</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nn"><img src="../Images/61d304e4ef88bcbd6fd7cb57633834ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*phVfP0QKOR3Ffc_I.png"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">度中心性向量。图片作者。</p></figure><p id="b0fd" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们可以从degree中看到，第一个节点或成员有16条友谊或边连接到该节点。因为我们只想突出显示具有9个或更多友谊的节点，所以让我们看看哪些节点的度大于或等于9。</p><pre class="lm ln lo lp gt mz na nb nc aw nd bi"><span id="9c4a" class="ne mc iq na b gy nf ng l nh ni"># Is the degree for each node greater than or equal to 9? degree(zach) &gt;= 9</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nn"><img src="../Images/9381e52a53a6f2ca06e0cff676898123.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fJgTjLXx7zTG7gv2.png"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">图片作者。</p></figure><p id="5920" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">现在，让我们使用这个矢量作为调色板的基础。我们想把我们的<strong class="kq ja">真</strong>变成一种颜色，突出显示有9个或更多朋友的成员，把我们的<strong class="kq ja">假</strong>变成另一种颜色。为此，我们将把这个向量强制转换成一个因子，并用我们的调色板标签覆盖<strong class="kq ja">真/假</strong>标签。这一次，我们将使用浅灰色来表示我们的<strong class="kq ja">假</strong>和深绿色来表示我们的<strong class="kq ja">真</strong>。</p><pre class="lm ln lo lp gt mz na nb nc aw nd bi"><span id="e444" class="ne mc iq na b gy nf ng l nh ni"># Create degree centrality color palette. <br/>degreePal &lt;- factor(degree(zach) &gt;= 9, labels = c("#D3D3D3", "#225560"))</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nn"><img src="../Images/53b837897f955636f3bb2b4d4facee33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iLp5fSich2c-mU_6.png"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">度中心调色板。图片作者。</p></figure><p id="d494" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">现在我们有了度中心性的调色板，我们可以在<strong class="kq ja">节点</strong>数据框中覆盖当前的颜色规范。</p><pre class="lm ln lo lp gt mz na nb nc aw nd bi"><span id="3393" class="ne mc iq na b gy nf ng l nh ni"># Overwrite color column in nodes data frame <br/># with degree centrality color palette. <br/>nodes$color &lt;- degreePal </span><span id="8da6" class="ne mc iq na b gy nj ng l nh ni"># Plot. <br/>visNetwork(nodes, edges)</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ny"><img src="../Images/296b5a3b46e2a8ce9d855e99f13c5d7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jJbZABLPiZSHrVLBAe4Tog.png"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">Zachary网络，其中拥有9个以上友谊的成员以深绿色突出显示。图片作者。</p></figure><p id="b094" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">不错！我们可以很容易地看到五个成员有9个或更多的友谊。作为一个练习，您可以尝试将深绿色节点更改为每个突出显示的成员的适当颜色。</p><h2 id="ce2e" class="ne mc iq bd md no np dn mh nq nr dp ml kx ns nt mn lb nu nv mp lf nw nx mr iw bi translated">特征向量中心性</h2><p id="07cc" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">特征向量中心性类似于度中心性，但是有一些重新加权。不是给每个连接相等的权重，而是给到另一个高度连接的节点的连接比到具有非常少连接的节点的连接更重的权重。换句话说，<em class="my">一个节点与谁</em>连接关系重大。因此，节点的最终中心性分数受到它所连接的节点的中心性分数的影响。</p><p id="3a8a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">为了计算我们网络中每个成员的特征向量中心性，我们将使用<strong class="kq ja"> eigen_centrality() </strong>。<strong class="kq ja"> eigen_centrality() </strong>函数返回第一个元素为<strong class="kq ja"> vector </strong>的列表，其中包含每个节点的中心性得分。</p><pre class="lm ln lo lp gt mz na nb nc aw nd bi"><span id="e70d" class="ne mc iq na b gy nf ng l nh ni"># Calculate eigenvector centrality. <br/>eigen_centrality(zach)[1]</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nz"><img src="../Images/c6209a7a49d9d2ac6c790100fd8f48a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*N3enjuK7RZgy5Hoi.png"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">特征向量中心性向量。图片作者。</p></figure><p id="0e37" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">为了根据特征向量中心性分数给每个节点着色，我们需要创建一个连续的调色板。(查看这个<a class="ae lk" href="https://stackoverflow.com/questions/9946630/colour-points-in-a-plot-differently-depending-on-a-vector-of-values" rel="noopener ugc nofollow" target="_blank">堆栈溢出帖子</a>了解如何做到这一点。)本质上，我们将使用<strong class="kq ja"> colorRampPalette() </strong>创建一个调色板函数。<strong class="kq ja"> colorRampPalette() </strong>函数返回另一个函数，该函数能够从指定的第一种颜色开始创建调色板，并逐渐增加到指定的第二种颜色。我们将把我们的颜色渐变函数命名为<strong class="kq ja"> eigScalePal() </strong>。我们使用<strong class="kq ja"> colorRampPalette() </strong>创建的<strong class="kq ja"> eigScalePal() </strong>函数将一个整数作为其参数，表示我们希望调色板包含的独特颜色的数量。在这个例子中，我们将选择7种独特的颜色。</p><p id="f84b" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">为了将调色板中的7种颜色匹配到特征向量中心性向量，我们将利用<strong class="kq ja"> cut() </strong>函数。<strong class="kq ja"> cut() </strong>将我们的矢量分解成指定数量的区间。因为我们有7种颜色，我们将把矢量分成7块。最后，我们将把这个新向量分配给我们的<strong class="kq ja">节点</strong>数据帧的<strong class="kq ja">颜色</strong>列，该向量将我们的调色板与我们的特征向量中心性向量相匹配。</p><pre class="lm ln lo lp gt mz na nb nc aw nd bi"><span id="1333" class="ne mc iq na b gy nf ng l nh ni"># Create continuous color palette. <br/>eigScalePal &lt;- colorRampPalette(c('#E0F4FF','#003049')) </span><span id="bdee" class="ne mc iq na b gy nj ng l nh ni"># Match palette to centrality vector.<br/>nodes$color &lt;- eigScalePal(7)[cut(eigen_centrality(zach)$vector, breaks = 7)] </span><span id="a166" class="ne mc iq na b gy nj ng l nh ni"># Plot. <br/>visNetwork(nodes, edges)</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi oa"><img src="../Images/76a0b31868937130e3bde5a64c77e708.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nwpJy9OpGeec0HPRw-vHHQ.png"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">特征向量中心性着色的Zachary网络。深蓝色代表高中心性分数，浅蓝色代表低中心性分数。图片作者。</p></figure><p id="dfe6" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">看起来不错！最有影响力的节点显示为深蓝色。影响较小的节点逐渐变亮。</p><h1 id="f3a2" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">查找和着色社区</h1><p id="6070" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">团体代表网络的一部分，其中该部分内的连接比该部分与网络的其它部分之间的连接多。换句话说，社区是具有相对密集连接的子图。为了找到具有<strong class="kq ja"> igraph </strong>的社区，我们将使用<strong class="kq ja"> cluster_fast_greedy() </strong>，它通过模块性分数的贪婪优化来搜索密集子图。函数<strong class="kq ja"> cluster_fast_greedy() </strong>返回一个<em class="my"> communities </em>对象，显示发现的社区数量以及属于每个社区的节点。我们可以使用<strong class="kq ja"> membership() </strong>函数将社区成员总结为一个节点向量。</p><pre class="lm ln lo lp gt mz na nb nc aw nd bi"><span id="cbd2" class="ne mc iq na b gy nf ng l nh ni"># Find communities. <br/>zachComm &lt;- cluster_fast_greedy(zach) </span><span id="33bc" class="ne mc iq na b gy nj ng l nh ni"># Return community membership for each node. <br/>membership(zachComm)</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nn"><img src="../Images/0ecc8329b242983e1c96b9f904ec0c13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vwA0gLTkBa5O6b92.png"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">社区成员。图片作者。</p></figure><p id="ba2b" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">虽然您肯定可以更改节点数据框中指定的颜色来显示每个社区，但我们将使用<strong class="kq ja"> visGroups() </strong>来代替。visGroups() 使得指定对每个社区的修改变得容易。我们首先将上面的成员向量分配给节点数据框中的一个新的<strong class="kq ja">组</strong>列。由于我们已经有了一个不再感兴趣的<strong class="kq ja">颜色</strong>列(表示特征向量中心性)，我们将从<strong class="kq ja">节点</strong>数据框中移除颜色列。</p><pre class="lm ln lo lp gt mz na nb nc aw nd bi"><span id="cb7c" class="ne mc iq na b gy nf ng l nh ni"># Add group column to nodes data frame representing <br/># community membership for each node. <br/>nodes$group &lt;- membership(zachComm) </span><span id="2cf8" class="ne mc iq na b gy nj ng l nh ni"># Remove color column. <br/>nodes$color &lt;- NULL</span></pre><p id="3f55" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">现在，让我们画出我们的网络。</p><pre class="lm ln lo lp gt mz na nb nc aw nd bi"><span id="408a" class="ne mc iq na b gy nf ng l nh ni">visNetwork(nodes, edges)</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ob"><img src="../Images/9eaa9506481a8eebd42c92bf5f3f8bdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dfTzjUPwZKb8uH909sY3UQ.png"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">扎卡里网络由社区成员着色。图片作者。</p></figure><p id="486d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">不算太坏，是吧？然而，我们可以更进一步，不需要太多额外的工作。通过使用<strong class="kq ja"> % &gt; %我们将向<strong class="kq ja"> visGroups() </strong>提供我们希望对其进行更改的组的名称，以及我们希望实现的更改。我们将对每个组(1、2和3)进行更改，并为每个社区指定唯一的颜色和形状。</strong></p><pre class="lm ln lo lp gt mz na nb nc aw nd bi"><span id="3d7e" class="ne mc iq na b gy nf ng l nh ni">visNetwork(nodes, edges) %&gt;% <br/>visGroups(groupname = "1", color = "#087CA7", shape = "square") %&gt;% <br/>visGroups(groupname = "2", color = "#419D78", shape = "triangle") %&gt;% <br/>visGroups(groupname = "3", color = "#FFE67C", shape = "oval") %&gt;% <br/>visLegend()</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi oc"><img src="../Images/7821165eb8b868ecde3551ae0a5bcd07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PORmjQQkEt21mex2MogEVA.png"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">Zachary网络社区会员与定制和传奇。图片作者。</p></figure><p id="b788" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">呜-呼！🥳可以随意摆弄每个社区，指定你选择的颜色和形状。</p><p id="8254" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我希望你喜欢这篇融合了<strong class="kq ja"> igraph </strong>和<strong class="kq ja"> visNetwork </strong>功能的教程。你想看看少了什么吗？下面留言评论！</p><h1 id="d7d2" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">引文</h1><p id="1e8c" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">Almende B.V .，Benoit Thieurmel和Titouan Robert (2019)。<br/> visNetwork:使用‘vis . js’库的网络可视化。r包【2.0.9版本。<a class="ae lk" href="https://CRAN.R-project.org/package=visNetwork" rel="noopener ugc nofollow" target="_blank">https://CRAN.R-project.org/package=visNetwork</a></p><p id="0cab" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">Csardi G，Nepusz T:用于复杂网络研究的igraph软件包，国际期刊，复杂系统1695。2006.<br/>T10】https://igraph.org</p><p id="20cd" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">r核心团队(2020)。r:用于统计计算的语言和环境。奥地利维也纳统计计算基金会。网址<br/><a class="ae lk" href="https://www.R-project.org/" rel="noopener ugc nofollow" target="_blank">https://www.R-project.org/</a>。</p><p id="8cf8" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">r版本4 . 0 . 2(2020–06–22)<br/>平台:x86_64-apple-darwin17.0 (64位)<br/>运行于:macOS Catalina 10.15.7</p><p id="090e" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">扎卡里，W. W. (1977)。小团体中冲突和分裂的信息流模型。人类学研究杂志，33(4)，452–473页。<a class="ae lk" href="https://doi.org/10.1086/jar.33.4.3629752" rel="noopener ugc nofollow" target="_blank">https://doi.org/10.1086/jar.33.4.3629752</a></p></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><p id="0f16" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><em class="my">原载于2021年8月6日https://thatdarndata.com</em><em class="my">的</em> <a class="ae lk" href="https://thatdarndata.com/node-customization-for-stunning-networks/" rel="noopener ugc nofollow" target="_blank"> <em class="my">。</em></a></p></div></div>    
</body>
</html>