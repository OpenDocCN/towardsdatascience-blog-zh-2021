<html>
<head>
<title>An Overview of Versatile Data Kit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">多功能数据工具包概述</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/an-overview-of-versatile-data-kit-a812cfb26de7?source=collection_archive---------23-----------------------#2021-11-17">https://towardsdatascience.com/an-overview-of-versatile-data-kit-a812cfb26de7?source=collection_archive---------23-----------------------#2021-11-17</a></blockquote><div><div class="fc ik il im in io"/><div class="ip iq ir is it"><h2 id="5b3b" class="iu iv iw bd b dl ix iy iz ja jb jc dk jd translated" aria-label="kicker paragraph">数据工程</h2><div class=""/><div class=""><h2 id="0bc1" class="pw-subtitle-paragraph kc jf iw bd b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dk translated">开始使用多功能数据工具包，这是一个使数据工程师工作更高效的框架</h2></div><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj ku"><img src="../Images/bfa008da637e4a5a1a72a3f275fb4e70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NxRMPtZ0kCd5-ZLyuGewzA.jpeg"/></div></div><p class="lg lh gk gi gj li lj bd b be z dk translated">作者图片</p></figure><p id="352a" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">数据工程师的工作需要多种技能，包括构建数据管道、评估数据库、设计模式和管理模式。简而言之，<strong class="lm jg">数据工程师加载、提取、操作和管理数据</strong>。这项工作通常需要大量的技能，如果流程没有实现自动化，数据工程师就有可能犯很多错误，并在解决意外事件时浪费大量时间。</p><p id="3349" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">最近，我测试了一个非常有趣的框架，它方便了数据工程师的工作:由<a class="ae mg" href="https://www.vmware.com/" rel="noopener ugc nofollow" target="_blank"> VMware </a>在 Github 上开源发布的<a class="ae mg" href="https://github.com/vmware/versatile-data-kit" rel="noopener ugc nofollow" target="_blank">通用数据工具包</a>。</p><p id="5915" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">多功能数据工具包允许数据工程师半自动执行任务。实际上，他们只需要关注数据和框架的一般配置，比如数据库设置和 cron 任务调度，而不用担心手动部署、版本控制和类似的事情。</p><p id="21d2" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">换句话说，<strong class="lm jg">多功能数据套件简化了数据工程师的生活，因为它允许以简单快速的方式管理数据，以及快速处理意外事件。</strong></p><p id="03da" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">数据工程师只需三个步骤就可以构建完整的数据处理工作负载(<strong class="lm jg">数据作业</strong>，在通用数据工具包语言中):</p><ul class=""><li id="0c7a" class="mh mi iw lm b ln lo lq lr lt mj lx mk mb ml mf mm mn mo mp bi translated">摄取数据</li><li id="4984" class="mh mi iw lm b ln mq lq mr lt ms lx mt mb mu mf mm mn mo mp bi translated">过程数据</li><li id="9820" class="mh mi iw lm b ln mq lq mr lt ms lx mt mb mu mf mm mn mo mp bi translated">发布数据</li></ul><p id="2861" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">在本文中，我给出了通用数据工具包的概述，以及一个实际的用例，展示了它的潜力。欲了解更多信息，您可以阅读<a class="ae mg" href="https://github.com/vmware/versatile-data-kit/wiki/Introduction" rel="noopener ugc nofollow" target="_blank">多功能数据套件完整文档</a>。</p><h1 id="bfb2" class="mv mw iw bd mx my mz na nb nc nd ne nf kl ng km nh ko ni kp nj kr nk ks nl nm bi translated">1 概述</h1><p id="0c81" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">通用数据工具包是一个框架，使数据工程师能够开发、部署、运行和管理数据作业。<strong class="lm jg">一个数据作业就是数据处理工作量。</strong></p><p id="6cbe" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">多功能数据套件由两个主要组件组成:</p><ul class=""><li id="51b8" class="mh mi iw lm b ln lo lq lr lt mj lx mk mb ml mf mm mn mo mp bi translated">一个<strong class="lm jg">数据 SDK，</strong>提供了所有用于数据提取、转换和加载的工具，以及一个插件框架，允许根据数据应用的特定需求扩展框架。</li><li id="e656" class="mh mi iw lm b ln mq lq mr lt ms lx mt mb mu mf mm mn mo mp bi translated">一个<strong class="lm jg">控制服务</strong>，它允许在<a class="ae mg" href="https://kubernetes.io/" rel="noopener ugc nofollow" target="_blank"> Kubernetes 运行时环境</a>中创建、部署、管理和执行数据作业。</li></ul><p id="ffcd" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">多功能数据工具包管理三种类型的数据作业，如下图中的浅绿色所示:</p><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj ku"><img src="../Images/e03e88fb6f3b177c666b3d421bef5975.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KkIVmjqQtu1zn_zmTb3GmA.jpeg"/></div></div><p class="lg lh gk gi gj li lj bd b be z dk translated">作者图片</p></figure><h2 id="f8b4" class="ns mw iw bd mx nt nu dn nb nv nw dp nf lt nx ny nh lx nz oa nj mb ob oc nl jc bi translated">1.1 摄入工作</h2><p id="d63d" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">摄取作业包括<strong class="lm jg">将不同来源的数据推送到数据湖，这是原始数据的基本容器</strong>。数据可能以不同的格式提供，如 CSV、JSON、SQL 等。</p><p id="2318" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">摄取可以通过不同的步骤来定义，包括但不限于创建数据模式和将数据加载到表中的过程。所有这些步骤都可以通过<strong class="lm jg">编写数据作业</strong>(通常用 Python 或 SQL)或通过<strong class="lm jg">插件</strong>来指定。通用数据工具包提供了一些预打包的插件，例如用于 CSV 和 SQL 摄取，但是您可以实现自己的插件。</p><h2 id="b64f" class="ns mw iw bd mx nt nu dn nb nv nw dp nf lt nx ny nh lx nz oa nj mb ob oc nl jc bi translated">1.2 加工作业</h2><p id="3bed" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">处理作业允许从数据湖中包含的数据集创建精选数据集。通常，这些工作涉及数据操作，例如数据清理和数据聚合。产生的数据集存储在数据仓库中，这在概念上不同于数据湖，但在物理上可能与之一致。由于其高度可配置性，处理作业也可以与高级分析用例相关联。</p><p id="ea3c" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">通常处理作业是用 SQL 编写的，但是 Python 也可以用来实现这种类型的作业。</p><h2 id="a96c" class="ns mw iw bd mx nt nu dn nb nv nw dp nf lt nx ny nh lx nz oa nj mb ob oc nl jc bi translated">1.3 发布工作</h2><p id="7ebd" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">发布作业包括即席查询或视图，可用于不同的目的，例如使用标准商业智能工具构建交互式仪表板，向其他应用程序发送通知或警报等。</p><p id="cacc" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">发布作业依赖于特定的数据集，因此目前它们尚未包含在当前版本的通用数据工具包中。</p><h1 id="e68b" class="mv mw iw bd mx my mz na nb nc nd ne nf kl ng km nh ko ni kp nj kr nk ks nl nm bi translated">2 用法示例</h1><p id="83db" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">例如，我将开发一个本地数据湖，在这里我将摄取一个 CSV 文件，该文件包含<a class="ae mg" href="https://simplemaps.com/data/world-cities" rel="noopener ugc nofollow" target="_blank">世界城市数据库</a>的基本版本，包含大约 41k 个位置:</p><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj od"><img src="../Images/4be6e52ddfb8579892a50202e2f8c52c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ff8K0mZWYoEMQva14ZadsA.png"/></div></div><p class="lg lh gk gi gj li lj bd b be z dk translated">作者图片</p></figure><p id="d9cf" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">我将遵循以下步骤:</p><ul class=""><li id="e635" class="mh mi iw lm b ln lo lq lr lt mj lx mk mb ml mf mm mn mo mp bi translated">多功能数据套件安装</li><li id="69c3" class="mh mi iw lm b ln mq lq mr lt ms lx mt mb mu mf mm mn mo mp bi translated">数据作业创建</li><li id="fbf6" class="mh mi iw lm b ln mq lq mr lt ms lx mt mb mu mf mm mn mo mp bi translated">摄取作业</li><li id="1e5b" class="mh mi iw lm b ln mq lq mr lt ms lx mt mb mu mf mm mn mo mp bi translated">加工作业</li></ul><h2 id="7ab6" class="ns mw iw bd mx nt nu dn nb nv nw dp nf lt nx ny nh lx nz oa nj mb ob oc nl jc bi translated">2.1 多功能数据套件安装</h2><p id="0820" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">多功能数据套件可通过<code class="fe oe of og oh b">pip</code>轻松安装，如下所示:</p><pre class="kv kw kx ky gu oi oh oj ok aw ol bi"><span id="2a8a" class="ns mw iw oh b gz om on l oo op">pip install -U pip setuptools wheel<br/>pip install quickstart-vdk</span></pre><p id="0e9a" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">由于我在本地部署了所有数据作业，因此不需要安装控制服务。但是，如果您想在 Kubernetes 运行时环境上部署数据作业，您可以遵循本指南<a class="ae mg" href="https://github.com/vmware/versatile-data-kit/wiki/Installation#install-versatile-data-kit-control-service" rel="noopener ugc nofollow" target="_blank"/>。</p><h2 id="0c35" class="ns mw iw bd mx nt nu dn nb nv nw dp nf lt nx ny nh lx nz oa nj mb ob oc nl jc bi translated">2.2 数据工作创建</h2><p id="7594" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">一旦安装完毕，我就可以使用<code class="fe oe of og oh b">vdk</code>命令与多功能数据工具包进行交互。我可以通过以下命令创建新的数据作业:</p><pre class="kv kw kx ky gu oi oh oj ok aw ol bi"><span id="2e98" class="ns mw iw oh b gz om on l oo op">vdk create -n world-cities-vdk -t my-team</span></pre><p id="e65a" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">其中<code class="fe oe of og oh b">-n</code>指定数据作业名称，<code class="fe oe of og oh b">-t</code>指定团队名称。关于每个<code class="fe oe of og oh b">vdk</code>命令的更多细节，我可以运行以下命令:</p><pre class="kv kw kx ky gu oi oh oj ok aw ol bi"><span id="ebd1" class="ns mw iw oh b gz om on l oo op">vdk [command-name] --help</span></pre><p id="bfae" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">例如:</p><pre class="kv kw kx ky gu oi oh oj ok aw ol bi"><span id="726a" class="ns mw iw oh b gz om on l oo op">vdk create --help</span></pre><p id="519c" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">作为<code class="fe oe of og oh b">create</code>命令的结果，<code class="fe oe of og oh b">vdk</code>创建了一个新目录，其中包含一些示例文件，每个文件对应于数据作业的一个步骤。</p><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div class="gi gj oq"><img src="../Images/f9d1d710598070272eaa8f6adad377ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*SgvxjTOrSe5FDltsQlZS-w.png"/></div><p class="lg lh gk gi gj li lj bd b be z dk translated">作者图片</p></figure><p id="892b" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">步骤按字母顺序执行，因此，为了便于阅读，可以从 1 开始编号。关于数据作业目录结构的更多细节，可以查看<a class="ae mg" href="https://github.com/vmware/versatile-data-kit/wiki/Getting-Started" rel="noopener ugc nofollow" target="_blank">官方文档</a>。</p><h2 id="0b89" class="ns mw iw bd mx nt nu dn nb nv nw dp nf lt nx ny nh lx nz oa nj mb ob oc nl jc bi translated">2.3 环境设置</h2><p id="f500" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">在开始使用多功能数据工具包之前，需要进行初步配置。这是通过配置两个文件实现的:</p><ul class=""><li id="d1ed" class="mh mi iw lm b ln lo lq lr lt mj lx mk mb ml mf mm mn mo mp bi translated"><code class="fe oe of og oh b">requirements.txt</code> —该文件包含项目中开发的库的列表，每行一个；</li><li id="36b6" class="mh mi iw lm b ln mq lq mr lt ms lx mt mb mu mf mm mn mo mp bi translated"><code class="fe oe of og oh b">config.ini</code> —该文件允许配置一些基本信息，如团队名称和 cron 运行任务。</li></ul><p id="a94a" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">现在，我可以配置一些环境变量，包括数据库类型(在我的例子中是 sqlite)和名称(在我的例子中是<code class="fe oe of og oh b">vdk-cities.db</code>)。我可以直接从我的终端配置这些变量:</p><pre class="kv kw kx ky gu oi oh oj ok aw ol bi"><span id="f0c9" class="ns mw iw oh b gz om on l oo op">export VDK_DB_DEFAULT_TYPE=SQLITE<br/>export VDK_INGEST_METHOD_DEFAULT=sqlite<br/>export VDK_INGEST_TARGET_DEFAULT=vdk-cities.db<br/>export VDK_SQLITE_FILE=vdk-cities.db</span></pre><p id="d23e" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">这个<code class="fe oe of og oh b">vdk-cities.db</code>文件将成为我的数据湖。</p><h2 id="6297" class="ns mw iw bd mx nt nu dn nb nv nw dp nf lt nx ny nh lx nz oa nj mb ob oc nl jc bi translated">2.4 摄入工作</h2><p id="f4d0" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">我已经准备好接收数据湖中的数据。首先，我在本地下载<a class="ae mg" href="https://simplemaps.com/data/world-cities" rel="noopener ugc nofollow" target="_blank">数据集</a>，并将其放入名为<code class="fe oe of og oh b">source</code>的目录中，该目录位于数据作业父目录中。</p><p id="48d3" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">想法是将数据集摄取到名为<code class="fe oe of og oh b">cities</code>的表中。这可以通过两种方式实现:</p><ul class=""><li id="63c6" class="mh mi iw lm b ln lo lq lr lt mj lx mk mb ml mf mm mn mo mp bi translated">编写数据作业</li><li id="e9d4" class="mh mi iw lm b ln mq lq mr lt ms lx mt mb mu mf mm mn mo mp bi translated">使用<code class="fe oe of og oh b">vdk-csv</code>插件。</li></ul><p id="aaba" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated"><strong class="lm jg"> 2.4.1 写入数据作业</strong></p><p id="8261" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">我定义了一个初步的数据作业步骤，它删除表<code class="fe oe of og oh b">cities</code>，如果它存在的话，以确保总是有一个新版本的表:</p><pre class="kv kw kx ky gu oi oh oj ok aw ol bi"><span id="14a4" class="ns mw iw oh b gz om on l oo op">DROP TABLE IF EXISTS cities;</span></pre><p id="d916" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">我在数据作业目录中将这一步保存为<code class="fe oe of og oh b">10_drop_cities_table.sql</code>。名称开头的<code class="fe oe of og oh b">10</code>将确保首先执行该步骤。</p><p id="24f2" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">现在我定义第二个数据作业步骤，它定义了表模式，数据集将被导入到这个表模式中。数据作业步骤对应于以下简单的 SQL 代码:</p><pre class="kv kw kx ky gu oi oh oj ok aw ol bi"><span id="972c" class="ns mw iw oh b gz om on l oo op">CREATE TABLE cities (</span><span id="6ecd" class="ns mw iw oh b gz or on l oo op">city NVARCHAR,<br/>city_ascii NVARCHAR,<br/>lat REAL,<br/>lng REAL,<br/>country NVARCHAR,<br/>iso2 NVARCHAR,<br/>iso3 NVARCHAR,<br/>admin_name NVARCHAR,<br/>capital NVARCHAR,<br/>population INTEGER,<br/>id INTEGER<br/>);</span></pre><p id="9bf3" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">我将此步骤保存为<code class="fe oe of og oh b">20_create_cities_table.sql</code>。</p><p id="0508" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">最后，我可以将数据集上传到<code class="fe oe of og oh b">cities</code>表中。我可以编写以下 Python 脚本，它将数据集作为 Pandas dataframe 加载，将其转换为 dict，然后通过多功能数据工具包提供的<code class="fe oe of og oh b">job_input.send_object_for_ingestion()</code>函数将 dict 的每一项发送到数据湖:</p><pre class="kv kw kx ky gu oi oh oj ok aw ol bi"><span id="e83b" class="ns mw iw oh b gz om on l oo op">import logging<br/>from vdk.api.job_input import IJobInput<br/>import pandas as pd</span><span id="78a5" class="ns mw iw oh b gz or on l oo op">log = logging.getLogger(__name__)</span><span id="6777" class="ns mw iw oh b gz or on l oo op">def run(job_input: IJobInput):<br/>   log.info(f"Starting job step {__name__}")<br/>   df = pd.read_csv('source/worldcities.csv')</span><span id="6865" class="ns mw iw oh b gz or on l oo op">   df_dict = df.to_dict(orient='records')<br/>   for row in range(0, len(df_dict)):<br/>       job_input.send_object_for_ingestion(<br/>          payload=df_dict[row], destination_table="cities")</span></pre><p id="6204" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">请注意，为了将 Python 脚本识别为数据作业 Python 步骤，需要使用<code class="fe oe of og oh b">run()</code>函数。</p><p id="e99d" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">现在，我已经准备好运行数据作业步骤了。我移动到数据作业父目录，并运行以下命令:</p><pre class="kv kw kx ky gu oi oh oj ok aw ol bi"><span id="c9a8" class="ns mw iw oh b gz om on l oo op">vdk run world-cities-vdk</span></pre><p id="a30e" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">数据库<code class="fe oe of og oh b">vdk-cities.db</code>在当前目录中创建，并使用<code class="fe oe of og oh b">cities</code>表填充。我可以通过<code class="fe oe of og oh b">vdk query</code>命令或传统的<code class="fe oe of og oh b">sqlite</code>命令查询数据库:</p><pre class="kv kw kx ky gu oi oh oj ok aw ol bi"><span id="a40a" class="ns mw iw oh b gz om on l oo op">vdk sqlite-query -q 'SELECT * FROM cities'</span></pre><p id="f3db" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated"><strong class="lm jg"> 2.4.2 使用</strong> <code class="fe oe of og oh b"><strong class="lm jg">vdk-csv</strong></code> <strong class="lm jg">插件</strong></p><p id="cacf" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">将数据集加载到数据湖的另一种方法是使用插件。在我的例子中，我将使用<code class="fe oe of og oh b">vdk-csv</code>插件。我可以通过<code class="fe oe of og oh b">pip</code>轻松安装:</p><pre class="kv kw kx ky gu oi oh oj ok aw ol bi"><span id="35eb" class="ns mw iw oh b gz om on l oo op">pip install quickstart-vdk vdk-csv</span></pre><p id="893f" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">然后，我可以通过以下命令接收数据集:</p><pre class="kv kw kx ky gu oi oh oj ok aw ol bi"><span id="8da6" class="ns mw iw oh b gz om on l oo op">vdk ingest-csv -f source/worldcities.csv -t cities</span></pre><h2 id="6a50" class="ns mw iw bd mx nt nu dn nb nv nw dp nf lt nx ny nh lx nz oa nj mb ob oc nl jc bi translated">2.5 加工作业</h2><p id="5191" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">作为一项处理工作，我创建了一个只包含美国城市的<code class="fe oe of og oh b">cities</code>表的视图。为此，我定义了两个处理作业:</p><ul class=""><li id="089e" class="mh mi iw lm b ln lo lq lr lt mj lx mk mb ml mf mm mn mo mp bi translated">删除视图(如果存在)</li><li id="34cd" class="mh mi iw lm b ln mq lq mr lt ms lx mt mb mu mf mm mn mo mp bi translated">创建视图并将其保存在默认的数据湖中。</li></ul><p id="6eb0" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">首先，我编写了另一个数据作业步骤，名为<code class="fe oe of og oh b">40_drop_usa_cities_view.sql</code>:</p><pre class="kv kw kx ky gu oi oh oj ok aw ol bi"><span id="657e" class="ns mw iw oh b gz om on l oo op">DROP VIEW IF EXISTS usa_cities;</span></pre><p id="fcd4" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">然后我创建了另一个数据作业步骤，它创建了视图:</p><pre class="kv kw kx ky gu oi oh oj ok aw ol bi"><span id="a4c4" class="ns mw iw oh b gz om on l oo op">CREATE VIEW usa_cities<br/>AS<br/>  SELECT *<br/>  FROM cities<br/>  WHERE country = 'United States';</span></pre><p id="05eb" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">我又运行了一遍所有的数据作业:</p><pre class="kv kw kx ky gu oi oh oj ok aw ol bi"><span id="a241" class="ns mw iw oh b gz om on l oo op">vdk run world-cities-vdk</span></pre><p id="72e0" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">视图被添加到数据湖中。</p><h1 id="e82e" class="mv mw iw bd mx my mz na nb nc nd ne nf kl ng km nh ko ni kp nj kr nk ks nl nm bi translated">摘要</h1><p id="863c" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">在这篇文章中，我描述了通用数据工具包的概述，这是一个非常强大的框架，允许以有效的方式管理数据。</p><p id="a83a" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">此外，我还展示了该框架的一个初始用例，包括数据作业接收和处理。有关更多详细信息，您可以阅读通用数据工具包<a class="ae mg" href="https://github.com/vmware/versatile-data-kit/wiki/User-Guide#overview" rel="noopener ugc nofollow" target="_blank">用户指南</a>。</p><p id="a754" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">本教程的完整代码可以从我的 Github 资源库下载。</p><p id="4599" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">对于多功能数据工具包的问题或疑问，你可以直接加入他们的<a class="ae mg" href="https://join.slack.com/t/versatiledata-rgg2437/shared_invite/zt-tvnl62c3-qP0EUYJZJxb6Ws_eQWyDtQ" rel="noopener ugc nofollow" target="_blank">公共 slack 工作区</a>或<a class="ae mg" href="mailto:join-versatiledatakit@groups.vmware.com?subject=Invite%20me%20to%20the%20VDK%20mailing%20list" rel="noopener ugc nofollow" target="_blank">他们的邮件列表</a>或<a class="ae mg" href="https://twitter.com/intent/follow?screen_name=VDKProject" rel="noopener ugc nofollow" target="_blank">在 Twitter 上关注他们</a>。</p><p id="d947" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">如果你读到这里，对我来说，今天已经很多了。谢谢！你可以在<a class="ae mg" href="https://alod83.medium.com/which-topics-would-you-like-to-read-c68314dc6813" rel="noopener">这篇文章</a>中读到更多关于我的内容。</p><h1 id="9975" class="mv mw iw bd mx my mz na nb nc nd ne nf kl ng km nh ko ni kp nj kr nk ks nl nm bi translated">你愿意支持我的研究吗？</h1><p id="8ec1" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">你可以每月订阅几美元，并解锁无限的文章。</p><h1 id="9cc4" class="mv mw iw bd mx my mz na nb nc nd ne nf kl ng km nh ko ni kp nj kr nk ks nl nm bi translated">相关文章</h1><div class="os ot gq gs ou ov"><a rel="noopener follow" target="_blank" href="/automatic-update-of-django-models-from-a-google-spreadsheet-7c6d4f30e3ca"><div class="ow ab fp"><div class="ox ab oy cl cj oz"><h2 class="bd jg gz z fq pa fs ft pb fv fx jf bi translated">从 Google 电子表格自动更新 Django 模型</h2><div class="pc l"><h3 class="bd b gz z fq pa fs ft pb fv fx dk translated">关于如何直接从 Google 电子表格创建和更新 Django 模型的现成 Python 教程</h3></div><div class="pd l"><p class="bd b dl z fq pa fs ft pb fv fx dk translated">towardsdatascience.com</p></div></div><div class="pe l"><div class="pf l pg ph pi pe pj le ov"/></div></div></a></div><div class="os ot gq gs ou ov"><a rel="noopener follow" target="_blank" href="/building-a-fast-web-interface-in-django-for-data-entry-62f24947ef23"><div class="ow ab fp"><div class="ox ab oy cl cj oz"><h2 class="bd jg gz z fq pa fs ft pb fv fx jf bi translated">在 Django 中构建数据输入的快速 Web 界面</h2><div class="pc l"><h3 class="bd b gz z fq pa fs ft pb fv fx dk translated">关于如何安装 Django 并利用它快速构建数据输入的 Web 界面的教程</h3></div><div class="pd l"><p class="bd b dl z fq pa fs ft pb fv fx dk translated">towardsdatascience.com</p></div></div><div class="pe l"><div class="pk l pg ph pi pe pj le ov"/></div></div></a></div><div class="os ot gq gs ou ov"><a rel="noopener follow" target="_blank" href="/relational-vs-non-relational-databases-f2ac792482e3"><div class="ow ab fp"><div class="ox ab oy cl cj oz"><h2 class="bd jg gz z fq pa fs ft pb fv fx jf bi translated">关系数据库与非关系数据库</h2><div class="pc l"><h3 class="bd b gz z fq pa fs ft pb fv fx dk translated">关系数据库和非关系数据库的利弊。</h3></div><div class="pd l"><p class="bd b dl z fq pa fs ft pb fv fx dk translated">towardsdatascience.com</p></div></div><div class="pe l"><div class="pl l pg ph pi pe pj le ov"/></div></div></a></div><p id="5eda" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated"><strong class="lm jg"> <em class="pm">免责声明</em> </strong> <em class="pm">:此文非赞助文章。我与通用数据工具包或其作者没有任何关系。这篇文章展示了该工具包的一个公正的概述，旨在让更多的人可以使用数据科学工具。</em></p></div></div>    
</body>
</html>