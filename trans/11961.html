<html>
<head>
<title>“My data drifted. What’s next?” How to handle ML model drift in production.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">“我的数据漂移了。接下来是什么？”如何处理生产中的 ML 模型漂移？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/my-data-drifted-whats-next-how-to-handle-ml-model-drift-in-production-78719ef007b1?source=collection_archive---------6-----------------------#2021-12-01">https://towardsdatascience.com/my-data-drifted-whats-next-how-to-handle-ml-model-drift-in-production-78719ef007b1?source=collection_archive---------6-----------------------#2021-12-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="00aa" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/tips-and-tricks" rel="noopener" target="_blank">提示和技巧</a></h2><div class=""/><div class=""><h2 id="7c8d" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">可能步骤的介绍性概述。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/4cbae4463a47cbb44df1eeb92925de7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5GI3A7Mo-ZLo7b-yP7rWfQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片作者。</p></figure><p id="bdc7" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">“我有一个生产中的模型，数据正在漂移。怎么反应？”</p><p id="523d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这是我们经常遇到的问题。</p><p id="1044" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">这个</strong> <a class="ae ma" href="https://evidentlyai.com/blog/machine-learning-monitoring-data-and-concept-drift" rel="noopener ugc nofollow" target="_blank"> <strong class="lg ja">数据漂移</strong> </a> <strong class="lg ja">可能是唯一的信号。</strong>你在预测什么，但还不知道事实。模型输入和输出的统计变化是代理。数据发生了变化，您怀疑模型性能下降。</p><p id="392b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">其他情况，可以肯定知道。</strong>您可以计算模型质量或业务指标。准确性、平均误差、欺诈率，应有尽有。性能变差了，数据也不同了。</p><p id="a278" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">接下来你能做什么？</p><p id="0ed2" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">下面是可能步骤的介绍性概述。</p><h1 id="6998" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">1.检查数据质量</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/c9f0023306ea1e8df83b61fc526d48bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qjlOlajQE_OFCIq_6BDCPg.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片作者。</p></figure><p id="bdcb" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果你幸运的话，你有标签。应该盲目打“再培训”吗？</p><p id="592c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">暂停一下可能是个好主意。</p><p id="3f87" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">数据漂移表示发生了变化。到底是什么？</strong>来看看吧！</p><p id="c657" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">当我们谈到数据和预测漂移时，我们通常会想到模型相关性。这个模型仍然适合这个任务吗？是否在熟悉的环境中操作？</p><p id="dd56" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">假设我们看到来自一个新地点的大量用户。他们有新的行为模式和特征。数据分布发生了变化。这就是我们所说的“真正的”数据漂移。</p><p id="15db" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">它可能会影响预测转化率或个性化营销提议的模型的性能。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/7d04dbe8237ed603bad22d6903380e23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DP3FWw-foc5A_ar1MEhCRg.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">样本特征分布图(1)。是的，我们画了这个，但是你显然可以使用<a class="ae ma" href="https://github.com/evidentlyai/evidently" rel="noopener ugc nofollow" target="_blank">开源 Python 库自动生成:)</a></p></figure><p id="a419" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">但是假设在代码更新期间引入了一个 bug。因此，我们停止记录一些现有位置的数据。分布也会改变。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/3084ee60fd6d9062b46be29f5287b34c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FGiqMc-t6X1uEMgksps3Ig.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">样本特征分布图(2)。图片作者。</p></figure><p id="f9a6" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">那是伪装成数据漂移的数据质量问题。</strong></p><p id="d9ab" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">数据输入错误、模式改变、上游模型问题——我们已经列出了数据可能出现问题的清单。</p><p id="df9b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">理想情况下，您应该<a class="ae ma" href="https://evidentlyai.com/machine-learning-monitoring-how-to-track-data-quality-and-integrity" rel="noopener ugc nofollow" target="_blank">对数据质量和完整性进行单独检查</a>，并及时做出反应。您可以监控缺失数据、范围符合性等。</p><p id="1227" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果设置了这两种类型的监视，数据漂移和数据质量警报可能会同时触发。在这种情况下，数据质量检查具有优先权。</p><p id="6d13" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们先把数据搞定。</p><p id="d8c4" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">您可以再次从数据源获取数据，重写连接器，解决日志问题，更新模式或特性转换代码，等等。</p><p id="432f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在这种情况下，不需要重新训练或更新模型。模型是好的，数据不是。</p><p id="6087" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">数据质量几乎总是首先要考虑的问题。</p><h1 id="cf31" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">2.调查漂移</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/11db863eb33847e3b42cc4ffbb01c104.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7JxQvK4tzmkB7RwmdZsHUw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片作者。</p></figure><p id="1e85" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">但是如果漂移是“真实”的呢？</p><p id="f06b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">该模型在动态环境中运行。事情变了。你可能会有<a class="ae ma" href="https://evidentlyai.com/blog/machine-learning-monitoring-data-and-concept-drift" rel="noopener ugc nofollow" target="_blank">数据漂移，概念漂移，或者两者同时存在</a>。</p><p id="5257" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">下一步是试图找到现实世界的罪魁祸首来解释它。</p><p id="d357" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">首先，您可以绘制漂移要素的分布。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/6884f4bb6e70d24613d4e9afb92508ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VwhNLztGU3a6cRRwWKK_Bg.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated"><a class="ae ma" href="https://github.com/evidentlyai/evidently" rel="noopener ugc nofollow" target="_blank">中的样本数据漂移报告明显在</a>界面。(图片由作者提供)。</p></figure><p id="f7c6" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">目标是理解和解释变化。</p><p id="6257" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们回到用户突然涌入的例子。这是新的营销活动的结果吗？我们是否在新的地点推出了一款应用？还是单纯的垃圾流量？</p><p id="165a" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">当然，这可能会变得棘手。</p><p id="4162" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们并不总是能够接触到现实世界转变的“源头”。我们所拥有的特征通常是它的不完整表现。</p><p id="3e6c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">例如，竞争对手的活动可能会影响用户行为。但是模型特征可能不包含此信息。</p><p id="fe24" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">与领域专家合作可能有助于找到可能的解释。</p><p id="ef32" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">个人特征也不总是能说明全部情况。例如，如果我们处理概念漂移，它们的分布可能保持相似。但是关系会发生变化:在特征之间，或者在特征和模型输出之间。</strong></p><p id="15b0" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">可以目测一下。</p><p id="5b63" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">首先可以看输出分布形状本身。</strong>如果你有实际数据，你可以看到事实是如何变化的。如果你只有模型预测，你可以看看。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/5511443a5af5083838218a93ea61a9ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mg9zhwdWUW3J6tF3xmqviQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">来自<a class="ae ma" href="https://github.com/evidentlyai/evidently" rel="noopener ugc nofollow" target="_blank">的样品目标分布测试显然是</a>目标漂移报告。(图片由作者提供)。</p></figure><p id="17e4" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">你可以看一下输入和输出分布，然后就此打住。</p><p id="9b42" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">或者，你可以继续挖。</p><p id="24a0" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">例如，绘制单个特征和模型预测之间的相关性<a class="ae ma" href="https://docs.evidentlyai.com/reports/num-target-drift" rel="noopener ugc nofollow" target="_blank">。我们并不总是期望线性关系，但这个简单的技巧往往可以提供有价值的见解。</a></p><p id="08b6" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">不幸的是，没有简单方便的方法来绘制复杂的多维交互。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/272a76bd82b971c507f31fe59dda65e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A8EU7KrLnIQ1aNDOfKhs7w.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">模型特征和目标值的相关图示例。(图片由作者提供)。</p></figure><p id="4dac" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在上面的例子中，你可能会怀疑网页浏览量和转化率之间的突然变化是由垃圾邮件或低质量的流量引起的。</p><p id="0645" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">用例很重要吗？你或其他人能很好地解释这些数据吗？还有更多的东西可以看。</p><p id="1b41" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">例如，您可以绘制成对特征相关性的变化。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/0e1cc1292c19a7cd9484660534494084.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lMO2cmTBSkrLrVP8K5gkxw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">样本成对特征相关图。(图片由作者提供)。</p></figure><p id="8409" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">领域专家甚至可以用肉眼发现变化。例如，制造工程师可能会注意到在物理意义上不存在的相关性。只有特定的设备故障模式才能解释这一点。<br/> <br/>你的用例可能有一些类似的东西。<br/> <br/>如果可以的话，理解这个语境有助于通知下一步。</p><h1 id="7f77" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">3.什么也不做</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/0b645ba958c0951445071de04db19908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O4DiD-AkslDjzZ6VQMwbIA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片作者。</p></figure><p id="1630" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">你对漂移有想法。哪些特征在漂移，有多少，有多强？也许，你甚至抓住了背后的过程。</p><p id="c520" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">下一步是什么？</p><p id="1613" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">你需要决定观察到的漂移是否真的有意义。这是你应该做出反应的事情吗？</p><p id="2d3b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在理想情况下，我们设置漂移检测阈值时会考虑到这一点。我们选择要查看的关键特性，选择合理的统计测试，并调整置信水平。我们希望对重要的事情保持警惕。</p><p id="7520" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">实际上，设置漂移监控通常是通过反复试验来完成的。</p><p id="532b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果您在生产中收到漂移警报，这通常是一个学习练习。需要反应吗，还是假阳性？</p><p id="84cc" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">你可能会看到漂移的来源，并决定接受它。</p><p id="ca7f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这里没有捷径—您需要来自了解用例及数据的数据科学家的专家判断。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/c5526661e13326162c9c04625fccd367.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YMjSLX2yoGaHMtKiGz_DKA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片作者。</p></figure><p id="c204" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">也许标签很快就会到了。让我们等一会儿。</p><p id="88b5" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在那之前，你可以简单地决定接受较低的模型性能。对于不太重要的模型，这可能是一个理性的决定。</p><p id="94ba" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">也许，胜负难料。让我们密切关注。</strong></p><p id="1ba3" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">您可以决定在接下来的模型运行中更仔细地查看数据。您可以计划一些附加报告或添加一个仪表板来跟踪特定功能。</p><p id="a9f9" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">也许，这是一个错误的警报。让我们来调整监控。</p><p id="ed7c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">您可以放弃通知。例如，如果您不想在下一次发生同样的事情时被打扰，您可以更改漂移警报条件或使用的统计测试。</p><p id="5b7c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在其他情况下，您可能会对模型对漂移的反应感到满意。</p><p id="f47e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">假设您看到某个特定类别在模型预测中变得更加普遍。但这与观察到的特征漂移非常吻合。</p><p id="83ca" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">例如，获批贷款申请的增加是随着高收入申请人的增加。它可能看起来像特征和预测漂移，但与您预期的行为一致。</p><p id="5904" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">当然，事情并不总是这样。</p><p id="a014" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果您认为需要采取行动，让我们来看看这些选项。</p><h1 id="9f28" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">4.如果可以的话，重新训练它</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/03e2b0f81ee5c02db22c8b74f1b3c2a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rzmZLKU4mzcF5HWmJ12Dyw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片作者。</p></figure><p id="020b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">一条简单的出路。</p><p id="b6df" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这仅适用于新标签存在的情况。但往往你有，或者能得到它们！</p><p id="66fb" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在某些情况下，我们出于方便监视数据漂移。我们在机器学习服务中直接拥有了我们所需要的一切:进入的特征和模型预测。</p><p id="4998" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">地面实况标注或实际值可能会延迟一段时间到达，或者驻留在与预测不同的数据库中。</p><p id="25c8" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">您可能需要一个单独的 ETL 作业来获取这些新数据。</strong></p><p id="2f3e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果您检测到漂移，是时候触发这个半人工数据准备过程了。导出，执行连接，并为模型重新训练进行清理。</p><p id="110d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">在其他情况下，你可能需要先标记数据。</strong></p><p id="75ea" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">贴标机专家可能就在公司内部。但是他们的时间很宝贵，你不能要求他们一直查看模型预测。你按要求触发它。</p><p id="0c43" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">有时，您会聘请外部团队或服务提供商。漂移检测表明是时候标记新一批数据了。让模特学习变化的图案！</p><h1 id="e6ce" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">5.校准或重建模型</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/ff92e2a68bf15a383c59e6d7770187a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iwl1ynHX7vTob1H4vImfTA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片作者。</p></figure><p id="d267" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对于那些幸运拥有这些标签的人来说，这是另一种选择。</p><p id="1dc5" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果你面临重大改变，幼稚的再培训往往是不够的。我们已经在过去的博客中讨论过这种差异。</p><p id="e1d9" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">通过再培训，您可以重复现有的模型培训渠道。</strong>您保留特征工程步骤、模型类型、超参数等等。您只需更改培训数据。</p><p id="b8e2" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">您可以向现有数据集添加一组新数据，或者仅对新数据集重新运行管道。或者做一些组合，新旧混合。旁注:你可以<a class="ae ma" href="https://evidentlyai.com/blog/retrain-or-not-retrain#old-or-new-data" rel="noopener ugc nofollow" target="_blank">提前测试</a>来选择最适合你的用例。</p><p id="dd2b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">说这就是我们所做的。我们“重放”了模型训练。但是更新后的模型在验证集上的表现并不理想。</p><p id="1965" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">要重建或校准模型，您可以对培训管道进行更多更改。</strong></p><p id="665b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">您可以从头开始重新运行模型实验，测试新的模型架构、参数或特征处理方法。</p><p id="a2e0" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">你也可以测试一些更具体的想法来对抗漂移:</p><ul class=""><li id="03e8" class="mt mu iq lg b lh li lk ll ln mv lr mw lv mx lz my mz na nb bi translated"><strong class="lg ja">重新加权训练数据</strong>中的样本，给予最近的样本更大的重要性。目标是让模型优先考虑更新的模式。</li><li id="1658" class="mt mu iq lg b lh nc lk nd ln ne lr nf lv ng lz my mz na nb bi translated"><strong class="lg ja">确定模型失败的新细分市场</strong>，并为其创建不同的模型。考虑对不同的数据段使用几个模型的集合。</li><li id="1bdf" class="mt mu iq lg b lh nc lk nd ln ne lr nf lv ng lz my mz na nb bi translated"><strong class="lg ja">改变预测目标</strong>。例如，从每周预测切换到每天预测，或者用从“高”到“低”的分类来替换回归模型</li><li id="9ad3" class="mt mu iq lg b lh nc lk nd ln ne lr nf lv ng lz my mz na nb bi translated"><strong class="lg ja">选择不同的模型架构，以应对持续漂移</strong>。您可以考虑增量学习或在线学习，其中模型不断适应新数据。</li><li id="2848" class="mt mu iq lg b lh nc lk nd ln ne lr nf lv ng lz my mz na nb bi translated"><strong class="lg ja">应用领域适应策略</strong>。有许多方法可以帮助模型更好地推广到新的目标领域。</li></ul><p id="7833" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">和数据科学一样，没有任何保证。</p><p id="76c6" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">有时主要的概念漂移会完全破坏模型。想象一下，你在生产线上从事质量预测工作，它刚刚进行了一次改造。这使得模型学习过时了。</p><p id="2f40" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">您可能需要等待收集更多新数据，直到您可以恢复机器学习系统。</p><p id="dda8" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果机器学习不起作用，你还有什么其他选择？</p><p id="6812" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">可以考虑一个非 ML 的解决方案</strong>。其他健壮的东西:基于对因果关系的理解、过程的物理或专家知识。</p><h1 id="c0f1" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">6.暂停模型并使用回退</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/fd0dfc30f669063593a725ae6c4275ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gx0ndQ8Rlem0I4YJmCFFyQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片作者。</p></figure><p id="694e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们画一幅画。</p><p id="480c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们知道存在模型漂移。分布发生了变化，或者预测太离谱，或者两者兼而有之。但是我们没有更新模型所需的标签！</p><p id="ecb6" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">也许，他们将在 30 天后到达。或者我们有标签，但是数据量不足以更新模型。如果模型错误有风险或代价高昂，我们不能听之任之，容忍不可靠的预测。</p><p id="1b78" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这是一个激进的选择。</p><p id="8f92" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">我们根本不用模型！</strong></p><p id="5709" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们可以简单地关掉它。例如，在应用程序中隐藏推荐块。</p><p id="aee8" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在许多情况下，您可以有替代的回退策略。例如，如果模型没有响应，可以求助于它。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/b50bc20e16b04da9b6c1b5a87fc4fa87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JR-zEyAzGH5Y6z1BfCxnkA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片作者。</p></figure><p id="e1ba" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">人类专家的决定就是其中之一。很有可能，一个 ML 模型被设计来帮助某人做可重复的决定。</p><p id="1f4c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">但是如果模型没有帮助，你仍然可以依靠专家的判断。想象一下保险索赔处理、制造质量控制或销售线索评分。</p><p id="3865" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">你可以要求用户自己采取行动:就像 Twitter 在发现他们的图像裁剪算法可能有偏差时所做的那样。他们<a class="ae ma" href="https://blog.twitter.com/engineering/en_us/topics/insights/2021/sharing-learnings-about-our-image-cropping-algorithm" rel="noopener ugc nofollow" target="_blank">将控制权交还给用户</a>。</p><p id="a345" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">启发式和规则是另一种。</strong>你通常可以设计一套规则，虽然不太精确，但比流氓模型更健壮。</p><p id="db1c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">例如，您可以简单地向所有客户显示最受欢迎的商品，而不是随机和不匹配的推荐。</p><p id="eeda" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">在某些领域，你可以切换到另一种模式类型。</strong>你可以使用金融领域的经典评分模型。你可以使用统计模型来进行医院的病人分类。您可以在制造过程控制中使用第一原理物理模型。</p><p id="ec98" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果您正在处理一个高风险的领域，最好从一开始就设计这样的回退。</p><h1 id="07cc" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">7.找到表现不佳的部分</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/f2d32f9f8aed0ebb752644bdf605e352.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BeGFcDRiFtb1Wsht4qLIKg.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片作者。</p></figure><p id="3a24" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对于某些模型预测，您可能只会点击“暂停”。</p><p id="a207" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">通常，这种变化并不普遍。它可能只影响一部分人。或者，一个新出现的细分市场本身就是变化。</p><p id="db56" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果你能定义低性能的部分，这给了你新的选择。您不会完全停止模型应用程序。但是，您可以对某些数据输入进行限制。</p><p id="a2aa" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">即使你没有地面真相标签，这也是可行的。</p><p id="d671" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这里有一个例子。</p><p id="337f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">假设我们收到了营销个性化模型</strong>的数据漂移警报。我们开始调查。我们看到模型预测和一些特征的转变。</p><p id="b4b3" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们最喜欢的“位置”类别又有了不同的分布。这为我们提供了一个假设来测试:所有的变化都可以归因于新的区域吗？</p><p id="071b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">一些位置类别是新的。有些在训练中很少见，但变得越来越频繁。</p><p id="0f85" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们过滤我们的数据，看得更远。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/c8ba17976bc72e836c6eae66e77ec5b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*daATVWEVXVFOvEx_UmbwMg.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片作者。</p></figure><p id="056b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">也许这意味着丢弃大约 40%的数据。现在让我们看看还剩下什么！</p><p id="c9c6" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">事实证明，其余的分布是稳定的，类似于训练。按位置过滤有助于我们隔离所有新奇的东西！</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/b9ce2faaa7e25c25c306bbfae2eb1d25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_P1N6hcyaZqA2WPkC0SFVA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片作者。</p></figure><p id="d00b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">然后，我们可以决定预测路线。</p><p id="989b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对于频繁的、已知的用户位置，我们可以依赖该模型。对于其余的，我们可以设计一些启发。在一个个性化的例子中，营销团队可能会提出人工策划的推荐，或者我们可以求助于“最受欢迎的”列表。</p><p id="3dfb" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">在制造过程控制示例</strong>中，我们可能会发现漂移与新的原材料供应商有关。</p><p id="66ba" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">当生产批次被使用时，我们可以挑选出来。对于这些更复杂的情况，我们可以依靠运营商的决定。一旦收集到足够多的新标记数据，我们将更新模型。</p><p id="429d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">当然，如果您能够访问新的标签，并且能够评估实际的模型质量，那么查找和定义低性能的部分将会更加可靠。</p><p id="c245" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">例如，您可以直接按性能对有意义的部分进行排名，或者<a class="ae ma" href="https://evidentlyai.com/blog/evidently-016-regression-model-performance" rel="noopener ugc nofollow" target="_blank">探索具有最高模型误差</a>的区域。下面是我们如何对一个<a class="ae ma" href="https://evidentlyai.com/blog/tutorial-2-model-evaluation-hr-attrition" rel="noopener ugc nofollow" target="_blank">员工流失模型</a>进行分析的。</p><p id="4cae" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">如果这不起作用呢？你可以在上面试试别的东西。</strong></p><h1 id="bfdf" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">8.在模型之上应用业务逻辑</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/d74d499bb2fc24c909a6c261bcba36bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8SsgRv6h0G0LyIh1MNhUrQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片作者。</p></figure><p id="5e96" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在这个选项中，您可以在模型预测的基础上进行调整，或者更改应用程序逻辑。</p><p id="d82d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">有不同的方法可以做到这一点。这种方法的缺点是很难推广。怀着最美好的愿望，我们可能最终只会让事情变得更糟。</p><p id="c75c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">由建模师和领域专家来决定。</p><p id="49f2" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这里有几个例子。</p><p id="a37c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">输出的手动校正。这在需求预测中很常见。</strong></p><p id="15c5" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">即使在一个“普通”的模型应用程序过程中，您也经常有一组针对特定项目、类别和区域的复杂业务规则。您可能习惯于调整模型预测来说明促销活动、营销活动和已知事件。</p><p id="c13d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">例如，DoorDash 依靠<a class="ae ma" href="https://doordash.engineering/2021/02/24/why-good-forecasts-treat-human-input-as-part-of-the-model/" rel="noopener ugc nofollow" target="_blank">结合专家判断和机器学习</a>进行需求预测。</p><p id="b78b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">鉴于数据或概念的漂移，您可以在模型输出的基础上应用新的修正。例如，对于给定的类别，您可以将模型输出更改 X%,或者设置最小或最大值，以确保业务流程不受影响。</p><p id="b194" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">慎用！</p><p id="a142" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">为分类问题设置新的决策阈值是可能的。</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/9028cb1a365fe791327e6d04bd3964bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JY5AETMGejEr8MFuiYy6ng.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片作者。</p></figure><p id="c7a8" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">通常模型输出是一个概率。它说一个客户的流失率可能是 80%，另一个是 60%。</p><p id="c27a" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">您可以在这里控制决策阈值。例如，只有当预测概率高于 50%、80%、甚至 95%时，您才可以决定分配标签“客户流失”。我们在<a class="ae ma" href="https://evidentlyai.com/blog/tutorial-2-model-evaluation-hr-attrition" rel="noopener ugc nofollow" target="_blank">教程中探讨了员工流失的含义</a>。</p><p id="5603" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果您的数据正在漂移，您可能会决定改变这一点。例如，将阈值设置得比以前高。</p><p id="f6b0" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">你可以在假设模型校准良好的情况下做到这一点，并且可以依赖更高的预测概率。或者你可以通过限制联系的客户数量来限制浪费保留预算可能造成的损失。</p><p id="cce0" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在单独的工作流程中处理异常值是限制错误的另一种方法。</p><p id="eec6" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们最近讨论了<a class="ae ma" href="https://evidentlyai.com/blog/ml-monitoring-drift-detection-vs-outlier-detection" rel="noopener ugc nofollow" target="_blank">漂移和异常值检测</a>之间的区别。离群值侧重于检测单个“不同”的数据点。</p><p id="388c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果您在不断变化的环境中操作，您可能会决定即使存在漂移也要保持模型运行。相反，添加一个单独的工作流来尝试“捕捉”模型可能无法处理的最奇怪的输入。</p><p id="eda9" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">例如，您可以设置一个检测器来发现最不同或最新颖的输入。然后，您可以发送它们进行人工处理。或者，在这种情况下，您做出了根本不显示模型预测的设计决定。</p><h2 id="b2d4" class="nh mc iq bd md ni nj dn mh nk nl dp ml ln nm nn mn lr no np mp lv nq nr mr iw bi translated"><strong class="ak">这种手动调整很少是精确的。小心地根据可用的基线来权衡风险和不利因素。</strong></h2><p id="529c" class="pw-post-body-paragraph le lf iq lg b lh ns ka lj lk nt kd lm ln nu lp lq lr nv lt lu lv nw lx ly lz ij bi translated">在我们总结这些选择之前，让我们走一个小弯路。</p><h1 id="d78c" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">数据漂移:前传</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/64f7d909d0b60e34a87a5ffb15212c67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jTrNOuWIbcGvYiO-45QS-g.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片作者。</p></figure><p id="6d4f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们以这个问题开始这个博客:当你注意到漂移时该怎么办？</p><p id="06b8" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在理想世界中，你最好反过来。先考虑可能的动作，再设计漂移检测框架。</p><p id="e3bc" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">没有一个单一的、普遍的“漂移”事件会发生在机器学习系统上，并促使你做出反应。模型创建者定义需要提醒的变化程度以及如何对其采取行动。</p><p id="fd55" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">首先，评估模型上下文。</strong>数据背后的真实世界流程是怎样的？你到底期望它如何改变？</p><p id="10da" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">接下来，决定模型有多重要。</strong>你是在乎小波动还是只在乎大转变？什么是“重大”转变:一个模型失败会让你付出多少代价？</p><p id="b91d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">然后，考虑选项。</strong>你什么时候拿到新标签来更新型号？有没有可供选择的模型或系统可以让你做出决定？上面的想法适合维护工作流程吗？</p><p id="f677" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">之后，回过头来设计漂移检测工作流、指标和阈值。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/f787dd91c65c40552b804b92bce6f579.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8zbl__viucrQ6MRNfoGdRg.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片作者。</p></figure><p id="fb9e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">例如，您可能<strong class="lg ja">根本不需要查看分布漂移</strong>。如果你得到真实标签的速度足够快，你可以直接计算模型质量。如果您主要关心损坏的输入，您可以进行基于规则的数据验证检查。</p><p id="5a5e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">另一方面，如果您有延迟的基本事实、关键用例以及您可以很好解释的特性，您可能有一个<strong class="lg ja">详细的数据漂移检测</strong>仪表板和一整套统计测试要运行。</p><p id="bdc9" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这里有很多变化。</p><p id="5d07" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">你可以设计一个由重要性加权的单个特征组成的自定义漂移函数。或者，简单地看看你最关心的前 5 个特性。</p><p id="7d09" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">你可以<strong class="lg ja">选择一个统计测试</strong>来更好地适应特定的特征分布。或者监控某些特征之间的相关性，因为这对领域专家来说是有意义的。</p><p id="0f69" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">你可能<strong class="lg ja">不介意漂移的假阳性</strong>警报，因为模型是至关重要的。或者，您只想在它完全损坏时得到通知。</p><p id="5de2" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">以及两者之间的一切。</p><h1 id="19f0" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">总结</h1><p id="0972" class="pw-post-body-paragraph le lf iq lg b lh ns ka lj lk nt kd lm ln nu lp lq lr nv lt lu lv nw lx ly lz ij bi translated">漂移监控系统的设计至关重要。确保您设置警报的方式与可能的操作一致。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/7bc164fc32909b618753abdd907648a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0M3jC3RyLeWLA97OjBN-YQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片作者。</p></figure><p id="1239" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果检测到漂移，您可以采取以下措施:</p><ol class=""><li id="7cf4" class="mt mu iq lg b lh li lk ll ln mv lr mw lv mx lz nx mz na nb bi translated"><strong class="lg ja">检查数据质量。确保漂移是真实的。</strong></li><li id="bd64" class="mt mu iq lg b lh nc lk nd ln ne lr nf lv ng lz nx mz na nb bi translated"><strong class="lg ja">调查。</strong>探究数据变化，了解导致数据变化的原因。</li><li id="19cf" class="mt mu iq lg b lh nc lk nd ln ne lr nf lv ng lz nx mz na nb bi translated"><strong class="lg ja">什么都不做。</strong>你可能会认为这是一个假警报，对模型处理漂移的方式感到满意，或者干脆决定等待。</li><li id="446d" class="mt mu iq lg b lh nc lk nd ln ne lr nf lv ng lz nx mz na nb bi translated">如果可以的话，再培训一下。获取新的标签和实际值，并根据最新数据重新拟合相同的模型。根据需要放弃旧的。</li><li id="7a86" class="mt mu iq lg b lh nc lk nd ln ne lr nf lv ng lz nx mz na nb bi translated">如果需要的话，重建它。如果变化很大，您可能需要重建培训管道并测试新的模型架构。</li><li id="9db0" class="mt mu iq lg b lh nc lk nd ln ne lr nf lv ng lz nx mz na nb bi translated"><strong class="lg ja">使用回退策略。</strong>不用机器学习做决定。</li><li id="d83b" class="mt mu iq lg b lh nc lk nd ln ne lr nf lv ng lz nx mz na nb bi translated"><strong class="lg ja">限制型号使用。</strong>找出并排除表现不佳的细分市场。</li><li id="7ebe" class="mt mu iq lg b lh nc lk nd ln ne lr nf lv ng lz nx mz na nb bi translated"><strong class="lg ja">添加自定义处理逻辑。</strong>添加校正系数，更改决策阈值，审查异常值。请小心使用。</li></ol></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><p id="5609" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">有一个关于生产机器学习的问题？</strong>加入我们的<a class="ae ma" href="https://discord.com/invite/xZjKRaNp8b" rel="noopener ugc nofollow" target="_blank">不和谐社区</a>，在<em class="of"> #ds-ml-questions </em>频道提问。</p></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><p id="0b52" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><em class="of">本博客最初发表于</em><a class="ae ma" href="https://evidentlyai.com/blog/ml-monitoring-data-drift-how-to-handle" rel="noopener ugc nofollow" target="_blank"><em class="of">https://evidentlyai.com</em></a><em class="of">。感谢我的联合创始人</em><a class="ae ma" href="https://twitter.com/emelidral" rel="noopener ugc nofollow" target="_blank"><em class="of">Emeli Dral</em></a><em class="of">共同撰写了这篇文章。</em></p><p id="2cea" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><em class="of">在 appeally AI，我们创建了开源工具来分析和监控机器学习模型。在 GitHub </em>  <em class="of">上查看我们的</em> <a class="ae ma" href="https://github.com/evidentlyai/evidently" rel="noopener ugc nofollow" target="_blank"> <em class="of">项目，喜欢就给它一颗星！</em></a></p><p id="cfc3" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">想留在圈子里吗？</p><ul class=""><li id="2bd4" class="mt mu iq lg b lh li lk ll ln mv lr mw lv mx lz my mz na nb bi translated"><a class="ae ma" href="https://evidentlyai.com/blog/ml-monitoring-drift-detection-vs-outlier-detection#signup" rel="noopener ugc nofollow" target="_blank"> <em class="of">报名</em> </a> <em class="of">获取我们的快讯。</em></li><li id="707c" class="mt mu iq lg b lh nc lk nd ln ne lr nf lv ng lz my mz na nb bi translated"><em class="of">关注</em><a class="ae ma" href="https://twitter.com/EvidentlyAI" rel="noopener ugc nofollow" target="_blank"><em class="of">Twitter</em></a><em class="of">和</em><a class="ae ma" href="https://www.linkedin.com/company/evidently-ai/" rel="noopener ugc nofollow" target="_blank"><em class="of">Linkedin</em></a><em class="of">。</em></li><li id="d986" class="mt mu iq lg b lh nc lk nd ln ne lr nf lv ng lz my mz na nb bi translated"><em class="of">加入我们的</em> <a class="ae ma" href="https://discord.gg/xZjKRaNp8b" rel="noopener ugc nofollow" target="_blank"> <em class="of">不和谐社区</em> </a> <em class="of">来聊天联系吧。</em></li></ul></div></div>    
</body>
</html>