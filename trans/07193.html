<html>
<head>
<title>Create a Dashboard to Track Anything With Plotly And Dash</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建一个仪表板来跟踪任何与Plotly和Dash</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/create-a-dashboard-to-track-anything-with-plotly-and-dash-f9a5234d548b?source=collection_archive---------1-----------------------#2021-06-30">https://towardsdatascience.com/create-a-dashboard-to-track-anything-with-plotly-and-dash-f9a5234d548b?source=collection_archive---------1-----------------------#2021-06-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f7b1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">或者“我如何停止使用第三方应用程序来跟踪我的投资”！自己的模板真的很容易上手。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c532ac34548ac8073c7a716657d4f9fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-9FgQrCfkIHqmZcT0Wyr8Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">剧透警告:这不是我的实际投资组合！</p></figure><h1 id="854a" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">早期的探索</h1><p id="73e9" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">自从我开始投资我的血汗钱，我就痴迷于拥有某种仪表板或工具，让我能够快速了解事情的进展。</p><p id="16f5" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我对Excel并不陌生，我曾经有一个交易日志，很快就变得太无聊而无法填写…还有一些工作涉及到标准化来自我当时使用的两个经纪人的交易数据，这没有帮助。</p><p id="70e0" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">所以在浪费了一些时间尝试定制一些有趣的仪表盘和在线模板后，我得出结论:<strong class="ls iu"> Python </strong>是我的最佳选择！</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><blockquote class="my mz na"><p id="1d08" class="lq lr nb ls b lt mm ju lv lw mn jx ly nc mo mb mc nd mp mf mg ne mq mj mk ml im bi translated"><strong class="ls iu">请注意:</strong>投资组合数据仅仅是一个例子，但是<strong class="ls iu">我们将创建的模板可以非常容易地适应其他数据— </strong>我将向您展示如何实现。本文中的任何内容都不应被视为财务建议！</p></blockquote></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><p id="34aa" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我已经知道我想要看到什么样的指标和图表，所以这帮助我在头脑中已经有了几个目标的情况下开始这个项目。从一开始，我就设想在我的仪表板上至少有两页纸。主页面会给我一个投资组合总价值的视图，而第二个页面会让我浏览每只股票的进出情况。</p><blockquote class="my mz na"><p id="1063" class="lq lr nb ls b lt mm ju lv lw mn jx ly nc mo mb mc nd mp mf mg ne mq mj mk ml im bi translated">我能想到十几个这样的应用程序，但通常你必须付费才能使用这些很酷的功能…</p></blockquote><p id="e5b7" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">那么，为什么不构建您自己的仪表盘并根据您的需求进行定制呢？我将帮助你开始布局和基本功能，我们将看看我们如何能发展它。在跳到仪表板之前，我们需要做一些预处理，但我保证这是值得的！</p><p id="a963" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">可以跟着<strong class="ls iu">笔记本里面的</strong> <a class="ae nf" href="https://github.com/fnneves/portfolio_tracker_medium" rel="noopener ugc nofollow" target="_blank"> <strong class="ls iu">资源库</strong> </a>一起看。我还<strong class="ls iu">录制了一个教程</strong>，在那里我可能会更详细地解释一些部分。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="b1cf" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated"><em class="nb">如果你想要一个更高级的仪表盘来分析你的投资组合，我推荐你参加</em> <a class="ae nf" href="https://skl.sh/3Lne3uw" rel="noopener ugc nofollow" target="_blank"> <em class="nb">高级课程</em> </a> <em class="nb">！</em></p><p id="acc0" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated"><em class="nb">如果你是Python和Plotly的新手，我有自己的</em> <a class="ae nf" href="https://bit.ly/3pRICk4" rel="noopener ugc nofollow" target="_blank"> <em class="nb">免费Plotly速成班</em> </a> <em class="nb">让你快速上手！</em></p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="b4f4" class="ky kz it bd la lb ni ld le lf nj lh li jz nk ka lk kc nl kd lm kf nm kg lo lp bi translated">准备我们有史以来最好的仪表板</h1><p id="57c7" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">对于这个项目，我决定混合使用Plotly、Dash和一些引导主题。有了Python的一些基本概念，您应该能够很快理解并构建自己的仪表板！我现在将把重点放在主页上，因为已经做了很多工作。</p><p id="d885" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">以下是我们今天的目标:</p><ul class=""><li id="58c1" class="nn no it ls b lt mm lw mn lz np md nq mh nr ml ns nt nu nv bi translated">准备交易和股票价格</li><li id="6780" class="nn no it ls b lt nw lw nx lz ny md nz mh oa ml ns nt nu nv bi translated">我们全球投资组合价值随时间变化的图表</li><li id="cd7a" class="nn no it ls b lt nw lw nx lz ny md nz mh oa ml ns nt nu nv bi translated">对比我们与S&amp;P500的回报</li><li id="2477" class="nn no it ls b lt nw lw nx lz ny md nz mh oa ml ns nt nu nv bi translated">多个KPI，如7D/15D/30D/YTD绩效</li><li id="ae29" class="nn no it ls b lt nw lw nx lz ny md nz mh oa ml ns nt nu nv bi translated">我们投资组合中的顶级股票</li><li id="a6e4" class="nn no it ls b lt nw lw nx lz ny md nz mh oa ml ns nt nu nv bi translated">用Dash和Plotly创建我们仪表板的第一个版本</li></ul><p id="329e" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">为了获得所有这些信息，我们需要我们的交易历史和我们交易的股票的历史价格。</p><div class="ob oc gp gr od oe"><a href="https://medium.com/@fneves/membership" rel="noopener follow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">阅读媒体上的每一个故事！</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">medium.com</p></div></div><div class="on l"><div class="oo l op oq or on os ks oe"/></div></div></a></div><h2 id="ec8e" class="ot kz it bd la ou ov dn le ow ox dp li lz oy oz lk md pa pb lm mh pc pd lo pe bi translated">交易—2.0版</h2><p id="ab73" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我们首先从我们的代理导出交易历史(希望您也能以CSV格式获得它)。然后，我们需要获取该表并计算一些额外的列。大多数情况下，您会看到常见的“日期、股票、买入/卖出、价格、价值”列，我会添加其他列，如股票的累计头寸和累计成本、交易损益等。</p><p id="8987" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">这些计算是一个独立项目的一部分，我有一个python脚本来完成它。代码有点难解释，但是我已经把它作为我准备的整个项目的<strong class="ls iu">课程的一部分。<a class="ae nf" href="https://fneves.podia.com/dashboards-plotly-dash" rel="noopener ugc nofollow" target="_blank">稍后会有更多信息</a>。</strong></p><p id="e59d" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">尽管如此，我还是在<a class="ae nf" href="https://github.com/fnneves/portfolio_tracker_medium" rel="noopener ugc nofollow" target="_blank"> <strong class="ls iu">存储库</strong> </a>中包含了一个改进的事务历史的工作示例。您可以使用它来帮助您计算自己的增强数据集。</p><p id="20c2" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">因此，从存储库中获取代码，首先确保您拥有所有必需的包并导入它们。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf nh l"/></div></figure><h2 id="cdec" class="ot kz it bd la ou ov dn le ow ox dp li lz oy oz lk md pa pb lm mh pc pd lo pe bi translated">收集价格</h2><p id="b140" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">第二部分相对简单，我将向您展示如何快速获得任何股票的价格历史。你甚至可以保存价格，以后再用，或者你可以进行一次强迫症的冒险，开始用1分钟蜡烛建立你自己的数据库！</p><p id="ba6d" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">这部分我准备用一个在其他文章里看到很多的知名包！它叫<a class="ae nf" href="https://pypi.org/project/yfinance/" rel="noopener ugc nofollow" target="_blank"> yfinance </a>，真的很好用，还有<a class="ae nf" href="https://pypi.org/project/pandas-datareader/" rel="noopener ugc nofollow" target="_blank">熊猫datareader </a>。在用下面的日期变量定义了我们分析的开始之后，我们可以创建并运行函数<em class="nb"> get_prices </em>，如下所示。</p><p id="01d8" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我建议从一两年前开始，然后尝试从1920年开始每天都点蜡烛。你交易历史中的股票越多，提取它们的时间就越长，但通常很快。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf nh l"/></div></figure><p id="a1d6" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">完成后，您将获得一个名为<em class="nb"> all_data </em>的变量，它本质上是一个数据框架，包含每个股票及其日线图的多索引。</p><p id="ab1a" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我们会马上把它变成一本字典，使它更容易与我们的交易历史信息合并。</p><h2 id="a792" class="ot kz it bd la ou ov dn le ow ox dp li lz oy oz lk md pa pb lm mh pc pd lo pe bi translated">“团结”和征服</h2><p id="3b56" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">这是我们把头寸规模和股价放在一起的部分。这使我们能够获得全球<strong class="ls iu">投资组合价值</strong>和其他重要指标。</p><p id="eee2" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">关于Python <strong class="ls iu">字典</strong>的一个很酷的事情是，你可以创建一个循环来给它们提供几个数据帧，这非常方便，因为你可以稍后只使用mega_dict['AAPL']调用一个特定的ticker。下面，我将遍历过滤后的报价器列表中的每一个报价器，并在没有交易的日子里填补空白。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf nh l"/></div></figure><p id="861b" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">看看那本词典中的任何一个关键词，看看有什么信息。每个列名都以ticker开头，所以我们以后可以使用它。</p><p id="0f02" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我们还需要包含“mktvalue”的每一列来计算我们投资组合的总价值<strong class="ls iu">。出于这个原因，我们还需要一个漂亮的数据框架，其中包含每个股票的所有列。你猜对了——它叫<em class="nb"> mega_df </em>！</strong></p><h2 id="6701" class="ot kz it bd la ou ov dn le ow ox dp li lz oy oz lk md pa pb lm mh pc pd lo pe bi translated">有价值的专栏</h2><p id="949c" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">为了获得代表每只股票在任何给定日期的市场价值的每一列，我们使用一个过滤器，然后<strong class="ls iu">对每行</strong>中的所有值求和。“portf_value”列现在是您的全球投资组合价值。</p><p id="ace0" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">获取S&amp;P500的价格也很简单，我们可以将它与之前的数据框架结合起来。我们已经可以计算一些有用的东西，比如每日百分比变化，以及价值差异。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf nh l"/></div></figure><p id="8c2c" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我在下面添加了一些额外的指标，我计划稍后在我们的仪表板上使用，作为我们指标部分的一部分。</p><h1 id="4307" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">用Plotly绘制我们自己的图表</h1><p id="410c" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">如果你有使用matplotlib的经验，Plotly可能看起来很奇怪。对我来说是，当我开始的时候！但事实是，您可以创建交互式图表，然后将它们与Dash这样的框架结合起来，以生成真正强大的仪表板。</p><p id="9b5c" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">Dash使用Flask做后端(在你的电脑上创建一个本地服务器，用dashboard本身托管一个“页面”)，所以如果你已经了解Flask，你肯定有优势。对HTML如何工作的一些基本理解可能也会派上用场。</p><p id="7002" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">但在我看来，这个项目最棒的部分是这个布局可以回收用于不同的项目。当我在做这个的时候，我实际上做了一些调整，以便能够跟踪我的加密组合。如果你感兴趣，请在评论中告诉我！</p><p id="ff4d" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">对于Seaborn的粉丝来说，Plotly乍一看可能显得过于简单和局限。不要让他们网站上的3行示例欺骗了你…有很多你可以定制的。为了供您参考，我将留下一些我经常使用的设置，您应该有一个很好的起点来尝试这些设置。</p><h2 id="b386" class="ot kz it bd la ou ov dn le ow ox dp li lz oy oz lk md pa pb lm mh pc pd lo pe bi translated">投资组合价值</h2><p id="4a30" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我喜欢让代码保持整洁，所以我将创建一个新的数据框架，我们可以参考这个特定的图表。我还将定义一个开始日期，以使图表更加清晰。</p><p id="c46e" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">不要害怕评论和编辑这些参数。您可以简单地按照逻辑顺序分解更新<strong class="ls iu">。</strong>我留下了几行，在那里我改变了布局边距，或者布局高度，以及其他。</p><p id="6a58" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">解决这个问题的一个好方法是记住每个图表都是以一个<strong class="ls iu">图形</strong>对象开始的。一旦你声明了那个变量，你就向它添加了元素，比如图表。您还可以添加新的行来添加更多的内容，包括对其格式的更改。完成定制后，运行“show()”方法来显示图表。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf nh l"/></div></figure><p id="80c0" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">现在看起来有点“赤裸裸”，但我更喜欢以后将标题作为HTML元素添加进去。当我们开始冲刺时，我会告诉你怎么做。随意取消示例中标题更新的注释(第30行)，看看它是如何显示的。使用这段代码，我们刚刚创建了第一个仪表板图表。检查如何交互式地选择图表的特定部分！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/aec3f6c36856e6ba849c4a3fca862121.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wUQET9up6U44xVHnlGz-Rg.png"/></div></div></figure><p id="c8a5" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我希望代码中的<strong class="ls iu">注释</strong>容易理解，但是如果你迷路了，或者想尝试更高级的东西，一定要去他们的<a class="ae nf" href="https://plotly.com/python/" rel="noopener ugc nofollow" target="_blank">网站</a>。他们有大量的例子供你探索！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/0da4e317f18619d186bb25d918775051.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*41tHZPpxfG-WkF-9BMIvmw.png"/></div></div></figure><h2 id="9a55" class="ot kz it bd la ou ov dn le ow ox dp li lz oy oz lk md pa pb lm mh pc pd lo pe bi translated">对比我们与S&amp;P500的增长</h2><p id="f986" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">对于我们的第二个图表，我们将<strong class="ls iu">比较我们的月收益和S &amp; P500收益</strong>。我打算在这里使用日线时间框架，但是如果你有超过几个月的交易，柱线会变得很小。因此，我不得不为这个图表设计一个新的列，并进行一些操作来为我们的下一个Plotly图表获得正确的格式。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf nh l"/></div></figure><p id="f9ce" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">一旦我们得到了新的数据框架，就很容易创建一个条形图。如果你花一些时间浏览代码，请注意我们正在做和以前一样的事情。首先，我们声明一个Figure对象变量。</p><p id="bfc8" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">然后我们给它添加两条迹线，这将是我们图表中的系列。然后，我们用一些额外的线条使图表看起来更好。不要忘记使用“barmode”作为<em class="nb">组</em>(第27行)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/baab90d4b7dc4d791399201a0a9cb4be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wiagdBBKD6GTGSH1a86pfg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在X轴上使用“时间周期”变量</p></figure><h2 id="b360" class="ot kz it bd la ou ov dn le ow ox dp li lz oy oz lk md pa pb lm mh pc pd lo pe bi translated">KPI卡</h2><p id="9f40" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">这部分将给你的仪表板一个非常漂亮的触感。我希望能够看到我的投资组合相对于标准普尔的表现。我将在下一个数字中添加四个元素。这些被称为指示器，如果你喜欢仪表和速度计，文档中也有一些。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/b3b1d483e736d4791163e2fdcec9b634.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*-YmdFSpVbMWXt_qtovefow.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">请注意，底部的数字是“百分点”</p></figure><p id="279b" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">这四个要素将包含我们投资组合在7、15、30和200天内的表现。</p><p id="b8ce" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">另外，我将为每个元素添加一个delta参数，参考标准普尔指数相同的时间框架表现。</p><p id="d4f1" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果您使用“数字+增量”模式，我们的指示器将显示我们的性能，并与我们的参考进行比较。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf nh l"/></div></figure><p id="c1f8" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">出于本文的目的，我将添加与S&amp;P性能相同的四个元素，但是这里没有增量。这两列稍后将并排显示在我们的仪表板上！</p><h2 id="fb01" class="ot kz it bd la ou ov dn le ow ox dp li lz oy oz lk md pa pb lm mh pc pd lo pe bi translated">我们投资组合中的顶级股票</h2><p id="b28f" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">这篇文章已经有点长了，但是我觉得我还需要给你看一样东西！根据你持有的股票数量，你可能想看看你持有的最多的股票是什么。这是我们主页的另一个很酷的功能，但是我们必须获得<strong class="ls iu">当前价格</strong>才能计算我们的<strong class="ls iu">当前头寸</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/08680c2367a9cf8a71971d070cef0db1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FtLsqEqJ_LlbDvZ6j4ygRQ.png"/></div></div></figure><p id="cdf8" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">出于多样性的考虑，我将分享一种不同的获取股票信息的方法——这次是“常规市场价格”。这是一个简单的循环，使用了<em class="nb"> yfinance </em>包，但这不是最有效的方法，因为它在返回我们需要的信息之前，为每个股票获取了大量信息。</p><p id="62d1" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">尽管如此，请随意使用它进行试验，并获取更多的信息，如部门和行业信息，我将在下一篇文章中介绍。</p><blockquote class="my mz na"><p id="60c9" class="lq lr nb ls b lt mm ju lv lw mn jx ly nc mo mb mc nd mp mf mg ne mq mj mk ml im bi translated">如果你想让这个仪表板更上一层楼，我准备的课程可能会让你感兴趣。<a class="ae nf" href="https://fneves.podia.com/dashboards-plotly-dash" rel="noopener ugc nofollow" target="_blank">在此查看更多详情</a>！</p></blockquote><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf nh l"/></div></figure><p id="80e7" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">快速提示:如果你和我一样，只是不能忍受饼图，我决定给这个一个转折，把它变成一个甜甜圈。你可以用参数“孔”来达到这个效果。不客气！</p><h1 id="9bdb" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">用破折号组合所有元素</h1><p id="1c21" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated"><em class="nb">快到了！</em></p><p id="4f2a" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">现在，我们已经拥有了仪表板第一部分所需的所有图表，并准备将它们放入Dash应用程序中。</p><p id="8869" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果你是Dash的新手，就把它想象成一个在你的电脑上运行的服务器，它<strong class="ls iu">在那个服务器上托管一个网页</strong>，上面有你发送到那里的<em class="nb">信息</em>。您可以通过您最喜欢的浏览器访问它，运行方法"<strong class="ls iu">"时它会提供链接。run_server() </strong>”。</p><p id="ac69" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">使该页面看起来像仪表板的最简单的方法是使用<a class="ae nf" href="https://hellodash.pythonanywhere.com/" rel="noopener ugc nofollow" target="_blank"> Bootstrap </a>模板(带有许多样式选项的预建模板)，并将Plotly图表添加到Dash应用程序中。您将能够像编写网页一样编写代码，向其中添加组件，采用块结构—就像HTML一样。</p><p id="8cbe" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我在 <a class="ae nf" href="https://youtu.be/wYvx8K-nzg4" rel="noopener ugc nofollow" target="_blank"> <strong class="ls iu">视频</strong> </a>中回顾了一些技术方面的内容<strong class="ls iu">，但你需要记住的主要事情是，我们仪表盘上的所有组件都在一个<strong class="ls iu">容器</strong>内。</strong></p><p id="8f59" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">这个容器可以有行和列。每行和每列都可以包含多个组件(HTML、Dash核心组件(dcc)、Dash引导组件(dbc))。最后，一个组件可以是一个简单的文本段落，或者一个标题，一个图表(像plotly图表)，一个下拉菜单，以及许多其他东西。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/3721ab76409885c8c8835675b42619ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UsTHfIhzoUIQxVZRe7PEpg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这将是我们的网格。绿色的三个主要行，以及第2行和第3行的一些列</p></figure><p id="9d3b" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">Dash甚至允许您使用回调函数，这将使仪表板<strong class="ls iu">对用户输入做出响应</strong>，如选择日期、切换、下拉菜单中的项目以及许多其他事情。<strong class="ls iu">这些特性将在下一篇文章</strong>中添加，因此用户可以更改日期，例如选择特定的股票进行分析。</p><p id="9d9d" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">再看一下我们正在创建的网格，然后看看下面的代码。你应该很容易找到这三行(第5行、第7行和第31行)。</p><p id="52b1" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">这是告诉您<strong class="ls iu">行在</strong>列之前的最佳时机。如果你反过来做，你会得到一些错误！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf nh l"/></div></figure><p id="6c41" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果这是你的第一个Dash教程，我知道这可能是一个令人生畏的代码片段！如果你不能理解每一句话，试着去读每一行<strong class="ls iu">甚至</strong>。如果你能把它和我放在上面的仪表盘或布局图并排比较，会有所帮助。</p><p id="6acd" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果你喜欢黑暗模式，你可以很快改变主题。在第1行，我使用Bootstrap的内置FLATLY主题。这个网站有一个很酷的方式来查看所有可用的主题。你只需要把名字改成你想尝试的(比如MINTY，SLATE等。)—但为此您需要<a class="ae nf" href="https://dash-bootstrap-components.opensource.faculty.ai/" rel="noopener ugc nofollow" target="_blank">dash _ bootstrap _ components</a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/77932923e09bc5d79d39d49cd7acc4fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TBCSM3m83n6tUDyq2MsKuw.png"/></div></div></figure></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="21f6" class="ky kz it bd la lb ni ld le lf nj lh li jz nk ka lk kc nl kd lm kf nm kg lo lp bi translated">下一步是什么？</h1><p id="2835" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我们现在有了自己的仪表板，可以快速查看我们的全球投资组合。在下一篇文章中，我们将使这个页面<strong class="ls iu">与</strong>交互，并且<strong class="ls iu">添加一个侧边栏</strong>以便能够移动到我们的<strong class="ls iu">第二个页面</strong>。我提到我还想<strong class="ls iu">查看每只股票</strong>并获得一些关于其表现的指标，所以我们会处理好的。最后，我希望获得有关行业和部门的信息，以便能够分别绘制图表。</p><p id="de14" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果你想更多地了解Dash，并学习如何基于这个项目建立一个仪表板，<a class="ae nf" href="https://fneves.podia.com/dashboards-plotly-dash" rel="noopener ugc nofollow" target="_blank"> <strong class="ls iu">留下你的电子邮件</strong> </a> <strong class="ls iu">，我会让你知道我的新课程何时准备好</strong>。我正在录制视频和创建代码的痛苦过程中，但这将是一个有很多例子和我自己的预处理功能(如交易数据集的额外列)的<strong class="ls iu">完整项目</strong>。</p><blockquote class="pm"><p id="8903" class="pn po it bd pp pq pr ps pt pu pv ml dk translated">我确信在发布之前我需要一些反馈，所以有机会我会请你们中的一些人来回顾一下<strong class="ak">！</strong></p></blockquote><p id="4d3b" class="pw-post-body-paragraph lq lr it ls b lt pw ju lv lw px jx ly lz py mb mc md pz mf mg mh qa mj mk ml im bi translated">如果一切按计划进行，我会添加如下功能:</p><ul class=""><li id="e0f9" class="nn no it ls b lt mm lw mn lz np md nq mh nr ml ns nt nu nv bi translated">为交互性添加日期选择器</li><li id="c97d" class="nn no it ls b lt nw lw nx lz ny md nz mh oa ml ns nt nu nv bi translated">该仪表板的新页面，我们可以在其中选择一只股票</li><li id="fe58" class="nn no it ls b lt nw lw nx lz ny md nz mh oa ml ns nt nu nv bi translated">关键指标，如PnL、累计损益、真实值。/不真实。等等</li><li id="924a" class="nn no it ls b lt nw lw nx lz ny md nz mh oa ml ns nt nu nv bi translated">烛台价格图表显示交易和我们的平均成本线</li><li id="1c2b" class="nn no it ls b lt nw lw nx lz ny md nz mh oa ml ns nt nu nv bi translated"><strong class="ls iu">烛台模式识别</strong>和回溯测试——这太棒了！</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="368a" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我希望你喜欢这个教程，甚至可能在你自己的项目中使用这个模板。</p><p id="733c" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果你对这里的任何部分感到困惑，不要忘记观看视频教程<a class="ae nf" href="https://youtu.be/wYvx8K-nzg4" rel="noopener ugc nofollow" target="_blank">！</a></p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><p id="095d" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated"><em class="nb">感谢您的阅读！一如既往，我欢迎反馈和建设性的批评。如果你想取得联系，可以在这里联系我</em><a class="ae nf" href="https://www.linkedin.com/in/fabioneves/" rel="noopener ugc nofollow" target="_blank"><strong class="ls iu"><em class="nb"/></strong></a><a class="ae nf" href="https://twitter.com/fnsnows" rel="noopener ugc nofollow" target="_blank"><strong class="ls iu"><em class="nb">推文</em></strong></a><em class="nb">或者回复下面的文章。</em></p></div></div>    
</body>
</html>