<html>
<head>
<title>SAP Data Analytics in the Google Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌云中的SAP数据分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/sap-data-analytics-in-the-google-cloud-3a08b10dc0a6?source=collection_archive---------44-----------------------#2021-07-01">https://towardsdatascience.com/sap-data-analytics-in-the-google-cloud-3a08b10dc0a6?source=collection_archive---------44-----------------------#2021-07-01</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="43de" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">如何将SAP与谷歌云平台相结合</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/ac97a7a757f1bcaf7244edc95a837a57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YzYgrF10h3cAetyHfF8x3g.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">克里斯蒂安·卢在<a class="ae kz" href="https://unsplash.com/s/photos/nature?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="3c03" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如何将SAP与谷歌云平台(BigQuery、Data Studio或recently looker等强大数据分析工具的提供商)相结合，以获得强大的数据分析平台和宝贵的见解。如果您对SAP数据的实用数据分析方法感兴趣，<a class="ae kz" href="https://medium.com/@christianlauer90/sap-data-analytics-examples-for-internal-audit-financial-tax-accounting-and-controlling-analysis-1fbc81d01eac" rel="noopener">这篇文章</a>可能也会让您感兴趣。</p><h2 id="e72b" class="lw lx iu bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">建造一座建筑</h2><p id="79b3" class="pw-post-body-paragraph la lb iu lc b ld mp jv lf lg mq jy li lj mr ll lm ln ms lp lq lr mt lt lu lv in bi translated">SAP HANA已经内置了SAP数据服务，因此您可以轻松地将数据从SAP应用程序或其底层数据库导出到BigQuery[1]。然而，GCP和思爱普的结合对于那些仍然生活在ERP世界中的公司来说也是可能的。</p><p id="73d8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">以下几点显示了将数据从SAP加载到Google Services的可能性:</p><ul class=""><li id="34a7" class="mu mv iu lc b ld le lg lh lj mw ln mx lr my lv mz na nb nc bi translated">使用talend/Google data flow/等数据集成工具，通过RFC(远程函数调用)接口提取数据。</li><li id="0a78" class="mu mv iu lc b ld nd lg ne lj nf ln ng lr nh lv mz na nb nc bi translated">编写ABAP程序</li><li id="9fa4" class="mu mv iu lc b ld nd lg ne lj nf ln ng lr nh lv mz na nb nc bi translated">fivetran等第三方连接器</li><li id="5c1c" class="mu mv iu lc b ld nd lg ne lj nf ln ng lr nh lv mz na nb nc bi translated">使用SAP复制服务器</li></ul><p id="4903" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">因此，可能的解决方案如下所示:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ni"><img src="../Images/9035811101e30cb1dfe60f26d09734ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xXqFG-rw55ZH7EWE.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">SAP到大型查询—图片来自Google [2]</p></figure><h2 id="74ff" class="lw lx iu bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">实现增量负载</h2><p id="5f20" class="pw-post-body-paragraph la lb iu lc b ld mp jv lf lg mq jy li lj mr ll lm ln ms lp lq lr mt lt lu lv in bi translated">获取数据是第一步。之后，您将处理如何实现一个delta逻辑的问题，因为您可能不想通过满载定期加载所有数据。这只会带来加载时间长、没有历史数据等缺点。尤其是控制、内部审计等部门。通常基于历史数据视图构建他们的数据分析。</p><p id="2dd3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">虽然SAP数据服务已经内置在CDC向导中，但其他数据集成方法可能需要一些额外的工作。要实现这一步，非常了解SAP表和表结构是很重要的。在自己的逻辑上实现增量加载尤其可以借助两个表来实现:<strong class="lc iv"> CDHDR </strong>(改变标题)和<strong class="lc iv"> CDPOS </strong>(改变位置)。这些表跟踪主数据或事务数据的变化。</p><h2 id="2ee9" class="lw lx iu bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">数据转换</h2><p id="422a" class="pw-post-body-paragraph la lb iu lc b ld mp jv lf lg mq jy li lj mr ll lm ln ms lp lq lr mt lt lu lv in bi translated">随着基于列的数据仓库工具(如BigQuery)的出现，由于性能以及源系统和目标系统之间不同的表结构或数据类型，数据转换通常是必要的。</p><p id="826b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">一个例子是，在SAP中，你有BKPF(会计凭证标题)和BSEG(会计凭证段)表。由于其基于列的结构，对BigQuery中的数据进行<strong class="lc iv">反规范化</strong>是有意义的。解决方案可以是连接BKPF和BSEG，如果需要的话，还可以连接其他主数据和参考表——例如借助BigQuery DTS ( <strong class="lc iv">数据传输服务</strong>)的帮助。因此，您可以得到一个非规范化的数据对象体系结构，如下图所示:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ni"><img src="../Images/d37f8f192863ce8ce01ac661697f9778.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5UJG3iM36yaj6AyH.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">插图:从原始表格到非规范化数据对象-作者图片</p></figure><h2 id="5a18" class="lw lx iu bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">嵌套数据</h2><p id="46a3" class="pw-post-body-paragraph la lb iu lc b ld mp jv lf lg mq jy li lj mr ll lm ln ms lp lq lr mt lt lu lv in bi translated">另一个获得性能和成本效率的转换是使用<strong class="lc iv">嵌套数据结构</strong>。BigQuery或Amazon的Redshift等较新的数据仓库技术确实能更好地处理这种数据结构。使用嵌套数据的用例有，例如标题/段表，如BKPF和BSEG，或者如果一个表包含的列变化不大，如:</p><ul class=""><li id="f404" class="mu mv iu lc b ld le lg lh lj mw ln mx lr my lv mz na nb nc bi translated"><code class="fe nj nk nl nm b">name</code></li><li id="b6c2" class="mu mv iu lc b ld nd lg ne lj nf ln ng lr nh lv mz na nb nc bi translated"><code class="fe nj nk nl nm b">lastname</code></li></ul><p id="ac4b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">结合历史上经常变化的栏目，如[3]:</p><ul class=""><li id="1b1d" class="mu mv iu lc b ld le lg lh lj mw ln mx lr my lv mz na nb nc bi translated"><code class="fe nj nk nl nm b">address</code>(一个嵌套重复的字段及其后续嵌套字段):</li><li id="7e9d" class="mu mv iu lc b ld nd lg ne lj nf ln ng lr nh lv mz na nb nc bi translated"><code class="fe nj nk nl nm b">address.address</code></li><li id="d821" class="mu mv iu lc b ld nd lg ne lj nf ln ng lr nh lv mz na nb nc bi translated"><code class="fe nj nk nl nm b">address.city</code></li></ul><p id="472c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你问自己什么是嵌套数据——简而言之:BigQuery支持从支持基于对象的模式的源格式(例如JSON)加载和查询嵌套和循环数据。这些列可以保持关系，而不会像关系模式或规范化模式那样降低性能[4]。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nn"><img src="../Images/8ec05041b86979fe8ee08ca03d16c07d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/0*4HXWIOgCSYygfKcb.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">嵌套和重复数据的图示-按作者分类的图像</p></figure><p id="d5ac" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">地址列包含一个值数组。数组中的不同地址是重复出现的数据。每个地址中的不同字段是嵌套数据。点击阅读更多相关信息<a class="ae kz" rel="noopener" target="_blank" href="/how-to-work-with-nested-data-in-bigquery-84f15646b0b1">。</a></p><h2 id="4c1a" class="lw lx iu bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">实施(自助)报告</h2><p id="9dc3" class="pw-post-body-paragraph la lb iu lc b ld mp jv lf lg mq jy li lj mr ll lm ln ms lp lq lr mt lt lu lv in bi translated">最后一部分将实现报告和数据分析的可能性。有了BigQuery，数据分析师已经有了一个很好的分析工具。数据科学家可以使用数据实验室或GCP内众多ML服务之一。Data Studio可能是业务用户共享KPI、仪表板等的合适解决方案。为了在BigQuery中实现角色/用户访问模型，通常使用BUKRS属性(公司代码)，这样用户就只能看到分配给他的公司代码的数据，这也是SAP处理用户权限的方式。</p><h2 id="dea3" class="lw lx iu bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">摘要</h2><p id="2be3" class="pw-post-body-paragraph la lb iu lc b ld mp jv lf lg mq jy li lj mr ll lm ln ms lp lq lr mt lt lu lv in bi translated">SAP和GCP的结合将为贵公司带来巨大的数据分析能力和可能性。SAP系统托管了大量想要分析的有趣数据，而GCP提供了许多数据分析/科学家工具和服务，可以实现这一点。谷歌云和较新的SAP-HANA-Cloud架构本质上很容易相互结合，但旧系统也可以集成。因此，稳固的SAP财务系统符合专为数据分析而设计的敏捷的Google world一个非常有用的组合。</p><h2 id="5278" class="lw lx iu bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">资料来源和进一步阅读:</h2><p id="b900" class="pw-post-body-paragraph la lb iu lc b ld mp jv lf lg mq jy li lj mr ll lm ln ms lp lq lr mt lt lu lv in bi translated">[1] SAP社区，<a class="ae kz" href="https://blogs.sap.com/2018/04/08/hana-sda-google-bigquery/" rel="noopener ugc nofollow" target="_blank">HANA SDA—Google big query</a>(2018)</p><p id="4304" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">[2]谷歌，<a class="ae kz" href="https://cloud.google.com/solutions/sap/docs/bigquery-replication-from-sap-apps?hl=de" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/solutions/sap/docs/big query-replication-from-sap-apps？hl=de </a> (2021)</p><p id="1316" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">[3]谷歌，【https://cloud.google.com/bigquery/docs/nested-repeated】T4(2021)</p><p id="1770" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">[4] Google，<a class="ae kz" href="https://cloud.google.com/bigquery/docs/nested-repeated?hl=en" rel="noopener ugc nofollow" target="_blank">指定嵌套和重复的列</a> (2021)</p></div></div>    
</body>
</html>