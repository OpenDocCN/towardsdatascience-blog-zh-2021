<html>
<head>
<title>Make your Science FAIR with Zenodo</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让你的科学与芝诺多公平</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/make-your-science-fair-with-zenodo-b209fc74400c?source=collection_archive---------26-----------------------#2021-05-23">https://towardsdatascience.com/make-your-science-fair-with-zenodo-b209fc74400c?source=collection_archive---------26-----------------------#2021-05-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0034" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用Zenodo REST API用Python上传数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/38fd1125b0a54e7835a08c5e5c35d93d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UbD5eqS5mMGugvUE"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">达斯汀·休姆斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="a261" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">发布的数据应该<a class="ae ky" href="https://www.go-fair.org/fair-principles/" rel="noopener ugc nofollow" target="_blank">公平</a>:可查找、可访问、可互操作和可重用。数据仓库，比如Zenodo，有助于确保研究项目的公平性。</p><p id="abf9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Zenodo是一个免费平台，允许任何人上传和存储数据，使其可以搜索并提供数字对象标识符(DOI)。通过网页上的拖放功能，从本地计算机上传小文件很容易。但是如果文件很大并且在远程计算机上，那么你需要使用<a class="ae ky" href="https://developers.zenodo.org/#rest-api" rel="noopener ugc nofollow" target="_blank"> Zenodo REST API </a>。</p><p id="55b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章描述了如何通过Python使用API与你的Zenodo帐户交互，这样你就可以以编程的方式创建项目和上传数据。</p><h2 id="0209" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">目录</h2><ul class=""><li id="61dd" class="mo mp it lb b lc mq lf mr li ms lm mt lq mu lu mv mw mx my bi translated"><a class="ae ky" href="#b506" rel="noopener ugc nofollow"> RESTful API基础知识</a></li><li id="2dd1" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><a class="ae ky" href="#b7f8" rel="noopener ugc nofollow">在我们开始之前… </a></li><li id="7b51" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><a class="ae ky" href="#37c5" rel="noopener ugc nofollow">获取关于API的信息</a></li><li id="c19d" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><a class="ae ky" href="#37ad" rel="noopener ugc nofollow">发布创建项目的请求</a></li><li id="1ec3" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><a class="ae ky" href="#d854" rel="noopener ugc nofollow">上传更改元数据的请求</a></li><li id="c634" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><a class="ae ky" href="#053d" rel="noopener ugc nofollow">上传数据的上传请求</a></li><li id="c1dd" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><a class="ae ky" href="#fb24" rel="noopener ugc nofollow">删除一个文件和项目</a></li><li id="ee0a" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><a class="ae ky" href="#65f9" rel="noopener ugc nofollow">最终想法</a></li><li id="09ad" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><a class="ae ky" href="#c1b6" rel="noopener ugc nofollow">笔记本教程</a></li></ul></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="b506" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">RESTful API基础</h1><p id="80cb" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">应用程序编程接口(API)是两台计算机相互通信的一种方式。它的工作原理就像一个网络浏览器，但是你写代码从服务器请求数据，而不是点击按钮。大多数API都是RESTful的，这意味着它们遵循一组称为表述性状态转移的规则。深入探究REST APIs超出了本教程的范围。然而，理解什么是API以及它如何在基础层面上工作是很重要的。</p><p id="8356" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">RESTful API将数据组织成一串唯一的链接，类似于网页统一资源定位器(URL)，只是它们被称为统一资源标识符(URIs)。例如，基本的Zenodo API是https://api.zenodo.org/api的<a class="ae ky" href="https://zenodo.org/api" rel="noopener ugc nofollow" target="_blank">和https://zenodo.org/api/deposit/depositions的</a><a class="ae ky" href="https://zenodo.org/api/deposit/depositions" rel="noopener ugc nofollow" target="_blank"/>的一个URIs。</p><p id="5bc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你点击这些链接，你实际做的是发送一个<em class="nz">请求</em>到一个服务器，在你的屏幕上显示的是<em class="nz">响应。</em>基本的Zenodo API链接将显示所有的URIs，而<code class="fe oa ob oc od b">/deposit/depositions</code>链接可能会显示这样的错误消息</p><pre class="kj kk kl km gt oe od of og aw oh bi"><span id="8e2e" class="lv lw it od b gy oi oj l ok ol">{"message":"The server could not verify that you are authorized to access the URL requested. You either supplied the wrong credentials (e.g. a bad password), or your browser doesn't understand how to supply the credentials required.","status":401}</span></pre><p id="45df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">写着<code class="fe oa ob oc od b">“status”:401</code>的部分是一个<a class="ae ky" href="https://developers.zenodo.org/#http-status-codes" rel="noopener ugc nofollow" target="_blank">状态码</a>，表示我们未经授权，需要提供一个访问令牌。</p><p id="dc3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">RESTful APIs的一个很好的简单解释可以在这个视频的前两分钟中找到。</p><h2 id="8e49" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">芝诺多API</h2><p id="f767" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">假设我们有一个Zenondo帐户，我们想从本地计算机与之交互。我所说的交互是指创建项目、上传数据、更新元数据以及删除文件或整个项目。我们可以用API向Zenodo发出四个基本请求:<code class="fe oa ob oc od b">GET</code>、<code class="fe oa ob oc od b">POST</code>、<code class="fe oa ob oc od b">PUT</code>和<code class="fe oa ob oc od b">DELETE</code>。</p><ul class=""><li id="5fff" class="mo mp it lb b lc ld lf lg li om lm on lq oo lu mv mw mx my bi translated"><strong class="lb iu">获取</strong>是读取数据</li><li id="3773" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><strong class="lb iu"> POST </strong>是创建项目并将数据移动到芝诺多</li><li id="81a6" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><strong class="lb iu">放</strong>是改变与项目相关的元数据</li><li id="da23" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><strong class="lb iu">删除</strong>将删除数据或项目</li></ul><p id="ac05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些是我们将用来与Zenodo交互的HTTP <a class="ae ky" rel="noopener" target="_blank" href="/introduction-to-rest-apis-90b5d9676004"> REST API </a>方法。一般来说，这是如何工作的，我们(<em class="nz">客户机</em>)将向Zenodo(<em class="nz">服务器</em>)发出<em class="nz">请求</em>，作为回报，我们将得到<em class="nz">响应</em>。该响应可以是返回给我们的数据和/或表明我们的请求成功或失败的响应<a class="ae ky" href="https://developers.zenodo.org/#http-status-codes" rel="noopener ugc nofollow" target="_blank">状态码</a>。上的响应代码:</p><ul class=""><li id="4cc8" class="mo mp it lb b lc ld lf lg li om lm on lq oo lu mv mw mx my bi translated">2** =一切顺利</li><li id="2916" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">4** =客户端错误(你做错了什么)</li><li id="d3fc" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">5** =服务器错误(服务器出现问题)</li></ul><p id="301c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这一切现在听起来可能有点抽象，但当我们应用它时，它将是有意义的。</p><p id="bd96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总而言之，API是一种代码，它让我们通过发送<em class="nz">请求</em> ( <code class="fe oa ob oc od b">GET</code>、<code class="fe oa ob oc od b">POST</code>、<code class="fe oa ob oc od b">PUT</code>、<code class="fe oa ob oc od b">DELETE</code>)和作为回报的<em class="nz">响应</em>，在互联网上与服务器(在本例中是Zenodo)进行通信。</p><p id="bab6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更深入的解释，请看佩里·艾辛的帖子。</p><div class="or os gp gr ot ou"><a href="https://medium.com/@perrysetgo/what-exactly-is-an-api-69f36968a41f" rel="noopener follow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">API到底是什么？</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">你有没有听说过“API”这个词，并想知道这到底是什么？你是否有一个模糊的想法，但是…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">medium.com</p></div></div><div class="pd l"><div class="pe l pf pg ph pd pi ks ou"/></div></div></a></div></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="b7f8" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">在我们开始之前…</h1><p id="4d43" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">您需要创建一个帐户和一个访问令牌。使用API时，这个令牌是您帐户的密钥。我们向它提供我们的请求，告诉Zenodo我们有适当的<strong class="lb iu">权限</strong>来访问这个帐户。</p><ol class=""><li id="72a6" class="mo mp it lb b lc ld lf lg li om lm on lq oo lu pj mw mx my bi translated">你首先需要<a class="ae ky" href="https://zenodo.org/signup/" rel="noopener ugc nofollow" target="_blank">用芝诺多创建一个账户</a>。</li><li id="49b2" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu pj mw mx my bi translated">之后，您将需要<a class="ae ky" href="https://zenodo.org/login/?next=%2Faccount%2Fsettings%2Fapplications%2Ftokens%2Fnew%2F" rel="noopener ugc nofollow" target="_blank">创建一个访问令牌</a>来使用<a class="ae ky" href="https://developers.zenodo.org/" rel="noopener ugc nofollow" target="_blank"> API </a>。该令牌将是一个长的字母数字字符串，并且只显示一次。<br/> <strong class="lb iu">将此令牌保密</strong></li><li id="bae1" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu pj mw mx my bi translated">复制令牌并将其作为环境变量保存在您的环境文件中(例如<code class="fe oa ob oc od b">~/.bash_profile</code> ): <br/> <code class="fe oa ob oc od b">export ZENODO_TOKEN=YOUR_ACCES_TOKEN_GOES_HERE</code></li><li id="ba6b" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu pj mw mx my bi translated">确保您可以从终端访问令牌:<br/> <code class="fe oa ob oc od b">echo $ZENODO_TOKEN</code>如果一切正常，这将在您的提示中显示您的令牌值。</li><li id="4c8c" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu pj mw mx my bi translated">安装python <a class="ae ky" href="https://2.python-requests.org/en/latest/user/install/" rel="noopener ugc nofollow" target="_blank">请求</a>包:<br/> <code class="fe oa ob oc od b">conda install -c conda-forge requests<br/></code>你也可以通过pip安装</li><li id="c8d9" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu pj mw mx my bi translated">确保可以导入包:<code class="fe oa ob oc od b">import requests</code></li></ol><p id="e1df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您正在使用JupyterLab，<code class="fe oa ob oc od b">python-dotenv</code>包是在笔记本中使用环境变量的一个好方法。该软件包有助于从环境文件中读取键值对，并确保您的令牌在与同事共享笔记本时保持私有。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pk pl l"/></div></figure><p id="a056" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在一切都准备好了，您创建了一个帐户，存储了您的访问令牌，并安装了必要的包。</p><p id="18df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们准备开始使用Zenodo API了！</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="37c5" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">获取关于API的信息</h1><p id="677d" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">让我们从向Zenodo基础API发出一个<code class="fe oa ob oc od b">GET</code>请求开始。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pk pl l"/></div></figure><p id="0a57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在访问令牌中附加了一些头信息，现在应该返回内容了。对于这种类型的请求，这不是必需的。我们得到的是一个包含两条重要信息的响应对象，即状态代码和响应数据:</p><ul class=""><li id="a775" class="mo mp it lb b lc ld lf lg li om lm on lq oo lu mv mw mx my bi translated"><code class="fe oa ob oc od b">print(r.status_code)</code>:显示状态码<br/> 2** =一切成功<br/> 4** =客户端错误(您做错了)<br/> 5** =服务器错误(服务器出错)</li><li id="7880" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><code class="fe oa ob oc od b">print(json.dumps(r.json(), indend=2))</code>:以可读的方式显示响应JSON输出。输出如下所示</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pm"><img src="../Images/97a9c25b1ad2de7eb6e0a64b0780b430.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kkZtl3I9DZd3TGVgVkiyAQ.png"/></div></div></figure><p id="fc1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们得到的响应是与API相关的所有URIs。URI的存款是我们唯一会用的。</p><ul class=""><li id="071b" class="mo mp it lb b lc ld lf lg li om lm on lq oo lu mv mw mx my bi translated"><strong class="lb iu">存款:</strong>用于上传和发布到Zenodo <br/>(这与web界面中可用的功能相同)。</li></ul><p id="912f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://developers.zenodo.org/#rest-api" rel="noopener ugc nofollow" target="_blank">其他URIs </a>主要用于搜索芝诺多。</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="35ad" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">发布创建项目的请求</h1><p id="c2c3" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">您可以使用web界面或通过API以编程方式创建项目。为了完整起见，我将展示这两种方式。如果你正在填充大量的可选元数据，web界面会更容易使用，并且API可以快速创建你想要上传的项目。</p><h2 id="e97c" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">使用网络界面</h2><p id="5991" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">进入你的账户，点击顶部的“上传”,然后点击右边绿色的“新上传”按钮，创建一个新项目</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pn"><img src="../Images/7febf8cc20e496e1a75a71647da21dc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w9DhWP651sYU15Wt2ZGQyA@2x.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd po">新建一个项目</strong>:点击顶部的“上传”，然后点击右边的“新建上传”。(图片由作者提供)</p></figure><p id="ab70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最起码，要在旁边标有红色*的字段中进行填写。完成后，点击顶部的“保存”。顶部的URL会改变，并给你的项目一个唯一的ID。这里有一个例子:</p><pre class="kj kk kl km gt oe od of og aw oh bi"><span id="6522" class="lv lw it od b gy oi oj l ok ol">https://zenodo.org/deposit/4781404</span></pre><p id="9253" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oa ob oc od b">/deposit</code>表示这是一个私人项目。</p><p id="9f39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个公共项目URL</p><pre class="kj kk kl km gt oe od of og aw oh bi"><span id="e368" class="lv lw it od b gy oi oj l ok ol">https://zenodo.org/record/4760205</span></pre><p id="c21c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oa ob oc od b">/record</code>表示这是一个公共项目。</p><h2 id="9244" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">使用API</h2><p id="b37b" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">为了用API创建一个项目，我们将发出一个<code class="fe oa ob oc od b">POST</code>请求。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pk pl l"/></div></figure><p id="e9e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将创建一个没有标题或信息的空项目。</p><p id="abe5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oa ob oc od b">r</code>是响应对象，包含两条有用的信息</p><ul class=""><li id="1d02" class="mo mp it lb b lc ld lf lg li om lm on lq oo lu mv mw mx my bi translated"><code class="fe oa ob oc od b">r.status_code</code>:表示作业是否成功<br/>(记住2**处的响应表示成功)</li><li id="0005" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><code class="fe oa ob oc od b">r.json()</code>:哪个是服务器以JSON格式返回给我们的数据</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pp"><img src="../Images/94cb2d9f43c3359ab2224c6f12593545.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IBu6y_QFFJBbrURln-BvyQ.png"/></div></div></figure><p id="027e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">响应代码<code class="fe oa ob oc od b">201</code>表示“已创建”</p><p id="99cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意响应输出中的<code class="fe oa ob oc od b">links</code>中的<code class="fe oa ob oc od b">id</code>和<code class="fe oa ob oc od b">bucket</code>。这些以后会有用的。</p><h2 id="889e" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated"><strong class="ak">存储id和存储桶</strong></h2><p id="02b1" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">从这个响应中，我们想要保存两条信息<code class="fe oa ob oc od b">id</code>和<code class="fe oa ob oc od b">links</code>中的<code class="fe oa ob oc od b">bucket</code>。</p><ul class=""><li id="de64" class="mo mp it lb b lc ld lf lg li om lm on lq oo lu mv mw mx my bi translated"><code class="fe oa ob oc od b">id</code>是与项目相关的唯一编号</li><li id="9bdc" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><code class="fe oa ob oc od b">bucket</code>是你上传数据文件的地方</li></ul><p id="f7a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是保存从输出中提取这些内容的代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pk pl l"/></div></figure><h2 id="34f8" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">这个在网页上看起来怎么样？</h2><p id="cb56" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">当你登录到Zenodo并导航到上传时，你会看到这个。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pq"><img src="../Images/fb02281f2bb8d94733f824db651624c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Q4wRDh8UJqkPB5ngW8vRQ.png"/></div></div></figure><p id="ae36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个没有标题的项目，当你看里面的时候，你会看到没有字段被填写，也没有上传。这是意料之中的，因为我们创建了一个空白项目。在API中，我们没有将空数据附加到我们的<code class="fe oa ob oc od b">POST</code>请求中。</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="d854" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">提交更改元数据的请求</h1><p id="b4f2" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">现在让我们更改一些与我们的项目相关的信息。为此，我们将发出一个<code class="fe oa ob oc od b">PUT</code>请求。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pk pl l"/></div></figure><p id="b1bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些更改将立即生效，并将在网页上显示。</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="053d" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">上传数据的上传请求</h1><p id="022e" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">就像填写元数据一样，上传数据有两种方式:通过web界面和通过API。同样，我将展示两者。</p><h2 id="cffc" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">从web上传</h2><p id="c400" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">如果您的数据集很小，并且位于本地计算机上，那么通过网页上的拖放功能上传文件可能是最好的方法。导航到您的项目，然后单击“选择文件”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pr"><img src="../Images/0ca004686c3a8fd27beb2e5d517715a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JFWZ7HpsifVHu2LXfdx2tg@2x.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">拖放对于笔记本电脑上的小数据集是很好的(图片由作者提供)</p></figure><h2 id="706f" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">使用API上传</h2><p id="bf47" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">如果数据集很大或者位于远程计算机上，则需要使用API。为此，我们向<code class="fe oa ob oc od b">bucket_link</code>发起一个<code class="fe oa ob oc od b">PUT</code>请求。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pk pl l"/></div></figure><h2 id="ed6f" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">如果我忘记保存存款id和存储桶链接怎么办</h2><p id="0838" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">这种情况时有发生，尤其是当我不断重写<code class="fe oa ob oc od b">r</code>的时候。如果您忘记了“id ”,找到它的最简单方法是访问项目网页并查看URL。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ps"><img src="../Images/04f234033bb8312b9f9a5d0e5374d287.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*5b3Q0UVMUcU29TEy2Epg2w.png"/></div></figure><p id="2083" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦知道了id，就将它保存到一个名为<code class="fe oa ob oc od b">deposition_id</code>的变量中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pk pl l"/></div></figure><p id="f07c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您也可以发出<code class="fe oa ob oc od b">GET</code>存款请求来抓取<code class="fe oa ob oc od b">id</code>和<code class="fe oa ob oc od b">bucket</code>。</p><pre class="kj kk kl km gt oe od of og aw oh bi"><span id="f740" class="lv lw it od b gy oi oj l ok ol">r = requests.get(f"{baseurl}/deposit/depositions", <br/>                 headers=headers)</span></pre></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="fb24" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">删除文件和项目</h1><p id="ab42" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">在这一节中，我将向您展示如何使用API删除文件和项目。</p><p id="72ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从你的项目中删除东西太容易了。发出<code class="fe oa ob oc od b">DELETE</code>请求时要小心，如果要执行此操作，没有弹出窗口需要仔细检查。</p><h2 id="d52a" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">删除文件</h2><p id="701f" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">要删除一个文件，我们需要获得惟一的<code class="fe oa ob oc od b">file_id</code>，然后发出一个<code class="fe oa ob oc od b">DELETE</code>请求。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pk pl l"/></div></figure><p id="faf4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意使用<code class="fe oa ob oc od b">filter()</code>首先找到正确的文件名，然后获取文件的<code class="fe oa ob oc od b">id</code>。如果项目中有多个文件，这是必要的。</p><p id="a905" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，响应状态代码是<code class="fe oa ob oc od b">204</code>，表示“无内容”，这通常是对<code class="fe oa ob oc od b">DELETE </code>请求的响应。</p><p id="b195" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您遵循此示例，您将会看到该文件在网页上不再可见。</p><h2 id="8fc7" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">删除项目</h2><p id="5d40" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">要删除一个项目，向沉积发出一个<code class="fe oa ob oc od b">DELETE</code>请求<code class="fe oa ob oc od b">id</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pk pl l"/></div></figure><p id="de69" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦你这样做了，你的项目就…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pt"><img src="../Images/28ba89b263015e1bd029070851ea97f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SsLsd5OHeqOCFyoGoLyotg.png"/></div></div></figure></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="65f9" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">最后的想法</h1><p id="41f4" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">Zenondo API让您能够从命令行与您的帐户进行交互。你能在网页上做的任何事情都可以用API来做。然而，仅仅因为你可以用API做这些事情，并不意味着你应该这样做，或者它很容易和直观。例如，我个人觉得用web界面创建项目和添加元数据更容易。</p><p id="ae7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">API的主要优势是能够将远程数据上传到您的帐户。</p><p id="7e15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我对Zenodo唯一的不满是它不允许你上传目录树，这是GitHub 上的一个未解决的问题。解决方法是上传目录结构的压缩版本。从整体来看，这只是一个小小的不便。然而，如果你上传时绝对需要这种结构，我建议看看<a class="ae ky" href="https://osf.io" rel="noopener ugc nofollow" target="_blank">开放科学框架</a>。</p><h2 id="29ed" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">发布您的项目</h2><p id="a766" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">完成上传数据和填写所有元数据后，您可以将项目公开以确保其可访问性。我建议从网页上做这件事。单击蓝色的“发布”按钮，让任何人都可以访问您的项目。可及性是公平原则之一，公平的科学更好。</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="c1b6" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">教程笔记本</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pk pl l"/></div></figure></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="7298" class="nl lw it bd lx nm nn no ma np nq nr md jz ns ka mg kc nt kd mj kf nu kg mm nv bi translated">额外资源</h1><div class="or os gp gr ot ou"><a href="https://developers.zenodo.org/" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">开发者|芝诺多</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">Zenodo REST API目前支持:研究成果的存放-上传和发布(与功能相同…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">developers.zenodo.org</p></div></div></div></a></div><div class="or os gp gr ot ou"><a href="https://fairplus.github.io/the-fair-cookbook/content/recipes/findability/zenodo-deposition.html#programmatic-deposition-to-zenodo-via-the-rest-api" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">存放在Zenodo通用存储库中</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">存放在芝诺多通用存储库中首席研究员、数据经理、数据科学家、主要目的的资助者…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">fairplus.github.io</p></div></div><div class="pd l"><div class="pu l pf pg ph pd pi ks ou"/></div></div></a></div></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><p id="1e8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nz">特别感谢</em> <a class="op oq ep" href="https://medium.com/u/2073923b733b?source=post_page-----b209fc74400c--------------------------------" rel="noopener" target="_blank"> <em class="nz"> Rachana Maniyar博士</em> </a> <em class="nz">编辑本帖的草稿版本</em></p><p id="8d32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nz">感谢阅读和支持媒体作者</em></p><div class="or os gp gr ot ou"><a href="https://lukegloege.medium.com/membership" rel="noopener follow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">通过我的推荐链接加入Medium—Luke Gloege博士</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">lukegloege.medium.com</p></div></div><div class="pd l"><div class="pv l pf pg ph pd pi ks ou"/></div></div></a></div></div></div>    
</body>
</html>