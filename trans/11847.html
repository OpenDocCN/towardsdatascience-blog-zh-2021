<html>
<head>
<title>Estimating Pi Using Monte Carlo Simulation in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用蒙特卡罗模拟法估计圆周率</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/estimating-pi-using-monte-carlo-simulation-in-r-91d1f32406af?source=collection_archive---------5-----------------------#2021-11-26">https://towardsdatascience.com/estimating-pi-using-monte-carlo-simulation-in-r-91d1f32406af?source=collection_archive---------5-----------------------#2021-11-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8d85" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何只用几行代码模拟圆周率？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8909d3874f6402f853267be22293efbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MqpCyD0K76kudaA0"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Taso Katsionis 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="bc76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">说明如何使用蒙特卡罗模拟的一个常见例子是通过估计圆周率。本文将向您展示如何使用 r 用几行代码完成这一模拟。在编写代码之前，让我们先来看一下我们将用来估计圆周率的数学公式。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/e6e6e5d76be67b1725f0b067ed7262f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*N8AWxYj3s2WrNrddinkcvQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="9671" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">找出圆周率的表达式</h1><p id="5912" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">圆周率是一个数学常数，大约为 3.14159，表示圆的周长与其直径的比值。我们如何在模拟中找到一个表达式来计算圆周率的近似值？</p><p id="94b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们知道圆的面积是由π* r 计算出来的，包围正方形的面积是(2r) = 4r。用圆的面积除以正方形的面积，我们得到两个面积的比值:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi na"><img src="../Images/70a3a98daf8641385464d19e3370160f.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/format:webp/1*Uwaf4TpaOCJBpxkZcBGOAA.png"/></div></figure><p id="9c3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着我们可以使用以下公式估算圆周率:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/7165ab6e1c50bbbba48ac37aa8b34e58.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*RgouX0X9BhQUZDkTNE2sPg.png"/></div></figure><p id="5e65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过在这个正方形内模拟随机数，我们得到了圆形面积和正方形面积的近似值。因此，我们可以通过取落在圆内的模拟点与模拟点总数的比率并乘以 4 来估计圆周率。</p><p id="6e0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了识别哪些点落在圆内，我们使用圆的等式:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/965800931dbaf41e886671d174bdb3a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/1*R3z6L-LY0Ld6DEDjSBMSww.png"/></div></figure><p id="f63c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的示例中，圆心为(0，0)，半径为 1，因此满足以下标准的模拟点位于圆内。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/ce4205024930172f194b571fd8e2c88d.png" data-original-src="https://miro.medium.com/v2/resize:fit:252/format:webp/1*MbkKTF_8Bpm3Uz0EHxlhQA.png"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="4cce" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">为模拟编写函数</h1><p id="985e" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们的函数将采用两个参数，<strong class="lb iu">种子</strong>用于再现性，以及<strong class="lb iu">迭代</strong>以便我们可以选择我们想要生成多少个模拟点。</p><p id="96ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该功能经历以下步骤:</p><ul class=""><li id="e2e3" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">设定种子。</li><li id="d803" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">从均匀分布中生成选定数量的随机点，<strong class="lb iu">最小值</strong>和<strong class="lb iu">最大值</strong>被设置为我们的域边界，这里为-1 和 1。这些随机数存储在两个向量中，一个用于 x 坐标，一个用于 y 坐标。</li><li id="ca82" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">计算每个(x，y)点的 sqrt(x +y ),并将它们存储在一个向量中。</li><li id="b2c5" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">通过计算 sqrt(x +y ) ≤1 来计算圆内有多少个点。</li><li id="fdb0" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">用圆内的<em class="ns">点数</em>与<em class="ns">总点数</em>之比乘以 4 来估算 pi</li><li id="1cbb" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">返回估计圆周率的值</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="6e56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">调用我们的<strong class="lb iu"> simulate_pi() </strong>函数将返回种子 pi 的近似值以及传递给其参数的点数。<em class="ns">请注意，由于函数中没有种子，由于生成了不同的随机数，模拟每次运行将产生不同的估计值。</em></p><p id="f19f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将 seed 设置为 28 并使用 10，000 个随机点，得到的估计值为 3.1724。相当接近圆周率，但可能还不够接近到让我们满意的程度。让我们看看如何改进这一估计。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="ee3a" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">增加生成点的数量将改善我们的估计</h1><p id="efe4" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们可以使用 sapply()在一次调用中为不同数量的生成点估计 pi。</p><p id="9d3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行下面的代码给出 10，100，1，000，10，000，100，000 和 1，000，000 个模拟点的 pi 估计值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="a088" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们所看到的，pi 的估计值随着点数的增加越来越接近 pi 的真实值。这说明了蒙特卡罗模拟的一个重要方面；仅使用少量随机点通常会给出较差的近似值。平均而言，随着点数的增加，近似值将会提高。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="237b" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">绘制估计的 pi 值</h1><p id="b0d0" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">为了说明这一点，我们可以绘制圆周率的估计值，看看它是如何随着点数的增加而变化的。为了绘制该图，我们需要将每个估计值存储在一个数据框中。我们可以通过如下修改函数来做到这一点。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="f43e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们有了一个生成所需数据的函数。让我们<br/>生成数据，并绘制从第一个点到 100，000 个点的 pi 近似值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/72cab55e6e1d674edb3d7f487aefe751.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*g-XjTH0nWfaOHk4r57DiOg.png"/></div></figure><p id="cbc7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们所看到的，pi 的估计值在第一次模拟中相当不准确，但随着模拟次数的增加，它越来越接近 pi 的实际值。</p><p id="02ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文中使用的代码可以在这个<a class="ae ky" href="https://github.com/TalkingDataScience/estimate_pi_with_R" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>中找到。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="4b0a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢阅读这样的故事，并且想支持我成为一名作家，考虑注册成为一名媒体会员。每月 5 美元，你可以无限制地阅读媒体上的故事。如果你注册使用我的链接，我会赚一小笔佣金。</p><div class="nv nw gp gr nx ny"><a href="https://medium.com/@andreagustafsen/membership" rel="noopener follow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd iu gy z fp od fr fs oe fu fw is bi translated">通过我的推荐链接加入 Medium-Andrea gustaf sen</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">medium.com</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om ks ny"/></div></div></a></div></div></div>    
</body>
</html>