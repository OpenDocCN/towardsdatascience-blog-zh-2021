<html>
<head>
<title>AWS Application Migration Service Architecture Explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解释AWS应用程序迁移服务架构</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/aws-application-migration-service-architecture-explained-2947348ef194?source=collection_archive---------12-----------------------#2021-04-23">https://towardsdatascience.com/aws-application-migration-service-architecture-explained-2947348ef194?source=collection_archive---------12-----------------------#2021-04-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="784c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解流程</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c00026a3ea24d78f52fbb833b470d88f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9mBenRG37YF63bkcpuB8Sw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片由<a class="ae kv" href="https://pixabay.com/users/geralt-9301/?tab=latest" rel="noopener ugc nofollow" target="_blank">杰洛特</a>来自<a class="ae kv" href="https://pixabay.com/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></p></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="f6bc" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">AWS应用程序迁移服务(AWS MGM)是一项提升和转移AWS服务，任何人都可以通过AWS管理控制台进行访问。在这篇文章中，我将回顾AWS MGN服务和网络架构。AWS MGM是一种灵活、可靠、高度自动化的提升和移位解决方案。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8aacaaeb026986c24e5ae60618509947.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5KYTYcXVMoN3-eHUtB3L6A.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞缪尔·马丁斯的图片</p></figure><p id="ac7c" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">您可以使用它来帮助简化、加快和降低将应用程序迁移到AWS的成本。您还可以使用AWS NGN将物理、虚拟或云服务迁移到AWS，而不会出现兼容性问题、性能问题、中断或长时间切换窗口。您可以从运行受支持操作系统的任何源基础架构中迁移应用程序和数据库。这包括Oracle和SQL server等常见数据库、SAP等任务关键型应用程序以及自主开发的应用程序。AWS MGN支持最常见的windows和Linux操作系统，并在数据块级别持续复制它们的数据。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2d1821cf61d672e3d969cd240d48c4ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KDIr_XNLZlx7tywbzKKYIg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞缪尔·马丁斯的图片</p></figure><p id="537a" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">左侧是源环境。它可以包括物理、虚拟或云服务器的组合。在此示例中，源环境有两台服务器，其中两个磁盘连接到顶层服务器，三个磁盘连接到底层服务器。在右侧，您可以看到服务器将被迁移到的AWS区域。在本例中，已经定义了子网。</p><p id="9363" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">首先，在源服务器上安装AWS复制代理。代理可以以无人值守的方式安装，不需要重新启动。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/adf1f1bfb7d7667fd62c17c8172f6163.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_xHAUyoTtgVh5hWvftgYxw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞缪尔·马丁斯的图片</p></figure><p id="dbea" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">安装时，代理会对使用TLS 1.3加密的AWS MGM API端点执行身份验证握手。这将向服务注册代理，而服务又会自动提供临时区域子网资源。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/30df5b1d3bae56cf3abe5c19de65d5f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TSQoSvqOUkMawcJiZCuqiQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞缪尔·马丁斯的图片</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2fef297c3e3a7eb3e917fe1cad72ed04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rFaMuevj-sp6wmB0SedDtA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞缪尔·马丁斯的图片</p></figure><p id="548f" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">临时区域子网使用低成本计算和存储来保持源环境中的数据在AWS上同步。临时区域子网由以下资源组成:</p><ul class=""><li id="53a6" class="lz ma iq lf b lg lh lj lk lm mb lq mc lu md ly me mf mg mh bi translated">复制服务器。这些是轻量级、Amazon elastic、云计算或Amazon EC2实例。</li><li id="b49e" class="lz ma iq lf b lg mi lj mj lm mk lq ml lu mm ly me mf mg mh bi translated">暂存卷。这些是低成本的亚马逊弹性块商店，或亚马逊EBS卷。</li><li id="4b8c" class="lz ma iq lf b lg mi lj mj lm mk lq ml lu mm ly me mf mg mh bi translated">亚马逊EBS快照。这些是增量EBS快照。</li></ul><p id="14ae" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">对于复制的每个源磁盘，AWS MDN都会在临时区域子网中创建一个大小相同的EBS卷，以便进行数据同步。在此示例中，五个复制源磁盘导致五个等效的EBS卷连接到登台区复制服务器。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4ce95bd3d611f8b63fb9ffdf35197edb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rDBpd-hjGSQ4Jzhu8WIK1Q.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞缪尔·马丁斯的图片</p></figure><p id="9d6e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">安装代理并创建临时区域子网资源后，复制开始。数据经过加密，并直接从源服务器传输到复制服务器卷。用户控制复制路径，在复制路径中，他们可以使用专用连接选项，如AWS direct connect或VPN。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/99ae27d9c697157190a528327f582363.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YDw3DxwGMdizwlKd63QV8w.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞缪尔·马丁斯的图片</p></figure><p id="0487" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">该服务自动管理临时区域子网资源，根据并发复制的源服务器和磁盘按需扩展或缩减资源。因此，用户无需维护操作即可管理中转区子网。AWS MGN服务器是短暂的资源，由服务不时自动轮换。</p><p id="e0a7" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">需要注意的重要信息包括:</p><ul class=""><li id="2e80" class="lz ma iq lf b lg lh lj lk lm mb lq mc lu md ly me mf mg mh bi translated">默认情况下，复制服务器使用T3.small Linux实例，启用T3无限制定价。</li><li id="03ae" class="lz ma iq lf b lg mi lj mj lm mk lq ml lu mm ly me mf mg mh bi translated">一般经验是，一台复制服务器最多可以处理15个并发复制的磁盘。</li><li id="4c5b" class="lz ma iq lf b lg mi lj mj lm mk lq ml lu mm ly me mf mg mh bi translated">默认情况下，数据在传输过程中使用AES 256位加密密钥进行压缩和加密。也可以在您的AWS区域使用Amazon EBS加密对其进行静态加密。</li></ul><p id="d1ec" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">复制从初始同步开始。在初始同步期间，代理将源磁盘上的所有内容复制到分段区域子网中的EBS卷。同时，代理会在数据权限发生时跟踪并持续复制数据权限，并将数据异步复制到临时区域子网中的相关资源。初始同步完成后，连续复制将无限期继续。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="4e1c" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">安装代理并开始复制后，检查启动设置。启动设置是服务、特定配置和易于启动的模板的组合。启动设置定义了迁移实例的启动位置和方式，包括子网安全组、实例类型、卷类型和标记。配置启动设置后，等待初始同步完成。当源服务器被标记为可以测试时，您可以选择test and cutover按钮并启动实例。然后，AWS MGN将发出一系列API调用来启动启动过程，并根据您配置的启动设置在AWS上自动启动实例。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="22a5" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在启动过程中，该服务会自动启动转换服务器。转换过程包括对驱动程序、网络和操作系统许可证的更改，以便实例可以在AWS上本地引导。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e34909a74e3bc64f0277d16808e52163.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gSP2vBAOKUs8447ny2AvMQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞缪尔·马丁斯的图片</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/faae772c7afb04444857626f3f9d4047.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d0VQKo9qLhxdq2OAKJZ28g.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞缪尔·马丁斯的图片</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3479cb10797713e37dd8144f22f0cd41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GBaD1ss8Sjv_TCbe3vuwpQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞缪尔·马丁斯的图片</p></figure><p id="4ba8" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">与复制服务器(只要复制处于活动状态，复制服务器就处于活动状态)不同，转换服务器仅在启动过程中出于转换服务器的特定目的而启动，然后立即终止。转换完成后，新的实例在AWS上启动并准备好使用。请注意，连接到已启动实例的卷代表启动时源服务器的状态。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/85797c1fe3b4ae693cd7774c99e6d717.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nK-4r84pWpDALZVVi7FOGA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞缪尔·马丁斯的图片</p></figure><p id="cda9" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">启动后，新创建的卷不再与源服务器保持同步。对源服务器所做的任何更改仍然会由AWS复制代理不断复制到临时区域卷，但是这些更改不会应用到已启动的实例。每次启动新的测试或转换实例时，它都会反映从源服务器复制到临时区域子网的数据的最新状态。使用这种设计，您可以快速测试启动的实例，而不会中断源服务器或复制过程。您还能够按需启动源服务器的最新拷贝。为同一个源服务器启动新实例将自动清理并覆盖该服务器以前的副本(如果以前启动过的话)。这有助于最小化成本，并避免未使用资源的积累。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="1244" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">要准备运行AWS MGN的网络，请设置以下连接:</p><ul class=""><li id="6b57" class="lz ma iq lf b lg lh lj lk lm mb lq mc lu md ly me mf mg mh bi translated">源服务器和AWS MGN API端点之间的连接。允许源服务器上的AWS复制代理和AWS MGN端点之间的端口443上的连接。这种连接的目的是身份验证、配置和监控。对于AWS复制代理安装，并且只要源服务器正在复制，就必须有这种连接。因为这是一个HTTPS连接，所以可以使用源服务器上的标准设置通过web代理进行重定向。您还需要允许源服务器和S3之间的连接。设置此连接，以便AWS复制代理可以从S3存储桶中检索必要的软件组件。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e032673bf17328fb0b84c642b7d65898.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iwu4avjwOPUdiwOp70gkwA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞缪尔·马丁斯的图片</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6cfa907e36562e1e10d2112c59b755b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3otF5t4__Ntu9mvrTE-0bg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞缪尔·马丁斯的图片</p></figure><ul class=""><li id="8032" class="lz ma iq lf b lg lh lj lk lm mb lq mc lu md ly me mf mg mh bi translated">源服务器和临时区域子网之间的连接。AWS复制代理将数据从源服务器直接发送到端口1500上的复制服务器。因此，必须允许通过端口1500进行连接，以实现连续数据复制。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/60a917e6ba78a49079fe8bcc277f9d5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bCaypKjnCTC1njfWzU9sBg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞缪尔·马丁斯的图片</p></figure><ul class=""><li id="bfa0" class="lz ma iq lf b lg lh lj lk lm mb lq mc lu md ly me mf mg mh bi translated">中转区之外的连接。在临时区域子网中启动的AWS MGN复制服务器和转换服务器必须在端口443上持续与AWS MGM端点通信，以便进行身份验证、配置和监控。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6db33704ec662f84066a2a669603e7d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vwfOKRi77CUF3f2RpPhrhQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞缪尔·马丁斯的图片</p></figure><p id="03f9" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">只要复制正在进行，这种连接就必须存在。此外，必须允许与S3的连接。当复制或转换服务器启动时，它连接到S3存储桶以下载软件和配置文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3d5b381ca2ced63e5dcf5685bc19eeca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C578JRHUZgw3fpo1yBo1rg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞缪尔·马丁斯的图片</p></figure><ul class=""><li id="e030" class="lz ma iq lf b lg lh lj lk lm mb lq mc lu md ly me mf mg mh bi translated">最后，复制服务器的角色之一是发出API调用，以便在复制期间拍摄分段EBS卷的快照。为此，还必须在端口443上建立到EC2 API端点的连接。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9a150f3bb3be221e31d581876d3e0eb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xbGVi5-x30T7HUKszDxZgg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞缪尔·马丁斯的图片</p></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="d1d6" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">感谢您花时间来看这个架构。我希望这有助于你理解AWS MGN，因为它帮助了我，因为我正在研究它。</p></div></div>    
</body>
</html>