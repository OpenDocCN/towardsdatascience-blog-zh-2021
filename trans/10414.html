<html>
<head>
<title>Python Lists Are Overrated</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python列表被高估了</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-lists-are-overrated-776e87cda3e5?source=collection_archive---------27-----------------------#2021-10-04">https://towardsdatascience.com/python-lists-are-overrated-776e87cda3e5?source=collection_archive---------27-----------------------#2021-10-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="99df" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">考虑这些潜在的更好的选择</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2525e372037c5e6d22260d8a214de5fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s0OSPz6M0e1jwSBSPM-N2g.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由来自<a class="ae kv" href="https://www.pexels.com/photo/woman-programming-on-a-notebook-1181359/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">佩克斯</a>的<a class="ae kv" href="https://www.pexels.com/@divinetechygirl?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">克里斯蒂娜·莫里洛</a>拍摄</p></figure><p id="6b17" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您使用Python已经有一段时间了，那么您应该非常熟悉列表；它们无处不在。</p><p id="3f59" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">列表可以说是Python中最流行的数据结构，很容易理解为什么。它们具有巨大的实用性和多功能性。</p><p id="51f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不幸的是，随着对列表的严重依赖，忽略了其他有能力的数据结构，这些数据结构可以说比列表执行得更好。</p><p id="286a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可能会想:这有什么关系呢？如果列表能完成工作，为什么还要用其他工具呢？</p><p id="346b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您满足于处理少量数据，这种推理是合理的。然而，如果你打算利用你的技能为其他公司服务，你应该明白，你不能对如何存储和处理你的数据如此松懈。</p><p id="e783" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">经常被数十亿字节的数据所累的公司强调开发在时间和内存消耗方面优化的高效程序的重要性。</p><p id="4bd1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">效率和功能一样重要！</p><p id="f668" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您需要理解，即使有多种工具可以完成工作，但有些工具就是比其他工具优越。了解哪种数据结构对于特定场景是理想的，对于提高代码质量来说是一个巨大的进步。</p><p id="c79e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然列表确实是一种可靠的数据结构，但它们并不适合所有情况。以下是几个值得考虑的替代方案。</p><h1 id="834c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">1.元组</h1><p id="ee69" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">元组与列表有许多相似之处。这两种数据结构都存储不同的数据类型，并为它们的元素分配特定的顺序。</p><p id="26cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">两者之间的主要区别在于，与列表不同，元组是<strong class="ky ir">不可变的</strong>。它们的赋值不能以任何方式改变。</p><p id="33a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">考虑到程序员经常需要修改他们存储的数据，这使得列表看起来更有吸引力。然而，出于这个原因完全省略元组是错误的。</p><p id="864d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管元组不允许你改变它的值，但它仍然比列表有一个主要的优势:<strong class="ky ir">内存使用</strong>。元组比列表需要更少的空间来存储相同数量的数据。</p><p id="3793" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们用一个简单的例子来说明这一点。</p><p id="6842" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里，我们创建一个存储相同值的列表和元组，并使用<em class="mp"> sys </em>模块来确定两个对象的大小。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由作者创建</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/f31cedd824dd9352d9778fe87c23c2dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*SXVutPzJ8HUi9NnSq0_G5Q.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">代码输出(由作者创建)</p></figure><p id="0ef6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如上所示，元组需要更少的内存来存储与列表相同的数据。</p><p id="3ea4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建内存高效的程序是必须的，这就是为什么有必要将这种数据结构保存在您的武库中。</p><p id="363d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于元组是不可变的，所以只能用来存储值和查找值。因此，使用元组的理想场景是当您知道元组中的值并且不需要修改它们时。</p><h1 id="75f6" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">2.Numpy数组</h1><p id="aad4" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">与列表不同，numpy数组不是内置的数据结构。它们来自numpy模块，专门进行数学运算。</p><p id="131f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与列表不同，numpy数组只存储同质值(即数组的元素必须是同一类型)。</p><p id="ffd2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">幸运的是，它们弥补了这个缺点，允许您以更少的内存使用和更快的运行时间来执行各种计算。</p><p id="64e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的例子展示了numpy数组的快速运行时间。</p><p id="0808" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设我们希望创建2个包含1，000，000个值的列表，范围从0到999，999，然后将每个列表的元素相加，形成第三组值。让我们来看看用列表和numpy数组实现这一点需要多少时间。</p><p id="26f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mp">注意:运行时间将通过使用“%%timeit”神奇函数</em>得出</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">运行时间:148毫秒(由作者创建)</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">运行时间:3.8毫秒(由作者创建)</p></figure><p id="b14a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">运行时间的差异证明了numpy数组的可用性。</p><p id="59e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除了运行时间更短之外，numpy数组的内存效率也更高。让我们使用<em class="mp"> sys </em>模块来比较包含1，000，000个值的列表和包含1，000，000个值的numpy数组的大小。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由作者创建</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/e0f47eeb6db4e7c1d4108041e4651d3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/1*-ir-szGPQ46nOqPFdqiJAg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">代码输出(由作者创建)</p></figure><p id="425f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当存储1，000，000个值时，numpy数组使用的内存不到列表的一半。</p><p id="0526" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总的来说，numpy数组在运行时间和内存使用上都超过了lists。虽然使用列表进行简单的计算是完全可以的，但是当涉及到计算密集型的计算时，numpy数组是您最好的选择。</p><h1 id="74aa" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">3.设置</h1><p id="7bc6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在我看来，集合是Python中最容易被忽视的数据结构。</p><p id="a84e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据定义，集合存储不同值的可变集合。鉴于集合不允许重复，人们可能会选择坚持使用列表，因为他们已经习惯使用后者。</p><p id="b880" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，忽略集合意味着抛弃所有伴随它们而来的功能。</p><p id="eeab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在执行搜索时，集合是非凡的。</p><p id="b2c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">举个例子，让我们把这些文本语料库(可以通过这个<a class="ae kv" href="https://www.shawlocal.com/2017/04/06/what-is-your-opinion-on-social-media/ajmj3gi/" rel="noopener ugc nofollow" target="_blank">链接</a>访问)拆分成一个单词集合。这些单词将存储在列表和集合中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由作者创建</p></figure><p id="3b4a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在比较在列表和第一个语料库的集合中搜索单词“believe”所花费的时间之前，为了公平比较，我将从列表中删除重复值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">删除重复项(由作者创建)</p></figure><p id="69c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是两种搜索的比较:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">运行时间:313ns(由作者创建)</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">运行时间:53.5ns(由作者创建)</p></figure><p id="6365" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">运行时间的差别是白天和黑夜。</p><p id="ba8f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，集合提供了许多功能，使搜索变得更加容易。</p><p id="1d18" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，如何找到在两个文本语料库中都存在的所有单词？下面是如何使用列表来实现的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">运行时间:37.3秒(由作者创建)</p></figure><p id="820a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是使用集合时的样子。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">运行时间:586ns(由作者创建)</p></figure><p id="0e43" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">set不仅用更少的时间完成了任务，还用更少的代码行完成了任务。集合提供了许多有用的功能，如“交集”,使程序员能够从不同的集合中提取所需的数据。</p><p id="1ec9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，在执行搜索时，设置很容易胜过列表。然而，当使用集合时，有一个必须考虑的<strong class="ky ir">速度-内存权衡</strong>。虽然集合可以缩短运行时间，但它们也需要更多内存。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由作者创建</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mu"><img src="../Images/e98ecaef3e736e6040805025873946e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/format:webp/1*-HqNTH-5JEjr_VIe7Sj8-Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">代码输出(由作者创建)</p></figure><p id="e682" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">是否应该使用集合取决于项目的目标和限制。如果您的首要任务是最小化运行时间，那么集合就是理想的数据结构。</p><h1 id="e81f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/23ae83587790241b8d160421a89a9cb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iEGV0LbyKJ-xY4rBoSIi-A.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由来自<a class="ae kv" href="https://www.pexels.com/photo/black-and-white-laptop-2740956/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">佩克斯</a>的<a class="ae kv" href="https://www.pexels.com/@prateekkatyal?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">普拉蒂克·卡蒂亚尔</a>拍摄</p></figure><p id="efed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总的来说，列表是非常通用的，但是仅仅依靠它们来存储数据是错误的。为了编写有效的代码，熟悉使用不同数据结构的优点和缺点是很重要的。</p><p id="0f09" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你限制自己只使用列表(即使它们足够了)，你就限制了自己作为程序员的能力，并且限制了代码的效率。</p><p id="83c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">希望您现在已经学会了在执行数据操作时总是考虑可选的数据结构。</p><p id="8b78" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我祝你在编码工作中好运！</p></div></div>    
</body>
</html>