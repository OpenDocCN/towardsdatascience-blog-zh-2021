<html>
<head>
<title>How To Do A/B Testing On MOBA Games</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在MOBA游戏上进行A/B测试</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-do-a-b-testing-on-moba-games-e44891c5701?source=collection_archive---------26-----------------------#2021-09-07">https://towardsdatascience.com/how-to-do-a-b-testing-on-moba-games-e44891c5701?source=collection_archive---------26-----------------------#2021-09-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="838a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">屠夫布丁的例子</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/12593779775430899dca8ace834c5331.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*E95NJB7F9bad_m3u"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">弗拉季斯拉夫·比契科夫在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="b9db" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="abb2" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">DOTA2是一款流行的大型在线战场(MOBA)游戏，拥有数百万的每日活跃用户。玩家从121个英雄中挑选，在5v5游戏中玩。众所周知，这个游戏有一个陡峭的学习曲线，没有一个英雄可以保证胜利。事实上，每个英雄似乎都有另一个完美的对手。</p><p id="136b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">DOTA2也是一个不断发展的游戏，为了保持游戏平衡，物品和英雄要么得到<strong class="lq ir"><em class="mp"/></strong>要么得到<strong class="lq ir"> <em class="mp">削弱</em> </strong>。例如，最近发布了补丁7.30，社区很快指出了现在“<em class="mp">坏掉</em>”的英雄，也就是说，他们被打磨得如此之多，以至于胜率高得离谱(<a class="ae kv" href="https://www.youtube.com/watch?v=tp-BAkXv9XQ" rel="noopener ugc nofollow" target="_blank">见这个例子</a>)。</p><p id="83d0" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这就提出了一个问题:DOTA2开发者如何保持游戏平衡？我们如何确定一个英雄是否被成功地强化/削弱？</p><p id="a859" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">本文的目的是展示假设检验如何作为一种游戏平衡的衡量标准，以及如何与OpenDOTA API交互。</p><h1 id="150c" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">假设公式</h1><p id="8019" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">这篇文章选择的英雄是<a class="ae kv" href="https://www.dota2.com/hero/pudge" rel="noopener ugc nofollow" target="_blank"> Pudge </a>，他是<a class="ae kv" href="https://www.dotabuff.com/heroes/winning?date=all" rel="noopener ugc nofollow" target="_blank">最受欢迎的</a>和多才多艺的DOTA2英雄之一。这是一个经常被削弱/增强的英雄，引起了DOTA2社区的强烈反应(<a class="ae kv" href="https://www.reddit.com/r/DotA2/comments/92n7gw/nerf_pudge_already/" rel="noopener ugc nofollow" target="_blank">见这里的例子</a>)。由于<a class="ae kv" href="https://www.youtube.com/watch?v=d6H-HEpnlk8" rel="noopener ugc nofollow" target="_blank">喷泉钩故障</a>使得男主角如果与<a class="ae kv" href="https://www.dota2.com/hero/chen" rel="noopener ugc nofollow" target="_blank">陈</a>搭档肯定会被干掉，所以《胖墩》也有相当大的争议。</p><p id="7706" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">胖墩是不是神经过敏了？我们需要看看胜率的变化，其定义为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/5f5c4ca8b2588f0ca1254f3a7ba9438d.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*NAd28swdvpGBODDzPgkdPA.png"/></div></figure><p id="950b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">把赢得游戏的几率想象成掷硬币是有用的:你要么赢，要么输。因此，我们处理的是二项分布，如果样本量足够大(通常n&gt;30)，我们可以使用z检验。对于这个测试，我们使用双尾测试，P值为0.05，相应的z值为1.96。</p><p id="e67f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这些假设是:</p><ul class=""><li id="d2d1" class="mr ms iq lq b lr mk lu ml lx mt mb mu mf mv mj mw mx my mz bi translated"><strong class="lq ir">零假设:</strong> 2019年的布丁和2020年的布丁没什么区别，胜率是一样的。</li><li id="87a1" class="mr ms iq lq b lr na lu nb lx nc mb nd mf ne mj mw mx my mz bi translated"><strong class="lq ir">候补假设</strong> : 2019年的布丁和2020年的布丁不一样，胜率变了。</li></ul><p id="e30c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们正在比较平均值，可以使用下面的公式:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/d53704b7c575406d578bfe9b196162d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:518/format:webp/1*IYf6XR32cU5efcB5LNfyAg.png"/></div></figure><p id="adec" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">使得<code class="fe ng nh ni nj b">p_hat</code>被定义为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/5d92300d0cca9b5bc8fd956c2702c537.png" data-original-src="https://miro.medium.com/v2/resize:fit:202/format:webp/1*GbnQbJXeEYpGeb1cG12H7g.png"/></div></figure><h1 id="31b4" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">数据收集</h1><p id="553c" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">使用<a class="ae kv" href="https://www.opendota.com/explorer?sql=select%20match_id%20from%20matches%0Ajoin%20team_match%20using(match_id)%0Awhere%20team_id%20%3D%2036%0Aorder%20by%20match_id%20desc" rel="noopener ugc nofollow" target="_blank"> OpenDota Explorer </a>获取数据，它允许我们编写SQL查询来提取数据。完整的表格模式可在此处找到:</p><div class="nl nm gp gr nn no"><a href="https://github.com/odota/core/blob/master/sql/create_tables.sql" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">主odata/core上的core/create_tables.sql</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">开源Dota 2数据平台。通过在GitHub上创建帐户，为odata/core开发做出贡献。</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">github.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc kp no"/></div></div></a></div><h2 id="65aa" class="od kx iq bd ky oe of dn lc og oh dp lg lx oi oj li mb ok ol lk mf om on lm oo bi translated">数据模式</h2><p id="deba" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">显然，我们不会查询整个数据库，下图显示了感兴趣的表和关系。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/0c73d77fb71ed7fae076090ad3338ed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ab5rPg7H-hNp1WkrLy62pA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者素描</p></figure><h2 id="61fa" class="od kx iq bd ky oe of dn lc og oh dp lg lx oi oj li mb ok ol lk mf om on lm oo bi translated">用SQL实现</h2><p id="2039" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">例如，我们可以使用下面的查询提取2020年的数据。注意，虽然我们想要2020年的比赛，但是时间框架被主要补丁任意限制(见第17-20行)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="4127" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">结果是下面的快照，我们可以下载为csv表。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/64ea9971492cb2ddba45786c849598a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_BgOV6gOAnXL30QwughnsA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者截屏</p></figure><h1 id="fb9e" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">实验结果</h1><p id="6b59" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">比较胜率的结果p值是0.570，表明我们应该保留原假设，拒绝替代假设。</p><p id="d694" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">然而，人们必须问:我们是在比较苹果和苹果吗？评估的一种方法是评估额外的变量。</p><h1 id="7baa" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">比赛持续时间</h1><p id="7319" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们可以关注的一个控制变量是比赛持续时间。均值差异的z得分为2.754，表明两个样本之间的匹配持续时间在统计学上不同。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/9d2e3257f75e3c3d03455cd178704415.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*j7Eul0tdAtXSoOhKzGknbA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><h1 id="64d6" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">团队选择</h1><p id="08d1" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">2019和2020样品的团队辐射/迪瑞的选择是一样的吗？这个实验的p值是0.007，因此，在两个时间段，团队的选择是相同的。</p><h1 id="4a87" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">限制</h1><p id="a32a" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">第一个限制是样本数量。事实上，该查询返回了2020年的约250款游戏和2019年的650款游戏。相比之下，平均每天有220万场比赛，样本数量看起来并不令人印象深刻。</p><p id="2bb7" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">比赛持续时间是另一个比其面值更复杂的变量。事实上，每个英雄都有不同的能量峰值，这是游戏持续时间的函数。比如有些英雄在游戏初期极其强大，第30分钟后就脱落了。</p><p id="f905" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">此外，返回的匹配来自同意公开他们游戏数据的玩家。更具体地说，比赛往往来自职业球员和联赛。因此，实验结果不能外推到每一个游戏级别。如果玩家等级(<a class="ae kv" href="https://dota2.fandom.com/wiki/Matchmaking_Rating" rel="noopener ugc nofollow" target="_blank"> MMR </a>)已知，这种限制可以很容易地被纠正。</p><h1 id="efbe" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="dafb" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">实验最终没有结果，因为我们不确定Pudge是被削弱了还是被增强了。DOTA是一个具有复杂机制的游戏，虽然没有明确的答案令人沮丧，但学习新东西总是很有趣。</p><p id="2b2b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果您希望研究整个代码，请参见下面的资源库:</p><div class="nl nm gp gr nn no"><a href="https://github.com/NadimKawwa/dota_hypothesis_test" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">GitHub-NadimKawwa/dota _ hypothesis _ test:使用样本英雄对胜率进行假设检验</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">使用样本对胜率进行假设检验</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">github.com</p></div></div><div class="nx l"><div class="ou l nz oa ob nx oc kp no"/></div></div></a></div><h1 id="b0a3" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">参考</h1><div class="nl nm gp gr nn no"><a href="https://en.wikipedia.org/wiki/Statistical_hypothesis_testing" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">统计假设检验-维基百科</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">统计假设是一种假设，可以根据模拟为实际值的观察数据进行检验…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">en.wikipedia.org</p></div></div><div class="nx l"><div class="ov l nz oa ob nx oc kp no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://stats.stackexchange.com/questions/113602/test-if-two-binomial-distributions-are-statistically-different-from-each-other" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">测试两个二项分布在统计上是否不同</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">begingroup$我有三组数据，每组都是二项分布(也就是说，每组的元素都是…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">stats.stackexchange.com</p></div></div><div class="nx l"><div class="ow l nz oa ob nx oc kp no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://github.com/odota/core/blob/master/sql/create_tables.sql" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">主odata/core上的core/create_tables.sql</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">开源Dota 2数据平台。通过在GitHub上创建帐户，为odata/core开发做出贡献。</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">github.com</p></div></div><div class="nx l"><div class="ox l nz oa ob nx oc kp no"/></div></div></a></div></div></div>    
</body>
</html>