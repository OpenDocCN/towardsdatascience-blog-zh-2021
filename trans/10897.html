<html>
<head>
<title>A Python OR-Tools Model for Seasonal Inventory Planning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">季节性库存计划的Python或-Tools模型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-python-or-tools-model-for-seasonal-inventory-planning-483aaf5aa8b?source=collection_archive---------19-----------------------#2021-10-22">https://towardsdatascience.com/a-python-or-tools-model-for-seasonal-inventory-planning-483aaf5aa8b?source=collection_archive---------19-----------------------#2021-10-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="55b1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何在SCIP求解器中使用Google的ortools python包进行数学优化</h2></div></div><div class="ab cl ki kj hx kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="im in io ip iq"><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/d48a1b7f2ca13e147790e67b42dcf818.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*m7EhxX4igMo5ToyP"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">内森·莱蒙在<a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl ki kj hx kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="im in io ip iq"><h1 id="f402" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated"><strong class="ak">为什么会有季节性库存？</strong></h1><p id="5756" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">生产设施可能没有能力在重要季节生产季节性产品。在换季前建立额外的库存通常比购买额外的工具和空间更便宜。例如:</p><ul class=""><li id="6c4f" class="mu mv it ma b mb mw me mx mh my ml mz mp na mt nb nc nd ne bi translated">如果季节性产品是制造商业务的重要组成部分，那么在淡季安排生产可以在更长的时间内平衡资源。这使得工厂能够配备全职员工，而不是依赖季节性劳动力。</li><li id="bd7f" class="mu mv it ma b mb nf me ng mh nh ml ni mp nj mt nb nc nd ne bi translated">即使这些设施能够激增产能以满足需求，也可能导致额外的管理费用，包括加班费。将产品储存在库存中的成本可能低于这一增加的成本。</li></ul><p id="a777" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh nk mj mk ml nl mn mo mp nm mr ms mt im bi translated">采用季节前构建方法时，有几个问题需要回答:</p><ul class=""><li id="5ac7" class="mu mv it ma b mb mw me mx mh my ml mz mp na mt nb nc nd ne bi translated">在季节开始之前，要生产的产品数量是多少？</li><li id="7939" class="mu mv it ma b mb nf me ng mh nh ml ni mp nj mt nb nc nd ne bi translated">假设随着时间的推移，随着生产计划的顺利进行，库存会逐渐增加，那么制造业需要在什么时候开始生产过剩的库存来为旺季储存呢？</li></ul><p id="e1e1" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh nk mj mk ml nl mn mo mp nm mr ms mt im bi translated">虽然可以用纸和笔设计出一个简单的模型，但这个模型提供了一个可扩展的框架，可以在竞争能力有限的情况下为多种产品提供基础。</p><h1 id="d073" class="lg lh it bd li lj nn ll lm ln no lp lq jz np ka ls kc nq kd lu kf nr kg lw lx bi translated">模型设置</h1><p id="95b9" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">在创建此多期库存模型之前，请使用pip安装或工具。</p><pre class="kq kr ks kt gt ns nt nu nv aw nw bi"><span id="cc29" class="nx lh it nt b gy ny nz l oa ob">pip install ortools</span></pre><p id="85aa" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh nk mj mk ml nl mn mo mp nm mr ms mt im bi translated">接下来，导入包并使用数据设置模型。该模型的数据表示从2021年7月到2022年6月的月份。</p><ul class=""><li id="b70b" class="mu mv it ma b mb mw me mx mh my ml mz mp na mt nb nc nd ne bi translated">产品需求累计至每月周期</li><li id="73d6" class="mu mv it ma b mb nf me ng mh nh ml ni mp nj mt nb nc nd ne bi translated">对每月能生产的产品数量的[生产能力]限制</li><li id="5408" class="mu mv it ma b mb nf me ng mh nh ml ni mp nj mt nb nc nd ne bi translated">生产和储存成本</li><li id="8c0d" class="mu mv it ma b mb nf me ng mh nh ml ni mp nj mt nb nc nd ne bi translated">初始库存，尽管库存通常会被建模为变量</li></ul><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="oc od l"/></div></figure><h1 id="25c2" class="lg lh it bd li lj nn ll lm ln no lp lq jz np ka ls kc nq kd lu kf nr kg lw lx bi translated">使用python和ortools的优化模型</h1><p id="9fbb" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">Google有很好的文档和对python和其他一些语言的介绍。该模型遵循该框架，但对多期库存模型进行了更详细的描述。</p><p id="99e9" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh nk mj mk ml nl mn mo mp nm mr ms mt im bi translated">声明是大多数优化模型的第一步。我们声明要使用的求解器(<a class="ae lf" href="https://www.scipopt.org/" rel="noopener ugc nofollow" target="_blank"> SCIP </a>)和算法用来确定最优解的决策变量。</p><p id="9f92" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh nk mj mk ml nl mn mo mp nm mr ms mt im bi translated">一般来说，编写比“p”代表产量，“b”代表期初库存，“e”代表期末库存更多的描述性变量是一种好的做法，但格式化代码使代码不换行也是一种好的做法。因此，没有一种风格适合所有情况。</p><p id="09de" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh nk mj mk ml nl mn mo mp nm mr ms mt im bi translated">产量是决策变量，期初和期末库存变量受产量和需求的影响。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="5af6" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh nk mj mk ml nl mn mo mp nm mr ms mt im bi translated">输出:</p><pre class="kq kr ks kt gt ns nt nu nv aw nw bi"><span id="f50b" class="nx lh it nt b gy ny nz l oa ob">Number of variables = 36</span></pre><p id="37f5" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh nk mj mk ml nl mn mo mp nm mr ms mt im bi translated">接下来是约束条件。这个模型着眼于12个月，从2021年7月到2022年6月。库存模型的细微差别是将本期的期末库存与下一期的期初库存联系起来。其他约束条件是标准供应链约束条件，用于:</p><ul class=""><li id="1d3d" class="mu mv it ma b mb mw me mx mh my ml mz mp na mt nb nc nd ne bi translated">在不超出产能的情况下满足客户需求</li><li id="133b" class="mu mv it ma b mb nf me ng mh nh ml ni mp nj mt nb nc nd ne bi translated">从一个时期到下一个时期的平稳生产水平(对于该模型，0.8的alpha用于将每月的变化限制在20%以内)</li></ul><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/62e157f54bab3378891df9cd9e84bf94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/1*rf0Ub4sP-rbwqr_LdJcwgA.png"/></div></figure><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="f234" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh nk mj mk ml nl mn mo mp nm mr ms mt im bi translated">输出:</p><pre class="kq kr ks kt gt ns nt nu nv aw nw bi"><span id="2e7d" class="nx lh it nt b gy ny nz l oa ob">Number of constraints = 70</span></pre><p id="bc61" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh nk mj mk ml nl mn mo mp nm mr ms mt im bi translated">模型的最后一部分是目标函数，以最小化总成本。总成本是生产成本和库存储存成本的总和。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi of"><img src="../Images/77b61023f4f8e30ad94dbd5ab4189af1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*Z-Y6Tj27RCebXbmPiaBB8A.png"/></div></figure><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="277e" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh nk mj mk ml nl mn mo mp nm mr ms mt im bi translated">输出:</p><pre class="kq kr ks kt gt ns nt nu nv aw nw bi"><span id="eeff" class="nx lh it nt b gy ny nz l oa ob">Total cost =  29812 <br/><br/>Solver wall time =  4134680<br/>Problem solved in 40 iterations</span></pre><h1 id="4782" class="lg lh it bd li lj nn ll lm ln no lp lq jz np ka ls kc nq kd lu kf nr kg lw lx bi translated">分析结果</h1><p id="cfc8" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">该模型的最优值是总成本29812。这有意义吗？</p><p id="f049" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh nk mj mk ml nl mn mo mp nm mr ms mt im bi translated">如果将12个月的总需求(减去初始库存)乘以10，预测需求的最低生产成本为27，400，这是单位生产成本。然而，额外的限制，如最低库存水平、生产平稳性和库存持有成本会导致更高的成本。所以29812是合理的。</p><p id="9e51" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh nk mj mk ml nl mn mo mp nm mr ms mt im bi translated">要查看解决方案，让我们格式化熊猫数据框中的数据。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="3790" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh nk mj mk ml nl mn mo mp nm mr ms mt im bi translated">输出:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi og"><img src="../Images/fef27b7155bf394f9c20209839eb9d52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*P93KaRwu0RU4-mMHtsvjxg.png"/></div></figure><p id="a330" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh nk mj mk ml nl mn mo mp nm mr ms mt im bi translated">这张表可以让你很容易地找到许多问题的答案。除了看到变量(期初库存、产量、期末库存)，下面也很容易看到:</p><ul class=""><li id="b2b6" class="mu mv it ma b mb mw me mx mh my ml mz mp na mt nb nc nd ne bi translated">根据要求，库存没有减少到50件以下</li><li id="a69d" class="mu mv it ma b mb nf me ng mh nh ml ni mp nj mt nb nc nd ne bi translated">需求得到了满足。如果由于模型的当前公式而导致需求未得到满足，则该模型将<em class="oh">不可行</em>。</li><li id="ef05" class="mu mv it ma b mb nf me ng mh nh ml ni mp nj mt nb nc nd ne bi translated">最大容量在12月的高峰期得到了充分利用，但也可以追溯到11月、10月和9月。</li></ul><p id="17da" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh nk mj mk ml nl mn mo mp nm mr ms mt im bi translated">因此，在8月份开始生产过剩库存可能是明智的，这是为了预防一切都不尽如人意的情况。如果生产落后于8月份以后，就不可能赶上了。虽然这是一个很好的快速工具，用于调整和战略讨论，但对于战术或运营计划，每周和每天的视图将是必不可少的。</p><h1 id="74be" class="lg lh it bd li lj nn ll lm ln no lp lq jz np ka ls kc nq kd lu kf nr kg lw lx bi translated">模型限制</h1><p id="7a08" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">这种库存计划模型有许多局限性。这里有几个例子。</p><ol class=""><li id="3802" class="mu mv it ma b mb mw me mx mh my ml mz mp na mt oi nc nd ne bi translated">该模型直到12月需求高峰时都有效。模型中使用的数据旨在帮助理解在旺季之前<em class="oh">需要建立多少季节性库存。如您所见，在提供的数据结束时，结果将库存减少到零。由于在12月份达到高峰之前，该模型不用于对季节性库存准备之外的生产进行建模，因此建议只显示12月份的结果。</em></li><li id="c1e8" class="mu mv it ma b mb nf me ng mh nh ml ni mp nj mt oi nc nd ne bi translated">该模型不包括通过加班增加产能的可能性，尽管可变成本结构旨在缓解这种情况下的过渡。</li><li id="b346" class="mu mv it ma b mb nf me ng mh nh ml ni mp nj mt oi nc nd ne bi translated">该模型没有考虑需求的不确定性。</li><li id="e68b" class="mu mv it ma b mb nf me ng mh nh ml ni mp nj mt oi nc nd ne bi translated">该模型不考虑库存能力、吞吐量能力或装货码头能力。这个模型只考虑了生产能力。</li></ol><h1 id="56ae" class="lg lh it bd li lj nn ll lm ln no lp lq jz np ka ls kc nq kd lu kf nr kg lw lx bi translated">结论</h1><p id="bd42" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">Google的ortools是一种很好的方式来扩展数学优化问题，以便与SCIP这样的开源解决方案一起使用。使用python进行优化建模还有其他选择，比如pulp或pyomo。这位作者发现，根据不同的模型，哪种方法效果最好存在差异。每一个都有特别吸引人的特性，比如带有ortools约束编程的<a class="ae lf" href="https://developers.google.com/optimization/cp/original_cp_solver" rel="noopener ugc nofollow" target="_blank"> NextSolution </a>功能。</p><p id="e2c3" class="pw-post-body-paragraph ly lz it ma b mb mw ju md me mx jx mg mh nk mj mk ml nl mn mo mp nm mr ms mt im bi translated">优化建模通常用于有大量节约成本机会的复杂问题。但是随着开源选项和易用性的增长，优化也可以用于扩展和自动化更简单的问题。</p></div></div>    
</body>
</html>