<html>
<head>
<title>Taking Control of Your Workflow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">掌控您的工作流程</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/taking-control-of-your-workflow-943b9a8e7edf?source=collection_archive---------30-----------------------#2021-04-21">https://towardsdatascience.com/taking-control-of-your-workflow-943b9a8e7edf?source=collection_archive---------30-----------------------#2021-04-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0b4f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用pyenv和pipenv在Python中建立令人敬畏的虚拟环境，让你的同事再次喜欢你</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/bff2fd06da87c7d853609099a0ba02d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bG1UbVftFcAMEH0_"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@karishea?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Kari Shea </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="8a57" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">读者注意:</strong>有许多方法可以创建管理Python版本和依赖项的虚拟环境。这篇文章介绍了我的首选方法，但是我鼓励您探索各种选项，并决定哪种方法最适合您！</p><h1 id="8aba" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">为什么您需要虚拟环境</h1><p id="8ea3" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">也许你创建了一个很酷的机器学习数据管道或开发了一个杀手级应用程序，下一步就是与世界分享它！然而，如果您没有跟踪和记录您使用的Python版本或所需的依赖项，那么与您共享它的人将会遇到许多令人头痛的安装错误。</p><h2 id="f724" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated"><strong class="ak">输入pyenv + pipenv </strong></h2><p id="37f6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Pyenv + pipenv提供了一种方法来指定Python版本，并在项目级别安装和跟踪依赖项，从而使将代码交付到生产环境变得更加轻松。</p><h1 id="875a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">基础知识</h1><ol class=""><li id="46c0" class="nb nc iq ky b kz mk lc ml lf nd lj ne ln nf lr ng nh ni nj bi translated">使用这些<a class="ae kv" href="https://github.com/pyenv/pyenv" rel="noopener ugc nofollow" target="_blank">安装</a>说明安装<code class="fe nk nl nm nn b">pyenv</code></li><li id="f500" class="nb nc iq ky b kz no lc np lf nq lj nr ln ns lr ng nh ni nj bi translated">使用<code class="fe nk nl nm nn b">pip install pipenv</code>安装<code class="fe nk nl nm nn b">pipenv</code></li><li id="6998" class="nb nc iq ky b kz no lc np lf nq lj nr ln ns lr ng nh ni nj bi translated">通过在终端中执行以下操作来创建和启动虚拟环境</li></ol><pre class="kg kh ki kj gt nt nn nu nv aw nw bi"><span id="613a" class="mp lt iq nn b gy nx ny l nz oa"><strong class="nn ir"># create a project directory</strong></span><span id="d040" class="mp lt iq nn b gy ob ny l nz oa">$ mkdir myproject<br/>$ cd myproject</span><span id="9b28" class="mp lt iq nn b gy ob ny l nz oa"><strong class="nn ir"># use pyenv to install and set a specific Python version</strong></span><span id="4cae" class="mp lt iq nn b gy ob ny l nz oa">$ pyenv versions <strong class="nn ir"># don't use the system version</strong><br/>$ pyenv install 3.8.5<br/>$ pyenv local 3.8.5</span><span id="b9a4" class="mp lt iq nn b gy ob ny l nz oa"><strong class="nn ir"># create a virtual environment with pipenv</strong></span><span id="cb5c" class="mp lt iq nn b gy ob ny l nz oa">$ pipenv install<br/>$ pipenv shell<br/>(myproject) $ python --version <strong class="nn ir"># 'myproject' indicates active</strong></span><span id="d68f" class="mp lt iq nn b gy ob ny l nz oa"><strong class="nn ir"># install dependencies and check dependency list</strong></span><span id="c5c2" class="mp lt iq nn b gy ob ny l nz oa">(myproject) $ pipenv install pandas<br/>(myproject) $ pip freeze</span><span id="1368" class="mp lt iq nn b gy ob ny l nz oa"><strong class="nn ir"># deactivate Pipenv </strong></span><span id="ad2e" class="mp lt iq nn b gy ob ny l nz oa">(myproject) $ exit <strong class="nn ir"># 'myproject' will disappear</strong></span></pre><p id="155f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">执行完上面的操作后，您现在将拥有一个<code class="fe nk nl nm nn b">pipfile.lock</code>文件。只要这个文件伴随着你的代码，那么就像在文件的位置运行<code class="fe nk nl nm nn b">pipenv install</code>一样简单，所有的依赖项都会被安装。</p><h1 id="4468" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">更进一步——Jupyter笔记本</h1><p id="06b1" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">使用pipenv和定制的IPython内核管理Jupyter笔记本中的依赖项实际上是可能的。扩展上面的<code class="fe nk nl nm nn b">myproject</code>示例，在终端中执行以下命令。</p><pre class="kg kh ki kj gt nt nn nu nv aw nw bi"><span id="5e8c" class="mp lt iq nn b gy nx ny l nz oa"><strong class="nn ir"># activate pipenv virtual environment for 'myproject' directory</strong></span><span id="96ee" class="mp lt iq nn b gy ob ny l nz oa">$ cd myproject<br/>$ pipenv shell</span><span id="3886" class="mp lt iq nn b gy ob ny l nz oa"><strong class="nn ir"># install ipykernel and map custom kernel to virtual environment</strong></span><span id="2759" class="mp lt iq nn b gy ob ny l nz oa">(myproject) $ pipenv install ipykernel<br/>(myproject) $ python -m ipykernel install --user --name=myproject</span><span id="999b" class="mp lt iq nn b gy ob ny l nz oa"><strong class="nn ir"># launch a Jupyter Notebook</strong></span><span id="279b" class="mp lt iq nn b gy ob ny l nz oa">(myproject) $ jupyter notebook</span></pre><p id="8d4a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从Jupyter笔记本中，你可以在内核列表中选择<code class="fe nk nl nm nn b">myproject</code>内核。这将强制笔记本只使用pipenv虚拟环境中安装的依赖项！！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/645f11a840ecd89e054ffda80f5c1a68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3YvbOydTxAibQmsQQEaHqg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在Jupyter笔记本中选择自定义ipykernel</p></figure><h1 id="17c0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">摘要</h1><p id="43d4" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">如果您目前没有管理Python版本和依赖项，或者如果您管理了并且看起来很麻烦，那么使用pyenv + pipenv是一个很好的解决方案。它很容易安装，一旦你开始使用它，你永远不会回头。编码快乐！</p></div></div>    
</body>
</html>