<html>
<head>
<title>Speech Recognition with Timestamps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有时间戳的语音识别</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/speech-recognition-with-timestamps-934ede4234b2?source=collection_archive---------8-----------------------#2021-10-06">https://towardsdatascience.com/speech-recognition-with-timestamps-934ede4234b2?source=collection_archive---------8-----------------------#2021-10-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="059c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Python和vosk API进行离线和免费语音识别</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d9adc7eea2bbabf48dad96f094ca9e7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uxly3IZBzB95-_Yncaaw1w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带时间戳的语音识别。作者图片</p></figure><p id="b790" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这篇文章中，我将告诉你如何使用Python实现带有时间戳的<strong class="la iu">离线语音识别。以下示例中的代码将允许您识别音频文件并获得置信度、每个单词的开始和结束时间<strong class="la iu"/>、超过15种语言、<strong class="la iu">离线</strong>和免费。</strong></p><p id="facb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我将使用<a class="ae lu" href="https://alphacephei.com/vosk/" rel="noopener ugc nofollow" target="_blank"> vosk API </a>。参见下面的文章，了解如何设置vosk库。在本文中，您还可以找到无需时间戳即可进行离线语音识别的代码。</p><div class="lv lw gp gr lx ly"><a href="https://medium.com/@andimid/offline-foreign-speech-recognition-32d8d63de2dc" rel="noopener follow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">离线外语语音识别</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">如何为免费和离线的外国(非英语)语音识别设置Python库</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">medium.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ks ly"/></div></div></a></div><p id="e85f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，安装库并下载模型。</p><p id="bba2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">重要提示</strong> —音频必须为<strong class="la iu"> wav单声道</strong>格式。如果你的音频文件以不同的格式编码，用一些免费的在线工具如<a class="ae lu" href="https://audio.online-convert.com/convert-to-wav" rel="noopener ugc nofollow" target="_blank"> this </a>将它转换成wav单声道。</p><h1 id="df14" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">Vosk的输出数据格式</h1><p id="323f" class="pw-post-body-paragraph ky kz it la b lb nf ju ld le ng jx lg lh nh lj lk ll ni ln lo lp nj lr ls lt im bi translated">Vosk模型以JSON格式输出结果。语音识别的最终结果是<code class="fe nk nl nm nn b">results</code>变量，它是JSON字典的列表。该列表的每个元素具有以下结构:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="97d0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第一个元素<code class="fe nk nl nm nn b">result</code> —也是一个JSON字典列表。这个变量实际上代表一个句子，并包含一个句子中每个单词的四个变量<em class="nq">:置信度、开始和结束时间以及识别的单词。</em></p><p id="b97a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第二个元素，<code class="fe nk nl nm nn b">text</code>组合了程序确定为句子的所有已识别单词。它可以用于简单的语音识别，如上文所述。</p><p id="b9f0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了方便起见，我创建了一个简单的<code class="fe nk nl nm nn b">Word</code>类，它以那种格式表示一个单词。除了用于实例化类的<code class="fe nk nl nm nn b">__init__</code>方法之外，它只有一个打印对象的方法。我们以后会用到它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><h1 id="34d9" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">程序的本质</h1><p id="1469" class="pw-post-body-paragraph ky kz it la b lb nf ju ld le ng jx lg lh nh lj lk ll ni ln lo lp nj lr ls lt im bi translated">一旦我们得到了<code class="fe nk nl nm nn b">results</code>变量，我们只需要遍历它包含的列表来获得我们需要的信息。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="cfd0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">该程序输出以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/c758230b96b9db968ae096c91b4de5d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*X0qs_MBOwjFn-7-7z-Uy4w.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">程序的结果。作者图片</p></figure><p id="9609" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我使用了与上一篇文章相同的音频文件。在这里，我从维基百科上的一篇<a class="ae lu" href="https://en.wikipedia.org/wiki/Speech_recognition" rel="noopener ugc nofollow" target="_blank">语音识别文章中读到了一段文字。具体来说，这里识别的短语是:“某些语音识别系统需要训练(也称为“注册”)，其中…”。</a></p><p id="e964" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在上面的代码示例中，我保持了大纲的简单。对于可靠的、防御性的编程，我建议增加对文件存在和vosk模型、文件格式等的检查。在<a class="ae lu" href="https://gitlab.com/Winston-90/foreign_speech_recognition/-/tree/main/timestamps" rel="noopener ugc nofollow" target="_blank">git lab repo</a>中有更详细评论的完整程序。</p><div class="lv lw gp gr lx ly"><a href="https://gitlab.com/Winston-90/foreign_speech_recognition/-/tree/main/timestamps" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">时间戳主Dmytro Nikolai ev/foreign _ speech _ recognition</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">使用Python、vosk、SpeechRecognition / Pocketsphinx进行免费的离线外语(非英语)语音识别</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">gitlab.com</p></div></div><div class="mh l"><div class="ns l mj mk ml mh mm ks ly"/></div></div></a></div></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="76e2" class="mn mo it bd mp mq oa ms mt mu ob mw mx jz oc ka mz kc od kd nb kf oe kg nd ne bi translated">感谢您的阅读！</h1><ul class=""><li id="7170" class="of og it la b lb nf le ng lh oh ll oi lp oj lt ok ol om on bi translated">我希望这些材料对你有用。<a class="ae lu" href="https://medium.com/@andimid" rel="noopener">在Medium </a>上关注我，获取更多类似的文章。</li><li id="9937" class="of og it la b lb oo le op lh oq ll or lp os lt ok ol om on bi translated">如果您有任何问题或意见，我将很高兴得到任何反馈。在评论里问我，或者通过<a class="ae lu" href="https://www.linkedin.com/in/andimid/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>或者<a class="ae lu" href="https://twitter.com/dimid_ml" rel="noopener ugc nofollow" target="_blank"> Twitter </a>联系。</li><li id="e1f4" class="of og it la b lb oo le op lh oq ll or lp os lt ok ol om on bi translated">为了支持我作为一个作家，并获得数以千计的其他媒体文章，使用<a class="ae lu" href="https://medium.com/@andimid/membership" rel="noopener">我的推荐链接</a>获得媒体会员资格(不收取额外费用)。</li></ul></div></div>    
</body>
</html>