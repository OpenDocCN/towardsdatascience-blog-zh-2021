<html>
<head>
<title>Correlation Explained Visually</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">直观解释相关性</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/correlation-explained-visually-4875448e8e56?source=collection_archive---------11-----------------------#2021-06-12">https://towardsdatascience.com/correlation-explained-visually-4875448e8e56?source=collection_archive---------11-----------------------#2021-06-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="161c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">皮尔逊相关的几何方法有助于深入理解它，并更准确地解释其结果。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/aa606c88e93a78521c2b18160ce8615d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wiJzwepekyTCr7vmIft5AQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">[图片由作者提供]</p></figure><p id="bcaa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不时会有人过来说“我终于找到了皮尔逊相关的替代品”。事实是——尽管有缺点——皮尔逊相关系数(又称T0系数)因其简单、稳健和可靠而难以替代。</p><p id="4755" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，冷硬公式可能有点难以把握。因此，我试图找到皮尔森的<em class="lu"> r </em>的视觉解读，我希望它能帮助你(就像它帮助我一样)深入理解它。</p><h1 id="61df" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">从公式开始</h1><p id="9600" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">你可能已经见过这个公式成千上万次了:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/2d73039a65cb6985a1b8b56e5b36d003.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SBMUE_8bFrz2y6HN0d_QoA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">皮尔逊相关系数公式。[图片由作者提供]</p></figure><p id="32b2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你对代码比对数学更熟悉，那么你会更喜欢这个Python片段:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="6311" class="my lw it mu b gy mz na l nb nc">import numpy as np</span><span id="15ba" class="my lw it mu b gy nd na l nb nc">x = np.array([1,2,3,4])<br/>y = np.array([7,6,8,9])</span><span id="f6f1" class="my lw it mu b gy nd na l nb nc">codev_xy = np.sum((x — np.mean(x)) * (y — np.mean(y)))<br/>ssd_x = np.sum((x — np.mean(x)) ** 2)<br/>ssd_y = np.sum((y — np.mean(y)) ** 2)</span><span id="9ecd" class="my lw it mu b gy nd na l nb nc">corr_xy = codev_xy / np.sqrt(ssd_x * ssd_y)</span></pre><h1 id="eebb" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">但是公式<strong class="ak"> <em class="ne">是什么意思</em> </strong>？</h1><p id="cb2a" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">该公式可以分解为三个具有一些著名名称的构造块:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/896c2c5acf08641930da75c11c2b07af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7sicT00Irvcdp3CVN8CV7g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">皮尔逊相关的三个组成部分。[图片由作者提供]</p></figure><p id="407a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">最有趣的部分是分子:</strong>。其实<strong class="la iu">分母只是一个归一化因子，绑定了-1和1 </strong>之间的相关系数(数学证明见<a class="ae nf" href="https://math.stackexchange.com/questions/564751/how-can-i-simply-prove-that-the-pearson-correlation-coefficient-is-between-1-an" rel="noopener ugc nofollow" target="_blank">此处</a>)。实际上，在其他条件相同的情况下，相关性越大，相关系数越大。</p><p id="ab0d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个配方可能看起来有点模糊，但是再看一眼，就很清楚它只由两种成分组成:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/72063ef05b194fdb62f86de874e4b712.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ySKWb-A39_xgH7HdGDwQ3Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">皮尔逊相关系数是由“距离”构成的。[图片由作者提供]</p></figure><p id="98e8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">而且，因为我们只处理二维(<em class="lu"> x </em>和<em class="lu"> y </em>)，所以在一个图中表示它们很容易。</p><p id="1bdf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以，让我们借助一些数据点，将相关性带入生活吧！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/2a301405775ae40e3431b8ba0d2077de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xp5mjzIILa-XY26cYaorDA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一些数据点。[图片由作者提供]</p></figure><p id="6c20" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从几何学上来说，共生现象很容易被发现。它只是每个数据点和质心之间的所有“矩形”的面积之和(即以<em class="lu"> x </em>的平均值作为其自身的<em class="lu"> x </em>以及以<em class="lu"> y </em>的平均值作为其自身的<em class="lu"> y </em>的点)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/035092c6cb89e3d999fc470db173372a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xGt7S0bHFu_Buibh-HezeQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">相互依存的图形解释。[图片由作者提供]</p></figure><p id="15ab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">真正起作用的是每个矩形的“符号”!事实上，</p><ul class=""><li id="f099" class="nh ni it la b lb lc le lf lh nj ll nk lp nl lt nm nn no np bi translated"><strong class="la iu">右上</strong>和<strong class="la iu">左下象限</strong>(图中绿色)中的矩形有<strong class="la iu">正号</strong>，因此它们被添加到codeviance中。当<em class="lu"> x </em>和<em class="lu"> y </em>都高于(或都低于)平均值时，就会出现这种情况。换句话说，它们是<strong class="la iu">一致的</strong>。</li><li id="4bea" class="nh ni it la b lb nq le nr lh ns ll nt lp nu lt nm nn no np bi translated"><strong class="la iu">左上</strong>和<strong class="la iu">右下象限</strong>(图像中的红色)中的矩形有<strong class="la iu">负号</strong>，因此它们被从余度中减去。当<em class="lu"> x </em>高于(低于)平均值，而<em class="lu"> y </em>低于(高于)平均值时，就会出现这种情况</li></ul><p id="939f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，当大多数数据点相对于<em class="lu"> x </em>和<em class="lu"> y </em> 一致时，我们可以近似地说<strong class="la iu">相关性(以及相关性)为正。反之，大部分点不和谐时为负。想想也很有道理:codeviance试图表达<em class="lu"> x </em>和<em class="lu"> y </em>如何“一起改变”。</strong></p><p id="cb3f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了完整起见，我们也可以将分母的构件形象化:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/86de4cfcefba0ef9fc87e13b93380c5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VNN9bkRxfh5wru4yIblWMg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">离差平方和的几何解释。[图片由作者提供]</p></figure><p id="1dd5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后的结局是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/f83017bcb45631ca30b7b9438190d696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*94dk7ToeOhpoEfsmBMbKig.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">分子和分母的最终结果。[图片由作者提供]</p></figure></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><p id="9c1f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在大多数值得注意的情况下，现在很容易弄清楚为什么相关系数是现在这个样子。例如，让我们看看其中的两个:</p><ol class=""><li id="1543" class="nh ni it la b lb lc le lf lh nj ll nk lp nl lt od nn no np bi translated">辛普森悖论；</li><li id="15e9" class="nh ni it la b lb nq le nr lh ns ll nt lp nu lt od nn no np bi translated">对称关系。</li></ol><h1 id="ff8f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">1.辛普森悖论</h1><p id="698d" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">辛普森悖论是数据科学面试中反复出现的话题。这让很多人感到困惑。但是希望，多亏了这种图形化的方法，你再也不会感到困惑了！</p><p id="e48d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们举个例子，灵感来自<a class="ae nf" href="https://www.researchgate.net/figure/Example-of-Simpsons-Paradox-Despite-the-fact-that-there-exists-a-negative-relationship_fig1_256074671" rel="noopener ugc nofollow" target="_blank"> ResearchGate </a>。</p><p id="ca3e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你有两个群体:男性和女性。你对两组都进行了一些医学治疗(而且，由于男性更高更重，他们接受了更高的剂量)。你计算剂量和恢复之间的相关性，它是强正的:0.68。很好，这意味着药物是有效的，对吗？</p><p id="ff56" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">嗯，等一下。你看一下两组的曲线图，你会注意到下面的情况:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/a74abce690ccd32a7808abbcb15c2440.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PyGqeyyKmGqD029rmAsEKw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一些数据点说明了辛普森悖论。[图片由作者提供]</p></figure><p id="aec6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">虽然在每组中剂量和恢复之间存在反比关系(这应该与负相关相关)，但是您的皮尔逊<em class="lu">r</em>是强正的。这是为什么呢？</p><p id="e105" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过我们的几何解释，我们可以立即了解正在发生的事情:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/1ad42a7637f33f2c7a028c698b9229f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XXcQOnFjs0LTuc4l6k7niA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">辛普森悖论:计算偏差。[图片由作者提供]</p></figure><p id="9632" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">实际上，与剂量平均值和恢复平均值相比，所有男性都在右上象限，而所有女性都在左下象限。因此，即使在每个单独的组中，这种关系是负的，但是这种相关性在很大程度上是正的。因此，正相关。</p><p id="3921" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">将所有东西放在一起:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/0c688a07ee7278032d8644bd9f510b5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lqfxHpPj7sLP00cpit8enA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">辛普森悖论的几何解释。[图片由作者提供]</p></figure><h1 id="9762" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">2.对称关系</h1><p id="f6b2" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">当两个变量具有“对称”关系时，它们的相关性将(接近)为零。</p><p id="d5a0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了理解为什么会发生这种情况，让我们取一条关于<em class="lu"> y </em>对称的抛物线(但对于<em class="lu"> x </em>也是一样)。</p><p id="f9a9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，很明显为什么分子是零。事实上，左侧的所有数据点都与右侧的数据点“抵消”(即，它们具有相反的符号)。</p><p id="8a03" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们来直观的证明一下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/50c4de5ee9c243009ecc4279605cdbed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hl_v6ixw7TLWiGOwezv1Rg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">抛物线皮尔逊相关的几何解释。[图片由作者提供]</p></figure></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><p id="4f51" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢您的阅读！我希望这篇文章对你有用。</p><p id="b314" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你对我在剧情中使用的Python函数感兴趣，你可以在<a class="ae nf" href="https://github.com/smazzanti/correlation_explained_visually/blob/main/correlation_explained_visually.ipynb" rel="noopener ugc nofollow" target="_blank">Github项目</a>中找到它。</p><p id="3996" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我感谢反馈和建设性的批评。如果你想谈论这篇文章或其他相关话题，你可以发短信给我<a class="ae nf" href="https://www.linkedin.com/in/samuelemazzanti/" rel="noopener ugc nofollow" target="_blank">我的Linkedin联系人</a>。</p></div></div>    
</body>
</html>