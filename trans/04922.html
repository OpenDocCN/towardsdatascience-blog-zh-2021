<html>
<head>
<title>Searching places and their geographic details for geoanalytics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为geoanalytics搜索地点及其地理细节</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/searching-places-and-their-geographic-details-for-geoanalytics-a71ee2a74a5f?source=collection_archive---------8-----------------------#2021-04-29">https://towardsdatascience.com/searching-places-and-their-geographic-details-for-geoanalytics-a71ee2a74a5f?source=collection_archive---------8-----------------------#2021-04-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bcdd" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Google的Places API，结合标准的Python包，提供了一种使用名称、地址、电话号码、关键字或类别(餐馆、酒吧、商店等)查找地点的简单方法。).</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/923b4228a0a60cb2798a096d43dd0e53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1AAoAXL2U6WVFi6L"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/photos/S7-KGCezLvA" rel="noopener ugc nofollow" target="_blank"><strong class="bd kw">Unsplash上Lucas Sankey的照片</strong> </a></p></figure><p id="1bb2" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">地理数据的作用已经成为理解和解决具体问题的政治和商业决策的重要组成部分。例如，我用它来进行我的可持续性研究，比如识别不同行业、人口统计等的集群。在一个特定的地点，企业参与可持续的商业实践。</p><p id="5e73" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">基于GIS的研究面临的主要挑战之一是难以获得数据。尽管存在许多提供建筑物、商业、人口等细节的标准数据库。在一个领域中，这些数据库的主要问题是它们经常变得过时、不准确和不可靠。谷歌地图或类似的服务可以用来补充现有的数据库与最新的细节。在这篇文章中，我将部署Google Places API来搜索地点并检索所需地点的必要信息。</p><p id="7fd1" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">提醒一句</strong>:虽然谷歌API服务每个月都有一些免费配额——这对大多数用户来说都绰绰有余，但在发布API密钥之前，用户必须提供支付细节(例如信用卡或借记卡)进行注册。如果您不愿意支付或担心意外的费用，有足够的灵活性和选项来限制免费服务之外的请求/使用，以防止触发任何不良的计费。但是，如果不提供可接受的支付凭证，您就无法使用服务(据我所知)。</p><p id="f8a2" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">使用Google的官方API在Python中查找地点有两种方法。人们可以使用<a class="ae kv" href="https://developers.google.com/maps/documentation/places/web-service/search?hl=vi" rel="noopener ugc nofollow" target="_blank"> Google Place搜索API网页</a>上的搜索指令直接发出HTTP URL请求。你也可以使用<a class="ae kv" href="https://pypi.org/project/googlemaps/" rel="noopener ugc nofollow" target="_blank"> Googlemaps </a>包，它提供了用Python获取地点细节的用户友好的功能。因为使用标准包装更方便，我们将使用它作为你的练习。在Google API中搜索地点有四种不同的方式。</p><ol class=""><li id="1756" class="lt lu iq kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated"><strong class="kz ir">搜索附近的地方</strong></li></ol><p id="26c8" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">邻近搜索在由例如纬度、经度和半径指定的区域内寻找地点。我们可以通过提及关键词(咖啡、素食等)来细化搜索请求。)或<a class="ae kv" href="https://developers.google.com/places/supported_types" rel="noopener ugc nofollow" target="_blank">类型的目标场所</a>(如餐厅、咖啡厅)。它会在谷歌索引的所有内容中搜索一个位置。两种搜索方式(按关键字或类型)通常会返回不同的结果。示例代码片段如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="c95e" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这个API请求返回每个地方的大部分细节，除了<code class="fe me mf mg mh b">formatted_address</code>、<code class="fe me mf mg mh b">phone number</code>、<code class="fe me mf mg mh b">website</code>和<code class="fe me mf mg mh b">reviews</code>。虽然这些详细信息在某些情况下可能是相关的，但附近地点功能提供了我们正在寻找的地点的所有相关和令人满意的信息。</p><p id="0e56" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">2.<strong class="kz ir">搜索地点</strong></p><p id="d947" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这个请求非常类似于上面讨论的nearby search API，但是唯一的区别是它返回稍微不同的细节。例如，查询的响应返回该地点的地址，这在附近搜索功能中是不可用的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="f364" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">3.<strong class="kz ir">找个地方</strong></p><p id="fd24" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这个请求根据地名、地址或电话号码找到一个地方<a class="ae kv" href="https://github.com/googlemaps/google-maps-services-python/blob/master/googlemaps/places.py" rel="noopener ugc nofollow" target="_blank">。API请求提供了指定参数的灵活性，我们需要这些参数的数据，如下面的代码所示:</a></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="e764" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">以这种方式提出请求有两个限制。首先，虽然基于电话号码或地址的查询肯定会返回一个结果，但涉及地名的文本查询可能会找到与我们期望的不同的地方。所以，除非我们也知道该地点的确切名称，否则这个功能有些不可靠，或者需要人工干预来验证地点细节。第二，匹配可能但不一定在目标地理范围内。当在期望的区域内没有找到匹配时，它可以返回来自全球任何地方的最接近的匹配，而不是返回零结果——只要在Google数据库中有任何匹配。</p><p id="a443" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir"> 4。获取地点详情</strong></p><p id="33c8" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这是查找已知地点信息的最全面的地点API。Place Details查询<a class="ae kv" href="https://developers.google.com/maps/documentation/places/web-service/details?hl=vi" rel="noopener ugc nofollow" target="_blank">返回</a>一个地方的所有细节——取决于请求的fields参数Google已经为这个地方建立了索引，包括评论(一个个人帐户最多4-5个评论)、网站等。与<code class="fe me mf mg mh b">find_place</code>类似，这个API请求也提供了指定需要返回什么位置属性的灵活性。唯一的区别是它还返回一些第三个API没有的额外细节(如网站、评论)。下面显示了一个示例代码片段:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="f54d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这个函数的主要缺点是它使用<code class="fe me mf mg mh b">place_id </code>进行搜索，并且在发出请求之前必须有确切的<code class="fe me mf mg mh b">place_id </code>。因此，这个API通常与通用搜索API结合使用，后者提供基于关键字搜索的<code class="fe me mf mg mh b">place_id</code>，然后使用<code class="fe me mf mg mh b">place_id </code>来收集特定于地点的信息。</p><p id="9b5c" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">潜在应用和结束语</strong></p><p id="bb3b" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">人们可以通过不同的方式使用这样的API。例如，在我的例子中，API允许我快速检索购物中心、咖啡店、餐馆、酒吧等的位置。附近有一个特定的办公室、大学或住宅区，这将有助于我了解城市经济和发展模式的演变。这些商业密度和发展模式也可能揭示出基础设施、商业、商店、学校等方面的不平等。在不同的街区。找到这样的集群将有助于在城市或社区层面制定促进区域可持续发展的政策。</p><p id="f4b9" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这篇博客的主要目的是介绍Python中Google Places API的特性。用于地理信息的Google APIs为应用程序开发人员和其他领域专家(如地理信息研究人员)提供了各种好处。</p></div></div>    
</body>
</html>