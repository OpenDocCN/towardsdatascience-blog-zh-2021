<html>
<head>
<title>Avoid R-squared to judge regression model performance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">避免用R平方来判断回归模型的性能</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/avoid-r-squared-to-judge-regression-model-performance-5c2bc53c8e2e?source=collection_archive---------3-----------------------#2021-04-05">https://towardsdatascience.com/avoid-r-squared-to-judge-regression-model-performance-5c2bc53c8e2e?source=collection_archive---------3-----------------------#2021-04-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c23b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">依靠R来判断一个回归模型的表现是被误导的</h2></div><p id="ca93" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">总结</strong></p><p id="97a8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">r可以在 之前计算<strong class="kh ir"> <em class="lb">甚至拟合一个回归模型，这没有意义然后用它来判断预测能力。如果你翻转输入和输出，你会得到相同的R值。同样，这对于预测指标来说是没有意义的。</em></strong></p><p id="3812" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您的回归模型的<strong class="kh ir">意图</strong>是选择合适度量的重要因素，合适的度量可能是<strong class="kh ir"> <em class="lb">而不是</em> </strong> R。</p><p id="cbd1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本文解释了存在哪些更好的替代方案:标准误差、置信区间和预测区间。</p><h1 id="5274" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">1.我们为什么要建立线性回归模型？</h1><p id="54a2" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">收集历史数据并计算输入𝑥和输出𝑦之间的关系。这种关系往往是线性回归模型，写成𝑦 <em class="lb"> =a+ </em> 𝑏𝑥，其中截距为<em class="lb"> a </em>，斜率为<em class="lb"> b </em>。</p><p id="7798" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最常见的目的是使用计算出的关系，并预测一些未来的输出，称为𝑦̂，给定一个新的输入:𝑦̂=和+𝑏𝑥.</p><p id="fc36" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下是建立线性回归模型的两个最常见的原因:</p><ol class=""><li id="d68a" class="lz ma iq kh b ki kj kl km ko mb ks mc kw md la me mf mg mh bi translated">向<strong class="kh ir">了解更多</strong>关于投入与产出的关系；</li><li id="de6b" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la me mf mg mh bi translated">到目前为止，最常见的用法是<strong class="kh ir">根据输入获得输出的预测</strong>。</li></ol><p id="e0af" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们依次来看一下每一项。</p><h2 id="2705" class="mn ld iq bd le mo mp dn li mq mr dp lm ko ms mt lo ks mu mv lq kw mw mx ls my bi translated">了解更多关于关系的信息</h2><p id="3b89" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">线性回归𝑦= <em class="lb"> a+bx </em>的系数𝑏显示了投入𝑥.每增加一个单位对产出𝑦的平均影响这叫做“了解我们的系统”。</p><figure class="na nb nc nd gt ne gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi mz"><img src="../Images/a648860e78b18dd9c59bfad879c4563a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ou-9gqeyMimNrYx4Q8F6NA.png"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated">回归模型的斜率和截距提供了对系统的学习或洞察。该图还显示了这里使用的术语。【来源:<a class="ae np" href="https://github.com/kgdunn/figures/tree/master/least-squares" rel="noopener ugc nofollow" target="_blank">自己的作品</a></p></figure><p id="5f5a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果您在系统(输入)的摄氏温度𝑥=temperature和𝑦=pH(输出)之间建立了一个回归模型，您可能会得到一个回归模型:<strong class="kh ir"> 𝑦=4.5+0.12𝑥 </strong>，从中您可以了解到两点:</p><ul class=""><li id="0e33" class="lz ma iq kh b ki kj kl km ko mb ks mc kw md la nq mf mg mh bi translated">温度每升高1度，平均会导致pH值增加0.12</li><li id="1250" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la nq mf mg mh bi translated">当使用𝑥=0摄氏度的温度时，预期或预测的pH是4.5单位的输出pH。</li></ul><p id="0972" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是考虑两种情况:如果我告诉你这个模型的R是0.2，或者是0.94呢？这对你的学习有什么影响？我们将在下一节中讨论这个问题，在这里我们将对R测量的内容有更多的了解。</p><h2 id="daef" class="mn ld iq bd le mo mp dn li mq mr dp lm ko ms mt lo ks mu mv lq kw mw mx ls my bi translated">使用模型的预测</h2><p id="2529" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">这个场景是大多数人都熟悉的。继续上述内容，它询问对于给定的新的温度输入值𝑥.，预测的pH值是多少例如，在我们从未使用过的13°C新温度下，我们预计输出pH值为4.5+0.12×13=6.06 pH单位。</p><p id="f6ef" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，当模型的R值在0.2左右，或者模型的R值为0.94时，我们赋予这样的预测什么样的价值呢？</p></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><h1 id="4f2f" class="lc ld iq bd le lf ny lh li lj nz ll lm jw oa jx lo jz ob ka lq kc oc kd ls lt bi translated">2.背景:R实际衡量的是什么？</h1><p id="8701" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">注意:搜索类似“<a class="ae np" href="http://www.google.com/search?q=R2+interpretation" rel="noopener ugc nofollow" target="_blank"><em class="lb"/></a>”或类似的短语，会返回许多推理错误的网站。</p><p id="fa55" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最简单的形式是，R只不过是两个变量相关程度的度量。它是𝑥和𝑦.之间相关系数的平方</p><figure class="na nb nc nd gt ne gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi od"><img src="../Images/f6d7166434ab317d72c57afbc2f72c3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cbf-h-IuV-JnvDORU8T3_Q.png"/></div></div></figure><p id="b790" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其中花式“E{…}”是“的期望值”运算，花式“V{…}”是“的方差”，Cov{ <em class="lb"> x </em>，<em class="lb"> y </em> }是“的协方差”运算。𝑥和𝑦上方的水平线告诉您使用这些数据列的平均值。</p><p id="9e62" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">A <strong class="kh ir">第二种解读</strong>是R是回归平方和(RegSS)与平方和总和(TSS)的比值。任何“平方和”值都只是一个重新调整的方差，因此这里的公式显示R只是两个方差的比值:</p><figure class="na nb nc nd gt ne gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/c4eb3659cc62287ce059d8b759514576.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*D9wPS2odLYsNOvOLffOMCw.png"/></div></figure><p id="e2c9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">r值为1.0意味着分子和分母完全相同，或者换句话说，预测值𝑦̂ <em class="lb"> ᵢ </em>与原始值𝑦 <em class="lb"> ᵢ </em>完全相同。相反，要使r的值为0.0，分子必须等于零，这意味着预测只是等于一条平线，即𝑦的平均值，而不管𝑥.的输入值是多少这是你能得到的最差的模型:它说在R =0的情况下，你能对𝑦做出的最好预测只是返回训练𝑦值的平均值。</p><p id="3d6e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">R的一般解释来自于这个等式:这就是解释的百分比变化。分母与总变化量成比例，分子是解释的变化量，导致0和1之间的分数(百分比)。</p><figure class="na nb nc nd gt ne gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi mz"><img src="../Images/27de785032da3ab58358a5dfc6d9eee1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CveADJioPGzn4o3l7gGj1g.png"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated">开放圆用于计算(建立)模型；而单个闭合圆圈显示了该模型如何在稍后被用于进行预测。RegSS、RSS和TSS是根据空心圆表示的数据点计算的。【来源:<a class="ae np" href="https://github.com/kgdunn/figures/tree/master/least-squares" rel="noopener ugc nofollow" target="_blank">自己的作品</a>】。</p></figure><p id="d11c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与之前的解释相关的是R = 1.0 RSS/TSS，因为对于简单的回归模型，我们有TSS = RegSS + RSS。</p><p id="06d5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">RSS是残差平方和(RSS)，或者从数学上讲</p><figure class="na nb nc nd gt ne gh gi paragraph-image"><div class="gh gi of"><img src="../Images/767ac11512479cdf571cf6fe04b6aa55.png" data-original-src="https://miro.medium.com/v2/resize:fit:648/format:webp/1*2wuiriVpT8KLfsKgnwyvhw.png"/></div></figure><p id="1161" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这清楚地表明，要得到R =1，你必须没有残差(RSS = 0)；R =0意味着TSS = RSS，换句话说，残差与原始数据的方差相同。</p><p id="0a9f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">更多的细节和说明在我的免费书中:<a class="ae np" href="https://yint.org/least-squares" rel="noopener ugc nofollow" target="_blank">https://learn che . org/PID/least-squares-modeling/least-squares-model-analysis</a></p><h2 id="8110" class="mn ld iq bd le mo mp dn li mq mr dp lm ko ms mt lo ks mu mv lq kw mw mx ls my bi translated">到目前为止的总结</h2><p id="1299" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">理解上面的公式并尝试用简单的语言解释它们是非常有益的。一开始这并不容易，但理解如何使方程的每一部分变大变小，以及如何获得0.0和1.0的极值是值得的。</p></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><h1 id="7615" class="lc ld iq bd le lf ny lh li lj nz ll lm jw oa jx lo jz ob ka lq kc oc kd ls lt bi translated">3.为什么R不足以判断模型的回归性能</h1><p id="929a" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">综上所述，这里有两个非常简单的原因，说明为什么r几乎不是判断根据新的输入𝑥:预测新的输出𝑦的正确度量</p><ol class=""><li id="fdab" class="lz ma iq kh b ki kj kl km ko mb ks mc kw md la me mf mg mh bi translated">如果你把历史数据调换一下，把𝑦变成𝑥，让𝑥变成𝑦，那么你得到的<strong class="kh ir"> <em class="lb">和</em> </strong> R值完全一样。这有什么意义呢？模型预测能力的度量标准<strong class="kh ir">必须</strong>取决于什么是输入，什么是输出。</li><li id="d934" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la me mf mg mh bi translated">如果我告诉你在 计算模型的斜率和截距之前，我可以告诉你R值会是什么<strong class="kh ir"> <em class="lb">会怎么样？同样，这没有意义。在拟合预测模型之前，如何计算预测性能的良好度量？</em></strong></li></ol><p id="ccd9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这相当于在拟合神经网络之前计算它的预测能力；或者翻转神经网络的输入和输出，得到相同的性能指标。</p><p id="ff30" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们如何做出这两个关于R的强有力的陈述呢？回头看看第一个公式:</p><figure class="na nb nc nd gt ne gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi od"><img src="../Images/f6d7166434ab317d72c57afbc2f72c3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cbf-h-IuV-JnvDORU8T3_Q.png"/></div></div></figure><h2 id="0913" class="mn ld iq bd le mo mp dn li mq mr dp lm ko ms mt lo ks mu mv lq kw mw mx ls my bi translated">把𝑥和𝑦调换一下</h2><p id="04e8" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">分子是对称的。如果你交换𝑥和𝑦的角色，你会得到相同的分子值。这也适用于分母。请用Python，Excel，R，MATLAB，或者任何你用来做线性回归的工具自己确认一下。下面是一些拟合线性模型的R代码(<code class="fe og oh oi oj b">lm</code>):</p><pre class="na nb nc nd gt ok oj ol om aw on bi"><span id="660c" class="mn ld iq oj b gy oo op l oq or">x = c(10, 8, 13, 9, 11, 14, 6, 4, 12, 7, 5)<br/>y = c( 8, 7,  8, 9,  8, 10, 7, 4, 11, 5, 6)<br/>summary(lm(y ~ x))  # R^2 = 0.657 <br/>summary(lm(x ~ y))  # R^2 = 0.657</span></pre><h2 id="0cc8" class="mn ld iq bd le mo mp dn li mq mr dp lm ko ms mt lo ks mu mv lq kw mw mx ls my bi translated">能够在拟合模型之前计算R</h2><p id="780a" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">再来看一下上面的公式。它是否取决于:</p><ul class=""><li id="3390" class="lz ma iq kh b ki kj kl km ko mb ks mc kw md la nq mf mg mh bi translated">模型的残差？<strong class="kh ir"> <em class="lb">否</em> </strong></li><li id="914b" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la nq mf mg mh bi translated">模型的任何系数，如斜率或截距？<strong class="kh ir"> <em class="lb">否</em> </strong></li></ul><p id="e840" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，即使不拟合回归模型，也可以计算R。该公式仅依赖于原始数据，而不依赖于任何模型！这不是什么数学把戏，因为事情以某种特殊的方式抵消或简化了。这只是一个r被设计用来测量的事实:𝑥和𝑦.两个序列之间的相关程度</p><p id="c8dd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很简单，最后一句话指出了何时应该使用R:仅作为两个序列之间相关性的度量。</p></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><h1 id="71a1" class="lc ld iq bd le lf ny lh li lj nz ll lm jw oa jx lo jz ob ka lq kc oc kd ls lt bi translated">4.好吧，我已经被说服了。但是应该使用哪些指标呢？</h1><p id="9822" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">让我们回头看看这两个用例:</p><ol class=""><li id="6898" class="lz ma iq kh b ki kj kl km ko mb ks mc kw md la me mf mg mh bi translated">从模型中学习</li><li id="76ee" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la me mf mg mh bi translated">根据模型进行预测</li></ol><h2 id="4f81" class="mn ld iq bd le mo mp dn li mq mr dp lm ko ms mt lo ks mu mv lq kw mw mx ls my bi translated">从模型中学习</h2><p id="00e7" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">如果你的目标是解释斜率或截距，那么使用一个与之相关的度量，而不是R。在这种情况下，斜率和截距的<strong class="kh ir">置信区间</strong>是信息性的。置信区间是两个数字，一个是<strong class="kh ir">范围</strong>。在此范围内，您可以预期，在指定的置信度下，它包含参数的真实值(如斜率)。让我们回到温度和pH值的例子，只考虑斜率。同样的想法也适用于截击。</p><p id="4b78" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请记住，𝑦=4.5+0.12𝑥意味着温度每升高1度，平均会导致pH值增加0.12个单位。真实(但未知)斜率的95%置信区间可能是[0.09；0.15]，这意味着我们有95%的可能性这个范围包含真实的斜率。注意，<strong class="kh ir"> <em class="lb">不是</em> </strong>真实斜率在这个范围内的概率；一个微妙但重要的区别。有<strong class="kh ir"> <em class="lb">没有概率</em> </strong>与真值相关联；概率<strong class="kh ir">与包含真实斜率的范围</strong>相关，真实斜率是一个固定但未知的值。</p><p id="75c8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">为什么使用置信区间？</strong>主要原因是数值都是你关心的单位，而不是两个方差的抽象比值，比如R，其次，范围越宽，模型越差。假设斜率的置信区间是[0.09；0.15]或[0.03；0.21];你想要哪个？</p><p id="27dc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在间隔的宽度和R的值之间存在直接的关系，但是这种关系是非线性的，并且对于不同的模型具有不同的形状。</p><p id="665f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里有一些你可能会用到的R代码。类似的代码在Python中也是可行的:</p><pre class="na nb nc nd gt ok oj ol om aw on bi"><span id="6975" class="mn ld iq oj b gy oo op l oq or">x = c(10, 8, 13, 9, 11, 14, 6, 4, 12, 7, 5)<br/>y = c( 8, 7,  8, 9,  8, 10, 7, 4, 11, 5, 6)</span><span id="a6af" class="mn ld iq oj b gy os op l oq or">linmod = lm(y ~ x) # predict y from x<br/>summary(linmod)<br/>confint(linmod) # confidence interval</span></pre><h2 id="8095" class="mn ld iq bd le mo mp dn li mq mr dp lm ko ms mt lo ks mu mv lq kw mw mx ls my bi translated">根据模型进行预测</h2><p id="bab6" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">如果您想要判断模型的预测，请使用<strong class="kh ir">标准误差</strong> (se)或预测区间，而不是R。为什么使用SE？</p><p id="9ed9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">标准误差是残差的标准偏差。这听起来比R更复杂，但事实并非如此。首先，标准误差有输出变量的单位。换句话说，它有你真正关心的量的单位，预测的单位！如果您的残差呈正态分布(使用<a class="ae np" href="https://en.wikipedia.org/wiki/Q–Q_plot" rel="noopener ugc nofollow" target="_blank"> q-q图</a>进行快速简单的检查)，那么您知道大约70%的残差位于范围[SE；+SE]，95%的残差在2SE+2SE]。这是我个人使用最多的方法:计算se并乘以4，以了解我的典型残差的“带宽”。不确切，但足以判断“我的预测模型够好吗？”如果您认为预测值的范围在2SE+2SE]，那你就可以对你的模型满意了。</p><p id="d94e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你会在无数的博客和教科书上读到R低不一定不好，R高也不一定好。没错。这是因为我见过R超过0.99的情况，但标准误差仍然太大，对最终用户的要求没有用处。</p><p id="f927" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">比使用构建(训练)模型时计算的标准误差更好的方法是使用全新测试数据集上预测的残差的标准偏差。这是相同的指标，但只是从测试数据中计算出来的，或者如果您不能将测试数据放在一边，则通过交叉验证来计算。</p><p id="f37e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与标准误差相关的另一个选项是使用<strong class="kh ir">预测区间</strong>。这就像是一个置信区间，但对于一个全新的预测。在上面的例子中，我们可能有:</p><ul class=""><li id="c682" class="lz ma iq kh b ki kj kl km ko mb ks mc kw md la nq mf mg mh bi translated">一个新的温度测量，𝑥=10摄氏度，导致预测的pH值为5.7±0.4</li><li id="fe18" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la nq mf mg mh bi translated">换句话说，预测的pH值位于从[5.3到6.1]的范围内，置信度为95%。</li></ul><figure class="na nb nc nd gt ne gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi mz"><img src="../Images/216b1a253fffa5c6c7e78a8ae52ea29e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ho8zZJ_CJgO09KjdzHGgsQ.png"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated">预测区间(为了说明而放大)是阴影区域。它在训练数据的中心最窄，并且随着距离的增加而变宽。【来源:<a class="ae np" href="https://github.com/kgdunn/figures/tree/master/least-squares" rel="noopener ugc nofollow" target="_blank">自己的作品</a></p></figure><p id="24cb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样的时间间隔非常有用；我们马上得到一个范围，用我们关心的单位，也就是输出变量𝑦.的单位预测区间是图中的阴影区域，并且是非线性的。离模型中心点越远，它就越宽。虽然在一些软件包(如Excel)中并不总是容易获得这个区间，但作为一个近似规则，您可以使用阴影区域覆盖2SE。</p><pre class="na nb nc nd gt ok oj ol om aw on bi"><span id="0125" class="mn ld iq oj b gy oo op l oq or">x = c(10, 8, 13, 9, 11, 14, 6, 4, 12, 7, 5)<br/>y = c( 8, 7,  8, 9,  8, 10, 7, 4, 11, 5, 6)</span><span id="eda5" class="mn ld iq oj b gy os op l oq or">linmod = lm(y ~ x) # predict y from x</span><span id="249e" class="mn ld iq oj b gy os op l oq or"># Get the prediction interval for 3 new values of x:<br/>newdata = data.frame(x=c(1, 8, 15))<br/>predict(linmod, newdata, interval="predict")</span></pre><p id="d3a0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如前所述，R值越高，预测区间宽度越小，这直观地证明了R越高越好，但您无法提前推导出什么是“好R”的截止界限，因为它取决于测量的数据，当然也取决于您的目的可接受的范围。</p></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><h2 id="9ff7" class="mn ld iq bd le mo mp dn li mq mr dp lm ko ms mt lo ks mu mv lq kw mw mx ls my bi translated"><strong class="ak"> <em class="ot">收尾</em> </strong></h2><p id="e1e9" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">问问自己为什么要建立线性回归模型:</p><ul class=""><li id="c4b9" class="lz ma iq kh b ki kj kl km ko mb ks mc kw md la nq mf mg mh bi translated">“我想更多地了解我的斜率或截距”。对它们使用置信区间，而不是R。较高的R与较小的置信区间相关。</li><li id="447b" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la nq mf mg mh bi translated">“我希望能够从我的模型中判断预测”。使用预测间隔或模型的标准误差。较高的R与较小的预测区间和较低的标准误差相关。</li></ul><p id="ffa9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所有描述的选择都比R更容易理解，并且是你关心的单位。如果你已经做到这一步，并想阅读更多，请查看我的<a class="ae np" href="https://yint.org/least-squares" rel="noopener ugc nofollow" target="_blank">免费书籍</a>。</p></div></div>    
</body>
</html>