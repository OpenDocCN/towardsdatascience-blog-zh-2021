<html>
<head>
<title>Geopandas Hands-on: Introduction to Geospatial Machine Learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">geo pandas hand-on:地理空间机器学习介绍</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/geopandas-hands-on-introduction-to-geospatial-machine-learning-6e7e4a539daf?source=collection_archive---------10-----------------------#2021-04-21">https://towardsdatascience.com/geopandas-hands-on-introduction-to-geospatial-machine-learning-6e7e4a539daf?source=collection_archive---------10-----------------------#2021-04-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="39cf" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">关于如何处理地理空间机器学习的教程</h2></div><p id="0bf5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第一部分:地理空间概念介绍(<em class="le">本帖</em> ) <br/>第二部分:地理空间可视化和几何创建(<a class="ae lf" rel="noopener" target="_blank" href="/geopandas-hands-on-geospatial-data-visualization-and-intro-to-geometry-7f2ed9df52ab"> <em class="le">跟随此处</em> </a> ) <br/>第三部分:地理空间操作(<a class="ae lf" rel="noopener" target="_blank" href="/geopandas-hands-on-geospatial-relations-and-operations-a6e7047d7ba1"> <em class="le">跟随此处</em> </a> ) <br/>第四部分:构建地理空间机器学习管道(<a class="ae lf" rel="noopener" target="_blank" href="/geopandas-hands-on-building-geospatial-machine-learning-pipeline-9ea8ae276a15"> <em class="le">跟随此处</em> </a>)</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lg"><img src="../Images/116955dfc2ddf4a10e061142d5360a5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*w4qrnWG09yU-6234"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated"><a class="ae lf" href="https://unsplash.com/@marjan_blan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Marjan Blan | @marjanblan </a>在<a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="8102" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我们将介绍基本的地理空间数据类型、属性，以及如何使用geopandas来实现这些。</p><h1 id="f07d" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">目录:</h1><ol class=""><li id="c363" class="mo mp it kk b kl mq ko mr kr ms kv mt kz mu ld mv mw mx my bi translated">什么是Geopandas</li><li id="6875" class="mo mp it kk b kl mz ko na kr nb kv nc kz nd ld mv mw mx my bi translated">装置</li><li id="dd06" class="mo mp it kk b kl mz ko na kr nb kv nc kz nd ld mv mw mx my bi translated">地理空间概念</li><li id="7b4b" class="mo mp it kk b kl mz ko na kr nb kv nc kz nd ld mv mw mx my bi translated">基本几何属性介绍</li></ol><h1 id="4978" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">什么是Geopandas</h1><p id="1f9d" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ne kt ku kv nf kx ky kz ng lb lc ld im bi translated">Geopandas是一个开源库，支持使用和操作Python中的地理空间数据。它扩展了pandas中使用的通用数据类型，允许许多独特的几何操作:地理系列和地理数据框架。Geopandas也是建立在shapely之上进行几何运算；它的底层数据类型允许Geopandas以惊人的速度运行，并且适用于许多需要大型地理空间数据集的机器学习管道。</p><h1 id="c81c" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">装置</h1><p id="8ada" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ne kt ku kv nf kx ky kz ng lb lc ld im bi translated">现在我们已经对Geopandas有所了解，让我们开始安装过程。</p><p id="3d0a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有很多选择，但是我推荐使用<em class="le"> conda </em>安装，因为它为你的项目创建了一个新的环境，而不会影响你系统中的其他库。要安装conda，请遵循以下链接:<a class="ae lf" href="https://docs.anaconda.com/anaconda/install/" rel="noopener ugc nofollow" target="_blank">安装conda </a>。</p><ol class=""><li id="d02e" class="mo mp it kk b kl km ko kp kr nh kv ni kz nj ld mv mw mx my bi translated">创建一个新的conda环境并设置一些配置</li></ol><pre class="lh li lj lk gt nk nl nm nn aw no bi"><span id="e284" class="np lx it nl b gy nq nr l ns nt">conda create -n geo_env<br/>conda activate geo_env<br/>conda config --env --add channels conda-forge<br/>conda config --env --set channel_priority strict</span></pre><p id="a347" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2.用康达安装</p><pre class="lh li lj lk gt nk nl nm nn aw no bi"><span id="514c" class="np lx it nl b gy nq nr l ns nt">conda install python=3 geopandas</span></pre><h1 id="33e4" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">地理空间概念</h1><h2 id="e7b7" class="np lx it bd ly nu nv dn mc nw nx dp mg kr ny nz mi kv oa ob mk kz oc od mm oe bi translated">A.地理空间公共数据类型</h2><p id="9b61" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ne kt ku kv nf kx ky kz ng lb lc ld im bi translated">您需要熟悉一些常见的地理空间数据类型:Shapefile(。shp)和GeoJSON(。geojson)。</p><p id="e179" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Shapefile是一种矢量数据格式，主要由一家名为ESRI的公司开发和维护。它存储许多重要的地理空间信息，包括拓扑结构、形状几何等。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi of"><img src="../Images/487ecc5d1e3f23f532121319310e0983.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/0*z8pF-94VSUCaTCMU"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">Shapefile数据格式</p></figure><p id="b6e2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="le"> GeoJSON </em>，与JSON类似，除了你与对象相关的典型属性(索引、名称等)之外，还存储<em class="le">几何</em>信息(坐标、投影等)。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="gh gi og"><img src="../Images/c03b4c96cbe497d06b30646e204b8836.png" data-original-src="https://miro.medium.com/v2/resize:fit:460/format:webp/0*dKsizDxfh2A4Zq4Y.png"/></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">在JSON对象中添加了“geometry”关键字的GeoJSON格式示例</p></figure><p id="71b9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦使用Geopandas加载了这些数据格式中的任何一个，库将创建一个带有额外的<em class="le">几何图形</em>列的数据帧。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/f3aeed90c30bdc3f69b2c18342cf53d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*H9avtgGHYOu-rGsjd_6LmQ.png"/></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">地理数据框架(来源:geopandas.org)</p></figure><p id="12cf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是如何导入Geopandas库中内置的默认地理数据，我们将在本文和后续文章中使用这些数据。</p><pre class="lh li lj lk gt nk nl nm nn aw no bi"><span id="852f" class="np lx it nl b gy nq nr l ns nt">import geopandas<br/><br/>path_to_data = geopandas.datasets.get_path("nybb")<br/>gdf = geopandas.read_file(path_to_data)<br/><br/>gdf</span></pre><h1 id="c2a1" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">基本几何属性介绍</h1><p id="a510" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ne kt ku kv nf kx ky kz ng lb lc ld im bi translated">现在，我们已经对地理空间数据以及如何使用Geopandas导入我们的第一个地理空间数据有了一些概念，让我们执行一些基本的方法来进一步巩固我们的理解。</p><p id="9832" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，让我们把行政区的名称作为索引，使我们的探索更容易。</p><pre class="lh li lj lk gt nk nl nm nn aw no bi"><span id="594b" class="np lx it nl b gy nq nr l ns nt">gdf = gdf.set_index("BoroName")</span></pre><h2 id="3f58" class="np lx it bd ly nu nv dn mc nw nx dp mg kr ny nz mi kv oa ob mk kz oc od mm oe bi translated">区域</h2><p id="0b74" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ne kt ku kv nf kx ky kz ng lb lc ld im bi translated">从几何列，我们可以测量面积(如果它们是多边形或多多边形:因为我们不能测量线或点的面积)</p><pre class="lh li lj lk gt nk nl nm nn aw no bi"><span id="ad90" class="np lx it nl b gy nq nr l ns nt">gdf["area"] = gdf.area</span><span id="958f" class="np lx it nl b gy oi nr l ns nt">gdf["area"]<br/>&gt;&gt;BoroName<br/>&gt;&gt;Staten Island    1.623822e+09<br/>&gt;&gt;Queens           3.045214e+09<br/>&gt;&gt;Brooklyn         1.937478e+09<br/>&gt;&gt;Manhattan        6.364712e+08<br/>&gt;&gt;Bronx            1.186926e+09<br/>&gt;&gt;Name: area, dtype: float64</span></pre><h2 id="ca91" class="np lx it bd ly nu nv dn mc nw nx dp mg kr ny nz mi kv oa ob mk kz oc od mm oe bi translated">多边形边界</h2><p id="f71e" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ne kt ku kv nf kx ky kz ng lb lc ld im bi translated">由于我们的几何图形是多边形或多多边形，我们可以提取出对象的线坐标。比如说，当我们想要测量多边形物体的周长时，这是很有用的。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi oj"><img src="../Images/9c430645d0ab00cccf159200e918b2f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SwAdvu7_shjOrAmq.png"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">多边形边界线(来源:维基百科)</p></figure><pre class="lh li lj lk gt nk nl nm nn aw no bi"><span id="720d" class="np lx it nl b gy nq nr l ns nt">gdf['boundary'] = gdf.boundary</span><span id="9f3c" class="np lx it nl b gy oi nr l ns nt">&gt;&gt;gdf['boundary']<br/>&gt;&gt;BoroName<br/>&gt;&gt;Staten Island    MULTILINESTRING ((970217.022 145643.332, 97022...<br/>&gt;&gt;Queens           MULTILINESTRING ((1029606.077 156073.814, 1029...<br/>&gt;&gt;Brooklyn         MULTILINESTRING ((1021176.479 151374.797, 1021...<br/>&gt;&gt;Manhattan        MULTILINESTRING ((981219.056 188655.316, 98094...<br/>&gt;&gt;Bronx            MULTILINESTRING ((1012821.806 229228.265, 1012...<br/>&gt;&gt;Name: boundary, dtype: geometry</span></pre><h2 id="051f" class="np lx it bd ly nu nv dn mc nw nx dp mg kr ny nz mi kv oa ob mk kz oc od mm oe bi translated">图心</h2><p id="3786" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ne kt ku kv nf kx ky kz ng lb lc ld im bi translated">如果你想找到给定多边形的质心点，你可以如下调用gdf属性。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/a9aa81a9d0afc2c653880eef5d1065ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:314/format:webp/0*-WXXSIpcZZ1H2UQx.png"/></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">多边形质心(来源:维基百科)</p></figure><pre class="lh li lj lk gt nk nl nm nn aw no bi"><span id="580e" class="np lx it nl b gy nq nr l ns nt">gdf['centroid'] = gdf.centroid</span><span id="6716" class="np lx it nl b gy oi nr l ns nt">&gt;&gt;gdf['centroid']<br/>&gt;&gt;BoroName<br/>&gt;&gt;Staten Island     POINT (941639.450 150931.991)<br/>&gt;&gt;Queens           POINT (1034578.078 197116.604)<br/>&gt;&gt;Brooklyn          POINT (998769.115 174169.761)<br/>&gt;&gt;Manhattan         POINT (993336.965 222451.437)<br/>&gt;&gt;Bronx            POINT (1021174.790 249937.980)<br/>&gt;&gt;Name: centroid, dtype: geometry</span></pre><h2 id="4e5c" class="np lx it bd ly nu nv dn mc nw nx dp mg kr ny nz mi kv oa ob mk kz oc od mm oe bi translated">距离</h2><p id="4b44" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ne kt ku kv nf kx ky kz ng lb lc ld im bi translated">现在我们已经知道了质心的位置，并想找出皇后和其他地方之间的距离，使用distance()方法可以很容易地做到这一点:</p><pre class="lh li lj lk gt nk nl nm nn aw no bi"><span id="4e7b" class="np lx it nl b gy nq nr l ns nt">queens_point = gdf['centroid'].iloc[1]<br/>gdf['distance'] = gdf['centroid'].distance(queens_point)</span></pre><p id="de0c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，您可以执行许多空间聚合功能来找出平均、最大或最小距离。</p><pre class="lh li lj lk gt nk nl nm nn aw no bi"><span id="97df" class="np lx it nl b gy nq nr l ns nt">gdf['distance'].mean() #To find the mean distance<br/>gdf['distance'].max() #To find the maximum distance<br/>gdf['distance'].min() #To find the minimum distance</span></pre><h1 id="f379" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">结论</h1><p id="1a53" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ne kt ku kv nf kx ky kz ng lb lc ld im bi translated">就是这样！希望你今天能学到新东西。在下一篇文章中，我们将深入探讨如何可视化这些地理空间数据并从头开始创建。敬请期待！</p></div><div class="ab cl ol om hx on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="im in io ip iq"><p id="ccaf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="le">做订阅我的邮件简讯:</em></strong><a class="ae lf" href="https://tinyurl.com/2npw2fnz" rel="noopener ugc nofollow" target="_blank"><em class="le">https://tinyurl.com/2npw2fnz</em></a><em class="le"/><strong class="kk iu"><em class="le">在这里我定期用通俗易懂的英语和漂亮的可视化总结AI研究论文。</em>T19】</strong></p></div></div>    
</body>
</html>