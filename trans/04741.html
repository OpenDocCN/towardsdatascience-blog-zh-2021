<html>
<head>
<title>How to Monitor Repeat Purchase Behavior Using Google Data Studio and BigQuery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Google Data Studio和BigQuery监控重复购买行为</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-monitor-repeat-purchase-behavior-using-google-data-studio-and-bigquery-c2b5adbe8ebb?source=collection_archive---------9-----------------------#2021-04-25">https://towardsdatascience.com/how-to-monitor-repeat-purchase-behavior-using-google-data-studio-and-bigquery-c2b5adbe8ebb?source=collection_archive---------9-----------------------#2021-04-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8741" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">创建重复购买行为的自定义自动化可视化指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4c87c860d9d9a4e83ca15b3bc256e53d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gf7frO3WJ_Vm2gUY"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kv" href="https://unsplash.com/@austindistel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Austin Distel </a>拍摄的照片</p></figure><p id="c2ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">监控重复购买行为对于确保零售或电子商务业务盈利至关重要。<a class="ae kv" href="https://blog.smile.io/repeat-customers-profitable/" rel="noopener ugc nofollow" target="_blank">回头客通常每次购物花费更多，更有可能向其他顾客推荐商店或产品，从而增加新顾客的获得和收入</a>。</p><p id="384f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">自动化报告仪表板有助于企业所有者和分析师实时了解重复购买水平。在这篇文章中，我将演示如何使用Google Data Studio和BigQuery来实现这一点。</p><p id="5bc0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你从事电子商务，你可能已经有了一个谷歌分析账户，并且能够在那里查看留存率。构建该仪表板的优势在于，您可以根据自己的需求定制视图，并添加对您的业务有独特帮助的指标。除此之外，如果您能够从调查或社交媒体中获得数据，您可以轻松地将仪表板与其他数据源集成。所有的洞察力都集中在一个地方，因此可以更快地做出决策。</p><p id="f80c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是在Google Data Studio中完成的重复购买和保留仪表板示例:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="2e12" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这篇文章以Google Data Studio和Big Query为特色，但是我将更侧重于创建分析和度量标准，而不是讲授这些工具的基础知识。对于初学者，我会在文章末尾放一些资源供你参考。</p><h1 id="94af" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">数据集</h1><p id="d9f3" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">本演示使用的数据是来自UCI机器学习库的<a class="ae kv" href="https://archive.ics.uci.edu/ml/datasets/Online+Retail#" rel="noopener ugc nofollow" target="_blank">在线零售数据集。它是一个数据集，包含来自在线零售店的交易。您可以使用任何包含客户id、订单id、订单日期和销售额的事务数据来复制这个仪表板。</a></p><p id="6a17" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些数据是从网站上下载的，然后手动上传到Google BigQuery，这是一个可扩展的、具有成本效益的数据仓库。如果您的数据来自在线商店，可以设置集成，以便数据从商店流向第三方连接器，然后流向您的BigQuery仓库。如果您有这样的设置，数据将定期刷新，确保您获得关于您的业务的最新见解。</p><p id="b7eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我不会详细介绍如何建立数据仓库，因为我打算更多地关注仪表板分析，但BigQuery有相当广泛的文档<a class="ae kv" href="https://cloud.google.com/bigquery/docs#training-and-tutorials" rel="noopener ugc nofollow" target="_blank">在这里</a>，以供参考。</p><h1 id="7730" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">将Data Studio连接到BigQuery数据集</h1><p id="492a" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">建立数据仓库后，下一步是在Google Data Studio中创建数据源。以下是执行此操作的步骤:</p><ol class=""><li id="5bcf" class="mr ms iq ky b kz la lc ld lf mt lj mu ln mv lr mw mx my mz bi translated">在Data Studio主页上，单击Create。选择数据源。</li><li id="d6c4" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">会出现各种各样的谷歌连接器。选择BigQuery。</li><li id="246a" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">为事务性数据选择BigQuery项目和数据集。</li><li id="ebb9" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">单击连接。</li><li id="631e" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">数据中的所有字段都将出现。检查数据格式是否正确，并在需要时添加自定义计算字段。对于这个仪表板，我添加了以下内容:</li></ol><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="ef8b" class="nk lv iq ng b gy nl nm l nn no">% Repeat Customers:<br/>COUNT_DISTINCT(CASE WHEN RepeatPurchase = ‘Repeat Customer’ THEN CustomerID ELSE NULL END) / COUNT_DISTINCT(CustomerID)</span><span id="0cd9" class="nk lv iq ng b gy np nm l nn no">Average Order Value (AOV): SUM(Sales)/COUNT_DISTINCT(InvoiceNo)</span><span id="d2bb" class="nk lv iq ng b gy np nm l nn no">Purchase Frequency: COUNT_DISTINCT(InvoiceNo) / COUNT_DISTINCT(CustomerID)</span></pre><p id="b6d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">6.单击创建报告。</p><p id="7e18" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您将看到一个空白仪表板，您可以在其中放置所有需要的图表元素。</p><h1 id="388e" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">创建仪表板</h1><p id="b05c" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">让我们将仪表板组件分解为几个关键元素:</p><ul class=""><li id="1af5" class="mr ms iq ky b kz la lc ld lf mt lj mu ln mv lr nq mx my mz bi translated">页面过滤器</li><li id="3dac" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr nq mx my mz bi translated">关键指标的最高表现</li><li id="3d18" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr nq mx my mz bi translated">重复购买的月度趋势</li><li id="8f8c" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr nq mx my mz bi translated">重复购买率(又名队列分析)</li><li id="4073" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr nq mx my mz bi translated">重复购买者购买的产品</li></ul><h2 id="ca95" class="nk lv iq bd lw nr ns dn ma nt nu dp me lf nv nw mg lj nx ny mi ln nz oa mk ob bi translated">页面过滤器</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/f4b4458a78efd7c0f9a5de634ca636cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JGty9GI3okoZk8PEC2HiAA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="d7f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">页面级过滤器通常是您在仪表板上部看到的过滤器。它提供了交互功能，因为它使用户能够深入了解特定组的表现。在我们的控制面板中，我们可以选择关注哪个国家(我默认选择了英国)、产品类型、重复购买群体(首次购买者与重复购买者)以及交易日期。</p><h2 id="3832" class="nk lv iq bd lw nr ns dn ma nt nu dp me lf nv nw mg lj nx ny mi ln nz oa mk ob bi translated">关键指标的最高表现</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/63abd9613decc8fc972c5c06fd74034a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tBKqUzMVbYjrR1pSGo3M-w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="b44f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">仪表板的第一个元素应该包含要查看的最重要的业务指标。我更喜欢用简单的记分卡——不要花哨的图表，直接列出你需要看到的关于企业健康状况的数字。我也更喜欢使用紧凑的格式——四舍五入到最多1位小数，并加上千位(K)或百万位(M)标记，而不是显示精确的值。这使得图表不那么杂乱，同时不会丢失太多所需的信息。</p><p id="ddc3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">积极和消极的增长指标(绿色和红色)是一个伟大的事情。无需使用任何额外的图表，您就可以看到企业在特定指标上的表现是超过还是低于前期。</p><p id="c12b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">代码:如何使用BigQuery创建回头客标志</strong></p><p id="9b12" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的记分卡中强调的一个关键指标是回头客(之前已经从商店购买过的顾客)。这个指标不能在Data Studio中计算，但可以在BigQuery中用下面的代码轻松完成:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="cd58" class="nk lv iq ng b gy nl nm l nn no">SELECT *,<br/>CASE WHEN customer_seq &gt; 1 THEN 'Repeat Customer'<br/>ELSE 'New Customer'<br/>END AS RepeatPurchase<br/>FROM (<br/>    SELECT  *,<br/>    RANK() OVER (PARTITION BY CustomerID ORDER BY date) AS customer_seq<br/>    FROM online_retail<br/>)</span></pre><p id="beae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">新字段RepeatPurchase是一个字符串字段，指示客户是“回头客”还是“新客户”。</p><h2 id="8842" class="nk lv iq bd lw nr ns dn ma nt nu dp me lf nv nw mg lj nx ny mi ln nz oa mk ob bi translated">重复购买的月度趋势</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/0876ce2be5d60459f5755fc51d15bf3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zzDvmmjk9eX7nu2G3TuXjA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="8d1b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不用说，有必要在每月视图上查看重要指标。通过这样做，人们能够检查趋势和季节模式，并据此采取行动。</p><p id="14a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个仪表板中，我首先显示了重复购买客户的原始数量以及购买频率。第二张图表显示了回头客与首次买家的比例。从原始计数和百分比两方面来看，随着时间的推移，商店似乎有了更多的回头客，这是一个好迹象。</p><h2 id="c567" class="nk lv iq bd lw nr ns dn ma nt nu dp me lf nv nw mg lj nx ny mi ln nz oa mk ob bi translated">重复购买率(又名队列分析)</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/38e48fff6a10a2ddc1fcb811dee11880.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hmjm4EkCH9lOr_0TKT6BhQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="398b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该分析通过关注客户“群体”显示了详细的回购率。在这种情况下，我们将群组定义为在特定月份第一次购买的<strong class="ky ir">组客户。在示例中，第一个群组是2011年1月的群组。各栏代表参考月份，即n个月后，回购利率是多少？</strong></p><p id="2cee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从该表中可以看出，2011年1月首次购买者中，24%的人会在一个月后从商店回购，3个月后的回购率为24.2%，10个月后的回购率为36.8%。</p><p id="5125" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">“总计”行代表平均回购率，不管我们看的是哪一组。整体来看，该店1个月复购率23.7%，3个月复购率23.5%，10个月复购率36.8%。</p><p id="37de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">代码:如何使用BigQuery执行群组分析</strong></p><p id="2788" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下代码片段显示了如何计算群组表中的回购率:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="og lt l"/></div></figure><p id="ce97" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">仪表板还包含销售百分比的群组分析—为了简洁起见，这里没有显示代码，因为它本质上与上面的相同(不是计算客户，而是计算销售总额)。</p><h2 id="4187" class="nk lv iq bd lw nr ns dn ma nt nu dp me lf nv nw mg lj nx ny mi ln nz oa mk ob bi translated">重复购买者购买的产品</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/6428bc547808807fff29c2d7332de710.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HK1NXGq3XONWa4dAZtb67A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="ffcd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">仪表板的最后一部分更侧重于细节，即哪些产品对重复购买客户和销售贡献最大？仅仅一张简单的桌子就足够了。虽然这里没有涉及，但确定有利可图的产品组合的分析，如市场购物篮分析，可以为您的企业提供营销和促销见解。</p><h1 id="5dab" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">摘要</h1><p id="7f54" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">在本文中，我介绍了重复购买仪表板在监控零售店绩效方面的价值:</p><ul class=""><li id="bbc2" class="mr ms iq ky b kz la lc ld lf mt lj mu ln mv lr nq mx my mz bi translated">一眼看到背线表演</li><li id="3e51" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr nq mx my mz bi translated">可视化重复购买的每月趋势</li><li id="1d47" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr nq mx my mz bi translated">通过队列分析计算重复购买率</li></ul><p id="07b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个例子主要关注在线零售数据，但是也可以用于具有类似数据结构的其他销售数据源。任何包含客户id、订单id、订单日期和销售额的交易数据都可以用来复制这个仪表板。</p><p id="8a4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我还强调了Google Data Studio生成这类报告的能力，以及BigQuery如何通过SQL语言增强它来进行更高级的分析。</p><p id="e4b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本文中的所有代码都可以在我的<a class="ae kv" href="https://github.com/noemistatcat/Data_Viz_Portfolio" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上访问。快乐分析！</p></div><div class="ab cl oi oj hu ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="ij ik il im in"><p id="b769" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Google Data Studio和Big Query的有用资源:</p><ul class=""><li id="9f65" class="mr ms iq ky b kz la lc ld lf mt lj mu ln mv lr nq mx my mz bi translated"><a class="ae kv" href="https://analytics.google.com/analytics/academy/course/10" rel="noopener ugc nofollow" target="_blank">分析学院对数据工作室的介绍</a></li><li id="cfc1" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr nq mx my mz bi translated"><a class="ae kv" href="https://www.qwiklabs.com/quests/70" rel="noopener ugc nofollow" target="_blank">营销分析师big query</a></li><li id="84dd" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr nq mx my mz bi translated"><a class="ae kv" href="https://cloud.google.com/bigquery/docs#training-and-tutorials" rel="noopener ugc nofollow" target="_blank"> BigQuery文档</a></li></ul></div></div>    
</body>
</html>