<html>
<head>
<title>Well Log Data Outlier Detection With Machine Learning and Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于机器学习和Python的测井数据异常检测</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/well-log-data-outlier-detection-with-machine-learning-a19cafc5ea37?source=collection_archive---------9-----------------------#2021-10-22">https://towardsdatascience.com/well-log-data-outlier-detection-with-machine-learning-a19cafc5ea37?source=collection_archive---------9-----------------------#2021-10-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="785d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">异常值的识别是机器学习工作流程中的一个重要步骤</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/edffab2696935bd31c86990b9fcb81c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Q2FrSeLjqscpEgzx"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">威尔·梅尔斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="c2f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">离群值是数据集中的异常点。它们是不符合数据集的正态或预期统计分布的点，可能由于多种原因而出现，例如传感器和测量误差、较差的数据采样技术以及意外事件。</p><p id="a281" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在测井测量和岩石物理数据中，异常值可能由于被冲刷的钻孔、工具和传感器问题、罕见的地质特征以及数据采集过程中的问题而出现。必须在工作流程的早期识别和调查这些异常值，因为它们会导致机器学习模型的预测不准确。</p><p id="327f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下图中的例子(来自McDonald，2021)说明了岩心孔隙度与岩心渗透率的关系。大多数数据点形成一个连贯的聚类，但是，由红色正方形标记的点位于该主要点组之外，因此可以被视为异常值。为了确认它是否确实是一个异常值，需要对报告和原始数据进行进一步的调查。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/91c907747c56c187333d5e51d52d3b95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OqXFkSWUWBlS0Odw97yCgQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">岩心孔隙度和渗透率数据中的异常值示例。图片来自麦当劳(2021)</p></figure><h1 id="560e" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">识别异常值</h1><p id="66bf" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">有多种方法可以识别数据集中的异常值，其中一些方法涉及可视化技术，如散点图(如交会图)和箱线图，而其他方法则依赖于单变量统计方法(如Z分数)或甚至无监督的机器学习算法(如K近邻)。</p><p id="5394" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文将介绍以下异常值检测方法:</p><ul class=""><li id="8c8e" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated">基于领域知识的手动删除</li><li id="544c" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">箱线图和IQR</li><li id="8e6a" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">使用卡尺曲线</li><li id="c4d1" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">自动异常检测</li></ul><h1 id="e62e" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">岩石物理机器学习系列</h1><p id="0195" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">本文是正在进行的系列文章的第三部分，该系列文章着眼于从基本测井记录测量到使用机器学习进行岩石物理性质预测的数据集。</p><p id="9995" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些文章最初是在SPWLA 2021大会的一个机器学习和人工智能研讨会上作为交互式笔记本展示的。它们后来被扩展和更新以形成这些文章。该系列包括:</p><ol class=""><li id="d182" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu nh mz na nb bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/exploring-well-log-data-using-pandas-matplotlib-and-seaborn-712779a39ac2">探索性数据分析:使用Pandas、Matplotlib和Seaborn </a>探索测井数据</li><li id="346e" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu nh mz na nb bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/identifying-and-handling-missing-well-log-data-prior-to-machine-learning-5fa1a3d0eb73">在岩石物理机器学习之前识别和处理缺失的测井数据</a></li><li id="a3dd" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu nh mz na nb bi translated">测井数据异常值检测— <em class="ni">本文</em></li><li id="3306" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu nh mz na nb bi translated">使用机器学习预测关键储层属性<br/><em class="ni">* *尚未完成** </em></li></ol><h1 id="ae7d" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">数据</h1><p id="ac86" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">2018年，Equinor向公共领域发布了Volve领域的全部内容，以促进研究和学习。发布的数据包括:</p><ul class=""><li id="19d3" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated">测井记录</li><li id="a21d" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">岩石物理解释</li><li id="3aae" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">报告(地质、完井、岩石物理、岩心等)</li><li id="5178" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">核心测量</li><li id="5447" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">地震数据</li><li id="0f73" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">地质模型</li><li id="35ee" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">还有更多…</li></ul><p id="51aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Volve油田位于北海挪威部分斯塔万格以西约200公里处。1993年在侏罗纪时代的胡金地层中发现了碳氢化合物。石油生产始于2008年，持续了8年(是计划时间的两倍)，直到2016年停止生产。在油田寿命期内，总共生产了63个MMBO，达到了56000桶/天的稳定产量</p><p id="98ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有关Volve字段和整个数据集的更多详细信息，请访问:<a class="ae ky" href="https://www.equinor.com/en/what-we-do/norwegian-continental-shelf-platforms/volve.html" rel="noopener ugc nofollow" target="_blank">https://www . equinor . com/en/what-we-do/Norwegian-continental-shelf-platforms/Volve . html</a></p><p id="2076" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些数据在Equinor开放数据许可证下获得许可。</p><h1 id="998a" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">用于分析的选定数据</h1><p id="f4a8" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Volve数据集由24口井组成，包含各种测井数据和其他相关测量数据。对于这个小教程系列，我们将选择五口井。这些是:</p><ul class=""><li id="c298" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated">9月15日-F-1 A</li><li id="93dd" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">9月15日-F-1 B</li><li id="b625" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">9月15日-F-1 C</li><li id="7b6a" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">2011年9月15日至11日</li><li id="24a6" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">15/9-F-11 B</li></ul><p id="179c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从这些井中，选择了一套标准的测井测量(特征)。它们的名称、单位和描述详见下表。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/daea47f40fc9e4538ffcdd259a9246ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Wajhxi61alcCQgCo.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Volve油田选定井的标准测井测量和岩石物理推导曲线。</p></figure><p id="72e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该系列笔记本的目标是预测三种常见的岩石物理测量值:孔隙度(PHIF)、含水饱和度(西南)和页岩体积(VSH)。传统上，这些是通过一些经验公式计算出来的。</p><h1 id="6974" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">导入库和数据</h1><p id="7d83" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">项目这一部分的第一步是导入我们正在使用的库和数据。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="0962" class="np lx it nl b gy nq nr l ns nt">import pandas as pd<br/>import matplotlib.pyplot as plt<br/>import numpy as np<br/>import seaborn as sns<br/>import scipy</span><span id="41ab" class="np lx it nl b gy nu nr l ns nt">df = pd.read_csv('data/spwla_volve_data.csv')</span></pre><p id="de29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最初看一下pandas的<code class="fe nv nw nx nl b">describe()</code>功能，我们可以看到输出的数据范围(最小和最大)。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="a4c4" class="np lx it nl b gy nq nr l ns nt">df.describe()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/667e8599155102ae7d5934b0f274094c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*49NkXOsnqhedgOKmPBEnAA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从pandas返回使用df.describe()方法的测井测量数据帧。</p></figure><h1 id="381e" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">使用手动方法处理异常值</h1><h2 id="54d1" class="np lx it bd ly nz oa dn mc ob oc dp mg li od oe mi lm of og mk lq oh oi mm oj bi translated">去除极端电阻率</h2><p id="e183" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">电阻率测量提供了电流通过地层的难易程度的指示。简而言之，如果地层含有盐水，那么电阻率将会很低，而如果存在石油或孔隙空间很小，电阻率将会很高。</p><p id="9e81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">电阻率测量可能受到多种方式的影响，例如附近的套管、工具/传感器问题，甚至是非常高电阻的地层。此外，根据进行测量的工具类型(感应、电磁传播、侧向测井),在高电阻率值时，读数的准确度可能会受到限制。</p><p id="1691" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们正在处理的数据集包含电磁传播电阻率测量值，我们将应用以下截止值。这些限制并不特定于任何工具，并且会根据所使用的数据和技术而变化。</p><ul class=""><li id="4910" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated">瑞秋&gt; 60岁</li><li id="692a" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">狐狸精&gt; 100</li><li id="0e27" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">RPCHEM &gt; 100</li><li id="7d39" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">RPCLEM &gt; 200</li></ul><p id="1888" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">包含高于这些值的电阻率测量值的任何行都将被删除。如果我们只删除数据值，我们以后会有丢失数据的问题。</p><p id="389b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过以下方式做到这一点:</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="b266" class="np lx it nl b gy nq nr l ns nt">df = df.loc[~((df.RACEHM &gt; 60) | (df.RACELM &gt; 100) | (df.RPCEHM &gt; 100) | (df.RPCELM &gt; 200)),:]</span><span id="039f" class="np lx it nl b gy nu nr l ns nt">df.describe()</span></pre><p id="7de7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们返回数据帧摘要时，我们可以看到这些电阻率曲线的测量次数从27，845次减少到23，371次</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/54148206a967cf18a594a0c1cd7442c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vC8ZY_p12y1epguYSbS95g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">去除高电阻率值后，使用熊猫公司的df.describe()方法返回的测井测量数据帧。</p></figure><h2 id="f5da" class="np lx it bd ly nz oa dn mc ob oc dp mg li od oe mi lm of og mk lq oh oi mm oj bi translated">将电阻率对数曲线转换为正常值</h2><p id="cc4f" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">由于电阻率曲线的数值范围很大，从几十欧姆·毫米到几千欧姆·毫米，并且通常呈现偏斜分布，因此最好通过取数值的对数底10 (log10)将测量值转换为更正态的分布。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="b2be" class="np lx it nl b gy nq nr l ns nt"># Select all resistivity curves<br/>res_curves = ['RACEHM', 'RACELM', 'RPCEHM', 'RPCELM']<br/><br/># Loop through each curve and transform it<br/>for res in res_curves:<br/>    df[f'{res}_l10'] = np.log10(df[res])<br/>    <br/>    # Drop out the original columns<br/>    df.drop(columns=[res],inplace=True)<br/>    <br/>df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/44f87300f5816b3c5e2f9da6561a4bdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sFf-GtALWksOOtC_3BsrLg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">获取电阻率测量值的LOG10后的数据帧。</p></figure><p id="f358" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从上表中，我们可以看到新列已经添加到数据帧中，旧列已经删除。</p><h2 id="de6b" class="np lx it bd ly nz oa dn mc ob oc dp mg li od oe mi lm of og mk lq oh oi mm oj bi translated">用箱线图识别异常值</h2><p id="788c" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">箱线图是一种基于五个关键数字显示数据分布的图形和标准化方法:最小值、第一个四分位数(第25个百分位数)、中值(第二个四分位数)。/第50个百分位数)、第3个四分位数(第75个百分位数)和“最大值”。最小值和最大值分别定义为Q1-1.5 * IQR和Q3 + 1.5 * IQR。任何超出这些限制的点都被称为异常值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi om"><img src="../Images/e0416677cd8cfe08d7edcbb264b29218.png" data-original-src="https://miro.medium.com/v2/resize:fit:60/0*uOCDHxiEtTijnVHz"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/03c06b197a96bf99b355d1a804eef898.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ci2Aq69XVfChev1l.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">箱线图的图形描述，突出显示关键组成部分，包括中位数、四分位数、异常值和四分位数间距。作者创造的形象。</p></figure><p id="e94a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的YouTube频道上的以下视频介绍了boxplots的背景以及如何用python生成它们。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><p id="4266" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">调用箱线图最简单的方法是在数据帧上使用<code class="fe nv nw nx nl b">.plot(kind='box)</code>。但是，正如您将看到的，这将在一个刻度上绘制所有的列，如果曲线之间有不同的值范围，例如从0到1，以及3000到5000，那么较小的测量值将更难区分。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="3514" class="np lx it nl b gy nq nr l ns nt">df.plot(kind='box')<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oq"><img src="../Images/51b2b8c0979cc87f3737bbec51bcdac1.png" data-original-src="https://miro.medium.com/v2/format:webp/1*uDcVTp9ilPWemWeXMlZfgA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用pandas生成的测井数据的简单箱线图。图片由作者提供。</p></figure><p id="4cee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了使这些图更容易查看和理解，我们可以从seaborn库调用boxplot，并遍历dataframe中的每一列。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or op l"/></div></figure><p id="5516" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦我们创建了函数，我们就可以创建一个列的列表，并“弹出”或删除包含字符串数据的井名列。然后，我们可以对数据帧中的每条测井曲线运行该函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or op l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/fcfafe428837e3c866c56a9b86441c67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U9uGzQIwbkB5e5MBORXL1g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">突出异常值的测井数据箱线图，每个都有自己的数据范围。作者图片</p></figure><p id="410b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从生成的图中，我们可以看到一些测量值可能包含异常值，这些异常值以绿色突出显示。仅基于箱线图，不容易判断这些点是否是真正的异常值。这就是我们需要依靠领域知识和其他方法的地方。</p><h2 id="2307" class="np lx it bd ly nz oa dn mc ob oc dp mg li od oe mi lm of og mk lq oh oi mm oj bi translated">用交会图识别异常值</h2><p id="6029" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">当处理多个变量时，我们可以使用交会图来识别潜在的异常值。这些包括绘制一个测井测量值与另一个测井测量值的对比图。第三次测井测量可用于为绘图添加颜色，以增强异常值的识别。</p><p id="c19e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本例中，我们将使用一个函数来绘制密度与中子孔隙度数据的散点图(交会图)，该散点图将由卡尺着色。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or op l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/589687bc785e968a96e3f2ee70354a35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bbj86TqMskoIuF3UlKxwOA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">所有井的中子孔隙度(NPHI)与体积密度(RHOB)的交会图。颜色表示由卡尺(CALI)测量的钻孔尺寸。作者图片</p></figure><p id="40d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以在返回的图上看到，有几个点以橙色/红色突出显示，这表明如果我们假设位大小为8.5英寸，可能会发生冲刷。</p><p id="cf43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这表明一些测量可能会受到井筒条件的影响。许多测井工具能够补偿一定程度的冲蚀和粗糙。</p><p id="e21b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本例中，为了说明处理受冲刷影响的坏数据点的过程，我们将删除任何超过9英寸的点。超出标准0.5英寸。任何小于8.5英寸的点也将被删除。</p><p id="0a99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过以下方式做到这一点:</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="69ab" class="np lx it nl b gy nq nr l ns nt">df = df[(df['CALI'] &gt;= 8.5) &amp; (df['CALI'] &lt;= 9)]<br/>df.describe()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/18182c83ffec1c7ecedb210f1d5c60cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OdqzRgPNuhDJSn6wkvIZPQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">删除受冲刷影响的坏数据点后的数据帧摘要。图片由作者提供。</p></figure><p id="2d49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在可以看到，我们已经将数据集进一步减少到22，402个深度样本，低于初始数据集中的27，845个。</p><h1 id="f965" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">使用无监督机器学习方法识别异常值</h1><p id="7613" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">监督和非监督机器学习方法都可以用于识别测井数据和岩石物理数据中的异常值。出于本教程的目的，我们将关注一些无监督学习技术。</p><p id="643b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无监督的机器学习模型试图在不需要标记类别的情况下识别数据中的潜在关系。有许多无监督的机器学习方法可用于识别数据集中的异常/异常值。</p><p id="5559" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将了解三种常见的方法:</p><ul class=""><li id="0254" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated">隔离林(IF)</li><li id="d95d" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">一级SVM (SVM)</li><li id="08ea" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">本地异常因素(LOF)</li></ul><h2 id="b910" class="np lx it bd ly nz oa dn mc ob oc dp mg li od oe mi lm of og mk lq oh oi mm oj bi translated"><strong class="ak">隔离林</strong></h2><p id="0626" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">隔离林方法基于决策树。该方法选择一个特征/测量值，并在最小值和最大值之间随机分割数据。然后，这个过程沿着决策树继续下去，直到数据中所有可能的分裂都已完成。任何异常/异常值都将在流程的早期被分离出来，使其易于识别并与其余数据隔离。</p><p id="036a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下图展示了一个非常简单的例子，它使用了一个变量——体积密度(RHOB)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/66c6ba663d92df596e41418dcc10b57a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fWE6GpKxlw9HJle9jE6WZA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">测井数据隔离林示例。图片由作者提供。</p></figure><h2 id="f5d5" class="np lx it bd ly nz oa dn mc ob oc dp mg li od oe mi lm of og mk lq oh oi mm oj bi translated">一等SVM</h2><p id="7073" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">支持向量机是一种常见的分类机器学习工具，这意味着它们适合根据数据特征将数据分成不同的组。这是通过识别数据组之间的最大边际超平面来实现的，如下面简单的多类示例所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/6000f08365ef76378260e0c636c28f88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iWjvdwb9pvy2GKkEV3oppA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SVM划分两类数据的示例。作者图片</p></figure><p id="2094" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在传统的SVM分类中，我们有不止一个类或相。然而，当我们只有一类数据时，我们可以使用所谓的一类SVM。</p><p id="c9a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在异常值检测的情况下，我们要做的是找到将数据点与原点分开的边界(见下图中的左图)。在这种情况下，我们将原点视为第二类。边界线外的任何点都被视为异常值。我们可以通过提供想要在数据集中检测的异常值的数量来控制线的位置。这个参数被称为污染水平。</p><p id="3d03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但实际上，离群值可能存在于与主数据云相关的任何一侧。在这种情况下，我们希望找到一个非线性超平面，将异常值从主数据点中分离出来(参见下图中的右图)。我们可以使用RBF核(径向基函数核)来寻找点之间的非线性边界。</p><p id="e600" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过指定污染水平来控制允许识别多少异常值。如果我们只需要少量的异常值，我们可以将其设置为一个较小的数字。类似地，如果我们想要检测更多的异常值，我们可以为算法提供更多的污染值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/741ac631a737de69598f776730618853.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1LtnkUyAn6ohmzpRLqSLng.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用一次SVM识别测井数据中异常值的示例。图片作者。</p></figure><h2 id="5140" class="np lx it bd ly nz oa dn mc ob oc dp mg li od oe mi lm of og mk lq oh oi mm oj bi translated"><strong class="ak">局部异常因素</strong></h2><p id="7159" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">该方法评估给定点周围数据点的密度。与其他点相比密度较低的点将被视为异常值。有关此方法的更多信息，请查看此链接:</p><p id="c0f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://medium.com/mlpoint/local-outlier-factor-a-way-to-detect-outliers-dde335d77e1a" rel="noopener">https://medium . com/ml point/local-outlier-factor-a-way-to-detect-outliers-DDE 335d 77 E1 a</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/b387ed08c3b45132848fa63f94dc493c.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*qu4NAAey2dNt-bOzFNu3DA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">异常值检测的局部异常值因子示例。图片来自<a class="ae ky" href="https://scikit-learn.org/stable/auto_examples/neighbors/plot_lof_outlier_detection.html" rel="noopener ugc nofollow" target="_blank">https://sci kit-learn . org/stable/auto _ examples/neighbors/plot _ lof _ outlier _ detection . html</a></p></figure><h2 id="1c0b" class="np lx it bd ly nz oa dn mc ob oc dp mg li od oe mi lm of og mk lq oh oi mm oj bi translated">创建模型</h2><p id="2acb" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们可以使用下面的代码非常简单地创建模型，这是使用<a class="ae ky" href="https://scikit-learn.org/stable/" rel="noopener ugc nofollow" target="_blank"> scikit学习库完成的。</a></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or op l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/f260c73bb2e9cb3fe7601d854b3f1f4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ag0SMxrdAh41UizAuvg89Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">返回每个所选模型的异常分数的数据框架，以及数据点是异常值(-1)还是异常值(1)。图片由作者提供。</p></figure><p id="f1d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在可以使用密度-中子交会图来检查每个模型的性能。这是通过使用Seaborn的FacetGrid并将散点图映射到它来实现的，如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or op l"/></div></figure><p id="9792" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将为每种方法和已识别的异常数据点的数量返回以下图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oq"><img src="../Images/c12a09f711f754059cc0e860767c685a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*bpJNC3WvzP0OuSDLW6SVdw.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oq"><img src="../Images/0d508a91a4d0667c048ad1a1385582fc.png" data-original-src="https://miro.medium.com/v2/format:webp/1*RQ1Ffj8yMRzbuyFyIZKH_A.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oq"><img src="../Images/22c7ae5bb808fc43c65c293a3ebb8252.png" data-original-src="https://miro.medium.com/v2/format:webp/1*uz2i_Clbn9CjKRYpvXhZSA.png"/></div></figure><p id="6944" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看来综合框架方法提供了更好的结果，其次是LOF，然后是SVM。在前两种方法中，图右侧的大部分异常值都被移除。</p><p id="0102" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于每种方法，我们可以更详细地查看每口井的数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or op l"/></div></figure><p id="1fa9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它返回下面的图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pa"><img src="../Images/07f6ce3a744d5466cf65ec2eac8b3a4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SqOoy-hLhXe0fk7QJjihRA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">测井数据异常值检测中不同异常值识别方法的比较。异常值以橙色突出显示，内标/优点以蓝色突出显示。图片由作者提供。</p></figure><p id="e2bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这让我们更好地了解如何使用所选方法在每口井中识别异常。我们可以看到，LOF方法突出显示了数据点中心的许多点，这些点可能不是真正的异常值。这就是领域专家知识在确认这些点是否确实是异常值时发挥作用的地方。</p><h2 id="7157" class="np lx it bd ly nz oa dn mc ob oc dp mg li od oe mi lm of og mk lq oh oi mm oj bi translated">在测井图上显示异常点</h2><p id="db44" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">为了确定在哪里检测到异常值，我们可以使用下面的代码为每种方法和每口井生成简单的测井曲线。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or op l"/></div></figure><p id="1ffb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在绘制数据之前，我们可以根据井名将数据帧分成多个数据帧，这样会更简单</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or op l"/></div></figure><p id="9ed3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦数据帧被井分割，我们就可以使用列表的索引号来访问所需的数据。</p><p id="bd89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们循环通过井名列表，我们可以得到索引号和相关的井名。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or op l"/></div></figure><p id="d83d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它返回:</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="d191" class="np lx it nl b gy nq nr l ns nt">Wellname 	 Index<br/>15/9-F-1 A 	0<br/>15/9-F-1 B 	1<br/>15/9-F-1 C 	2<br/>15/9-F-11 A 	3<br/>15/9-F-11 B 	4</span></pre><p id="78f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们可以用它来选择所需的井</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or op l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/34b4f16cc9b8522f5e6a5f42def5361b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1xfYRMI7L0mX5SjaJ-ByHw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用红色显示已识别异常的测井曲线。图片由作者提供。</p></figure><p id="6d95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的图向我们展示了常规测井图上存在异常/潜在异常值的地方。从3700到3875的区间是包含缺失值的区间。因为我们使用的是线图，所以对该间隙两侧的点进行插值以创建一条线。</p><p id="d075" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">突出显示的间隔需要用领域知识进行更详细的评估，但是出于本教程的目的，我们将使用隔离森林方法的结果。</p><h1 id="4461" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">导出结果</h1><p id="b774" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">现在我们有了一个干净的数据集，我们可以将其导出到机器学习阶段所需的文件中。</p><p id="8092" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，我们首先需要创建我们的临时数据帧，其中我们只使用被隔离林算法识别为内联者的数据。一旦这些点被删除，我们就可以创建我们的输出数据框架。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or op l"/></div></figure><h2 id="0133" class="np lx it bd ly nz oa dn mc ob oc dp mg li od oe mi lm of og mk lq oh oi mm oj bi translated">创建监督学习文件</h2><p id="b6ba" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">为了准备监督学习文件，我们需要执行几个步骤。</p><h2 id="8053" class="np lx it bd ly nz oa dn mc ob oc dp mg li od oe mi lm of og mk lq oh oi mm oj bi translated">训练、验证和测试分割</h2><p id="92b7" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在导出数据之前，我们首先需要将数据分成训练、验证和测试数据集。</p><p id="82b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">训练数据集用于训练模型，验证数据集用于调整模型参数，而测试数据集用于在看不见的数据上验证模型。应该注意的是，这些术语可以互换使用，可能会引起混淆。</p><h2 id="ce20" class="np lx it bd ly nz oa dn mc ob oc dp mg li od oe mi lm of og mk lq oh oi mm oj bi translated">测试数据分离</h2><p id="236f" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">首先，我们将分离一口井(15/9-F11 B)用于我们的测试数据集，其余的井和数据将被分配给<code class="fe nv nw nx nl b">training_val_wells</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or op l"/></div></figure><h2 id="b540" class="np lx it bd ly nz oa dn mc ob oc dp mg li od oe mi lm of og mk lq oh oi mm oj bi translated">训练和验证数据集</h2><p id="1171" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">接下来，我们将我们的<code class="fe nv nw nx nl b">training_val_wells</code>数据分成训练特征和目标特征(软件，PHIF &amp; VSH)。在我们使用Sklearn进行预测的情况下，我们通常只指定一个特征进行预测。但是，对于这个示例，我们将设置三个目标特性。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or op l"/></div></figure><p id="4a40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们检查培训功能(X)时，我们可以看到我们拥有所有必需的列。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="fe95" class="np lx it nl b gy nq nr l ns nt">X.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/89a8358b80d03ec4b938bbaddb0bd40c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0PcKbEax5O2YOgGrK2WeIg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">剔除异常值后的选定训练特征。图片作者。</p></figure><p id="a561" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以检查目标的头部特征(y):</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="5313" class="np lx it nl b gy nq nr l ns nt">y.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/97c7b8e5dc1b8bf218ea7413b0168ab1.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*ecwrR2wsuqUeSq1R8th6_Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">剔除异常值后选择的目标特征。</p></figure><h2 id="1b5c" class="np lx it bd ly nz oa dn mc ob oc dp mg li od oe mi lm of og mk lq oh oi mm oj bi translated">列车测试分离</h2><p id="7062" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Sklearn的train_test_split模块。对于本例，我们将使用70%的训练规模，剩下30%用于验证和调整模型。<code class="fe nv nw nx nl b">random_state</code>已被设置为固定值，以允许本次研讨会产生可重复的结果。如果你想每次都随机化这些值，你可以删除这个方法输入。</p><p id="8437" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ni">需要注意的是，这里使用的方法叫做train_test_split。但我们实际上正在做的是分离训练和验证数据集。</em> </strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or op l"/></div></figure><h1 id="0172" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">摘要</h1><p id="04ca" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在本文中，我们介绍了什么是异常值，以及使用图和无监督学习算法识别异常值的方法。一旦识别出异常值，就可以将其移除。这是通过结合使用方法和领域专业知识来完成的。如果盲目地丢弃分数，你可能会丢弃有价值的数据。所以要经常检查你识别的异常值是不是真的异常值。</p></div><div class="ab cl pe pf hx pg" role="separator"><span class="ph bw bk pi pj pk"/><span class="ph bw bk pi pj pk"/><span class="ph bw bk pi pj"/></div><div class="im in io ip iq"><p id="3e96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这本笔记本最初是为2021年SPWLA大会上的SPWLA机器学习研讨会发布的，后来进行了修改。</p><p id="faa8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ni">感谢阅读！</em></p><p id="be10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您觉得这篇文章很有用，请随时查看我的其他文章，这些文章从不同方面介绍了Python和测井数据。你也可以在 <a class="ae ky" href="https://github.com/andymcdgeo" rel="noopener ugc nofollow" target="_blank"> <em class="ni"> GitHub </em> </a> <em class="ni">找到我在这篇文章和其他文章中使用的代码。</em></p><p id="0d1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ni">如果你想联系我，你可以在</em><a class="ae ky" href="https://www.linkedin.com/in/andymcdonaldgeo/" rel="noopener ugc nofollow" target="_blank"><em class="ni">LinkedIn</em></a><em class="ni">或者我的</em> <a class="ae ky" href="http://andymcdonald.scot/" rel="noopener ugc nofollow" target="_blank"> <em class="ni">网站</em> </a> <em class="ni">找到我。</em></p><p id="cdb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ni">有兴趣了解更多关于python和测井数据或岩石物理学的知识吗？跟我上</em> <a class="ae ky" href="https://andymcdonaldgeo.medium.com/subscribe" rel="noopener"> <em class="ni">中</em> </a> <em class="ni">。</em></p><p id="2168" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢阅读这些教程，并想支持我作为一名作家和创作者，那么请考虑报名成为一名媒体成员。一个月5美元，你就可以无限制地阅读数千篇各种主题的文章。如果您使用<a class="ae ky" href="https://andymcdonaldgeo.medium.com/membership" rel="noopener"> <strong class="lb iu">我的链接</strong> </a> <strong class="lb iu">，</strong>注册，我将为您赚取一小笔佣金，无需额外费用！</p><div class="pl pm gp gr pn po"><a href="https://andymcdonaldgeo.medium.com/membership" rel="noopener follow" target="_blank"><div class="pp ab fo"><div class="pq ab pr cl cj ps"><h2 class="bd iu gy z fp pt fr fs pu fu fw is bi translated">通过我的推荐链接加入Medium安迪·麦克唐纳</h2><div class="pv l"><h3 class="bd b gy z fp pt fr fs pu fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pw l"><p class="bd b dl z fp pt fr fs pu fu fw dk translated">andymcdonaldgeo.medium.com</p></div></div><div class="px l"><div class="py l pz qa qb px qc ks po"/></div></div></a></div></div></div>    
</body>
</html>