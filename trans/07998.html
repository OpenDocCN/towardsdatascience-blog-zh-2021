<html>
<head>
<title>6 Amazing Numpy Functions That Might Surprise You</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">6个令人惊讶的数字函数可能会让你大吃一惊</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/6-amazing-numpy-operations-that-might-surprise-you-52a88da77b9a?source=collection_archive---------21-----------------------#2021-07-22">https://towardsdatascience.com/6-amazing-numpy-operations-that-might-surprise-you-52a88da77b9a?source=collection_archive---------21-----------------------#2021-07-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="aac1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">提高性能，检查平等，重塑，等等</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/113d42ffe11b637ae7b768ba481ad7d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wQLmyf3RIU-0GmGi9opU0Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.pexels.com/@minan1398?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> <strong class="bd kz">安民</strong> </a>发自<a class="ae ky" href="https://www.pexels.com/photo/white-and-gray-cat-lying-on-mossy-ground-1441586/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> <strong class="bd kz">像素</strong> </a></p></figure><p id="7e65" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">NumPy是科学应用的基础Python模块。它是各种领域中最广泛使用的统计分析软件包之一，包括数据科学家、高级分析和统计分析。</p><p id="e713" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">接下来的文章将讨论令人惊奇的功能和使用NumPy可以做的事情。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="f529" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated"><strong class="ak"> 1。allclose()函数</strong></h1><p id="57c8" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">一个比较函数，检查两个数组是否相等或非常相似。这个函数逐项比较两个数据数组，看它们是否在某个阈值内相等，然后返回一个布尔值作为结果。</p><p id="c4e2" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果两个数组的项在指定的容差内不相等，则返回false否则，它返回true。值得注意的是，默认的容忍度是相当适度和有利的。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="fb47" class="nf me it nb b gy ng nh l ni nj">a = np.array([0.16,0.26,0.365])<br/>b = np.array([0.15,0.25,0.36])</span><span id="bc15" class="nf me it nb b gy nk nh l ni nj">tolerance1 = 0.1<br/>tolerance2 = 0.05</span><span id="1a6e" class="nf me it nb b gy nk nh l ni nj">print(np.allclose(a,b,tolerance1))<br/>print(np.allclose(a,b,tolerance2))</span></pre><blockquote class="nl nm nn"><p id="7e01" class="la lb no lc b ld le ju lf lg lh jx li np lk ll lm nq lo lp lq nr ls lt lu lv im bi translated">输出</p></blockquote><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="d86b" class="nf me it nb b gy ng nh l ni nj">True<br/>False</span></pre><h1 id="f6e5" class="md me it bd mf mg ns mi mj mk nt mm mn jz nu ka mp kc nv kd mr kf nw kg mt mu bi translated">2.<strong class="ak"> where()函数</strong></h1><p id="9f94" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">其中()是一个函数，它从满足一组条件的数组中返回元素。此外，该函数返回满足一组标准的元素的索引位置。这与SQL中的where子句基本相同。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="8048" class="nf me it nb b gy ng nh l ni nj">list1 = np.array([1,4,7,6,1,7,3,8,9])</span><span id="6197" class="nf me it nb b gy nk nh l ni nj"># Where the elements in list1 are less than 7, returns the index position<br/>np.where(list1&lt;7)</span></pre><blockquote class="nl nm nn"><p id="d8c8" class="la lb no lc b ld le ju lf lg lh jx li np lk ll lm nq lo lp lq nr ls lt lu lv im bi translated">输出</p></blockquote><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="f394" class="nf me it nb b gy ng nh l ni nj">(array([0, 1, 3, 4, 6]),)</span></pre><h1 id="46ae" class="md me it bd mf mg ns mi mj mk nt mm mn jz nu ka mp kc nv kd mr kf nw kg mt mu bi translated">3.<strong class="ak"> extract()函数</strong></h1><p id="a968" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">顾名思义，Extract()用于根据条件用数组检索特定成员。我们也可以使用and、or或extract()这样的标准。</p><p id="fa84" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">让我们定义一个随机数组。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="4cad" class="nf me it nb b gy ng nh l ni nj"># Random integers<br/>array_test = np.random.randint(18, size=12)</span><span id="8393" class="nf me it nb b gy nk nh l ni nj">#Output: array_test<br/>array([ 2, 13, 16,  9,  2,  8, 12,  6,  6,  1, 15,  3])</span></pre><p id="f6d3" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">让我们根据特定的条件从数组中构造一个布尔数组。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="a92d" class="nf me it nb b gy ng nh l ni nj"># Divide by 2 and check if the remainder is 1<br/>cond = np.mod(array_test, 2)==1<br/> <br/><strong class="nb iu">Output: </strong>cond<br/>array([False,  True, False,  True, False, False, False, False, False, True,  True,  True])</span></pre><p id="8853" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">现在让我们看看extract()如何帮助我们。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="12d3" class="nf me it nb b gy ng nh l ni nj"># Use extract to get the values<br/>np.extract(cond, array_test)</span><span id="828f" class="nf me it nb b gy nk nh l ni nj"><strong class="nb iu">Output</strong><br/>array([13,  9,  1, 15,  3])</span></pre><p id="daf6" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们也可以在提取函数中直接应用条件。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="bfbb" class="nf me it nb b gy ng nh l ni nj"># Apply condition on extract directly<br/><br/>np.extract(((array_test &lt; 2) | (array_test &gt; 14)), array_test)</span><span id="350e" class="nf me it nb b gy nk nh l ni nj"><strong class="nb iu">Output</strong><br/>array([16,  1, 15])</span></pre><h1 id="2a85" class="md me it bd mf mg ns mi mj mk nt mm mn jz nu ka mp kc nv kd mr kf nw kg mt mu bi translated">4.<strong class="ak"> reshape()函数</strong></h1><p id="ee94" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">NumPy中的reshape数组函数用于给数组一个新的形式。这是NumPy最受欢迎的功能之一。整形功能非常有用；我们可以用它给数组一个新的形式或者我们想要的形状。</p><p id="e946" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">它可以增加或减少数组维数，同时保持项目总数不变。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="b5f9" class="nf me it nb b gy ng nh l ni nj">arr = np.arange(1,36,2)<br/>print(arr)</span><span id="ae6e" class="nf me it nb b gy nk nh l ni nj"><em class="no">#reshape<br/></em>print("reshape1\n",arr.reshape(3,6))<br/>print('reshape2\n',arr.reshape(2,3,3))</span></pre><blockquote class="nl nm nn"><p id="89ad" class="la lb no lc b ld le ju lf lg lh jx li np lk ll lm nq lo lp lq nr ls lt lu lv im bi translated">输出</p></blockquote><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="5876" class="nf me it nb b gy ng nh l ni nj">[1 3 5 7 9 11 13 15 17 19 21 23 25 27 29 31 33 35]</span><span id="9962" class="nf me it nb b gy nk nh l ni nj">reshape1 <br/>[[ 1 3 5 7 9 11]<br/>[ 13 15 17 19 21 23]<br/>[25 27 29 31 33 35]]</span><span id="3e4c" class="nf me it nb b gy nk nh l ni nj">reshape2 <br/>[[[ 1 3 5]<br/>[ 7 9 11]<br/>[ 13 15 17]]</span><span id="6e16" class="nf me it nb b gy nk nh l ni nj">[[19 21 23]<br/>[25 27 29]<br/>[31 33 35]]]</span></pre><h1 id="edc0" class="md me it bd mf mg ns mi mj mk nt mm mn jz nu ka mp kc nv kd mr kf nw kg mt mu bi translated">5.<strong class="ak"> einsum()函数</strong></h1><p id="fb66" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">Numpy最有用的函数之一是einsum()函数，通常称为爱因斯坦求和约定。由于它的表达能力和巧妙的循环，它可以在性能和内存经济方面胜过我们传统的数组函数。</p><p id="b408" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">困难的方面是学习符号需要时间，并且可能需要多次尝试才能有效地将它应用到复杂的情况中。einsum()提供了数组<code class="fe nx ny nz nb b">np.multiply</code>、<code class="fe nx ny nz nb b">np.addition</code>、<code class="fe nx ny nz nb b">np.transpose</code>和<code class="fe nx ny nz nb b">np.diag</code>等NumPy函数来加速和简化我们的工作。</p><p id="ec66" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">当我们第一次开始使用einsum()时，我们将经历一些我们需要知道的基本操作。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="3ae4" class="nf me it nb b gy ng nh l ni nj"><em class="no">find array diagonal, transpose using einsum</em></span><span id="b3f0" class="nf me it nb b gy nk nh l ni nj">a = np.array([[1,2,3],[4,5,6],[7,8,9]])<br/>a_diag = np.einsum('ii-&gt;i', a)</span><span id="94f8" class="nf me it nb b gy nk nh l ni nj">print("option1\n",a_diag)<br/>print('option2\n',np.einsum(a,[0,0],[0]))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/6c3e40628502234b0f5b794c54bccecc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cy8WPPrNbP9uCF7NmzJ9YA.png"/></div></div></figure><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="5a58" class="nf me it nb b gy ng nh l ni nj">a_transpose = np.einsum("ij-&gt;ji",a)</span><span id="a1b1" class="nf me it nb b gy nk nh l ni nj">print("option1\n",a_transpose)<br/>print("option2\n",np.einsum(a,[1,0]))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi gj"><img src="../Images/f900dd8dceb318f8286b2cf5f896ecaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T2VnHAVxE6DkMaADAsDqUw.png"/></div></div></figure><h1 id="4411" class="md me it bd mf mg ns mi mj mk nt mm mn jz nu ka mp kc nv kd mr kf nw kg mt mu bi translated">6.<strong class="ak">剪辑()功能</strong></h1><p id="45a9" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">Clip()是一个将数组中的值保持在指定范围内的函数。我们有时需要将数字保持在一定的范围内。给定间隔时，外部值将被修剪到间隔边缘。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="11fd" class="nf me it nb b gy ng nh l ni nj">x = np.array([3, 4, 12, 20, 2, 2, 3, 7, 1, 2, 12, 0])<br/>print(np.clip(x,2,5))</span></pre><blockquote class="nl nm nn"><p id="32f1" class="la lb no lc b ld le ju lf lg lh jx li np lk ll lm nq lo lp lq nr ls lt lu lv im bi translated">输出</p></blockquote><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="2693" class="nf me it nb b gy ng nh l ni nj">array([3, 4, 5, 5, 2, 2, 3, 5, 2, 2, 5, 2])</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="163e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这里有一本<a class="ae ky" href="https://amzn.to/2VzqI91" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iu">书</strong> </a> <strong class="lc iu"> </strong>，我一定会推荐给所有Python &amp;数据科学初学者。一定要去看看！</p><h1 id="c79b" class="md me it bd mf mg ns mi mj mk nt mm mn jz nu ka mp kc nv kd mr kf nw kg mt mu bi translated"><strong class="ak">结论</strong></h1><p id="b034" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">Numpy不仅仅是一个更快更方便的Python数组计算包。除了其明显的科学用途之外，NumPy还可以用作普通数据的多维存储。</p><p id="8f38" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">可以定义的数据类型数量没有限制。因此，NumPy可以简单高效地与各种数据库进行交互。</p><p id="a5aa" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">文章中提到的各种令人惊奇的函数在使用Numpy库时会非常有用。</p><p id="51a0" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><strong class="lc iu"> <em class="no">注:</em> </strong> <em class="no">本文包含代销商链接。这意味着，如果你点击它，并选择购买我上面链接的资源，你的订阅费的一小部分将归我所有。</em></p><p id="7c2d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><em class="no">然而，推荐的资源是我亲身经历的，并在我的数据科学职业生涯中帮助了我。</em></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><blockquote class="nl nm nn"><p id="fe75" class="la lb no lc b ld le ju lf lg lh jx li np lk ll lm nq lo lp lq nr ls lt lu lv im bi translated"><em class="it">在你走之前……</em></p></blockquote><p id="7641" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果你喜欢这篇文章，并且想继续关注更多关于<strong class="lc iu"> Python &amp;数据科学</strong>的<strong class="lc iu">激动人心的</strong>文章，请点击这里<a class="ae ky" href="https://pranjalai.medium.com/membership" rel="noopener">https://pranjalai.medium.com/membership</a>考虑成为一名中等会员。</p><p id="4a54" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">请考虑使用<a class="ae ky" href="https://pranjalai.medium.com/membership" rel="noopener">我的推荐链接</a>注册。通过这种方式，会员费的一部分归我，这激励我写更多关于Python和数据科学的令人兴奋的东西。</p><p id="399c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">还有，可以随时订阅我的免费简讯:<a class="ae ky" href="https://pranjalai.medium.com/subscribe" rel="noopener"> <strong class="lc iu"> Pranjal的简讯</strong> </a>。</p></div></div>    
</body>
</html>