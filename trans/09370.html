<html>
<head>
<title>Access remote code in a breeze with JupyterLab via SSH</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过SSH使用JupyterLab轻松访问远程代码</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/access-remote-code-in-a-breeze-with-jupyterlab-via-ssh-8c6a9ffaaa8c?source=collection_archive---------10-----------------------#2021-08-31">https://towardsdatascience.com/access-remote-code-in-a-breeze-with-jupyterlab-via-ssh-8c6a9ffaaa8c?source=collection_archive---------10-----------------------#2021-08-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="394f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用SSH在本地系统中运行远程Jupyter Lab</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c2b3f6d9c36eba342d76c8c2e2730a22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GHUyRGkotq-2jjNOh3ci5A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="b62c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在我们的日常开发工作中，我们需要访问远程系统来</p><ul class=""><li id="3e7a" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">在共享的工作场所与同事共同发展</li><li id="354a" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">在强大的机器上训练深度学习模型</li><li id="9fff" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">在生产中部署一些脚本</li></ul><p id="c93f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">远程服务器可能指的是公共云、组织的私有数据中心、个人工作站或其他。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mf"><img src="../Images/10f0faa3c3a947f8f527ce13ffe4b4dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z6gTSg3tT0C4bpA50Lbw_Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="11d3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这些远程服务器有一个共同的属性—它位于一个固定的位置，通常具有顶级的安全性和良好的冷却系统。基本上，由于服务器位于远程，用户需要通过SSH或其他基于UI的远程桌面应用程序来访问服务器。</p><p id="0fa9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">基于UI的远程桌面应用程序，如Anydesk、Teamviewer，可能不是首选，原因如下</p><ul class=""><li id="7e70" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">长期使用这些应用程序可能不是免费的</li><li id="de0d" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">需要让应用程序始终在后台运行</li><li id="9f4e" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">远程服务器是无头的</li><li id="04f3" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">图形界面的引入增加了网络延迟</li></ul><p id="3536" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，大多数人选择SSH作为访问远程系统的安全方法。SSH只在终端上工作，有时很难只用vim/vi编辑配置或代码。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mg"><img src="../Images/79eb3af7e097ebc303b65e6f798de94a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bpRIcv1Yq1puLmmoLKrxFA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片。</p></figure><p id="02f8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这就是将基于web的IDE — JupyterLab转发到本地系统的便利之处。</p><h2 id="6de3" class="mh mi iq bd mj mk ml dn mm mn mo dp mp le mq mr ms li mt mu mv lm mw mx my mz bi translated">内容:</h2><ul class=""><li id="5df2" class="lr ls iq kx b ky na lb nb le nc li nd lm ne lq lw lx ly lz bi translated">工作流程演练</li><li id="e6bc" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">在后台运行JupyterLab</li><li id="bbeb" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">以root用户身份运行JupyterLab</li><li id="0eae" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">但是我用的是Jupyter笔记本</li></ul><h2 id="22f4" class="mh mi iq bd mj mk ml dn mm mn mo dp mp le mq mr ms li mt mu mv lm mw mx my mz bi translated">工作流程演练</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/36fb1ff08a27a2d2f1229c7608796006.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k1hzYjFvns9mkRUQPQL1pg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="0b74" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要允许JupyterLab与远程系统同步运行，有两个主要步骤</p><ol class=""><li id="976f" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq ng lx ly lz bi translated">无界面启动JupyterLab运行。</li><li id="07df" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq ng lx ly lz bi translated">将远程端口转发到本地端口</li></ol><p id="147a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">步骤1:在没有界面的情况下启动JupyterLab的运行</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/cb68f22ab4017576acc279d31d5685c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e27f3dJm4Ncqw4JubPZhYg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="72c3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Ssh以</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="8179" class="mh mi iq nj b gy nn no l np nq">ssh &lt;remote-user&gt;@&lt;remote-host&gt;</span></pre><p id="1a4c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">安装JupyterLab后，运行以下命令</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="b3fb" class="mh mi iq nj b gy nn no l np nq">jupyter lab --no-browser --port &lt;port-number&gt;</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/df41f3205ffaef6bfe4bfd9b1cfe5e99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w6WlCt7nIkRfNHL-rMx9PA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><h2 id="aebf" class="mh mi iq bd mj mk ml dn mm mn mo dp mp le mq mr ms li mt mu mv lm mw mx my mz bi translated">步骤2:将远程端口转发到本地端口</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3b2c9b7a48cd12ab65c719a1af581245.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FLOtk52xHZU3aL9vInHjfw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="2fbf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要转发端口，请打开另一个终端并运行以下命令</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="c206" class="mh mi iq nj b gy nn no l np nq">ssh -N -L localhost:&lt;local-port&gt;:localhost:&lt;remote-port&gt; &lt;remote-user&gt;@&lt;remote-host&gt;</span></pre><ul class=""><li id="02a3" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><strong class="kx ir"> -N: </strong>用于端口转发。这抑制了远程命令的执行。</li><li id="5c76" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx ir"> -L: </strong>将远程端口绑定到本地端口。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/13fcbf8770b74e8b5642482587b6c191.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sn48ZRhPIxQG7-PuVP914A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="93c7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">继续在浏览器中打开<a class="ae nt" href="http://localhost:8887/" rel="noopener ugc nofollow" target="_blank">http://localhost:&lt;local-port&gt;/</a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/0f671fd0b62c1ee004ab690d6eecac36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aTuj5fDg8ZT6A677w32PKw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="f407" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从步骤1的终端窗口复制，输入令牌密钥。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/c6272062d476cd63d2bc5382e60873a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ijyn4Yy6c-h99_MjsplDKg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="321c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">有三个要点需要记笔记:</strong></p><ul class=""><li id="3e1e" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">在当前的设置中，远程系统中运行JupyterLab的终端必须保持打开。或者，检查<strong class="kx ir">在后台运行JupyterLab，</strong>允许终端在不终止进程的情况下关闭。</li><li id="2f08" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">同样，转发端口的终端必须在整个操作过程中保持打开。</li><li id="8d51" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">端口转发终端不会生成任何输出消息来提示操作成功(由于使用了标志-N)。</li></ul><h2 id="2544" class="mh mi iq bd mj mk ml dn mm mn mo dp mp le mq mr ms li mt mu mv lm mw mx my mz bi translated">在后台运行JupyterLab</h2><p id="3509" class="pw-post-body-paragraph kv kw iq kx b ky na jr la lb nb ju ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">有一个在后台运行JupyterLab的选项，允许终端在不终止JupyterLab进程的情况下关闭。</p><p id="7a98" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">只需在命令末尾添加一个&amp;符号。</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="d7db" class="mh mi iq nj b gy nn no l np nq">jupyter lab --no-browser --port &lt;port-number&gt; &amp;</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/66b5d1c9b8bdcf20531137461ed7ad2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6vZ9S0vsZagag3RRMPOEBg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="ee82" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要终止该进程，请使用以下命令来标识该进程</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="0be8" class="mh mi iq nj b gy nn no l np nq">ps -ef | grep python | sort</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/1f207438a970ac096ec180a2b1a373d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*paNVAhTHY2-xHvgso28cGg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="916d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">用…扼杀进程</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="7e0b" class="mh mi iq nj b gy nn no l np nq">kill -9 &lt;process-id&gt;</span></pre><h2 id="52dd" class="mh mi iq bd mj mk ml dn mm mn mo dp mp le mq mr ms li mt mu mv lm mw mx my mz bi translated">以root用户身份运行JupyterLab</h2><p id="8c80" class="pw-post-body-paragraph kv kw iq kx b ky na jr la lb nb ju ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">不建议以root用户身份运行JupyterLab。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/b8d4ec8cdcffb9f5d307437740e33a12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hnq5I2UnJ9qW7zlQAvTX9w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="df42" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是，解决方法是添加一个标志，明确允许在root用户模式下运行。</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="9410" class="mh mi iq nj b gy nn no l np nq">jupyter lab --no-browser --port &lt;port-number&gt; --allow-root</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/7121648afe3a49ceede47873634c603f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W2VmR4IMXcQ2ahqWh1AjFg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><h2 id="7faf" class="mh mi iq bd mj mk ml dn mm mn mo dp mp le mq mr ms li mt mu mv lm mw mx my mz bi translated">但是我用的是Jupyter笔记本</h2><p id="b4d7" class="pw-post-body-paragraph kv kw iq kx b ky na jr la lb nb ju ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">仍然有大量的社区选择Jupyter Notebook作为他们的首选IDE。不要害怕。本文中介绍的所有命令也与Jupyter Notebook兼容。</p><p id="76cd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">只需将JupyterLab的命令交换到Jupyter Notebook中。</p><p id="1fa1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">示例:</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="e02a" class="mh mi iq nj b gy nn no l np nq">jupyter notebook --no-browser --port &lt;port-number&gt;</span></pre><p id="79a5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">JupyterLab包的安装也允许运行Jupyter笔记本！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/5bff18c03d8606cb550d52c22c07d2c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zJFe8Y_ywLaM0wxktX2y4w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="d59d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下次见！</p></div></div>    
</body>
</html>