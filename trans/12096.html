<html>
<head>
<title>3 (and a Half) Powerful Tricks to Effectively Read CSV Data in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python有效读取CSV数据的3(半)个强大技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/3-and-half-powerful-tricks-to-effectively-read-csv-data-in-python-c4699a4f9d07?source=collection_archive---------33-----------------------#2021-12-06">https://towardsdatascience.com/3-and-half-powerful-tricks-to-effectively-read-csv-data-in-python-c4699a4f9d07?source=collection_archive---------33-----------------------#2021-12-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="936c" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">编程；编排</h2><div class=""/><div class=""><h2 id="ddb3" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">熊猫大师read_csv()参数轻松提升您的分析能力</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/51c6b4c961210d4e5f849a7c396607f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SFqrLpBamc7ZgTkncBLZXw.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@contentpixie?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">内容Pixie </a>在<a class="ae lh" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="e6d5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">将逗号分隔值(csv)文件读入DataFrame！</strong></p><p id="b0c2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">数据分析的第一步是将数据导入Python pandas数据框架。然后探索和清理它。</p><p id="0557" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在将数据加载到DataFrame中时，可以使用一些技巧来减少工作量。</p><p id="be18" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这3分钟里，你将掌握3种有效使用<code class="fe me mf mg mh b"><strong class="lk jd">pandas.read_csv()</strong></code>的方法。💡</p><p id="90d8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了演示，我使用了来自<a class="ae lh" href="https://www.kaggle.com/stefanoleone992/fifa-21-complete-player-dataset" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>的<a class="ae lh" href="https://github.com/17rsuraj/data-curious/blob/master/TowardsDataScience/players_15.csv" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd"> FIFA 2021数据集</strong> </a> <strong class="lk jd"> </strong>。<strong class="lk jd"> </strong>先睹为快的数据集在这里。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/b073d4e627cb205108a95ae2edcacda8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C6275dC4488CfsK4TnitSQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">FIFA 2021数据集|作者图片</p></figure><p id="2a94" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们来探讨一下，如何使用<code class="fe me mf mg mh b">pandas.read_csv()</code>有效地导入这个文件。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="3b4f" class="mq mr it bd ms mt mu mv mw mx my mz na ki nb kj nc kl nd km ne ko nf kp ng nh bi translated">1.用途</h1><p id="9621" class="pw-post-body-paragraph li lj it lk b ll ni kd ln lo nj kg lq lr nk lt lu lv nl lx ly lz nm mb mc md im bi translated"><code class="fe me mf mg mh b">pandas.read_csv()</code>中的参数<code class="fe me mf mg mh b">usecols</code>对于仅加载csv数据集中的特定列非常有用。</p><p id="4a31" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">下面是有无<code class="fe me mf mg mh b">usecols</code>的情况下<code class="fe me mf mg mh b">read_csv()</code>所用时间的直接对比</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nn"><img src="../Images/73d9ebb2c6ef4787c43329c260eba564.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h9r8EuxcCY2NT5Sh1LqDaQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">pandas.read_csv() usecols |作者图片</p></figure><p id="652e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">正在导入<em class="no">。csv </em>文件到熊猫数据帧使用<code class="fe me mf mg mh b">usecols</code>是⚡️ <strong class="lk jd"> <em class="no"> 2.4X </em> </strong> ⚡️比导入整个数据集快。</p><p id="5e30" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">与其导入整个数据集然后删除不必要的列，不如只加载所需的数据。</p><h1 id="95da" class="mq mr it bd ms mt np mv mw mx nq mz na ki nr kj nc kl ns km ne ko nt kp ng nh bi translated">2.组块大小</h1><p id="86ad" class="pw-post-body-paragraph li lj it lk b ll ni kd ln lo nj kg lq lr nk lt lu lv nl lx ly lz nm mb mc md im bi translated">加载大型数据集的有效方法是将其加载到小部分中，即块中。💡</p><p id="eec9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">大型数据集的大小为千兆字节，行数超过数十万，通常需要很长时间才能加载到Pandas数据帧中。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nu"><img src="../Images/2406d3fd8bf706c5c314a1d721420530.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4lTfhIymYzbEHI9mRcGPcA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">熊猫read_csv() chunksize |作者图片</p></figure><p id="fc7f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">直接比较显示使用<code class="fe me mf mg mh b">chunksize</code>比普通的数据导入要快得多。</p><p id="62d7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">但是，有一个条件！！！ ⚠️</p><p id="6649" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在<code class="fe me mf mg mh b">pandas.read_csv()</code>中包含参数<code class="fe me mf mg mh b">chunksize</code>返回一个<code class="fe me mf mg mh b">TextFileReader</code>对象进行迭代。♻️</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nv"><img src="../Images/1b641630805a1eb5fb2c58014f8a9b76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pErjkN9unSqalSD-K6_H-w.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">熊猫read_csv() chunksize |图片bu作者</p></figure><p id="c7a4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然后您需要使用<code class="fe me mf mg mh b"><strong class="lk jd">pandas.concat()</strong></code>将所有的块放在一起，形成一个完整的数据帧。这可以如下进行，</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nw"><img src="../Images/e741104bbf8a70d62bf8bd8f43d7ebd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aE18czkHd5V_Jt4L1gD-dQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">连接熊猫数据帧|作者图片中的所有块</p></figure><p id="764e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这无疑使得分块加载数据比直接读取整个数据集要慢，但在加载高达数十GB的文件时却很有效。</p><h1 id="fce1" class="mq mr it bd ms mt np mv mw mx nq mz na ki nr kj nc kl ns km ne ko nt kp ng nh bi translated">3.解析日期</h1><p id="044a" class="pw-post-body-paragraph li lj it lk b ll ni kd ln lo nj kg lq lr nk lt lu lv nl lx ly lz nm mb mc md im bi translated">通常，包含日期-时间数据的列作为对象或字符串导入。然后我们需要手动改变它的数据类型。</p><p id="bb8e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用参数<code class="fe me mf mg mh b">parse_dates</code>来指出哪些列包含<code class="fe me mf mg mh b">read_csv()</code>本身的日期时间数据是个好主意。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nx"><img src="../Images/040797e93403fa5597c2c60e9422507e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WO6atkcJuAZ6infTlVW5yg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">pandas.read_csv() parse_dates |作者图片</p></figure><p id="808f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">🚩当多个列包含日期时间数据时，只需将所有列名作为列表传递给<code class="fe me mf mg mh b">parse_dates</code>。</p><h1 id="6f87" class="mq mr it bd ms mt np mv mw mx nq mz na ki nr kj nc kl ns km ne ko nt kp ng nh bi translated">3(半):用单独的日-月-年列制作一个日期列</h1><p id="a8c1" class="pw-post-body-paragraph li lj it lk b ll ni kd ln lo nj kg lq lr nk lt lu lv nl lx ly lz nm mb mc md im bi translated">当日期数据分布在多个列中时，也可以将它们组合在一起，形成一个包含日期值的列。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/6389a95bc430ec510fae4d4d02619d6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/1*DAo_2T2WqhEea05S-a8QZw.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">Pandas.read_csv() |作者图片</p></figure><p id="21f5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">将列名作为list传递给<code class="fe me mf mg mh b">parse_dates</code>以生成一个包含日期值的列。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nz"><img src="../Images/90dc0966c3f056856f750413adeac81b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_G0dqKTkbZOJ5vzRF5QyHA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">pandas.read_csv() parse_dates |作者图片</p></figure><p id="47a5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">🚩组合这些列形成日期列的默认顺序是<code class="fe me mf mg mh b"><strong class="lk jd">year-month-day</strong></code>。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="f565" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="no">总结一下，</em></p><p id="c9f7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">掌握这些技巧，并明智地使用它们，可以减少数据清理中的工作，使数据分析更快。</p><p id="7013" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">与分块导入数据类似，您可以分块学习数据科学技能，Medium是最适合的地方。</p><p id="ac45" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您可以通过下面我的推荐链接获得对<a class="ae lh" href="https://medium.com/@17.rsuraj/membership" rel="noopener"> <strong class="lk jd"> <em class="no">媒体</em> </strong> </a>的完全访问权限，并阅读由我&amp;成千上万的其他人分享的如此惊人的内容。当你加入我的链接，我会得到你的会员费的一小部分作为支持，没有任何费用给你。</p><div class="oa ob gp gr oc od"><a href="https://medium.com/@17.rsuraj/membership" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd jd gy z fp oi fr fs oj fu fw jc bi translated">加入我的推荐链接- Suraj Gurav媒体</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">medium.com</p></div></div><div class="om l"><div class="on l oo op oq om or lb od"/></div></div></a></div><p id="ebae" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">随时加入我的<a class="ae lh" href="https://medium.com/subscribe/@17.rsuraj" rel="noopener"> <strong class="lk jd"> <em class="no">邮箱列表</em> </strong> </a>保持更新！</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="6f29" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">感谢您阅读并投入您宝贵的时间！</p></div></div>    
</body>
</html>