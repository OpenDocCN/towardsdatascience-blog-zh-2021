<html>
<head>
<title>Scatter Plots on Maps using Plotly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Plotly在地图上散布图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/scatter-plots-on-maps-using-plotly-79f16aee17d0?source=collection_archive---------11-----------------------#2021-07-28">https://towardsdatascience.com/scatter-plots-on-maps-using-plotly-79f16aee17d0?source=collection_archive---------11-----------------------#2021-07-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2eda" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何用很少的代码创建交互式散点图来表示数据中的多个要素</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d40c455980af121c722573d8e3f71bdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JKjppsVIyEteX3h7"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@geojango_maps?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> GeoJango Maps </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="a18a" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">Plotly和Mapbox带来了什么</h1><p id="c06b" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">Plotly是一个强大的可视化库，提供了令人惊叹的功能，如<strong class="lx ir">交互式、动态、易于使用、</strong>和<strong class="lx ir">高度详细的</strong>图。<strong class="lx ir"> Plotly Express </strong>是Plotly库的内置部分，提供高级API，只需很少的代码即可绘制各种图形。我们将结合使用Plotly express和<strong class="lx ir"> Mapbox。</strong> Mapbox是一个位置数据平台，为地图、路由和导航提供各种API。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="78f6" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">想象旧金山周围的机场</h1><p id="536c" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">在本文中，我们将使用Kaggle   <em class="mr"> </em>的<a class="ae kv" href="https://www.kaggle.com/jeploretizo/san-francisco-airbnb-listings" rel="noopener ugc nofollow" target="_blank"> <em class="mr">旧金山Airbnb房源数据集来直观地分析价格、住宿类型及其面积之间的关系。只要看一下地图，我们就可以看出地区如何影响价格。</em></a></p><p id="2fb9" class="pw-post-body-paragraph lv lw iq lx b ly ms jr ma mb mt ju md me mu mg mh mi mv mk ml mm mw mo mp mq ij bi translated">这个数据有很多列，但是和这篇文章有关的是<strong class="lx ir">纬度</strong>、<strong class="lx ir">经度</strong>、<strong class="lx ir">价格</strong>和<strong class="lx ir">房型。价格是每晚的价格，房间类型指示Airbnb是酒店、私人房间、共享房间还是整个房子。</strong></p><p id="4534" class="pw-post-body-paragraph lv lw iq lx b ly ms jr ma mb mt ju md me mu mg mh mi mv mk ml mm mw mo mp mq ij bi translated">这是数据的样子</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/368525df69ae3fa699f53ea81ba9c8ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/format:webp/1*_HPm0aYYfMqwP3wg_KcQUA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们将在图中使用的列(图片由作者提供)</p></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="51e2" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">让我们开始吧！</h1><ol class=""><li id="51e3" class="my mz iq lx b ly lz mb mc me na mi nb mm nc mq nd ne nf ng bi translated">首先，我们需要一个地图框访问令牌。别担心，一定数量的通话是完全免费的，注册时不需要任何卡的详细信息。你可以在这里免费获得你的令牌<a class="ae kv" href="https://www.mapbox.com/" rel="noopener ugc nofollow" target="_blank">。<strong class="lx ir">注册后，令牌将出现在您的帐户页面下。</strong></a></li><li id="a7ff" class="my mz iq lx b ly nh mb ni me nj mi nk mm nl mq nd ne nf ng bi translated">将价格转换为<strong class="lx ir">浮动。</strong>价格列当前包含带有<strong class="lx ir"> '$ '符号和逗号的字符串。</strong>例如<strong class="lx ir">1200美元。这里有一个将整个列转换成浮点值的超级快速的方法。这会骗人的</strong></li></ol><pre class="kg kh ki kj gt nm nn no np aw nq bi"><span id="2f72" class="nr le iq nn b gy ns nt l nu nv">import locale</span><span id="0284" class="nr le iq nn b gy nw nt l nu nv">locale.setlocale(locale.LC_ALL, 'en_US.UTF8')</span><span id="cabd" class="nr le iq nn b gy nw nt l nu nv">data['price']=data['price'].apply(lambda x: locale.atof(x.strip("$")))</span></pre><p id="c510" class="pw-post-body-paragraph lv lw iq lx b ly ms jr ma mb mt ju md me mu mg mh mi mv mk ml mm mw mo mp mq ij bi translated">3.现在最精彩的部分来了，剧情。如果你在Colab上运行这段代码，我建议你不要安装Plotly。否则你可以安装它。</p><p id="8d95" class="pw-post-body-paragraph lv lw iq lx b ly ms jr ma mb mt ju md me mu mg mh mi mv mk ml mm mw mo mp mq ij bi translated"><code class="fe nx ny nz nn b">import plotly.express as px</code></p><p id="8425" class="pw-post-body-paragraph lv lw iq lx b ly ms jr ma mb mt ju md me mu mg mh mi mv mk ml mm mw mo mp mq ij bi translated">在这之后，我们只需要编写如下所示的代码。这里，我们首先传入我们的Mapbox访问令牌。然后，我们使用带有以下参数的函数px.scatter_mapbox。</p><ul class=""><li id="2239" class="my mz iq lx b ly ms mb mt me oa mi ob mm oc mq od ne nf ng bi translated">数据:这是指我们的数据框架</li><li id="4ca6" class="my mz iq lx b ly nh mb ni me nj mi nk mm nl mq od ne nf ng bi translated">lat=" latitude ":这指向我们的数据框中的纬度列。</li><li id="305d" class="my mz iq lx b ly nh mb ni me nj mi nk mm nl mq od ne nf ng bi translated">lon=" longitude ":它指向数据框中的经度列。</li><li id="93cb" class="my mz iq lx b ly nh mb ni me nj mi nk mm nl mq od ne nf ng bi translated">color="room_type ":这基本上是根据room_type列中的值给每个数据点着色。因为我们有四种不同的房间类型，所以我们有四种颜色。</li><li id="6dc9" class="my mz iq lx b ly nh mb ni me nj mi nk mm nl mq od ne nf ng bi translated">size=" price ":这是有趣的部分，每个Airbnb都将由一个大小与其价格成比例的气泡来表示。较便宜的航空公司将由较小的气泡表示，而昂贵的航空公司将由较大的气泡表示。</li><li id="bc73" class="my mz iq lx b ly nh mb ni me nj mi nk mm nl mq od ne nf ng bi translated">其他参数只是一些实用工具，有助于使图形更容易查看。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oe of l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">旧金山的Airbnbs，按房间类型和价格分类</p></figure><p id="01ac" class="pw-post-body-paragraph lv lw iq lx b ly ms jr ma mb mt ju md me mu mg mh mi mv mk ml mm mw mo mp mq ij bi translated">4.随意使用绘图右上角的选项，例如缩放、选择特定区域或下载图像。你可以放大到特定的区域来查看地图的详细程度，也可以注意到当我们将<strong class="lx ir">悬停在气泡上时，酒店的信息是如何显示的！单击图例中的任何房间类型都会从地图中移除该类型的所有房间！</strong></p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="7dd4" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">寻找趋势</h1><p id="28d4" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">我们看到一些趋势是有道理的。然而，在得出结论之前，请注意Airbnb的价格取决于各种便利设施和其他特征，如规模、服务、主机受欢迎程度等。但是，还是能看出一些大趋势。</p><ol class=""><li id="3698" class="my mz iq lx b ly ms mb mt me oa mi ob mm oc mq nd ne nf ng bi translated">靠近<strong class="lx ir">太平洋高地和俄罗斯山</strong>的房子比旧金山其他地方的房价要高。</li><li id="3224" class="my mz iq lx b ly nh mb ni me nj mi nk mm nl mq nd ne nf ng bi translated">缩小后，我们注意到房屋的密度并不均匀。地图右半部分的房间比左半部分多得多。</li><li id="52da" class="my mz iq lx b ly nh mb ni me nj mi nk mm nl mq nd ne nf ng bi translated">我们看到大多数房间要么是功能齐全的公寓，要么是私人房间。</li><li id="6d9f" class="my mz iq lx b ly nh mb ni me nj mi nk mm nl mq nd ne nf ng bi translated">卡尔街<strong class="lx ir">附近有一套价格异常高的公寓，售价<strong class="lx ir"> 9999美元</strong>，不知道那是什么？</strong></li></ol></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="af44" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">结论</h1><p id="0424" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">多亏了Plotly Express和Mapbox，我们几乎不费吹灰之力就能绘制出如此强大、信息丰富的图表。这只是Plotly提供的一种地质公园。你可以在这里  <strong class="lx ir">查看他们的其他地图地块</strong> <a class="ae kv" href="https://plotly.com/python/maps/" rel="noopener ugc nofollow" target="_blank"> <strong class="lx ir">。</strong></a></p><p id="9197" class="pw-post-body-paragraph lv lw iq lx b ly ms jr ma mb mt ju md me mu mg mh mi mv mk ml mm mw mo mp mq ij bi translated">如果你喜欢这篇文章，这里有更多！</p><div class="og oh gp gr oi oj"><a rel="noopener follow" target="_blank" href="/regex-essential-for-nlp-ee0336ef988d"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd ir gy z fp oo fr fs op fu fw ip bi translated">正则表达式对NLP至关重要</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">理解各种正则表达式，并将其应用于自然语言中经常遇到的情况…</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">towardsdatascience.com</p></div></div><div class="os l"><div class="ot l ou ov ow os ox kp oj"/></div></div></a></div><div class="og oh gp gr oi oj"><a rel="noopener follow" target="_blank" href="/powerful-text-augmentation-using-nlpaug-5851099b4e97"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd ir gy z fp oo fr fs op fu fw ip bi translated">使用NLPAUG的强大文本增强！</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">通过文本增强技术处理NLP分类问题中的类别不平衡</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">towardsdatascience.com</p></div></div><div class="os l"><div class="oy l ou ov ow os ox kp oj"/></div></div></a></div><div class="og oh gp gr oi oj"><a rel="noopener follow" target="_blank" href="/representing-5-features-in-a-single-animated-plot-using-plotly-e4f6064c7f46"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd ir gy z fp oo fr fs op fu fw ip bi translated">使用Plotly在一个动画情节中表现5个特征</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">使用单个动画气泡图来分析数据和观察趋势。</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">towardsdatascience.com</p></div></div><div class="os l"><div class="oz l ou ov ow os ox kp oj"/></div></div></a></div><div class="og oh gp gr oi oj"><a rel="noopener follow" target="_blank" href="/effortless-exploratory-data-analysis-eda-201c99324857"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd ir gy z fp oo fr fs op fu fw ip bi translated">轻松的探索性数据分析(EDA)</h2><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">towardsdatascience.com</p></div></div><div class="os l"><div class="pa l ou ov ow os ox kp oj"/></div></div></a></div><p id="1d81" class="pw-post-body-paragraph lv lw iq lx b ly ms jr ma mb mt ju md me mu mg mh mi mv mk ml mm mw mo mp mq ij bi translated">查看我的<a class="ae kv" href="https://github.com/rajlm10" rel="noopener ugc nofollow" target="_blank"> <strong class="lx ir"> GitHub </strong> </a>其他一些项目。可以联系我<a class="ae kv" href="https://rajsangani.me/" rel="noopener ugc nofollow" target="_blank"> <strong class="lx ir"> <em class="mr">这里</em> </strong> </a> <strong class="lx ir"> <em class="mr">。</em> </strong>感谢您的配合！</p></div></div>    
</body>
</html>