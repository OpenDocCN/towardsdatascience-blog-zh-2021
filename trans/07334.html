<html>
<head>
<title>How to Create Xarray Datasets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建Xarray数据集</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-create-xarray-datasets-cf1859c95921?source=collection_archive---------9-----------------------#2021-07-04">https://towardsdatascience.com/how-to-create-xarray-datasets-cf1859c95921?source=collection_archive---------9-----------------------#2021-07-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3fbd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从头开始定义数据集</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0f3872d0743e97a5e65aee04032eb9be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zJ8oKpkb0O4GTSQr"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">阿瑟·富兰克林在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="17d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b"><a class="ae ky" href="https://xarray.pydata.org/en/stable/" rel="noopener ugc nofollow" target="_blank">Xarray</a></code>是一个开源的Python包，用于处理带标签的多维数据集。在处理地球科学界常见的<a class="ae ky" href="https://www.unidata.ucar.edu/software/netcdf/" rel="noopener ugc nofollow" target="_blank"> NetCDF </a>格式的数据时，它是必不可少的。</p><p id="251d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用<code class="fe lv lw lx ly b">xarray</code>打开NetCDF文件很简单。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="c660" class="md me it ly b gy mf mg l mh mi">ds = xr.open_dataset("/path/to/file.nc")</span></pre><p id="dd8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，创建一个可以保存到NetCDF文件的<code class="fe lv lw lx ly b">xarray</code>对象需要更多的工作。在这篇文章中，我将回顾如何做到这一点。我将首先介绍如何将<code class="fe lv lw lx ly b"><a class="ae ky" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html" rel="noopener ugc nofollow" target="_blank">pandas</a></code> <a class="ae ky" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html" rel="noopener ugc nofollow" target="_blank">数据帧</a>转换为<code class="fe lv lw lx ly b"><a class="ae ky" href="https://xarray.pydata.org/en/stable/generated/xarray.Dataset.html" rel="noopener ugc nofollow" target="_blank">xarray</a></code> <a class="ae ky" href="https://xarray.pydata.org/en/stable/generated/xarray.Dataset.html" rel="noopener ugc nofollow" target="_blank">数据集</a>，然后介绍如何从头开始创建数据集。</p><h2 id="e05f" class="md me it bd mj mk ml dn mm mn mo dp mp li mq mr ms lm mt mu mv lq mw mx my mz bi translated">目录</h2><p id="3805" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated"><a class="ae ky" href="#6b89" rel="noopener ugc nofollow"> 1。pandas data frame to xarray dataset</a><br/>∘<a class="ae ky" href="#bd9f" rel="noopener ugc nofollow">1.1如何添加元数据和更改变量名？</a> <br/> ∘ <a class="ae ky" href="#83df" rel="noopener ugc nofollow"> 1.2创建多维数据集</a> <br/> ∘ <a class="ae ky" href="#499f" rel="noopener ugc nofollow"> 1.3如何保存我的数据？</a> <br/> <a class="ae ky" href="#8e43" rel="noopener ugc nofollow"> 2。从头开始创建Xarray数据集</a> <br/> ∘ <a class="ae ky" href="#d066" rel="noopener ugc nofollow"> 2.1具有一个坐标的数据集</a> <br/> ∘ <a class="ae ky" href="#9958" rel="noopener ugc nofollow"> 2.2具有多个坐标的数据集</a> <br/> ∘ <a class="ae ky" href="#3cd5" rel="noopener ugc nofollow"> 2.3具有坐标矩阵的数据集</a> <br/> ∘ <a class="ae ky" href="#0aea" rel="noopener ugc nofollow"> 2.4具有坐标向量和矩阵的数据集</a> <br/> <a class="ae ky" href="#019d" rel="noopener ugc nofollow"> 3 .最终想法</a></p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="6b89" class="nm me it bd mj nn no np mm nq nr ns mp jz nt ka ms kc nu kd mv kf nv kg my nw bi translated">1.熊猫数据帧到阵列数据集</h1><p id="b5a0" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">从数据帧开始，您可以直接将其转换为数据集。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="dfdb" class="md me it ly b gy mf mg l mh mi">ds = df.to_xarray()</span></pre><p id="e1db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这可能是一个很好的起点，因为它为您创建了一个<code class="fe lv lw lx ly b">xarray</code>对象。在下面的例子中，我用一个变量<code class="fe lv lw lx ly b">y</code>和一个索引<code class="fe lv lw lx ly b">x</code>创建了一个dataFrame。然后我用<code class="fe lv lw lx ly b">to_xarray()</code>把它变成一个<code class="fe lv lw lx ly b">xarray</code>对象。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="3329" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该数据集的格式还不是很好。以下是<code class="fe lv lw lx ly b">ds.info()</code>输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/12ae6305c69a2d75be398f1238546c15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1348/format:webp/1*2uGtKdLg_a1eRJmJTtwvYw@2x.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="c011" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">理想情况下，<code class="fe lv lw lx ly b">info()</code>应该告诉你一些关于变量和整个数据集的元数据。例如，变量属性可以包括<code class="fe lv lw lx ly b">units</code>，这对于温度之类的东西很重要，而全局属性可以包括原始数据源或数据集的创建者。目标是为用户提供一些数据的上下文。</p><p id="25f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下一小节中，我们将向该数据集添加一些元数据。</p><p id="38a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于气候和预报(cf)，元数据有一个标准的约定。关于这一点的讨论超出了本文的范围，但这里有两个资源可供感兴趣的人参考:</p><ul class=""><li id="6671" class="oa ob it lb b lc ld lf lg li oc lm od lq oe lu of og oh oi bi translated"><a class="ae ky" href="https://cfconventions.org/" rel="noopener ugc nofollow" target="_blank">cfconventions.org</a></li><li id="f87b" class="oa ob it lb b lc oj lf ok li ol lm om lq on lu of og oh oi bi translated"><a class="ae ky" href="https://cfconventions.org/Data/cf-documents/overview/viewgraphs.pdf" rel="noopener ugc nofollow" target="_blank">cf惯例概述</a></li></ul><p id="1c2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，这篇文章是为了说明一个概念，因此我可能会偏离常规标准。</p><h2 id="bd9f" class="md me it bd mj mk ml dn mm mn mo dp mp li mq mr ms lm mt mu mv lq mw mx my mz bi translated">1.1如何添加元数据和更改变量名？</h2><p id="70f5" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">随着对象的创建，我们可以开始添加元数据和改变变量/坐标名称。</p><p id="ec56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">字典<code class="fe lv lw lx ly b">key:value</code>对用于重命名变量/坐标和添加属性。下面是基本语法:</p><ul class=""><li id="b2ad" class="oa ob it lb b lc ld lf lg li oc lm od lq oe lu of og oh oi bi translated"><strong class="lb iu">重命名变量</strong> : <code class="fe lv lw lx ly b">ds.rename({“old_name” : “new_name”})</code></li><li id="27d1" class="oa ob it lb b lc oj lf ok li ol lm om lq on lu of og oh oi bi translated"><strong class="lb iu"> var属性:</strong> <code class="fe lv lw lx ly b">ds[“var”].attrs = {“attribute_name”:”attribute_value”}</code></li><li id="8ee7" class="oa ob it lb b lc oj lf ok li ol lm om lq on lu of og oh oi bi translated"><strong class="lb iu">全局属性:</strong>T11】</li></ul><p id="f9a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的代码片段首先重命名坐标和变量，然后创建变量和全局属性。</p><p id="e050" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">(<strong class="lb iu">注:xarray没有熊猫那样的</strong> <code class="fe lv lw lx ly b"><strong class="lb iu">inplace=True</strong></code> <strong class="lb iu">选项。</strong>)</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="4a52" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是添加一些元数据后的<code class="fe lv lw lx ly b">ds.info()</code>输出</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/e2442ea6b8a99d05d043cf4bfb22f536.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oPPw4yf5vlOh-_XZ5wYTbw@2x.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="75c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个格式良好的数据集。用户可以很快理解这个数据集代表什么以及谁创建了它。在第2节中，我们将从头开始创建相同的数据集。</p><h2 id="83df" class="md me it bd mj mk ml dn mm mn mo dp mp li mq mr ms lm mt mu mv lq mw mx my mz bi translated"><strong class="ak"> 1.2创建多维数据集</strong></h2><p id="3844" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">对于多个维度，只需在<code class="fe lv lw lx ly b">set_index()</code>中包含一个维度列表。然后，您可以像以前一样添加元数据和更改变量</p><h2 id="499f" class="md me it bd mj mk ml dn mm mn mo dp mp li mq mr ms lm mt mu mv lq mw mx my mz bi translated">1.3如何保存我的数据？</h2><p id="8982" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">对更改感到满意后，可以将它们保存到NetCDF文件中:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="337a" class="md me it ly b gy mf mg l mh mi">ds.to_netcdf('/save/to/this/path/file.nc')</span></pre><p id="0791" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下一节中，我将从头开始创建数据集。如果您想要将一个大的<code class="fe lv lw lx ly b">NumPy</code>数组或列表保存为NetCDF，这将非常有用。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="8e43" class="nm me it bd mj nn no np mm nq nr ns mp jz nt ka ms kc nu kd mv kf nv kg my nw bi translated">2.从头开始创建Xarray数据集</h1><p id="530d" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">以下语法用于创建带有<code class="fe lv lw lx ly b">xarray</code>的数据集:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="78c9" class="md me it ly b gy mf mg l mh mi">ds = xr.Dataset(data_vars, coords, attrs)</span></pre><p id="4701" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个完整的数据集由三个字典组成:</p><ul class=""><li id="2561" class="oa ob it lb b lc ld lf lg li oc lm od lq oe lu of og oh oi bi translated"><code class="fe lv lw lx ly b">data_vars</code>:关键是变量名，值是由<br/> <code class="fe lv lw lx ly b">(dimensions, data, variable_attributes)</code> <br/> - <code class="fe lv lw lx ly b">dimensions</code> →名称列表<br/> - <code class="fe lv lw lx ly b">data</code> →数据可以是任意格式(<code class="fe lv lw lx ly b">Pandas</code>、<code class="fe lv lw lx ly b">Numpy</code>、list等)。)<br/> - <code class="fe lv lw lx ly b">variable_attributes</code> → <strong class="lb iu">可选</strong>属性字典</li><li id="590b" class="oa ob it lb b lc oj lf ok li ol lm om lq on lu of og oh oi bi translated"><code class="fe lv lw lx ly b">coords</code>:定义坐标及其属性</li><li id="2030" class="oa ob it lb b lc oj lf ok li ol lm om lq on lu of og oh oi bi translated"><code class="fe lv lw lx ly b">attrs</code> : <strong class="lb iu">可选</strong>全局属性字典</li></ul><p id="7f9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">属性是可选的，但是强烈建议使用。</p><h2 id="d066" class="md me it bd mj mk ml dn mm mn mo dp mp li mq mr ms lm mt mu mv lq mw mx my mz bi translated">2.1具有一个坐标的数据集</h2><p id="545e" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">下面使用<code class="fe lv lw lx ly b">xr.Dataset()</code>创建与上一个例子相同的数据集。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="83d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> data_vars </strong>:用一维<code class="fe lv lw lx ly b">time</code>定义变量<code class="fe lv lw lx ly b">velocity</code>，包含<code class="fe lv lw lx ly b">units</code>和<code class="fe lv lw lx ly b">long_name</code>两个属性。</p><p id="ee1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">坐标</strong>:定义<code class="fe lv lw lx ly b">time</code>坐标，其维度也称为时间。</p><p id="b736" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">属性</strong>:定义全局属性<code class="fe lv lw lx ly b">creation_data</code>、<code class="fe lv lw lx ly b">author</code>和<code class="fe lv lw lx ly b">email</code></p><h2 id="9958" class="md me it bd mj mk ml dn mm mn mo dp mp li mq mr ms lm mt mu mv lq mw mx my mz bi translated">2.2具有多个坐标的数据集</h2><p id="ba62" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">如果数据是多维的，通常会有多个坐标。</p><p id="fc68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我创建了一个数据集，其中变量有两个维度，<code class="fe lv lw lx ly b">x</code>和<code class="fe lv lw lx ly b">y</code>，以及两个坐标，<code class="fe lv lw lx ly b">lat</code>和<code class="fe lv lw lx ly b">lon</code>。</p><p id="2d16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在前面的示例中，坐标和尺寸同名。这个例子说明它们不需要相同。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><h2 id="3cd5" class="md me it bd mj mk ml dn mm mn mo dp mp li mq mr ms lm mt mu mv lq mw mx my mz bi translated">2.3带坐标矩阵的数据集</h2><p id="9ac8" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">在前面的例子中，每个坐标由一个矢量表示。但是，在某些情况下，将坐标表示为矩阵是有意义的。这在不规则网格上的地球系统模型中很常见。</p><p id="0226" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们以前面的例子为例，使用<code class="fe lv lw lx ly b">np.meshgrid()</code>将每个坐标转换成一个矩阵</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="caad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">np.meshgrid</code>从坐标向量创建坐标矩阵。行网格在<code class="fe lv lw lx ly b">cols</code>的长度上重复<code class="fe lv lw lx ly b">rows</code>，列网格在<code class="fe lv lw lx ly b">rows</code>的长度上重复<code class="fe lv lw lx ly b">cols</code>。这是每个网格。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/e774c572590207947bf36618040193cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*keNxc8T0gjdUvo_fHqcO8A@2x.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="3151" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们使用矩阵表示的坐标创建一个数据集。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="dced" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这表示与以前相同的数据，唯一的区别是每个坐标表示为矩阵而不是向量。这是为了说明一个概念。在大多数情况下，将坐标表示为向量更有意义。</p><h2 id="0aea" class="md me it bd mj mk ml dn mm mn mo dp mp li mq mr ms lm mt mu mv lq mw mx my mz bi translated">2.4带有坐标向量和矩阵的数据集</h2><p id="f213" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">坐标可以是矩阵和向量的混合。你只需要确保变量中的所有维度都在你的坐标中。</p><p id="6245" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们创建一个具有三个维度的数据集，<code class="fe lv lw lx ly b"> time</code>、<code class="fe lv lw lx ly b">lat</code>和<code class="fe lv lw lx ly b">lon</code>。空间维度(<code class="fe lv lw lx ly b">lat</code>、<code class="fe lv lw lx ly b">lon</code>)将分别由矩阵表示，而<code class="fe lv lw lx ly b">time</code>将是向量。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="019d" class="nm me it bd mj nn no np mm nq nr ns mp jz nt ka ms kc nu kd mv kf nv kg my nw bi translated">3.最后的想法</h1><p id="c859" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">希望这有助于您创建自己的数据集并扩充现有数据集。</p><p id="8c28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您的数据很小或者已经在熊猫数据框架中。那么使用<code class="fe lv lw lx ly b">to_xarray()</code>是创建初始对象最简单的方法。在任何其他情况下，从头开始创建数据集可能更容易。</p><p id="a9b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我介绍了两种表示坐标的方法:向量或矩阵。我的建议是尽可能保持坐标为向量。如果数据不在规则的网格上，通常使用矩阵来存储坐标信息。</p><p id="a59d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果创建数据集时出现错误，首先要检查的是维度。很容易将维度打乱顺序。</p><p id="64fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的另一条建议是，尽管在创建数据集时属性是可选的，但最好总是包含它们，这样您和其他人就可以轻松地解释数据集。我更喜欢在创建数据集对象后添加属性。这是我认为提高可读性的个人喜好。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><p id="5284" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oq">感谢您的阅读，我很乐意帮助您解决任何问题</em></p><div class="or os gp gr ot ou"><a href="https://lukegloege.medium.com/membership" rel="noopener follow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">通过我的推荐链接加入Medium—Luke Gloege博士</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">lukegloege.medium.com</p></div></div><div class="pd l"><div class="pe l pf pg ph pd pi ks ou"/></div></div></a></div></div></div>    
</body>
</html>