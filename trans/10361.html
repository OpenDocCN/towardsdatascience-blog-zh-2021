<html>
<head>
<title>Identification and Handling of Missing Well Log Data Prior to Petrophysical Machine Learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在岩石物理机器学习之前识别和处理丢失的测井数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/identifying-and-handling-missing-well-log-data-prior-to-machine-learning-5fa1a3d0eb73?source=collection_archive---------18-----------------------#2021-10-02">https://towardsdatascience.com/identifying-and-handling-missing-well-log-data-prior-to-machine-learning-5fa1a3d0eb73?source=collection_archive---------18-----------------------#2021-10-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="497a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从探索性数据分析到利用测井数据进行机器学习系列文章的第2部分</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/369911dadf8dc35a641b92689bcc417d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XZt7Ks8seMwX7Wzw"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·斯皮斯克在<a class="ae ky" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="db18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">机器学习和人工智能在地球科学和岩石物理领域越来越受欢迎。尤其是在过去的十年里。机器学习是人工智能的一个分支，是计算机可以学习并根据数据进行预测的过程，而无需显式编程。我们可以在岩石物理学中以多种方式使用机器学习，包括自动化异常值检测、属性预测、相分类等。</p><p id="adff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这一系列文章将着眼于从基本测井测量到岩石物理性质预测的数据集。这些文章最初是在2021年SPWLA大会上的一个关于机器学习和人工智能的研讨会上作为Jupyter笔记本发表的。它们后来被扩展和更新以形成这些文章。该系列将包括以下内容，链接将包括一旦他们被释放。</p><p id="8241" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/exploring-well-log-data-using-pandas-matplotlib-and-seaborn-712779a39ac2"> 1。<strong class="lb iu">Volve油田数据集</strong> <br/> </a> 2中所选井的初始数据勘探。识别&amp;处理缺失数据(本文)<br/> 3。使用手动和自动方法检测异常值/异常数据点<br/> 4。使用机器学习预测关键储层性质</p><p id="6f93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇关于识别测井测量中缺失数据的文章是之前工作的高潮，具体文章如下:</p><ul class=""><li id="b5ab" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/using-the-missingno-python-library-to-identify-and-visualise-missing-data-prior-to-machine-learning-34c8c5b5f009">使用缺失号库识别缺失值</a></li><li id="afe6" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/visualising-well-data-coverage-using-matplotlib-f30591c89754">使用Matplotlib可视化油井数据覆盖范围</a></li></ul><p id="5ed6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，如果你想了解missingno库如何识别丢失的数据，可以查看我的YouTube视频，其中介绍了这个库及其特性。</p><p id="3e97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://youtu.be/Wdvwer7h-8w" rel="noopener ugc nofollow" target="_blank">https://youtu.be/Wdvwer7h-8w</a></p><h1 id="e3b7" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">识别和处理缺失数据</h1><p id="cbc5" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">缺失值是数据集中的一个常见问题。在测井数据集中，数据丢失的原因有很多，包括工具/传感器故障、数据过时、遥测问题、卡住和拉动以及选择丢失。这些问题在McDonald (2021)中有详细描述。</p><p id="cd7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Python世界中，我们可以利用易用库中的许多有用的函数来识别丢失的数据，这些方法包括:</p><ul class=""><li id="0de3" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">熊猫数据帧摘要(例如。描述()和。信息())</li><li id="2816" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">缺少图书馆</li><li id="59cd" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">可视化</li></ul><p id="dd02" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">处理丢失数据的过程可能会引起争议。许多岩石物理学家、数据科学家和其他人认为，数据的填充可能会导致最终结果增加更大的不确定性，而其他人则建议应该填充数据。可以使用简单的线性插值来填充缺失值，使用平均值进行填充，还可以扩展到使用机器学习算法来预测缺失值。和往常一样，在应用任何缺失数据插补技术后，您应该检查您的数据。</p><p id="4bf0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将首先识别丢失的数据，然后使用多种技术删除受影响的行和列。将使用变量丢弃和列表删除方法演示数据删除。</p><h1 id="67ba" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">数据</h1><p id="b94d" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">我们将在本文中使用的数据集来自2018年发布的流行的Volve Field数据集，以促进研究和学习。发布的数据包括:</p><ul class=""><li id="b27b" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">测井记录</li><li id="8425" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">岩石物理解释</li><li id="0162" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">报告(地质、完井、岩石物理、岩心等)</li><li id="41fe" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">核心测量</li><li id="4e55" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">地震数据</li><li id="0c6b" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">地质模型</li><li id="57a9" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">还有更多…</li></ul><p id="1a89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Volve油田位于北海挪威部分斯塔万格以西约200公里处。1993年在侏罗纪时代的胡金地层中发现了碳氢化合物。石油生产始于2008年，持续了8年(是计划时间的两倍)，直到2016年停止生产。在油田寿命期内，总共生产了63个MMBO，达到了56000桶/天的稳定产量</p><p id="03d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有关Volve字段和整个数据集的更多详细信息，请访问:<a class="ae ky" href="https://www.equinor.com/en/what-we-do/norwegian-continental-shelf-platforms/volve.html" rel="noopener ugc nofollow" target="_blank">https://www . equinor . com/en/what-we-do/Norwegian-continental-shelf-platforms/Volve . html</a></p><p id="a77b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些数据在Equinor开放数据许可证下获得许可。</p><h1 id="27ad" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">导入库和数据</h1><p id="44be" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">第一步是导入处理数据所需的库。对于本笔记本，我们将使用:</p><ul class=""><li id="3343" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">熊猫</a>用于加载和存储数据</li><li id="9b84" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> matplotlib </a>和seaborn用于可视化数据</li><li id="4a49" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://numpy.org/" rel="noopener ugc nofollow" target="_blank"> numpy </a>为多种计算方法</li><li id="5be8" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://github.com/ResidentMario/missingno" rel="noopener ugc nofollow" target="_blank">缺失no </a>显示缺失数据的位置</li></ul><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="ecff" class="nl mk it nh b gy nm nn l no np">import pandas as pd<br/>import matplotlib.pyplot as plt<br/>import missingno as msno<br/>import numpy as np</span></pre><p id="e9b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们将使用pandas <code class="fe nq nr ns nh b">read_csv</code>函数加载数据，并将其赋给变量<code class="fe nq nr ns nh b">df</code>。数据现在将存储在一个称为数据帧的结构化对象中。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="db3b" class="nl mk it nh b gy nm nn l no np">df = pd.read_csv('data/spwla_volve_data.csv')</span></pre><p id="6f8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如在上一篇文章中看到的，我们可以调用一些方法来检查数据内容和初始质量。</p><p id="cba8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nq nr ns nh b">.head()</code>方法允许我们查看数据帧的前5行。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="acd9" class="nl mk it nh b gy nm nn l no np">df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nt"><img src="../Images/032927708183e1451526ac6aabc9e936.png" data-original-src="https://miro.medium.com/v2/format:webp/1*zD2AcLZuzwzor_iSQ4EKQw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用df.head()方法从dataframe中获取标题行。图片由作者提供。</p></figure><p id="cd50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nq nr ns nh b">.describe()</code>方法为我们提供了一些汇总统计数据。为了使用这种方法确定我们是否有丢失的数据，我们需要查看计数行。如果我们假设MD(测量深度)是最完整的列，我们有27，845个数据点。现在，如果我们看一下DT和DTS，我们可以看到我们分别只有5，493和5，420个数据点。一些其他栏目也有较低的数字，即:RPCELM，PHIF，西南，VSH。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="dfb2" class="nl mk it nh b gy nm nn l no np">df.describe()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nt"><img src="../Images/fdb431d4c542e9e8dfe4b24648afdaa8.png" data-original-src="https://miro.medium.com/v2/format:webp/1*qvjdtOiL_Jef9GEhkxBmeA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用df.describe()方法的数据帧摘要统计数据—单击以放大。图片由作者提供。</p></figure><p id="11ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了获得更清晰的认识，我们可以调用<code class="fe nq nr ns nh b">info()</code>方法来查看每列有多少非空值。我们可以立即看到之前突出显示的那些具有较少数量的非空值。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="1061" class="nl mk it nh b gy nm nn l no np">df.info()</span></pre><p id="18d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将返回以下内容:</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="d2d8" class="nl mk it nh b gy nm nn l no np">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 27845 entries, 0 to 27844<br/>Data columns (total 16 columns):<br/>wellName    27845 non-null object<br/>MD          27845 non-null float64<br/>BS          27845 non-null float64<br/>CALI        27845 non-null float64<br/>DT          5493 non-null float64<br/>DTS         5420 non-null float64<br/>GR          27845 non-null float64<br/>NPHI        27845 non-null float64<br/>RACEHM      27845 non-null float64<br/>RACELM      27845 non-null float64<br/>RHOB        27845 non-null float64<br/>RPCEHM      27845 non-null float64<br/>RPCELM      27600 non-null float64<br/>PHIF        27736 non-null float64<br/>SW          27736 non-null float64<br/>VSH         27844 non-null float64<br/>dtypes: float64(15), object(1)<br/>memory usage: 3.4+ MB</span></pre><h2 id="bc5e" class="nl mk it bd ml nu nv dn mp nw nx dp mt li ny nz mv lm oa ob mx lq oc od mz oe bi translated">使用缺失数据可视化数据稀疏性</h2><p id="35d3" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">missingno库旨在获取数据帧，并允许您可视化可能存在的差距。</p><p id="e324" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以简单地调用<code class="fe nq nr ns nh b">.matrix()</code>方法并传入dataframe对象。当我们这样做时，我们生成数据帧的图形视图。</p><p id="b35e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下图中，我们可以看到DT和DTS列中有明显的差距，而RPCELM、PHIF和SW列中有微小的差距。</p><p id="73ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">图表右侧的迷你图提供了数据完整性的指示。如果该行位于最大值(右侧)，则表明该数据行是完整的。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="cacf" class="nl mk it nh b gy nm nn l no np">msno.matrix(df)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nt"><img src="../Images/52607c3d289c5ffb16043fcf0fc4cd91.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Bfy1EVrDpA-PLUrJRgYDIg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">缺失没有显示缺失数据值出现位置的矩阵图。作者图片</p></figure><p id="a616" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以调用的另一个图是条形图，它提供了每一列中点数的图形汇总。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="5c4b" class="nl mk it nh b gy nm nn l no np">msno.bar(df)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nt"><img src="../Images/ce69b35c2a93cac4018888cee29d0291.png" data-original-src="https://miro.medium.com/v2/format:webp/1*2Mym5Zdwjfn0wcvxVWBogQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">缺少所选井内数据的条形图。图片作者。</p></figure><h2 id="82fb" class="nl mk it bd ml nu nv dn mp nw nx dp mt li ny nz mv lm oa ob mx lq oc od mz oe bi translated">使用matplotlib创建自定义数据覆盖图</h2><p id="9055" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">我们可以生成自己的图来显示每口井的数据稀疏度如何变化。为了做到这一点，我们需要操纵数据帧。</p><p id="f8f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们创建一个单独处理的数据帧的副本，然后如果数据为非空，用值1替换每一列。</p><p id="d001" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了让我们的绘图工作，我们需要将每一列的值增加1。这允许我们将每一列绘制为前一列的偏移。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="469c" class="nl mk it nh b gy nm nn l no np">data_nan = df.copy()<br/>for num, col in enumerate(data_nan.columns[2:]):<br/>    data_nan[col] = data_nan[col].notnull() * (num + 1)<br/>    data_nan[col].replace(0, num, inplace=True)</span></pre><p id="2413" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们查看数据帧的标题时，我们现在有一系列从1到14递增值的列。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="5f16" class="nl mk it nh b gy nm nn l no np">data_nan.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nt"><img src="../Images/0cc406fa92af7bff2a5e5e4b680ae4fa.png" data-original-src="https://miro.medium.com/v2/format:webp/1*zlx0KmdtTo59nMvgiyF-aw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">包含基本值的数据框架，可用于绘制数据覆盖范围。作者图片</p></figure><p id="3682" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们可以按照井名列对数据帧进行分组。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="5ae6" class="nl mk it nh b gy nm nn l no np">grouped = data_nan.groupby('wellName')</span></pre><p id="91c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们可以使用新的数据帧为每个井创建多个子图。如果数据存在，我们可以从前一列的最大值渐变到当前列的最大值，而不是在子情节中创建子情节。如果缺少数据，它将显示为一个缺口。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nt"><img src="../Images/936c1f37172f257c7f60ea09d22808f9.png" data-original-src="https://miro.medium.com/v2/format:webp/1*tXRFU08fydnMoUYOPnX_0A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">显示五口选定井的每条测井曲线的数据覆盖范围的子图。蓝色表示数据存在的位置，白色表示缺少值。图片作者。</p></figure><p id="7f69" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从图中，我们不仅可以看到每口井的数据范围，还可以看到5口井中有2口井的DT和DTS曲线缺失，2口井的RPCELM数据缺失，2口井的PHIF和SW曲线值缺失。</p><h1 id="e06e" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">处理缺失数据</h1><h2 id="3209" class="nl mk it bd ml nu nv dn mp nw nx dp mt li ny nz mv lm oa ob mx lq oc od mz oe bi translated">丢弃变量</h2><p id="13b0" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">变量丢弃可用于变量中存在缺失值的情况，这反过来会使该变量不适合预期用途。因此，它可以从数据集中删除。如果做到了这一点，它可以对机器学习建模产生广泛的影响，特别是如果变量很重要并且存在于其他油井中。</p><p id="ae11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的示例数据集中，两个井中的DT和DTS都缺失。我们可以选择从数据集中删除这些孔，或者我们可以删除所有孔的这两列。</p><p id="2ac5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是我们如何从数据帧中移除两条曲线的示例。为此，我们可以将一个列名列表传递给函数<code class="fe nq nr ns nh b">drop()</code>,即我们希望沿着其放置数据的轴，在本例中是列(轴=1 ),而<code class="fe nq nr ns nh b">inplace=True</code>参数允许我们从dataframe中物理删除这些值。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="e0fe" class="nl mk it nh b gy nm nn l no np">df.drop(df[['DT', 'DTS']], axis=1, inplace=True)</span></pre><p id="9181" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们查看数据帧的标题，我们会看到我们已经删除了所需的列。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="83c8" class="nl mk it nh b gy nm nn l no np">df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nt"><img src="../Images/892c510048290487d22eb957f7ddbd4a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*46Bgbqn6jOyS5KWgw4IQIA.png"/></div></figure><p id="843f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，如果我们调用信息方法…</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="02c2" class="nl mk it nh b gy nm nn l no np">df.info()</span></pre><p id="10ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它返回下面的结果。我们可以看到，我们仍然有一些测井曲线/列缺少值。即PHIF、西南和VSH。其中最后三个是岩石物理输出，并且可能只存在于感兴趣的区域上。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="e352" class="nl mk it nh b gy nm nn l no np">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 27845 entries, 0 to 27844<br/>Data columns (total 14 columns):<br/>wellName    27845 non-null object<br/>MD          27845 non-null float64<br/>BS          27845 non-null float64<br/>CALI        27845 non-null float64<br/>GR          27845 non-null float64<br/>NPHI        27845 non-null float64<br/>RACEHM      27845 non-null float64<br/>RACELM      27845 non-null float64<br/>RHOB        27845 non-null float64<br/>RPCEHM      27845 non-null float64<br/>RPCELM      27600 non-null float64<br/>PHIF        27736 non-null float64<br/>SW          27736 non-null float64<br/>VSH         27844 non-null float64<br/>dtypes: float64(13), object(1)<br/>memory usage: 3.0+ MB</span></pre><h2 id="8ec2" class="nl mk it bd ml nu nv dn mp nw nx dp mt li ny nz mv lm oa ob mx lq oc od mz oe bi translated">使用列表式删除丢弃nan</h2><p id="2475" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">列表式删除，也称为事例删除，是处理不完整数据集的一种常见而方便的方法。该方法移除要素中有一个或多个缺失值的所有行(案例)。</p><p id="ecd0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Python中，我们可以通过调用一个叫做<code class="fe nq nr ns nh b">dropna()</code>的特殊函数来删除熊猫数据帧中缺失的值。这将从数据帧中删除任何NaN(非数字)值。<code class="fe nq nr ns nh b">inplace=True</code>参数允许我们从数据帧中物理删除这些值，而不必将其赋给一个新变量。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="13b1" class="nl mk it nh b gy nm nn l no np">df.dropna(inplace=True)</span></pre><p id="8a79" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们调用<code class="fe nq nr ns nh b">df.info()</code>,我们将看到我们的数据集已经减少到每列27，491个非空值。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="5fe7" class="nl mk it nh b gy nm nn l no np">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>Int64Index: 27491 entries, 0 to 27844<br/>Data columns (total 14 columns):<br/>wellName    27491 non-null object<br/>MD          27491 non-null float64<br/>BS          27491 non-null float64<br/>CALI        27491 non-null float64<br/>GR          27491 non-null float64<br/>NPHI        27491 non-null float64<br/>RACEHM      27491 non-null float64<br/>RACELM      27491 non-null float64<br/>RHOB        27491 non-null float64<br/>RPCEHM      27491 non-null float64<br/>RPCELM      27491 non-null float64<br/>PHIF        27491 non-null float64<br/>SW          27491 non-null float64<br/>VSH         27491 non-null float64<br/>dtypes: float64(13), object(1)<br/>memory usage: 3.1+ MB</span></pre><h1 id="6987" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">摘要</h1><p id="e5c0" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">现在，我们已经删除了丢失的值，我们可以进入下一步，即识别和处理异常值和坏数据。</p><p id="6b83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇短文展示了可视化缺失数据的三种不同方法。第一种是使用pandas查询数据帧，第二种是使用missingno库，第三种是使用matplotlib创建自定义可视化。</p><p id="50a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们介绍了从数据帧中删除缺失数据的两种方法。第一种方法是丢弃变量，第二种方法是丢弃行中缺少的值。</p><p id="d3df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文中展示的例子说明了处理缺失值的基本工作流。在每个阶段都应该对数据进行彻底的质量控制，以确保其仍然符合目的。</p></div><div class="ab cl oh oi hx oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="im in io ip iq"><p id="df43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oo">感谢阅读！</em></p><p id="3e5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oo">如果您觉得这篇文章有用，请随时查看我的其他文章，这些文章介绍了Python和测井数据的各个方面。你也可以在</em> <a class="ae ky" href="https://github.com/andymcdgeo" rel="noopener ugc nofollow" target="_blank"> <em class="oo"> GitHub </em> </a> <em class="oo">找到我和其他人在本文中使用的代码。</em></p><p id="234b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oo">如果你想联系我，你可以在</em><a class="ae ky" href="https://www.linkedin.com/in/andymcdonaldgeo/" rel="noopener ugc nofollow" target="_blank"><em class="oo">LinkedIn</em></a><em class="oo">或者我的</em> <a class="ae ky" href="http://andymcdonald.scot/" rel="noopener ugc nofollow" target="_blank"> <em class="oo">网站</em> </a> <em class="oo">找到我。</em></p><p id="4c7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有兴趣了解更多关于python和测井数据或岩石物理学的知识吗？跟我上 <a class="ae ky" href="https://medium.com/@andymcdonaldgeo" rel="noopener"> <em class="oo">中</em> </a> <em class="oo">。</em></p><div class="op oq gp gr or os"><a href="https://andymcdonaldgeo.medium.com/membership" rel="noopener follow" target="_blank"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd iu gy z fp ox fr fs oy fu fw is bi translated">通过我的推荐链接加入Medium安迪·麦克唐纳</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">andymcdonaldgeo.medium.com</p></div></div><div class="pb l"><div class="pc l pd pe pf pb pg ks os"/></div></div></a></div></div></div>    
</body>
</html>