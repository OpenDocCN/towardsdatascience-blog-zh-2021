<html>
<head>
<title>TextPlot: R Library for Visualizing Text Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TextPlot:用于可视化文本数据的R库</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/textplot-r-library-for-visualizing-text-data-a8f1740a032d?source=collection_archive---------14-----------------------#2021-05-17">https://towardsdatascience.com/textplot-r-library-for-visualizing-text-data-a8f1740a032d?source=collection_archive---------14-----------------------#2021-05-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="197b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">只需一个函数就能让你的文本数据可视化</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ee364471560613a8da3c2c6d73831b7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QbJeSrfs6-awGKnZdCmi_A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">奥马尔·弗洛雷斯在<a class="ae ky" href="https://unsplash.com/s/photos/network?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="2eb4" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">动机</h1><p id="2f74" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">数据可视化是数据科学中的一项基本任务。我们可以从数据可视化中获得洞察力，因此它可以支持我们对问题的决策。</p><p id="43d9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">文本数据是很多人分析最多的数据之一。它也是最复杂的数据之一，因为我们必须花费大量时间对数据进行预处理，包括标记文本、删除无意义的术语、创建文档术语矩阵等。</p><p id="adaf" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">可视化数据(如文本)有时与预处理数据一样复杂。谢天谢地，有一个库可以帮助我们可视化文本数据。它叫做TextPlot。</p><p id="32a4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://github.com/bnosac/textplot" rel="noopener ugc nofollow" target="_blank"> TextPlot </a>是一个用R编程语言实现的库。TextPlot可以可视化很多东西，例如，词频图、词相关图、依存解析等等。</p><p id="c66f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在本文中，我将向您展示如何使用TextPlot库通过r可视化文本数据。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="ab23" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">履行</h1><h2 id="288a" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">安装和导入库</h2><p id="b76d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在我们使用这个库之前，我们需要安装这些库并将它们加载到我们的环境中。这是这样做的脚本，</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="df92" class="ne la it nr b gy nv nw l nx ny">install.packages("textplot")<br/>install.packages('udpipe')<br/>install.packages('igraph')<br/>install.packages('ggraph')<br/>install.packages('concaveman')<br/>install.packages('BTM')<br/>install.packages('glasso')<br/>install.packages('qgraph')<br/>install.packages('graph')</span><span id="15a8" class="ne la it nr b gy nz nw l nx ny">library(ggraph)<br/>library(concaveman)<br/>library(ggplot2)<br/>library(BTM)<br/>library(textplot)<br/>library(udpipe)<br/>library(igraph)<br/>library(graph)<br/>library(Rgraphviz)</span></pre><h2 id="c2bf" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">词频条形图</h2><p id="bfe2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这个库的第一个可视化功能是词频条形图。对于输入，它需要一个包含单词及其频率的表。让我们先运行这段代码，看看它看起来怎么样，</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="6983" class="ne la it nr b gy nv nw l nx ny">data(brussels_listings, package = 'udpipe')<br/>x &lt;- table(brussels_listings$neighbourhood)<br/>x &lt;- sort(x)<br/>x</span></pre><p id="96d5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这里是输入的预览图，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/6541c9162bb6e99acef11c71be53f39b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*D65lIf5BojIrL2qS"/></div></div></figure><p id="e70b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">要创建词频条形图，需要运行textplot库中的textplot_bar函数。下面是命令的样子，</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="ec68" class="ne la it nr b gy nv nw l nx ny">textplot_bar(x, panel = "Locations", col.panel = "darkgrey", xlab = "Listings", cextext = 0.75, addpct = TRUE, cexpct = 0.5)</span></pre><p id="672c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是图表的样子，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/9bec111f3f8fb983be34ccd522f860b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IktPv1-IV1JrSMUN"/></div></div></figure><p id="1ec4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">从上面可以看到，x轴代表字数，y轴代表单词本身。此外，每个单词都有一些信息，比如单词的数量和百分比。</p><h2 id="cf14" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">单词相似度图表</h2><p id="e836" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">您可以创建的另一个可视化工具是单词相似度图表。这个图表将把单词之间的相似性用图形表示出来。</p><p id="b0a0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">文档术语矩阵(DTM)将用作输入。DTM是一种文本表示，其中每行代表一个文档，每列代表单词，每个单元格代表单词在文档中的出现频率。</p><p id="ca4b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">要创建一个DTM，您可以使用如下文本图中命令，</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="dbdc" class="ne la it nr b gy nv nw l nx ny">data(brussels_reviews_anno, package = 'udpipe')<br/>x &lt;- subset(brussels_reviews_anno, xpos %in% "NN" &amp; language %in% "nl" &amp; !is.na(lemma))<br/>x &lt;- document_term_frequencies(x, document = "doc_id", term = "lemma")<br/>dtm &lt;- document_term_matrix(x)<br/>dtm &lt;- dtm_remove_lowfreq(dtm, maxterms = 60)<br/>dtm</span></pre><p id="067e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是矩阵的样子，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/2147bf77a3b9da11b0c1d9cfbc8ba216.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oJhrkx2dztFWimXI"/></div></div></figure><p id="c49c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">创建DTM后，下一步是通过计算每个单词的相关性来创建相关性矩阵。为此，我们可以使用dtm_cor函数，该函数将dtm作为参数。下面是命令的样子，</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="9ce4" class="ne la it nr b gy nv nw l nx ny">m &lt;- dtm_cor(dtm)</span></pre><p id="b0ef" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是相关矩阵的预览图，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/d6e9098429c2e383923f19142232b2bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZMC5gLWUixRs4yTr"/></div></div></figure><p id="a1bd" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在你可以创建单词相关图了。为此，我们可以使用textplot_correlation_glasso函数来生成图表。</p><p id="c1da" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">除了给出输入之外，我们还将exclude_zero参数设置为true，因此它不会显示零相关的单词。下面是这个函数的样子，</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="5f43" class="ne la it nr b gy nv nw l nx ny">textplot_correlation_glasso(m, exclude_zero = TRUE)</span></pre><p id="fd93" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是结果，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/4ec834213e1796d2dfdb66cc302cbe57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PxWICy9Obcjt9w5t"/></div></div></figure><p id="71cd" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">从上面可以看出，随着线条变粗，相关性也变大。例如，您可以看到单词“badkamer”、“slaapkamer”和“woonkamer”比图表中的任何单词都更有关联。这些单词来自荷兰语，它们有相同的单词“kamer”。意思是房间。</p><h2 id="0e2d" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">依存句法分析</h2><p id="caf8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我想向你们展示的另一个可视化是依赖解析。依存解析是一种查看单词之间相互依存以及单词之间如何关联的方法。</p><p id="5474" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们把这句话作为输入。</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="0283" class="ne la it nr b gy nv nw l nx ny">sentence &lt;- “UDPipe provides tokenization, tagging, lemmatization and dependency parsing of raw text”</span></pre><p id="2e7f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了检索依存解析，我们需要对句子进行标记，并为每个单词分配词性(POS)标签。幸运的是，这个过程已经由udpipe库中的udpipe函数完成了。命令看起来像这样，</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="b6fd" class="ne la it nr b gy nv nw l nx ny">x &lt;- udpipe(sentence, "english")</span></pre><p id="7ec7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">之后，我们将使用textplot库中的textplot_dependencyparser函数生成依赖解析。命令看起来像这样，</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="8147" class="ne la it nr b gy nv nw l nx ny">textplot_dependencyparser(x)</span></pre><p id="076d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是可视化的样子，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/74d2f09b606faa9d4ba164cdef7b0e28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0EJVw-PtB6Yw9jbP"/></div></div></figure><p id="3111" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">正如你在上面看到的，图表显示了单词下面的POS标签和画出单词之间关系的箭头。</p><h2 id="1547" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">词共现图</h2><p id="e791" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我想给你们看的最后一个图像是单词共现图。这个图表显示了单词对的集合以及这些单词对出现的频率。</p><p id="a027" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们可以使用一个名为textplot_cooccurrence的函数来可视化这个图表。现在我们先来看数据。我们将使用与上面相同的数据。</p><p id="cb90" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">利用这些数据，我们创建了一个共现数据框，其中每一行都包含单词对以及它们出现的数量。该共现数据框将用作textplot_cooccurrence函数的输入。</p><p id="6d07" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">数据的代码看起来像这样，</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="92f1" class="ne la it nr b gy nv nw l nx ny">data(brussels_reviews_anno, package = 'udpipe')<br/>x &lt;- subset(brussels_reviews_anno, xpos %in% "JJ" &amp; language %in% "fr")<br/>x &lt;- cooccurrence(x, group = "doc_id", term = "lemma")</span></pre><p id="2c06" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是数据的样子，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/62e3ff973f103f39d222dd6c05531b09.png" data-original-src="https://miro.medium.com/v2/resize:fit:546/0*O34Q-Evsu2EWcGXI"/></div></figure><p id="0cc3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在我们得到正确的输入之后，现在我们可以创建图表了。我们将只选取25个最常见的单词对。下面是执行该操作的命令，</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="22c2" class="ne la it nr b gy nv nw l nx ny">textplot_cooccurrence(x, top_n = 25, subtitle = "showing only top 25")</span></pre><p id="1ce7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是可视化，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/48a798bdfc6f21d1bb0eb2de1d21d869.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Xbc6XuuGTpZdmus4"/></div></div></figure><p id="2ada" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如你所见,“agreable”和“bon”是数据中出现最多的词对。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="c369" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">结束语</h1><p id="6021" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">恭喜你！现在您已经学会了如何在r中使用text plot。我希望您可以在您的数据科学管道中使用这个库来解决您的数据可视化问题，尤其是在文本数据上。</p><p id="b4ad" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果你想看更多我写的东西，你可以在medium上关注我。此外，如果您有任何问题或想与我交谈，您可以通过<a class="ae ky" href="https://www.linkedin.com/in/alghaniirfan/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>与我联系。</p><p id="85c0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">谢谢你看我的文章！</p></div></div>    
</body>
</html>