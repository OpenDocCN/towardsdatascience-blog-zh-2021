<html>
<head>
<title>Data Preparation for Geospatial Analysis &amp; ML with Laguerre-Voronoi in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">地理空间分析的数据准备&amp;用Python中的Laguerre-Voronoi进行ML</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-preparation-for-geospatial-analysis-ml-with-laguerre-voronoi-in-python-71b9b418d8b6?source=collection_archive---------30-----------------------#2021-04-12">https://towardsdatascience.com/data-preparation-for-geospatial-analysis-ml-with-laguerre-voronoi-in-python-71b9b418d8b6?source=collection_archive---------30-----------------------#2021-04-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="5f8a" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a></h2><div class=""/><div class=""><h2 id="014c" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">人口和健康调查数据的加权Voronoi镶嵌，用于预测社会和经济福祉。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/cb9330afe462f5e39b6a35859572de43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hY34zRjl8_opD4penT71aw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">印度GADM边界DHS数据的拉盖尔-沃罗诺伊镶嵌</p></figure><p id="c3e7" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在这篇文章中，应用拉盖尔-Vornoi镶嵌人口和健康调查(DHS)的数据进行了探讨。提出了清理和转换DHS数据的管道以及相关的python代码。</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="176f" class="mh mi iq bd mj mk ml mm mn mo mp mq mr kf ms kg mt ki mu kj mv kl mw km mx my bi translated">人口和健康调查数据</h1><p id="5abc" class="pw-post-body-paragraph le lf iq lg b lh mz ka lj lk na kd lm ln nb lp lq lr nc lt lu lv nd lx ly lz ij bi translated">DHS调查包含机密信息，这些信息有可能通过独特信息或<a class="ae ne" href="https://en.wikipedia.org/wiki/Personal_data" rel="noopener ugc nofollow" target="_blank"> PII </a>来识别个人身份。为了避免这种情况，<a class="ae ne" href="https://dhsprogram.com/" rel="noopener ugc nofollow" target="_blank"> DHS项目</a>开发了一种方法来降低GPS坐标的精确度，这样就无法得到真实的居住地。在所有DHS调查中，记录一个聚类中人口居住地点的中心GPS坐标，并根据该聚类是<em class="nf">城市</em>还是<em class="nf">农村</em>应用单独的退化误差值。随机误差在农村地区最大为5公里，在城市地区最大为2公里，这将家庭识别的可能性降低了10倍。新的坐标列表可以被认为有一个圆形的误差缓冲区(5公里或2公里),实际值位于其中。这种退化对进一步的数据分析和对这些数据的机器学习任务提出了挑战。全面准确地衡量经济福祉是研究和决策的基本投入。<a class="ae ne" href="https://www.solveforgood.org/proj/47/" rel="noopener ugc nofollow" target="_blank">世界资源研究所项目</a>的最终目标是能够利用遥感和OpenStreetMaps数据对印度最精细的空间微区域进行基于人口和健康调查的预测。</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="9ee3" class="mh mi iq bd mj mk ml mm mn mo mp mq mr kf ms kg mt ki mu kj mv kl mw km mx my bi translated">拉盖尔Voronoi图</h1><p id="78ef" class="pw-post-body-paragraph le lf iq lg b lh mz ka lj lk na kd lm ln nb lp lq lr nc lt lu lv nd lx ly lz ij bi translated">在1985年推出的拉盖尔芙诺以图是平面上的<em class="nf"> n </em>个点的芙诺以图概念到平面上的<em class="nf"> n </em>个圆的拉盖尔几何概念的扩展。它是将欧几里得平面分割成由一组圆定义的多边形单元，也称为<a class="ae ne" href="https://en.wikipedia.org/wiki/Power_diagram" rel="noopener ugc nofollow" target="_blank">功率图</a>。本文中使用的图表是从下面的<a class="ae ne" href="https://gist.github.com/sunayana/a3a564058e97752f726ca65d56fab529" rel="noopener ugc nofollow" target="_blank"> GitHub要点</a>中生成的。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/bd99c41d3b6195eb4aba75b1ea2875af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*1CrpQnC-2Qs_t_-81fMTMw.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">平面上32个点的功率图示例，其中每个点具有不同的半径。</p></figure></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="aab3" class="mh mi iq bd mj mk ml mm mn mo mp mq mr kf ms kg mt ki mu kj mv kl mw km mx my bi translated">DHS数据的拉盖尔Voronoi镶嵌</h1><p id="f3fc" class="pw-post-body-paragraph le lf iq lg b lh mz ka lj lk na kd lm ln nb lp lq lr nc lt lu lv nd lx ly lz ij bi translated">由于DHS数据中引入的退化性质，DHS数据集的Laguerre Voronoi镶嵌是一种可行的模型，可用于创建国家地图的多边形分区，以进行进一步的数据分析。以印度为例介绍管道。</p><p id="c418" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">预处理DHS数据</strong></p><ul class=""><li id="ac74" class="nh ni iq lg b lh li lk ll ln nj lr nk lv nl lz nm nn no np bi translated">请注意，地图上0度纬度(赤道)和0度经度(本初子午线)的交叉点位于大西洋中部，在西非海岸的几内亚湾。</li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nq"><img src="../Images/8844c94935f267048300af52123e85a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XI8xfIQ5ilZdTP4YMTTt8g.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">显示赤道和本初子午线交点的图像</p></figure><ul class=""><li id="4f64" class="nh ni iq lg b lh li lk ll ln nj lr nk lv nl lz nm nn no np bi translated">因此，来自任何国家特定的DHS <code class="fe nr ns nt nu b">GeoDataFrame </code>的所有条目都可以被丢弃，其纬度和经度条目都为0.0。</li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nv"><img src="../Images/3ff837c4f7e1519526784f22c6e7c2f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Thgd0lON1EsQ98z2nubDeA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">DHSGeographicData类处理DHS数据和成员方法clean。</p></figure><ul class=""><li id="fb44" class="nh ni iq lg b lh li lk ll ln nj lr nk lv nl lz nm nn no np bi translated">接下来，使用方法<code class="fe nr ns nt nu b">DHSGeographicData.extract_dhs()</code>提取对计算拉盖尔-沃罗诺图重要的列。来自地理数据<a class="ae ne" href="https://dhsprogram.com/data/dataset/India_Standard-DHS_2015.cfm" rel="noopener ugc nofollow" target="_blank"> IAGE71FL.zip </a>的印度shapefile <code class="fe nr ns nt nu b">IAGE71FL.shp</code>用于提取，并获得以下<code class="fe nr ns nt nu b">GeoDataFrame</code>:</li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/5e555f1033815eb1ff4cbfdddb4aa3dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bcD54TExXJwj1FxfZ9fwlA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">提取步骤后的地理数据框，显示从IAGE71FL.shp中提取的列</p></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nx"><img src="../Images/dd3ab144f709796c5f528b8ee17a99a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ykgdmnsbKEiZvuvHIzB4Bg.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">由提取的地理数据框的几何列表示的纬度和经度点的绘图。</p></figure><ul class=""><li id="dc39" class="nh ni iq lg b lh li lk ll ln nj lr nk lv nl lz nm nn no np bi translated">然后根据不同的地点是<em class="nf">城市</em>还是<em class="nf">农村</em>来分配权重，并使用<code class="fe nr ns nt nu b">DHSGeographicData.get_sites_and_radii()</code>方法提取地点和权重。</li></ul></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="6d0c" class="mh mi iq bd mj mk ml mm mn mo mp mq mr kf ms kg mt ki mu kj mv kl mw km mx my bi translated">生成加权Voronoi</h1><p id="ef64" class="pw-post-body-paragraph le lf iq lg b lh mz ka lj lk na kd lm ln nb lp lq lr nc lt lu lv nd lx ly lz ij bi translated">使用<a class="ae ne" href="https://gist.github.com/sunayana/a3a564058e97752f726ca65d56fab529" rel="noopener ugc nofollow" target="_blank"> Laguerre-Voronoi GitHub要点</a>获得加权Voronoi镶嵌。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nv"><img src="../Images/fa98b235e3a67f5b8873be8692455bed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lHAJrSQiVOANJllGOMESBw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">计算DHS数据的加权Voronoi单元图。</p></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nx"><img src="../Images/86904eab4e6dc02a7f789f43addedc4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1IJ7Y3AGUMevBfgnjSWVWw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">印度DHS聚类的加权Voronoi镶嵌图</p></figure></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="1d97" class="mh mi iq bd mj mk ml mm mn mo mp mq mr kf ms kg mt ki mu kj mv kl mw km mx my bi translated">将DHS数据与Voronoi单元相结合</h1><p id="fdb8" class="pw-post-body-paragraph le lf iq lg b lh mz ka lj lk na kd lm ln nb lp lq lr nc lt lu lv nd lx ly lz ij bi translated">接下来，将DHS地理数据框架与Voronoi像元相结合，使得DHS聚类中的每个点都被精确地分配一个Voronoi像元。目标是创建一个新的ESRI形状文件，其中的几何图形由Voronoi单元组成。成员方法<code class="fe nr ns nt nu b">DHSGeographicData.combine_dhs_voronoi(poly_lst)</code>用于此</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nv"><img src="../Images/64fb615ec6f75cc6b4f32e36d8dd8b47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u-9uCv7HmhpkzvU95LFDFg.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">DHSGeographicData类的成员方法将DHS数据与Voronoi单元图结合起来。</p></figure></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="0032" class="mh mi iq bd mj mk ml mm mn mo mp mq mr kf ms kg mt ki mu kj mv kl mw km mx my bi translated">裁剪具有GADM国家轮廓的组合地理数据框</h1><p id="8aff" class="pw-post-body-paragraph le lf iq lg b lh mz ka lj lk na kd lm ln nb lp lq lr nc lt lu lv nd lx ly lz ij bi translated"><a class="ae ne" href="https://gadm.org/about.html" rel="noopener ugc nofollow" target="_blank"> GADM </a>网站用于下载特定国家的地图和空间数据。在最后一步中，DHS数据和Vornoi像元的组合<code class="fe nr ns nt nu b">GeoDataFrame</code>被从GADM下载的国家边界形状文件剪切。以下步骤用于裁剪<code class="fe nr ns nt nu b">GeoDataFrame</code>并将最终输出存储到shapefile中以备后用。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nv"><img src="../Images/8809711ca7946add5abb49dd32728505.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tQMYlCUyQKyK1UzAWG3-BQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">完整的管道</p></figure><p id="40cd" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">过程的所有步骤都可以在<a class="ae ne" href="https://github.com/dai-mo/gis-laguerre/blob/master/examples/dhs_data_voronoi.ipynb" rel="noopener ugc nofollow" target="_blank"> dhs_data_voronoi.ipynb </a>中找到。下图显示了在国家边界处裁剪的DHS和Voronoi组合地理数据框架。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/afa9da33471756a89fa7e81bfbeb0d58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wsE0k4KcpJ48J8zAcqfA9w.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">从<a class="ae ne" href="https://gadm.org/" rel="noopener ugc nofollow" target="_blank"> GADM </a>获得的与印度行政边界相交的组合地理数据框架</p></figure></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="78ec" class="mh mi iq bd mj mk ml mm mn mo mp mq mr kf ms kg mt ki mu kj mv kl mw km mx my bi translated">结论</h1><p id="6ce3" class="pw-post-body-paragraph le lf iq lg b lh mz ka lj lk na kd lm ln nb lp lq lr nc lt lu lv nd lx ly lz ij bi translated">空间划分是基于一组给定的约束条件，例如空间属性，例如自然或人文地理因素，将一个地理区域划分成有限数量的非重叠区域的过程。对于现有方法的概述，我们参考to⁵.加权Voronoi是空间分割方法的一个例子。Voronoi图被广泛用于处理人类地理问题。Voronoi图的一些应用是在公共设施优化、城市规划和区域设计中。<a class="ae ne" href="http://wiki.gis.com/wiki/index.php/Voronoi_diagram#Applications" rel="noopener ugc nofollow" target="_blank">在生态学</a>中，Voronoi图用于研究森林和林冠的生长模式，也可能有助于开发森林火灾的预测模型。在本项目中使用加权Voronoi图的原因是，一些社会和经济变量的空间结构反映了一个事实，即高变量值往往集中在其他高值附近，而低值出现在地理上彼此接近的位置。未来的工作将证明这种方法是否真的有助于预测社会和经济福祉。</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="45b3" class="mh mi iq bd mj mk ml mm mn mo mp mq mr kf ms kg mt ki mu kj mv kl mw km mx my bi translated">关于我</h1><p id="f957" class="pw-post-body-paragraph le lf iq lg b lh mz ka lj lk na kd lm ln nb lp lq lr nc lt lu lv nd lx ly lz ij bi translated">我的专长是计算几何、几何处理以及C++和Python的软件开发。目前，我正在发展与地理空间计算相关的机器学习领域的技能，并探索几何在这些领域的应用。我期待着在这一领域与社会相关项目的潜在合作。你可以在<a class="ae ne" href="https://www.linkedin.com/in/sunayanag/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae ne" href="https://medium.com/@sunayanag/about" rel="noopener"> Medium </a>上和我联系。</p><h1 id="6cb6" class="mh mi iq bd mj mk ny mm mn mo nz mq mr kf oa kg mt ki ob kj mv kl oc km mx my bi translated">承认</h1><ul class=""><li id="3574" class="nh ni iq lg b lh mz lk na ln od lr oe lv of lz nm nn no np bi translated">这项工作是作为<a class="ae ne" href="https://www.solveforgood.org/proj/47/" rel="noopener ugc nofollow" target="_blank"> Solve For Good </a>项目的一部分完成的:使用机器学习、卫星图像和地面实况数据创建福祉数据层。</li></ul><p id="27d1" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我要感谢:</p><ul class=""><li id="62c5" class="nh ni iq lg b lh li lk ll ln nj lr nk lv nl lz nm nn no np bi translated"><a class="ae ne" href="https://www.linkedin.com/in/gvddool/" rel="noopener ugc nofollow" target="_blank"> Gijs van den Dool </a>广泛讨论了Voronoi图及其在GIS中的使用，最终导致加权Voronoi图用于该项目。</li><li id="d06c" class="nh ni iq lg b lh og lk oh ln oi lr oj lv ok lz nm nn no np bi translated"><a class="ae ne" href="https://www.wri.org/profile/kathleen-buckingham" rel="noopener ugc nofollow" target="_blank">凯瑟琳·白金汉</a>&amp;<a class="ae ne" href="https://www.wri.org/profile/rong-fang" rel="noopener ugc nofollow" target="_blank"><a class="ae ne" href="https://www.wri.org/" rel="noopener ugc nofollow" target="_blank">世界资源研究所</a>的房融</a></li><li id="8fca" class="nh ni iq lg b lh og lk oh ln oi lr oj lv ok lz nm nn no np bi translated"><a class="ae ne" href="https://cmougan.github.io/" rel="noopener ugc nofollow" target="_blank">卡洛斯</a>穆甘&amp;T12】罗汉·纳迪姆为好团队解决。</li></ul></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="4da4" class="mh mi iq bd mj mk ml mm mn mo mp mq mr kf ms kg mt ki mu kj mv kl mw km mx my bi translated">参考</h1><p id="b814" class="pw-post-body-paragraph le lf iq lg b lh mz ka lj lk na kd lm ln nb lp lq lr nc lt lu lv nd lx ly lz ij bi translated">[1] Imai，h .，Iri，m .和Murota，K.(1985年)。拉盖尔几何中的Voronoi图及其应用，SIAM计算杂志，14(1)，93–105。doi:10.1137/0214006</p><p id="5ead" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">[2]<a class="ae ne" href="https://dhsprogram.com/pubs/pdf/SAR8/SAR8.pdf" rel="noopener ugc nofollow" target="_blank">DHS GPS数据使用指南</a></p><p id="1e16" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">【3】<a class="ae ne" href="https://www.geographyrealm.com/zero-degrees-latitude-and-zero-degrees-longitude/" rel="noopener ugc nofollow" target="_blank">纬度零度和经度零度是什么？</a></p><p id="f668" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">[4]Devert Alexandre关于<a class="ae ne" href="https://gist.github.com/marmakoide/45d5389252683ae09c2df49d0548a627" rel="noopener ugc nofollow" target="_blank">拉盖尔Vornoi图</a>的GitHub Gist</p><p id="7d30" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">[5]王，关，马，李(2014).基于加权平面的自适应晶体生长Voronoi图服务区划分:以广州市海珠区为例。应用地理，50，108–119。doi:10.1016</p></div></div>    
</body>
</html>