<html>
<head>
<title>Deploy multiple Flask Applications using Nginx and Gunicorn</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨Nginxå’ŒGunicornéƒ¨ç½²å¤šä¸ªFlaskåº”ç”¨ç¨‹åº</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://towardsdatascience.com/deploy-multiple-flask-applications-using-nginx-and-gunicorn-16f8f7865497?source=collection_archive---------7-----------------------#2021-07-03">https://towardsdatascience.com/deploy-multiple-flask-applications-using-nginx-and-gunicorn-16f8f7865497?source=collection_archive---------7-----------------------#2021-07-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/230a878552339fe1cf32d33daf9568ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XBktsimICRx2AbHA3vRNYQ.jpeg"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">æ¥è‡ª<a class="ae kc" href="https://www.pexels.com/photo/close-up-photo-of-mining-rig-1148820/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>çš„<a class="ae kc" href="https://www.pexels.com/@cookiecutter?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> panumas nikhomkhai </a>çš„ç…§ç‰‡</p></figure><p id="3860" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™ç¯‡åšæ–‡æ˜¯å…³äºå¦‚ä½•ä½¿ç”¨Nginxå’ŒGunicornåœ¨LinuxæœåŠ¡å™¨ä¸Šéƒ¨ç½²å¤šä¸ªFlaskåº”ç”¨ç¨‹åºçš„åˆ†æ­¥æ•™ç¨‹ã€‚</p><p id="7bae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘å‡è®¾æ‚¨å·²ç»æœ‰äº†ä¸€ä¸ªå¯ä»¥ä½¿ç”¨IPåœ°å€sshåˆ°çš„æœåŠ¡å™¨ã€‚æˆ‘è¿˜å‡è®¾ä½ å¯¹åˆ›å»ºFlaskåº”ç”¨ç¨‹åºæœ‰åŸºæœ¬çš„äº†è§£ï¼Œå› ä¸ºæˆ‘ä¸ä¼šè¯¦ç»†è®¨è®ºã€‚</p><p id="7828" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘åœ¨æœ¬æ•™ç¨‹ä¸­ä½¿ç”¨çš„VPSè¿è¡Œåœ¨Ubuntuä¸Šã€‚å…¶å®ï¼Œå¦‚æœä½ æƒ³çŸ¥é“å¦‚ä½•è´­ä¹°å’Œé…ç½®ä¸€ä¸ªVPSï¼Œä½ å¯ä»¥æŸ¥çœ‹è¿™ä¸ª<a class="ae kc" href="https://www.youtube.com/watch?v=goToXTC96Co&amp;ab_channel=CoreySchafer" rel="noopener ugc nofollow" target="_blank">è§†é¢‘</a>ã€‚æ­¤å¤–ï¼Œå¦‚æœæ‚¨ä¸ç†Ÿæ‚‰åˆ›å»ºFlaskåº”ç”¨ç¨‹åºï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹æ­¤<a class="ae kc" href="https://flask.palletsprojects.com/en/1.1.x/quickstart/" rel="noopener ugc nofollow" target="_blank">æ–‡æ¡£</a>ã€‚</p><p id="a6c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ä»¬å¼€å§‹å§ï¼</p><h1 id="a1c6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">æœ¬åœ°æœºå™¨:</h1><p id="868e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">åœ¨æˆ‘çš„æœ¬åœ°æœºå™¨ä¸Šï¼Œæˆ‘æœ‰ä¸€ä¸ªFlaskåº”ç”¨ç¨‹åºï¼Œæˆ‘æƒ³æŠŠå®ƒéƒ¨ç½²åœ¨æˆ‘çš„è¿œç¨‹VPSä¸Šï¼Œ(å®é™…ä¸Šæˆ‘æœ‰ä¸¤ä¸ªåº”ç”¨ç¨‹åºï¼Œä½†æ˜¯ç°åœ¨è®©æˆ‘ä»¬åªå…³æ³¨ä¸€ä¸ªåº”ç”¨ç¨‹åº)ã€‚</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi me"><img src="../Images/61855652fc9985873b487fcb43bbb44b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*rkR9x9vKTXV866Ntxh1ZQA.jpeg"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">å›¾ç‰‡æ¥è‡ªmemegenerator.net</p></figure><p id="f2c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘çš„åº”ç”¨ç¨‹åºä½äºä¸€ä¸ªåä¸º<em class="mj">â€œchatbotâ€</em>çš„ç›®å½•ä¸‹ï¼Œå…¶ä¸­åŒ…å«äº†ä¸»Flask appæ–‡ä»¶<em class="mj"> (app.py) </em>ï¼Œæˆ‘çš„è™šæ‹Ÿç¯å¢ƒ<em class="mj"> (chatvenv) </em>ï¼Œä»¥åŠä¸€äº›å¸®åŠ©æ–‡ä»¶ã€‚å› æ­¤ï¼Œåœ¨æˆ‘çš„æœ¬åœ°æœºå™¨ä¸Šï¼Œæˆ‘ä½¿ç”¨<code class="fe mk ml mm mn b">scp</code>å‘½ä»¤å°†æˆ‘é¡¹ç›®çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šã€‚</p><p id="c3ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ scp -r Desktop/chatbot ubuntu@IP_ADDRESS:~/</code></p><p id="4844" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">âš ï¸è¯·è®°ä½ï¼Œæ ¹æ®æ‚¨çš„æœåŠ¡å™¨é…ç½®ï¼Œå¯èƒ½ä¼šè¦æ±‚æ‚¨æä¾›å¯†ç ã€‚æ­¤å¤–ï¼Œè¯·ç¡®ä¿æ‚¨æ›´æ”¹äº†æœ¬åœ°è·¯å¾„ï¼Œä»¥åŠè¿œç¨‹æœåŠ¡å™¨çš„ç”¨æˆ·åå’ŒIPåœ°å€ï¼</p><h1 id="9ff2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">è™šæ‹Ÿä¸“ç”¨æœåŠ¡å™¨</h1><p id="397a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">è®©æˆ‘ä»¬ç°åœ¨è¿æ¥åˆ°æˆ‘ä»¬çš„å‰¯æ€»è£ï¼Œä»¥ä¾¿åšè‚®è„çš„å·¥ä½œ</p><p id="34cd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ ssh ubuntu@IP_ADDRESS</code></p><p id="c31a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»åœ¨æœåŠ¡å™¨ä¸Šäº†ï¼Œè®©æˆ‘ä»¬å®‰è£…pythonå’Œè™šæ‹Ÿç¯å¢ƒåŒ…ã€‚ç„¶åï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒã€‚</p><p id="8f2e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">~$ sudo apt install python3-pip</code></p><p id="55e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">~$ sudo apt install python3-venv</code></p><p id="8627" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ python3 -m venv chatvenv</code></p><p id="65c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸‹é¢æ˜¯æˆ‘ä»¬ç›®å½•æ ‘ç»“æ„çš„æ¦‚è¿°:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/a95e5408c5bb8da513fdbfd0bdce0d2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IXlQLW9H03sBh8Nf.png"/></div></div></figure><p id="7cfe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ:</p><p id="30ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ source chatvenv/bin/activate</code></p><p id="a14f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¦‚æœæ‚¨å·²ç»æœ‰äº†ä¸€ä¸ª<em class="mj"> requirements.txt </em>æ–‡ä»¶ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥ç®€å•åœ°ä½¿ç”¨ä¸‹é¢è¿™ä¸ªä¸è¨€è‡ªæ˜çš„å‘½ä»¤æ¥å®‰è£…æ‚¨é¡¹ç›®çš„éœ€æ±‚ã€‚ç›¸åï¼Œæ‚¨å¿…é¡»æ‰‹åŠ¨å®‰è£…æ‚¨çš„åº”ç”¨ç¨‹åºæ‰€ä¾èµ–çš„åŒ…ã€‚</p><p id="2e93" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">(chatvenv)$ pip install -r requirements.txt</code></p><p id="2a3b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¹‹åï¼Œå°è¯•æ‰§è¡Œä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤æ¥è¿è¡Œæ‚¨çš„åº”ç”¨ç¨‹åºã€‚</p><p id="a1ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">(chatvenv)$ export FLASK_APP=app.py</code></p><p id="e051" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">(chatvenv)$ flask run --host=0.0.0.0</code></p><p id="6889" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æœ€åï¼Œæ‚¨å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®æ‚¨çš„åº”ç”¨ç¨‹åºæ¥æ£€æŸ¥ä¸€åˆ‡æ˜¯å¦æ­£å¸¸:<code class="fe mk ml mm mn b"><a class="ae kc" href="http://IP_ADDRESS:5000/" rel="noopener ugc nofollow" target="_blank">http://IP_ADDRESS:5000/</a></code></p><h1 id="82f2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Nginxå’ŒGunicorn</h1><p id="daee" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">è™½ç„¶åˆ°ç›®å‰ä¸ºæ­¢ä½ å¯¹ä½ çš„å·¥ä½œå¾ˆæ»¡æ„ï¼Œä½†æ˜¯æˆ‘ä»¬çš„æ–¹æ³•æœ‰ä¸¤ä¸ªé—®é¢˜ã€‚é¦–å…ˆï¼Œæ­£å¦‚æ‚¨åœ¨ç»ˆç«¯ä¸­çœ‹åˆ°çš„ï¼ŒFlaskè¿è¡Œåœ¨å¼€å‘æ¨¡å¼ä¸‹ã€‚ç¬¬äºŒï¼Œåº”ç”¨ç¨‹åºåœ¨å‰å°è¿è¡Œï¼Œå¦‚æœæˆ‘ä»¬ç‚¹å‡»<code class="fe mk ml mm mn b">^C</code>æ¥å–å›æˆ‘ä»¬çš„ç»ˆç«¯ï¼Œåº”ç”¨ç¨‹åºå°†ä¸å†å¯è¾¾ã€‚</p><p id="b0e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªwebæœåŠ¡å™¨(<em class="mj"> Nginx </em>)ã€ä¸€ä¸ªWebæœåŠ¡å™¨ç½‘å…³æ¥å£(<em class="mj"> Gunicorn </em>)ï¼Œå¹¶å°†æˆ‘ä»¬çš„æ‰§è¡Œå¦–é­”åŒ–ï¼Œä»¥ä¾¿åº”ç”¨ç¨‹åºå°†åœ¨åå°è¿è¡Œã€‚</p><p id="2799" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è®©æˆ‘ä»¬é¦–å…ˆåœ¨æˆ‘ä»¬çš„è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…<em class="mj"> Nginx </em>å’Œ<em class="mj"> Gunicorn </em></p><p id="7d48" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">(chatvenv)$ sudo apt install nginx</code></p><p id="e330" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">(chatvenv)$ pip install gunicorn</code></p><p id="ea56" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ç°åœ¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å°†<code class="fe mk ml mm mn b">http://IP_ADDRESS:5000</code>å’Œæ‚¨çš„Pythoné€»è¾‘ç»‘å®šåœ¨ä¸€èµ·</p><p id="49d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">(chatvenv)$ cd ~/chatbot</code></p><p id="a70e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">(chatvenv)$ gunicorn --bind 0.0.0.0:5000 app:app</code></p><p id="0b78" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ç„¶ååœ¨<code class="fe mk ml mm mn b"><a class="ae kc" href="http://ip_address:5000" rel="noopener ugc nofollow" target="_blank">http://IP_ADDRESS:5000</a></code>æŸ¥çœ‹ä½ çš„åº”ç”¨</p><p id="9c06" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">âš ï¸æ³¨æ„ï¼Œåœ¨æœ€åä¸€ä¸ªå‘½ä»¤ä¸­ï¼Œç¬¬ä¸€ä¸ª<em class="mj"> app </em>æŒ‡çš„æ˜¯flask appæ–‡ä»¶çš„åç§°ï¼Œè€Œç¬¬äºŒä¸ª<em class="mj"> app </em>æŒ‡çš„æ˜¯æ‚¨åœ¨è¯¥æ–‡ä»¶ä¸­ç”¨æ¥åˆ›å»ºåº”ç”¨ç¨‹åºçš„åç§°:<code class="fe mk ml mm mn b">app = Flask(__name__)</code></p><p id="d081" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ç°åœ¨æ˜¯æ—¶å€™è®©Ubuntuçš„<em class="mj"> init </em>ç³»ç»Ÿåœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨Gunicornå¹¶ä¸ºFlaskåº”ç”¨æä¾›æœåŠ¡äº†ã€‚</p><p id="3212" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">é¦–å…ˆï¼Œè®©æˆ‘ä»¬é€€å‡ºè™šæ‹Ÿç¯å¢ƒã€‚</p><p id="85bf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">(chatvenv)$ deactivate</code></p><p id="92a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ç„¶åï¼Œç”¨ä¸‹é¢çš„ä»£ç åˆ›å»ºä¸€ä¸ªé¡¹ç›®åä¸º<em class="mj">â€œchatbotâ€</em>çš„æœåŠ¡æ–‡ä»¶ã€‚åˆ«å¿˜äº†æ›´æ”¹ç”¨æˆ·å(<em class="mj"> ubuntu </em>)ã€é¡¹ç›®å(<em class="mj"> chatbot </em>)å’Œè™šæ‹Ÿç¯å¢ƒå(<em class="mj"> chatvenv </em>)ã€‚</p><p id="adb9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ sudo nano /etc/systemd/system/chatbot.service</code></p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="735a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">[Unit]</code><br/><code class="fe mk ml mm mn b">Description=Gunicorn instance to serve <strong class="kf ir">chatbot</strong></code><br/>T3ã€‘</p><p id="e305" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">[Service]</code><br/><code class="fe mk ml mm mn b">User=<strong class="kf ir">ubuntu</strong></code><br/><code class="fe mk ml mm mn b">Group=www-data</code><br/><code class="fe mk ml mm mn b">WorkingDirectory=/home/<strong class="kf ir">ubuntu</strong>/<strong class="kf ir">chatbot</strong></code><br/><code class="fe mk ml mm mn b">Environment="PATH=/home/<strong class="kf ir">ubuntu</strong>/<strong class="kf ir">chatbot</strong>/<strong class="kf ir">chatvenv</strong>/bin"</code><br/><code class="fe mk ml mm mn b">ExecStart=/home/<strong class="kf ir">ubuntu</strong>/<strong class="kf ir">chatbot</strong>/<strong class="kf ir">chatvenv</strong>/bin/gunicorn --workers 3 --bind unix:<strong class="kf ir">chatbot</strong>.sock -m 007 <strong class="kf ir">app:app</strong></code></p><p id="f56b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">[Install]</code> <br/> <code class="fe mk ml mm mn b">WantedBy=multi-user.target</code></p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="a32c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ç„¶åå¯åŠ¨ã€å¯ç”¨å¹¶æµ‹è¯•GunicornæœåŠ¡:</p><p id="cd2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ sudo systemctl start chatbot</code></p><p id="88a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ sudo systemctl enable chatbot</code></p><p id="f5a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ sudo systemctl status chatbot</code></p><p id="c0fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ï¼Œæˆ‘ä¸ä¼šåœ¨è¿™é‡Œè§£é‡Šæ¯ä¸€è¡Œä»£ç ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æœ‰å…´è¶£äº†è§£æ›´å¤šï¼ŒæŸ¥çœ‹è¿™ç¯‡<a class="ae kc" href="https://www.digitalocean.com/community/tutorials/how-to-serve-flask-applications-with-gunicorn-and-nginx-on-ubuntu-18-04" rel="noopener ugc nofollow" target="_blank">åšå®¢æ–‡ç« </a>äº†è§£æ›´å¤šç»†èŠ‚ã€‚</p><h1 id="9d86" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">å°†Nginxé…ç½®ä¸ºä»£ç†è¯·æ±‚</h1><p id="ff2e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶æ¥é…ç½®Nginxä¼ é€’webè¯·æ±‚ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ç«™ç‚¹å¯ç”¨ç›®å½•ä¸­åˆ›å»º<em class="mj">èŠå¤©æœºå™¨äºº</em>æ–‡ä»¶ï¼Œç„¶åå°†å®ƒé“¾æ¥åˆ°å¯ç”¨äº†ç«™ç‚¹çš„ç›®å½•ã€‚</p><p id="caf3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å½“ä½ å¤åˆ¶/ç²˜è´´è¿™æ®µä»£ç æ—¶ï¼Œå†æ¬¡ä»”ç»†æ£€æŸ¥åå­—ï¼›å¦åˆ™ä½ ä¼šé‡åˆ°ä¸€äº›éº»çƒ¦ï¼Œå¾ˆæ˜æ˜¾ï¼</p><p id="395c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ sudo nano /etc/nginx/sites-available/chatbot</code></p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="9577" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">server {</code> <br/> <code class="fe mk ml mm mn b"> listen 80;</code> <br/> <code class="fe mk ml mm mn b"> server_name <strong class="kf ir">IP_ADDRESS</strong>;</code></p><p id="7ea1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">location / {</code><br/><code class="fe mk ml mm mn b"> include proxy_params;</code><br/><code class="fe mk ml mm mn b"> proxy_pass http://unix:/home/<strong class="kf ir">ubuntu</strong>/<strong class="kf ir">chatbot</strong>/<strong class="kf ir">chatbot</strong>.sock;</code><br/><code class="fe mk ml mm mn b"> }</code><br/><code class="fe mk ml mm mn b">}</code></p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="2426" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ sudo ln -s /etc/nginx/sites-available/chatbot /etc/nginx/sites-enabled</code></p><p id="a306" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿è¡Œä»¥ä¸‹å‘½ä»¤æ£€æŸ¥è¯­æ³•é”™è¯¯</p><p id="968f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ sudo nginx -t</code></p><p id="640a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œé‡å¯NginxæœåŠ¡å™¨ï¼›ç„¶åé…ç½®é˜²ç«å¢™ï¼Œå…è®¸å®Œå…¨è®¿é—®NginxæœåŠ¡å™¨:</p><p id="7830" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ sudo systemctl restart nginx</code></p><p id="0010" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ sudo ufw allow 'Nginx Full'</code></p><p id="520c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æœ€åï¼Œä½ å¯ä»¥åœ¨<code class="fe mk ml mm mn b"><a class="ae kc" href="http://ip_address:5000" rel="noopener ugc nofollow" target="_blank">http://IP_ADDRESS</a></code>æŸ¥çœ‹ä½ çš„åº”ç”¨ã€‚æ­å–œä½ ï¼ç°åœ¨å¯ä»¥è‡ªè±ªåœ°è¯´ï¼Œä½ çŸ¥é“å¦‚ä½•ä½¿ç”¨Nginxå’ŒGunicornéƒ¨ç½²Flaskåº”ç”¨ç¨‹åºğŸ˜…ã€‚</p><h1 id="6694" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">æ·»åŠ å¦ä¸€ä¸ªçƒ§ç“¶åº”ç”¨ç¨‹åº</h1><p id="618d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">å³ä½¿æˆ‘ä»¬é€€å‡ºVPSç¯å¢ƒå¹¶å…³é—­æœ¬åœ°æœºå™¨ï¼Œæˆ‘ä»¬çš„Flaskåº”ç”¨ç¨‹åºç°åœ¨ä¹Ÿåœ¨ä¸Šè¿°åœ°å€å¯åŠ¨å¹¶è¿è¡Œã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†åšä¸€äº›æ›´æ”¹ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨åŒä¸€å°æœåŠ¡å™¨ä¸ŠåŒæ—¶è¿è¡Œå¤šä¸ªåº”ç”¨ç¨‹åºã€‚</p><p id="ad0a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">é¦–å…ˆï¼Œè®©æˆ‘ä»¬å°†ç¬¬äºŒä¸ªFlaskåº”ç”¨ç¨‹åºç§»åŠ¨åˆ°VPSã€‚ç„¶åï¼Œæ­£å¦‚æˆ‘ä»¬ä¹‹å‰æ‰€åšçš„ï¼Œæˆ‘ä»¬å¼€å§‹åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒ(<em class="mj"> betavenv </em>)å¹¶å®‰è£…æ‚¨çš„é¡¹ç›®çš„ä»»ä½•éœ€æ±‚ã€‚å› æ­¤ï¼Œæ–‡ä»¶å¤¹æ ‘çš„æ–°ç»“æ„ç°åœ¨çœ‹èµ·æ¥åƒè¿™æ ·:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/afd200eef12d4eab824b7270e4859478.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7lXTKXBt0_uLZHUx.png"/></div></div></figure><p id="b8fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å…¶æ¬¡ï¼Œæˆ‘ä»¬ç”¨æ–°é¡¹ç›®çš„åç§°<em class="mj">â€œbeta PPâ€</em>åˆ›å»ºå¦ä¸€ä¸ªæœåŠ¡æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ã€‚å†æ¥ä¸€æ¬¡:åˆ«å¿˜äº†æ›´æ”¹ç”¨æˆ·å(<em class="mj"> ubuntu </em>)ã€é¡¹ç›®å(<em class="mj"> betapp </em>)ã€è™šæ‹Ÿç¯å¢ƒå(<em class="mj"> betavenv </em>)ï¼</p><p id="5e50" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ sudo nano /etc/systemd/system/betapp.service</code></p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="f1f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">[Unit]<br/>Description = guni corn instance to serve<strong class="kf ir">beta PP</strong><br/>After = network . target</p><p id="9e43" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ã€æœåŠ¡ã€‘<br/>User =<strong class="kf ir">Ubuntu</strong><br/>Group = www-data<br/>working directory =/home/<strong class="kf ir">Ubuntu</strong>/<strong class="kf ir">beta PP</strong><br/>Environment = " PATH =/home/<strong class="kf ir">Ubuntu</strong>/<strong class="kf ir">beta PP</strong>/<strong class="kf ir">beta venv</strong>/binã€‘<br/>ExecStart =/home/<strong class="kf ir">ubsock-m 007<strong class="kf ir">beta run</strong>:<strong class="kf ir">app</strong></strong></p><p id="d004" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">[å®‰è£…]<br/>wanted by = multi-user . target</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="2baa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ç„¶åå¯åŠ¨å¹¶å¯ç”¨GunicornæœåŠ¡:</p><p id="eace" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ sudo systemctl start betapp</code></p><p id="43c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ sudo systemctl enable betapp</code></p><p id="e9ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å°±åƒç¬¬ä¸€ä¸ªé¡¹ç›®ä¸€æ ·ï¼Œæˆ‘ä»¬å°†é…ç½®Nginxæ¥ä¼ é€’webè¯·æ±‚ï¼Œé¦–å…ˆï¼Œåœ¨ç«™ç‚¹å¯ç”¨ç›®å½•ä¸­åˆ›å»º<em class="mj"> app2 </em>æ–‡ä»¶ï¼Œç„¶åå°†å®ƒé“¾æ¥åˆ°å¯ç”¨äº†ç«™ç‚¹çš„ç›®å½•ã€‚ä½†æ˜¯ï¼Œä¸ºäº†è®©æˆ‘ä»¬çš„æ–°åº”ç”¨ç¨‹åºæ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬åº”è¯¥é€‰æ‹©80ä»¥å¤–çš„å¦ä¸€ä¸ªç«¯å£(è¿™é‡Œæ˜¯5000)ã€‚</p><p id="2652" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ sudo nano /etc/nginx/sites-available/app2</code></p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="6fe8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æœåŠ¡å™¨{ <br/>ç›‘å¬<strong class="kf ir">5000</strong>ï¼›<br/>æœåŠ¡å™¨åç§°<strong class="kf ir"> IPåœ°å€</strong>ï¼›</p><p id="6d17" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">location / { <br/>åŒ…å«proxy _ params<br/>proxy _ pass<a class="ae kc" href="http://unix:/home/ubuntu/betapp/betapp.sock;" rel="noopener ugc nofollow" target="_blank">http://UNIX:/home/<strong class="kf ir">Ubuntu</strong>/<strong class="kf ir">beta PP</strong>/<strong class="kf ir">beta PP</strong>ã€‚è¢œå­ï¼›</a> <br/> } <br/></p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="0d86" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ sudo ln -s /etc/nginx/sites-available/app2 /etc/nginx/sites-enabled</code></p><p id="153a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ£€æŸ¥è¯­æ³•é”™è¯¯:</p><p id="256c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ sudo nginx -t</code></p><p id="021e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">é‡å¯NginxæœåŠ¡å™¨ï¼Œåœ¨<code class="fe mk ml mm mn b"> <a class="ae kc" href="http://ip_address:5000/" rel="noopener ugc nofollow" target="_blank">http://IP_ADDRESS</a></code>å’Œ<code class="fe mk ml mm mn b"><a class="ae kc" href="http://ip_address:5000/" rel="noopener ugc nofollow" target="_blank">http://IP_ADDRESS:5000</a></code>è®¿é—®ä½ çš„ä¸¤ä¸ªåº”ç”¨</p><p id="04dc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">$ sudo systemctl restart nginx</code></p><h1 id="7253" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">ç»“è®º</h1><p id="7102" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Flask APIsæ˜¯å°†ä½ è®­ç»ƒè¿‡çš„<em class="mj">æœºå™¨å­¦ä¹ </em>æ¨¡å‹æŠ•å…¥<em class="mj">ç”Ÿäº§</em><a class="ae kc" rel="noopener" target="_blank" href="/a-guide-to-building-whatsapp-chatbots-using-dialogflow-and-firebase-4ff5e904ac3"/><a class="ae kc" rel="noopener" target="_blank" href="/machine-learning-in-production-keras-flask-docker-and-heroku-933b5f885459">ã€2ã€‘</a>çš„ä¼˜ç§€å·¥å…·ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨Nginxå’ŒGunicornéƒ¨ç½²Flaskåº”ç”¨ç¨‹åºçš„è¿‡ç¨‹ã€‚</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="5d7f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mj">åŸè½½äº2021å¹´7æœˆ3æ—¥https://aienthusiasts.com</em><a class="ae kc" href="https://aienthusiasts.com/deploy-multiple-flask-applications/" rel="noopener ugc nofollow" target="_blank"><em class="mj"/></a><em class="mj">ã€‚</em></p></div></div>    
</body>
</html>