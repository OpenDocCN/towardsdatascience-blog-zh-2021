<html>
<head>
<title>Emojis in Your Data 🤓</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据中的表情符号🤓</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/emojis-in-your-data-9a5513ead2dd?source=collection_archive---------20-----------------------#2021-10-05">https://towardsdatascience.com/emojis-in-your-data-9a5513ead2dd?source=collection_archive---------20-----------------------#2021-10-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="24f7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你需要知道的关于你的数据库或数据集中的表情符号的一切。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8cce51a845c26c481bdf3283a81ece01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aOk47W6fHud-U446lQAhIg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由作者创建的标题</p></figure><p id="05f0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们面对现实吧，现在是2021年，表情符号是不可避免的。从聊天到产品评论，有时甚至是用户名，你都可以看到它。今天我们将回答一些问题:</p><ul class=""><li id="c87e" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><a class="ae ma" href="#8cec" rel="noopener ugc nofollow">什么是表情符号</a></li><li id="5f44" class="lr ls iq kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated"><a class="ae ma" href="#c150" rel="noopener ugc nofollow">表情符号是如何存储在数据库中的</a></li><li id="9f10" class="lr ls iq kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated"><a class="ae ma" href="#8f39" rel="noopener ugc nofollow">在我的数据集或数据库中保留表情符号有多重要</a></li><li id="5a75" class="lr ls iq kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated"><a class="ae ma" href="#55df" rel="noopener ugc nofollow">接下来是什么🤷</a></li></ul><h1 id="8cec" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">什么是表情符号</h1><p id="2d8c" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">每个人都知道表情符号是什么，但它们到底是什么？它们是图像还是字体，为什么不同的系统会以不同的方式显示同一个笑的表情符号？对于初学者来说，表情符号是一个<a class="ae ma" href="https://en.wikipedia.org/wiki/Glyph" rel="noopener ugc nofollow" target="_blank">字形</a>，把它当成一个字体。在每个笑脸的背后，表情符号是一个十六进制代码点。</p><p id="adee" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">拿🤓“书呆子脸”表情符号为例，其十六进制码位(用<em class="nd"> U+ </em>表示)为<em class="nd"> U+1F913 </em>如<a class="ae ma" href="https://emojipedia.org/nerd-face/" rel="noopener ugc nofollow" target="_blank">表情百科</a>所列。每个代码点都引用一个被普遍理解的叫做Unicode的字典上的东西。如果字典里有这个词，你会得到它的定义。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/daa8ecaaa28a871d69bfd7012668b7d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*hWgaoGWQtXq9AWQeaGvECQ.png"/></div></figure><p id="c565" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你试着在英语词典中查找一个中文单词，你将得不到那个单词的定义。这个概念适用于Unicode在您的系统上的工作方式。如果您的系统不包含代码点的标志符号，它将无法显示🤓。就像你对来自剑桥或牛津的同一个英语单词有不同的定义一样，不同的系统也有它们自己的字形设计，而不会偏离原意。</p><h1 id="c150" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">表情符号是如何存储在数据库中的</h1><p id="234d" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">现在你知道表情符号是如何由计算机系统表示的，我们如何存储或如何存储到数据库中？我们知道表情符号只是十六进制代码点，我们是否需要有一个特殊的Unicode列类型，或者我们是否将它存储为字符串并在以后解析为表情符号？</p><p id="8a6d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在大多数数据库中，你可以通知引擎这个特殊的字符块应该被存储为Unicode而不是字符串，这个过程叫做<em class="nd"> \escape </em>。下面是几个在数据库中转义和存储表情符号的例子。不同的数据库在存储转义字符方面有稍微不同的要求，所以一定要仔细阅读每个关于转义的数据库文档。</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="3fd5" class="nk mh iq ng b gy nl nm l nn no">-- POSTGRES<br/>SELECT ('\+01F913'), (U&amp;'\+01F913'), (U&amp;'\d83e\dd13')</span><span id="2704" class="nk mh iq ng b gy np nm l nn no">-- POSTGRES RESULT: "\+01F913", "🤓", 🤓"</span><span id="c9fe" class="nk mh iq ng b gy np nm l nn no"><br/>-- BIG QUERY<br/>SELECT ('\U0001F913')</span><span id="0d94" class="nk mh iq ng b gy np nm l nn no">-- BIG QUERY RESULT: "🤓"</span></pre><p id="09e5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如Postgres示例所示，第一列按字面意义存储为字符串' \+01F913 '。通过使用<em class="nd">U&amp;T1】作为第二列进行转义，数据库现在明白了这个字符块不是一个常规字符串，而应该理解为一个十六进制序列。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/cccd4e87d94ab27bc254b4a359c1f82b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yfs-n09SDwKHyy4wIOa9Wg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="7f04" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注意我们在1F913前面加了一个0，这是因为这里的<a class="ae ma" href="https://www.postgresql.org/docs/9.3/sql-syntax-lexical.html" rel="noopener ugc nofollow" target="_blank"> Postgres文档</a>规定Unicode转义需要“<em class="nd">一个反斜杠，后跟一个加号，再后跟一个六位数的十六进制码位号</em>”。我们的原始代码点只有5位数字，因此我们必须在不改变含义的情况下，对代码点进行零填充，使其成为6位数字。第三列是代码单元代理对的示例。代码单元的代理项对构成一个代码点。正如在同一Postgres文档中提到的，代理对(16位+16位)的存在是为了组成大于U+FFFF (16位)的码位。</p><p id="aec3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">f(十六进制)= 1111(二进制)= 4位<br/> FFFF = 1111 1111 1111 1111 = 16位</p><p id="8650" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这使得可用的代码点数量增加到了一百万以上。然而，这是我们最不关心的，因为Postgres会在存储它之前将代理对组合成一个代码点。最后一列基本上只是以字节存储十六进制代码。</p><p id="8e28" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">BigQuery也是如此，在他们的文档中<a class="ae ma" href="https://cloud.google.com/bigquery/docs/reference/standard-sql/lexical#string_and_bytes_literals" rel="noopener ugc nofollow" target="_blank">这里</a>，他们指出他们的Unicode转义需要<em class="nd"> 8位数字</em>。因此，如上例所示，我们将对Unicode进行零填充。</p><h1 id="8f39" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">在我的数据集或数据库中保留表情符号有多重要</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/f19fd7bae76296b04aacfefdb5638610.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*6t3Vu1QdVBlhFEDVsRgsxg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="8561" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">两份非常相似的英文文本，但在表达方式上却大相径庭。随着这种趋势的继续，表情符号越来越成为表达情感的方式，NLP模型和数据集应该适应存储和处理这种信息。新的表情符号不断增加，随着变体或肤色的引入，复杂性也增加了。适应每一个表情符号可能并不容易，但是值得注意的是<a class="ae ma" href="https://home.unicode.org/emoji/emoji-frequency/" rel="noopener ugc nofollow" target="_blank">unicode.org</a>有一个表情符号频率列表，可以帮助我们了解我们应该注意的少数表情符号。</p><p id="346e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">毫无疑问，在数据库中存储表情符号已经成为一种常见的做法，而且应该如此。谷歌有一份白皮书，可以在这里找到<a class="ae ma" href="https://cloud.google.com/solutions/modern-password-security-for-system-designers.pdf" rel="noopener ugc nofollow" target="_blank"/>该白皮书指出，启用包括表情符号在内的最大可用字符集是存储用户密码的良好做法之一。大多数在线购物平台上的产品名称和描述也包含表情符号，我们绝对不希望在用户保存表情符号或在你为自己的商业案例进行推理时将它们删除。</p><h1 id="55df" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">下一步是什么🤷</h1><p id="33f4" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">表情符号将会一直存在，这取决于开发者如何管理这些额外的信息，也取决于数据从业者如何理解这些信息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/9eb7552bd9839bb1d3f18b4b76176678.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*ajsEN_lrLUy1LlMs28z--Q.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片取自作者的电报信息</p></figure><p id="e55e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">表情符号已经成为我们日常对话中不可或缺的一部分，在某些情况下，它还是问题的答案。管理这些信息，无论是用相关的英文单词替换表情符号，还是将其编码为另一个符号，都是值得考虑的事情。</p><p id="31f1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以下是一些很酷的工具，可能会帮助您更好地理解Unicode(排名不分先后):</p><p id="8622" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae ma" href="http://www.ltg.ed.ac.uk/~richard/utf-8.cgi?input=1F913&amp;mode=hex" rel="noopener ugc nofollow" target="_blank"> Unicode到十六进制转换器</a></p><p id="767f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae ma" href="https://r12a.github.io/app-conversion/" rel="noopener ugc nofollow" target="_blank"> Unicode代码转换器</a></p><p id="a944" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae ma" href="https://apps.timwhitlock.info/emoji/tables/unicode" rel="noopener ugc nofollow" target="_blank"> Unicode及其字节表</a></p><p id="6fa1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae ma" href="https://emojipedia.org/" rel="noopener ugc nofollow" target="_blank">表情百科</a></p><p id="6475" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae ma" href="https://home.unicode.org/" rel="noopener ugc nofollow" target="_blank">unicode.org</a></p><p id="62e0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae ma" href="https://datacadamia.com/data/type/text/surrogate" rel="noopener ugc nofollow" target="_blank"> Unicode代理对理解和计算器</a></p></div></div>    
</body>
</html>