<html>
<head>
<title>A GIS Pipeline for LIDAR Point Cloud Feature Extraction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于激光雷达点云特征提取的GIS管道</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-gis-pipeline-for-lidar-point-cloud-feature-extraction-8cd1c686468a?source=collection_archive---------5-----------------------#2021-08-31">https://towardsdatascience.com/a-gis-pipeline-for-lidar-point-cloud-feature-extraction-8cd1c686468a?source=collection_archive---------5-----------------------#2021-08-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7d96" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何从激光雷达点云中自动提取特征</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d463f855048fbb85eff914153eabe684.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iuS-9dR8_rQupTqiCJbG6g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用DBSCAN无监督的基于密度的机器学习模型“Image by Author”对点云数据点进行分类</p></figure><p id="407c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本文中，我将带您以自动化的方式从激光雷达点云中提取要素。</p><p id="55cf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">激光雷达点云数据是描述表面或对象的点的集合。每个点都用x、y、z坐标描述，在某些情况下还与附加属性相关联，例如点的分类。</p><p id="da77" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">激光雷达数据用于精确提取地理参考矢量要素，如建筑物、道路、树木。认识到如[1]中有两个主要步骤:</p><ol class=""><li id="d5b6" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><strong class="kx ir">分类</strong>:给点云数据集中的每个点分配一个类。如果有足够的训练数据，一种方法是使用PointCNN神经网络。输出是每个数据点的一个类。</li><li id="a3f6" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx ir"> GIS管道</strong>:从分类后的点云数据中提取有用格式的相关特征。除了提取之外，生成所提取特征的属性信息，例如物体高度、物体表面积、质心纬度/经度、与其他特征的接近度(例如..g离最近的路有多远)，等等。</li></ol><p id="e2a9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">本文将扩展第(2)点，重点关注<strong class="kx ir">自动GIS特征提取</strong>，假设数据已经分类，并且每个数据点都被分配了一个类别。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="4180" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">数据和预处理</h1><p id="fa80" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">本节将深入研究数据采集、预处理和目视检查。在开始科学或开发工作之前，这通常是重要的一步。</p><h2 id="2bc7" class="nj mn iq bd mo nk nl dn ms nm nn dp mw le no np my li nq nr na lm ns nt nc nu bi translated"><strong class="ak"> 1。数据下载和转换</strong></h2><p id="348d" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">有许多服务提供激光雷达数据下载。为了配合本教程进行样本数据采集，我们将从[3]下载一个激光雷达数据集。使用地理空间数据时，了解数据集的空间参考系统始终非常重要。此切片的空间参考系统是EPSG:7415 [4]。根据维基百科，空间参考系统的定义是</p><blockquote class="nv nw nx"><p id="0624" class="kv kw ny kx b ky kz jr la lb lc ju ld nz lf lg lh oa lj lk ll ob ln lo lp lq ij bi translated">空间参考系统或坐标参考系统是用于定位地理实体的基于坐标的本地、区域或全球系统</p></blockquote><p id="edad" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下载数据的服务器不是很快，所以下载可能需要一些时间。</p><blockquote class="nv nw nx"><p id="8f51" class="kv kw ny kx b ky kz jr la lb lc ju ld nz lf lg lh oa lj lk ll ob ln lo lp lq ij bi translated">我花了几个小时下载数据集，所以在这一节的最后，我将分享一个从我的google drive下载预处理版本的链接。</p></blockquote><p id="992b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下载的文件是<strong class="kx ir"> Laz </strong>格式</p><blockquote class="nv nw nx"><p id="78a4" class="kv kw ny kx b ky kz jr la lb lc ju ld nz lf lg lh oa lj lk ll ob ln lo lp lq ij bi translated">LAZ格式是激光雷达数据的无损压缩。</p></blockquote><p id="24e9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它可以将原始Las文件压缩到其大小的7%到25%。速度是每秒一百万到三百万点[5]。</p><p id="9f5f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下载的文件大小为2.2 GB。解压缩LAZ文件到原来的Las的一个选择是使用pylas。提取的Las文件为13 GB。令人印象深刻的压缩比！下面是如何使用pylas python包在python中将LAZ文件解压缩为LAS文件。</p><pre class="kg kh ki kj gt oc od oe of aw og bi"><span id="f33a" class="nj mn iq od b gy oh oi l oj ok">#!pip install pylas[lazrs,laszip]<br/>input_laz_path = ‘data/C_37EZ2.laz’<br/>output_las_path = ‘data/C_37EZ2.las’<br/>laz = pylas.read(input_laz_path)<br/>las = pylas.convert(laz)<br/>las.write(output_las_path)</span></pre></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h2 id="0e51" class="nj mn iq bd mo nk nl dn ms nm nn dp mw le no np my li nq nr na lm ns nt nc nu bi translated">2.点云目视检查</h2><p id="a9e7" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">从QGIS 3.18开始，QGIS中提供了直接加载和可视化las点云数据的功能。它非常简单，允许数据可视化，叠加卫星图像，并呈现高质量的地图。</p><p id="16df" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们必须手动定义点云文件的CRS(坐标参考系统),以显示在QGIS的查看器窗口中。对于卫星图像叠加，有许多QGIS插件，其中最好的一个是由NEXTGIS开发的快速地图服务，它拥有最著名的底图XYZ URL[6]。我们正在使用的数据集已经对大多数点进行了分类，并且可以使用如下图例进行映射:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/43c40796ccdd612c4e16740e41503079.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*b7PYIoSzcYdCtg6y"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在QGIS“作者提供的图像”中目视检查下载的点云文件</p></figure><p id="0fe8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">仔细观察叠加了卫星图像的分类点云，我们可以看到，并非所有要素都与背景卫星图像中的完全相同。仅捕获地面、建筑物、水对象，没有关于例如树木的道路表面的附加信息。</p><p id="4769" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一个原因可能是点云数据获取的日期(2014年)与叠加背景图的日期(谷歌的2021年)不同。绿色区域也被错误地归类为地面，也许这是一个多雪的冬季？</p><p id="e585" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于POC(概念验证),我们应该将数据大小减少到最小AOI(感兴趣区域)。但是，我们还应该考虑到，当缩放到更大的数据集时，基于最小AOI的输出算法将保证相同的结果。</p><p id="2637" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为此，让我们手动选择一个包含大多数类的AOI，并在屏幕上绘制一个具有相同CRS的多边形，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/a19a5802d25e9580bc8d2928230d867d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y6a-GctJ09oZxuKA"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">用户定义的感兴趣区域，用于在开发过程中减少数据量“按作者排序的图像”</p></figure><p id="28b4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要将激光雷达点云数据裁剪为特定的AOI，有许多工具和库，如LAStools [7] clip或其他python选项，如PDAL。为什么我们需要将激光雷达数据集裁剪成较小的感兴趣区域:</p><ol class=""><li id="1d6f" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">在开发阶段，我们需要尝试许多解决方案，每次在大数据集上运行脚本并等待解决方案验证是一场噩梦</li><li id="ce8b" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">在大多数情况下，开发发生在本地机器上，那里的资源是有限的。那么同样的代码可以在云或者更大的服务器上使用</li><li id="4e70" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">如果数据很小，可以放入内存中，那么直观地检查算法的质量就容易得多。</li></ol><p id="6f68" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">输出较小的感兴趣区域如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/e5f376a0107b66a9d4dd9306cc2c2964.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*__U4Zr3PRG4cU_Wg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">从大型激光雷达数据文件“作者提供的图像”中截取感兴趣区域</p></figure><p id="bf5b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">快速直观调查显示，数据包含三类类别:</p><ol class=""><li id="7752" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">建筑物</li><li id="e65c" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">地面</li><li id="0a00" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">水</li><li id="dad9" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">不保密的</li></ol><p id="d00d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">建筑物的特征似乎表现得很好，并且很容易识别几何形状。水特征看起来不完整，如果我们从这个样本中自动捕获它，可能会导致连线的多边形片段。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/5bcc978ec38f5d333ef2b409ac33857d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8mKGaaTlI35epquy"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">感兴趣区域中分类激光雷达数据点中的每个类可视化“按作者分类的影像”</p></figure><blockquote class="nv nw nx"><p id="e290" class="kv kw ny kx b ky kz jr la lb lc ju ld nz lf lg lh oa lj lk ll ob ln lo lp lq ij bi translated">为了限制此分析的范围，此工作将只关注从分类的激光雷达数据中提取建筑物。</p></blockquote></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="da3f" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">特征抽出</h1><p id="f934" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">根据[1],从激光雷达数据中提取物体有两种技术可以使用，这两种技术中的每一种都可以适用于特定的用例，并且取决于业务需求和验收标准:</p><ol class=""><li id="d1df" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><strong class="kx ir">光栅分析</strong>通过光栅化点云图层，然后将光栅应用于多边形</li><li id="0357" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">使用<strong class="kx ir">无监督机器学习算法DBSCAN </strong>将每个对象分离为一个簇，然后应用边界多边形操作或其他操作来逼近对象的边界。</li></ol><blockquote class="nv nw nx"><p id="0c6f" class="kv kw ny kx b ky kz jr la lb lc ju ld nz lf lg lh oa lj lk ll ob ln lo lp lq ij bi translated">在本报告中，我们将解释并应用这两种技术。</p></blockquote></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h2 id="37ee" class="nj mn iq bd mo nk nl dn ms nm nn dp mw le no np my li nq nr na lm ns nt nc nu bi translated">1.光栅分析</h2><p id="8748" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">要从激光雷达数据点捕捉要素，第一步是将3d矢量点(X，Y，Z)转换为基于格网的栅格表示。此过程称为栅格化，输出栅格将是数字表面模型(DSM)。并且还将包含每个像素中相应的平均点高度。</p><p id="d074" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一个可以做到这一点的图书馆是PDAL[7]。为了向前推进，我们需要指定结果DSM的分辨率。在这种情况下，让我们使用4倍的平均点间距，这是最佳做法，但可能会因使用情形而异。点与点之间的平均间距大约为30厘米(手动在屏幕上测量几次)，然后我们选择像素大小为1.2米。</p><p id="b46b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要在mac上安装PDAL，请使用以下命令:</p><pre class="kg kh ki kj gt oc od oe of aw og bi"><span id="adb2" class="nj mn iq od b gy oh oi l oj ok">brew install pdal<br/>Pip install pdal</span></pre><p id="5515" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">PDAL有一个python API，可用于脚本编写和从python创建数据管道，API实现如下:</p><pre class="kg kh ki kj gt oc od oe of aw og bi"><span id="925b" class="nj mn iq od b gy oh oi l oj ok">pdal_json = {<br/> “pipeline”: [<br/> INPUT_LAS_PATH,<br/> {<br/> “type”: “filters.range”,<br/> “limits”: “Classification[6:6]”<br/> },<br/> {<br/> “filename”: OUTPUT_TIFF_DEM,<br/> “gdaldriver”: “GTiff”,<br/> “output_type”: “all”,<br/> “resolution”: “1.2”,<br/> “type”: “writers.gdal”<br/> }<br/> ]<br/> }<br/> pdal_json_str = json.dumps(pdal_json)<br/> pipeline = pdal.Pipeline(pdal_json_str)<br/> count = pipeline.execute()</span></pre><p id="457b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在上面的代码块中，JSON对象pdal_json存储了所需的管道定义。首先，我们输入las文件路径作为INPUT_LAS_PATH，然后我们指定我们要提取的限制类是6号类，它是building。之后，我们将输出文件名指定为OUTPUT_TIFF_DEM，并指定输出TIFF图像的分辨率。</p><p id="e804" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一旦我们将该定义文档传递给PDAL管道API，它将根据输入开始执行，并从输入列表中输出TIFF文件。非常简单方便。</p><p id="d607" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这将产生如下的GeoTIFF文件，它是一个我们指定的像素大小为1.2米的光栅文件。此外，每个像素包含点云数据中像素的高度。下面的可视化可以使用QGIS和quickmapservices插件为背景卫星图像生成。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/dd41c1da33bf10c4bed6452b31aa6827.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8D-SpTLzSvHurEMS"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用PDAL“作者提供的图像”从点云输出栅格</p></figure><p id="cd83" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下一步是从生成的DEM中提取建筑物覆盖区。有不止一种工具可以做到这一点。例如:</p><ol class=""><li id="a333" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">使用GDAL多边形化实现</li><li id="8c54" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">使用栅格形状</li></ol><p id="c5fb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这两种工具都为栅格中共享一个公共像素值的所有像素连接区域创建矢量面。每个多边形都创建有一个指示该多边形像素值的属性。由于DEM包含作为像素值的像素高度，因此从DEM文件中提取多边形会产生多个具有相同像素值的小多边形。这不是我们要找的。</p><p id="955e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要提取建筑物覆盖区，我们应该将DEM视为二进制tiff文件，其中建筑物像素可以设置为1，并且没有建筑物数据设置为np.nan值。这个预处理步骤然后可以进入另一个rasterio形状提取或<em class="ny"> GDAL多边形化</em>的过程，以提取与一个多边形具有相同值的像素。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/39a0294ebbf85356f4f830f3f7f63c1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S6A6Nvn3T9YHkAhw"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">对激光雷达数据点应用栅格化和GDAL多边形化</p></figure><p id="1d7e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，有了每个多边形的多边形化坐标，我们就可以使用shapely和geopandas创建一个地理数据框架，将每个建筑物作为一个要素。</p><blockquote class="nv nw nx"><p id="daec" class="kv kw ny kx b ky kz jr la lb lc ju ld nz lf lg lh oa lj lk ll ob ln lo lp lq ij bi translated">Shapely和geopandas是python中最著名的地理空间数据处理库。</p></blockquote><p id="3c50" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">请注意，在此步骤中，在保存输出矢量文件之前，特征的CRS应设置为7415。</p><blockquote class="nv nw nx"><p id="ba1b" class="kv kw ny kx b ky kz jr la lb lc ju ld nz lf lg lh oa lj lk ll ob ln lo lp lq ij bi translated">总共提取的特征是感兴趣区域中的<strong class="kx ir"> 155个建筑物</strong></p></blockquote><pre class="kg kh ki kj gt oc od oe of aw og bi"><span id="0a4a" class="nj mn iq od b gy oh oi l oj ok">import rasterio<br/>from rasterio.features import shapes<br/>import numpy as np<br/>from shapely.geometry import Polygon</span><span id="7998" class="nj mn iq od b gy oq oi l oj ok">mask = None<br/>with rasterio.Env():<br/> with rasterio.open(‘SlopeNew.tif’) as src:<br/> image = src.read(1) # first band<br/> results = (<br/> {‘properties’: {‘raster_val’: v}, ‘geometry’: s}<br/> for i, (s, v)<br/> in enumerate(<br/> shapes(image.astype(np.float32), mask=mask, transform=src.transform)))<br/> <br/> geoms = list(results)</span></pre><p id="0a4f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">通过这样做，我们遍历了每个提取的多边形，并将它们全部保存到一个几何列表中。这些几何图形可以在geopandas中读取，并将显示为如下所示的地理数据框架，这样，90%的困难工作就完成了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/0dc21f30051af31fbe9a838fe839b3b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U8_oqUTdFbl3xmaE"/></div></div></figure></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><p id="5fcd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">生成的矢量化建筑物形状如下所示，在本文的后面，我们将应用后处理步骤从这些建筑物中提取有意义的特征，请继续阅读。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/1571110cdfd697b811b7e90a7a218929.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kn1uKFtl1_06H7ub"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来自激光雷达的矢量化建筑物“作者提供的图像”</p></figure></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h2 id="0d5d" class="nj mn iq bd mo nk nl dn ms nm nn dp mw le no np my li nq nr na lm ns nt nc nu bi translated">2.无监督机器学习DBSCAN聚类</h2><p id="63df" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">在上一节中，我们使用栅格分析和多边形化提取了建筑物覆盖区。虽然这种方法工作正常，但它需要将数据转换为完全不同的类型(栅格),这会丢失一些与原始数据点相关的重要值。</p><p id="fd47" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在下面的方法中，我们将使用无监督的机器学习聚类方法来将彼此靠近的所有点聚类为一个聚类，然后从这些点提取建筑物边界。</p><p id="83c7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">激光雷达数据存储在las文件(或压缩的laz文件)中。要应用聚类，让我们首先提取每个点X、Y、Z的坐标以及每个点的相关类，如下所示:</p><pre class="kg kh ki kj gt oc od oe of aw og bi"><span id="8ff9" class="nj mn iq od b gy oh oi l oj ok">def return_xyzc(point):<br/> x = point[0]<br/> y = point[1]<br/> z = point[2]<br/> c = point[5]<br/> return [x, y, z , c]</span><span id="4b84" class="nj mn iq od b gy oq oi l oj ok">pcloud = pylas.read(input_las_path)<br/>points = [return_xyzc(i) for i in pcloud]<br/>building_pts = [point for point in points if point[3] == 6]</span></pre><p id="d394" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">产生的数据格式将是点X，Y，Z，C的数组，其中X是经度，Y是纬度，Z是高程，C是点的类别。感兴趣区域的总数据点为12，333，019。从建筑数据开始，我们只过滤建筑类别，即类别6。这导致总共1，992，715个建筑点</p><pre class="kg kh ki kj gt oc od oe of aw og bi"><span id="f7a4" class="nj mn iq od b gy oh oi l oj ok">[[87972210, 439205417, 699, 6],<br/> [87972259, 439205351, 57, 6],<br/> [87972267, 439205339, 1716, 6],<br/> [87972419, 439205135, -331, 6],<br/> [87972319, 439205284, 1030, 6]]</span></pre><p id="5b14" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后可以在背景地图上显示上述点，以查看建筑物类在2d中的外观，在这种情况下，每个数据点都存储为存储在shapefile中的2d GIS点，高程是一个属性。这不同于以前的las文件数据存储。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/1d9ce425acd3d171561a4c0c2340f75f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*I-ZrLYO__lzfRvNw"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">提取一类(建筑类)“作者图像”的矢量数据点</p></figure><p id="6857" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">之后的下一步是应用<strong class="kx ir"> DBSCAN集群。</strong></p><blockquote class="nv nw nx"><p id="a53d" class="kv kw ny kx b ky kz jr la lb lc ju ld nz lf lg lh oa lj lk ll ob ln lo lp lq ij bi translated">DB scan是对有噪声的应用程序进行基于密度的空间聚类。寻找高密度的核心样本并从中扩展聚类。适用于包含相似密度聚类的数据。</p></blockquote><p id="7581" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在DB扫描中，有两个核心参数，第一个是ε，它是两个样本之间的最大距离，其中一个样本被认为在另一个样本的邻域中。第二个参数是min_samples，它是被视为核心点的点的邻域中的样本数(或总权重)。这包括点本身。</p><p id="886e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用DBSCAN算法，输出如下，其中每个点都与将该聚类与其他数据点分开的聚类标签相关联，对于是噪声且不靠近ε参数内的其他点的点，该算法会将其值设置为-1，因为它不与任何聚类数据点相关联。看看下面的输出有多清晰</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/97739ef0402eca2024f4c413f0814ae4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LBvtWJpK7qauLdvc"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用DBSCAN对激光雷达数据点进行聚类，并在背景卫星图像上进行可视化“作者提供的图像”</p></figure><p id="a09f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下一步是分别使用来自每个聚类的数据点来提取建筑物覆盖区和该对象的相关属性。为了单独处理每个群，问题陈述如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/9098921f5cce776d8522e2e703c13168.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KT9k_MbI15wew7i0"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在背景卫星图像地图“作者提供的图像”上分离并可视化的一组点</p></figure><p id="e9fb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以上建筑总积分= 35580分，只针对一个单体建筑。</p><p id="2972" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">给定一个物体的三维坐标，下一步的目标是:</p><ol class=""><li id="5c46" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">提取该物体的平均高度</li><li id="c3a1" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">计算对象的二维边界</li><li id="b145" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">计算相关的几何细节，如面积和质心点。</li></ol><p id="f2d5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了从对象的相关矢量数据点提取对象的2d边界，有许多技术，例如凸包和阿尔法形状。为此，我们将使用阿尔法形状</p><blockquote class="nv nw nx"><p id="df41" class="kv kw ny kx b ky kz jr la lb lc ju ld nz lf lg lh oa lj lk ll ob ln lo lp lq ij bi translated"><strong class="kx ir">阿尔法形状算法在数据点周围构建最佳拟合边界</strong></p></blockquote><p id="12d0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">python的API用法很简单，唯一需要的参数是alpha。在我们的例子中，我们将它设置为1，因为数据点彼此靠近，我们对精确的边界感兴趣。</p><pre class="kg kh ki kj gt oc od oe of aw og bi"><span id="9a5e" class="nj mn iq od b gy oh oi l oj ok"><br/>building = building_pts_gdf[building_pts_gdf.cluster==76]<br/>shape = alphashape(building.geometry, alpha=1)</span></pre><p id="4d6a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Alpha Shape算法的输出是一个易于识别的多边形，可以存储为任何几何格式，如WKT</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/5fe0025e1ce389eea7ecbd07c1191835.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YuSIIJ9MPS4TJYcv"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">对DBSCAN分类点云“按作者分类的图像”的一个聚类运行Alpha Shape算法的结果</p></figure><blockquote class="nv nw nx"><p id="80b7" class="kv kw ny kx b ky kz jr la lb lc ju ld nz lf lg lh oa lj lk ll ob ln lo lp lq ij bi translated">让我们花些时间来看看基于输入点的边界有多清晰。如果使用凸包，输出看起来会像一个圆</p></blockquote><p id="ccd8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们现在要做的就是遍历所有集群，分别计算每个集群的建筑边界。</p><p id="20dc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，对于每一个建筑形状，我们都可以计算出以下属性，这对于使用输出数据文件非常有用:</p><ol class=""><li id="eae9" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">边界几何形状</li><li id="2bd6" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">以点的中位高度计算的建筑物标高</li><li id="9fea" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">总面积</li><li id="ffc8" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">周长</li><li id="e31d" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">质心x坐标</li><li id="0f95" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">质心y坐标</li></ol><p id="d434" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这可以使用简单的python和匀称的函数来完成</p><pre class="kg kh ki kj gt oc od oe of aw og bi"><span id="138d" class="nj mn iq od b gy oh oi l oj ok">building = building_pts_gdf[building_pts_gdf.cluster==76]<br/>shape = alphashape(building.geometry, alpha=1)<br/>height = building.z.median()<br/>area = shape.area<br/>perimeter = shape.length<br/>centroid_x = shape.centroid.x<br/>centroid_y = shape.centroid.y<br/></span></pre><p id="8e10" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">生成的提取建筑形状如下，令人敬畏且干净，就像是由AutoCAD专业人员手动绘制的一样。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/fd42c1902a4e282ff9e6f8015b103b9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ne5oNw9bWKrZumKE"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">包含建筑物高度的LIDAR点云矢量特征提取结果“作者图像”</p></figure></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><p id="b867" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">艰苦的工作已经完成，现在我们有了一个数据管道，可以接受点云输入和输出自动提取的特征和相关的几何属性。接下来是后处理</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="c707" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">后处理</h1><p id="003a" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">通常在主处理管道完成后进行后处理。后处理工作的目的因项目和数据类型而异，广义而言，这些是一些后处理目标:</p><ol class=""><li id="17db" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">质量检查和异常值去除:例如，去除具有不现实区域或小区域的特征，检测重叠特征并将其合并，等等</li><li id="f53e" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">几何计算:从物体几何中计算有意义的信息，如面积或周长。例如，计算要素质心、计算要素</li><li id="e4dc" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">丰富性:从外部数据集中向要素添加更多属性信息，例如通过参考公交车站的外部数据源，为所有房屋与最近公交车站的距离添加附加信息。</li></ol></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h2 id="c120" class="nj mn iq bd mo nk nl dn ms nm nn dp mw le no np my li nq nr na lm ns nt nc nu bi translated">1.质量检查和异常值去除</h2><p id="f115" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">自动化质量检查和异常值消除需要对提取特征的允许应用有相当好的理解，并与最终用户或产品经理(最终用户的声音)合作，以制定最终的产品质量验收标准。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/e81c7a86390229bf4296bf94b03e5f9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3iBGSI9Rob5YdKVp"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">从上一步“作者图像”中创建的GIS数据管道中提取的建筑物中的离群建筑物</p></figure><p id="947c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于我们的用例，我们将把质量检查和异常值去除的范围限制在提取的建筑区域，在那里它应该在合理的范围内。为此，我们假设最小的建筑包括一个3*3平方米(9平方米)的房间。该后预处理步骤将消除40个多边形，使感兴趣区域中提取的建筑物总数达到115个。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/1959c9e66d0f7b96840796f1df631a42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/0*wuQ1dr0_5OJNLnFU"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">离群点检测和移除“作者图像”后最终提取的建筑层</p></figure></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h2 id="a49d" class="nj mn iq bd mo nk nl dn ms nm nn dp mw le no np my li nq nr na lm ns nt nc nu bi translated">2.几何计算</h2><p id="0dda" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">为了在实际业务中使用，并创建一个易于查询的数据集，可以在后处理步骤中为每个要素提取有意义的计算属性。这些特征的一些例子是面积、质心x、质心y等等。该步骤将在以后帮助非空间数据用户查询各种业务用例和利用率的数据。</p><p id="6535" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">geopandas中的几何计算非常简单，如下所示</p><pre class="kg kh ki kj gt oc od oe of aw og bi"><span id="5a53" class="nj mn iq od b gy oh oi l oj ok">building_gdf[‘area_m2’] = building_gdf.area<br/>building_gdf[‘centroid_x’] = building_gdf.geometry.centroid.x<br/>building_gdf[‘centroid_y’] = building_gdf.geometry.centroid.y</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/922fbf31b29132ad1ef7ed34de07713e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lToha1jiSPAqK9V3"/></div></div></figure></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h2 id="efe1" class="nj mn iq bd mo nk nl dn ms nm nn dp mw le no np my li nq nr na lm ns nt nc nu bi translated">3.数据丰富</h2><p id="5c66" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">丰富通常是指用从其他来源获得的相关上下文来附加或增强收集的数据。地理空间数据丰富意味着通过引用外部数据源向数据集添加更多属性。几种常见的数据源是:</p><ol class=""><li id="25b5" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">道路基础设施网络</li><li id="f876" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">兴趣点数据库</li><li id="b731" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">人口分布</li><li id="406b" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">行政边界</li></ol><p id="989d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将在本报告中跳过应用此步骤，因为它可以无限扩展。</p><h1 id="c3ac" class="mm mn iq bd mo mp ou mr ms mt ov mv mw jw ow jx my jz ox ka na kc oy kd nc nd bi translated">工程</h1><p id="7f04" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">在笔记本上写对于原型制作很有效，但是为了创建一个数据管道并与其他团队成员协作，需要对最终逻辑正确的脚本应用很少的步骤。下面是产品化的三件速成之事。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><ol class=""><li id="d6f2" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><strong class="kx ir">代码格式化</strong></li></ol><p id="32b4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当有人在做原型的时候，通常代码的样式不是很好，缩进和空格在这个阶段不是优先考虑的。完成逻辑后，你可以使用一个自动化的造型工具，如谷歌的YAPF[8]。一旦安装了这个库，从命令行运行它，让google设计你的代码。</p><pre class="kg kh ki kj gt oc od oe of aw og bi"><span id="1242" class="nj mn iq od b gy oh oi l oj ok">yapf building_extractor.py &gt; building_extractor_styled.py</span></pre><p id="2b76" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir"> 2。对接</strong></p><p id="82b5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对python应用程序进行dockerize是一个很好的做法，可以避免依赖性冲突，特别是在这种情况下，我们使用了如此多的库，其中一些依赖于单独安装的二进制数据，如PDAL。在没有docker的情况下复制相同的环境将是一个挑战。</p><p id="7d82" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir"> 3。单元测试</strong></p><p id="7916" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在运行输出之前，应该使用单元测试来测试逻辑函数，如alpha shape算法、几何计算。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="221b" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">形象化</h1><p id="56c1" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">除了静态地图之外，拥有一个交互式地图并能够可视化输入和输出总是很棒的。为此，我使用了deck.gl和一些额外的HTML / JS代码。</p><h2 id="bda5" class="nj mn iq bd mo nk nl dn ms nm nn dp mw le no np my li nq nr na lm ns nt nc nu bi translated">1.输入点可以是交互式的</h2><p id="7785" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">为了可视化输入点云，我从DBSCAN分类点云数据的输出中提取了一些建筑物，交互式地图如下:</p><p id="145f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae oz" href="https://xmap.ai/maps/pcloud/dbscan_pcloud_3d.html" rel="noopener ugc nofollow" target="_blank">https://xmap.ai/maps/pcloud/dbscan_pcloud_3d.html</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/b3a6143274ae2ff579c401862250d3d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hTwMHYibwRCE62t8"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">HTML三维可视化，用于查看DBSCAN“作者图像”中的点云数据</p></figure><h2 id="f9ed" class="nj mn iq bd mo nk nl dn ms nm nn dp mw le no np my li nq nr na lm ns nt nc nu bi translated">2.输出具有丰富属性的提取面</h2><p id="95e0" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">这是地理信息系统数据管道的最终产品。输出数据保存为geojson对象，使用deck.gl进行可视化，并按高度着色。</p><p id="cec8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae oz" href="https://xmap.ai/maps/pcloud/buildings_vector.html" rel="noopener ugc nofollow" target="_blank">https://xmap.ai/maps/pcloud/buildings_vector.html</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/8f13b18e267c0e952bf2f5ce4eb2446f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kwhIN6pAlkcxzSZz"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">GIS管道最终输出产品的3D可视化，构建-构建带有“按作者分类的图像”属性的矢量</p></figure><h1 id="e2af" class="mm mn iq bd mo mp ou mr ms mt ov mv mw jw ow jx my jz ox ka na kc oy kd nc nd bi translated">摘要</h1><p id="e6d7" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">激光雷达数据处理对于测绘和自动驾驶等许多应用来说是必不可少的。对于大多数应用来说，自动目标检测和提取是确保激光雷达产品取得商业成功所必需的。虽然现在许多工具都提供现成的分析工具，如Arcgis，但编程自己的工具可以更加灵活地添加或调整以适应特定的用例。在本文中，我们探讨了如何使用两种不同的技术从激光雷达密集点云中提取建筑物覆盖区:</p><ol class=""><li id="921c" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">光栅化和多边形化</li><li id="624f" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">无监督机器学习基于密度的聚类和阿尔法形状边界检测</li></ol><p id="2234" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们还探索了标准的后处理技术，例如</p><ol class=""><li id="d488" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">提取每个几何图形的基本属性(如面积、周长和质心)的几何计算</li><li id="e842" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">如有需要，可从外部数据集(如POIs数据库的道路网络)中添加更多实体属性</li></ol><p id="0c3f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，我们研究了一些确保代码可重用性的工程步骤，例如:</p><ol class=""><li id="6b29" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">使用自动格式化工具进行代码格式化</li><li id="af89" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">码头化</li><li id="cc5c" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">单元测试</li></ol><p id="7e4f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，我们使用交互式地理空间可视化来查看分类的点云和最终输出的建筑数据，如以下两个链接所示:</p><div class="pa pb gp gr pc pd"><a href="https://xmap.ai/maps/pcloud/dbscan_pcloud_3d.html" rel="noopener  ugc nofollow" target="_blank"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd ir gy z fp pi fr fs pj fu fw ip bi translated">xMap.ai - DBSCAN 3d点</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">此可视化显示了作为gis管道一部分的dbscan聚类的输出，用于从…提取矢量要素</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">xmap.ai</p></div></div></div></a></div><div class="pa pb gp gr pc pd"><a href="https://xmap.ai/maps/pcloud/buildings_vector.html" rel="noopener  ugc nofollow" target="_blank"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd ir gy z fp pi fr fs pj fu fw ip bi translated">xMap.ai - gis管道构建矢量</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">该可视化显示了从gis管道中最终提取的矢量建筑物</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">xmap.ai</p></div></div></div></a></div><p id="b958" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该报告中的整个分析可以端到端自动进行，如果需要，可以安排为批处理作业。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="90c0" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">问题或询问</h1><p id="a5c9" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">我在这里<a class="ae oz" href="http://mohamedbatran.com/" rel="noopener ugc nofollow" target="_blank">https://mohamedbatran.com</a>，如有任何问题或希望我们合作，请联系我们！</p><p id="2628" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">https://www.linkedin.com/in/mbatran/领英<a class="ae oz" href="https://www.linkedin.com/in/mbatran/" rel="noopener ugc nofollow" target="_blank"/></p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="498d" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">参考</h1><p id="001b" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">[1]<a class="ae oz" href="https://medium.com/geoai/object-extraction-from-mobile-lidar-point-clouds-with-machine-learning-cb15fcbb5597" rel="noopener">https://medium . com/geoai/object-extraction-from-mobile-lidar-point-clouds-with-machine-learning-CB 15 fcbb 5597</a></p><p id="9d6c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">[2]<a class="ae oz" href="https://github.com/beedotkiran/Lidar_For_AD_references" rel="noopener ugc nofollow" target="_blank">https://github.com/beedotkiran/Lidar_For_AD_references</a></p><p id="f0a9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae oz" href="https://download.pdok.nl/rws/ahn3/v1_0/laz/C_37EZ1.LAZ" rel="noopener ugc nofollow" target="_blank">https://download.pdok.nl/rws/ahn3/v1_0/laz/C_37EZ1.LAZ</a></p><p id="be2e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae oz" href="https://epsg.io/7415" rel="noopener ugc nofollow" target="_blank">https://epsg.io/7415</a></p><p id="16be" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">[5]<a class="ae oz" href="https://www.cs.unc.edu/~isenburg/lastools/download/laszip.pdf" rel="noopener ugc nofollow" target="_blank">https://www . cs . unc . edu/~ isenburg/lastools/download/laszip . pdf</a></p><p id="70c8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae oz" href="https://plugins.qgis.org/plugins/quick_map_services/" rel="noopener ugc nofollow" target="_blank">https://plugins.qgis.org/plugins/quick_map_services/</a></p><p id="319d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">[7]https://github.com/LAStools/LAStools<a class="ae oz" href="https://github.com/LAStools/LAStools" rel="noopener ugc nofollow" target="_blank"/></p><p id="3a3a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">[8]https://pdal.io/workshop/exercises/analysis/dtm/dtm.html<a class="ae oz" href="https://pdal.io/workshop/exercises/analysis/dtm/dtm.html" rel="noopener ugc nofollow" target="_blank"/></p><p id="71a0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae oz" href="https://github.com/google/yapf" rel="noopener ugc nofollow" target="_blank">https://github.com/google/yapf</a></p></div></div>    
</body>
</html>