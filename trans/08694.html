<html>
<head>
<title>Don’t Download! Read Datasets with URL in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不要下载！使用Python中的URL读取数据集</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/dont-download-read-datasets-with-url-in-python-8245a5eaa919?source=collection_archive---------9-----------------------#2021-08-11">https://towardsdatascience.com/dont-download-read-datasets-with-url-in-python-8245a5eaa919?source=collection_archive---------9-----------------------#2021-08-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5be2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">无需以任何格式在本地下载即可阅读UCI数据集的教程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8bb094108b95c085f6c985fd45d223cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vuPm9Jsvpa97fPvhllB9qQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">旧方法不会打开新的门！<a class="ae ky" href="https://unsplash.com/photos/caND1D-Kh9Y" rel="noopener ugc nofollow" target="_blank">Unspalsh拍摄的照片</a></p></figure><p id="a015" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于数据科学专业的学生来说，经常会用到公共数据集。<a class="ae ky" href="https://archive.ics.uci.edu/ml/index.php" rel="noopener ugc nofollow" target="_blank"> UCI </a>是最常见的机器学习知识库，包含成千上万的数据。但是，对于一个赋值，如果您在本地下载数据集，其他人不能在其他机器上运行您的代码，除非下载并替换本地路径。此外，为了在google collaboratory等在线平台上训练模型，您需要将数据集保存在google drive上，安装google drive并使用它。如果没有获得谷歌硬盘的许可，这种功能在其他collab笔记本上也无法运行。另一方面，如果从URL读取数据集，就不会有这些问题。</p><p id="1d69" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，我将解释如何读取五种不同类型的数据文件格式，它们是:</p><ol class=""><li id="9ac0" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe me mf mg mh b">.data</code>文件格式</li><li id="daa6" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu ma mb mc md bi translated"><code class="fe me mf mg mh b">.csv</code>文件格式</li><li id="7446" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu ma mb mc md bi translated"><code class="fe me mf mg mh b">.arff</code>文件格式</li><li id="bbbb" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu ma mb mc md bi translated"><code class="fe me mf mg mh b">.zip</code>文件格式</li><li id="712c" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu ma mb mc md bi translated"><code class="fe me mf mg mh b">.rar</code>文件格式</li></ol><h1 id="8cfc" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated"><strong class="ak">如何从网址</strong>读取 <code class="fe me mf mg mh b"><strong class="ak">data</strong></code> <strong class="ak">或</strong> csv文件<strong class="ak">格式</strong></h1><p id="fbc6" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">感谢<code class="fe me mf mg mh b">pandas</code>，前两种情况最容易。要读取数据集，您只需要输入数据集URL。例如:</p><p id="971a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">例1: </strong> <a class="ae ky" href="https://archive.ics.uci.edu/ml/datasets/Blood+Transfusion+Service+Center" rel="noopener ugc nofollow" target="_blank">输血数据集</a><code class="fe me mf mg mh b">.data</code>格式。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">读取输血数据集</p></figure><p id="6fa1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">例二:</strong> <a class="ae ky" href="https://archive.ics.uci.edu/ml/datasets/Cervical+cancer+%28Risk+Factors%29" rel="noopener ugc nofollow" target="_blank">宫颈癌数据集</a>带<code class="fe me mf mg mh b">.csv</code>格式。在本例中，我们已经知道数据集有问号形式的缺失值。因此，为了正确读取数据集，我们包含了<code class="fe me mf mg mh b">na_values=['?']</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">读取宫颈癌数据集</p></figure><p id="c8a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于其他情况，第一步是使用<code class="fe me mf mg mh b">urllib.request.urlopen()</code>打开URL，然后从请求的URL读取数据文件。然而，其余的取决于数据文件格式。</p><h1 id="bf0d" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">如何从URL读取arff文件格式</h1><p id="51fe" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">要读取作为数据帧的<code class="fe me mf mg mh b">.arff</code>文件格式，打开URL后，读取URL并使用<code class="fe me mf mg mh b">scipy.io.arff.loadarff()</code>加载<code class="fe me mf mg mh b">.arff</code>文件。在大多数情况下，我们也需要解码它。然后我们可以通过<code class="fe me mf mg mh b">pd.DataFrame()</code>将其转换为熊猫数据帧。</p><p id="2b08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">例3: </strong> <a class="ae ky" href="https://archive.ics.uci.edu/ml/datasets/Diabetic+Retinopathy+Debrecen+Data+Set" rel="noopener ugc nofollow" target="_blank">糖尿病视网膜病变<strong class="lb iu"> </strong>数据集</a><code class="fe me mf mg mh b">.arff</code>格式。我从链接中获得了列名，以分配给数据帧。</p><p id="a7e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个常见的问题是，在某些情况下，整数列被读取为<code class="fe me mf mg mh b">object</code>数据类型，因此我们用<code class="fe me mf mg mh b">b'1'</code>代替了<code class="fe me mf mg mh b">1</code>。为了解决这个问题，我们检查了所有的列，如果数据类型是<code class="fe me mf mg mh b">object</code>，我们再次解码它们(第18行)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">读取糖尿病数据集</p></figure><h1 id="8334" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">如何从URL读取<code class="fe me mf mg mh b">zip</code>文件格式</h1><p id="8acc" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">如果数据文件格式是<code class="fe me mf mg mh b">.zip</code>，它可能包含几个文件，如元数据或数据文件。要读取这样的数据文件，我们需要先解压，剩下的就看数据文件格式在zip文件中压缩成什么样了。</p><p id="3879" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">例4: </strong> <a class="ae ky" href="https://archive.ics.uci.edu/ml/datasets/Estimation+of+obesity+levels+based+on+eating+habits+and+physical+condition+" rel="noopener ugc nofollow" target="_blank">肥胖水平数据集</a><code class="fe me mf mg mh b">.zip</code>格式，其中包含一个<code class="fe me mf mg mh b">.csv</code>文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">读取肥胖水平数据集</p></figure><h1 id="bc2e" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">如何从URL读取<code class="fe me mf mg mh b">rar</code>文件格式</h1><p id="a8b7" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">我相信这是最具挑战性的文件格式。有几个Python库可以提取和读取rar文件，比如<code class="fe me mf mg mh b">rarfile</code>、<code class="fe me mf mg mh b">patool</code>、<code class="fe me mf mg mh b">pyunpack</code>等。我选择<code class="fe me mf mg mh b">rarfile</code>是因为它使用起来更简单。</p><p id="a4d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">例5: </strong> <a class="ae ky" href="https://archive.ics.uci.edu/ml/datasets/chronic_kidney_disease" rel="noopener ugc nofollow" target="_blank">慢性肾脏疾病数据集</a><code class="fe me mf mg mh b">.rar</code>格式，其中包含多个<code class="fe me mf mg mh b">.arff</code>文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">阅读慢性肾脏疾病数据集</p></figure><h1 id="d056" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">摘要</h1><p id="a760" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">好消息是，你可以使用包含函数的<a class="ae ky" href="https://github.com/maryami66/uci_dataset" rel="noopener ugc nofollow" target="_blank"> Python库</a>轻松读取UCI数据集。到目前为止，它包含了<a class="ae ky" href="https://github.com/maryami66/uci_dataset/tree/main/lists" rel="noopener ugc nofollow" target="_blank"> 36个数据集</a>，它期待你的贡献来添加更多的数据集。😊</p><p id="3bb7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于上面的例子，加载数据集最简单的方法是安装<code class="fe me mf mg mh b">uci_dataset</code></p><p id="890e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe me mf mg mh b">pip install uci_dataset</code></p><p id="4104" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后，您可以通过从那里加载函数来读取上述所有数据集。</p><p id="c2e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">示例6: </strong>从<code class="fe me mf mg mh b"><a class="ae ky" href="https://github.com/maryami66/uci_dataset" rel="noopener ugc nofollow" target="_blank">uci_dataset</a></code> Python库中读取数据集。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从uci_dataset库中读取UCI数据集</p></figure><div class="nm nn gp gr no np"><a href="https://sciencenotes.medium.com/membership" rel="noopener follow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd iu gy z fp nu fr fs nv fu fw is bi translated">加入媒体阅读伟大的教程和故事！</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">我写机器学习、深度学习和数据科学教程。升级阅读更多。</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">sciencenotes.medium.com</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od ks np"/></div></div></a></div></div></div>    
</body>
</html>