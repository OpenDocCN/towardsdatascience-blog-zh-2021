<html>
<head>
<title>A Machine Learning Model Monitoring Checklist: 7 Things to Track</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">机器学习模型监控清单:要跟踪的7件事</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-machine-learning-model-monitoring-checklist-7-things-to-track-2042be98a7b5?source=collection_archive---------28-----------------------#2021-04-19">https://towardsdatascience.com/a-machine-learning-model-monitoring-checklist-7-things-to-track-2042be98a7b5?source=collection_archive---------28-----------------------#2021-04-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="522a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><em class="kf">如何监控您的模型以及使用哪些开源工具</em></h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/3ebfd9a8ed46365c4f2c0d8e96aa64e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JT0Z1qqViVXd6VvL.png"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">图片作者。</p></figure><p id="29b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">建立一个机器学习模型并不容易。</strong>在生产中部署服务更加困难。但是，即使你设法把所有的管道粘在一起，事情也不会就此停止。</p><p id="153e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦模型投入使用，我们必须立即考虑如何平稳地操作它。毕竟，它现在正在提供商业价值！模型性能的任何中断都会直接转化为实际的业务损失。</p><p id="bfc4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">我们需要确保模型交付。</strong>不只是作为一个返回API响应的软件，而是作为一个我们可以信任来做出决策的机器学习系统。</p><p id="144d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这意味着我们需要监控我们的模型。而且还有更多的东西要找！</p><p id="1511" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果生产中的ML让你措手不及，这里有一个需要注意的清单。</p><h1 id="af0f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">1.服务健康</h1><p id="3b7b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">机器学习服务还是服务。您的公司可能已经建立了一些您可以重用的软件监控流程。如果模型实时运行，它需要适当的警报和负责任的人员随叫随到。</p><p id="927e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">即使您只处理批量模型，也不要例外！我们仍然需要跟踪标准的健康指标，比如内存利用率、CPU负载等等。</p><p id="a058" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mp">我们的目标是确保服务正常运行，并遵守必要的约束条件，例如响应速度。</em></p><p id="eddd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个开源工具来检查:<a class="ae mq" href="https://github.com/grafana/grafana" rel="noopener ugc nofollow" target="_blank"> <em class="mp"> Grafana </em> </a> <em class="mp">。</em></p><h1 id="8ac1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak"> 2。数据质量&amp;完整性</strong></h1><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi mr"><img src="../Images/f8584955e7ee73e4b248495cf2168752.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*teOw_nFcg8_zdQJbeW7rTQ.png"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">图片作者。</p></figure><p id="89db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">机器学习模型有问题吗？在绝大多数情况下，<a class="ae mq" href="https://evidentlyai.com/blog/machine-learning-monitoring-what-can-go-wrong-with-your-data" rel="noopener ugc nofollow" target="_blank">数据是罪魁祸首</a>。</p><p id="25a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">上游管线和模型断裂。</strong>用户突然改变了模式。数据可能在源头消失，物理传感器失效。这样的例子不胜枚举。</p><p id="65b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，验证输入数据是否符合我们的期望是至关重要的。检查可能包括范围符合性、数据分布、要素统计、相关性或我们认为对数据集“正常”的任何行为。</p><p id="917f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的目标是确认我们正在输入模型可以处理的数据。在它返回不可靠的响应之前。</p><p id="4e4a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个开源工具查:<a class="ae mq" href="https://github.com/great-expectations/great_expectations" rel="noopener ugc nofollow" target="_blank"> <em class="mp">远大前程</em> </a>。</p><h1 id="280c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak"> 3。数据&amp;目标漂移</strong></h1><p id="a7ea" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">事情变了。即使我们处理非常稳定的过程。几乎每个机器学习模型都有这个不方便的特质:会随着时间退化。</p><p id="cbc7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">当模型接收到训练中未见过的数据时，我们可能会经历</strong> <a class="ae mq" href="https://evidentlyai.com/blog/machine-learning-monitoring-data-and-concept-drift" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">数据漂移</strong> </a> <strong class="ky ir">。</strong>假设用户来自不同的年龄组、营销渠道或地理区域。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ms"><img src="../Images/c2e315737859ae2ec04ce9ef418c335a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OA4S8wCO84bdD2poVSKlaA.png"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">数据漂移的一个例子。图片作者。</p></figure><p id="7e43" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">如果现实世界的模式发生变化，漂移的概念就会出现。想象一下像全球疫情这样影响所有顾客行为的偶然事件。或者市场上提供大量免费层的新竞争产品。它改变了用户对你营销活动的反应。</strong></p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ms"><img src="../Images/7529aca1c0536320a97e50bb6bb06685.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WJE4QjSlNpIy2uZhHmbldQ.png"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">概念漂移的一个例子。图片作者。</p></figure><p id="49cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这两种漂移的最终衡量标准是模型质量的下降。但是有时候，实际值还不知道，我们无法直接计算出来。在这种情况下，有先行指标可以跟踪。我们可以监视输入数据或目标函数的属性是否发生了变化。</p><p id="4721" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">例如，您可以跟踪关键模型特征和模型预测的分布。</strong>然后，如果它们明显不同于过去的时间范围，则触发警报。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/b163255238432b2d4a1299fddab8584f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nGPXzUnEKYeh9Gvl.png"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">截图来自<a class="ae mq" href="https://github.com/evidentlyai/evidently" rel="noopener ugc nofollow" target="_blank">显然是</a>的报道。</p></figure><p id="0440" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mp">我们的目标是获得世界或数据发生变化的早期信号，是时候更新我们的模型了。</em></p><p id="21c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个开源工具检查:<a class="ae mq" href="https://github.com/evidentlyai/evidently" rel="noopener ugc nofollow" target="_blank"> <em class="mp">显然是</em> </a>。</p><h1 id="3502" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">4.模型性能</h1><p id="5b8e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">要知道你的模型是否运行良好，最直接的方法就是将你的预测与实际值进行对比。您可以使用模型训练阶段的相同指标，无论是分类的精度/召回率，还是回归的RMSE，等等。如果数据质量或现实世界的模式发生了问题，我们将会看到指标下降。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi mt"><img src="../Images/fcece8eb9f58d37b2fa0ec37d924ed65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EPYvmuBqfXH55QYT5E7NOw.png"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">截图来自<a class="ae mq" href="https://github.com/evidentlyai/evidently" rel="noopener ugc nofollow" target="_blank">显然是</a>的报道。</p></figure><p id="f3bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里有一些警告。</p><p id="3e03" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，事实真相或实际标签通常会有延迟。例如，如果你做一个长期的预测，或者数据传递有滞后。有时你需要额外的努力来标记新的数据，以检查你的预测是否正确。在这种情况下，首先跟踪数据和目标漂移作为早期警告是有意义的。</p><p id="bede" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二，人们不仅需要跟踪模型质量，还需要跟踪相关的业务KPI。ROC AUC的下降并不能直接说明它对营销转化有多大影响。将模型质量与业务度量联系起来或者找到一些可解释的代理是至关重要的。</p><p id="0a6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第三，你的质量度量应该适合用例。</strong>例如，如果您有不平衡的类，准确性度量就很不理想。对于回归问题，您可能会关心错误符号。因此，您不仅应该跟踪绝对值，还应该跟踪误差分布。区分偶然的异常值和真正的衰退也很关键。</p><p id="d56b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以明智地选择你的衡量标准吧！</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/4f24f79f4edb587a322ca4583b37d6fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uOBkQFKLVRE5Zxhl.png"/></div></div></figure><p id="6af4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mp">我们的目标是跟踪模型服务于其目的的程度，以及当出现问题时如何调试它。</em></p><p id="ad33" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个开源工具来查:<a class="ae mq" href="https://github.com/evidentlyai/evidently" rel="noopener ugc nofollow" target="_blank"> <em class="mp">显然是</em> </a>。</p><h1 id="a320" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak"> 5。按部门划分的业绩</strong></h1><p id="52bb" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">对于许多型号，上述监控设置就足够了。但是如果您处理更关键的用例，就有更多的项目需要检查。</p><p id="5e4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">比如模型哪里出错多，哪里做的最好？</p><p id="9c79" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">你可能已经知道一些要跟踪的特定细分市场:</strong>比如你的高端客户相对于总体客户的模型准确性。它需要一个自定义的质量指标，只为您定义的段内的对象进行计算。</p><p id="cd13" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">在其他情况下，主动搜索低性能的部分是有意义的。</strong>假设您的房地产定价模型在某个特定的地理区域一贯显示高于实际的报价。这是你想要注意的事情！</p><p id="1cab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据用例，我们可以通过在模型输出之上添加后处理或业务逻辑来解决这个问题。或者通过重建模型来说明表现不佳的部分。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/9d6240fba5d24b24b1655ec4536cf319.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bEIgDnE8mt1DiuOl.png"/></div></div></figure><p id="e113" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mp">我们的目标是超越总体性能，了解特定数据切片的模型质量。</em></p><h1 id="939e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">6.偏见/公平</h1><p id="f969" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">当涉及到金融、医疗保健、教育和其他模型决策可能有严重影响的领域时，我们需要更加仔细地检查我们的模型。</p><p id="ecbc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，基于不同人口统计组在训练数据中的表示，不同人口统计组的模型性能可能不同。模型创建者需要意识到这种影响，并拥有与监管者和利益相关者一起减轻不公平的工具。</p><p id="9e5e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，我们需要跟踪合适的指标，比如准确率的奇偶校验。它适用于模型验证和持续生产监控。因此，仪表板上还有一些指标！</p><p id="94c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mp">我们的目标是确保公平对待所有子群体，并跟踪合规情况。</em></p><p id="1e9c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个开源工具来检查:<a class="ae mq" href="https://github.com/fairlearn/fairlearn" rel="noopener ugc nofollow" target="_blank"> <em class="mp"> Fairlearn </em> </a>。</p><h1 id="9c2e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">7.极端值</h1><p id="47e5" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们知道模型会出错。在一些用例中，比如广告定位，我们可能并不关心单个输入是奇怪的还是正常的。只要它们不构成模型失败的有意义的部分！</p><p id="afed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在其他应用程序中，我们可能希望了解每个这样的情况。为了最小化错误，我们可以设计一套规则来处理异常值。例如，让他们进行人工审核，而不是自动做出决定。在这种情况下，我们需要一种方法来检测并相应地标记它们。</p><p id="397d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mp">我们的目标是标记模型预测不可信的异常数据输入。</em></p><p id="2fa0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个开源工具检查:<a class="ae mq" href="https://github.com/SeldonIO/alibi-detect" rel="noopener ugc nofollow" target="_blank"> <em class="mp">谢顿不在场证明-检测</em> </a></p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/e5c798709f28ae184b34c80526652d4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OtCGUqYnuyeYenSU.png"/></div></div></figure><p id="ebbe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">监控听起来可能很无聊。但是，让机器学习在现实世界中发挥作用是至关重要的。不要等到模型失败才创建你的第一个仪表板！</p></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><p id="695a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mp">最初发表于</em><a class="ae mq" href="https://www.kdnuggets.com/2021/03/machine-learning-model-monitoring-checklist.html" rel="noopener ugc nofollow" target="_blank"><em class="mp">https://www.kdnuggets.com</em></a><em class="mp">并与</em><a class="ae mq" href="https://www.linkedin.com/in/emelidral/" rel="noopener ugc nofollow" target="_blank"><em class="mp">Emeli Dral</em></a><em class="mp">合著。</em></p><p id="181d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mp">更多关于生产机器学习的内容，请查看</em> <a class="ae mq" href="https://evidentlyai.com/blog" rel="noopener ugc nofollow" target="_blank"> <em class="mp">我们的博客</em> </a> <em class="mp">和关于ML监控和验证的动手</em> <a class="ae mq" href="https://evidentlyai.com/blog#!/tfeeds/393523502011/c/tutorial" rel="noopener ugc nofollow" target="_blank"> <em class="mp">教程</em> </a> <em class="mp">。</em></p></div></div>    
</body>
</html>