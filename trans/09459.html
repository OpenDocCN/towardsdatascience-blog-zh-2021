<html>
<head>
<title>How I speed up my Power BI report 5x</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何加快我的功率BI报告5倍</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-i-speed-up-my-power-bi-report-5x-b9de603e8df?source=collection_archive---------11-----------------------#2021-09-02">https://towardsdatascience.com/how-i-speed-up-my-power-bi-report-5x-b9de603e8df?source=collection_archive---------11-----------------------#2021-09-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="23eb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你的Power BI报告很慢？检查如何通过应用一些简单的技巧来显著加快速度，同时保留原始的报告外观</h2></div><p id="ef08" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你能看出下面两份报告的不同之处吗？</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/ac98d5ac68b21fb0d2ca8d79b7ee4414.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*darJXv90HP2KmzVtdQPiaw.png"/></div><p class="lm ln gj gh gi lo lp bd b be z dk translated">作者图片</p></figure><p id="cb99" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">是啊，我也不能！</p><p id="3ea6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，这两份报告有很大的不同！如果我告诉你右边的报告比左边的快5倍呢？你会相信我吗？没有吗？然后继续读下去，我会告诉你这怎么可能…</p><h1 id="87e0" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">这一切是如何开始的…</h1><p id="28ed" class="pw-post-body-paragraph ki kj it kk b kl mi ju kn ko mj jx kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">我正在读Chris Hamill的一篇很棒的博文，他解释了如何在保持相同视觉效果的同时替换报告中的一些视觉效果。因此，我立即尝试将类似的技术应用到我之前创建的一个报告中。</p><p id="2faa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您在上图左侧看到的报告页面显示了一些与客户支持中心绩效相关的数字。有一大堆与聊天、调查、电话、电子邮件等相关的指标。</p><p id="84bb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，这个报告页面需要大量的时间来渲染和加载。罪魁祸首是大量的卡牌视觉效果(总共21张)。由于Power BI背后的公式引擎是单线程工作的，正如在<a class="ae mn" rel="noopener" target="_blank" href="/how-to-reduce-your-power-bi-model-size-by-90-76d7c4377f2d">这篇文章</a>中详细解释的那样，对于每一个卡片视觉，一个新的查询正在生成，并且直到前一个查询完成后才能执行！</p><p id="f710" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">性能分析器捕获的时间最好地反映了这一点。Performance Analyzer是Power BI中一个非常强大的内置特性，它让您能够很好地了解幕后发生的事情。您还可以使用外部工具来获取报告指标，比如DAX Studio。</p><p id="265b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们打开性能分析器，看看在原始报告版本中到底发生了什么:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi le"><img src="../Images/cc9d69ffe86c66ede1eddb3ca1f22848.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vA6cXX0WaAn9GATeWYOtvA.png"/></div></div><p class="lm ln gj gh gi lo lp bd b be z dk translated">作者图片</p></figure><p id="c3fc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个报告页面花了3秒多的时间来渲染！对于不太大的数据量来说，这是不可接受的。让我们按总时间降序排列各个计时，看看是什么使我们的报告变慢:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/2b050a0bcd07845bc69c24e89de0d886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PbB8WDAAkqWK2lSuRDIuIg.png"/></div><p class="lm ln gj gh gi lo lp bd b be z dk translated">作者图片</p></figure><p id="ecd3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以看到，我们的两个显卡分别以3238和3149毫秒保持领先。然而，一旦我们展开来看这些数字的细节，我们可以注意到视觉的“其他”部分几乎占了总时间的99%！</p><p id="875f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="ms">那个“其他”甚至是什么意思？！</em> </strong></p><p id="a9b2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">“Other”显示了特定的visual在执行该visual的DAX查询之前必须在执行队列中等待多长时间！因为我的报告包含30多个视觉效果，其中21个是卡片视觉效果，所以其中一些必须等待其他人完成才能执行任何操作。</p><p id="0286" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，DAX查询在这里不是问题，正如您所看到的，这两个视图执行DAX查询只花了4毫秒。即使我按DAX查询对时间排序，我也能看到最长的DAX查询只用了34毫秒:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/a6575bcc406a0476d45b1507d79555ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bpxsf2eoB8nttXbjTaVRhg.png"/></div><p class="lm ln gj gh gi lo lp bd b be z dk translated">作者图片</p></figure><h1 id="37d7" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">优化报告</h1><p id="f2cc" class="pw-post-body-paragraph ki kj it kk b kl mi ju kn ko mj jx kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">关注Power BI社区中所有伟大专家的博客并尽可能多地向他们学习是多么重要，这一点我怎么强调都不为过。</p><p id="d521" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">克里斯·哈米尔的博客给了我灵感，让我试图优化我的原始报告。出发点是试图减少我的报告页面上的视觉效果。因为我确认DAX查询不是问题，所以我的想法是减少“其他”计时。</p><p id="fb35" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="ms">用形状创建背景</em> </strong></p><p id="4ec9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我做的第一件事是从报告中删除我所有的形状(矩形等)。).你如何实现这一点？您可以简单地在PowerPoint中创建您的背景布局，并将其保存为图像！</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/bd49fdfbfba72abe2a6aae700a928e86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TEHheVLHha3bI2SU58C95Q.png"/></div><p class="lm ln gj gh gi lo lp bd b be z dk translated">作者图片</p></figure><p id="7bdd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是我在PowerPoint中创建的布局，用来“模仿”原始页面的外观。将其存储为图像:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/e618c19a4fa980e9653671cd4d24cfb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nDbmBUz-2K6PJ-CgDeWdZg.png"/></div><p class="lm ln gj gh gi lo lp bd b be z dk translated">作者图片</p></figure><p id="35f3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">并将此图片作为您报告的背景图片！就这么简单！</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/6b262b5c5fcb768d41fd86b545e0067f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-xzf3KG0bhWsqBfhG0lxkQ.png"/></div><p class="lm ln gj gh gi lo lp bd b be z dk translated">作者图片</p></figure><h1 id="a472" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">魔法来了…</h1><p id="682e" class="pw-post-body-paragraph ki kj it kk b kl mi ju kn ko mj jx kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">现在最有趣的部分来了…我们如何替换现有的卡片视觉效果，同时保持原始版本的“外观和感觉”?</p><p id="c625" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是克里斯的戏法登上舞台的地方。我只是把我的计算放在矩阵视觉中，用一个单独的矩阵视觉代替单独的卡片视觉。并且，经过一些调整和格式化，得到了(几乎)相同的报告外观！</p><p id="69e7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您应该做的第一件事是将样式设置为“无”，删除列标题和行标题的轮廓，并关闭自动调整列宽:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/9e84d2223f317495a837aebd649b3815.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AbBF76mXHwGaFYldCKkL4Q.png"/></div><p class="lm ln gj gh gi lo lp bd b be z dk translated">作者图片</p></figure><p id="c7f7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">“格式”窗格下的“字段格式”属性中需要关键格式，您应该在其中设置适当的颜色、字体、字体大小等。按照原始报告的模式。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/61b7261973e70f5a96124e7f76688db1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jSgT8KD9bLd369mhfT7SvA.png"/></div><p class="lm ln gj gh gi lo lp bd b be z dk translated">作者图片</p></figure><p id="178d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您也不应该忘记拉伸单个矩阵字段，以取代它们在“卡片”形状中的位置。</p><h1 id="6157" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">系好安全带！</h1><p id="3df6" class="pw-post-body-paragraph ki kj it kk b kl mi ju kn ko mj jx kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">现在，让我们检查一下最重要的事情——不要忘记，我们开始整个过程是为了提高我们报告的性能。</p><p id="bdaf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我将再次打开Performance Analyzer，现在打开我修改后的报告，并检查指标:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/2bda223ca6cf8943e231db518d6064a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H4oQCzqUfWdEdR-aYy5BNg.png"/></div><p class="lm ln gj gh gi lo lp bd b be z dk translated">作者图片</p></figure><p id="84db" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">哦，我的天啊！我的报告中两个最慢的视觉效果现在需要大约0.6秒才能显示出来！<strong class="kk iu"> <em class="ms">相比原版的3秒，快了5倍！！！</em> </strong></p><p id="ca80" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，你可以注意到“其他”计时从大约。3000 ms到300以下！最后，我们的报告中的视觉效果的数量通过将它们移动到用PowerPoint创建的背景图像中而显著减少。</p><p id="c961" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，这里的关键接管是:我们实际上没有改变报告的原始外观——我们只是显著地改进了底层流程！因此，对于我们的用户来说，一切都是一样的，只是他们现在会更快地看到数字！您知道当您的用户更快地获得结果时意味着什么——“用户会喜欢您”:)</p><h1 id="11c7" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">结论</h1><p id="d985" class="pw-post-body-paragraph ki kj it kk b kl mi ju kn ko mj jx kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">这里有两个主要的收购:</p><ul class=""><li id="6006" class="mt mu it kk b kl km ko kp kr mv kv mw kz mx ld my mz na nb bi translated">如果您的报告运行缓慢，有多种方法可以检查原因:使用Performance Analyzer或DAX Studio来确定是否可以应用一些额外的步骤来改进报告</li><li id="f772" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">关注Power BI专家的博客和视频。那里有太多的东西要学，你总能找到自己作品的灵感</li></ul><p id="c007" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后一点:如果你需要对垂直放置的卡片视觉效果进行类似的改进，<a class="ae mn" href="https://alluringbi.com/2020/08/06/consolidating-report-elements-for-improved-performance/" rel="noopener ugc nofollow" target="_blank"> Chris Hamill的博客</a>也解释了如何实现这一点。</p><p id="3d8e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢阅读！</p><p id="74fd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae mn" href="https://datamozart.medium.com/membership" rel="noopener">成为会员，阅读媒体上的每一个故事！</a></p></div></div>    
</body>
</html>