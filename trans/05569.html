<html>
<head>
<title>Merge multiple Jupyter Notebooks together with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python合并多个Jupyter笔记本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/merge-multiple-jupyter-notebooks-together-with-python-1696eb8d0dab?source=collection_archive---------38-----------------------#2021-05-17">https://towardsdatascience.com/merge-multiple-jupyter-notebooks-together-with-python-1696eb8d0dab?source=collection_archive---------38-----------------------#2021-05-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6527" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">避免手动复制粘贴笔记本单元格</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/89b7ed037fd062c26d2b7f107af28025.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3EgrtY3T1WQ-gQKHpYd3IQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=2876776" rel="noopener ugc nofollow" target="_blank">皮克斯拜</a></p></figure><p id="9922" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Jupyter笔记本被认为是任何数据科学家工具箱中不可或缺的一部分。Jupyter Notebook也称为IPython Notebooks，是基于服务器-客户端结构的web应用程序。</p><p id="7552" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Jupyter Notebook提供了一个易于使用的交互式数据科学环境，支持各种编程语言。它对原型设计非常有用，并通过结合代码、文本和可视化提供交互式计算。</p><p id="b62b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在任何项目开发中，使用多个Jupyter笔记本是很常见的。有时需要将几个笔记本合并在一起，您需要手动将笔记本的单元格复制粘贴在一起，这是一项繁琐的任务。</p><p id="3152" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，您可以阅读如何高效地将几个IPython笔记本合并在一起，只需编写几行Python代码。</p><h2 id="7642" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">Jupyter笔记本的结构:</h2><p id="ff58" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Jupyter笔记本保存为JSON文件格式。这个JSON文件包含所有笔记本内容，包括文本、代码、输出和绘图。数字、图像和视频被编码为base64字符串。Jupyter笔记本JSON文件的基本结构是:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="3635" class="lv lw it mu b gy my mz l na nb"><strong class="mu iu">{<br/> "cells": [],<br/> "metadata": {},<br/> "nbformat": 4,<br/> "nbformat_minor": 4<br/>}</strong></span></pre><ul class=""><li id="b84d" class="nc nd it lb b lc ld lf lg li ne lm nf lq ng lu nh ni nj nk bi translated"><strong class="lb iu">元数据:</strong>包含关于内核和所用语言的信息的字典。</li><li id="b467" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated"><strong class="lb iu"> nbformat，nbformat_minor: </strong>笔记本格式版本(4.0)。</li><li id="2669" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated"><strong class="lb iu"> cells: </strong> Cell是JSON文件最重要的组成部分，它包含了每个单元格的信息。每个单元格由具有以下组件的字典表示:</li></ul><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="541b" class="lv lw it mu b gy my mz l na nb"><strong class="mu iu">{</strong><br/><strong class="mu iu">"cell_type": "code",</strong> // can be code, markdown or raw<br/><strong class="mu iu">"execution_count":</strong> null, // null or an integer<br/><strong class="mu iu">"metadata": {},</strong> // metadata of the cell: tags,editable,collapsed<br/><strong class="mu iu">"outputs": [],</strong> // result of code or rendered markdown<br/><strong class="mu iu">"source": []</strong> // the input code or source markdown<br/><strong class="mu iu">}</strong></span></pre><h1 id="7aaf" class="nq lw it bd lx nr ns nt ma nu nv nw md jz nx ka mg kc ny kd mj kf nz kg mm oa bi translated">合并笔记本:</h1><p id="17d6" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">将几个Jupyter笔记本合并在一起的基本思想是操作笔记本的内容，并将JSON文件合并在一起以创建一个单独的笔记本。</p><p id="fbd0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">nbconvert 是一个Python工具，它为研究人员提供了跨不同格式及时传递信息的灵活性。它可以用来合并几个JSON文件的内容。让我们通过以下步骤开始合并笔记本。</p><ul class=""><li id="4838" class="nc nd it lb b lc ld lf lg li ne lm nf lq ng lu nh ni nj nk bi translated">导入nbconvert库:<code class="fe ob oc od mu b"><strong class="lb iu">import nbconvert</strong></code></li><li id="a7a2" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated">使用nbconvert的<code class="fe ob oc od mu b"><strong class="lb iu">.read()</strong></code> <strong class="lb iu"> </strong>函数读取所有IPython笔记本，该函数读取JSON格式的笔记本。</li></ul><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="03b9" class="lv lw it mu b gy my mz l na nb"># Reading the notebooks<br/><strong class="mu iu">first_notebook = nbformat.read(file1, 4)<br/>second_notebook = nbformat.read(file2, 4)<br/>third_notebook = nbformat.read(file3, 4)</strong></span></pre><ul class=""><li id="14d6" class="nc nd it lb b lc ld lf lg li ne lm nf lq ng lu nh ni nj nk bi translated">创建一个新笔记本，其中包含上述三个笔记本的合并内容。新笔记本的元数据将与早期笔记本的元数据相同。</li></ul><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="cd6b" class="lv lw it mu b gy my mz l na nb"># Creating a new notebook<br/><strong class="mu iu">final_notebook = nbformat.v4.new_notebook(metadata=first_notebook.metadata)</strong></span></pre><ul class=""><li id="dc3a" class="nc nd it lb b lc ld lf lg li ne lm nf lq ng lu nh ni nj nk bi translated">将每个JSON文件中的<code class="fe ob oc od mu b"><strong class="lb iu">cell </strong></code>键的所有值连接起来。<code class="fe ob oc od mu b"><strong class="lb iu">+ </strong></code>关键字可以用来合并三个IPython笔记本的<code class="fe ob oc od mu b"><strong class="lb iu">cell</strong></code>键上的字典值。</li></ul><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="d842" class="lv lw it mu b gy my mz l na nb"># Concatenating the notebooks<br/><strong class="mu iu">final_notebook.cells = <br/>first_notebook.cells + second_notebook.cells + second_notebook.cells</strong></span></pre><ul class=""><li id="04c0" class="nc nd it lb b lc ld lf lg li ne lm nf lq ng lu nh ni nj nk bi translated">最后，使用nbconvert库中的<code class="fe ob oc od mu b"><strong class="lb iu">.write</strong></code>函数保存新创建的IPyton笔记本。</li></ul><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="e079" class="lv lw it mu b gy my mz l na nb"># Saving the new notebook <br/><strong class="mu iu">nbformat.write(final_notebook, 'final_notebook.ipynb')</strong></span></pre><p id="9c9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用几行Python代码将包含每个笔记本内容的新文件保存到所需位置。</p><h1 id="f07a" class="nq lw it bd lx nr ns nt ma nu nv nw md jz nx ka mg kc ny kd mj kf nz kg mm oa bi translated">结论:</h1><p id="1bc2" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在本文中，我们讨论了如何使用nbconvert工具将多个IPython笔记本文件合并到一个笔记本中。根据个人需求，他们可以对脚本进行修改，并以简单高效的方式合并笔记本。</p><p id="e23b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">nbconvert可以用来将笔记本转换成其他静态格式包括HTML，LaTeX等。这是一个有趣的包，你可以通过<a class="ae ky" href="https://nbconvert.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">文档页面</a>来了解。</p><h1 id="7af9" class="nq lw it bd lx nr ns nt ma nu nv nw md jz nx ka mg kc ny kd mj kf nz kg mm oa bi translated">参考资料:</h1><p id="df49" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">[1] NbConvert文档:<a class="ae ky" href="https://nbconvert.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">https://nbconvert.readthedocs.io/en/latest/</a></p><blockquote class="oe"><p id="6d40" class="of og it bd oh oi oj ok ol om on lu dk translated">感谢您的阅读</p></blockquote></div></div>    
</body>
</html>