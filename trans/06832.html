<html>
<head>
<title>Visualize your Investment Portfolio with Sunburst Plots using Google Colab</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Google Colab用旭日图可视化你的投资组合</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/visualize-your-investment-portfolio-with-sunburst-plots-using-google-colab-b8c1cdef25cf?source=collection_archive---------23-----------------------#2021-06-20">https://towardsdatascience.com/visualize-your-investment-portfolio-with-sunburst-plots-using-google-colab-b8c1cdef25cf?source=collection_archive---------23-----------------------#2021-06-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0115" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">旭日图是形象化你的投资组合的一种有见地的方式。Google Colab使在浏览器中创建动态图变得很容易。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/eaaceb7fb2cbde82a7fa7562166bda1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KHBeF9ve3IepZJpfYR5UqQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图一。展示投资组合的旭日图示例。图片由作者提供。</p></figure><p id="4879" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">旭日图是可视化分层数据的一种有见地的方式。投资组合是此类数据的一个很好的例子，因为它可以细分为几个资产类别，每个资产类别可以进一步细分为单个资产，如上例所示。在这个小故事中，我分享了使用google colab创建如上图所示的情节的简单步骤。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h2 id="b6f8" class="ly lz iq bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">运行代码以获得您自己的绘图</h2><p id="619d" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">如果您只想运行代码并获得投资组合的绘图，您可以简单地替换以下google colab笔记本中的值:</p><div class="mw mx gp gr my mz"><a href="https://colab.research.google.com/drive/1r2j8NzPL8HaC3O2f74XMabOiYVJ1nIxc?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd ir gy z fp ne fr fs nf fu fw ip bi translated">谷歌联合实验室</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">编辑描述</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">colab.research.google.com</p></div></div><div class="ni l"><div class="nj l nk nl nm ni nn kp mz"/></div></div></a></div><p id="a16f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该图是基于一个简单的表生成的，该表有3列:资产、名称和值。下图显示了如何逐行构建表格(左图)以及生成的格式化数据帧(右图)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/49a47585403a95526002d58b02257ee9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SL2yTyopMYj2WNuPecD7uw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图二。用于在笔记本中创建数据帧(左图)和数据帧渲染(右图)的代码示例。图片由作者提供。</p></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h2 id="9cdd" class="ly lz iq bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">绘图功能如何工作</h2><p id="4fab" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">对于情节，我使用的是<a class="ae np" href="https://plotly.com/python/sunburst-charts/" rel="noopener ugc nofollow" target="_blank"> Plotly库</a>。从数据帧生成绘图的代码如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/474b4e792e0e53c03f6e0fb29c2181e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lpcPUm13tv_Fw6cycwGKUg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图3。用于生成图1中的绘图的代码。图片由作者提供。</p></figure><p id="21f0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">代码非常简洁，所以让我一步一步地解释它。</p><ul class=""><li id="1cad" class="nr ns iq kx b ky kz lb lc le nt li nu lm nv lq nw nx ny nz bi translated">每个标签必须有一个父标签和值。例如，您可以看到第一个标签是“Portfolio ”,有一个父项" "(空-无父项),其值是表中所有资产的总和。这将创建中心圆(图1中的白色区域)。</li><li id="a23a" class="nr ns iq kx b ky oa lb ob le oc li od lm oe lq nw nx ny nz bi translated">下一步是图的第一个环，对应于资产类别。在第6行和第14行，数据帧按资产分组，并对值求和。然后在第6行，选择<code class="fe of og oh oi b">index</code>，对应于唯一资产的列表。在第14行选择了<code class="fe of og oh oi b">Value</code>，对应于每项资产的总价值。资产类别的父项总是“投资组合”标签，因此在第10行“投资组合”被添加了<em class="oj"> n </em>次，其中<em class="oj"> n </em>是可以通过<code class="fe of og oh oi b">df.Asset.nunique()</code>获得的独特资产的数量。另外，注意列表前的<code class="fe of og oh oi b">*</code>被用来使值“离开列表”，否则结果将是列表中的列表，这不是我们在这里想要的。</li><li id="d643" class="nr ns iq kx b ky oa lb ob le oc li od lm oe lq nw nx ny nz bi translated">最后，对于图的第二个环，所有单独的名称(第7行)和相应的值(第15行)被添加到标签和值列表中。在这种情况下，父资产是表中每一行对应的资产(第11行)。</li><li id="d702" class="nr ns iq kx b ky oa lb ob le oc li od lm oe lq nw nx ny nz bi translated">在第17行中，设置<code class="fe of og oh oi b">branchvalues='total'</code>确保分支跨越父节点上方的所有空间，因为分支中值的总和等于父节点值。</li><li id="def4" class="nr ns iq kx b ky oa lb ob le oc li od lm oe lq nw nx ny nz bi translated">在第19行中，<code class="fe of og oh oi b">update_layout</code>可以用来添加或删除图形周围的边距。</li><li id="2c38" class="nr ns iq kx b ky oa lb ob le oc li od lm oe lq nw nx ny nz bi translated">在第20行，<code class="fe of og oh oi b">update_traces</code>可以用来设置在绘图中显示哪些信息。在这种情况下，选项<code class="fe of og oh oi b">labels+percent parent</code>确保绘图显示标签名称和相对于父标签的百分比。根据功能描述，<code class="fe of og oh oi b">text_info</code>的选项可以是用“+”字符连接的['标签'，'文本'，'值'，'当前路径'，'根百分比'，'条目百分比'，'父百分比']的任意组合。</li></ul><p id="1e48" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">仅此而已！我希望你觉得这个故事有用，并享受创造情节的乐趣！</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="403e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">免责声明:本故事的内容仅供参考。图、表或文本中提及的资产仅用于说明目的，并不代表任何类型的投资建议或认可。</strong></p></div></div>    
</body>
</html>