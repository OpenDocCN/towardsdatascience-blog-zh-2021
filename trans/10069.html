<html>
<head>
<title>TigerGraph Universal Middle Tier for Frontend Client with FastAPI &amp; pyTigerGraph</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于前端客户端的TigerGraph通用中间层，具有FastAPI和pyTigerGraph</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/tigergraph-universal-middle-tier-for-frontend-client-with-fastapi-pytigergraph-3ecfe13e4db7?source=collection_archive---------35-----------------------#2021-09-22">https://towardsdatascience.com/tigergraph-universal-middle-tier-for-frontend-client-with-fastapi-pytigergraph-3ecfe13e4db7?source=collection_archive---------35-----------------------#2021-09-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="96b3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用FastAPI和pyTigerGraph与医疗保健图表交互以创建ui</h2></div><h1 id="17b4" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">概观</h1><h2 id="9052" class="kx kg iq bd kh ky kz dn kl la lb dp kp lc ld le kr lf lg lh kt li lj lk kv ll bi translated">为什么？</h2><p id="6316" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lc lv lw lx lf ly lz ma li mb mc md me ij bi translated">现在，我正在做一个项目，用TigerGraph后端创建一个Flutter应用程序。然而，这提出了一个问题，Flutter到底应该如何与我们的图形数据库“对话”?最好也是最安全的方法之一是通过应用程序编程接口(API)，具体来说就是FastAPI，这是一个现代的高性能web框架，用于使用Python构建API。这样，我们的Flutter应用程序可以向FastAPI发送请求，FastAPI会向TigerGraph发送请求并返回所需的数据。</p><p id="9e48" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">这种方法不仅可以用于Flutter，也可以用于任何你想和TigerGraph一起使用的前端。因此，让我们开始讨论如何创建它吧！</p><h2 id="195d" class="kx kg iq bd kh ky kz dn kl la lb dp kp lc ld le kr lf lg lh kt li lj lk kv ll bi translated">旅程</h2><ol class=""><li id="f2c6" class="mk ml iq lo b lp lq ls lt lc mm lf mn li mo me mp mq mr ms bi translated">概观</li><li id="10bf" class="mk ml iq lo b lp mt ls mu lc mv lf mw li mx me mp mq mr ms bi translated">设置您的虚拟环境</li><li id="5b0e" class="mk ml iq lo b lp mt ls mu lc mv lf mw li mx me mp mq mr ms bi translated">设置FastAPI</li><li id="c89e" class="mk ml iq lo b lp mt ls mu lc mv lf mw li mx me mp mq mr ms bi translated">设置TigerGraph</li><li id="c23b" class="mk ml iq lo b lp mt ls mu lc mv lf mw li mx me mp mq mr ms bi translated">编写查询函数</li><li id="4841" class="mk ml iq lo b lp mt ls mu lc mv lf mw li mx me mp mq mr ms bi translated">恭喜、资源和后续步骤</li></ol><h2 id="e487" class="kx kg iq bd kh ky kz dn kl la lb dp kp lc ld le kr lf lg lh kt li lj lk kv ll bi translated">使用的工具</h2><p id="6ce0" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lc lv lw lx lf ly lz ma li mb mc md me ij bi translated">在这篇博客中，我们将使用…</p><ul class=""><li id="6000" class="mk ml iq lo b lp mf ls mg lc my lf mz li na me nb mq mr ms bi translated"><a class="ae nc" href="https://docs.python.org/3/library/venv.html" rel="noopener ugc nofollow" target="_blank"> venv </a></li><li id="fd9b" class="mk ml iq lo b lp mt ls mu lc mv lf mw li mx me nb mq mr ms bi translated"><a class="ae nc" href="https://fastapi.tiangolo.com/" rel="noopener ugc nofollow" target="_blank"> FastAPI </a></li><li id="04d4" class="mk ml iq lo b lp mt ls mu lc mv lf mw li mx me nb mq mr ms bi translated"><a class="ae nc" href="https://pytigergraph.github.io/pyTigerGraph/GettingStarted/" rel="noopener ugc nofollow" target="_blank"> pyTigerGraph </a></li><li id="a215" class="mk ml iq lo b lp mt ls mu lc mv lf mw li mx me nb mq mr ms bi translated"><a class="ae nc" href="https://tgcloud.io/" rel="noopener ugc nofollow" target="_blank"> TigerGraph云</a></li></ul><h2 id="d6e0" class="kx kg iq bd kh ky kz dn kl la lb dp kp lc ld le kr lf lg lh kt li lj lk kv ll bi translated">确认</h2><p id="08be" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lc lv lw lx lf ly lz ma li mb mc md me ij bi translated">非常感谢<a class="ae nc" href="https://www.linkedin.com/in/advitdeepak" rel="noopener ugc nofollow" target="_blank"> Advit Deepak </a>、<a class="ae nc" href="https://www.linkedin.com/in/kevin-hsu-software-engineer" rel="noopener ugc nofollow" target="_blank"> Kevin Hsu </a>、<a class="ae nc" href="https://www.linkedin.com/in/rama-krishna-pitchala" rel="noopener ugc nofollow" target="_blank"> Ramki Pitchala </a>、<a class="ae nc" href="https://tn.linkedin.com/in/zrouga-mohamed" rel="noopener ugc nofollow" target="_blank"> Mohamed Zrouga </a>和<a class="ae nc" href="https://www.linkedin.com/in/jonherke" rel="noopener ugc nofollow" target="_blank"> Jon Herke </a>为项目提供帮助，为我们指明正确的方向，和/或指导我们！</p><h1 id="9e95" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">第一部分:设置虚拟环境</h1><h2 id="3a5a" class="kx kg iq bd kh ky kz dn kl la lb dp kp lc ld le kr lf lg lh kt li lj lk kv ll bi translated">第一步:创建你的目录</h2><p id="8957" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lc lv lw lx lf ly lz ma li mb mc md me ij bi translated">首先，我们将创建一个虚拟环境。虚拟环境是一种工具，它将不同项目的不同依赖关系隔离开来。本质上，使用这个，我们不需要在我们的主计算机上安装所有的软件包；相反，我们将使用的所有包都在我们的虚拟环境中。</p><p id="3b07" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">首先，首先创建您的目录来存放项目，然后进入该目录。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="b232" class="kx kg iq ni b gy nm nn l no np">mkdir TGFlutter<br/>cd TGFlutter</span></pre><h2 id="bd5f" class="kx kg iq bd kh ky kz dn kl la lb dp kp lc ld le kr lf lg lh kt li lj lk kv ll bi translated">第二步:创建你的虚拟环境</h2><p id="ee75" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lc lv lw lx lf ly lz ma li mb mc md me ij bi translated">厉害！现在，使用Python，我们可以使用venv和Python创建一个虚拟环境。为此，只需使用以下命令:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="02ea" class="kx kg iq ni b gy nm nn l no np">python3 -m venv venv</span></pre><p id="b0ab" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">这将在我们的目录中创建一个名为“venv”的文件夹。然后，我们可以使用以下方式激活此虚拟环境:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="eb98" class="kx kg iq ni b gy nm nn l no np">source venv/bin/activate</span></pre><p id="53db" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">运行这个之后，您应该会在您的终端前面看到一个(venv)。</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi nq"><img src="../Images/3425f60b8b0f324870039876eb03e9df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_vQQZaHQZq2KQeF0LirC4A.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">创建并激活虚拟环境后，您将在终端前看到(venv)</p></figure><h2 id="cc29" class="kx kg iq bd kh ky kz dn kl la lb dp kp lc ld le kr lf lg lh kt li lj lk kv ll bi translated">第三步:安装软件包</h2><p id="0685" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lc lv lw lx lf ly lz ma li mb mc md me ij bi translated">对于这个项目，我们将使用pyTigerGraph和Fast PI。FastAPI也使用一个名为<a class="ae nc" href="https://www.uvicorn.org/" rel="noopener ugc nofollow" target="_blank">uvicon</a>的库，所以我们也将安装它。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="2ac9" class="kx kg iq ni b gy nm nn l no np">pip install pyTigerGraph fastapi uvicorn</span></pre><p id="c77e" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">完美！运行完这个，我们应该准备好了！</p><h1 id="930a" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">第二部分:设置FastAPI</h1><h2 id="2c10" class="kx kg iq bd kh ky kz dn kl la lb dp kp lc ld le kr lf lg lh kt li lj lk kv ll bi translated">步骤1:创建一个基本的API</h2><p id="47f4" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lc lv lw lx lf ly lz ma li mb mc md me ij bi translated">现在，让我们创建我们的第一个基本API。首先，让我们创建一个名为“main.py”的文件</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="ddbe" class="kx kg iq ni b gy nm nn l no np">touch main.py</span></pre><p id="e492" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">点击它，然后使用该文件中来自<a class="ae nc" href="https://fastapi.tiangolo.com/" rel="noopener ugc nofollow" target="_blank"> FastAPI网站</a>的代码。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="67c1" class="kx kg iq ni b gy nm nn l no np">from typing import Optional  <br/>from fastapi import FastAPI  </span><span id="068b" class="kx kg iq ni b gy oc nn l no np">app = FastAPI()   </span><span id="c9c7" class="kx kg iq ni b gy oc nn l no np">@app.get("/") <br/>def read_root():<br/>     return {"Hello": "World"}   </span><span id="71a3" class="kx kg iq ni b gy oc nn l no np">@app.get("/items/{item_id}") <br/>def read_item(item_id: int, q: Optional[str] = None):<br/>     return {"item_id": item_id, "q": q}</span></pre><h2 id="ae02" class="kx kg iq bd kh ky kz dn kl la lb dp kp lc ld le kr lf lg lh kt li lj lk kv ll bi translated">第二步:运行API</h2><p id="953d" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lc lv lw lx lf ly lz ma li mb mc md me ij bi translated">保存main.py，然后使用以下命令运行它:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="88bc" class="kx kg iq ni b gy nm nn l no np">uvicorn main:app --reload</span></pre><p id="7cab" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">在这里，我们使用uvicorn来运行我们的文件。文件名是main，<code class="fe od oe of ni b">--reload</code>让服务器在我们保存对文件的新更改后自动重新加载。</p><h2 id="ef03" class="kx kg iq bd kh ky kz dn kl la lb dp kp lc ld le kr lf lg lh kt li lj lk kv ll bi translated">步骤三:探索自定义端点</h2><p id="b022" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lc lv lw lx lf ly lz ma li mb mc md me ij bi translated">打开浏览器到页面<a class="ae nc" href="https://127.0.0.1:8000" rel="noopener ugc nofollow" target="_blank"> https://127.0.0.1:8000 </a>。在那里，您将找到第一个函数中的{"Hello": "World"}。</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div class="gh gi og"><img src="../Images/f0567d471c2e189f8cb6e58361ea12c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*MgkIeLqXOU4aymOoBzotwg.png"/></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">在Chrome标签中打开根目录</p></figure><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="e548" class="kx kg iq ni b gy nm nn l no np">@app.get("/") <br/>def read_root():<br/>     return {"Hello": "World"}</span></pre><p id="5334" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">现在，我们去<a class="ae nc" href="https://127.0.0.1:8000/items/1" rel="noopener ugc nofollow" target="_blank">https://127 . 0 . 0 . 1:8000/items/1</a>。这将导致{"item_id":1，" q":null}。“item_id”是我们传递给它的参数(即/1)，但在这种情况下我们没有传递q。</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/c672204ebe8e62f8bf66f00d85a0ae45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*owryo4_8LOIspL1bj5dCpQ.png"/></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">id为1的已打开项目端点</p></figure><p id="4627" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">我们去<a class="ae nc" href="https://127.0.0.1:8000/items/1?q=test" rel="noopener ugc nofollow" target="_blank">https://127 . 0 . 0 . 1:8000/items/1给q一个值？q =测试</a>。</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi oi"><img src="../Images/037f47b30737c457e17066d35b7fca86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yb1tTxTxzjmRjvmiP-AIlQ.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">id为1、q为测试的已打开项目端点</p></figure><p id="22e0" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">完美！这里，我们传递可选参数q作为项目端点的测试。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="5b70" class="kx kg iq ni b gy nm nn l no np">@app.get("/items/{item_id}") <br/>def read_item(item_id: int, q: Optional[str] = None):<br/>     return {"item_id": item_id, "q": q}</span></pre><h2 id="1386" class="kx kg iq bd kh ky kz dn kl la lb dp kp lc ld le kr lf lg lh kt li lj lk kv ll bi translated">步骤四:探索预构建的端点</h2><p id="5cd1" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lc lv lw lx lf ly lz ma li mb mc md me ij bi translated">最后，FastAPI有几个预构建的端点，专门用于创建文档。首先，如果您转到<a class="ae nc" href="http://127.0.0.1:8000/docs" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/docs</a>，您将找到我们创建的端点的交互式文档。</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi oj"><img src="../Images/cab8fdd72fc12e5a4e6e8c21096c92df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O2sg5kklPvEyH5UmuCvzKg.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">FastAPI文档</p></figure><p id="983a" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">不喜欢那种风格？如果你去<a class="ae nc" href="http://127.0.0.1:8000/redoc" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/redoc</a>，你会发现一个不同风格的文档。</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi ok"><img src="../Images/d299224a3aa742059fb421e580d287af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vhZs-XjBcszuCZ8FQxY3KQ.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">FastAPI redoc</p></figure><p id="c408" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">现在，让我们启动TigerGraph服务器，将pyTigerGraph集成到我们的端点。</p><blockquote class="ol om on"><p id="3ff2" class="lm ln oo lo b lp mf jr lr ls mg ju lu op mh lw lx oq mi lz ma or mj mc md me ij bi translated">如果你想了解更多关于FastAPI的知识，请查看它的<a class="ae nc" href="https://fastapi.tiangolo.com/" rel="noopener ugc nofollow" target="_blank">文档</a>。</p></blockquote><h1 id="cd00" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">第三部分:设置TigerGraph</h1><h2 id="da39" class="kx kg iq bd kh ky kz dn kl la lb dp kp lc ld le kr lf lg lh kt li lj lk kv ll bi translated">第一步:创建您的解决方案</h2><p id="e54a" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lc lv lw lx lf ly lz ma li mb mc md me ij bi translated">导航到<a class="ae nc" href="https://tgcloud.io/" rel="noopener ugc nofollow" target="_blank"> TigerGraph Cloud </a>并创建一个帐户，如果你还没有。</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi os"><img src="../Images/e0943386e2787f17f8fd24952873a28e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cVVe18SS_bDqCYT4BO9nWw.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">去<a class="ae nc" href="https://tgcloud.io/" rel="noopener ugc nofollow" target="_blank">https://tgcloud.io/</a></p></figure><p id="c337" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">登录后，导航至<a class="ae nc" href="https://tgcloud.io/app/solutions" rel="noopener ugc nofollow" target="_blank">“我的解决方案”选项卡</a>。接下来，按蓝色的“创建解决方案”按钮。</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi ot"><img src="../Images/e97df8d125268b9f51ac56cfcff1d189.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lvKngi-Lu_87VLFpJQ2FWg.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">转到“我的解决方案”,然后按蓝色的“创建解决方案”按钮</p></figure><p id="84a6" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">在本例中，我们将使用医疗保健图表(药物相互作用/FAERS)初学者工具包。要选择它，向下滚动或选择“医疗保健”类别，然后单击FAERS选项。选中后，按“下一步”</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi ok"><img src="../Images/4f37526de0960fff723c6f958c363426.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UF5Q5bUNUW_WwfbxrQQp4g.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">选择“医疗保健”,然后单击第二个选项(FAERS)</p></figure><p id="601f" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">在下一页，不要做任何更改，向下滚动，然后按“下一步”</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi ou"><img src="../Images/d07c5beea460f124596f534482e9cf73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yvqH7zF8QNrTJv89Z9rcJQ.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">不要做任何更改，按“下一步”</p></figure><p id="0abe" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">自定义第三页以最好地描述您的图表。这里，记下您的密码和子域，因为我们将在pyTigerGraph中使用它。按下一步。</p><blockquote class="ol om on"><p id="14f6" class="lm ln oo lo b lp mf jr lr ls mg ju lu op mh lw lx oq mi lz ma or mj mc md me ij bi translated">注意:写下你的子域和密码！</p></blockquote><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi ok"><img src="../Images/768c7efa9c7812b6dab201730eced9db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rAIVG9ncLwb6D8vAZJvFjA.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">为您的解决方案输入适当的信息</p></figure><p id="9a4f" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">在最后一页，确认一切正常，然后点击“提交”</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi ok"><img src="../Images/87392eb9a2e103a533d2065fd096833a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zwlfN37ABBphY6lvWMNHDw.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">审查一切，然后按“提交”</p></figure><blockquote class="ol om on"><p id="601c" class="lm ln oo lo b lp mf jr lr ls mg ju lu op mh lw lx oq mi lz ma or mj mc md me ij bi translated">注意:这可能需要几分钟时间。</p></blockquote><p id="a7b5" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">一旦你的解决方案旁边的圆点变成绿色，表示“准备好了”，那么你就准备好进入下一步了。</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi ov"><img src="../Images/3ace44ff8314e6cb842517bdb3d4d461.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f4Uph_KUnxTf4KGiDVOcRg.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">等到“状态”为“就绪”</p></figure><h2 id="a3e3" class="kx kg iq bd kh ky kz dn kl la lb dp kp lc ld le kr lf lg lh kt li lj lk kv ll bi translated">第二步:准备你的解决方案</h2><p id="0547" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lc lv lw lx lf ly lz ma li mb mc md me ij bi translated">现在，让我们在解决方案中安装我们的数据和查询。为此，打开GraphStudio，方法是转到“Actions”下的四个方块，然后从下拉菜单中按“GraphStudio”。</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/9c2a25ddedc9b28f2d3c4c09b27feaf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*GURa_If_1-Sfyvn5PjtMyQ.png"/></div></figure><p id="ceff" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">在打开的选项卡中，单击左上角的“全局视图”,然后从下拉列表中选择“faers”以进入faers图表。</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi ok"><img src="../Images/329551764fadc7b4fe30415f98b4c1a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0zDLSCUBRYlK4bgCUqdG5A.png"/></div></div></figure><p id="e330" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">首先，我们将加载数据。为此，单击“加载数据”选项卡，然后按下悬停值为“开始/恢复加载”的播放按钮</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi ox"><img src="../Images/d056583a10a79ff75c03f8daa9425bc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*039Xfi5SQStALV1b0T9Eqw.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">载入数据</p></figure><p id="25dc" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">在弹出的，按继续，然后你的数据开始加载！</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi oy"><img src="../Images/05e5ff4f046c8e8e2168586ae4fd406b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6rKI-uR6I3fSiGAHJdpmbQ.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">按“继续”加载数据</p></figure><p id="e104" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">完美！接下来，我们将安装查询。为此，请转到“Write Queries”选项卡，并按下带有向上箭头的框。</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi ok"><img src="../Images/c4a860981998357445c53f9815c106ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0zXDrvZmaXU9skWnAdGRlw.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">安装查询</p></figure><p id="7767" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">在弹出窗口中，再次点击“安装”之后，查询将开始安装！</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi oz"><img src="../Images/7f15d954f45006bbb09fd6d91d156de4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FMqKoE77yFVfCc8ST-xhNw.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">安装所有查询</p></figure><p id="3b74" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">等到所有的查询都已安装并且数据都已加载，然后继续下一步！</p><blockquote class="ol om on"><p id="6fb3" class="lm ln oo lo b lp mf jr lr ls mg ju lu op mh lw lx oq mi lz ma or mj mc md me ij bi translated">如果你想了解更多关于TigerGraph Cloud的信息，请查看这个博客。</p></blockquote><h1 id="7848" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">第四部分:集成pyTigerGraph和FastAPI</h1><h2 id="a0b9" class="kx kg iq bd kh ky kz dn kl la lb dp kp lc ld le kr lf lg lh kt li lj lk kv ll bi translated">第一步:连接到您的TigerGraph云解决方案</h2><p id="cd86" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lc lv lw lx lf ly lz ma li mb mc md me ij bi translated">完美！现在我们准备将pyTigerGraph集成到我们的API中。在您选择的编辑器中打开<code class="fe od oe of ni b">main.py</code>并导入pyTigerGraph。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="7918" class="kx kg iq ni b gy nm nn l no np">import pyTigerGraph as tg</span></pre><p id="fc83" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">接下来，创建一个到TigerGraph云服务器的连接。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="9b1d" class="kx kg iq ni b gy nm nn l no np">conn = tg.TigerGraphConnection(host="https://faers.i.tgcloud.io/", password = "tigergraph", graphname="faers")</span><span id="e8ba" class="kx kg iq ni b gy oc nn l no np">conn.apiToken = conn.getToken(conn.createSecret())</span></pre><p id="feb5" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">或者，为了更安全，创建一个configs.py文件，并从那里导入凭据。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="4b1b" class="kx kg iq ni b gy nm nn l no np">touch configs.py</span></pre><p id="0d4c" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">在configs.py中:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="3485" class="kx kg iq ni b gy nm nn l no np">HOST = "https://faers.i.tgcloud.io/"<br/>PASSWORD = "tigergraph"</span></pre><p id="2c6b" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">然后，在main.py中:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="81b6" class="kx kg iq ni b gy nm nn l no np">import configs</span><span id="75de" class="kx kg iq ni b gy oc nn l no np">conn = tg.TigerGraphConnection(host=configs.HOST, password = configs.PASSWORD, graphname="faers")</span><span id="ac1c" class="kx kg iq ni b gy oc nn l no np">conn.apiToken = conn.getToken(conn.createSecret())</span></pre><p id="3f61" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">如果运行成功，那么您就连接到了TigerGraph Cloud！恭喜你。</p><h2 id="8ee1" class="kx kg iq bd kh ky kz dn kl la lb dp kp lc ld le kr lf lg lh kt li lj lk kv ll bi translated">步骤二:创建查询端点</h2><p id="e7b3" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lc lv lw lx lf ly lz ma li mb mc md me ij bi translated">让我们首先用FastAPI运行TigerGraph查询，从mostReportedDrugsForCompany_v2开始。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="c90f" class="kx kg iq ni b gy nm nn l no np">@app.get("/mostReportedDrugsForCompany")</span><span id="c300" class="kx kg iq ni b gy oc nn l no np">def read_drugs(companyName: Optional[str] = "PFIZER", k: Optional[int] = 5, role: Optional[str] = "PS"):</span><span id="d24b" class="kx kg iq ni b gy oc nn l no np">   try:</span><span id="8f3f" class="kx kg iq ni b gy oc nn l no np">      return conn.runInstalledQuery("mostReportedDrugsForCompany_v2", params={"companyName": companyName, "k": k, "role": role})</span><span id="ee9a" class="kx kg iq ni b gy oc nn l no np">   except:</span><span id="8f31" class="kx kg iq ni b gy oc nn l no np">      return {"error": "Query run unsuccessful"}</span></pre><p id="dcf4" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">分解后，我们运行安装在GraphStudio中的“mostReportedDrugsForCompany_v2”查询。作为端点的可选参数，我们传递查询的参数。默认参数是查询注释中列出的参数。</p><p id="d29e" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">如果还没有，请运行该文件。打开<a class="ae nc" href="http://127.0.0.1:8000/mostReportedDrugsForCompany" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/mostReportedDrugsForCompany</a>运行查询。</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi pa"><img src="../Images/ec7d28a5f5cf5967ccee9569aa7d3863.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vbL8nICLF6qV7FHg_o5EIg.png"/></div></div></figure><p id="3441" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">这样，您就可以从query的默认参数中获得结果了！让我们稍微修改一下我们的请求，通过传递k=100来获取100种药物。</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi ok"><img src="../Images/21eb04639b7bedb64da85b186ac7ee19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rb5FoLxWORMA1HNTLP59HA.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">改为传递k=100</p></figure><p id="ed54" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">完美！我们现在可以为剩下的查询添加端点。首先，jaccard:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="ffb8" class="kx kg iq ni b gy nm nn l no np">@app.get("/jaccard")<br/>def read_jaccard(source: Optional[str] = "100640876", etype: Optional[str] = "hasReactions", topK: Optional[int] = 100, sampSize: Optional[int] = 100):</span><span id="9803" class="kx kg iq ni b gy oc nn l no np">   try:<br/>      return conn.runInstalledQuery("jaccard_nbor_reaction", params={"source": source, "etype": etype, "topK": topK, "sampSize": sampSize})</span><span id="4e98" class="kx kg iq ni b gy oc nn l no np">   except:<br/>      return {"error": "Query run unsuccessful"}</span></pre><p id="c677" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">接下来，topSideEffectsForTopDrugs:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="c3a5" class="kx kg iq ni b gy nm nn l no np">@app.get("/topSideEffectsForTopDrugs")</span><span id="32d5" class="kx kg iq ni b gy oc nn l no np">def read_effects(companyName: Optional[str] = "PFIZER", k: Optional[int] = 5, role: Optional[str] = "PS"):</span><span id="b731" class="kx kg iq ni b gy oc nn l no np">   try:</span><span id="eaa9" class="kx kg iq ni b gy oc nn l no np">      return conn.runInstalledQuery("topSideEffectsForTopDrugs", params={"companyName": companyName, "k": k, "role": role})</span><span id="3407" class="kx kg iq ni b gy oc nn l no np">   except:</span><span id="dafd" class="kx kg iq ni b gy oc nn l no np">      return {"error": "Query run unsuccessful"}</span></pre><p id="fa94" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">太棒了。最后，我们可以运行它们，并根据需要传递不同的参数。</p><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi ok"><img src="../Images/747e2a747e8e518da43f1be29f99d9f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NLSl0jJomILlhJmBgNqFag.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">运行/顶端效应口服药物</p></figure><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi ok"><img src="../Images/3a3cd0f6ef007377dfa804de876ac9bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bRKmXfViOPyfc40CXaT_dg.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">运行/topsideffectsfortopdrugs，k=100，companyName=GUERBET</p></figure><blockquote class="ol om on"><p id="fa49" class="lm ln oo lo b lp mf jr lr ls mg ju lu op mh lw lx oq mi lz ma or mj mc md me ij bi translated">额外收获:为了让JSON输出更容易阅读，你可以安装<a class="ae nc" href="https://chrome.google.com/webstore/detail/json-formatter/bcjindcccaagfpapjjmafapmmgkkhgoa" rel="noopener ugc nofollow" target="_blank">这个Chrome扩展</a>！</p></blockquote><figure class="nd ne nf ng gt nr gh gi paragraph-image"><div role="button" tabindex="0" class="ns nt di nu bf nv"><div class="gh gi ok"><img src="../Images/bfa157698ae4d13e2eeb1791e0ae7ac9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hl2nEbE0Csp3OZhU_5PoKw.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">使用JSON格式化程序Chrome扩展，JSON输出更容易阅读</p></figure><h1 id="764b" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">恭喜，下一步，还有资源！</h1><p id="f773" class="pw-post-body-paragraph lm ln iq lo b lp lq jr lr ls lt ju lu lc lv lw lx lf ly lz ma li mb mc md me ij bi translated">恭喜你。现在，您已经为您的UI创建了中间件，可以轻松地与您的图形解决方案进行交互。接下来，您需要创建您的UI来调用您刚刚创建的API的端点。如果你有任何问题，请随意在社区论坛或Discord上发表。</p><div class="pb pc gp gr pd pe"><a href="https://community.tigergraph.com/" rel="noopener  ugc nofollow" target="_blank"><div class="pf ab fo"><div class="pg ab ph cl cj pi"><h2 class="bd ir gy z fp pj fr fs pk fu fw ip bi translated">老虎图</h2><div class="pl l"><h3 class="bd b gy z fp pj fr fs pk fu fw dk translated">一个学习、提问、展示酷项目以及与其他TigerGraph开发人员交流的地方！</h3></div><div class="pm l"><p class="bd b dl z fp pj fr fs pk fu fw dk translated">community.tigergraph.com</p></div></div><div class="pn l"><div class="po l pp pq pr pn ps nw pe"/></div></div></a></div><div class="pb pc gp gr pd pe"><a href="https://discord.gg/gRHWBZNpxW" rel="noopener  ugc nofollow" target="_blank"><div class="pf ab fo"><div class="pg ab ph cl cj pi"><h2 class="bd ir gy z fp pj fr fs pk fu fw ip bi translated">加入TigerGraph Discord服务器！</h2><div class="pl l"><h3 class="bd b gy z fp pj fr fs pk fu fw dk translated">查看Discord上的TigerGraph社区-与663名其他成员一起玩，享受免费的语音和文本聊天。</h3></div><div class="pm l"><p class="bd b dl z fp pj fr fs pk fu fw dk translated">不和谐. gg</p></div></div><div class="pn l"><div class="pt l pp pq pr pn ps nw pe"/></div></div></a></div><p id="faf5" class="pw-post-body-paragraph lm ln iq lo b lp mf jr lr ls mg ju lu lc mh lw lx lf mi lz ma li mj mc md me ij bi translated">此外，查看这些资源以获得关于TigerGraph和FastAPI的更多信息:</p><div class="pb pc gp gr pd pe"><a href="https://www.tigergraph.com/blog/getting-started-with-tigergraph-3-0/" rel="noopener  ugc nofollow" target="_blank"><div class="pf ab fo"><div class="pg ab ph cl cj pi"><h2 class="bd ir gy z fp pj fr fs pk fu fw ip bi translated">TigerGraph 3.0入门- TigerGraph</h2><div class="pl l"><h3 class="bd b gy z fp pj fr fs pk fu fw dk translated">使用TigerGraph的GraphStudio创建您的第一个图形数据库所需要知道的一切什么是GraphStudio…</h3></div><div class="pm l"><p class="bd b dl z fp pj fr fs pk fu fw dk translated">www.tigergraph.com</p></div></div><div class="pn l"><div class="pu l pp pq pr pn ps nw pe"/></div></div></a></div><div class="pb pc gp gr pd pe"><a href="https://fastapi.tiangolo.com/" rel="noopener  ugc nofollow" target="_blank"><div class="pf ab fo"><div class="pg ab ph cl cj pi"><h2 class="bd ir gy z fp pj fr fs pk fu fw ip bi translated">FastAPI</h2><div class="pl l"><h3 class="bd b gy z fp pj fr fs pk fu fw dk translated">FastAPI框架，高性能，简单易学，快速编码，准备生产文档…</h3></div><div class="pm l"><p class="bd b dl z fp pj fr fs pk fu fw dk translated">fastapi.tiangolo.com</p></div></div><div class="pn l"><div class="pv l pp pq pr pn ps nw pe"/></div></div></a></div></div></div>    
</body>
</html>