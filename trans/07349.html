<html>
<head>
<title>Enhance your Python code’s readability with pycodestyle</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用pycodestyle增强Python代码的可读性</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/enhance-your-python-codes-readability-with-pycodestyle-9838976077cb?source=collection_archive---------24-----------------------#2021-07-04">https://towardsdatascience.com/enhance-your-python-codes-readability-with-pycodestyle-9838976077cb?source=collection_archive---------24-----------------------#2021-07-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9bf6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">基于PEP-8风格约定自动检查Python脚本的可读性和质量</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b602cbfa75888e814ec087be5c5d42ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZCYWvH0rYWxZHKVM"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Emmanuel Ikwuegbu 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="6d3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编程是数据从业者工具箱中不可或缺的技能，虽然创建一个脚本来执行基本功能很容易，但是大规模编写良好的可读代码需要更多的工作和思考。</p><p id="6585" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">鉴于Python在数据科学中的受欢迎程度，我将深入研究使用<strong class="lb iu"> <em class="lv"> pycodestyle </em> </strong>进行<strong class="lb iu">样式向导检查</strong>，以提高Python代码的质量和可读性。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="bd21" class="md me it bd mf mg mh dn mi mj mk dp ml li mm mn mo lm mp mq mr lq ms mt mu mv bi translated">内容</h2><blockquote class="mw mx my"><p id="7948" class="kz la lv lb b lc ld ju le lf lg jx lh mz lj lk ll na ln lo lp nb lr ls lt lu im bi translated"><em class="it">(</em><strong class="lb iu"><em class="it">1</em></strong><em class="it">)</em><a class="ae ky" href="#844a" rel="noopener ugc nofollow"><em class="it">关于PEP-8</em></a><em class="it"><br/>(</em><strong class="lb iu"><em class="it">2</em></strong><em class="it">)</em><a class="ae ky" href="#302b" rel="noopener ugc nofollow"><em class="it">动机</em></a><em class="it"><br/>(</em><strong class="lb iu"><em class="it">3</em></strong><em class="it">)</em></p></blockquote></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="844a" class="nc me it bd mf nd ne nf mi ng nh ni ml jz nj ka mo kc nk kd mr kf nl kg mu nm bi translated">关于PEP-8</h1><p id="78e5" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated"><strong class="lb iu"> <em class="lv"> pycodestyle </em> </strong>检查器根据<strong class="lb iu"> PEP-8 </strong>样式约定提供代码建议。那么PEP-8到底是什么？</p><p id="9c10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PEP代表<strong class="lb iu"> Python增强提议</strong>，而<a class="ae ky" href="https://www.python.org/dev/peps/pep-0008/" rel="noopener ugc nofollow" target="_blank"> PEP-8 </a>是概述编写Python代码最佳实践的指南。于2001年创作，其主要目标是通过标准化代码样式来提高整体代码的一致性和可读性。</p><p id="0b53" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">需要注意的一点是，PEP-8旨在作为指南，而<strong class="lb iu">不是</strong>旨在被解释为始终严格遵守的圣经指示。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="302b" class="nc me it bd mf nd ne nf mi ng nh ni ml jz nj ka mo kc nk kd mr kf nl kg mu nm bi translated">动机</h1><p id="cd23" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">快速浏览一下<a class="ae ky" href="https://www.python.org/dev/peps/pep-0008/" rel="noopener ugc nofollow" target="_blank"> PEP-8文档</a>会立即发现有太多的<strong class="lb iu">最佳实践需要记住。</strong></p><p id="52d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，已经花了这么多精力编写了这么多行代码，您肯定不希望浪费更多时间来手动检查脚本的可读性。</p><p id="f107" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是<strong class="lb iu"> <em class="lv"> pycodestyle </em> </strong>发挥作用的地方，它可以自动分析您的Python脚本，并指出代码可以改进的具体领域。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/243a6c1e030219ebebf33bc615802a79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kFeXV14YLUj1BhWz"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">格伦·卡斯滕斯-彼得斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="5c5e" class="nc me it bd mf nd ne nf mi ng nh ni ml jz nj ka mo kc nk kd mr kf nl kg mu nm bi translated">装置</h1><p id="0dff" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">这个包被命名为<em class="lv"> pep8 </em>，但是为了减少混淆，被重新命名为<strong class="lb iu"> <em class="lv"> pycodestyle </em> </strong>。这是在Python的创造者(<a class="ae ky" href="https://en.wikipedia.org/wiki/Guido_van_Rossum" rel="noopener ugc nofollow" target="_blank">吉多·范·罗苏姆</a> ) <a class="ae ky" href="https://github.com/PyCQA/pycodestyle/issues/466" rel="noopener ugc nofollow" target="_blank">强调</a>工具不应该以样式指南命名之后，因为人们可能会根据<em class="lv"> pep8 </em>(工具)的行为与PEP-8(样式指南)进行“斗争”。</p><p id="493c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> pip </strong>是首选的安装程序，您可以通过在终端中运行以下命令来安装或升级<strong class="lb iu"> <em class="lv"> pycodestyle </em> </strong>:</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="5b09" class="md me it nu b gy ny nz l oa ob"># <em class="lv">Install pycodestyle</em><br/>pip install pycodestyle</span><span id="83b4" class="md me it nu b gy oc nz l oa ob"># <em class="lv">Upgrade pycodestyle</em><br/>pip install --upgrade pycodestyle</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="e4e2" class="nc me it bd mf nd ne nf mi ng nh ni ml jz nj ka mo kc nk kd mr kf nl kg mu nm bi translated">基本用法</h1><p id="0c14" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">最直接的用法是在Python脚本上运行<strong class="lb iu"> <em class="lv"> pycodestyle </em> </strong>。py文件)作为终端中的命令。让我们使用下面的示例脚本(名为<em class="lv">pycodestyle _ sample _ script . py)</em>进行演示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="cac0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们通过运行这个简单的命令让<strong class="lb iu"> <em class="lv"> pycodestyle </em> </strong>开始工作:</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="1efa" class="md me it nu b gy ny nz l oa ob">pycodestyle pycodestyle_sample_script.py</span></pre><p id="38fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出指定了违反PEP-8样式约定的代码位置:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/0e2410ba1d455844c0608bafc21c4da6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*akaQgn8PtekuOxFCqvt07g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">运行pycodestyle | Image by Author后的输出</p></figure><p id="0bf0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每行中用冒号分隔的一对数字(如3:19)分别指<strong class="lb iu">行号</strong>和<strong class="lb iu">字符号</strong>。</p><p id="d5b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，<code class="fe og oh oi nu b">6:64 E202 whitespace before ')'</code>的输出意味着在第<strong class="lb iu"> 6 </strong>行中，在第<strong class="lb iu">64</strong>字符标记处有一个意外的空白。</p><p id="2a3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过解析<em class="lv">统计数据</em>参数来查看错误发生的频率:</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="aae0" class="md me it nu b gy ny nz l oa ob">pycodestyle --statistics -qq pycodestyle_sample_script.py</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/486902cef0e6780152e780e464a3dabf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WKPe8iRN60QQiNk1--J-kQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">pycodestyle确定的错误频率|按作者分类的图片</p></figure><p id="8a58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的输出中，我们看到在右括号“<strong class="lb iu"> ) </strong>”前出现了4次意外的空白。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="aa8e" class="nc me it bd mf nd ne nf mi ng nh ni ml jz nj ka mo kc nk kd mr kf nl kg mu nm bi translated">高级用法</h1><p id="018d" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">我们也可以将<strong class="lb iu"> <em class="lv"> pycodestyle </em> </strong>直接导入到我们的Python代码中来执行<strong class="lb iu">自动化测试。</strong>这对于自动测试多个脚本的编码风格一致性非常有用。</p><p id="701c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，可以编写以下类来自动检查是否符合PEP-8约定:</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="8fe0" class="md me it nu b gy ny nz l oa ob"><strong class="nu iu">import</strong> <strong class="nu iu">unittest</strong><br/><strong class="nu iu">import</strong> <strong class="nu iu">pycodestyle</strong><br/><br/><strong class="nu iu">class</strong> <strong class="nu iu">TestCodeFormat</strong>(unittest.TestCase):<br/><br/>    <strong class="nu iu">def</strong> test_conformance(self):<br/>        <em class="lv">"""Test that the scripts conform to PEP-8."""</em><br/>        style = pycodestyle.StyleGuide(quiet=<strong class="nu iu">True</strong>)<br/>        result = style.check_files(['file1.py', 'file2.py'])<br/>        self.assertEqual(result.total_errors, 0, "Found style  <br/>        errors")</span></pre><p id="4c0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该工具也可以被<strong class="lb iu">配置</strong>，以便基于我们定义的样式规则首选项来完成测试。例如，我们可以删除不希望在检查中检测到的特定错误:</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="3f2d" class="md me it nu b gy ny nz l oa ob">style = pycodestyle.StyleGuide(ignore=['E201', 'E202', 'E501'])</span></pre><p id="f4a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者，我们可以指导<strong class="lb iu"> <em class="lv"> pycodestyle </em> </strong>一起使用不同的配置文件(包含一组特定的样式规则)。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="bbbd" class="md me it nu b gy ny nz l oa ob"><strong class="nu iu">import</strong> <strong class="nu iu">pycodestyle</strong><br/><br/>style = pycodestyle.StyleGuide(config_file='/path/to/tox.ini')</span></pre><p id="e509" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有更多功能可以满足您的需求，请访问<a class="ae ky" href="https://pycodestyle.pycqa.org/en/latest/intro.html" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="lv">pycodestyle</em></strong>的文档页面</a>了解更多详情。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="d972" class="nc me it bd mf nd ne nf mi ng nh ni ml jz nj ka mo kc nk kd mr kf nl kg mu nm bi translated">结论</h1><p id="a22f" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">在本文中，我们看了如何使用<strong class="lb iu"><em class="lv">pycodestyle</em></strong><em class="lv"/>工具来检查我们的Python脚本是否符合PEP-8代码样式约定。</p><p id="cedd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码被阅读的次数比被编写的次数多，所以我们的代码是一致的、可理解的和结构整洁的是至关重要的。相信我，你的合作者和你未来的自己会为此感谢你的。</p><p id="7d93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">欢迎您加入我的数据科学学习之旅！关注此<a class="ae ky" href="https://kennethleungty.medium.com/" rel="noopener">媒体页面</a>以了解更多数据科学内容，或者在<a class="ae ky" href="https://www.linkedin.com/in/kennethleungty/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系我。编码快乐！</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="8424" class="md me it bd mf mg mh dn mi mj mk dp ml li mm mn mo lm mp mq mr lq ms mt mu mv bi translated">参考</h2><ul class=""><li id="1117" class="ok ol it lb b lc nn lf no li om lm on lq oo lu op oq or os bi translated"><a class="ae ky" href="https://www.python.org/dev/peps/pep-0008/" rel="noopener ugc nofollow" target="_blank">PEP-8—Python代码风格指南</a></li><li id="bad2" class="ok ol it lb b lc ot lf ou li ov lm ow lq ox lu op oq or os bi translated"><a class="ae ky" href="https://pycodestyle.pycqa.org/en/latest/" rel="noopener ugc nofollow" target="_blank"> pycodestyle官方文档</a></li></ul></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><div class="kj kk kl km gt oy"><a rel="noopener follow" target="_blank" href="/the-fortune-500-bar-chart-race-9612dc9d0e63"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd iu gy z fp pd fr fs pe fu fw is bi translated">在条形图竞赛中可视化财富500强公司</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">使用Python和fluorescent可视化世界最大公司的排名和收入趋势</h3></div><div class="pg l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">towardsdatascience.com</p></div></div><div class="ph l"><div class="pi l pj pk pl ph pm ks oy"/></div></div></a></div><div class="pn po gp gr pp oy"><a rel="noopener follow" target="_blank" href="/analyzing-english-premier-league-var-football-decisions-c6d280061ebf"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd iu gy z fp pd fr fs pe fu fw is bi translated">英超VAR足球决策分析</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">使用Python回顾英国足球中有争议的视频助理裁判的实现</h3></div><div class="pg l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">towardsdatascience.com</p></div></div><div class="ph l"><div class="pq l pj pk pl ph pm ks oy"/></div></div></a></div><p id="ab33" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请随意查看<a class="ae ky" href="https://remotepython.io/" rel="noopener ugc nofollow" target="_blank">远程Python职位</a>，这是一个关于远程Python相关机会的职位公告板。</p></div></div>    
</body>
</html>