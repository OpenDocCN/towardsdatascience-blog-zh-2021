<html>
<head>
<title>How to Build and Deploy a Text Anonymizer with SpaCy and Streamlit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用SpaCy和Streamlit构建和部署文本匿名器</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-build-and-deploy-a-text-anonymizer-with-spacy-and-streamlit-70ed9607823?source=collection_archive---------18-----------------------#2021-06-13">https://towardsdatascience.com/how-to-build-and-deploy-a-text-anonymizer-with-spacy-and-streamlit-70ed9607823?source=collection_archive---------18-----------------------#2021-06-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e905" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">NLP使你符合GDPR的一个可能的方法</h2></div><p id="139b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我将向您展示使用Streamlit和Spacy构建一个匿名化文本数据的web应用程序是多么容易。我们还将看到如何将它部署到Heroku，并让它在互联网上直播，供其他用户使用和玩。</p><p id="3b7f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">剧透:这是这个应用的样子</strong></p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/39ea794e6ec8eed762a3b9fde3ed7cb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kZZDfXoJij7763b0"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">作者图片</p></figure><p id="5e89" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">尽管图像是不言自明的，但您可以使用此应用程序做以下事情:</p><ul class=""><li id="08b9" class="lu lv it kk b kl km ko kp kr lw kv lx kz ly ld lz ma mb mc bi translated">上传文本数据(目前为TXT格式)或在输入区粘贴一些文本</li><li id="72c6" class="lu lv it kk b kl md ko me kr mf kv mg kz mh ld lz ma mb mc bi translated">选择语言模型(目前仅支持英语和法语)</li><li id="a05d" class="lu lv it kk b kl md ko me kr mf kv mg kz mh ld lz ma mb mc bi translated">选择要检测的实体类型(人员、位置和组织)</li><li id="9b6b" class="lu lv it kk b kl md ko me kr mf kv mg kz mh ld lz ma mb mc bi translated">可视化检测到的实体并匿名化它们</li></ul><p id="71dc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="mi"> PS*: </em> <strong class="kk iu"> <em class="mi">这是一个玩具app </em> </strong> <em class="mi">:我会在这篇帖子的最后列出潜在的想法，通过增加更多的功能来改进它。现在请容忍我。</em></p><p id="111f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="mi"> PS**:所有代码都可以在</em> <a class="ae mj" href="https://github.com/ahmedbesbes/anonymizer" rel="noopener ugc nofollow" target="_blank"> <em class="mi"> Github </em> </a>上找到</p><p id="2edd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="mi"> PS***:如果你想一步一步按代码来的话可以找这个教程的视频版</em></p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h1 id="1ac1" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">为什么需要匿名化数据？</h1><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ne"><img src="../Images/9d0e0489249d3a0103d135b8dc809308.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0yunv96oZZRRhtT_"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">作者图片</p></figure><p id="d15a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">每当您处理文本数据(电子邮件、合同、评论等)时，您可能必须处理个人和敏感信息:人名或公司名、地址、电子邮件等等。出于合规性原因和其他法律约束(嘿，GDPR ),您必须非常小心地处理这些数据:潜在的数据泄露可能会给您的组织带来巨大的后果。</p><p id="5d2c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">作为一名前数据科学顾问，我参与了许多处理敏感和个人数据的项目。建立匿名化管道是解决这个问题的一种方法。</p><p id="0bcc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">今天，我将向您展示如何在web应用程序中嵌入匿名化。</p><p id="6a37" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们开始吧。</p><h1 id="4a6d" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">使用pipenv快速设置您的环境</h1><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nf"><img src="../Images/9d8f9c850734e83cb11d8cab9ad317a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JgTrtu-HjeobbYnt.png"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">来源:<a class="ae mj" href="https://pipenv.pypa.io/en/latest/" rel="noopener ugc nofollow" target="_blank">https://pipenv.pypa.io/en/latest/</a></p></figure><p id="3afa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我总是为我的每个项目保持一个干净和独立的环境，我用<strong class="kk iu"> <em class="mi"> pipenv </em> </strong>来妥善处理这个问题:</p><blockquote class="ng"><p id="9418" class="nh ni it bd nj nk nl nm nn no np ld dk translated">Pipenv是一个工具，旨在将所有包装领域的精华(bundler、composer、npm、cargo、yarn等。)到Python世界。在我们的世界里，Windows是一等公民。它会自动为您的项目创建和管理一个virtualenv，并在您安装/卸载软件包时从您的Pipfile中添加/删除软件包。它还生成非常重要的Pipfile.lock，用于生成确定性的构建。—pypi.org</p></blockquote><p id="f177" class="pw-post-body-paragraph ki kj it kk b kl nq ju kn ko nr jx kq kr ns kt ku kv nt kx ky kz nu lb lc ld im bi translated">如果您想使用pipenv，请使用pip全局安装它:</p><pre class="lf lg lh li gt nv nw nx ny aw nz bi"><span id="feca" class="oa mn it nw b gy ob oc l od oe"><strong class="nw iu">pip install pipenv</strong></span></pre><p id="4fb6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，创建一个项目文件夹，并通过安装所需的依赖项在其中初始化一个pipenv环境:</p><pre class="lf lg lh li gt nv nw nx ny aw nz bi"><span id="edff" class="oa mn it nw b gy ob oc l od oe"><strong class="nw iu">mkdir anonymizer<br/>cd anonymizer/<br/>pipenv install streamlit spacy st-annotated-text<br/>pipenv install black --dev</strong></span></pre><p id="5a41" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将安装:</p><ul class=""><li id="de61" class="lu lv it kk b kl km ko kp kr lw kv lx kz ly ld lz ma mb mc bi translated"><a class="ae mj" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank"> streamlit </a>:构建UI</li><li id="12d1" class="lu lv it kk b kl md ko me kr mf kv mg kz mh ld lz ma mb mc bi translated"><a class="ae mj" href="https://spacy.io/" rel="noopener ugc nofollow" target="_blank">空间</a>:进行命名实体识别</li><li id="7ac8" class="lu lv it kk b kl md ko me kr mf kv mg kz mh ld lz ma mb mc bi translated"><a class="ae mj" href="https://github.com/tvst/st-annotated-text" rel="noopener ugc nofollow" target="_blank"> st-annotated-text </a>:在Streamlit应用程序中显示注释文本的简单组件</li><li id="7c7b" class="lu lv it kk b kl md ko me kr mf kv mg kz mh ld lz ma mb mc bi translated"><a class="ae mj" href="https://github.com/psf/black" rel="noopener ugc nofollow" target="_blank">黑色</a>用于本地格式化代码。这个包只能在开发模式下使用。</li></ul><p id="508f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">安装完这些依赖项后，pipenv将创建一个以您的项目文件夹命名的虚拟环境。它还会在这个文件夹的根目录下添加两个文件:<strong class="kk iu"> Pipfile </strong>和<strong class="kk iu"> Pipfile.lock </strong>(不要手动修改这些文件:它们是由pipenv自动生成的)</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/f27002464b4b54c54764473800f755b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*v85MhWVXBgG0aAI1"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">作者图片</p></figure><p id="8066" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在一切都设置好了，激活环境:</p><pre class="lf lg lh li gt nv nw nx ny aw nz bi"><span id="96b3" class="oa mn it nw b gy ob oc l od oe"><strong class="nw iu">pipenv shell</strong></span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi of"><img src="../Images/1ad0927bf6a3ee0656af9c06a22f2ca6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Q3Xep9xxPwaU25SJ"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">作者图片</p></figure><h1 id="ba03" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">下载空间语言模型</h1><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi og"><img src="../Images/031e255d83776e48d0f110dba59852a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*it1mobVrjF2QhUJi.jpg"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">来源:https://spacy.io/<a class="ae mj" href="https://spacy.io/" rel="noopener ugc nofollow" target="_blank"/></p></figure><p id="2a2b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由于我们将在最后在Heroku上部署应用程序，我们将手动下载SpaCy语言模型并将其放在一个文件夹中。这个文件夹将作为源代码的一部分上传到Heroku服务器上。</p><p id="8b8a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以直接从Github下载SpaCy语言模型:</p><ul class=""><li id="821c" class="lu lv it kk b kl km ko kp kr lw kv lx kz ly ld lz ma mb mc bi translated"><a class="ae mj" href="https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-3.0.0/en_core_web_sm-3.0.0.tar.gz" rel="noopener ugc nofollow" target="_blank">英文</a>模型</li><li id="0746" class="lu lv it kk b kl md ko me kr mf kv mg kz mh ld lz ma mb mc bi translated"><a class="ae mj" href="https://github.com/explosion/spacy-models/releases/download/fr_core_news_sm-3.0.0/fr_core_news_sm-3.0.0.tar.gz" rel="noopener ugc nofollow" target="_blank">法国</a>车型</li></ul><p id="f5d1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">两个文件都是tar.gz文件。您必须首先解压缩它们，并复制粘贴包含<code class="fe oh oi oj nw b">config.cfg</code>文件的文件夹中的所有文件。然后将这些文件分别放到<code class="fe oh oi oj nw b">models</code>文件夹下的<code class="fe oh oi oj nw b">en</code>和<code class="fe oh oi oj nw b">fr</code>文件夹中。下面是你最后应该有的:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/b4bc206b7314385e099db8537b7c25d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RfVpURSIsZW5f-yx"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">作者图片</p></figure><p id="37bd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，每个型号都可以轻松加载:</p><pre class="lf lg lh li gt nv nw nx ny aw nz bi"><span id="4854" class="oa mn it nw b gy ob oc l od oe"><strong class="nw iu">import spacy</strong></span><span id="879f" class="oa mn it nw b gy ok oc l od oe"><strong class="nw iu">french_model = spacy.load("./models/fr/")<br/>english_model = spacy.load("./models/en/")</strong></span></pre><h1 id="4eb9" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">构建Streamlit应用程序</h1><p id="46f4" class="pw-post-body-paragraph ki kj it kk b kl ol ju kn ko om jx kq kr on kt ku kv oo kx ky kz op lb lc ld im bi translated">我们将从导入项目的依赖项开始:</p><pre class="lf lg lh li gt nv nw nx ny aw nz bi"><span id="ee4b" class="oa mn it nw b gy ob oc l od oe"><strong class="nw iu">import streamlit as st<br/>import spacy<br/>from annotated_text import annotated_text</strong></span></pre><p id="84c5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们将收集用户输入:</p><ul class=""><li id="17f0" class="lu lv it kk b kl km ko kp kr lw kv lx kz ly ld lz ma mb mc bi translated">模特的语言(<code class="fe oh oi oj nw b">en</code>或<code class="fe oh oi oj nw b">fr</code>)</li><li id="7455" class="lu lv it kk b kl md ko me kr mf kv mg kz mh ld lz ma mb mc bi translated">实体类型(<code class="fe oh oi oj nw b">PER</code>、<code class="fe oh oi oj nw b">LOC</code>和<code class="fe oh oi oj nw b">ORG</code>)</li><li id="e8f4" class="lu lv it kk b kl md ko me kr mf kv mg kz mh ld lz ma mb mc bi translated">文本区域中的输入文本</li><li id="eee3" class="lu lv it kk b kl md ko me kr mf kv mg kz mh ld lz ma mb mc bi translated">用于上传TXT文件的文件上传程序</li></ul><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="oq ml l"/></div></figure><p id="4ccc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦用户选择了语言，我们就必须选择正确的空间模型。</p><p id="8223" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，我们不希望每次用户从一种语言切换到另一种语言时都加载这个模型。相反，我们想要的是将所有模型一次性加载到内存中，并在字典中以恒定的复杂度访问它们。</p><p id="21af" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是Streamlit <strong class="kk iu">缓存</strong>发挥作用的地方:</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="oq ml l"/></div></figure><p id="0706" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">既然已经收集了输入文本，并且从界面中选择了语言模型，我们就必须从文本中提取实体，并用<code class="fe oh oi oj nw b">st-annotated-text</code>插件显示它们。</p><p id="3ebf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要显示这样的注释文本:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi or"><img src="../Images/c5231ea7e81996280d671e6428bc7cf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rAB-_lIFemEppH5o"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">来源:<a class="ae mj" href="https://github.com/tvst/st-annotated-text" rel="noopener ugc nofollow" target="_blank">https://github.com/tvst/st-annotated-text</a></p></figure><p id="989f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe oh oi oj nw b">st-annotated-text</code>需要一个元组列表，其中每个元组由其文本、实体名称和十六进制颜色代码描述。</p><pre class="lf lg lh li gt nv nw nx ny aw nz bi"><span id="bf1b" class="oa mn it nw b gy ob oc l od oe">annotated_text(<br/>    "This ",<br/>    ("is", "verb", "#8ef"),<br/>    " some ",<br/>    ("annotated", "adj", "#faa"),<br/>    ("text", "noun", "#afa"),<br/>    " for those of ",<br/>    ("you", "pronoun", "#fea"),<br/>    " who ",<br/>    ("like", "verb", "#8ef"),<br/>    " this sort of ",<br/>    ("thing", "noun", "#afa"),<br/>)</span></pre><p id="6c2e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">给定标记化的文本和选择的实体，我们可以很容易地得到这种类型的结构。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="oq ml l"/></div></figure><p id="5093" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通过将anonymize参数设置为<code class="fe oh oi oj nw b">True</code>，该函数将用Xs替换每个实体。</p><p id="f3e2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">既然输入文本已经过处理，我们可以可视化原始文本和匿名文本。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="oq ml l"/></div></figure><p id="81d0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是应用程序的完整代码。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="oq ml l"/></div></figure><h1 id="2db8" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">部署到Heroku</h1><p id="3a9d" class="pw-post-body-paragraph ki kj it kk b kl ol ju kn ko om jx kq kr on kt ku kv oo kx ky kz op lb lc ld im bi translated"><a class="ae mj" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a>是一个平台即服务(PaaS ),支持开发人员完全在云中构建、运行和操作应用。</p><p id="14e8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在Heroku上部署Streamlit应用非常简单。以下是要遵循的步骤:</p><p id="41a8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">1 —使用以下依赖项创建一个<code class="fe oh oi oj nw b">requirements.txt</code>文件，并将其放在项目的根目录下</p><pre class="lf lg lh li gt nv nw nx ny aw nz bi"><span id="6207" class="oa mn it nw b gy ob oc l od oe"><strong class="nw iu">streamlit<br/>spacy<br/>st-annotated-text</strong></span></pre><p id="b1fd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2 —在同一位置添加一个<code class="fe oh oi oj nw b">setup.sh</code>文件:这将处理服务器配置</p><pre class="lf lg lh li gt nv nw nx ny aw nz bi"><span id="3789" class="oa mn it nw b gy ob oc l od oe"><strong class="nw iu">mkdir -p ~/.streamlit/</strong></span><span id="765a" class="oa mn it nw b gy ok oc l od oe"><strong class="nw iu">echo "\\<br/>[server]\\n\\<br/>headless = true\\n\\<br/>enableCORS=false\\n\\<br/>port = $PORT\\n\\<br/>" &gt; ~/.streamlit/config.toml</strong></span></pre><p id="807c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">3 —在同一位置添加一个名为<code class="fe oh oi oj nw b">Procfile</code>的文件，并使用以下脚本告诉Heroku如何启动Streamlit应用程序</p><pre class="lf lg lh li gt nv nw nx ny aw nz bi"><span id="58f1" class="oa mn it nw b gy ob oc l od oe"><strong class="nw iu">web: sh setup.sh &amp;&amp; streamlit run --server.enableCORS false app.py</strong></span></pre><p id="b21d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">4——确保应用程序在本地运行，并在Github上推送您的代码</p><p id="780d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">5 —如果您还没有账户，请在<a class="ae mj" href="http://heroku.com" rel="noopener ugc nofollow" target="_blank">heroku.com</a>上创建一个(免费)账户</p><p id="2130" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">6 —转到<a class="ae mj" href="https://dashboard.heroku.com/apps" rel="noopener ugc nofollow" target="_blank">https://dashboard.heroku.com/apps</a>并点击创建新应用</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/115814aada7f691b552b057a8f5d8fae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OeGtqdtHUmACQ8sj"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">作者图片</p></figure><p id="21da" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">7-为应用程序选择一个名称，选择一个地区，然后点击创建应用程序</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi os"><img src="../Images/0d1d94bfe50c0c18d78abe327d7fa25d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yoRLJ3b5uS6xOqIT"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">作者图片</p></figure><p id="5937" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">8-Heroku会询问您部署方法。选择Github选项，搜索你的回购，点击连接</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/be0d9c0974c626cb77a75d67056b1600.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1Pe2EfFajKoH-GET"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">作者图片</p></figure><p id="89ba" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">9-您可以选择手动或自动部署应用程序。我通常通过点击deploy分支(在我的例子中是<code class="fe oh oi oj nw b">main</code>分支)来手动完成这项工作</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/467fee3b8b59a30db1d28f856b585ab5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_JFHQ63OHxZfVAS2"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">作者图片</p></figure><p id="4565" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">10-点击部署后，Heroku将开始构建应用程序。这可能需要几分钟时间</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/1a6b3eecfe0589a167dd58d8b82c6213.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rm-VRL2bIQGUFSD5"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">作者图片</p></figure><p id="c113" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">11-应用程序部署后，您将获得URL</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ot"><img src="../Images/54672ac94074ef8735c7116359cda5df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JkoPPhtfDccZRH57"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">作者图片</p></figure><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/3f12e3bbf4b4bbb88820e62c2e884fb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OYX5VdhsGflc_t1Q"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">作者图片</p></figure><p id="ca7e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">12——看起来它起作用了</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/e9e4bdc8fa6fe4ca78bf97ddab8f7247.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*w_4WIRtOj7IRDJbH"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">作者图片</p></figure><h1 id="1f37" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">下一步？</h1><p id="e755" class="pw-post-body-paragraph ki kj it kk b kl ol ju kn ko om jx kq kr on kt ku kv oo kx ky kz op lb lc ld im bi translated">感谢你阅读并坚持到最后。正如承诺的那样，这里有一些改进这个应用程序的技巧:</p><ul class=""><li id="c7f2" class="lu lv it kk b kl km ko kp kr lw kv lx kz ly ld lz ma mb mc bi translated">处理更多语言(西班牙语、德语等。)通过添加空间模型</li><li id="2985" class="lu lv it kk b kl md ko me kr mf kv mg kz mh ld lz ma mb mc bi translated">处理不同类型的文件，如DOCXs或PDF:有一些python库允许你阅读Word和PDF文档<a class="ae mj" href="https://github.com/python-openxml/python-docx" rel="noopener ugc nofollow" target="_blank">这里</a>和<a class="ae mj" href="https://github.com/mstamy2/PyPDF2" rel="noopener ugc nofollow" target="_blank">这里</a></li><li id="ed4b" class="lu lv it kk b kl md ko me kr mf kv mg kz mh ld lz ma mb mc bi translated">允许多文件上传来处理批量文档</li><li id="8f0d" class="lu lv it kk b kl md ko me kr mf kv mg kz mh ld lz ma mb mc bi translated">检测更多实体，如日期、电子邮件地址或信用卡号。检测这些实体不一定需要NER模型。有时候一个正则表达式就足够了</li><li id="8611" class="lu lv it kk b kl md ko me kr mf kv mg kz mh ld lz ma mb mc bi translated">在更强大的实例上部署。一种方法是将你的应用程序分类，使用你最喜欢的云提供商</li></ul><p id="5108" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你对代码感兴趣，可以在我的<a class="ae mj" href="https://github.com/ahmedbesbes/anonymizer" rel="noopener ugc nofollow" target="_blank"> Github </a> repo上找到。</p><p id="0c45" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">保重！</p><h1 id="950c" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">新到中？您可以每月订阅5美元，并解锁无限的文章— <a class="ae mj" href="https://ahmedbesbes.medium.com/membership" rel="noopener">单击此处。</a></h1></div></div>    
</body>
</html>