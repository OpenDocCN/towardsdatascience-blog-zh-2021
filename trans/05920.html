<html>
<head>
<title>What is ML Observability?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是ML可观测性？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/what-is-ml-observability-29e85e701688?source=collection_archive---------10-----------------------#2021-05-27">https://towardsdatascience.com/what-is-ml-observability-29e85e701688?source=collection_archive---------10-----------------------#2021-05-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="90e0" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/notes-from-industry" rel="noopener" target="_blank">行业笔记</a></h2><div class=""/><div class=""><h2 id="977c" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">在实验室中构建机器学习概念证明与在现实世界中制作模型截然不同。</h2></div><p id="dd23" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">随着越来越多的团队转向机器学习来简化他们的业务或将以前不切实际的技术变成现实，人们对能够帮助将模型从研究实验室带到客户手中的工具和人员的兴趣越来越大。谷歌建立了TFX，脸书建立了FBLearner，优步建立了米开朗基罗，Airbnb建立了Bighead，这些系统允许这些时候扩大他们的MLOps。</p><p id="41c8" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在这些大型科技公司之外，事实是，在实验室中构建机器学习概念证明与在现实世界中制作模型截然不同。让我们先快速看一下在将模型应用于现实世界问题时可能会出错的一些事情。</p><h1 id="2d0c" class="lk ll iq bd lm ln lo lp lq lr ls lt lu kf lv kg lw ki lx kj ly kl lz km ma mb bi translated"><strong class="ak">还能出什么差错？</strong></h1><ol class=""><li id="e6ed" class="mc md iq kq b kr me ku mf kx mg lb mh lf mi lj mj mk ml mm bi translated"><strong class="kq ja">训练发球偏斜</strong></li></ol><p id="9922" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在部署模型时，您的模型很有可能不如在离线验证时执行得好。这些生产移交并不总是进展顺利，这通常被称为培训/服务偏差。</p><p id="3479" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">一个潜在的罪魁祸首是你的模型被训练的数据在统计上不同于你在生产中看到的数据。另一种可能是您的培训环境和生产环境之间的特性转换代码不一致。这可能比人们想象的更常见。通常，包含特性转换代码的笔记本在没有太多版本控制的情况下被传递和更改，这可能会导致混淆到底哪种类型的转换被用来为模型创建特性。如果创建特征的方式在培训和生产环境之间不一致，那么模型的性能会在一开始就受到很大的影响。</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/b94077c72287d14ddcaeb85a663b51d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*p_yNDzE7LeE4MPyI"/></div><p class="mv mw gj gh gi mx my bd b be z dk translated">训练发球偏斜。图片作者。</p></figure><p id="8d19" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja"> 2。改变数据分布</strong></p><p id="f5d4" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">除了训练数据、生产数据和要素转换之间的这种潜在差异之外，您的模型所暴露的数据分布也可能会随着时间的推移而发生变化，这通常称为数据漂移或要素漂移。这种漂移可能是渐进的，也可能在一夜之间发生，并导致模型性能下降。</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi mz"><img src="../Images/beb87a61853dee89de26ba3bc7b7ac72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mmjTE5-pgW9ARqFt"/></div></div><p class="mv mw gj gh gi mx my bd b be z dk translated">改变分布。图片作者。</p></figure><p id="2337" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja"> 3。杂乱的数据</strong></p><p id="f36c" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">另一件需要注意的事情是数据源的保真度。事物不会像代码一样一成不变。你在处理数据。在研究实验室中，通常要花费数千个小时来创建高质量的数据集，以最少的噪音和准确的标签。在现实世界中，你通常没有这样的质量或新鲜度保证。如果您依赖外部数据源，您可能会受到其可靠性的影响。</p><p id="6b40" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">查看这篇文章，了解ML车型的更多<a class="ae ne" href="https://arize.com/the-models-shipped-what-could-possibly-go-wrong/" rel="noopener ugc nofollow" target="_blank">故障模式</a>。</p><h1 id="fc06" class="lk ll iq bd lm ln lo lp lq lr ls lt lu kf lv kg lw ki lx kj ly kl lz km ma mb bi translated"><strong class="ak">可观察性有什么帮助？</strong></h1><p id="172b" class="pw-post-body-paragraph ko kp iq kq b kr me ka kt ku mf kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated">ML可观察性是在模型开发周期的所有阶段获得对模型性能的深入理解的实践:从构建模型开始，到部署模型，一直到产品化。</p><p id="cc4a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">可观察性是部署模型后盲目飞行的团队和能够快速迭代和改进他们的模型的团队之间的关键区别。</p><ol class=""><li id="3c56" class="mc md iq kq b kr ks ku kv kx ni lb nj lf nk lj mj mk ml mm bi translated"><strong class="kq ja">检测时间</strong></li></ol><p id="c16e" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">ML可观察性的第一个关键目标是及时地向你提出这些问题。你可以解决一个问题，直到你知道它，你不希望你的客户遭受几天或几周的痛苦，直到你意识到有事情发生。因此，一个好的ML可观测性解决方案有助于减少检测模型中的问题所需的时间。</p><p id="2015" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这在不同的上下文中可能有不同的意思。如果您正在构建您的模型，一个好的可观察性工具可能帮助模型构建者更快地发现他们的模型的问题，促进一个更紧密的迭代循环；然而，在生产场景的上下文中，ML可观察性工具可以监控关键的性能度量，这些度量可以在出现问题时通知模型所有者。</p><p id="86f2" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja"> 2。解决问题的时间</strong></p><p id="26b3" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">尽管检测问题是第一步，但这并不是ML可观察性的终点。一旦检测到问题，可观测性工具需要促进问题的解决。一个好的可观察性工具的关键标志是一个团队能多快找到解决问题的根本原因。</p><p id="e597" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">回到我们之前讨论过的，模型的性能有多种回归方式。一个好的ML可观测性解决方案需要引导模型所有者了解发生变化的输入数据分布、特征变换或模型预测预期，并提供解决方案。</p><p id="bf1e" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">例如，如果您发现模型的输入特征随着时间的推移而不断漂移，并导致模型错误预测一组特定的示例，ML可观察性工具会通知您，推荐一种方法来增加训练集，并提示您重新训练模型。</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi nl"><img src="../Images/184585e118ae8a6454e0c127e9810281.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XAj1pVqlU5zSd7sn"/></div></div><p class="mv mw gj gh gi mx my bd b be z dk translated">ML工程师生命周期。图片作者。</p></figure><h1 id="ae2d" class="lk ll iq bd lm ln lo lp lq lr ls lt lu kf lv kg lw ki lx kj ly kl lz km ma mb bi translated"><strong class="ak">如何实现ML可观测性？</strong></h1><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi nm"><img src="../Images/b660a625524476fb14a78096b8d5cfa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Fe15NNW3s8RnXPPt"/></div></div><p class="mv mw gj gh gi mx my bd b be z dk translated">评估商店。图片作者。</p></figure><p id="cbcf" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">现在你可能认为ML可观察性听起来很棒，但是我的团队实际上是如何实现的呢？ML可观测性可以通过应用评估库来实现。评估库的工作是帮助您验证模型，调试模型预测的问题，显示表现最差的数据，并为您提供有关如何以及何时重新训练模型的建议。</p><p id="99fa" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">为了更深入地了解评估库的作用，让我们探索一下评估库如何适应ML模型生命周期的每一部分。</p><p id="c23f" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">启动前验证</strong></p><p id="fec2" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在模型构建的训练和验证阶段，评估存储在跟踪训练数据中每个定义部分的模型性能方面起着关键作用。当模型的性能对于某个特定部分发生显著变化时，或者从测试结果中可能出现新的感兴趣的数据部分时，评估存储的工作就是通知模型构建者。此外，在培训和验证期间，评估存储应该检测输入数据是否与生产数据有显著差异，以帮助避免我们之前提到的培训-生产偏差问题。</p><p id="dd28" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">转到模型部署，评估库还可以帮助您选择最适合推广到生产的模型。通过跟踪模型在生产中对一组候选模型所做的预测，评估存储可以编译关于哪个模型在各种数据切片中表现最佳的结果。</p><p id="a1cd" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">监控</strong></p><p id="5ad3" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">将模型部署到生产环境中时，评估存储会跟踪所有输入要素和输出预测，以便在这些分布发生显著变化时发出警报。最重要的是，评估商店需要跟踪生产中每个输入示例的预测和基本事实。</p><p id="a68e" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在一些模型应用程序中，在模型做出预测后，地面真相立即可用——想想搜索结果，用户点击最相关的链接，你现在就知道你放在顶部的链接是否真的与用户最相关。</p><p id="3c20" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">然而，在其他情况下，地面真相可能被延迟或完全丢失。在这些更棘手的场景中，评估存储的工作是帮助团队跟踪与模型性能相关的代理指标，并在这些代理指标的分布发生显著变化时向模型所有者提供警报。</p><p id="4aac" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">根本原因</strong></p><p id="b271" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在生产中检测到模型的问题后，评估存储可以显示输入数据、要素、基本事实/代理指标中的哪些关键分布导致了模型性能的变化。由于评估存储一直跟踪这个模型元数据，它可以检测每个分布随时间的漂移，并找出最大的影响因素。</p><p id="16dd" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">检测模型回归并将其分类为故障模式的能力有助于为模型所有者应该如何修复问题提供指导。例如，假设您有一个模型，该模型试图预测向用户推荐哪个电视节目，以最大化用户观看该节目的可能性。在你不知情的情况下，已经有大量年轻用户开始使用你的产品，他们的喜好并没有很好的体现在训练数据中。</p><p id="c370" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">评估商店将能够检测和显示模型性能的显著变化，并指出输入数据和要素分布的变化。然后，您可以深入研究哪些特征发生了最大的变化，并看到“年龄”特征的分布在模型回归时已经向更年轻的一侧转移。</p><p id="bb6e" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">此时，您可以使用您的评估商店来查找这些新的年轻用户的示例，用这些示例增加您的训练集，并重新训练您的模型以更好地考虑这些新用户。</p><p id="4f99" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">改进型号</strong></p><p id="1235" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">随着数据集变得越来越大，以支持更大的模型，问题空间变宽，评估存储的一个关键作用是显示模型表现不佳的数据切片。了解到存在哪些机会来提高模型的性能后，模型构建者可以扩充他们的训练集，添加新功能，重新训练他们的模型，或者带着这些新知识回到绘图板。</p><h1 id="1f58" class="lk ll iq bd lm ln lo lp lq lr ls lt lu kf lv kg lw ki lx kj ly kl lz km ma mb bi translated"><strong class="ak">结论</strong></h1><p id="8bde" class="pw-post-body-paragraph ko kp iq kq b kr me ka kt ku mf kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated">总之，通过应用评估库实现的ML可观测性可以在验证、监控、故障排除和改进模型的整个过程中帮助您的团队。通过自省模型在一段时间内的表现，ML observability可以帮助您的团队识别训练数据中的差距，找出模型表现不佳的示例，并排比较模型表现，验证模型，并识别生产中的问题。停止盲目飞行，让你的ML努力更上一层楼。</p><h2 id="a5cc" class="nn ll iq bd lm no np dn lq nq nr dp lu kx ns nt lw lb nu nv ly lf nw nx ma iw bi translated">联系我们</h2><p id="1c1a" class="pw-post-body-paragraph ko kp iq kq b kr me ka kt ku mf kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated">如果这个博客引起了你的注意，并且你渴望了解更多关于<a class="ae ne" href="https://arize.com/platform-overview/" rel="noopener ugc nofollow" target="_blank">机器学习可观察性</a>和<a class="ae ne" href="https://arize.com/model-monitoring/" rel="noopener ugc nofollow" target="_blank">模型监控</a>，请查看我们其他的<a class="ae ne" href="https://arize.com/blog/" rel="noopener ugc nofollow" target="_blank">博客</a>和<a class="ae ne" href="https://arize.com/ml-monitoring/" rel="noopener ugc nofollow" target="_blank"> ML监控</a>上的资源！如果您有兴趣加入一个有趣的rockstar工程团队，帮助模型成功生产，请随时<a class="ae ne" href="https://arize.com/contact/" rel="noopener ugc nofollow" target="_blank">联系</a>我们，并在此找到我们的空缺职位<a class="ae ne" href="https://arize.com/careers/" rel="noopener ugc nofollow" target="_blank"/>！</p></div></div>    
</body>
</html>