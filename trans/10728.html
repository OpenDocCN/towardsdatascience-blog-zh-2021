<html>
<head>
<title>How to Use Abstract Classes in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Python中使用抽象类</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-use-abstract-classes-in-python-d4d2ddc02e90?source=collection_archive---------2-----------------------#2021-10-16">https://towardsdatascience.com/how-to-use-abstract-classes-in-python-d4d2ddc02e90?source=collection_archive---------2-----------------------#2021-10-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/6a50016c4bd4dbbf36f698afa66aa427.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Mpa2ZGy5wlugwNn5mlbDw.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@jrkorpa?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Jr Korpa </a>在<a class="ae kf" href="https://unsplash.com/s/photos/free-abstract-art?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="fc7c" class="kg kh it bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">什么是抽象类？</h1><p id="1413" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">抽象类是一个类，但不是可以直接从中创建对象的类。它的目的是定义其他类应该是什么样子，也就是说，它们应该有什么样的方法和属性。</p><p id="9cb4" class="pw-post-body-paragraph le lf it lg b lh mc lj lk ll md ln lo lp me lr ls lt mf lv lw lx mg lz ma mb im bi translated">在抽象类中定义(但未实现)的方法和属性被称为<strong class="lg iu">抽象方法</strong>和<strong class="lg iu">抽象属性</strong>。所有抽象方法和属性都需要在子类中实现，以便能够从中创建对象。</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><p id="b3a5" class="pw-post-body-paragraph le lf it lg b lh mc lj lk ll md ln lo lp me lr ls lt mf lv lw lx mg lz ma mb im bi translated">我们可以通过继承属于<code class="fe mo mp mq mr b"><a class="ae kf" href="https://docs.python.org/3/library/abc.html" rel="noopener ugc nofollow" target="_blank">abc</a></code> <a class="ae kf" href="https://docs.python.org/3/library/abc.html" rel="noopener ugc nofollow" target="_blank">模块</a>的<code class="fe mo mp mq mr b">ABC</code>类来创建一个抽象类。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="2703" class="na kh it mr b gy nb nc l nd ne">from abc import (<br/>  ABC,<br/>  abstractmethod,<br/>)<br/></span><span id="9cdf" class="na kh it mr b gy nf nc l nd ne">class BasicPokemon(<strong class="mr iu">ABC</strong>):<br/>  def __init__(self, name):<br/>    self.name = name<br/>    self._level = 1</span><span id="ca0c" class="na kh it mr b gy nf nc l nd ne">  <strong class="mr iu">@abstractmethod</strong><br/>  def main_attack(self):<br/>    ...</span></pre><p id="a821" class="pw-post-body-paragraph le lf it lg b lh mc lj lk ll md ln lo lp me lr ls lt mf lv lw lx mg lz ma mb im bi translated">在上面的代码中，我们创建了一个名为<code class="fe mo mp mq mr b">BasicPokemon</code>的新抽象类。我们通过使用装饰器<code class="fe mo mp mq mr b">abstractmethod</code>指出方法<code class="fe mo mp mq mr b">main_attack</code>是一个抽象方法，这意味着我们期望在<code class="fe mo mp mq mr b">BasicPokemon</code>的每个子类中实现它。</p><p id="4286" class="pw-post-body-paragraph le lf it lg b lh mc lj lk ll md ln lo lp me lr ls lt mf lv lw lx mg lz ma mb im bi translated">如果你尝试直接从<code class="fe mo mp mq mr b">BasicPokemon</code>创建一个对象会发生什么？<code class="fe mo mp mq mr b">TypeError</code>！</p><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ng"><img src="../Images/5cbf940ee664eea08373b6e213bf6694.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WTbtaIy3CFQWy1YksqQ0Aw.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">试图从抽象类创建一个新对象，但由于main_attack未实现而失败。图片由作者提供。</p></figure><p id="7dc7" class="pw-post-body-paragraph le lf it lg b lh mc lj lk ll md ln lo lp me lr ls lt mf lv lw lx mg lz ma mb im bi translated">现在，你会注意到<code class="fe mo mp mq mr b">BasicPokemon</code>的<code class="fe mo mp mq mr b">__init__</code>方法需要一个<code class="fe mo mp mq mr b">name</code>参数，因此上面的代码无论如何都不会起作用。这里需要注意的是，它甚至没有使用<code class="fe mo mp mq mr b">__init__</code>方法来检查这一点。事实上，它有一个尚未实现的抽象方法，因此它失败了！</p><p id="bf92" class="pw-post-body-paragraph le lf it lg b lh mc lj lk ll md ln lo lp me lr ls lt mf lv lw lx mg lz ma mb im bi translated">这就是如何使用<code class="fe mo mp mq mr b">BasicPokemon</code>类。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="068a" class="na kh it mr b gy nb nc l nd ne">from collections import namedtuple</span><span id="305b" class="na kh it mr b gy nf nc l nd ne"><br/>Attack = namedtuple('Attack', ('name', 'damage'))</span><span id="f08f" class="na kh it mr b gy nf nc l nd ne"><br/><strong class="mr iu">class Pikachu(BasicPokemon):</strong><br/>  def main_attack(self):<br/>    return Attack('Thunder Shock', 5)</span><span id="a4e2" class="na kh it mr b gy nf nc l nd ne"><br/><strong class="mr iu">class Charmander(BasicPokemon):</strong><br/>  def main_attack(self):<br/>    return Attack('Flame Thrower', 5)</span></pre><p id="0ffc" class="pw-post-body-paragraph le lf it lg b lh mc lj lk ll md ln lo lp me lr ls lt mf lv lw lx mg lz ma mb im bi translated">现在我们可以毫无问题地从这些类中创建对象。</p><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/70ec7235b10980df3c3638e260a2db1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lfvc8195h_Nlig4-g8kmeA.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">创造了一个新的皮卡丘，名叫…乔治。图片由作者提供。</p></figure><p id="df77" class="pw-post-body-paragraph le lf it lg b lh mc lj lk ll md ln lo lp me lr ls lt mf lv lw lx mg lz ma mb im bi translated">注意，您也可以使用相同的<code class="fe mo mp mq mr b">abstractmethod</code>装饰器创建抽象属性。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="b606" class="na kh it mr b gy nb nc l nd ne">from abc import (<br/>  ABC,<br/>  abstractmethod,<br/>)<br/></span><span id="5610" class="na kh it mr b gy nf nc l nd ne">class BasicPokemon(<strong class="mr iu">ABC</strong>):<br/>  def __init__(self, name):<br/>    self.name = name</span><span id="34e8" class="na kh it mr b gy nf nc l nd ne"><strong class="mr iu">  @property<br/>  @abstractmethod</strong><br/>  def level(self):<br/>    ...</span><span id="4ee6" class="na kh it mr b gy nf nc l nd ne"><strong class="mr iu">  @abstractmethod</strong><br/>  def main_attack(self):<br/>    ...<br/></span></pre><p id="874d" class="pw-post-body-paragraph le lf it lg b lh mc lj lk ll md ln lo lp me lr ls lt mf lv lw lx mg lz ma mb im bi translated">现在，我们需要在子类中实现属性<code class="fe mo mp mq mr b">level</code>和<code class="fe mo mp mq mr b">main_attack</code>方法。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="e89d" class="na kh it mr b gy nb nc l nd ne">class Pikachu(BasicPokemon):<br/>  <strong class="mr iu">@property</strong><br/>  def level(self):<br/>    return 1</span><span id="dd53" class="na kh it mr b gy nf nc l nd ne">  def main_attack(self):<br/>    return Attack('Thunder Shock', 5)</span></pre><h1 id="c3fa" class="kg kh it bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">我们可以只使用NotImplementError…对吗？</h1><p id="7268" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">你们中的一些人可能想知道为什么我们不能使用一个普通的类(即不从<code class="fe mo mp mq mr b">ABC</code>继承)并为还没有实现的方法产生一个<code class="fe mo mp mq mr b">NotImplementerError</code>，就像下面的例子。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="07f1" class="na kh it mr b gy nb nc l nd ne">class NotAbstractBasicPokemon:<br/>  def __init__(self, name):<br/>    self.name = name<br/>    self._level = 1</span><span id="d7ff" class="na kh it mr b gy nf nc l nd ne">  def main_attack(self):<br/>    <strong class="mr iu">raise NotImplementedError()</strong></span></pre><p id="2bca" class="pw-post-body-paragraph le lf it lg b lh mc lj lk ll md ln lo lp me lr ls lt mf lv lw lx mg lz ma mb im bi translated">上面的代码将让你从<code class="fe mo mp mq mr b">NotAbstractBasicPokemon</code>创建对象，只有当你试图使用<code class="fe mo mp mq mr b">main_attack</code>时才会失败。这通常是不可取的行为。</p><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ni"><img src="../Images/76714552353dd5530e39135407c0caff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nPD5IzCD8OA3d36jzHB58Q.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">从NotAbstractBasicPokemon创建对象，并在尝试调用main_attack()时出错。图片由作者提供。</p></figure><p id="dddf" class="pw-post-body-paragraph le lf it lg b lh mc lj lk ll md ln lo lp me lr ls lt mf lv lw lx mg lz ma mb im bi translated">相反，试图从<code class="fe mo mp mq mr b">BasicPokemon</code>创建一个对象会立即导致错误，正如我们前面看到的。</p><h1 id="9601" class="kg kh it bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">什么时候应该使用抽象类？</h1><p id="0020" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">在我们在这篇文章中使用的例子中，<code class="fe mo mp mq mr b">BasicPokemon</code>的目的是作为一个<strong class="lg iu">的蓝图，为特定种类的口袋妖怪创建其他类</strong>。拥有一个每个人都需要继承的抽象类来创建一个新的口袋妖怪有几个明显的好处:</p><ul class=""><li id="22c1" class="nj nk it lg b lh mc ll md lp nl lt nm lx nn mb no np nq nr bi translated">避免代码重复。</li><li id="481f" class="nj nk it lg b lh ns ll nt lp nu lt nv lx nw mb no np nq nr bi translated">确保其他人实现子类方式的一致性。</li><li id="1d24" class="nj nk it lg b lh ns ll nt lp nu lt nv lx nw mb no np nq nr bi translated">确保没有人忘记在子类中实现关键的方法和属性。</li></ul><p id="4b6c" class="pw-post-body-paragraph le lf it lg b lh mc lj lk ll md ln lo lp me lr ls lt mf lv lw lx mg lz ma mb im bi translated">当你在一个团队中工作，并且你希望其他人重用/扩展代码时，以上几点尤其重要。</p><h1 id="30ee" class="kg kh it bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated"><strong class="ak">结论</strong></h1><p id="6b80" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">在这篇文章中，我们看了Python的抽象类，以及它们如何给我们一种方法来描述我们期望子类如何被实现，以及当关键部分没有被定义时如何警告用户(即其他程序员或我们未来的自己)。</p><div class="nx ny gp gr nz oa"><a href="https://eminik355.medium.com/subscribe" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">每当阿耳忒弥斯·卡尼出版时，就收到一封电子邮件。</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">每当阿耳忒弥斯·卡尼出版时，就收到一封电子邮件。通过注册，您将创建一个中型帐户，如果您还没有…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">eminik355.medium.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo jz oa"/></div></div></a></div></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><ul class=""><li id="01f4" class="nj nk it lg b lh mc ll md lp nl lt nm lx nn mb no np nq nr bi translated"><a class="ae kf" href="https://eminik355.medium.com/" rel="noopener">通过Medium </a>关注我的更新。</li><li id="0fb4" class="nj nk it lg b lh ns ll nt lp nu lt nv lx nw mb no np nq nr bi translated"><a class="ae kf" href="https://eminik355.medium.com/membership" rel="noopener">通过我的推荐链接加入Medium </a>以无限制访问帖子。你的会员费直接支持我和你看的作家。</li></ul></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="adfa" class="kg kh it bd ki kj op kl km kn oq kp kq kr or kt ku kv os kx ky kz ot lb lc ld bi translated"><strong class="ak">参考文献</strong></h1><p id="da81" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">[1]<a class="ae kf" href="https://docs.python.org/3/library/abc.html" rel="noopener ugc nofollow" target="_blank">https://docs.python.org/3/library/abc.html</a></p><p id="7576" class="pw-post-body-paragraph le lf it lg b lh mc lj lk ll md ln lo lp me lr ls lt mf lv lw lx mg lz ma mb im bi translated"><a class="ae kf" href="https://realpython.com/python-interface/" rel="noopener ugc nofollow" target="_blank">https://realpython.com/python-interface/</a></p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><p id="aef0" class="pw-post-body-paragraph le lf it lg b lh mc lj lk ll md ln lo lp me lr ls lt mf lv lw lx mg lz ma mb im bi translated"><strong class="lg iu">更多来自同一作者。</strong></p><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/how-not-to-use-python-lists-d06cbe8e593"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">如何不使用Python列表</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">理解Python中的可变对象。</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="ou l ol om on oj oo jz oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a href="https://medium.com/analytics-vidhya/multi-armed-bandits-part-1-epsilon-greedy-algorithm-with-python-code-534b9e2abc9" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">多臂强盗:Epsilon-Greedy算法和Python代码</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">了解Epsilon-Greedy的工作原理。为所有实验提供完整的python代码。</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">medium.com</p></div></div><div class="oj l"><div class="ov l ol om on oj oo jz oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a href="https://medium.com/analytics-vidhya/calculating-using-monte-carlo-simulations-337cff638ac5" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">使用蒙特卡罗模拟计算𝛑</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">用Python代码介绍蒙特卡罗模拟。</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">medium.com</p></div></div><div class="oj l"><div class="ow l ol om on oj oo jz oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/going-bayesian-testing-rate-metrics-82e872b79175"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">走向贝叶斯:测试速率度量</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">如何在没有p值和置信区间的情况下运行速率度量的A/B测试？</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="ox l ol om on oj oo jz oa"/></div></div></a></div></div></div>    
</body>
</html>