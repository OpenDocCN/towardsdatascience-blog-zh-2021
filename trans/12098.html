<html>
<head>
<title>Mastering Histograms in Matplotlib</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Matplotlib 中掌握直方图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/mastering-histograms-in-matplotlib-6cf5ed084d48?source=collection_archive---------35-----------------------#2021-12-06">https://towardsdatascience.com/mastering-histograms-in-matplotlib-6cf5ed084d48?source=collection_archive---------35-----------------------#2021-12-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/4bbfca819dacf1d79942b5ed52e70fd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DiAyociHgzgC8mvt"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">安迪·霍尔在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><div class=""/><div class=""><h2 id="95ae" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">制作直方图的细节</h2></div><p id="0800" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">直方图是最受欢迎的图表之一。理解连续变量的总体分布是很有用的。所以，几乎在任何数据分析或探索性数据分析，或机器学习项目中，你都会从一些直方图开始。在本文中，我将解释如何在 Matplotlib 中制作直方图。像往常一样，我将从一个图中最简单的直方图开始，慢慢走向一些更有趣的直方图。</p><blockquote class="lu lv lw"><p id="589d" class="ky kz lx la b lb lc kk ld le lf kn lg ly li lj lk lz lm ln lo ma lq lr ls lt im bi translated">我将使用公开可用的 NHANES 数据集。<a class="ae jg" href="https://wwwn.cdc.gov/nchs/nhanes/continuousnhanes/releasenotes.aspx?BeginYear=2015" rel="noopener ugc nofollow" target="_blank">请看这里的发布说明。</a></p></blockquote><p id="3eaa" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae jg" href="https://github.com/rashida048/Datasets/blob/master/nhanes_2015_2016.csv" rel="noopener ugc nofollow" target="_blank">请随意从这里下载数据集</a>。</p><p id="ff47" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们潜水吧。</p><p id="e9d1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，导入必要的包并制作数据框架:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="e901" class="mk ml jj mg b gy mm mn l mo mp">import pandas as pd<br/>import matplotlib.pyplot as plt</span><span id="c939" class="mk ml jj mg b gy mq mn l mo mp">df = pd.read_csv("nhanes_2015_2016.csv")<br/>df.head()</span></pre><p id="872b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">数据集相当大！这些是数据集中的列:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="d108" class="mk ml jj mg b gy mm mn l mo mp">df.columns</span></pre><p id="a94d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="0952" class="mk ml jj mg b gy mm mn l mo mp">Index(['SEQN', 'ALQ101', 'ALQ110', 'ALQ130', 'SMQ020', 'RIAGENDR', 'RIDAGEYR', 'RIDRETH1', 'DMDCITZN', 'DMDEDUC2', 'DMDMARTL', 'DMDHHSIZ', 'WTINT2YR', 'SDMVPSU', 'SDMVSTRA', 'INDFMPIR', 'BPXSY1', 'BPXDI1', 'BPXSY2', 'BPXDI2', 'BMXWT', 'BMXHT', 'BMXBMI', 'BMXLEG', 'BMXARML', 'BMXARMC', 'BMXWAIST', 'HIQ210'], dtype='object')</span></pre><p id="1034" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">列名看起来很难理解。但是我将解释我将在本文中使用的列的含义。</p><h2 id="ea9d" class="mk ml jj bd mr ms mt dn mu mv mw dp mx lh my mz na ll nb nc nd lp ne nf ng nh bi translated">一个简单的直方图</h2><p id="b6bb" class="pw-post-body-paragraph ky kz jj la b lb ni kk ld le nj kn lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">这是最简单的直方图。收缩压的分布:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="4035" class="mk ml jj mg b gy mm mn l mo mp">df['BPXSY1'].hist(bins = 15, figsize=(8, 6))<br/>plt.xlabel("Systolic Blood Pressure")<br/>plt.title("Distribution of Systolic Blood Pressure")<br/>plt.show()</span></pre><figure class="mb mc md me gt iv gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/2ac6271eed4224f90b4818a060a9dbe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*azu1OqkNVl06W6aGM0bvoQ.png"/></div></figure><p id="461f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一个非常简单的直方图，显示了轻微的右偏分布。</p><p id="efa0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是在处理大型数据集时，在一个图中进行多次分布通常非常有用。下一张图将显示体重、身高和身体质量指数的分布:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="23ff" class="mk ml jj mg b gy mm mn l mo mp">df[['BMXWT', 'BMXHT', 'BMXBMI']].plot.hist(bins = 15, figsize=(10,6), alpha = 0.6)<br/>plt.show()</span></pre><figure class="mb mc md me gt iv gh gi paragraph-image"><div class="gh gi no"><img src="../Images/bab511c271c4ecab5c07ca40ea19edd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*BcRCwrI6LXWKYq65tncqlQ.png"/></div></figure><p id="5d45" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">幸运的是，在这个图中，三个分布有非常不同的范围。所以，不会有太多的重叠。但是如果有太多的重叠发生，最好将两个图分开。就像如果我们在同一个图中绘制两个收缩压和两个舒张压，它们会重叠太多，很难理解它们。在这些情况下，最好在单独的支线剧情中进行分配:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="9090" class="mk ml jj mg b gy mm mn l mo mp">df[['BPXSY1', 'BPXDI1', 'BPXSY2', 'BPXDI2']].hist(<br/>    bins=15,<br/>    figsize=(10, 8),<br/>    grid = False,<br/>    rwidth = 0.9,<br/>)<br/>plt.show()</span></pre><figure class="mb mc md me gt iv gh gi paragraph-image"><div class="gh gi np"><img src="../Images/5e33df1a6a703be0b7eb43da6e6899e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*67onM_w6If05kaKKcID4UA.png"/></div></figure><p id="3fbc" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当所有四个血压计并排放置时，会更加有趣和有用。因为你可以比较它们。如果我们能把它们放在同一个尺度上，尤其是当我们需要比较它们的时候，那就更有用了。这里我们用相同的 x 轴和 y 轴限制来放置它们:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="566d" class="mk ml jj mg b gy mm mn l mo mp">df[['BPXSY1', 'BPXDI1', 'BPXSY2', 'BPXDI2']].hist(<br/>    bins=15,<br/>    figsize=(12, 6),<br/>    grid = False,<br/>    rwidth = 0.9,<br/>    sharex = True,<br/>    sharey = True<br/>)<br/>plt.show()</span></pre><figure class="mb mc md me gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nq"><img src="../Images/960fe1d94c81e1ce34f9f65b6f3789cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*VGwcUGaV-dssCmdzvRGe5w.png"/></div></div></figure><p id="1208" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">同样的四个变量，但看起来不同。原因是它们的规模相同。所以，几乎都缩水了。一些在 x 方向收缩，一些在 y 方向收缩。</p><p id="e8c5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在上面两张图中，不同的变量有不同的分布。但是如果我想根据一个分类变量的不同类别只绘制一个连续变量呢？</p><p id="7a90" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们有一个分类变量“DM deduct 2 ”,它代表人口的教育水平。我想画出每个教育水平的收缩压分布图。</p><p id="9364" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是在这个数据集中，教育水平用数字表示。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="401f" class="mk ml jj mg b gy mm mn l mo mp">df['DMDEDUC2'].unique()</span></pre><p id="5973" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="1288" class="mk ml jj mg b gy mm mn l mo mp">array([ 5.,  3.,  4.,  2., nan,  1.,  9.])</span></pre><p id="e632" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我首先将它们替换为一些有意义的字符串值，如下所示:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="2e3d" class="mk ml jj mg b gy mm mn l mo mp">df["DMDEDUC2x"] = df.DMDEDUC2.replace({1: "&lt;9", 2: "9-11", 3: "HS/GED", 4: "Some college/AA", 5: "College", 7: "Refused", 9: "Don't know"})</span></pre><p id="9622" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们绘制每个教育水平的收缩压直方图:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="608a" class="mk ml jj mg b gy mm mn l mo mp">df.hist(column = "BPXSY1",<br/>        by = "DMDEDUC2x",<br/>        bins = 15,<br/>        figsize=(10, 12),<br/>        grid = False,<br/>        rwidth = 0.9,<br/>        sharex = True,<br/>        sharey = True<br/>       )</span><span id="6306" class="mk ml jj mg b gy mq mn l mo mp">plt.show()</span></pre><figure class="mb mc md me gt iv gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/5041f0452d959f12f0c6465d330d3c83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/format:webp/1*EvXWf8KArnWC7tyI4957Dw.png"/></div></figure><p id="3c36" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这里！有时，每个直方图有一个单独的行可能会很有趣。让我们看看它是什么样子的:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="0ef6" class="mk ml jj mg b gy mm mn l mo mp">ax = df.hist(column = "BPXSY1",<br/>        by = "DMDEDUC2x",<br/>        bins = 15,<br/>        figsize=(8, 18),<br/>        grid = False,<br/>        rwidth = 0.9,<br/>        sharex = True,<br/>        sharey = True,<br/>        layout=(6, 1)<br/>       )</span><span id="5682" class="mk ml jj mg b gy mq mn l mo mp">for x in ax:<br/>    #Removing the left, right and top lines of the box of each plot<br/>    x.spines['right'].set_visible(False)<br/>    x.spines['left'].set_visible(False)<br/>    x.spines['top'].set_visible(False)<br/>    <br/>    #Adding the x-ticks on each plot<br/>    x.tick_params(axis="both", labelbottom = 'on')<br/>    x.tick_params(axis='x', rotation = 0)<br/>    <br/>    plt.ylim(0, 300)<br/>    <br/>    vals = x.get_yticks()<br/>    <br/>    #Getting the grey horizontal grids in each plot<br/>    for v in vals:<br/>        x.axhline(y = v, linestyle="solid", color = 'gray', alpha = 0.1)<br/>        <br/>#Adding some space between each plot<br/>plt.subplots_adjust(hspace=0.8)<br/>plt.show()</span></pre><figure class="mb mc md me gt iv gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/c6a2857bcdd9ffc785676456ac0cf0d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*sRvhMZqjvPmo3Capo2oQHw.png"/></div></figure><p id="bb78" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些是今天所有的直方图。</p><h2 id="8753" class="mk ml jj bd mr ms mt dn mu mv mw dp mx lh my mz na ll nb nc nd lp ne nf ng nh bi translated">结论</h2><p id="07a2" class="pw-post-body-paragraph ky kz jj la b lb ni kk ld le nj kn lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">这些都是 Matplotlib 中直方图的绘图。希望这是一个有用的教程，你将能够在你的项目中使用这些类型的图。</p><p id="cd84" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里有一个 youtube 视频，一步一步地解释了相同类型的情节</p><figure class="mb mc md me gt iv"><div class="bz fp l di"><div class="nt nu l"/></div></figure><h2 id="60fa" class="mk ml jj bd mr ms mt dn mu mv mw dp mx lh my mz na ll nb nc nd lp ne nf ng nh bi translated">更多阅读</h2><div class="is it gp gr iu nv"><a rel="noopener follow" target="_blank" href="/how-to-present-the-relationships-amongst-multiple-variables-in-python-70f1b5693f5"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd jk gy z fp oa fr fs ob fu fw ji bi translated">如何在 Python 中呈现多个变量之间的关系</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">了解如何使用 Python 中的多元图表和绘图来呈现要素之间的关系</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">towardsdatascience.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj ja nv"/></div></div></a></div><div class="is it gp gr iu nv"><a rel="noopener follow" target="_blank" href="/zooming-in-and-zooming-out-in-matplotlib-to-better-understand-the-data-b4a5f5b4107d"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd jk gy z fp oa fr fs ob fu fw ji bi translated">在 Matplotlib 中放大和缩小以更好地理解数据</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">为每个地块提供完整的代码</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">towardsdatascience.com</p></div></div><div class="oe l"><div class="ok l og oh oi oe oj ja nv"/></div></div></a></div><div class="is it gp gr iu nv"><a rel="noopener follow" target="_blank" href="/developing-a-convolutional-neural-network-model-using-the-unlabeled-image-files-directly-from-the-124180b8f21f"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd jk gy z fp oa fr fs ob fu fw ji bi translated">开发一个卷积神经网络模型使用未标记的图像文件直接从…</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">使用图像生成器将图像自动标记为子目录</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">towardsdatascience.com</p></div></div><div class="oe l"><div class="ol l og oh oi oe oj ja nv"/></div></div></a></div><div class="is it gp gr iu nv"><a rel="noopener follow" target="_blank" href="/an-overview-of-data-analysis-with-the-tidyverse-library-in-r-e94c151bf7d1"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd jk gy z fp oa fr fs ob fu fw ji bi translated">使用 R 中的 Tidyverse 库进行数据分析概述</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">很好的学习资源，也可以用作备忘单</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">towardsdatascience.com</p></div></div><div class="oe l"><div class="om l og oh oi oe oj ja nv"/></div></div></a></div></div></div>    
</body>
</html>