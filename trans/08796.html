<html>
<head>
<title>Predictive maintenance — 5 minutes demo of an end to end machine learning project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">预测性维护— 5分钟的端到端机器学习项目演示</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/predictive-maintenance-5minutes-demo-of-an-end-to-end-machine-learning-project-60941f1c9793?source=collection_archive---------37-----------------------#2021-08-13">https://towardsdatascience.com/predictive-maintenance-5minutes-demo-of-an-end-to-end-machine-learning-project-60941f1c9793?source=collection_archive---------37-----------------------#2021-08-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8aa5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">构建机器学习项目的循序渐进和端到端指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a6091ed57adfc45e2487e3c4c5ae415d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*e5_fu1AbNTHQIyLj"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">卢卡·斯拉普尼卡在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h2 id="8f9e" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">背景</h2><p id="aac8" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">剩余使用寿命(RUL)是指系统一般工作一段时间后能继续正常运行的剩余寿命时间。借助RUL，工程师可以安排维护时间、优化运行效率并避免计划外停机。因此，预测RUL是预测性维护计划的首要任务。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/e2899a6b850c02259f08b1c6bd774d7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*Kj6B_4C5Ufgirx40tMtSBA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="782c" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">这张照片显示了机器随着时间的推移而退化的情况。如果<strong class="lu ir"> A </strong>是当前条件，而<strong class="lu ir"> B </strong>是机器将失效的最小可接受条件，剩余使用寿命计算为这两点之间的时间。如果提前估计到RUL，就可以对其进行维护或更换，以避免计划外停机和经济损失。由于RUL的预测对运营和决策具有重要意义，因此对其进行准确的估计至关重要。</p><p id="38f3" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">今天，我们的任务是通过机器学习模型开发一个用于剩余使用寿命预测的实时智能应用程序。我们使用NASA提供的涡扇发动机退化仿真数据集作为训练集和测试集，开发了一个智能预测硬件剩余寿命的应用程序，并完成实时预测。最终的预测结果是<strong class="lu ir"> time_ in_ cycle </strong>，这意味着在可接受的条件下，发动机未来可以旋转多少次。</p><p id="934a" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">可以直接按照以下步骤操作。后面我们还会附上培训所需的代码。本文主要展示了如何快速完成一个端到端的机器学习应用，省略了数据探索的过程。</p><h2 id="72ad" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">使用docker提取演示图像</h2><p id="82e1" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">首先，请检查docker(运行演示的唯一依赖组件)是否安装在您的计算机上。</p><pre class="kg kh ki kj gt mr ms mt mu aw mv bi"><span id="f38a" class="kw kx iq ms b gy mw mx l my mz">$ docker pull 4pdosc/openmldb_turbo_rul_demo:0.7.0</span></pre><h2 id="cc16" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">运行图像</h2><p id="f932" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">这里我们选择bash命令来运行它</p><pre class="kg kh ki kj gt mr ms mt mu aw mv bi"><span id="6fa1" class="kw kx iq ms b gy mw mx l my mz">$ docker run -it 4pdosc/openmldb_turbo_rul_demo:0.7.0 bash</span></pre><h2 id="b508" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">切换到相应的目录并初始化环境。</h2><p id="2662" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">整个初始化过程包括安装<a class="ae kv" href="https://github.com/4paradigm/OpenMLDB" rel="noopener ugc nofollow" target="_blank"> OpenMLDB </a>和相关的运行环境。关于初始化脚本，请参考<em class="na"> init。上海</em></p><pre class="kg kh ki kj gt mr ms mt mu aw mv bi"><span id="c2f2" class="kw kx iq ms b gy mw mx l my mz">$ cd rul &amp;&amp; sh init.sh</span></pre><h2 id="0fd6" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">将历史数据导入到<a class="ae kv" href="https://github.com/4paradigm/OpenMLDB" rel="noopener ugc nofollow" target="_blank"> OpenMLDB </a></h2><p id="1d16" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">使用<a class="ae kv" href="https://github.com/4paradigm/OpenMLDB" rel="noopener ugc nofollow" target="_blank"> OpenMLDB </a>进行时间序列特征计算需要历史数据，所以我们将历史数据导入<a class="ae kv" href="https://github.com/4paradigm/OpenMLDB" rel="noopener ugc nofollow" target="_blank"> OpenMLDB </a>进行实时推理。历史数据可用于特征推断。</p><ol class=""><li id="b6e7" class="nb nc iq lu b lv mm ly mn lf nd lj ne ln nf mk ng nh ni nj bi translated">进口代码请参考<em class="na"> import.py </em>。</li><li id="1d5f" class="nb nc iq lu b lv nk ly nl lf nm lj nn ln no mk ng nh ni nj bi translated">使用' t <em class="na"> est here_ Fd004。TXT </em>`作为历史数据，有多个发动机循环的检测数据。</li></ol><pre class="kg kh ki kj gt mr ms mt mu aw mv bi"><span id="1cfc" class="kw kx iq ms b gy mw mx l my mz">$ python3 import.py</span></pre><h2 id="d640" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">训练模型</h2><p id="a689" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">模型训练需要训练数据。以下是用于生成的代码。</p><ol class=""><li id="aa4b" class="nb nc iq lu b lv mm ly mn lf nd lj ne ln nf mk ng nh ni nj bi translated">训练特征生成脚本代码在<em class="na"> train.p </em> y中</li><li id="36e4" class="nb nc iq lu b lv nk ly nl lf nm lj nn ln no mk ng nh ni nj bi translated">训练数据是`<em class="na"> train_ Fd004。TXT </em>`，有多个发动机循环的检测数据</li></ol><p id="0bd8" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">最后，我们可以生成模型。</p><pre class="kg kh ki kj gt mr ms mt mu aw mv bi"><span id="7bd4" class="kw kx iq ms b gy mw mx l my mz">$ python3 train.py ./fe.sql /tmp/model.txt</span></pre><h2 id="4b3d" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">利用训练模型构建实时推理HTTP服务</h2><p id="14ec" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">基于上一步生成的训练特征矩阵，我们使用'<em class="na">随机森林回归器</em>进行训练。得到的训练模型，结合<a class="ae kv" href="https://github.com/4paradigm/OpenMLDB" rel="noopener ugc nofollow" target="_blank"> OpenMLDB </a>中的历史数据，构建实时推理服务，整个推理服务代码引用<em class="na"> predict_ server.py. </em></p><pre class="kg kh ki kj gt mr ms mt mu aw mv bi"><span id="fecb" class="kw kx iq ms b gy mw mx l my mz">$ sh start_predict_server.sh ./fe.sql 9887 /tmp/model.txt</span></pre><h2 id="4504" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">然后我们可以通过HTTP请求发送一个推理请求</h2><pre class="kg kh ki kj gt mr ms mt mu aw mv bi"><span id="7cf1" class="kw kx iq ms b gy mw mx l my mz">$ python3 predict.py</span></pre><h2 id="b3ad" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">最后，可以打印预测结果</h2><pre class="kg kh ki kj gt mr ms mt mu aw mv bi"><span id="2bff" class="kw kx iq ms b gy mw mx l my mz">----------------ins---------------<br/>         1     2      3       4    5    6    7<br/>0  35.0033  0.84  100.0  449.44  0.0  0.0  0.0<br/>---------------predict rul -------------<br/>[321.26]<br/>Congraduation! You have finished the task.<br/>Your Key:b'kSpmZICy0kuTqgAPGC8TMCg/3HmnscIfJrESkOEekOpfcW6+oGnltUf9Vts='</span></pre><p id="813f" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">上面的<em class="na"> ins </em>部分显示了使用<a class="ae kv" href="https://github.com/4paradigm/OpenMLDB" rel="noopener ugc nofollow" target="_blank"> OpenMLDB </a>计算的特性。这里我们使用的特征被简化了。您可以阅读<em class="na"> fe.sql </em>文件了解具体特性；</p><p id="92c0" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">下面的<em class="na">预测RUL </em>显示了预测结果<em class="na"> time_ in_ cycle </em>，这意味着发动机可以继续旋转321次。</p><p id="a7a3" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">在一个数据库的帮助下，你可以完成机器学习的端到端应用。是不是很神奇！</p><p id="db04" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">如果你想了解更多，你可以点击:<a class="ae kv" href="https://github.com/4paradigm/OpenMLDB" rel="noopener ugc nofollow" target="_blank"> OpenMLDB </a></p><h1 id="020c" class="np kx iq bd ky nq nr ns lb nt nu nv le jw nw jx li jz nx ka lm kc ny kd lq nz bi translated">体系结构</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/95c10bf2e417a06eb686d32cce22679c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*spKpa7BmwhHN6Qr3zKP9pw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure></div></div>    
</body>
</html>