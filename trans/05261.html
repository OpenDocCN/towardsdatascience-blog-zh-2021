<html>
<head>
<title>MLOps Level 1: Continuous Training</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MLOps级:持续培训</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/mlops-level-1-continuous-training-b2a633e27d47?source=collection_archive---------10-----------------------#2021-05-09">https://towardsdatascience.com/mlops-level-1-continuous-training-b2a633e27d47?source=collection_archive---------10-----------------------#2021-05-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d6ba" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在MLOps级中，机器学习流水线是自动化的。通过这样做，您可以实现机器学习模型的持续培训以及模型预测服务的持续交付。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b7de7187cbd009c060fc0330e8c19f74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r0oI6sac7YWMmcruIpeHcw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">克里斯多夫·伯恩斯在<a class="ae ky" href="https://unsplash.com/s/photos/artificial-intelligence?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="d82e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">推荐预读</strong></p><p id="d060" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了从本文中获得最大收益，理解我将使用的术语是很重要的。为了让你自己熟悉这些术语，我在本文中非常详细地概述了机器学习服务的各个步骤:<a class="ae ky" rel="noopener" target="_blank" href="/steps-of-a-machine-learning-process-7acc43973385">https://towardsdatascience . com/steps-of-a-machine-learning-process-7 ACC 43973385</a>。</p><p id="17bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所讨论的一些概念与DevOps理念重叠，而另一些则是MLOps所特有的。要阅读更多关于这两种实践的比较和对比，请查看我的文章:<a class="ae ky" rel="noopener" target="_blank" href="/mlops-vs-devops-5c9a4d5a60ba">https://towardsdatascience.com/mlops-vs-devops-5c9a4d5a60ba</a></p><p id="2974" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有兴趣了解更多关于这个级别的MLOps与0级有什么不同，请查看我的文章:<a class="ae ky" rel="noopener" target="_blank" href="/mlops-level-0-manual-pipelines-7278b9949e59">https://towardsdatascience . com/MLOps-level-0-manual-pipelines-7278 b 9949 e 59</a>如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/79860b61517d5ddff31e816d9ea88c94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b8ISL5aKYp5xbuUjTykiKA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。MLOps级别0</p></figure><p id="12a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">m lops 1级的目的</strong></p><p id="620e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">MLOps一级旨在实现机器学习模型的持续训练。为了实现这一点，机器学习管道在这一级是自动化的。这包括自动化使用新数据的训练过程、生产中的模型再训练、自动化数据验证和模型验证、引入触发器以启动管道以及机器学习模型元数据存储。下图展示了这一概念:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lw"><img src="../Images/f39122bfc1468f1c4143770c7281cc4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0tEE6I7hgLGlgJrx560f-w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者。MLOps一级</p></figure><p id="1aa3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">m lops 1级的特性</strong></p><ul class=""><li id="4278" class="lx ly it lb b lc ld lf lg li lz lm ma lq mb lu mc md me mf bi translated">快速实验:由实验管道组成的步骤是完全自动化和协调的。通过自动化和协调这一管道，它使数据科学家能够快速试验不同的模型和数据。此外，将机器学习管道从开发/测试转移到生产变得更加容易。</li><li id="ff7a" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mc md me mf bi translated">生产中模型的持续训练:通过使用触发器，使用新数据对生产中使用的模型进行训练。</li><li id="75f6" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mc md me mf bi translated">机器学习和系统操作对称:开发/测试和生产中使用的机器学习管道是对称的。这是MLOps实践中整合DevOps理念的关键组成部分。</li><li id="9327" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mc md me mf bi translated">组件和管道的模块化代码:机器学习管道中的组件应该在机器学习管道中可重用、可组合和可共享。一些组件，如探索性数据分析(EDA)仍然可以在笔记本电脑内，但其他组件必须是模块化的。理想情况下，部件也应装箱。</li><li id="260f" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mc md me mf bi translated">模型的持续交付:在生产中，机器学习管道应该持续部署新模型的预测服务，这些新模型已经过新数据的训练。将经过训练和验证的模型部署为预测服务的管道必须自动化。</li><li id="9d3c" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mc md me mf bi translated">管道的部署:在MLOps级中，只有经过训练的模型人工制品被部署为生产的预测服务。在MLOps级别1中，部署了整个训练管道，作为生产中的预测服务部署的模型在生产中的最新数据上进行训练。</li></ul><p id="b6e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">m lops 1级的新功能</strong></p><p id="6f58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了实现MLOps级的持续培训，架构中需要以下组件。</p><p id="0afa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ml">数据和模型验证</em></p><p id="8c01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在MLOps级中，机器学习流水线是自动化的，并且被自动触发。一旦触发，就没有人工干预的机会，因此，在生产管道中需要自动数据验证和模型验证。</p><p id="86c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据验证步骤至关重要，因为它用于决定是否应该重新训练数据或停止执行管道。两种情况将决定做出何种决定:</p><ol class=""><li id="6171" class="lx ly it lb b lc ld lf lg li lz lm ma lq mb lu mm md me mf bi translated">数据模式偏斜:这些是异常的输入数据，这意味着下游处理和步骤可能会失败，因为它将接收到它不期望的数据。如果发生这种情况，必须停止管道执行，并调查异常数据，以确定是否需要更新管道。数据模式偏差的示例包括获取意外的模式、未接收所有模式以及接收具有意外值的要素。</li><li id="2dcb" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mm md me mf bi translated">数据值偏差:这是指当要素值发生显著变化时，数据的统计属性发生了变化。这表明模型需要重新训练，以捕捉数据中统计属性的变化。</li></ol><p id="2770" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">模型验证步骤验证训练好的模型，以确定它是否应该被提升到生产中。对于离线模型验证，遵循以下步骤:</p><ul class=""><li id="df04" class="lx ly it lb b lc ld lf lg li lz lm ma lq mb lu mc md me mf bi translated">根据测试数据(培训过程中未使用的数据)生成培训数据的评估指标。</li><li id="d53c" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mc md me mf bi translated">生产中使用的新模型和当前模型之间的评估度量的比较。</li><li id="8921" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mc md me mf bi translated">确保不同数据段的模型性能一致。</li><li id="1dce" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mc md me mf bi translated">测试用于部署的模型，包括基础架构兼容性和与预测服务API的一致性。</li></ul><p id="ad80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了离线模型验证之外，还需要一个在线模型验证步骤，包括canary部署或A/B测试。</p><p id="08d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ml">功能商店</em></p><p id="1a95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个可选组件，是一个集中的存储库，用于存储和访问用于训练和服务管道的特征。理想的特征存储需要能够为训练和服务过程处理高吞吐量批量服务和特征值的低延迟实时服务。</p><p id="b2a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ml">元数据管理</em></p><p id="998a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">记录关于由训练机器学习流水线执行的不同实验的信息和数据。这是用来帮助数据和工件血统，再现性和比较不同的实验。理想情况下，元数据管理存储记录以下元数据:</p><ol class=""><li id="a6f3" class="lx ly it lb b lc ld lf lg li lz lm ma lq mb lu mm md me mf bi translated">正在运行哪个版本的实验。</li><li id="68b6" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mm md me mf bi translated">实验的开始和结束日期和时间以及组成实验的步骤。</li><li id="007b" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mm md me mf bi translated">管道中使用的参数。</li><li id="7d4e" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mm md me mf bi translated">指向管道每一步产生的工件的指针。示例包括:实验中使用的数据位置、识别的异常、计算的统计数据、分类特征的词汇。</li><li id="ee9f" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mm md me mf bi translated">正在管道中接受培训的模型的评估指标。</li></ol><p id="17e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ml"> ML流水线触发器</em></p><p id="cc54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在管道中使用触发器来用新数据重新训练模型。触发管道的方法包括以下几种:</p><ol class=""><li id="9bab" class="lx ly it lb b lc ld lf lg li lz lm ma lq mb lu mm md me mf bi translated">临时手动触发。</li><li id="0f2c" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mm md me mf bi translated">基于时间。例如，如果新数据按照固定的时间表到达系统，则可以在新数据到达之后执行管道。</li><li id="9d1e" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mm md me mf bi translated">当新数据到达时触发。当特定数据到达数据源时，它会触发管道根据新数据重新训练模型。</li><li id="4377" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mm md me mf bi translated">模型性能退化。如果生产中的模型恶化超过预定义的阈值，则应该触发模型的重新训练。</li><li id="83f8" class="lx ly it lb b lc mg lf mh li mi lm mj lq mk lu mm md me mf bi translated">数据分布发生显著变化，触发了模型的重新训练。</li></ol><p id="d03b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">挑战</strong></p><p id="1139" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在MLOps级中，您需要手动测试管道及其组件。部署新的管道实现也将是手动的。此外，还依赖IT团队将新的源代码部署到目标环境中。</p><p id="7c0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了克服这些挑战，需要一个持续集成(CI)和持续部署(CD)流程设置来自动执行MLOps级中的这些手动步骤。如果一个系统有CI/CD设置，那么它已经达到了MLOps级别2，我将在以后的文章中更详细地讨论这个级别。</p></div></div>    
</body>
</html>