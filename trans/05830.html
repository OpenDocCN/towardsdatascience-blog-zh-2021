<html>
<head>
<title>ANOVA Test, with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python进行ANOVA测试</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/anova-test-with-python-cfbf4013328b?source=collection_archive---------1-----------------------#2021-05-25">https://towardsdatascience.com/anova-test-with-python-cfbf4013328b?source=collection_archive---------1-----------------------#2021-05-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="158e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">执行ANOVA测试的完全初学者指南(带代码！)</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3f2adb86ef3b2a5654143bebe53133f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IBwQHh_OhPYCi1FPaX-Sxw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@r3dmax" rel="noopener ugc nofollow" target="_blank">乔纳森派</a>在<a class="ae ky" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="7f00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在之前的文章中，我已经讨论了如何进行<a class="ae ky" href="https://levelup.gitconnected.com/how-to-perform-one-sample-hypothesis-tests-with-python-308eae8789fc" rel="noopener ugc nofollow" target="_blank">单样本假设检验</a>和<a class="ae ky" href="https://levelup.gitconnected.com/two-sample-hypothesis-tests-with-python-43e1b8c52306" rel="noopener ugc nofollow" target="_blank">双样本假设检验</a>。那么，如果我们想比较几个人口平均数呢？在本文中，我将介绍方差分析(ANOVA ),它涉及多个未知μ的比较。</p><h1 id="d693" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">单向方差分析</h1><p id="9d87" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这是一个测试，其中一个特定的因素有两个以上的群体或利益水平。例如，设μ为毕业生的真实平均年薪<br/>单因素利益=研究对象<br/>假设我们有6类研究对象，<code class="fe ms mt mu mv b">Factor levels = athematics and Statistics, Economics and Finance, Environmental Sciences, Political Science, Social Sciences and Biology.</code> <br/>因此，在影响毕业生年薪均值方面，有6个层次或群体的<code class="fe ms mt mu mv b"><strong class="lb iu">single factor</strong></code> <strong class="lb iu"> </strong>。</p><p id="b4c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">单向方差分析的基本思想是从每组中抽取独立的随机样本，然后计算每组的样本均值。之后，将组间样本均值的变化与组内的变化进行比较。最后，根据测试统计数据决定各组的平均值是否相等。</p><h2 id="0305" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">平方和</h2><p id="a81a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在单向ANOVA表中:<br/>可变性的总量来自两个可能的来源，即:<br/> 1。各组间的差异<strong class="lb iu">，称为<strong class="lb iu">处理</strong> (TR) <br/> 2。</strong>组内的<strong class="lb iu">差，称为<strong class="lb iu">误差</strong> (E)</strong></p><p id="fea9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于治疗(<strong class="lb iu"> SSTR </strong>)的平方和以及由于误差(<strong class="lb iu"> SSE </strong>)的平方和列在单因素方差分析表中。SSTR和上证的总和等于平方和的总和(<strong class="lb iu"> SSTO </strong>)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/c7438d058d4ef6b941a81177348524cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1SVzb0PAFMbTPcb7J3a_uw.png"/></div></div></figure><p id="db97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就像SS一样，d.f. (SSTO) = d.f. (SSTR) + d.f .(上证)</p><h2 id="1663" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">均方误差(毫秒)</h2><p id="743e" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">均方差是平方和除以其方差。这些均方差都是方差，将用于所有群体均值相等的假设检验。</p><h2 id="9fb8" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">单向方差分析假设检验的假设</h2><ul class=""><li id="7f71" class="nj nk it lb b lc mn lf mo li nl lm nm lq nn lu no np nq nr bi translated">从人群中随机选择样本数据，并随机分配给每个治疗组。因此，每个观察都是独立于任何其他观察的——随机性和独立性。</li><li id="5b14" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated"><strong class="lb iu">常态</strong>。假设每个抽样组中的值来自正态分布的总体。我们可以用正态概率图或者<strong class="lb iu"> Q-Q图</strong>来检验正态性。</li><li id="0d67" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated"><strong class="lb iu">方差齐性</strong>。所有的c组方差都相等，即σ₁ = σ₂ = σ₃ = … = σ𝒸。根据经验，如果最大样本标准偏差与最小样本标准偏差的<strong class="lb iu">比小于2 </strong>，我们认为满足等标准偏差假设。</li></ul><h2 id="7476" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">单向ANOVA检验的简单概述:</h2><p id="f27f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">两个以上均值的差异检验<br/> H₀: μ₁= μ₂ = μ₃ = … = μ𝒸 <br/> H₁:并非所有的μᵢ's都相等，其中i = 1，2，3，…，c. <br/>显著性水平= α</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/4b8db556e9419aa3508239c75dbcb4db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3XVY9RBkdKTWsS9cIJe0vw.png"/></div></div></figure><p id="cffc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，单因素方差分析表如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/37adb73dd1d5c51dac0d546c5328fbac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*971WrqMvCBXppN-aNR0dGQ.png"/></div></div></figure></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><blockquote class="og oh oi"><p id="6249" class="kz la oj lb b lc ld ju le lf lg jx lh ok lj lk ll ol ln lo lp om lr ls lt lu im bi translated">假设一个<a class="ae ky" href="https://userpage.fu-berlin.de/soga/200/2010_data_sets/students.csv" rel="noopener ugc nofollow" target="_blank"> students.csv </a>数据集包含8239行，每行代表一个特定的学生，还有16列(<em class="it"> stud.id、姓名、性别、年龄、身高、体重、宗教、nc.score、学期、专业、辅修、score1、score2、online.tutorial、已毕业、薪水)</em>，每一列对应于与该特定学生相关的一个特性。在5%的显著性水平上，不同研究主题的毕业生的平均年薪有显著差异吗？有6个不同的研究主题。</p></blockquote><h2 id="f0a7" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">数据探索和准备</h2><p id="d70f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">从给定的数据集中，我们首先需要筛选出已毕业的学生，并进行随机抽样。在我们的例子中，我们将使用Python中的函数<code class="fe ms mt mu mv b">random.sample</code>从数据集中随机抽取500名学生。之后，我们将我们的数据集归入两个感兴趣的变量，分类变量<code class="fe ms mt mu mv b">major</code>和数值变量<code class="fe ms mt mu mv b">salary</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on oo l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/be6e88d7cba064bdbae1da5dcd16727e.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*UVl48MGAK-wKNsL5DgvXDQ.png"/></div></figure><h2 id="9fcc" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">正态假设检验</h2><p id="5130" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在我们进行假设检验之前，我们检查是否满足单向ANOVA假设检验的假设。样本是随机和独立的样本。现在，我们通过绘制每个分组变量的正态概率图(<a class="ae ky" href="https://en.wikipedia.org/wiki/Q%E2%80%93Q_plot" rel="noopener ugc nofollow" target="_blank"> Q-Q图</a>)来检验正态假设。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on oo l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/c2c4f9cdfb348a314202c8f80f7e8f56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IqBfFEzXo4XRpHXMBV_xWQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图1:每个分组变量的Q-Q图</p></figure><p id="b359" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果是正态分布，Q-Q图显示的是一个很大程度上的直线模式。从上图中，我们可以假设每组的数据大致落在一条直线上。</p><h2 id="ac15" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated"><strong class="ak">方差假设的同质性检查</strong></h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on oo l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/493e713b9ebafb0ebcc138224037485e.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*oAo0Gic9quuM2-x_JJoI4w.png"/></div></figure><p id="1434" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最大与最小样本标准偏差之比为1.67。这小于阈值2。因此，我们得出结论，这些假设已经实现。</p><h2 id="c5ce" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">假设检验</h2><p id="26a5" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">按照假设检验的五步流程:<br/> H₀: μ₁= μ₂ = μ₃ = … = μ₆ <br/> H₁:根据f检验统计，并非所有的薪酬均值都相等<br/> α = 0.05 <br/>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on oo l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/4d785a21a5ed8cb72d52e8ef5322395b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*Lw6GK407FMPN7Y8pSKfVKA.png"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on oo l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/00afed8ca26b7616b82e5837414ec619.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9E6tEG31Es7LcltNZyP37A.png"/></div></div></figure><p id="d254" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结论:我们有足够的证据表明，在5%的显著性水平上，不同学科的毕业生的平均工资并不相同。</p></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><h1 id="a4ee" class="lv lw it bd lx ly ou ma mb mc ov me mf jz ow ka mh kc ox kd mj kf oy kg ml mm bi translated">推荐阅读</h1><div class="oz pa gp gr pb pc"><a rel="noopener follow" target="_blank" href="/two-way-anova-test-with-python-a112e2396d78"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd iu gy z fp ph fr fs pi fu fw is bi translated">使用Python进行双向ANOVA测试</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">执行双向ANOVA检验的完全初学者指南(带代码！)</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">towardsdatascience.com</p></div></div><div class="pl l"><div class="pm l pn po pp pl pq ks pc"/></div></div></a></div><div class="oz pa gp gr pb pc"><a rel="noopener follow" target="_blank" href="/chi-square-test-with-python-d8ba98117626"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd iu gy z fp ph fr fs pi fu fw is bi translated">卡方检验，用Python</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">执行卡方检验的完全初学者指南(带代码！)</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">towardsdatascience.com</p></div></div><div class="pl l"><div class="pr l pn po pp pl pq ks pc"/></div></div></a></div><div class="oz pa gp gr pb pc"><a rel="noopener follow" target="_blank" href="/mcnemars-test-with-python-e1bab328d15c"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd iu gy z fp ph fr fs pi fu fw is bi translated">McNemar的测试，使用Python</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">执行麦克纳玛测试的完整初学者指南(带代码！)</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">towardsdatascience.com</p></div></div><div class="pl l"><div class="ps l pn po pp pl pq ks pc"/></div></div></a></div><div class="oz pa gp gr pb pc"><a href="https://levelup.gitconnected.com/how-to-perform-one-sample-hypothesis-tests-with-python-308eae8789fc" rel="noopener  ugc nofollow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd iu gy z fp ph fr fs pi fu fw is bi translated">使用Python进行单样本假设检验</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">执行单样本假设检验的完全初学者指南(带代码！)</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pl l"><div class="pt l pn po pp pl pq ks pc"/></div></div></a></div><div class="oz pa gp gr pb pc"><a href="https://levelup.gitconnected.com/two-sample-hypothesis-tests-with-python-43e1b8c52306" rel="noopener  ugc nofollow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd iu gy z fp ph fr fs pi fu fw is bi translated">使用Python进行双样本假设检验</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">执行双样本假设检验的完全初学者指南(带代码！)</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pl l"><div class="pu l pn po pp pl pq ks pc"/></div></div></a></div></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><h1 id="c09a" class="lv lw it bd lx ly ou ma mb mc ov me mf jz ow ka mh kc ox kd mj kf oy kg ml mm bi translated">参考</h1><p id="0e1d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">[1]“单因素方差分析SOGA地球科学系。”【在线】。可用:<a class="ae ky" href="https://www.geo.fu-berlin.de/en/v/soga/Basics-of-statistics/ANOVA/One-way-ANOVA/index.html" rel="noopener ugc nofollow" target="_blank">https://www . geo . fu-Berlin . de/en/v/soga/Basics-of-statistics/ANOVA/One-way-ANOVA/index . html</a></p><p id="2532" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[2]“单因素方差分析假设检验SOGA地球科学系。”【在线】。可用:<a class="ae ky" href="https://www.geo.fu-berlin.de/en/v/soga/Basics-of-statistics/ANOVA/One-way-ANOVA-Hypothesis-Test/index.html" rel="noopener ugc nofollow" target="_blank">https://www . geo . fu-Berlin . de/en/v/soga/Basics-of-statistics/ANOVA/One-way-ANOVA-Hypothesis-Test/index . html</a></p></div></div>    
</body>
</html>