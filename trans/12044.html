<html>
<head>
<title>Codex: A Bridge between Clouds?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">法典:云之间的桥梁？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/codex-a-bridge-between-clouds-835250399fe9?source=collection_archive---------16-----------------------#2021-12-04">https://towardsdatascience.com/codex-a-bridge-between-clouds-835250399fe9?source=collection_archive---------16-----------------------#2021-12-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/9a013753c0bff30823f09c5317a22fd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UfVRYluR4_OgVnQwvEnPtg.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片— shutterstock</p></figure><div class=""/><div class=""><h2 id="a68e" class="pw-subtitle-paragraph kf jh ji bd b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw dk translated">Codex 可以在 AWS 和 Google Cloud 之间翻译命令吗？</h2></div><p id="fcdc" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">许多企业需要应对多种云环境。AWS、Azure 和 Google Cloud 都有自己的命令集来执行云操作，如设置存储桶、定义服务帐户和其他管理任务。如果能有一种自动化的方法将命令从一个云环境翻译成另一个云环境的等效命令，那就太好了。在这篇文章中，我将继续之前关于 OpenAI 的 Codex 的文章(<a class="ae lt" rel="noopener" target="_blank" href="/using-codex-to-translate-keras-to-fastai-8471a4596755">使用 Codex 在 Keras 和 fastai 之间进行翻译</a>，<a class="ae lt" rel="noopener" target="_blank" href="/codex-translates-cobol-into-javascript-266205d606c0">使用 Codex 将 COBOL 翻译成 JavaScript </a>)，探索 Codex 是否可以帮助应对这一挑战。我将尝试让 Codex 将一系列 AWS 命令翻译成 Google Cloud 的等效命令。</p><h2 id="af27" class="lu lv ji bd lw lx ly dn lz ma mb dp mc lg md me mf lk mg mh mi lo mj mk ml mm bi translated">实验 1:创建虚拟机实例</h2><p id="7a76" class="pw-post-body-paragraph kx ky ji kz b la mn kj lc ld mo km lf lg mp li lj lk mq lm ln lo mr lq lr ls im bi translated">创建虚拟机(VM)实例是一项常见的云任务。我想看看 Codex 是否能把创建 VM 的 AWS 命令翻译成创建 VM 的有效 Google Cloud 命令。我决定从 Codex 示例提示“<strong class="kz jj">为库或框架</strong>重写代码”开始，如下所示:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="0b15" class="lu lv ji mx b gy nb nc l nd ne">// Rewrite this as &lt;TARGET&gt;</span><span id="3d46" class="lu lv ji mx b gy nf nc l nd ne">&lt;SOURCE CODE&gt;</span><span id="3942" class="lu lv ji mx b gy nf nc l nd ne">// &lt;TARGET&gt; version:</span></pre><p id="298e" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">从 AWS 文档中用于创建 VM 的示例命令开始，我试图让 Codex 生成等效的 Google Cloud 命令。下面是我在 Codex 中使用的实际提示，带有 AWS VM 创建命令，后跟 Codex 生成的 Google Cloud 代码:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="d741" class="lu lv ji mx b gy nb nc l nd ne">// Rewrite this for Google Cloud<br/>aws opsworks --region us-east-1 create-instance --stack-id 935450cc-61e0-4b03-a3e0-160ac817d2bb --layer-ids 5c8c272a-f2d5-42e3-8245-5bf3927cb65b --hostname myinstance1 --instance-type m1.large --os "Amazon Linux"</span><span id="c4a0" class="lu lv ji mx b gy nf nc l nd ne">// Google cloud version:<br/>gcloud compute instances create myinstance1 --zone us-central1-a --machine-type n1-standard-1 --image-project centos-cloud --image centos-7-v20160301 --tags http-server,https-server</span></pre><p id="0115" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我从 Codex 获取输出，并尝试在 Google Cloud 项目的 Cloud Shell 中运行它，命令运行成功:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ng"><img src="../Images/fbd3b7f80f7417a7cca7a5813a128027.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JrAXhiMiodHQnGnPT2cmlQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="9871" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我可以在谷歌云控制台中看到新的虚拟机:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nh"><img src="../Images/e7bf3a848d26d9fa1d17d6ce248983dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YptQhjbHvB28RiDxLBydKg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="3557" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">Codex 产生了一个可行的谷歌云命令，但它并不完美。特别是，它指定了一个不推荐使用的图像，如以下警告消息所示:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="fd5d" class="lu lv ji mx b gy nb nc l nd ne">WARNING: Some requests generated warnings:<br/> - The resource 'projects/centos-cloud/global/images/centos-7-v20160301' is deprecated. A suggested replacement is 'projects/centos-cloud/global/images/centos-7-v20160329'.</span></pre><h2 id="dfe5" class="lu lv ji bd lw lx ly dn lz ma mb dp mc lg md me mf lk mg mh mi lo mj mk ml mm bi translated">实验 2:创建一个桶</h2><p id="a60c" class="pw-post-body-paragraph kx ky ji kz b la mn kj lc ld mo km lf lg mp li lj lk mq lm ln lo mr lq lr ls im bi translated">从 AWS 文档中用于创建 bucket 的示例命令<a class="ae lt" href="https://docs.aws.amazon.com/cli/latest/reference/s3api/create-bucket.html" rel="noopener ugc nofollow" target="_blank">开始，我试图让 Codex 生成等效的 Google Cloud 命令。下面是我在 Codex 中使用的提示，其中带有 AWS bucket creation 命令，后跟 Codex 生成的 Google Cloud 代码:</a></p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="709a" class="lu lv ji mx b gy nb nc l nd ne">// Rewrite this for Google Cloud<br/>aws s3api create-bucket --bucket my-bucket-bridge-test --region us-east-1</span><span id="71c4" class="lu lv ji mx b gy nf nc l nd ne">// Google Cloud version:<br/>// gsutil mb -l us-east1 gs://my-bucket-bridge-test</span></pre><p id="6466" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">这次，Codex 在输出的开头添加了“//”。我从 Codex 获取输出(去掉注释前缀),并在 Google Cloud Shell 中运行它:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ni"><img src="../Images/85927467b0dcc55716681b091a5cc945.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bJ7B6WqPo4iGu4zUuu57gA.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="a2db" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我可以在谷歌云控制台上看到新的桶:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nj"><img src="../Images/366847c04adc347b2fa25b7da4a0dd38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BwR1aooM_9OTvUSGdceHnQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="f45a" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">同样，Codex 从 AWS 输入生成了有效的 Google Cloud 命令。</p><h2 id="0455" class="lu lv ji bd lw lx ly dn lz ma mb dp mc lg md me mf lk mg mh mi lo mj mk ml mm bi translated">实验 3:创建安全组/防火墙规则</h2><p id="7f06" class="pw-post-body-paragraph kx ky ji kz b la mn kj lc ld mo km lf lg mp li lj lk mq lm ln lo mr lq lr ls im bi translated">从 AWS 文档中用于创建安全组的示例命令开始，我试图让 Codex 生成等效的 Google Cloud 命令。下面是我在 Codex 中使用的实际提示，AWS 命令后跟 Codex 生成的 Google Cloud 代码:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="243d" class="lu lv ji mx b gy nb nc l nd ne">// Rewrite this for Google Cloud<br/>aws ec2 create-security-group --group-name my-sg --description "My security group"</span><span id="56d7" class="lu lv ji mx b gy nf nc l nd ne">// Google Cloud version:<br/>gcloud compute firewall-rules create my-sg --description "My security group" --allow tcp:22</span></pre><p id="05c3" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我能够在 Google Cloud Shell 中成功运行 Codex 的输出:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nk"><img src="../Images/a703d79f7bfcd24ec89cfc84b50386ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-WhGICUuxQkxgJDRtqnTUw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="8966" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我可以在谷歌云控制台上看到新的防火墙规则:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nl"><img src="../Images/ca382d35079be536db03d9f47d2bbc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lbSj2IEZh_oo5HtkWRkQ0g.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="9c1a" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我承认我无法验证 Codex 生成的 Google Cloud 命令在功能上是否等同于 AWS 输入命令，尽管<a class="ae lt" href="https://stackoverflow.com/questions/64548661/alternative-to-awss-security-groups-in-gcp" rel="noopener ugc nofollow" target="_blank">这个话题</a>表明它至少是在正确的范围内。</p><h2 id="29d8" class="lu lv ji bd lw lx ly dn lz ma mb dp mc lg md me mf lk mg mh mi lo mj mk ml mm bi translated">结论</h2><p id="ccfc" class="pw-post-body-paragraph kx ky ji kz b la mn kj lc ld mo km lf lg mp li lj lk mq lm ln lo mr lq lr ls im bi translated">本文中的实验非常简单，只是触及了创建和管理云环境所需的全部命令的皮毛。这些基础实验并没有证明 Codex 可以对实际问题做出重大贡献，比如从 AWS 到 Google Cloud 的迁移。然而，有趣的是，Codex 为每个输入 AWS 命令生成了有效的工作 Google Cloud 命令。</p></div></div>    
</body>
</html>