<html>
<head>
<title>The Unreasonable Richness of Residual Plot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">剩余情节的不合理丰富</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-unreasonable-richness-of-residual-plot-17f9104a687a?source=collection_archive---------33-----------------------#2021-06-21">https://towardsdatascience.com/the-unreasonable-richness-of-residual-plot-17f9104a687a?source=collection_archive---------33-----------------------#2021-06-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/9349856355c0b2324eca7aaa40b7f9f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PSnxDmz0RhXa-kZHCmJ3jQ.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://unsplash.com/s/photos/grains?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae jg" href="https://unsplash.com/@mockupgraphics?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">实体模型图形</a>拍摄</p></figure><div class=""/><div class=""><h2 id="41e1" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">仅使用一个图检查除一个线性回归假设之外的所有假设</h2></div><p id="b0ec" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi lu translated"><span class="l lv lw lx bm ly lz ma mb mc di">在</span>机器学习中，残差是实际目标值和拟合值之间的“差值”。残差是回归问题中的一个重要概念。它是任何回归度量的基础:均方误差(MSE)，平均绝对误差(MAE)，平均绝对百分比误差(MAPE)，你能想到的。</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi md"><img src="../Images/e4a49adaac3a15d86f51bfccc096917e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*UPiu4tgQ26BKQUSRLi28rA.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">重温你的记忆(作者图片)</p></figure><p id="edd4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">残差在线性回归中甚至更为关键。它们包含丰富的信息，尤其是当作为残差图呈现时。通过这篇博客，我将向你展示，我们可以通过查看残差图来验证几乎所有的方法假设。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="0a73" class="mp mq jj bd mr ms mt mu mv mw mx my mz kp na kq nb ks nc kt nd kv ne kw nf ng bi translated">残差图</h1><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/df7d7900ac9eba95ce0c0ce886fdb32d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*wp-f_IKmuiswDjjnt7kCiQ.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">线性回归中的残差(图片由作者提供)</p></figure><p id="a55c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">毫无疑问，残差图是显示残差的图。我们可以根据如下简单定义得出一个:</p><ul class=""><li id="2f73" class="ni nj jj la b lb lc le lf lh nk ll nl lp nm lt nn no np nq bi translated">在简单线性回归(具有1个预测值的回归)的情况下，我们将<strong class="la jk">预测值</strong>设置为x轴，将残差设置为y轴</li><li id="f754" class="ni nj jj la b lb nr le ns lh nt ll nu lp nv lt nn no np nq bi translated">在多元线性回归的情况下(预测因子&gt; 1的回归)，我们将<strong class="la jk">拟合值</strong>设置为x轴，将残差设置为y轴</li></ul><h1 id="9e63" class="mp mq jj bd mr ms nw mu mv mw nx my mz kp ny kq nb ks nz kt nd kv oa kw nf ng bi translated">线性回归假设</h1><p id="53f8" class="pw-post-body-paragraph ky kz jj la b lb ob kk ld le oc kn lg lh od lj lk ll oe ln lo lp of lr ls lt im bi translated">回想一下，线性回归有如下四个假设:</p><ol class=""><li id="5219" class="ni nj jj la b lb lc le lf lh nk ll nl lp nm lt og no np nq bi translated">预测值和目标变量之间的线性关系，意味着模式必须是直线形式(或多元线性回归情况下的超平面)</li><li id="fbe7" class="ni nj jj la b lb nr le ns lh nt ll nu lp nv lt og no np nq bi translated">同方差，即残差的恒定方差</li><li id="b5a2" class="ni nj jj la b lb nr le ns lh nt ll nu lp nv lt og no np nq bi translated">独立观察。这实际上相当于独立残差</li><li id="3990" class="ni nj jj la b lb nr le ns lh nt ll nu lp nv lt og no np nq bi translated">残差的正态性，即残差服从正态分布</li></ol><h1 id="6046" class="mp mq jj bd mr ms nw mu mv mw nx my mz kp ny kq nb ks nz kt nd kv oa kw nf ng bi translated">使用残差图检查4个假设中的3个</h1><p id="488d" class="pw-post-body-paragraph ky kz jj la b lb ob kk ld le oc kn lg lh od lj lk ll oe ln lo lp of lr ls lt im bi translated">我们可以通过残差图检查上面的前三个假设！</p><p id="75a3" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">假设1:线性关系</strong></p><p id="2058" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果残差图中没有<em class="oh">可识别的非线性模式，则该假设有效。让我们考虑下面的例子。</em></p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/62c8152b7417269977b4856996dde5a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/0*fNIh4OawENSmgX-V"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">剩余地块1(图片由作者提供)</p></figure><p id="e586" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在上面的例子中，假设被违反了，因为U形模式是明显的。换句话说，真实的关系是非线性的。</p><p id="122b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">假设2:恒定方差</strong></p><p id="bb60" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果残差相对于零水平线在残差图的整个x轴上均匀分布(大约相同的距离),则该假设有效。让我们考虑下面的例子。</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/8caf1de01bc29782ff7f6dfcc3910a4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*p2_zpNQn40w5uUQJZ22TVA.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">剩余地块2(图片由作者提供)</p></figure><p id="f0c5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在上面的例子中，假设被违反了，因为方差在更大的拟合值上变得更小。</p><p id="b3e5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">假设3:独立观察</strong></p><p id="085c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果在残差图中的几个连续残差之间没有<em class="oh">或</em>辨别模式，则该假设有效。让我们考虑下面的例子。</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/5f5ef1124b14752236f6a08d37cd1f81.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*ZA6HSxwOF2niqm9x9ZNuBA.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">剩余地块3(图片由作者提供)</p></figure><p id="21d3" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在上述情况下，假设被违反，因为在连续残差之间存在辨别模式(两者都是负斜率的线性)。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="a2f1" class="mp mq jj bd mr ms mt mu mv mw mx my mz kp na kq nb ks nc kt nd kv ne kw nf ng bi translated">额外收获:使用ggplot2绘制残差图</h1><p id="c265" class="pw-post-body-paragraph ky kz jj la b lb ob kk ld le oc kn lg lh od lj lk ll oe ln lo lp of lr ls lt im bi translated">在本节中，我将分享如何在r中使用ggplot2库绘制残差图。为此，我们将使用流行的Auto-MPG数据集(可在此处下载<a class="ae jg" href="https://www.kaggle.com/uciml/autompg-dataset" rel="noopener ugc nofollow" target="_blank"/>)。</p><pre class="me mf mg mh gt ol om on oo aw op bi"><span id="1721" class="oq mq jj om b gy or os l ot ou"># import libraries<br/>library(dplyr)<br/>library(ggplot2)</span><span id="409b" class="oq mq jj om b gy ov os l ot ou"># read data<br/>mpg &lt;- read.csv('auto-mpg.csv')</span><span id="f41f" class="oq mq jj om b gy ov os l ot ou"># drop rows with NA values<br/>mpg &lt;- mpg %&gt;% drop_na.()</span><span id="ba95" class="oq mq jj om b gy ov os l ot ou"># build and train linear regression model mpg = b0 + b1 * displacement<br/>mpg_lm &lt;- lm(mpg ~ displacement, mpg)</span><span id="a4f1" class="oq mq jj om b gy ov os l ot ou"># store as dataframe for plotting<br/>res_df &lt;- data.frame(displacement=mpg$displacement, residual=resid(mpg_lm))</span><span id="4aab" class="oq mq jj om b gy ov os l ot ou"># plotting<br/>ggplot(res_df, aes(x=displacement, y=residual)) +<br/>  geom_point(alpha=0.5) +<br/>  geom_hline(yintercept = 0, color = 'black') +<br/>  geom_smooth(color = 'blue') +<br/>  labs(title='Residual from Regressing MPG using Displacement',<br/>       subtitle = 'Data: Auto-MPG dataset')</span></pre><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/64356ca657bc00c59b1217e0e1b0bdb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*ZCdrCHKVLyTtFo81NxKGkg.png"/></div></figure></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="cce1" class="mp mq jj bd mr ms mt mu mv mw mx my mz kp na kq nb ks nc kt nd kv ne kw nf ng bi translated">在你走之前</h1><p id="e46b" class="pw-post-body-paragraph ky kz jj la b lb ob kk ld le oc kn lg lh od lj lk ll oe ln lo lp of lr ls lt im bi translated">在这篇文章中，我们通过看残差回到基础。事实证明，残差，特别是以残差图的形式，提供了相当丰富的信息；我们可以通过查看残差图来验证4个线性回归假设中的3个。</p><p id="7d2e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">希望在读完这篇文章后，我们能更好地理解残差的重要性。总而言之，感谢阅读，大家在<a class="ae jg" href="https://www.linkedin.com/in/pararawendy-indarjo/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上和我连线吧！👋</p></div></div>    
</body>
</html>