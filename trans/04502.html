<html>
<head>
<title>Clash of Python Data Visualization Libraries</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python数据可视化库的冲突</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/clash-of-python-data-visualization-libraries-c4f668a279f?source=collection_archive---------21-----------------------#2021-04-17">https://towardsdatascience.com/clash-of-python-data-visualization-libraries-c4f668a279f?source=collection_archive---------21-----------------------#2021-04-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4487" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Seaborn，Altair和Plotly</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a765d221b01de9a90a9ca9ca6bce2d3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XadIl_JoT2YZgJrjPnptEQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">圣地亚哥·拉卡尔塔在<a class="ae ky" href="https://unsplash.com/s/photos/clash?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="c468" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据可视化是数据科学的基本组成部分。它通过提供洞察力帮助我们更好地理解数据。我们还使用数据可视化来交付结果或发现。</p><p id="85c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python作为数据科学生态系统中编程语言的主要选择，提供了丰富的数据可视化库选择。在本文中，我们将对3种流行的方法进行实际比较。</p><p id="2ec7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将涉及的库是Seaborn、Altair和Plotly。这些示例将包括3种基本的数据可视化类型，即散点图、直方图和线图。</p><p id="1759" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将通过用所有3个库创建相同的可视化来进行比较。我们将使用Kaggle上的墨尔本房产<a class="ae ky" href="https://www.kaggle.com/anthonypino/melbourne-housing-market" rel="noopener ugc nofollow" target="_blank">数据集</a>作为例子。</p><p id="f5a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从导入库和读取数据集开始。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="baab" class="ma mb it lw b gy mc md l me mf"># import the libraries<br/>import numpy as np<br/>import pandas as pd<br/>import seaborn as sns<br/>import altair as alt<br/>import plotly.express as px</span><span id="af31" class="ma mb it lw b gy mg md l me mf"># read the dataset<br/>df = pd.read_csv("/content/melb_data.csv", parse_dates=['Date'])</span><span id="42c0" class="ma mb it lw b gy mg md l me mf">df.shape<br/>(13580, 21)</span><span id="88ea" class="ma mb it lw b gy mg md l me mf"># remove outliers<br/>df = df[(df.Price &lt; 500000) &amp; (df.Landsize &lt; 5000)]</span></pre><p id="0b9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该数据集包含墨尔本13580所房屋的21个要素。我还删除了离群值，以免扭曲图的外观。</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h2 id="18c2" class="ma mb it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">散点图</h2><p id="f953" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">散点图是一种关系图。它通常用于可视化两个数值变量的值。我们可以观察它们之间是否有关联。</p><p id="2eeb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们生成一个价格和土地面积列的散点图，以研究它们之间的关系。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0f3c" class="ma mb it lw b gy mc md l me mf"># Seaborn<br/>sns.relplot(data=df, x="Price", y="Landsize", kind="scatter",<br/>            hue="Type", height = 5, aspect = 1.4)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/d70c5efc9d811883cd150d4d479be5c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*3VDYUnayYaGR1YevQ59u4Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="2e0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将数据框传递给数据参数后，要绘制的列由x和y参数确定。色调参数为绘图增加了一条信息。我们可以根据类型列中的不同类别，大致了解价格和土地面积如何变化。最后，高度和纵横比参数调整地块的大小。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="d622" class="ma mb it lw b gy mc md l me mf"># Altair<br/>alt.Chart(df).mark_circle(size=40).encode(<br/>   x='Price', y='Landsize', color="Type"<br/>).properties(height=300, width=500)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/4a5c504af0b1f5374b72e63b2d3f1c41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*gDvp56aEEYBrhGe8Z125Gg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="bbde" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Altair语法从接受数据框的顶级图表对象开始。下一步是选择情节的类型。我们在编码函数中指定要绘制的列。</p><p id="a93b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">颜色参数与Seaborn的色调参数相同。最后，我们使用属性函数调整绘图的大小。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b5f3" class="ma mb it lw b gy mc md l me mf"># plotly express<br/>fig = px.scatter(df, x='Price', y='Landsize', color='Type',<br/>                 height=450, width=700)</span><span id="cacc" class="ma mb it lw b gy mg md l me mf">fig.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/d08c40de5aa6d025c5338124371d263d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l7nsqR6LNMR3tUbfl8YA4A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="a013" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用了plotly express，它是plotly.py库的高级API。该语法与Seaborn语法非常相似。使用颜色参数代替色调参数。高度和宽度参数调整大小。</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h2 id="16e2" class="ma mb it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">2.柱状图</h2><p id="a557" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">直方图通常用于可视化连续变量的分布。连续变量的值的范围被分成离散的条块，每个条块中的数据点(或值)的数量用条形表示。</p><p id="a313" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以创建price列的直方图来检查房屋的价格分布。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="6c74" class="ma mb it lw b gy mc md l me mf"># Seaborn<br/>sns.displot(data=df, x="Price", kind="hist",<br/>            height=5, aspect=1.4)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/6d00e091565635104876838f4bf27689.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*6m5Dnala6LpQSuNshzG9Gw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="fe15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用displot函数，它允许创建不同的分布图。种类参数选择绘图类型。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c7d7" class="ma mb it lw b gy mc md l me mf"># Altair<br/>alt.Chart(df).mark_bar().encode(<br/>   alt.X('Price:Q', bin=True), y='count()'<br/>).properties(height=300, width=500)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/21447c13bdeb4bb1281b139329beddbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*F--tasxFbiVaK3KpEtQiZQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="7906" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在encode函数中写的内容告诉Altair将price列中的值划分到bin中，然后计算每个bin中数据点(即行)的数量。</p><p id="f3a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后一个直方图将由plotly express库创建。直方图函数的使用如下。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="a665" class="ma mb it lw b gy mc md l me mf"># plotly express<br/>fig = px.histogram(df, x='Price', height=450, width=600)<br/>fig.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/9630c2c16084901d14796f72de005606.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0wZozD2WjQKfJBK_7FmoXg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h2 id="589a" class="ma mb it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">3.线形图</h2><p id="054b" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">线形图显示了两个变量之间的关系。其中之一通常是时间，所以我们可以看到变量是如何随时间变化的。</p><p id="dddf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以生成一个线图来显示房价的日平均值。让我们首先计算每日平均值，并将其保存在另一个数据框中。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="e104" class="ma mb it lw b gy mc md l me mf">avg_daily_price = df.groupby('Date', as_index=False).agg(<br/>   avg_daily_price = ('Price', 'mean')<br/>).round(1)</span><span id="105b" class="ma mb it lw b gy mg md l me mf">avg_daily_price.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/85fb8a4b30bb68fe0f870e68d88166c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nPa1G2Su_OYfDJ9rW7T_xg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="70d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经使用Pandas groupby函数来计算每天的平均房价。我们现在可以创建一个日平均价格和日期的折线图。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="bdf0" class="ma mb it lw b gy mc md l me mf"># Seaborn<br/>sns.relplot(data=avg_daily_price, x="Date", y="avg_daily_price", kind="line", height=5, aspect=2)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/fa9f5c789afa89a106e0240e9d79e284.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uDw-AAqnZ26bqUZiUAtGtw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="6548" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与散点图一样，可以使用Seaborn的relplot函数创建折线图。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="8c65" class="ma mb it lw b gy mc md l me mf"># Altair<br/>alt.Chart(avg_daily_price).mark_line().encode(<br/>   alt.X("Date"),<br/>   alt.Y("avg_daily_price", scale=alt.Scale(zero=False))<br/>).properties(height=300, width=600)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/0ccdd6db9079b0a674f067677ec44107.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*u7iSKTUX5W1UZnRnmIr7Ng.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="4522" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与前面的例子不同，我们使用了Altair的X和Y编码。原因是Altair默认从零开始轴值。它不会根据列的值范围来调整它们。我们需要明确地告诉Altair不要从零开始，如果大部分值都在零以上的话，我们的图就是这种情况。</p><p id="bc40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Plotly express提供了用于生成线图的直线功能。语法与前面的例子几乎相同。我们只改变函数的名字。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3a0c" class="ma mb it lw b gy mc md l me mf"># plotly express<br/>fig = px.line(avg_daily_price, x="Date", y="avg_daily_price",<br/>              height=400, width=700)<br/>fig.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/24821aead4c44e97865b866ca939849a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hAcyHBrPfX2oxlYDRdLzmA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h2 id="d4c7" class="ma mb it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">结论</h2><p id="bab4" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">我们已经用3个常用的Python数据可视化库介绍了3种基本的绘图类型。</p><p id="df74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用哪一种取决于语法、用户偏好和风格。然而，在很大程度上，我们可以使用它们中的任何一种来生成漂亮的、信息丰富的可视化效果。</p><p id="74d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章中的情节可以认为是最基本的。这三个库能够创建更复杂的库。它们还提供了许多自定义地块的功能。</p><p id="3723" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>