<html>
<head>
<title>Self-Parking Car in &lt;500 Lines of Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">&lt;500 Lines of Code</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://towardsdatascience.com/self-parking-car-in-500-lines-of-code-c1b2a57455af?source=collection_archive---------3-----------------------#2021-09-28">https://towardsdatascience.com/self-parking-car-in-500-lines-of-code-c1b2a57455af?source=collection_archive---------3-----------------------#2021-09-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="54a1" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">åŠ¨æ‰‹æ•™ç¨‹</a>ä¸­çš„è‡ªåŠ¨æ³Šè½¦è½¦</h2><div class=""/><div class=""><h2 id="9e4d" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">ä½¿ç”¨é—ä¼ ç®—æ³•è®­ç»ƒæ±½è½¦è‡ªåŠ¨æ³Šè½¦</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/5777198c7a3feb57f9c1def63d068e4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0SynGDT72UyykQdHeFAqWQ.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">ä½œè€…æ’å›¾</p></figure><h1 id="831f" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">TLï¼›é€Ÿåº¦ä¸‰è§’å½¢å®šä½æ³•(dead reckoning)</h1><p id="e0fc" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<a class="ae ms" href="https://en.wikipedia.org/wiki/Genetic_algorithm" rel="noopener ugc nofollow" target="_blank">é—ä¼ ç®—æ³•</a>æ¥è®­ç»ƒæ±½è½¦è¿›è¡Œè‡ªä¸»æ³Šè½¦ã€‚</p><p id="e1bd" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">æˆ‘ä»¬å°†ç”¨éšæœºåŸºå› ç»„åˆ›é€ å‡ºç¬¬ä¸€ä»£æ±½è½¦<strong class="ly ja">,å…¶è¡Œä¸ºå¦‚ä¸‹:</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/7cfb20c202834cfeeb80bf83567f5edb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8U_xR9D4NX0BzqJMqT0BsQ.gif"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">ç¬¬ä¸€ä»£æ±½è½¦ã€‚ä½œè€…åˆ¶ä½œçš„åŠ¨ç”»</p></figure><p id="4513" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated"><strong class="ly ja">åœ¨ç¬¬40ä»£</strong>ä¸Šï¼Œæ±½è½¦å¼€å§‹å­¦ä¹ ä»€ä¹ˆæ˜¯è‡ªåŠ¨æ³Šè½¦ï¼Œå¹¶å¼€å§‹é è¿‘æ³Šè½¦ç‚¹:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/237f030840308cc734fb4913e3d0483e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*oP0_y0kyucPIcZp0mI0p6Q.gif"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">ç¬¬40ä»£è½¦ã€‚ä½œè€…åˆ¶ä½œçš„åŠ¨ç”»</p></figure><p id="40e8" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">å¦ä¸€ä¸ªä¾‹å­æ›´å…·æŒ‘æˆ˜æ€§:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/55d0908aa264ccab265f60fb305bcfdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*z4em7FIKsDo38ZE8WDSWeA.gif"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">ç¬¬40ä»£è½¦ã€‚ä½œè€…åˆ¶ä½œçš„åŠ¨ç”»</p></figure><blockquote class="mz na nb"><p id="14c2" class="lw lx nc ly b lz mt ka mb mc mu kd me nd mv mh mi ne mw ml mm nf mx mp mq mr ij bi translated">æ˜¯å•Šï¼Œæ˜¯å•Šï¼Œè¿™äº›è½¦åœ¨è·¯ä¸Šæ’ä¸Šäº†å…¶ä»–è½¦ï¼Œä¹Ÿä¸å®Œå…¨é€‚åˆåœè½¦ï¼Œä½†è¿™åªæ˜¯è‡ªä¸–ç•Œåˆ›é€ ä»¥æ¥ä»–ä»¬çš„ç¬¬40ä»£ï¼Œæ‰€ä»¥è¯·ä»æ…ˆä¸€ç‚¹ï¼Œç»™è¿™äº›è½¦ä¸€äº›ç©ºé—´è®©:Dæˆé•¿</p></blockquote><p id="b8c9" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">æ‚¨å¯ä»¥å¯åŠ¨ğŸš•<a class="ae ms" href="https://trekhleb.dev/self-parking-car-evolution" rel="noopener ugc nofollow" target="_blank">è‡ªåŠ¨æ³Šè½¦æ±½è½¦è¿›åŒ–æ¨¡æ‹Ÿå™¨</a>ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹è¿›åŒ–è¿‡ç¨‹ã€‚æ¨¡æ‹Ÿå™¨ä¸ºæ‚¨æä¾›äº†ä»¥ä¸‹æœºä¼š:</p><ul class=""><li id="d86c" class="ng nh iq ly b lz mt mc mu mf ni mj nj mn nk mr nl nm nn no bi translated">æ‚¨å¯ä»¥<a class="ae ms" href="https://trekhleb.dev/self-parking-car-evolution?parking=evolution#/" rel="noopener ugc nofollow" target="_blank">ä»å¤´å¼€å§‹è®­ç»ƒæ±½è½¦</a>å¹¶è‡ªè¡Œè°ƒæ•´é—ä¼ å‚æ•°</li><li id="821d" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr nl nm nn no bi translated">ä½ å¯ä»¥<a class="ae ms" href="https://trekhleb.dev/self-parking-car-evolution?parking=automatic#/" rel="noopener ugc nofollow" target="_blank">çœ‹åˆ°è®­ç»ƒè¿‡çš„è‡ªåŠ¨æ³Šè½¦è½¦åœ¨è¿è¡Œ</a></li><li id="1c96" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr nl nm nn no bi translated">æ‚¨ä¹Ÿå¯ä»¥<a class="ae ms" href="https://trekhleb.dev/self-parking-car-evolution?parking=manual#/" rel="noopener ugc nofollow" target="_blank">å°è¯•æ‰‹åŠ¨æ³Šè½¦</a></li></ul><p id="f335" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">è¿™ä¸ªé¡¹ç›®çš„é—ä¼ ç®—æ³•æ˜¯ç”¨TypeScriptå®ç°çš„ã€‚å®Œæ•´çš„é—ä¼ æºä»£ç å°†åœ¨æœ¬æ–‡ä¸­å±•ç¤ºï¼Œä½†ä½ ä¹Ÿå¯ä»¥åœ¨<a class="ae ms" href="https://github.com/trekhleb/self-parking-car-evolution" rel="noopener ugc nofollow" target="_blank">è¿›åŒ–æ¨¡æ‹Ÿå™¨èµ„æºåº“</a>ä¸­æ‰¾åˆ°æœ€ç»ˆçš„ä»£ç ç¤ºä¾‹ã€‚</p><blockquote class="mz na nb"><p id="c83e" class="lw lx nc ly b lz mt ka mb mc mu kd me nd mv mh mi ne mw ml mm nf mx mp mq mr ij bi translated">æˆ‘ä»¬å°†ä½¿ç”¨é—ä¼ ç®—æ³•æ¥å®Œæˆè¿›åŒ–æ±½è½¦åŸºå› ç»„çš„ç‰¹æ®Šä»»åŠ¡ã€‚ç„¶è€Œï¼Œè¿™ç¯‡æ–‡ç« ä»…ä»…è§¦åŠäº†ç®—æ³•çš„åŸºç¡€ï¼Œå¹¶ä¸æ˜¯é—ä¼ ç®—æ³•ä¸»é¢˜çš„å®Œæ•´æŒ‡å—ã€‚</p></blockquote><p id="6e8a" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">è¯è™½å¦‚æ­¤ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£æ›´å¤šç»†èŠ‚â€¦</p><h1 id="2c12" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">è¿™ä¸ªè®¡åˆ’</h1><p id="d836" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">ä¸€æ­¥ä¸€æ­¥åœ°ï¼Œæˆ‘ä»¬å°†æŠŠåˆ›å»ºè‡ªåŠ¨æ³Šè½¦æ±½è½¦çš„é«˜çº§ä»»åŠ¡åˆ†è§£ä¸ºå¯»æ‰¾<code class="fe nu nv nw nx b">180</code>ä½çš„æœ€ä½³ç»„åˆ(å¯»æ‰¾æœ€ä½³æ±½è½¦åŸºå› ç»„)çš„ç®€å•ä½çº§ä¼˜åŒ–é—®é¢˜ã€‚</p><p id="aa28" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">è¿™æ˜¯æˆ‘ä»¬è¦åšçš„:</p><ol class=""><li id="43fe" class="ng nh iq ly b lz mt mc mu mf ni mj nj mn nk mr ny nm nn no bi translated">ğŸ’ªğŸ»å°†<strong class="ly ja">è‚Œè‚‰</strong>(å‘åŠ¨æœºã€æ–¹å‘ç›˜)ç»™æ±½è½¦ï¼Œä½¿å…¶èƒ½å¤Ÿå‘åœè½¦ç‚¹ç§»åŠ¨ã€‚</li><li id="91b3" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr ny nm nn no bi translated">ğŸ‘€ç»™æ±½è½¦è£…ä¸Š<strong class="ly ja">çœ¼ç›</strong>(ä¼ æ„Ÿå™¨)ï¼Œè¿™æ ·å®ƒå°±èƒ½çœ‹åˆ°å‘¨å›´çš„éšœç¢ç‰©ã€‚</li><li id="d688" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr ny nm nn no bi translated">ğŸ§ ç»™æ±½è½¦é…å¤‡äº†å¤§è„‘ï¼Œå®ƒå°†æ ¹æ®æ±½è½¦çœ‹åˆ°çš„ä¸œè¥¿(é€šè¿‡ä¼ æ„Ÿå™¨çœ‹åˆ°çš„éšœç¢ç‰©)æ¥æ§åˆ¶è‚Œè‚‰(è¿åŠ¨)ã€‚å¤§è„‘å°†åªæ˜¯ä¸€ä¸ªçº¯ç²¹çš„åŠŸèƒ½ã€‚</li><li id="6f0c" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr ny nm nn no bi translated">ğŸ§¬ <strong class="ly ja">è¿›åŒ–å¤§è„‘</strong>æ ¹æ®ä¼ æ„Ÿå™¨çš„è¾“å…¥åšå‡ºæ­£ç¡®çš„åŠ¨ä½œã€‚è¿™å°±æ˜¯æˆ‘ä»¬å°†åº”ç”¨é—ä¼ ç®—æ³•çš„åœ°æ–¹ã€‚ä¸€ä»£åˆä¸€ä»£ï¼Œæˆ‘ä»¬çš„å¤§è„‘åŠŸèƒ½<code class="fe nu nv nw nx b">movements = f(sensors)</code>å°†å­¦ä¹ å¦‚ä½•å°†æ±½è½¦é©¶å‘åœè½¦ä½ã€‚</li></ol><h1 id="b5c0" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">èµ‹äºˆæ±½è½¦è‚Œè‚‰</h1><p id="8c1c" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">ä¸ºäº†èƒ½å¤Ÿç§»åŠ¨ï¼Œæ±½è½¦éœ€è¦â€œè‚Œè‚‰â€ã€‚è®©æˆ‘ä»¬ç»™æ±½è½¦ä¸¤ç§ç±»å‹çš„è‚Œè‚‰:</p><ol class=""><li id="f772" class="ng nh iq ly b lz mt mc mu mf ni mj nj mn nk mr ny nm nn no bi translated"><strong class="ly ja">å‘åŠ¨æœºè‚Œè‚‰</strong> â€”å…è®¸æ±½è½¦ç§»åŠ¨<em class="nc"> â†“åé€€</em>ã€<em class="nc"> â†‘å‰è¿›</em>æˆ–<em class="nc"> â—ç«‹é’¢</em>(ç©ºæŒ¡)</li><li id="efae" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr ny nm nn no bi translated"><strong class="ly ja">æ–¹å‘ç›˜è‚Œè‚‰</strong>â€”â€”å…è®¸æ±½è½¦åœ¨è¡Œé©¶ä¸­å‘å·¦<em class="nc"> â†è½¬</em>ã€<em class="nc"> â†’å‘å³</em>æˆ–<em class="nc"> â—ç›´è¡Œ</em></li></ol><p id="c843" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">æœ‰äº†è¿™ä¸¤å—è‚Œè‚‰ï¼Œæ±½è½¦å¯ä»¥å®Œæˆä»¥ä¸‹åŠ¨ä½œ:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/aefa3ce18b97fb1efe80744cf7e82061.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*bDz73zR9j8jIRnPcPSTCzA.gif"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">æ±½è½¦è‚Œè‚‰ã€‚ä½œè€…åˆ¶ä½œçš„åŠ¨ç”»</p></figure><p id="f30c" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œè‚Œè‚‰æ˜¯æ¥è‡ªå¤§è„‘çš„ä¿¡å·çš„æ¥æ”¶å™¨ï¼Œæ¯éš”<code class="fe nu nv nw nx b">100ms</code>(æ¯«ç§’)ä¸€æ¬¡ã€‚æ ¹æ®å¤§è„‘ä¿¡å·çš„ä»·å€¼ï¼Œè‚Œè‚‰ä¼šåšå‡ºä¸åŒçš„ååº”ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹é¢è®¨è®ºâ€œå¤§è„‘â€éƒ¨åˆ†ï¼Œä½†ç°åœ¨ï¼Œå‡è®¾æˆ‘ä»¬çš„å¤§è„‘å¯èƒ½åªå‘æ¯å—è‚Œè‚‰å‘é€3ç§å¯èƒ½çš„ä¿¡å·:<code class="fe nu nv nw nx b">-1</code>ã€<code class="fe nu nv nw nx b">0</code>æˆ–<code class="fe nu nv nw nx b">+1</code>ã€‚</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="09fc" class="od lf iq nx b gy oe of l og oh">type MuscleSignal = -1 | 0 | 1;</span></pre><p id="6d56" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä¾‹å¦‚ï¼Œå¤§è„‘å¯èƒ½ä¼šå‘å¼•æ“è‚Œè‚‰å‘é€å€¼ä¸º<code class="fe nu nv nw nx b">+1</code>çš„ä¿¡å·ï¼Œå®ƒå°†å¼€å§‹å‘å‰ç§»åŠ¨æ±½è½¦ã€‚ç»™å¼•æ“çš„ä¿¡å·<code class="fe nu nv nw nx b">-1</code>ä½¿æ±½è½¦å‘åç§»åŠ¨ã€‚åŒæ—¶ï¼Œå¦‚æœå¤§è„‘å°†ä¿¡å·<code class="fe nu nv nw nx b">-1</code>å‘é€ç»™æ–¹å‘ç›˜è‚Œè‚‰ï¼Œå®ƒä¼šå°†è½¦è½¬å‘å·¦ä¾§ç­‰ã€‚</p><p id="0a8b" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå¤§è„‘ä¿¡å·å€¼æ˜¯å¦‚ä½•æ˜ å°„åˆ°è‚Œè‚‰åŠ¨ä½œçš„:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/f8f8d5cbc2718e3334761a230dc896fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wzSXMRTvg62msCMkbQq5BA.png"/></div></div></figure><blockquote class="mz na nb"><p id="41ea" class="lw lx nc ly b lz mt ka mb mc mu kd me nd mv mh mi ne mw ml mm nf mx mp mq mr ij bi translated">ä½ å¯ä»¥<a class="ae ms" href="https://trekhleb.dev/self-parking-car-evolution?parking=manual#/" rel="noopener ugc nofollow" target="_blank">ä½¿ç”¨è¿›åŒ–æ¨¡æ‹Ÿå™¨</a>å°è¯•æ‰‹åŠ¨åœè½¦ï¼Œçœ‹çœ‹æ±½è½¦è‚Œè‚‰æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æ¯å½“ä½ æŒ‰ä¸‹<code class="fe nu nv nw nx b">WASD</code>é”®ç›˜ä¸Šçš„ä¸€ä¸ªé”®(æˆ–ä½¿ç”¨è§¦æ‘¸å±æ“çºµæ†)ï¼Œä½ å°±å‘å¼•æ“å’Œæ–¹å‘ç›˜è‚Œè‚‰å‘é€è¿™äº›<code class="fe nu nv nw nx b">-1</code>ã€<code class="fe nu nv nw nx b">0</code>æˆ–<code class="fe nu nv nw nx b">+1</code>ä¿¡å·ã€‚</p></blockquote><h1 id="b782" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">ç»™æ±½è½¦ä¸€åŒçœ¼ç›</h1><p id="d325" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">åœ¨æˆ‘ä»¬çš„æ±½è½¦å­¦ä¼šå¦‚ä½•ä½¿ç”¨è‚Œè‚‰è‡ªåŠ¨åœè½¦ä¹‹å‰ï¼Œå®ƒéœ€è¦èƒ½å¤Ÿâ€œçœ‹åˆ°â€å‘¨å›´çš„ç¯å¢ƒã€‚è®©æˆ‘ä»¬ä»¥è·ç¦»ä¼ æ„Ÿå™¨çš„å½¢å¼ç»™å®ƒä¸€åŒ<code class="fe nu nv nw nx b">8</code>çœ¼ç›:</p><ul class=""><li id="479d" class="ng nh iq ly b lz mt mc mu mf ni mj nj mn nk mr nl nm nn no bi translated">æ¯ä¸ªä¼ æ„Ÿå™¨å¯ä»¥åœ¨<code class="fe nu nv nw nx b">0-4m</code>(ç±³)çš„è·ç¦»èŒƒå›´å†…æ¢æµ‹éšœç¢ç‰©ã€‚</li><li id="3f0f" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr nl nm nn no bi translated">æ¯ä¸ªä¼ æ„Ÿå™¨æ¯éš”<code class="fe nu nv nw nx b">100ms</code>éƒ½ä¼šå‘æ±½è½¦çš„â€œå¤§è„‘â€æŠ¥å‘Šå®ƒâ€œçœ‹åˆ°â€çš„éšœç¢ç‰©çš„æœ€æ–°ä¿¡æ¯ã€‚</li><li id="22f1" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr nl nm nn no bi translated">åªè¦ä¼ æ„Ÿå™¨æ²¡æœ‰å‘ç°ä»»ä½•éšœç¢ç‰©ï¼Œå®ƒå°±ä¼šæŠ¥å‘Š<code class="fe nu nv nw nx b">0</code>çš„å€¼ã€‚ç›¸åï¼Œå¦‚æœä¼ æ„Ÿå™¨çš„å€¼å¾ˆå°ä½†ä¸ä¸ºé›¶(å³<code class="fe nu nv nw nx b">0.01m</code>)ï¼Œåˆ™æ„å‘³ç€éšœç¢ç‰©å¾ˆè¿‘ã€‚</li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/5efb0b5d578055fe9c114f6832436d27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GYsW88SJA0EXlH6HhIRKmQ.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">è½¦çœ¼ã€‚ä½œè€…æ’å›¾</p></figure><blockquote class="mz na nb"><p id="5ff4" class="lw lx nc ly b lz mt ka mb mc mu kd me nd mv mh mi ne mw ml mm nf mx mp mq mr ij bi translated">ä½ å¯ä»¥ä½¿ç”¨è¿›åŒ–æ¨¡æ‹Ÿå™¨ï¼Œçœ‹çœ‹æ¯ä¸ªä¼ æ„Ÿå™¨çš„é¢œè‰²æ˜¯å¦‚ä½•æ ¹æ®éšœç¢ç‰©çš„è¿œè¿‘è€Œå˜åŒ–çš„ã€‚</p></blockquote><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="7ae1" class="od lf iq nx b gy oe of l og oh">type Sensors = number[];</span></pre><h1 id="6a03" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">ç»™æ±½è½¦èµ‹äºˆå¤§è„‘</h1><p id="2c8a" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">æ­¤æ—¶æ­¤åˆ»ï¼Œæˆ‘ä»¬çš„æ±½è½¦å¯ä»¥â€œçœ‹è§â€å’Œâ€œç§»åŠ¨â€ï¼Œä½†æ²¡æœ‰â€œåè°ƒå™¨â€ï¼Œå°†â€œçœ¼ç›â€çš„ä¿¡å·è½¬æ¢ä¸ºâ€œè‚Œè‚‰â€çš„é€‚å½“è¿åŠ¨ã€‚æˆ‘ä»¬éœ€è¦ç»™æ±½è½¦ä¸€ä¸ªâ€œå¤§è„‘â€ã€‚</p><h1 id="4f39" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">å¤§è„‘è¾“å…¥</h1><p id="ef4f" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">ä½œä¸ºæ¥è‡ªä¼ æ„Ÿå™¨çš„è¾“å…¥ï¼Œå¤§è„‘æ¯éš”<code class="fe nu nv nw nx b">100ms</code>å°±ä¼šå¾—åˆ°<code class="fe nu nv nw nx b">8</code>ä¸ªæµ®ç‚¹æ•°ï¼Œæ¯ä¸ªéƒ½åœ¨<code class="fe nu nv nw nx b">[0...4]</code>çš„èŒƒå›´å†…ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥å¯èƒ½å¦‚ä¸‹æ‰€ç¤º:</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="b2d0" class="od lf iq nx b gy oe of l og oh">const sensors: Sensors = [s0, s1, s2, s3, s4, s5, s6, s7];<br/>// i.e. ğŸ§  â† [0, 0.5, 4, 0.002, 0, 3.76, 0, 1.245]</span></pre><h1 id="34ae" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">å¤§è„‘è¾“å‡º</h1><p id="409d" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">æ¯ä¸€ä¸ª<code class="fe nu nv nw nx b">100ms</code>å¤§è„‘éƒ½åº”è¯¥äº§ç”Ÿä¸¤ä¸ªæ•´æ•°ä½œä¸ºè¾“å‡º:</p><ol class=""><li id="bc86" class="ng nh iq ly b lz mt mc mu mf ni mj nj mn nk mr ny nm nn no bi translated">ä¸€ä¸ªæ•°å­—ä½œä¸ºå‘åŠ¨æœºçš„ä¿¡å·:<code class="fe nu nv nw nx b">engineSignal</code></li><li id="76a2" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr ny nm nn no bi translated">ä¸€ä¸ªæ•°å­—ä½œä¸ºæ–¹å‘ç›˜çš„ä¿¡å·:<code class="fe nu nv nw nx b">wheelSignal</code></li></ol><p id="ac91" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">æ¯ä¸ªæ•°å­—éƒ½åº”è¯¥æ˜¯ç±»å‹<code class="fe nu nv nw nx b">MuscleSignal</code>ï¼Œå¹¶ä¸”å¯ä»¥å–ä¸‰ä¸ªå€¼ä¹‹ä¸€:<code class="fe nu nv nw nx b">-1</code>ã€<code class="fe nu nv nw nx b">0</code>æˆ–<code class="fe nu nv nw nx b">+1</code>ã€‚</p><h1 id="8504" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">å¤§è„‘å…¬å¼/åŠŸèƒ½</h1><p id="5305" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">è®°ä½ä¸Šé¢æåˆ°çš„å¤§è„‘çš„è¾“å…¥å’Œè¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥è¯´å¤§è„‘åªæ˜¯ä¸€ç§åŠŸèƒ½:</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="d0b7" class="od lf iq nx b gy oe of l og oh">const { engineSignal, wheelSignal } = brainToMuscleSignal(<br/>  brainFunction(sensors)<br/>);<br/>// i.e. { engineSignal: 0, wheelSignal: -1 } â† ğŸ§  â† [0, 0.5, 4, 0.002, 0, 3.76, 0, 1.245]</span></pre><p id="9db7" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">å…¶ä¸­<code class="fe nu nv nw nx b">brainToMuscleSignal()</code>æ˜¯ä¸€ä¸ªå°†åŸå§‹è„‘ä¿¡å·(ä»»ä½•æµ®ç‚¹æ•°)è½¬æ¢ä¸ºè‚Œè‚‰ä¿¡å·(è½¬æ¢ä¸º<code class="fe nu nv nw nx b">-1</code>ã€<code class="fe nu nv nw nx b">0</code>æˆ–<code class="fe nu nv nw nx b">+1</code>æ•°)ä»¥ä¾¿è‚Œè‚‰èƒ½å¤Ÿç†è§£çš„å‡½æ•°ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹é¢å®ç°è¿™ä¸ªè½¬æ¢å™¨å‡½æ•°ã€‚</p><p id="b3f0" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ç°åœ¨çš„ä¸»è¦é—®é¢˜æ˜¯<code class="fe nu nv nw nx b">brainFunction()</code>æ˜¯ä¸€ä¸ªä»€ä¹ˆæ ·çš„å‡½æ•°ã€‚</p><p id="ec8f" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä¸ºäº†è®©æ±½è½¦æ›´æ™ºèƒ½ï¼Œè®©å®ƒçš„è¿åŠ¨æ›´å¤æ‚ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ª<a class="ae ms" href="https://en.wikipedia.org/wiki/Multilayer_perceptron" rel="noopener ugc nofollow" target="_blank">å¤šå±‚æ„ŸçŸ¥æœº</a>ã€‚è¿™ä¸ªåå­—æœ‰ç‚¹å“äººï¼Œä½†è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç¥ç»ç½‘ç»œï¼Œæœ‰ä¸€ä¸ªåŸºæœ¬çš„æ¶æ„(æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªæœ‰è®¸å¤šå‚æ•°/ç³»æ•°çš„å¤§å…¬å¼)ã€‚</p><blockquote class="mz na nb"><p id="d33c" class="lw lx nc ly b lz mt ka mb mc mu kd me nd mv mh mi ne mw ml mm nf mx mp mq mr ij bi translated">åœ¨æˆ‘çš„<a class="ae ms" href="https://github.com/trekhleb/homemade-machine-learning#-multilayer-perceptron-mlp" rel="noopener ugc nofollow" target="_blank">è‡ªåˆ¶æœºå™¨å­¦ä¹ </a>ã€<a class="ae ms" href="https://github.com/trekhleb/machine-learning-experiments#multilayer-perceptron-mlp-or-simple-neural-network-nn" rel="noopener ugc nofollow" target="_blank">æœºå™¨å­¦ä¹ å®éªŒ</a>å’Œ<a class="ae ms" href="https://github.com/trekhleb/nano-neuron" rel="noopener ugc nofollow" target="_blank">çº³ç±³ç¥ç»å…ƒ</a>é¡¹ç›®ä¸­ï¼Œæˆ‘å·²ç»è¯¦ç»†ä»‹ç»äº†å¤šå±‚æ„ŸçŸ¥å™¨ã€‚ä½ ç”šè‡³å¯ä»¥æŒ‘æˆ˜é‚£ä¸ªç®€å•çš„ç½‘ç»œ<a class="ae ms" href="https://trekhleb.dev/machine-learning-experiments/#/experiments/DigitsRecognitionMLP" rel="noopener ugc nofollow" target="_blank">æ¥è¯†åˆ«ä½ å†™çš„æ•°å­—</a>ã€‚</p></blockquote><p id="6dd3" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ç„¶è€Œï¼Œä¸ºäº†é¿å…å¼•å…¥å…¨æ–°çš„ç¥ç»ç½‘ç»œæ¦‚å¿µï¼Œæˆ‘ä»¬å°†é‡‡ç”¨ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸¤ä¸ªå…·æœ‰å¤šä¸ªå˜é‡çš„çº¿æ€§å¤šé¡¹å¼(æ›´å‡†ç¡®åœ°è¯´ï¼Œæ¯ä¸ªå¤šé¡¹å¼å°†æ­£å¥½æœ‰<code class="fe nu nv nw nx b">8</code>ä¸ªå˜é‡ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰<code class="fe nu nv nw nx b">8</code>ä¸ªä¼ æ„Ÿå™¨)ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="a16a" class="od lf iq nx b gy oe of l og oh">engineSignal = brainToMuscleSignal(<br/>  (e0 * s0) + (e1 * s1) + ... + (e7 * s7) + e8 // &lt;- brainFunction<br/>)</span><span id="efd0" class="od lf iq nx b gy oi of l og oh">wheelSignal = brainToMuscleSignal(<br/>  (w0 * s0) + (w1 * s1) + ... + (w7 * s7) + w8 // &lt;- brainFunction<br/>)</span></pre><p id="9826" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">å…¶ä¸­:</p><ul class=""><li id="f94c" class="ng nh iq ly b lz mt mc mu mf ni mj nj mn nk mr nl nm nn no bi translated"><code class="fe nu nv nw nx b">[s0, s1, ..., s7]</code>-<code class="fe nu nv nw nx b">8</code>å˜é‡ï¼Œå³<code class="fe nu nv nw nx b">8</code>ä¼ æ„Ÿå™¨å€¼ã€‚è¿™äº›æ˜¯åŠ¨æ€çš„ã€‚</li><li id="1713" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr nl nm nn no bi translated"><code class="fe nu nv nw nx b">[e0, e1, ..., e8]</code> -å‘åŠ¨æœºå¤šé¡¹å¼çš„<code class="fe nu nv nw nx b">9</code>ç³»æ•°ã€‚è¿™äº›æ˜¯æ±½è½¦éœ€è¦å­¦ä¹ çš„ï¼Œå®ƒä»¬æ˜¯é™æ€çš„ã€‚</li><li id="5877" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr nl nm nn no bi translated"><code class="fe nu nv nw nx b">[w0, w1, ..., w8]</code> -æ–¹å‘ç›˜å¤šé¡¹å¼çš„<code class="fe nu nv nw nx b">9</code>ç³»æ•°ã€‚è¿™äº›æ˜¯æ±½è½¦éœ€è¦å­¦ä¹ çš„ï¼Œå®ƒä»¬æ˜¯é™æ€çš„</li></ul><p id="1b04" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä¸ºå¤§è„‘ä½¿ç”¨æ›´ç®€å•çš„åŠŸèƒ½çš„ä»£ä»·æ˜¯ï¼Œæ±½è½¦å°†æ— æ³•å­¦ä¹ ä¸€äº›å¤æ‚çš„åŠ¨ä½œï¼Œä¹Ÿæ— æ³•å¾ˆå¥½åœ°æ¦‚æ‹¬å’Œé€‚åº”æœªçŸ¥çš„ç¯å¢ƒã€‚ä½†æ˜¯å¯¹äºæˆ‘ä»¬è¿™ä¸ªç‰¹æ®Šçš„åœè½¦åœºæ¥è¯´ï¼Œä¸ºäº†å±•ç¤ºé—ä¼ ç®—æ³•çš„å·¥ä½œï¼Œè¿™å·²ç»è¶³å¤Ÿäº†ã€‚</p><p id="3e94" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼å®ç°é€šç”¨å¤šé¡¹å¼å‡½æ•°(<a class="ae ms" href="https://trekhleb.dev/blog/2021/self-parking-car-evolution/" rel="noopener ugc nofollow" target="_blank">æŸ¥çœ‹è¿™ç¯‡æ–‡ç« çš„è¿™ä¸ªç‰ˆæœ¬ä»¥è·å¾—æ›´å¥½çš„æºä»£ç æ ¼å¼</a>):</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="cb1a" class="od lf iq nx b gy oe of l og oh">type Coefficients = number[];</span><span id="6441" class="od lf iq nx b gy oi of l og oh">// Calculates the value of a linear polynomial based on the coefficients and variables.<br/>const linearPolynomial = (coefficients: Coefficients, variables: number[]): number =&gt; {<br/>  if (coefficients.length !== (variables.length + 1)) {<br/>    throw new Error('Incompatible number of polynomial coefficients and variables');<br/>  }<br/>  let result = 0;<br/>  coefficients.forEach((coefficient: number, coefficientIndex: number) =&gt; {<br/>    if (coefficientIndex &lt; variables.length) {<br/>      result += coefficient * variables[coefficientIndex];<br/>    } else {<br/>      // The last coefficient needs to be added up without multiplication.<br/>      result += coefficient<br/>    }<br/>  });<br/>  return result;<br/>};</span></pre><p id="ee13" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ±½è½¦çš„å¤§è„‘å°†ç”±ä¸¤ä¸ªå¤šé¡¹å¼ç»„æˆï¼Œçœ‹èµ·æ¥åƒè¿™æ ·:</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="5445" class="od lf iq nx b gy oe of l og oh">const engineSignal: MuscleSignal = brainToMuscleSignal(<br/>  linearPolynomial(engineCoefficients, sensors)<br/>);</span><span id="3b09" class="od lf iq nx b gy oi of l og oh">const wheelSignal: MuscleSignal = brainToMuscleSignal(<br/>  linearPolynomial(wheelCoefficients, sensors)<br/>);</span></pre><p id="f0ba" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated"><code class="fe nu nv nw nx b">linearPolynomial()</code>å‡½æ•°çš„è¾“å‡ºæ˜¯ä¸€ä¸ªæµ®ç‚¹æ•°ã€‚<code class="fe nu nv nw nx b">brainToMuscleSignal()</code>å‡½æ•°éœ€è¦å°†å¤§é‡çš„æµ®ç‚¹æ•°è½¬æ¢æˆä¸‰ä¸ªç‰¹å®šçš„æ•´æ•°ï¼Œå®ƒå°†åˆ†ä¸¤æ­¥å®Œæˆ:</p><ol class=""><li id="8889" class="ng nh iq ly b lz mt mc mu mf ni mj nj mn nk mr ny nm nn no bi translated">å°†å¤§èŒƒå›´æµ®åŠ¨(å³<code class="fe nu nv nw nx b">0.456</code>æˆ–<code class="fe nu nv nw nx b">3673.45</code>æˆ–<code class="fe nu nv nw nx b">-280</code>)è½¬æ¢ä¸º<code class="fe nu nv nw nx b">(0...1)</code>(å³<code class="fe nu nv nw nx b">0.05</code>æˆ–<code class="fe nu nv nw nx b">0.86</code>)èŒƒå›´å†…çš„æµ®åŠ¨</li><li id="60a5" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr ny nm nn no bi translated">å°†<code class="fe nu nv nw nx b">(0...1)</code>èŒƒå›´å†…çš„æµ®ç‚¹å€¼è½¬æ¢ä¸º<code class="fe nu nv nw nx b">-1</code>ã€<code class="fe nu nv nw nx b">0</code>æˆ–<code class="fe nu nv nw nx b">+1</code>ä¸‰ä¸ªæ•´æ•°å€¼ä¹‹ä¸€ã€‚æ¯”å¦‚é è¿‘<code class="fe nu nv nw nx b">0</code>çš„æµ®åŠ¨ä¼šè½¬æ¢æˆ<code class="fe nu nv nw nx b">-1</code>ï¼Œé è¿‘<code class="fe nu nv nw nx b">0.5</code>çš„æµ®åŠ¨ä¼šè½¬æ¢æˆ<code class="fe nu nv nw nx b">0</code>ï¼Œé è¿‘<code class="fe nu nv nw nx b">1</code>çš„æµ®åŠ¨ä¼šè½¬æ¢æˆ<code class="fe nu nv nw nx b">1</code>ã€‚</li></ol><p id="a2dd" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä¸ºäº†å®Œæˆè½¬æ¢çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ä¸€ä¸ªå®ç°ä»¥ä¸‹å…¬å¼çš„<a class="ae ms" href="https://en.wikipedia.org/wiki/Sigmoid_function" rel="noopener ugc nofollow" target="_blank"> Sigmoidå‡½æ•°</a>:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/b94efd45bbc6b902f475b264d822b88c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U2StmB7jeSDG8ErKqPdlXw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">Sigmoidå…¬å¼</p></figure><p id="c0cc" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">å®ƒå°†å®½èŒƒå›´çš„æµ®ç‚¹æ•°(<code class="fe nu nv nw nx b">x</code>è½´)è½¬æ¢ä¸ºæœ‰é™èŒƒå›´çš„æµ®ç‚¹æ•°(<code class="fe nu nv nw nx b">(0...1)</code><code class="fe nu nv nw nx b">y</code>è½´)ã€‚è¿™æ­£æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ã€‚</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/126f6cfbeb696151b42af8e35edbf347.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p1tsfhOYFRO329_DKGFeMg.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">Sigmoidå‡½æ•°</p></figure><p id="d8fe" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">è¿™æ˜¯è½¬æ¢æ­¥éª¤åœ¨Sigmoidå›¾ä¸Šçš„æ ·å­ã€‚</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/65973419e3c5218f1462d8f023f48cc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HGFxAqUeP44Oa5GXY8f1Bg.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">ä½œè€…æ’å›¾</p></figure><p id="139a" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä¸Šé¢æåˆ°çš„ä¸¤ä¸ªè½¬æ¢æ­¥éª¤çš„å®ç°å¦‚ä¸‹æ‰€ç¤º:</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="ada5" class="od lf iq nx b gy oe of l og oh">// Calculates the sigmoid value for a given number.<br/>const sigmoid = (x: number): number =&gt; {<br/>  return 1 / (1 + Math.E ** -x);<br/>};</span><span id="49f6" class="od lf iq nx b gy oi of l og oh">// Converts sigmoid value (0...1) to the muscle signals (-1, 0, +1)<br/>// The margin parameter is a value between 0 and 0.5:<br/>// [0 ... (0.5 - margin) ... 0.5 ... (0.5 + margin) ... 1]<br/>const sigmoidToMuscleSignal = (sigmoidValue: number, margin: number = 0.4): MuscleSignal =&gt; {<br/>  if (sigmoidValue &lt; (0.5 - margin)) {<br/>    return -1;<br/>  }<br/>  if (sigmoidValue &gt; (0.5 + margin)) {<br/>    return 1;<br/>  }<br/>  return 0;<br/>};</span><span id="08c9" class="od lf iq nx b gy oi of l og oh">// Converts raw brain signal to the muscle signal.<br/>const brainToMuscleSignal = (rawBrainSignal: number): MuscleSignal =&gt; {<br/>  const normalizedBrainSignal = sigmoid(rawBrainSignal);<br/>  return sigmoidToMuscleSignal(normalizedBrainSignal);<br/>}</span></pre><h1 id="0c8f" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">æ±½è½¦çš„åŸºå› ç»„</h1><blockquote class="mz na nb"><p id="a58f" class="lw lx nc ly b lz mt ka mb mc mu kd me nd mv mh mi ne mw ml mm nf mx mp mq mr ij bi translated">ä»ä¸Šé¢çš„â€œçœ¼ç›â€ã€â€œè‚Œè‚‰â€å’Œâ€œå¤§è„‘â€éƒ¨åˆ†å¾—å‡ºçš„ä¸»è¦ç»“è®ºåº”è¯¥æ˜¯:ç³»æ•°<code class="fe nu nv nw nx b">[e0, e1, ..., e8]</code>å’Œ<code class="fe nu nv nw nx b">[w0, w1, ..., w8]</code>å®šä¹‰äº†æ±½è½¦çš„è¡Œä¸ºã€‚è¿™äº›æ•°å­—å…±åŒæ„æˆäº†ç‹¬ç‰¹çš„æ±½è½¦åŸºå› ç»„(æˆ–æ±½è½¦çš„DNA)ã€‚</p></blockquote><h1 id="34f2" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">åè¿›åˆ¶å½¢å¼çš„æ±½è½¦åŸºå› ç»„</h1><p id="4d8f" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">è®©æˆ‘ä»¬å°†<code class="fe nu nv nw nx b">[e0, e1, ..., e8]</code>å’Œ<code class="fe nu nv nw nx b">[w0, w1, ..., w8]</code>å¤§è„‘ç³»æ•°è¿æ¥åœ¨ä¸€èµ·ï¼Œä»¥åè¿›åˆ¶å½¢å¼æ„æˆä¸€è¾†æ±½è½¦çš„åŸºå› ç»„:</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="87db" class="od lf iq nx b gy oe of l og oh">// Car genome as a list of decimal numbers (coefficients).<br/>const carGenomeBase10 = [e0, e1, ..., e8, w0, w1, ..., w8];</span><span id="09e6" class="od lf iq nx b gy oi of l og oh">// i.e. carGenomeBase10 = [17.5, 0.059, -46, 25, 156, -0.085, -0.207, -0.546, 0.071, -58, 41, 0.011, 252, -3.5, -0.017, 1.532, -360, 0.157]</span></pre><h1 id="51ae" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">äºŒè¿›åˆ¶å½¢å¼çš„æ±½è½¦åŸºå› ç»„</h1><p id="6485" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">è®©æˆ‘ä»¬å†æ·±å…¥ä¸€æ­¥(åˆ°åŸºå› çš„å±‚é¢)ï¼Œå°†æ±½è½¦åŸºå› ç»„çš„åè¿›åˆ¶æ•°å­—è½¬æ¢æˆäºŒè¿›åˆ¶æ ¼å¼(è½¬æ¢æˆæ™®é€šçš„<code class="fe nu nv nw nx b">1</code> så’Œ<code class="fe nu nv nw nx b">0</code> s)ã€‚</p><blockquote class="mz na nb"><p id="3131" class="lw lx nc ly b lz mt ka mb mc mu kd me nd mv mh mi ne mw ml mm nf mx mp mq mr ij bi translated">æˆ‘å·²ç»åœ¨æµ®ç‚¹æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºçš„æ–‡ç« <a class="ae ms" href="https://trekhleb.dev/blog/2021/binary-floating-point/" rel="noopener ugc nofollow" target="_blank">ä¸­è¯¦ç»†æè¿°äº†å°†æµ®ç‚¹æ•°è½¬æ¢æˆäºŒè¿›åˆ¶æ•°çš„è¿‡ç¨‹ã€‚å¦‚æœæœ¬èŠ‚ä¸­çš„ä»£ç ä¸æ¸…æ¥šï¼Œæ‚¨å¯èƒ½æƒ³æŸ¥çœ‹ä¸€ä¸‹ã€‚</a></p></blockquote><p id="8888" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä¸‹é¢æ˜¯ä¸€ä¸ªå¦‚ä½•å°†æµ®ç‚¹æ•°è½¬æ¢æˆäºŒè¿›åˆ¶æ•°çš„ç®€å•ä¾‹å­(å¦‚æœè¿™ä¸ªä¾‹å­ä»¤äººå›°æƒ‘ï¼Œè¯·éšæ„é˜…è¯»ç¬¬ä¸€ä¸ª):</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oj"><img src="../Images/73d114d320b627dfc20c515a0250fc10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N8JsNK8SBpgKCfh89mbgRQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">æµ®ç‚¹æ•°çš„â€œåè¿›åˆ¶åˆ°äºŒè¿›åˆ¶â€è½¬æ¢ç¤ºä¾‹ã€‚ä½œè€…æ’å›¾ã€‚</p></figure><p id="61e0" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œä¸ºäº†å‡å°‘åŸºå› ç»„é•¿åº¦ï¼Œæˆ‘ä»¬å°†æŠŠæ¯ä¸ªæµ®ç‚¹ç³»æ•°è½¬æ¢æˆéæ ‡å‡†çš„<code class="fe nu nv nw nx b">10 bits</code>äºŒè¿›åˆ¶æ•°(<code class="fe nu nv nw nx b">1</code>ç¬¦å·ä½ã€<code class="fe nu nv nw nx b">4</code>æŒ‡æ•°ä½ã€<code class="fe nu nv nw nx b">5</code>åˆ†æ•°ä½)ã€‚</p><p id="542a" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">æˆ‘ä»¬æ€»å…±æœ‰<code class="fe nu nv nw nx b">18</code>ä¸ªç³»æ•°ï¼Œæ¯ä¸ªç³»æ•°éƒ½ä¼šè¢«è½¬æ¢æˆ<code class="fe nu nv nw nx b">10</code>ä½æ•°ã€‚è¿™æ„å‘³ç€æ±½è½¦çš„åŸºå› ç»„å°†æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º<code class="fe nu nv nw nx b">18 * 10 = 180 bits</code>çš„<code class="fe nu nv nw nx b">0</code>å’Œ<code class="fe nu nv nw nx b">1</code>çš„æ•°ç»„ã€‚</p><p id="ef9c" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä¾‹å¦‚ï¼Œå¯¹äºä¸Šé¢æåˆ°çš„åè¿›åˆ¶æ ¼å¼çš„åŸºå› ç»„ï¼Œå…¶äºŒè¿›åˆ¶è¡¨ç¤ºå¦‚ä¸‹:</p><p id="3689" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œä¸ºäº†å‡å°‘åŸºå› ç»„é•¿åº¦ï¼Œæˆ‘ä»¬å°†æŠŠæ¯ä¸ªæµ®ç‚¹ç³»æ•°è½¬æ¢æˆéæ ‡å‡†çš„<code class="fe nu nv nw nx b">10 bits</code>äºŒè¿›åˆ¶æ•°(<code class="fe nu nv nw nx b">1</code>ç¬¦å·ä½ã€<code class="fe nu nv nw nx b">4</code>æŒ‡æ•°ä½ã€<code class="fe nu nv nw nx b">5</code>åˆ†æ•°ä½)ã€‚</p><p id="14a4" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">æˆ‘ä»¬æ€»å…±æœ‰<code class="fe nu nv nw nx b">18</code>ä¸ªç³»æ•°ï¼Œæ¯ä¸ªç³»æ•°å°†è¢«è½¬æ¢æˆ<code class="fe nu nv nw nx b">10</code>ä½æ•°ã€‚è¿™æ„å‘³ç€æ±½è½¦çš„åŸºå› ç»„å°†æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º<code class="fe nu nv nw nx b">18 * 10 = 180 bits</code>çš„<code class="fe nu nv nw nx b">0</code>å’Œ<code class="fe nu nv nw nx b">1</code>çš„æ•°ç»„ã€‚</p><p id="e97f" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä¾‹å¦‚ï¼Œå¯¹äºä¸Šé¢æåˆ°çš„åè¿›åˆ¶æ ¼å¼çš„åŸºå› ç»„ï¼Œå…¶äºŒè¿›åˆ¶è¡¨ç¤ºå¦‚ä¸‹:</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="378c" class="od lf iq nx b gy oe of l og oh">type Gene = 0 | 1;<br/><br/>type Genome = Gene[];<br/><br/>const genome: Genome = [<br/>  // Engine coefficients.<br/>  0, 1, 0, 1, 1, 0, 0, 0, 1, 1, // &lt;- 17.5<br/>  0, 0, 0, 1, 0, 1, 1, 1, 0, 0, // &lt;- 0.059<br/>  1, 1, 1, 0, 0, 0, 1, 1, 1, 0, // &lt;- -46<br/>  0, 1, 0, 1, 1, 1, 0, 0, 1, 0, // &lt;- 25<br/>  0, 1, 1, 1, 0, 0, 0, 1, 1, 1, // &lt;- 156<br/>  1, 0, 0, 1, 1, 0, 1, 1, 0, 0, // &lt;- -0.085<br/>  1, 0, 1, 0, 0, 1, 0, 1, 0, 1, // &lt;- -0.207<br/>  1, 0, 1, 1, 0, 0, 0, 0, 1, 1, // &lt;- -0.546<br/>  0, 0, 0, 1, 1, 0, 0, 1, 0, 0, // &lt;- 0.071<br/><br/>  // Wheels coefficients.<br/>  1, 1, 1, 0, 0, 1, 1, 0, 1, 0, // &lt;- -58<br/>  0, 1, 1, 0, 0, 0, 1, 0, 0, 1, // &lt;- 41<br/>  0, 0, 0, 0, 0, 0, 1, 0, 1, 0, // &lt;- 0.011<br/>  0, 1, 1, 1, 0, 1, 1, 1, 1, 1, // &lt;- 252<br/>  1, 1, 0, 0, 0, 1, 1, 0, 0, 0, // &lt;- -3.5<br/>  1, 0, 0, 0, 1, 0, 0, 1, 0, 0, // &lt;- -0.017<br/>  0, 0, 1, 1, 1, 1, 0, 0, 0, 1, // &lt;- 1.532<br/>  1, 1, 1, 1, 1, 0, 1, 1, 0, 1, // &lt;- -360<br/>  0, 0, 1, 0, 0, 0, 1, 0, 0, 0, // &lt;- 0.157<br/>];</span></pre><p id="fbc9" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">æˆ‘çš„å¤©å•Šã€‚äºŒå…ƒåŸºå› ç»„çœ‹èµ·æ¥å¦‚æ­¤ç¥ç§˜ã€‚ä½†æ˜¯ä½ èƒ½æƒ³è±¡å—ï¼Œä»…ä»…è¿™äº›0å’Œ1å°±å®šä¹‰äº†æ±½è½¦åœ¨åœè½¦åœºçš„è¡Œä¸ºï¼å°±åƒä½ é»‘äº†æŸäººçš„DNAï¼ŒçŸ¥é“æ¯ä¸ªåŸºå› çš„ç¡®åˆ‡å«ä¹‰ã€‚å¤ªç¥å¥‡äº†ï¼</p><p id="e673" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œä½ å¯ä»¥åœ¨<a class="ae ms" href="https://trekhleb.dev/self-parking-car-evolution?parking=evolution#/" rel="noopener ugc nofollow" target="_blank">è¿›åŒ–æ¨¡æ‹Ÿå™¨</a>ä»ªè¡¨ç›˜ä¸Šçœ‹åˆ°æ€§èƒ½æœ€å¥½çš„æ±½è½¦çš„åŸºå› ç»„å’Œç³»æ•°çš„å‡†ç¡®å€¼:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/823db3726f506a611b4832e9431235ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VKrfxDBZvZvprIsCWB5pmA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">è¿›åŒ–æ¨¡æ‹Ÿå™¨ä»ªè¡¨æ¿æˆªå›¾</p></figure><p id="70fc" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä¸‹é¢æ˜¯æ‰§è¡Œæµ®ç‚¹æ•°ä»äºŒè¿›åˆ¶åˆ°åè¿›åˆ¶æ ¼å¼è½¬æ¢çš„æºä»£ç (å¤§è„‘éœ€è¦å®ƒæ¥è§£ç åŸºå› ç»„å¹¶æ ¹æ®åŸºå› ç»„æ•°æ®äº§ç”Ÿè‚Œè‚‰ä¿¡å·):</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="29ff" class="od lf iq nx b gy oe of l og oh">type Bit = 0 | 1;</span><span id="4388" class="od lf iq nx b gy oi of l og oh">type Bits = Bit[];</span><span id="50e8" class="od lf iq nx b gy oi of l og oh">type PrecisionConfig = {<br/>  signBitsCount: number,<br/>  exponentBitsCount: number,<br/>  fractionBitsCount: number,<br/>  totalBitsCount: number,<br/>};</span><span id="add4" class="od lf iq nx b gy oi of l og oh">type PrecisionConfigs = {<br/>  custom: PrecisionConfig,<br/>};</span><span id="1c7c" class="od lf iq nx b gy oi of l og oh">const precisionConfigs: PrecisionConfigs = {<br/>  // Custom-made 10-bits precision for faster evolution progress.<br/>  custom: {<br/>    signBitsCount: 1,<br/>    exponentBitsCount: 4,<br/>    fractionBitsCount: 5,<br/>    totalBitsCount: 10,<br/>  },<br/>};</span><span id="a7b2" class="od lf iq nx b gy oi of l og oh">// Converts the binary representation of the floating-point number to decimal float number.<br/>function bitsToFloat(bits: Bits, precisionConfig: PrecisionConfig): number {<br/>  const { signBitsCount, exponentBitsCount } = precisionConfig;</span><span id="6043" class="od lf iq nx b gy oi of l og oh">  // Figuring out the sign.<br/>  const sign = (-1) ** bits[0]; // -1^1 = -1, -1^0 = 1</span><span id="a0d7" class="od lf iq nx b gy oi of l og oh">  // Calculating the exponent value.<br/>  const exponentBias = 2 ** (exponentBitsCount - 1) - 1;<br/>  const exponentBits = bits.slice(signBitsCount, signBitsCount + exponentBitsCount);<br/>  const exponentUnbiased = exponentBits.reduce(<br/>    (exponentSoFar: number, currentBit: Bit, bitIndex: number) =&gt; {<br/>      const bitPowerOfTwo = 2 ** (exponentBitsCount - bitIndex - 1);<br/>      return exponentSoFar + currentBit * bitPowerOfTwo;<br/>    },<br/>    0,<br/>  );<br/>  const exponent = exponentUnbiased - exponentBias;</span><span id="b59f" class="od lf iq nx b gy oi of l og oh">  // Calculating the fraction value.<br/>  const fractionBits = bits.slice(signBitsCount + exponentBitsCount);<br/>  const fraction = fractionBits.reduce(<br/>    (fractionSoFar: number, currentBit: Bit, bitIndex: number) =&gt; {<br/>      const bitPowerOfTwo = 2 ** -(bitIndex + 1);<br/>      return fractionSoFar + currentBit * bitPowerOfTwo;<br/>    },<br/>    0,<br/>  );</span><span id="25ee" class="od lf iq nx b gy oi of l og oh">  // Putting all parts together to calculate the final number.<br/>  return sign * (2 ** exponent) * (1 + fraction);<br/>}</span><span id="f227" class="od lf iq nx b gy oi of l og oh">// Converts the 8-bit binary representation of the floating-point number to decimal float number.<br/>function bitsToFloat10(bits: Bits): number {<br/>  return bitsToFloat(bits, precisionConfigs.custom);<br/>}</span></pre><h1 id="0590" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">å¤§è„‘åŠŸèƒ½ä¸äºŒå…ƒåŸºå› ç»„ä¸€èµ·å·¥ä½œ</h1><p id="c0e0" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">ä»¥å‰ï¼Œæˆ‘ä»¬çš„å¤§è„‘åŠŸèƒ½æ˜¯ç›´æ¥å¤„ç†åè¿›åˆ¶å½¢å¼çš„<code class="fe nu nv nw nx b">engineCoefficients</code>å’Œ<code class="fe nu nv nw nx b">wheelCoefficients</code>å¤šé¡¹å¼ç³»æ•°ã€‚ç„¶è€Œï¼Œè¿™äº›ç³»æ•°ç°åœ¨æ˜¯ä»¥åŸºå› ç»„çš„äºŒè¿›åˆ¶å½¢å¼ç¼–ç çš„ã€‚è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ª<code class="fe nu nv nw nx b">decodeGenome()</code>åŠŸèƒ½ï¼Œä»åŸºå› ç»„ä¸­æå–ç³»æ•°ï¼Œè®©æˆ‘ä»¬é‡å†™æˆ‘ä»¬çš„å¤§è„‘åŠŸèƒ½:</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="c15e" class="od lf iq nx b gy oe of l og oh">// Car has 16 distance sensors.<br/>const CAR_SENSORS_NUM = 8;<br/><br/>// Additional formula coefficient that is not connected to a sensor.<br/>const BIAS_UNITS = 1;<br/><br/>// How many genes do we need to encode each numeric parameter for the formulas.<br/>const GENES_PER_NUMBER = precisionConfigs.custom.totalBitsCount;<br/><br/>// Based on 8 distance sensors we need to provide two formulas that would define car's behavior:<br/>// 1. Engine formula (input: 8 sensors; output: -1 (backward), 0 (neutral), +1 (forward))<br/>// 2. Wheels formula (input: 8 sensors; output: -1 (left), 0 (straight), +1 (right))<br/>const ENGINE_FORMULA_GENES_NUM = (CAR_SENSORS_NUM + BIAS_UNITS) * GENES_PER_NUMBER;<br/>const WHEELS_FORMULA_GENES_NUM = (CAR_SENSORS_NUM + BIAS_UNITS) * GENES_PER_NUMBER;<br/><br/>// The length of the binary genome of the car.<br/>const GENOME_LENGTH = ENGINE_FORMULA_GENES_NUM + WHEELS_FORMULA_GENES_NUM;<br/><br/>type DecodedGenome = {<br/>  engineFormulaCoefficients: Coefficients,<br/>  wheelsFormulaCoefficients: Coefficients,<br/>}<br/><br/>// Converts the genome from a binary form to the decimal form.<br/>const genomeToNumbers = (genome: Genome, genesPerNumber: number): number[] =&gt; {<br/>  if (genome.length % genesPerNumber !== 0) {<br/>    throw new Error('Wrong number of genes in the numbers genome');<br/>  }<br/>  const numbers: number[] = [];<br/>  for (let numberIndex = 0; numberIndex &lt; genome.length; numberIndex += genesPerNumber) {<br/>    const number: number = bitsToFloat10(genome.slice(numberIndex, numberIndex + genesPerNumber));<br/>    numbers.push(number);<br/>  }<br/>  return numbers;<br/>};<br/><br/>// Converts the genome from a binary form to the decimal form<br/>// and splits the genome into two sets of coefficients (one set for each muscle).<br/>const decodeGenome = (genome: Genome): DecodedGenome =&gt; {<br/>  const engineGenes: Gene[] = genome.slice(0, ENGINE_FORMULA_GENES_NUM);<br/>  const wheelsGenes: Gene[] = genome.slice(<br/>    ENGINE_FORMULA_GENES_NUM,<br/>    ENGINE_FORMULA_GENES_NUM + WHEELS_FORMULA_GENES_NUM,<br/>  );<br/><br/>  const engineFormulaCoefficients: Coefficients = genomeToNumbers(engineGenes, GENES_PER_NUMBER);<br/>  const wheelsFormulaCoefficients: Coefficients = genomeToNumbers(wheelsGenes, GENES_PER_NUMBER);<br/><br/>  return {<br/>    engineFormulaCoefficients,<br/>    wheelsFormulaCoefficients,<br/>  };<br/>};<br/><br/>// Update brain function for the engine muscle.<br/>export const getEngineMuscleSignal = (genome: Genome, sensors: Sensors): MuscleSignal =&gt; {<br/>  const {engineFormulaCoefficients: coefficients} = decodeGenome(genome);<br/>  const rawBrainSignal = linearPolynomial(coefficients, sensors);<br/>  return brainToMuscleSignal(rawBrainSignal);<br/>};<br/><br/>// Update brain function for the wheels muscle.<br/>export const getWheelsMuscleSignal = (genome: Genome, sensors: Sensors): MuscleSignal =&gt; {<br/>  const {wheelsFormulaCoefficients: coefficients} = decodeGenome(genome);<br/>  const rawBrainSignal = linearPolynomial(coefficients, sensors);<br/>  return brainToMuscleSignal(rawBrainSignal);<br/>};</span></pre><h1 id="9c57" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">è‡ªåŠ¨é©¾é©¶æ±½è½¦é—®é¢˜å£°æ˜</h1><blockquote class="mz na nb"><p id="e472" class="lw lx nc ly b lz mt ka mb mc mu kd me nd mv mh mi ne mw ml mm nf mx mp mq mr ij bi translated">â˜ğŸ»æ‰€ä»¥ï¼Œæœ€åï¼Œæˆ‘ä»¬å·²ç»åˆ°äº†è®©æ±½è½¦æˆä¸ºè‡ªåŠ¨æ³Šè½¦æ±½è½¦çš„é«˜å±‚æ¬¡é—®é¢˜è¢«åˆ†è§£ä¸ºå¯»æ‰¾<code class="fe nu nv nw nx b">180</code>1å’Œ0çš„æœ€ä½³ç»„åˆ(å¯»æ‰¾â€œè¶³å¤Ÿå¥½â€çš„æ±½è½¦åŸºå› ç»„)çš„ç®€å•ä¼˜åŒ–é—®é¢˜çš„åœ°æ­¥ã€‚å¬èµ·æ¥å¾ˆç®€å•ï¼Œä¸æ˜¯å—ï¼Ÿ</p></blockquote><h1 id="daf9" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">å¤©çœŸçš„æ–¹æ³•</h1><p id="aba6" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ç§ç®€å•çš„æ–¹æ³•æ¥è§£å†³å¯»æ‰¾â€œè¶³å¤Ÿå¥½â€çš„åŸºå› ç»„çš„é—®é¢˜ï¼Œå¹¶å°è¯•æ‰€æœ‰å¯èƒ½çš„åŸºå› ç»„åˆ:</p><ol class=""><li id="9689" class="ng nh iq ly b lz mt mc mu mf ni mj nj mn nk mr ny nm nn no bi translated"><code class="fe nu nv nw nx b">[0, ..., 0, 0]</code>ï¼Œç„¶å...</li><li id="e669" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr ny nm nn no bi translated"><code class="fe nu nv nw nx b">[0, ..., 0, 1]</code>ï¼Œç„¶å...</li><li id="b23a" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr ny nm nn no bi translated"><code class="fe nu nv nw nx b">[0, ..., 1, 0]</code>ï¼Œç„¶å...</li><li id="f250" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr ny nm nn no bi translated"><code class="fe nu nv nw nx b">[0, ..., 1, 1]</code>ï¼Œç„¶å...</li><li id="b0e7" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr ny nm nn no bi">â€¦</li></ol><p id="cb3a" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä½†æ˜¯ï¼Œè®©æˆ‘ä»¬åšä¸€äº›æ•°å­¦è®¡ç®—ã€‚ä½¿ç”¨<code class="fe nu nv nw nx b">180</code>ä½ï¼Œå¹¶ä¸”æ¯ä¸ªä½ç­‰äº<code class="fe nu nv nw nx b">0</code>æˆ–<code class="fe nu nv nw nx b">1</code>ï¼Œæˆ‘ä»¬å°†æœ‰<code class="fe nu nv nw nx b">2^180</code>(æˆ–<code class="fe nu nv nw nx b">1.53 * 10^54</code>)ç§å¯èƒ½çš„ç»„åˆã€‚å‡è®¾æˆ‘ä»¬éœ€è¦ç»™æ¯è¾†è½¦ä¸€ä¸ª<code class="fe nu nv nw nx b">15s</code>,çœ‹çœ‹å®ƒæ˜¯å¦èƒ½æˆåŠŸåœè½¦ã€‚æˆ‘ä»¬è¿˜å¯ä»¥è¯´ï¼Œæˆ‘ä»¬å¯èƒ½é©¬ä¸Šå¯¹<code class="fe nu nv nw nx b">10</code>æ±½è½¦è¿›è¡Œæ¨¡æ‹Ÿã€‚é‚£ä¹ˆæˆ‘ä»¬å°†éœ€è¦<code class="fe nu nv nw nx b">15 * (1.53 * 10^54) / 10 = 2.29 * 10^54 [seconds]</code>ï¼Œä¹Ÿå°±æ˜¯<code class="fe nu nv nw nx b">7.36 * 10^46 [years]</code>ã€‚ç›¸å½“é•¿çš„ç­‰å¾…æ—¶é—´ã€‚å°±åƒä¸€ä¸ªä¾§é¢çš„æƒ³æ³•ï¼Œå®ƒåªæ˜¯åœ¨åŸºç£è¯ç”Ÿåå·²ç»è¿‡å»äº†ã€‚</p><h1 id="a0e2" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">é—ä¼ å­¦æ–¹æ³•</h1><p id="04ba" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ›´å¿«çš„ç®—æ³•æ¥å¯»æ‰¾åŸºå› ç»„çš„æœ€ä¼˜å€¼ã€‚è¿™å°±æ˜¯é—ä¼ ç®—æ³•çš„æ•‘æ´ä¹‹å¤„ã€‚æˆ‘ä»¬å¯èƒ½æ‰¾ä¸åˆ°åŸºå› ç»„çš„æœ€ä½³ä»·å€¼ï¼Œä½†æœ‰å¯èƒ½æ‰¾åˆ°å®ƒçš„æœ€ä½³ä»·å€¼ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç­‰é‚£ä¹ˆä¹…ã€‚æœ‰äº†è¿›åŒ–æ¨¡æ‹Ÿå™¨ï¼Œæˆ‘èƒ½å¤Ÿåœ¨<code class="fe nu nv nw nx b">24 [hours]</code>ä¸­æ‰¾åˆ°ä¸€ä¸ªéå¸¸å¥½çš„åŸºå› ç»„ã€‚</p><h1 id="6598" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">é—ä¼ ç®—æ³•åŸºç¡€</h1><p id="6fbd" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">ä¸€ç§<a class="ae ms" href="https://en.wikipedia.org/wiki/Genetic_algorithm" rel="noopener ugc nofollow" target="_blank">é—ä¼ ç®—æ³•</a> (GA)ï¼Œå—è‡ªç„¶é€‰æ‹©è¿‡ç¨‹çš„å¯å‘ï¼Œé€šå¸¸ç”¨äºä¾é ç”Ÿç‰©å¯å‘ç®—å­ç”Ÿæˆä¼˜åŒ–é—®é¢˜çš„é«˜è´¨é‡è§£å†³æ–¹æ¡ˆï¼Œå¦‚<em class="nc">äº¤å‰</em>ã€<em class="nc">å˜å¼‚</em>å’Œ<em class="nc">é€‰æ‹©</em>ã€‚</p><p id="5af8" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä¸ºæ±½è½¦æ‰¾åˆ°â€œè¶³å¤Ÿå¥½â€çš„åŸºå› ç»„åˆçš„é—®é¢˜çœ‹èµ·æ¥åƒä¸€ä¸ªä¼˜åŒ–é—®é¢˜ï¼Œæ‰€ä»¥GAå¾ˆæœ‰å¯èƒ½åœ¨è¿™é‡Œå¸®åŠ©æˆ‘ä»¬ã€‚</p><p id="513e" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">æˆ‘ä»¬ä¸ä¼šæ¶µç›–é—ä¼ ç®—æ³•çš„æ‰€æœ‰ç»†èŠ‚ï¼Œä½†åœ¨é«˜å±‚æ¬¡ä¸Šï¼Œè¿™é‡Œæ˜¯æˆ‘ä»¬éœ€è¦åšçš„åŸºæœ¬æ­¥éª¤:</p><ol class=""><li id="4aef" class="ng nh iq ly b lz mt mc mu mf ni mj nj mn nk mr ny nm nn no bi translated"><strong class="ly ja">åˆ›å»º</strong> â€”ç¬¬ä¸€ä»£æ±½è½¦<a class="ae ms" href="https://en.wikipedia.org/wiki/Laws_of_thermodynamics" rel="noopener ugc nofollow" target="_blank">ä¸å¯èƒ½æ— ä¸­ç”Ÿæœ‰</a>ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šåœ¨æœ€å¼€å§‹ç”Ÿæˆä¸€ç»„éšæœºçš„æ±½è½¦åŸºå› ç»„(é•¿åº¦ä¸º<code class="fe nu nv nw nx b">180</code>çš„ä¸€ç»„äºŒè¿›åˆ¶æ•°ç»„)ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¶é€ <code class="fe nu nv nw nx b">~1000</code>æ±½è½¦ã€‚éšç€äººå£çš„å¢åŠ ï¼Œæ‰¾åˆ°æœ€ä¼˜è§£(å¹¶ä¸”æ›´å¿«åœ°æ‰¾åˆ°)çš„æœºä¼šä¹Ÿå¢åŠ äº†ã€‚</li><li id="64f3" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr ny nm nn no bi translated">é€‰æ‹©â€”â€”æˆ‘ä»¬éœ€è¦ä»è¿™ä¸€ä»£ä¸­é€‰æ‹©æœ€åˆé€‚çš„ä¸ªä½“è¿›è¡Œè¿›ä¸€æ­¥çš„äº¤é…(è§ä¸‹ä¸€æ­¥)ã€‚æ¯ä¸ªä¸ªä½“çš„é€‚åº”åº¦å°†åŸºäºé€‚åº”åº¦å‡½æ•°æ¥å®šä¹‰ï¼Œåœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œé€‚åº”åº¦å‡½æ•°å°†æ˜¾ç¤ºæ±½è½¦æœ‰å¤šæ¥è¿‘ç›®æ ‡åœè½¦ä½ã€‚è½¦ç¦»åœè½¦ç‚¹è¶Šè¿‘è¶Šåˆé€‚ã€‚</li><li id="df64" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr ny nm nn no bi translated"><strong class="ly ja">ä¸</strong>äº¤é…â€”â€”ç®€å•åœ°è¯´ï¼Œæˆ‘ä»¬å°†å…è®¸è¢«é€‰ä¸­çš„<em class="nc"> "â™‚çˆ¶è½¦"</em>"ä¸è¢«é€‰ä¸­çš„<em class="nc"> "â™€æ¯è½¦"</em>æœ‰<em class="nc">"æ€§åˆ«"</em>ï¼Œè¿™æ ·å®ƒä»¬çš„åŸºå› ç»„å°±å¯ä»¥æŒ‰<code class="fe nu nv nw nx b">~50/50</code>æ¯”ä¾‹æ··åˆï¼Œäº§ç”Ÿ<em class="nc">"â™€â™€å­è½¦"</em>åŸºå› ç»„ã€‚è¿™ä¸ªæƒ³æ³•æ˜¯ï¼Œé€šè¿‡ä»çˆ¶æ¯é‚£é‡Œè·å–æœ€å¥½(æˆ–æœ€å·®)çš„éƒ¨åˆ†ï¼Œå„¿ç«¥æ±½è½¦åœ¨è‡ªåŠ¨åœè½¦æ–¹é¢å¯èƒ½ä¼šå˜å¾—æ›´å¥½(æˆ–æ›´å·®)ã€‚</li><li id="d0dc" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr ny nm nn no bi translated"><strong class="ly ja">çªå˜</strong>â€”â€”åœ¨äº¤é…è¿‡ç¨‹ä¸­ï¼Œä¸€äº›åŸºå› å¯èƒ½ä¼šéšæœºçªå˜(å­åŸºå› ç»„ä¸­çš„<code class="fe nu nv nw nx b">1</code> så’Œ<code class="fe nu nv nw nx b">0</code> så¯èƒ½ä¼šç¿»è½¬)ã€‚è¿™å¯èƒ½ä¼šå¸¦æ¥æ›´å¹¿æ³›çš„å„¿ç«¥åŸºå› ç»„ï¼Œå› æ­¤ï¼Œæ›´å¹¿æ³›çš„å„¿ç«¥æ±½è½¦è¡Œä¸ºã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¯¹äºæ‰€æœ‰çš„<code class="fe nu nv nw nx b">~1000</code>æ±½è½¦ï¼Œç¬¬1ä½è¢«æ„å¤–è®¾ç½®ä¸º<code class="fe nu nv nw nx b">0</code>ã€‚ç¬¬ä¸€ä½è®¾ç½®ä¸º<code class="fe nu nv nw nx b">1</code>æ—¶ï¼Œæµ‹è¯•æ±½è½¦çš„å”¯ä¸€æ–¹æ³•æ˜¯é€šè¿‡éšæœºçªå˜ã€‚åŒæ—¶ï¼Œå¹¿æ³›çš„çªå˜å¯èƒ½ä¼šç ´åå¥åº·çš„åŸºå› ç»„ã€‚</li><li id="5f6e" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr ny nm nn no bi translated">é™¤éä»£çš„æ•°é‡å·²ç»è¾¾åˆ°æé™(å³<code class="fe nu nv nw nx b">100</code>ä»£å·²ç»è¿‡å»)æˆ–è€…é™¤éè¡¨ç°æœ€å¥½çš„ä¸ªä½“å·²ç»è¾¾åˆ°é¢„æœŸçš„é€‚åº”åº¦å‡½æ•°å€¼(å³æœ€å¥½çš„æ±½è½¦å·²ç»æ¯”<code class="fe nu nv nw nx b">1 meter</code>æ›´æ¥è¿‘åœè½¦ç‚¹)ï¼Œå¦åˆ™è½¬åˆ°â€œæ­¥éª¤2â€ã€‚å¦åˆ™ï¼Œé€€å‡ºã€‚</li></ol><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ok"><img src="../Images/6a14a028cba4cc114e670f77e18e6177.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mDsnGAIIr1XKQyyuWNtKGQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">é—ä¼ ç®—æ³•æµç¨‹ã€‚ä½œè€…æ’å›¾</p></figure><h1 id="9954" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">ç”¨é—ä¼ ç®—æ³•è¿›åŒ–æ±½è½¦å¤§è„‘</h1><p id="9255" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">åœ¨å¯åŠ¨é—ä¼ ç®—æ³•ä¹‹å‰ï¼Œè®©æˆ‘ä»¬ä¸ºç®—æ³•çš„â€œåˆ›å»ºâ€ã€â€œé€‰æ‹©â€ã€â€œäº¤é…â€å’Œâ€œå˜å¼‚â€æ­¥éª¤åˆ›å»ºå‡½æ•°ã€‚</p><h1 id="c6a9" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">åˆ›å»ºæ­¥éª¤çš„å‡½æ•°</h1><p id="7fd1" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated"><code class="fe nu nv nw nx b">createGeneration()</code>å‡½æ•°å°†åˆ›å»ºä¸€ä¸ªéšæœºåŸºå› ç»„æ•°ç»„(ä¹Ÿç§°ä¸ºç¾¤ä½“æˆ–ä¸–ä»£),å¹¶å°†æ¥å—ä¸¤ä¸ªå‚æ•°:</p><ul class=""><li id="a23d" class="ng nh iq ly b lz mt mc mu mf ni mj nj mn nk mr nl nm nn no bi translated"><code class="fe nu nv nw nx b">generationSize</code> -å®šä¹‰ä»£çš„å¤§å°ã€‚è¿™ä¸€ä»£äººçš„è§„æ¨¡å°†ä¸€ä»£ä¸€ä»£åœ°ä¿æŒä¸‹å»ã€‚</li><li id="218e" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr nl nm nn no bi translated"><code class="fe nu nv nw nx b">genomeLength</code> -å®šä¹‰carsç¾¤ä½“ä¸­æ¯ä¸ªä¸ªä½“çš„åŸºå› ç»„é•¿åº¦ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼ŒåŸºå› ç»„çš„é•¿åº¦å°†æ˜¯<code class="fe nu nv nw nx b">180</code>ã€‚</li></ul><p id="8b28" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">åŸºå› ç»„ä¸­çš„æ¯ä¸ªåŸºå› éƒ½æœ‰<code class="fe nu nv nw nx b">50/50</code>çš„æœºä¼šæˆä¸º<code class="fe nu nv nw nx b">0</code>æˆ–<code class="fe nu nv nw nx b">1</code>ã€‚</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="484d" class="od lf iq nx b gy oe of l og oh">type Generation = Genome[];<br/><br/>type GenerationParams = {<br/>  generationSize: number,<br/>  genomeLength: number,<br/>};<br/><br/>function createGenome(length: number): Genome {<br/>  return new Array(length)<br/>    .fill(null)<br/>    .map(() =&gt; (Math.random() &lt; 0.5 ? 0 : 1));<br/>}<br/><br/>function createGeneration(params: GenerationParams): Generation {<br/>  const { generationSize, genomeLength } = params;<br/>  return new Array(generationSize)<br/>    .fill(null)<br/>    .map(() =&gt; createGenome(genomeLength));<br/>}</span></pre><h1 id="0a12" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">å˜å¼‚æ­¥éª¤çš„å‡½æ•°</h1><p id="7598" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated"><code class="fe nu nv nw nx b">mutate()</code>å‡½æ•°ä¼šæ ¹æ®<code class="fe nu nv nw nx b">mutationProbability</code>å€¼éšæœºå˜å¼‚ä¸€äº›åŸºå› ã€‚</p><p id="a755" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä¾‹å¦‚ï¼Œå¦‚æœ<code class="fe nu nv nw nx b">mutationProbability = 0.1</code>é‚£ä¹ˆæ¯ä¸ªåŸºå› ç»„éƒ½æœ‰<code class="fe nu nv nw nx b">10%</code>çš„æœºä¼šå‘ç”Ÿçªå˜ã€‚æ¯”æ–¹è¯´ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªé•¿åº¦ä¸º<code class="fe nu nv nw nx b">10</code>çš„åŸºå› ç»„ï¼Œçœ‹èµ·æ¥åƒ<code class="fe nu nv nw nx b">[0, 0, 0, 0, 0, 0 ,0 ,0 ,0 ,0]</code>ï¼Œé‚£ä¹ˆåœ¨çªå˜ä¹‹åï¼Œæœ‰å¯èƒ½1ä¸ªåŸºå› ä¼šå‘ç”Ÿçªå˜ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå¾—åˆ°ä¸€ä¸ªçœ‹èµ·æ¥åƒ<code class="fe nu nv nw nx b">[0, 0, 0, 1, 0, 0 ,0 ,0 ,0 ,0]</code>çš„åŸºå› ç»„ã€‚</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="b18a" class="od lf iq nx b gy oe of l og oh">// The number between 0 and 1.<br/>type Probability = number;</span><span id="c3bf" class="od lf iq nx b gy oi of l og oh">// @see: https://en.wikipedia.org/wiki/Mutation_(genetic_algorithm)<br/>function mutate(genome: Genome, mutationProbability: Probability): Genome {<br/>  for (let geneIndex = 0; geneIndex &lt; genome.length; geneIndex += 1) {<br/>    const gene: Gene = genome[geneIndex];<br/>    const mutatedGene: Gene = gene === 0 ? 1 : 0;<br/>    genome[geneIndex] = Math.random() &lt; mutationProbability ? mutatedGene : gene;<br/>  }<br/>  return genome;<br/>}</span></pre><h1 id="a8ab" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">é…å¯¹æ­¥éª¤çš„åŠŸèƒ½</h1><p id="f980" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated"><code class="fe nu nv nw nx b">mate()</code>å‡½æ•°å°†æ¥å—<code class="fe nu nv nw nx b">father</code>å’Œ<code class="fe nu nv nw nx b">mother</code>åŸºå› ç»„ï¼Œå¹¶å°†äº§ç”Ÿä¸¤ä¸ªå­ä»£ã€‚æˆ‘ä»¬å°†æ¨¡ä»¿çœŸå®ä¸–ç•Œçš„åœºæ™¯ï¼Œå¹¶åœ¨äº¤é…è¿‡ç¨‹ä¸­è¿›è¡Œå˜å¼‚ã€‚</p><p id="3cb6" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">å­©å­åŸºå› ç»„çš„æ¯ä¸€ä½éƒ½å°†æ ¹æ®çˆ¶äº²æˆ–æ¯äº²åŸºå› ç»„ç›¸åº”ä½çš„å€¼æ¥å®šä¹‰ã€‚å­©å­æœ‰å¯èƒ½ç»§æ‰¿çˆ¶äº²æˆ–æ¯äº²çš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰é•¿åº¦ä¸º<code class="fe nu nv nw nx b">4</code>çš„åŸºå› ç»„(ä¸ºäº†ç®€å•èµ·è§):</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="6ce8" class="od lf iq nx b gy oe of l og oh">Father's genome: [0, 0, 1, 1]<br/>Mother's genome: [0, 1, 0, 1]<br/>                  â†“  â†“  â†“  â†“<br/>Possible kid #1: [0, 1, 1, 1]<br/>Possible kid #2: [0, 0, 1, 1]</span></pre><p id="ab6f" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œçªå˜æ²¡æœ‰è€ƒè™‘åœ¨å†…ã€‚</p><p id="5518" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä¸‹é¢æ˜¯è¯¥å‡½æ•°çš„å®ç°:</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="bf35" class="od lf iq nx b gy oe of l og oh">// Performs Uniform Crossover: each bit is chosen from either parent with equal probability.<br/>// @see: https://en.wikipedia.org/wiki/Crossover_(genetic_algorithm)<br/>function mate(<br/>  father: Genome,<br/>  mother: Genome,<br/>  mutationProbability: Probability,<br/>): [Genome, Genome] {<br/>  if (father.length !== mother.length) {<br/>    throw new Error('Cannot mate different species');<br/>  }</span><span id="bc40" class="od lf iq nx b gy oi of l og oh">  const firstChild: Genome = [];<br/>  const secondChild: Genome = [];</span><span id="a8b1" class="od lf iq nx b gy oi of l og oh">  // Conceive children.<br/>  for (let geneIndex = 0; geneIndex &lt; father.length; geneIndex += 1) {<br/>    firstChild.push(<br/>      Math.random() &lt; 0.5 ? father[geneIndex] : mother[geneIndex]<br/>    );<br/>    secondChild.push(<br/>      Math.random() &lt; 0.5 ? father[geneIndex] : mother[geneIndex]<br/>    );<br/>  }</span><span id="636d" class="od lf iq nx b gy oi of l og oh">  return [<br/>    mutate(firstChild, mutationProbability),<br/>    mutate(secondChild, mutationProbability),<br/>  ];<br/>}</span></pre><h1 id="2a8c" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">é€‰æ‹©æ­¥éª¤çš„åŠŸèƒ½</h1><p id="e929" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">ä¸ºäº†é€‰æ‹©æœ€é€‚åˆçš„ä¸ªä½“è¿›è¡Œè¿›ä¸€æ­¥äº¤é…ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥æ‰¾å‡ºæ¯ä¸ªåŸºå› ç»„çš„é€‚åˆåº¦ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ‰€è°“çš„é€‚åº”åº¦å‡½æ•°ã€‚</p><p id="fa6c" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">é€‚åº”åº¦å‡½æ•°æ€»æ˜¯ä¸æˆ‘ä»¬è¯•å›¾è§£å†³çš„ç‰¹å®šä»»åŠ¡ç›¸å…³ï¼Œå®ƒä¸æ˜¯é€šç”¨çš„ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œé€‚åº”åº¦å‡½æ•°å°†æµ‹é‡æ±½è½¦å’Œåœè½¦ç‚¹ä¹‹é—´çš„è·ç¦»ã€‚è½¦ç¦»åœè½¦ç‚¹è¶Šè¿‘è¶Šåˆé€‚ã€‚ç¨åæˆ‘ä»¬å°†å®ç°å¥èº«åŠŸèƒ½ï¼Œä½†ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä»‹ç»å®ƒçš„æ¥å£:</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="2d35" class="od lf iq nx b gy oe of l og oh">type FitnessFunction = (genome: Genome) =&gt; number;</span></pre><p id="6156" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ç°åœ¨ï¼Œå‡è®¾æˆ‘ä»¬æœ‰æ¯ä¸ªä¸ªä½“çš„é€‚åº”å€¼ã€‚æˆ‘ä»¬è¿˜å¯ä»¥è¯´ï¼Œæˆ‘ä»¬æ ¹æ®ä¸ªä½“çš„å¥åº·å€¼å¯¹æ‰€æœ‰ä¸ªä½“è¿›è¡Œäº†åˆ†ç±»ï¼Œå› æ­¤ç¬¬ä¸€ä¸ªä¸ªä½“æ˜¯æœ€å¼ºå£®çš„ã€‚æˆ‘ä»¬åº”è¯¥å¦‚ä½•ä»è¿™ä¸ªæ•°ç»„ä¸­é€‰æ‹©çˆ¶äº²å’Œæ¯äº²å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦ä»¥æŸç§æ–¹å¼è¿›è¡Œé€‰æ‹©ï¼Œä¸ªä½“çš„é€‚åº”å€¼è¶Šé«˜ï¼Œè¿™ä¸ªä¸ªä½“è¢«é€‰æ‹©äº¤é…çš„æœºä¼šå°±è¶Šé«˜ã€‚<code class="fe nu nv nw nx b">weightedRandom()</code>å‡½æ•°å°†åœ¨è¿™æ–¹é¢å¸®åŠ©æˆ‘ä»¬ã€‚</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="ed39" class="od lf iq nx b gy oe of l og oh">// Picks the random item based on its weight.<br/>// The items with a higher weight will be picked more often.<br/>const weightedRandom = &lt;T&gt;(items: T[], weights: number[]): { item: T, index: number } =&gt; {<br/>  if (items.length !== weights.length) {<br/>    throw new Error('Items and weights must be of the same size');<br/>  }</span><span id="c641" class="od lf iq nx b gy oi of l og oh">  // Preparing the cumulative weights array.<br/>  // For example:<br/>  // - weights = [1, 4, 3]<br/>  // - cumulativeWeights = [1, 5, 8]<br/>  const cumulativeWeights: number[] = [];<br/>  for (let i = 0; i &lt; weights.length; i += 1) {<br/>    cumulativeWeights[i] = weights[i] + (cumulativeWeights[i - 1] || 0);<br/>  }</span><span id="b1b3" class="od lf iq nx b gy oi of l og oh">  // Getting the random number in a range [0...sum(weights)]<br/>  // For example:<br/>  // - weights = [1, 4, 3]<br/>  // - maxCumulativeWeight = 8<br/>  // - range for the random number is [0...8]<br/>  const maxCumulativeWeight = cumulativeWeights[cumulativeWeights.length - 1];<br/>  const randomNumber = maxCumulativeWeight * Math.random();</span><span id="4afa" class="od lf iq nx b gy oi of l og oh">  // Picking the random item based on its weight.<br/>  // The items with higher weight will be picked more often.<br/>  for (let i = 0; i &lt; items.length; i += 1) {<br/>    if (cumulativeWeights[i] &gt;= randomNumber) {<br/>      return {<br/>        item: items[i],<br/>        index: i,<br/>      };<br/>    }<br/>  }<br/>  return {<br/>    item: items[items.length - 1],<br/>    index: items.length - 1,<br/>  };<br/>};</span></pre><p id="d9b3" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">è¿™ä¸ªå‡½æ•°çš„ç”¨æ³•éå¸¸ç®€å•ã€‚å‡è®¾ä½ çœŸçš„å¾ˆå–œæ¬¢é¦™è•‰ï¼Œæƒ³æ¯”è‰è“æ›´å¸¸åƒé¦™è•‰ã€‚ç„¶åä½ å¯ä»¥è°ƒç”¨<code class="fe nu nv nw nx b">const fruit = weightedRandom(['banana', 'strawberry'], [9, 1])</code>ï¼Œå¹¶ä¸”åœ¨<code class="fe nu nv nw nx b">10</code>ä¹‹å¤–çš„<code class="fe nu nv nw nx b">â‰ˆ9</code>æƒ…å†µä¸‹<code class="fe nu nv nw nx b">fruit</code>å˜é‡å°†ç­‰äº<code class="fe nu nv nw nx b">banana</code>ï¼Œå¹¶ä¸”åªæœ‰åœ¨<code class="fe nu nv nw nx b">10</code>ä¹‹å¤–çš„<code class="fe nu nv nw nx b">â‰ˆ1</code>æ—¶é—´å†…å®ƒå°†ç­‰äº<code class="fe nu nv nw nx b">strawberry</code>ã€‚</p><p id="2773" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä¸ºäº†é¿å…åœ¨äº¤é…è¿‡ç¨‹ä¸­å¤±å»æœ€å¥½çš„ä¸ªä½“(å§‘ä¸”ç§°ä¹‹ä¸ºå† å†›),æˆ‘ä»¬ä¹Ÿå¯ä»¥å¼•å…¥ä¸€ä¸ªæ‰€è°“çš„<code class="fe nu nv nw nx b">longLivingChampionsPercentage</code>å‚æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ˜¯<code class="fe nu nv nw nx b">longLivingChampionsPercentage = 10</code>ï¼Œé‚£ä¹ˆä¸Šä¸€ä»£æœ€å¥½çš„è½¦ä¸­çš„<code class="fe nu nv nw nx b">10%</code>å°†è¢«å¸¦åˆ°æ–°ä¸€ä»£ã€‚ä½ å¯ä»¥è¿™æ ·æƒ³ï¼Œå› ä¸ºæœ‰äº›é•¿å¯¿çš„ä¸ªä½“å¯ä»¥é•¿å¯¿ï¼Œå¯ä»¥çœ‹åˆ°ä»–ä»¬çš„å­©å­ç”šè‡³å­™å­ã€‚</p><p id="90f0" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä¸‹é¢æ˜¯<code class="fe nu nv nw nx b">select()</code>åŠŸèƒ½çš„å®é™…å®ç°:</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="f121" class="od lf iq nx b gy oe of l og oh">// The number between 0 and 100.<br/>type Percentage = number;</span><span id="acfe" class="od lf iq nx b gy oi of l og oh">type SelectionOptions = {<br/>  mutationProbability: Probability,<br/>  longLivingChampionsPercentage: Percentage,<br/>};</span><span id="93a9" class="od lf iq nx b gy oi of l og oh">// @see: https://en.wikipedia.org/wiki/Selection_(genetic_algorithm)<br/>function select(<br/>  generation: Generation,<br/>  fitness: FitnessFunction,<br/>  options: SelectionOptions,<br/>) {<br/>  const {<br/>    mutationProbability,<br/>    longLivingChampionsPercentage,<br/>  } = options;</span><span id="21b8" class="od lf iq nx b gy oi of l og oh">  const newGeneration: Generation = [];</span><span id="609a" class="od lf iq nx b gy oi of l og oh">  const oldGeneration = [...generation];<br/>  // First one - the fittest one.<br/>  oldGeneration.sort((genomeA: Genome, genomeB: Genome): number =&gt; {<br/>    const fitnessA = fitness(genomeA);<br/>    const fitnessB = fitness(genomeB);<br/>    if (fitnessA &lt; fitnessB) {<br/>      return 1;<br/>    }<br/>    if (fitnessA &gt; fitnessB) {<br/>      return -1;<br/>    }<br/>    return 0;<br/>  });</span><span id="7bdb" class="od lf iq nx b gy oi of l og oh">  // Let long-liver champions continue living in the new generation.<br/>  const longLiversCount = Math.floor(longLivingChampionsPercentage * oldGeneration.length / 100);<br/>  if (longLiversCount) {<br/>    oldGeneration.slice(0, longLiversCount).forEach((longLivingGenome: Genome) =&gt; {<br/>      newGeneration.push(longLivingGenome);<br/>    });<br/>  }</span><span id="24ae" class="od lf iq nx b gy oi of l og oh">  // Get the data about he fitness of each individuum.<br/>  const fitnessPerOldGenome: number[] = oldGeneration.map((genome: Genome) =&gt; fitness(genome));</span><span id="bd71" class="od lf iq nx b gy oi of l og oh">  // Populate the next generation until it becomes the same size as a old generation.<br/>  while (newGeneration.length &lt; generation.length) {<br/>    // Select random father and mother from the population.<br/>    // The fittest individuums have higher chances to be selected.<br/>    let father: Genome | null = null;<br/>    let fatherGenomeIndex: number | null = null;<br/>    let mother: Genome | null = null;<br/>    let matherGenomeIndex: number | null = null;</span><span id="4cd7" class="od lf iq nx b gy oi of l og oh">    // To produce children the father and mother need each other.<br/>    // It must be two different individuums.<br/>    while (!father || !mother || fatherGenomeIndex === matherGenomeIndex) {<br/>      const {<br/>        item: randomFather,<br/>        index: randomFatherGenomeIndex,<br/>      } = weightedRandom&lt;Genome&gt;(generation, fitnessPerOldGenome);</span><span id="cb96" class="od lf iq nx b gy oi of l og oh">      const {<br/>        item: randomMother,<br/>        index: randomMotherGenomeIndex,<br/>      } = weightedRandom&lt;Genome&gt;(generation, fitnessPerOldGenome);</span><span id="01e3" class="od lf iq nx b gy oi of l og oh">      father = randomFather;<br/>      fatherGenomeIndex = randomFatherGenomeIndex;</span><span id="4bac" class="od lf iq nx b gy oi of l og oh">      mother = randomMother;<br/>      matherGenomeIndex = randomMotherGenomeIndex;<br/>    }</span><span id="10cd" class="od lf iq nx b gy oi of l og oh">    // Let father and mother produce two children.<br/>    const [firstChild, secondChild] = mate(father, mother, mutationProbability);</span><span id="163e" class="od lf iq nx b gy oi of l og oh">    newGeneration.push(firstChild);</span><span id="1513" class="od lf iq nx b gy oi of l og oh">    // Depending on the number of long-living champions it is possible that<br/>    // there will be the place for only one child, sorry.<br/>    if (newGeneration.length &lt; generation.length) {<br/>      newGeneration.push(secondChild);<br/>    }<br/>  }</span><span id="d50a" class="od lf iq nx b gy oi of l og oh">  return newGeneration;<br/>}</span></pre><h1 id="3bd3" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">é€‚åº”åº¦å‡½æ•°</h1><p id="b2c9" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">æ±½è½¦çš„é€‚åº”æ€§å°†ç”±ä»æ±½è½¦åˆ°åœè½¦ç‚¹çš„è·ç¦»æ¥å®šä¹‰ã€‚è·ç¦»è¶Šé«˜ï¼Œé€‚åˆåº¦è¶Šä½ã€‚</p><p id="74ec" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">æˆ‘ä»¬å°†è®¡ç®—çš„æœ€ç»ˆè·ç¦»æ˜¯ä»<code class="fe nu nv nw nx b">4</code>è½¦è½®åˆ°åœè½¦åœºç›¸åº”çš„<code class="fe nu nv nw nx b">4</code>è§’è½çš„å¹³å‡è·ç¦»ã€‚è¿™ä¸ªè·ç¦»æˆ‘ä»¬ç§°ä¹‹ä¸º<code class="fe nu nv nw nx b">loss</code>ï¼Œå®ƒä¸<code class="fe nu nv nw nx b">fitness</code>æˆåæ¯”ã€‚</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ol"><img src="../Images/8b325fb471b1810121cf37efad972e22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fTEgR7M06s7YcIM6ah4LdQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">æµ‹é‡æ±½è½¦çš„é€‚åº”æ€§ã€‚ä½œè€…æ’å›¾ã€‚</p></figure><p id="6512" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">å•ç‹¬è®¡ç®—æ¯ä¸ªè½¦è½®å’Œæ¯ä¸ªæ‹è§’ä¹‹é—´çš„è·ç¦»(è€Œä¸æ˜¯åªè®¡ç®—ä»æ±½è½¦ä¸­å¿ƒåˆ°åœè½¦ç‚¹ä¸­å¿ƒçš„è·ç¦»)å°†ä½¿æ±½è½¦ä¿æŒç›¸å¯¹äºåœè½¦ç‚¹çš„æ­£ç¡®æ–¹å‘ã€‚</p><p id="c28f" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ç©ºé—´ä¸­ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»å°†æ ¹æ®<a class="ae ms" href="https://en.wikipedia.org/wiki/Pythagorean_theorem" rel="noopener ugc nofollow" target="_blank">å‹¾è‚¡å®šç†</a>è®¡ç®—ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="be74" class="od lf iq nx b gy oe of l og oh">type NumVec3 = [number, number, number];</span><span id="6eab" class="od lf iq nx b gy oi of l og oh">// Calculates the XZ distance between two points in space.<br/>// The vertical Y distance is not being taken into account.<br/>const euclideanDistance = (from: NumVec3, to: NumVec3) =&gt; {<br/>  const fromX = from[0];<br/>  const fromZ = from[2];<br/>  const toX = to[0];<br/>  const toZ = to[2];<br/>  return Math.sqrt((fromX - toX) ** 2 + (fromZ - toZ) ** 2);<br/>};</span></pre><p id="1059" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">æ±½è½¦å’Œåœè½¦ä½ä¹‹é—´çš„è·ç¦»(T0)å°†è¿™æ ·è®¡ç®—:</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="ba90" class="od lf iq nx b gy oe of l og oh">type RectanglePoints = {<br/>  fl: NumVec3, // Front-left<br/>  fr: NumVec3, // Front-right<br/>  bl: NumVec3, // Back-left<br/>  br: NumVec3, // Back-right<br/>};</span><span id="5396" class="od lf iq nx b gy oi of l og oh">type GeometricParams = {<br/>  wheelsPosition: RectanglePoints,<br/>  parkingLotCorners: RectanglePoints,<br/>};</span><span id="46f7" class="od lf iq nx b gy oi of l og oh">const carLoss = (params: GeometricParams): number =&gt; {<br/>  const { wheelsPosition, parkingLotCorners } = params;</span><span id="55ee" class="od lf iq nx b gy oi of l og oh">  const {<br/>    fl: flWheel,<br/>    fr: frWheel,<br/>    br: brWheel,<br/>    bl: blWheel,<br/>  } = wheelsPosition;</span><span id="aff5" class="od lf iq nx b gy oi of l og oh">  const {<br/>    fl: flCorner,<br/>    fr: frCorner,<br/>    br: brCorner,<br/>    bl: blCorner,<br/>  } = parkingLotCorners;</span><span id="3a2e" class="od lf iq nx b gy oi of l og oh">  const flDistance = euclideanDistance(flWheel, flCorner);<br/>  const frDistance = euclideanDistance(frWheel, frCorner);<br/>  const brDistance = euclideanDistance(brWheel, brCorner);<br/>  const blDistance = euclideanDistance(blWheel, blCorner);</span><span id="ffd1" class="od lf iq nx b gy oi of l og oh">  return (flDistance + frDistance + brDistance + blDistance) / 4;<br/>};</span></pre><p id="b928" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ç”±äº<code class="fe nu nv nw nx b">fitness</code>åº”è¯¥ä¸<code class="fe nu nv nw nx b">loss</code>æˆåæ¯”ï¼Œæˆ‘ä»¬å°†è¿™æ ·è®¡ç®—:</p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="dbc4" class="od lf iq nx b gy oe of l og oh">const carFitness = (params: GeometricParams): number =&gt; {<br/>  const loss = carLoss(params);<br/>  // Adding +1 to avoid a division by zero.<br/>  return 1 / (loss + 1);<br/>};</span></pre><p id="33d1" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">æ‚¨å¯ä»¥åœ¨<a class="ae ms" href="https://trekhleb.dev/self-parking-car-evolution?parking=evolution#/" rel="noopener ugc nofollow" target="_blank">è¿›åŒ–æ¨¡æ‹Ÿå™¨</a>ä»ªè¡¨ç›˜ä¸Šçœ‹åˆ°ç‰¹å®šåŸºå› ç»„å’Œå½“å‰æ±½è½¦ä½ç½®çš„<code class="fe nu nv nw nx b">fitness</code>å’Œ<code class="fe nu nv nw nx b">loss</code>å€¼:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/5428c320226b38d5bf63440de653093a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HD9hzGGUQeA2W2fQGzJynA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">è¿›åŒ–æ¨¡æ‹Ÿå™¨ä»ªè¡¨æ¿æˆªå›¾</p></figure><h1 id="e9d9" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">å¯åŠ¨è¿›åŒ–</h1><p id="5030" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">è®©æˆ‘ä»¬æŠŠè¿›åŒ–å‡½æ•°æ”¾åœ¨ä¸€èµ·ã€‚æˆ‘ä»¬å°†â€œåˆ›é€ ä¸–ç•Œâ€ï¼Œå¯åŠ¨è¿›åŒ–å¾ªç¯ï¼Œè®©æ—¶é—´å‰è¿›ï¼Œè®©ä¸€ä»£äººè¿›åŒ–ï¼Œè®©æ±½è½¦å­¦ä¼šå¦‚ä½•åœè½¦ã€‚</p><p id="71c5" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä¸ºäº†è·å¾—æ¯è¾†è½¦çš„é€‚åº”å€¼ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è™šæ‹Ÿçš„3Dä¸–ç•Œä¸­è¿è¡Œæ±½è½¦è¡Œä¸ºçš„æ¨¡æ‹Ÿã€‚<a class="ae ms" href="https://trekhleb.dev/self-parking-car-evolution" rel="noopener ugc nofollow" target="_blank">è¿›åŒ–æ¨¡æ‹Ÿå™¨</a>å°±æ˜¯è¿™ä¹ˆåšçš„â€”â€”å®ƒåœ¨æ¨¡æ‹Ÿå™¨ä¸­è¿è¡Œä¸‹é¢çš„ä»£ç ï¼Œæ¨¡æ‹Ÿå™¨æ˜¯ç”¨Three.js åˆ¶ä½œçš„<a class="ae ms" href="https://github.com/trekhleb/self-parking-car-evolution" rel="noopener ugc nofollow" target="_blank">:</a></p><pre class="kp kq kr ks gt nz nx oa ob aw oc bi"><span id="d0ed" class="od lf iq nx b gy oe of l og oh">// Evolution setup example.<br/>// Configurable via the Evolution Simulator.<br/>const GENERATION_SIZE = 1000;<br/>const LONG_LIVING_CHAMPIONS_PERCENTAGE = 6;<br/>const MUTATION_PROBABILITY = 0.04;<br/>const MAX_GENERATIONS_NUM = 40;</span><span id="8420" class="od lf iq nx b gy oi of l og oh">// Fitness function.<br/>// It is like an annual doctor's checkup for the cars.<br/>const carFitnessFunction = (genome: Genome): number =&gt; {<br/>  // The evolution simulator calculates and stores the fitness values for each car in the fitnessValues map.<br/>  // Here we will just fetch the pre-calculated fitness value for the car in current generation.<br/>  const genomeKey = genome.join('');<br/>  return fitnessValues[genomeKey];<br/>};</span><span id="98a3" class="od lf iq nx b gy oi of l og oh">// Creating the "world" with the very first cars generation.<br/>let generationIndex = 0;<br/>let generation: Generation = createGeneration({<br/>  generationSize: GENERATION_SIZE,<br/>  genomeLength: GENOME_LENGTH, // &lt;- 180 genes<br/>});</span><span id="c17a" class="od lf iq nx b gy oi of l og oh">// Starting the "time".<br/>while(generationIndex &lt; MAX_GENERATIONS_NUM) {<br/>  // SIMULATION IS NEEDED HERE to pre-calculate the fitness values.</span><span id="f0b2" class="od lf iq nx b gy oi of l og oh">  // Selecting, mating, and mutating the current generation.<br/>  generation = select(<br/>    generation,<br/>    carFitnessFunction,<br/>    {<br/>      mutationProbability: MUTATION_PROBABILITY,<br/>      longLivingChampionsPercentage: LONG_LIVING_CHAMPIONS_PERCENTAGE,<br/>    },<br/>  );</span><span id="de95" class="od lf iq nx b gy oi of l og oh">  // Make the "time" go by.<br/>  generationIndex += 1;<br/>}</span><span id="b7cf" class="od lf iq nx b gy oi of l og oh">// Here we may check the fittest individuum of the latest generation.<br/>const fittestCar = generation[0];</span></pre><p id="4810" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">è¿è¡Œ<code class="fe nu nv nw nx b">select()</code>å‡½æ•°åï¼Œ<code class="fe nu nv nw nx b">generation</code>æ•°ç»„æŒ‰ç…§é€‚åˆåº¦å€¼é™åºæ’åºã€‚å› æ­¤ï¼Œæœ€åˆé€‚çš„è½¦å°†æ°¸è¿œæ˜¯æ•°ç»„ä¸­çš„ç¬¬ä¸€è¾†è½¦ã€‚</p><p id="1962" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated"><strong class="ly ja">æ‹¥æœ‰éšæœºåŸºå› ç»„çš„ç¬¬ä¸€ä»£</strong>æ±½è½¦å°†ä¼šæœ‰å¦‚ä¸‹è¡¨ç°:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/7cfb20c202834cfeeb80bf83567f5edb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8U_xR9D4NX0BzqJMqT0BsQ.gif"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">ç¬¬ä¸€ä»£æ±½è½¦ã€‚ä½œè€…åˆ¶ä½œçš„åŠ¨ç”»</p></figure><p id="420d" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated"><strong class="ly ja">åœ¨ç¬¬40ä»£è½¦å‹ä¸Š</strong>æ±½è½¦å¼€å§‹å­¦ä¹ ä»€ä¹ˆæ˜¯è‡ªåŠ¨æ³Šè½¦ï¼Œå¹¶å¼€å§‹é è¿‘æ³Šè½¦ç‚¹:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/237f030840308cc734fb4913e3d0483e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*oP0_y0kyucPIcZp0mI0p6Q.gif"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">ç¬¬40ä»£è½¦ã€‚ä½œè€…åˆ¶ä½œçš„åŠ¨ç”»</p></figure><p id="0b7d" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">å¦ä¸€ä¸ªä¾‹å­æ›´å…·æŒ‘æˆ˜æ€§:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/55d0908aa264ccab265f60fb305bcfdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*z4em7FIKsDo38ZE8WDSWeA.gif"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">ç¬¬40ä»£è½¦ã€‚ä½œè€…åˆ¶ä½œçš„åŠ¨ç”»</p></figure><p id="2b51" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">è¿™äº›è½¦ä¸€è·¯ä¸Šæ’ä¸Šäº†å…¶ä»–ä¸€äº›è½¦ï¼Œä¹Ÿä¸å®Œå…¨é€‚åˆåœè½¦ç‚¹ï¼Œä½†è¿™åªæ˜¯è‡ªä¸–ç•Œè¯ç”Ÿä»¥æ¥å®ƒä»¬çš„ç¬¬40ä»£ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç»™è¿™äº›è½¦ä¸€äº›æ—¶é—´æ¥å­¦ä¹ ã€‚</p><p id="743b" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä¸€ä»£åˆä¸€ä»£ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šçœ‹åˆ°æŸå¤±å€¼æ˜¯å¦‚ä½•ä¸‹é™çš„(è¿™æ„å‘³ç€é€‚åº”å€¼åœ¨ä¸Šå‡)ã€‚<code class="fe nu nv nw nx b">P50 Avg Loss</code>æ˜¾ç¤ºæœ€åˆé€‚çš„<code class="fe nu nv nw nx b">50%</code>è¾†æ±½è½¦çš„å¹³å‡æŸå¤±å€¼(ä»æ±½è½¦åˆ°åœè½¦ä½çš„å¹³å‡è·ç¦»)ã€‚<code class="fe nu nv nw nx b">Min Loss</code>æ˜¾ç¤ºæ¯ä¸€ä»£æœ€é€‚åˆçš„æ±½è½¦çš„æŸå¤±å€¼ã€‚</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi om"><img src="../Images/4e70a254212a22f215351bd5bcada128.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7dYsU23aOuAkZwJwoo8yhQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">æŸå¤±å†å²ã€‚ä½œè€…æ’å›¾ã€‚</p></figure><p id="5494" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä½ å¯èƒ½ä¼šçœ‹åˆ°ï¼Œå¹³å‡è€Œè¨€ï¼Œè¿™ä¸€ä»£æœ€å¥åº·çš„æ±½è½¦ä¸­çš„<code class="fe nu nv nw nx b">50%</code>æ­£åœ¨å­¦ä¹ æ›´é è¿‘åœè½¦ä½(ä»è¿œç¦»åœè½¦ä½çš„<code class="fe nu nv nw nx b">5.5m</code>åˆ°35ä»£ä¸­çš„<code class="fe nu nv nw nx b">3.5m</code>)ã€‚<code class="fe nu nv nw nx b">Min Loss</code>å€¼çš„è¶‹åŠ¿ä¸å¤ªæ˜æ˜¾(ä»<code class="fe nu nv nw nx b">1m</code>åˆ°<code class="fe nu nv nw nx b">0.5m</code>æœ‰ä¸€äº›å™ªå£°ä¿¡å·)ï¼Œä½†æ˜¯ä»ä¸Šé¢çš„åŠ¨ç”»ä¸­ä½ å¯ä»¥çœ‹åˆ°æ±½è½¦å·²ç»å­¦ä¼šäº†ä¸€äº›åŸºæœ¬çš„åœè½¦åŠ¨ä½œã€‚</p><h1 id="6de9" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">ç»“è®º</h1><p id="b8c6" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºè‡ªåŠ¨æ³Šè½¦æ±½è½¦çš„é«˜çº§ä»»åŠ¡åˆ†è§£ä¸ºå¯»æ‰¾<code class="fe nu nv nw nx b">180</code>1å’Œ0çš„æœ€ä½³ç»„åˆ(å¯»æ‰¾æœ€ä½³æ±½è½¦åŸºå› ç»„)çš„ç®€å•ä½çº§ä»»åŠ¡ã€‚</p><p id="23d2" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ç„¶åæˆ‘ä»¬åº”ç”¨é—ä¼ ç®—æ³•æ¥å¯»æ‰¾æœ€ä½³çš„æ±½è½¦åŸºå› ç»„ã€‚å®ƒå…è®¸æˆ‘ä»¬åœ¨å‡ ä¸ªå°æ—¶çš„æ¨¡æ‹Ÿä¸­è·å¾—ç›¸å½“å¥½çš„ç»“æœ(è€Œä¸æ˜¯å¤šå¹´æ¥è¿è¡Œè¿™ç§å¹¼ç¨šçš„æ–¹æ³•)ã€‚</p><p id="ce94" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">æ‚¨å¯ä»¥å¯åŠ¨ğŸš•<a class="ae ms" href="https://trekhleb.dev/self-parking-car-evolution" rel="noopener ugc nofollow" target="_blank">è‡ªåŠ¨æ³Šè½¦æ±½è½¦è¿›åŒ–æ¨¡æ‹Ÿå™¨</a>ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹è¿›åŒ–è¿‡ç¨‹ã€‚æ¨¡æ‹Ÿå™¨ä¸ºæ‚¨æä¾›äº†ä»¥ä¸‹æœºä¼š:</p><ul class=""><li id="3bd2" class="ng nh iq ly b lz mt mc mu mf ni mj nj mn nk mr nl nm nn no bi translated">æ‚¨å¯ä»¥<a class="ae ms" href="https://trekhleb.dev/self-parking-car-evolution?parking=evolution#/" rel="noopener ugc nofollow" target="_blank">ä»å¤´å¼€å§‹è®­ç»ƒæ±½è½¦</a>å¹¶è‡ªè¡Œè°ƒæ•´é—ä¼ å‚æ•°</li><li id="ee52" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr nl nm nn no bi translated">ä½ å¯ä»¥<a class="ae ms" href="https://trekhleb.dev/self-parking-car-evolution?parking=automatic#/" rel="noopener ugc nofollow" target="_blank">çœ‹åˆ°è®­ç»ƒè¿‡çš„è‡ªåŠ¨æ³Šè½¦è½¦åœ¨è¿è¡Œ</a></li><li id="badb" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr nl nm nn no bi translated">æ‚¨ä¹Ÿå¯ä»¥<a class="ae ms" href="https://trekhleb.dev/self-parking-car-evolution?parking=manual#/" rel="noopener ugc nofollow" target="_blank">å°è¯•æ‰‹åŠ¨æ³Šè½¦</a></li></ul><p id="ffbb" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">æœ¬æ–‡ä¸­å±•ç¤ºçš„å®Œæ•´é—ä¼ æºä»£ç ä¹Ÿå¯ä»¥åœ¨<a class="ae ms" href="https://github.com/trekhleb/self-parking-car-evolution" rel="noopener ugc nofollow" target="_blank">è¿›åŒ–æ¨¡æ‹Ÿåº“</a>ä¸­æ‰¾åˆ°ã€‚å¦‚æœä½ æ˜¯é‚£äº›çœŸæ­£ä¼šæ•°å¹¶æ£€æŸ¥è¡Œæ•°ä»¥ç¡®ä¿å°‘äº500è¡Œ(ä¸åŒ…æ‹¬æµ‹è¯•)çš„äººä¹‹ä¸€ï¼Œè¯·éšæ„æ£€æŸ¥è¿™é‡Œçš„ä»£ç <a class="ae ms" href="https://github.com/trekhleb/self-parking-car-evolution/tree/master/src/libs" rel="noopener ugc nofollow" target="_blank">ğŸ¥¸.</a></p><p id="7a8a" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ä»£ç å’Œæ¨¡æ‹Ÿå™¨ä»æœ‰ä¸€äº›æœªè§£å†³çš„é—®é¢˜:</p><ul class=""><li id="02b7" class="ng nh iq ly b lz mt mc mu mf ni mj nj mn nk mr nl nm nn no bi translated">æ±½è½¦çš„å¤§è„‘è¿‡äºç®€å•ï¼Œå®ƒä½¿ç”¨çº¿æ€§æ–¹ç¨‹ï¼Œè€Œä¸æ˜¯ç¥ç»ç½‘ç»œã€‚è¿™ä½¿å¾—æ±½è½¦ä¸èƒ½é€‚åº”æ–°çš„ç¯å¢ƒæˆ–æ–°çš„åœè½¦åœºç±»å‹ã€‚</li><li id="08e2" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr nl nm nn no bi translated">å½“ä¸€è¾†è½¦æ’ä¸Šå¦ä¸€è¾†è½¦æ—¶ï¼Œæˆ‘ä»¬ä¸ä¼šé™ä½å®ƒçš„é€‚åº”å€¼ã€‚å› æ­¤ï¼Œæ±½è½¦åœ¨åˆ¶é€ äº¤é€šäº‹æ•…æ—¶æ²¡æœ‰â€œæ„Ÿè§‰â€åˆ°ä»»ä½•ç½ªæ¶æ„Ÿã€‚</li><li id="5726" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr nl nm nn no bi translated">è¿›åŒ–æ¨¡æ‹Ÿå™¨ä¸ç¨³å®šã€‚è¿™æ„å‘³ç€ç›¸åŒçš„æ±½è½¦åŸºå› ç»„å¯èƒ½äº§ç”Ÿä¸åŒçš„é€‚åº”å€¼ï¼Œè¿™ä½¿å¾—è¿›åŒ–æ•ˆç‡æ›´ä½ã€‚</li><li id="6aea" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr nl nm nn no bi translated">evolutionæ¨¡æ‹Ÿå™¨åœ¨æ€§èƒ½æ–¹é¢ä¹Ÿéå¸¸ç¬¨é‡ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•ä¸€æ¬¡æ€§è®­ç»ƒ1000è¾†æ±½è½¦ï¼Œæ‰€ä»¥ä¼šå‡æ…¢è¿›åŒ–è¿›åº¦ã€‚</li><li id="c788" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr nl nm nn no bi translated">æ­¤å¤–ï¼ŒEvolution Simulatorè¦æ±‚æµè§ˆå™¨é€‰é¡¹å¡å¤„äºæ‰“å¼€å’Œæ´»åŠ¨çŠ¶æ€ï¼Œä»¥æ‰§è¡Œæ¨¡æ‹Ÿã€‚</li><li id="5c94" class="ng nh iq ly b lz np mc nq mf nr mj ns mn nt mr nl nm nn no bi translated">è¿˜æœ‰<a class="ae ms" href="https://github.com/trekhleb/self-parking-car-evolution/issues" rel="noopener ugc nofollow" target="_blank">æ›´</a> â€¦</li></ul><p id="7882" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">ç„¶è€Œï¼Œæœ¬æ–‡çš„ç›®çš„æ˜¯åœ¨å­¦ä¹ é—ä¼ ç®—æ³•å¦‚ä½•å·¥ä½œçš„åŒæ—¶è·å¾—ä¸€äº›ä¹è¶£ï¼Œè€Œä¸æ˜¯æ„å»ºä¸€ä¸ªç”Ÿäº§å°±ç»ªçš„è‡ªåŠ¨åœè½¦ç‰¹æ–¯æ‹‰ã€‚æ‰€ä»¥ï¼Œå³ä½¿æœ‰ä¸Šé¢æåˆ°çš„é—®é¢˜ï¼Œæˆ‘è¿˜æ˜¯å¸Œæœ›æ‚¨èƒ½æ„‰å¿«åœ°é˜…è¯»è¿™ç¯‡æ–‡ç« ã€‚</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/d0ded58baa97f405218cfef40b7b1a8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LbOuq67ZSLTAvfTzYcQrCQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">ä½œè€…æ’å›¾</p></figure></div></div>    
</body>
</html>