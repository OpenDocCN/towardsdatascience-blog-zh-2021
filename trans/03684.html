<html>
<head>
<title>Vital Signs: Assessing Data Health and Dealing with Outliers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">生命体征:评估数据健康状况和处理异常值</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/vital-signs-assessing-data-health-and-dealing-with-outliers-e6f1d2569a52?source=collection_archive---------38-----------------------#2021-03-25">https://towardsdatascience.com/vital-signs-assessing-data-health-and-dealing-with-outliers-e6f1d2569a52?source=collection_archive---------38-----------------------#2021-03-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bc9b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你的数据准备好机器学习了吗？检查它的健康状况，并学习如何处理您可能发现的异常值</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0feac30a4e9b3a1d8ae1fed7d77ba8df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GuDXy8UUKlRCaTSljfdIEA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">杰西·奥里科在<a class="ae kv" href="https://unsplash.com/s/photos/brain?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="6e3d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在医生的办公室，在医生到达之前，你和医疗助理要经历一个熟悉的例行程序。他们会检查你的生命体征——脉搏、血压、呼吸率等——并收集一些一般信息。这些步骤总结了你健康的一些重要方面，让医生直接进入更复杂的分析。</p><p id="128b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在包含在Alteryx智能套件中的<a class="ae kv" href="https://help.alteryx.com/current/designer/data-health" rel="noopener ugc nofollow" target="_blank">数据健康工具</a>，为您的数据做类似的事情。它为您提供了对数据集进一步分析准备情况的快速而全面的评估，尤其是在预测分析和机器学习之前。该工具还会查找异常值，并方便地将它们放在单独的输出中，以便您可以处理它们。</p><p id="710b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们看看使用这些新诊断能力的最佳方式，以及如何对结果采取行动，尤其是那些异常值。</p><h1 id="b43b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">关于数据健康工具</h1><p id="c8ca" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">数据健康工具收集数据集的“生命体征”,揭示数据集是否已准备好产生可靠、准确的见解，或者它是否会受益于一些特殊处理。具体来说，该工具可以查看数据集的缺失值、是否有异常值及其稀疏度。(如果数据集包含许多零值，则它是“稀疏的”；例如，许多购物推荐系统使用的数据集是稀疏的，因为每个购物者都没有购买过甚至没有看过许多提供的产品。)Data Health还检查每个变量的唯一值的数量对于其数据类型和数据集的大小是否有意义。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/9906579e51da5724c72b3810ae902dd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*DIS5ma1JOp0MGk7T"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="mq">图像通过</em> <a class="ae kv" href="https://giphy.com/gifs/love-heart-valentines-l3q2zWh6nXHl3x8gU" rel="noopener ugc nofollow" target="_blank"> <em class="mq"> GIPHY </em> </a></p></figure><p id="f81d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您是数据调查工具面板的粉丝，您可能想知道数据健康与<a class="ae kv" href="https://help.alteryx.com/current/designer/field-summary-tool" rel="noopener ugc nofollow" target="_blank">字段汇总工具</a>有何不同。您从这两种工具中确实获得了一些相同的信息；然而，值得注意的是，正如Alteryx数据科学产品经理<a class="ae kv" href="https://www.linkedin.com/in/sonia-prakasam-2718239a/" rel="noopener ugc nofollow" target="_blank"> Sonia Prakasam </a>最近告诉我的那样，数据健康提供了“对数据集质量的整体衡量”。“数据健康产生更具可操作性的结果。在任何机器学习过程之前使用它来帮助为机器学习管道准备数据非常好。”</p><p id="c220" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Data Health还会为您检测和识别异常值，而Field Summary不会这样做。我们一会儿将讨论这个问题——包括一旦你将这些离群值收集起来，该如何处理它们。</p><p id="c4b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在使用数据健康之前，最好使用<a class="ae kv" href="https://help.alteryx.com/current/designer/feature-types" rel="noopener ugc nofollow" target="_blank">要素类型工具</a>来确保您的数据类型设置正确，否则您可能会得到不同的结果。数据健康可以处理字符串、布尔和数字数据；特征类型允许您为每一列设置更详细的类型(例如，邮政编码、文本、分类等)。).Data Health了解如何处理每一种类型，如果提供额外的信息，它将提供更好的运行状况评估。</p><h1 id="8334" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">诊断异常值</h1><p id="7f34" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">除了所有其他可操作的信息之外，拥有一个工具来快速发现可能给分析和建模带来挑战的异常值是非常棒的。数据健康工具使用2008年<a class="ae kv" href="https://www.sciencedirect.com/science/article/abs/pii/S0167947307004434#!" rel="noopener ugc nofollow" target="_blank">同行评审研究</a>中建立的方法(<a class="ae kv" href="https://wis.kuleuven.be/stat/robust/papers/2008/adjboxplot-revision.pdf" rel="noopener ugc nofollow" target="_blank">在此阅读</a>)。它基于一种你可能听说过的数据可视化方法:盒状图或盒须图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/74d65d3377c0b53490fc8e570991e92d.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/0*BtHlT-dqMauCyD4s"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="mq">图片由</em><a class="ae kv" href="https://commons.wikimedia.org/wiki/User:Schlurcher" rel="noopener ugc nofollow" target="_blank"><em class="mq">Schlurcher</em></a><em class="mq">，维基共享</em></p></figure><p id="b180" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是<a class="ae kv" href="https://www.simplypsychology.org/boxplots.html#:~:text=When%20reviewing%20a%20box%20plot,whiskers%20of%20the%20box%20plot.&amp;text=For%20example%2C%20outside%201.5%20times,Q3%20%2B%201.5%20*%20IQR)." rel="noopener ugc nofollow" target="_blank">对阅读这些情节的复习</a>。我们主要对代表异常值的点感兴趣。我们如何知道哪些数据点应该被定义为异常值，并显示为那些孤独的小点？当数据失真时，这种识别也变得更加棘手。一些识别异常值的方法假设您将拥有一个良好的、<a class="ae kv" href="https://www.statisticshowto.com/probability-and-statistics/normal-distributions/" rel="noopener ugc nofollow" target="_blank">正态分布的</a>数据集，但事实可能并非如此。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/80bb7b8b4f1757c1b4342bf7d9437265.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*o-zwvCTCJb2KALnB"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="mq">图片via </em> <a class="ae kv" href="https://giphy.com/gifs/doctorwho-doctor-who-dr-jodie-whittaker-fX1VB1UZiEKok6TiLm" rel="noopener ugc nofollow" target="_blank"> <em class="mq"> GIPHY </em> </a></p></figure><p id="dcfe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不管您的数据分布看起来如何，Data Health识别异常值的方法已经涵盖了您。它基于一种叫做“<a class="ae kv" href="https://en.wikipedia.org/wiki/Medcouple" rel="noopener ugc nofollow" target="_blank"> medcouple </a>的偏斜度测量方法该度量用于调整箱线图的结构。这种方法避免了不必要地将数据点标记为异常值，因为它们实际上相当接近数据分布的中心。正如研究人员解释的那样，“这使得调整后的箱线图成为自动异常值检测的有趣而快速的工具，而无需对数据的分布做出任何假设。”</p><p id="a3c2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在没有自动化工具的情况下寻找异常值有点复杂。Designer中的一些选项在<a class="ae kv" href="https://community.alteryx.com/t5/Alteryx-Designer-Discussions/Find-Outliers-from-the-data-of-previous-months/td-p/634265?utm_content=738655&amp;utm_source=tds" rel="noopener ugc nofollow" target="_blank">本线程</a>中讨论。您可以尝试使用Python和pandas，如这里的<a class="ae kv" href="https://stackoverflow.com/questions/23199796/detect-and-exclude-outliers-in-pandas-data-frame" rel="noopener ugc nofollow" target="_blank">所解释的那样</a>，计算每一列中的值的z值，然后潜在地消除在一列或多列中包含异常值的行。另一个Python选项是使用本地离群因子，sklearn 中提供的<a class="ae kv" href="https://scikit-learn.org/stable/modules/generated/sklearn.neighbors.LocalOutlierFactor.html" rel="noopener ugc nofollow" target="_blank">。这种方法</a><a class="ae kv" href="https://scikit-learn.org/stable/auto_examples/neighbors/plot_lof_outlier_detection.html#sphx-glr-auto-examples-neighbors-plot-lof-outlier-detection-py" rel="noopener ugc nofollow" target="_blank">在此处</a>演示并在下图中显示，它基于<em class="ms">k</em>-最近邻点，并根据一个数据点相对于其周围邻域的孤立度来确定该数据点是否为异常值。可怜的孤独的局外人！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/7bfa4635f478a4dcad259a2b970d8262.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/0*SydWeYYIigleJRtf"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">每个带有局部异常值因子的数据点用红色圆圈的直径显示。图来自<a class="ae kv" href="https://scikit-learn.org/stable/auto_examples/neighbors/plot_lof_outlier_detection.html#sphx-glr-auto-examples-neighbors-plot-lof-outlier-detection-py" rel="noopener ugc nofollow" target="_blank"> scikit-learn示例。</a></p></figure><h1 id="01d4" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">所以我有离群值…有什么治疗方法？</h1><p id="5f22" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">首先，仔细看看你的异常值:</p><ul class=""><li id="83c7" class="mu mv iq ky b kz la lc ld lf mw lj mx ln my lr mz na nb nc bi translated">它们真的很稀有吗？不应该有很多古怪的价值观。如果有，你可能有其他问题要解决。</li><li id="8513" class="mu mv iq ky b kz nd lc ne lf nf lj ng ln nh lr mz na nb nc bi translated">会不会是错别字？也许那些值可以被修正。</li><li id="f896" class="mu mv iq ky b kz nd lc ne lf nf lj ng ln nh lr mz na nb nc bi translated">会不会有测量误差？例如，在某些情况下，传感器可能会错误地记录数据。</li><li id="e9b0" class="mu mv iq ky b kz nd lc ne lf nf lj ng ln nh lr mz na nb nc bi translated">异常值是如何出现的，有什么模式吗？也许它们与另一个变量的特定值同时出现。这可能是一个重要的观察模式。</li><li id="d636" class="mu mv iq ky b kz nd lc ne lf nf lj ng ln nh lr mz na nb nc bi translated">你的样本中是否有值得进一步研究的不寻常的人或事？异常值可能是一个线索，表明有一个全新的领域需要研究。</li><li id="4e71" class="mu mv iq ky b kz nd lc ne lf nf lj ng ln nh lr mz na nb nc bi translated">如果你的样本量很小:你的异常值可能只是出现在分布末端的前几个数据点吗？如果你收集了更多的数据，你会有更多的数据点吗？这种可能性可能很难确定，但这些异常值可能只是随着进一步的数据收集而出现的额外数据的暗示。</li></ul><p id="88f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这次考试将决定你下一步的行动。表面上，处理异常值的方法很简单:忽略它们，删除它们，或者修改它们。您的选择可能部分取决于您对数据的计划。如果您正在进行探索性的数据分析和生成可视化，离群值可能是新奇的和/或讨论的开始，所以让它们留在原处可能不是问题。您可能希望在有异常值和无异常值的情况下运行分析，以查看您的结果有何不同。</p><p id="0499" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您有大量数据，简单地删除异常值可能没问题。这种删除有时被称为“修剪”您的数据。通常，您会从数据中删除相同百分比的最高值和最低值。请将此视为修剪数据钟形曲线的尾部。但是，您正在非常显著地修改您的数据，这可能会引发所有的问题，并且您希望对这种方法有一个很好的理由。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/e178efa99010c523a50dd99b3dfb8d16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l2Fb9G8owvtt9ylXu_jrqw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">修整异常值</p></figure><p id="ee45" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">修改你的异常值是另一个策略。离群值肯定会影响机器学习模型，有些影响更大。然而，您可能希望保留在训练模型时必须使用的每一点数据。您可以考虑以下几种修改方法:</p><ul class=""><li id="6dc4" class="mu mv iq ky b kz la lc ld lf mw lj mx ln my lr mz na nb nc bi translated"><a class="ae kv" href="https://en.wikipedia.org/wiki/Data_transformation_(statistics)" rel="noopener ugc nofollow" target="_blank">转换</a>:对数、平方根或逆转换有时会在预处理中使用，以减少数据的偏斜度(即，使其看起来更像正态分布)并减少异常值的潜在影响。Designer公式工具中的<a class="ae kv" href="https://help.alteryx.com/current/designer/math-functions" rel="noopener ugc nofollow" target="_blank"> LOG(x)函数</a>可以帮助进行对数转换。</li><li id="6216" class="mu mv iq ky b kz nd lc ne lf nf lj ng ln nh lr mz na nb nc bi translated"><a class="ae kv" href="https://en.wikipedia.org/wiki/Winsorizing#:~:text=Winsorizing%20or%20winsorization%20is%20the,Winsor%20(1895%E2%80%931951)." rel="noopener ugc nofollow" target="_blank">裁剪，又名winsorization </a>:这个方法对变量可以拥有的值进行限制。例如，数据的90% winsorization将取前10%和后10%的值，并分别用第90百分位和第10百分位的值替换它们。与修剪相反，你没有删除数据点；您正在用更接近数据其余部分的值替换曲线两端最远的值(以前的异常值)。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/4a1457baf6fcdf1875b8835cc6fa9ed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mE6mgrf2XkBnsQ54kuu2cQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="mq">裁剪或winsorization用更多的中心值替换离群值</em></p></figure><p id="70e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">均值或中值替换:一些参考文献建议用变量的均值或中值替换异常值，假设仅用非异常值计算。这可能不是一个好主意，因为在这个讨论中阐述了<a class="ae kv" href="https://stats.stackexchange.com/questions/78063/replacing-outliers-with-mean" rel="noopener ugc nofollow" target="_blank">的许多原因。</a></p><p id="c2df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了数据健康工具，一旦您的异常值被识别出来，如何处理它们就取决于您了。您可以在工具的第三个输出锚点中找到它们，并进一步查看它们。您可以添加一个字段，将它们标记为异常值，并将它们连接回您的主数据集。您可以绘制数据并使用该标志标记异常值，方法是使用不同的颜色来标识异常值(例如，在散点图上)，或者使用数据调查工具来进一步探究这些异常值及其与其他变量的关系。您还可以将异常值输出连接到主数据源，然后从您的分析中排除异常值。无论你选择做什么，记住上面的警告。</p><p id="4e99" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总的来说，数据健康工具为分析和机器学习提供了对数据质量和就绪性的快速和极其有用的洞察。在它的帮助下，您可以自信地快速进入下一步，因为您已经查看了数据集的关键生命体征。</p><h1 id="ee26" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">附加阅读</h1><ul class=""><li id="830a" class="mu mv iq ky b kz mk lc ml lf nk lj nl ln nm lr mz na nb nc bi translated"><a class="ae kv" href="https://rss.onlinelibrary.wiley.com/doi/full/10.1111/j.1740-9713.2018.01105.x" rel="noopener ugc nofollow" target="_blank">为什么离群值对科学有好处</a>(还有其他领域！)</li><li id="23e3" class="mu mv iq ky b kz nd lc ne lf nf lj ng ln nh lr mz na nb nc bi translated"><a class="ae kv" href="https://vita.had.co.nz/papers/boxplots.pdf" rel="noopener ugc nofollow" target="_blank"> 40年的箱型电影</a>，作者:哈德利·威克姆和丽莎·斯特莱杰斯基</li><li id="eeae" class="mu mv iq ky b kz nd lc ne lf nf lj ng ln nh lr mz na nb nc bi translated"><a class="ae kv" href="http://www.johnmyleswhite.com/notebook/2015/12/03/some-observations-on-winsorization-and-trimming/" rel="noopener ugc nofollow" target="_blank">关于Winsorization和Trimming的一些观察</a></li></ul></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><p id="9bfd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ms">原载于Alteryx社区</em> <a class="ae kv" href="http://community.alteryx.com/datascience?utm_content=738655&amp;utm_source=tds" rel="noopener ugc nofollow" target="_blank"> <em class="ms">数据科学门户</em> </a> <em class="ms">。</em></p></div></div>    
</body>
</html>