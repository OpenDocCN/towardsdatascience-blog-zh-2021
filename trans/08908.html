<html>
<head>
<title>How xticks and xticklabels Really Work: a Walkthrough</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">xticks和xticklabels的实际工作原理:演练</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-xticks-and-xticklabels-really-work-a-walkthrough-aff80755838?source=collection_archive---------7-----------------------#2021-08-17">https://towardsdatascience.com/how-xticks-and-xticklabels-really-work-a-walkthrough-aff80755838?source=collection_archive---------7-----------------------#2021-08-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="6853" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/getting-started" rel="noopener" target="_blank">入门</a></h2><div class=""/><figure class="gl gn jx jy jz ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi jw"><img src="../Images/9b977f947e59f6c894d071be980f3204.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rz8fT1_pZMikG31SirnHiA.jpeg"/></div></div><p class="kh ki gj gh gi kj kk bd b be z dk translated">马库斯·温克勒在<a class="ae kl" href="https://unsplash.com/s/photos/chart?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="1aea" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我最近在Seaborn中创建可视化，这是基于Matplotlib的，当标记x轴时，我没有得到我期望的结果。我决定后退一步，试验一下xticks和xticklabels在可视化中实际做了什么。</p><p id="5d8d" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们来分解一下。</p><h1 id="5977" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">基本情节</h1><p id="5145" class="pw-post-body-paragraph km kn iq ko b kp mi kr ks kt mj kv kw kx mk kz la lb ml ld le lf mm lh li lj ij bi translated">首先，我创建了一个包含两列100行的dataframe。第一列为每行分配一个从1到15的随机数，第二列为每行分配一个从16到30的随机数。</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="95b1" class="mw ll iq ms b gy mx my l mz na">np.random.seed(0)<br/>col1 = np.random.randint(1, 16, size=100).tolist()<br/>col2 = np.random.randint(16, 31, size=100).tolist()<br/>df = pd.DataFrame({'col1': col1, 'col2': col2})</span></pre><p id="687b" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">使用Seaborn的<code class="fe nb nc nd ms b">countplot</code>方法，我测试了第一列。</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="b469" class="mw ll iq ms b gy mx my l mz na">ax = sns.countplot(x = df['col1'])</span></pre><figure class="mn mo mp mq gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi ne"><img src="../Images/7c2a58acae8328bf4d8bdbeefe536758.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Eul7HKBbfZPhHw_ebQm-rA.png"/></div></div><p class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</p></figure><p id="855c" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">当我用<code class="fe nb nc nd ms b">len(df.loc[df['col1'] == 4])</code>运行一个单元格时，我得到了12，这与我的可视化相匹配。换句话说，这100行中的12行是类别bin <em class="nf"> 4 </em>的一部分。到目前为止，一切顺利。</p><p id="ba05" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">让我们看看数字较高的那一栏。</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="93cf" class="mw ll iq ms b gy mx my l mz na">ax = sns.countplot(x = df['col2'])</span></pre><figure class="mn mo mp mq gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi ne"><img src="../Images/6fb8764d67a75aa39a8bdefcc8f5c93a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kxsRpuBMnj9Eh-9qhxs1dA.png"/></div></div><p class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</p></figure><p id="4202" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">结果看起来与第一个相似。标签上显示的数字是16到30。</p><h1 id="1954" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">添加一些刻度</h1><p id="fcde" class="pw-post-body-paragraph km kn iq ko b kp mi kr ks kt mj kv kw kx mk kz la lb ml ld le lf mm lh li lj ij bi translated">假设x轴上有15个潜在值，我有100个？还是200？轴标签会变得太拥挤而难以辨认。</p><p id="6c37" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><code class="fe nb nc nd ms b">xticks</code>属性的要点是只显示x轴上某些点的值。因此，让我们尝试使用<code class="fe nb nc nd ms b">xticks</code>只显示三个间隔开的值。</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="96a7" class="mw ll iq ms b gy mx my l mz na">ax = sns.countplot(x = df['col1'])<br/>ax.set(xticks=([0, 7, 14]))</span></pre><figure class="mn mo mp mq gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi ne"><img src="../Images/85548456307f308bbfb5f7db7990f026.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4uGykEIkJuuPMi_KrXrEZQ.png"/></div></div><p class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</p></figure><p id="ab2d" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">注意在<code class="fe nb nc nd ms b">ax.set(xticks=([0, 7, 14])</code>中，数字指的是指数。数字1位于<code class="fe nb nc nd ms b">xticks</code>的<code class="fe nb nc nd ms b">0</code>索引处，然后它转到数据帧中的第8号索引<code class="fe nb nc nd ms b">7</code>，然后它转到数据帧中的第15号索引<code class="fe nb nc nd ms b">14</code>。但是看看xticks是如何数出<strong class="ko ja"> 1，2，3 </strong>和<em class="nf">而不是</em> 1，8，15的。</p><p id="f40f" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">那么高计数列呢？</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="7eb9" class="mw ll iq ms b gy mx my l mz na">ax = sns.countplot(x = df['col2'])<br/>ax.set(xticks=[0, 7, 14])</span></pre><figure class="mn mo mp mq gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi ne"><img src="../Images/bcb62fa0bb96bdd87fc5f30a3c13cfb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sCwENX1n_gYI_1XzoXIiTA.png"/></div></div><p class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</p></figure><p id="63f7" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">同样，在<code class="fe nb nc nd ms b">ax.set(xticks=([0, 7, 14])</code>中，数字指的是指数。数字16在<code class="fe nb nc nd ms b">xticks</code>的<code class="fe nb nc nd ms b">0</code>索引处，然后它转到数据帧中的第23号索引<code class="fe nb nc nd ms b">7</code>，然后它转到数据帧中的第30号索引<code class="fe nb nc nd ms b">14</code>。沿着y轴的可视化值仍然很好，但是请注意xticks是如何数出<strong class="ko ja"> 16，17，18 </strong>和<em class="nf">而不是</em> 16，23，30的。</p><p id="881d" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">综上所述，从第一个索引的值开始计数，有意义。但是，沿着x轴，标签每次增加1，而不管分类容器的值。</p><p id="bf3b" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我应该注意，它每次只增加1，因为我的bin是增加1的整数。我创建了一个新列，<strong class="ko ja"> col3 </strong>，其中有100个1到30之间的随机数，仅由偶数<strong class="ko ja">和偶数</strong>组成。</p><p id="d605" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">标准的情节是你所期待的:</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="c9cf" class="mw ll iq ms b gy mx my l mz na">ax = sns.countplot(x = df['col3'])</span></pre><figure class="mn mo mp mq gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi ne"><img src="../Images/d8ddb3e23987150d0e5f9f27577fb0f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-VPyabKRWzumSmjsenOJwQ.png"/></div></div><p class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</p></figure><p id="3f0b" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">当我选择与其他示例中相同的索引时，xticks将按2计数。</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="fd1f" class="mw ll iq ms b gy mx my l mz na">ax = sns.countplot(x = df['col3'])<br/>ax.set(xticks=[0, 7, 14])</span></pre><figure class="mn mo mp mq gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi ne"><img src="../Images/ef1b1d00bd74d79b4c5cdf4bd3e5a5ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mWxpznjJ88pdKrU03aihxw.png"/></div></div><p class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</p></figure><p id="6af8" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">并且xticks数出<strong class="ko ja"> 2，4，6 </strong>和<em class="nf">而不是</em> 2，16，30。</p></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><p id="c982" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">出于好奇，让我们看看如果我将xticks放在dataframe的值之外会发生什么。再次使用数字较小的列:</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="1e65" class="mw ll iq ms b gy mx my l mz na">ax = sns.countplot(x=df['col1'])<br/>ax.set(xticks=([0, 7, 14, 21]))</span></pre><figure class="mn mo mp mq gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi ne"><img src="../Images/f722ce003ea7a94d32d81c7956ce7e9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_kbQq0efB-9C6aGYI5ia3w.png"/></div></div><p class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</p></figure><p id="72f8" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在这个可视化中，我向xticks列表中添加了另一个索引<code class="fe nb nc nd ms b">21</code>，这个索引高于引用类别bin值的任何索引。如您所见，它扩展了x轴以显示空白区域。</p><p id="1a29" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">还有一点:尽管传递给<code class="fe nb nc nd ms b">xticks()</code>的列表引用了索引，但是如果需要的话，您可以使用浮点数在索引之间放置记号。</p><h1 id="4f4b" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">指定标签</h1><p id="8ca0" class="pw-post-body-paragraph km kn iq ko b kp mi kr ks kt mj kv kw kx mk kz la lb ml ld le lf mm lh li lj ij bi translated">为了控制标签显示的内容，设置ax的<code class="fe nb nc nd ms b">xticklabels</code>属性:</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="59ec" class="mw ll iq ms b gy mx my l mz na">ax = sns.countplot(x=df['col1'])<br/>ax.set(xticks=([0, 7, 14]))<br/>ax.set(xticklabels = (['one', 'eight', 'fifteen']))</span></pre><figure class="mn mo mp mq gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi ne"><img src="../Images/26539bf5d06a6a16cac2e5371ed61e75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sZez8hR2XrPytJB15uC5RQ.png"/></div></div><p class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</p></figure><p id="65db" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">酷毙了。我得到了我想要的结果。可以使用字符串或数字。注意，如果我没有在某个时候为ax设置<code class="fe nb nc nd ms b">xticks</code>，这三个标签将被放置在前三个索引中，或者[0，1，2]。</p><p id="3e36" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">另外，请注意，在以上所有示例中，我使用了通用的<code class="fe nb nc nd ms b">Axes.set()</code>函数，然后传递了关键字参数。</p><p id="cadc" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">要对记号及其标签进行更多控制，请使用<code class="fe nb nc nd ms b">Axes.set_xticks()</code>和<code class="fe nb nc nd ms b">Axes.set_xticklabels()</code>。对于后者，您可以指定各种字体属性、标签的旋转等等。</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="6e37" class="mw ll iq ms b gy mx my l mz na">ax = sns.countplot(x=df['col1'])<br/>ax.set_xticks([0, 7, 14])<br/>ax.set_xticklabels(labels = ['one', 'eight', 'fifteen'], <br/>                   rotation=45, <br/>                   fontstyle='italic', <br/>                   color='green')</span></pre><figure class="mn mo mp mq gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi ne"><img src="../Images/87a69a075435afd154a66a7bafcdbfe2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RVIIpI364mHbyAYlL4t1Xg.png"/></div></div><p class="kh ki gj gh gi kj kk bd b be z dk translated">作者图片</p></figure><h1 id="41b8" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">摘要</h1><ul class=""><li id="fd85" class="nn no iq ko b kp mi kt mj kx np lb nq lf nr lj ns nt nu nv bi translated">如果不指定任何内容，所有记号都将自动放置。</li><li id="877b" class="nn no iq ko b kp nw kt nx kx ny lb nz lf oa lj ns nt nu nv bi translated">使用<code class="fe nb nc nd ms b">ax.set(xticks=[a, b, c])</code>或<code class="fe nb nc nd ms b">ax.set_xticks([a, b, c])</code>选择在索引处添加记号的特定位置。</li><li id="f11a" class="nn no iq ko b kp nw kt nx kx ny lb nz lf oa lj ns nt nu nv bi translated">如果不指定标签，第一个刻度将采用输入的第一个索引的值。然后，后续值将在分笔成交点处使用，即使它们可能不会引用其余索引处的实际值。</li><li id="e14f" class="nn no iq ko b kp nw kt nx kx ny lb nz lf oa lj ns nt nu nv bi translated">使用<code class="fe nb nc nd ms b">ax.set(xticklabels=[a, b, c])</code>或<code class="fe nb nc nd ms b">ax.set_xticklabels([a, b, c])</code>选择标签(字符串或数字)在设定的索引处添加记号。</li><li id="3f89" class="nn no iq ko b kp nw kt nx kx ny lb nz lf oa lj ns nt nu nv bi translated">要控制标签的外观和文本属性，请使用带有关键字参数的<code class="fe nb nc nd ms b">set_xticklabels()</code>。</li></ul></div></div>    
</body>
</html>