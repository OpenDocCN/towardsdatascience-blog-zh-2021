<html>
<head>
<title>Managing Scripts on AI Platform with GCP Cloud Source Repository</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用GCP云资源仓库管理人工智能平台上的脚本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/managing-scripts-on-ai-platform-with-gcp-cloud-source-repository-b27f5f0db70c?source=collection_archive---------21-----------------------#2021-08-25">https://towardsdatascience.com/managing-scripts-on-ai-platform-with-gcp-cloud-source-repository-b27f5f0db70c?source=collection_archive---------21-----------------------#2021-08-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0f75" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">分享通过GCP云资源仓库管理和共享脚本的步骤的教程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bfceda195492625f054a705169b7a69d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RwZ7hhDDNlObdg9uUdjsEA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Thiago Barletta 拍摄于<a class="ae ky" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><h2 id="07c2" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">介绍</h2><p id="d421" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">之前我曾经在组件Google Cloud AI平台下有多个Jupyter笔记本。当我想将脚本从Notebook-1复制到Notebook-2时，我将启动Notebook-1的实例，并从那里下载脚本以上传到Notebook-2。这种方法效率很低，并且随着实例的启动会产生更多的成本。然后我的队友建议与Google云资源仓库合作——这是一个绝妙的主意！</p><h2 id="4584" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">那么什么是Google云源码库呢？</h2><p id="cd38" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">Google Cloud Source Repositories是一个很好的平台，可以在团队成员之间管理和共享代码，或者在项目结束时与客户共享您的脚本。云资源存储库可以是团队共享脚本、管理和跟踪变更的单一位置。用户可以轻松地将他们的脚本的更新版本从笔记本推送到云资源存储库。</p><p id="cd43" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">Google Cloud Source Repository可以连接到许多其他GCP组件，如App Engine、Cloud Build等。然而，本文将分享创建存储库所需的步骤，并将脚本从您的AI平台Jupternotebook推送到云资源存储库，并从云资源存储库克隆到AI平台Jupternotebook。</p><p id="d550" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">让我们开始我们的教程！<em class="mt">(本教程假设已经设置了一个GCP项目)</em></p><h2 id="a252" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">创建云资源存储库:</h2><p id="3df4" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">首先从您的GCP控制台下拉菜单导航到云源存储库。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/e0b2ddf661fe0a4af88fb669b35ffe64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*yJ1g5dw58QkhWB5v2Vg9-A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">步骤1:开放云源代码库</p></figure><p id="4674" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">选择“添加存储库”选项，然后选择“创建新存储库”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mv"><img src="../Images/37c218fe29131d0f606549e7ff73b732.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZDegwr47YFSSEsiGJtuxzA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">步骤2:创建新的存储库</p></figure><p id="f4e2" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">提供一个“存储库名称”并指定您希望云资源存储库成为的“项目”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mw"><img src="../Images/c284004407a90a6f17abf4b9e8e47d8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kNNvGbnJWeniuIQesXguBw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">步骤3:指定“存储库名称”和“项目”</p></figure><p id="945a" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">一旦成功创建了您的存储库，将会有一个指南分享您如何将代码添加到存储库中。有三种方法:</p><ul class=""><li id="037e" class="mx my it lx b ly mo mb mp li mz lm na lq nb mn nc nd ne nf bi translated">SSH认证</li><li id="a8ea" class="mx my it lx b ly ng mb nh li ni lm nj lq nk mn nc nd ne nf bi translated">谷歌云SDK</li><li id="db95" class="mx my it lx b ly ng mb nh li ni lm nj lq nk mn nc nd ne nf bi translated">手动生成的凭据</li></ul><p id="5eb9" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">让我们遵循“Google Cloud SDK”方法，它为我们提供了将脚本推送到存储库所需的命令。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/a25e6484c470b663772cead549f67359.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7bSE-NfQUa5UJEOQq96hvg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">步骤4:选择并遵循方法——Google Cloud SDK</p></figure><h2 id="1a4a" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">将存储库克隆到Jupyternotebook</h2><p id="8f43" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">现在让我们打开Jupyternotebook，看看如何将新创建的存储库克隆到Jupyternotebook中。要运行笔记本中提供的代码，我们需要启动“终端”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/7e70645964632ab479f1570be5a2929d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TNP0BZ-u8tULzlUqHDtacQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">第五步:在Jupternotebook中启动“终端”</p></figure><p id="2108" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">这将启动一个新的“终端标签”。现在，我们可以通过运行提供的命令集，在这个“终端选项卡”中开始克隆我们新创建的云资源存储库</p><p id="18f4" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">首先运行第一个命令来设置身份验证凭据:</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="eebc" class="kz la it no b gy ns nt l nu nv">gcloud init </span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/7e1c8a487098e43e4780417afa5fe55a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*M2WNeePu_wA3mUEps5WJ4A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">步骤6:提供身份验证凭据</p></figure><p id="28cc" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">接下来，克隆您新创建的云资源存储库</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="16c5" class="kz la it no b gy ns nt l nu nv">gcloud source repos clone Our-Scripts-Folder --project=sue-gcp-learning-env</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/41c7b15351161c55839fcad7e28e62b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zLpkTO0gSyNCTaYmqNVsdg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">步骤7:克隆存储库</p></figure><p id="93ce" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">当我们克隆一个空的存储库时，在警告消息显示上注明。让我们切换到这个新的克隆存储库，并向其中添加文件。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="05ca" class="kz la it no b gy ns nt l nu nv">cd Our-Scripts-Folder</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/f1dfd32bc5be5acac19627416650087e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uFpl8Aa9qxjW-QgjWrEYsQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">步骤8:切换到新的克隆存储库</p></figure><p id="3b7f" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">将一些文件上传到新的克隆存储库文件夹中。在这个例子中，我上传了2个文件到文件夹“我们的脚本文件夹”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/e8d23fd163b25cdf7442cf98765f8cdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*6F9RLS_0cPhzoukdKFwQCg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">步骤9:将文件/脚本上传到新文件夹</p></figure><h2 id="0b17" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">推送至云资源存储库</h2><p id="f7e2" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">上传完成后，我们需要添加并提交它们，然后将它们推回主云资源存储库。</p><p id="de66" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">此外，您需要通过运行以下命令在提交之前设置您的详细信息:</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="d7d1" class="kz la it no b gy ns nt l nu nv">git config — global user.email “you@example.com”<br/>git config — global user.name “Your Name”</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/29c8e0eab69cfcacd7fd2e689443a318.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xx340YNKYTDDGsfSilgI-Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">步骤10:更新用户详细信息</p></figure><p id="de65" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">现在，您可以添加、提交和推送您的代码到云源代码库。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="cd34" class="kz la it no b gy ns nt l nu nv">git add . <br/>git commit -m "type your commit message here"<br/>git push -u origin master</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/34f4e161235ad2f27815f4a00738c5ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ywmGuVk9d2-a4b-NyR1_fA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">步骤11:添加、提交和推送</p></figure><p id="1425" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">成功推送文件后，检查它们是否上传到了云资源存储库中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/45e4a2af91356c0625dfdf97ae11a7fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GFvBn0GOz7zVnTuRJcmrmQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">步骤12:执行检查</p></figure><p id="81b1" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">恭喜你！文件已成功上传到云源资料档案库。</p><p id="0ca0" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">现在，让我们反过来工作。假设我们正在与新同事分享这组脚本。我们的新同事需要将云资源存储库中的脚本克隆到他/她的Jupyternotebook中。让我们看看如何做到这一点！</p><h2 id="124a" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">从云资源库中克隆和提取</h2><p id="8775" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">在云资源仓库中，有一个“克隆”选项，向我们展示了如何克隆仓库并提取代码。选择“+克隆”选项，然后选择“如何设置？”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/6246ebe57f2c4bcbeec2012d10356baf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sWv_9SQojY3OlBgjkufhxA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">步骤13:选择“+克隆”选项</p></figure><p id="cdb4" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">与之前类似，有3种克隆方法。让我们选择选项——Google Cloud SDK，它为我们的新同事克隆存储库提供了所需的命令。</p><p id="a925" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">通过在终端中运行克隆命令来克隆存储库</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="0522" class="kz la it no b gy ns nt l nu nv">gcloud source repos clone Our-Scripts-Folder --project=sue-gcp-learning-env</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/91d0385036c149173b7b1888a931ba61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yu8kbLDYksTXOs-fq6W3Jg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">步骤14:克隆存储库</p></figure><p id="4e43" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">这就是所需的所有步骤，并且已经用文件夹中的文件和脚本克隆了存储库。</p><p id="551d" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">如果云源存储库中有新的变化。需要执行以下命令来获取文件/脚本的最新版本。</p><p id="1b6a" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">切换到新的克隆存储库位置，然后提取更新的文件/脚本。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="1fca" class="kz la it no b gy ns nt l nu nv">cd Our-Scripts-Folder</span><span id="03e3" class="kz la it no b gy of nt l nu nv">git pull origin master</span></pre><p id="ba44" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">这些是你在jupter notebook with Cloud Source Repository上管理代码所需的步骤。</p></div><div class="ab cl og oh hx oi" role="separator"><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol"/></div><div class="im in io ip iq"><h2 id="8f1b" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">结论:</h2><p id="52ff" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">使用Google云源码库管理团队成员在不同AI平台笔记本上的脚本效率更高，并且可以跟踪更改。文件和移交给另一个成员的过程也将更加顺利。</p><p id="3b89" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">感谢你阅读这篇文章，我希望这能帮助那些从GCP云资源仓库起步的人。</p><h2 id="ad0b" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">参考和链接:</h2><p id="2ca8" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">[1]<a class="ae ky" href="https://cloud.google.com/source-repositories/docs/" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/source-repositories/docs/</a></p><p id="a20a" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">[2]<a class="ae ky" href="https://blog.peterschen.de/use-cloud-source-repositories-in-jupyter-notebooks/" rel="noopener ugc nofollow" target="_blank">https://blog . peterschen . de/use-cloud-source-repositories-in-jupyter-notebooks/</a></p></div></div>    
</body>
</html>