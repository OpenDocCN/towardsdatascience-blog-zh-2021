<html>
<head>
<title>Foraging spots detection in Great Whale’s migration routes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">大鲸迁徙路线中觅食点的检测</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/foraging-spots-detection-in-great-whales-migration-routes-19ee4540930e?source=collection_archive---------39-----------------------#2021-08-13">https://towardsdatascience.com/foraging-spots-detection-in-great-whales-migration-routes-19ee4540930e?source=collection_archive---------39-----------------------#2021-08-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="b228" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/data-for-change" rel="noopener" target="_blank">变更数据</a></h2><div class=""/><div class=""><h2 id="0c54" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">大鲸追踪记录中的停止检测与移动的熊猫</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/d98bc26f2ef1d3c6bd3517d66e200ef1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*icAg3nMSNPy4M1bsDdOFBw.gif"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供。中纬度大鲸觅食点探测</p></figure><p id="c71d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这个演示中，我将解释如何在北大西洋大鲸的迁徙路线中发现<strong class="lj jd">觅食点</strong>。在由<a class="ae md" href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0076507#s3" rel="noopener ugc nofollow" target="_blank"> <strong class="lj jd">席尔瓦等人(2013) </strong> </a> <strong class="lj jd"> </strong>撰写的论文中，作者解释说，巨头鲸长时间保持在中纬度觅食[1]。在这里，我们将预设参数，可以找到这些提到的中纬度地区的点，这是指相对更接近亚速尔群岛。在第一篇评论中，我发表了<strong class="lj jd"> " </strong> <a class="ae md" rel="noopener" target="_blank" href="/time-filter-for-great-whales-migration-routes-32c429ac6bb9"> <strong class="lj jd">大鲸迁徙路线的时间过滤器</strong> </a> <strong class="lj jd"> " </strong>，你可以根据2009年这一年的过滤器来可视化大鲸的移动模式。</p><p id="f5b8" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在Silva等人(2013年)的出版物中，作者使用状态空间模型(SSSM)来识别动物行为。在这篇综述中，我将测试python库中开发的一种不同的方法，该方法使用时间和搜索电台参数来移动熊猫。事实上，分析结果正如预期的那样，它检测到了动物在中纬度地区的行为。<strong class="lj jd">请注意！</strong>动物行为的参数很关键，必须由生物专家提供。在我的演示中，由于我的生物和生态研究背景，我表达了我对动物行为的常识，但考虑到我是地理空间方法论方面的专家，而不是生物学方面的。</p><blockquote class="me"><p id="0522" class="mf mg it bd mh mi mj mk ml mm mn mc dk translated"><a class="ae md" href="https://bryanvallejo16.github.io/whale-tracking-azores-II/" rel="noopener ugc nofollow" target="_blank">最终演示在这里</a></p></blockquote><p id="0640" class="pw-post-body-paragraph lh li it lj b lk mo kd lm ln mp kg lp lq mq ls lt lu mr lw lx ly ms ma mb mc im bi translated">在800米的搜索范围内，用于觅食点检测分析的参数在5分钟和110分钟之间。如果您想查看不同参数的更多分析，您可以参考文章<a class="ae md" rel="noopener" target="_blank" href="/stop-detection-in-blue-whales-gps-tracking-movingpandas-0-6-55a4b893a592"> <strong class="lj jd">蓝鲸GPS跟踪中的觅食点</strong> </a>和<a class="ae md" rel="noopener" target="_blank" href="/stop-detection-in-gps-tracks-movingpandas-keplergl-point-map-with-stops-duration-in-bird-664064b3ccbc"> <strong class="lj jd">鸟类迁徙GPS轨迹中的停止检测—移动熊猫&amp; KeplerGl </strong> </a> <strong class="lj jd">。</strong></p><blockquote class="me"><p id="4a80" class="mf mg it bd mh mi mj mk ml mm mn mc dk translated">“这个演示是北大西洋大鲸洄游路线运动分析的第二部分。还有更多的观点需要审查，如停止分段。在第三篇综述中，我将发布一个带有停止分割分析的演示，以证实大鲸的觅食行为”</p></blockquote><p id="9bcb" class="pw-post-body-paragraph lh li it lj b lk mo kd lm ln mp kg lp lq mq ls lt lu mr lw lx ly ms ma mb mc im bi translated">在下一张地图中，你将看到参数是如何(根据我的常识)显示中纬度大鲸鱼的<strong class="lj jd">觅食行为的。研究提到，为了节省迁徙的能量，巨头鲸更喜欢在亚速尔群岛附近的<strong class="lj jd">觅食</strong>【1】。</strong></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mt"><img src="../Images/5afa7c750f24978c713ceaaf85545072.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SXLGkdrqpmK3MVguZxuB8A.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供。在大鲸迁徙路线的中纬度发现觅食点</p></figure><p id="9555" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">目前，很高兴知道算法正在工作，并且确实代表了大鲸鱼专家对它们迁徙路线的看法。但从科学的角度来看，不断质疑和批评这些结果，而不是把它们作为基本真理，总是好的。这就是为什么我将在第三个与觅食点分割相关的演示中继续分析大鲸鱼的迁徙路线，以更批判性和可视化的方式确认鲸鱼的觅食行为。</p><blockquote class="me"><p id="1038" class="mf mg it bd mh mi mj mk ml mm mn mc dk translated">“如果你对动物行为分析感兴趣，有一种软件正在开发中，可以帮助动物跟踪研究。看看<a class="ae md" href="http://www.gis4-wildlife.com" rel="noopener ugc nofollow" target="_blank">野生动物追踪器</a>”</p></blockquote><p id="9ecb" class="pw-post-body-paragraph lh li it lj b lk mo kd lm ln mp kg lp lq mq ls lt lu mr lw lx ly ms ma mb mc im bi translated">动物行为分析是保护区管理决策的重要手段。它有助于回答以下问题:保护区的适当界限是什么？为什么我们必须保护指定的范围？在保护区内，我们必须对渔业进行哪些监管？</p><h1 id="d03b" class="mu mv it bd mw mx my mz na nb nc nd ne ki nf kj ng kl nh km ni ko nj kp nk nl bi translated">数据</h1><p id="31a8" class="pw-post-body-paragraph lh li it lj b lk nm kd lm ln nn kg lp lq no ls lt lu np lw lx ly nq ma mb mc im bi translated">本演示中使用的数据集对应于<a class="ae md" href="https://www.movebank.org/cms/webapp?gwt_fragment=page=studies,path=study72289508" rel="noopener ugc nofollow" target="_blank">亚速尔群岛大鲸卫星遥测程序</a>。它可以在Movebank中找到，并且是在非商业性知识共享许可下使用。</p><h1 id="47af" class="mu mv it bd mw mx my mz na nb nc nd ne ki nf kj ng kl nh km ni ko nj kp nk nl bi translated"><strong class="ak">练习</strong></h1><p id="5a14" class="pw-post-body-paragraph lh li it lj b lk nm kd lm ln nn kg lp lq no ls lt lu np lw lx ly nq ma mb mc im bi translated">请注意，这个分析对应于已经发表的<a class="ae md" rel="noopener" target="_blank" href="/time-filter-for-great-whales-migration-routes-32c429ac6bb9"> <strong class="lj jd">巨鲸迁徙路线</strong> </a> <strong class="lj jd">时间过滤器的第二部分。</strong>因此，您可能需要引用相同的名称，但无论哪种方式，您都可以遵循以下文本。</p><p id="ac90" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">首先，我们导入库</p><pre class="ks kt ku kv gt nr ns nt nu aw nv bi"><span id="e8ad" class="nw mv it ns b gy nx ny l nz oa">import pandas as pd<br/>import geopandas as gpd<br/>import movingpandas as mpd<br/>from shapely.geometry import Point<br/>from datetime import datetime, timedelta<br/>from keplergl import KeplerGl</span></pre><p id="8b66" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">然后，我们读取数据集</p><pre class="ks kt ku kv gt nr ns nt nu aw nv bi"><span id="d549" class="nw mv it ns b gy nx ny l nz oa">fp = r’data/azores_great_whales.geojson’<br/>geodata = gpd.read_file(fp, driver=’GeoJSON’)</span></pre><p id="8ca8" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们准备<code class="fe ob oc od ns b">geodata</code>桌</p><pre class="ks kt ku kv gt nr ns nt nu aw nv bi"><span id="0b76" class="nw mv it ns b gy nx ny l nz oa"># preparing data<br/>geodata[‘t’] = pd.to_datetime(geodata[‘timestamp’])<br/>geodata = geodata.set_index(‘t’)</span><span id="1b0b" class="nw mv it ns b gy oe ny l nz oa"># setting individuals<br/>geodata[‘id_whale’] = [‘w’+str(idwhale) for idwhale in geodata[‘ind_ident’].to_list()]</span><span id="f8d6" class="nw mv it ns b gy oe ny l nz oa"># time attributes<br/>geodata[‘year’] = geodata.index.year<br/>geodata[‘month’] = geodata.index.month</span></pre><p id="478e" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们准备一个<code class="fe ob oc od ns b">geostops</code>表，包含我们想要的2019年的子集</p><pre class="ks kt ku kv gt nr ns nt nu aw nv bi"><span id="794c" class="nw mv it ns b gy nx ny l nz oa"># prepare tables for visualization<br/>geostops = geodata[[‘timestamp’, ‘long’, ‘lat’,’id_whale’, ‘year’, ‘geometry’]]</span><span id="1dcc" class="nw mv it ns b gy oe ny l nz oa">subset = [2009]</span><span id="cbfc" class="nw mv it ns b gy oe ny l nz oa">geostops = geostops.loc[geostops[‘year’].isin(subset)]</span><span id="357e" class="nw mv it ns b gy oe ny l nz oa">geostops[‘year_id’] = [‘Year ‘+str(year) for year in geostops[‘year’].to_list()]</span></pre><p id="b53b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这一部分中，我们定义了基于参数<strong class="lj jd">分钟</strong>和以公里为单位的<strong class="lj jd">搜索电台</strong>返回<strong class="lj jd">觅食站</strong>的函数</p><pre class="ks kt ku kv gt nr ns nt nu aw nv bi"><span id="45fa" class="nw mv it ns b gy nx ny l nz oa">def get_stop_point_traj_collection(moving_df, traject_id_column, Minutes, searchradio):<br/> <br/> all_stop_points = gpd.GeoDataFrame()<br/> <br/> # create a traj collection with movingpandas<br/> traj_collection = mpd.TrajectoryCollection(moving_df, traject_id_column)<br/> <br/> for i in range(len(traj_collection)):<br/> # create a stop detector<br/> detector = mpd.TrajectoryStopDetector(traj_collection.trajectories[i])<br/> <br/> # stop points<br/> stop_points = detector.get_stop_points(min_duration=timedelta(minutes=Minutes), max_diameter=searchradio)<br/> <br/> # add ID<br/> stop_points[‘tag_id’] = [tag.split(‘_’)[0] for tag in stop_points.index.to_list()]<br/> <br/> all_stop_points= all_stop_points.append(stop_points)<br/> <br/> return all_stop_points</span></pre><p id="f8c1" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在我们用<code class="fe ob oc od ns b">geostops</code>表应用该函数</p><pre class="ks kt ku kv gt nr ns nt nu aw nv bi"><span id="83a0" class="nw mv it ns b gy nx ny l nz oa">whale_stops = get_stop_point_traj_collection(geostops, ‘id_whale’, 5, 800)</span></pre><p id="6aa3" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">然后，我们计算在觅食点停留的时间</p><pre class="ks kt ku kv gt nr ns nt nu aw nv bi"><span id="d5e5" class="nw mv it ns b gy nx ny l nz oa"># Duration of stops<br/>whale_stops[‘duration_m’] = (whale_stops[‘end_time’]-whale_stops[‘start_time’]).dt.total_seconds()/60</span><span id="1af8" class="nw mv it ns b gy oe ny l nz oa"># Between 5 and 110<br/>whale_stops = whale_stops.loc[whale_stops[‘duration_m’]&lt;=110]</span><span id="a90c" class="nw mv it ns b gy oe ny l nz oa"># remove datetime format for whale stops<br/>whale_stops[[‘start_time’, ‘end_time’]] = whale_stops[[‘start_time’, ‘end_time’]].astype(str)</span></pre><h1 id="bd02" class="mu mv it bd mw mx my mz na nb nc nd ne ki nf kj ng kl nh km ni ko nj kp nk nl bi translated"><strong class="ak">可视化</strong></h1><p id="e125" class="pw-post-body-paragraph lh li it lj b lk nm kd lm ln nn kg lp lq no ls lt lu np lw lx ly nq ma mb mc im bi translated">为了可视化，我们使用开普勒格尔。我们继续创建一个实例并添加数据。</p><pre class="ks kt ku kv gt nr ns nt nu aw nv bi"><span id="4a0c" class="nw mv it ns b gy nx ny l nz oa"># Create KeplerGl instance<br/>m = KeplerGl(height=600)</span><span id="c8c7" class="nw mv it ns b gy oe ny l nz oa">m.add_data(whale_stops, ‘Whale stops’)</span></pre><p id="f840" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">最后，你保存地图并像我一样使用在觅食点花费的时间来配置它。栏目是<code class="fe ob oc od ns b">duration_m</code></p><pre class="ks kt ku kv gt nr ns nt nu aw nv bi"><span id="bce3" class="nw mv it ns b gy nx ny l nz oa">m.save_to_html(file_name=’index.html’)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi of"><img src="../Images/85c9228c06eca5b11a91fdb300bf79ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1JMcG57Ovl95itpPHDOLUw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供。中纬度地区的觅食点</p></figure><h1 id="4e34" class="mu mv it bd mw mx my mz na nb nc nd ne ki nf kj ng kl nh km ni ko nj kp nk nl bi translated">结论</h1><p id="5321" class="pw-post-body-paragraph lh li it lj b lk nm kd lm ln nn kg lp lq no ls lt lu np lw lx ly nq ma mb mc im bi translated">正如演示所展示的，该算法正在检测中纬度的觅食点，考虑到参数表征了大鲸鱼的觅食行为。这不是一个基本事实，它可能真的需要由海洋生物学领域的专家来分析。这只是一个演示如何使用该算法的练习。</p><h1 id="297f" class="mu mv it bd mw mx my mz na nb nc nd ne ki nf kj ng kl nh km ni ko nj kp nk nl bi translated">建议</h1><p id="bb41" class="pw-post-body-paragraph lh li it lj b lk nm kd lm ln nn kg lp lq no ls lt lu np lw lx ly nq ma mb mc im bi translated">当你使用这种算法时，进行测试。参数的变化会在不同的位置产生不同的结果，因此您可能需要通过critic view真正观察和定义适当的参数。正如我之前建议的，与海洋生物学领域的专家一起测试这种算法是合适的。然而，通过观察轨迹中的移动，你已经可以知道巨型哺乳动物是在四处寻找食物还是在直线移动，所以这是很好的指导。</p></div><div class="ab cl og oh hx oi" role="separator"><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol"/></div><div class="im in io ip iq"><p id="13b3" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果你有更多的问题，或者在你的分析或项目中需要帮助，你可以在我的个人简介中找到我。</p><h1 id="3fdc" class="mu mv it bd mw mx my mz na nb nc nd ne ki nf kj ng kl nh km ni ko nj kp nk nl bi translated">参考</h1><p id="6e6c" class="pw-post-body-paragraph lh li it lj b lk nm kd lm ln nn kg lp lq no ls lt lu np lw lx ly nq ma mb mc im bi translated">[1]席尔瓦·马、彼尔托·R、琼森·I、鲍姆加特纳·MF、桑多斯·RS(2013年)。北大西洋的蓝鲸和长须鲸暂停春季迁徙，前往中纬度地区觅食:为旅途积蓄能量？  PLoS ONE 8(10): e76507。<a class="ae md" href="https://doi.org/10.1371/journal.pone.0076507" rel="noopener ugc nofollow" target="_blank">https://doi.org/10.1371/journal.pone.0076507</a></p></div></div>    
</body>
</html>