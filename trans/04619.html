<html>
<head>
<title>Time Series Decomposition In Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的时间序列分解</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/time-series-decomposition-in-python-8acac385a5b2?source=collection_archive---------1-----------------------#2021-04-21">https://towardsdatascience.com/time-series-decomposition-in-python-8acac385a5b2?source=collection_archive---------1-----------------------#2021-04-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="299d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">时间序列分析变得简单</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f558ec3d8023d1d7d7b488afaeca5d15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WMwO0xc9Qmj76SHF.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><p id="329b" class="pw-post-body-paragraph lf lg it lh b li lj ju lk ll lm jx ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">时间序列分解是一种将时间序列分成几个部分的技术，每个部分代表一个潜在的模式类别，<strong class="lh iu">趋势，季节性，</strong>和<strong class="lh iu">噪声</strong>。在本教程中，我们将向您展示如何用Python自动分解时间序列。</p><p id="f6d7" class="pw-post-body-paragraph lf lg it lh b li lj ju lk ll lm jx ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">首先，让我们谈一谈时间序列的组成部分:</p><p id="c0a1" class="pw-post-body-paragraph lf lg it lh b li lj ju lk ll lm jx ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated"><strong class="lh iu">季节性</strong>:描述你的时间序列中的周期性信号。<br/> <strong class="lh iu">趋势</strong>:描述时间序列是递减、不变还是随时间递增。<br/> <strong class="lh iu">噪声</strong>:描述了从时间序列中分离出季节性和趋势后的剩余部分。换句话说，模型无法解释数据的可变性。</p><p id="f739" class="pw-post-body-paragraph lf lg it lh b li lj ju lk ll lm jx ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">对于这个例子，我们将使用来自Kaggle 的<a class="ae mb" href="https://www.kaggle.com/rakannimer/air-passengers?select=AirPassengers.csv" rel="noopener ugc nofollow" target="_blank">航空乘客数据。</a></p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="5bc5" class="mh mi it md b gy mj mk l ml mm">import pandas as pd<br/>import numpy as np<br/>from statsmodels.tsa.seasonal import seasonal_decompose<br/> <br/>#<a class="ae mb" href="https://www.kaggle.com/rakannimer/air-passengers" rel="noopener ugc nofollow" target="_blank">https://www.kaggle.com/rakannimer/air-passengers</a><br/>df=pd.read_csv(‘AirPassengers.csv’)<br/> <br/>df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/f3e22dcd4eed8951ffc53f92866cbbfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:382/format:webp/0*ubXh9QC7xblCnQJd.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="1663" class="pw-post-body-paragraph lf lg it lh b li lj ju lk ll lm jx ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">首先，我们需要将Month列设置为索引，并将其转换为Datetime对象。</p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="e72f" class="mh mi it md b gy mj mk l ml mm">df.set_index('Month',inplace=True)<br/>df.index=pd.to_datetime(df.index)</span><span id="62c3" class="mh mi it md b gy mo mk l ml mm">#drop null values<br/>df.dropna(inplace=True)<br/>df.plot()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/e2c3378a29791e0da89808455587810d.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/0*4NiXjnaaxyVKjqjP.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="56cb" class="mq mi it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">分解</h1><p id="e580" class="pw-post-body-paragraph lf lg it lh b li nh ju lk ll ni jx ln lo nj lq lr ls nk lu lv lw nl ly lz ma im bi translated">我们将使用python<strong class="lh iu">stats models</strong>函数<a class="ae mb" href="https://www.statsmodels.org/stable/generated/statsmodels.tsa.seasonal.seasonal_decompose.html" rel="noopener ugc nofollow" target="_blank">季节性分解</a>。</p><p id="cfb6" class="pw-post-body-paragraph lf lg it lh b li lj ju lk ll lm jx ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated"><code class="fe nm nn no md b">result<strong class="lh iu">=</strong>seasonal_decompose(df['#Passengers'], model<strong class="lh iu">=</strong>'multiplicable', period=12)</code></p><p id="156b" class="pw-post-body-paragraph lf lg it lh b li lj ju lk ll lm jx ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">在季节性分解中，我们必须设置模型。我们可以将模型设置为<strong class="lh iu">加法</strong>或<strong class="lh iu">乘法</strong>。选择正确模型的经验法则是在我们的图中查看趋势和季节变化是否随时间相对恒定，换句话说，是否是线性的。如果是，那么我们将选择<strong class="lh iu">添加剂</strong>型号。否则，如果趋势和季节变化随时间增加或减少，那么我们使用<strong class="lh iu">乘</strong>模型。</p><p id="5e15" class="pw-post-body-paragraph lf lg it lh b li lj ju lk ll lm jx ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">我们这里的数据是按月汇总的。我们要分析的周期是按年计算的，所以我们将周期设置为12。</p><p id="5fed" class="pw-post-body-paragraph lf lg it lh b li lj ju lk ll lm jx ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">我们可以得到每个组件如下:</p><p id="d1c2" class="pw-post-body-paragraph lf lg it lh b li lj ju lk ll lm jx ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated"><code class="fe nm nn no md b">result.seasonal.plot()</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/3dc8af5290e915a4921bb0bf75d46d51.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/0*K3BMtCJkAJ-hjo2V.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="aea4" class="pw-post-body-paragraph lf lg it lh b li lj ju lk ll lm jx ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated"><code class="fe nm nn no md b">result.trend.plot()</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/4537312941822ca64e848e3bc793b9bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/0*OOtsFaxR6cfYdJ_n.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="a72a" class="pw-post-body-paragraph lf lg it lh b li lj ju lk ll lm jx ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">此外，我们可以一次绘制每个组件</p><p id="5d36" class="pw-post-body-paragraph lf lg it lh b li lj ju lk ll lm jx ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated"><code class="fe nm nn no md b">result.plot()</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/f7deed0587180a8737d1ce7e2ec7688d.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/0*8aDzvcPjIfhRuMUH.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="49f4" class="mq mi it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">包扎</h1><p id="3ea4" class="pw-post-body-paragraph lf lg it lh b li nh ju lk ll ni jx ln lo nj lq lr ls nk lu lv lw nl ly lz ma im bi translated">通常，当查看时间序列数据时，很难手动提取趋势或识别季节性。幸运的是，我们可以自动分解时间序列，并帮助我们更清楚地了解各个组成部分，因为如果我们从数据中移除季节性，则更容易分析趋势，反之亦然。</p></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><p id="bceb" class="pw-post-body-paragraph lf lg it lh b li lj ju lk ll lm jx ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">想从我这里得到更多？:<br/><a class="ae mb" href="https://medium.com/@billybonaros" rel="noopener">在媒体<br/> </a>上关注我在 <br/>中链接的<a class="ae mb" href="https://www.linkedin.com/in/billybonaros/" rel="noopener ugc nofollow" target="_blank">上添加我通过使用</a><a class="ae mb" href="https://billybonaros.medium.com/membership" rel="noopener"> <strong class="lh iu">我的推荐链接</strong> </a>注册媒体来支持我。</p><p id="158e" class="pw-post-body-paragraph lf lg it lh b li lj ju lk ll lm jx ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated"><em class="np">最初发表于</em><a class="ae mb" href="https://predictivehacks.com/time-series-decomposition/" rel="noopener ugc nofollow" target="_blank"><em class="np">https://predictivehacks.com。</em> </a></p></div></div>    
</body>
</html>