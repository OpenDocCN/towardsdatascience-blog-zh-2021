<html>
<head>
<title>Simply, Just Python in the Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简单来说，就是云中的Python</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/simply-just-python-in-the-cloud-78274389ab00?source=collection_archive---------27-----------------------#2021-07-28">https://towardsdatascience.com/simply-just-python-in-the-cloud-78274389ab00?source=collection_archive---------27-----------------------#2021-07-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="dba9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">所以你只想大规模运行python？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9d7f1ae3e4d2e7552968ee05d2142bf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AfEmZqkexs5L_ZFo-tI6bQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><blockquote class="kv kw kx"><p id="4c50" class="ky kz la lb b lc ld jr le lf lg ju lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated"><strong class="lb ir">TL；博士</strong></p><p id="8633" class="ky kz la lb b lc ld jr le lf lg ju lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">这是一个关于在Azure中运行代码的“精益”教程。随着你的数据驻留在云中虚拟机旁边的存储中，无需探索Azure迷宫般的复杂性，并使用新发布的VS-Code“Azure机器学习-远程”扩展，<strong class="lb ir">在虚拟机上编程就像在本地机器上开发代码一样简单</strong>，但具有云的扩展优势。这是利用云计算和Azure机器学习(AML)的第一步。</p></blockquote><p id="04b8" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi ly translated">响亮的服务提供了许多选择，Azure比其他服务更多；但是由于种类繁多，很难知道从哪里开始。让我们假设你已经<a class="ae mh" href="https://azure.microsoft.com/en-us/" rel="noopener ugc nofollow" target="_blank">订阅了Azure </a>，并且已经开始了解Azure的网络门户<code class="fe mi mj mk ml b">portal.azure.com,</code>——它是用于设置和管理网络资源的通用图形界面。云组件、服务和产品的通用管理术语是“资源”如果你对此不熟悉，可以在Azure Fundamentals中搜索一门在线课程，内容包括订阅、资源组、区域等。哈佛的DS intro 让你觉得使用Azure门户网站很舒服。请记住，大多数在线培训都是针对企业用户的，比您需要了解的更多。假设您对以合理的成本快速获得结果感兴趣，并且企业用户最关心的问题还包括可用性、可靠性和其他“能力”,这些都不是您最关心的问题——您最终会实现的。在本教程中，您将在Azure门户中交互创建一些Azure ML资源，然后通过VS-Code或命令行工具的组合进行开发。我假设你很容易编程和在命令行工作。根据我的经验，我将特别针对我们的任务，将您的Python应用程序迁移到云中运行，这是我强烈的个人偏见，以避免常见的陷阱。</p><p id="04f1" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">为什么要将代码转移到云中的机器上呢？为了规模。Azure有一些巨大的机器，巨大的网络带宽，和几乎无限的内存。令人惊讶的是，计算量大的应用程序在单台机器上可能比在集群上更快，并且更容易设置。当然，如果你的目标是运行数十亿字节的数据，或者训练十亿节点的神经网络，有合适的虚拟机集群解决方案。无论是通过集群还是大型虚拟机，它对于任何大规模问题都是一个巨大的福音，不仅是传统的机器学习应用程序，而且对于那些大规模的MCMC任务或GPU上的培训。</p><h1 id="bb9b" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">云资源</h1><p id="7d1f" class="pw-post-body-paragraph ky kz iq lb b lc ne jr le lf nf ju lh lv ng lk ll lw nh lo lp lx ni ls lt lu ij bi translated">云服务本质上由三种资源组成:<em class="la">计算、存储和网络。</em>您的应用程序资源集合被指定为一个“资源组”——一个用于创建、跟踪和拆除云应用程序的逻辑结构。你的资源组需要包括一个<em class="la">机器学习工作区</em>，一个方便的资源集合，它本身就是一种资源。在Azure的图形界面中找到它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/298c1674b0f5e53dff7616fd3d36755d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*gpgG0w-99WEQFE7u1dUAHw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="23a0" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">继续创建一个。门户提示非常友好，可以为其存储帐户和其他帐户创建新的资源组和新的组件资源。采用默认值，继续创建新的组件资源。只需记住工作区名称，并对您在应用程序中创建的其他资源使用相同的资源组名称。如果你犯了一个错误，很容易删除整个资源组并重新开始。</p><h2 id="9ba3" class="nk mn iq bd mo nl nm dn ms nn no dp mw lv np nq my lw nr ns na lx nt nu nc nv bi translated">计算</h2><p id="0986" class="pw-post-body-paragraph ky kz iq lb b lc ne jr le lf nf ju lh lv ng lk ll lw nh lo lp lx ni ls lt lu ij bi translated">简而言之，<em class="la">计算</em>由虚拟机(VM)组成，从微小的VM映像到具有巨大RAM和GPU的VM，比您桌面上的任何东西都大。工作区不附带任何默认计算资源，因为它允许您选择创建单个虚拟机、虚拟机计算集群或使用现有计算资源。对于本教程，您需要通过选择满足您需求的大小来创建一个“计算实例”——单个虚拟机。这些在Azure Machine Learning Studio (AML)中创建的Ubuntu虚拟机是受管理的虚拟机——已经安装了几乎所有需要的软件，并为您管理了更新。这减轻了您设置和配置虚拟机的负担。或者，Azure仍然提供遗留的“数据科学虚拟机”，这些虚拟机带有大量预安装的ML工具，但除了一些特殊目的，(如运行Windows OS) AML计算实例可以取代它们。</p><h2 id="5a6b" class="nk mn iq bd mo nl nm dn ms nn no dp mw lv np nq my lw nr ns na lx nt nu nc nv bi translated">储存；储备</h2><p id="5798" class="pw-post-body-paragraph ky kz iq lb b lc ne jr le lf nf ju lh lv ng lk ll lw nh lo lp lx ni ls lt lu ij bi translated">存储也可以规模化。但与桌面不同的是，主存储不是运行在虚拟机本地磁盘上的文件系统，而是具有访问API的独立组件。一个原因是存储是永久的，但虚拟机来来去去；当你需要完成工作的时候启动它们，然后为了省钱把它们拆掉。存储由“blobs”组成，具有持久性和冗余性的强保证。本教程的重点是演示如何集成现有的Azure存储，这些存储可能已经加载了您的数据。</p><h2 id="27d0" class="nk mn iq bd mo nl nm dn ms nn no dp mw lv np nq my lw nr ns na lx nt nu nc nv bi translated">建立工作关系网</h2><p id="f7e7" class="pw-post-body-paragraph ky kz iq lb b lc ne jr le lf nf ju lh lv ng lk ll lw nh lo lp lx ni ls lt lu ij bi translated">网络服务连接<em class="la">计算</em>和<em class="la">存储。</em>此外，云中的网络由软件定义的虚拟网络组成，这些网络连接到您的本地“内部”设备和云资源。借助云资源，网络将组件与本地子网、安全服务(防火墙)和面向公众的IP地址结合在一起。对于连接了存储的虚拟机的简单情况，关联的网络看起来像您的家庭网络，具有公共IP地址和子网中的NAT地址。您不需要了解太多，因为它已经在您创建VM时为您设置好了。我们会谈到这一点。但是应该从存储开始，并将数据存储在存储上。</p><h2 id="1466" class="nk mn iq bd mo nl nm dn ms nn no dp mw lv np nq my lw nr ns na lx nt nu nc nv bi translated">设置您的开发环境</h2><p id="1f18" class="pw-post-body-paragraph ky kz iq lb b lc ne jr le lf nf ju lh lv ng lk ll lw nh lo lp lx ni ls lt lu ij bi translated">在云中运行代码所需的工具有:</p><ul class=""><li id="a93f" class="nw nx iq lb b lc ld lf lg lv ny lw nz lx oa lu ob oc od oe bi translated">VS-Code——微软的开源IDE</li><li id="d3c3" class="nw nx iq lb b lc of lf og lv oh lw oi lx oj lu ob oc od oe bi translated">git:开源版本控制</li></ul><p id="6e70" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">和两个Azure资源:</p><ul class=""><li id="7cf6" class="nw nx iq lb b lc ld lf lg lv ny lw nz lx oa lu ob oc od oe bi translated">Azure存储</li><li id="c5be" class="nw nx iq lb b lc of lf og lv oh lw oi lx oj lu ob oc od oe bi translated">包含计算实例的AML工作区。</li></ul><p id="a695" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">标题插图显示了这些是如何拼凑在一起的。AML工作区汇集了一组集成的资源:您只需要两个:受管虚拟机和存储代码的附加存储。此外，你将设置一个Azure存储帐户，或使用现有的数据帐户。这不是真正必要的，但学习管理存储是很好的体验。资源设置和管理可以完全在门户中完成。至于代码，你用<code class="fe mi mj mk ml b">git</code>把它移动到AML版本。然后运行编辑-运行-调试循环，并在本地运行VS代码的两个副本。<em class="la">神奇的是，AML计算实例附加了一个副本，看起来就像是另一个本地实例。</em></p><p id="0b82" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">我的重点是使用VS-Code进行代码开发，以及它的两个扩展，Azure ML扩展和Azure ML-Remote扩展。安装来自VS-Code“活动栏”的扩展，可以在最左边的一列中找到，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/dd34e0c99882999e3011227186c3aea3.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*6E9xP0UgCFSW37Zm8Lt0UA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="0334" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">使用扩展图标安装两个VS-Code扩展。</p><p id="3929" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">Azure图标将用于启动远程会话。</p><p id="271d" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">作为一个开源项目，改进和扩展VS-Code的势头值得注意，正如其专用博客<a class="ae mh" href="https://devblogs.microsoft.com/python/python-in-visual-studio-code-july-2021-release/" rel="noopener ugc nofollow" target="_blank">所说。</a>核心Python开发人员可能更喜欢其他专用的Python工具，如<em class="la"> PyCharm </em>或<em class="la"> Spyder </em>，但是在本教程中，我使用微软的<a class="ae mh" href="https://code.visualstudio.com/download" rel="noopener ugc nofollow" target="_blank"> VS-Code </a>来实现优雅的项目管理、符号调试和扩展，它们与Azure完美集成。由于这些原因，我更喜欢它，而不是微软遗留的Visual Studio IDE工具。</p><p id="003c" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated"><em class="la">所以，如果你还没有VS-Code，就安装它。</em></p><p id="c3ef" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">除了你的Azure订阅、<code class="fe mi mj mk ml b">git</code>和VS-Code之外，你还需要<code class="fe mi mj mk ml b">az</code>命令行包，称为<a class="ae mh" href="https://docs.microsoft.com/en-us/cli/azure/" rel="noopener ugc nofollow" target="_blank"> Azure命令行界面(Azure CLI) </a>，以及它对Azure机器学习的扩展，它可以在Windows或Unix shells上等效地工作。网页上有它的安装程序。</p><p id="740b" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated"><code class="fe mi mj mk ml b">az</code>包管理着每一个Azure资源，它的<a class="ae mh" href="https://docs.microsoft.com/en-us/cli/azure/reference-index?view=azure-cli-latest" rel="noopener ugc nofollow" target="_blank"> az参考页</a>是Azure的完整目录。它被实现为Azure的RESTful管理API的包装器。你很少需要直接引用它，因为VS-Code Extensions会为你调用<code class="fe mi mj mk ml b">az</code>，并在它丢失时提供安装。并且门户公开相同的功能。但是每一个都是命令行工具的语法糖，你应该知道这两个。</p><p id="11c8" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">从长远来看，了解<code class="fe mi mj mk ml b">az</code>的另一个原因是为了编写自动化管理步骤的脚本。每当您在门户中创建一个资源时，它都会为您提供下载“模板”的选项。模板只是你创建的资源在JSON中的描述。使用<code class="fe mi mj mk ml b">az</code>你可以调用ARM(Azure资源管理器)来自动创建它。ARM是一种用于资源管理的声明性语言，它将资源创建简化为一个命令。详细信息请查看<code class="fe mi mj mk ml b">az deployment group create...</code>命令。</p><p id="092e" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">az扩展中特定于Azure Machine Learning (AML)的命令需要单独安装。第一次使用<code class="fe mi mj mk ml b">az ml</code>时<code class="fe mi mj mk ml b">az</code>会提示您这样做。</p><p id="8aa9" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">不要把az CLI和具有重叠功能的Azure python SDK混淆。下面是一个使用SDK以编程方式读取存储的示例。您可以用az CLI做的大多数事情也在python <code class="fe mi mj mk ml b">azureml</code>包中作为SDK公开。</p><p id="3478" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">最后，为了检查<code class="fe mi mj mk ml b">az</code>是否正常工作，请尝试验证您的本地机器和您的云订阅。当你跑步的时候跟着指示走</p><pre class="kg kh ki kj gt ol ml om on aw oo bi"><span id="531c" class="nk mn iq ml b gy op oq l or os">$ az login<br/></span></pre><p id="0d21" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">你在开始的时候做一次。后续的<code class="fe mi mj mk ml b">az</code>命令将不需要认证。</p><h1 id="9f8c" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">应用程序</h1><p id="5c91" class="pw-post-body-paragraph ky kz iq lb b lc ne jr le lf nf ju lh lv ng lk ll lw nh lo lp lx ni ls lt lu ij bi translated">好了，您已经得到了代码和数据，并安装了工具。我们开始吧！假设您已经创建了一个新的反洗钱工作区，步骤如下</p><ol class=""><li id="1166" class="nw nx iq lb b lc ld lf lg lv ny lw nz lx oa lu ot oc od oe bi translated">设置存储，</li><li id="cc2e" class="nw nx iq lb b lc of lf og lv oh lw oi lx oj lu ot oc od oe bi translated">准备你的代码，</li><li id="d311" class="nw nx iq lb b lc of lf og lv oh lw oi lx oj lu ot oc od oe bi translated">创建AML计算实例，并</li><li id="6c72" class="nw nx iq lb b lc of lf og lv oh lw oi lx oj lu ot oc od oe bi translated">启动远程VS-Code会话。</li></ol><p id="6a8d" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">当你完成你的代码时，一个选择是通过将它包装在一个“RESTful”API调用中作为一个<em class="la"> Azure Function应用程序来部署它。</em>这将您的应用程序公开为一个“端点”,可以从Web上调用。构建Azure函数可能是另一个教程的主题。</p><p id="add5" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated"><strong class="lb ir"> <em class="la">第一件事——准备你的资料。把你的数据保存在云中是值得的。</em> </strong>存储，比如Azure blob存储便宜，速度快，容量看似无限；每月每千兆字节的费用约为2美分，移动数据也有少量费用。出于成本和网络带宽的原因，您最好将数据一次性转移到云中，而不是在云中针对本地存储的数据运行代码。简而言之，您将创建一个存储帐户，然后创建一个“Azure Data Lake Generation 2”(ADL 2)blob存储的<em class="la">容器</em>——相当于一个分层文件系统。blob存储有许多替代方案，甚至有更多的高级选项可以在Azure上运行几乎任何你可以想象的数据库软件，但是对于你打算运行的批处理计算，应该从ADL2 blob存储开始。</p><p id="2399" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">Blob存储显示为以分层目录结构组织的文件。顾名思义，它将数据视为字节块，与文件格式无关。如果你愿意的话，可以使用<code class="fe mi mj mk ml b">csv</code>文件，但是我建议你使用像<code class="fe mi mj mk ml b">parquet</code>这样的二进制格式，因为它的压缩、速度和对定义的数据类型的理解。</p><p id="1863" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">也许你的数据已经在云端了。如果创建存储的最简单方法不是使用门户—“创建资源”，那么请按照提示进行操作。它不需要与您的工作区在同一个资源组中，选择权在您。您需要做出的一个关键选择是选择“第二代数据湖存储”:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/6b1d85908176525cf9bcabf1bd828ea3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YvzQ3n_BMoCExuW0JHy9YQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="a2e2" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">本质上，这是一种blob存储，它取代了构建在平面文件系统上的原始blob存储。注意“Azure Data Lake Gen 1”存储是<em class="la">而不是</em> blob存储，原因不值得深入讨论，我将忽略它。</p><p id="be25" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">您可以使用此门户页面以交互方式上传数据。这里有一个名为“data-od”的容器的例子从顶级存储帐户页面单击几下，即可导航到存储容器和路径。它包含文件和目录操作命令，很像桌面的“文件浏览器”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/4173aafd266f78327ff21f7933eac37d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QQDH5L-GVcubhaQxrivQDw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="02b4" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">稍后我将展示如何以编程方式读写存储数据。</p><p id="d3d8" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">在本教程的精益风格中，我只包括了构成Azure ML的拜占庭式的特性集合的绝对最小值。Azure ML有自己的数据存储，或者更准确地说，将现有的Azure存储组件包装为“数据集”，向你的表添加元数据，并为你验证存储，这很好。但是，如果您仔细观察，底层存储资源是可以访问的。本教程——围绕这些高级特性的最终运行——即使只做一次，也是理解Azure ML存储是如何构成的良好实践。</p><p id="2d29" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated"><strong class="lb ir"> <em class="la">准备你的代码</em> </strong></p><p id="c81f" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">与常识相反，我建议你一旦通过了最初的探索性分析，就应该将笔记本代码转换成Python模块。如果你坚持使用笔记本，虚拟机就很好:Azure ML工作空间和Spark clusters都允许你运行笔记本，但是你在管理、调试、测试和部署代码方面会受到限制。笔记本电脑非常适合探索您的数据，但是当开发代码供后续使用时，人们会厌倦它们的局限性:</p><ul class=""><li id="6002" class="nw nx iq lb b lc ld lf lg lv ny lw nz lx oa lu ob oc od oe bi translated">他们和<code class="fe mi mj mk ml b">git</code>玩的不好。如果版本之间存在合并冲突，区分它们并编辑冲突是一件非常头疼的事情。</li><li id="220d" class="nw nx iq lb b lc of lf og lv oh lw oi lx oj lu ob oc od oe bi translated">他们得到巨大的曾经填满的数据和图形。要么在提交之前去掉它们的输出，使它们易于管理。或者将它们转换成html，作为一个可共享的、自文档化的文档。</li><li id="ba17" class="nw nx iq lb b lc of lf og lv oh lw oi lx oj lu ob oc od oe bi translated">随着代码的增长，模块化、可调试的面向对象代码的所有优点都消失了。老实说，VS-Code中的符号调试器值得进行转换，更不用说在单独的模块中按功能组织代码的可管理性了。</li><li id="c249" class="nw nx iq lb b lc of lf og lv oh lw oi lx oj lu ob oc od oe bi translated">Python模块鼓励你构建测试，这是可靠扩展、重用、共享和生产代码的必要实践。</li></ul><p id="aab3" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">因此，将笔记本电脑归入运行一次的实验，并将代码块升级为易于测试和调试的独立文件。</p><p id="4bd9" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">Jupyter通过命令行从笔记本中为您生成一个<code class="fe mi mj mk ml b">.py</code>文件</p><pre class="kg kh ki kj gt ol ml om on aw oo bi"><span id="58df" class="nk mn iq ml b gy op oq l or os">$ jupyter nbconvert --to-py &lt;your notebook&gt;.ipynb</span></pre><p id="34fe" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated"><strong class="lb ir"> <em class="la">依靠</em> </strong> <code class="fe mi mj mk ml b"><strong class="lb ir"><em class="la">git</em></strong></code></p><p id="e528" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">值得真正的敬意。随着你的项目规模的扩大和你与他人的合作——使你对你的组织有价值的东西—<code class="fe mi mj mk ml b">git</code>是你工作的舒适之家。任何一个软件工程师都知道，如果你“破坏了构建”,只需几个命令就能恢复到工作状态，这是从你的同事的愤怒中得到的最大安慰和喘息。拥有一段有记载的历史也是你给后代的礼物。可以说,<code class="fe mi mj mk ml b">git</code>的复杂性让层次文件系统的复杂性相形见绌，但是每次走出<code class="fe mi mj mk ml b">git</code>舒适区时，依赖堆栈溢出并不可耻。相信我，有一个<code class="fe mi mj mk ml b">git</code>指挥部可以完成任何可以想象的任务。</p><p id="9fc0" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">假设您的代码在您选择的<code class="fe mi mj mk ml b">git</code>库中。<code class="fe mi mj mk ml b">git</code>将成为您在云与本地文件系统之间来回移动代码的工具。</p><p id="556d" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated"><strong class="lb ir"> <em class="la">设置云资源Azure机器学习(AML)工作区</em> </strong></p><p id="034d" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">我假设您已经创建了一个AML工作区。导航到工作区后，有一个按钮可以启动网络版:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/bae10e20e3e816aef726069ba0432ab1.png" data-original-src="https://miro.medium.com/v2/resize:fit:274/format:webp/1*K8zyF30Qs4U5oFG7r50wkw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="f097" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated"><strong class="lb ir"> <em class="la">巡视工作区</em> </strong></p><p id="dbfd" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">Workspace在一个地方收集了大量与机器学习相关的功能。我将只涉及本教程使用的几个。然而，使用VS-Code的好处是你不需要到这里来:你需要在Studio中做的一切都可以从Azure Remote扩展中完成。</p><ul class=""><li id="7df7" class="nw nx iq lb b lc ld lf lg lv ny lw nz lx oa lu ob oc od oe bi translated"><strong class="lb ir">计算实例</strong>进入工作区窗格后，在其左侧菜单上有一个“计算”菜单项，它会将您带到一个面板，用于创建新的计算实例。创建一个。您有多种尺寸可供选择，比如64核和128G内存？还是用4 NVIDA Teslas？否则，接受默认值也没关系。当实例不被使用时，您可以启动和停止实例以节省资金。</li><li id="4145" class="nw nx iq lb b lc of lf og lv oh lw oi lx oj lu ob oc od oe bi translated"><strong class="lb ir">代码编辑</strong>在“笔记本”(一个误称)下面，有一个附加到工作区的文件系统视图。它实际上是一个基于web的IDE，用于在必要时编辑和运行代码。它可以包括笔记本、普通python文件、本地git存储库等等。该文件系统隐藏在工作区的关联AML存储中，因此即使删除了计算实例，该文件系统仍然存在。您创建的任何新计算实例都将共享该文件系统。</li><li id="b744" class="nw nx iq lb b lc of lf og lv oh lw oi lx oj lu ob oc od oe bi translated"><strong class="lb ir"> AML存储</strong>Studio不会透露其连接的AML存储帐户，因此可以将其视为存储远程文件系统和其他工件的黑匣子。现在使用外部Azure存储——为什么？所以你看到了如何通过存储与其他Azure服务集成。你们中最勇敢的人可以使用门户来浏览工作区附带的默认存储。可以通过名称找到存储帐户，名称以工作区名称的任意版本开头，后跟一个随机字符串。</li></ul><p id="a737" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">请记住，好的一面是，您需要的所有工作区功能都通过VS-Code扩展暴露在您的桌面上。</p><h1 id="4fcd" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">开发周期</h1><p id="15e6" class="pw-post-body-paragraph ky kz iq lb b lc ne jr le lf nf ju lh lv ng lk ll lw nh lo lp lx ni ls lt lu ij bi translated">让我们进入有趣的部分——这些组件如何协同工作并提供更好的体验。值得注意的是，当远程使用云资源时，VS-Code的本地编辑-运行-调试循环几乎是不可区分的。此外，本地和远程VS-Code实例同时在您的桌面上运行，这比运行远程桌面服务器(“rdp”)或尝试完全在浏览器中远程工作要流畅得多。多酷啊！</p><p id="ff16" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">让我们来看一下这些步骤。</p><h2 id="a9dc" class="nk mn iq bd mo nl nm dn ms nn no dp mw lv np nq my lw nr ns na lx nt nu nc nv bi translated">本地运行</h2><p id="b7a9" class="pw-post-body-paragraph ky kz iq lb b lc ne jr le lf nf ju lh lv ng lk ll lw nh lo lp lx ni ls lt lu ij bi translated">对云的认证由VS-Code的Azure ML扩展管理；一旦您启动并运行并连接到您的工作区，您将无需再次进行身份验证。</p><ul class=""><li id="b026" class="nw nx iq lb b lc ld lf lg lv ny lw nz lx oa lu ob oc od oe bi translated">在VS-Code的<code class="fe mi mj mk ml b">.vscode</code>文件夹所在的<code class="fe mi mj mk ml b">git</code>存储库中的本地目录中启动VS-Code。(那里的<code class="fe mi mj mk ml b">launch.json</code>文件为每个文件配置运行调试会话。学会给它添加配置。)</li><li id="cba7" class="nw nx iq lb b lc of lf og lv oh lw oi lx oj lu ob oc od oe bi translated">一旦您对代码在本地运行感到满意，就使用<code class="fe mi mj mk ml b">git</code>提交并推送它。如果您提交笔记本，最好先“清理”它们的输出，以保持它们可管理的大小。</li><li id="6704" class="nw nx iq lb b lc of lf og lv oh lw oi lx oj lu ob oc od oe bi translated">从Azure ML扩展启动Azure ML计算实例。首先使用VS-Code Activity菜单中的Azure图标(见上文)连接到您的工作区。<strong class="lb ir">您可以从隐藏良好的右键菜单项“连接到计算实例”中的本地VS-Code实例生成一个远程附加的VS-Code实例:</strong></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/9a4ff894185f525de266b5e7a2715c9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:770/format:webp/1*KVDX7Km7BaVdTGOfSx9l-A.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="1401" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">这将启动VM，并在您的桌面上生成第二个VS-Code实例，连接到您的远程工作区文件系统！</p><h2 id="fb0d" class="nk mn iq bd mo nl nm dn ms nn no dp mw lv np nq my lw nr ns na lx nt nu nc nv bi translated">远程运行</h2><p id="88f0" class="pw-post-body-paragraph ky kz iq lb b lc ne jr le lf nf ju lh lv ng lk ll lw nh lo lp lx ni ls lt lu ij bi translated">请注意，出现在远程连接VS-Code终端窗口中的终端实例正在您的虚拟机上运行！不需要为“putty”或<code class="fe mi mj mk ml b">ssh</code>设置一个公钥来打开一个远程shell。类似地，VS-Code中可见的文件系统是工作区文件系统。多酷啊！</p><ul class=""><li id="61a8" class="nw nx iq lb b lc ld lf lg lv ny lw nz lx oa lu ob oc od oe bi translated">第一件事当然是通过使用<code class="fe mi mj mk ml b">git</code>获取您最近的更改，使工作空间文件系统中的存储库保持最新。然后就像平常一样编辑-运行-调试，但是所有的计算和文件访问都在云中。</li><li id="58bc" class="nw nx iq lb b lc of lf og lv oh lw oi lx oj lu ob oc od oe bi translated">当两个VS-Code实例都在本地机器上运行时，您可以同时在本地和远程版本之间来回工作，用<code class="fe mi mj mk ml b">git</code>传输代码变更。</li><li id="f883" class="nw nx iq lb b lc of lf og lv oh lw oi lx oj lu ob oc od oe bi translated">在远程实例中，Azure ML扩展菜单自然会被禁用。把一个“远程”衍生到一个“远程”是没有意义的。</li><li id="3206" class="nw nx iq lb b lc of lf og lv oh lw oi lx oj lu ob oc od oe bi translated">完成后，关闭虚拟机以节省资金。您的远程文件系统保存在存储中，无需您做任何事情。</li></ul><p id="4f15" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">如果您不愿意用<code class="fe mi mj mk ml b">git</code>移动文件(您忘记了什么，或者您需要移动一个机密文件)，请注意VS-Code的远程附加实例可以查看云或本地文件系统，使其成为在它们之间移动文件的“后门”。特意使用<code class="fe mi mj mk ml b">git</code>来保持两个文件系统中代码的一致性，所以要谨慎使用这个后门。</p><p id="cd20" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">或者，可以在门户中调用远程会话。尝试从AML Studio笔记本窗格打开本地机器上的远程VS-Code会话。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/0b62b0122148cacff92fb582ca1981c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*09VI_BHDvpDNnuwH54-viA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="02a6" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">如果您的计算实例正在运行，您可以启动VS-Code的一个<em class="la">本地</em>实例，该实例远程连接到工作区的<em class="la">云</em>文件系统(不仅仅是在门户编辑器中打开的文件)和一个运行在计算实例上的shell。但是我想你会发现直接从你的本地VS-Code实例产生你的远程会话要比在门户的Azure ML页面中的Studio窗格中启动它更容易。</p><h1 id="42ac" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">编程adl2文件访问</h1><p id="3fc5" class="pw-post-body-paragraph ky kz iq lb b lc ne jr le lf nf ju lh lv ng lk ll lw nh lo lp lx ni ls lt lu ij bi translated">在云中运行代码需要做的一个改变是替换本地文件IO。对代码的主要修改是将本地文件系统IO调用替换为对用于Blob存储的python SDK的调用。这既适用于代码在本地运行的情况，也适用于当您将应用程序切换到云中处理数据时在VM中运行的情况。</p><p id="17ce" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">有几种方法可以访问虚拟机的文件。这里有一种使用Azure python SDK的方法，它只需要很少的依赖就可以工作，尽管要写很多代码。将这些打包成一个模块，然后将你的努力投入到手边的计算任务中。python SDK在不同的包中定义了许多类。这个类<code class="fe mi mj mk ml b">DataLakeServiceClient</code>是特定于adl2 blob存储的。在本地你需要得到这些包裹，</p><pre class="kg kh ki kj gt ol ml om on aw oo bi"><span id="28c7" class="nk mn iq ml b gy op oq l or os">pip install azure-storage-file-datalake <br/>pip install pyarrow</span></pre><p id="b85a" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">熊猫需要“pyarrow”。Apache project“arrow”是一种内存数据格式，支持多种语言。</p><p id="54be" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">在这个代码片段中，第一个函数返回一个到存储的连接。第二个函数定位文件，以字节字符串的形式检索文件内容，然后将其转换为可以作为Pandas数据帧读取的file对象。无论您引用您创建的Azure ML workspace附带的默认存储，还是Azure cloud其他部分中的一些预先存在的存储，这种方法都是一样的。详情见<a class="ae mh" href="https://docs.microsoft.com/en-us/azure/storage/blobs/data-lake-storage-directory-file-acl-python" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/azure/storage/blobs/data-lake-storage-directory-file-ACL-python</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oz"><img src="../Images/09ea9598f03af5eddb00b97e343a59f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NLAECirR-f7P7oCLChIguA.png"/></div></div></figure><p id="4ef5" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">您可以使用<code class="fe mi mj mk ml b">__name__ == '__main__'</code>部分来嵌入测试代码。当您导入文件时，它不会运行。但是当您开发使用这个文件的其他脚本时，您可以用一个已知blob的路径来调用这个文件，以测试它没有被破坏。</p><p id="a7d2" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">在存储帐户“访问密钥”窗格中，<code class="fe mi mj mk ml b">DataLakeServiceClient</code>使用从门户中恢复的“帐户密钥”字符串对Azure存储进行身份验证。帐户密钥是88个字符的随机字符串，用作您的存储帐户的“密码”。从该窗格复制它:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pa"><img src="../Images/15711daa7d550f806c6f7564f11fe9f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bvu9ODfpnBp7Tlm-m6IYUg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="33b3" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">因为它是机密的，所以它不应该嵌入到代码中，而是隐藏在另一个文件secrets.py中，该文件位于只包含全局变量赋值的本地目录中，在本例中是<code class="fe mi mj mk ml b">AZURE_STORAGE_ACCOUNT</code>、<code class="fe mi mj mk ml b">STORAGE_ACCOUNT_KEY</code>和<code class="fe mi mj mk ml b">CONTAINER</code>。</p><p id="be8d" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">将文件名放在您的<code class="fe mi mj mk ml b">.gitignore</code>文件中，因为这是您不想共享的内容。这是一种加强安全性的简单方法，还有几种更好但更复杂的替代方法。你可以将秘密保存在环境变量中，或者更好地使用Azure“密钥库”来存储秘密，或者将秘密管理留给Azure ML。如果您在单独开发代码时小心地管理它们，那么授予帐户密钥是一个简单的解决方案，但是在为企业系统构建代码时，您可能希望使用按钮式身份验证。</p><p id="fbc5" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">类似地，有更多的“代码精简”方法来检索blobs。如前所述，Azure ML有自己的瘦包装器和一个为工作区创建的默认存储帐户，在那里可以存储数据。但正如我所说，你会想知道如何连接到任何Azure数据，而不仅仅是AML管理的数据。客气地说，AML“简化”数据科学基础云服务的倾向并不总是让事情变得更简单，而且当“简单”的服务不符合您的要求时，它可能会隐藏导致混乱的事实。</p><h1 id="e7f5" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">其他服务、修饰和后续步骤</h1><p id="b67d" class="pw-post-body-paragraph ky kz iq lb b lc ne jr le lf nf ju lh lv ng lk ll lw nh lo lp lx ni ls lt lu ij bi translated">对于受益于更多处理能力的计算任务，云为分布式计算提供了集群。但是，在跳到分布式处理解决方案的集群(例如<a class="ae mh" href="https://dask.org/" rel="noopener ugc nofollow" target="_blank"> dask </a>)之前，请考虑python的多处理模块，它提供了一种利用多核机器的简单方法，并避开了python的单线程架构。对于令人尴尬的并行任务，使用模块在多个数据集上运行相同的代码，这样每个任务都在自己的进程中运行，并返回父进程接收的结果。模块导入是</p><p id="93ea" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated"><code class="fe mi mj mk ml b">from multiprocessing import Process, Manager</code></p><p id="2401" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated"><code class="fe mi mj mk ml b">Process</code>类为每个实例生成一个新的操作系统进程，<code class="fe mi mj mk ml b">Manager</code>类收集实例的结果。</p><p id="9a9c" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">至于超越一台机器，没有限制。Apache Spark clusters无缝集成了Python、R、SQL和Scala中的编码，通过为数据科学量身定制的工具，与庞大的数据集交互工作。Azure上的Spark有几种风格，包括第三方数据块，以及Spark和MSSQL集群的以数据库为中心的集成，名为“Synapse”。</p><h2 id="015b" class="nk mn iq bd mo nl nm dn ms nn no dp mw lv np nq my lw nr ns na lx nt nu nc nv bi translated">更多机器学习功能</h2><p id="0202" class="pw-post-body-paragraph ky kz iq lb b lc ne jr le lf nf ju lh lv ng lk ll lw nh lo lp lx ni ls lt lu ij bi translated">本文的重点是Azure ML中可用的扩展机会，但是我提到Azure ML的ML特性了吗？除了将开发升级到一定规模的乐趣之外，你已经开始学习使用Azure的数据科学工具。为了跟踪和比较多次运行的结果，AzureML集成了<code class="fe mi mj mk ml b">MLFlow</code>。见<a class="ae mh" href="https://medium.com/swlh/how-to-setup-mlflow-on-azure-5ba67c178e7d" rel="noopener">这篇文章。</a>为了管理数据，AML“数据集”用元数据修饰数据文件。甚至还有一个类似于python SDK的R 的<a class="ae mh" href="https://github.com/Azure/azureml-sdk-for-r" rel="noopener ugc nofollow" target="_blank"> SDK。有用于实验、运行、环境和模型管理的对象。“AutoML”自动监督学习模型的选择和调整。这只是Azure ML如何将服务重新包装为机器学习任务的“一站式”商店的几个例子。</a></p><h1 id="a91a" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">Azure功能部署及其他</h1><p id="ed4a" class="pw-post-body-paragraph ky kz iq lb b lc ne jr le lf nf ju lh lv ng lk ll lw nh lo lp lx ni ls lt lu ij bi translated">Azure不仅可以用于大规模运行实验，还可以围绕你的代码构建应用。云应用由运行在独立虚拟机上的网络服务集合组成。为了方便起见，我们避免在“基础架构”级别工作，而转向“托管服务”，在这种情况下，虚拟机不公开，只公开接口，就像我们对托管计算实例所做的那样。通过将代码作为RESTful http端点发布到云中，您可以对代码做同样的事情。对于您的客户端来说，它看起来像一个URL，只是它返回的不是一个网页，而是您的计算结果。构建这个的一个基本方法是将你的代码封装在一个Azure函数中。一个<a class="ae mh" href="https://docs.microsoft.com/en-us/azure/azure-functions/create-first-function-vs-code-python" rel="noopener ugc nofollow" target="_blank"> Azure函数</a>通常在几秒钟内运行，并且不会从一个调用到下一个调用保存状态。(保存状态是blob存储的用武之地，记得吗？)实现http端点有几种更有特色的替代方案，例如基于Docker容器，当然有些可以从Azure ML Workspace获得，但都作为托管服务工作，使实现独立于它所构建的平台“基础设施”。如何使用AFs值得一个单独的教程，但为了让你开始，加载Azure函数扩展到VS-Code并浏览它的特性。还记得我说过所有事情的本地管理都带有<code class="fe mi mj mk ml b">az</code>吗？我没有告诉你全部真相。对于AF，你需要为以<code class="fe mi mj mk ml b">az func</code>开头的命令单独安装<a class="ae mh" href="https://github.com/Azure/azure-functions-core-tools" rel="noopener ugc nofollow" target="_blank"> Azure Functions核心工具</a>。当你安装VS-Code Azure Functions扩展时，VS-Code会提示你进行安装。</p><p id="87fb" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">既然你不会因为写代码而放弃，你可以继续与云服务的所有部分集成:数据库、虚拟主机、高级人工智能和安全性——就像你最喜欢的在线零售网站在构建企业Azure应用程序时可能已经做的那样。</p><h2 id="d20c" class="nk mn iq bd mo nl nm dn ms nn no dp mw lv np nq my lw nr ns na lx nt nu nc nv bi translated">VS-Code远程扩展源代码</h2><p id="c2c3" class="pw-post-body-paragraph ky kz iq lb b lc ne jr le lf nf ju lh lv ng lk ll lw nh lo lp lx ni ls lt lu ij bi translated"><a class="ae mh" href="https://github.com/microsoft/vscode-tools-for-ai" rel="noopener ugc nofollow" target="_blank">https://github.com/microsoft/vscode-tools-for-ai</a><br/><a class="ae mh" href="https://github.com/MicrosoftDocs/azure-docs/blob/master/articles/machine-learning/how-to-manage-resources-vscode.md" rel="noopener ugc nofollow" target="_blank">https://github . com/Microsoft docs/azure-docs/blob/master/articles/machine-learning/how-to-management-resources-vs code . MD</a></p><h2 id="4b97" class="nk mn iq bd mo nl nm dn ms nn no dp mw lv np nq my lw nr ns na lx nt nu nc nv bi translated">Python SDK参考</h2><p id="ad64" class="pw-post-body-paragraph ky kz iq lb b lc ne jr le lf nf ju lh lv ng lk ll lw nh lo lp lx ni ls lt lu ij bi translated"><a class="ae mh" href="https://azuresdkdocs.blob.core.windows.net/$web/python/azure-storage-file-datalake/12.0.0b7/azure.storage.filedatalake.html?highlight=datalakefileclient#azure.storage.filedatalake.DataLakeFileClient" rel="noopener ugc nofollow" target="_blank">https://azuresdkdocs . blob . core . windows . net/$ web/python/azure-storage-file-data lake/12 . 0 . 0 B7/azure . storage . file data lake . html？highlight = datalakefileclient # azure . storage . filedatalake . datalakefileclient</a></p></div><div class="ab cl pb pc hu pd" role="separator"><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg"/></div><div class="ij ik il im in"><p id="cadf" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated"><em class="la">最初发布于</em><a class="ae mh" href="https://techcommunity.microsoft.com/t5/ai-customer-engineering-team/simply-just-python-in-the-cloud/ba-p/2591940" rel="noopener ugc nofollow" target="_blank">https://tech community . Microsoft . com/T5/ai-customer-engineering-team/simple-just-python-in-the-cloud/ba-p/2591940</a></p></div></div>    
</body>
</html>