<html>
<head>
<title>Essential Big Data, Data Scientist Skill: How to Install JARs for an AWS EMR Cluster</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基本的大数据、数据科学家技能:如何为AWS EMR集群安装jar</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/essential-big-data-data-scientist-skill-how-to-install-jars-for-an-aws-emr-cluster-5a9bdb7c3dab?source=collection_archive---------29-----------------------#2021-05-25">https://towardsdatascience.com/essential-big-data-data-scientist-skill-how-to-install-jars-for-an-aws-emr-cluster-5a9bdb7c3dab?source=collection_archive---------29-----------------------#2021-05-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="7cda" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">基本数据科学技能</h2><div class=""/><div class=""><h2 id="a57a" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated"><em class="kr">演示从哪里下载jar以及如何将它们安装在AWS EMR集群上，以便从EMR笔记本上访问</em></h2></div><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ks"><img src="../Images/441fbf9e4110a98cef927b0b7b92c1c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1eRhpO0DD0vEWMrh-neO0A.jpeg"/></div></div><p class="le lf gj gh gi lg lh bd b be z dk translated"><a class="ae li" href="https://unsplash.com/@jeshoots?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">JESHOOTS.COM</a>在<a class="ae li" href="https://unsplash.com/s/photos/frustrated-computer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="2663" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">我还没有看到关于如何将JAR文件放到EMR集群的每个工作节点上的简单而全面的指南，然而这是一个非常重要的、普遍的需求。本文解决了这些需求。以下是我从个人奋斗和无数不同的谷歌结果、堆栈溢出帖子和官方AWS文档中总结的要点。</p><h1 id="f64f" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">背景</h1><p id="301c" class="pw-post-body-paragraph lj lk it ll b lm mx kd lo lp my kg lr ls mz lu lv lw na ly lz ma nb mc md me im bi translated">GitHub上托管的Scala库通常有安装指令，这些指令依赖于使用名为Maven的程序从源代码构建JAR文件。<strong class="ll jd">但是作为一个数据科学家，我只想要JAR文件</strong>。上述说明也缺乏关于如何在集群环境的数百个工作节点上安装这个JAR的实际指导。</p><p id="bc3d" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">有些文章有很棒的代码，但是依赖于您的集群/节点可以访问互联网——对于在多个防火墙后处理大量敏感数据的用户来说，这是不可思议的。例如，您可能会看到如下教程:</p><pre class="kt ku kv kw gt nc nd ne nf aw ng bi"><span id="bd26" class="nh mg it nd b gy ni nj l nk nl">// download Vegas-viz library jars from the Maven repo<br/>import $ivy.`org.vegas-viz::vegas:0.3.11`</span></pre><p id="932d" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">有时，安全层会阻止从在线Maven存储库中导入托管JAR的互联网访问。因此，需要JAR文件本身，以便您可以将它加载到笔记本中。</p><p id="a9c4" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">本文将教您:1)从哪里下载官方JAR文件，2)如何创建一个AWS EMR集群，将JAR复制到集群的每个节点，这样您就可以运行以下代码行:</p><pre class="kt ku kv kw gt nc nd ne nf aw ng bi"><span id="38b9" class="nh mg it nd b gy ni nj l nk nl">import vegas._<br/>import h2o<br/>etc.</span></pre><h1 id="c588" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">第1部分:下载jar</h1><p id="7600" class="pw-post-body-paragraph lj lk it ll b lm mx kd lo lp my kg lr ls mz lu lv lw na ly lz ma nb mc md me im bi translated">我不知道为什么<strong class="ll jd">每一个</strong> Scala GitHub repo和数据科学工具都描述了如何从源代码构建一个JAR，但是<strong class="ll jd">没有一个</strong>解释说你可以跳过这个多步骤的过程，直接从<a class="ae li" href="https://search.maven.org/" rel="noopener ugc nofollow" target="_blank">https://search.maven.org/</a>下载一个JAR。<em class="nm">如果你知道原因，请分享</em>。无论如何，请访问上面的网站，搜索您的软件包。首先，我找到了针对<code class="fe nn no np nd b">breeze</code>的GitHub repo，这是一个Scala NLP库，带有一个数据viz配套库:<a class="ae li" href="https://github.com/scalanlp/breeze" rel="noopener ugc nofollow" target="_blank">https://github.com/scalanlp/breeze</a>。如果你只搜索“微风”，会出现太多的结果请改为搜索“scalanlp breeze”:</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi nq"><img src="../Images/4d8383bced4ec4bdb1f7e282d6b054c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2W2u0lPpi1uaeL44batplQ.png"/></div></div><p class="le lf gj gh gi lg lh bd b be z dk translated">图片来源:作者</p></figure><h1 id="7520" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">第2部分:安装jar</h1><p id="6da8" class="pw-post-body-paragraph lj lk it ll b lm mx kd lo lp my kg lr ls mz lu lv lw na ly lz ma nb mc md me im bi translated">创建EMR集群时，您希望选择<code class="fe nn no np nd b">Custom Jar</code>然后选择<code class="fe nn no np nd b">Add Step</code>以弹出一个对话窗口(以下截图供参考)。在这个新窗口中，相应地填写:</p><p id="e81d" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated"><strong class="ll jd"> <em class="nm">姓名*: </em> </strong></p><pre class="kt ku kv kw gt nc nd ne nf aw ng bi"><span id="2a71" class="nh mg it nd b gy ni nj l nk nl">The name doesn’t matter. I just leave the default name since it isn’t referenced elsewhere/used again for our use case.</span></pre><p id="81e0" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated"><strong class="ll jd"> <em class="nm">罐子位置*: </em> </strong></p><pre class="kt ku kv kw gt nc nd ne nf aw ng bi"><span id="5241" class="nh mg it nd b gy ni nj l nk nl">s3://us-east-1.elasticmapreduce/libs/script-runner/script-runner.jar</span></pre><blockquote class="nr ns nt"><p id="d772" class="lj lk nm ll b lm ln kd lo lp lq kg lr nu lt lu lv nv lx ly lz nw mb mc md me im bi translated">所有AWS用户都可以访问上面的JAR，它用于运行shell脚本。</p></blockquote><p id="f045" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated"><strong class="ll jd"> <em class="nm">论据:</em> </strong></p><p id="ce9b" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated"><code class="fe nn no np nd b">s3://yourDirectory/yourShellScriptName.sh</code></p><blockquote class="nr ns nt"><p id="2185" class="lj lk nm ll b lm ln kd lo lp lq kg lr nu lt lu lv nv lx ly lz nw mb mc md me im bi translated">将S3目录用于shell脚本，命令复制您的JAR文件。下面的例子脚本进行截图。</p><p id="cf6c" class="lj lk nm ll b lm ln kd lo lp lq kg lr nu lt lu lv nv lx ly lz nw mb mc md me im bi translated"><strong class="ll jd">重要提示</strong>:使用文本编辑器，如<a class="ae li" href="https://notepad-plus-plus.org/downloads/" rel="noopener ugc nofollow" target="_blank">记事本++ </a>或记事本。AWS技术支持和我发现，Sublime Text默认使用一种字符编码，当集群试图运行shell命令时，这种编码会导致在该上下文中使用的<code class="fe nn no np nd b"><em class="it">.sh</em></code>脚本生成<code class="fe nn no np nd b">Step Failed</code>错误。即使手动指定Sublime文本使用UTF-8字符编码，相同的代码在Sublime文本生成的文件中也会失败，但在用Notepad++创建的文件中可以工作。我们从来没有弄清楚为什么，坦率地说，我们更关心的是让一些工作。</p></blockquote><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi nx"><img src="../Images/2e686c65de787a2740d156d606e96402.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SEaASYCM23yOdhRYuruk1g.png"/></div></div></figure><p id="22d9" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">我的shell脚本将(<code class="fe nn no np nd b">cp</code> ) <code class="fe nn no np nd b">jar </code>文件复制到每个AWS EMR工作节点:</p><figure class="kt ku kv kw gt kx"><div class="bz fp l di"><div class="ny nz l"/></div><p class="le lf gj gh gi lg lh bd b be z dk translated">代码来源:作者。</p></figure><p id="ac31" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">在这一步之后，您将能够创建一个EMR笔记本，附加到您的EMR集群，并导入与这些jar相关联的库。如果您使用了我上面的脚本，您现在可以使用一个<strong class="ll jd"> Python 3 </strong>内核并运行:</p><pre class="kt ku kv kw gt nc nd ne nf aw ng bi"><span id="1e64" class="nh mg it nd b gy ni nj l nk nl">import h2o</span></pre><p id="1b45" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">此外，您现在可以在一个<strong class="ll jd"> Spark </strong>内核中运行以下代码:</p><pre class="kt ku kv kw gt nc nd ne nf aw ng bi"><span id="ef46" class="nh mg it nd b gy ni nj l nk nl">import vegas._</span></pre><p id="2f63" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">恭喜你！现在，您可以使用那些更常用于在单节点环境中处理小数据的高级工具了！</p><h1 id="9b04" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">关于作者</h1><p id="1c34" class="pw-post-body-paragraph lj lk it ll b lm mx kd lo lp my kg lr ls mz lu lv lw na ly lz ma nb mc md me im bi translated">安德鲁·杨是Neustar的R&amp;D数据科学家经理。例如，Neustar是一家信息服务公司，从航空、银行、政府、营销、社交媒体和电信等领域的数百家公司获取结构化和非结构化的文本和图片数据。Neustar将这些数据成分结合起来，然后向企业客户出售具有附加值的成品“菜肴”，用于咨询、网络安全、欺诈检测和营销等目的。在这种情况下，Young先生是R&amp;D一个小型数据科学团队的实践型首席架构师，负责构建、优化和维护一个为所有产品和服务提供信息的系统，该系统为Neustar带来了超过10亿美元的年收入。在LinkedIn 上关注Andrew，了解数据科学的最新趋势！</p><h1 id="314f" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">更多热门文章:</h1><ul class=""><li id="e9b6" class="oa ob it ll b lm mx lp my ls oc lw od ma oe me of og oh oi bi translated"><a class="ae li" rel="noopener" target="_blank" href="/isolation-forest-is-the-best-anomaly-detection-algorithm-for-big-data-right-now-e1a18ec0f94f">隔离森林是目前最好的大数据异常检测算法</a></li><li id="2d32" class="oa ob it ll b lm oj lp ok ls ol lw om ma on me of og oh oi bi translated"><a class="ae li" rel="noopener" target="_blank" href="/something-every-data-scientist-should-know-but-probably-doesnt-the-bias-variance-trade-off-25d97a17329d">每个数据科学家都应该知道:偏差-方差权衡推广是错误的</a></li></ul><h1 id="40dd" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">参考</h1><p id="10a0" class="pw-post-body-paragraph lj lk it ll b lm mx kd lo lp my kg lr ls mz lu lv lw na ly lz ma nb mc md me im bi translated">[1]个人的血汗<br/> [2] AWS技术支持(特别感谢休斯顿的Pranay S。我们一起学到了很多！)</p></div></div>    
</body>
</html>