<html>
<head>
<title>Connecting Google Colab to an Amazon EC2 instance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Google Colab连接到Amazon EC2实例</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/connecting-google-colab-to-an-amazon-ec2-instance-b61be9f9cf30?source=collection_archive---------15-----------------------#2021-03-22">https://towardsdatascience.com/connecting-google-colab-to-an-amazon-ec2-instance-b61be9f9cf30?source=collection_archive---------15-----------------------#2021-03-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fd6b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">提升您的Colab笔记本电脑的GPU性能</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/408ff9c0af3712e355c7287f96781069.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8ELG0a7FoW2yu_UyRaTWrg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@sigmund?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">西格蒙德</a>在<a class="ae kv" href="/s/photos/cloud-services?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="1f8c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在深入学习教程之前。让我们来谈谈Jupyter笔记本。</p><h1 id="5573" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">朱庇特</strong></h1><p id="54e4" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Jupyter是一个免费的、开源的、可共享的、交互式的web应用程序，它允许用户组合代码、计算输出、可视化、文本和媒体。</p><p id="736d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Jupyter笔记本已经成为数据科学家的首选计算工具。名字是由Jupyter目前支持的40+编程语言中的三种语言<strong class="ky ir"> Ju </strong> lia、<strong class="ky ir"> py </strong> thon、<strong class="ky ir"> R </strong>组成的。</p><p id="8b25" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">笔记本的问题</strong></p><p id="90b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">笔记本并不都很棒。与使用笔记本相关的一些问题包括—</p><p id="cc18" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">笔记本在运行长时间异步任务时会遇到问题。像深度学习中典型的那样训练一个模型几个小时或几天可能会变得乏味，特别是当显示超时时。对此的解决方法是定期检查模型权重并将日志文件写入磁盘。</p><p id="3c1c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">笔记本电脑出现故障时返回的错误(应该注意，这更多是用户问题)</p><p id="b300" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它鼓励糟糕的软件工程实践。例如，缺乏单元测试，将代码编写成可重用的块。</p><p id="8531" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，许多人会认为这些都不应该被认为是问题，因为笔记本电脑从来就不是为解决这些问题而设计的。它非常适合快速实验和原型制作。很有可能将代码移动到脚本中，并且仍然从笔记本中调用它们。</p><blockquote class="mp"><p id="4198" class="mq mr iq bd ms mt mu mv mw mx my lr dk translated">Jupyter笔记本是一种探索工具，而不是生产工具</p></blockquote><h1 id="e67f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw mz jx me jz na ka mg kc nb kd mi mj bi translated">科拉布</h1><p id="6b4e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">google Colaboratory是一个基于Jupyter的免费笔记本环境，运行在Google的云服务器上，允许用户利用Google提供的硬件(CPU、GPU和TPU)。其中后两个对于数据科学家和机器学习工程师来说相当有用。使用Colab的另一个优点是它允许访问google drive，可以通过文件浏览器安装和访问它。Colab还预装了一套像TensorFlow和Keras这样的深度学习库。</p><p id="5fd9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">谷歌Colab提供了12GB的NVIDIA Tesla K80 GPU，NVIDIA计算能力为3.7，可连续使用长达12小时。虽然这对于实验和原型制作来说非常好，但是在处理大型数据集和/或大型网络时，很快就会遇到限制。</p><p id="0e84" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们进入教程之前，重要的是要注意，这不仅适用于亚马逊的EC2实例，还可以用于谷歌云的计算引擎、微软Azure的虚拟机，甚至是本地设置。</p><p id="daac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将外部运行时连接到Colab只是允许用户在使用GPU加速而不是Colab默认提供的加速时保留Colab接口。</p><p id="2303" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用AWS，许多人更喜欢使用SageMaker，因为它负责在后台创建EC2实例和设置Jupyter笔记本连接的细节，这使得Sagemaker比EC2更贵。因此，创建一个EC2实例并将其连接到一个Colab笔记本上，比使用SageMaker更便宜，同时还能保留(许多人)首选的Colab接口。</p><p id="635b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">比较成本，俄亥俄州地区EC2上的一个p3.2xlarge实例每小时的成本为3.06美元，而同一地区SageMaker上的相同实例每小时的成本为3.825美元。</p><p id="78a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们开始吧。</p><h1 id="3ba9" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">亚马逊EC2 </strong></h1><p id="5251" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">登录AWS管理控制台。</p><p id="740b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击左上角的服务并选择EC2。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/f7af15ca849e20e1cdced9717e63d837.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dJH08my0e5N6byfvG-pHVw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">EC2仪表板</p></figure><p id="86e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在左窗格中选择实例，然后启动实例。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/6195dece0414e692fcdd9ba941233839.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CplQgD6vQ3XoeA3MrylXug.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">EC2左侧窗格</p></figure><p id="aa91" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择图像类型。这决定了预装的操作系统和软件版本。这里我们选择了一个Ubuntu 18.04安装和TensorFlow 2.4.1以及CUDA安装。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/1e53e4aed74087d816a032040f87230e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c7YWWV94EhTM3uM7B1_yxQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">AMI图像</p></figure><p id="e76a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们选择实例类型。这将决定我们得到的硬件类型。出于本教程的考虑，我将选择一个p 3.2x大型实例。这包括一个Nvidia V100 GPU、8个vCPUs和61GB RAM。</p><p id="be6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果这是您第一次启动GPU实例，请注意默认情况下GPU实例不可用。查看包含的<a class="ae kv" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-resource-limits.html" rel="noopener ugc nofollow" target="_blank">链接</a>了解如何使用AWS增加GPU实例限制。此外，GPU实例不是免费的，请参见此<a class="ae kv" href="https://aws.amazon.com/ec2/pricing/on-demand/" rel="noopener ugc nofollow" target="_blank">链接</a>了解点播价格。请注意，不同地区的价格不同。</p><p id="7147" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您希望设置存储和网络选项等其他详细信息，可以选择“配置实例详细信息”。要保留默认设置，请选择“查看并启动”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/241da28d49b838940a0625ce0e13055b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NpLJ26aSb7BLEtVCReWilw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">实例类型</p></figure><p id="1c08" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择现有的密钥对或创建新的密钥对。这将作为登录服务器的身份验证。如果一个新的被创建，一个<keyfile>。pem文件将被下载到您的本地计算机。</keyfile></p><p id="b933" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">查看详细信息，然后单击启动</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/26adfb9a3794f57bc288d35389bed222.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MBgmomxn6q0irgEeLYVsdA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">密钥对</p></figure><p id="18f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过单击左侧窗格中的实例，返回到实例仪表板。这将列出所有实例，包括刚刚创建的实例。等待创建的实例如下所示，实例状态显示为“正在运行”，状态检查为“2/2检查通过”。这意味着实例现在正在运行。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/1ee544dec3e273964613fab5f5c7205a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vqf2TvClpOEJUqOO_ZmNsQ.png"/></div></div></figure><p id="814b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">单击实例ID。您应该会看到如下所示的屏幕。然后点击连接。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/a007538e12d4b456f939b95dc5308037.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HYdKrGhQs5ZnA2I5O-2mkA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">通过SSH连接</p></figure><p id="faa5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">单击ssh客户端的<a class="ae kv" href="https://console.aws.amazon.com/ec2/v2/home?region=us-east-1#" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"/></a><strong class="ky ir"/>选项卡，查看该实例的SSH登录详细信息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/b9a95db478bad2d3784da21a4f47682d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zg0gCcyj1HUDhJ5LMOq4TQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">SSH详细信息</p></figure><p id="e758" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，对于本教程，我们将使用putty SSH客户端登录到实例。Putty可以从<a class="ae kv" href="https://www.putty.org/" rel="noopener ugc nofollow" target="_blank">这里</a>下载。我们使用Putty的主要原因是为了设置SSH隧道。这是让Colab连接到EC2运行时所需要的。</p><h1 id="e4b2" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak"> PuttyGen </strong></h1><p id="8bb6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在我们安装油灰之前。如果我们回想一下，从AWS下载的密钥文件是. pem文件格式。我们需要将它转换成putty可以识别的格式。putty的安装中包括另一个名为PuttyGen的程序。此工具可以将. pem文件转换为. ppk文件。打开PuttyGen，选择文件→加载私钥</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/ef96a45fe501cf05b35889fe3e7ef568.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*jb33y_CTV5UtdEdBSpk5eA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">PuttyGen</p></figure><p id="3452" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择。要加载的pem文件。选择文件→保存私钥以存储加载的内容。pem文件在。ppk格式。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/2cb361a2ae4f42879517f104bfbd86a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/1*-LE6LaQNxWvWICMxJACCYQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">PuttyGen另存为ppk</p></figure><p id="554d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">既然密钥文件的格式正确，我们就可以在putty上设置SSH连接了。</p><h1 id="f8c0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">油灰</strong></h1><p id="5807" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在前面的步骤中，在SSH Client选项卡中，我们查看了EC2实例的SSH登录信息。我们现在需要它。(需要注意的一点是，每次重启实例时，SSH登录信息都会改变，请务必再次复制该信息)。</p><p id="4efc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">确保通过在“保存会话”文本框中指定名称并单击“保存”将详细信息保存到配置文件中。在下面的例子中，我选择“aws”作为要另存为的概要文件名。</p><p id="bf37" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">油灰应如下图所示设置—</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/1573e3add651d4c721c8c56a6809174d.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*SYkrE0gWpKshCUO6kZfwsQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">油灰型材</p></figure><p id="13ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">保存后，单击配置文件名，然后单击Load。</p><p id="0d8f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> SSH隧道</strong></p><p id="7963" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在左侧导航树中，选择连接→ SSH →隧道。</p><p id="0e79" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在源端口中，填写8888(我们将在后面指定，这是Jupyter将通过的端口)。在目的端口中，填写127.0.0.1:8888，然后单击添加。最终结果应该如下所示—</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/d399c95a68c63e86da652c062f1c74a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*ZOOy0qhcrrUEGaS9FXuW1Q.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">SSH隧道</p></figure><p id="8dda" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">也可以将它保存到个人资料中，这样就不需要每次都输入了。转到会话，选择配置文件，然后单击保存。</p><p id="891c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们已经准备好用putty登录EC2实例了。在左侧导航树中，转到连接→ SSH → Auth，单击浏览并选择。ppk文件，然后单击打开。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/6ebca900f634c93a55b5a06a50dcae9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*1o8UmXWrypzbpUhVD1OeIA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">油灰认证</p></figure><p id="3722" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">成功登录后，putty应该看起来像这样。我们现在有一个命令行来控制EC2实例。只要SSH终端窗口打开，来自源端口的所有流量都会被转发到目的端口。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/83f96cecf6c2512581a01807be50543d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*zsjT4gCkc0l1_xVjGcqA9g.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">EC2端子</p></figure><p id="ef9b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果Jupyter还没有安装，应该通过命令行安装。跟着这个<a class="ae kv" href="https://jupyter.org/install" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><p id="eb2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来需要安装由Google Colabotory创作的jupyter_http_over_w扩展，以允许连接到Colab。在命令行中运行下面的命令—</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="9dbd" class="nv lt iq nr b gy nw nx l ny nz"><strong class="nr ir"><em class="oa">pip install jupyter_http_over_ws</em></strong></span><span id="f0b2" class="nv lt iq nr b gy ob nx l ny nz"><strong class="nr ir"><em class="oa">jupyter serverextension enable — py jupyter_http_over_ws</em></strong></span></pre><p id="5036" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用下面的命令在EC2实例上启动Jupyter Notebook服务—</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="ee62" class="nv lt iq nr b gy nw nx l ny nz"><strong class="nr ir">jupyter notebook \<br/> — NotebookApp.allow_origin=’</strong><a class="ae kv" href="https://colab.research.google.com/" rel="noopener ugc nofollow" target="_blank"><strong class="nr ir">https://colab.research.google.com</strong></a><strong class="nr ir">' \<br/> — port=8888 \<br/> — NotebookApp.port_retries=0<br/> — NotebookApp.disable_check_xsrf=true”</strong></span></pre><p id="1b27" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将端口8888指定为SSH隧道配置期间指定的相同端口。</p><p id="ef87" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果一切顺利，终端屏幕上应该会显示一个IP地址。应该复制该地址，因为下一步将需要它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/7efdd3858426991fd2594a15ec48c4ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uFgynUp1plicJnUW86NSXg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">笔记本终端</p></figure><p id="d5de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开Google Colab，在右上角选择Connect to local runtime。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/22f73d4e49357b99475d8ae2c6fcb8ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*E90qc5qbRU-erIVDdu8InQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Colab本地运行时</p></figure><p id="625c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从终端复制IP地址并点击连接。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/96f69b4efd2fb03628a28129cf1788b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ksaOFKJCohdm-Mv29BhlpQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Colab后端URL</p></figure><p id="39ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最终结果应该是这样的。请注意“已连接”旁边的“本地”。这意味着Colab连接到一个运行时，而不是默认的Colab。我们还运行一些测试来确认GPU被检测到。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/4c7766b0a1a0984685beb2541ab88b2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DSUJNPGYBgj-TrM4epvv7g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Colab笔记本</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/b40e2e84126d641fda8a7a04bd1bf9c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*iIsUfhrboWAhdFq5hYgQvA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Colab列出设备</p></figure><p id="bda5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们在下面注意到，检测到的GPU是Tesla V100，这是典型的P3.2xlarge实例类型。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/c4f546800fb5217554b1cdafc338e169.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LgRR8VJ5qqvAqZcovw83GA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Colab T100</p></figure><p id="d9a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">快速笔记。连接到本地运行时意味着Colab将不再能够访问Google Drive。为了解决这个问题，一个可能的工具是P <a class="ae kv" href="https://pythonhosted.org/PyDrive/" rel="noopener ugc nofollow" target="_blank"> yDrive </a>。</p><h2 id="6735" class="nv lt iq bd lu oi oj dn ly ok ol dp mc lf om on me lj oo op mg ln oq or mi os bi translated">完成后，不要忘记关闭EC2实例。</h2><h1 id="0914" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">参考文献</strong></h1><p id="2414" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Stern J (2012)如何用PuTTY建立SSH隧道<a class="ae kv" href="https://www.skyverge.com/blog/how-to-set-up-an-ssh-tunnel-with-putty/" rel="noopener ugc nofollow" target="_blank">https://www . sky verge . com/blog/How-to-Set-Up-an-SSH-Tunnel-With-PuTTY/</a></p><p id="2c2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Perkel J (2018)为什么Jupyter是数据科学家的首选计算笔记本<a class="ae kv" href="https://www.nature.com/articles/d41586-018-07196-1" rel="noopener ugc nofollow" target="_blank">https://www.nature.com/articles/d41586-018-07196-1</a></p><p id="67df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">穆勒A (2018)木星笔记本吸的5个理由<a class="ae kv" rel="noopener" target="_blank" href="/5-reasons-why-jupyter-notebooks-suck-4dc201e27086">https://towards data science . com/5-reasons-why-jupyter-notebooks-suck-4d c201 e 27086</a></p></div></div>    
</body>
</html>