<html>
<head>
<title>Are Topics Also Communities of Words?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">话题也是词语社区吗？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/are-topics-also-communities-of-words-9b390862ea64?source=collection_archive---------35-----------------------#2021-08-24">https://towardsdatascience.com/are-topics-also-communities-of-words-9b390862ea64?source=collection_archive---------35-----------------------#2021-08-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8f6d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">利用图形分析中的社区检测进行主题分析</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a07e91a942b1b305cf3a151241241d34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sTqMglPOoBJoFcVMfTzBwQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由来自<a class="ae ky" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=4139536" rel="noopener ugc nofollow" target="_blank">皮克斯拜</a>的<a class="ae ky" href="https://pixabay.com/users/thorstenf-7677369/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=4139536" rel="noopener ugc nofollow" target="_blank">托尔斯滕·弗伦泽尔</a>拍摄</p></figure><p id="3ad9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[剧透警报]当丹妮莉丝·坦格利安被她的侄子兼情人琼恩·雪诺谋杀后，<a class="ae ky" href="https://en.wikipedia.org/wiki/Game_of_Thrones" rel="noopener ugc nofollow" target="_blank"> <em class="lv">《权力的游戏》</em> </a>社区变得<a class="ae ky" href="https://www.insider.com/game-of-thrones-series-finale-daenerys-death-reactions-2019-5" rel="noopener ugc nofollow" target="_blank">猿类</a>。</p><blockquote class="lw"><p id="e052" class="lx ly it bd lz ma mb mc md me mf lu dk translated">“我现在太难过了，简直要哭了。呃。F#%k(原文)”愤怒的推特粉丝</p><p id="46d1" class="lx ly it bd lz ma mb mc md me mf lu dk translated">“……她整个赛季都感觉被背叛了，她死的时候也被背叛了……”——另一个愤怒的推特粉丝</p></blockquote><p id="ecbb" class="pw-post-body-paragraph kz la it lb b lc mg ju le lf mh jx lh li mi lk ll lm mj lo lp lq mk ls lt lu im bi translated">好了，句号。我从没真正看过<em class="lv"> GOT </em> HBO系列。</p><p id="9d0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">*停下来集体喘息*</p><p id="63d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的，我只知道我写在最上面的句子的严重性，因为我有一个哥哥是一个狂热的观众，他总是用下面的话来修饰他的解释:</p><blockquote class="ml mm mn"><p id="3fdb" class="kz la lv lb b lc ld ju le lf lg jx lh mo lj lk ll mp ln lo lp mq lr ls lt lu im bi translated">“你只要看看这个系列就行了，兄弟。就像，给它时间，熬过第一季，然后你就会上瘾。”</p></blockquote><p id="189b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但我没看过这个节目，不代表它对我没有影响。我第一次知道这部剧的狂热追随者是在我看一个年轻的研究生米兰·雅诺索夫的演讲时，他用人物之间的关系创建了一个网络图，并用它来预测谁最有可能在下一集死去。引起我注意的是模型的准确性和图论的新颖应用。</p><p id="c203" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不言而喻，文字有助于形成关系。不仅仅是人与人之间的关系，他们还会在一个句子、一段话、一页纸上形成彼此之间的关系。</p><p id="4870" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有什么比网络图更好的方式来表达这些关系呢？Janosov帮助将这一信息传达给了大量受欢迎的粉丝，并激励了其他人，因为他们从《哈利·波特与火焰杯》到《指环王》和《T21》，甚至从《漫威》到《宇宙》。</p><p id="871a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大量现有的链接单词和关系的项目都集中在单词中的人以及他们与其他人的关系上。文字本身呢？它们之间的关系可以从图形的角度有效地理解吗？在这里，我看到了在文档中查找主题的图算法的应用。让我们开始吧。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="57bd" class="my mz it bd na nb nc nd ne nf ng nh ni jz nj ka nk kc nl kd nm kf nn kg no np bi translated"><strong class="ak">话题分析，单词-数据版聚类</strong></h1><p id="5dce" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">在数据科学中，我们使用无监督算法来帮助我们找到数据的自然(数据驱动)分组。大概应用最多的聚类算法是<a class="ae ky" rel="noopener" target="_blank" href="/understanding-k-means-clustering-in-machine-learning-6a6e67336aa1"> K-Means </a>。然而，当这些数据是单词时，像潜在狄利克雷分配(<a class="ae ky" rel="noopener" target="_blank" href="/light-on-math-machine-learning-intuitive-guide-to-latent-dirichlet-allocation-437c81220158"> LDA </a>)这样的其他算法更受欢迎。LDA比K-Means更受欢迎，因为LDA将多个主题分配给单个文档，而K-Means针对互斥组进行优化(也称为硬聚类)。</p><p id="aaf4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这两种方法的缺点是，都要求用户为模型输入特定数量的聚类/主题，然后尝试在数据中“查找”。必须事先输入主题的数量可能是一个挑战，因为我们通常不知道分组的最佳数量应该是多少。</p><p id="ef96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">*感觉我们被剥夺了描述中“无人监管”的部分？我也是😊*</p><p id="6801" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论如何，图算法可能为更真实的无监督主题建模方法提供一个可能的答案。在剩下的部分中，我将演示如何使用<a class="ae ky" rel="noopener" target="_blank" href="/community-detection-algorithms-9bd8951e7dae"> Louvain </a>社区检测算法创建主题模型，可视化网络，并提供一些未来方向的提示。</p><h1 id="6350" class="my mz it bd na nb nv nd ne nf nw nh ni jz nx ka nk kc ny kd nm kf nz kg no np bi translated"><strong class="ak">构建单词的网络图</strong></h1><p id="ffb7" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">网络图只是一系列通过边连接的节点。在页面上的单词的上下文中，我们可以根据它们在句子或段落中的共同提及来连接两个单词。例如，如果单词“apple”和“eat”同时出现在同一段落中，我们可以如下图所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/5c5ce3e818cbbbbbd62b6d746cf0ffe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0V_gAic38WiDiGwTKnW6LQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="f44e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个简单的例子中，我们可以得出结论，给定的文本段落有一个关于吃苹果的主题。</p><p id="059e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看如何使用Python创建一个单词网络。</p><p id="d38f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了实现第一个目标，我们需要确定数据的来源。对于这个例子，我使用了一些来自社会心理学课程学生的Word文档。希望我们的主题模型能帮助我们了解他们写的是什么。下面是我在这个例子中工作的环境:</p><p id="0b21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Windows 10操作系统</p><p id="bea4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python 3.6</p><p id="587b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要的包是:</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="a38d" class="og mz it oc b gy oh oi l oj ok">networkx==2.5</span><span id="9ce1" class="og mz it oc b gy ol oi l oj ok">nltk==3.5</span><span id="d705" class="og mz it oc b gy ol oi l oj ok">python_louvain==0.14</span><span id="099a" class="og mz it oc b gy ol oi l oj ok">pandas==0.25.0</span><span id="7e0c" class="og mz it oc b gy ol oi l oj ok">community==1.0.0b1</span><span id="0170" class="og mz it oc b gy ol oi l oj ok">scikit_learn==0.24.2</span></pre><p id="fb7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了建立我们的单词网络，我假设每个段落可以代表一个单独的主题，因此单词关系是在段落级别建立的。让我们加载数据，只选择前6个段落，并清理数据:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="c457" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，在上面的代码中，我导入了get_docx_text。这是一个自定义程序，可以在<a class="ae ky" href="https://gist.github.com/betacosine/661a1f99424ac3d99eb7d98b31af9c5a" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="6478" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦数据准备好了，我就对数据进行最后一次快速清理，只关注名词。大多数话题可能是关于名词的，但是看看动词和名词或者动词和名词的二元结构也是有用的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><h1 id="9d0e" class="my mz it bd na nb nv nd ne nf nw nh ni jz nx ka nk kc ny kd nm kf nz kg no np bi translated"><strong class="ak">大厦边缘列表</strong></h1><p id="4ab9" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">当将数据设计成图形工具和技术认可的格式时，我们需要边列表或邻接矩阵。在这个例子中，我从术语-频率-逆-文档-频率矩阵构建了一个边缘列表。结果边缘列表包含前100个单词的“目标”列、表示每个段落的“源”列和提供该文档(例如段落)的单词的TFIDF值的“计数”列。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><h1 id="968e" class="my mz it bd na nb nv nd ne nf nw nh ni jz nx ka nk kc ny kd nm kf nz kg no np bi translated"><strong class="ak">建图</strong></h1><p id="0f54" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">一旦我们创建了边列表，我们现在就可以用Python构建一个graph对象。在接下来的两个函数中，我们传递一个包含“目标”、“源”和“权重”(我们称权重为“计数”)列的数据帧，以便构建图表。</p><p id="6795" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">df_to_graph函数将返回两种图形类型中的一种，即一部分图形或二部分图形。不要太专业，我们在这个例子中的图是二分的。它是由两部分组成的，因为单词与段落相关，我们没有将这些单词直接相互关联(尽管我们可以)。但是我们最终确实想要将单词彼此联系起来，所以我们利用我们的图的二分性质，创建单词关系的一分投影。</p><p id="eef1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">概念如下:如果一个单词和另一个单词出现在同一个段落中，那么我们就把它们连接起来。连接两个单词的权重是它们的tfidf值之和(my_weight函数)。</p><p id="14c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后一行代码用Python生成了社区解决方案。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><h1 id="d566" class="my mz it bd na nb nv nd ne nf nw nh ni jz nx ka nk kc ny kd nm kf nz kg no np bi translated"><strong class="ak">可视化图形</strong></h1><p id="a321" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">用Python生成社区检测解决方案远不如可视化和导航网络有趣。所以，我现在转向<a class="ae ky" href="https://gephi.org/" rel="noopener ugc nofollow" target="_blank"> Gephi </a>。要将Networkx graph对象保存为Gephi可读的格式，请使用以下代码:</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="1a11" class="og mz it oc b gy oh oi l oj ok">nx.write_gexf(G, “path/to/save/your/graph.gexf”)</span></pre><p id="6887" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">快速格式化后，这是我们的图表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/239d842927ad4776181001b02c61cd05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4NQmwHSkLO97t7bcKqggOg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="89bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有点乱吧？为了增加更多的可解释性，我根据权重过滤掉一些边，并在图上运行一些统计数据，包括在过滤后的图上进行Louvain社区检测。一旦完成，这些额外的统计数据就可以作为添加颜色、调整节点大小和调整这些节点上的标签大小的选择。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/553fec923a695b8f87940eccd0fbe0bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C_03IdzSYp9UpCjl8QZnWw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="77a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是由此产生的两个社区解决方案:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/225de5d9080dd4178ff9ee74bfb75f36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dWpa1rtTn1W4k7OIGyDPPg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="129a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们学到了什么？</p><p id="a7ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据社区检测模型发现的两个主题，我们了解到学生们写的是暴力和脱敏。</p><p id="52e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很酷，对吧？但是我们能从这里去哪里呢？</p><h1 id="a444" class="my mz it bd na nb nv nd ne nf nw nh ni jz nx ka nk kc ny kd nm kf nz kg no np bi translated"><strong class="ak">展望未来</strong></h1><p id="6f1f" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">在本文中，我们演示了一个简单的实现，它使用图算法根据段落中的单词关系来识别主题。虽然它很酷，但仍然有一些明显的局限性。一个限制是结果有点像K-Means结果，因为单词被“硬聚类”成一个且只有一个聚类。也就是说，我们可以清楚地看到，一个主题中的单词仍然与分配给其他主题的单词有边(关系)。</p><p id="6691" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个限制是很难将一个段落分配给一个主题。解决这个问题的一种方法是根据单词及其权重建立一个分类模型，以便预测哪个段落覆盖哪个主题。显然这不像sci-kit的那样简单”。预测”界面，但这是一种可能的解决方案。</p><p id="fbae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管有这些限制，图形仍然是建模数据的一种有用方法。除了节点之间的关系之外，图表还允许我们给节点和边分配属性，这可以使它们自身有助于更复杂的图表方法，这可能对理解单词关系有所暗示。实际上，<a class="ae ky" href="https://dl.acm.org/doi/fullHtml/10.1145/3366423.3380102" rel="noopener ugc nofollow" target="_blank">这里的</a>是一篇使用单词嵌入作为节点属性的论文，用图形来通知更复杂的主题建模方法。</p><p id="c806" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇文章能启发你更多地思考图形分析及其对数据科学问题的潜在价值。前进！</p><p id="b914" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">喜欢连接以了解更多关于数据科学的信息？<a class="ae ky" href="https://www.facebook.com/groups/thinkdatascience" rel="noopener ugc nofollow" target="_blank">加入我</a>。</p></div></div>    
</body>
</html>