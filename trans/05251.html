<html>
<head>
<title>Foundations of NLP Explained — Bleu Score and WER Metrics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解释自然语言处理的基础——Bleu评分和WER指标</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/foundations-of-nlp-explained-bleu-score-and-wer-metrics-1a5ba06d812b?source=collection_archive---------0-----------------------#2021-05-09">https://towardsdatascience.com/foundations-of-nlp-explained-bleu-score-and-wer-metrics-1a5ba06d812b?source=collection_archive---------0-----------------------#2021-05-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="a311" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">直观的NLP系列</h2><div class=""/><div class=""><h2 id="aa98" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">NLP模型的两个基本指标(Bleu分数和单词错误率)的简明指南，用简单的英语编写</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/93753bd4f6e2458e77513e56a00776a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ec6XfzYpvMcAfhEc"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae le" href="https://unsplash.com/@enginakyurt?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> engin akyurt </a>拍摄的照片</p></figure><p id="0f9d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">大多数NLP应用程序，如机器翻译、聊天机器人、文本摘要和语言模型都会生成一些文本作为输出。此外，像图像字幕或自动语音识别(即语音到文本)输出文本，即使它们可能不被认为是纯NLP应用程序。</p><h1 id="7223" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">预测的产量有多好？</h1><p id="b9f8" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">训练这些应用程序时的常见问题是，我们如何决定输出有多“好”？</p><p id="5bd4" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">对于像图像分类这样的应用，预测的类别可以明确地与目标类别进行比较，以决定输出是否正确。然而，对于输出是一个句子的应用程序来说，问题要复杂得多。</p><p id="f7ed" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在这种情况下，我们并不总是有一个普遍正确的答案——我们可能有许多正确的答案。例如，当翻译一个句子时，两个不同的人可能会给出两个略有不同的答案，但两个答案都是完全正确的。</p><p id="54b3" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">例如:<em class="my">球是蓝色的</em>，<em class="my">球是蓝色的</em>。</p><p id="875a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">对于像图像字幕或文本摘要这样的应用程序来说，这个问题甚至更难，因为在这些应用程序中，可接受的答案范围甚至更大。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mz"><img src="../Images/ac32a054d2ecda8cc2824e988ef847b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rX44O9m1BkelqIKj.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated"><em class="na">同一张图片可以有多个有效的标题(图片由作者提供)</em></p></figure><p id="8601" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为了评估我们的模型的性能，我们需要一个量化指标来衡量其预测的质量。</p><p id="2a39" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在本文中，我将介绍两个主要的NLP指标，您可能会在您的NLP模型中频繁使用这两个指标。</p><p id="9006" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">此外，如果您对NLP感兴趣，我有几篇文章探索了这个领域的其他有趣主题。</p><ol class=""><li id="38e9" class="nb nc iq lh b li lj ll lm lo nd ls ne lw nf ma ng nh ni nj bi translated"><a class="ae le" rel="noopener" target="_blank" href="/audio-deep-learning-made-simple-automatic-speech-recognition-asr-how-it-works-716cfce4c706">自动语音识别</a> <em class="my">(语音转文本算法和架构，使用CTC丢失和解码进行序列对齐。)</em></li><li id="4edb" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma ng nh ni nj bi translated"><a class="ae le" rel="noopener" target="_blank" href="/foundations-of-nlp-explained-visually-beam-search-how-it-works-1586b9849a24">波束搜索</a> ( <em class="my">波束搜索如何增强NLP模型中的预测</em>)</li></ol><h1 id="31aa" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">NLP度量</h1><p id="d02b" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">多年来，已经开发了许多不同的NLP度量来解决这个问题。其中最受欢迎的是所谓的布鲁分数。</p><p id="384a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">它远非完美，而且有许多缺点。但是计算和理解起来很简单，并且有几个引人注目的好处。尽管它有许多替代方法，但它仍然是最常用的指标之一。</p><p id="a438" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">它基于这样一种思想，即预测的句子越接近人类生成的目标句子越好。</p><p id="864c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">Bleu分数在0到1之间。0.6或0.7的分数被认为是你能达到的最好成绩。即使是两个人也可能会对一个问题提出不同的句子变体，并且很少会达到完美的匹配。出于这个原因，接近1的分数在实践中是不现实的，并且应该发出您的模型过度拟合的信号。</p><p id="d0a8" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在我们进入如何计算Bleu分数之前，让我们先了解两个概念。N-grams和精度。</p><h1 id="33b7" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">n元语法</h1><p id="90f2" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">“n-gram”实际上是常规文本处理中广泛使用的概念，并不特定于NLP或Bleu分数。它只是描述“一个句子中的一组‘n’个连续单词”的一种花哨方式。</p><p id="6572" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">例如，在句子“球是蓝色的”中，我们可以有n个字母组合，如:</p><ul class=""><li id="fc42" class="nb nc iq lh b li lj ll lm lo nd ls ne lw nf ma np nh ni nj bi translated">1-gram(unigram):“The”，“ball”，“is”，“blue”</li><li id="1be2" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">2-gram (bigram):“球”，“球是”，“是蓝色的”</li><li id="b3b2" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">三字组(三元组):“球是”，“球是蓝色的”</li><li id="23d0" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">4克:“球是蓝色的”</li></ul><p id="003b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">请注意，n-gram中的单词是按顺序排列的，因此“蓝色是球”不是有效的4-gram。</p><h1 id="9c95" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">精确</h1><p id="2825" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">该指标衡量预测句子中同时出现在目标句子中的单词数。</p><p id="cdb7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">比方说，我们有:</p><ul class=""><li id="c188" class="nb nc iq lh b li lj ll lm lo nd ls ne lw nf ma np nh ni nj bi translated">他吃了一个苹果</li><li id="0e19" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated"><strong class="lh ja">预言句</strong>:他吃了一个苹果</li></ul><p id="8d2a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们通常使用以下公式计算精度:</p><p id="0f47" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><em class="my">精度=正确预测字数/总预测字数</em></p><p id="a2ad" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><em class="my">精度= 3 / 4 </em></p><p id="38fa" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">但是像这样使用精度是不够的。我们还有两个案子需要处理。</p><h2 id="e52b" class="nq mc iq bd md nr ns dn mh nt nu dp ml lo nv nw mn ls nx ny mp lw nz oa mr iw bi translated">重复</h2><p id="3263" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">第一个问题是这个公式允许我们作弊。我们可以预测一句话:</p><ul class=""><li id="236e" class="nb nc iq lh b li lj ll lm lo nd ls ne lw nf ma np nh ni nj bi translated">他吃了一个苹果</li><li id="fffa" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated"><strong class="lh ja">预测句</strong>:呵呵呵</li></ul><p id="3d01" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">并且得到一个完美的精度= 3 / 3 = 1</p><h2 id="9c85" class="nq mc iq bd md nr ns dn mh nt nu dp ml lo nv nw mn ls nx ny mp lw nz oa mr iw bi translated">多重目标句</h2><p id="7392" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">其次，正如我们已经讨论过的，有许多正确的方法来表达同一个句子。在许多NLP模型中，我们可能会得到多个可接受的目标句子来捕捉这些不同的变化。</p><p id="c4fb" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们用一个修正的精度公式来说明这两种情况，我们称之为“削波精度”。</p><h2 id="5132" class="nq mc iq bd md nr ns dn mh nt nu dp ml lo nv nw mn ls nx ny mp lw nz oa mr iw bi translated">限幅精度</h2><p id="688c" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">让我们通过一个例子来理解它是如何工作的。</p><p id="abbc" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">比方说，我们有以下句子:</p><ul class=""><li id="d9fd" class="nb nc iq lh b li lj ll lm lo nd ls ne lw nf ma np nh ni nj bi translated">他吃了一个甜苹果</li><li id="003d" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">他正在吃一个美味的苹果</li><li id="48d2" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">预测句:呵呵，他吃美味的水果</li></ul><p id="2413" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们现在做两件不同的事情:</p><ul class=""><li id="d5d3" class="nb nc iq lh b li lj ll lm lo nd ls ne lw nf ma np nh ni nj bi translated">我们将预测句子中的每个单词与所有目标句子进行比较。如果该单词匹配任何目标句子，则认为它是正确的。</li><li id="4253" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">我们将每个正确单词的计数限制为该单词在目标句子中出现的最大次数。这有助于避免重复问题。这将在下面变得更加清楚。</li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ob"><img src="../Images/9f5ca83f3999b7facb9ad5d89a62368a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ccCNFbdGeGzZr-SM.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated"><em class="na">裁剪精度(图片由作者提供)</em></p></figure><p id="cb12" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">例如，单词“他”在每个目标句子中只出现一次。因此，即使“他”在预测的句子中出现了三次，我们也将计数“裁剪”为一，因为这是任何目标句子中的最大计数。</p><p id="26c8" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><em class="my">裁剪精度=正确预测字数/总预测字数</em></p><p id="d036" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><em class="my">削波精度= 3 / 6 </em></p><p id="7fc7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">注意:在本文的其余部分，我们将只使用“精度”来表示“削波精度”。</p><p id="b9d9" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们现在准备继续计算Bleu分数。</p><h1 id="3057" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">Bleu评分是如何计算的？</h1><p id="ac7e" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">假设我们有一个NLP模型，它可以生成如下的预测句子。为了简单起见，我们只取一个目标句子，但是和上面的例子一样，多个目标句子的过程非常相似。</p><ul class=""><li id="cbc2" class="nb nc iq lh b li lj ll lm lo nd ls ne lw nf ma np nh ni nj bi translated">因为下雨，警卫迟到了</li><li id="a3ed" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">因为下雨，警卫迟到了</li></ul><p id="3ae2" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">第一步是计算1-grams到4-grams的精度分数。</p><h2 id="b7a7" class="nq mc iq bd md nr ns dn mh nt nu dp ml lo nv nw mn ls nx ny mp lw nz oa mr iw bi translated">精确1克</h2><p id="ccd8" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">我们使用刚刚讨论过的限幅精度方法。</p><p id="515d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><em class="my">精度1克=正确预测的1克数/总预测的1克数</em></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/db40e555b9c60b7cace725799a2571cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/0*uInR1otrb3d3pKtV.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated"><em class="na">精度(图片由作者提供)</em></p></figure><p id="9e11" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">所以，精度1克(<em class="my"> p₁ </em> ) = 5 / 8</p><h2 id="964f" class="nq mc iq bd md nr ns dn mh nt nu dp ml lo nv nw mn ls nx ny mp lw nz oa mr iw bi translated">精确2克</h2><p id="307e" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated"><em class="my">精度2-gram =正确预测的2-gram数/总预测的2-gram数</em></p><p id="5e5a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们看看我们预测的句子中所有的2个字母:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi od"><img src="../Images/53441fe86ed68c879aac413cfa81f67e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/0*cIGCQAAdahIx_Snv.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated"><em class="na">精确2克(图片由作者提供)</em></p></figure><p id="6eab" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">所以，精度2-克(<em class="my"> p₂) </em> = 4 / 7</p><h2 id="00f6" class="nq mc iq bd md nr ns dn mh nt nu dp ml lo nv nw mn ls nx ny mp lw nz oa mr iw bi translated">精确3克</h2><p id="935d" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">同样，精确3克(<em class="my"> p₃ </em> ) = 3 / 6</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/44027c47761e6126892885c930a43f42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/0*fQEPPBKQuQ0OrLNJ.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated"><em class="na">精确3克(图片由作者提供)</em></p></figure><h2 id="cb04" class="nq mc iq bd md nr ns dn mh nt nu dp ml lo nv nw mn ls nx ny mp lw nz oa mr iw bi translated">精确4克</h2><p id="973f" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">并且，精度4克(<em class="my"> p₄ </em> ) = 2 / 5</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi od"><img src="../Images/c3b84345efa2a31a1b92858345ad102a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/0*JyUBZ5o2h1Z2PwXe.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated"><em class="na">精确4克(图片由作者提供)</em></p></figure><h2 id="3ce8" class="nq mc iq bd md nr ns dn mh nt nu dp ml lo nv nw mn ls nx ny mp lw nz oa mr iw bi translated">几何平均精度分数</h2><p id="a035" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">接下来，我们使用下面的公式合并这些精度分数。这可以针对不同的N值并使用不同的权重值来计算。通常，我们使用<em class="my"> N = 4 </em>和统一权重<em class="my"> wₙ </em> = <em class="my"> N / 4 </em></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi of"><img src="../Images/7cc9d10f990de233933fff6a37300570.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*0Zi8SI4CkOMd7avkk9BTTA.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated"><em class="na">精准评分(图片由作者提供)</em></p></figure><h2 id="231c" class="nq mc iq bd md nr ns dn mh nt nu dp ml lo nv nw mn ls nx ny mp lw nz oa mr iw bi translated">简洁惩罚</h2><p id="e99a" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">第三步是计算“简洁代价”。</p><p id="b369" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果您注意到精度是如何计算的，我们可以输出一个由单个单词组成的预测句子，如“The”或“late”。对于这种情况，1克的精度应该是1/1 = 1，这表示满分。这显然是一种误导，因为它鼓励模型输出更少的单词并获得高分。</p><p id="eacc" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为了弥补这一点，简短惩罚惩罚太短的句子。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi og"><img src="../Images/96f9579ed8a88016bae7d462f77d694b.png" data-original-src="https://miro.medium.com/v2/resize:fit:844/format:webp/0*AoJZFTk0AXqHZrM9.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated"><em class="na">简洁处罚(图片由作者提供)</em></p></figure><ul class=""><li id="0d24" class="nb nc iq lh b li lj ll lm lo nd ls ne lw nf ma np nh ni nj bi translated">c是<em class="my">预测长度=预测句子的字数</em>和</li><li id="39cf" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">r是<em class="my">目标长度=目标句子的字数</em></li></ul><p id="8de1" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这确保了简洁性损失不能大于1，即使预测的句子比目标长得多。而且，如果你预测的字很少，这个值会很小。</p><p id="77b9" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在这个例子中，c = 8，r = 8，这意味着简洁代价= 1</p><h2 id="1f0e" class="nq mc iq bd md nr ns dn mh nt nu dp ml lo nv nw mn ls nx ny mp lw nz oa mr iw bi translated">Bleu评分</h2><p id="6f59" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">最后，为了计算Bleu分数，我们用精确度分数的几何平均值乘以简洁性损失。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/39a9dad6bf32488695e6b52bda547837.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*gGgQvDgayGCfTkI5MFGMjg.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated"><em class="na"> Bleu评分(图片由作者提供)</em></p></figure><p id="7e8b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">可以针对不同的N值计算Bleu分数。通常，我们使用N = 4。</p><ul class=""><li id="ad26" class="nb nc iq lh b li lj ll lm lo nd ls ne lw nf ma np nh ni nj bi translated">BLEU-1使用unigram精度分数</li><li id="876d" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">BLEU-2使用一元和二元精度的几何平均值</li><li id="32d2" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">BLEU-3使用一元、二元和三元精度的几何平均值</li><li id="e38a" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">诸如此类。</li></ul><p id="e81e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果你在互联网上查看不同的资源，你也可能会遇到一种稍微不同的方式来编写Bleu分数公式，这在数学上是等价的。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/415e2ca017b9d5a76f920348a74e888d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/0*6I8Vi7mUntUU5gPB.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated"><em class="na"> Bleu评分公式(图片由作者提供)</em></p></figure><h1 id="8102" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">在Python中实现Bleu评分</h1><p id="9c75" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">在实践中，您很少需要自己实现Bleu分数算法。nltk库是NLP功能的一个非常有用的库，它提供了Bleu Score的实现。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="ee1a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在我们知道了Bleu Score是如何工作的，还有几点我们应该注意。</p><h1 id="58ca" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">Bleu分数是基于语料库计算的，而不是单个句子</h1><p id="7093" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">虽然我们使用了匹配单句的例子，但是Bleu分数是通过将整个预测语料库的文本作为一个整体来计算的。</p><p id="9753" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">因此，你不能单独计算语料库中每个句子的Bleu分数，然后以某种方式平均这些分数。</p><h1 id="e37e" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">Bleu评分的优势</h1><p id="b4aa" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">Bleu Score如此受欢迎的原因是它有几个优点:</p><ul class=""><li id="ed91" class="nb nc iq lh b li lj ll lm lo nd ls ne lw nf ma np nh ni nj bi translated">它计算速度快，容易理解。</li><li id="0447" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">这与人类评价同一文本的方式一致。</li><li id="45c4" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">重要的是，它是独立于语言的，这使得它可以直接应用于您的NLP模型。</li><li id="7c91" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">当你有一个以上的基本真理句子时，可以使用它。</li><li id="1870" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">它的应用非常广泛，这样可以更容易地将您的结果与其他工作进行比较。</li></ul><h1 id="98e5" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">Bleu评分的弱点</h1><p id="1f45" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">尽管广受欢迎，但Bleu Score一直因其弱点而受到批评:</p><ul class=""><li id="0290" class="nb nc iq lh b li lj ll lm lo nd ls ne lw nf ma np nh ni nj bi translated">它不考虑单词的意思。对于一个人来说，用一个不同的词表达同样的意思是完全可以接受的，比如用“守夜人”而不是“警卫”。但是Bleu Score认为这是一个不正确的词。</li><li id="190f" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">它只查找完全匹配的单词。有时同一个词的一个变体可以被使用，例如“rain”和“raining ”,但是Bleu Score认为这是一个错误。</li><li id="71d9" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">它忽略了单词的重要性。使用Bleu Score，与句子不太相关的不正确单词(如“to”或“an ”)会受到与对句子意义有重要贡献的单词同样严重的惩罚。</li><li id="5634" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">它不考虑单词的顺序，例如，句子“警卫因下雨而迟到”和“因警卫而下雨迟到”将得到相同的(单字母组合)Bleu分数，即使后者完全不同。</li></ul><h1 id="43f5" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">语音转文本应用使用单词错误率，而不是Bleu分数</h1><p id="8725" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">虽然自动语音识别模型也输出文本，但是目标句子是明确的，并且通常不需要解释。在这种情况下，Bleu分数不是理想的指标。</p><p id="d106" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这些应用程序通常使用的度量标准是单词错误率(WER)，或者它的兄弟，字符错误率(CER)。它一个字一个字地(或一个字符一个字符地)比较预测的输出和目标抄本，以计算出它们之间的差异。</p><p id="5959" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">差异可以是存在于转录本中但在预测中缺失的单词(被计为删除)、不在转录本中但已被添加到预测中的单词(插入)、或者在预测和转录本之间改变的单词(替换)。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/22d21dfb1179f228856056e63a58f6a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/0*9CWYHcb2XQ-e0EXZ.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">统计转录本和预测之间的插入、删除和替换(图片由作者提供)</p></figure><p id="9a31" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">度量公式相当简单。它是差异相对于总字数的百分比。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi om"><img src="../Images/2451e98e4e6e052052c9d34c6d7c131c.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/0*A_nDvTaGvx8Kooi3.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">单词错误率计算(图片由作者提供)</p></figure><p id="88d9" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">WER计算是基于衡量两个单词之间差异的莱文斯坦距离。</p><p id="0795" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">尽管WER是语音识别中使用最广泛的度量标准，但它有一些缺点:</p><ul class=""><li id="b392" class="nb nc iq lh b li lj ll lm lo nd ls ne lw nf ma np nh ni nj bi translated">它不区分对句子意义重要的词和不相关的词。</li><li id="03ba" class="nb nc iq lh b li nk ll nl lo nm ls nn lw no ma np nh ni nj bi translated">在比较单词时，它不考虑两个单词是仅仅单个字符不同还是完全不同。</li></ul><h1 id="9632" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">结论</h1><p id="bc02" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">希望这能让你理解NLP的两个最重要的指标，以及它的优点和缺点。</p><p id="0c19" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">最后，如果你喜欢这篇文章，你可能也会喜欢我关于变形金刚、音频深度学习和地理定位机器学习的其他系列。</p><div class="on oo gp gr op oq"><a rel="noopener follow" target="_blank" href="/transformers-explained-visually-part-1-overview-of-functionality-95a6dd460452"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd ja gy z fp ov fr fs ow fu fw iz bi translated">直观解释的变压器(第1部分):功能概述</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">NLP变形金刚的简明指南，以及为什么它们比rnn更好，用简单的英语。注意力如何帮助…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">towardsdatascience.com</p></div></div><div class="oz l"><div class="pa l pb pc pd oz pe ky oq"/></div></div></a></div><div class="on oo gp gr op oq"><a rel="noopener follow" target="_blank" href="/audio-deep-learning-made-simple-part-1-state-of-the-art-techniques-da1d3dff2504"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd ja gy z fp ov fr fs ow fu fw iz bi translated">音频深度学习变得简单(第一部分):最新技术</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">颠覆性深度学习音频应用和架构世界的温和指南。以及为什么我们都需要…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">towardsdatascience.com</p></div></div><div class="oz l"><div class="pf l pb pc pd oz pe ky oq"/></div></div></a></div><div class="on oo gp gr op oq"><a rel="noopener follow" target="_blank" href="/leveraging-geolocation-data-for-machine-learning-essential-techniques-192ce3a969bc"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd ja gy z fp ov fr fs ow fu fw iz bi translated">利用地理位置数据进行机器学习:基本技术</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">简明的地理空间数据特征工程和可视化指南</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">towardsdatascience.com</p></div></div><div class="oz l"><div class="pg l pb pc pd oz pe ky oq"/></div></div></a></div><p id="a7e0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们继续学习吧！</p></div></div>    
</body>
</html>