<html>
<head>
<title>Automate and Supercharge Google Colab with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript自动化和增强Google Colab</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/automate-and-supercharge-google-colab-with-javascript-9f494d98489d?source=collection_archive---------15-----------------------#2021-04-14">https://towardsdatascience.com/automate-and-supercharge-google-colab-with-javascript-9f494d98489d?source=collection_archive---------15-----------------------#2021-04-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="31c9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在Colab上运行预先安排的Python脚本，并在您自己的驱动器上访问结果</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/97a57f963382a05892cb3120cd5e46d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Wgq5v-_v1hvR-JsH"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Jean-Philippe Delberghe 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h2 id="6c38" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">介绍</h2><p id="73d7" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">云计算正迅速成为数据科学家和公司的首选武器，这也是有充分理由的。有了提供给你的资源和与之相关的极小的费用，辨别云和本地计算实际上只是一个基本的算术问题。多年来，像亚马逊网络服务、微软Azure、谷歌云平台和其他平台都竞相向客户提供最复杂、最先进、但最实惠的服务。具有讽刺意味的是，谷歌作为科技行业的先驱之一，在这场游戏中姗姗来迟，他们仍在弥补失去的时间。但是随着几年前Google Colab的推出，他们已经向全世界提供了一种服务，这种服务是无与伦比的，因为你没有为它付费。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mo"><img src="../Images/d82228cf5c862fa3ae5081a19ec211c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*MJUwFhrc_1VdyOVr6_V94w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">可比虚拟机—每小时定价。图片作者。</p></figure><p id="e97f" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">从资源分配的角度快速查看一下最近的产品，就会发现使用Colab每一小时平均可以节省16.3美分。事实上，如果您自己进行调配，为每个Colab会话调配的实际虚拟机本身每小时会花费您0.16美元。下表显示了Amazon Web Services、Microsoft Azure和Google Cloud Platform提供的与Colab最具可比性的虚拟机及其各自的规格和价格。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/bc196c60147bcb32d8d6afe7f6fba89a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RF1LWM3C87f2HcYEa3Qz-A.png"/></div></div></figure><p id="316e" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">换句话说，Colab是一个不花钱的好东西。更不用说Colab还为您提供了对GPU和TPU的访问，这意味着您实际上每小时节省了16美分以上。最棒的是，实际上，世界上任何地方的任何人都可以按需访问它。请注意，这种善良也有局限性。您最多可以运行12个小时的会话，空闲超时大约为半小时。此外，如果您被发现过度使用Colab的一些资源，如GPU和TPU，您可能会面临编程瓶颈。尽管如此，这样的限制还是过于宽松了。然而，为了更好地衡量，我们鼓励您有效地使用资源，不要过度使用，以避免任何服务中断。</p><h2 id="4714" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">Colab自动化</h2><p id="67d0" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">人们想要自动化Colab的原因有很多:</p><ul class=""><li id="3be1" class="mv mw it lx b ly mp mb mq li mx lm my lq mz mn na nb nc nd bi translated">运行Python脚本时要留出时间间隔，以避免过度利用可用资源。</li><li id="168b" class="mv mw it lx b ly ne mb nf li ng lm nh lq ni mn na nb nc nd bi translated">您的脚本是一个时间关键的程序，需要在预先安排的时间运行。</li><li id="621b" class="mv mw it lx b ly ne mb nf li ng lm nh lq ni mn na nb nc nd bi translated">确保您的程序在完成时或系统超时/关闭前关闭。</li></ul><p id="43b6" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">不管有什么原因，您确实可以通过编写JavaScript的小片段来自动化Colab，这些小片段将在您的浏览器控制台上运行，以在Colab界面上交互和模拟按钮按压，从而在特定时间或通过特定触发来启动和/或停止您的会话。</p><p id="75f0" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">要插入并运行JavaScript代码片段，请在您选择的浏览器上按F12打开控制台。然后将JavaScript片段粘贴到命令窗口中，并按enter键。随后，浏览器将运行代码，通过模拟按钮点击来自动化Google Colab。要查找需要点击的按钮的JavaScript路径，请右键单击按钮并选择“检查”,或者使用浏览器控制台中的“选择一个元素”光标查找相关路径，如下所示。请注意，Google可能会动态更改这些路径。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/451e93b3a96ac6f272dca4d50467c750.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TuMBoQesmJ-pbtcwCMXB3A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用“选择一个元素”光标定位按钮元素。图片作者。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/f02b5aacf28a736e7a5e09725f27ce68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*umgurl5GAZSToL6VJlTYqg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">右键单击按钮元素复制JavaScript路径。图片作者。</p></figure><p id="21d1" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated"><strong class="lx iu">场景1: </strong>在预先安排的时间运行/终止会话</p><p id="5b9a" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">对于我们的第一个场景，我们将立即运行我们的Python脚本(或者如果需要，在一定的秒数之后)，然后我们将在指定的秒数之后终止会话。为此，我们将实施以下步骤:</p><ol class=""><li id="4c63" class="mv mw it lx b ly mp mb mq li mx lm my lq mz mn nl nb nc nd bi translated">激活Colab会话</li><li id="7e2d" class="mv mw it lx b ly ne mb nf li ng lm nh lq ni mn nl nb nc nd bi translated">运行脚本(在预先安排的时间)</li><li id="8597" class="mv mw it lx b ly ne mb nf li ng lm nh lq ni mn nl nb nc nd bi translated">终止会话(在预先安排的时间)</li></ol><p id="7495" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">下面的视频展示了自动化Google Colab的JavaScript代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/96fa4a271de3b251dea2b2c4b4087923.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*5wC2pRrrCntpApruz3H2LA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者视频。</p></figure><p id="951d" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">请在下面找到该场景的JavaScript代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="fe47" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated"><strong class="lx iu">场景2: </strong>迭代地运行/终止会话</p><p id="de06" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">对于我们的第二个场景，我们将使用以下步骤根据需要多次迭代运行Python脚本:</p><ol class=""><li id="ea85" class="mv mw it lx b ly mp mb mq li mx lm my lq mz mn nl nb nc nd bi translated">激活Colab会话</li><li id="ba12" class="mv mw it lx b ly ne mb nf li ng lm nh lq ni mn nl nb nc nd bi translated">如果迭代次数小于指定次数，则运行脚本</li><li id="4793" class="mv mw it lx b ly ne mb nf li ng lm nh lq ni mn nl nb nc nd bi translated">终止会话</li></ol><p id="d2a0" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">请在下面找到该场景的JavaScript代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="39a7" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated"><strong class="lx iu">场景3: </strong>动态运行/终止会话</p><p id="e019" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">对于最后一个场景，我们将动态运行Python脚本，直到它提示我们终止它。这对于具有动态或未知运行时的脚本很有用。将为此用例实施以下步骤:</p><ol class=""><li id="0366" class="mv mw it lx b ly mp mb mq li mx lm my lq mz mn nl nb nc nd bi translated">激活Colab会话</li><li id="4ad0" class="mv mw it lx b ly ne mb nf li ng lm nh lq ni mn nl nb nc nd bi translated">运行脚本，直到执行完成</li><li id="5058" class="mv mw it lx b ly ne mb nf li ng lm nh lq ni mn nl nb nc nd bi translated">向控制台日志发送消息以触发终止</li><li id="d810" class="mv mw it lx b ly ne mb nf li ng lm nh lq ni mn nl nb nc nd bi translated">终止会话</li></ol><p id="fb98" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">为了提示我们的JavaScript程序终止会话，我们将在Python脚本的末尾添加一行，这将产生一个错误。例如，我们可以尝试除以0，这将提示Colab显示一条错误消息，该消息也将记录在浏览器的控制台中。然后，我们可以使用相同的JavaScript程序不断检查日志的长度是否超过0，一旦超过，就会终止会话。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/d7312db859ec7835743233b285badbab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*At8gmDnTtCeQ4cPvR_gNWg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">空日志允许程序无限期运行。图片作者。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/2fbbfd0b561ca9736bb13d052b8eb1e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LxxXEMlZ9J4_EMruClZjMg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">完整日志将触发JavaScript终止会话。图片作者。</p></figure><p id="4418" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">请在下面找到该场景的JavaScript代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="b0d7" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">持久保存结果</h2><p id="e143" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">Google Colab无缝连接到Google Drive，这使我们能够将执行结果持久保存到我们自己的驱动器中。此外，您可以通过从Google Drive中的csv文件读取Python脚本来进一步自动化您的程序，该文件可以指导您的程序执行某些操作。例如，每次运行脚本时，它将首先检查Google Drive电子表格中的第一行，告诉它要操作数据帧中的哪一列，一旦执行完成，Python脚本将删除第一行并重新保存电子表格，以便下次运行时将移动到数据帧中的下一列。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/a600483e21ffed7a0d1b9a98f545003b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tXo0EFXO21Ys9bRNylEtAA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">将Google Drive连接到Colab。图片作者。</p></figure><p id="3f40" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">使用以下代码从您的Google Drive访问“指南”文件。</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="d951" class="kz la it nr b gy nv nw l nx ny">guide = pd.read_csv('drive/MyDrive/ColabNotebooks/guide.csv')<br/>column_to_manipulate = guide.iloc[0][0]</span></pre><p id="0638" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">执行完成后，只需忽略第一行，将文件重新保存到Google Drive:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="8623" class="kz la it nr b gy nv nw l nx ny">guide = guide.iloc[1:]<br/>guide.to_csv('drive/MyDrive/ColabNotebooks/guide.csv',index=False)</span></pre><h2 id="c08e" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">结论</h2><p id="10c8" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">Google Colab和云计算总体上提供了对大量计算资源的无与伦比的访问，直到最近许多人还无法访问这些资源。这样的功能加上一些使用JavaScript的自动化可以创造无限的机会，同时以更有效的方式利用资源。具体来说，在Colab的情况下，这样一种优秀的产品最好不要过量使用，以使社区中的每个人都能平等地受益于这样一包好东西。</p><div class="nz oa gp gr ob oc"><a href="https://github.com/mkhorasani/colab_automation" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">mkhorasani/colab _自动化</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">使用JavaScript自动运行Google Colab，以运行预先安排的动态Python脚本</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">github.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq ks oc"/></div></div></a></div></div><div class="ab cl or os hx ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="im in io ip iq"><h1 id="f8a7" class="oy la it bd lb oz pa pb le pc pd pe lh jz pf ka ll kc pg kd lp kf ph kg lt pi bi translated">新到中？您可以在此订阅和解锁无限文章<a class="ae ky" href="https://khorasani.medium.com/membership" rel="noopener">。</a></h1></div></div>    
</body>
</html>