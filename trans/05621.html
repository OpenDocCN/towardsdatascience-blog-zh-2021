<html>
<head>
<title>Data Visualization using Matplotlib &amp; Seaborn</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Matplotlib和Seaborn实现数据可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-visualization-using-matplotlib-seaborn-97f788f18084?source=collection_archive---------13-----------------------#2021-05-19">https://towardsdatascience.com/data-visualization-using-matplotlib-seaborn-97f788f18084?source=collection_archive---------13-----------------------#2021-05-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="7dfa" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">数据可视化</h2><div class=""/><div class=""><h2 id="55ae" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">着眼于增强可视化的定制选项，并检查一些鲜为人知的绘图功能</h2></div><p id="4be9" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi ln translated">数据可视化通过地图或图形提供了一个可视化的环境。在这样做的时候，它将数据转换成一种更自然的形式，以便人类大脑理解并挑选出感兴趣的模式或点。一个好的可视化有助于信息的传递或作为数据展示(讲故事)的一部分的行动号召。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi lw"><img src="../Images/70a77be94ce8866532e7491da631851b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tXgfKcro8FNbRRolDgbu4Q.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片|用于搞笑，用于专业演示时风险自担。</p></figure><p id="afe4" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">这个潜在项目的想法部分是在几年前维护iaito订单记录时受到启发的。我选择这个数据，因为我觉得这可能是一种将数据科学(可视化和分析)与传统艺术(Iaido)联系起来的方式，也是一种可视化实践。该数据集是关于2013年至2021年iaito订单详情以及iaito规格和成本(JPY)的数据。出于隐私原因，敏感信息，如送货地址、姓名等。从一开始就没有记录在数据中。</p><blockquote class="mm mn mo"><p id="de8e" class="kr ks mp kt b ku kv kd kw kx ky kg kz mq lb lc ld mr lf lg lh ms lj lk ll lm im bi translated">Iaito是练习用的仿武士刀。Koshirae指的是iaito上的配件— (Fuchi，Kashira，Kojiri)。剑条指的是剑卫。长度的测量系统基于日本单位(即长度测量用的日本单位)；为了便于解释，这些单位随后被转换成公制单位。从初学者到高级的模型是Shoden-Chuden-Okuden。</p></blockquote></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h2 id="fa94" class="na nb it bd nc nd ne dn nf ng nh dp ni la nj nk nl le nm nn no li np nq nr iz bi translated">内容</h2><ul class=""><li id="571e" class="ns nt it kt b ku nu kx nv la nw le nx li ny lm nz oa ob oc bi translated">图书馆</li><li id="f138" class="ns nt it kt b ku od kx oe la of le og li oh lm nz oa ob oc bi translated">Matplotlib和Seaborn方法</li><li id="b2cd" class="ns nt it kt b ku od kx oe la of le og li oh lm nz oa ob oc bi translated">带代码的可视化示例</li><li id="68b9" class="ns nt it kt b ku od kx oe la of le og li oh lm nz oa ob oc bi translated">最后的想法</li></ul></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h2 id="0de3" class="na nb it bd nc nd ne dn nf ng nh dp ni la nj nk nl le nm nn no li np nq nr iz bi translated">图书馆</h2><p id="acdf" class="pw-post-body-paragraph kr ks it kt b ku nu kd kw kx nv kg kz la oi lc ld le oj lg lh li ok lk ll lm im bi translated">Matplotlib和seaborn是Python中可视化数据的常用工具。在本文中，使用这两个库生成了一些可视化效果，并简要介绍了绘图功能。</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h2 id="db33" class="na nb it bd nc nd ne dn nf ng nh dp ni la nj nk nl le nm nn no li np nq nr iz bi translated">Matplotlib和Seaborn方法</h2><p id="25df" class="pw-post-body-paragraph kr ks it kt b ku nu kd kw kx nv kg kz la oi lc ld le oj lg lh li ok lk ll lm im bi translated">使用matplotlib时，有两种方法:函数接口和面向对象接口。作为初学者，我们通常会看到更多的前一种情况。随着人们对使用这个库绘图越来越熟悉，后一种方法开始发挥作用，用于可伸缩性和更复杂的定制。</p><pre class="lx ly lz ma gt ol om on oo aw op bi"><span id="28f2" class="na nb it om b gy oq or l os ot"># Example<br/>x = smthg<br/>y = smthg</span><span id="9702" class="na nb it om b gy ou or l os ot"># plt interface<br/>plt.figure(figsize=(9,7)<br/>plt.plot(x,y)</span><span id="e94b" class="na nb it om b gy ou or l os ot"># object-oriented interface<br/>fig, ax = plt.subplots()  <br/>ax.plot(x, y)</span></pre><p id="5202" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">对于seaborn来说，也有两种方法。它们是轴级函数和图形级函数。轴级函数采用一个显式的<em class="mp"> ax </em>参数，并返回一个<em class="mp"> Axes </em>对象。对于图形级别的函数，这些函数需要对绘制的图形进行整体控制。因此，需要传入一个“数字级别”的参数。一个例子是通过<em class="mp">高度</em>和<em class="mp">长宽比</em>值定制图形尺寸。</p><pre class="lx ly lz ma gt ol om on oo aw op bi"><span id="8784" class="na nb it om b gy oq or l os ot"># Typical object-oriented style (seaborn)<br/>f, (ax1, ax2) = plt.subplots(2) <br/>sns.regplot(x, y, ax=ax1) <br/>sns.kdeplot(x, ax=ax2)</span><span id="fa45" class="na nb it om b gy ou or l os ot"># Figure-level<br/>sns.catplot(data=df, x='x_variable', y='y_variable',  hue='hue', height=8, aspect=12)</span></pre><blockquote class="mm mn mo"><p id="dd1b" class="kr ks mp kt b ku kv kd kw kx ky kg kz mq lb lc ld mr lf lg lh ms lj lk ll lm im bi translated">没有意识到一个特定的seaborn情节是哪一级功能可能会在很多时候出错(我当然是其中之一)。如果卡住，检查绘图类型。</p></blockquote><p id="faf3" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">各个功能的曲线图示例:</p><ul class=""><li id="a982" class="ns nt it kt b ku kv kx ky la ov le ow li ox lm nz oa ob oc bi translated">“轴级”功能:regplot、boxplot、kdeplot。</li><li id="9c3a" class="ns nt it kt b ku od kx oe la of le og li oh lm nz oa ob oc bi translated">“图形级”功能:relplot、catplot、displot、pairplot、jointplot。</li></ul></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h2 id="16d5" class="na nb it bd nc nd ne dn nf ng nh dp ni la nj nk nl le nm nn no li np nq nr iz bi translated">带代码的可视化示例</h2><p id="5fcf" class="pw-post-body-paragraph kr ks it kt b ku nu kd kw kx nv kg kz la oi lc ld le oj lg lh li ok lk ll lm im bi translated">这些示例展示了创建地块以及特定自定义的各种方法。最初，我采取的是“如果有效，那就好”的心态。为了可维护性和在试验新概念时的一致性，我对代码进行了几次重构。例如，标题、轴、刻度标签和图例的一致代码结构通常适用于所有地块。此外，我还考虑了潜在的受众，以及让可视化流行起来的方法。其中一些方法包括使用配色方案和形状。在颜色方面，有三种主要的调色板可供选择:</p><ul class=""><li id="ef90" class="ns nt it kt b ku kv kx ky la ov le ow li ox lm nz oa ob oc bi translated">定性的</li><li id="59cc" class="ns nt it kt b ku od kx oe la of le og li oh lm nz oa ob oc bi translated">连续的</li><li id="2e5b" class="ns nt it kt b ku od kx oe la of le og li oh lm nz oa ob oc bi translated">分歧</li></ul><p id="4b40" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">为了便于生成配色方案，我使用了来自<a class="ae oy" href="https://learnui.design/tools/data-color-picker.html#palette" rel="noopener ugc nofollow" target="_blank">数据颜色选择器</a>的工具。为了重复使用，还创建了字体大小的通用占位符。</p><pre class="lx ly lz ma gt ol om on oo aw op bi"><span id="3306" class="na nb it om b gy oq or l os ot"># create placeholder for fontsizing<br/># x &amp; y label fontsize<br/>xls = 14<br/>yls = 14</span><span id="5001" class="na nb it om b gy ou or l os ot"># x &amp; y tick fontsize<br/>xts = 13<br/>yts = 13</span><span id="75e7" class="na nb it om b gy ou or l os ot"># title fontsize<br/>ts = 15</span><span id="218d" class="na nb it om b gy ou or l os ot"># legend fontsize<br/>ls = 13</span></pre></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><p id="c2c6" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi ln translated">用pyplot接口绘制相对简单。对于下面的折线图示例，fig.autofmt_date()提供了定制轴刻度标签的替代方法。旋转刻度标签的常见原因要么是单位名称太长(可以通过选择缩写的表示单位来缓解)，要么是因为日期。正如函数名所暗示的，它执行日期刻度标签的自动旋转和对齐(将y刻度标签更改为“ydate”)。</p><pre class="lx ly lz ma gt ol om on oo aw op bi"><span id="ce07" class="na nb it om b gy oq or l os ot"># Establish the size of the figure.<br/>fig = plt.figure(figsize=(16, 6))</span><span id="a8b9" class="na nb it om b gy ou or l os ot">plt.plot(df_fedex['postage'], linewidth=2,color='blue')</span><span id="d961" class="na nb it om b gy ou or l os ot"># Customize<br/>plt.title('Postage over time',fontsize=ts)<br/>plt.ylabel('Price (JPY)', fontsize=yls)<br/>plt.yticks(size=yts)<br/>plt.xticks(size=12)</span><span id="8857" class="na nb it om b gy ou or l os ot"># Rotate and align the tick labels so they look better.<br/>fig.autofmt_xdate()<br/>plt.show()</span></pre><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi oz"><img src="../Images/c749fa1bb2f1971325764e1da94579e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ekq1lfIle7Xt5S_Rf81rXA.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="5bb5" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">饼图通常被过度使用，可能会扭曲所呈现的信息(即没有刻度)。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/dc0746ba03095367740a9da71de27a5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*bRpplvclJW1hmi6uwNIbkg.jpeg"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">图片由作者提供|是的，为这些图表的上下文信息添加了比例。|工具:imgflip.com</p></figure><p id="7b4c" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">尽管如此，它在可视化中还是有一席之地的——用于呈现一些类别及其数量/百分比。谨慎使用，利用注释、配色方案和形状，它仍然可以产生影响。对于下面的饼图，我采用了可重复使用的颜色方案，并在图表注释中添加了百分比和绝对订单数量。添加一个圆形将饼图转换成一个环形图，以增强视觉效果。</p><pre class="lx ly lz ma gt ol om on oo aw op bi"><span id="ff74" class="na nb it om b gy oq or l os ot"># Create figure<br/>fig, ax = plt.subplots(figsize=(6,6), subplot_kw=dict(aspect="equal"))</span><span id="6664" class="na nb it om b gy ou or l os ot"># Standarizing color scheme for the Iaito models<br/>palette = ['#6d91ad','#004c6d','#416e8c','#99b6ce','#c6ddf1' ]</span><span id="70f2" class="na nb it om b gy ou or l os ot">def make_autopct(count):<br/>    def my_autopct(pct):<br/>        total = sum(count)<br/>        val = int(round(pct*total/100.0))<br/>        return f'{pct:.1f}% ({val:d})'<br/>    return my_autopct</span><span id="5c7a" class="na nb it om b gy ou or l os ot">ax = df_pie['count'].plot(kind='pie',fontsize=ls,autopct=make_autopct(count),pctdistance=0.6, colors=palette)</span><span id="315e" class="na nb it om b gy ou or l os ot">ax.set_ylabel("")<br/>ax.set_title("Distribution of Iaito models",fontsize=ts)</span><span id="20f1" class="na nb it om b gy ou or l os ot"># Add a white circle to center of pie chart<br/>centre_circle = plt.Circle((0,0),0.80,fc='white')<br/>fig = plt.gcf()<br/>fig.gca().add_artist(centre_circle)</span><span id="3e11" class="na nb it om b gy ou or l os ot">plt.show()</span></pre><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/c9c4564b84633408937d69fa76db0b30.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*oVoA-1nIzLlXs2oT3Y_LTA.png"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="d0d9" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">继续使用面向对象的绘图方法，下面的箱线图结合了这种方法和前面提到的配色方案概念。默认的箱形图是垂直的，但是可以通过交换x和y输入来重新排列。</p><pre class="lx ly lz ma gt ol om on oo aw op bi"><span id="e58d" class="na nb it om b gy oq or l os ot"># boxplot, models are organised in ascending order<br/>palette_box = ['#c6ddf1','#99b6ce','#6d91ad','#416e8c','#004c6d']</span><span id="060a" class="na nb it om b gy ou or l os ot">fig, (ax1,ax2) = plt.subplots(2,1,figsize=(14,8), sharey=True)<br/>sns.boxplot(data=df2, y='model', x='model_price',ax=ax1, palette=palette_box)<br/>sns.boxplot(data=df2, y='model', x='iaito_total_price',ax=ax2, palette=palette_box)</span><span id="9bb7" class="na nb it om b gy ou or l os ot">ax1.set_ylabel('')<br/>ax2.set_ylabel('')<br/>ax1.set_xlabel('')<br/>ax2.set_xlabel('price (JPY)',fontsize = yls)<br/>ax1.set_title('Base price by model', fontsize = ts)<br/>ax2.set_title('Overall price by model', fontsize = ts)<br/>ax1.tick_params(axis='x', labelsize='large')<br/>ax1.tick_params(axis='y', labelsize='large')<br/>ax2.tick_params(axis='x', labelsize='large')<br/>ax2.tick_params(axis='y', labelsize='large')</span><span id="55e3" class="na nb it om b gy ou or l os ot">plt.tight_layout<br/>plt.show()</span></pre><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi pc"><img src="../Images/ec205c7ceaca374d82f05df56cf2161a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wrCMbtiL0K4NtAmnaMAuvA.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="6020" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">该配色方案也可用于替代seaborn地块中的色调。在下面的示例中，lmplot(图形级函数)配色方案(通过分类类&amp;<em class="mp">PLT . use . style(gg plot)</em>的<em class="mp">色调</em>的组合调用)可以通过为seaborn设置调色板来覆盖，如下所示:</p><pre class="lx ly lz ma gt ol om on oo aw op bi"><span id="d367" class="na nb it om b gy oq or l os ot"># Set your custom color palette<br/>palette = ['#6d91ad','#004c6d','#416e8c','#99b6ce','#c6ddf1' ]<br/>sns.set_palette(sns.color_palette(palette))</span><span id="6100" class="na nb it om b gy ou or l os ot"># Consistent grey background<br/>plt.style.use('seaborn-darkgrid')</span><span id="df6c" class="na nb it om b gy ou or l os ot"># Lmplot is a figure-level function plot<br/>ax = sns.lmplot(x='model_price', y='iaito_total_price',data=df,<br/>           fit_reg=False, #no regression line<br/>           hue='model',height=7, aspect=1.2, legend=False,legend_out=False)<br/>plt.title('Iaito model price vs total price', fontsize=ts)<br/>plt.ylim(30000,None)<br/>plt.yticks(np.arange(35000, 210000, step=10000), fontsize=yts)<br/>plt.ylabel('Iaito total price (JPY)',fontsize=yls)<br/>plt.xticks(rotation=45, fontsize=xts)<br/>plt.xlabel('Iaito model base price (JPY)',fontsize=xls)<br/>plt.legend(fontsize=ls)</span><span id="79b2" class="na nb it om b gy ou or l os ot">plt.show()</span></pre><div class="lx ly lz ma gt ab cb"><figure class="pd mb pe pf pg ph pi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><img src="../Images/601ac91a5c5da20d47c3802446262f1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*kJTH6uB45H8eztCWTRbYpw.png"/></div></figure><figure class="pd mb pe pf pg ph pi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><img src="../Images/00a466c1f29d0fd9ad1bffcfc8bf0e93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*BByHADR4cUbupB8708jeQg.png"/></div><p class="mi mj gj gh gi mk ml bd b be z dk pj di pk pl translated">作者提供的图片</p></figure></div><p id="f903" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">Violin图可用于表示不同iaito模型中不同“类别”(如本例中的Kojiri和No kojiri)的变量分布(或样本分布)的比较。</p><pre class="lx ly lz ma gt ol om on oo aw op bi"><span id="6a5b" class="na nb it om b gy oq or l os ot">ax= sns.catplot(x="model", y="custom_design(cost)", data=df_ko, hue="kojiri", <br/>                kind="violin", split=True, inner="stick", palette="mako", linewidth=1,<br/>                height=4,aspect=2.5)<br/>ax.fig.suptitle('Kojiri &amp; associated additional costs across models', fontsize=ts)<br/>ax.fig.subplots_adjust(left=0.1, top=0.9)<br/>ax.set_xlabels('')<br/>ax.set_ylabels('price (JPY)', fontsize=yls)<br/>ax.set_xticklabels(fontsize=xts)<br/>ax.set_yticklabels(fontsize=yts)<br/>ax._legend.set_title('Kojiri')</span><span id="9723" class="na nb it om b gy ou or l os ot">plt.show()</span></pre><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi pm"><img src="../Images/531433ef63c5841991305e745c90a51c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VHyYxFeL0q0-3Rp63jZmpQ.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="4340" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">matplotlib和seaborn的通用性相互支持。分组条形图可从plt.bar或plt.bar()或seaborn(如catplot)绘制。在matplotlib的情况下，这可以通过将轴索引偏移指定的条形宽度来实现。</p><pre class="lx ly lz ma gt ol om on oo aw op bi"><span id="4a4c" class="na nb it om b gy oq or l os ot"># seaborn catplot (horizontal grouped bar chart)<br/>ax = sns.catplot(y="kojiri", data=df_ko,<br/>                 kind="count", hue="model", <br/>                 palette=palette_box, edgecolor=".6",<br/>                 height=5, aspect=2,legend=False)<br/>ax.fig.suptitle('Iaito with &amp; without kojiri (by model count)', fontsize=ts)<br/>ax.fig.subplots_adjust(left=0.15, top=0.9)</span><span id="0b3d" class="na nb it om b gy ou or l os ot">label = np.arange(0,20)</span><span id="b05f" class="na nb it om b gy ou or l os ot">ax.set_xlabels('')<br/>ax.set_xticklabels(fontsize=xts)<br/>ax.set_ylabels('Kojiri', fontsize=yls)<br/>ax.set_yticklabels(fontsize=yts)<br/>ax.add_legend(fontsize=ls)<br/>plt.show()</span></pre><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi pn"><img src="../Images/9d9dbdfda2e8a14ca43930ade1a248dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0kIzzWzvokgjR-VMmQNGZQ.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><pre class="lx ly lz ma gt ol om on oo aw op bi"><span id="2fb4" class="na nb it om b gy oq or l os ot"># Setting the data<br/>years = [2013,2014,2015,2016,2017,2018,2019,2020,2021]<br/>Sho = [0,0,0,0,0,0,1,1,1]<br/>Chu_M = [0,0,0,0,1,2,2,2,2]<br/>Chu_S = [1,2,4,7,8,18,18,20,22]<br/>Oku_Nosyu = [0,0,0,1,1,3,4,4,4]<br/>Oku_Shin = [0,0,0,0,3,4,8,10,10]</span><span id="e317" class="na nb it om b gy ou or l os ot"># set bar width<br/>width=0.15</span><span id="1d18" class="na nb it om b gy ou or l os ot"># axis index<br/>years_index = np.arange(len(years))</span><span id="167e" class="na nb it om b gy ou or l os ot"># clear reset plt style<br/>plt.style.use('default')<br/>plt.style.use(['ggplot'])<br/>plt.figure(figsize=(8,5))</span><span id="719b" class="na nb it om b gy ou or l os ot"># plt interface approach for bar charts<br/>plt.bar(years_index-2*width, Sho, color='#c6ddf1', label='Sho', width=width, linewidth=0.4,edgecolor='darkgrey')</span><span id="1e85" class="na nb it om b gy ou or l os ot">plt.bar(years_index-width, Chu_M, color='#99b6ce', label='Chu_M', width=width)</span><span id="f65f" class="na nb it om b gy ou or l os ot">plt.bar(years_index, Chu_S, color='#6d91ad', label='Chu_S', width=width)</span><span id="c293" class="na nb it om b gy ou or l os ot">plt.bar(years_index+width, Oku_Nosyu, color='#416e8c', label='Oku_Nosyu', width=width)</span><span id="6e7f" class="na nb it om b gy ou or l os ot">plt.bar(years_index+2*width, Oku_Shin, color='#004c6d', label='Oku_Shin', width=width)</span><span id="77aa" class="na nb it om b gy ou or l os ot">plt.legend()</span><span id="9aaa" class="na nb it om b gy ou or l os ot">plt.title('Iaito model ownership',fontsize=ts)<br/>plt.xlabel('Year',fontsize=xls)<br/>plt.xticks(ticks=years_index, labels=years)<br/>plt.ylabel('Count',fontsize=yls)<br/>plt.yticks(list(np.arange(df_cumsum['count'].max()+1)))</span><span id="6e1e" class="na nb it om b gy ou or l os ot">plt.show()</span></pre><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi po"><img src="../Images/c680776a5939c488c4b87b03a56fe72b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XI1dlU-r1iFXo_toGBDwnA.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="7076" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">根据数据传达的信息、数据的特征和目标受众，某些情节可能更适合。例如，下面的catplot可能会传达五种型号的saya设计数量及其额外成本。但是随着数据点数量的增加，这可能是不可扩展的。最好将消息拆分，例如，根据saya设计价格的数量和分布来划分saya设计的受欢迎程度。这就是我对后一个方向的径向图所做的。代码片段在catplot之后。</p><pre class="lx ly lz ma gt ol om on oo aw op bi"><span id="3f83" class="na nb it om b gy oq or l os ot">ax = sns.catplot(x="model", y="saya(cost)", data=df_saya1,<br/>                 hue="saya", palette= 'tab20b', kind="swarm", s=10,<br/>                 height=4.5, aspect=2.5)<br/>ax.fig.suptitle('Saya across models',fontsize=ts)<br/>ax.fig.subplots_adjust(left=0.1, top=0.9)<br/>ax.set_xlabels('')<br/>ax.set_ylabels('price (JPY)', fontsize=yls)<br/>ax.set_xticklabels(fontsize=xts)<br/>ax.set_yticklabels(fontsize=yts)<br/>ax._legend.set_title('Saya')</span><span id="89f1" class="na nb it om b gy ou or l os ot">plt.show()</span></pre><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi pp"><img src="../Images/9a0b5d275a68adbd9873d747df956ee3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C5gGGdfmcG05Us4S-coR4g.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片|随着数据点的增加，可扩展性成为一个问题</p></figure><pre class="lx ly lz ma gt ol om on oo aw op bi"><span id="aaa6" class="na nb it om b gy oq or l os ot"># replicating saya color is impractical from experience. Use a sequential color scheme<br/>palette_saya = ['#7eedff','#6dd7ed','#5dc2dc','#4dadc9','#3e99b7','#3085a5','#217192','#125e7f','#004c6d',<br/>               'slateblue','rebeccapurple','purple','indigo']</span><span id="6f72" class="na nb it om b gy ou or l os ot"># initialize the figure<br/>plt.figure(figsize=(10,10))<br/>ax = plt.subplot(111, polar=True);<br/>plt.axis('off')<br/>plt.title('Saya ranked by price (JPY)',y=.9,fontsize=ts)</span><span id="946f" class="na nb it om b gy ou or l os ot"># set coordinate limits<br/>upperlimit = 100<br/>lowerlimit = 30</span><span id="c4bc" class="na nb it om b gy ou or l os ot"># compute max and min of dataset<br/>max_ = df_saya2['saya(cost)'].max()<br/>min_ = df_saya2['saya(cost)'].min()</span><span id="61ac" class="na nb it om b gy ou or l os ot"># compute heights (conversion of saya_charge into new coordinates)<br/># 0 will be converted to lower limit (30)<br/># max_ converted to upper limit (100)<br/>slope = (max_ - lowerlimit)/max_<br/>heights = slope * df_saya2['saya(cost)'] + lowerlimit</span><span id="7485" class="na nb it om b gy ou or l os ot"># width of each bar<br/>width = 2*np.pi / len(df_saya2.index)</span><span id="fac8" class="na nb it om b gy ou or l os ot"># compute angle each bar is centered on<br/>indexes = list(range(1, len(df_saya2.index)+1))<br/>angles = [element * width for element in indexes]</span><span id="9202" class="na nb it om b gy ou or l os ot"># draw<br/>bars = ax.bar(x=angles, height=heights, width=width, bottom=lowerlimit,<br/>              linewidth=1,edgecolor="white",color=palette_saya)</span><span id="6e5f" class="na nb it om b gy ou or l os ot"># padding between bar and label<br/>labelPadding = 1000</span><span id="a41b" class="na nb it om b gy ou or l os ot"># label<br/>for bar, angle, height, label in zip(bars,angles,heights,df_saya2['saya_']):<br/>    # specify rotation in degrees<br/>    rotation = np.rad2deg(angle)<br/>    <br/>    #flip some labels upside down for readability<br/>    alignment = ""<br/>    if angle &gt;= np.pi/2 and angle &lt; 3*np.pi/2:<br/>        alignment = "right"<br/>        rotation += 180<br/>    else:<br/>        alignment = "left"<br/>    <br/>    # add label<br/>    ax.text(x=angle, y=lowerlimit + bar.get_height() + labelPadding,<br/>            s=label, ha=alignment, va='center', rotation=rotation, rotation_mode="anchor",size=12)</span><span id="1ba0" class="na nb it om b gy ou or l os ot">plt.show()</span></pre><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi pq"><img src="../Images/9cc66c601af685a8a057186ed213f363.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-5klNkYGXNL2kCuQEWFUlg.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片|非常规，但在这种情况下有效</p></figure><p id="ba88" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">最后但同样重要的是，xkcd风格。xkdc的情节以其幽默、科学术语和视角的平衡在许多人的脑海中占据了特殊的位置。这种绘图风格可以通过<em class="mp"> plt.xkcd() </em>从matplotlib中调用，就像这样。输出是本文的第一幅图像。令人惊讶的是，xkcd风格的简单图形需要大量的计划和思考，尤其是注释位置和箭头位置。</p><pre class="lx ly lz ma gt ol om on oo aw op bi"><span id="61a6" class="na nb it om b gy oq or l os ot"># create a dataframe for 2019-11-01 date<br/># anchoring annotations and like later</span><span id="a5f8" class="na nb it om b gy ou or l os ot">data = {'date': ['2019-11-01','2017-01-01'], <br/>        'value': [22600,17500]}<br/>df_dt = pd.DataFrame(data, columns = ['date', 'value'])<br/>df_dt['date'] = pd.to_datetime(df_dt['date'])</span><span id="e770" class="na nb it om b gy ou or l os ot"># Create the postage chart in xkcd style<br/>plt.style.use('default')<br/>plt.xkcd()</span><span id="05be" class="na nb it om b gy ou or l os ot"># create yticks for labeling<br/>yticks = np.arange(5000,25000,2500)</span><span id="3fe6" class="na nb it om b gy ou or l os ot"># Establish the size of the figure.<br/>fig, ax = plt.subplots(figsize=(12, 6))<br/>plt.plot()<br/># Scatter plot<br/>ax.scatter(df_fedex['date'],df_fedex['postage'], s=40,color='blue')<br/># vertical line<br/>ax.vlines(df_dt['date'][0],5000,df_dt['value'][0],linestyle='-.',linewidth=1,color='r')</span><span id="6e93" class="na nb it om b gy ou or l os ot"># annotate<br/>ax.text(df_dt['date'][0],7500,'covid emerges',fontsize=18)<br/>ax.annotate('4.5x increase!', fontsize=18,<br/>            xy=(df_fedex['date'][df_fedex.index[-1]],22516), <br/>            xytext=(df_dt['date'][1],17500),<br/>            arrowprops=dict(arrowstyle='-|&gt;',<br/>                           connectionstyle='angle3,angleA=0,angleB=-90')<br/>           )</span><span id="9edd" class="na nb it om b gy ou or l os ot"># Title &amp; labels<br/>ax.set_title('One more reason to mask up',fontsize=18)<br/>ax.set_ylabel('Postage (JPY)', fontsize=yls)<br/>ax.set_yticks(ticks=yticks)<br/>ax.set_yticklabels(labels=yticks,size=yts)<br/>plt.xticks(size=14)</span><span id="41f7" class="na nb it om b gy ou or l os ot"># Rotate and align the tick labels so they look better.<br/>fig.autofmt_xdate()<br/>plt.tight_layout()<br/><br/>plt.show()</span></pre></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h2 id="80a4" class="na nb it bd nc nd ne dn nf ng nh dp ni la nj nk nl le nm nn no li np nq nr iz bi translated">最后的想法</h2><p id="d58a" class="pw-post-body-paragraph kr ks it kt b ku nu kd kw kx nv kg kz la oi lc ld le oj lg lh li ok lk ll lm im bi translated">通过这个项目，我发现情节的结构是高度情境化的——目标受众、数据的性质和颜色等方面都发挥了作用。贯穿探索性数据分析和博客的情节组织也可能遵循非常不同的思路。总而言之，整个项目是一个数据发现、处理数据清理、分析、代码重构和实验的迭代过程。该流程还发现了数据采集上游的几个问题。为了提高数据质量，需要进行更多的日语翻译，并对项目代码(例如，tsuba代码)进行标记，这一工作已经完成(见后注)。进一步的项目扩展可能是对与刀剑相关的主题进行分析。尽管这些例子和方法并不详尽，但希望您能够获得一些见解，从而在定制pyplot &amp; seaborn可视化时减少潜在的障碍。</p><p id="6c64" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">感谢阅读！</p><p id="6182" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><em class="mp">后注:2021年5月22日——关于剑条家具的细节。数据集和代码可以在</em> <a class="ae oy" href="https://github.com/AngShengJun/petProj/tree/master/proj_nanato" rel="noopener ugc nofollow" target="_blank"> <em class="mp">这里</em> </a>访问</p></div></div>    
</body>
</html>