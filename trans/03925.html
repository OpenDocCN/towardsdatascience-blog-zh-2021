<html>
<head>
<title>How to Package Your Python Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何打包您的Python代码</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-package-your-python-code-df5a7739ab2e?source=collection_archive---------0-----------------------#2021-04-02">https://towardsdatascience.com/how-to-package-your-python-code-df5a7739ab2e?source=collection_archive---------0-----------------------#2021-04-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dcae" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解Python代码应该如何为PyPI打包</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a8fd74db66fd90081c239d87233da86a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oCAoF4AmOK3LwfYk"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@lawlesscapture?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">不法分子在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上抓拍</a>的照片</p></figure><p id="bd4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">Python最强大的特性是它的社区。几乎每个用例都有一个专门为它构建的包。</p><p id="86f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">需要发送手机/电子邮件提醒？<code class="fe me mf mg mh b">pip install knockknock</code> —构建ML应用？<code class="fe me mf mg mh b">pip install streamlit</code> —厌倦了你的终端？<code class="fe me mf mg mh b">pip install colorama</code>——太简单了！</p><p id="5379" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我知道这是显而易见的，但那些库并没有神奇地出现。对于每一个包，都有一个人，或者许多人，积极地开发和部署这个包。</p><p id="1cb7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每一个都是。</p><p id="77da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">全部30万以上。</p><p id="4d40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是Python之所以是Python的原因，它的支持程度是惊人的— <em class="mi">令人兴奋</em>。</p><p id="dadb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将学习如何构建我们自己的包。并将它们添加到Python包索引(PyPI)中。之后，我们将能够使用<code class="fe me mf mg mh b">pip install</code>来安装我们的软件包！让我们开始吧。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="1562" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">建什么？</h1><p id="31fc" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">第一步是弄清楚我们应该建造什么。一旦我们有了想法，就去PyPI搜索相同的包，它存在吗？如果是的话，你的想法有什么新的或更好的吗？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="3f84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦我们得到了一些独特的东西，我们需要再次检查我们的包名是否已经被占用。</p><p id="6b01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将构建一个名为<code class="fe me mf mg mh b">aesthetic_ascii</code>的包——它将产生随机的受synthwave启发的ASCII艺术。这是一个相当独特的想法，尽管可能不太<em class="mi">有用。</em></p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="f06a" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">目录设置</h1><p id="8463" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">我们需要创建一个新的目录来包含我们的包，并作为我们的包名(<em class="mi"> aesthetic_ascii </em>)。</p><p id="10df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个目录中，我们有我们的<code class="fe me mf mg mh b">__init__.py</code>文件，它将我们的目录初始化为一个Python模块——并成为该模块的顶层脚本。</p><p id="9777" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过在包目录中添加子目录并在这些子目录中添加<code class="fe me mf mg mh b">__init__.py</code>文件来添加子模块。</p><p id="775f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比如我们知道可以写<code class="fe me mf mg mh b">from os import path</code>。其目录结构如下所示:</p><pre class="kj kk kl km gt np mh nq nr aw ns bi"><span id="0a77" class="nt mr it mh b gy nu nv l nw nx">os/<br/>    LICENSE<br/>    MANIFEST.in<br/>    pyproject.toml<br/>    README.md<br/>    setup.cfg<br/>    ...<br/>    os/<br/>        __init__.py<br/>        ...<br/>        path/<br/>            __init.py__<br/>            ...</span></pre><p id="5031" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们很快会谈到这里的其他文件。但首先，我们需要了解<code class="fe me mf mg mh b">__init__.py</code>实际上在做什么。</p><h2 id="9615" class="nt mr it bd ms ny nz dn mw oa ob dp na li oc od nc lm oe of ne lq og oh ng oi bi translated">__init__。巴拉圭</h2><p id="c9cc" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在其核心<code class="fe me mf mg mh b">__init__.py</code>，将一个目录标记为一个Python包。因此，我们包含了顶层的<code class="fe me mf mg mh b">__init__.py</code>文件，它将目录标记为我们的“包”。</p><p id="7c1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们将实际的代码文件(或<em class="mi">模块</em>)放在我们的<code class="fe me mf mg mh b">__init__.py</code>文件旁边。所以，如果我们有这样的结构:</p><pre class="kj kk kl km gt np mh nq nr aw ns bi"><span id="523e" class="nt mr it mh b gy nu nv l nw nx"><strong class="mh iu">aesthetic_ascii/</strong><br/>    *all config files*<br/><strong class="mh iu">    aesthetic_ascii/</strong><br/>        __init__.py<br/>        synthesize.py</span></pre><p id="69a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装包后，我们将像这样导入<code class="fe me mf mg mh b">synthesize</code>模块:</p><pre class="kj kk kl km gt np mh nq nr aw ns bi"><span id="68a3" class="nt mr it mh b gy nu nv l nw nx">from aesthetic_ascii import synthesize</span></pre><p id="1480" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将在整篇文章中使用这种结构。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="cdfb" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">配置文件</h1><h2 id="d31c" class="nt mr it bd ms ny nz dn mw oa ob dp na li oc od nc lm oe of ne lq og oh ng oi bi translated">setup.cfg</h2><p id="fb74" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">除了代码文件，我们还需要几个配置文件。配置我们的包最重要的是<code class="fe me mf mg mh b">setup.cfg</code>文件。</p><p id="c089" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个文件很关键，它是我们的<em class="mi">设置配置</em>文件。在<code class="fe me mf mg mh b">pip install</code>期间，这个文件告诉<em class="mi"> pip </em>如何安装我们的包。</p><p id="7556" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了声明我们正在使用<strong class="lb iu"> setuptools </strong>来打包我们的项目，我们首先在我们的顶层目录中创建一个<code class="fe me mf mg mh b">pyproject.toml</code>文件，包含:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj no l"/></div></figure><p id="d467" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们创建我们的<code class="fe me mf mg mh b">setup.cfg</code>文件。对于<em class="mi">审美_ascii </em>，看起来是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj no l"/></div></figure><p id="7595" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里发生了很多事情，但是每一项都很有描述性，所以我不会一一描述，但是有几项不太清楚。</p><ul class=""><li id="a051" class="ok ol it lb b lc ld lf lg li om lm on lq oo lu op oq or os bi translated"><strong class="lb iu"> long_description </strong> —参数名告诉我们这是什么，我们可以在这里提供不同的文件格式。尽管许多软件包坚持降价，这也是我们将要使用的——正如<strong class="lb iu">long _ description _ content _ type</strong>中所指定的。</li><li id="dcce" class="ok ol it lb b lc ot lf ou li ov lm ow lq ox lu op oq or os bi translated"><strong class="lb iu">分类器</strong>——PyPI将用来对我们的包进行分类的一组标识符，我们可以在这里找到有效分类器的完整列表<a class="ae ky" href="https://pypi.org/classifiers/" rel="noopener ugc nofollow" target="_blank">。</a></li><li id="49c4" class="ok ol it lb b lc ot lf ou li ov lm ow lq ox lu op oq or os bi translated"><strong class="lb iu">包</strong> —我们的包运行所需的依赖包列表。</li><li id="83b3" class="ok ol it lb b lc ot lf ou li ov lm ow lq ox lu op oq or os bi translated"><strong class="lb iu"> python_requires </strong> —对库的python版本要求。</li><li id="63c8" class="ok ol it lb b lc ot lf ou li ov lm ow lq ox lu op oq or os bi translated"><strong class="lb iu">include _ package _ data</strong>——是否包含<code class="fe me mf mg mh b">MANIFEST.in</code>中定义的附加文件——稍后将详细介绍。</li></ul><h2 id="c04c" class="nt mr it bd ms ny nz dn mw oa ob dp na li oc od nc lm oe of ne lq og oh ng oi bi translated">许可证</h2><p id="07b6" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">接下来是我们的许可证，这是软件包中非常重要的一部分——即使你不关心谁在使用它，他们为什么使用它，以及他们是否从中赚钱。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj no l"/></div></figure><p id="8199" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们包含了一个许可证来消除软件包用户的任何疑虑。选择许可证非常简单，只需从<a class="ae ky" href="https://choosealicense.com/" rel="noopener ugc nofollow" target="_blank">这里</a>复制并粘贴最合适的文本即可——并且记得更新任何自定义部分！</p><h2 id="139d" class="nt mr it bd ms ny nz dn mw oa ob dp na li oc od nc lm oe of ne lq og oh ng oi bi translated">README.md</h2><p id="aa05" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">这个文件充当我们的包的<code class="fe me mf mg mh b">long_description</code>——我们在<code class="fe me mf mg mh b">setup.cfg</code>文件中设置了这个包。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj no l"/></div></figure><p id="4393" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，回到我们的<code class="fe me mf mg mh b">setup.cfg</code>——我们在<code class="fe me mf mg mh b">long_description_content_type</code>中指定了我们将使用一个<code class="fe me mf mg mh b">text/markdown</code>文件——因此，我们使用一个降价文本文件！</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="a74c" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">添加资源</h1><p id="2a6c" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">我们已经设置了配置文件，但是我们缺少一样东西——我们的图像将在生成随机ASCII图片时使用。</p><p id="e62d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些图像可以是我们的包所依赖的任何类型的文件。从Python 3.7开始，我们通过使用<code class="fe me mf mg mh b">importlib.resources</code>模块来处理这个问题。</p><p id="3c5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们需要将它导入到我们的代码中，并更新读取这些文件的代码部分，以使用<code class="fe me mf mg mh b">importlib.resources</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj no l"/></div></figure><p id="af81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这两个函数的第一个参数指的是存储文件的目录。此外，任何资源<strong class="lb iu">必须</strong>存储在包含<code class="fe me mf mg mh b">__init__.py</code>文件的目录中。</p><p id="c19a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，在我们的例子中，我们需要将所有图像文件存储在<code class="fe me mf mg mh b">aesthetic_ascii</code> <strong class="lb iu">子目录</strong>中:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/66a9b734c119875847b2b28c9603eef4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dxt40JkyOe0fJX-JZn1f7A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd oz">审美_ ascii/审美_ascii </strong>目录包括我们所有的图像文件和字体文件，以及<strong class="bd oz"> __init__。py </strong>和<strong class="bd oz">synthese . py</strong>模块</p></figure><p id="7db2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦一切就绪，我们必须确保我们的图像文件将包含在包中——我们通过<code class="fe me mf mg mh b">MANIFEST.in</code>文件来完成:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj no l"/></div></figure><p id="788a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们确保<code class="fe me mf mg mh b">MANIFEST.in</code>文件被添加到<code class="fe me mf mg mh b">setup.cfg</code>:</p><pre class="kj kk kl km gt np mh nq nr aw ns bi"><span id="e15e" class="nt mr it mh b gy nu nv l nw nx">...<br/>[options]<br/>include_package_data = True<br/>...</span></pre><p id="ebc6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们准备好了！</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="1958" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">本地安装</h1><p id="52af" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在将我们的包上传到PyPI之前，我们可以确认我们的包可以通过<code class="fe me mf mg mh b">pip install</code>安装，方法是导航到我们的包目录并输入:</p><pre class="kj kk kl km gt np mh nq nr aw ns bi"><span id="212e" class="nt mr it mh b gy nu nv l nw nx">pip install .</span></pre><p id="47c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这应该会像通过<code class="fe me mf mg mh b">pip</code>安装任何其他软件包一样安装我们的软件包:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pa"><img src="../Images/dffe295f01ce2910dc4f553ea2c0da67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g93PFV-ejm6BnYGDl3DpvA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">本地<strong class="bd oz"> pip安装的屏幕截图。</strong>测试</p></figure><p id="2d6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们可以像对待任何其他产品一样<code class="fe me mf mg mh b">import</code>包装我们的产品:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/de2b14361073e3e698be2ca8f8bb29aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xTwfSusdA-Xyz9k8aB0ITQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">现已安装的<strong class="bd oz"> aesthetic_ascii </strong>包的用法示例</p></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="6eea" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">建设</h1><p id="b924" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">一旦我们编写了代码文件、设置了配置并测试了安装——我们就准备好构建我们的包发行版了。</p><p id="6d1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">构建过程创建了一个新目录<code class="fe me mf mg mh b">dist</code>，其中包含一个<code class="fe me mf mg mh b">.tar.gz</code>和<code class="fe me mf mg mh b">.whl</code>文件——这是我们将包发布到PyPI所需要的。</p><p id="25f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了构建我们的<code class="fe me mf mg mh b">dist</code>文件，我们创造性地使用了一个名为<code class="fe me mf mg mh b">build</code>的工具。首先，我们<code class="fe me mf mg mh b">pip install build</code>，然后，在我们的包目录中键入:</p><pre class="kj kk kl km gt np mh nq nr aw ns bi"><span id="8b6e" class="nt mr it mh b gy nu nv l nw nx">python -m build</span></pre><p id="d1c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦完成，我们应该在我们的包目录中找到一个新的<code class="fe me mf mg mh b">/dist</code>目录。</p><h2 id="d0df" class="nt mr it bd ms ny nz dn mw oa ob dp na li oc od nc lm oe of ne lq og oh ng oi bi translated">发布到TestPyPI</h2><p id="7211" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">最后，我们准备好发布我们的新Python包了！同样，我们使用另一个名为<code class="fe me mf mg mh b">twine</code>的包。我们安装该软件时使用了:</p><pre class="kj kk kl km gt np mh nq nr aw ns bi"><span id="b94d" class="nt mr it mh b gy nu nv l nw nx">pip install twine</span></pre><p id="3e56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装完成后，我们上传到<em class="mi">TestPyPI</em>——一个PyPI的“测试”版本，这样我们可以再次检查我们是否已经正确设置了所有内容。我们通过键入以下命令来实现:</p><pre class="kj kk kl km gt np mh nq nr aw ns bi"><span id="05fe" class="nt mr it mh b gy nu nv l nw nx">python -m twine upload --repository testpypi dist/*</span></pre><p id="a3a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此时，我们需要登录TestPyPI——如果您没有帐户，请在这里注册一个<a class="ae ky" href="https://test.pypi.org/account/register/" rel="noopener ugc nofollow" target="_blank"/>。如果一切设置正确，我们的包将被上传:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/642adc712715e2679baa3ed21b7d4d28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mvODhhXsFVbJTQVsu4UKPw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">测试PyPI上<strong class="bd oz">审美_ascii </strong>的成功上传过程</p></figure><p id="47cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以通过另一个<code class="fe me mf mg mh b">pip install</code>来测试我们的新包是否工作——但是这次是通过TestPyPI:</p><pre class="kj kk kl km gt np mh nq nr aw ns bi"><span id="8c7e" class="nt mr it mh b gy nu nv l nw nx">pip install -i https://test.pypi.org/simple/ aesthetic-ascii</span></pre><p id="a085" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">(如果发现包已经安装好了——就<code class="fe me mf mg mh b">pip uninstall aesthetic-ascii</code>)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/6e2b9bd7a912724a5f75b25ff4da4aba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xgqcwq2jjJbp3J5PVTqDAw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">通过TestPyPI安装<strong class="bd oz">美学-ascii </strong></p></figure><h2 id="faa7" class="nt mr it bd ms ny nz dn mw oa ob dp na li oc od nc lm oe of ne lq og oh ng oi bi translated">PyPI</h2><p id="ddcd" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">一旦我们确认这个包可以工作，我们就要进行最后一步，发布到PyPI。同样，你需要在这里注册。</p><p id="d8cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们将我们的包上传到PyPI，包含:</p><pre class="kj kk kl km gt np mh nq nr aw ns bi"><span id="4db3" class="nt mr it mh b gy nu nv l nw nx">python -m twine upload --repository pypi dist/*</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/f5144c36bf07c3f0fbc03473c17c5b50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dXzdWfZGCJf60p9EYK7-Ag.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">上传我们的包到PyPI</p></figure><p id="abaa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们完事了。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="f242" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我们的第一个Python包部署——出乎意料的简单。我们可以继续和<code class="fe me mf mg mh b">pip install aesthetic_ascii</code>使用这个包。</p><div class="kj kk kl km gt ab cb"><figure class="pd kn pe pf pg ph pi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/97b1a2d37d8cb6934d6dc015efcda637.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*-jtA9pMv2IExwplh1bDXDQ.png"/></div></figure><figure class="pd kn pe pf pg ph pi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/74cde8c4a869183467244dd494aa5573.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*Xabt22kN36_P2IXzm3Ol6Q.png"/></div></figure></div><div class="ab cb"><figure class="pd kn pe pf pg ph pi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/13e5943cc97c91cc14877e8e15712c1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*NTxodbeS84wqK9O0VE-0yg.png"/></div></figure><figure class="pd kn pe pf pg ph pi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/51d9d7780a9dc25f9ef14aa097fbf09f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*tL11xOqB4RLw2glDUyqKBw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk pj di pk pl translated">我们的一些ascii杰作</p></figure></div><p id="2268" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">包括设置/配置文件的完整代码可以在GitHub <a class="ae ky" href="https://github.com/jamescalam/aesthetic_ascii" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="bd11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望你喜欢这篇文章。如果你有任何问题或建议，请通过推特或在下面的评论中告诉我。如果你对更多类似的内容感兴趣，我也会在<a class="ae ky" href="https://www.youtube.com/c/jamesbriggs" rel="noopener ugc nofollow" target="_blank"> YouTube </a>上发布。</p><p id="365a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="a6fd" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">进一步阅读</h1><p id="5ec0" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated"><a class="ae ky" href="https://python-packaging.readthedocs.io/en/latest/index.html" rel="noopener ugc nofollow" target="_blank">如何打包你的Python代码</a>，Python打包</p><p id="c6dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/*All images are by the author except where stated otherwise">打包项目</a>，Python打包</p><p id="7bad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">风筝，<a class="ae ky" href="https://www.youtube.com/watch?v=v_raWlX7tZY" rel="noopener ugc nofollow" target="_blank">把任何图像变成ASCII艺术！(易Python PIL教程)</a>，YouTube</p><p id="29c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">页（page的缩写）伯克，<a class="ae ky" href="http://paulbourke.net/dataformats/asciiart/" rel="noopener ugc nofollow" target="_blank">灰度图像的字符表示</a> (1997)，paulbourke.net</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="585e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://bit.ly/nlp-transformers" rel="noopener ugc nofollow" target="_blank">🤖《变形金刚》NLP课程70%的折扣</a></p><p id="643f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mi">*除另有说明外，所有图片均出自作者之手</em></p></div></div>    
</body>
</html>