<html>
<head>
<title>2 Tools to Automatically Reload when Python Files Change</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">当Python文件改变时自动重新加载的2个工具</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/2-tools-to-automatically-reload-when-python-files-change-90bb28139087?source=collection_archive---------6-----------------------#2021-05-08">https://towardsdatascience.com/2-tools-to-automatically-reload-when-python-files-change-90bb28139087?source=collection_archive---------6-----------------------#2021-05-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8a58" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">现在，您可以重新加载循环体，而不会丢失其状态</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/497f31497c7b07269b6b9fa3a9df08f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*Np4ft2_DOkQLtqulAGNoHw.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><h1 id="b318" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">动机</h1><p id="52b9" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">您是否运行过for循环，并希望在for循环中添加更多细节？您可能决定不这样做，因为添加更多的细节意味着您需要停止您的进度并再次重新运行所有内容。</p><p id="f5b7" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">如果代码已经运行了几个小时，停止您的进度尤其不理想。如果你能在每次迭代中重新加载一个循环体而不会像下面这样丢失状态，那不是很好吗？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mn"><img src="../Images/0db4cb5ff286d35b43569c12e4f219fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*kw5ULo3rZMDDbNHrwGipUQ.gif"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者GIF</p></figure><p id="58b3" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">在本文中，我将向您展示两个工具，当您的Python文件发生变化时，它们可以重新加载代码或运行任意命令。</p><h1 id="cc50" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">Entr当Python文件发生变化时运行任意命令</h1><h2 id="b19c" class="ms kv it bd kw mt mu dn la mv mw dp le lv mx my lg lz mz na li md nb nc lk nd bi translated">它是如何工作的</h2><p id="80dd" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">entr 允许你在文件改变时运行任意命令。为了理解entr是如何有用的，让我们假设我们想要创建一个函数，它接受一组数字并返回偶数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="0435" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">我们将上面的文件命名为<code class="fe nh ni nj nk b">entr_examples.py</code>。然后使用<a class="ae ne" rel="noopener" target="_blank" href="/pytest-for-data-scientists-2990319e55e6"> pytest </a>检查<code class="fe nh ni nj nk b">get_evens</code>函数是否返回偶数。</p><pre class="kj kk kl km gt nl nk nm nn aw no bi"><span id="4830" class="ms kv it nk b gy np nq l nr ns">$ pytest entr_examples.py</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/ce8fc21f654440432f77e19ca5ef9ead.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*f2Qh3yAKbuxazFlSNhtVqw.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="a669" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">测试失败是因为我们还没有给<code class="fe nh ni nj nk b">get_evens</code>函数添加任何代码。为了尝试不同的方法来获得偶数，让我们使用entr在代码改变时重新运行命令<code class="fe nh ni nj nk b">pytest entr_examples.py</code>。</p><pre class="kj kk kl km gt nl nk nm nn aw no bi"><span id="ba61" class="ms kv it nk b gy np nq l nr ns">$ ls <!-- -->entr_examples<!-- -->.py | entr <!-- -->python entr_examples.py</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mn"><img src="../Images/b7b6204bfbee0b94cfeee2cfd33a55a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*lTzkKpMHIYaQImEkJjzqrA.gif"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者GIF</p></figure><p id="1238" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">酷！通过使用entr，我们不需要在开发我们的功能时重新运行相同的命令。</p><p id="e1a1" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">由于<a class="ae ne" href="http://guru99.com/test-driven-development.html#:~:text=Test-driven%20development%20is%20a%20process%20of%20modifying%20the%20code,the%20behavior%20of%20the%20code." rel="noopener ugc nofollow" target="_blank">测试驱动开发</a>的第一条法则是<em class="nu">“在你写完一个失败的单元测试之前，你不能写产品代码”</em>，entr鼓励开发者<strong class="lo iu">测试不同的方法来写代码，直到它起作用。</strong></p><h2 id="8759" class="ms kv it bd kw mt mu dn la mv mw dp le lv mx my lg lz mz na li md nb nc lk nd bi translated">句法</h2><p id="37c6" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">下面是entr的一般语法:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi nv"><img src="../Images/b96c16ec07e7fad092d50e8033d7a113.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s1N6zlxqRFk1U_i2iEmAnQ.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="df71" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">注意，如果你想一次跟踪多个Python文件，使用<code class="fe nh ni nj nk b">ls *.py | entr command_to_run</code>代替。这意味着如果任何被跟踪的文件被更改，<code class="fe nh ni nj nk b">command_to_run</code>将被执行。</p><h2 id="5e47" class="ms kv it bd kw mt mu dn la mv mw dp le lv mx my lg lz mz na li md nb nc lk nd bi translated">装置</h2><p id="5933" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">要在MacOS上安装entr，请键入:</p><pre class="kj kk kl km gt nl nk nm nn aw no bi"><span id="f3d6" class="ms kv it nk b gy np nq l nr ns">brew install entr</span></pre><p id="9329" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">要在Ubuntu上安装entr，请键入:</p><pre class="kj kk kl km gt nl nk nm nn aw no bi"><span id="8ed1" class="ms kv it nk b gy np nq l nr ns">sudo apt-get update<br/>sudo apt-get install entr</span></pre><p id="06ec" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">另一种选择是克隆<a class="ae ne" href="https://github.com/eradman/entr" rel="noopener ugc nofollow" target="_blank"> entr repo </a>并遵循<a class="ae ne" href="https://github.com/eradman/entr#source-installation---bsd-mac-os-and-linux" rel="noopener ugc nofollow" target="_blank">安装说明</a>。</p><h1 id="7fc8" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">重新加载(reloading )-重新加载循环体而不丢失其状态</h1><h2 id="cfbc" class="ms kv it bd kw mt mu dn la mv mw dp le lv mx my lg lz mz na li md nb nc lk nd bi translated">它是如何工作的</h2><p id="d045" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated"><a class="ae ne" href="https://github.com/julvo/reloading" rel="noopener ugc nofollow" target="_blank">重载</a>是一个Python库，允许你在每次迭代中重载一个循环体而不丢失其状态。</p><p id="eb79" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">为了理解重载是如何有用的，假设您编写了一个输出偶数的Python循环。然而，当循环运行时，您还希望它在不停止循环的情况下打印奇数<strong class="lo iu">。</strong></p><p id="c33d" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">通常，这在Python中是做不到的。在下面的代码中，即使我们在执行过程中将<code class="fe nh ni nj nk b">print(f'{num} is odd')</code>添加到循环体中，输出中也没有奇数。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mn"><img src="../Images/c6381fcd23089d00c3cc20770f84647a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*TcwDbqhy1EowV807AhEl9w.gif"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者GIF</p></figure><p id="af54" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">然而，这可以很容易地通过重新加载来完成。下面的GIF展示了在循环中添加重载是如何产生影响的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mn"><img src="../Images/0db4cb5ff286d35b43569c12e4f219fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*kw5ULo3rZMDDbNHrwGipUQ.gif"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者GIF</p></figure><p id="3e3f" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">我们可以看到，在执行的过程中，在循环体<strong class="lo iu">中添加一个<code class="fe nh ni nj nk b">else</code>语句后，奇数被打印出来！</strong></p><p id="c76a" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">重载在这里似乎没有什么帮助，因为执行一个for循环并不需要很长时间。但是如果你已经训练了几个小时的深度学习模型，并且你想在不停止循环的情况下在每个时期打印更多的统计数据，这将变得非常方便。</p><p id="1045" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">在这里找到如何使用你最喜欢的库<a class="ae ne" href="https://github.com/julvo/reloading#examples" rel="noopener ugc nofollow" target="_blank">重新加载。</a></p><h2 id="3ac1" class="ms kv it bd kw mt mu dn la mv mw dp le lv mx my lg lz mz na li md nb nc lk nd bi translated">句法</h2><p id="f95e" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">要使用<code class="fe nh ni nj nk b">reloading</code>，只需将它添加到Python循环中，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi nw"><img src="../Images/e32269cf377b53257ebd7231a87a8932.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5H9k4_n5XljT5K-ajeM_DQ.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><h2 id="25ec" class="ms kv it bd kw mt mu dn la mv mw dp le lv mx my lg lz mz na li md nb nc lk nd bi translated">装置</h2><pre class="kj kk kl km gt nl nk nm nn aw no bi"><span id="6d23" class="ms kv it nk b gy np nq l nr ns">pip install reloading</span></pre><h1 id="34c3" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">结论</h1><p id="9b95" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">恭喜你！您刚刚学习了如何在Python文件发生变化时运行任意命令，以及重新加载Python循环体而不丢失其状态。现在，您可以避免浪费时间运行相同的命令或重新运行一个循环来显示更多的输出。</p><p id="f8f3" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">随意发挥，并在这里叉这篇文章的源代码:</p><div class="nx ny gp gr nz oa"><a href="https://github.com/khuyentran1401/Data-science/tree/master/terminal/reload_examples" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">khuyentran 1401/数据科学</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">有用的数据科学主题以及代码和文章的集合- khuyentran1401/Data-science</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">github.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo ko oa"/></div></div></a></div><p id="26f0" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的算法和数据科学工具。你可以在LinkedIn和Twitter上与我联系。</p><p id="def7" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">如果你想查看我写的所有文章的代码，请点击这里。在Medium上关注我，了解我的最新数据科学文章，例如:</p><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/3-tools-to-track-and-visualize-the-execution-of-your-python-code-666a153e435e"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">3个跟踪和可视化Python代码执行的工具</h2><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="op l ol om on oj oo ko oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/3-python-tricks-to-read-create-and-run-multiple-files-automatically-5221ebaad2ba"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">自动读取、创建和运行多个文件的3个Python技巧</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">用Python和Bash For Loop自动化枯燥的东西</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="oq l ol om on oj oo ko oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/3-tools-to-monitor-and-optimize-your-linux-system-c8a46c18d692"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">监控和优化您的Linux系统的3个工具</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">用这三个工具控制你的机器</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="or l ol om on oj oo ko oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/pywebio-write-interactive-web-app-in-script-way-using-python-14f50155af4e"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">PyWebIO:使用Python以脚本方式编写交互式Web应用</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">在没有HTML和JS知识的情况下，用几行Python代码构建Web应用程序！</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="os l ol om on oj oo ko oa"/></div></div></a></div></div></div>    
</body>
</html>