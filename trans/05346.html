<html>
<head>
<title>Interactive Geospatial AI Visualization in Jupyter Notebook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jupyter笔记本中的交互式地理空间人工智能可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/interactive-geospatial-ai-visualization-in-jupyter-notebook-f3223f534327?source=collection_archive---------25-----------------------#2021-05-11">https://towardsdatascience.com/interactive-geospatial-ai-visualization-in-jupyter-notebook-f3223f534327?source=collection_archive---------25-----------------------#2021-05-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5fbd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">简化地理空间数据探索，构建强大的人工智能应用</h2></div><p id="f360" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">了解您的数据是在生产中构建和部署健壮的AI/ML系统的关键。因此，在制定AI/ML解决方案之前，必须事先进行良好的探索性数据分析(EDA)。然而，在地理空间数据集上执行EDA可能会令人望而生畏，而且往往具有挑战性，尤其是当您必须在广阔的区域和许多数据层中导航以进行分析时。不要担心，通过充分的练习，你会掌握它的窍门，这篇文章有望帮助你开始学习！</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/1f9f3942ad6e796516e7717a1697a918.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PvYFmnkWwVC_IURr"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">美国宇航局在<a class="ae lu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="0602" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">目录:</strong></p><ol class=""><li id="ab7f" class="mc md it kk b kl km ko kp kr me kv mf kz mg ld mh mi mj mk bi translated">装置</li><li id="b816" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">小部件简介</li><li id="b07e" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">创建简单的地图</li><li id="a1ad" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">自定义您的地图</li><li id="dd11" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">图层、栅格和矢量简介</li><li id="39b8" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">添加层</li></ol></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="18b6" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">装置</h1><p id="0774" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">对于这个关于Jupyter笔记本中交互式地理空间数据可视化的教程，我们将安装<em class="nn"> ipyleaflet </em>库。</p><pre class="lf lg lh li gt no np nq nr aw ns bi"><span id="583e" class="nt mr it np b gy nu nv l nw nx">conda install -c conda-forge ipyleaflet</span></pre><h2 id="92d8" class="nt mr it bd ms ny nz dn mw oa ob dp na kr oc od nc kv oe of ne kz og oh ng oi bi translated"><strong class="ak">什么是ipyleaflet？</strong></h2><p id="6871" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">传单是最流行的可视化地理空间数据的JavaScript库之一。它被OpenStreetMap和MapBox等大型机构广泛采用。</p><p id="6684" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您正在寻找ipyleaflet的替代方案，您可以考虑使用<a class="ae lu" href="https://python-visualization.github.io/folium/" rel="noopener ugc nofollow" target="_blank"><em class="nn"/></a>python包来帮助您可视化交互式传单地图。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8ced" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">小部件简介</h1><p id="3fdb" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">现在我们已经讨论了设置阶段，让我们深入探讨这篇文章的主题。</p><blockquote class="oj ok ol"><p id="1a55" class="ki kj nn kk b kl km ju kn ko kp jx kq om ks kt ku on kw kx ky oo la lb lc ld im bi translated">Jupyter中的交互可视化是什么意思？小部件如何实现这一点？最重要的是，什么是widget？</p></blockquote><p id="65c1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些问题在你开始看这个帖子的时候必然会蹦出来。对于熟悉的人，请快速复习下一部分。</p><p id="f8ae" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="nn">交互可视化？</em> </strong>它仅仅意味着与你的视觉实时互动的能力。以下面这张GIF为例。你可以通过<em class="nn">视觉</em>方式<em class="nn">与滑块</em>互动。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi op"><img src="../Images/14524681171b7067e3712e79109d5eb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:974/1*WvZjKYrlUmdvp26MQ2mMQQ.gif"/></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">交互式可视化(作者提供的GIF)</p></figure><p id="f211" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="nn"> Jupyter Widget？</em> </strong>它们被称为“特殊对象”，可以被初始化并显示在笔记本上。它们也是<strong class="kk iu">双向</strong>，这意味着一个小部件不只是显示，还可以接收用户输入，随后触发新的计算。最重要的是，它们是<strong class="kk iu">可扩展的</strong>。Jupyter小部件允许其他库在其功能的基础上构建额外的特性，比如我们的<em class="nn"> ipyleaflet。</em></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ea2f" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">创建简单的地图</h1><p id="2061" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">现在，我们准备好处理<em class="nn"> ipyleaflet </em>。首先，让我们展示一张基本的世界地图。</p><p id="a1b2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们需要导入<em class="nn"> ipyleaflet </em>库及其Map对象。</p><pre class="lf lg lh li gt no np nq nr aw ns bi"><span id="d81c" class="nt mr it np b gy nu nv l nw nx">from ipyleaflet import Map</span></pre><p id="fff4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，给定中心点的坐标和缩放级别，我们构建并可视化地图对象。</p><pre class="lf lg lh li gt no np nq nr aw ns bi"><span id="5fa3" class="nt mr it np b gy nu nv l nw nx">Map(center = (60, -2.2), zoom = 2, min_zoom = 1, max_zoom = 20)</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi oq"><img src="../Images/227cb3cd6e10bd559f8c2a89be68552c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*DEw0Jp2ueYTntAIEUh2a5Q.gif"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">简单互动图(作者GIF)</p></figure><p id="915a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的GIF中，您可以通过滚动和平移输出图像来与新创建的地图进行交互。做得好！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="17a8" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">自定义您的地图</h1><p id="e364" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">例如，我们还可以通过<strong class="kk iu">对底图</strong>进行样式化来定制我们的地图。</p><p id="5aeb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们导入另一个名为底图的对象。</p><pre class="lf lg lh li gt no np nq nr aw ns bi"><span id="128d" class="nt mr it np b gy nu nv l nw nx">from ipyleaflet import Map, basemaps</span></pre><p id="31bf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们添加可视化到我们的地图对象，如下所示。</p><pre class="lf lg lh li gt no np nq nr aw ns bi"><span id="cef2" class="nt mr it np b gy nu nv l nw nx">map = Map(center=(60,-2.2), zoom=2, basemap=basemaps.Stamen.Terrain)</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi oq"><img src="../Images/4742a71d8d45f4bbfce50fa2cb75f1b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*TuTTNUxW0kMlKEwbgnz6vA.gif"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">自定义地图(作者提供的GIF)</p></figure><p id="d6c3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用自定义地形底图后，地图变得更加漂亮。</p><p id="3cff" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有大量的定制可用。查看他们的<a class="ae lu" href="https://ipyleaflet.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> API参考</a>以获得更详细的解释。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0d6a" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">图层、栅格和矢量简介</h1><p id="e10a" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">现在，这将是你大部分EDA发生的地方。我将展示如何添加层以及如何操作它们。</p><p id="d57a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是首先。</p><p id="f291" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="nn">什么是层？</em> </strong>图层用于显示地理数据集。它们的目的是分离不同的地理信息，这些信息可能相互关联，也可能不相互关联。例如，为了展示一个城市的地图，您可能想要显示一个底图图层(之前高亮显示)、城市中的道路网络、住宅区、海拔高度以及水体娱乐区的存在。</p><p id="acd5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="nn">现在，什么是光栅或者矢量？</em></strong></p><p id="96b2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下图为了解什么是图层以及栅格/矢量数据之间的区别提供了一个方便的图示。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi or"><img src="../Images/c7d373f4ea5cce6fc8640941a0eb4d23.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/format:webp/0*V3LFnU11d-P3bvnu.jpg"/></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">解释图层、栅格和矢量数据(来源:<a class="ae lu" href="http://cms.sbcounty.gov/portals/30/Images/Web%20Banner23.jpg" rel="noopener ugc nofollow" target="_blank">SBCounty.gov</a>)</p></figure><p id="7f6b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想对这个话题有更详细的解释，请看看我下面的另一篇博文。</p><div class="os ot gp gr ou ov"><a rel="noopener follow" target="_blank" href="/geopandas-hands-on-introduction-to-geospatial-machine-learning-6e7e4a539daf"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd iu gy z fp pa fr fs pb fu fw is bi translated">geo pandas hand-on:地理空间机器学习介绍</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">关于如何处理地理空间机器学习的教程</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">towardsdatascience.com</p></div></div><div class="pe l"><div class="pf l pg ph pi pe pj lo ov"/></div></div></a></div><h1 id="a669" class="mq mr it bd ms mt pk mv mw mx pl mz na jz pm ka nc kc pn kd ne kf po kg ng nh bi translated"><strong class="ak">添加图层</strong></h1><p id="2f8e" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">最后但同样重要的是，如果不能添加自己的图层，交互式地理空间地图是不完整的。</p><p id="a032" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们首先<strong class="kk iu">通过调用<em class="nn"> add_layer() </em>方法添加</strong>一个光栅图层。</p><pre class="lf lg lh li gt no np nq nr aw ns bi"><span id="ff9d" class="nt mr it np b gy nu nv l nw nx">from ipyleaflet import basemap_to_tiles as btt, basemaps, Map<br/><br/>raster = btt(basemaps.NASAGIBS.ModisTerraTrueColorCR, "2019-06-24")<br/>map.add_layer(raster)</span><span id="b586" class="nt mr it np b gy pp nv l nw nx">map</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi pq"><img src="../Images/4e746dde3edc61bace1c2ca20d5ed135.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Tfh6ylvMZnFImbKDAXssyg.gif"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">添加图层(作者GIF)</p></figure><p id="249b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您选择<strong class="kk iu">移除</strong>这一层，那么您可以简单地调用remove_layer()方法。</p><pre class="lf lg lh li gt no np nq nr aw ns bi"><span id="b570" class="nt mr it np b gy nu nv l nw nx">map.remove_layer(raster)</span><span id="c2d1" class="nt mr it np b gy pp nv l nw nx">map</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi pq"><img src="../Images/2fb2d70de62dd1e87a985671be603662.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*0cPVSeiBjSiR8HihqcrGOA.gif"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">移除图层(作者GIF)</p></figure><p id="d3b4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，如果您不想通过编写代码来不断添加或删除层，该怎么办呢？你可以在地图上添加一个<strong class="kk iu">图层控件</strong>来实现。</p><pre class="lf lg lh li gt no np nq nr aw ns bi"><span id="a9f3" class="nt mr it np b gy nu nv l nw nx">from ipyleaflet import LayersControl</span><span id="50e1" class="nt mr it np b gy pp nv l nw nx">map.add_control(LayersControl())</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi pq"><img src="../Images/967170a1c4e232ce1279ac153a3d0496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*V5XX3n7Q1dXTBNKwLvxiew.gif"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">图层控件(GIF by Author)</p></figure><p id="a584" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你现在可以在地图上对你的图层有更多的控制了！</p><h1 id="d223" class="mq mr it bd ms mt pk mv mw mx pl mz na jz pm ka nc kc pn kd ne kf po kg ng nh bi translated">结论</h1><p id="d4fd" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">这就是Jupyter笔记本上交互式地理空间可视化的介绍。我将很快创建第二部分来讨论更高级的技术，如地图分割，从GeoJSON和其他文件格式添加数据等。敬请期待！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="0449" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="nn">做订阅我的邮件简讯:</em></strong><a class="ae lu" href="https://tinyurl.com/2npw2fnz" rel="noopener ugc nofollow" target="_blank"><em class="nn">https://tinyurl.com/2npw2fnz</em></a><em class="nn"/><strong class="kk iu"><em class="nn">在那里我定期用通俗易懂的语言和漂亮的可视化方式总结AI研究论文。</em> </strong></p></div></div>    
</body>
</html>