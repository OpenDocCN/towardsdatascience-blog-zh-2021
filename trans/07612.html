<html>
<head>
<title>A Hands-On Tutorial for dbt</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">dbt实践教程</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-hands-on-tutorial-for-dbt-f749f7749c8d?source=collection_archive---------21-----------------------#2021-07-12">https://towardsdatascience.com/a-hands-on-tutorial-for-dbt-f749f7749c8d?source=collection_archive---------21-----------------------#2021-07-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="357a" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">入门指南</h2><div class=""/><div class=""><h2 id="cece" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">通过只编写SQL SELECT语句，将dbt用于复杂数据<strong class="ak">转换。运行测试，生成文档，使用宏，以及更多的功能。</strong></h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/faf35bf5c73fd38d5b777f6de0ef9307.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QA4lgqPoUNPdUPDDt-aeCg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><em class="lh">本帖中使用的所有图片/视频均由作者创作，除非另有说明。(图标来自</em><a class="ae li" href="https://flaticon.com" rel="noopener ugc nofollow" target="_blank"><em class="lh"/></a><em class="lh">)</em></p></figure><p id="6672" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">dbt(数据构建工具)是一个使用select SQL语句的数据转换工具。它允许您创建复杂的模型，使用变量和宏(也称为函数)，运行测试，生成文档，以及更多的特性。</p><p id="52fc" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">dbt不提取或加载数据，但是它在转换数据库中已经可用的数据方面很强大——dbt在ELT(提取、加载、转换)过程中执行T。</p><p id="2c51" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">在这篇文章中，你将学会如何…</p><ul class=""><li id="6bb7" class="mf mg it ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">配置dbt项目</li><li id="c806" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">创建dbt模型(SELECT语句)</li><li id="55af" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">使用全局变量和宏构建复杂的dbt模型</li><li id="d23a" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">参考其他dbt模型构建复杂模型</li><li id="35b9" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">运行测试</li><li id="4b86" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">生成文档</li></ul></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="e105" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">先决条件</h1><h2 id="ebc7" class="ns nb it bd nc nt nu dn ng nv nw dp nk ls nx ny nm lw nz oa no ma ob oc nq iz bi translated">注册</h2><p id="ae7a" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">你可以在getdbt.com报名。免费计划对于小型项目和测试来说是一个很好的计划。</p><h2 id="01da" class="ns nb it bd nc nt nu dn ng nv nw dp nk ls nx ny nm lw nz oa no ma ob oc nq iz bi translated">具有填充数据的数据库</h2><p id="d086" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">你可以查看我关于如何在Heroku 上部署一个<em class="oi">免费</em> PostgreSQL数据库的帖子。这篇文章提供了如何做的一步一步的指导。</p><p id="d088" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">您还可以查看本文附带的GitHub repo中的<a class="ae li" href="https://github.com/e-alizadeh/sample_dbt_project/blob/master/data/data_ingestion.py" rel="noopener ugc nofollow" target="_blank">数据摄取脚本</a>。</p><div class="oj ok gp gr ol om"><a href="https://github.com/e-alizadeh/sample_dbt_project" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd jd gy z fp or fr fs os fu fw jc bi translated">e-alizadeh/sample_dbt_project</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">github.com</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa lb om"/></div></div></a></div><p id="f65d" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">按照上面所述，我们已经在PostgreSQL数据库中生成了两个表，我们将在本文中使用它们。数据库中有两个表，分别是<code class="fe pb pc pd pe b">covid_latest</code>和<code class="fe pb pc pd pe b">population_prosperity</code>。您可以在GitHub repo上找到这篇文章的摄取脚本。</p><h2 id="ac61" class="ns nb it bd nc nt nu dn ng nv nw dp nk ls nx ny nm lw nz oa no ma ob oc nq iz bi translated">dbt CLI安装</h2><p id="cbf0" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">您可以按照下面的<a class="ae li" href="https://docs.getdbt.com/dbt-cli/installation/" rel="noopener ugc nofollow" target="_blank"> dbt文档页面</a>上的说明来安装dbt命令行界面(CLI)。</p><div class="oj ok gp gr ol om"><a href="https://docs.getdbt.com/dbt-cli/installation" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd jd gy z fp or fr fs os fu fw jc bi translated">安装| dbt文档</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">我们建议您使用以下三种屡试不爽的方法之一来安装dbt:安装自制软件。然后，运行:测试您的…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">docs.getdbt.com</p></div></div><div class="ov l"><div class="pf l ox oy oz ov pa lb om"/></div></div></a></div></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="cf2a" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">dbt项目的基础</h1><p id="d3f1" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">为了使用dbt工具，有三件主要的事情需要了解。</p><ul class=""><li id="6d0b" class="mf mg it ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">dbt项目</li><li id="1b72" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">数据库连接</li><li id="230c" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">dbt命令</li></ul><h2 id="9c38" class="ns nb it bd nc nt nu dn ng nv nw dp nk ls nx ny nm lw nz oa no ma ob oc nq iz bi translated">dbt怎么用？</h2><p id="f40b" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">dbt项目是包含<code class="fe pb pc pd pe b">.sql</code>和<code class="fe pb pc pd pe b">.yml</code>文件的目录。最少需要的文件是:</p><ul class=""><li id="b9f4" class="mf mg it ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">名为<code class="fe pb pc pd pe b">dbt_project.yml</code>的项目文件:该文件包含dbt项目的配置。</li><li id="25c9" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">模型(<code class="fe pb pc pd pe b">.sql</code>文件):dbt中的模型仅仅是一个<code class="fe pb pc pd pe b">.sql</code>文件，包含一个<strong class="ll jd">单个</strong> <code class="fe pb pc pd pe b"><strong class="ll jd">select</strong></code> <strong class="ll jd">语句</strong>。</li></ul><blockquote class="pg ph pi"><p id="67b6" class="lj lk oi ll b lm ln kd lo lp lq kg lr pj lt lu lv pk lx ly lz pl mb mc md me im bi translated">每个dbt项目都需要一个dbt_project.yml文件——这是dbt知道一个目录是dbt项目的方式。它还包含告诉dbt如何操作您的项目的重要信息。</p></blockquote><p id="cfc2" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">你可以在这里找到更多关于dbt项目<a class="ae li" href="https://docs.getdbt.com/docs/introduction#dbt-projects" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><blockquote class="pm"><p id="a1a5" class="pn po it bd pp pq pr ps pt pu pv me dk translated">💡dbt模型基本上是一个带有SELECT语句的<code class="fe pb pc pd pe b">.sql</code>文件。</p></blockquote><h2 id="9aa1" class="ns nb it bd nc nt pw dn ng nv px dp nk ls py ny nm lw pz oa no ma qa oc nq iz bi translated">dbt命令</h2><p id="1d2e" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">dbt命令以<code class="fe pb pc pd pe b">dbt</code>开始，可通过以下方式之一执行:</p><ul class=""><li id="85ce" class="mf mg it ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">dbt Cloud(dbt Cloud仪表板底部的命令部分)，</li><li id="2510" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">dbt CLI</li></ul><p id="40fb" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">有些命令只能在dbt CLI中使用，如<code class="fe pb pc pd pe b">dbt init</code>。我们将在本文中使用的一些dbt命令是</p><ul class=""><li id="52dd" class="mf mg it ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated"><code class="fe pb pc pd pe b">dbt init</code>(仅在dbt CLI中)</li><li id="ae2e" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated"><code class="fe pb pc pd pe b">dbt run</code></li><li id="043e" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated"><code class="fe pb pc pd pe b">dbt test</code></li><li id="3a64" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated"><code class="fe pb pc pd pe b">dbt docs generate</code></li></ul><h1 id="9de2" class="na nb it bd nc nd qb nf ng nh qc nj nk ki qd kj nm kl qe km no ko qf kp nq nr bi translated">dbt项目设置</h1><h2 id="9d4a" class="ns nb it bd nc nt nu dn ng nv nw dp nk ls nx ny nm lw nz oa no ma ob oc nq iz bi translated">步骤1:使用dbt CLI初始化dbt项目(示例文件)</h2><p id="4a2e" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">您可以使用<code class="fe pb pc pd pe b"><a class="ae li" href="https://docs.getdbt.com/reference/commands/init" rel="noopener ugc nofollow" target="_blank">dbt init</a></code>生成样本文件/文件夹。特别是，<code class="fe pb pc pd pe b">dbt init project_name</code>将创建以下内容:</p><ul class=""><li id="c46c" class="mf mg it ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">一个<code class="fe pb pc pd pe b">~/.dbt/profiles.yml</code>文件(如果不存在)</li><li id="1f67" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">名为<code class="fe pb pc pd pe b">[project_name]</code>的新文件夹</li><li id="7431" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">dbt入门所需的目录和示例文件</li></ul><blockquote class="pg ph pi"><p id="5725" class="lj lk oi ll b lm ln kd lo lp lq kg lr pj lt lu lv pk lx ly lz pl mb mc md me im bi translated"><strong class="ll jd">注意</strong>:由于<code class="fe pb pc pd pe b">dbt init</code>会生成一个名为<code class="fe pb pc pd pe b">project_name</code>的目录，为了避免任何冲突，您应该<em class="it">没有任何同名的文件夹。</em></p></blockquote><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qg"><img src="../Images/8ed5199937576ff7ca1caf6577515f6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Z8tOXKoivQWcN3GvFPwzQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">dbt初始化<project_name/></p></figure><p id="68e0" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">结果是一个包含以下示例文件的目录。</p><pre class="ks kt ku kv gt qh pe qi qj aw qk bi"><span id="6172" class="ns nb it pe b gy ql qm l qn qo">sample_dbt_project<br/>├── README.md<br/>├── analysis<br/>├── data<br/>├── dbt_project.yml<br/>├── macros<br/>├── models<br/>│   └── example<br/>│       ├── my_first_dbt_model.sql<br/>│       ├── my_second_dbt_model.sql<br/>│       └── schema.yml<br/>├── snapshots<br/>└── tests</span></pre><p id="dbad" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">对于这篇文章，我们将只考虑最少的文件，并删除多余的东西。</p><pre class="ks kt ku kv gt qh pe qi qj aw qk bi"><span id="c2e5" class="ns nb it pe b gy ql qm l qn qo">sample_dbt_project<br/>├── README.md<br/>├── dbt_project.yml<br/>└── models<br/>    ├── my_first_dbt_model.sql<br/>    ├── my_second_dbt_model.sql<br/>    └── schema.yml</span></pre><h2 id="462b" class="ns nb it bd nc nt nu dn ng nv nw dp nk ls nx ny nm lw nz oa no ma ob oc nq iz bi translated">步骤2:建立一个Git存储库</h2><p id="5f1a" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">您可以使用设置期间指定的现有回购协议。您可以按照这里的dbt文档<a class="ae li" href="https://docs.getdbt.com/docs/dbt-cloud/cloud-configuring-dbt-cloud/cloud-configuring-repositories" rel="noopener ugc nofollow" target="_blank">来配置存储库。</a></p><p id="15c7" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated"><strong class="ll jd">或者，如果你想创建一个新的回购… </strong></p><p id="e781" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">您可以从创建的目录中创建新的存储库。你可以像下面这样做</p><pre class="ks kt ku kv gt qh pe qi qj aw qk bi"><span id="4073" class="ns nb it pe b gy ql qm l qn qo">git init<br/>git add .<br/>git commit -m "first commit"<br/>git remote add origing &lt;repo_url&gt;<br/>git push -u origin master</span></pre><h2 id="bdb3" class="ns nb it bd nc nt nu dn ng nv nw dp nk ls nx ny nm lw nz oa no ma ob oc nq iz bi translated">步骤3:在dbt Cloud Dashboard上建立一个新项目</h2><p id="1532" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">在上一步中，我们创建了一个包含示例模型和配置的示例dbt项目。现在，我们想要创建一个新项目，并在dbt Cloud仪表板上连接我们的数据库和存储库。</p><p id="01bb" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">在我们继续之前，您应该已经</p><ul class=""><li id="21bb" class="mf mg it ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">一些数据已经存在于数据库中，</li><li id="7426" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">包含上一步生成的文件的存储库</li></ul><p id="2ac1" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">您可以按照下面的步骤在dbt Cloud中设置一个新项目(请记住，这一步与上一步不同，因为我们只生成了一些示例文件)。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="qp qq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">在dbt Cloud上建立一个新的dbt项目</p></figure><p id="0f14" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">我们项目的<code class="fe pb pc pd pe b">dbt_project.yml</code>文件如下所示(你可以在这篇文章附带的<a class="ae li" href="https://github.com/e-alizadeh/sample_dbt_project.git" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>中找到完整版本)。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="qr qq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">dbt_project.yml</p></figure></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="e228" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">dbt型号和功能</h1><h2 id="fa64" class="ns nb it bd nc nt nu dn ng nv nw dp nk ls nx ny nm lw nz oa no ma ob oc nq iz bi translated">dbt模型</h2><p id="2f45" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">让我们创建简单的dbt模型来检索表中的几列。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="qr qq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><strong class="ak">covid 19 _ latest _ stats</strong>dbt模型(models/covid 19 _ latest _ stats . SQL)</p></figure><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="qr qq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><strong class="ak">人口</strong> dbt模型(models/population.sql)</p></figure><blockquote class="pg ph pi"><p id="6cfa" class="lj lk oi ll b lm ln kd lo lp lq kg lr pj lt lu lv pk lx ly lz pl mb mc md me im bi translated">⚠️ <strong class="ll jd">注意</strong>:dbt模型名是<code class="fe pb pc pd pe b">models</code>目录中sql文件的文件名。模型名称可能不同于数据库中的表名称。例如，在上面的例子中，dbt模型<code class="fe pb pc pd pe b">population</code>是数据库中<code class="fe pb pc pd pe b">population_prosperity</code>表上的<code class="fe pb pc pd pe b">SELECT</code>语句的结果。</p></blockquote><h2 id="266b" class="ns nb it bd nc nt nu dn ng nv nw dp nk ls nx ny nm lw nz oa no ma ob oc nq iz bi translated">运行模型</h2><p id="7184" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">您可以通过执行<code class="fe pb pc pd pe b">dbt run</code>来运行您的dbt项目中的所有模型。下面显示了一个示例dbt运行输出。您可以看到运行所有dbt模型的摘要或详细日志。这对于调试您在查询中可能遇到的任何问题非常有帮助。例如，您可以看到一个失败的模型抛出了一个Postgres错误。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qs"><img src="../Images/7760f0e1fe04b3fb7c4007f5cbeb9c7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nfE4zB4XMQeUL5dPx10MyQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">失败<strong class="bd qt">的详细日志jinja _ and _ variable _ usage</strong>dbt模型</p></figure><h2 id="83a7" class="ns nb it bd nc nt nu dn ng nv nw dp nk ls nx ny nm lw nz oa no ma ob oc nq iz bi translated">金佳和宏</h2><p id="5ab3" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">dbt使用<a class="ae li" href="https://jinja.palletsprojects.com/" rel="noopener ugc nofollow" target="_blank"> Jinja </a>模板语言，使得dbt项目成为SQL的理想编程环境。使用Jinja，您可以进行SQL中通常不可能的转换，比如使用环境变量或宏——SQL的抽象片段，类似于大多数编程语言中的函数。每当你看到一个<code class="fe pb pc pd pe b">{{ ... }}</code>，你已经在用Jinja了。关于Jinja和定义的附加Jinja风格函数的更多信息，可以查看<a class="ae li" href="https://docs.getdbt.com/docs/building-a-dbt-project/jinja-macros/" rel="noopener ugc nofollow" target="_blank"> dbt文档</a>。</p><p id="455a" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">在这篇文章的后面，我们将讨论由dbt定义的自定义宏。</p><h2 id="931c" class="ns nb it bd nc nt nu dn ng nv nw dp nk ls nx ny nm lw nz oa no ma ob oc nq iz bi translated">使用变量</h2><p id="3005" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated"><strong class="ll jd">定义一个变量</strong></p><p id="a569" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">您可以在您的<code class="fe pb pc pd pe b">dbt_project.yml</code>中的<code class="fe pb pc pd pe b">vars</code>部分下定义您的变量。例如，让我们定义一个名为<code class="fe pb pc pd pe b">selected_country</code>的变量，其默认值为<code class="fe pb pc pd pe b">USA</code>，另一个名为<code class="fe pb pc pd pe b">selected_year</code>的变量，其默认值为<code class="fe pb pc pd pe b">2019</code>。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="qr qq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带有已定义变量的dbt_project.yml文件</p></figure><p id="a62e" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated"><strong class="ll jd">使用变量</strong></p><p id="86b2" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">您可以通过<code class="fe pb pc pd pe b"><a class="ae li" href="https://docs.getdbt.com/reference/dbt-jinja-functions/var" rel="noopener ugc nofollow" target="_blank">var()</a></code> Jinja函数(<code class="fe pb pc pd pe b">{{ var("var_key_name") }}</code>)在您的dbt模型中使用变量。</p><h2 id="6890" class="ns nb it bd nc nt nu dn ng nv nw dp nk ls nx ny nm lw nz oa no ma ob oc nq iz bi translated">宏指令</h2><p id="0f5f" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">在<code class="fe pb pc pd pe b">dbt_utils</code>中有许多有用的转换和宏可以用在你的项目中。关于所有可用宏的列表，你可以查看他们的GitHub repo 。</p><p id="9f81" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">现在，让我们将dbt_utils添加到我们的项目中，并按照以下步骤进行安装:</p><ol class=""><li id="e0a4" class="mf mg it ll b lm ln lp lq ls mh lw mi ma mj me qu ml mm mn bi translated">将dbt_utils宏添加到您的<code class="fe pb pc pd pe b">packages.yml</code>文件，如下所示:</li></ol><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="qr qq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">将<strong class="ak"> dbt_utils </strong>包添加到packages.yml</p></figure><p id="a7f2" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">2.运行<code class="fe pb pc pd pe b">dbt deps</code>安装软件包。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qv"><img src="../Images/53caa794f6ebaff21c2696a4d4b8fed4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MGwTSy9MfeLp8oNctj_23Q.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">使用<strong class="bd qt"> dbt deps </strong>安装软件包</p></figure><h2 id="c998" class="ns nb it bd nc nt nu dn ng nv nw dp nk ls nx ny nm lw nz oa no ma ob oc nq iz bi translated">复杂dbt模型</h2><p id="0b32" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">模型(选择)通常堆叠在另一个之上。为了构建更复杂的模型，你必须使用<code class="fe pb pc pd pe b"><a class="ae li" href="https://docs.getdbt.com/reference/dbt-jinja-functions/ref" rel="noopener ugc nofollow" target="_blank">ref()</a></code>宏。<code class="fe pb pc pd pe b">ref()</code>是dbt中最重要的功能，因为它允许您引用其他模型。例如，您可能有一个做多种事情的模型(又名SELECT query ),而您不想在其他模型中使用它。如果不使用前面介绍的宏，将很难构建一个复杂的模型。</p><h2 id="b211" class="ns nb it bd nc nt nu dn ng nv nw dp nk ls nx ny nm lw nz oa no ma ob oc nq iz bi translated">使用<code class="fe pb pc pd pe b">ref()</code>和全局变量的dbt模型</h2><p id="2b30" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">我们可以使用本文前面定义的两个dbt模型构建更复杂的模型。例如，让我们创建一个新的dbt模型，它根据国家代码连接上述两个表，然后根据选定的国家和年份进行过滤。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="qr qq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><strong class="ak">jinja _ and _ variable _ usage</strong>dbt模型(models/jinja _ and _ variable _ usage . SQL)</p></figure><p id="ef74" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">关于上述查询的几点:</p><ul class=""><li id="fc45" class="mf mg it ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated"><code class="fe pb pc pd pe b">{{ref('dbt_model_name')}}</code>用于指项目中可用的dbt型号。</li><li id="62ae" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">你可以从像<code class="fe pb pc pd pe b">{{ref('dbt_model_name')}}.column_name</code>这样的模型中得到一个专栏。</li><li id="098d" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">您可以通过<code class="fe pb pc pd pe b">{{var("variable_name)}}</code>使用<code class="fe pb pc pd pe b">dbt_project.yml</code>文件中定义的变量。</li></ul><p id="2745" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">上面的代码片段将来自<code class="fe pb pc pd pe b">population</code>和<code class="fe pb pc pd pe b">covid19_latest_stats</code>型号的数据连接到国家代码上，并根据selected_country=USA和selected_year=2019进行筛选。模型的输出如下所示。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qw"><img src="../Images/2a734b1f34f73ae4fb6c7f13b0b864fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_USPqEzaKlAaHxf0-YHtvg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><strong class="bd qt">jinja _ and _ variable _ usage</strong>dbt模型的输出</p></figure><p id="2b6c" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">您也可以点击<strong class="ll jd">编译sql </strong>按钮查看编译后的SQL代码片段。这非常有用，特别是如果您想在dbt工具之外运行查询的话。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qx"><img src="../Images/362da5d35dbca43e4b54fda56d64058a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ckTG1PUp3CRGE_I9gqQ2WQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">为<strong class="bd qt">jinja _ and _ variable _ usage</strong>dbt模型编译的SQL代码</p></figure><h2 id="06e1" class="ns nb it bd nc nt nu dn ng nv nw dp nk ls nx ny nm lw nz oa no ma ob oc nq iz bi translated">使用dbt_utils包和宏的dbt模型</h2><p id="2ef0" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated"><code class="fe pb pc pd pe b">dbt_utils</code>包中包含可以在dbt项目中使用的宏(又名函数)。所有宏的列表可以在<a class="ae li" href="https://github.com/dbt-labs/dbt-utils/" rel="noopener ugc nofollow" target="_blank"> dbt_utils的GitHub页面</a>上找到。</p><p id="7e3f" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">让我们在dbt模型中使用dbt_utils <code class="fe pb pc pd pe b"><a class="ae li" href="https://github.com/dbt-labs/dbt-utils/#pivot-source" rel="noopener ugc nofollow" target="_blank">pivot()</a></code>和<code class="fe pb pc pd pe b"><a class="ae li" href="https://github.com/dbt-labs/dbt-utils/#get_column_values-source" rel="noopener ugc nofollow" target="_blank">get_column_values()</a></code>宏，如下所示:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="qr qq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><strong class="ak">使用_dbt_utils_macros </strong> dbt模型(models/using _ dbt _ utils _ macros . SQL)</p></figure><p id="fd45" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">上面的dbt模型将在dbt中编译成下面的SQL查询。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="qr qq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">使用_dbt_utils_macros从<strong class="ak">编译SQL查询</strong> dbt模型</p></figure></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="7f43" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">在dbt中运行测试</h1><p id="3a94" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">使用dbt的另一个好处是能够测试数据。开箱即用，dbt有以下通用测试:<code class="fe pb pc pd pe b">unique</code>、<code class="fe pb pc pd pe b">not_null</code>、<code class="fe pb pc pd pe b">accepted_values</code>和<code class="fe pb pc pd pe b">relationships</code>。对模型进行这些测试的示例如下所示:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="qr qq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">schema.yml (dbt测试)</p></figure><p id="db53" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">你可以通过<code class="fe pb pc pd pe b">dbt test</code>运行测试。您可以在下面看到输出</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qs"><img src="../Images/d2381f0cc56c2e9f79a26390d43c4b83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hpAEsI-XOwvpKd6p4fK0wg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">在dbt云仪表板上运行dbt测试的结果</p></figure><p id="c80b" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">关于dbt测试的更多信息，您可以访问<a class="ae li" href="https://docs.getdbt.com/docs/building-a-dbt-project/tests" rel="noopener ugc nofollow" target="_blank"> dbt文档</a>。</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="20cd" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">在dbt中生成文档</h1><p id="c83c" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">您可以通过简单地在命令部分运行<code class="fe pb pc pd pe b">dbt docs generate</code>来为您的dbt项目生成文档，如下所示:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qy"><img src="../Images/5f7a4dc716547a1cd75c87942cf95f2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1BKHqgVyupWse2P4k2TJmw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">为dbt项目生成文档</p></figure><p id="6737" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">您可以通过单击查看文档来浏览生成的文档。您可以在这里看到生成的文档的概述。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="qz qq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">命令<strong class="ak">生成的文档dbt docs生成</strong>。</p></figure><p id="0f24" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">除了<code class="fe pb pc pd pe b">dbt docs generate</code>之外，dbt docs还可以为web服务器提供生成的文档。为此，您只需运行<code class="fe pb pc pd pe b">dbt docs serve</code>。更多关于为你的dbt项目生成文档的信息可以在<a class="ae li" href="https://docs.getdbt.com/docs/building-a-dbt-project/documentation" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="3efc" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">其他功能</h1><h2 id="e258" class="ns nb it bd nc nt nu dn ng nv nw dp nk ls nx ny nm lw nz oa no ma ob oc nq iz bi translated">使用钩子和操作的数据库管理</h2><p id="2da6" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">有些数据库管理任务需要运行额外的SQL查询，例如:</p><ul class=""><li id="5500" class="mf mg it ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">创建用户定义的函数</li><li id="5d1c" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">授予对表的特权</li><li id="0352" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">还有更多</li></ul><p id="8e0d" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">dbt有两个接口(钩子和操作)来执行这些任务，重要的是对它们进行版本控制。这里简单介绍一下钩子和操作。有关更多信息，您可以查看<a class="ae li" href="https://docs.getdbt.com/docs/building-a-dbt-project/hooks-operations" rel="noopener ugc nofollow" target="_blank"> dbt文档</a>。</p><h2 id="6ca2" class="ns nb it bd nc nt nu dn ng nv nw dp nk ls nx ny nm lw nz oa no ma ob oc nq iz bi translated">钩住</h2><p id="0ff6" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">钩子只是在不同时间执行的SQL片段。钩子在<code class="fe pb pc pd pe b">dbt_project.yml</code>文件中定义。不同的挂钩有:</p><ul class=""><li id="d25e" class="mf mg it ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated"><code class="fe pb pc pd pe b">pre-hook</code>:模型建立前执行</li><li id="3e1b" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated"><code class="fe pb pc pd pe b">post-hook</code>:模型建立后执行</li><li id="19d9" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated"><code class="fe pb pc pd pe b">on-run-start</code>:在<code class="fe pb pc pd pe b">dbt run</code>开始时执行</li><li id="4a5c" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated"><code class="fe pb pc pd pe b">on-run-end</code>:在<code class="fe pb pc pd pe b">dbt run</code>结束时执行</li></ul><h2 id="6dce" class="ns nb it bd nc nt nu dn ng nv nw dp nk ls nx ny nm lw nz oa no ma ob oc nq iz bi translated">操作</h2><p id="315a" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">操作是在不运行模型的情况下调用宏的一种便捷方式。使用<code class="fe pb pc pd pe b"><a class="ae li" href="https://docs.getdbt.com/reference/commands/run-operation" rel="noopener ugc nofollow" target="_blank">dbt run-operation</a></code>命令触发操作。</p><p id="69c3" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">注意，与钩子不同，您需要在一个<a class="ae li" href="https://docs.getdbt.com/docs/building-a-dbt-project/hooks-operations#operations" rel="noopener ugc nofollow" target="_blank"> dbt操作</a>中显式执行SQL。</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="66d4" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">结论</h1><p id="5a65" class="pw-post-body-paragraph lj lk it ll b lm od kd lo lp oe kg lr ls of lu lv lw og ly lz ma oh mc md me im bi translated">dbt是一个很好的工具，绝对值得一试，因为它可以简化您的数据ELT(或ETL)管道。在这篇文章中，我们学习了如何设置和使用dbt进行数据转换。我向您介绍了该工具的不同特性。特别是，我提供了一个分步指南</p><ul class=""><li id="be77" class="mf mg it ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">配置dbt项目</li><li id="3192" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">创建dbt模型(SELECT语句)</li><li id="f0d4" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">使用全局变量和宏构建复杂的dbt模型</li><li id="0384" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">参考其他dbt模型构建复杂模型</li><li id="08a7" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">运行测试</li><li id="ca8b" class="mf mg it ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">生成文档</li></ul><p id="06bc" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">您可以在下面找到包含所有脚本(包括数据摄取脚本)的GitHub repo。</p><div class="oj ok gp gr ol om"><a href="https://github.com/e-alizadeh/sample_dbt_project" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd jd gy z fp or fr fs os fu fw jc bi translated">e-alizadeh/sample_dbt_project</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">github.com</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa lb om"/></div></div></a></div><p id="0ee8" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">感谢阅读🙏</p><blockquote class="pm"><p id="ec6b" class="pn po it bd pp pq pr ps pt pu pv me dk translated"><a class="ae li" href="https://www.ealizadeh.com/subscribe/" rel="noopener ugc nofollow" target="_blank"> <em class="lh">加入我的邮件列表接收类似的帖子</em> </a> <em class="lh">。也可以关注我上</em> <a class="ae li" href="https://medium.com/@ealizadeh" rel="noopener"> <em class="lh">中</em></a><em class="lh"/><a class="ae li" href="https://www.linkedin.com/in/alizadehesmaeil/" rel="noopener ugc nofollow" target="_blank"><em class="lh">LinkedIn</em></a><em class="lh">，</em><a class="ae li" href="https://twitter.com/intent/follow?screen_name=es_alizadeh&amp;tw_p=followbutton" rel="noopener ugc nofollow" target="_blank">T22】Twitter</a><em class="lh">。</em></p></blockquote></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="367b" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">有用的链接</h1><div class="oj ok gp gr ol om"><a rel="noopener follow" target="_blank" href="/deploy-free-postgresql-database-in-heroku-and-ingest-data-8002c574a57d"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd jd gy z fp or fr fs os fu fw jc bi translated">免费PostgreSQL数据库的逐步部署和数据接收</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">在Heroku中免费部署PostgreSQL数据库，并使用Pandas和SQLAlchemy接收数据</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">towardsdatascience.com</p></div></div><div class="ov l"><div class="ra l ox oy oz ov pa lb om"/></div></div></a></div><h1 id="ae16" class="na nb it bd nc nd qb nf ng nh qc nj nk ki qd kj nm kl qe km no ko qf kp nq nr bi translated">参考</h1><div class="oj ok gp gr ol om"><a href="https://docs.getdbt.com/docs/introduction" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd jd gy z fp or fr fs os fu fw jc bi translated">dbt是什么？| dbt文档</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">dbt(数据构建工具)使分析工程师能够通过简单地编写select…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">docs.getdbt.com</p></div></div><div class="ov l"><div class="rb l ox oy oz ov pa lb om"/></div></div></a></div></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><p id="4385" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated"><em class="oi">原载于</em><a class="ae li" href="https://ealizadeh.com/blog/dbt-tutorial" rel="noopener ugc nofollow" target="_blank"><em class="oi">https://ealizadeh.com</em></a><em class="oi">。</em></p></div></div>    
</body>
</html>