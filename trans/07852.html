<html>
<head>
<title>Automating Mundane Web-Based Tasks With Selenium and Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Selenium和Heroku自动处理日常的基于Web的任务</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/automating-mundane-web-based-tasks-with-selenium-and-heroku-715a2f1ec35e?source=collection_archive---------30-----------------------#2021-07-18">https://towardsdatascience.com/automating-mundane-web-based-tasks-with-selenium-and-heroku-715a2f1ec35e?source=collection_archive---------30-----------------------#2021-07-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="54c0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用简单的方法自动化掉那些不断重复的任务</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7be625e29f90185afcc7d66759ac71c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JIXTwELW0wGjb4AW"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae kv" href="https://unsplash.com/@magnetme?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Magnet.me </a>拍照</p></figure><h2 id="7adc" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">手头的任务</h2><p id="1467" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">作为一个狂热的跑步者和数据爱好者，我自然喜欢记录我的训练。几年前我确定的解决方案是在Strava和Attackpoint上记录我的培训。虽然这两个平台都提供使用GPS数据跟踪锻炼的服务，但Strava强调的是社交网络，它允许你以深入的方式查看每个活动，这是Attackpoint所缺乏的；另一方面，Attackpoint更简单，我个人更喜欢把它作为我训练的一个整体(以周/月/年为时间尺度)。</p><div class="kg kh ki kj gt ab cb"><figure class="ml kk mm mn mo mp mq paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/e494916c65ef21d9893fb5946cdf1ca1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*E481jJRchmHNIUGdpAId_g.png"/></div></figure><figure class="ml kk mr mn mo mp mq paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/276dfaaeb8cb99bba4bbdc91d1952123.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/format:webp/1*zlWqIoZwPVzEtZcuRvEmFw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk ms di mt mu translated">左边的<a class="ae kv" href="https://www.strava.com/" rel="noopener ugc nofollow" target="_blank">斯特拉瓦</a>和右边的<a class="ae kv" href="https://www.attackpoint.org/" rel="noopener ugc nofollow" target="_blank">攻击点</a>。作者图片</p></figure></div><p id="d343" class="pw-post-body-paragraph ls lt iq lu b lv mv jr lx ly mw ju ma lf mx mc md lj my mf mg ln mz mi mj mk ij bi translated">然而，我的一个问题是，我总是努力保持这两个日志是最新的。Garmin(我的跑步手表的制造商)通过API与两个网站同步，所以我的跑步神奇地出现在两个网站上，所以问题不在于我的跑步只出现在一个网站上。我的问题是保持两个网站都有运行记录/描述是一件乏味的事情。我倾向于总是保持Strava的最新状态，并在我感到烦恼的时候在Attackpoint上浏览帖子。那么，为什么不把我对这些网站的承诺问题自动化呢？</p><p id="5e16" class="pw-post-body-paragraph ls lt iq lu b lv mv jr lx ly mw ju ma lf mx mc md lj my mf mg ln mz mi mj mk ij bi translated"><strong class="lu ir">任务:每次我在Strava上跑步并写下关于它的描述，然后把它添加到Attackpoint上相应的跑步帖子中。</strong></p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h2 id="017c" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">游戏计划</h2><p id="73cb" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">所以我有了一个为什么，剩下的就是找出方法。选择从Strava到Attackpoint，而不是相反，是一个简单的选择。首先，Strava使用起来更好，其次，该网站更现代、更灵活、更别致，因此编写代码来发布内容并与之交互虽然可行，但会更具挑战性。那么我实际上是怎么做的呢？</p><p id="eb5b" class="pw-post-body-paragraph ls lt iq lu b lv mv jr lx ly mw ju ma lf mx mc md lj my mf mg ln mz mi mj mk ij bi translated">输入硒。Selenium是一个Python包，用于启动和控制web浏览器。它能够在这个浏览器中填写表格和模拟鼠标点击。一个关于Selenium的优秀教程，我用的比较多，可以在这里找到:<a class="ae kv" rel="noopener" target="_blank" href="/controlling-the-web-with-python-6fceb22c5f08">https://towardsdatascience . com/controlling-the-web-with-python-6 fceb 22 C5 f 08</a>。</p><p id="3586" class="pw-post-body-paragraph ls lt iq lu b lv mv jr lx ly mw ju ma lf mx mc md lj my mf mg ln mz mi mj mk ij bi translated">有了这些东西，我发现写下行动计划总是好的；无论是在纸上还是在你的电脑上，这完全取决于个人喜好，我倾向于用纸。当事情不可避免地出错时，我往往最终会严重偏离最初的计划，但不管怎样，我发现写下最初的想法/想法会让我思路清晰，给我方向感。</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><p id="6172" class="pw-post-body-paragraph ls lt iq lu b lv mv jr lx ly mw ju ma lf mx mc md lj my mf mg ln mz mi mj mk ij bi translated">因此，下面是我选择自动执行这项任务的大致轮廓:</p><ul class=""><li id="f550" class="nh ni iq lu b lv mv ly mw lf nj lj nk ln nl mk nm nn no np bi translated">调用Strava API来获取我最近跑步的惟一id的有序列表。这原本不在计划中，但是由于增加的复杂性(例如，我的许多runs组运行，html在这里变得棘手)，从Strava获得我的活动+相应的时间顺序信息比我最初想象的要困难得多。有了这些id，提取信息就更容易了。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><ul class=""><li id="a11d" class="nh ni iq lu b lv mv ly mw lf nj lj nk ln nl mk nm nn no np bi translated">使用Selenium登录Strava，导航到“您的活动”选项卡，检索与每个唯一活动ID对应的跑步信息。正如您在下面的代码中看到的，Selenium非常容易使用，因为它非常直观。下面的代码是一个大概的框架，完整的代码+注释可以在我的<a class="ae kv" href="https://github.com/jackmleitch/strava2ap" rel="noopener ugc nofollow" target="_blank"> Github </a>页面找到。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><ul class=""><li id="8025" class="nh ni iq lu b lv mv ly mw lf nj lj nk ln nl mk nm nn no np bi translated">现在我们有了我最近的所有活动(按照完成的顺序！)以及活动细节:时间、标题、描述、距离和速度。现在剩下要做的就是将标题和描述添加到我的Attackpoint页面，尽管还有一些小的微妙之处。首先，如果任何活动已经有了描述，我不想再去管它们。其次，如果任何Strava标题是默认的，即没有被改变，我也想离开岗位，因为我还没有得到周围命名Strava运行。和以前一样，为了清楚起见，省略了一些代码细节。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="40fd" class="pw-post-body-paragraph ls lt iq lu b lv mv jr lx ly mw ju ma lf mx mc md lj my mf mg ln mz mi mj mk ij bi translated">我们完成了，如果我在终端中运行attackpointSelenium.py，它会将任何缺失的描述添加到我的攻击点中！</p><h2 id="d9e1" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">使自动装置完全自动化</h2><p id="778d" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">显然，一天运行一行代码一两次太费力了，所以剩下要做的最后一件事就是把代码部署到网上的某个地方，这样我就完全置身事外了。遵循这个优秀的<a class="ae kv" href="https://medium.com/analytics-vidhya/schedule-a-python-script-on-heroku-a978b2f91ca8" rel="noopener">教程</a>，我能够将我的代码部署到<a class="ae kv" href="https://id.heroku.com/login" rel="noopener ugc nofollow" target="_blank"> Heroku </a>并对其进行调度，以便我的代码检查我的攻击点是否需要每10分钟更新一次！最棒的是，它完全免费。</p><p id="b03a" class="pw-post-body-paragraph ls lt iq lu b lv mv jr lx ly mw ju ma lf mx mc md lj my mf mg ln mz mi mj mk ij bi translated"><strong class="lu ir">TL；DR编写了代码，自动将信息从一个网站发布到另一个网站的相应部分。</strong></p><p id="9f40" class="pw-post-body-paragraph ls lt iq lu b lv mv jr lx ly mw ju ma lf mx mc md lj my mf mg ln mz mi mj mk ij bi translated"><strong class="lu ir">代号:</strong><a class="ae kv" href="https://github.com/jackmleitch/strava2ap" rel="noopener ugc nofollow" target="_blank"><strong class="lu ir"/></a></p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><p id="e214" class="pw-post-body-paragraph ls lt iq lu b lv mv jr lx ly mw ju ma lf mx mc md lj my mf mg ln mz mi mj mk ij bi translated">感谢阅读，我希望你喜欢它。这里有一些你可能感兴趣的我的其他故事…</p><div class="ns nt gp gr nu nv"><a rel="noopener follow" target="_blank" href="/organizing-machine-learning-projects-e4f86f9fdd9c"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd ir gy z fp oa fr fs ob fu fw ip bi translated">组织机器学习项目</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">组织机器学习项目的实用指南</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">towardsdatascience.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj kp nv"/></div></div></a></div><div class="ns nt gp gr nu nv"><a rel="noopener follow" target="_blank" href="/building-a-recipe-recommendation-api-using-scikit-learn-nltk-docker-flask-and-heroku-bfc6c4bdd2d4"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd ir gy z fp oa fr fs ob fu fw ip bi translated">使用Scikit-Learn、NLTK、Docker、Flask和Heroku构建食谱推荐API</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">我的第一个“全栈”数据科学项目之旅(第2部分)——构建和部署</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">towardsdatascience.com</p></div></div><div class="oe l"><div class="ok l og oh oi oe oj kp nv"/></div></div></a></div></div></div>    
</body>
</html>