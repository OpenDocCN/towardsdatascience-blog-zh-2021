<html>
<head>
<title>Stop using Print or Logger to Debug your Python Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止使用Print或Logger来调试Python代码</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/stop-using-print-or-logger-to-debug-your-python-code-ba6d076dab30?source=collection_archive---------15-----------------------#2021-07-25">https://towardsdatascience.com/stop-using-print-or-logger-to-debug-your-python-code-ba6d076dab30?source=collection_archive---------15-----------------------#2021-07-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9573" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">代码调试冰淇淋包基本指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/92de4645e6e314d58acf9224934a47f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lXbzXjFILew2sx1YZR_Lxw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=4918185" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae ky" href="https://pixabay.com/users/15548337-15548337/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=4918185" rel="noopener ugc nofollow" target="_blank"> Dhruvil Patel </a></p></figure><p id="4bff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对每个开发人员来说，调试代码是一项重要但令人厌倦的任务。当代码输出不符合预期或抛出错误时，执行代码调试是非常重要的。调试是发现并修复程序中错误的过程。</p><p id="f9e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">语法错误和语义错误是开发人员在程序中面临的两种错误。语法错误是由命令或代码的错误键入、缩进错误引起的，通过遵循Python traceback指令很容易修复。当代码输出不符合预期时，会导致语义错误，这可能是由于算法的错误实现造成的。</p><p id="a460" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">语法错误很容易处理，但有时处理语义错误是一项困难且耗时的任务。开发人员需要检查代码片段并修复错误。</p><p id="89a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常，开发人员使用打印语句或在代码片段之间添加日志来进行调试。有各种用于调试的开源Python库。在本文中，我们将讨论这样一个库冰淇淋，它可以帮助调试您的Python代码，而无需插入大量的打印和日志语句。</p><h1 id="0d27" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">冰淇淋:</h1><p id="c8d1" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">冰淇淋？是的，它是一个帮助开发者调试Python代码的Python包的名字。Icecream帮助开发人员在调试时摆脱编写多个打印和日志语句来修复bug。相反，他们可以使用冰淇淋包中的<code class="fe ms mt mu mv b"><strong class="lb iu">ic</strong></code>类。</p><h2 id="e651" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">安装:</h2><p id="1f88" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">冰淇淋包可以从PyPl安装，使用</p><pre class="kj kk kl km gt ni mv nj nk aw nl bi"><span id="ca04" class="mw lw it mv b gy nm nn l no np"><strong class="mv iu">pip install icecream</strong></span></pre><p id="6865" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并导入<code class="fe ms mt mu mv b"><strong class="lb iu">ic</strong></code> <strong class="lb iu"> </strong>类进行调试<code class="fe ms mt mu mv b"><strong class="lb iu">from icecream import ic</strong></code></p><h1 id="8bd9" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">用法:</h1><p id="6511" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Icecream可以打印表达式/变量名及其值。输出格式也可以被格式化，并且还可以包括程序上下文，例如文件名、行号和父函数。</p><h2 id="a479" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">检查变量和函数:</h2><p id="5b44" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><code class="fe ms mt mu mv b"><strong class="lb iu">ic()</strong></code>冰淇淋包中的函数检查自身，并打印自己的参数和这些参数的值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/5e4c32f8d86667771ccefb9bc2b81422.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/format:webp/1*4MC_UCluxXIn2_6EsrJ94A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="48ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只要给<code class="fe ms mt mu mv b">ic()</code>一个变量、表达式或函数，就大功告成了。</p><h2 id="fb09" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">检查执行情况:</h2><p id="33db" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">开发人员通常使用记录器或打印语句来了解正在执行的代码部分以及函数流。在每个函数调用或循环中使用ic()函数可以用来在调试时跟踪代码的执行。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="5c32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要检查Python函数的执行情况，请将自定义函数作为参数传递给ic()。ic()返回自定义函数的参数，因此可以很容易地在预先存在的代码中实现。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/4f686a04df48203eda9eaf42b052cd2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*iln4iAhvTKKH1aRn53eoAA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)，带有ic()的函数调用</p></figure><p id="fd10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过观察ic()函数的打印功能，可以很容易地跟踪函数的执行。</p><h2 id="a0c4" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">附加优势:</h2><p id="a159" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">用户可以配置和定制<code class="fe ms mt mu mv b"><strong class="lb iu">ic()</strong></code>功能的输出。使用该函数，用户可以添加前缀、更改输出函数、定制输出语句的参数，以及包含或排除程序上下文，如文件名、行号和父函数。</p><pre class="kj kk kl km gt ni mv nj nk aw nl bi"><span id="1222" class="mw lw it mv b gy nm nn l no np"><strong class="mv iu">def unixTimestamp():<br/>return '%i |&gt; ' % int(time.time())</strong></span><span id="d032" class="mw lw it mv b gy nu nn l no np"># add unix time stamp as prefix<br/><strong class="mv iu">ic.configureOutput(prefix=unixTimestamp)</strong></span></pre><p id="d67d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成代码调试后，您可以删除所有的ic()函数调用，或者使用<code class="fe ms mt mu mv b"><strong class="lb iu">ic.disable()</strong></code>函数禁用输出。稍后可以使用<code class="fe ms mt mu mv b"><strong class="lb iu">ic.enable()</strong></code> <strong class="lb iu"> </strong>功能重新启用。</p><h1 id="d05a" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论:</h1><p id="c1f6" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">冰淇淋包可以用来代替编写多个打印或日志语句进行代码调试。输出格式的数据结构非常清晰，包括表达式/变量名及其值和其他程序上下文。在调试时编写打印语句或记录器来输出所有这些信息是一项单调乏味的任务，但是ice cream仅用几行代码实现就提供了所有这些。</p><p id="0c65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了Python之外，冰激凌包的实现还有12种编程语言，包括<a class="ae ky" href="https://github.com/renatoGarcia/icecream-cpp" rel="noopener ugc nofollow" target="_blank"> C++ </a>、<a class="ae ky" href="https://github.com/Akshay-Thakare/icecream-java" rel="noopener ugc nofollow" target="_blank"> Java </a>、<a class="ae ky" href="https://github.com/nodai2hITC/ricecream" rel="noopener ugc nofollow" target="_blank"> Ruby </a>、<a class="ae ky" href="https://github.com/lewinfox/icecream" rel="noopener ugc nofollow" target="_blank"> R </a>、<a class="ae ky" href="https://github.com/WAY29/icecream-go" rel="noopener ugc nofollow" target="_blank"> Go </a>等。</p><h1 id="9185" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">参考资料:</h1><p id="7883" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">[1]冰淇淋GitHub:<a class="ae ky" href="https://github.com/gruns/icecream" rel="noopener ugc nofollow" target="_blank">https://github.com/gruns/icecream</a></p><blockquote class="nv"><p id="ee59" class="nw nx it bd ny nz oa ob oc od oe lu dk translated">感谢您的阅读</p></blockquote></div></div>    
</body>
</html>