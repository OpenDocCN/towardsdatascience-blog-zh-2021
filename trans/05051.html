<html>
<head>
<title>How to Easily Automate Your Python Scripts on Mac and Windows</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Mac和Windows上轻松自动化您的Python脚本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-easily-automate-your-python-scripts-on-mac-and-windows-459388c9cc94?source=collection_archive---------2-----------------------#2021-05-04">https://towardsdatascience.com/how-to-easily-automate-your-python-scripts-on-mac-and-windows-459388c9cc94?source=collection_archive---------2-----------------------#2021-05-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3a5d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用crontab和任务调度器来自动化您的脚本并节省时间</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/16c03952399cc09dda244026706f5863.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lskSLaeuCkggSUfT2n8hQw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://pixabay.com/photos/office-freelance-freelancer-4906569/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上的<a class="ae ky" href="https://pixabay.com/users/deeezy-15467098/" rel="noopener ugc nofollow" target="_blank"> Deeezy </a>拍摄</p></figure><p id="7c7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行Python脚本可能就像打开IDE或文本编辑器并单击运行按钮一样简单；但是，如果脚本必须每天或每周执行，您就不希望浪费时间一遍又一遍地重复这些步骤。</p><p id="c552" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相反，您可以通过计划在特定时间运行Python脚本的作业来自动化这些脚本。在本文中，我将向您展示如何在Mac和Windows上使用crontab和任务调度器来完成这项工作。</p><h1 id="5712" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">在macOS上调度作业</h1><p id="129a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们将要自动化的Python脚本叫做<code class="fe ms mt mu mv b">example.py</code>。你可以使用任何你必须遵循的脚本。</p><h2 id="2332" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">步骤1:用PyInstaller使Python文件可执行</h2><p id="bbe3" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">要在macOS上调度一个作业，我们首先需要使我们的Python文件可执行(。exe)。将<code class="fe ms mt mu mv b">.py </code>文件转换成可执行文件有不同的方法。在这种情况下，我将使用“PyInstaller”库，因为它很简单。</p><p id="e3ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PyInstaller读取Python脚本并找到脚本需要执行的库。然后，它创建所有文件的副本，并将它们放在一个可执行文件中。</p><p id="5071" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要安装PyInstaller并使您的python脚本可执行，请执行以下操作。</p><ul class=""><li id="ae22" class="ni nj it lb b lc ld lf lg li nk lm nl lq nm lu nn no np nq bi translated">打开终端，运行<code class="fe ms mt mu mv b">pip install pyinstaller</code>。这将安装PyInstaller</li><li id="dc81" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">在终端内部，转到您的脚本所在的目录(使用<code class="fe ms mt mu mv b">cd </code>在目录中导航)</li><li id="249d" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">一旦进入脚本所在的路径，在终端中编写下面的<code class="fe ms mt mu mv b">pyinstaller --onefile example.py </code>,使脚本可执行。</li></ul><p id="2dd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在此之后，您将看到一条消息，上面写着“成功完成”然后在您的脚本所在的目录中，应该已经创建了一个名为“dist”的文件夹。在这个文件夹中，你会找到独立的可执行文件！<strong class="lb iu">右键点击，点击“打开方式”，然后“终端”，测试是否一切正常。</strong></p><p id="570b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="nw">注意:如果您在运行独立的可执行文件后看到一个错误，如“ModuleFoundNotError:Not module named ' name _ of _ module '”，您必须再次重复第1步，但是现在编写下面的</em> </strong></p><pre class="kj kk kl km gt nx mv ny nz aw oa bi"><span id="881e" class="mw lw it mv b gy ob oc l od oe">pyinstaller --onefile example.py <!-- -->--hidden-import name_of_module</span></pre><h2 id="6fee" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">步骤2:使用crontab调度作业</h2><p id="5ee9" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">为了在macOS上调度作业，我们将使用crontab。为此，打开终端并运行<code class="fe ms mt mu mv b">crontab -e</code>。在这之后，你的终端应该看起来像下面的图片。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/c6c853271a7bfdc8aabaddad1a7cd43d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6uIzAQvk7RIAOgQHQtip5g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="13c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在这里创建新的工作。他们每个人都有自己的台词。要创建作业，请使用下面框中的格式。</p><pre class="kj kk kl km gt nx mv ny nz aw oa bi"><span id="08f9" class="mw lw it mv b gy ob oc l od oe">* * * * * command_to_execute</span><span id="0ce4" class="mw lw it mv b gy og oc l od oe">* - minute (0-59)<br/>* - hour (0-23)<br/>* - day of the month (1-31)<br/>* - month (1-12)<br/>* - day of the week (0-6, Sunday to Saturday)</span></pre><p id="2ac4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">学习如何创建新的cron作业很简单，但是要小心，cron作业失败可能是灾难性的。我建议您使用<a class="ae ky" href="https://crontab.guru/" rel="noopener ugc nofollow" target="_blank"> crontab.guru </a>来生成正确格式的cron表达式。</p><p id="947a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在是时候创建一个cron作业了。</p><ul class=""><li id="8d94" class="ni nj it lb b lc ld lf lg li nk lm nl lq nm lu nn no np nq bi translated">点击<code class="fe ms mt mu mv b">i</code>激活<code class="fe ms mt mu mv b">INSERT</code>模式</li><li id="d51d" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">现在可以写作业了。在这个例子中，我写了<code class="fe ms mt mu mv b">0 15 * * 5 path_of_executable </code>这意味着"<em class="nw">在每个<em class="nw">星期五的15:00运行Python脚本</em>"</em>(你可以在<a class="ae ky" href="https://crontab.guru/" rel="noopener ugc nofollow" target="_blank"> crontab.guru </a>上查看)</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/d43afb0bcc207f48d0eca9deb7038fe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F5SwS_S8ZgB7ApgC02FSMQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><ul class=""><li id="0361" class="ni nj it lb b lc ld lf lg li nk lm nl lq nm lu nn no np nq bi translated">打出后，按<code class="fe ms mt mu mv b">esc</code>。然后键入<code class="fe ms mt mu mv b">:</code>并写<code class="fe ms mt mu mv b">wq</code>保存并退出(<code class="fe ms mt mu mv b">w</code> -写，<code class="fe ms mt mu mv b">q</code> -退出)，最后按回车键。</li></ul><p id="1b20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此后，可能会出现以下窗口</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/22fdbb60fa967407412c63a84c284ce7.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*YP0OQ0nVocVB527MaYJFfQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="7f24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只需点击“确定”即可授予访问权限。在此之后，应该已经创建了crontab。</p><p id="b520" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要验证crontab是否已创建，请编写<code class="fe ms mt mu mv b">crontab -e or crontab -l</code>。如果您想删除列出的所有crontabs，请编写<code class="fe ms mt mu mv b">crontab -r.</code></p><p id="6a9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！现在，您的Python脚本将在预定的时间运行！</p><p id="2060" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nw">注意:如果你有权限问题，你需要给完全磁盘访问权限，所以去系统偏好设置，安全和隐私，隐私，和完全磁盘访问权限。</em></p></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><h1 id="881c" class="lv lw it bd lx ly oq ma mb mc or me mf jz os ka mh kc ot kd mj kf ou kg ml mm bi translated">在Windows上调度作业</h1><p id="0372" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">由于有了任务调度器，在Windows上安排作业比在Mac上更容易。只需遵循以下步骤。我们将要自动化的Python脚本叫做<code class="fe ms mt mu mv b">example.py</code></p><h2 id="cf11" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">步骤1:用批处理文件使Python文件可执行</h2><p id="68e6" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">批处理文件有不同的用途，但是在这种情况下，我们将把它作为一个可执行文件来自动化我们的Python脚本。</p><p id="3dab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将把Python脚本存储在bat文件中，然后单击bat文件来执行命令并运行Python脚本。为此，请按照下列步骤操作。</p><ul class=""><li id="9a39" class="ni nj it lb b lc ld lf lg li nk lm nl lq nm lu nn no np nq bi translated">右键单击任何文件夹，然后单击“新建”并创建一个记事本(“文本文档”)</li><li id="6a51" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">在记事本中，使用以下格式编写文本。</li></ul><pre class="kj kk kl km gt nx mv ny nz aw oa bi"><span id="8cf9" class="mw lw it mv b gy ob oc l od oe"><strong class="mv iu">&lt;Paste your python.exe location&gt; &lt;Paste your python script location&gt;</strong></span></pre><p id="1837" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要获得“python.exe”路径(python应用程序路径)，您需要转到保存Python的位置(检查您安装它的位置)。您的记事本可能看起来像下面的文本。</p><pre class="kj kk kl km gt nx mv ny nz aw oa bi"><span id="7c0c" class="mw lw it mv b gy ob oc l od oe">"C:\User\Anaconda\python.exe" "C:\Scripts\example.py"</span></pre><ul class=""><li id="21f5" class="ni nj it lb b lc ld lf lg li nk lm nl lq nm lu nn no np nq bi translated">现在点击“文件”,然后点击“另存为”,最后写下包括扩展名<code class="fe ms mt mu mv b">.bat </code>在内的任何名称。对于这个例子，我将创建一个名为<code class="fe ms mt mu mv b">example.bat</code>的文件</li></ul><h2 id="2ef6" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">步骤2:在Windows任务计划程序中创建任务</h2><p id="6501" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">让我们用Windows任务调度器来调度<code class="fe ms mt mu mv b">example.bat </code>文件。只要按照这些步骤。</p><ul class=""><li id="e609" class="ni nj it lb b lc ld lf lg li nk lm nl lq nm lu nn no np nq bi translated">按Windows按钮并搜索Windows任务计划程序。然后点击它。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/78ba63f9e32e8c55e6344e1624e09d2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bfVnhk_OwzHzac8ZSBwonQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><ul class=""><li id="ba31" class="ni nj it lb b lc ld lf lg li nk lm nl lq nm lu nn no np nq bi translated">现在你应该会看到一个类似上图的窗口。单击右侧面板上的“创建基本任务”。</li></ul><p id="9577" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">应该会弹出这样的窗口。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/3bf8e336f3888b6ed12b0bc46cc80844.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jDwSeqV0q4ddEImWdAy63A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="43b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你只需要填写所有需要的信息，然后点击下一步。这些是您在上面看到的选项:</p><ol class=""><li id="048b" class="ni nj it lb b lc ld lf lg li nk lm nl lq nm lu ox no np nq bi translated"><strong class="lb iu">创建一个基本任务:</strong>写下你的任务名称和描述。</li><li id="cf29" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu ox no np nq bi translated"><strong class="lb iu">触发时间:</strong>选择您希望任务开始的时间。您可以选择每日、每周、每月等等。然后你必须选择上一次选择的时间<strong class="lb iu"> ( </strong>每x天、周、月重复一次)</li><li id="b2b9" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu ox no np nq bi translated"><strong class="lb iu">操作:</strong>有3种操作可用，但其中两种已过时，因此只需选择“启动程序”并单击“下一步”。然后，浏览我们之前创建的bat文件。</li><li id="7505" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu ox no np nq bi translated">点击<strong class="lb iu">完成</strong>按钮创建任务。</li></ol><p id="9524" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在此之后，一个新的任务应该被列在任务调度器上。</p></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><p id="07a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nw">就是这样！现在，您已经准备好在您的计算机上自动化任何Python脚本了。</em></p><p id="59c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://frankandrade.ck.page/bd063ff2d3" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">与3k以上的人一起加入我的电子邮件列表，获取我在所有教程中使用的Python for Data Science备忘单(免费PDF) </strong> </a></p></div></div>    
</body>
</html>