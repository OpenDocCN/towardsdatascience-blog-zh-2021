<html>
<head>
<title>Processing SCADA Alarm Data Offline with ELK</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用ELK离线处理SCADA报警数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/processing-scada-alarm-data-offline-with-elk-7ab9b475ffb9?source=collection_archive---------29-----------------------#2021-07-27">https://towardsdatascience.com/processing-scada-alarm-data-offline-with-elk-7ab9b475ffb9?source=collection_archive---------29-----------------------#2021-07-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5df1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">工业自动化的开源工具</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/a66408d78b11837f9c2a695cc74c4ff0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*Aw3kSOGBIrydZ4GawCUt7A.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://commons.wikimedia.org/wiki/File:Leitstand_2.jpg" rel="noopener ugc nofollow" target="_blank">德国Steag</a>，通过<a class="ae ku" href="https://commons.wikimedia.org/wiki/File:Leitstand_2.jpg" rel="noopener ugc nofollow" target="_blank">维基共享资源</a></p></figure><p id="6e82" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">本文是一个系列的开始，在这个系列中，我们将使用开源数据科学工具来分析SCADA系统产生的警报和事件日志。但是首先，什么是SCADA系统，为什么需要分析它们的警报？</p><p id="5cc0" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">工业控制系统(ICS，又名SCADA系统)用于控制发电站、水处理厂、面包店、啤酒厂等生产设施。工业自动化系统将由传感器、控制器和HMI(人机界面)组成。</p><p id="eceb" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">SCADA系统生成大量的警报和事件数据(在准备本文时分析的系统在12个月内生成了超过5700万个警报和事件)。数据科学工具非常适合处理这些大型数据集，本文探讨了使用ELK堆栈进行SCADA警报数据分析。</p><h1 id="8751" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">什么是SCADA？</h1><p id="1add" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">SCADA是基于计算机的工业控制系统的通称。SCADA(监控和数据采集)系统可用于监测和控制工业过程，包括水处理、制造、发电站、食品和饮料等。事实上，任何使用自动化制造设备的工业过程。</p><h2 id="4b53" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">典型系统架构</h2><p id="618c" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">工业控制或SCADA系统的目的是监测或控制物理过程。我们系统的最低层，I/O(输入输出)层包括传感器和执行器。</p><p id="c929" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">传感器测量温度、压力、液位等物理参数。而致动器是像马达、阀门或螺线管等装置。影响身体运动。</p><p id="1ca8" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">传感器和执行器与过程控制器或PLC(可编程逻辑控制器)通信。过程控制器通常是用于运行软件来控制过程参数的专有计算机硬件。</p><p id="0ada" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">SCADA服务器使用工业协议与过程控制器通信，并执行许多功能，</p><ul class=""><li id="c975" class="na nb it kx b ky kz lb lc le nc li nd lm ne lq nf ng nh ni bi translated">维护传感器和致动器参数值(通常称为点)的数据库。</li><li id="a00b" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nf ng nh ni bi translated">存储过程参数的历史值(趋势)</li><li id="41ed" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nf ng nh ni bi translated">基于与阈值相比的参数值创建警报和事件。</li><li id="fd14" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nf ng nh ni bi translated">提供HMI(人机界面),其通常是包括动态传感器和致动器数据的图形过程表示。HMI允许过程操作员与控制系统交互(启动和停止设备和过程，确认警报等)。).</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/aa8bba1cfbdc968e9566cb2985971f68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*mNC8LsSGA7xkBKHF89RDyw.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片来源于Flaticon.com<a class="ae ku" href="https://www.flaticon.com/" rel="noopener ugc nofollow" target="_blank"/></p></figure><h2 id="3c72" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">人机界面</h2><p id="f2cc" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">SCADA系统的HMI允许操作员监控过程和远程操作设备。HMI的一个重要部分是报警系统，该系统提醒过程操作员需要他们干预的异常过程条件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/f2952d480bf29c6d14e6f55950d4faaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*pxXk7zB30GxroL1fXHpzyQ.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://commons.wikimedia.org/wiki/File:Libro-sistemas-scada-3ra-ed-mecatronica-automatizacion-22680-MLM20234441553_012015-F.jpg" rel="noopener ugc nofollow" target="_blank"> hhdgomez </a>，通过<a class="ae ku" href="https://commons.wikimedia.org/wiki/File:Libro-sistemas-scada-3ra-ed-mecatronica-automatizacion-22680-MLM20234441553_012015-F.jpg" rel="noopener ugc nofollow" target="_blank">维基共享</a></p></figure><h1 id="39b8" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">什么是警报和事件？</h1><h2 id="4b67" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">警告</h2><p id="3b92" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">警报的目的是提醒操作员需要干预的异常或危险过程条件。</p><p id="ae65" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">ICS中的每个测量参数通常都配置了阈值，当参数超过阈值时，就会产生一个事件，称为报警。</p><p id="74c4" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">实现过程警报的最常见方式是将过程变量<em class="no"> x(t) </em>与恒定的高和/或低阈值<em class="no">xₜₚ</em>【1】进行比较，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/3dbb30eb93813477a9adb869432d9c27.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*IlN1P6o-Y0oG-jiNFxOMnA.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="7249" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">报警系统是所有现代SCADA系统的一部分。这些系统提供报警事件通知、确认、显示和过滤功能。</p><h2 id="b087" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">事件</h2><p id="e29b" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">事件类似于警报，主要区别在于警报是意外的，可能需要采取纠正措施，而事件通常不需要任何操作员措施，并且被捕获以支持审计、维护和事件调查。</p><p id="d54b" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">一些SCADA系统具有独立的报警和事件系统，而其他系统将事件存储在低优先级的报警处理系统中。</p><h1 id="79da" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">为什么报警管理很重要？</h1><p id="3115" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">特别是警报管理和警报洪水[2]，几年来一直是个问题[3]。对警报洪水问题的反应导致了几个国家和国际标准的发展[4-6]。</p><p id="8064" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">性能不佳的报警系统与许多重大的加工工业灾难有关；埃索朗福德、三里岛、德士古米尔福德港湾和深水地平线，仅举几例。除了重大事故之外，有证据表明，报警系统性能不佳会给设施所有者带来持续的重大损失。霍尼韦尔过程解决方案公司估计，在一个典型的100，000 BPD炼油厂，报警系统性能的改进将每年节省589万美元[8]。</p><p id="c0fa" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">有人认为[9]报警泛滥的主要原因是过程状态变化，因为报警系统通常是为稳态条件设计的。在过程状态改变期间，前一个或两个警报是关键的，并指示根本原因；随后的警报是必然的，仅仅是噪音。这种噪音会极大地分散过程操作员的注意力，以至于无法确定事件的根本原因。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/fe2bbb1011e8a815fb39a6a7004e0b3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*UapYB0V_ICuYQZQVLbVexA.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片由作者使用以下图片；(左)<a class="ae ku" href="https://commons.wikimedia.org/wiki/File:Three_Mile_Island_(color).jpg" rel="noopener ugc nofollow" target="_blank">美国能源部</a>，公共领域，经由<a class="ae ku" href="https://commons.wikimedia.org/wiki/File:Three_Mile_Island_(color).jpg" rel="noopener ugc nofollow" target="_blank">维基共享</a>(中)<a class="ae ku" href="https://www.geograph.org.uk/profile/23409" rel="noopener ugc nofollow" target="_blank">科林·贝尔</a>，从彭布罗克码头看到的米尔福德港炼油厂，经由<a class="ae ku" href="https://commons.wikimedia.org/wiki/File:Milford_Haven_oil_refinery_seen_from_Pembroke_Dock_-_geograph.org.uk_-_845073.jpg" rel="noopener ugc nofollow" target="_blank">维基共享</a>(右)<a class="ae ku" href="https://en.wikipedia.org/wiki/United_States_Coast_Guard" rel="noopener ugc nofollow" target="_blank">美国海岸警卫队</a>，公共领域，经由<a class="ae ku" href="https://commons.wikimedia.org/wiki/File:Deepwater.Horizon.Response.jpg" rel="noopener ugc nofollow" target="_blank">维基共享</a></p></figure><p id="4d5a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><em class="no">在多个标准中定义为触发10个以上新警报的10分钟周期(每个控制台操作员)。</em></p><h1 id="6998" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">麋鹿是什么？</h1><p id="59c5" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated"><a class="ae ku" href="https://www.elastic.co/" rel="noopener ugc nofollow" target="_blank"> ELK </a> (Elasticsearch、Logstash和Kibana)堆栈是一个开源的数据收集和可视化堆栈，主要用于收集和监控服务器和应用程序日志，尽管也可以容纳许多其他用例，如商业智能和web分析。堆栈的主要组件是，</p><h2 id="7f8b" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated"><strong class="ak">弹性搜索</strong></h2><p id="9ced" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">基于Apache Lucene搜索引擎的开源全文搜索和分析引擎。</p><p id="b6e3" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">Elasticsearch通过分片和聚类支持非常大的数据库。</p><h2 id="8e28" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated"><strong class="ak">日志存储</strong></h2><p id="74db" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">一个日志收集、转换和聚合工具。</p><h2 id="dc19" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">基巴纳</h2><p id="4479" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">基于网络的弹性研究分析和可视化工具。</p><h2 id="a709" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated"><strong class="ak">跳动</strong></h2><p id="5d0a" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">轻量级数据转发代理或日志运送者。</p><h1 id="a7e7" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">安装ELK</h1><h2 id="4086" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">Windows操作系统</h2><ol class=""><li id="5315" class="na nb it kx b ky mj lb mk le nq li nr lm ns lq nt ng nh ni bi translated">从下载页面下载Elasticsearch和Kibana(我们在这里执行的分析不需要Logstash)</li><li id="32ab" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nt ng nh ni bi translated">将文件解压缩到您选择的文件夹中(文件非常大，尤其是Kibana，所以这可能需要一些时间)</li><li id="49a5" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nt ng nh ni bi translated">确保您已经安装了<a class="ae ku" href="https://www.java.com/en/" rel="noopener ugc nofollow" target="_blank"> Java </a>并且设置了ES_JAVA_HOME环境变量(注意:如果在您的系统上设置了JAVA_HOME变量，Elasticsearch将使用该变量，但它已被弃用，因此将来某个时候该选项将不起作用)</li><li id="b6de" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nt ng nh ni bi translated">通过打开命令提示符启动Elasticsearch，导航到解压安装文件的文件夹，将目录改为bin并运行elasticsearch.bat</li><li id="3c2e" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nt ng nh ni bi translated">类似地，通过打开命令提示符启动Kibana，导航到解压安装文件的文件夹，将目录改为bin并运行kibana.bat</li><li id="38f0" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nt ng nh ni bi translated">在以下地址打开网页浏览器，<a class="ae ku" href="http://localhost:5601/" rel="noopener ugc nofollow" target="_blank"> http://localhost:5601/ </a>您应该会看到基巴纳主页，</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/bdb09923a21b72a379dd8645bf3af599.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*gJHA-QgNSyQ9iTojECEWFg.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><h2 id="a1d4" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">其他平台</h2><p id="3b06" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">对于在其他平台上的安装，<a class="ae ku" href="https://www.elastic.co/start" rel="noopener ugc nofollow" target="_blank">参见</a>。</p><h1 id="12d4" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">准备和加载报警数据</h1><h2 id="0f5d" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">数据格式</h2><p id="d651" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">我手头的报警日志文件是由施耐德电气CitectSCADA产品生成的。</p><p id="6606" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这些文件被命名为<code class="fe nu nv nw nx b">AlarmLog.NNN</code>，其中<code class="fe nu nv nw nx b">NNN</code>是一个从001到365的零填充整数，在我们的例子中每天一个文件。</p><p id="49b5" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这些文件是以空格分隔的文本文件，下面是一个典型文件的前五条记录的示例，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/8c40a60a0afdbe5e9d3eea837865f184.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*3szydT_MeKNbP2YXf74cHA.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><h1 id="74e0" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">数据准备</h1><p id="00d2" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">数据准备非常简单，包括将空格分隔的文件转换为CSV文件，并清除一些无效记录。</p><p id="1168" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">Python脚本用于初始转换和清理。</p><p id="c353" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">第一步是导入所需的库，</p><ul class=""><li id="5322" class="na nb it kx b ky kz lb lc le nc li nd lm ne lq nf ng nh ni bi translated">pandas——一个数据分析库，我们将使用它来读写数据文件，并使用数据帧来操作数据</li><li id="96b2" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nf ng nh ni bi translated">glob检索输入数据文件的文件名。</li><li id="09eb" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nf ng nh ni bi translated">日期时间—用于日期和时间值操作</li><li id="2ad6" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nf ng nh ni bi translated">tqdm —一个进度条实用程序，用于显示长时间运行的作业的进度(如处理多个GB的数据文件)</li></ul><pre class="kj kk kl km gt ny nx nz oa aw ob bi"><span id="ac0e" class="mo ls it nx b gy oc od l oe of">import pandas as pd<br/>import glob<br/>from datetime import datetime<br/>from tqdm import tqdm</span></pre><p id="f927" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">宽度数组是定义的，包含输入文件中每个固定宽度字段的字符宽度。names数组包含将包含在CSV文件中的字段名称。</p><pre class="kj kk kl km gt ny nx nz oa aw ob bi"><span id="bd95" class="mo ls it nx b gy oc od l oe of">widths = [<br/>    12, #date<br/>    12, #time<br/>    4,  #pirority<br/>    20, #status<br/>    12, #state<br/>    32, #tag<br/>    64, #description<br/>]</span><span id="95e0" class="mo ls it nx b gy og od l oe of">names = [<br/>    'date',<br/>    'time',<br/>    'priority',<br/>    'status',<br/>    'state',<br/>    'tag',<br/>    'description'<br/>]</span></pre><p id="c49d" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在下面的代码中，我们处理文件夹<code class="fe nu nv nw nx b">./1-raw/</code>中的所有原始日志文件，创建CSV文件并将其写入<code class="fe nu nv nw nx b">./2-csv/</code>。</p><p id="6bac" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">使用glob函数可以获得原始输入文件路径的集合。</p><p id="db33" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们使用for循环来遍历每个文件。因为这是一个长时间运行的过程，所以在for循环中使用tqdm函数来显示进度条。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/aeaa37daa7305fdc85db2aef943933db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*uAsEMoURZsmADpgFJ9LT6g.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="e10a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">对于每个文件，</p><ul class=""><li id="4183" class="na nb it kx b ky kz lb lc le nc li nd lm ne lq nf ng nh ni bi translated">使用pandas read_fwf函数读取文本文件。这个函数读入一个空格分隔(固定宽度)的文件，并返回一个数据帧</li><li id="b2e7" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nf ng nh ni bi translated">日志文件包含一些日期和/或时间字段值为“0”的无效记录。日期或时间值为零的记录将被删除。</li><li id="072e" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nf ng nh ni bi translated">从单独的数据和时间字段创建ISO格式时间戳字段，并将其添加到数据帧中</li><li id="8b9c" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nf ng nh ni bi translated">CSV文件被写入磁盘</li></ul><pre class="kj kk kl km gt ny nx nz oa aw ob bi"><span id="704c" class="mo ls it nx b gy oc od l oe of">files = glob.glob("./1-raw/AlarmLog.*")</span><span id="c7fe" class="mo ls it nx b gy og od l oe of">for f in tqdm(files):<br/>    d = "./2-csv/" + f.split("\\")[1] + ".csv"<br/>    log = pd.read_fwf(f, widths=widths, names=names)</span><span id="96a3" class="mo ls it nx b gy og od l oe of"># Some errors present in the log files where 0 values present for date <br/>    # and time columns<br/>    log = log.drop(log[log.date=="0"].index)<br/>    log = log.drop(log[log.time=="0"].index)</span><span id="3d53" class="mo ls it nx b gy og od l oe of">log['<a class="ae ku" href="http://twitter.com/timestamp" rel="noopener ugc nofollow" target="_blank">@timestamp</a>'] = log.apply(<br/>        lambda row: datetime.strptime(<br/>            row.date + " " + row.time, '%d/%m/%Y %I:%M:%S %p').isoformat(),    axis=1)<br/>    log.drop(['date','time'], axis=1).to_csv(d,index=False)</span></pre><h2 id="3060" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">装载到基巴纳</h2><p id="13a0" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">数据可以从用户界面直接加载到Kibana中(<a class="ae ku" href="http://localhost:5106" rel="noopener ugc nofollow" target="_blank"> http://localhost:5601 </a>)。这用于在处理整整12个月的数据之前测试预处理脚本(超过8GB，需要另一种方法来上传数据，这将在后面描述)。</p><p id="a867" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">要通过Kibana手动上传数据，首先通过点击煎饼图标打开左侧菜单。从侧面菜单中选择<code class="fe nu nv nw nx b">Analytics &gt; Machine Learning</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/cbcd49b8c57395609d7af2501b4b7fd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:430/format:webp/1*ll3-YtPP3DoRRVpVrEye_g.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="f873" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">点击<code class="fe nu nv nw nx b">Select file</code>按钮，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/a4ccc2cd3e50517496dfc6a323b46a6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*v1X1tMFNNAchxU2OyBo3Ig.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="fbc4" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">选择或拖动一个生成的CSV文件到下面屏幕上的目标，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/e81fe89cea180d2c1a289cc583f3b783.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*o8rPLtyljUeHgm-lLy_lgQ.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="7c64" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">按<code class="fe nu nv nw nx b">Import</code>选择默认选项，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/7eb92e44b69a983438fd8d2d61dfea10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*7usL5XENABeP388SiVEP4g.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="73e3" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">下一个屏幕要求我们输入一个索引名，数据将被加载到这个索引名中。输入一个索引名称并按下<code class="fe nu nv nw nx b">Import</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/3f062ea865ffa8522a826cede81c96ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*B2MQKwgqsDlqpU3jfeh0vw.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="f363" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">几秒钟后数据将被加载，按下<code class="fe nu nv nw nx b">View index in Discover</code>按钮，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/f1d6b00db6c505686fa10d878efe711f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*XEDjyuMcxIkCd_fZXiRMsg.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="9fef" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们刚刚上传了一天的警报事件。在discover应用程序中，我们可以看到我们上传的数据摘要，涵盖时间范围从6月12日00:00:01到6月13日00:00:02。摘要图表将数据分成30分钟的间隔。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/aabe0261d562402f894a0a42b2cb1ed6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*mAUBgXPAVZyXSopzjquPmg.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="3b1f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">如果我们将鼠标悬停在任何条形上，我们可以看到该桶中日志条目的计数。下面我们看到从11:30到12:00有2765个警报事件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/3b0f4219a5eabe944d91b3d243000eab.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*pi5CZLAiF0zGwySDbWabTQ.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="8363" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">Kibana有一种查询语言(KQL，Kibana Query Language)，允许我们对ElasticSearch数据库中的数据应用复杂的过滤器。下面，我们使用KQL应用了一个过滤器，将我们的记录限制为“介质过滤器5”的优先级1警报。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/b8b3a12cea686f214c1c71ec791fd3d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*LDhzyoDC4QPDMFjvn7AGcg.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><h2 id="91f1" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">删除数据</h2><p id="8fdb" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">我们已经证明了我们的CSV数据上传正确。由于我们有365个文件，我们不希望手动上传到数据库中。我们现在将删除手动添加的数据，并创建一个Python脚本来以编程方式加载整个数据目录。</p><p id="85e6" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在搜索栏中输入“索引”,然后从下拉列表中单击“数据/索引管理”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/15a319448dea4d67080f0f58a38ac189.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*eEp4SbfHMomkuvhpFCXpcQ.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="5fd1" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">选中我们需要删除的索引旁边的复选框。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/827bd96e644be92873dd72acd63ca515.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*_wfuhZgfWGkt1PbCixUXZg.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="04a3" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">从<code class="fe nu nv nw nx b">Manage index</code>按钮打开下拉列表，选择<code class="fe nu nv nw nx b">Delete index</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/1863b95b23de275a8d6af2595589a0af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*APF46wKDfSJsAfbRjMuhgw.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><h2 id="f005" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">使用Python将数据加载到弹性搜索</h2><p id="19bd" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">之前，我们将365 Citect警报日志文件处理为CSV格式。这些文件非常大(365个文件，总共6.15 GB)。在上一节中，我们将一天的数据加载到ElasticSearch中，以验证文件格式。我们现在将创建一个Python脚本来加载整个数据集。</p><p id="871a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">使用Python将数据直接加载到ElasticSearch相当简单，因为ElasticSearch已经提供了一个官方的<a class="ae ku" href="https://elasticsearch-py.readthedocs.io/en/v7.13.4/" rel="noopener ugc nofollow" target="_blank">客户端</a>，可以使用pip安装，</p><pre class="kj kk kl km gt ny nx nz oa aw ob bi"><span id="16fa" class="mo ls it nx b gy oc od l oe of">python -m pip install elasticsearch</span></pre><p id="e4f2" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">代码重复如下，由以下内容组成:</p><ol class=""><li id="29e1" class="na nb it kx b ky kz lb lc le nc li nd lm ne lq nt ng nh ni bi translated">在ElasticSearch中创建“警报日志”索引</li><li id="4aa5" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nt ng nh ni bi translated">打开data文件夹中的每个CSV文件，并使用批量上传功能将其上传到ElasticSearch。body参数定义CVS列名到ElasticSearch数据类型的映射。</li></ol><pre class="kj kk kl km gt ny nx nz oa aw ob bi"><span id="c437" class="mo ls it nx b gy oc od l oe of">import pandas as pd<br/>import glob</span><span id="a321" class="mo ls it nx b gy og od l oe of">from tqdm import tqdm<br/>from elasticsearch import Elasticsearch<br/>from elasticsearch.helpers import bulk</span><span id="5961" class="mo ls it nx b gy og od l oe of">indexName = "alarm-log"</span><span id="0a7b" class="mo ls it nx b gy og od l oe of">body = {<br/>  "settings": {<br/>    "number_of_shards": 1<br/>  },<br/>  "mappings": {<br/>    "properties": {<br/>        '<a class="ae ku" href="http://twitter.com/timestamp" rel="noopener ugc nofollow" target="_blank">@timestamp</a>': {'type': 'date'},<br/>        'description': {'type': 'text'},<br/>        'priority': {'type': 'long'},<br/>        'state': {'type': 'keyword'},<br/>        'status': {'type': 'keyword'},<br/>        'tag': {'type': 'keyword'}<br/>    }<br/>  }<br/>}</span><span id="2c56" class="mo ls it nx b gy og od l oe of">client = Elasticsearch()<br/>client.indices.delete(index=indexName)<br/>client.indices.create(index=indexName,body=body)</span><span id="bdac" class="mo ls it nx b gy og od l oe of">files = glob.glob("./2-csv/AlarmLog.*")<br/>for f in tqdm(files):<br/>    df = pd.read_csv(f)<br/>    documents = df.to_dict(orient='records')<br/>    bulk(client, documents, index=indexName, raise_on_error=True)</span></pre><h1 id="d80c" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">首次分析</h1><h2 id="ce26" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">日志条目的结构</h2><p id="3246" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">我们将使用Kibana，Discover工具来检查我们使用之前的Python脚本创建的索引的结构，以便批量加载我们的警报条目。</p><p id="0a5c" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">打开Kibana(<a class="ae ku" href="http://localhost:5601" rel="noopener ugc nofollow" target="_blank">http://localhost:5601</a>，打开左侧菜单，从分析组中选择发现。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="om on di oo bf op"><div class="gh gi ol"><img src="../Images/1887a46dbe9e8f800d005c3728cb0e1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*sqTrtMmiuA6tMKyrLnOZMQ.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="1610" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">选择<code class="fe nu nv nw nx b">alarm-log</code>作为索引模式。完成此操作后，警报日志索引的所有属性都会显示在索引选择器下方的面板中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/48940d90e4f4578aeee2019f6dd2a1f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*zJ1MnmiTs5YxyMBphMcB7w.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><h2 id="e446" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">即席分析</h2><p id="c047" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">我们从SCADA系统收集的数据包含报警和事件。警报的优先级为1-3，而事件的优先级为4和5。过程报警有一个生命周期，由于状态变化和操作员确认，会导致生成和记录多个事件(这将在以后的帖子中详细解释，我们将把多个报警生命周期事件合并到一个报警记录中，该记录将包括整个报警生命周期的信息，并允许进行更详细的分析。</p><p id="fe66" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">下面的KQL查询过滤警报事件，只显示警报启动，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/07ef36c0d466f5a2c5397351ae533320.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/format:webp/1*T-baQjb2rCb8xvH1NEjJfg.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/8226c965f39e0920ba61a31b96089c05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*mr6jMYCwrh9ssydndPunfw.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><h2 id="a3ed" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">仪表盘</h2><p id="27ad" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">除了允许您以交互方式查询和分析数据，Discover还允许使用各种可视化方式将查询保存并显示在仪表板中。在基巴纳术语中，保存的观想是已知的，是一个透镜。</p><p id="f100" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">下面的仪表板包含四个镜头组件(从左上角开始按顺时针顺序描述)，</p><ul class=""><li id="4fd5" class="na nb it kx b ky kz lb lc le nc li nd lm ne lq nf ng nh ni bi translated">度量—显示一个数字，在这种情况下是所选时间段内的警报计数</li><li id="cec5" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nf ng nh ni bi translated">垂直条形图—在这种情况下显示每日报警计数</li><li id="6ad1" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nf ng nh ni bi translated">树形图—在这种情况下，按标签和报警优先级(1–3)显示前十个报警计数</li><li id="34b6" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nf ng nh ni bi translated">水平条形图—在这种情况下，显示每个标签的前十个报警计数(报警标签是唯一的id，用于识别产生报警的设备)</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/49bc8c6d2214fbcb08bcbb18c06f4038.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*psgXtiVQgAmCQ243FBbt9A.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><h1 id="9cdb" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">洞察力</h1><p id="971d" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">现在我们已经创建了我们的仪表板，它告诉我们什么？</p><h2 id="1eb3" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">每日警报计数</h2><p id="0964" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">从每日警报计数图表中，我们可以看到每天有500到3000个警报。由于生成这些警报日志的SCADA系统由1到2名操作员监控，这对于操作员来说是不切实际的管理工作量。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/97422c5a26afbb72a324b284d182f12e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*r9frLzkpITItYwX6DskT3Q.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><h2 id="e48f" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">前十名</h2><p id="ff12" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">前10个图表用于识别频繁触发的警报。我们可以看到AIT0411203_aH警报在90天内被激活了大约18，000次(大约。每天200次)。该警报明显配置错误，需要调查和补救。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/004dc78e19294ca8262ec7ba55f7fbdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*sr1PPztwa1E4uX-xE0FZzQ.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><h2 id="ced3" class="mo ls it bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">优先级分布</h2><p id="3f70" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">从树形图中我们可以看到,“其他”警报分布在22%优先级1、61%优先级2和16%优先级3。这表明系统很可能配置了太多优先级为1和2的警报(这将在以后关于警报系统管理和性能指标的帖子中详细解释)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/89565069ca7d95582696626e4dc45a7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/format:webp/1*DldBADu4o3pTUqYfaBPNiA.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><h1 id="83c6" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">结论</h1><p id="ce8a" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">ELK已被证明是分析SCADA系统中可用的报警事件日志数据的有用工具。虽然在这一初步分析中获得的见解是有用的，但它受到我们使用原始警报记录这一事实的限制。</p><p id="faa8" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">当原始报警事件在加载到ELK之前被转换成覆盖报警生命周期的报警记录时，更高级的分析将是可能的。</p><p id="140e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在以后的文章中，我们将探讨，</p><ul class=""><li id="1984" class="na nb it kx b ky kz lb lc le nc li nd lm ne lq nf ng nh ni bi translated"><a class="ae ku" rel="noopener" target="_blank" href="/scada-alarm-standards-metrics-56512db128b0"> ICS警报管理标准和性能指标</a></li><li id="b1cd" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nf ng nh ni bi translated">处理SCADA报警记录</li><li id="3fb1" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nf ng nh ni bi translated">使用ELK在线处理SCADA报警记录</li><li id="a791" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nf ng nh ni bi translated">先进的SCADA警报分析技术(序列挖掘和时间序列分析)</li></ul><h1 id="3ff7" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">参考</h1><ol class=""><li id="895c" class="na nb it kx b ky mj lb mk le nq li nr lm ns lq nt ng nh ni bi translated">工业报警系统概述:报警过载的主要原因、研究现状和存在的问题。2016年IEEE自动化科学与工程汇刊。<strong class="kx iu"> 13 </strong> (2):第1045–1061页。</li><li id="f88f" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nt ng nh ni bi translated">Vancamp，k .，<em class="no">通过数字进行报警管理。</em>化学工程，2016。第50–55页。</li><li id="e7a0" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nt ng nh ni bi translated">ASM，ASM财团。</li><li id="7912" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nt ng nh ni bi translated">ISA，<em class="no"> ANSI/ISA‐18.2‐2009:流程工业报警系统的管理</em>。2009年:国际自动化学会。</li><li id="3b44" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nt ng nh ni bi translated">EEMUA，<em class="no"> EEMUA-191:报警系统——设计、管理和采购指南</em>。2013年:英国伦敦工程设备和材料用户协会。</li><li id="140f" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nt ng nh ni bi translated">IEC，<em class="no"> IEC 62682流程工业报警系统管理</em>。瑞士日内瓦国际电工委员会。2014年:国际电工委员会。24–26.</li><li id="dcbc" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nt ng nh ni bi translated">戈埃尔、p .达塔和M.S .曼南，<em class="no">工业报警系统:挑战和机遇。</em>流程工业损失预防杂志，2017年。T21:第23–36页。</li><li id="ad88" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nt ng nh ni bi translated">Ayral，J. Bilyk和K. Brown，<em class="no">案例:量化警报管理的好处。</em>碳氢化合物加工，2013年。<strong class="kx iu"> 92 </strong> (2013)。</li><li id="19f0" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nt ng nh ni bi translated">Beebe，d .、S. Ferrer和D. Logerot，<em class="no">峰值报警率与工厂事故的关系以及如何尽量减少事故。</em>工艺安全进展，2013年。<strong class="kx iu"> 32 </strong> (1):第72–77页。</li><li id="5b9b" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nt ng nh ni bi translated">Lucke，m .等人，<em class="no">警报数据分析的进展以及在线警报洪水分类的实际应用。</em>过程控制杂志，2019。<strong class="kx iu"> 79 </strong>:第56–71页。</li></ol><h1 id="f25e" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">进一步阅读</h1><p id="1f6d" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">感谢阅读，希望你喜欢这篇文章。</p><p id="62cc" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">为了进一步探索，</p><ul class=""><li id="a3b6" class="na nb it kx b ky kz lb lc le nc li nd lm ne lq nf ng nh ni bi translated"><a class="ae ku" href="https://patrickberry.medium.com/subscribe" rel="noopener">订阅电子邮件通知</a></li><li id="d798" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nf ng nh ni bi translated">点击文章顶部的“关注”按钮</li><li id="66b2" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nf ng nh ni bi translated">对于工业4.0的所有内容，请查看我的<a class="ae ku" href="https://medium.com/industrial-digital-transformation-industry-4-0" rel="noopener">工业数字化转型&amp;工业4.0 </a>出版物</li><li id="0f8d" class="na nb it kx b ky nj lb nk le nl li nm lm nn lq nf ng nh ni bi translated">欢迎在LinkedIn 上加入我的社交网络(记得提到你已经读过这篇文章)</li></ul><p id="2510" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">为了支持中型作者，可以考虑<a class="ae ku" href="https://patrickberry.medium.com/membership" rel="noopener">订阅</a>。</p><p id="81f6" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">记得点击订阅和关注按钮，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="om on di oo bf op"><div class="gh gi ot"><img src="../Images/ead2b5646ffd0edf45bdd30a4a1ab730.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*51ZRck5FpouAo7HOAVZEfg.gif"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure></div></div>    
</body>
</html>