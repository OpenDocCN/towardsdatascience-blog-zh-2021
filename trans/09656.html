<html>
<head>
<title>Pharos: How to Visualize Advanced Computer Vision Datasets with 4 Lines of Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Pharos:如何用4行代码可视化高级计算机视觉数据集</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/pharos-how-to-visualize-advanced-computer-vision-datasets-with-4-lines-of-code-e4e49d59b974?source=collection_archive---------25-----------------------#2021-09-08">https://towardsdatascience.com/pharos-how-to-visualize-advanced-computer-vision-datasets-with-4-lines-of-code-e4e49d59b974?source=collection_archive---------25-----------------------#2021-09-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c7ae" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">这个免费的Python库可以为您节省大量时间。但是有什么问题吗？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ccaeebae40f1753bc0a9b05e240f81c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*edI5p538XiMcgDvy8z19Yw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@bermixstudio?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Bermix工作室</a>在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="092a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">近年来，深度学习已经取得了很大进展。从业者现在已经远远超出了简单的图像分类任务。在图像和视频中检测甚至分割感兴趣的对象变得越来越容易。计算机视觉已经走过了漫长的道路，但有些东西多年来没有改变。可视化就是其中之一。</p><p id="6faa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://tensorbay-python-sdk.graviti.com/en/stable/features/visualization.html" rel="noopener ugc nofollow" target="_blank"> Pharos </a>是一个用于可视化高级计算机视觉数据集的免费库——想想物体检测。它围绕您的数据集构建了一个Flask web应用程序，从而使探索变得毫不费力。</p><p id="e8ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过使用Pharos，您可以轻松地探索数据集是如何标记的，并确定是否存在任何数据质量问题。该网络应用程序将向您展示现代标签软件所能提供的一切，而无需过多的选项。</p><p id="8c00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">听起来不错？</em>让我们先解决问题。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="79f6" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">法罗斯适合你吗？</h1><p id="4c99" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">大多数数据科学社区从<a class="ae ky" href="https://www.kaggle.com" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>获取数据集。组织拥有自己处理的内部数据集，大部分不向公众开放。默认情况下，Pharos只能可视化来自非常狭窄的数据源的数据集— <a class="ae ky" href="https://gas.graviti.com/open-datasets" rel="noopener ugc nofollow" target="_blank"> Graviti Open Datasets </a>。这是更高级的计算机视觉问题的一种替代方案。</p><p id="2a53" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用Pharos来可视化任何图像数据集，但是有一个问题—您必须手动编写数据加载器。您可以在项目之间复制/粘贴95%的代码，只需修改路径，因此不会花费您太多时间。</p><p id="f6da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章将向您展示如何可视化<a class="ae ky" href="https://gas.graviti.com/dataset/hellodataset/VOC2012Detection" rel="noopener ugc nofollow" target="_blank"> VOC2012检测</a>数据集，这是一个对象检测数据集，包含来自“flickr”网站的人、动物、车辆和室内物品，因此使用它意味着您同意他们的<a class="ae ky" href="https://www.flickr.com/help/terms" rel="noopener ugc nofollow" target="_blank">许可和条款</a>。它还将向您展示如何从零开始为Kaggle的<a class="ae ky" href="https://www.kaggle.com/chetankv/dogs-cats-images" rel="noopener ugc nofollow" target="_blank">猫对狗</a>数据集创建一个数据加载器，该数据加载器在<a class="ae ky" href="https://creativecommons.org/publicdomain/zero/1.0/" rel="noopener ugc nofollow" target="_blank"> CC0: Public domain </a>下获得许可。</p><p id="582a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将在下一节看到如何使用Pharos。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="edfa" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">Pharos —开始</h1><p id="d8a2" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">让我们从创建一个新的虚拟环境开始。我给我的取名为<code class="fe na nb nc nd b">pharos_env</code>。下面是如何用Anaconda创建它:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="4382" class="ni me it nd b gy nj nk l nl nm">conda create --name pharos_env python=3.8<br/>conda activate pharos_env</span></pre><p id="c4fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一步是安装所需的库。你只需要<code class="fe na nb nc nd b">pharos</code>，但是我也会安装JupyterLab。欢迎您使用任何其他IDE。安装Pharos将会处理所有相关的库，比如底层的TensorBay。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="70c2" class="ni me it nd b gy nj nk l nl nm">conda install -c conda-forge jupyter jupyterlab<br/>pip install pharos</span></pre><p id="f426" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！接下来您可以启动JupyterLab:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="af66" class="ni me it nd b gy nj nk l nl nm">jupyter lab</span></pre><p id="9852" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你必须使用<code class="fe na nb nc nd b">VOC2012Detection</code>数据加载器来加载Pharos创建应用程序所需的一切。数据加载器需要一个参数，即数据集的路径:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="bb44" class="ni me it nd b gy nj nk l nl nm">from tensorbay.opendataset import VOC2012Detection<br/><br/>dataset = VOC2012Detection('VOCdevkit/VOC2012')</span></pre><p id="b70d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据集已成功加载！现在，您可以使用以下两行将其可视化:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="84c0" class="ni me it nd b gy nj nk l nl nm">from pharos import visualize<br/><br/>visualize(dataset)</span></pre><p id="ac49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">执行上述代码行后，您将看到以下内容，表明Flask应用程序已成功启动:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nn"><img src="../Images/8ba08bbc08f49b5eef9bd9ac2ccdc09c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*m8IlMtuRbP3zcpw2MyCngA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图1 — Pharos应用程序已在本地主机上启动(图片由作者提供)</p></figure><p id="b702" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，应用程序已经在本地主机上运行了。可以去<code class="fe na nb nc nd b">127.0.0.1:5000/</code>探索一下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/a0505017001709dd91f1f6ac0ddb859c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*PlAJtLiitg4JCyMT2T7Rgg.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图2 — Pharos数据集可视化应用程序(图片由作者提供)</p></figure><p id="66f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，Pharos允许您从数据集中选择任何图像，并探索带注释的对象。可以很容易地看出注释是否正确，数据集是否组织正确。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="eb00" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">在自定义数据集上使用Pharos</h1><p id="7aa3" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">现在是从零开始编写数据加载器的繁琐部分。您将为Kaggle的<a class="ae ky" href="https://www.kaggle.com/chetankv/dogs-cats-images" rel="noopener ugc nofollow" target="_blank">狗对猫</a>数据集编写一个，但该代码应该适用于任何图像分类数据集。</p><p id="0d89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想学习如何为对象检测和分割数据集编写数据加载器，请告诉我。</p><p id="5bae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">开始之前，请确保您的数据集已按以下方式格式化:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="98fa" class="ni me it nd b gy nj nk l nl nm">dataset/<br/>    test_set/<br/>        cat.0.jpg<br/>        ...<br/>        dog.0.jpg<br/>        ...<br/>    training_set/<br/>	cat.0.jpg<br/>	...<br/>	dog.0.jpg<br/>	...</span></pre><p id="fec7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">猫和狗的图像应该在同一个文件夹中。您不应该为每个图像类都有一个单独的目录。</p><p id="8ad0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">先做最重要的事——库导入。你需要<code class="fe na nb nc nd b">os</code>、<code class="fe na nb nc nd b">glob</code>和<code class="fe na nb nc nd b">tensorbay</code>的几个类:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="757b" class="ni me it nd b gy nj nk l nl nm">import os<br/>import glob<br/>from tensorbay.dataset import Data, Dataset<br/>from tensorbay.label import Classification</span></pre><p id="dc55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一步是创建一个<code class="fe na nb nc nd b">catalog.json</code>文件。它将包含分类类别的名称。在根目录(而不是数据集目录)中创建文件，并粘贴以下内容:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="36d7" class="ni me it nd b gy nj nk l nl nm">{<br/>    "CLASSIFICATION": {<br/>        "categories": [{ "name": "cat" }, { "name": "dog" }]<br/>    }<br/>}</span></pre><p id="abc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一步是编写一个函数，在给定数据集路径的情况下创建一个<code class="fe na nb nc nd b">tensorbay.dataset.Dataset</code>对象。该函数的工作是创建一个<code class="fe na nb nc nd b">Dataset</code>对象，并存储训练集和测试集的图像路径。该函数使用TensorBay的<code class="fe na nb nc nd b">Data</code>和<code class="fe na nb nc nd b">Classification</code>类进行适当的转换并分配类标签。</p><p id="d869" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="db4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">快到了！现在可以调用<code class="fe na nb nc nd b">DogsVsCats()</code>函数并传递数据集路径:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="28b7" class="ni me it nd b gy nj nk l nl nm">dataset = DogsVsCats('/Users/dradecic/Desktop/PharosData/dataset/')</span></pre><p id="a88d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是<code class="fe na nb nc nd b">dataset</code>变量的内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nn"><img src="../Images/d29e15d32dad1d07b3db92089bcb9637.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Tz3D8xpaj4g8YvYkeHzfzw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片3-tensor bay数据集对象内容(图片由作者提供)</p></figure><p id="91de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">剩下唯一要做的就是可视化数据集。您可以使用以下代码来实现这一点:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="c2cb" class="ni me it nd b gy nj nk l nl nm">from pharos import visualize<br/><br/>visualize(dataset)</span></pre><p id="1c06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将打开另一个烧瓶应用程序。它看起来是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/1e8745ff95feefd87a7691d3e89b1df5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Q5RtFNmmLd7opsbB1XYN9A.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图4 —自定义数据集上的Pharos数据可视化应用程序(图片由作者提供)</p></figure><p id="06e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你已经知道了——如何使用Pharos可视化定制数据集。</p><p id="7d6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">问题仍然是，<em class="lv">你应该使用Pharos吗？让我们在下一部分回答这个问题。</em></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="1d53" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">判决</h1><p id="82b2" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">默认情况下，Pharos并不是非常有用。最大的缺点是它受限于<a class="ae ky" href="https://gas.graviti.com/open-datasets" rel="noopener ugc nofollow" target="_blank">开放数据集</a>，无法可视化任何来自其他来源的数据。此外，每个数据集在<code class="fe na nb nc nd b">tensorbay.opendataset</code>中都有自己的类。这对于最终用户来说是非常乏味的，我希望在未来的版本中看到改进。</p><p id="934b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过编写自己的数据加载器来减轻上述缺点。当然，这需要一些编码，但是最终的web应用程序是值得的。也许不是为了简单的图像分类，但肯定是为了更高级的对象检测数据集。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="c3cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">你怎么看？您在可视化对象检测和对象分割数据集方面有什么经验？</em>在评论区告诉我。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="016b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">喜欢这篇文章吗？成为</em> <a class="ae ky" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="lv">中等会员</em> </a> <em class="lv">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="ns nt gp gr nu nv"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd iu gy z fp oa fr fs ob fu fw is bi translated">通过我的推荐链接加入Medium-Dario rade ci</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">medium.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj ks nv"/></div></div></a></div></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b5b5" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">保持联系</h1><ul class=""><li id="3c66" class="ok ol it lb b lc mv lf mw li om lm on lq oo lu op oq or os bi translated">在<a class="ae ky" href="https://medium.com/@radecicdario" rel="noopener"> Medium </a>上关注我，了解更多类似的故事</li><li id="05c6" class="ok ol it lb b lc ot lf ou li ov lm ow lq ox lu op oq or os bi translated">注册我的<a class="ae ky" href="https://mailchi.mp/46a3d2989d9b/bdssubscribe" rel="noopener ugc nofollow" target="_blank">简讯</a></li><li id="7083" class="ok ol it lb b lc ot lf ou li ov lm ow lq ox lu op oq or os bi translated">在<a class="ae ky" href="https://www.linkedin.com/in/darioradecic/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上连接</li></ul></div></div>    
</body>
</html>