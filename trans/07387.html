<html>
<head>
<title>How to Insert an Observablehq Graph into a HTML Page</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将Observablehq图形插入HTML页面</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-insert-an-observablehq-graph-into-a-html-page-57a9f4546ecf?source=collection_archive---------23-----------------------#2021-07-05">https://towardsdatascience.com/how-to-insert-an-observablehq-graph-into-a-html-page-57a9f4546ecf?source=collection_archive---------23-----------------------#2021-07-05</a></blockquote><div><div class="fc ik il im in io"/><div class="ip iq ir is it"><h2 id="3f6c" class="iu iv iw bd b dl ix iy iz ja jb jc dk jd translated" aria-label="kicker paragraph">数据可视化</h2><div class=""/><div class=""><h2 id="a55c" class="pw-subtitle-paragraph kc jf iw bd b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dk translated">一个快速的教程，用你的可观察图形制作精彩的HTML页面。</h2></div><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj ku"><img src="../Images/0255a91540c512b659375ea9db36ea09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2MzQ4KLhUFGAsXIte_eu1Q.png"/></div></div><p class="lg lh gk gi gj li lj bd b be z dk translated">作者图片</p></figure><p id="4a23" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">Observablehq 是一个非常流行的利用D3.js库编写代码的笔记本。由于网上有很多例子和教程，你可以根据自己的需要定制已经制作好的笔记本。</p><p id="ec33" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated"><strong class="lm jg">然而，一旦构建了一个图表，就不容易立即嵌入到另一个网站中。</strong></p><p id="be78" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">在本教程中，我提出了两种在网站中嵌入图形的策略:</p><ul class=""><li id="2631" class="mh mi iw lm b ln lo lq lr lt mj lx mk mb ml mf mm mn mo mp bi translated">通过iframe</li><li id="a480" class="mh mi iw lm b ln mq lq mr lt ms lx mt mb mu mf mm mn mo mp bi translated">生成图表的Javascript。</li></ul><p id="dec5" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">在这两种情况下，首先，您必须通过点击<strong class="lm jg">发布</strong>按钮来发布您的笔记本。</p><p id="00a1" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">此外，在这两种情况下，您都应该遵循以下步骤:</p><ul class=""><li id="84c7" class="mh mi iw lm b ln lo lq lr lt mj lx mk mb ml mf mm mn mo mp bi translated">从Observable下载嵌入代码</li><li id="dc5c" class="mh mi iw lm b ln mq lq mr lt ms lx mt mb mu mf mm mn mo mp bi translated">将代码插入HTML页面。</li></ul><p id="7d66" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">在本教程中，我使用了<a class="ae mg" href="https://observablehq.com/@alod83/italian-covid-19-positives" rel="noopener ugc nofollow" target="_blank">链接</a>中的示例图。</p><h1 id="48e7" class="mv mw iw bd mx my mz na nb nc nd ne nf kl ng km nh ko ni kp nj kr nk ks nl nm bi translated">内联框架</h1><p id="70d6" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">第一个解决方案非常简单，也适用于其他网站。它基于iframes的使用。实际上，iframe是一个嵌入在另一个HTML文档中的HTML文档。</p><h2 id="1282" class="ns mw iw bd mx nt nu dn nb nv nw dp nf lt nx ny nh lx nz oa nj mb ob oc nl jc bi translated">下载嵌入代码</h2><p id="a0fa" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">为了下载嵌入代码，您必须在Observable notebook中查看您的图表，并单击图表左侧的三个垂直点，如下图所示:</p><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj ku"><img src="../Images/928e3d14b80a73318d3702cdd8397221.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BWX7RGHbLvFRbda66zjoTw.png"/></div></div><p class="lg lh gk gi gj li lj bd b be z dk translated">作者图片</p></figure><p id="284c" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">将打开一个菜单，如下所示:</p><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div class="gi gj od"><img src="../Images/417f55cb3b5a056573a1f913d82b8495.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*qLmaXm8HzGxdMkYxm8If_A.png"/></div><p class="lg lh gk gi gj li lj bd b be z dk translated">作者图片</p></figure><p id="e373" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">您可以选择嵌入，然后从下拉菜单中选择iframe:</p><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj oe"><img src="../Images/109b9d590da883e9d4caf07b9fa956c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t1VWOt8YDjiG1bdf1pQ7gg.png"/></div></div><p class="lg lh gk gi gj li lj bd b be z dk translated">图像</p></figure><p id="6748" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">然后你可以点击复制按钮。现在代码被复制到你的剪贴板中。复制的代码如下所示:</p><pre class="kv kw kx ky gu of og oh oi aw oj bi"><span id="eebe" class="ns mw iw og b gz ok ol l om on">&lt;iframe width="100%" height="584" frameborder="0"<br/>  src="<a class="ae mg" href="https://observablehq.com/embed/@alod83/italian-covid-19-positives?cells=chart" rel="noopener ugc nofollow" target="_blank">https://observablehq.com/embed/@alod83/italian-covid-19-positives?cells=chart</a>"&gt;&lt;/iframe&gt;</span></pre><h2 id="9021" class="ns mw iw bd mx nt nu dn nb nv nw dp nf lt nx ny nh lx nz oa nj mb ob oc nl jc bi translated">将您的代码插入HTML页面</h2><p id="a404" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">现在，您可以将复制的代码插入到您的HTML页面中，准确地插入到您希望图形显示的位置。</p><p id="a913" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">例如，您可以在段落后插入:</p><pre class="kv kw kx ky gu of og oh oi aw oj bi"><span id="d2b5" class="ns mw iw og b gz ok ol l om on">&lt;html&gt;<br/>  &lt;head&gt;...&lt;/head&gt;<br/>  &lt;body&gt;<br/>      &lt;p&gt;Before my graph&lt;/p&gt;<br/>      &lt;iframe width="100%" height="584" frameborder="0"<br/>  src="<a class="ae mg" href="https://observablehq.com/embed/@alod83/italian-covid-19-positives?cells=chart" rel="noopener ugc nofollow" target="_blank">https://observablehq.com/embed/@alod83/italian-covid-19-positives?cells=chart</a>"&gt;&lt;/iframe&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><h2 id="524d" class="ns mw iw bd mx nt nu dn nb nv nw dp nf lt nx ny nh lx nz oa nj mb ob oc nl jc bi translated">利弊</h2><p id="f3f6" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">使用这种技术的主要优点是非常<strong class="lm jg">快</strong>和<strong class="lm jg">快</strong>。</p><p id="b40b" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">但是，iframe不继承父文档属性，如字体。此外，通常iframe没有响应性，因为它不能适应小型设备屏幕，如智能手机和平板电脑。</p><h1 id="8a13" class="mv mw iw bd mx my mz na nb nc nd ne nf kl ng km nh ko ni kp nj kr nk ks nl nm bi translated">下载Javascript</h1><p id="ba5c" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">将可观察图形嵌入HTML页面的另一个策略是下载生成它的完整javascript。</p><h2 id="2838" class="ns mw iw bd mx nt nu dn nb nv nw dp nf lt nx ny nh lx nz oa nj mb ob oc nl jc bi translated">下载嵌入代码</h2><p id="2213" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">这一步与下载iframe代码的步骤非常相似:</p><ul class=""><li id="256d" class="mh mi iw lm b ln lo lq lr lt mj lx mk mb ml mf mm mn mo mp bi translated">单击图表左侧的三个垂直点</li><li id="8f88" class="mh mi iw lm b ln mq lq mr lt ms lx mt mb mu mf mm mn mo mp bi translated">选择嵌入</li></ul><p id="a125" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">唯一的区别是，当您必须从下拉菜单中选择代码类型时，您必须选择带有Javascript的运行时:</p><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj oo"><img src="../Images/c6841e3da0800453efe14ddd0fa111ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bag0RtlxycGcEnGgne-vJA.png"/></div></div><p class="lg lh gk gi gj li lj bd b be z dk translated">作者图片</p></figure><p id="aaf8" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">然后你点击复制。您复制的代码可能很长，因此您应该传递到一个空文档中，并将其命名为<code class="fe op oq or og b">graph.js</code>。在我的例子中，生成的代码不是很长，如下所示:</p><pre class="kv kw kx ky gu of og oh oi aw oj bi"><span id="d88f" class="ns mw iw og b gz ok ol l om on">&lt;div id="observablehq-chart-0a7b99e8"&gt;&lt;/div&gt;<br/>&lt;p&gt;Credit: &lt;a href="<a class="ae mg" href="https://observablehq.com/@alod83/italian-covid-19-positives" rel="noopener ugc nofollow" target="_blank">https://observablehq.com/@alod83/italian-covid-19-positives</a>"&gt;Italian COVID-19 positives by Angelica Lo Duca&lt;/a&gt;&lt;/p&gt;</span><span id="0411" class="ns mw iw og b gz os ol l om on">&lt;script type="module"&gt;<br/>import {Runtime, Inspector} from "<a class="ae mg" href="https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js</a>";<br/>import define from "<a class="ae mg" href="https://api.observablehq.com/@alod83/italian-covid-19-positives.js?v=3" rel="noopener ugc nofollow" target="_blank">https://api.observablehq.com/@alod83/italian-covid-19-positives.js?v=3</a>";<br/>new Runtime().module(define, name =&gt; {<br/>  if (name === "chart") return new Inspector(document.querySelector("#observablehq-chart-0a7b99e8"));<br/>});<br/>&lt;/script&gt;</span></pre><p id="3de7" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">你可以看到在代码的开头有一个<code class="fe op oq or og b">div</code>，然后是一个有演职员表的段落，最后是以<code class="fe op oq or og b">&lt;script&gt;</code>开头的javascript。这最后一部分可能会很长。</p><h2 id="0a63" class="ns mw iw bd mx nt nu dn nb nv nw dp nf lt nx ny nh lx nz oa nj mb ob oc nl jc bi translated">将您的代码插入HTML页面</h2><p id="c47f" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated"><code class="fe op oq or og b">div</code>将包含您的图表，因此您可以将它准确地复制到您希望它出现在html中的位置。<code class="fe op oq or og b">div</code>应该如下图所示:</p><pre class="kv kw kx ky gu of og oh oi aw oj bi"><span id="0235" class="ns mw iw og b gz ok ol l om on">&lt;div id="observablehq-chart-0a7b99e8"&gt;&lt;/div&gt;</span></pre><p id="e10c" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">例如，您可以在一个段落后复制:</p><pre class="kv kw kx ky gu of og oh oi aw oj bi"><span id="b0a6" class="ns mw iw og b gz ok ol l om on">&lt;html&gt;<br/>  &lt;head&gt;...&lt;/head&gt;<br/>  &lt;body&gt;<br/>      &lt;p&gt;Before my graph&lt;/p&gt;<br/>      &lt;div id="observablehq-chart-0a7b99e8"&gt;&lt;/div&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="ecec" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">现在您可以清理文档<code class="fe op oq or og b">chart.js</code>，以便只包含javascript代码。您可以删除演职员表和<code class="fe op oq or og b">script</code>标签。</p><p id="f22e" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">最终的<code class="fe op oq or og b">chart.js</code>应该如下所示:</p><pre class="kv kw kx ky gu of og oh oi aw oj bi"><span id="8e20" class="ns mw iw og b gz ok ol l om on">import {Runtime, Inspector} from "<a class="ae mg" href="https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js</a>";<br/>import define from "<a class="ae mg" href="https://api.observablehq.com/@alod83/italian-covid-19-positives.js?v=3" rel="noopener ugc nofollow" target="_blank">https://api.observablehq.com/@alod83/italian-covid-19-positives.js?v=3</a>";<br/>new Runtime().module(define, name =&gt; {<br/>  if (name === "chart") return new Inspector(document.querySelector("#observablehq-chart-0a7b99e8"));<br/>});</span></pre><p id="85b4" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">最后一步是将生成的javascript文件包含到原始HTML页面中，紧跟在包含图表的<code class="fe op oq or og b">div</code>之后:</p><pre class="kv kw kx ky gu of og oh oi aw oj bi"><span id="13f1" class="ns mw iw og b gz ok ol l om on">&lt;html&gt;<br/>  &lt;head&gt;...&lt;/head&gt;<br/>  &lt;body&gt;<br/>      &lt;p&gt;Before my graph&lt;/p&gt;<br/>      &lt;div id="observablehq-chart-0a7b99e8"&gt;&lt;/div&gt;<br/>      <strong class="og jg">&lt;script src='chart.js'&gt;&lt;/script&gt;</strong><br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="6605" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">您可以保存HTML页面，现在图表已经嵌入到您的HTML页面中了！</p><h2 id="1762" class="ns mw iw bd mx nt nu dn nb nv nw dp nf lt nx ny nh lx nz oa nj mb ob oc nl jc bi translated">利弊</h2><p id="6a99" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">这个解决方案应该具有响应性，并继承父文档的所有布局。但是，它的实现比前一个更复杂。</p><h1 id="6f73" class="mv mw iw bd mx my mz na nb nc nd ne nf kl ng km nh ko ni kp nj kr nk ks nl nm bi translated">摘要</h1><p id="81b2" class="pw-post-body-paragraph lk ll iw lm b ln nn kg lp lq no kj ls lt np lv lw lx nq lz ma mb nr md me mf ip bi translated">在本文中，我描述了两种将Observable生成的图形插入HTML页面的策略:</p><ul class=""><li id="df56" class="mh mi iw lm b ln lo lq lr lt mj lx mk mb ml mf mm mn mo mp bi translated">内联框架</li><li id="6699" class="mh mi iw lm b ln mq lq mr lt ms lx mt mb mu mf mm mn mo mp bi translated">java描述语言</li></ul><p id="3205" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">事实上，Observable还提供了另一种策略，<strong class="lm jg"> Runtime with React，</strong>我在本文中没有涉及到。</p><p id="8627" class="pw-post-body-paragraph lk ll iw lm b ln lo kg lp lq lr kj ls lt lu lv lw lx ly lz ma mb mc md me mf ip bi translated">如果你想了解我的研究和其他活动的最新情况，你可以在<a class="ae mg" href="https://twitter.com/alod83" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae mg" href="https://www.youtube.com/channel/UC4O8-FtQqGIsgDW_ytXIWOg?view_as=subscriber" rel="noopener ugc nofollow" target="_blank"> Youtube </a>和<a class="ae mg" href="https://github.com/alod83" rel="noopener ugc nofollow" target="_blank"> Github </a>上关注我。</p><h1 id="f6e4" class="mv mw iw bd mx my mz na nb nc nd ne nf kl ng km nh ko ni kp nj kr nk ks nl nm bi translated">相关文章</h1><div class="ot ou gq gs ov ow"><a rel="noopener follow" target="_blank" href="/how-to-improve-d3-js-graphs-with-annotations-252fbb9c5bb5"><div class="ox ab fp"><div class="oy ab oz cl cj pa"><h2 class="bd jg gz z fq pb fs ft pc fv fx jf bi translated">如何改进带注释的D3.js图形</h2><div class="pd l"><p class="bd b dl z fq pb fs ft pc fv fx dk translated">towardsdatascience.com</p></div></div><div class="pe l"><div class="pf l pg ph pi pe pj le ow"/></div></div></a></div><div class="ot ou gq gs ov ow"><a rel="noopener follow" target="_blank" href="/how-to-build-high-impact-graphs-for-data-science-55ce19d1ab32"><div class="ox ab fp"><div class="oy ab oz cl cj pa"><h2 class="bd jg gz z fq pb fs ft pc fv fx jf bi translated">如何为数据科学构建高影响力的图表</h2><div class="pk l"><h3 class="bd b gz z fq pb fs ft pc fv fx dk translated">提高数据可视化技能的一些技巧</h3></div><div class="pd l"><p class="bd b dl z fq pb fs ft pc fv fx dk translated">towardsdatascience.com</p></div></div><div class="pe l"><div class="pl l pg ph pi pe pj le ow"/></div></div></a></div><div class="ot ou gq gs ov ow"><a rel="noopener follow" target="_blank" href="/how-to-build-a-basic-line-in-d3-js-38f67055043f"><div class="ox ab fp"><div class="oy ab oz cl cj pa"><h2 class="bd jg gz z fq pb fs ft pc fv fx jf bi translated">如何在D3.js中构建基本行</h2><div class="pk l"><h3 class="bd b gz z fq pb fs ft pc fv fx dk translated">在处理数据时，最重要的一个方面是数据的表示。因此，不同的工具和…</h3></div><div class="pd l"><p class="bd b dl z fq pb fs ft pc fv fx dk translated">towardsdatascience.com</p></div></div><div class="pe l"><div class="pm l pg ph pi pe pj le ow"/></div></div></a></div></div></div>    
</body>
</html>