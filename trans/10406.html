<html>
<head>
<title>Stop Overusing “+” to Join Strings in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不要过度使用“+”来连接Python中的字符串</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/stop-overusing-to-join-strings-in-python-8a432f0daeab?source=collection_archive---------19-----------------------#2021-10-04">https://towardsdatascience.com/stop-overusing-to-join-strings-in-python-8a432f0daeab?source=collection_archive---------19-----------------------#2021-10-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="56d5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">这里有三种选择，它们将帮助你做更多的事情，而不仅仅是连接字符串</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8f0d1124fa8046ae8c8e4b71746260b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*91Dnse1pONyN-ap6"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@nadineshaabana?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">纳丁·沙巴纳</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="b9ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据科学家在收集和清理数据时必须处理的一项常见任务是处理字符串。这包括格式化以及连接字符串(也称为字符串连接)。</p><p id="2f24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Python和其他编程语言中连接字符串就像使用加号运算符<code class="fe lv lw lx ly b">+</code>一样简单。在Python中，您可能已经使用下面的代码数百次来连接字符串。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="75f8" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; str1 = "Hello "<br/>&gt;&gt;&gt; str2 = "World"</span><span id="dd7b" class="md me it ly b gy mj mg l mh mi">&gt;&gt;&gt; str1 + str2<br/>"Hello World"</span></pre><p id="b1bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种方法很好。然而，这在处理列表、数据框架时变得不切实际，或者如果你的目标是可读性。</p><p id="9ba6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将向您展示3种替代方法，它们不仅可以帮助您连接字符串，还可以让您轻松地连接列表元素，在Python中正确格式化字符串，并使调试变得不那么复杂。</p><h1 id="9735" class="mk me it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">f弦</h1><p id="7a65" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">Python f-string是在Python 3.6中引入的，它允许我们像加号操作符那样连接字符串；然而，f字符串使用花括号<code class="fe lv lw lx ly b">{}</code>来存储将被格式化为字符串的值。</p><p id="441d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，让我们使用f-string打印句子“Python由吉多·范·罗苏姆创建，并于1991年发布”。在这种情况下，我们将使用名称“吉多·范·罗苏姆”和年份“1991”作为变量。</p><p id="41f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看f字符串的语法。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="315f" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; name = 'Guido van Rossum'<br/>&gt;&gt;&gt; year = 1991</span><span id="36f7" class="md me it ly b gy mj mg l mh mi">&gt;&gt;&gt; f'Python was created by {name} and released in {year}'</span></pre><p id="40b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它的语法比<code class="fe lv lw lx ly b">+</code>操作符更简洁，不是吗？</p><p id="f782" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您也可以使用f-string格式化文本数字或日期。假设我们从<code class="fe lv lw lx ly b">datetime</code>库获取了今天的日期，并希望将其添加到文本中。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="cc23" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; import datetime<br/>&gt;&gt;&gt; now = datetime.datetime.now()</span><span id="73b4" class="md me it ly b gy mj mg l mh mi">&gt;&gt;&gt; f'Today is {now:%B} {now:%-d}, {now:%Y}'</span></pre><p id="3dec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python会打印<code class="fe lv lw lx ly b">‘Today is October 1, 2021’</code>。作为旁注，<code class="fe lv lw lx ly b">%B</code>、<code class="fe lv lw lx ly b">%-d </code>和<code class="fe lv lw lx ly b">%Y</code>是格式代码。您可以在这个<a class="ae ky" href="https://strftime.org/" rel="noopener ugc nofollow" target="_blank">Python strftime cheat sheet</a>中找到其他可用的时间格式代码。</p><p id="b633" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们格式化一个数值。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="ef0f" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; gpa = 3.355</span><span id="3c54" class="md me it ly b gy mj mg l mh mi">&gt;&gt;&gt; f'His GPA is {gpa:.1f}'</span></pre><p id="e6d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python会将数字四舍五入到第一个小数，并打印出<code class="fe lv lw lx ly b">‘His GPA is 3.4’</code>在这个例子中，<code class="fe lv lw lx ly b">.f</code>是一个表示“浮点数”的格式代码，所以在上面的例子中，我们指定了精度的<code class="fe lv lw lx ly b">1</code>位数。你可以在这个链接上找到更多类似这些<a class="ae ky" href="https://thepythonguru.com/python-string-formatting/" rel="noopener ugc nofollow" target="_blank">的格式代码。</a></p><p id="4d17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">f-string很酷的一点是，开发人员不断增加新的功能。Python在Python 3.8中引入了一个全新的特性，将<code class="fe lv lw lx ly b">=</code>添加到f字符串中。这简化了频繁的打印调试，因此不用编写下面的代码来打印变量名及其值。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="6caf" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; python_version = 3.8<br/>&gt;&gt;&gt; f"python_version={python_version}"</span><span id="80b8" class="md me it ly b gy mj mg l mh mi">'<!-- -->python_version<!-- -->=3.8'</span></pre><p id="df94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你现在只能这样写:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="1502" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; f"{python_version=}"</span><span id="3b44" class="md me it ly b gy mj mg l mh mi">'<!-- -->python_version<!-- -->=3.8'</span></pre><h1 id="19a4" class="mk me it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">加入()</h1><p id="b6b6" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">当您想要连接存储在一个列表中的多个字符串时，最简单的方法是使用<code class="fe lv lw lx ly b">join()</code>方法。您只需要在使用<code class="fe lv lw lx ly b">join()</code>方法之前指定一个分隔符。</p><p id="f19c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们之前使用了同一个句子，但是现在每个单词都存储在一个名为<code class="fe lv lw lx ly b">words</code>的列表中。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="e825" class="md me it ly b gy mf mg l mh mi">words = ['Python', 'was', 'created', 'by', 'Guido', 'van', 'Rossum', 'and', 'first', 'released', 'in', '1991']</span></pre><p id="19d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用join方法和一个空字符串<code class="fe lv lw lx ly b">‘ ’</code>作为分隔符来构建之前的句子。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="1736" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; ' '.join(words)</span></pre><p id="0bc7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">join()</code>方法不仅是连接列表元素的有效方法，而且由于其性能优于<code class="fe lv lw lx ly b">+</code>操作符。<a class="ae ky" rel="noopener" target="_blank" href="/do-not-use-to-join-strings-in-python-f89908307273"/><code class="fe lv lw lx ly b"><a class="ae ky" rel="noopener" target="_blank" href="/do-not-use-to-join-strings-in-python-f89908307273">join()</a></code><a class="ae ky" rel="noopener" target="_blank" href="/do-not-use-to-join-strings-in-python-f89908307273">方法可以比使用</a> <code class="fe lv lw lx ly b"><a class="ae ky" rel="noopener" target="_blank" href="/do-not-use-to-join-strings-in-python-f89908307273">+</a></code> <a class="ae ky" rel="noopener" target="_blank" href="/do-not-use-to-join-strings-in-python-f89908307273">来连接列表中的字符串快4倍。</a></p><h1 id="8b1a" class="mk me it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">str.format()</h1><p id="80c2" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">我们可以使用<code class="fe lv lw lx ly b">str.format()</code>在Python中连接字符串。我们只需要为我们想要添加到字符串中的每个变量插入花括号<code class="fe lv lw lx ly b">{}</code>。花括号操作符将帮助我们在Python中格式化字符串。</p><p id="331b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看一看。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="9324" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; name = 'Guido van Rossum'<br/>&gt;&gt;&gt; year = 1991<br/><br/>&gt;&gt;&gt; "Python was created by {} and released in {}".format(name, year)</span></pre><p id="a35c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">str.format()</code>优于<code class="fe lv lw lx ly b">+</code>操作符的一个原因是我们不需要在连接之前显式地将整数转换成字符串。在上面的例子中，我们不必像使用<code class="fe lv lw lx ly b">+</code>操作符那样将<code class="fe lv lw lx ly b">year</code>变量转换成字符串。</p><p id="951a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不幸的是，<strong class="lb iu"> </strong>使用<code class="fe lv lw lx ly b">str.format()</code>的一个缺点是，当处理许多变量和长字符串时，代码会变得很长。这就是f弦优于<code class="fe lv lw lx ly b">str.format()</code>的原因。</p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><p id="d8b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！这是Python中用<code class="fe lv lw lx ly b">+</code>操作符连接字符串的3种替代方法。明智地使用它们来编写更好的Python代码。</p><p id="81c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://frankandrade.ck.page/bd063ff2d3" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">与3k以上的人一起加入我的电子邮件列表，获取我在所有教程中使用的Python for Data Science备忘单(免费PDF) </strong> </a></p><p id="a5f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，可以考虑报名成为一名媒体成员。每月5美元，让您可以无限制地访问数以千计的Python指南和数据科学文章。如果你使用<a class="ae ky" href="https://frank-andrade.medium.com/membership" rel="noopener">我的链接</a>注册，我会赚一小笔佣金，不需要你额外付费。</p><div class="nn no gp gr np nq"><a href="https://frank-andrade.medium.com/membership" rel="noopener follow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd iu gy z fp nv fr fs nw fu fw is bi translated">通过我的推荐链接加入媒体——弗兰克·安德拉德</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">frank-andrade.medium.com</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe ks nq"/></div></div></a></div></div></div>    
</body>
</html>