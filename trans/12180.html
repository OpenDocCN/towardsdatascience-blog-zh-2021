<html>
<head>
<title>How to Write Switch Statements in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用 Python 编写 Switch 语句</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/switch-statements-python-e99ea364fde5?source=collection_archive---------10-----------------------#2021-12-09">https://towardsdatascience.com/switch-statements-python-e99ea364fde5?source=collection_archive---------10-----------------------#2021-12-09</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><h2 id="fc61" class="is it iu bd b dl iv iw ix iy iz ja dk jb translated" aria-label="kicker paragraph">编程；编排</h2><div class=""/><div class=""><h2 id="873d" class="pw-subtitle-paragraph ka jd iu bd b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dk translated">了解如何使用模式匹配或字典在 Python 中编写 switch 语句</h2></div><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gi gj ks"><img src="../Images/fd522880f7eef9bff9239a96a950672a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X14KWzQSTJM2uwN_Bi_SYQ.jpeg"/></div></div><p class="le lf gk gi gj lg lh bd b be z dk translated"><a class="ae li" href="https://unsplash.com/@steve_j?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">斯蒂夫·约翰森</a>在<a class="ae li" href="https://unsplash.com/s/photos/switch?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h2 id="2418" class="lj lk iu bd ll lm ln dn lo lp lq dp lr ls lt lu lv lw lx ly lz ma mb mc md ja bi translated">介绍</h2><p id="26a7" class="pw-post-body-paragraph me mf iu mg b mh mi ke mj mk ml kh mm ls mn mo mp lw mq mr ms ma mt mu mv mw in bi translated">在编程语言中处理多路分支的典型方法是 if-else 子句。当我们需要对许多场景进行编码时，另一种选择是大多数现代语言都支持的所谓的<strong class="mg je"> switch </strong>或<strong class="mg je"> case </strong>语句。</p><p id="dd26" class="pw-post-body-paragraph me mf iu mg b mh mx ke mj mk my kh mm ls mz mo mp lw na mr ms ma nb mu mv mw in bi translated"><strong class="mg je">然而，对于 Python 版本&lt; 3.10，没有这样的语句</strong>能够基于特定变量的值选择指定的动作。相反，我们通常必须编写一个包含多个 if-else 语句的语句，甚至创建一个字典，然后根据特定的变量值对其进行索引。</p><p id="4e1e" class="pw-post-body-paragraph me mf iu mg b mh mx ke mj mk my kh mm ls mz mo mp lw na mr ms ma nb mu mv mw in bi translated">在今天的简短指南中，我们将演示如何以 if-else 系列或字典的形式编写 switch 或 case 语句。此外，我们将展示 Python 3.10 版本中引入的新的<strong class="mg je">模式匹配</strong>特性。</p></div><div class="ab cl nc nd hy ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="in io ip iq ir"><h2 id="ef8e" class="lj lk iu bd ll lm ln dn lo lp lq dp lr ls lt lu lv lw lx ly lz ma mb mc md ja bi translated">编写 if-else 语句</h2><p id="cc43" class="pw-post-body-paragraph me mf iu mg b mh mi ke mj mk ml kh mm ls mn mo mp lw mq mr ms ma mt mu mv mw in bi translated">让我们假设我们有一个名为<code class="fe nj nk nl nm b">choice</code>的变量，它接受一些字符串值，然后根据变量值打印一个浮点数。</p><p id="a221" class="pw-post-body-paragraph me mf iu mg b mh mx ke mj mk my kh mm ls mz mo mp lw na mr ms ma nb mu mv mw in bi translated">使用一系列 if-else 语句，如下面的代码片段所示:</p><pre class="kt ku kv kw gu nn nm no np aw nq bi"><span id="fa10" class="lj lk iu nm b gz nr ns l nt nu">if choice == 'optionA':<br/>    print(1.25)<br/>elif choice == 'optionB':<br/>    print(2.25)<br/>elif choice == 'optionC':<br/>    print(1.75)<br/>elif choice == 'optionD':<br/>    print(2.5)<br/>else:<br/>    print(3.25)</span></pre><p id="e0d0" class="pw-post-body-paragraph me mf iu mg b mh mx ke mj mk my kh mm ls mz mo mp lw na mr ms ma nb mu mv mw in bi translated">在传统的 if-else 语句中，我们在 else 子句中包含默认选项(即，当变量值与任何可用选项都不匹配时应该选择的选项)。</p></div><div class="ab cl nc nd hy ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="in io ip iq ir"><h2 id="5c4b" class="lj lk iu bd ll lm ln dn lo lp lq dp lr ls lt lu lv lw lx ly lz ma mb mc md ja bi translated">使用字典编写 switch 语句</h2><p id="83ce" class="pw-post-body-paragraph me mf iu mg b mh mi ke mj mk ml kh mm ls mn mo mp lw mq mr ms ma mt mu mv mw in bi translated">另一种可能性(如果您使用的是 Python &lt; 3.10)是字典，因为它们可以方便有效地建立索引。例如，我们可以创建一个映射，其中我们的选项对应于字典的键，值对应于期望的结果或动作。</p><pre class="kt ku kv kw gu nn nm no np aw nq bi"><span id="a9e8" class="lj lk iu nm b gz nr ns l nt nu">choices = {<br/>    'optionA': 1.25,<br/>    'optionB': 2.25,<br/>    'optionC': 1.75,<br/>    'optionD': 2.5,<br/>}</span></pre><p id="b83b" class="pw-post-body-paragraph me mf iu mg b mh mx ke mj mk my kh mm ls mz mo mp lw na mr ms ma nb mu mv mw in bi translated">最后，我们可以通过提供相应的键来挑选所需的选项:</p><pre class="kt ku kv kw gu nn nm no np aw nq bi"><span id="bffb" class="lj lk iu nm b gz nr ns l nt nu">choice = 'optionA'<br/>print(choices[choice])</span></pre><p id="bc00" class="pw-post-body-paragraph me mf iu mg b mh mx ke mj mk my kh mm ls mz mo mp lw na mr ms ma nb mu mv mw in bi translated">现在我们需要处理我们的选择没有包含在指定字典中的情况。如果我们试图提供一个不存在的密钥，我们将得到一个<code class="fe nj nk nl nm b">KeyError</code>。基本上有两种方法可以处理这种情况。</p><p id="3f7e" class="pw-post-body-paragraph me mf iu mg b mh mx ke mj mk my kh mm ls mz mo mp lw na mr ms ma nb mu mv mw in bi translated">第一个选项要求在从字典中选择值时使用<code class="fe nj nk nl nm b">get()</code>方法，这也允许我们在没有找到键时指定默认值。举个例子，</p><pre class="kt ku kv kw gu nn nm no np aw nq bi"><span id="a1a8" class="lj lk iu nm b gz nr ns l nt nu">&gt;&gt;&gt; choice = 'optionE'<br/>&gt;&gt;&gt; print(choices.get(choice, 3.25)<br/>3.25</span></pre><p id="2285" class="pw-post-body-paragraph me mf iu mg b mh mx ke mj mk my kh mm ls mz mo mp lw na mr ms ma nb mu mv mw in bi translated">或者，我们可以使用<code class="fe nj nk nl nm b">try</code>语句，这是一种通过捕捉<code class="fe nj nk nl nm b">KeyError</code>来处理缺省值的通用方法。</p><pre class="kt ku kv kw gu nn nm no np aw nq bi"><span id="91e8" class="lj lk iu nm b gz nr ns l nt nu">choice = 'optionE'</span><span id="901f" class="lj lk iu nm b gz nv ns l nt nu">try:<br/>    print(choices[choice])<br/>except KeyError:<br/>    print(3.25)</span></pre></div><div class="ab cl nc nd hy ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="in io ip iq ir"><h2 id="c106" class="lj lk iu bd ll lm ln dn lo lp lq dp lr ls lt lu lv lw lx ly lz ma mb mc md ja bi translated">Python ≥ 3.10 中的模式匹配</h2><p id="6e1d" class="pw-post-body-paragraph me mf iu mg b mh mi ke mj mk ml kh mm ls mn mo mp lw mq mr ms ma mt mu mv mw in bi translated">Python 3.10 引入了新的<strong class="mg je">结构模式匹配</strong> ( <a class="ae li" href="https://docs.python.org/3.10/whatsnew/3.10.html#pep-634-structural-pattern-matching" rel="noopener ugc nofollow" target="_blank"> PEP 634 </a>):</p><blockquote class="nw"><p id="0bbf" class="nx ny iu bd nz oa ob oc od oe of mw dk translated">结构模式匹配以模式的<em class="og">匹配语句</em>和<em class="og"> case 语句</em>的形式添加了相关动作。模式由序列、映射、原始数据类型以及类实例组成。模式匹配使程序能够从复杂的数据类型中提取信息，对数据结构进行分支，并基于不同形式的数据应用特定的操作。</p><p id="c2ef" class="nx ny iu bd nz oa ob oc od oe of mw dk translated">来源— <a class="ae li" href="https://docs.python.org/3.10/whatsnew/3.10.html#pep-634-structural-pattern-matching" rel="noopener ugc nofollow" target="_blank"> Python 文档</a></p></blockquote><p id="b35b" class="pw-post-body-paragraph me mf iu mg b mh oh ke mj mk oi kh mm ls oj mo mp lw ok mr ms ma ol mu mv mw in bi translated">因此，我们现在可以将代码简化如下:</p><pre class="kt ku kv kw gu nn nm no np aw nq bi"><span id="67ce" class="lj lk iu nm b gz nr ns l nt nu">choice:<br/>    case 'optionA':<br/>        print(1.25)<br/>    case 'optionB':<br/>        print(2.25)<br/>    case 'optionC':<br/>        print(1.75)<br/>    case 'optionD':<br/>        print(2.5)<br/>    case _:<br/>        print(3.25)</span></pre><p id="948f" class="pw-post-body-paragraph me mf iu mg b mh mx ke mj mk my kh mm ls mz mo mp lw na mr ms ma nb mu mv mw in bi translated">注意，我们甚至可以使用如下所示的<code class="fe nj nk nl nm b">|</code>(‘或’)操作符将几个选择组合在一个案例或模式中:</p><pre class="kt ku kv kw gu nn nm no np aw nq bi"><span id="43d0" class="lj lk iu nm b gz nr ns l nt nu">case 'optionA' | 'optionB':<br/>    print(1.25)</span></pre></div><div class="ab cl nc nd hy ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="in io ip iq ir"><h2 id="78f3" class="lj lk iu bd ll lm ln dn lo lp lq dp lr ls lt lu lv lw lx ly lz ma mb mc md ja bi translated">最后的想法</h2><p id="f311" class="pw-post-body-paragraph me mf iu mg b mh mi ke mj mk ml kh mm ls mn mo mp lw mq mr ms ma mt mu mv mw in bi translated">在今天的文章中，我们讨论了在 Python 中实现 switch 语句的几种替代方法，因为在 3.10 版本之前，Python 中没有像许多其他编程语言那样的内置结构。</p><p id="f6f5" class="pw-post-body-paragraph me mf iu mg b mh mx ke mj mk my kh mm ls mz mo mp lw na mr ms ma nb mu mv mw in bi translated">因此，您可以编写传统的 if-else 语句，甚至初始化一个字典，其中的键对应于 if/else if 语句中使用的条件，当特定条件(键)成立时，值对应于所需的值。</p><p id="5d41" class="pw-post-body-paragraph me mf iu mg b mh mx ke mj mk my kh mm ls mz mo mp lw na mr ms ma nb mu mv mw in bi translated">此外，我们展示了如何使用 Python 3.10 中最近引入的新模式匹配 switch 语句。</p></div><div class="ab cl nc nd hy ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="in io ip iq ir"><p id="1b77" class="pw-post-body-paragraph me mf iu mg b mh mx ke mj mk my kh mm ls mz mo mp lw na mr ms ma nb mu mv mw in bi translated"><a class="ae li" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="mg je">成为会员</strong> </a> <strong class="mg je">阅读介质上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="om on gq gs oo op"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="oq ab fp"><div class="or ab os cl cj ot"><h2 class="bd je gz z fq ou fs ft ov fv fx jd bi translated">通过我的推荐链接加入 Medium-Giorgos Myrianthous</h2><div class="ow l"><h3 class="bd b gz z fq ou fs ft ov fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ox l"><p class="bd b dl z fq ou fs ft ov fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="oy l"><div class="oz l pa pb pc oy pd lc op"/></div></div></a></div></div><div class="ab cl nc nd hy ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph me mf iu mg b mh mx ke mj mk my kh mm ls mz mo mp lw na mr ms ma nb mu mv mw in bi translated"><strong class="mg je">你可能也会喜欢</strong></p><div class="om on gq gs oo op"><a rel="noopener follow" target="_blank" href="/augmented-assignments-python-caa4990811a0"><div class="oq ab fp"><div class="or ab os cl cj ot"><h2 class="bd je gz z fq ou fs ft ov fv fx jd bi translated">Python 中的扩充赋值</h2><div class="ow l"><h3 class="bd b gz z fq ou fs ft ov fv fx dk translated">了解增强赋值表达式在 Python 中的工作方式，以及为什么在使用它们时要小心…</h3></div><div class="ox l"><p class="bd b dl z fq ou fs ft ov fv fx dk translated">towardsdatascience.com</p></div></div><div class="oy l"><div class="pe l pa pb pc oy pd lc op"/></div></div></a></div></div><div class="ab cl nc nd hy ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="in io ip iq ir"><div class="kt ku kv kw gu op"><a rel="noopener follow" target="_blank" href="/real-time-speech-recognition-python-assemblyai-13d35eeed226"><div class="oq ab fp"><div class="or ab os cl cj ot"><h2 class="bd je gz z fq ou fs ft ov fv fx jd bi translated">如何用 Python 执行实时语音识别</h2><div class="ow l"><h3 class="bd b gz z fq ou fs ft ov fv fx dk translated">使用 Python 中的 AssemblyAI API 执行实时语音转文本</h3></div><div class="ox l"><p class="bd b dl z fq ou fs ft ov fv fx dk translated">towardsdatascience.com</p></div></div><div class="oy l"><div class="pf l pa pb pc oy pd lc op"/></div></div></a></div></div><div class="ab cl nc nd hy ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="in io ip iq ir"><div class="kt ku kv kw gu op"><a rel="noopener follow" target="_blank" href="/apply-vs-map-vs-applymap-pandas-529acdf6d744"><div class="oq ab fp"><div class="or ab os cl cj ot"><h2 class="bd je gz z fq ou fs ft ov fv fx jd bi translated">熊猫中的 apply() vs map() vs applymap()</h2><div class="ow l"><h3 class="bd b gz z fq ou fs ft ov fv fx dk translated">讨论 Python 和 Pandas 中 apply()、map()和 applymap()的区别</h3></div><div class="ox l"><p class="bd b dl z fq ou fs ft ov fv fx dk translated">towardsdatascience.com</p></div></div><div class="oy l"><div class="pg l pa pb pc oy pd lc op"/></div></div></a></div></div></div>    
</body>
</html>