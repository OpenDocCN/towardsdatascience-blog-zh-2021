<html>
<head>
<title>A Useful Mindset for Learning SQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习SQL的有益心态</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-useful-mindset-for-learning-sql-b0c98764e17?source=collection_archive---------11-----------------------#2021-09-25">https://towardsdatascience.com/a-useful-mindset-for-learning-sql-b0c98764e17?source=collection_archive---------11-----------------------#2021-09-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a3c9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">分享这种思维加速了我的SQL学习过程</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/22ab8e0f337c4410d3b9543ee441b151.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YrBmJSHt0n3seyb1"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">卡斯帕·卡米尔·鲁宾在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="dd9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于好奇的工作者来说，尤其是那些在科技行业工作的人，探索数据库可以把你带到天堂。这就是我在挖掘大量数据集，为我的项目寻找有见地的信息时的感受。使用结构化查询语言(SQL ),我可以轻松地组合和聚合来自各种来源的数据来回答我的问题。这真的消除了下载各种excel文件，然后编写和复制所有VLOOKUP和IF函数的痛苦。通过我的定制SQL脚本，我可以使用Tableau或PowerBI创建数据可视化，与业务利益相关者分享见解。关键工具确实是SQL，我现在认为它是新的Excel。</p><p id="59ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">说实话，我一开始很害怕学SQL。它看起来像一种复杂的编码语言，只有计算机科学家才能理解。然而，事情通常没有看起来那么复杂。有一次跟同事学了之后实际尝试了一下，真的掌握了窍门。我开始探索用例并生成以前没有使用过的模型。最重要的是，这项新技能带来的灵活性和速度让工作变得更加愉快。</p><p id="7886" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇文章中，我想分享我的SQL故事:帮助我快速获得这项技能的心态。</p><h1 id="d6e3" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">这都是简单的数学</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a4d524a7dca00a74789a7a5cf0ec02ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*f46G6lmylu7QpoQa"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@antoine1003?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">安托万·道特里</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="5423" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">高中时，基础数学是我最喜欢的科目。我喜欢解二次方程和三角学问题。这就像解决一个难题或谜团，比如谁是x，或者当我们知道o的正弦值时，a点到b点的距离是多少？这种心态带来的兴奋会建立你的逻辑思维。</p><p id="6c7b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">数学和SQL都是关于逻辑的，你只需要理解逻辑就能得到预期的结果。体现数学思维真的有助于加速我的SQL学习过程。这种思维模式还帮助我学习了会计学(我的本科专业)、经济学和Microsoft Excel中的数据建模。后者实际上是最重要的，我将在下一节讨论。</p><h1 id="f98b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">和Excel没那么大区别</h1><p id="2420" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在从事技术工作之前，我几乎所有的工作都使用Microsoft Excel。我被要求使用VLOOKUP、IF和Pivot tables等函数为价格计算和市场份额分析等案例创建模型。多亏有一个像老鹰一样盯着我的老板，还有时间来完善我的技能，我可以学习Excel的逻辑并创建更有效的模型。掌握这些知识对我学习SQL至关重要。我发现编写一个查询与构建一个Excel模型没有什么不同。数据仓库就像一个包含Excel文件的大型共享文件夹，我的查询就是填充这个空白表格。下面是我为这篇文章做的一个简单的例子。</p><p id="768e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设有一家健身公司，姑且称之为好地方，它为公共和私营部门的组织提供企业会员。每个俱乐部都有这些活动/设施:健身班、健身房、篮球场、游泳池、水疗中心和小吃店。有几组数据:(1)从客户组织的注册表单中提取的成员列表，以及(2)每次成员使用他们的卡登记/离开时收集的活动日志。Good Place希望进一步分析每个客户组织的活动。</p><p id="5a18" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一个数据集包含成员的唯一ID、全名、公司/机构和性别，如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/a3499d1c02d149c6535ff351dae1ad03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/0*9Xf6F6I1KeTHCjVe"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者使用DBeaver制作的图像</p></figure><p id="f5b7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">而第二个数据集包含日期id、成员ID、活动和花费的分钟数，如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/c286657ce4634315c8846e930b82a984.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/0*zjh1peU8yLkiVtDP"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者使用DBeaver制作的图像</p></figure><p id="dcb0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如您所见，两个数据集之间唯一的共享列是MemberID。与此同时，The Good Place的首席执行官Eleanor Shellstrop希望了解每个客户组织花费的平均时间，并按运动(健身班、篮球、游泳、健身房)和非运动(小吃店和spa)对活动进行分类。Excel和SQL都可以做到这一点，我们来看看它们是如何比较的。</p><h2 id="5a24" class="mr lt iq bd lu ms mt dn ly mu mv dp mc lf mw mx me lj my mz mg ln na nb mi nc bi translated">擅长</h2><p id="30ed" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">由于有两个独立的数据集，最好从将成员列表中的列添加到活动日志开始，因为后者被视为事实表(存储度量和指标)。prior是一个维度表，因为它提供了成员ID列的详细信息/属性。</p><p id="0cb8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了创建链接，我们将在“Minutes_Spent”之后的列中使用VLOOKUP函数，即:VLOOKUP(MemberID，' Sheet1_Member_List！一个:D，列号，0)。一个更方便但未被充分利用的函数是INDEX + MATCH，它将是:INDEX(MemberList Array，MATCH(MemberID，' Sheet1_Member_List！A:A，0)，MATCH(列名，' Sheet1_Member_List！A1:D1！, 0).这消除了为VLOOKUP函数填充列号的需要。</p><p id="5e3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要添加自定义列，我们可以使用流行的IF函数结合OR，那将是IF(OR(Activity = "Snack Bar "，Activity="Spa ")，" Non-Sport "，" Sport ")。</p><p id="a18d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一步是汇总数据以生成所需的见解。有两种方法可以做到这一点:创建一个数据透视表或者使用SUMIFS和COUNTIFS这样的聚合函数。前一个要简单得多，你所需要做的就是阻塞数据区域并插入一个数据透视表。但是，它的可持续性较差，因为(1)它为Excel文件增加了更多的内存，使其操作更加繁重,( 2)如果有额外的行，每次更新数据和更改范围时，您都需要刷新它。</p><p id="dc24" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果文件将被长期重用，那么聚合函数更为有利。为了满足Eleanor的请求，我们可以复制类别和客户组织，然后删除重复项。然后，我们使用SUMIFS计算总分钟数，使用COUNTIFS计算总会话数，因为它不是数字。该功能将是:</p><p id="3b0f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总分钟数:=SUMIFS('Combined Dataset.csv '！$D:$D，'组合数据集. csv '！$E:$E，A5，'组合数据集. csv '！$F:$F，B5)</p><p id="8c6c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">会话总数:=COUNTIFS('Combined Dataset.csv ')！$E:$E，A5，'组合数据集. csv '！$F:$F，B5)</p><p id="110d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了这两个汇总，我们可以用总分钟数除以总会话数，得到总分钟数/会话数。最终输出如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/798fe3586b9e8ed4797e19530179735f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*W0X0IXwk0mE3lLUZ"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者使用Microsoft Excel制作的图像</p></figure><p id="c52f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于excel用户来说，这似乎很简单。但是想象一下，如果有更多的客户组织和活动日志，再加上Eleanor每天都在请求这些信息，那该有多好？此外，如果埃莉诺要求更多的报告呢？制作模型、下载各种文件和复制数据将花费大量时间，这也容易出现人为错误。现在让我们看看SQL方法。</p><h2 id="5304" class="mr lt iq bd lu ms mt dn ly mu mv dp mc lf mw mx me lj my mz mg ln na nb mi nc bi translated">结构化查询语言</h2><p id="6d9f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们不必打开所有这些文件，只需编写一个简单的查询，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/3243c7d7e52a0cce9e344423a61d0e73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zwbK8xJWbIhlUMJ8uWRFWQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者使用DBeaver制作的图像</p></figure><p id="dd53" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将生成Excel格式的精确输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/3d69f4864d0b0861cd9ba3e63dee8dd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*artmXnI9Di68l9eL"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者使用DBeaver制作的图像</p></figure><p id="3fc2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用Excel的术语来解释，SELECT就像使用等号在FROM中声明的主数据集中召唤所需的列，在本例中是活动日志。不使用VLOOKUP，我们可以输入LEFT JOIN，然后输入我们想要链接的数据集(就像Excel公式中的列选择),然后设置链接列(查找单元格)。CASE WHEN类似于IF函数，只是格式不同。对于聚合，您只需要使用SUM和COUNT，然后在最后使用GROUP BY来表示所使用的列。这与SUMIFS和COUNTIFS函数的后半部分相同，在后半部分，我们选择列和单元格作为聚合的基础。使用SQL可以消除上一节中提到的所有Excel工作。</p><p id="09d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了让Eleanor了解情况，可以用Tableau编写这个查询，并创建一个可访问的仪表板。然后，她的分析师可以处理其他项目，而不必进行任何手动操作，也不必为这个特定主题发送电子邮件。</p><h1 id="c901" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">不断探索和挑战自己</h1><p id="ed98" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">通过不断练习和访问新的数据集，我对SQL的理解变得更加流利。有更多的机会刺激好奇的头脑进一步探索。当学习数据集时，我总是很兴奋，因为这可以加强我的分析。这将带来被忽视的新见解，并对问题陈述有更深的理解。</p><p id="d678" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于技术增加了工作动力，我总是认为有必要挑战自己。主要目标是如何更有效地工作，以产生及时和准确的见解。我花时间回顾我以前的问题，并思考如何缩短它，首先想到的是“总有改进的空间”。有许多可能的功能尚未使用。像Presto这样的SQL引擎在<a class="ae kv" href="https://prestodb.io/" rel="noopener ugc nofollow" target="_blank">网站</a>上有完整的列表供进一步学习。另一个简单的学习方法是不断搜索，搜索的信息就会出现。不断完善你的技能总是很重要的，或者用斯蒂芬·柯维的话说，磨利锯子。</p><h1 id="91ba" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结束语</h1><p id="0310" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我强烈建议任何从事分析工作的人都应该学习SQL，尤其是从事技术工作的人。它不仅会加快你的交付速度，还会给你探索新见解的空间和灵活性。此外，精通SQL将使你更容易进入下一个层次:Python。从我的个人经验来看，我可以用类似的思维方式快速学习Python Pandas:这都是简单的数学，与SQL没有太大的不同，并且不断练习。最重要的是，我们必须承认当前的技术发展需要新的技能。因此，我们必须不断学习，成为我们组织的宝贵财富。</p></div></div>    
</body>
</html>