<html>
<head>
<title>A Simple Way to Get a Stock’s Fundamental Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">获取股票基本面数据的简单方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-simple-way-to-get-a-stocks-fundamental-data-26506adf1214?source=collection_archive---------5-----------------------#2021-10-29">https://towardsdatascience.com/a-simple-way-to-get-a-stocks-fundamental-data-26506adf1214?source=collection_archive---------5-----------------------#2021-10-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f769" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我如何使用Python和API调用来检索公司的财务报表和收益报告</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fdfad15546a8f633db7dad6f2e531b8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-Sf_ZNFZvulgSSJH"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@sigmund?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">西格蒙德</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="e281" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">获取或搜集股票数据有时说起来容易做起来难。找到包含适当的相关数据的正确资源或网站可能相当困难。在我的数据科学项目中，在过去几年中，我需要使用许多不同的数据集，其中相当一部分涉及股票数据和分析。</p><p id="c535" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据我的经验，股票的价格历史是最容易找到和检索的数据之一。通常，我会使用Yahoo Finance和附带的Python库来访问这些历史价格数据。然而，我发现对于一只股票的基本面数据来说，情况并非如此。</p><p id="ad33" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了找到基本数据，比如财务报表和收益报告，你可能需要进行大量的谷歌搜索和烦人的网络搜索。在我之前的一个项目中，我幸运地发现了一个现已关闭的网站，名为stockpup.com。这个网站包含了数千种股票的数千行基本面数据。它们都被整齐地组织成一个简单的CSV文件，供我下载并用于我的机器学习项目。</p><p id="fef0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于那个网站不再可用，我不得不在其他地方寻找数据…</p><blockquote class="me mf mg"><p id="550c" class="kz la mh lb b lc ld ju le lf lg jx lh mi lj lk ll mj ln lo lp mk lr ls lt lu im bi translated"><a class="ae ky" href="https://marco-santos.medium.com/membership" rel="noopener">在这里注册一个中级会员，可以无限制地访问和支持像我这样的内容！在你的支持下，我赚了一小部分会费。谢谢！</a></p></blockquote></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="d40f" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">财务数据API</h1><p id="c708" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">有许多金融数据API可以让你访问股票的基本数据。就我个人而言，我发现并使用了一个网站，它不仅能够提供基本数据，而且可以免费注册，这个网站叫做——<a class="ae ky" href="https://eodhistoricaldata.com/?ref=31CX3ILN&amp;utm_source=medium&amp;utm_medium=post&amp;utm_campaign=a_simple_way_to_get_a_stock_s_fundamental_data" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">【eodhistoricaldata.com】</strong></a><strong class="lb iu"/>，也被称为EOD高清。<em class="mh">披露:我从通过上面</em>的链接购买的任何商品中赚取一小笔佣金。</p><p id="1a8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用这个财务数据API，我能够从数千家公司检索基本数据。数据已经准备好并可用，但现在我需要将它组织并格式化成我能够使用的熊猫数据框架。为此，我利用Python做好了一切准备:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="2ece" class="nu mt it nq b gy nv nw l nx ny"># Libraries<br/>import pandas as pd<br/>from eod import EodHistoricalData<br/>from functools import reduce<br/>from datetime import datetime, timedelta</span><span id="2bf1" class="nu mt it nq b gy nz nw l nx ny"># Importing and assigning the api key<br/>with open("../eodHistoricalData-API.txt", "r") as f:<br/>    api_key = f.read()<br/>    <br/># EOD Historical Data client<br/>client = EodHistoricalData(api_key)</span></pre><p id="b4f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了我提供的API键和上面的代码，我就可以开始检索和格式化基础数据了。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="3b4a" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">获取基础数据</h1><p id="9604" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">我使用的API能够为我提供季度基础数据，如资产负债表、损益表、现金流和收益报告，但它们都整齐地存储在API的return对象中各自的部分。我需要创建能够访问的功能，然后将所有这些数据整合到一个大的数据框架中。</p><p id="f3e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以我创建了一个函数，它能够将这些独立的数据转换成它们自己的数据帧，然后将它们合并成一个大的DF:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="aada" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个函数中，我能够从给定的股票报价机中检索基本数据。如您所见，每个财务报表都存储在我需要访问的特定属性中。一旦我将它们存储到各自的数据框架中，我就可以通过将它们合并在一起来整合它们。我还删除了任何多余的列，比如在我删除它们之前一直重复的“<em class="mh"> Date </em>列，以及任何重复的列。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="25bf" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">获取历史价格数据</h1><p id="2c6f" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">我发现返回的基本面数据中缺少的一点是当时的股价。我认为这是一条重要的信息。API也能够很容易地检索历史价格，所以这不成问题，但是我需要将这些价格与我上面创建的数据框架结合起来。</p><p id="4ccc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我创建了一个能够检索每日历史价格的函数，并将它们添加到更大的数据框架中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="aa67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我最初将价格添加到数据框架中时，我发现了一个问题，即在较大的DF中，某些日期的一些价格数据丢失了。我假设这些日期有时是假日、周末或类似的日子。不管怎样，我只是想知道在财务报表报告日期前后的股票价格。它不需要很精确，事实上，它可能就在报告日期的前一天或后两天。</p><p id="dd66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如你在上面的函数中看到的，我可以填写周末、假期等。以之前的股价。之后，我将它们添加到最终返回的更大的数据帧中。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="b963" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">获取基本面和价格数据</h1><p id="404b" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">因为我能够创建两个函数来检索基本面和价格数据，所以我决定将它们压缩成一个函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="7aee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个函数中，我合并了前两个函数。我还添加了额外的数据清理选项，提供了在更大的DF中删除空值的选择。如果您需要在此数据上训练机器学习模型，并且无法使用数据集中的n a值，则此选项可能会很有用。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="94ba" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">从多只股票中获取数据</h1><p id="6ae7" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">前面的函数在从一个给定的股票行情自动收录器中检索基本数据时都很有用，但是如果我想从不止一只股票中检索数据呢？为此，我创建了以下函数，它允许从多只股票中检索基本面数据:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="bc25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个相对简单的函数，利用了上面的函数。我需要做的第一件事是交叉引用API中可用的代码。这样做是为了防止给定的ticker不存在或给得不正确。然后，如果给定的报价器是有效的，那么它将从所有给定的股票中检索基本面数据，并将它们组合成一个更大的DF，其中包含多个股票的基本面数据。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="b524" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">结束语</h1><p id="bd24" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">通过使用Python和这个金融数据API，我能够轻松地检索几乎任何股票的基本数据。除了对格式化过程进行编码，整个任务相当简单。</p><p id="23a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着多只股票的基本面数据准备就绪，我现在可以将这个数据集应用于任何未来的数据科学项目。可以对该数据集使用分类或回归ML模型。或者使用Python的众多可视化库进行简单的分析。有各种各样的项目可以使用这样的数据集。</p><p id="8c5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://eodhistoricaldata.com/financial-academy/extracting-the-knowledge-from-the-data/a-simple-way-to-get-a-stocks-fundamental-data/" rel="noopener ugc nofollow" target="_blank"> <em class="mh">另外在eodhistoricaldata.com出版</em> </a></p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h2 id="79a5" class="nu mt it bd mu oc od dn my oe of dp nc li og oh ne lm oi oj ng lq ok ol ni om bi translated">开源代码库</h2><div class="on oo gp gr op oq"><a href="https://github.com/marcosan93/Medium-Misc-Tutorials/blob/main/Stock-Market-Tutorials/Analyze-Fundamental-Data.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd iu gy z fp ov fr fs ow fu fw is bi translated">Medium-Misc-Tutorials/Analyze-Fundamental-data . ipynb at main Marcos an 93/Medium-Misc-Tutorials</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">一组随机的中等教程。为Marcos an 93/Medium-Misc-Tutorials开发做出贡献，创建一个…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">github.com</p></div></div><div class="oz l"><div class="pa l pb pc pd oz pe ks oq"/></div></div></a></div></div></div>    
</body>
</html>