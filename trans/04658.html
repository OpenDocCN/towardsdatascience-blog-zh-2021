<html>
<head>
<title>How to Easily Make Beautiful Wordclouds in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python轻松制作漂亮的文字云</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-easily-make-beautiful-wordclouds-in-python-55789102f6f5?source=collection_archive---------5-----------------------#2021-04-22">https://towardsdatascience.com/how-to-easily-make-beautiful-wordclouds-in-python-55789102f6f5?source=collection_archive---------5-----------------------#2021-04-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bf14" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用stylecloud和wordcloud库来定制你的wordcloud。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/013b7dddc8f370c7bf662a4fe518086d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RB40dnZm4iKjeNKpyeLx7Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="f903" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">词云让我们很容易识别文本中的关键词，其中单词的大小代表它们的频率。有了这个，我们甚至在阅读之前就能很好地理解一篇文章的内容。虽然有很多免费的工具可以在线制作word cloud，但是我们可以使用我们的Python技能来定制更多的word cloud。</p><p id="a72f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我们将使用<code class="fe lu lv lw lx b">stylecloud</code>库用几行代码制作漂亮的单词云，使用<code class="fe lu lv lw lx b">wordcloud </code>库添加我们自己的图片作为单词云的遮罩，使用<code class="fe lu lv lw lx b">stop_words </code>定制默认提供的停用词列表。</p><h1 id="cb18" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">用Stylecloud制作漂亮的单词云</h1><p id="8eb6" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">我们将要使用的文字是史蒂夫·乔布斯在斯坦福演讲的一部分。你可以找到。txt文件，或者使用任何文本来制作你自己的wordcloud。</p><p id="3fd7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要轻松做出漂亮的字云，我们首先要做的就是安装<code class="fe lu lv lw lx b">stylecloud</code>。你可以通过pip <code class="fe lu lv lw lx b">pip3 install stylecloud.</code>安装它</p><p id="1e45" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦安装了<code class="fe lu lv lw lx b">stylecloud</code>，就要导入。</p><pre class="kj kk kl km gt mw lx mx my aw mz bi"><span id="631c" class="na lz it lx b gy nb nc l nd ne">import stylecloud</span></pre><p id="78e1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在要创建一个基本的wordcloud，我们需要使用<code class="fe lu lv lw lx b">.gen_stylecloud() </code>方法并添加。txt文件和图标，我们将使用这个词云的形式。在这个<a class="ae mv" href="https://fontawesome.com/icons?d=gallery&amp;p=1&amp;m=free" rel="noopener ugc nofollow" target="_blank">网站</a>上，你可以找到可以和stylecloud一起使用的图标列表。只需搜索你想要的图标，复制图标的HTML代码(在这个例子中，我选择了一个苹果作为图标)</p><pre class="kj kk kl km gt mw lx mx my aw mz bi"><span id="10fc" class="na lz it lx b gy nb nc l nd ne">stylecloud.gen_stylecloud(file_path='SJ-Speech.txt',<br/>                          icon_name= "fas fa-apple-alt")</span></pre><p id="f25d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">结果是下面的wordcloud(该文件在Python脚本所在的同一路径中创建)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/f99d916a80f741f14d0a5a8653e8bb60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*QBFdnz_w1bi_xhkF2ODtpQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="5e55" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是我们可以做得更多！我们可以进一步定制wordcloud，以获得更好看的wordcloud。</p><p id="c555" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以控制背景颜色、单词的颜色、输出文件的名称，还可以省略wordcloud中两个单词的搭配。为此，我们将使用下面的代码。</p><pre class="kj kk kl km gt mw lx mx my aw mz bi"><span id="91ee" class="na lz it lx b gy nb nc l nd ne">stylecloud.gen_stylecloud(file_path='SJ-Speech.txt',<br/>                          icon_name='fas fa-apple-alt',<br/>                          colors='white',<br/>                          background_color='black',<br/>                          output_name='apple.png',<br/>                          collocations=False)</span></pre><p id="dccb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们甚至可以编写颜色的HTML代码，而不是使用像“白色”这样的标准颜色在这个<a class="ae mv" href="https://htmlcolorcodes.com​" rel="noopener ugc nofollow" target="_blank">网站</a>上，你可以选择任何你想要的颜色，并获得它的HTML代码，你可以将它包含在stylecloud的<code class="fe lu lv lw lx b">colors </code>参数中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/8bf4069b4495ee18a98eeee79fb8026f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*k3FrYoN5XVhTqTLQ961Apw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="1ab8" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">添加或删除停用词</h1><p id="253f" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">默认情况下，Stylecloud有一个英文的停用词列表，但是如果您想要删除或添加新的停用词，您必须在<code class="fe lu lv lw lx b">custom_stopwords</code>参数中包含一个新的列表。</p><p id="193b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了定制停用词列表，我们必须使用<code class="fe lu lv lw lx b">stop_words</code>库。要做到这一点，首先，安装它(<code class="fe lu lv lw lx b">pip install stop_words</code>)，然后我们使用<code class="fe lu lv lw lx b">get_stop_words</code>获得一个特定语言的停用词列表。</p><pre class="kj kk kl km gt mw lx mx my aw mz bi"><span id="fba5" class="na lz it lx b gy nb nc l nd ne">from stop_words import get_stop_words</span><span id="3dca" class="na lz it lx b gy ng nc l nd ne">stop_words = get_stop_words('english')</span></pre><p id="f9d8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦定义了列表，就可以分别用<code class="fe lu lv lw lx b">.append </code>和<code class="fe lu lv lw lx b">.remove</code>方法添加或删除元素。</p><pre class="kj kk kl km gt mw lx mx my aw mz bi"><span id="2acd" class="na lz it lx b gy nb nc l nd ne">stop_words.append('my_new_stop_word')<br/>stop_words.remove('my_new_stop_word')</span></pre><p id="e647" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，我们只需添加新的<code class="fe lu lv lw lx b">stop_words</code>列表。我还将使用调色板而不是颜色来给wordcloud一个不同的外观。</p><pre class="kj kk kl km gt mw lx mx my aw mz bi"><span id="e353" class="na lz it lx b gy nb nc l nd ne">stylecloud.gen_stylecloud(file_path='SJ-Speech.txt',<br/>                          icon_name='fas fa-apple-alt',<br/>                         palette='cartocolors.qualitative.Pastel_3',<br/>                          background_color='black',<br/>                          output_name='apple.png',<br/>                          collocations=False,<br/>                          custom_stopwords=stop_words)</span></pre><p id="e783" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这个<a class="ae mv" href="https://jiffyclub.github.io/palettable/" rel="noopener ugc nofollow" target="_blank">网站</a>上，您可以找到一个Python调色板列表，您可以在stylecloud库中使用它(正如您在上面的代码中看到的，用点分隔的名称代表了<code class="fe lu lv lw lx b">palettes</code>模块的内容)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/1d5f2b086873bdf54e27cf7bb8a272da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*Atk6kI-nJTaqldhBQRp66g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="f405" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">添加您自己的图像</h1><p id="4560" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">有数百个免费图标可以和<code class="fe lu lv lw lx b">stylecloud</code>一起使用，但有时我们可能想使用我们自己的图像来给我们想要创建的wordcloud赋予形式。如果是这样的话，我们必须使用<code class="fe lu lv lw lx b">wordcloud </code>库来制作一个单词云，<code class="fe lu lv lw lx b">PIL</code>来上传图片，<code class="fe lu lv lw lx b">matplotlib </code>来绘制单词云，<code class="fe lu lv lw lx b">numpy </code>来使用上传的图片作为我们的单词云的遮罩。</p><p id="c1a3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，我们安装前面提到的所有4个库。一旦我们有了所有的模板，我们就导入它们，并开始用想要的模板创建一个wordcloud。</p><pre class="kj kk kl km gt mw lx mx my aw mz bi"><span id="7a69" class="na lz it lx b gy nb nc l nd ne">from wordcloud import WordCloud, ImageColorGenerator <br/>from PIL import Image<br/>import matplotlib.pyplot as plt<br/>import numpy as np</span><span id="cef6" class="na lz it lx b gy ng nc l nd ne"># create a mask based on the image we wish to include<br/>my_mask = np.array(Image.open('batman-logo.png'))</span><span id="a861" class="na lz it lx b gy ng nc l nd ne"># create a wordcloud <br/>wc = WordCloud(background_color='white',<br/>               mask=my_mask,<br/>               collocations=False,<br/>               width=600,<br/>               height=300,<br/>               contour_width=3,<br/>               contour_color='black',<br/>               stopwords=stop_words)</span></pre><p id="1ed3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如您所见，所使用的代码类似于stylecloud，只是有一些变化。我们使用<code class="fe lu lv lw lx b">mask</code>来指定我们想要用于wordcloud的图像(在本例中，我使用的是蝙蝠侠标志)。此外，我们包括轮廓宽度和颜色，使图像的形状更加明显。</p><p id="1686" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="nh">注意:确保你要用作蒙版的图片具有清晰的轮廓，否则文字云会不好看。</em></p><p id="c9a8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在我们必须读取文本文件，并用下面的代码生成wordcloud。</p><pre class="kj kk kl km gt mw lx mx my aw mz bi"><span id="f347" class="na lz it lx b gy nb nc l nd ne">with open('SJ-Speech.txt', 'r') as txt_file:<br/>    texto = txt_file.read()</span><span id="c1b5" class="na lz it lx b gy ng nc l nd ne">wc.generate(texto)</span></pre><p id="582c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们想使用原始图像的颜色，我们编写下面的代码(如果不是这样，wordcloud将有随机的颜色，就像本文中显示的第一个苹果图像一样)</p><pre class="kj kk kl km gt mw lx mx my aw mz bi"><span id="4b7f" class="na lz it lx b gy nb nc l nd ne">image_colors = ImageColorGenerator(my_mask)<br/>wc.recolor(color_func=image_colors)</span></pre><p id="8b49" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后，我们使用matplotlib来绘制wordcloud。</p><pre class="kj kk kl km gt mw lx mx my aw mz bi"><span id="cb9a" class="na lz it lx b gy nb nc l nd ne">plt.figure(figsize=(20, 10))<br/>plt.imshow(wc, interpolation='bilinear')<br/>plt.axis('off')<br/>wc.to_file('wordcloud.png')<br/>plt.show()</span></pre><p id="3cc3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我还删除了轴，只保留了图中的单词云，并用<code class="fe lu lv lw lx b">wc.to_file()</code>保存单词云</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/17cec5e6b84f8790f878a47c83e56623.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NqATuDe4THT_hq2pGJ3QKA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="33fd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="nh">就是这样！现在你已经准备好用Python制作你自己的wordcloud了！我在下面的文章中用辛普森一家的角色创建了一些单词云。</em></p><div class="nj nk gp gr nl nm"><a rel="noopener follow" target="_blank" href="/the-simpsons-is-the-best-tv-show-to-increase-your-english-vocabulary-f433fe060a74"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iu gy z fp nr fr fs ns fu fw is bi translated">《辛普森一家》是增加你英语词汇量的最佳电视节目</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">《辛普森一家》和83部电视剧中所有剧集所用词汇的数据分析。找出辛普森一家的…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">towardsdatascience.com</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa ks nm"/></div></div></a></div><p id="a595" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是我看的学习Python的书单。</p><div class="nj nk gp gr nl nm"><a href="https://betterprogramming.pub/4-python-books-i-read-as-a-self-taught-programmer-5a5453840cdb" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iu gy z fp nr fr fs ns fu fw is bi translated">作为一名自学成才的程序员，我阅读了4本Python书籍</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">学习Python来创建游戏、网站、自动化任务等的书籍</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">better编程. pub</p></div></div><div class="nv l"><div class="ob l nx ny nz nv oa ks nm"/></div></div></a></div><p id="fea5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae mv" href="https://frankandrade.ck.page/bd063ff2d3" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">与3k以上的人一起加入我的电子邮件列表，获取我在所有教程中使用的Python for Data Science备忘单(免费PDF) </strong> </a></p><p id="b765" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读这篇文章！在下面的文章中，你可以找到我用Python制作的其他漂亮的可视化指南。</p><div class="nj nk gp gr nl nm"><a rel="noopener follow" target="_blank" href="/a-simple-guide-to-beautiful-visualizations-in-python-f564e6b9d392"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iu gy z fp nr fr fs ns fu fw is bi translated">Python中美丽可视化的简单指南</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">自定义Matplotlib &amp; Seaborn，永远忘记那些难看的蓝条。</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">towardsdatascience.com</p></div></div><div class="nv l"><div class="oc l nx ny nz nv oa ks nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a rel="noopener follow" target="_blank" href="/avatar-meets-data-visualization-60631f86ba7d"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iu gy z fp nr fr fs ns fu fw is bi translated">用最后的气宗化身实现Python中的数据可视化</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">学习使用Plotly、Seaborn和Matplotlib库制作令人惊叹的可视化效果。</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">towardsdatascience.com</p></div></div><div class="nv l"><div class="od l nx ny nz nv oa ks nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a rel="noopener follow" target="_blank" href="/8-free-tools-to-make-interactive-data-visualizations-in-2021-no-coding-required-2b2c6c564b5b"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iu gy z fp nr fr fs ns fu fw is bi translated">2021年，8款免费工具可实现交互式数据可视化——无需编码</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">您不需要编写任何代码来轻松创建交互式数据可视化。</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">towardsdatascience.com</p></div></div><div class="nv l"><div class="oe l nx ny nz nv oa ks nm"/></div></div></a></div></div></div>    
</body>
</html>