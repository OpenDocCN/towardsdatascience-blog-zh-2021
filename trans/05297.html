<html>
<head>
<title>How to Automate Python Environment Creation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何自动创建Python环境</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-automate-python-environment-creation-850743f1c09e?source=collection_archive---------16-----------------------#2021-05-10">https://towardsdatascience.com/how-to-automate-python-environment-creation-850743f1c09e?source=collection_archive---------16-----------------------#2021-05-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4e5a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">创建环境，并通过一个命令将它们集成到Jupyter笔记本中</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b700ca006918dc067eb80a1ca19c3a94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jqgSqvgpfSmoBACk"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@florianolv?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Florian Olivo </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><div class="kz la gp gr lb lc"><a href="https://learningfrommachines.substack.com/" rel="noopener  ugc nofollow" target="_blank"><div class="ld ab fo"><div class="le ab lf cl cj lg"><h2 class="bd iu gy z fp lh fr fs li fu fw is bi translated">向机器学习</h2><div class="lj l"><h3 class="bd b gy z fp lh fr fs li fu fw dk translated">了解向我们学习的算法。</h3></div><div class="lk l"><p class="bd b dl z fp lh fr fs li fu fw dk translated">learningfrommachines.substack.com</p></div></div><div class="ll l"><div class="lm l ln lo lp ll lq ks lc"/></div></div></a></div><h1 id="706c" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">介绍</h1><p id="dc51" class="pw-post-body-paragraph mj mk it ml b mm mn ju mo mp mq jx mr ms mt mu mv mw mx my mz na nb nc nd ne im bi translated">对于那些在数据科学领域的人来说，自动化是他们最喜欢的词之一。将经常占用不必要时间的简单任务自动化是最好的技能之一。你不仅可以用一行代码完成10/15分钟的工作，而且你不必担心必须记住过程的每一步，因为你已经为自己开发了这些步骤。</p><p id="2634" class="pw-post-body-paragraph mj mk it ml b mm nf ju mo mp ng jx mr ms nh mu mv mw ni my mz na nj nc nd ne im bi translated">在本文中，我将向您展示如何使用<code class="fe nk nl nm nn b">bash</code>脚本在<code class="fe nk nl nm nn b">conda</code>和<code class="fe nk nl nm nn b">ipykernel</code>中自动开发Python环境。我已经写了如何将您的环境链接到Jupyter内核，所以如果您不知道如何做，您可以在下面找到它的链接:</p><div class="kz la gp gr lb lc"><a rel="noopener follow" target="_blank" href="/link-your-virtual-environment-to-jupyter-with-kernels-a69bc61728df"><div class="ld ab fo"><div class="le ab lf cl cj lg"><h2 class="bd iu gy z fp lh fr fs li fu fw is bi translated">用内核将你的虚拟环境链接到Jupyter</h2><div class="lj l"><h3 class="bd b gy z fp lh fr fs li fu fw dk translated">立即开始原型制作。</h3></div><div class="lk l"><p class="bd b dl z fp lh fr fs li fu fw dk translated">towardsdatascience.com</p></div></div><div class="ll l"><div class="no l ln lo lp ll lq ks lc"/></div></div></a></div><p id="5340" class="pw-post-body-paragraph mj mk it ml b mm nf ju mo mp ng jx mr ms nh mu mv mw ni my mz na nj nc nd ne im bi translated">我将在一个Unix shell上工作，默认情况下，这个shell可用于Linux和macOS。本文不会讨论如何在Windows上实现这一点，所以请注意这一点。</p><p id="1210" class="pw-post-body-paragraph mj mk it ml b mm nf ju mo mp ng jx mr ms nh mu mv mw ni my mz na nj nc nd ne im bi translated">事不宜迟，我们开始吧！</p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="6ba5" class="lr ls it bd lt lu nw lw lx ly nx ma mb jz ny ka md kc nz kd mf kf oa kg mh mi bi translated">项目大纲</h1><p id="dcdb" class="pw-post-body-paragraph mj mk it ml b mm mn ju mo mp mq jx mr ms mt mu mv mw mx my mz na nb nc nd ne im bi translated">在开始任何项目之前，不管是简单的还是复杂的，最好有一个简单的大纲，说明需要做什么，为手边的用户所做的假设，以及程序本身将要采取的行动。</p><h2 id="3a48" class="ob ls it bd lt oc od dn lx oe of dp mb ms og oh md mw oi oj mf na ok ol mh om bi translated">用户的假设:</h2><ul class=""><li id="a252" class="on oo it ml b mm mn mp mq ms op mw oq na or ne os ot ou ov bi translated">用户的系统上安装了<code class="fe nk nl nm nn b">conda</code></li><li id="a6ae" class="on oo it ml b mm ow mp ox ms oy mw oz na pa ne os ot ou ov bi translated">每次创建新环境时，用户都希望指定Python版本</li></ul><h2 id="a85b" class="ob ls it bd lt oc od dn lx oe of dp mb ms og oh md mw oi oj mf na ok ol mh om bi translated">程序的操作:</h2><ul class=""><li id="5a17" class="on oo it ml b mm mn mp mq ms op mw oq na or ne os ot ou ov bi translated">创建指定名称和Python版本的环境。</li><li id="9078" class="on oo it ml b mm ow mp ox ms oy mw oz na pa ne os ot ou ov bi translated">将<code class="fe nk nl nm nn b">ipykernel</code>安装到Python环境中</li><li id="f247" class="on oo it ml b mm ow mp ox ms oy mw oz na pa ne os ot ou ov bi translated">将环境链接到Jupyter内核</li></ul><p id="295e" class="pw-post-body-paragraph mj mk it ml b mm nf ju mo mp ng jx mr ms nh mu mv mw ni my mz na nj nc nd ne im bi translated">一旦所有这些操作完成，您就可以激活环境，安装您需要的任何包，并立即在Jupyter中使用它们。</p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="2957" class="lr ls it bd lt lu nw lw lx ly nx ma mb jz ny ka md kc nz kd mf kf oa kg mh mi bi translated">开发脚本</h1><p id="5899" class="pw-post-body-paragraph mj mk it ml b mm mn ju mo mp mq jx mr ms mt mu mv mw mx my mz na nb nc nd ne im bi translated">首先，在主目录中，创建一个名为<code class="fe nk nl nm nn b">scripts</code>的新文件夹。这将允许您将您选择制作的任何其他脚本也放在该文件中。假设您已经这样做了，首先在文件夹中创建两个文件。对于这个项目，我将称它们为<code class="fe nk nl nm nn b">env1.sh</code>和<code class="fe nk nl nm nn b">env2.sh</code>。</p><p id="97cd" class="pw-post-body-paragraph mj mk it ml b mm nf ju mo mp ng jx mr ms nh mu mv mw ni my mz na nj nc nd ne im bi translated">然后，您可以用您喜欢的任何文本编辑器打开该脚本。确保你知道你的<code class="fe nk nl nm nn b">bash</code>在哪里。这可以通过以下命令完成:</p><pre class="kj kk kl km gt pb nn pc pd aw pe bi"><span id="09e5" class="ob ls it nn b gy pf pg l ph pi">$ which bash</span></pre><p id="a0d5" class="pw-post-body-paragraph mj mk it ml b mm nf ju mo mp ng jx mr ms nh mu mv mw ni my mz na nj nc nd ne im bi translated">由于我运行的是Linux，所以我的结果是<code class="fe nk nl nm nn b">user/bin/bash</code>。使用一个shebang，或<code class="fe nk nl nm nn b">#!</code>，我们可以把它放在我们的路径前面，以确保我们的文件是可执行的。这将是我们两个脚本中的第一行。</p><p id="bb5e" class="pw-post-body-paragraph mj mk it ml b mm nf ju mo mp ng jx mr ms nh mu mv mw ni my mz na nj nc nd ne im bi translated">我们将使用两个脚本来完成这项工作。第一个脚本将创建虚拟环境，并使用其名称(第一个参数)和Python版本(第二个参数)。)</p><p id="26c0" class="pw-post-body-paragraph mj mk it ml b mm nf ju mo mp ng jx mr ms nh mu mv mw ni my mz na nj nc nd ne im bi translated">虽然这只是一行代码，但我们将它放在一个不同的文件中，因为执行在环境完成后结束。这就是第二个文件出现的地方，它允许我们调用第一个脚本来创建环境，然后使用脚本的其余部分来创建Jupyter内核。</p><p id="6dce" class="pw-post-body-paragraph mj mk it ml b mm nf ju mo mp ng jx mr ms nh mu mv mw ni my mz na nj nc nd ne im bi translated">下面是第一个文件的样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pj pk l"/></div></figure><p id="d1ef" class="pw-post-body-paragraph mj mk it ml b mm nf ju mo mp ng jx mr ms nh mu mv mw ni my mz na nj nc nd ne im bi translated">如果您不熟悉<code class="fe nk nl nm nn b">bash</code>语法，<code class="fe nk nl nm nn b">$1</code>代表运行文件所需的第一个参数，而<code class="fe nk nl nm nn b">$2</code>代表第二个参数。</p><p id="8206" class="pw-post-body-paragraph mj mk it ml b mm nf ju mo mp ng jx mr ms nh mu mv mw ni my mz na nj nc nd ne im bi translated">对于第二个文件，我们将调用<code class="fe nk nl nm nn b">env1.sh</code>并继续内核创建过程。看起来是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pj pk l"/></div></figure><p id="1450" class="pw-post-body-paragraph mj mk it ml b mm nf ju mo mp ng jx mr ms nh mu mv mw ni my mz na nj nc nd ne im bi translated">首先，我们用需要的参数调用<code class="fe nk nl nm nn b">env1.sh</code>。这意味着两个文件将使用相同的参数。一旦完成，我们必须找到anaconda，这样我们就可以激活bash脚本中的环境。一旦完成，我们就可以激活环境，使用<code class="fe nk nl nm nn b">pip</code>安装<code class="fe nk nl nm nn b">ipykernel</code>，并将环境链接到与环境同名的内核。</p><h1 id="c041" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">运行脚本</h1><p id="0492" class="pw-post-body-paragraph mj mk it ml b mm mn ju mo mp mq jx mr ms mt mu mv mw mx my mz na nb nc nd ne im bi translated">为了简化本文(我假设您以前从未构建过命令行界面)，您可以使用以下代码运行脚本:</p><pre class="kj kk kl km gt pb nn pc pd aw pe bi"><span id="d975" class="ob ls it nn b gy pf pg l ph pi">$ bash scripts/env2.sh automated 3.8</span></pre><p id="5d4c" class="pw-post-body-paragraph mj mk it ml b mm nf ju mo mp ng jx mr ms nh mu mv mw ni my mz na nj nc nd ne im bi translated">这将使用Python版创建一个名为<code class="fe nk nl nm nn b">automated</code>的新<code class="fe nk nl nm nn b">conda</code>环境。此外，正如我们在<code class="fe nk nl nm nn b">env2.sh</code>中看到的，它还将创建一个Jupyter内核，也称为<code class="fe nk nl nm nn b">automated</code>，我们可以在启动Jupyter笔记本后立即开始使用它。</p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="10f1" class="lr ls it bd lt lu nw lw lx ly nx ma mb jz ny ka md kc nz kd mf kf oa kg mh mi bi translated">最后的想法</h1><p id="28b4" class="pw-post-body-paragraph mj mk it ml b mm mn ju mo mp mq jx mr ms mt mu mv mw mx my mz na nb nc nd ne im bi translated">虽然我试图保持简短，但这个项目还可以做一些改进。主要是，我们可以用必要的参数运行<code class="fe nk nl nm nn b">chmod</code>，这样文件就是可执行的。然而，如果你有兴趣在空闲时间从事这项工作，我将把它留给你。然而对我来说，运行这一行来自动化这个过程比过程本身要容易得多！</p><p id="5779" class="pw-post-body-paragraph mj mk it ml b mm nf ju mo mp ng jx mr ms nh mu mv mw ni my mz na nj nc nd ne im bi translated">我希望这是一个有用的有趣的项目，你可以从中学习。如果你有任何问题，请在下面留下。</p></div></div>    
</body>
</html>