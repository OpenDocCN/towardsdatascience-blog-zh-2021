<html>
<head>
<title>Baseball and Machine Learning Part 2: A Data Science Approach to 2021 Pitching Projections</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">棒球和机器学习第2部分:2021年投球预测的数据科学方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/baseball-and-machine-learning-part-2-a-data-science-approach-to-2021-pitching-projections-530dbfe6dcc4?source=collection_archive---------27-----------------------#2021-06-23">https://towardsdatascience.com/baseball-and-machine-learning-part-2-a-data-science-approach-to-2021-pitching-projections-530dbfe6dcc4?source=collection_archive---------27-----------------------#2021-06-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/b92e84cbabc4b1972ee89ecd85dc8404.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DY9NwEGFyFrMZ3FY"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">Jose Francisco Morales 在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><div class=""/><div class=""><h2 id="8ea0" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">看看投球的最佳预测</h2></div><p id="88d3" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在<a class="ae jd" rel="noopener" target="_blank" href="/baseball-and-machine-learning-a-data-science-approach-to-2021-hitting-projections-4d6eeed01ede">棒球和机器学习第一部分</a>中，我概述了我在3月份使用回归和分类算法组合构建2021年MLB击球预测的方法。然后我骗了你。可怕地。我答应在“一周左右”内完成我的项目哎呀。我想我应该在这个估计中包含一个置信区间。将近六个星期后，我终于分娩了。</p><p id="bc45" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从今年开始，我越来越意识到这是一个多么糟糕的赛季。2020年是现代历史上试图用作预测基础的最不正常的一年:60场比赛，比正常情况开始得晚得多，有一个收缩的上升期，由于COVID而频繁取消。哦，让我们不要忽视在疫情期间演奏的心理影响。现在，我们可以加上MLB打击投手在投球时使用异物的影响，这一影响尚未确定。不过，我还是做了预测，所以让我们来看看。</p><p id="016d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该方法与我在第1部分中阐述的方法基本相同——请查看完整的文章。我将在这里给出一个简要的概述，但我将主要关注我们看到的投球与击球的具体差异以及投球的结果。</p><h1 id="5f88" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">方法概述</h1><h2 id="8902" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">源数据</h2><p id="9fdf" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated"><a class="ae jd" href="https://www.fangraphs.com/leaders.aspx?pos=all&amp;stats=pit&amp;lg=all&amp;qual=y&amp;type=8&amp;season=2020&amp;month=0&amp;season1=2020&amp;ind=0" rel="noopener ugc nofollow" target="_blank">方块字</a>。我的起始数据集包含了他们报告的所有投球统计数据。我自己加了几个字段，都是手动编译的。这些包括联赛的指标变量(0代表AL，1代表NL)，球员是否在之前的淡季更换了球队和/或联赛，以及他们是否在赛季中更换了球队/联赛，考虑了交易/削减/签约。这个变量比你想象的更加主观。如果一个球员在一个赛季中出现在几个球队，我会查看他们在哪里打了最多的比赛。如果有人在美联效力了六年，在休赛期被国联球队签下，并为他们打了七场比赛，然后在这一年的剩余时间里被交易回美联，我不认为这是改变联赛。我最初包含了团队的指标变量，但是在特性工程阶段我删除了它们。</p><p id="bff4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我还为大约20个统计数据添加了滞后变量(即前一年统计数据的值)。这带来了一些问题，因为有相当多的球员在前几个赛季没有累积数据。我选择从数据集中删除这些案例，是基于这样一种假设，即包含这些变量的收益大于删除这些区域中的空行的损失。</p><p id="1ab9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我使用2016-2019年的数据来训练我的模型。对于先发投手，我使用了60局的最低投球局数，并删除了低于该阈值的所有数据点。对于替补投手，我设定了40局。</p><h2 id="d7ff" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated"><strong class="ak">数据准备</strong></h2><p id="f1ae" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">对于这个练习中最重要的部分，我在特性工程阶段从输入特性集中删除了几乎所有的Statcast字段。我更犹豫要不要为投球数据采取那一步。不过，我确实减少了，因为Fangraphs显示了来自多个来源的许多统计数据。我删除了Pitch f/x版本的stats(在Fangraphs上标记为“(pi)”)并保留了Statcast版本(标记为“(sc)”)。这些字段也是您会发现绝大多数缺失数据的字段。这是合乎逻辑的:不是每个投手都投每种类型的球，所以自然会有差距。我处理缺失数据的一般方法是，如果填充的数据少于60%,就删除一列，因为我认为填充这么多缺失值是没有用的。否则，我用两种方法填充空白:对于百分比，我用零填充空值，因为百分比是从包含未发生事件的其他字段中计算出来的。否则，我用每一列中的中值填充空值(按年份——在整个数据准备过程中我将年份分开)。</p><h2 id="e105" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">目标变量</h2><p id="c66a" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">我使用不同的模型预测了11个投球统计数据:投球局数(IP)，胜场数(W)，失球数(L)，救球数(SV)，吹救球数(BS)，持球数(HLD)，允许本垒打数(HRA)，三振数(K)，平均得分(ERA)，每局投手保送+安打数(WHIP)，以及Fangraphs的计算美元值(Dol)。对于训练数据，我使用了下一年的每个统计数据的结果。对于2019年的数据，目标变量是我缩放到162场的2020年数据。这不是一个理想的解决方案，但已经足够好了。</p><h2 id="28f8" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">模型</h2><p id="b4ac" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">我为这个练习构建了两种类型的模型。第一个使用XGBoost回归来产生上面列出的2021年统计数据的一组预测。我分几个步骤调优了这些模型:首先，我调优了最大树深度。接下来，我一起按树进行子抽样和列抽样。第三步是学习率，最后一步是估计数。我使用kfold交叉验证了十次折叠和平均绝对误差。这产生了坚实的整体结果，但遇到了机器学习的一个常见问题:它在预测中间值方面很好，但在确定离群值方面很糟糕。不幸的是，离群值是我们在预测棒球统计数据时最关心的。</p><p id="003b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了解决这个问题，我准备了第二组模型，这次使用XGBoost分类器。先发投手和替补投手天生产生非常不同的统计范围，所以我在这个练习中把他们分成两个数据集。我将各种统计数据分成不同的等级，并预测这些等级(例如，对于先发投手，0-49次三振是0级，50-179次是1级，180次以上是2级；第0层和第2层代表异常值)。因为我故意试图预测异常值，这些是严重不平衡的数据集。为了优化不平衡数据的模型，我对代表性不足的类使用了SMOTE过采样。和回归练习一样，我用kfold进行了十次交叉验证。不过，在这种情况下，我在交叉验证中使用了微平均F1分数，因为我在寻找精确度和召回率之间的最佳平衡。</p><p id="151e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我用分类模型预测异常值的能力来定义分类模型的成功。总的来说，精确度非常好:在标记为异常值的统计数据中，算法在正确选择它们方面做得非常好。回忆没有那么好，但在这方面投球比击球表现得更好。总结如下。这里有一些奇怪的东西。例如，救援投手投球局数以0%的准确率和召回率开始，以100%的准确率结束。这部分是因为中继局只有两层:少于55个IP是第0层，多于55个IP是第1层，第0层代表唯一的异常值。最初，算法预测每个人都在第1层。在应用SMOTE后，该模型使那些标记为第0层的100%正确，但仅识别出那些异常值的21.43%。</p><figure class="nb nc nd ne gt is gh gi paragraph-image"><div class="gh gi na"><img src="../Images/1467dfdf371d181ba5dbf49815e0d254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1346/format:webp/1*IXV-Mp4zC8HiGPiCdq80Iw.png"/></div></figure><figure class="nb nc nd ne gt is gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/24e22240a407759251cce83f9e4eab23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*JT2iqB-qrpxr06mPf-9DKw.png"/></div></figure><p id="1c63" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一旦所有模型都调优并最终确定，我就将结果组合起来构建我的预测:对于任何预测的中间层，我都使用回归结果。对于极端情况，我使用分类结果，将各层扩展到预期范围。</p></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><h1 id="28dd" class="lr ls jg bd lt lu nn lw lx ly no ma mb km np kn md kp nq kq mf ks nr kt mh mi bi translated">结果</h1><p id="bca9" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">让我们来看看每个统计数据。我将给出优化的超参数，然后向您展示哪些输入变量对模型的影响最大。汇总图来自SHAP包，它按照对模型影响从大到小的顺序显示输入要素。对于每个特性，都显示一个红到蓝的光谱，其中红色值较高，蓝色值较低。各个点从左到右排列，显示对模型的影响程度。因此，如果所有代表年龄的红点都在最左边，这意味着年龄越小，对模型的正面影响越大。</p><p id="f225" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">记住，输入的特征是针对上一季的，所以如果你看到IP预测IP，说明是某一年的IP预测下一年的IP。当您看到“Lag1”附加到一个stat上时，例如IP_Lag1，它表示两年前投的局数。一个注意事项:我注意到有两个标签没有正确传递。如果您看到“#NAME？”，表示“-WPA”(所有负赢概率加事件的总和)，以及“#NAME？. 1”表示“+WPA”(所有负获胜概率相加事件的总和)。我不会在这里浪费你的时间来定义所有的sabermetric统计数据，所以如果你看到一个你不认识的统计数据，你应该查阅关于Fangraphs 的<a class="ae jd" href="https://library.fangraphs.com/pitching/" rel="noopener ugc nofollow" target="_blank"> sabermetrics词汇表，或者，你知道，谷歌。</a></p><h2 id="cc38" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">投球局数</h2><pre class="nb nc nd ne gt ns nt nu nv aw nw bi"><span id="f64f" class="mj ls jg nt b gy nx ny l nz oa">Best hyperparameters:<br/>{'n_estimators': 400,<br/>  'learning_rate': 0.01,<br/>  'max_depth': 3,<br/>  'subsample': 0.8,<br/>  'colsample_bytree': 0.1}</span></pre><figure class="nb nc nd ne gt is gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/d508d3c95830d66d19d2e600bbd0b45d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*T0fMncMDP0aY89j1RKZ88g.png"/></div></figure><h2 id="d010" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">胜利(W)</h2><pre class="nb nc nd ne gt ns nt nu nv aw nw bi"><span id="e603" class="mj ls jg nt b gy nx ny l nz oa">Best hyperparameters:<br/>{'n_estimators': 300,<br/>  'learning_rate': 0.01,<br/>  'max_depth': 7,<br/>  'subsample': 0.5,<br/>  'colsample_bytree': 0.2}</span></pre><figure class="nb nc nd ne gt is gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/842e2f3dc04343212c0d2a18195a2177.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*1nosxE76JZwNz7P7x4MOMQ.png"/></div></figure><h2 id="4b8c" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">损失(L)</h2><pre class="nb nc nd ne gt ns nt nu nv aw nw bi"><span id="a113" class="mj ls jg nt b gy nx ny l nz oa">Best hyperparameters:<br/>{'n_estimators': 300,<br/>  'learning_rate': 0.01,<br/>  'max_depth': 6,<br/>  'subsample': 1.0,<br/>  'colsample_bytree': 0.1}</span></pre><figure class="nb nc nd ne gt is gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/67390ac540ba09ad82feba853ec7e8be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*C-vNuy47T3QtHx3Ta05uAQ.png"/></div></figure><h2 id="3261" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">保存(服务)</h2><pre class="nb nc nd ne gt ns nt nu nv aw nw bi"><span id="0dc8" class="mj ls jg nt b gy nx ny l nz oa">Best hyperparameters:<br/>{'n_estimators': 200,<br/>  'learning_rate': 0.01,<br/>  'max_depth': 6,<br/>  'subsample': 0.4,<br/>  'colsample_bytree': 0.3}</span></pre><figure class="nb nc nd ne gt is gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/4916da40ee3a0095c2eb710d6da416c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*b78CsAA-K_50k8zSCvOkwA.png"/></div></figure><h2 id="d19c" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">吹救(BS)</h2><pre class="nb nc nd ne gt ns nt nu nv aw nw bi"><span id="bf36" class="mj ls jg nt b gy nx ny l nz oa">Best hyperparameters:<br/>{'n_estimators': 200,<br/>  'learning_rate': 0.01,<br/>  'max_depth': 6,<br/>  'subsample': 0.4,<br/>  'colsample_bytree': 0.1}</span></pre><figure class="nb nc nd ne gt is gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/0adc981755b81cf4c86c0a0c256a6dbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*yovdDmg-Zkqy324K7jdJZQ.png"/></div></figure><h2 id="25c7" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">保留(HLD)</h2><pre class="nb nc nd ne gt ns nt nu nv aw nw bi"><span id="73a0" class="mj ls jg nt b gy nx ny l nz oa">Best hyperparameters:<br/>{'n_estimators': 200,<br/>  'learning_rate': 0.01,<br/>  'max_depth': 6,<br/>  'subsample': 0.6,<br/>  'colsample_bytree': 0.15}</span></pre><figure class="nb nc nd ne gt is gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/4820c7934c327f064e3a157a43b106e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*hxbkyVWtfUBgZZl-y_O1EA.png"/></div></figure><h2 id="1a14" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">删除线(K)</h2><pre class="nb nc nd ne gt ns nt nu nv aw nw bi"><span id="66e6" class="mj ls jg nt b gy nx ny l nz oa">Best hyperparameters:<br/>{'n_estimators': 500,<br/>  'learning_rate': 0.01,<br/>  'max_depth': 3,<br/>  'subsample': 0.4,<br/>  'colsample_bytree': 0.2}</span></pre><figure class="nb nc nd ne gt is gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/238a510a3e9a609c80eaabc6eef23aa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*VewmM6xYIMTeSezbhkhyvA.png"/></div></figure><h2 id="6e34" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">允许本垒打</h2><pre class="nb nc nd ne gt ns nt nu nv aw nw bi"><span id="8578" class="mj ls jg nt b gy nx ny l nz oa">Best hyperparameters:<br/>{'n_estimators': 300,<br/>  'learning_rate': 0.01,<br/>  'max_depth': 8,<br/>  'subsample': 0.8,<br/>  'colsample_bytree': 0.1}</span></pre><figure class="nb nc nd ne gt is gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/5dbcea7beedf5fab10855f66916899ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*TFlCs0xT5Jx0JE4Vf7sjuw.png"/></div></figure><h2 id="ac68" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">挣得运行平均值(ERA)</h2><pre class="nb nc nd ne gt ns nt nu nv aw nw bi"><span id="38f6" class="mj ls jg nt b gy nx ny l nz oa">Best hyperparameters:<br/>{'n_estimators': 500,<br/>  'learning_rate': 0.01,<br/>  'max_depth': 6,<br/>  'subsample': 0.4,<br/>  'colsample_bytree': 0.15}</span></pre><figure class="nb nc nd ne gt is gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/5f920455e49df70e35e93bb43d72a86c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*ekvo1O7skIKmsg6Bc-bObw.png"/></div></figure><h2 id="58d4" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">每局投球保送+安打数(鞭笞)</h2><pre class="nb nc nd ne gt ns nt nu nv aw nw bi"><span id="632e" class="mj ls jg nt b gy nx ny l nz oa">Best hyperparameters:<br/>{'n_estimators': 500,<br/>  'learning_rate': 0.01,<br/>  'max_depth': 7,<br/>  'subsample': 0.6,<br/>  'colsample_bytree': 0.2}</span></pre><figure class="nb nc nd ne gt is gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/6bf11bb9a7087df552386912c531a9a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*e-w6BeODnh1SsD-nudbAIA.png"/></div></figure><h2 id="ff9c" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">美元价值</h2><pre class="nb nc nd ne gt ns nt nu nv aw nw bi"><span id="6147" class="mj ls jg nt b gy nx ny l nz oa">Best hyperparameters:<br/>{'n_estimators': 300,<br/>  'learning_rate': 0.01,<br/>  'max_depth': 4,<br/>  'subsample': 0.5,<br/>  'colsample_bytree': 0.15}</span></pre><figure class="nb nc nd ne gt is gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/d1e72a91a2b5366c69179297350b0698.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*yrOi64gulvQbtvc802GEMg.png"/></div></figure><h1 id="438f" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">外卖食品</h1><p id="e8bc" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">这些结果对我来说很有趣。首先映入我眼帘的是明显缺少年龄这一因素。在我的<a class="ae jd" rel="noopener" target="_blank" href="/baseball-and-machine-learning-a-data-science-approach-to-2021-hitting-projections-4d6eeed01ede">击球文章</a>中，你可以看到年龄是大多数击球统计的头号预测因素，而在投球方面却无处可寻。</p><p id="9108" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">另一件让我特别感兴趣的事情是，一些整体价值指标扮演了多么突出的角色——尤其是尖牙尖牙的美元价值。奇怪的是，两年前的美元价值(Dol_Lag1)是最具预测性的因素。它是IP、W和K的头号预测因子，在其他几个统计数据中也占有显著地位。我还在消化这个结果。很耐人寻味。</p><p id="b5d7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">K/9+是ERA和WHIP比率的强预测因子。我感觉好像专家们不久前就开始关注这个问题了，但在实践中看到这一点还是很有趣的。K/BB+也表现强劲。那一个最近几年在专家中非常流行。</p><p id="81ed" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我怀疑在投球局数类别中有一些混淆的变数。投球局数、先发投手IP和中继投手IP都在这些模型中出现，但它们之间有很大的相关性，所以算法只能在每个决策树中选取一个。当你把所有的树加起来得到集合模型时，这意味着一个或多个局的投球类别可能在最终结果中被缩短。</p><h1 id="2c71" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">投影输出</h1><p id="5d1a" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">【2022注:在2022年4月评估这些结果时，我发现了一个重大错误。我的分数是正确的，但是蝙蝠的分数是错误的。更多详情请见<a class="ae jd" href="https://johnpette.medium.com/2022-machine-learning-baseball-projections-a-look-back-at-things-to-come-b6fce211bc9d" rel="noopener">2022文章</a>。]</p><p id="220c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一旦我有了完整的计划，我就用我开发的评分公式计算分数。然后我用同样的公式给德里克·卡蒂的<a class="ae jd" href="https://www.fangraphs.com/projections.aspx?pos=all&amp;stats=bat&amp;type=thebat" rel="noopener ugc nofollow" target="_blank">底部预测</a>打分，这样我就能看到最大的差异在哪里。我只看了那些有60局或更多预测局数的球员——比较那些没有被预测一个完整赛季的人的预测是没有用的。首先，我们有一些球员，我预测他们会比棒球手表现得更好:</p><figure class="nb nc nd ne gt is gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/8c1a4451eb6a0d4a37e879ca3a9c39da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*fzUiKQu7YeJjboiLVeAHwQ.png"/></div></figure><p id="d4a9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我将借此机会重申，这是进行这种特定练习的最愚蠢的一年，COVID年被纳入了训练数据，MLB改变了球，大量的受伤(其中一些与上面的miiiight有关)，现在，MLB打击使用粘性物质。上面的名字已经有一大块受伤了。一些人失去了他们最初的工作(我们永远不会知道大卫·普莱斯的预测会如何发展)。我们还有很多赛季，但其中一些电话看起来真的很好(伯恩斯，默斯格罗夫)，其他人看起来像巨大的失误(邦迪，卡斯蒂洛)。</p><p id="cc57" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，让我们看看模型预测的产量比实际产量差的地方:</p><figure class="nb nc nd ne gt is gh gi paragraph-image"><div class="gh gi od"><img src="../Images/675c598b3a6d0142937865f1fa4ba735.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/1*R3VGSO4euUmUsk7_niGKnA.png"/></div></figure><p id="6e7d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这批有意思。到本赛季的这个时候，算法似乎已经击中了比他们错过的悲观主义团队更多的东西。杰克逊、布鲁贝克、维特格伦、威廉姆斯和巴西特都是这份名单上的常客。其他10个与我的预测一致得多(尽管我们可以暂时放过谢恩·格林，因为他失业的时间太长了)。</p><h2 id="2ec7" class="mj ls jg bd lt mk ml dn lx mm mn dp mb le mo mp md li mq mr mf lm ms mt mh mu bi translated">包裹</h2><p id="a186" class="pw-post-body-paragraph kv kw jg kx b ky mv kh la lb mw kk ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">伟大的投球探索到此结束。我希望它以某种方式为你打开了齿轮。</p><p id="59cf" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我很想听听你的意见。你觉得我的方法怎么样？在未来的迭代中，我应该做哪些不同的事情？我在<a class="ae jd" href="https://github.com/jpette/baseball_projections_2021" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上发布我的代码和数据文件。</p></div></div>    
</body>
</html>