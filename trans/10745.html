<html>
<head>
<title>Parametric Tests — the t-test</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">参数检验——t检验</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/parametric-tests-the-t-test-c9b17faabfb0?source=collection_archive---------0-----------------------#2021-10-17">https://towardsdatascience.com/parametric-tests-the-t-test-c9b17faabfb0?source=collection_archive---------0-----------------------#2021-10-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="2c9d" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">假设检验</h2><div class=""/><div class=""><h2 id="3815" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">t测试的一站式商店——从理论到python实现</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/31102e869f8792e58d1704bc410c3abe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B9qRdT2QTFanxIpa"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated"><a class="ae le" href="https://unsplash.com/@grstocks?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> GR Stocks </a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="537d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><a class="ae le" href="https://medium.com/@shubhangihora/understanding-hypothesis-testing-65f9b3e9ab1f" rel="noopener">在我之前的文章</a>中，我们讨论了假设检验的内容、方法和原因，并简要介绍了统计检验以及它们在帮助我们确定统计显著性方面的作用。在这篇文章和接下来的几篇文章中，我们将深入探讨统计测试——不同类型的测试、测试本身以及哪种测试应该用于哪种情况。</p><p id="ca4d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如前所述，统计测试是<strong class="lh ja">统计方法，帮助我们拒绝或不拒绝我们的零假设</strong>。它们基于概率分布，可以是单尾或双尾的，取决于我们选择的假设。</p><p id="19e6" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">统计检验还有其他不同的方式，其中之一是基于他们对数据遵循的概率分布的假设。</p><ul class=""><li id="c701" class="mb mc iq lh b li lj ll lm lo md ls me lw mf ma mg mh mi mj bi translated"><strong class="lh ja">参数测试</strong>是那些统计测试，其中<strong class="lh ja">假设数据近似遵循正态分布</strong>，以及其他假设(示例包括z测试、t测试、ANOVA)。<em class="mk">重要提示—假设总体数据遵循正态分布，而不是您正在处理的样本数据。</em></li><li id="f346" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma mg mh mi mj bi translated"><strong class="lh ja">非参数检验</strong>是那些<strong class="lh ja">没有对数据</strong>的分布做任何假设的统计检验，因此也被称为无分布检验(例子包括卡方检验、曼-惠特尼U检验)。非参数检验基于不同数据点的等级。</li></ul><p id="de6d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">每一个参数测试都有一个等价的非参数测试，这意味着对于你遇到的每一种类型的问题，在这两个类别中都会有一个测试来帮助你。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mq"><img src="../Images/6679f7f7766fdd5db2d977f38150d052.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fe9RXjJ0uzxWsXWCyzTdcA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="8a96" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">然而，选择哪一套测试适合手头的问题并不是非黑即白的。如果您的数据不符合正态分布，非参数检验不一定是正确的选择。该决定取决于其他因素，如样本大小、您所拥有的数据类型、什么样的集中趋势度量最能代表数据等。如果样本量足够大，某些参数测试在非正态数据上表现很好，例如，如果样本量大于20，并且数据不是正态的，那么单样本t检验仍然会对您有益。但是，如果中位数更好地代表了您的数据，那么您最好使用非参数检验。</p><p id="c8b1" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在本文中，我们将关注参数测试——尤其是t-测试。</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><blockquote class="my mz na"><p id="6445" class="lf lg mk lh b li lj ka lk ll lm kd ln nb lp lq lr nc lt lu lv nd lx ly lz ma ij bi translated">参数检验是指假设样本数据来自一个服从概率分布(正态分布)的总体，并带有一组固定的参数。</p></blockquote><p id="68b5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">常见的参数检验侧重于分析和比较数据的均值或方差。</p><p id="c156" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">平均值是描述数据集中趋势的最常用度量，但是它也受到异常值的严重影响。因此，分析您的数据并确定平均值是否是表示数据的最佳方式非常重要。如果是，那么参数测试是正确的方法！如果不是，并且中位数更好地代表了您的数据，那么非参数检验可能是更好的选择。</p><p id="3552" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如上所述，参数测试有几个数据需要满足的假设:</p><ol class=""><li id="15c9" class="mb mc iq lh b li lj ll lm lo md ls me lw mf ma ne mh mi mj bi translated"><strong class="lh ja">正态性</strong> —样本数据来自近似服从正态分布的总体</li><li id="5c67" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma ne mh mi mj bi translated"><strong class="lh ja">方差齐性</strong> —样本数据来自具有相同方差的总体</li><li id="171a" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma ne mh mi mj bi translated"><strong class="lh ja">独立性</strong> —样本数据由独立的观察值组成，并且是随机抽样的</li><li id="041f" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma ne mh mi mj bi translated"><strong class="lh ja">异常值</strong> —样本数据不包含任何极端异常值</li></ol><h1 id="ae0f" class="nf ng iq bd nh ni nj nk nl nm nn no np kf nq kg nr ki ns kj nt kl nu km nv nw bi translated">自由度。</h1><p id="22c9" class="pw-post-body-paragraph lf lg iq lh b li nx ka lk ll ny kd ln lo nz lq lr ls oa lu lv lw ob ly lz ma ij bi translated">在我们进入不同的统计测试之前，有一个重要的概念需要讨论——自由度。</p><blockquote class="my mz na"><p id="8641" class="lf lg mk lh b li lj ka lk ll lm kd ln nb lp lq lr nc lt lu lv nd lx ly lz ma ij bi translated">自由度本质上是在测量统计参数时一组数据中可能变化的独立值的数量。</p></blockquote><p id="6621" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">假设你喜欢每周六出门，你刚买了四套新衣服。你想每个周末都穿一套新衣服。在第一个星期六，四套衣服都没穿过，所以你可以挑任何一套。下周六你可以从三个中挑选，第三个周六你可以从两个中挑选。然而，在这个月的最后一个周六，你只剩下一套衣服，不管你想不想穿，你都必须穿，而在其他周六，你可以选择。</p><p id="20ae" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">所以基本上，你有4–1 = 3个周六的时间自由选择服装——你的服装可以变化。</p><p id="69a5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这就是自由度背后的思想。</p><p id="ce9e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">关于数值和平均值，数值的总和必须等于样本量乘以平均值，即总和= n *平均值，其中n是样本量。因此，如果样本大小为20，平均值为40，则样本中所有观察值的总和必须为800。前19个值可以是任何值，但是第20个值必须确保所有值的总和为800，因此它没有变化的自由。因此自由度是19。</p><p id="1be5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">自由度的公式是样本大小——您测量的参数数量。</p><h1 id="a3fd" class="nf ng iq bd nh ni nj nk nl nm nn no np kf nq kg nr ki ns kj nt kl nu km nv nw bi translated">比较意味着。</h1><p id="a221" class="pw-post-body-paragraph lf lg iq lh b li nx ka lk ll ny kd ln lo nz lq lr ls oa lu lv lw ob ly lz ma ij bi translated">如果你想<strong class="lh ja">比较两组的平均值</strong>，那么可以选择的正确测试是<strong class="lh ja"> z测试和t测试。</strong></p><p id="89dc" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">单样本(单样本z检验或单样本t检验):</strong>一组为样本，二组为总体。所以你基本上是在比较一个样本和总体的标准值。我们基本上是想看看样本是否来自总体，即它的行为是否与总体不同。</p><p id="c0b8" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这方面的一个例子是我们在上一篇文章中讨论的<a class="ae le" href="https://medium.com/@shubhangihora/understanding-hypothesis-testing-65f9b3e9ab1f" rel="noopener">——已知去看牙医的患者的平均年龄是18岁，但我们假设它可能比这个年龄更大。样本必须从总体中随机选取，并且观察值必须相互独立。</a></p><p id="532e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">双样本(双样本z检验和双样本t检验):</strong>两组都是单独的样本。在单样本检验的情况下，两个样本都必须从总体中随机选取，并且观测值必须相互独立。</p><p id="92a3" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">当涉及两个变量时，使用双样本检验。例如，比较两性在购物网站上的平均花费。一个样本是女性顾客，第二个样本是男性顾客。因为要比较平均值，所以测试中涉及的变量之一必须是数字变量(在购物网站上花费的钱是数字变量)。</p><p id="3ce3" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">重要提示:不要把单样本和双样本与单尾和双尾混淆！前者与被比较的样本数量有关，后者与你的替代假设是否具有方向性有关。可以进行单样本双尾检验。</p><p id="7316" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">但是，我们如何在z测试和t测试之间做出选择呢？通过观察样本大小和人口方差。</p><ul class=""><li id="f1f2" class="mb mc iq lh b li lj ll lm lo md ls me lw mf ma mg mh mi mj bi translated">如果总体方差已知且样本量较大(大于或等于30)，我们选择z检验</li><li id="8bc1" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma mg mh mi mj bi translated">如果总体方差已知且样本量较小(小于30)，我们可以进行z检验或t检验</li><li id="a09d" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma mg mh mi mj bi translated">如果总体方差未知且样本量较小，我们选择t检验</li><li id="44cf" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma mg mh mi mj bi translated">如果总体方差未知并且样本量很大，我们选择t检验</li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oc"><img src="../Images/e672533696c86dad03d61fde28a6f069.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lwI7FxBbG931lDbSRkPnRw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><h1 id="e812" class="nf ng iq bd nh ni nj nk nl nm nn no np kf nq kg nr ki ns kj nt kl nu km nv nw bi translated">t检验。</h1><p id="58e6" class="pw-post-body-paragraph lf lg iq lh b li nx ka lk ll ny kd ln lo nz lq lr ls oa lu lv lw ob ly lz ma ij bi translated">如上所述，t-检验与z-检验非常相似，除非它适用于较小的样本，并且不需要知道总体方差。</p><blockquote class="my mz na"><p id="b1e5" class="lf lg mk lh b li lj ka lk ll lm kd ln nb lp lq lr nc lt lu lv nd lx ly lz ma ij bi translated">t检验基于t分布，t分布是一个像正态分布一样的钟形曲线，但是尾部更重。</p></blockquote><p id="8f5f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">随着样本量的增加，自由度也增加，t分布变得类似于正态分布。它在平均值附近变得不那么偏斜和紧密(较轻的尾部)。为什么？我们一会儿就知道了。</p><p id="cd09" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">有三种类型的t检验。上面已经介绍了两个——<strong class="lh ja">单样本</strong>和<strong class="lh ja">双样本</strong>。这两种都属于<strong class="lh ja">‘不成对t检验’</strong>的范畴，所以第三种t检验是<strong class="lh ja">‘成对t检验’</strong>。</p><p id="f1f0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">成对和不成对的概念与样本有关。样品是一样的还是两个不同的样品？我们是在两个不同的组中监控一个变量还是在同一个组中？如果样本相同，则t检验应该配对，否则不配对。</p><p id="6139" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">例如，假设您想测试某种药物是否会提高女性的孕酮水平。</p><p id="5c19" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果您拥有的数据是一组女性服药前的孕酮水平和同一组女性服药后的孕酮水平，那么您将进行配对t检验，因为样本是相同的。</p><p id="f6e6" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果你的数据是两组不同年龄组的妇女服药后的黄体酮水平，那么你将进行双样本不成对t检验，因为有两个不同的样本。</p><p id="a048" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">每个统计检验都有一个检验统计量，它帮助我们计算p值，然后决定是否拒绝零假设。在t检验的情况下，检验统计量称为t统计量。计算t统计量的公式根据您正在执行的t检验而有所不同，所以让我们仔细看看它们。</p><p id="c8e6" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">下面所有例子中用到的代码和数据都可以在</strong> <a class="ae le" href="https://github.com/shubhangihora/python-articles" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja">这里</strong> </a> <strong class="lh ja">找到。</strong></p><h2 id="4f44" class="od ng iq bd nh oe of dn nl og oh dp np lo oi oj nr ls ok ol nt lw om on nv iw bi translated">单样本t检验。</h2><p id="5722" class="pw-post-body-paragraph lf lg iq lh b li nx ka lk ll ny kd ln lo nz lq lr ls oa lu lv lw ob ly lz ma ij bi translated">印度女性的平均身高被记录为158.5cm。今天印度女性的平均身高是否大于158.5cm？</p><p id="badf" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为了验证这个假设，我询问了25名女性的身高。</p><p id="a5ca" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我的假设是—</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oo"><img src="../Images/9e4604375f4af486f49697318ed0d44d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jZBUqQGcIAhKTYGdrgKGAQ.png"/></div></div></figure><ul class=""><li id="8409" class="mb mc iq lh b li lj ll lm lo md ls me lw mf ma mg mh mi mj bi translated">显著性水平为0.05。</li><li id="8076" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma mg mh mi mj bi translated">样本平均值为162厘米，样本标准偏差为2.4厘米</li><li id="29b5" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma mg mh mi mj bi translated">由于样本大小为25，自由度将为24(25–1)。</li><li id="750c" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma mg mh mi mj bi translated">因为我将样本平均值与总体平均值(标准值)进行比较，所以这将是一个单样本测试。</li><li id="efe0" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma mg mh mi mj bi translated">由于我的假设有一个方向——样本平均高度大于总体平均高度——这将是一个单尾检验。</li></ul><p id="bd63" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">计算t统计量的公式为:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi op"><img src="../Images/72296571ab93edd7c67fd5a930a4b8df.png" data-original-src="https://miro.medium.com/v2/resize:fit:546/format:webp/1*qaTvvQ6vx7NY35ubnpi7yA.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="dc8d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">所以我们的t统计量是</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/cc5e8f1bd24d35edb2e3d1fb15ef6a43.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/1*-AVhJ3dosM4nNxY7nbY1mA.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="605c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">接下来，我们需要在t统计值的表格中查找t分布的临界值，其中α为0.05，自由度为24 <a class="ae le" href="https://data-flair.training/blogs/wp-content/uploads/sites/2/2018/10/T-table.png" rel="noopener ugc nofollow" target="_blank">。我们场景的临界值是1.711。我们的t统计量大于临界值，所以可以拒绝零假设，得出印度女性平均身高大于158.5 cm的结论！</a></p><p id="4369" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">虽然最好在假设检验中计算p值以拒绝或不拒绝零假设，但计算t统计的p值的公式有点棘手。在手动执行假设检验时，您可以使用t分布表值，或者只使用临界值来拒绝或不拒绝零假设。否则，使用计算器或python函数将有助于您获得p值。让我们看看如何！</p><p id="8431" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们首先将csv读入数据帧:</p><pre class="kp kq kr ks gt or os ot ou aw ov bi"><span id="2216" class="od ng iq os b gy ow ox l oy oz">import pandas as pd<br/>data = pd.read_csv("one-sample-t.csv")<br/>data.head()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/53cbcf5c436bd01eaee7991bcec2e913.png" data-original-src="https://miro.medium.com/v2/resize:fit:338/format:webp/1*PKypxXjcNpwlpDdwNsHsYw.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="8edf" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们有两栏——年龄和身高。对于这个单样本t检验，我们只需要身高，因为我们要将这个样本的平均身高与总体平均身高(158.5厘米)进行比较</p><p id="3e21" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们检查高度栏的平均值和标准偏差:</p><pre class="kp kq kr ks gt or os ot ou aw ov bi"><span id="247e" class="od ng iq os b gy ow ox l oy oz">data.height.mean()<br/>&gt;&gt; 162.053526834564</span><span id="7ad6" class="od ng iq os b gy pb ox l oy oz">data.height.std()<br/>&gt;&gt; 2.4128517286126048</span></pre><p id="fbbb" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">t检验的假设表明样本数据必须来自正态分布。我们可以通过使用概率图(也称为QQ图—分位数-分位数图)来检查身高列是否呈正态分布。简而言之，概率图是一种检查数据集是否遵循特定分布的图形方法。它实际上是两个数据集的图，一个是要检查其分布的数据，另一个是来自该分布本身的数据。在我们的例子中，一组数据将是高度列，分布将是正态分布。</p><pre class="kp kq kr ks gt or os ot ou aw ov bi"><span id="81dc" class="od ng iq os b gy ow ox l oy oz">import pylab<br/>stats.probplot(data.height, dist="norm", plot=pylab)<br/>pylab.show()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/485efc9390943c9cacf815d241ec4b45.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*i3UMtqd6ppCoTuXCUoR-6w.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="4811" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">红线代表正态分布，蓝点代表身高栏的数据。上图证实了身高列来自/遵循正态分布，因为身高数据点遵循正态分布线的路径。</p><p id="a62d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在，我们将使用scipy的stats方法执行单样本t检验。我们需要向它传递我们的数据和人口意味着:</p><pre class="kp kq kr ks gt or os ot ou aw ov bi"><span id="e742" class="od ng iq os b gy ow ox l oy oz">stats.ttest_1samp(data.height,popmean=158.5)<br/>&gt;&gt; Ttest_1sampResult(statistic=7.363748862859639, pvalue=1.32483697812078e-07)</span></pre><p id="6dda" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">p值小的离谱！所以我们可以拒绝零假设。</p><h2 id="8fa5" class="od ng iq bd nh oe of dn nl og oh dp np lo oi oj nr ls ok ol nt lw om on nv iw bi translated">双样本t检验。</h2><p id="3528" class="pw-post-body-paragraph lf lg iq lh b li nx ka lk ll ny kd ln lo nz lq lr ls oa lu lv lw ob ly lz ma ij bi translated">印度女性的年龄和身高有关系吗？</p><p id="71fa" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为了验证这一假设，我询问了50名女性的年龄——25名女性年龄在27至30岁之间(A组)，25名女性年龄在37至40岁之间(B组)。</p><ul class=""><li id="1387" class="mb mc iq lh b li lj ll lm lo md ls me lw mf ma mg mh mi mj bi translated">我的假设是—</li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pd"><img src="../Images/1d877b26643209c3a12acd6ab5086eb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hFnwQW8s7ikUGIO-DVuucg.png"/></div></div></figure><ul class=""><li id="8323" class="mb mc iq lh b li lj ll lm lo md ls me lw mf ma mg mh mi mj bi translated">显著性水平为0.05。</li><li id="62b7" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma mg mh mi mj bi translated">A组的样本均值和标准差分别为162厘米和2.4厘米。</li><li id="fdb0" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma mg mh mi mj bi translated">B组的样本均值和标准差分别为158.6厘米和3.4厘米。</li><li id="8571" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma mg mh mi mj bi translated">因为我在比较两个样本的平均值，所以这将是一个双样本测试。</li><li id="693a" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma mg mh mi mj bi translated">由于我的假设是无方向性的，这将是一个双尾检验。</li></ul><p id="8ff2" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">前面提到过，参数检验假设方差同质，即两个样本的方差应该相同。在这里提到的例子中，方差肯定是不一样的——A组的标准差是2.4厘米，而b组的标准差是3.4厘米。这是否意味着我们不能执行双样本t检验？不，不是的！令人欣慰的是，t检验有一个变体，允许不同的方差，它被称为<strong class="lh ja">韦尔奇的t检验</strong>。</p><p id="afa1" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">当两个样本的方差相等时，用于计算t统计量的分母称为混合方差。如果两组的样本量不同，则公式为:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/0040774f262929c70c4312845c6237de.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/1*FhvyWMvIg82r85fmCesNgA.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="bb12" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果两组的样本量相等，则公式如下:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/a0543a48a43f989bd9891d6d5a9e3f02.png" data-original-src="https://miro.medium.com/v2/resize:fit:294/format:webp/1*fxN021eR19Eo_UGbnGMSew.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="b70b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">它找出两组的共同方差，用于t统计公式。t统计量的公式为:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/d1fa5e1c7ea997708084afb92e552471.png" data-original-src="https://miro.medium.com/v2/resize:fit:428/format:webp/1*FW_J9KS13d3mQIBqLAIE8A.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="9cef" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">然而，当两个样本的方差不相等时，分母比较两个方差，计算t统计量的公式为:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/22f81c62eb09e594a6e0d6750130eb69.png" data-original-src="https://miro.medium.com/v2/resize:fit:428/format:webp/1*7zfuTARQu3JbztOSHObbKA.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="342d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">此外，自由度的计算在两种测试之间也不同。如果当前示例中两组的方差相等，自由度将为48(25+25–2；我们减去2，因为我们测量两个参数——每个样本的平均值)。</p><p id="421e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在Welch t-test的情况下，自由度是分数，总是小于学生t-test的自由度，坦白地说，计算起来有点复杂。</p><p id="2aad" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">由于我们的方差不相等，我们将执行韦尔奇的t检验。</p><p id="ed32" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">所以我们的t统计量是:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/36c67f2b9bdd0cfde8415f1f08d3a7fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:476/format:webp/1*Sdm0YT3cbLI2VVrD1wkvCg.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="f4cd" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们也用python来做这件事。</p><pre class="kp kq kr ks gt or os ot ou aw ov bi"><span id="05bd" class="od ng iq os b gy ow ox l oy oz">import pandas as pd<br/>df_a = pd.read_csv("one-sample-t.csv") # group A<br/>df_b = pd.read_csv("two-sample-t.csv") # group B</span></pre><p id="a4b1" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">A组与我们用于单样本t检验的csv相同，因此我们已经知道它的均值和标准差。让我们对b组进行同样的检查。</p><pre class="kp kq kr ks gt or os ot ou aw ov bi"><span id="52a1" class="od ng iq os b gy ow ox l oy oz">df_b.height.mean()<br/>&gt;&gt; 158.60704061997612</span><span id="6ced" class="od ng iq os b gy pb ox l oy oz">df_b.height.std()<br/>&gt;&gt; 3.42443022417948</span></pre><p id="1e56" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在我们进行t检验！要执行Welch的t-test，我们只需将equal_var参数作为False传递。默认情况下，这是真的，所以如果我们进行学生的t检验，我们根本不需要通过它。</p><pre class="kp kq kr ks gt or os ot ou aw ov bi"><span id="532a" class="od ng iq os b gy ow ox l oy oz">stats.ttest_ind(df_a.height, df_b.height, equal_var=False)<br/>&gt;&gt; Ttest_indResult(statistic=4.113633648976651, pvalue=0.00017195968508873518)</span></pre><p id="32df" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">p值远小于0.05，因此我们可以拒绝零假设。</p><h2 id="c4ce" class="od ng iq bd nh oe of dn nl og oh dp np lo oi oj nr ls ok ol nt lw om on nv iw bi translated">配对t检验。</h2><p id="85b1" class="pw-post-body-paragraph lf lg iq lh b li nx ka lk ll ny kd ln lo nz lq lr ls oa lu lv lw ob ly lz ma ij bi translated">营养饮料xyz会增加女性身高吗？</p><p id="2964" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为了验证这一假设，我测量了25名女性在开始喝营养饮料前和结束后的身高。</p><ul class=""><li id="d278" class="mb mc iq lh b li lj ll lm lo md ls me lw mf ma mg mh mi mj bi translated">我的假设是-</li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pi"><img src="../Images/ad6495febd0f396b316cddcc2fa929ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4COzmnIqdNn3E2QO0sRcsw.png"/></div></div></figure><ul class=""><li id="f7a0" class="mb mc iq lh b li lj ll lm lo md ls me lw mf ma mg mh mi mj bi translated">显著性水平为0.05。</li><li id="36b9" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma mg mh mi mj bi translated">女性饮酒前的样本均值和标准差分别为162厘米和2.4厘米。</li><li id="b2dc" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma mg mh mi mj bi translated">女性饮酒后的样本均值和标准差分别为167厘米和3.4厘米。</li><li id="a803" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma mg mh mi mj bi translated">由于样本大小为25，自由度将为24(25–1)。</li><li id="011d" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma mg mh mi mj bi translated">因为我比较的是同一样本的平均值，但中间有干预，所以这将是一个配对t检验。</li><li id="b97e" class="mb mc iq lh b li ml ll mm lo mn ls mo lw mp ma mg mh mi mj bi translated">因为我的假设是有方向性的，所以这将是一个单尾检验。</li></ul><p id="5c04" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">有趣的事实—配对t检验计算两组数据(相同样本，之前和之后)中配对观察值之间的差异，然后使用平均差异和平均标准偏差执行单样本t检验。</p><p id="6efe" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们直接用python实现它:</p><p id="15cd" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">将csv读入数据帧。</p><pre class="kp kq kr ks gt or os ot ou aw ov bi"><span id="ed09" class="od ng iq os b gy ow ox l oy oz">import pandas as pd<br/>data = pd.read_csv("paired-t.csv")<br/>data.head()</span></pre><p id="f5e3" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">使用describe()方法检查before和after列的平均值和标准差。</p><pre class="kp kq kr ks gt or os ot ou aw ov bi"><span id="37c1" class="od ng iq os b gy ow ox l oy oz">data.describe()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pj"><img src="../Images/bbc707ee9720060bdcaf512bc04cc2c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EsDLnxjSGVUcgQPnhtGeRA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="16c1" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">使用scipy stat的ttest_rel方法执行配对t检验！我们在替代参数中传递“更大”,因为我们的替代假设是营养饮料后的平均身高将大于饮料前的身高。</p><pre class="kp kq kr ks gt or os ot ou aw ov bi"><span id="fc1e" class="od ng iq os b gy ow ox l oy oz">stats.ttest_rel(data.height_before, data.height_after, alternative='greater')<br/>&gt;&gt; Ttest_relResult(statistic=-1.9094338173992416, pvalue=0.9658844528005113)</span></pre><p id="44a8" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">p值大于0.05，因此我们不能拒绝零假设。</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><p id="9763" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在我们已经看到了所有类型的t检验及其计算t统计量的公式，我们可以理解为什么随着样本量的增加，t分布变得类似于正态分布。所有不同的t检验都涉及样本的标准差/方差。这只是对总体方差的估计，因为它是未知的。由于t-检验中的假设是样本数据来自服从正态分布的总体，因此随着样本大小的增加以及自由度的增加，方差的这种估计实际上是正确的(即，是总体的方差)的可能性更大。此外，样本量越大，就越接近总体。由于总体是正态分布的，所以具有更高自由度的更大样本量的t分布也类似于正态分布是有意义的。</p></div></div>    
</body>
</html>