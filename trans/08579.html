<html>
<head>
<title>Rolling on the Futures Curve — Continuous Futures Prices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在期货曲线上滚动——连续期货价格</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/rolling-on-the-futures-curve-continuous-futures-prices-99382ee4bb4e?source=collection_archive---------9-----------------------#2021-08-08">https://towardsdatascience.com/rolling-on-the-futures-curve-continuous-futures-prices-99382ee4bb4e?source=collection_archive---------9-----------------------#2021-08-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fa01" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Python创建自定义的连续期货价格时间序列，用于回溯测试和交易。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e47a1adb08c1c1da212120571acc800a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9RzH_OHl3tBq71cZ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@m_b_m?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> M. B. M. </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="3482" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">放弃</h1><p id="7854" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated"><em class="mu">本文不提供投资建议，其中的任何内容都不应被理解为投资建议。它为那些不需要建议就能做出投资决定的个人提供信息和教育。</em></p><p id="5b28" class="pw-post-body-paragraph ly lz it ma b mb mv ju md me mw jx mg mh mx mj mk ml my mn mo mp mz mr ms mt im bi translated"><em class="mu">本文包含的信息不是也不应被解读为购买或出售任何证券的要约或建议，或征求购买或出售任何证券的要约或建议。它不是，也不应该被视为使用任何特定投资策略的建议。</em></p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="428f" class="pw-post-body-paragraph ly lz it ma b mb mv ju md me mw jx mg mh mx mj mk ml my mn mo mp mz mr ms mt im bi translated">在今天的资本市场上，期货提供了一种最具资本效率的交易各种资产类别的方式。它们的用途广泛，从对冲未来汇率风险，到直接持有大宗商品头寸，再到做空股指波动。</p><p id="e376" class="pw-post-body-paragraph ly lz it ma b mb mv ju md me mw jx mg mh mx mj mk ml my mn mo mp mz mr ms mt im bi translated">从历史上看，尽管期货的资本效率非常高，而且相对于名义保证金而言，要求的保证金相对较低，但这些名义保证金的绝对规模意味着它们不适合账户规模较小的散户投资者。</p><p id="c529" class="pw-post-body-paragraph ly lz it ma b mb mv ju md me mw jx mg mh mx mj mk ml my mn mo mp mz mr ms mt im bi translated">近年来，多个小型期货合约(小型和微型)的开发和上市极大地改变了这一局面。股票指数、波动性、石油、玉米和其他大宗商品甚至比特币的期货合约规模较小。这使得散户投资者对这一资产类别很感兴趣，尤其是从系统投资的角度来看。</p><div class="na nb gp gr nc nd"><a href="https://www.investopedia.com/terms/f/futures.asp" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd iu gy z fp ni fr fs nj fu fw is bi translated">期货</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">期货是一种衍生金融合约，它使双方有义务在预定的未来交易一项资产…</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">www.investopedia.com</p></div></div><div class="nm l"><div class="nn l no np nq nm nr ks nd"/></div></div></a></div><h1 id="8e32" class="lg lh it bd li lj ns ll lm ln nt lp lq jz nu ka ls kc nv kd lu kf nw kg lw lx bi translated">挑战</h1><p id="c125" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">系统地回测和交易期货策略有其自身的挑战，主要的困难是从基础期货创建一个连续的时间序列。不同到期的合约很少以相同的价格交易，如果它们的价格只是缝合在一起，就会导致时间序列的跳跃。</p><p id="cc08" class="pw-post-body-paragraph ly lz it ma b mb mv ju md me mw jx mg mh mx mj mk ml my mn mo mp mz mr ms mt im bi translated">举个例子，让我们看看2021年6月和7月到期的VIX期货合约。6月合约于6月16日到期。</p><p id="47de" class="pw-post-body-paragraph ly lz it ma b mb mv ju md me mw jx mg mh mx mj mk ml my mn mo mp mz mr ms mt im bi translated">如果我们只是在滚动日期从一个期货切换到下一个期货，并将价格时间序列拼接在一起，下图中6月16日的跳跃(用红色标记)完全是两个不同水平的合约交易的产物，并不代表市场的实际行为。</p><p id="72c5" class="pw-post-body-paragraph ly lz it ma b mb mv ju md me mw jx mg mh mx mj mk ml my mn mo mp mz mr ms mt im bi translated">缝合时间序列显示，从6月15日的17.1跃升至6月16日的19.625，涨幅为14.8%，而7月期货合约的变化实际上仅为0.3%！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/96afcfa75b23e3bd9c33dfbe366ceaf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DLpF3JLvS1FdXRscJiOV5Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">VIX期货6月和7月21日的时间序列</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/a68eadc732d98bc86354dedad14cd345.png" data-original-src="https://miro.medium.com/v2/resize:fit:702/format:webp/1*cFCx7vt4gtcHPhYQv7Y5LQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">VIX期货价格快照(作者图片)</p></figure><p id="9bf4" class="pw-post-body-paragraph ly lz it ma b mb mv ju md me mw jx mg mh mx mj mk ml my mn mo mp mz mr ms mt im bi translated">很明显，引入这样的人为跳跃可以完全改变任何形式的数据分析或对这一时间序列进行的回溯测试。</p><h1 id="9c13" class="lg lh it bd li lj ns ll lm ln nt lp lq jz nu ka ls kc nv kd lu kf nw kg lw lx bi translated">解决方案</h1><p id="bed8" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">有各种各样的方法可以用来解决这个问题，以便获得适合于回溯测试和分析的时间序列。最常见的是巴拿马调整、比例调整和使用永久展期。这些方法各有利弊。让我们看看它们中的每一个以及它们使用python的实现。</p><h2 id="12f2" class="nz lh it bd li oa ob dn lm oc od dp lq mh oe of ls ml og oh lu mp oi oj lw ok bi translated">巴拿马调整</h2><p id="9d2b" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">这种方法通过在滚动日期将每个以前的合同移动期货价格的差异来消除不同期货合同之间的差距。在我们上面的例子中，7月期货在滚动日期的价格是19.625，6月期货的价格是16.38，这意味着滚动前的所有价格都向上移动了3.245。</p><p id="d9e1" class="pw-post-body-paragraph ly lz it ma b mb mv ju md me mw jx mg mh mx mj mk ml my mn mo mp mz mr ms mt im bi translated">执行巴拿马校正的简单python函数如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="f5d5" class="pw-post-body-paragraph ly lz it ma b mb mv ju md me mw jx mg mh mx mj mk ml my mn mo mp mz mr ms mt im bi translated">应用巴拿马调整的结果是这个价格时间序列。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/8134d5242dea26fbaf25c65504a71035.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Fhb3OMH06fvjwLNegcSfQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用巴拿马调整后的期货时间序列</p></figure><p id="5d65" class="pw-post-body-paragraph ly lz it ma b mb mv ju md me mw jx mg mh mx mj mk ml my mn mo mp mz mr ms mt im bi translated">与缝合的时间系列完全不同！</p><p id="d47c" class="pw-post-body-paragraph ly lz it ma b mb mv ju md me mw jx mg mh mx mj mk ml my mn mo mp mz mr ms mt im bi translated">这是一个非常简单的方法，但有一些缺点。主要问题是，它引入了趋势偏差，这可能导致价格大幅波动。在某些情况下，这可能导致旧合同的负价格。时间序列中的相对价格信息也有损失，因为这种变化是绝对的。</p><p id="5a73" class="pw-post-body-paragraph ly lz it ma b mb mv ju md me mw jx mg mh mx mj mk ml my mn mo mp mz mr ms mt im bi translated">然而，这是最常用的方法之一。</p><h2 id="db11" class="nz lh it bd li oa ob dn lm oc od dp lq mh oe of ls ml og oh lu mp oi oj lw ok bi translated">比例调整</h2><p id="0d1e" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">与巴拿马法使用的绝对偏移不同，比例调整法使用旧价格的相对调整。这提供了一个连续的时间序列，不会引入任何偏差。</p><p id="9fc5" class="pw-post-body-paragraph ly lz it ma b mb mv ju md me mw jx mg mh mx mj mk ml my mn mo mp mz mr ms mt im bi translated">然而，这种方法的问题是，任何依赖于绝对价格水平的策略都需要以类似于时间序列的方式进行调整，这需要非常小心，因为使用这种方法非常容易引入错误。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/9e3efe67d034960798cc3e8f7968bbc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jA3cmYW8nVWZPBACtg2h8A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用比例调整后的期货时间序列(作者图片)</p></figure><h2 id="90b9" class="nz lh it bd li oa ob dn lm oc od dp lq mh oe of ls ml og oh lu mp oi oj lw ok bi translated">永久展期</h2><p id="dc83" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">这种方法使用两种期货的线性组合来进行x天的滚动。例如，如果您将滚动5天，在第1天，您将从旧合同滚动20%到新合同，旧合同的风险敞口为80%，新合同的风险敞口为20%。第二天，旧的有60%，新的有40%，以此类推。到第5天，你将完成你的滚动。</p><p id="2ee5" class="pw-post-body-paragraph ly lz it ma b mb mv ju md me mw jx mg mh mx mj mk ml my mn mo mp mz mr ms mt im bi translated">虽然这种方法提供了非常平滑的过渡，但其主要缺点是在实际交易中，人们需要在所有这些天进行交易，并可能导致更高的交易成本。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/6e1141e7e5bd22aa1e5d3b2faaaec3af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iq4FeLoVAzm84SUlCCQerg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用永久展期后的期货时间序列(图片由作者提供)</p></figure><h1 id="e75c" class="lg lh it bd li lj ns ll lm ln nt lp lq jz nu ka ls kc nv kd lu kf nw kg lw lx bi translated">结论</h1><p id="97a9" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">在这篇文章中，我介绍了三种不同的方法来创建一个连续的期货时间序列，用于回溯测试和分析。所有这些方法都有各自的优缺点，最终取决于您的具体应用，哪种方法效果最好。然而，这应该给你一个好的起点。</p><p id="3c33" class="pw-post-body-paragraph ly lz it ma b mb mv ju md me mw jx mg mh mx mj mk ml my mn mo mp mz mr ms mt im bi translated">如果你想了解更多期货回溯测试和交易的复杂性，请查看Quantra的12小时综合课程，学习如何用python实现期货交易自动化。</p><div class="na nb gp gr nc nd"><a href="https://quantra.quantinsti.com/course/futures-trading/?ref=stefanharing" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd iu gy z fp ni fr fs nj fu fw is bi translated">期货交易:概念和策略</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">回溯测试和实时交易一种多样化的期货交易策略。学习如何创建一个投资组合，衡量风险和…</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">quantra.quantinsti.com</p></div></div><div class="nm l"><div class="oo l no np nq nm nr ks nd"/></div></div></a></div></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="6024" class="pw-post-body-paragraph ly lz it ma b mb mv ju md me mw jx mg mh mx mj mk ml my mn mo mp mz mr ms mt im bi translated"><strong class="ma iu"> <em class="mu">注来自《走向数据科学》的编辑:</em> </strong> <em class="mu">虽然我们允许独立作者根据我们的</em> <a class="ae ky" rel="noopener" target="_blank" href="/questions-96667b06af5"> <em class="mu">规则和指导方针</em> </a> <em class="mu">发表文章，但我们不认可每个作者的贡献。你不应该在没有寻求专业建议的情况下依赖一个作者的作品。详见我们的</em> <a class="ae ky" rel="noopener" target="_blank" href="/readers-terms-b5d780a700a4"> <em class="mu">读者术语</em> </a> <em class="mu">。</em></p></div></div>    
</body>
</html>