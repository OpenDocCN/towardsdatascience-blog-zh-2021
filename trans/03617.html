<html>
<head>
<title>Bootstrap regression in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R中的自助回归</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/bootstrap-regression-in-r-98bfe4ff5007?source=collection_archive---------5-----------------------#2021-03-24">https://towardsdatascience.com/bootstrap-regression-in-r-98bfe4ff5007?source=collection_archive---------5-----------------------#2021-03-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="de0c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">回归系数的估计及其在R中的实现</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d16c343cd9ce6810c91e7ba2e016fb03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Wp_z1el6_tfA8HIE"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">安德鲁·雷德利在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="56aa" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="13f8" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">Bootstrap是一种带替换的随机抽样方法。在它的其他应用中，如假设检验，它是检查回归系数稳定性的一种简单而有效的方法。在我们的<a class="ae kv" rel="noopener" target="_blank" href="/permutation-test-in-r-77d551a9f891">上一篇文章中，我们探讨了置换测试</a>，这是一个相关的概念，但是没有替换。</p><p id="6c36" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">线性回归依赖于几个假设，公式的系数可能在CLT下呈正态分布。它表明，平均来说，如果我们重复实验成千上万次，这条线将在置信区间内。<br/>bootstrap方法不依赖于这些假设*，而是简单地执行数千次估计。<br/> *(请注意，bootstrap方法不违反或绕过正态假设，但它不依赖于CLT，而是建立自己的Bootstrap分布，这是渐近正态的)</p><p id="1257" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在这篇文章中，我们将探讨Bootstrapping方法和估计回归系数的模拟数据使用r。</p><h1 id="5953" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">数据集模拟</h1><p id="68e4" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们将模拟来自高斯分布的一个探索变量的数据集，以及通过向探索变量添加随机噪声而构建的一个响应变量。人口数据将有1000个观察值。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="57e9" class="mu kx iq mq b gy mv mw l mx my">set.seed(2021)<br/>n &lt;- 1000<br/>x &lt;- rnorm(n)<br/>y &lt;- x + rnorm(n)</span><span id="a6d6" class="mu kx iq mq b gy mz mw l mx my">population.data &lt;- as.data.frame(cbind(x, y))</span></pre><p id="b300" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们将从这些数据中抽取20个观察值作为样本。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="a1d5" class="mu kx iq mq b gy mv mw l mx my">sample.data &lt;- population.data[sample(nrow(population.data), 20, replace = TRUE),]</span></pre><h1 id="5c0a" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">简单回归模型</h1><p id="de52" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">让我们探索一下人口和样本数据的简单回归模型:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/f518cee169428cfdd82380d1d6368800.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mgo26iurpnpkRjeC8MF1WQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">人口模型</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/81d99291fbc637b92966c2ff5421651a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*46bSNDzpSw60YHTdTQMB7w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">样本模型</p></figure><p id="33fe" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们可以看到，截距对于样本数据是有偏差的；然而，尽管我们的样本数据集中只有20个观察值，斜率却非常接近于总体值。样本模型的标准误差要高得多。</p><p id="e238" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果我们绘制模型，我们可以看到这些线有多接近:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/52ea792a5f1b1eb18e41f21d93c73dda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4qk-OYY3LDWCFmsMUhQujQ.png"/></div></div></figure><h1 id="ebbf" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">自助方法</h1><p id="3027" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">Bootstrap方法提出了一个问题:如果我们用替换法对数据进行重新采样并估计系数，会有多极端？</p><p id="b40a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这是一个1000次试验的简单循环，它从我们的样本数据集中用替换重新采样这20个观察值，运行回归模型并保存我们在那里得到的系数。最后，我们会有1000对系数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="1d85" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们将取这些系数的平均值，并将它们与我们先前获得的其他模型进行比较:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/3804393bb112a8e4405b04dbad0cd4e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ShmSmnwfBWIrbZGyx9Xpaw.png"/></div></div></figure><p id="299d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们可以看到，在这个特定的例子中，截距更接近于总体模型，斜率与样本模型的精度水平大致相同。但是我们更感兴趣的是置信区间的精确度。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/f4015d2168d1c5ddac9bfa8bcdc2a157.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bKXRDmcNZRfomC-_DNiNqg.png"/></div></div></figure><p id="9172" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们可以看到，精度几乎与样本模型相同，截距甚至更小。</p><h1 id="bcd0" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">图形表示</h1><p id="1e9c" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">首先，自举表示法:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/e4eb5265b3daedfc46cdf2e7dc10287f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0VYd4rhtFylZpzD6djVhFg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">仅自举线</p></figure><p id="c752" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这是我们估计的1000条可能的回归线。现在，让我们添加图总体、样本和平均自举线:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/242c40238d1e7fc08def6cbff6a28d07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OhgDNfj10D_8U17aRVW7ZA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">总体、样本、自举线</p></figure><p id="253b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们可以看到，它们基本上以相同的方式获取数据。现在让我们添加样本数据的置信区间:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/0cf244bb9727386f4c26ce522bd424ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QwWDypUzw2BaLWIlp4_VvQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">增加了置信区间</p></figure><p id="ff40" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这就完成了我们的研究:我们可以得出结论，bootstrapping方法返回了本质上相同的结果，但在统计学上是不同的。我们不依赖假设，而是使用强力方法模拟数据。当我们对数据的来源分布有疑问时，或者想要检查系数的稳定性时，特别是对于小数据集，这可能特别有用。</p><p id="b0a4" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">你可以在GitHub的找到完整的代码<a class="ae kv" href="https://github.com/serafimpetrov1/bootstrap/blob/main/BootReg.R" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="9bb6" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="2808" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在本文中，我们探讨了估计回归系数的bootstrap方法。为了简单明了地展示这种强大的技术，我们使用了一个简单的回归模型。我们的结论是，这种方法基本上等同于OLS模型，但是不依赖于假设。这是一种估计系数不确定性的强有力的方法，可以与传统方法一起用来检查模型的稳定性。</p></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><h1 id="2395" class="kw kx iq bd ky kz nm lb lc ld nn lf lg jw no jx li jz np ka lk kc nq kd lm ln bi translated">感谢您的阅读！</h1><p id="1387" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在<a class="ae kv" href="https://www.linkedin.com/in/serafimpetrov/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上连接</p></div></div>    
</body>
</html>