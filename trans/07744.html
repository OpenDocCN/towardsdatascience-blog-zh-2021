<html>
<head>
<title>Generating Mock Sales Data with Python Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python Pandas生成模拟销售数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/generating-mock-sales-data-with-python-pandas-c904035782fe?source=collection_archive---------20-----------------------#2021-07-15">https://towardsdatascience.com/generating-mock-sales-data-with-python-pandas-c904035782fe?source=collection_archive---------20-----------------------#2021-07-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7a32" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">数据科学的一切都是从数据开始的</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1a2bfc825ed77ad4fa3985e0a3fdb7be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b48BNqxNUNMzYC8YWF3Cww.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/s/photos/grocery?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@mockupgraphics?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">实体模型图形</a>拍摄</p></figure><p id="2906" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据科学生态系统中有几个软件工具和软件包。这些工具加速了日常流程，并帮助我们管理、探索和分析数据。</p><p id="c138" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论您使用什么工具，无论您从事什么项目，数据科学中的一切都始于数据。没有适当的数据，您的数据产品很可能会失败。</p><p id="20b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在学习数据科学和实践软件工具时，寻找数据来玩有时会成为一个挑战。虽然网上有一些免费的数据资源，但它们可能并不总是符合你的需求。</p><p id="c4e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将使用Pandas库生成模拟销售数据。该数据将包含一家连锁店的每日销售数据。我们将使用随机数来分配商店和产品的销售值。</p><p id="0f6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据可能无法展示在现实生活销售数据中可以观察到的典型特征，如季节性或趋势。但是，您可以用它来练习许多工具和技术。</p><p id="d95b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，在生成数据时，我们将使用几个Pandas函数和方法。因此，这对熊猫来说也是一个很好的练习。</p><p id="cf48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将有机会练习以下主题:</p><ul class=""><li id="61a5" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">如何创建熊猫数据框</li><li id="e81f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">创建NumPy数组的不同方法</li><li id="0abf" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">取数组和列表的笛卡尔积</li><li id="a4e3" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">合并熊猫数据框</li><li id="b83c" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">用熊猫创建线形图</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="3af7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从导入所需的库开始。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="aace" class="mv mw it mr b gy mx my l mz na">import numpy as np<br/>import pandas as pd<br/>from random import shuffle</span></pre><p id="3184" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python随机包中的洗牌模块可以用来洗牌。</p><p id="4ef7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一步是创建商店和产品代码。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="f958" class="mv mw it mr b gy mx my l mz na">store_codes = np.arange(1,10)<br/>product_codes = np.arange(1,101)</span></pre><p id="dea9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">商店代码从1开始，一直到9。我们有100种产品，从1开始，一直到100。</p><p id="5d01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还需要一个日期范围，因为这是一个时间序列数据。有许多不同的方法来执行这项任务。我会用熊猫的date_range函数。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="323c" class="mv mw it mr b gy mx my l mz na">date_range = pd.date_range(start = "2019-01-01", end = "2020-12-31", freq="D")</span></pre><p id="73e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的产品系列涵盖了两年的时间。freq参数用于确定增量大小。“D”代表日，因此我们将拥有2019年和2020年的每日销售数据。</p><p id="29f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们有2年的时间，9家商店，100种产品。每天，我们的数据将包含每个产品-商店对的销售额。因此，我们需要生成日期范围、商店代码和产品代码数组的笛卡尔乘积。</p><p id="2905" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一种方法是通过取这些数组的笛卡尔积来创建一个多重索引。然后，我们可以使用它来创建数据框。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="eb0b" class="mv mw it mr b gy mx my l mz na">index = pd.MultiIndex.from_product(<br/>   [date_range, store_codes, product_codes],<br/>   names = ["Date", "StoreCode", "ProductCode"]<br/>)</span><span id="bb3c" class="mv mw it mr b gy nb my l mz na">sales = pd.DataFrame(index = index)</span><span id="225b" class="mv mw it mr b gy nb my l mz na">sales.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/a204f80df5ee8f42162f3b72abcedb9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*3jEwIDlesm9_p8zu_8qXbw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="852d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是销售数据框架的索引。为了从这个多索引创建列，我们只需要使用reset_index函数。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="068a" class="mv mw it mr b gy mx my l mz na">sales.reset_index(inplace=True)</span><span id="bd7e" class="mv mw it mr b gy nb my l mz na">sales.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/6eac3c55b590a85f6574417dc1799f93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/format:webp/1*5wJgNQB6wGtmwXZIa7t4Bw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="74ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">销售数据框包含每个日期、商店代码和产品代码组合的一行。因此，行数应该等于每个数组中项目数的乘积。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="5c26" class="mv mw it mr b gy mx my l mz na">len(sales) == len(store_codes) * len(product_codes) * len(date_range)<br/>True</span><span id="ae0e" class="mv mw it mr b gy nb my l mz na">len(sales)<br/>657900</span></pre><p id="3ca6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们刚刚证实了我们的预期。我们有一个657k行的数据帧。</p><p id="446e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在零售业中，对商店和产品进行分组是一种常见的做法。让我们从商店开始。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="33f5" class="mv mw it mr b gy mx my l mz na">store_groups = ["Small","Medium","Large"]*3<br/>shuffle(store_groups)</span><span id="0742" class="mv mw it mr b gy nb my l mz na">stores = pd.DataFrame({<br/>   "StoreCode": np.arange(1,10),<br/>   "StoreGroup": store_groups<br/>})</span><span id="f6c1" class="mv mw it mr b gy nb my l mz na">stores</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/a99803cec0c6872a0b899c0e5a2b8096.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*DxrZCE_b3hNsM2aoON7saw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">商店组(作者图片)</p></figure><p id="2707" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于有9家商店，我们创建了一个包含9个元素的列表，分为3个类别。shuffle函数在适当的位置打乱这个列表。否则，将保留基本列表的顺序。</p><p id="1149" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以类似地分配产品组。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="de66" class="mv mw it mr b gy mx my l mz na">product_groups = ["A","B","C","D"] * 25<br/>shuffle(product_groups)</span><span id="7e17" class="mv mw it mr b gy nb my l mz na">products = pd.DataFrame({<br/>   "ProductCode": np.arange(1,101),<br/>   "ProductGroup": product_groups<br/>})</span><span id="4e73" class="mv mw it mr b gy nb my l mz na">products.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/0e0982e00a78141e6d3715270d7f2238.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/1*IX4duabW4fnFxUO-4utzKA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">产品组(图片由作者提供)</p></figure><p id="3195" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们有100种不同的产品代码，分为4类。</p><p id="9df6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可能需要分析不同商店和产品组的销售业绩。因此，这些类别需要合并到销售数据框架中。</p><p id="0e47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">熊猫的合并功能可以用来完成这个任务。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="8f3b" class="mv mw it mr b gy mx my l mz na">sales = pd.merge(sales, stores, on="StoreCode", how="left")</span><span id="aafb" class="mv mw it mr b gy nb my l mz na">sales = pd.merge(sales, products, on="ProductCode", how="left")</span><span id="5c8f" class="mv mw it mr b gy nb my l mz na">sales.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/c6b4ae426f2baf3b70262a4583c5773f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*quAILMaPLkhmV07loI-8AA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">销售数据框(作者图片)</p></figure><p id="323e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经到了数据生成的最后一步，我认为这是最重要的一步。我们需要增加销售额。</p><p id="293b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你的选择是无限的。一个简单的方法是用随机整数创建一个NumPy数组，并将其添加到销售数据框架中。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="6361" class="mv mw it mr b gy mx my l mz na">size = len(sales)</span><span id="14e5" class="mv mw it mr b gy nb my l mz na">sales_amount = np.random.randint(0, 50, size=len(sales))</span><span id="2da7" class="mv mw it mr b gy nb my l mz na">sales["SalesAmount"] = sales_amount</span><span id="5323" class="mv mw it mr b gy nb my l mz na">sales.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/67995a4ee2a1a8a7ffccbf498ab5b11f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*V1SKV8nF_P3n3121Bpnmng.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">销售数据框(作者图片)</p></figure><p id="1e4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“销售额”列由0到50之间的随机整数组成。这完全是随机的，所以我们无法观察到我们销售的任何趋势或季节性。</p><p id="b8ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用to_csv函数将此数据框保存为csv文件:</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="ba74" class="mv mw it mr b gy mx my l mz na">sales.to_csv("mock_sales.csv", header=True, index=False)</span></pre><p id="3b13" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们通过绘制一个产品商店对的销售额来检查一下。下面的代码创建了一个特定对在过去两个月的销售额的折线图。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="9b78" class="mv mw it mr b gy mx my l mz na">sales[<br/>     (sales.StoreCode==1) &amp;<br/>     (sales.ProductCode==5) &amp;<br/>     (sales.Date &gt; "2020-11-01")<br/>     ].plot(x="Date", y="SalesAmount", kind="line", figsize=(10,6))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/278aaca94b57753735a6ff2fc31ddb99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*dTknLN9ilNxdjgvEtEfGTA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="150a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以清楚地观察到销售额的随机性。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h2 id="9eb9" class="mv mw it bd nj nk nl dn nm nn no dp np li nq nr ns lm nt nu nv lq nw nx ny nz bi translated">结论</h2><p id="f7e9" class="pw-post-body-paragraph kz la it lb b lc oa ju le lf ob jx lh li oc lk ll lm od lo lp lq oe ls lt lu im bi translated">在创造销售额时，我们可以更有创意一点。一些随机噪声或季节性可以添加到这些值中。我把那部分留给你。</p><p id="8ed3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们有模拟销售数据，但我们还没有对它进行任何探索性的数据分析。这将是下一篇文章的主题。敬请期待！</p><p id="3954" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>