<html>
<head>
<title>Intro to AsterixDB — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AsterixDB简介—第1部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/intro-to-asterixdb-part-1-13b1f0fdff56?source=collection_archive---------35-----------------------#2021-07-29">https://towardsdatascience.com/intro-to-asterixdb-part-1-13b1f0fdff56?source=collection_archive---------35-----------------------#2021-07-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b918" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">具有地理空间功能的“一刀切”大数据管理系统</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5af6d42723e6d9b7fdafec5945f15fc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*e48N7H2WOy1pS05y"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">纳斯蒂亚·杜尔希尔在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="2bee" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="ec86" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">AsterixDB是一个可扩展的开源大数据管理系统(BDMS ),具有地理空间功能。在这里，你可以看到<a class="ae kv" href="https://asterixdb.apache.org/index.html" rel="noopener ugc nofollow" target="_blank">更多的特点，因此它被描述为“一个尺寸适合一群人”尽管如此，本教程不会太深入探讨AsterixDB的复杂性和潜力。相反，我将创建三篇博文，作为AsterixDB新手的通用实用教程，同时展示AsterixDB的新地理空间功能。帖子将按以下顺序排列:</a></p><ol class=""><li id="d3cd" class="mk ml iq lq b lr mm lu mn lx mo mb mp mf mq mj mr ms mt mu bi translated">准备并加载数据</li><li id="8cf6" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">执行空间查询</li><li id="9bff" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">衡量绩效</li></ol><p id="5f26" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">在这篇博客中，我将讨论如何对现有数据执行空间查询。因此，我将解释如何下载数据、创建我们的模式(dataverse、datatypes和datasets)、加载我们的数据以及转换和插入我们的数据。此外，我们将使用不同的文件类型，以便学习如何使用AsterixDB以各种格式输入数据。在下一部分，我们将下载我们的数据。</p><h1 id="ad35" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">选择数据</h1><p id="20e3" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">首先，我们需要找到包含地理空间属性的数据。为此，我们将访问<a class="ae kv" href="https://star.cs.ucr.edu/?OSM2015/all_objects#center=33.9780,-117.3242&amp;zoom=12" rel="noopener ugc nofollow" target="_blank"> UCR之星网站</a>(大型空间数据集的免费可视化目录)。有各种各样的数据可供选择，欢迎您自由下载您想要的任何数据集(尽管在本教程之后这样做可能会更好)。然而，在我们的示例中，我们将使用<a class="ae kv" href="https://star.cs.ucr.edu/?NE/urban_areas#center=37.76,-139.29&amp;zoom=5" rel="noopener ugc nofollow" target="_blank"> NE/urban_areas </a>(城市地区)和<a class="ae kv" href="https://star.cs.ucr.edu/?yin/instagram-twitter#center=37.76,-139.29&amp;zoom=5" rel="noopener ugc nofollow" target="_blank">Yin/insta gram-Twitter</a>(insta gram-Twitter)数据集的子集。城市区域数据集利用多边形作为其地理空间属性来表示“人口密集居住”的区域。然而，Instagram-Twitter数据集利用点数作为其地理空间属性来表示用户在Twitter上发推文或在Instagram上发帖的位置。我选择这些数据集是因为我想让我们对地理空间查询的理解简单而直观。因此，对于一个包含多边形的数据集(城市区域数据集)和另一个包含点的数据集(Twitter-Instagram数据集)，我们将创建可以分析多边形和点之间关系的查询，即我们希望计算出每个多边形中有多少个点。因此，我们希望在本教程结束时回答的一些问题包括:</p><ol class=""><li id="1174" class="mk ml iq lq b lr mm lu mn lx mo mb mp mf mq mj mr ms mt mu bi translated">我们的数据集中有多少城市地区和Tweets &amp; Instagram帖子？</li><li id="e2bb" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">每个市区有多少条Tweets &amp; Instagram帖子？</li><li id="a210" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">有多少Tweets &amp; Instagram帖子不在市区范围内？</li><li id="80cd" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">哪个城区的推特&amp; Instagram帖子最多/最少？</li><li id="e2e0" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">有多少条推文在近距离内？</li></ol><p id="3af5" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">为了简化数据量和减少查询时间，我们将只查看北美西海岸(的一部分)——从加拿大的不列颠哥伦比亚到墨西哥的下加利福尼亚。同样，这是<a class="ae kv" href="https://star.cs.ucr.edu/?NE/urban_areas#center=37.76,-139.29&amp;zoom=5" rel="noopener ugc nofollow" target="_blank">城市地区</a>和<a class="ae kv" href="https://star.cs.ucr.edu/?yin/instagram-twitter#center=37.76,-139.29&amp;zoom=5" rel="noopener ugc nofollow" target="_blank"> Instagram-Twitter </a>的数据子集。这些链接会将您带到一个类似于下图的地图:</p><div class="kg kh ki kj gt ab cb"><figure class="nd kk ne nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/4243ab46744339d210da510d072fedaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*pbAHeJewsrQRt7CsZjBakQ.png"/></div></figure><figure class="nd kk ne nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/d6fe156843dc732cfee67bdac7c99e32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*4zL3Sbl-AJwqM8CNJhvBqA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk nj di nk nl translated">NE/urban_areas数据集(左)和yin/instagram-twitter(右)截图</p></figure></div><p id="2629" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">在左下角，我们可以看到数据集的属性(除了几何属性)。单击“下载数据”查看您的下载格式选项。确保您位于“可见区域”选项卡上，而不是“完整数据集”选项卡上。对于城市区域数据集，选择JSON+WKT格式。如果您不认为这是一个选项，请刷新页面并重试。下载数据集的示例如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/446efa4c45987e4c6ea04e2e26a02a5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*J_s8wcIRlna2loHxOaJZ2A.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">显示如何下载东北/城市区域数据集的GIF</p></figure><p id="7d38" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">下载Instagram-Twitter数据集将是类似的，但是，选择CSV作为格式。需要注意的是，JSON+WKT格式可以很好地与AsterixDB兼容。然而，CSV不是这种情况，因此CSV将需要稍微多一点的努力来充分加载到AsterixDB中。在下一节中，我们将继续定义我们的数据模型。</p><h1 id="0661" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">定义数据模型</h1><p id="eb4f" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">现在我们已经下载了文件，我们需要安装AsterixDB。请看文档<a class="ae kv" href="https://asterixdb.apache.org/docs/0.9.6/ncservice.html" rel="noopener ugc nofollow" target="_blank">这里</a>开始。下载完成后，启动示例集群。现在，随着集群的运行，在浏览器中打开<a class="ae kv" href="http://localhost:19006/" rel="noopener ugc nofollow" target="_blank"> http://localhost:19006 </a>来访问AsterixDB管理控制台。接下来，我们将通过输入以下dataverse和datatype定义来定义我们的数据模型:</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="1a65" class="ns kx iq no b gy nt nu l nv nw">DROP DATAVERSE PracticeData IF EXISTS; <br/>CREATE DATAVERSE PracticeData;<br/>USE PracticeData;</span><span id="1770" class="ns kx iq no b gy nx nu l nv nw">CREATE TYPE UrbanAreasType AS {<br/> id: UUID,<br/> g: geometry?,<br/> scalerank: int?,<br/> featurecla: string?,<br/> area_sqkm: double?,<br/> min_zoom: double?<br/>};</span><span id="2bef" class="ns kx iq no b gy nx nu l nv nw">CREATE TYPE TempInstagramTwitterType AS {<br/> x: double,<br/> y: double,<br/> user_id: int,<br/> timestamp : int32<br/>};</span><span id="8587" class="ns kx iq no b gy nx nu l nv nw">CREATE TYPE InstagramTwitterType AS {<br/> id: UUID,<br/> geometry: geometry,<br/> user_id: int,<br/> timestamp: int32 <br/>};</span></pre><p id="b0ed" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">首先，我们将数据节命名为<code class="fe ny nz oa no b">PracticeData</code>。这基本上是所有东西存放的地方。因此，在继续运行您的查询之前，<code class="fe ny nz oa no b">USE PracticeData;</code>出现是很重要的。</p><p id="1ac9" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">现在，请仔细检查三种不同数据类型的模式。值得注意的是，每个数据类型中的每个属性的名称都是命名的，然后属性的数据类型在冒号后指定。此外，属性的名称必须与被加载的数据的属性相对应(我们将在后面的章节中讨论一个具体的例子)。</p><p id="ba74" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated"><code class="fe ny nz oa no b">UrbanAreasType</code>比较直截了当。我们用UUID类型定义了<code class="fe ny nz oa no b">id</code>，一个几何属性被标记为<code class="fe ny nz oa no b">g</code>，更重要的是，我们有int类型的<code class="fe ny nz oa no b">scalerank</code>、string类型的<code class="fe ny nz oa no b">featurecla</code>、double类型的<code class="fe ny nz oa no b">area_sqkm</code>和double类型的<code class="fe ny nz oa no b">min_zoom</code>。我还想指出的是，我们在定义数据类型之后添加了一个<code class="fe ny nz oa no b">?</code>来表示该属性是可选的。我们这样做是因为<code class="fe ny nz oa no b">Urban Areas</code>中的数据有一些行没有属性<code class="fe ny nz oa no b">geometry</code>、<code class="fe ny nz oa no b">scalerank</code>、<code class="fe ny nz oa no b">featurecla</code>、<code class="fe ny nz oa no b">area_sqkm</code>或<code class="fe ny nz oa no b">min_zoom</code>。</p><p id="7843" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">至于其他两个数据集，我们将创建<code class="fe ny nz oa no b">TempInstagramTwitterType</code>作为临时数据类型来保存来自CSV文件的数据。然后，我们将把结果数据集中的数据转移和转换到将使用<code class="fe ny nz oa no b">InstagramTwitterType</code>的数据集中。我们这样做有多种原因:(1) CSV缺乏对基本类型geometry的支持，以及(2)我们不希望通过在空间查询中创建几何来增加开销(我们将在后面的小节中讨论)。在<code class="fe ny nz oa no b">TempInstagramTwitterType</code>中举例说明了这一点，其中我们将属性标记为<code class="fe ny nz oa no b">x</code>和<code class="fe ny nz oa no b">y</code>，数据类型为double，但是在<code class="fe ny nz oa no b">InstagramTwitterType</code>中，我们将属性标记为<code class="fe ny nz oa no b">geometry</code>，数据类型为geometry。我们最终将把前两个属性转换成一个几何属性，存储在使用<code class="fe ny nz oa no b">InstagramTwitterType</code>的数据集中。同样的推理也适用于<code class="fe ny nz oa no b">TempInstagramTwitterType</code>中缺少<code class="fe ny nz oa no b">id</code>属性的情况。我们的临时数据集不需要一个<code class="fe ny nz oa no b">id</code>属性，但是我们需要一个<code class="fe ny nz oa no b">id</code>属性(我们将自动生成)用于将使用<code class="fe ny nz oa no b">InstagramTwitterType</code>的数据集。</p><p id="1197" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">在下一节中，我们将创建数据集并加载数据。</p><h1 id="085a" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">创建和加载数据</h1><p id="f1d7" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在这里，我们将加载数据。所以，我们做了如下工作:</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="83ba" class="ns kx iq no b gy nt nu l nv nw">USE PracticeData;</span><span id="3e2a" class="ns kx iq no b gy nx nu l nv nw">CREATE DATASET UrbanAreas (UrbanAreasType) PRIMARY KEY id AUTOGENERATED;</span><span id="3f4b" class="ns kx iq no b gy nx nu l nv nw">LOAD DATASET UrbanAreas using localfs<br/>(("path"="127.0.0.1:///Users/andretran/Downloads/NE_urban_areas.json"), ("format"="adm")); </span><span id="72cc" class="ns kx iq no b gy nx nu l nv nw">CREATE EXTERNAL DATASET TempInstagramTwitter<br/>(TempInstagramTwitterType) using localfs (("path"="127.0.0.1:///Users/andretran/Downloads/yin_instagram-twitter.csv"), ("format"="delimited-text"), ("header"="true"));</span><span id="9680" class="ns kx iq no b gy nx nu l nv nw">CREATE DATASET InstagramTwitter (InstagramTwitterType) primary key id autogenerated;</span></pre><p id="ea4f" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">首先，我们再次确保我们使用的是dataverse <code class="fe ny nz oa no b">PracticeData</code>。</p><p id="e78c" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">现在，对于第一个数据集，我们使用数据模型<code class="fe ny nz oa no b">UrbanAreasType</code>创建数据集<code class="fe ny nz oa no b">UrbanAreas</code>，我们将<code class="fe ny nz oa no b">primary key</code>设置为<code class="fe ny nz oa no b">id</code>，并指定它为<code class="fe ny nz oa no b">autogenerated</code>(这只是意味着AsterixDB将创建唯一的id)。如果我们的数据集已经有一个带有唯一id的属性，我们可以省略<code class="fe ny nz oa no b">autogenerated</code>。然后，我们使用<code class="fe ny nz oa no b">localfs</code>在本地加载数据集。为此，AsterixDB需要两个参数。首先，我们指定文件的路径。然后，我们需要指定我们的格式为<code class="fe ny nz oa no b">adm</code>，因为文件的格式是JSON。设置了这两个参数后，数据应该可以正确加载了。</p><p id="0eb9" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">对于我们的第二个数据集<code class="fe ny nz oa no b">TempInstagramTwitter</code>，我们不会在本地创建数据集或加载该数据集。相反，我们将创建一个<a class="ae kv" href="https://asterixdb.apache.org/docs/0.9.2/aql/externaldata.html" rel="noopener ugc nofollow" target="_blank">外部数据集</a>，因为我们将把该数据转换成我们的第三个数据集— <code class="fe ny nz oa no b">InstagramTwitter</code>。这减少了加载文件的开销，因为这是一个临时数据集。加载该数据集需要三个参数。同样，我们指定路径。然后，我们指定格式为<code class="fe ny nz oa no b">delimited-text</code>，因为我们的文件格式是CSV。最后，我们将<code class="fe ny nz oa no b">header</code>设置为<code class="fe ny nz oa no b">true</code>，这样我们就不会读取文件中的第一行。数据应该正确加载。</p><p id="65af" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">为了确保我们的数据已经加载，我们运行以下查询:</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="13f9" class="ns kx iq no b gy nt nu l nv nw">USE PracticeData;</span><span id="df46" class="ns kx iq no b gy nx nu l nv nw">SELECT * <br/>FROM UrbanAreas</span></pre><p id="128a" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">和</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="d1a6" class="ns kx iq no b gy nt nu l nv nw">USE PracticeData;</span><span id="77bb" class="ns kx iq no b gy nx nu l nv nw">SELECT * <br/>FROM TempInstagramTwitter;</span></pre><p id="1b6e" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">这些查询应该返回以下内容:</p><div class="kg kh ki kj gt ab cb"><figure class="nd kk ne nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/201a1aa9b9adab885f6b7b392f3b91ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*BLYEx6JfnPI9x_8Z0HY-pA.png"/></div></figure><figure class="nd kk ne nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/aee85662e04687485bbc4148196c63da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*kGnev-myYFQ3HnmnKL9OKQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk nj di nk nl translated">来自UrbanAreas数据集(左)和TempInstagramTwitter数据集(右)的查询数据的屏幕截图</p></figure></div><p id="378f" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">有了这些信息，我们可以回答我们的第一个问题，即“我们的数据集中有多少城市地区和推文&amp; Instagram帖子？”正如我们在截图中看到的，我们的UrbanAreas数据集有163行，InstagramTwitter数据集有126263行。</p><p id="09fa" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">现在，将我们的两个文件加载到前两个数据集中，我们创建第三个数据集作为<code class="fe ny nz oa no b">InstagramTwitter</code>。同样，我们将我们的<code class="fe ny nz oa no b">primary key</code>设置为<code class="fe ny nz oa no b">id</code>，并且通过AsterixDB得到我们的id<code class="fe ny nz oa no b">autogenerated</code>。我们故意不将任何数据加载到该数据集中，因为我们现在将转换我们的<code class="fe ny nz oa no b">TempInstagramTwitter</code>数据，并在下一节将其插入到该数据集中。</p><h1 id="1045" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">转换和插入数据</h1><p id="8a76" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">这里，我们将把数据从<code class="fe ny nz oa no b">TempInstagramTwitter</code>转换到<code class="fe ny nz oa no b">InstagramTwitter</code>。如前所述，CSV缺乏对几何作为基本类型的支持。因此，我们将利用一个内置的空间函数<code class="fe ny nz oa no b">st_make_point</code>从<code class="fe ny nz oa no b">TempInstagramTwitter</code>获取<code class="fe ny nz oa no b">geometry</code>属性，并将其转换为原始类型的几何图形。此外，我们还需要将其他属性(<code class="fe ny nz oa no b">user_id</code>和<code class="fe ny nz oa no b">timestamp</code>)转移到数据集。我们通过查询来自<code class="fe ny nz oa no b">TempInstagramTwitter</code>的数据并将结果数据插入到<code class="fe ny nz oa no b">InstagramTwitter</code>数据集中来做到这一点。因此，我们的查询应该如下所示:</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="65a8" class="ns kx iq no b gy nt nu l nv nw">USE PracticeData;</span><span id="3952" class="ns kx iq no b gy nx nu l nv nw">INSERT INTO InstagramTwitter<br/>(<br/> SELECT st_make_point(x, y) AS geometry, user_id, timestamp<br/> FROM TempInstagramTwitter <br/>);</span></pre><p id="e358" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">以下是对上述代码片段的一些补充说明。我们将转换后的几何图形属性的名称设置为<code class="fe ny nz oa no b">geometry</code>，以确保该属性具有正确的名称。如果我们不设置名称，AsterixDB将把我们转换的几何数据作为一个没有名称的属性插入到<code class="fe ny nz oa no b">InstagramTwitter</code>数据集中。这将使得查询和保留没有任何数据的<code class="fe ny nz oa no b">geometry</code>属性变得几乎不可能。然后，运行下面的查询:</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="aa11" class="ns kx iq no b gy nt nu l nv nw">USE PracticeData;</span><span id="82cc" class="ns kx iq no b gy nx nu l nv nw">SELECT VALUE i <br/>FROM InstagramTwitter AS i;</span></pre><p id="b41c" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">该查询应返回以下内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/8e18f33ecba31b13d9d759bcf232b1a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qcI1UyeQ49geJTqw3ssE5Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">InstagramTwitter数据集的查询数据截图</p></figure><p id="45a5" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">从上面的截图中，我们可以通过检查我们之前从<code class="fe ny nz oa no b">TempInstagramTwitter</code>数据集获得的截图来验证我们的数据已经加载。同样，我们在转换后的数据集中有126263行，这意味着数据加载正确。我们还可以看到不再有<code class="fe ny nz oa no b">x</code>或<code class="fe ny nz oa no b">y</code>属性。相反，我们有一个geometry类型的单个<code class="fe ny nz oa no b">geometry</code>属性，它保存来自<code class="fe ny nz oa no b">x</code>和<code class="fe ny nz oa no b">y</code>属性的转换数据。</p><h1 id="a92b" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="9229" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">随着第三个数据集的加载，我们终于完成了将数据加载到AsterixDB中。在下一部分中，我们将对包含几何属性的数据集执行空间查询。</p></div><div class="ab cl oc od hu oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ij ik il im in"><h1 id="a2be" class="kw kx iq bd ky kz oj lb lc ld ok lf lg jw ol jx li jz om ka lk kc on kd lm ln bi translated">参考</h1><ul class=""><li id="dd8c" class="mk ml iq lq b lr ls lu lv lx oo mb op mf oq mj or ms mt mu bi translated"><a class="ae kv" href="https://asterixdb.apache.org" rel="noopener ugc nofollow" target="_blank">https://asterixdb.apache.org</a></li><li id="5298" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj or ms mt mu bi translated"><a class="ae kv" href="https://star.cs.ucr.edu/?OSM2015/all_objects#center=33.9780,-117.3242&amp;zoom=12" rel="noopener ugc nofollow" target="_blank">https://star.cs.ucr.edu/?osm 2015/all _ objects # center = 33.9780，-117.3242 &amp; zoom=12 </a></li></ul></div></div>    
</body>
</html>