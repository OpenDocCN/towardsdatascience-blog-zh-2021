<html>
<head>
<title>Understanding Transformations in Computer Vision:</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">理解计算机视觉中的转换；</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/understanding-transformations-in-computer-vision-b001f49a9e61?source=collection_archive---------3-----------------------#2021-08-04">https://towardsdatascience.com/understanding-transformations-in-computer-vision-b001f49a9e61?source=collection_archive---------3-----------------------#2021-08-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/0b316216aec4b88fb684b6d366c5b98c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uCwna3q3ANkzvxX4"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">克里斯多夫·伯恩斯在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h2 id="3151" class="je jf jg bd b dl jh ji jj jk jl jm dk jn translated" aria-label="kicker paragraph">入门指南</h2><div class=""/><div class=""><h2 id="d3f8" class="pw-subtitle-paragraph km jp jg bd b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dk translated">仿射变换和单应性概述</h2></div><h1 id="99ac" class="le lf jg bd lg lh li lj lk ll lm ln lo kv lp kw lq ky lr kz ls lb lt lc lu lv bi translated">内容</h1><ul class=""><li id="e7cc" class="lw lx jg ly b lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">仿射变换</li><li id="bd75" class="lw lx jg ly b lz mo mb mp md mq mf mr mh ms mj mk ml mm mn bi translated">单应性</li></ul><p id="1b27" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">—齐次坐标</p><p id="e784" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">—针孔摄像机型号</p><p id="9bdd" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">—单应性方程</p><ul class=""><li id="653a" class="lw lx jg ly b lz mv mb mx md ni mf nj mh nk mj mk ml mm mn bi translated">参考</li></ul></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><p id="60dd" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">变换是计算机视觉的重要组成部分，理解它们如何工作为更高级的技术奠定了基础。</p><p id="9deb" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">在这里，我将主要介绍<strong class="ly jq">仿射变换</strong>和<strong class="ly jq">单应性。</strong></p></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><h1 id="69eb" class="le lf jg bd lg lh ns lj lk ll nt ln lo kv nu kw lq ky nv kz ls lb nw lc lu lv bi translated">仿射变换:</h1><p id="3e50" class="pw-post-body-paragraph mt mu jg ly b lz ma kq mw mb mc kt my md nx na nb mf ny nd ne mh nz ng nh mj ij bi translated">仿射变换是最简单的变换形式。这些变换在满足以下特性的意义上也是线性的:</p><ul class=""><li id="1d4f" class="lw lx jg ly b lz mv mb mx md ni mf nj mh nk mj mk ml mm mn bi translated">线条映射到线条</li><li id="306d" class="lw lx jg ly b lz mo mb mp md mq mf mr mh ms mj mk ml mm mn bi translated">点映射到点</li><li id="4aec" class="lw lx jg ly b lz mo mb mp md mq mf mr mh ms mj mk ml mm mn bi translated">平行线保持平行</li></ul><p id="85ca" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">仿射变换的一些常见例子是<strong class="ly jq">平移</strong>、<strong class="ly jq">扩展</strong>、<strong class="ly jq">旋转</strong>、<strong class="ly jq">剪切</strong>和<strong class="ly jq">反射</strong>。此外，这些变换的任何组合(如膨胀后的旋转)都是另一种仿射变换。</p><div class="oa ob oc od gt ab cb"><figure class="oe is of og oh oi oj paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/362493fb7bf5c7427f7c7d7ca64b8224.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/1*KjbVyjIqxUypAZkbWIlJSQ.gif"/></div></figure><figure class="oe is of og oh oi oj paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/5d49a61b492bd224695edda5074cea67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/1*xzrbjrS8gvEoGORFDAWhqQ.gif"/></div></figure></div><div class="ab cb"><figure class="oe is of og oh oi oj paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/2f10f3eeb1713e4083967f03eeb9402a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/1*K256jbOSV1LaR97q9-uBsw.gif"/></div></figure><figure class="oe is of og oh oi oj paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/a387728e7373afaf56fb86999001d0b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/1*mFYHxmTZv1dWoFYMBJnmYw.gif"/></div><p class="iz ja gj gh gi jb jc bd b be z dk ok di ol om translated">基本仿射变换的示例(图片由作者提供)</p></figure></div><p id="0e72" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">与其将仿射变换分解成不同的情况，不如有一个统一的定义。因此，我们转向使用矩阵作为线性变换来定义仿射变换。如果你不熟悉将矩阵解释为空间的线性变换，3Blue1Brown有一个关于这个主题的精彩视频:</p><figure class="oa ob oc od gt is"><div class="bz fp l di"><div class="on oo l"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">为了将矩阵理解为线性变换</p></figure><p id="4513" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">本质上，我们可以把仿射变换看作是首先用矩阵进行某种线性变换，然后用某种平移进行组合。</p><p id="4d87" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">在2D的情况下，仿射变换的等式由下式给出:</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div class="gh gi op"><img src="../Images/17224089a444ad25b284d1498ebaf3eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*b3o2t0eOOlZc3f0_D_JpQw.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">2D仿射变换的方程式(图片由作者提供)</p></figure><p id="c0b1" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">这里，矩阵用条目(<em class="oq"> x </em> 1和<em class="oq"> x </em> 2)表示向量上的一些线性变换，例如反射、剪切、旋转、膨胀或所有四者的组合。需要注意的是，由于变换是线性的，所以它也一定是可逆的，所以矩阵的行列式是非零的。转换的最后一步是向量[ <em class="oq"> t </em> 1，<em class="oq"> t </em> 2]的平移，完成到向量[ <em class="oq"> y </em> 1，<em class="oq"> y </em> 2]的转换。</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi or"><img src="../Images/e1fb3e3b8fb275ee863275f593e1f07c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*iNCR7rHrcgvOYkO1B3CpZw.gif"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">2D仿射变换的例子(图片由作者提供)</p></figure><p id="dd25" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">仿射变换也可以用下面的等式推广到n维的<em class="oq">维:</em></p><figure class="oa ob oc od gt is gh gi paragraph-image"><div class="gh gi os"><img src="../Images/5c2387f1ad4c0063f3cb412718576f27.png" data-original-src="https://miro.medium.com/v2/resize:fit:734/format:webp/1*cfqXGOb4I9yxFvnZcSoxzw.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">n维仿射变换方程</p></figure><p id="8ba4" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">这个变换通过应用线性变换<em class="oq"> A </em>(其中<em class="oq"> A </em>是一个<em class="oq"> n×n，</em>可逆矩阵)，然后应用向量<em class="oq"> b </em> ( <em class="oq"> b </em>具有维度<em class="oq"> n </em> ×1)的平移，将向量<em class="oq"> x </em>映射到向量<em class="oq"> y </em>。</p><p id="858b" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">总之，仿射变换可以表示为由一些平移组成的线性变换，并且它们在为计算机视觉修改图像方面极其有效。事实上，图像预处理很大程度上依赖于仿射变换来进行缩放、旋转、移位等。</p><h1 id="fe9a" class="le lf jg bd lg lh li lj lk ll lm ln lo kv lp kw lq ky lr kz ls lb lt lc lu lv bi translated">单应性:</h1><p id="e096" class="pw-post-body-paragraph mt mu jg ly b lz ma kq mw mb mc kt my md nx na nb mf ny nd ne mh nz ng nh mj ij bi translated">单应是一种投影变换，因为我们利用投影来关联两个图像。同形异义词最初被引入来研究视角的变化，它们使人们能够更好地理解当我们从不同的角度看图像时，图像是如何变化的。</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ot"><img src="../Images/fac40399268ab66f217c5f568ac5e089.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sp_58whYW4jP6OQikfgmdg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">使用单应变换视角(鸣谢:<a class="ae jd" href="http://www.cs.umd.edu/class/fall2019/cmsc426-0201/files/16_Homography-estimation-and-decomposition.pdf" rel="noopener ugc nofollow" target="_blank">马里兰大学</a></p></figure><p id="4471" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">单应性的研究是通过检查相机根据其位置和方向拾取不同图像的事实来进行的。本质上，单应是同一场景的两个图像之间的变换，但是从不同的角度。只有两种情况适用单应性(这两种情况都假设世界视图可以用平面来建模):</p><ol class=""><li id="63bd" class="lw lx jg ly b lz mv mb mx md ni mf nj mh nk mj ou ml mm mn bi translated">图像是由同一个相机从不同的角度拍摄的(世界现在基本上是一个平面)</li><li id="a84b" class="lw lx jg ly b lz mo mb mp md mq mf mr mh ms mj ou ml mm mn bi translated">两台摄像机从<strong class="ly jq">不同的位置</strong>观察<strong class="ly jq">同一平面</strong></li></ol><div class="oa ob oc od gt ab cb"><figure class="oe is of og oh oi oj paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/de8ca64675f9cabfca77774affa61837.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/1*OKyTfWmme1poq2tkcZtjcA.gif"/></div></figure><figure class="oe is of og oh oi oj paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/cd84de02d93ca56812eebb019f73a633.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/1*W3o9zn56wFB4_zeOJ5K6kg.gif"/></div><p class="iz ja gj gh gi jb jc bd b be z dk ok di ol om translated">鸟瞰单应性的两个案例(图片由作者提供)</p></figure></div><p id="2796" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">然而，为了使用单应性，我们必须首先设计工具来描述一幅图像在相机上的表现。更具体地说，如果给我们一个<strong class="ly jq">摄像机</strong>和一个<strong class="ly jq">图像平面</strong>(图像出现的地方，也是摄像机的属性)，我们必须找到世界上的一个点(称为<strong class="ly jq">世界点</strong>)出现在图像平面上的位置。</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ov"><img src="../Images/5661e03d80b350011133f427870b4a99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZjBiSywtabZYSPTh43qiAg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">找到图像上的点的坐标是单应性的关键</p></figure><p id="50d7" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">因为光是直线传播的，所以我们知道在图像平面上出现了一个笛卡尔坐标的世界点(<em class="oq"> X，Y，Z </em>)，它位于图像平面与经过相机中心和世界点的直线(这条线就是光到达相机的路径)的交点处。</p><p id="8f2e" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">然而，为了正确地定义这个公式，我们必须绕道到射影几何中一个叫做齐次坐标的概念。</p><h2 id="ffb5" class="ow lf jg bd lg ox oy dn lk oz pa dp lo md pb pc lq mf pd pe ls mh pf pg lu jm bi translated">齐次坐标:</h2><p id="8281" class="pw-post-body-paragraph mt mu jg ly b lz ma kq mw mb mc kt my md nx na nb mf ny nd ne mh nz ng nh mj ij bi translated">齐次坐标(或<strong class="ly jq">射影坐标</strong>)是另一种坐标系，其优点是齐次坐标的公式往往比<strong class="ly jq">笛卡尔坐标</strong>(x-y平面上的点)中的公式简单得多。相比之下，齐次坐标使用3个坐标(<em class="oq"> x </em>'，<em class="oq"> y </em>'，<em class="oq"> z </em>')来表示空间中的点(一般来说，它们比笛卡尔坐标多使用一个坐标)。另外，将齐次坐标转换为笛卡尔坐标相对简单:</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ph"><img src="../Images/01f9fe11fb678b9c48986ae29c1ecd93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JCEoBsoYXUf3Ikn_J7Q9vg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">将齐次坐标转换为笛卡尔坐标</p></figure><p id="e58e" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">注意，当<em class="oq"> z' </em> =1时，齐次坐标很好地映射到笛卡尔坐标。再者，当<em class="oq">z’</em>= 0时，我们把对应的笛卡尔坐标解释为无穷远处的一点。记住这一点，让我们研究齐次坐标的一些应用。</p><p id="288c" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">首先，齐次坐标中的直线，只用3个点就可以表示出来。具体来说，你可以把一条线<em class="oq"> l </em>在齐次坐标下表示为(<em class="oq"> l </em> 1，<em class="oq"> l </em> 2，<em class="oq"> l </em> 3)。那么，这条线就是所有点的集合<em class="oq"> p= </em> ( <em class="oq"> x </em>，<em class="oq"> y </em>，<em class="oq"> z </em>)，使得<em class="oq"> l </em>与<em class="oq"> p </em>的点积为0。</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pi"><img src="../Images/d77ce550447fac98be4223032ade42ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NXZW7ADzKsZhXGr_x4rsKg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">用齐次坐标表示的线(图片由作者提供)</p></figure><p id="e4f4" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">注意的第二个性质是，给定两点<em class="oq"> p </em> 1=( <em class="oq"> a </em>，<em class="oq"> b </em>，<em class="oq"> c </em>)和<em class="oq"> p </em> 2 = ( <em class="oq"> d </em>，<em class="oq"> e </em>，<em class="oq"> f </em>)，直线<em class="oq"> l </em>经过<em class="oq"> p </em> 1和<em class="oq">p<em class="oq"/></em></p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pj"><img src="../Images/18c3ff7a9702fc4fd4e2960f42de0cd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2azSB0FyHrtMdg_eMhxQwA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">齐次坐标中两点之间的线(图片由作者提供)</p></figure><p id="249c" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">注意的最后一个性质是:两条直线<em class="oq"> l </em> 1和<em class="oq"> l </em> 2的交点(齐次坐标中)是两条直线的叉积给出的点<em class="oq"> p </em>。</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pk"><img src="../Images/6f6c805564347429cac84e9703a37446.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*buXe7Ty-e87KOC5LtZM_Pg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">齐次坐标中两条线的交点(图片由作者提供)</p></figure><p id="ac09" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">有了这些性质，我们现在就能很好地理解单应性背后的公式。</p><h2 id="3606" class="ow lf jg bd lg ox oy dn lk oz pa dp lo md pb pc lq mf pd pe ls mh pf pg lu jm bi translated">针孔摄像机型号:</h2><p id="fb62" class="pw-post-body-paragraph mt mu jg ly b lz ma kq mw mb mc kt my md nx na nb mf ny nd ne mh nz ng nh mj ij bi translated">我们现在回到我们的问题，在给定所述摄像机的位置和方向的情况下，找到一个<strong class="ly jq">世界点</strong> ( <em class="oq"> X </em>、<em class="oq"> Y </em>、<em class="oq">Z</em>)——这是在笛卡尔坐标中——位于所述摄像机的<strong class="ly jq">图像平面</strong>的位置。</p><p id="1ccf" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">特别地，我们发现世界点(<em class="oq"> X </em>，<em class="oq"> Y </em>，<em class="oq"> Z </em>，1)位于图像平面的点(<em class="oq">X’</em>，<em class="oq">Y’</em>，<em class="oq">Z’</em>)上，其中两个点在齐次坐标中，并且通过以下等式相关(<em class="oq"> f </em>是描述相机焦距的常数):</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pl"><img src="../Images/cbd7cd4158c0ae805ab9a92dd4826429.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_WwnIyzQ_CFJGULqbRmW2w.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">世界点齐次坐标与像平面齐次坐标的关系方程</p></figure><p id="5f08" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">从这里我们可以把(<em class="oq"> x </em>'，<em class="oq"> y </em>'，<em class="oq"> z </em>')转换成前面所说的图像平面上的笛卡尔坐标(<em class="oq"> x </em>，<em class="oq"> y </em>)。</p><p id="03d3" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">事实证明，将世界点转换为图像平面上的点的矩阵可以很好地分解，为我们提供了一种直观的方式来理解矩阵的作用:</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pm"><img src="../Images/c96b7db7070283e0daf5a19ffcf9997d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z_Oj5eMWxSNMMG9x2ZJzgQ.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">矩阵可以理解为两个动作:(1)缩放，(2)压缩到更低维度</p></figure><p id="f370" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">但是，由于图像上的坐标系不同于笛卡尔坐标系(左上角是像素坐标中的(0，0))，我们必须执行一次最终转换，以从同质图像平面坐标(<em class="oq">x’</em>、<em class="oq">y’</em>、<em class="oq">z’</em>)转换为同质<strong class="ly jq">像素坐标</strong>(<em class="oq">u’</em>、<em class="oq">v’</em>、<em class="oq">w’</em>)。</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pn"><img src="../Images/888d182353763794dbed6da5b8fa4e47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tUJFF6kcQ2HBIS2CTXvcpw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">像素坐标的表示(图片由作者提供)</p></figure><p id="1b75" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">因此，我们首先通过除以像素的大小来缩放我们的图像平面坐标(以便将它们转换成像素)，像素的大小在<em class="oq"> u </em>方向上是<em class="oq"> ρu </em>并且在<em class="oq"> v </em>方向上是<em class="oq"> ρv </em>。你可以认为这是把米这样的单位转换成像素。接下来，我们必须通过一些<em class="oq"> u </em> 0和<em class="oq"> v </em> 0来平移坐标，这样像素坐标的原点就在适当的位置。把这两个变换放在一起，我们得到下面的公式:</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi po"><img src="../Images/a94c1545dd821e28ee7810990ea29edb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ef4Eh4-HhwS6Bo-VEF9Lwg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">将图像平面坐标转换成像素坐标。</p></figure><p id="214f" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">最后，将所有东西放在一起，我们可以通过将世界点(<em class="oq"> X </em>，<em class="oq"> Y </em>，<em class="oq"> Z </em>，1)转换为像素坐标(<em class="oq">u’</em>，<em class="oq">v’</em>，<em class="oq">w’</em>)，来完成我们的相机模型，其中两者都以齐次坐标给出:</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pp"><img src="../Images/220c4541f0329efc6c46ed656d73a411.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D5_Ny8Dappa8jXqw9DtC5g.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">相机模型的方程式</p></figure><p id="9f0d" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">外部参数可以被认为是一个术语，它为我们提供了关于摄像机的方向(存储在旋转矩阵<em class="oq"> R </em>中)和位置(存储在向量<em class="oq"> t </em>中)的信息。</p><p id="a050" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">在实际中，我们并不经常知道所有的参数，所以我们可以近似相机矩阵来代替，它只是一些3×4的矩阵(通过矩阵乘法性质)；这是通过校准摄像机来实现的。</p><p id="0fa1" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">此外，相机矩阵的一个重要属性是缩放<em class="oq"> C </em>的条目给出了描述同一相机的新相机矩阵。这是因为如果我们将<em class="oq"> C </em>乘以某个常数<em class="oq"> λ </em>，那么<strong class="ly jq">同质</strong>像素坐标的所有条目也会被<em class="oq"> λ </em>缩放。然而，当我们从齐次坐标转换到笛卡尔坐标时(如前所示)，<em class="oq"> λ </em>被抵消，留下与缩放前相同的笛卡尔坐标。因此，因为比例因子是任意的，所以让相机矩阵的右下角的条目为1已经成为惯例。</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pq"><img src="../Images/20bdaaf89d46d9ccea93af0d2870ba1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D6fyNZvaAknQP9PUBre4zQ.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">相机矩阵的标准形式</p></figure><p id="f9ae" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">有了这些定义的方程，我们就非常接近获得单应性的公式。</p><h2 id="fd85" class="ow lf jg bd lg ox oy dn lk oz pa dp lo md pb pc lq mf pd pe ls mh pf pg lu jm bi translated">单应方程；</h2><p id="0935" class="pw-post-body-paragraph mt mu jg ly b lz ma kq mw mb mc kt my md nx na nb mf ny nd ne mh nz ng nh mj ij bi translated">让我们再一次检查针孔摄像机的设置。在这个设置中，我们的摄像机将拍摄位于一个平面上的点<em class="oq"> P </em> =( <em class="oq"> X </em>，<em class="oq"> Y </em>，<em class="oq"> Z </em>)，其中点<em class="oq"> P </em>在图像平面上的同质像素坐标中显示为(<em class="oq">u’</em>，<em class="oq">v’</em>，<em class="oq">w’</em>)。现在，我们可以用一个聪明的技巧来选择坐标系。也就是说，我们让<em class="oq"> X </em>和<em class="oq"> Y </em>轴位于平面内，使得<em class="oq"> Z </em>轴指向平面外。因此，平面上所有点的<em class="oq"> Z </em>坐标为0，意味着<em class="oq"> P </em>的形式为<em class="oq"> P </em> =( <em class="oq"> X </em>，<em class="oq"> Y </em>，0)。</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pr"><img src="../Images/dd4374dce2b2f3f18ab08de7be1575ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yggdz-weS7BNYTziSnPYNQ.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">方便选择坐标系(<strong class="bd ps">坐标显示为</strong> <strong class="bd ps">齐次</strong>)(图片由作者提供)</p></figure><p id="fca9" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">现在，将其代入我们的相机方程，并使用<em class="oq"> Z </em> =0，我们得到以下简化:</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pt"><img src="../Images/56655a91351b83c8e971706b2ee07f2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NSqcDqFkZIgYG0PVm5x6WA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">利用照相机等式中的Z=0</p></figure><p id="8ff0" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">这个新的相机矩阵被称为<strong class="ly jq">单应矩阵</strong> <strong class="ly jq">矩阵</strong> <em class="oq"> H </em>，有8个未知条目(因为右下角的1是固定的)。通常，平面单应矩阵的条目用<em class="oq"> H </em>而不是<em class="oq"> C </em>表示，如下所示:</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pu"><img src="../Images/64fbb3306fcc251ba2c6fbbe7d561af0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lktzRMJ6Jj8Y1RfecQP5Dw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">平面单应性方程</p></figure><p id="2962" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">我们现在最后的任务是估计<em class="oq"> H </em>的条目。由于单应矩阵中有8个未知数，并且平面上的每个世界点有2个坐标，我们将需要<strong class="ly jq">在4个世界点</strong>上校准摄像机，以便估计<em class="oq"> H </em>的所有条目。</p><p id="10ce" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">概括地说，单应性是一种变换，当两个图像是同一平面的图片，但从不同的角度看，我们可以使用它将一个图像转换为另一个图像。在数学上，这种变换由单应矩阵执行，该单应矩阵是具有8个未知数的3×3矩阵，并且可以通过用4个对应点校准图像来估计(使用更多点获得更好的近似，但是4是所需的最小值)。</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi or"><img src="../Images/7ca23d21c89006f17f66ccd13e9a910d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*VPAw0Apk88ep1e3SP6KGMA.gif"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">带有黄色校准点的单应性示例(图片由作者提供)</p></figure><p id="478d" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated">总而言之，homgraphies是一个强大的工具，可应用于像<strong class="ly jq">增强现实</strong>(将某些图像投影到环境中)和<strong class="ly jq">图像拼接</strong>(将多幅图像组合起来创建一个更大的全景图)等领域。</p><h2 id="93a2" class="ow lf jg bd lg ox oy dn lk oz pa dp lo md pb pc lq mf pd pe ls mh pf pg lu jm bi translated">参考</h2><p id="c60d" class="pw-post-body-paragraph mt mu jg ly b lz ma kq mw mb mc kt my md nx na nb mf ny nd ne mh nz ng nh mj ij bi translated">【https://en.wikipedia.org/wiki/Homogeneous_coordinates T4】</p><p id="fbae" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated"><a class="ae jd" href="http://www.cs.umd.edu/class/fall2019/cmsc426-0201/files/16_Homography-estimation-and-decomposition.pdf" rel="noopener ugc nofollow" target="_blank">http://www . cs . UMD . edu/class/fall 2019/cmsc 426-0201/files/16 _ homo graphy-estimation-and-decomposition . pdf</a></p><p id="de11" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated"><a class="ae jd" href="https://medium.com/swlh/image-processing-with-python-image-warping-using-homography-matrix-22096734f09a" rel="noopener">https://medium . com/swlh/image-processing-with-python-image-warping-using-单应矩阵-22096734f09a </a></p><p id="8d7f" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated"><a class="ae jd" href="https://www.youtube.com/watch?v=l_qjO4cM74o" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=l_qjO4cM74o</a></p><p id="710b" class="pw-post-body-paragraph mt mu jg ly b lz mv kq mw mb mx kt my md mz na nb mf nc nd ne mh nf ng nh mj ij bi translated"><a class="ae jd" href="https://www.youtube.com/watch?v=fVJeJMWZcq8" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=fVJeJMWZcq8</a></p></div></div>    
</body>
</html>