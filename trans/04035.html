<html>
<head>
<title>Visualizing Mexican wildfires during 2017 with folium</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用树叶可视化2017年墨西哥野火</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/visualizing-mexican-wildfires-during-2017-with-folium-8917fc1f491d?source=collection_archive---------15-----------------------#2021-04-05">https://towardsdatascience.com/visualizing-mexican-wildfires-during-2017-with-folium-8917fc1f491d?source=collection_archive---------15-----------------------#2021-04-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="a189" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/data-journalism" rel="noopener" target="_blank">数据新闻</a></h2><div class=""/><div class=""><h2 id="11bc" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">一个难以置信的，强大的和友好的工具来显示地理空间数据</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/b948019b37a119cd774b162cca8f8a3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cejyjBC4hm79PByjftddLg.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">最后用<strong class="bd le">叶可视化。由E. Camacho制作</strong></p></figure><h1 id="dc4c" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">作者:</h1><p id="c24a" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">阿罗约-贝拉斯克斯·艾萨克；卡马乔-佩雷斯·恩里克</p><h1 id="94c0" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">介绍</h1><p id="ef9a" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">在世界范围内，火灾发生的规模、频率和强度都显著增加。墨西哥是一个非常多样化的国家，经常发生森林火灾，尤其是在厄尔尼诺年。然而，在墨西哥，火灾主要是由人类引起的，道路可达性和到城镇的距离等因素通常与火灾的频率和分布有关。</p><p id="3588" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">本教程的总体目标是展示如何使用数据科学可视化工具，但以一种特殊的方式，即<code class="fe mz na nb nc b"><strong class="lz ja">folium</strong></code>模块，来了解2017年墨西哥的火灾。</p><h1 id="0e1b" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">CONAFOR数据库</h1><p id="83b8" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">在墨西哥，森林火灾的预防和控制由国家森林防火计划(CONAFOR，其西班牙语缩写)执行，我们将通过以下链接使用其2017年的数据库:<a class="ae mt" href="https://www.datos.gob.mx/busca/organization/conafor" rel="noopener ugc nofollow" target="_blank">【2】</a><a class="ae mt" href="http://187.218.230.4/OpenData/Incendios/" rel="noopener ugc nofollow" target="_blank">【3】</a></p><div class="nd ne gp gr nf ng"><a href="https://www.datos.gob.mx/busca/organization/conafor" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd ja gy z fp nl fr fs nm fu fw iz bi translated">墨西哥酋长协会</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">地图以文件和图像的形式表现了易受项目影响的表面…</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">www.datos.gob.mx</p></div></div><div class="np l"><div class="nq l nr ns nt np nu ky ng"/></div></div></a></div><div class="nd ne gp gr nf ng"><a href="http://187.218.230.4/OpenData/Incendios/" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd ja gy z fp nl fr fs nm fu fw iz bi translated">/open data/incidendios的索引</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">墨西哥野火数据库</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk">187.218.230.4</p></div></div></div></a></div><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h1 id="c577" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">数据探索</h1><p id="6928" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">首先，将对国家森林委员会的数据进行基本探索。</p><ul class=""><li id="ee57" class="nx ny iq lz b ma mu md mv mg nz mk oa mo ob ms oc od oe of bi translated">行数:8896</li><li id="4d90" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated">列数:53</li><li id="ac03" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated">数据集的统计摘要:</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h1 id="11ae" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">单位转换</h1><h2 id="c8d9" class="ol lg iq bd lh om on dn ll oo op dp lp mg oq or lr mk os ot lt mo ou ov lv iw bi translated">可疑数据</h2><p id="5092" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">在进行任何转换之前，我们必须确保数据是数值类型:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="963d" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">我们必须将<strong class="lz ja"> 19 </strong>改为数字数据</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h2 id="7d5b" class="ol lg iq bd lh om on dn ll oo op dp lp mg oq or lr mk os ot lt mo ou ov lv iw bi translated">转换功能</h2><p id="62a5" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">使用“度”、“分”和“秒”列，我们通过以下函数找到纬度和经度的十进制度:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ow nw l"/></div></figure><p id="601a" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">有了经度和纬度数据，我们就去掉了“度”、“分”和“秒”这几列</p><h1 id="4011" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">用<code class="fe mz na nb nc b"><strong class="ak">Folium</strong></code>可视化野火</h1><p id="356f" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">当我们有涉及位置、区域或地理区域的数据时，将它们清晰且用户友好地可视化是至关重要的。</p><p id="eddc" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">Python的库，<code class="fe mz na nb nc b"><strong class="lz ja">Folium</strong></code><a class="ae mt" href="https://python-visualization.github.io/folium/" rel="noopener ugc nofollow" target="_blank">【4】</a>，是这种情况下最可靠、最理想的工具。在这本笔记本中，我们将解释如何可视化2017年在墨西哥记录的野火。显示的每张地图都有其详细的程序，可与其他数据一起重新创建。</p><p id="5dd4" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">import folium</strong></code></p><p id="5eda" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">首先，我们将使用数据的经度和纬度信息创建一个数组。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="d8c4" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">每一张用树叶制成的地图都应该装在底图的上面。这个基地是由<code class="fe mz na nb nc b"><strong class="lz ja">Map()</strong></code>函数创建的:</p><ul class=""><li id="7016" class="nx ny iq lz b ma mu md mv mg nz mk oa mo ob ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">location</strong></code> <em class="ox"> (tuple) </em>:中心的地图位置为元组<em class="ox">(纬度，经度)</em></li><li id="611e" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">zoom_start</strong></code><em class="ox">【int】</em>:显示地图时你想要的缩放量</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h2 id="94b2" class="ol lg iq bd lh om on dn ll oo op dp lp mg oq or lr mk os ot lt mo ou ov lv iw bi translated">野火接近度</h2><p id="f03f" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">当我们谈到一些自然灾害时(虽然野火很大程度上是人为造成的)，每个人都想知道它离你住的地方有多近，如果很近，有多少或者已经发生了多少？这种情况就是<strong class="lz ja"> <em class="ox">热图</em> </strong>有助于显示各点(数据)的接近程度的地方。幸运的是，叶有这个工具:</p><p id="0151" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">from folium.plugins import HeatMap</strong></code></p><p id="c4fc" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">相关参数(以及我们将要使用的参数)是:</p><ul class=""><li id="e393" class="nx ny iq lz b ma mu md mv mg nz mk oa mo ob ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">data</strong></code> <em class="ox">(列表或数组)</em>:地图上要绘制的数据的地理位置。</li><li id="f737" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">name</strong></code> <em class="ox">(字符串)</em>:图层的名称。这个会出现在<code class="fe mz na nb nc b">LayerControls</code>里。[默认:<code class="fe mz na nb nc b">None</code> ]</li><li id="b57f" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">radius</strong></code> <em class="ox"> (int) </em>:地图上每个数据点的半径。[默认:<code class="fe mz na nb nc b">15</code> ]</li><li id="156f" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">max_val</strong></code> <em class="ox">(浮点)</em>:一个点的最大强度值。[默认:<code class="fe mz na nb nc b">1</code> ]</li><li id="ead0" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">min_opacity</strong></code> <em class="ox"> (float) </em>:最小不透明度值，在该值处<em class="ox">热图</em>将开始“加热”。[默认:<code class="fe mz na nb nc b">1</code> ]</li><li id="2db8" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">blur</strong></code> <em class="ox"> (int) </em>:点中<em class="ox">模糊</em>的量。数字越大，重点就越模糊。[默认:<code class="fe mz na nb nc b">15</code> ]</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="d72b" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated"><strong class="lz ja">重要提示:</strong>如果我们想修改任何地图参数，重新运行创建地图的代码(<code class="fe mz na nb nc b"><strong class="lz ja">Map()</strong></code>)是很重要的，因为如果我们只运行<code class="fe mz na nb nc b"><strong class="lz ja">HeatMap()</strong></code>函数，它会在地图上叠加一个新的图层。处理这个问题的最好方法是，一旦代码准备好了，就将所有内容放在同一个单元格中，以便在需要更改某些参数时可以重新运行所有内容:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ow nw l"/></div></figure><h2 id="c7ef" class="ol lg iq bd lh om on dn ll oo op dp lp mg oq or lr mk os ot lt mo ou ov lv iw bi translated">野火持续时间(天)</h2><p id="5b32" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">我们可以看到我们的<em class="ox">数据集</em>包含有价值的信息，其中之一是火灾的持续时间。此外，尽管我们有开始和结束日期，但我们有一个名为<code class="fe mz na nb nc b"><strong class="lz ja">Duration time (days)</strong></code>的变量，它已经对时间进行了分类。</p><p id="81c1" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">为了更好地形象化，我们可以用颜色对各个时期进行分类。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oy"><img src="../Images/b50f1295672310ea42ba311968c26f32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*915NF2MH8vtGGWQsfCWzew.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">野火持续时间的颜色表示。图片作者:艾萨克·阿罗约</p></figure><p id="4186" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">下一步，我们将把颜色代码添加到我们的<em class="ox">数据集</em>中，并将数据从西班牙语翻译成英语</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ow nw l"/></div></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="cb8b" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">我们将如何处理这些信息？我们将画一些小圆，它们的中心在<strong class="lz ja">纬度</strong>和<strong class="lz ja">经度</strong>，它们的颜色由<strong class="lz ja">持续时间(颜色)给出。</strong>该选项将通过功能<code class="fe mz na nb nc b"><strong class="lz ja">Circle():</strong></code>实现</p><ul class=""><li id="9af7" class="nx ny iq lz b ma mu md mv mg nz mk oa mo ob ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">location</strong></code> <em class="ox">(元组或列表)</em>:经纬度(对)。</li><li id="ee16" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">popup</strong></code> <em class="ox">(字符串o </em> <code class="fe mz na nb nc b"><em class="ox">folium.Popup</em></code> <em class="ox"> ) </em>:为点击时显示的对象输入文本或可视化。</li><li id="404b" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">radius</strong></code> <em class="ox">(浮点)</em>:圆的半径，单位为米。</li><li id="276b" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">color</strong></code> <strong class="lz ja"> </strong> <em class="ox">【字符串】</em>:圆轮廓的颜色，十六进制代码。</li><li id="5dbf" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">fill</strong></code> <em class="ox">(字符串)</em>:如果<code class="fe mz na nb nc b">fill = True</code>则该函数要求一个<code class="fe mz na nb nc b"><strong class="lz ja">fill_color</strong></code></li><li id="380e" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">fill_color</strong></code> <em class="ox"> (bool) </em>:圆的填充颜色。</li></ul><p id="5734" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">为了显示该国的所有火灾，我们将在<code class="fe mz na nb nc b"><strong class="lz ja">for</strong></code>循环中使用<code class="fe mz na nb nc b"><strong class="lz ja">Circle()</strong></code>:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h2 id="d688" class="ol lg iq bd lh om on dn ll oo op dp lp mg oq or lr mk os ot lt mo ou ov lv iw bi translated">组合:持续时间+受影响区域</h2><p id="5cc4" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">继续圆图，我们可以给<code class="fe mz na nb nc b"><strong class="lz ja">radius</strong></code>参数一个更好的理解火的尺寸。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="24fb" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated"><strong class="lz ja">受灾面积(ha) </strong>的单位是<strong class="lz ja">公顷</strong>，因此我们可以用它来确定我们的圆的半径，以便对这些自然灾害的程度有一个初步的直观了解(和近似)。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oz nw l"/></div></figure><p id="5fa9" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">其中𝑅以<strong class="lz ja">百米</strong> (1 hm = 100 m)为单位，翻译成Python为:</p><p id="769a" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">radius = np.sqrt( df[‘Affected area (ha)’].values[i]/np.pi )*1000</strong></code></p><p id="a889" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">末端的<code class="fe mz na nb nc b"><strong class="lz ja">*1000</strong></code>用于将圆缩放10倍(真实数据中的1米=可视化数据中的10米)</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h2 id="7c80" class="ol lg iq bd lh om on dn ll oo op dp lp mg oq or lr mk os ot lt mo ou ov lv iw bi translated">受影响的总面积(公顷)</h2><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pa nw l"/></div></figure><p id="a60a" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">仅用圆圈还不足以全面了解情况，我们还有关于受影响面积(公顷)的信息，可变名称为<strong class="lz ja">受影响面积(公顷):</strong>。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="dd40" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">我们可以按州对它们进行分组，并在<em class="ox">数据帧</em>中获得受影响区域的总和</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="5152" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">为了获得因野火造成的绿色区域损失的清晰而醒目的地图，我们将使用额外的资源:</p><ul class=""><li id="892d" class="nx ny iq lz b ma mu md mv mg nz mk oa mo ob ms oc od oe of bi translated">墨西哥各州的ID代码</li><li id="f848" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated">用于可视化的JSON文件</li></ul><h2 id="83e2" class="ol lg iq bd lh om on dn ll oo op dp lp mg oq or lr mk os ot lt mo ou ov lv iw bi translated"><strong class="ak">墨西哥各州ID代码</strong></h2><p id="34f0" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated"><strong class="lz ja"> affected_area_states </strong>的El <em class="ox">数据框</em>对于我们想要绘制的地图来说有些不完整，因此我们需要使用以下csv文件中的信息来完成:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="e7bd" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">我们可以注意到两个州在名称上不匹配，因此执行<code class="fe mz na nb nc b">merge</code>对我们不利，因此我们将更改名称:</p><p id="e658" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated"><code class="fe mz na nb nc b">affected_area_states.iloc[6,0] = ‘CDMX’<br/>affected_area_states.iloc[16,0] = ‘Estado de México</code></p><h2 id="26d4" class="ol lg iq bd lh om on dn ll oo op dp lp mg oq or lr mk os ot lt mo ou ov lv iw bi translated"><strong class="ak"> JSON文件</strong></h2><p id="4f5e" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">有了<code class="fe mz na nb nc b"><strong class="lz ja">IDNAMES</strong></code>，我们只需在墨西哥各州上“绘制和绘画”，这些州的几何图形将由下面的<strong class="lz ja"> JSON文件给出:</strong> <em class="ox"> states_mx.json </em></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="9519" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">让我们看看我们的数据分布，以便按受影响的区域进行分类:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pb"><img src="../Images/fccce938b326db1eb9b37b30b0e5f90c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hGxdgcZGgu9L3_J4n3xLDw.png"/></div></div></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h2 id="146e" class="ol lg iq bd lh om on dn ll oo op dp lp mg oq or lr mk os ot lt mo ou ov lv iw bi translated">彩色地图</h2><p id="04c3" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">我们将要使用的函数是<code class="fe mz na nb nc b"><strong class="lz ja">GeoJson()</strong></code>，它的参数是:</p><ul class=""><li id="9521" class="nx ny iq lz b ma mu md mv mg nz mk oa mo ob ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">data</strong></code> <em class="ox"> (file，dict </em>或<em class="ox"> str) </em>:您想要绘制的GeoJSON数据。</li><li id="c853" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">style_function</strong></code> <em class="ox">(函数)</em>:将GeoJSON特征映射到样式字典的函数。在我们的例子中，风格字典如下:</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ow nw l"/></div></figure><p id="93b1" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">而<code class="fe mz na nb nc b"><strong class="lz ja">COLOR_FUNCTION</strong></code> <strong class="lz ja"> </strong>则如下:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ow nw l"/></div></figure><p id="4cae" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">最后我们得到了这个结果:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="6a20" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">要在地图中添加图例，您可以使用本文末尾我的GitHub库中的<em class="ox"> Jupyter笔记本</em>中显示的步骤。</p><p id="3aa1" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">环境和自然资源部长(SEMARNAT)有一个向公众开放的每年各州野火数量的登记册，所以我们可以很容易地检查他们提供的数据是否是向公众开放的。进行这种练习，即使听起来很愚蠢，也是很重要的。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><div class="nd ne gp gr nf ng"><a href="http://dgeiawf.semarnat.gob.mx:8080/ibi_apps/WFServlet?IBIF_ex=D3_RFORESTA05_01&amp;IBIC_user=dgeia_mce&amp;IBIC_pass=dgeia_mce&amp;NOMBREENTIDAD=*&amp;NOMBREANIO=*" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd ja gy z fp nl fr fs nm fu fw iz bi translated">SEMARNAT</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">《森林燃烧结果报告》中的森林燃烧数据</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">dgieawf . semarnat . gob . MX</p></div></div><div class="np l"><div class="pc l nr ns nt np nu ky ng"/></div></div></a></div><p id="2536" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">在审查结束时，我们可以看到，他们在网站上与我们分享的信息确实与我们从国家森林委员会的公开数据中收集的信息相同。</p><h1 id="148a" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">结论</h1><p id="f723" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">多亏了叶，我们可以呈现2017年墨西哥野火的行为，比如:</p><ul class=""><li id="2c05" class="nx ny iq lz b ma mu md mv mg nz mk oa mo ob ms oc od oe of bi translated">野火接近度</li><li id="b2e0" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated">野火持续时间</li><li id="da32" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated">每场野火和每个州的总受灾面积，这一切都要归功于以下leav功能:</li><li id="c5e6" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">Map()</strong></code></li><li id="3d13" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">HeatMap()</strong></code></li><li id="15b0" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">Circle()</strong></code></li><li id="de9c" class="nx ny iq lz b ma og md oh mg oi mk oj mo ok ms oc od oe of bi translated"><code class="fe mz na nb nc b"><strong class="lz ja">GeoJson()</strong></code></li></ul><p id="2406" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">因此，下次当您遇到带有地理信息的数据时，请立即使用<code class="fe mz na nb nc b"><strong class="lz ja">folium</strong></code>。</p><p id="928e" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">我们知道还有其他工具；我们不想把它们最小化。我们只是展示了另一个工具。</p><p id="63bc" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">要查看完整教程，请访问:</p><div class="nd ne gp gr nf ng"><a href="https://github.com/isaacarroyov/data_visualization_practice/tree/master/Python/visualizing_mexican_wildfires_tds" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd ja gy z fp nl fr fs nm fu fw iz bi translated">data _ visualization _ practice/Python/visualizing _ Mexican _ wild fires _ TDS at master…</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">作者:Camacho-Perez Enrique，Arroyo-Velázquez Isaac尚未发现任何记录表明野火是一种自然灾害，在…</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">github.com</p></div></div><div class="np l"><div class="pd l nr ns nt np nu ky ng"/></div></div></a></div><h1 id="5cc2" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">参考</h1><p id="1217" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated"><strong class="lz ja">【1】</strong>华雷斯·奥罗兹科，S. <em class="ox">墨西哥米却肯州森林火灾风险模型</em>【国际地理信息科学与地球观测研究所硕士论文】<br/><a class="ae mt" href="https://library.itc.utwente.nl/papers_2008/msc/nrm/orozco.pdf" rel="noopener ugc nofollow" target="_blank">https://library . ITC . ut wente . nl/papers _ 2008/MSC/NRM/orozco . pdf</a></p><p id="a4dc" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated"><strong class="lz ja">【2】</strong>墨西哥开放数据-confor-institutions<br/><a class="ae mt" href="https://www.datos.gob.mx/busca/organization/conafor" rel="noopener ugc nofollow" target="_blank">https://www . data . gob . MX/search/organization/confor</a></p><p id="dc5b" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated"><strong class="lz ja">【3】</strong>【指数】<br/><a class="ae mt" href="http://187.218.230.4/OpenData/Incendios/" rel="noopener ugc nofollow" target="_blank">【http://187 . 218 . 230 . 4/openata/fire/</a></p><p id="41ac" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated"><strong class="lz ja">【4】</strong>【文件】<br/><a class="ae mt" href="https://python-visualization.github.io/folium/" rel="noopener ugc nofollow" target="_blank">【https://python-visualization . github . io/folum/</a></p><p id="908a" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated"><strong class="lz ja"/>周刊。专题查询<br/><a class="ae mt" href="http://dgeiawf.semarnat.gob.mx:8080/ibi_apps/WFServlet?IBIF_ex=D3_RFORESTA05_01&amp;IBIC_user=dgeia_mce&amp;IBIC_pass=dgeia_mce&amp;NOMBREENTIDAD=*&amp;NOMBREANIO=" rel="noopener ugc nofollow" target="_blank">【http://dgeiawf . semarnat . gob . MX:8080/ibi _ apps/wfservlet？IBF _ ex = D3 _ erformesta 05 _ 01&amp;【IBC _ user = dgeia _ MCE】&amp;【IBC _ pass = dgeia _ MCE】&amp;【nomanio =</a>*</p></div></div>    
</body>
</html>