<html>
<head>
<title>Plotly Dash: From Development to Deployment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Plotly Dash:从开发到部署</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/plotly-dash-from-development-to-deployment-c9500d16581a?source=collection_archive---------6-----------------------#2021-05-23">https://towardsdatascience.com/plotly-dash-from-development-to-deployment-c9500d16581a?source=collection_archive---------6-----------------------#2021-05-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5061" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一本关于Plotly Dash的简单易懂的实践教程。在这个过程中学习一点<strong class="ak"> HTML </strong>、<strong class="ak"> CSS </strong>、<strong class="ak"> Python Decorators </strong>，以及<strong class="ak"> Docker </strong>。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5b952cafdce7fbf6f683d00fcec87a29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tMcMzdN5vqFKcCjj"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@lukechesser?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卢克·切瑟</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="dd71" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> Plotly Dash </strong>是一个惊人的框架，可以完全使用Python来构建交互式仪表盘。由于仪表板类似于一个网站，肯定也涉及到一点HTML &amp; CSS，但请放心，它是如此的基础，甚至我在创建我的第一个仪表板时就学会了。</p><p id="eb0f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本教程中，我们将构建一个COVID19仪表板，显示印度COVID19病例、康复和死亡的增长/下降情况。使用这个<a class="ae kv" href="https://covid-dashboard-india.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">链接</a>可以访问仪表板，使用这个<a class="ae kv" href="https://github.com/anshuls235/covid19-dashboard" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>可以访问底层代码。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/68ddfbff799b601500295e19e96368bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jiXEDC8AykUqtr5hSqWXAQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">截图来自Aarogya Setu(COVID更新部分)</p></figure><p id="b14e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是一张GIF图片，展示了我用Plotly Dash制作的仪表盘。我从Aarogya Setu应用程序中获得了灵感，因为我不认为我有设计头脑。此外，我觉得这款应用在阐述数据见解方面做得很好。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/f32e6d17f739423a53e8aa467a328fbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*Aofh5mVGqg0uZA6gJB022A.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用Plotly Dash构建的COVID19仪表板</p></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="ac4f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">开发和设置每个人都可以看到的仪表板的整个过程的步骤大致如下</p><ol class=""><li id="bd19" class="mb mc iq ky b kz la lc ld lf md lj me ln mf lr mg mh mi mj bi translated">找出数据源💽</li><li id="c797" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated">创建静态仪表板📊</li><li id="abe3" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated">让它互动💹</li><li id="cede" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated">集装箱化一切📦</li><li id="e84f" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated">部署🖥️项目</li></ol><p id="8e4a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我将详细阐述每一点。</p><blockquote class="mp mq mr"><p id="c1c7" class="kw kx ms ky b kz la jr lb lc ld ju le mt lg lh li mu lk ll lm mv lo lp lq lr ij bi translated">我建议总是为你所有的Python项目创建一个单独的环境。这使它变得很容易，因为你不会面临任何依赖问题，而且它对部署也很有帮助。Anaconda 是我的首选工具。</p></blockquote><h1 id="f30a" class="mw mx iq bd my mz na nb nc nd ne nf ng jw nh jx ni jz nj ka nk kc nl kd nm nn bi translated">1.找出数据源</h1><p id="7bb0" class="pw-post-body-paragraph kw kx iq ky b kz no jr lb lc np ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">这是一项任务，可以像使用从Kaggle或任何其他数据平台下载的CSV文件一样简单，也可以像从网站上抓取大型数据集一样困难。</p><p id="842a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我在仪表板上使用的数据集来自<a class="ae kv" href="https://github.com/covid19india/api" rel="noopener ugc nofollow" target="_blank">这个API </a>。有多种API，您可以根据需要使用它们。唯一需要记住的是，尽管所有的历史数据都存在，但是当天的数据每天都在刷新。因此，这是你在设计数据源时需要注意的一件事:新数据应该每天添加。</p><p id="8a84" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">既然数据源已经弄清楚了，就需要一种存储数据的方法。它可以是任何东西，如CSV，SQL表，e.t.c。由于数据不多，为了保持简单，我使用CSV文件作为<a class="ae kv" href="https://github.com/anshuls235/covid19-dashboard/tree/master/data" rel="noopener ugc nofollow" target="_blank">我的数据库</a>，添加和更新记录的逻辑可以在这里<a class="ae kv" href="https://github.com/anshuls235/covid19-dashboard/blob/master/dataset.py" rel="noopener ugc nofollow" target="_blank">找到</a>。</p><h1 id="4899" class="mw mx iq bd my mz na nb nc nd ne nf ng jw nh jx ni jz nj ka nk kc nl kd nm nn bi translated">2.创建静态仪表板</h1><p id="4e5e" class="pw-post-body-paragraph kw kx iq ky b kz no jr lb lc np ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">对于构建静态网页，你肯定需要了解HTML和CSS，但对于Plotly Dash来说，情况并非如此。Dash是一个web应用程序框架，它在HTML、CSS和javascript之上添加了纯Python抽象。说到这里，可以通过<a class="ae kv" href="https://www.w3schools.com/" rel="noopener ugc nofollow" target="_blank"> W3 schools </a>学习HTML和CSS的基础知识。超级基础！(至少对于创建像我这样的仪表板来说是这样的😛)</p><blockquote class="mp mq mr"><p id="3ce2" class="kw kx ms ky b kz la jr lb lc ld ju le mt lg lh li mu lk ll lm mv lo lp lq lr ij bi translated"><strong class="ky ir">注意</strong>:对于要显示的CSS更改，请确保将您的CSS文件保存在文件夹路径<code class="fe nt nu nv nw b">./assets/typography.css</code>(此处)。”表示主项目文件夹)。命名必须是这样的。此外，您可以使用HTML标记、id或类来直接引用app.py文件中的组件。</p></blockquote><p id="c347" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Dash为我们提供了许多现成的功能，但我不会一一介绍。以下是我用过的</p><ul class=""><li id="f08d" class="mb mc iq ky b kz la lc ld lf md lj me ln mf lr nx mh mi mj bi translated"><a class="ae kv" href="https://dash.plotly.com/dash-html-components" rel="noopener ugc nofollow" target="_blank"> Dash HTML组件</a>:您不用编写HTML或使用HTML模板引擎，而是使用Python结构和<code class="fe nt nu nv nw b">dash-html-components</code>库来构建您的布局。它提供了所有的HTML标签。</li><li id="1799" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr nx mh mi mj bi translated"><a class="ae kv" href="https://dash.plotly.com/dash-core-components" rel="noopener ugc nofollow" target="_blank"> Dash核心组件</a> : Dash配备了用于交互式用户界面的增压组件。由Dash团队编写和维护的一组核心组件可以在<code class="fe nt nu nv nw b">dash-core-components</code>库中获得。</li><li id="02d8" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr nx mh mi mj bi translated"><a class="ae kv" href="https://dash.plotly.com/dash-daq" rel="noopener ugc nofollow" target="_blank"> Dash DAQ </a> : Dash DAQ包括一套强大的控制装置，使数据采集和控制更容易集成到您的Dash应用程序中。</li></ul><p id="864f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">基本的应用程序布局可以很容易地在教程中找到。下面，我将尝试解释我的仪表板的每一个组成部分，以及我是如何想出它的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">整个布局代码</p></figure><p id="2db3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 2.1顶部截面</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/784a7120a54cedf5b25e16960ce2b1a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w95i9wo7sPq81h5zFwRO7Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">仪表板的顶部</p></figure><p id="7c1a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本部分包含标题以及我的一些广告(LOL ),随后显示了迄今为止的总指标以及它们与前一天相比的跳跃。这个部分肯定会每天发生变化，但是我们仍然可以创建它的静态版本。在上面的<code class="fe nt nu nv nw b">layout.py</code>文件中，<code class="fe nt nu nv nw b">lines 13–39</code>组成了这个部分。</p><blockquote class="mp mq mr"><p id="dfca" class="kw kx ms ky b kz la jr lb lc ld ju le mt lg lh li mu lk ll lm mv lo lp lq lr ij bi translated"><strong class="ky ir">注意</strong>:为了让图像显示在你的仪表板上，它们应该存储在路径<code class="fe nt nu nv nw b">./assets/</code>中。请注意“资产”文件夹的拼写。子文件夹可以命名为任何名称。</p></blockquote><p id="7629" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你仔细看，HTML标签<code class="fe nt nu nv nw b">&lt;h1&gt;COVID19 India Dashboard&lt;/h1&gt;</code>变成了<code class="fe nt nu nv nw b">html.h1(‘COVID19 India Dashboard’)</code>。可以使用参数发送HTML标签属性，以破折号HTML组件。</p><p id="5b70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一个例子<code class="fe nt nu nv nw b">&lt;img src=’/assets/images/kaggle.png’ class=’img’&gt;</code>相当于<code class="fe nt nu nv nw b">html.Img(src=’/assets/images/kaggle.png’,className=’img’)</code></p><p id="402e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">函数(如下)显示了用于从pandas dataframe创建表格(使用dash HTML组件)的函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">用于生成顶部表格的代码</p></figure><p id="863d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 2.2中间部分</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/82c2b640bb9b0ecf9c4ec347474ba4f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H_IW92pvI8Sv_UR42JMEsw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">仪表板的中间部分</p></figure><p id="4916" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是仪表板的核心，包含下拉菜单、选项卡(活动、已确认、已恢复和已死亡)、图表(线+条)和拨动开关。第40–64行组成了上面所示的<code class="fe nt nu nv nw b">layout.py</code>文件的中间部分。</p><ul class=""><li id="2536" class="mb mc iq ky b kz la lc ld lf md lj me ln mf lr nx mh mi mj bi translated"><code class="fe nt nu nv nw b"><strong class="ky ir">dropdown</strong></code>很容易添加，这里的<a class="ae kv" href="https://dash.plotly.com/dash-core-components/dropdown" rel="noopener ugc nofollow" target="_blank"/>有很多例子供你参考。它是<strong class="ky ir">仪表板核心部件</strong>的一部分。</li><li id="f84d" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr nx mh mi mj bi translated">使用本文档中的<a class="ae kv" href="https://dash.plotly.com/dash-core-components/tabs" rel="noopener ugc nofollow" target="_blank">添加<code class="fe nt nu nv nw b"><strong class="ky ir">tabs</strong></code>。它是<strong class="ky ir">仪表板核心部件</strong>的一部分。</a></li><li id="a402" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr nx mh mi mj bi translated"><code class="fe nt nu nv nw b"><strong class="ky ir">graph</strong></code>也是<strong class="ky ir">仪表板核心部件</strong>的一部分，可以使用<a class="ae kv" href="https://dash.plotly.com/dash-core-components/graph" rel="noopener ugc nofollow" target="_blank">这个</a>来添加。dcc.graph()应该包含一个plotly图形对象。可使用<a class="ae kv" href="https://plotly.com/python/plotly-express/" rel="noopener ugc nofollow" target="_blank"> plotly express </a>或<a class="ae kv" href="https://plotly.com/python/graph-objects/" rel="noopener ugc nofollow" target="_blank"> graph objects </a>创建plotly图形对象。plotly express是非常容易使用的API，而graph objects有点不平凡，但提供了很多定制。</li><li id="f3ae" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr nx mh mi mj bi translated"><code class="fe nt nu nv nw b"><strong class="ky ir">ToggleSwitch</strong></code>是<strong class="ky ir">DAQ</strong>的一部分，可以参照此链接添加<a class="ae kv" href="https://dash.plotly.com/dash-daq/toggleswitch" rel="noopener ugc nofollow" target="_blank">。</a></li></ul><p id="b393" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 2.3底部截面</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/2aaaffe7bdaab6536c4b9a5ccc98e599.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H5FWHZWP0RpfqsMVe14fwQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">仪表板的底部</p></figure><p id="bba5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第65–70行构成了这一部分，它包含标题和一个显示州级细分的表格。该表将是动态的(因为状态的位置可以根据总的情况而改变)，所以我创建了一个函数来创建一个表，该表可以使用来自pandas dataframe的<strong class="ky ir"> dash-html-components </strong>来显示。该函数几乎类似于2.1节中使用的函数。它的名字是<a class="ae kv" href="https://github.com/anshuls235/covid19-dashboard/blob/74acf376755efdcc6a53c4e51f392c54ec585194/app.py" rel="noopener ugc nofollow" target="_blank">代码</a>中的generate_table()。</p><h1 id="3ab1" class="mw mx iq bd my mz na nb nc nd ne nf ng jw nh jx ni jz nj ka nk kc nl kd nm nn bi translated">3.让它互动</h1><p id="8320" class="pw-post-body-paragraph kw kx iq ky b kz no jr lb lc np ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">通常，需要JavaScript来使网站具有交互性，但是不要担心，使用plotly dash创建仪表板时我们不需要知道它。你只需要懂Python！</p><p id="4cab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Dash提供了<a class="ae kv" href="https://dash.plotly.com/basic-callbacks" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">回调函数</strong> </a>，这些函数不过是Python <strong class="ky ir">装饰器</strong>，只要输入组件的属性发生变化，Dash就会自动调用这些函数。参考<a class="ae kv" href="https://www.youtube.com/watch?v=FsAPt_9Bf3U" rel="noopener ugc nofollow" target="_blank">这个Youtube视频</a>了解更多关于装修工的信息。</p><p id="39dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你看过我的仪表盘或者顶部的GIF图，你会发现所有的交互都在图中</p><ul class=""><li id="ebe5" class="mb mc iq ky b kz la lc ld lf md lj me ln mf lr nx mh mi mj bi translated">根据下拉列表中选择的状态进行更改。默认情况下，它显示整个印度的数据。</li><li id="887b" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr nx mh mi mj bi translated">基于所选选项卡的更改:有效、已确认、已恢复或已死亡。</li><li id="6ef8" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr nx mh mi mj bi translated">悬停时，在左上角显示值和日期。</li><li id="4eef" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr nx mh mi mj bi translated">基于拨动开关的变化:累积(折线图)或每日(条形图)。</li></ul><p id="d7e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所有的改变只发生在同一个图中，所以我们只需要一个回调函数。下面我试着用简单的话解释一下。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/5227a316934be29f891aa959cf345025.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JuYRuFu9D9-Fbe2SIgflGg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">回调函数的解释。注意输入的顺序以及输入的id、参数和值。</p></figure><ol class=""><li id="12bd" class="mb mc iq ky b kz la lc ld lf md lj me ln mf lr mg mh mi mj bi translated"><code class="fe nt nu nv nw b">state-dropdown</code>是下拉列表的“id ”,我们将它的“value”参数的值作为第一个输入。默认值为<strong class="ky ir">印度</strong>。</li><li id="d19e" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated"><code class="fe nt nu nv nw b">india-graph</code>是图形本身的“id ”,但是这里我们将它的“hoverData”参数的值作为第二个输入。默认值为<strong class="ky ir"> Null </strong>。(因为打开应用程序后，我们不会停留在图表上。)</li><li id="f441" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated"><code class="fe nt nu nv nw b">my-toggle-switch</code>是ToggleSwitch的“id ”,我们将它的“值”参数的值作为第三个输入。默认值是<strong class="ky ir">真</strong>我假设是<strong class="ky ir">累计</strong>。</li><li id="6fa6" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated"><code class="fe nt nu nv nw b">tabs</code>是选项卡组件的“id ”,我们将它的“value”参数的值作为第4个输入。默认值为<strong class="ky ir">激活</strong>。</li></ol><p id="a212" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回调的输出是一个图形，它的“id”是<code class="fe nt nu nv nw b">india-graph</code>，输出被发送到图形的<strong class="ky ir">图</strong>参数。(如果您在理解过程中发现任何问题，请参考<a class="ae kv" href="https://plotly.com/python/graph-objects/" rel="noopener ugc nofollow" target="_blank"> plotly graph objects文档</a>。)</p><blockquote class="mp mq mr"><p id="5ebf" class="kw kx ms ky b kz la jr lb lc ld ju le mt lg lh li mu lk ll lm mv lo lp lq lr ij bi translated">因此，一旦您打开应用程序，您将看到印度的累积(3)活动(4) COVID19案例(1)，没有任何hoverinfo(2)，根据回调函数参数。括号中的数字显示了发送给回调函数的输入顺序。</p></blockquote><p id="b5f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你在回调函数中看到的<strong class="ky ir">输入</strong> &amp; <strong class="ky ir">输出</strong>都是破折号依赖。如果这些是多个，那么它们需要作为一个列表发送(在上面的例子中是4个输入)。请记住，您需要将它们发送给装饰器/回调函数，下面您可以用任何名称定义一个函数，并为它们指定您喜欢的任何参数名称。</p><p id="0025" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">函数<code class="fe nt nu nv nw b">update_tab_graph</code>接受回调中定义的4个输入:(可以将这些参数看作是回调输入的映射)</p><ol class=""><li id="85bd" class="mb mc iq ky b kz la lc ld lf md lj me ln mf lr mg mh mi mj bi translated">状态=输入1中的值。</li><li id="def9" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated">hdata =输入2中的hoverData。</li><li id="7a01" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated">r_value =输入3中的值。</li><li id="11ce" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr mg mh mi mj bi translated">col =输入4中的值。</li></ol><p id="478a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输出是由函数返回的图形对象。</p><p id="8835" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，如果有人改变了4个输入中的任何一个，回调将被触发，图形将被更新。<em class="ms">如上图所示为德里的一个例子。</em></p><h1 id="bbd0" class="mw mx iq bd my mz na nb nc nd ne nf ng jw nh jx ni jz nj ka nk kc nl kd nm nn bi translated">4.集装箱化一切</h1><p id="0ca8" class="pw-post-body-paragraph kw kx iq ky b kz no jr lb lc np ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">Docker 是一个创建容器的神奇工具，而且非常容易使用。最好的部分是容器是不可知的。大多数容器都是基于Linux的，但是可以在Windows/Mac OS上运行，没有任何问题，这要感谢一些令人敬畏的技术，这些技术超出了本文的范围。</p><p id="2aa5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Docker本身是巨大的，不能在本文中肯定地解释。所以，我将试着用我自己简单的话来解释它。</p><p id="c03c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设您创建了一个Python项目。现在你想和你的朋友分享。一个简单的方法是共享整个项目文件夹。然后，您的朋友将创建一个新环境，并在requirements.txt文件中安装依赖项，然后就可以运行项目了。这种方法对于经验丰富的开发人员来说非常容易，但是对于刚刚开始或者甚至不太了解安装过程的人来说，肯定会面临很多问题。这就是码头工人来救援的地方。你的朋友只需要安装Docker(<a class="ae kv" href="https://www.docker.com/products/docker-desktop" rel="noopener ugc nofollow" target="_blank">Docker桌面首选</a>)，然后他/她就可以导入你的Docker镜像，然后运行它就可以看到你的项目了。基本上，如果你的docker容器运行在你的本地机器上，它肯定会运行任何其他的机器，而不管操作系统是什么。</p><p id="fa79" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了消除困惑，你只需要知道这三件事就可以开始使用Docker了:</p><ul class=""><li id="ee19" class="mb mc iq ky b kz la lc ld lf md lj me ln mf lr nx mh mi mj bi translated">Dockerfile :这个文件包含了创建Docker图像的所有指令。</li><li id="1a6c" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr nx mh mi mj bi translated"><strong class="ky ir">图像</strong>:包含docker文件的整个包/构建以及所有必需的项目文件(您可以通过在<strong class="ky ir">中提及它们来忽略一些文件)。dockerignore </strong>文件)和所有安装的依赖项。</li><li id="d312" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr nx mh mi mj bi translated"><strong class="ky ir">容器</strong>:按照Dockerfile文件中的步骤/层顺序运行的图像实例。</li></ul><blockquote class="mp mq mr"><p id="024e" class="kw kx ms ky b kz la jr lb lc ld ju le mt lg lh li mu lk ll lm mv lo lp lq lr ij bi translated">我在某处读到过一个惊人的类比:容器是一个cookie，图像是用来创建cookie的模型，Dockerfile是创建该模型的指令。</p></blockquote><p id="fd03" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是我在项目中使用的docker文件。我会试着逐一解释所有的步骤/层次。</p><pre class="kg kh ki kj gt oe nw of og aw oh bi"><span id="ed9d" class="oi mx iq nw b gy oj ok l ol om">FROM python:3.8-slim</span><span id="0cf1" class="oi mx iq nw b gy on ok l ol om">WORKDIR /app </span><span id="6e40" class="oi mx iq nw b gy on ok l ol om">COPY . . </span><span id="8ee7" class="oi mx iq nw b gy on ok l ol om">RUN pip install -r requirements.txt </span><span id="8c8a" class="oi mx iq nw b gy on ok l ol om">EXPOSE 8050 </span><span id="901b" class="oi mx iq nw b gy on ok l ol om">CMD [“python”, “app.py”]</span></pre><ul class=""><li id="d26a" class="mb mc iq ky b kz la lc ld lf md lj me ln mf lr nx mh mi mj bi translated"><code class="fe nt nu nv nw b">FROM python:3.8-slim</code>导入python镜像(基本上是Linux OS上安装的python3.8)。我已经导入了苗条的版本，因为我想保持我的形象轻巧。</li><li id="0f12" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr nx mh mi mj bi translated"><code class="fe nt nu nv nw b">WORKDIR /app</code>在我们的python映像中创建一个名为“app”的目录。</li><li id="094b" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr nx mh mi mj bi translated"><code class="fe nt nu nv nw b">COPY . .</code>将项目文件夹中的所有文件和文件夹复制到app目录中。中提到的文件/文件夹。忽略dockerignore文件。</li><li id="1d5e" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr nx mh mi mj bi translated">运行命令行，在requirements.txt文件中安装所有的依赖项。该文件是在上一步中复制的。</li><li id="84c3" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr nx mh mi mj bi translated"><code class="fe nt nu nv nw b">EXPOSE 8050</code>暴露docker端的端口8050。将机器的端口映射到这个端口时需要小心。</li><li id="5fb3" class="mb mc iq ky b kz mk lc ml lf mm lj mn ln mo lr nx mh mi mj bi translated"><code class="fe nt nu nv nw b">CMD [“python”, “app.py”]</code>管理你的项目。它完全类似于在本地机器上运行项目时使用的命令行(只是在空格处将文本分成一个列表)。</li></ul><p id="e42d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦docker文件完成，在同一个文件夹中执行下面的代码来构建你的docker映像。</p><pre class="kg kh ki kj gt oe nw of og aw oh bi"><span id="a3de" class="oi mx iq nw b gy oj ok l ol om">docker build -t covid-dashboard-india .</span></pre><p id="8cb5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，要运行您的容器，请执行下面的代码。注意我做的端口映射。这是使用-p标记完成的，分号的左边是本地机器的端口，右边是容器的端口。</p><pre class="kg kh ki kj gt oe nw of og aw oh bi"><span id="6be6" class="oi mx iq nw b gy oj ok l ol om">docker run -p 8050:8050 covid-dashboard-india</span></pre><p id="b96e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在端口8050上导航到您的本地主机，查看仪表板并使用它。</p><h1 id="7dca" class="mw mx iq bd my mz na nb nc nd ne nf ng jw nh jx ni jz nj ka nk kc nl kd nm nn bi translated">5.部署项目</h1><p id="1b65" class="pw-post-body-paragraph kw kx iq ky b kz no jr lb lc np ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">如果您对一切都满意，那么最后一步就是选择一个可以部署docker映像的注册表。有太多的注册中心，比如Heroku，AWS ECR，e.t.c .最好的事情是Heroku是免费的，我已经在我的这个项目中使用了它。</p><p id="7009" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">只需按照<a class="ae kv" href="https://devcenter.heroku.com/articles/container-registry-and-runtime" rel="noopener ugc nofollow" target="_blank">链接</a>中提到的所有步骤来部署您的映像。这很容易理解。</p><h1 id="5463" class="mw mx iq bd my mz na nb nc nd ne nf ng jw nh jx ni jz nj ka nk kc nl kd nm nn bi translated">哒哒！您刚刚开发并部署了一个仪表板👏</h1></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="10d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这篇文章对你有用。如有任何疑问，请随时联系我:)</p><h2 id="5667" class="oi mx iq bd my oo op dn nc oq or dp ng lf os ot ni lj ou ov nk ln ow ox nm oy bi translated"><a class="ae kv" href="https://www.linkedin.com/in/anshuls235/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a><br/><a class="ae kv" href="http://anshuls235@gmail.com/" rel="noopener ugc nofollow" target="_blank">Gmail</a></h2></div></div>    
</body>
</html>