<html>
<head>
<title>Representing 5 Features in a single animated plot using Plotly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Plotly在一个动画情节中表现5个特征</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/representing-5-features-in-a-single-animated-plot-using-plotly-e4f6064c7f46?source=collection_archive---------44-----------------------#2021-06-28">https://towardsdatascience.com/representing-5-features-in-a-single-animated-plot-using-plotly-e4f6064c7f46?source=collection_archive---------44-----------------------#2021-06-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="26e5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用单个动画气泡图来分析数据和观察趋势</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9215cfb2c6b0bca1c47d7e82df00c958.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0Osw10moPLs3tSVu"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae kv" href="https://unsplash.com/@wgzhai?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">温刚斋</a>的照片</p></figure><h1 id="9437" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">为什么要用Plotly？</h1><p id="e976" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">Plotly是一个可视化库，因其惊人的功能而迅速流行起来。Plotly与其他可视化库的区别在于它能够提供<strong class="lq ir">交互式、动态、易于使用的</strong>和<strong class="lq ir">高度详细的</strong>图。使用Plotly，我们可以通过点击按钮、下拉菜单、滑块甚至创建动画来与我们的图进行交互。更好的是，我们可以毫不费力地绘制出非常吸引人的图表，就像Plotly在引擎盖下为我们做所有繁重的工作一样。我们将看到使用气泡图是多么容易，只需一次函数调用就可以制作出动画。</p><h1 id="8877" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">分析过去5年足球运动员的趋势</h1><p id="379f" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">对于今天的文章，我们将使用Kaggle   的<a class="ae kv" href="https://www.kaggle.com/stefanoleone992/fifa-21-complete-player-dataset" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir"> <em class="mk"> Fifa数据集，其中包含2015年至2021年足球运动员的详细信息。具体来说，我们将看到一个足球运动员的年龄、价值、综合评分、转让价值和比赛位置之间的关系，以及这些属性是否会随着时间的推移而显示出任何模式。为了从各种文件中提取这些特征，我必须做一些预处理，这在整个代码笔记本中都存在。下面是预处理和组合各种文件后的最终数据。</em></strong></a></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">预处理后的最终数据集</p></figure><h1 id="220c" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">什么是气泡图？</h1><p id="87b6" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">气泡图本质上是一个散点图，其中的数据点大小不同。气泡的大小可以与一个附加属性(<strong class="lq ir">通常是数字)</strong>相关联，这可以帮助更好地辨别数据点。此外，我们可以根据数据点所属的特定类别对其进行着色。</p><p id="2c50" class="pw-post-body-paragraph lo lp iq lq b lr mn jr lt lu mo ju lw lx mp lz ma mb mq md me mf mr mh mi mj ij bi translated"><strong class="lq ir">总之，下面是气泡图的组成部分</strong></p><ul class=""><li id="6335" class="ms mt iq lq b lr mn lu mo lx mu mb mv mf mw mj mx my mz na bi translated">x和Y轴-数字特征</li><li id="8d27" class="ms mt iq lq b lr nb lu nc lx nd mb ne mf nf mj mx my mz na bi translated">气泡的大小—数字特征</li><li id="4328" class="ms mt iq lq b lr nb lu nc lx nd mb ne mf nf mj mx my mz na bi translated">气泡的颜色——分类特征</li></ul><h1 id="dce6" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">添加动画</strong></h1><p id="d761" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们将添加一个动画，自动移动滑块(负责改变我们想要可视化的年份)及时向前显示我们每年的球员属性。调整滑块时，图表会更新，以绘制给定年份的玩家属性。</p><h1 id="6f01" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">让我们开始吧！</h1><p id="1bd6" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我选择了2015年排名前20位的玩家(根据总体评分)来观察他们在2021年的表现。<strong class="lq ir">注意- </strong>我只选择了从2015年到2021年每年都活跃的球员。</p><ol class=""><li id="6030" class="ms mt iq lq b lr mn lu mo lx mu mb mv mf mw mj ng my mz na bi translated">我建议你在Google Colab上运行这段代码，因为它已经预先安装好了。如果你想在本地运行代码，你必须<code class="fe nh ni nj nk b">pip install plotly</code></li><li id="629e" class="ms mt iq lq b lr nb lu nc lx nd mb ne mf nf mj ng my mz na bi translated">为情节设置参数。正如你在下面看到的，我们使用了数据集 <em class="mk">名称</em>作为第一个参数。将<em class="mk"> x </em>轴设置为绘制<strong class="lq ir">年龄</strong>，将<em class="mk"> y </em>轴设置为绘制总体<strong class="lq ir">。</strong>设置<em class="mk">大小</em>参数以反映<strong class="lq ir">玩家的</strong> <strong class="lq ir">市场价值</strong>。<em class="mk">颜色</em> <strong class="lq ir"> </strong>参数设置为<strong class="lq ir">球员_位置</strong>，分为进攻球员、中场球员、防守球员或守门员。我们还设置了<em class="mk"> hover_name </em>参数来显示玩家的<strong class="lq ir">名字</strong>。不要忘记设置<strong class="lq ir"> max_size参数</strong>，因为真实的市场价值是以百万计的，我们需要限制泡沫的大小。<strong class="lq ir">最重要的是，我们将animation_frame参数</strong>设置为<strong class="lq ir"> </strong> <em class="mk"> year </em>以自动在数据集的year列下添加不同年份的滑块。最后，我们为x和y值设置一个范围，并为图表设置一个标题。</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">最终气泡图</p></figure><p id="e6a4" class="pw-post-body-paragraph lo lp iq lq b lr mn jr lt lu mo ju lw lx mp lz ma mb mq md me mf mr mh mi mj ij bi translated">3.创建一个描述<strong class="lq ir"> 5个特性的综合气泡图和一个动画</strong>只需要一个函数调用！令人印象深刻的是阴谋是多么容易，不是吗？随意使用绘图右上角的选项，例如缩放、选择特定区域或下载图像。还要注意当我们<strong class="lq ir">悬停在一个泡泡上时玩家的信息是如何显示的！</strong></p><h1 id="58e4" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">寻找趋势</h1><ul class=""><li id="6a5c" class="ms mt iq lq b lr ls lu lv lx nl mb nm mf nn mj mx my mz na bi translated">首先我们可以看到<strong class="lq ir">年龄</strong>与<strong class="lq ir">市场价值的关系。一个球员的价值在他将近30岁的时候上升并达到顶峰，一旦他进入30岁就开始下降。这种下降对于由<strong class="lq ir">蓝色气泡</strong>描绘的进攻者来说是最剧烈的，而对于由<strong class="lq ir">红色气泡描绘的<strong class="lq ir"> </strong>守门员来说是最温和的。</strong>气泡大小有助于我们直观地看到市场价值，并根据市场价值比较玩家。</strong></li><li id="687a" class="ms mt iq lq b lr nb lu nc lx nd mb ne mf nf mj mx my mz na bi translated">我们还可以看到随着T2年龄的增长，总体T1开始下降。这是有道理的，因为足球运动员的职业生涯很短。<em class="mk">再次非常有趣地看到，攻击手和中场比后卫和守门员衰退得更快，因为他们的大部分属性依赖于体格、耐力和速度，在打了这么久的比赛后这些属性开始消失</em>。</li><li id="f22e" class="ms mt iq lq b lr nb lu nc lx nd mb ne mf nf mj mx my mz na bi translated">一个非常明显的相关性是整体价值和市场价值之间的关系。然而，有趣的是看到年龄也开始影响市场价值，因为俱乐部想要购买可以长期比赛的球员。</li></ul><h1 id="390e" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">Plotly中的动画警告</h1><blockquote class="no np nq"><p id="ab63" class="lo lp mk lq b lr mn jr lt lu mo ju lw nr mp lz ma ns mq md me nt mr mh mi mj ij bi translated">当每一行输入都存在于所有动画帧中，并且映射到符号、颜色和面的分类值在各帧中保持不变时，动画可以很好地工作。如果不满足这些约束条件，动画<em class="iq">可能会产生误导或不一致</em>。—官方Plotly文档</p></blockquote><h1 id="0137" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="9bd1" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">这只是Plotly能力的一瞥，当与Dash一起使用时，Plotly可以创建漂亮的动画仪表盘和图形，具有高度的交互性。我还想指出Plotly如何提供按钮和工具(用于缩放、选择等。)就其本身而言，这些在更深入的分析中是非常有用的工具，并且可以使可视化更加容易。</p><p id="3b9b" class="pw-post-body-paragraph lo lp iq lq b lr mn jr lt lu mo ju lw lx mp lz ma mb mq md me mf mr mh mi mj ij bi translated">我希望这是有趣和好玩的。下次见！</p><p id="52a7" class="pw-post-body-paragraph lo lp iq lq b lr mn jr lt lu mo ju lw lx mp lz ma mb mq md me mf mr mh mi mj ij bi translated">查看我的<a class="ae kv" href="https://github.com/rajlm10" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir"> github </strong> </a>的一些其他项目和整个<a class="ae kv" href="https://github.com/rajlm10/FifaPlotly/blob/main/FifaPlotly.ipynb" rel="noopener ugc nofollow" target="_blank">代码</a>。你可以在这里联系我<a class="ae kv" href="https://rajsangani.me/" rel="noopener ugc nofollow" target="_blank"><strong class="lq ir"><em class="mk"/></strong></a><strong class="lq ir"><em class="mk">。</em> </strong>感谢您的配合！</p></div></div>    
</body>
</html>