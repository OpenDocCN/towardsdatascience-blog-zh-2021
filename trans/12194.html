<html>
<head>
<title>NLP2Chart — Information Visualization in Natural Language</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NLP2Chart —自然语言中的信息可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/nlp2chart-9bc732719ba0?source=collection_archive---------6-----------------------#2021-12-10">https://towardsdatascience.com/nlp2chart-9bc732719ba0?source=collection_archive---------6-----------------------#2021-12-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bc94" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用自然语言命令创建图表的原型</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5ec9888646fea66728a4b6ac8c87ca93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2RbhUzSmBibGQXs-Vaxn4w.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">www.pexels.com</p></figure><p id="fcee" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本文中，我将展示一种方法的原型，这种方法允许使用自然语言的指令创建信息图和信息图。下图显示了该应用程序的原型，并举例说明了每个国家的电晕病例数和死亡数之间的相关性，包括回归线。这个信息图完全是由自然语言中的命令生成的。</p><p id="27b9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本例中，这是:</p><blockquote class="lr ls lt"><p id="44ea" class="kv kw lu kx b ky kz jr la lb lc ju ld lv lf lg lh lw lj lk ll lx ln lo lp lq ij bi translated">"将covid-data.csv加载到数据集中，并按位置对total_cases和total_deaths进行分组，制作它们的散点图和回归线"</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ly"><img src="../Images/2bf0eb2942560d6a3f3cd1718cd82f99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i8L1GlXEYAtWYg6UTfHg-Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">COVID19“总病例数”和“总死亡数”散点图/作者提供的图片</p></figure><p id="2f98" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">基于一些典型的数据集和问题，我将展示该方法的可能性和局限性。实现基于OpenAI的GPT3语言模型，通过API(<a class="ae lz" href="https://openai.com/blog/openai-api/" rel="noopener ugc nofollow" target="_blank">https://openai.com/blog/openai-api/</a>)调用。</p><h2 id="5cfa" class="ma mb iq bd mc md me dn mf mg mh dp mi le mj mk ml li mm mn mo lm mp mq mr ms bi translated">语言模型和图像处理</h2><p id="d875" class="pw-post-body-paragraph kv kw iq kx b ky mt jr la lb mu ju ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">最近，越来越多的研究论文发表在自然语言处理和图像处理之间的联系上。例如，图像的内容和风格与自然语言相关联。这方面的例子有OpenAI的“CLIP”(【https://openai.com/blog/clip/】)和NVIDIA的“GauGAN”(<a class="ae lz" href="http://gaugan.org/gaugan2" rel="noopener ugc nofollow" target="_blank"/>)。</p><p id="3b2f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">CLIP是一个在大量(4亿)图像和文本对上训练的神经网络。模型学习整个句子和它描述的图像之间的关系；在某种意义上，给定一个输入句子，模型在被训练时，能够找到对应于该句子的最相关的图像。这里重要的是，它是针对整个句子进行训练的，而不是针对汽车、狗等单个类别。</p><p id="49c1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一个简化的实现在</p><div class="my mz gp gr na nb"><a rel="noopener follow" target="_blank" href="/simple-implementation-of-openai-clip-model-a-tutorial-ace6ff01d9f2"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd ir gy z fp ng fr fs nh fu fw ip bi translated">OpenAI剪辑模型的简单实现:教程</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">PyTorch中剪辑模型的简单实现教程。</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">towardsdatascience.com</p></div></div><div class="nk l"><div class="nl l nm nn no nk np kp nb"/></div></div></a></div><p id="460b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在GauGAN中，图像的内容也可以用一句话来描述，但是除此之外，图像的附加属性，例如图像的风格可以由另一个图像来定义，或者可以使用绘图和分割来影响图像。</p><p id="2833" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有关GauGAN 2的更多信息，请访问:</p><div class="my mz gp gr na nb"><a rel="noopener follow" target="_blank" href="/have-you-ever-heard-of-nvidias-ai-gaugan2-e08a12c8c6b9"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd ir gy z fp ng fr fs nh fu fw ip bi translated">你听说过英伟达的AI GauGAN2吗？</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">将图画和文字转换成照片/照片级图像的人工智能</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">towardsdatascience.com</p></div></div><div class="nk l"><div class="nq l nm nn no nk np kp nb"/></div></div></a></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/85bed1283668413715e2a46325bd8a38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TqO2jnu7UOf8R9HuBq7eyg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">截图来自GauGAN2 /图片作者</p></figure><h2 id="3895" class="ma mb iq bd mc md me dn mf mg mh dp mi le mj mk ml li mm mn mo lm mp mq mr ms bi translated">信息可视化软件的用户界面</h2><p id="d771" class="pw-post-body-paragraph kv kw iq kx b ky mt jr la lb mu ju ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">在我的原型中，我使用自然语言指令来创建图形，类似于CLIP或GauGAN 2中的图像创建，在输入描述任务的文本后，会生成并显示可视化效果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/795832b3b0fed6359b1505d3f1785a68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yUiAmSBNCFoMkwEzURly-A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">“NLP 2 chart”/图片作者的界面</p></figure><p id="59a0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这个原型可以看作是对信息可视化软件接口的替代方法的研究。信息图形目前要么通过脚本来创建，例如使用Matplotlib(<a class="ae lz" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank">https://matplotlib.org/</a>)或Plotly(<a class="ae lz" href="https://plotly.com/python/" rel="noopener ugc nofollow" target="_blank">https://plotly.com/python/</a>)等库，要么通过Tableau(<a class="ae lz" href="http://www.tableau.com" rel="noopener ugc nofollow" target="_blank">www.tableau.com</a>)或微软Power BI(<a class="ae lz" href="https://powerbi.microsoft.com/" rel="noopener ugc nofollow" target="_blank">https://powerbi.microsoft.com/</a>)等软件来创建，其界面由大量菜单、按钮和下拉选项组成。脚本和“点击”界面及其众多选项都非常复杂，需要大量培训。</p><p id="0fa5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">由于我们人类很容易用自然语言来表达一个问题或一项任务，因此很明显，对于创建信息图形的用例来说，尝试作为人机界面来做同样的事情。最大的障碍是语言缺乏精确性和模糊性，下面的评估将会显示这一点。在其他领域，这种方法被证明是非常有用的。甚至我们的日常生活也已经被Alexa和Siri这样的系统所塑造。</p><h1 id="d72e" class="nt mb iq bd mc nu nv nw mf nx ny nz mi jw oa jx ml jz ob ka mo kc oc kd mr od bi translated">图形语法</h1><p id="45f0" class="pw-post-body-paragraph kv kw iq kx b ky mt jr la lb mu ju ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">正如每种语言都有定义其结构的语法一样，这也可以应用于其他领域。图形语法应用于可视化，是一种用于描述和创建大量统计图形的语法。</p><p id="2ddc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这些将在<a class="ae lz" href="https://cfss.uchicago.edu/notes/grammar-of-graphics/" rel="noopener ugc nofollow" target="_blank">https://cfss.uchicago.edu/notes/grammar-of-graphics/</a>进行描述。它们最初是为“GGpot2”库中的“R”语言实现的，我也将它们用作指南。由于这些任务可以形成一个清晰的结构，因此也有希望找到一种从自然语言到这种图形创作“语言”的“翻译”。</p><h2 id="b9ce" class="ma mb iq bd mc md me dn mf mg mh dp mi le mj mk ml li mm mn mo lm mp mq mr ms bi translated">原型的实现</h2><p id="0e2c" class="pw-post-body-paragraph kv kw iq kx b ky mt jr la lb mu ju ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">原型被实现为一个web应用程序，后端框架“Flask”(<a class="ae lz" href="https://flask.palletsprojects.com/" rel="noopener ugc nofollow" target="_blank">https://flask.palletsprojects.com/</a>)用于Python，Bootstrap(<a class="ae lz" href="https://getbootstrap.com/" rel="noopener ugc nofollow" target="_blank">https://getbootstrap.com/</a>)用于前端。对于信息图的计算，使用了库“Matplotlib ”,对于语言模型，使用了OpenAI针对GPT3系列模型的API。在语言模型的帮助下，自然语言的输入被翻译成Matplotlib的指令，然后这些指令导致图形的计算。</p><p id="7be0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">原型提供了导入CSV文件和将结果导出为PNG文件或HTML的可能性。</p><h2 id="baba" class="ma mb iq bd mc md me dn mf mg mh dp mi le mj mk ml li mm mn mo lm mp mq mr ms bi translated">用例及数据集</h2><p id="3ccc" class="pw-post-body-paragraph kv kw iq kx b ky mt jr la lb mu ju ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">为了测试该方法的适用性，尝试解决以下领域的任务:<br/> -绘制一些典型的数学函数<br/> -生成随机数和直方图、散点图等。<br/> -对受感染、患病、接种疫苗等人群的Covid19数据进行评估和可视化。<br/> -评估Gapminder.com的人口、收入和预期寿命数据</p><p id="0934" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">数据集</strong></p><p id="7f60" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Gapminder是由汉斯·罗斯林建立的一个基金会，提供数据和软件工具，以促进基于证据的世界观。来自Gapminder(<a class="ae lz" href="https://www.gapminder.org/" rel="noopener ugc nofollow" target="_blank">https://www.gapminder.org/</a>)的数据被集成到Python包(<a class="ae lz" href="https://pypi.org/project/gapminder/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/project/gapminder/</a>)中，用于人口、工资和预期寿命的评估。</p><p id="eadb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于Covid19评估和图表，使用了来自Covid19上<a class="ae lz" href="https://ourworldindata.org/coronavirus-source-data" rel="noopener ugc nofollow" target="_blank">https://ourworldindata.org/coronavirus-source-data</a>的数据。</p><h1 id="50ac" class="nt mb iq bd mc nu nv nw mf nx ny nz mi jw oa jx ml jz ob ka mo kc oc kd mr od bi translated">用例的结果</h1><p id="f414" class="pw-post-body-paragraph kv kw iq kx b ky mt jr la lb mu ju ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated"><strong class="kx ir">绘图功能</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/0d8ef87dd8e3bb7fa2ecd8236cca54c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m2bGjs4ELKB_6H4Rzx3DMA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者绘制的一些函数/图像</p></figure><p id="5eb7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">说明:</p><blockquote class="lr ls lt"><p id="33da" class="kv kw lu kx b ky kz jr la lb lc ju ld lv lf lg lh lw lj lk ll lx ln lo lp lq ij bi translated">“从-2到2绘制一个指数函数和一个正弦函数，将y限制设置为10，并为指数取绿色”</p></blockquote><p id="33fe" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">创建功能图(同时创建几个功能)非常有效。也可以制定规格，例如轴的限制或颜色定义。</p><p id="a472" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">随机数字信息图</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/1375d5157858563395e6ee9df0fcbecf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0kOnW-ECMCnw62lie_epYw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">covid停止和死亡的线图/作者的图像</p></figure><p id="82d9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">说明:</p><blockquote class="lr ls lt"><p id="f342" class="kv kw lu kx b ky kz jr la lb lc ju ld lv lf lg lh lw lj lk ll lx ln lo lp lq ij bi translated">为2020年5月的每一天创建一个包含随机数的数据集，将列命名为“病例”创建一个包含随机数的列，将其命名为“死亡”，并为病例和死亡绘制一个折线图</p></blockquote><p id="d194" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">随机数的创建可以与用于绘图的指令相结合，甚至提供数据的部分。然而，在所有的例子中，数据部分的选择并不稳定。这是系统达到当前极限的地方。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/73331aaa1f2115cf6a06a5fb7a8e33d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SyPatB6O1Y7qUUk71z1JMg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者提供的正态随机数直方图/图片</p></figure><p id="eb11" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">说明:</p><blockquote class="lr ls lt"><p id="0bcb" class="kv kw lu kx b ky kz jr la lb lc ju ld lv lf lg lh lw lj lk ll lx ln lo lp lq ij bi translated">"制作一个由200个随机正常数字组成的数组，并绘制直方图."</p></blockquote><p id="5b56" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如上图所示的简单直方图在水平和垂直方向上都能很好地工作。它甚至可以识别它们是否是正态分布的数字，但是进一步的规范(如轴命名)不再可靠地工作。</p><p id="1b1d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">使用COVID19数据的评估</strong></p><p id="6809" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">开头已经展示了一个带有回归线的散点图示例。让我们看另一个数据集的例子。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/2831cb6addf9350a86b330bd29313225.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3_ZP_Y3Ih5XZFg2Q80iA7w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">每个洲的新covid病例饼图/作者提供的图片</p></figure><p id="c508" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">说明:</p><blockquote class="lr ls lt"><p id="2766" class="kv kw lu kx b ky kz jr la lb lc ju ld lv lf lg lh lw lj lk ll lx ln lo lp lq ij bi translated">"将covid-data.csv加载到数据集中，按洲分组，并绘制成饼图"</p></blockquote><p id="91b5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">数据加载和进一步的处理(如对数据分组)都与饼图结合在一起。然而，此外，格式化工作不可靠。</p><p id="4630" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir"> Gapminder数据</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/f73b3a4dcb1b8c3e33838fbb608a7671.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xqqXgh3RvFKB1hyPeGVvSA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按洲和年份分列的人口堆积条形图/作者提供的图片</p></figure><p id="e00f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">说明:</p><blockquote class="lr ls lt"><p id="9896" class="kv kw lu kx b ky kz jr la lb lc ju ld lv lf lg lh lw lj lk ll lx ln lo lp lq ij bi translated">"打开gapminder-data.csv按洲和年份排列的pop组，并制作堆积条形图"</p></blockquote><p id="b7b2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该示例显示了条形图及其选项的处理。这里，数据也是预先装载和聚合的。</p><p id="edab" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面的视频展示了更多的例子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj ok l"/></div></figure><h2 id="9b4b" class="ma mb iq bd mc md me dn mf mg mh dp mi le mj mk ml li mm mn mo lm mp mq mr ms bi translated">总结和进一步发展</h2><p id="6200" class="pw-post-body-paragraph kv kw iq kx b ky mt jr la lb mu ju ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">对用例的处理表明，如果足够精确，基本的可视化类型可以通过指令成功地创建。对于具有诸如线宽、颜色或轴命名等属性的图形的“微调”,这种方法是不够的。在这种情况下，可以开发一个混合界面，允许在第二步中通过附加信息、选择框或输入字段添加这些属性。正如在使用GauGAN生成图像时一样，除了文本之外，绘图和分段等附加信息会更精确地指定图像生成。</p><p id="45c8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有关“NLP2Chart”的更详细信息将在不久的将来发表在一篇论文中。</p></div></div>    
</body>
</html>