<html>
<head>
<title>How We “Hacked” Commercial Image Processing Software Using Machine Learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们如何使用机器学习“入侵”商业图像处理软件</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-we-hacked-commercial-image-processing-software-using-machine-learning-38e9bbea3bb9?source=collection_archive---------27-----------------------#2021-12-14">https://towardsdatascience.com/how-we-hacked-commercial-image-processing-software-using-machine-learning-38e9bbea3bb9?source=collection_archive---------27-----------------------#2021-12-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/9c0bb2c621c0c10ca8c7f8c1650132ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BXHv55P4ISKiyowBOMKNsA.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">使用人工智能对算法进行逆向工程有多容易？图片来源:<a class="ae jg" href="https://pixabay.com/de/photos/hacker-angriff-maske-internet-2883632/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></p></figure><h2 id="4ec0" class="jh ji jj bd b dl jk jl jm jn jo jp dk jq translated" aria-label="kicker paragraph">机器学习和人工智能安全</h2><div class=""/><div class=""><h2 id="ff33" class="pw-subtitle-paragraph kp js jj bd b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dk translated">标准 ML 工具允许逆向工程图像处理方法非常容易</h2></div><p id="ad16" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">机器学习提供了巨大的机会。它正在改变我们的世界，我们不得不重新思考我们当前的一些观点。例如，我们认为没有源代码的软件或多或少是安全的，不会被窃取。在这篇博文中，我将展示一些算法并不是这样。</p><p id="bad6" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">特别是在<a class="ae jg" href="https://link.springer.com/book/10.1007/978-3-319-96520-8" rel="noopener ugc nofollow" target="_blank">医学成像</a>，设备制造商试图通过使用专有软件和图像格式来隐藏他们的软件是如何工作的。然而，在 ML 时代，这并不能提供足够的保护。在下文中，我将展示我们如何使用机器学习来理解商业医学图像处理方法的内部工作原理。请注意，我们使用 ML 保留设计的算法仅限于像素处理，这使得攻击特别容易。然而，如果可以访问输入和输出，同样的想法也适用于更复杂的图像处理方法。</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi md"><img src="../Images/933a98d4f3c74d9994de11b203fca16c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kde5MpWYgsX3Fh0yz9lS_g.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">如果能够访问正确的数据，逆向工程就变得非常容易。图片来源:<a class="ae jg" href="https://pixabay.com/illustrations/hexagon-blockchain-man-silhouette-6574882/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></p></figure><p id="07c3" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在我们的例子中，我们可以访问基于 DICOM 的图像文件(<a class="ae jg" href="https://en.wikipedia.org/wiki/DICOM" rel="noopener ugc nofollow" target="_blank">医学成像的标准图像格式</a>)，其中包含输入数据以及算法的输出，同样是 DICOM 格式。一个主要问题是，标准图像查看器在输入文件中只会显示一个扫描/颜色通道。然而，我们从文献中得知<a class="ae jg" href="https://aapm.onlinelibrary.wiley.com/doi/abs/10.1002/mp.13317?casa_token=G1vzFIzG41sAAAAA:ZTm-XSBb1l9VYQ476DVeLozUj_QHajJ70HNYEIgKs-3XDTSh91WJPGx6NH_zaMv5JtwQ0OE94p5ILW-j" rel="noopener ugc nofollow" target="_blank">至少需要两个来计算处理后的图像。仔细观察输入文件的大小发现，它们比只包含一个颜色通道所需的大小大了大约 5 倍。</a></p><p id="7c59" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">第一步，我们使用了康拉德的原始数据打开器。它允许加载任何二进制文件，并解释为一个特定编码的图像。在我们的例子中，我们知道图像是 512x512 像素。</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/834df38b5eebf4d2f4e8ebf251b37989.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*RLd8tkKokQ6moOxEeeiukQ.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">康拉德的原始数据开启器的屏幕截图。理解专有图像格式的好工具。图片由作者创建，并由 4.0 在<a class="ae jg" href="https://joinup.ec.europa.eu/licence/creative-commons-attribution-40-international-cc-40" rel="noopener ugc nofollow" target="_blank"> CC 下发布</a></p></figure><p id="024c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">使用拖放功能，我们很快就找到了图像数据的编码。这将产生如下所示的图像。图像的偏移告诉您标题的大小和图像之间的位数(导致下一个图像的偏移更大)。</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/42c3a9eaad25b838b4488b62f52d2aca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*xa82uaAgoG07m_-WHs53ew.jpeg"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">用原始数据打开器打开原始 DICOM 文件的结果。图像头被解释为图像内容，它将图像内容移动像素中的字节数。图片由作者创建，并由 4.0 在<a class="ae jg" href="https://joinup.ec.europa.eu/licence/creative-commons-attribution-40-international-cc-40" rel="noopener ugc nofollow" target="_blank"> CC 下发布</a></p></figure><p id="8856" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这样，我们发现供应商在文件头中存储了 4 个额外的图像，这也解释了文件的大小。在下一步中，我们调整了 CONRAD 中的 DICOM 阅读器，以便从自定义 DICOM 标题中正确提取额外的图像数据。这可以用几行代码完成:</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mk"><img src="../Images/908757e5457a20d9aa130d280396c2f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4T5Rz9zqmRakjq1iTTLrCg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">在 CONRAD 中读取新 DICOM 字段的代码示例。<a class="ae jg" href="https://github.com/akmaier/CONRAD/blob/master/src/edu/stanford/rsl/conrad/io/KEVSDicomTag.java" rel="noopener ugc nofollow" target="_blank">点击这里查看 github </a>上的代码。图片由作者创建，并由 4.0 在<a class="ae jg" href="https://joinup.ec.europa.eu/licence/creative-commons-attribution-40-international-cc-40" rel="noopener ugc nofollow" target="_blank"> CC 下发布</a></p></figure><p id="8b00" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">接下来，我们使用了康拉德的 ML 特性。它使用<a class="ae jg" href="https://imagej.net/plugins/tws/" rel="noopener ugc nofollow" target="_blank"> ImageJ 和 Weka 训练 ML 模型</a>。(我们训练的模型可以在这里找到<a class="ae jg" href="https://github.com/akmaier/CONRAD/tree/master/data/KEVS_models" rel="noopener ugc nofollow" target="_blank"/>。)为了证明 ML 能够多么容易地复制该算法，我们仅使用头部的单个切片图像来训练我们的模型。我们总共评估了三个不同的解剖区域:</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ml"><img src="../Images/58075182a0d14d359a9bdb24c13d40e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eXh2pY15dXJrQzVS1CHwlw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">在我们的例子中，只有一个图像用于训练(参见“大脑”)。测试在两个不同的身体部位进行。由作者创建并在 4.0 的<a class="ae jg" href="https://joinup.ec.europa.eu/licence/creative-commons-attribution-40-international-cc-40" rel="noopener ugc nofollow" target="_blank"> CC 下发布的图片</a></p></figure><p id="f139" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">对于单能图像的预测，我们在数值计算精度的范围内得到 ML 输出和 vendor 算法的相似性:</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mm"><img src="../Images/dee53fc0b6675747654983262feb8e45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P9bTKa7YyZnSKSkyINT9pQ.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">对于单能图像，预测是完美的。图片由作者创建，并由 4.0 在<a class="ae jg" href="https://joinup.ec.europa.eu/licence/creative-commons-attribution-40-international-cc-40" rel="noopener ugc nofollow" target="_blank"> CC 下发布</a></p></figure><p id="7d8d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">此外，我们可以证明线性模型足以达到这种精度。通过与文献进行比较，我们可以非常精确地判断供应商实际上实现了哪种方法(在这篇博文中我们省略了这一点)。</p><p id="a1d0" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在第二个攻击场景中，我们研究了一种非线性算法。在我们的例子中，这是一种物质分离方法。为了使任务更难，我们使用了一个参考，这个参考已经用附加软件处理过，包括重新缩放和裁剪。这意味着我们必须手动对齐输入和输出图像。由于重新缩放，完美的像素对齐不再可能，这给了我们一个更加真实的环境。尽管如此，我们仍然可以训练一个非线性 ML 模型，并实现惊人的相似性，即使是在看不见的解剖结构上。在所有情况下，结构相似性高于 0.98:</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mn"><img src="../Images/46a506ed65b8fd2c99a0089c35116604.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zKPK3AZhZ5iRpiD0tp2Mpg.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">非线性方法也可以通过机器学习来学习。图片由作者创建，并由 4.0 在<a class="ae jg" href="https://joinup.ec.europa.eu/licence/creative-commons-attribution-40-international-cc-40" rel="noopener ugc nofollow" target="_blank"> CC 下发布</a></p></figure><p id="296d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们的见解是，供应商使用非线性模型来解决任务。在接下来的步骤中，我们可以应用<a class="ae jg" href="https://en.wikipedia.org/wiki/Occam%27s_razor" rel="noopener ugc nofollow" target="_blank">奥卡姆剃刀</a>来识别具有最少参数的非线性模型，该模型最好地模仿供应商的模型。然而，如果我们只对复制/再现供应商的算法感兴趣，那么我们已经使用这个简单的 ML 方法完成了。</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi md"><img src="../Images/2ad433a4403036c5595d6d2a98541f58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CxbPEy00b0523cIeawFE3A.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">现在用机器学习逆向工程图像处理算法是儿戏吗？图片来源:<a class="ae jg" href="https://pixabay.com/photos/children-win-success-video-game-593313/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></p></figure><p id="1796" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">显然，这些结果有一定的含义。如果您可以访问图像处理方法的输入和输出，您可以使用 ML 非常快速地创建一个副本。但是，出于文档目的，您可能需要像我们的医疗示例中一样披露这一点(根据医疗设备法律，使用电离辐射创建的图像必须在许多国家存储)。因此，任何竞争者都可以利用 ML 的力量非常容易地对你的软件进行逆向工程。</p><p id="ecd1" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">鉴于这些观察，我相信我们可能会重新考虑在许多应用中反对开源软件的原因。如果你的软件可以这么容易地被黑掉，为什么不直接开源呢？</p><p id="8563" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你可以在我们的文章“<a class="ae jg" href="https://arxiv.org/abs/2112.03678" rel="noopener ugc nofollow" target="_blank">中阅读完整的故事。在机器学习的时代，专有软件还能提供知识产权保护吗？</a>”，最近在德国医学影像处理研讨会上接受。</p><p id="e8f4" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果你喜欢这篇文章，你可以在这里找到<a class="ae jg" href="https://towardsdatascience.com/@akmaier" rel="noopener" target="_blank">更多的文章，在这里</a>找到更多关于机器学习的教育材料<a class="ae jg" href="https://lme.tf.fau.de/teaching/free-deep-learning-resources/" rel="noopener ugc nofollow" target="_blank">，或者看看我们的</a><a class="ae jg" href="https://www.youtube.com/watch?v=p-_Stl0t3kU&amp;list=PLpOGQvPCDQzvgpD3S0vTy7bJe2pf_yJFj" rel="noopener ugc nofollow" target="_blank">深度</a>T8】学习 T10】讲座。如果你想在未来了解更多的文章、视频和研究，我也会很感激关注 YouTube、Twitter、脸书、LinkedIn。本文以<a class="ae jg" href="https://creativecommons.org/licenses/by/4.0/deed.de" rel="noopener ugc nofollow" target="_blank">知识共享 4.0 归属许可</a>发布，如果引用，可以转载和修改。如果你有兴趣从视频讲座中生成文字记录，试试<a class="ae jg" href="http://autoblog.tf.fau.de/" rel="noopener ugc nofollow" target="_blank">自动博客</a>。</p></div></div>    
</body>
</html>