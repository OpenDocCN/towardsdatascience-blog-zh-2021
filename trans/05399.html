<html>
<head>
<title>Route Your Experiments to Files</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将您的实验路由到文件</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/route-your-experiments-to-files-11a65be823d2?source=collection_archive---------39-----------------------#2021-05-12">https://towardsdatascience.com/route-your-experiments-to-files-11a65be823d2?source=collection_archive---------39-----------------------#2021-05-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c0af" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">提高深度学习体验的小技巧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3e672faa1f3b470836c1fda9303c0b21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3IRtgx8AyWme7_vE"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">汤姆·赫尔曼斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="7488" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">运行深度学习实验可能是一项令人生畏的任务。您安排了一批实验通宵运行，结果前几天发现几乎所有的实验都失败了——并且任何堆栈跟踪都被其他测试遗忘了很久。多好的开始一天的方式:x .如果你和我一样，看到这种事情发生的次数比你愿意承认的多，这里有一个纯Python的方法来防止丢失控制台消息:</p><p id="c66a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">自动控制台到文件记录器</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="me mf l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">将任何控制台输出镜像到备份日志文件的小Python代码片段。</p></figure><p id="d279" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总的来说，在调用<code class="fe mg mh mi mj b">mirror_console_to_file(file)</code>之后，任何发送到<code class="fe mg mh mi mj b">stdout </code>和<code class="fe mg mh mi mj b">stderr </code>流的消息都将被拦截，路由到一个文件，然后像往常一样打印出来。这模仿了Linux中使用纯Python的‘tee’命令。这具有跨所有平台工作的优势，并且它给了您对过程的编程控制。</p><p id="10e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个实现中，<code class="fe mg mh mi mj b">stdout </code>和<code class="fe mg mh mi mj b">stderr </code>都指向同一个文件，并且有一个带有系统时间戳的开始和结束消息，这对于检查测试完成/失败花费了多长时间很有用。更进一步，可以通过手动检查消息中的<code class="fe mg mh mi mj b">\n</code>字符来添加每条消息的时间戳。</p><p id="533d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">需要注意的是，使用<code class="fe mg mh mi mj b">\r</code>字符的消息不会像往常一样被处理。相反，日志将按顺序包含每条消息，而不是每条消息覆盖前一条消息。这让我很恼火，所以我在开发和测试时分别打开和关闭路由代码。</p><p id="c865" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你是那种把一堆旧测试结果放在身边的人，我强烈推荐你下载<a class="ae ky" href="https://gitpython.readthedocs.io/en/stable/intro.html" rel="noopener ugc nofollow" target="_blank"> GitPython </a>。使用它，您可以获取当前的提交摘要/散列，并在日志的开头打印出来。这将极大地帮助您解析旧的日志，因为它将准确地告诉您在项目时间表的哪个点进行了这个测试。下面是一个片段:</p><pre class="kj kk kl km gt mk mj ml mm aw mn bi"><span id="26f7" class="mo mp it mj b gy mq mr l ms mt">import git<br/>head = git.Repo(search_parent_directories=True).head.object<br/>summary, sha = head.summary, head.hexsha</span></pre></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><p id="9f7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated"><span class="l lw lx ly bm lz ma mb mc md di">最后一点，您可能想知道:为什么手动将标准输出发送到一个文件，而不是使用日志库？有几个理由支持手动方法:</span></p><ul class=""><li id="2955" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated">大多数人的代码都是基于基本的print，所以将其转换成logger实现可能会花费太多的时间和精力。</li><li id="1abd" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">实际上，(非库)深度学习代码并不长，也不复杂，无法保证日志记录级别或分布式日志记录等功能。</li><li id="010f" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">有用的调试信息通常来自库警告，而不是您自己的消息。</li></ul></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><p id="7610" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有关训练深度学习模型的更多提示，请考虑阅读:</p><div class="np nq gp gr nr ns"><a rel="noopener follow" target="_blank" href="/taking-keras-and-tensorflow-to-the-next-level-c73466e829d3"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd iu gy z fp nx fr fs ny fu fw is bi translated">让Keras和TensorFlow更上一层楼</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">充分利用Keras和TensorFlow的11个技巧和诀窍</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og ks ns"/></div></div></a></div><div class="np nq gp gr nr ns"><a rel="noopener follow" target="_blank" href="/memory-efficient-data-science-types-53423d48ba1d"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd iu gy z fp nx fr fs ny fu fw is bi translated">高效内存数据科学:类型</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">通过在正确的时间使用正确的浮点和整数，节省高达90%的内存。</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oh l od oe of ob og ks ns"/></div></div></a></div><p id="9bca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您对本文有任何问题，请随时发表评论或与我联系。如果你刚接触媒体，我强烈推荐<a class="ae ky" href="https://ygorserpa.medium.com/membership" rel="noopener">订阅</a>。对于数据和IT专业人士来说，中型文章是<a class="ae ky" href="https://stackoverflow.com/" rel="noopener ugc nofollow" target="_blank"> StackOverflow </a>的完美搭档，对于新手来说更是如此。注册时请考虑使用<a class="ae ky" href="https://ygorserpa.medium.com/membership" rel="noopener">我的会员链接。</a></p><p id="3a4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读:)</p></div></div>    
</body>
</html>