<html>
<head>
<title>How to Declutter a Bar Chart in Altair</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•åœ¨ Altair ä¸­æ•´ç†æ¡å½¢å›¾</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://towardsdatascience.com/how-to-declutter-a-bar-chart-in-altair-e721f5c0ad87?source=collection_archive---------20-----------------------#2021-12-27">https://towardsdatascience.com/how-to-declutter-a-bar-chart-in-altair-e721f5c0ad87?source=collection_archive---------20-----------------------#2021-12-27</a></blockquote><div><div class="fc ik il im in io"/><div class="ip iq ir is it"><h2 id="bf91" class="iu iv iw bd b dl ix iy iz ja jb jc dk jd translated" aria-label="kicker paragraph">æ•°æ®å¯è§†åŒ–</h2><div class=""/><div class=""><h2 id="2c61" class="pw-subtitle-paragraph kc jf iw bd b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dk translated">å…³äºå¦‚ä½•é€šè¿‡æµè¡Œçš„ Python æ•°æ®åº“æé«˜æ¡å½¢å›¾å¯è¯»æ€§çš„ä¸€äº›æŠ€å·§å’Œæç¤º</h2></div><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj ku"><img src="../Images/8abb9fcff4bb09ec4ba8a700e597349a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dUGYvYaCBGAcJw7z"/></div></div><p class="lg lh gk gi gj li lj bd b be z dk translated">ç…§ç‰‡ç”±<a class="ae lk" href="https://unsplash.com/@nate_dumlao?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">å†…æ£®Â·æœå§†åŠ³</a>åœ¨<a class="ae lk" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„</p></figure><p id="080f" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">æœ€è¿‘æˆ‘è¯»äº†ä¸€æœ¬éå¸¸æœ‰è¶£çš„ä¹¦ï¼Œä½œè€…æ˜¯ Jose Berengueresï¼Œä¹¦åä¸º<em class="mh">æ•°æ®å¯è§†åŒ–ç®€ä»‹&amp;è®²æ•…äº‹:æ•°æ®ç§‘å­¦å®¶æŒ‡å—ã€‚åœ¨æœ¬ä¹¦ä¸­ï¼Œä½œè€…æè¿°äº†è®¸å¤šä»æ•°æ®é›†ä¸­æå–ä¸€ä¸ªéå¸¸æœ‰è¶£çš„æ•…äº‹çš„æŠ€æœ¯ã€‚å—è¿™æœ¬ä¹¦çš„å¯å‘ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘æè¿°äº†ä¸€ä¸ªåœ¨ Altair ä¸­æ•´ç†æ¡å½¢å›¾å¹¶ä»è¡¨ç¤ºçš„æ•°æ®ä¸­æå–ä¸€ä¸ªæ•…äº‹çš„ç­–ç•¥ã€‚</em></p><p id="1082" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">Altair æ˜¯ä¸€ä¸ªæµè¡Œçš„ç”¨äºæ•°æ®å¯è§†åŒ–çš„ Python åº“ã€‚è¿˜æœ‰è®¸å¤šå…¶ä»–ç”¨äºæ•°æ®å¯è§†åŒ–çš„ Python åº“ï¼Œæ¯”å¦‚ Matplotlib å’Œ Seabornã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘å°†æè¿° Altairï¼Œç•™å¾…å°†æ¥åˆ†æå…¶ä»–æ•°æ® Viz åº“æ—¶ä½¿ç”¨ğŸ˜ƒ</p><p id="7c93" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘å°†æ¼”ç¤ºå¦‚ä½•åœ¨ Altair ä¸­æ„å»ºä¸€ä¸ªæ¡å½¢å›¾ï¼Œä»¥åŠå¦‚ä½•å¯¹å…¶è¿›è¡Œæ•´ç†ã€‚</p><blockquote class="mi"><p id="50b6" class="mj mk iw bd ml mm mn mo mp mq mr mg dk translated">æ•´ç†å›¾è¡¨æ„å‘³ç€åˆ é™¤æ‰€æœ‰ä¸å¿…è¦çš„ä¸œè¥¿ï¼Œè¿™äº›ä¸œè¥¿ä¼šåˆ†æ•£è¯»è€…è·å–æ­£ç¡®ä¿¡æ¯çš„æ³¨æ„åŠ›ã€‚</p></blockquote><p id="2668" class="pw-post-body-paragraph ll lm iw ln b lo ms kg lq lr mt kj lt lu mu lw lx ly mv ma mb mc mw me mf mg ip bi translated">ä½œä¸ºä¸€ä¸ªç”¨ä¾‹ï¼Œæˆ‘åˆ©ç”¨äº†æ¬§ç›Ÿç»Ÿè®¡å±€æä¾›çš„<a class="ae lk" href="https://ec.europa.eu/eurostat/databrowser/view/tps00204/default/table?lang=en" rel="noopener ugc nofollow" target="_blank">æ´»äº§å’Œç²—å‡ºç”Ÿç‡</a>æ•°æ®é›†ã€‚è¯¥æ•°æ®é›†åŒ…å«ä» 2009 å¹´åˆ° 2020 å¹´æ¯ä¸ªæ¬§æ´²å›½å®¶çš„æ´»äº§å©´å„¿æ•°é‡ã€‚</p><p id="924c" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated"><strong class="ln jg">ç›®æ ‡æ˜¯é€šè¿‡æ•´ç†ä¸€ä¸ªåŸºæœ¬æ¡å½¢å›¾ï¼Œä»æ•°æ®ä¸­æå–ä¸€äº›æœ‰æ„ä¹‰çš„ä¿¡æ¯ï¼Œé‡ç‚¹æ˜¯ä¸Šä¸€æœŸ(2019â€“2020)ã€‚</strong></p><p id="a6ab" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">ç›®å½•:</p><ul class=""><li id="3a72" class="mx my iw ln b lo lp lr ls lu mz ly na mc nb mg nc nd ne nf bi translated">åŠ è½½å¹¶æ¸…ç†æ•°æ®é›†</li><li id="dfba" class="mx my iw ln b lo ng lr nh lu ni ly nj mc nk mg nc nd ne nf bi translated">æ¡å½¢å›¾åŸºç¡€</li><li id="ab31" class="mx my iw ln b lo ng lr nh lu ni ly nj mc nk mg nc nd ne nf bi translated">æ•°æ®èšåˆ</li><li id="258d" class="mx my iw ln b lo ng lr nh lu ni ly nj mc nk mg nc nd ne nf bi translated">æœ€ç»ˆæ¸…ç†</li></ul><h1 id="ce07" class="nl nm iw bd nn no np nq nr ns nt nu nv kl nw km nx ko ny kp nz kr oa ks ob oc bi translated">1 åŠ è½½å¹¶æ¸…ç†æ•°æ®é›†</h1><p id="b2ea" class="pw-post-body-paragraph ll lm iw ln b lo od kg lq lr oe kj lt lu of lw lx ly og ma mb mc oh me mf mg ip bi translated">æˆ‘ä¸‹è½½äº†ã€‚XSLX æ–‡ä»¶å’Œæˆ‘é€šè¿‡<code class="fe oi oj ok ol b">read_excel()</code>å‡½æ•°åŠ è½½çš„ç†ŠçŒ«æ•°æ®å¸§:</p><pre class="kv kw kx ky gu om ol on oo aw op bi"><span id="5e16" class="oq nm iw ol b gz or os l ot ou">import pandas as pd</span><span id="efda" class="oq nm iw ol b gz ov os l ot ou">df = pd.read_excel('../sources/eu_live_births.xlsx', header=7, sheet_name="Sheet 1", na_values=':')<br/>df.head(10)</span></pre><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj ow"><img src="../Images/cdd0ae9cb861234c5db39bade8029958.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kn3jNuDEWivhKwz-D82Tpw.png"/></div></div><p class="lg lh gk gi gj li lj bd b be z dk translated">ä½œè€…å›¾ç‰‡</p></figure><p id="2aa2" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">æ•°æ®é›†éå¸¸è„ï¼Œå› æ­¤æˆ‘é€šè¿‡åªé€‰æ‹©æ„Ÿå…´è¶£çš„åˆ—æ¥æ¸…ç†å®ƒã€‚</p><pre class="kv kw kx ky gu om ol on oo aw op bi"><span id="a4a2" class="oq nm iw ol b gz or os l ot ou">df = df[['TIME', '2019', '2020']]<br/>df.head()</span></pre><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj ox"><img src="../Images/c024cd05a6ecdefd6cf73a99c78f56f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IUJJr1CkOmJwkX54hGBT-Q.png"/></div></div><p class="lg lh gk gi gj li lj bd b be z dk translated">ä½œè€…å›¾ç‰‡</p></figure><p id="36ca" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">æˆ‘å°†<code class="fe oi oj ok ol b">TIME</code>åˆ—é‡å‘½åä¸º<code class="fe oi oj ok ol b">Country</code></p><pre class="kv kw kx ky gu om ol on oo aw op bi"><span id="78fc" class="oq nm iw ol b gz or os l ot ou">df.rename(columns={'TIME' : 'Country'}, inplace=True)</span></pre><p id="bdd3" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">ç„¶åæˆ‘åˆ é™¤åˆ— 2020 å’Œ 2019 çš„<code class="fe oi oj ok ol b">NaN</code>å€¼</p><pre class="kv kw kx ky gu om ol on oo aw op bi"><span id="a178" class="oq nm iw ol b gz or os l ot ou">df.dropna(subset=['2020'],inplace=True)<br/>df.dropna(subset=['2019'],inplace=True)</span></pre><p id="cd30" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">æˆ‘åˆ é™¤äº†å‰å…­è¡Œï¼Œå®ƒä»¬æ˜¯ç›¸å¯¹äºæ•´ä¸ªæ¬§æ´²çš„:</p><pre class="kv kw kx ky gu om ol on oo aw op bi"><span id="2102" class="oq nm iw ol b gz or os l ot ou">df = df.iloc[6:]</span></pre><h1 id="f101" class="nl nm iw bd nn no np nq nr ns nt nu nv kl nw km nx ko ny kp nz kr oa ks ob oc bi translated">2 å»ºç«‹ä¸€ä¸ªåŸºæœ¬çš„æ¡å½¢å›¾</h1><p id="ace4" class="pw-post-body-paragraph ll lm iw ln b lo od kg lq lr oe kj lt lu of lw lx ly og ma mb mc oh me mf mg ip bi translated">ç°åœ¨æˆ‘ç”¨ 2020 å¹´çš„æ•°æ®æ„å»ºäº†ä¸€ä¸ªåŸå§‹æ¡å½¢å›¾:</p><pre class="kv kw kx ky gu om ol on oo aw op bi"><span id="016a" class="oq nm iw ol b gz or os l ot ou">import altair as alt<br/>bars = alt.Chart(df).mark_bar().encode(<br/>    x=alt.X('2020:Q'),<br/>    y=alt.Y('Country:N'),<br/>)</span></pre><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div class="gi gj oy"><img src="../Images/99d0021d1d50d4d035e0c023a9126eb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*Tybgory4PxVD2HalNHmU0w.png"/></div><p class="lg lh gk gi gj li lj bd b be z dk translated">ä½œè€…å›¾ç‰‡</p></figure><p id="24dd" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">æ¡å½¢å›¾å¾ˆéš¾é˜…è¯»ï¼Œå› æ­¤æˆ‘é€šè¿‡<code class="fe oi oj ok ol b">sort='-x'</code>å‚æ•°è®¢è´­ DESC æ£’æ(ä½¿ç”¨<code class="fe oi oj ok ol b">x</code>è®¢è´­ ASC)ã€‚</p><pre class="kv kw kx ky gu om ol on oo aw op bi"><span id="0dfe" class="oq nm iw ol b gz or os l ot ou">bars = alt.Chart(df).mark_bar().encode(<br/>    x=alt.X('2020:Q'),<br/>    y=alt.Y('Country:N', sort='-x'),<br/>)</span></pre><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div class="gi gj oy"><img src="../Images/4fbdf84dbc3544f0d980dc43a27da566.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*od6vT3gJb90ZY37b5THmnA.png"/></div><p class="lg lh gk gi gj li lj bd b be z dk translated">ä½œè€…å›¾ç‰‡</p></figure><p id="8589" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">æˆªæ–­åˆ°å‰ 10 ä¸ªå›½å®¶æ˜¯å¯¹è¯¥æ¡å½¢å›¾çš„å”¯ä¸€æ”¹è¿›ã€‚ç„¶è€Œï¼Œ<strong class="ln jg">æˆªæ–­æ•°æ®å¹¶ä¸æ˜¯ç†è§£ç°è±¡</strong>çš„æœ€ä½³è§£å†³æ–¹æ¡ˆã€‚å› æ­¤ï¼Œæˆ‘éµå¾ªå¦ä¸€ç§ç­–ç•¥ï¼Œå³æŠŠå›½å®¶èšåˆåˆ°å®è§‚åŒºåŸŸ(æˆ–åœ°åŒº)ã€‚</p><h1 id="9056" class="nl nm iw bd nn no np nq nr ns nt nu nv kl nw km nx ko ny kp nz kr oa ks ob oc bi translated">3 æ•°æ®æ±‡æ€»</h1><p id="aec3" class="pw-post-body-paragraph ll lm iw ln b lo od kg lq lr oe kj lt lu of lw lx ly og ma mb mc oh me mf mg ip bi translated">æˆ‘çš„åŸå§‹æ•°æ®é›†ä¸åŒ…å«ä»»ä½•èšåˆä¿¡æ¯ï¼Œå› æ­¤æˆ‘åº”è¯¥å¢åŠ ä¸€ä¸ªæ–°åˆ—ï¼ŒåŒ…å«æ¯ä¸ªå›½å®¶çš„å®è§‚åŒºåŸŸã€‚</p><p id="31d7" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">æˆ‘åˆ©ç”¨äº†ä»è¿™ä¸ª<a class="ae lk" href="https://www.schengenvisainfo.com/countries-in-europe/" rel="noopener ugc nofollow" target="_blank">ç½‘ç«™</a>ä¸­æå–çš„å¦ä¸€ä¸ªæ•°æ®é›†ï¼Œå®ƒåŒ…å«äº†æ¯ä¸ªå›½å®¶åŠå…¶åœ°åŒºå’Œäººå£ã€‚</p><p id="d7dd" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">æˆ‘åŠ è½½æ•°æ®é›†:</p><pre class="kv kw kx ky gu om ol on oo aw op bi"><span id="8411" class="oq nm iw ol b gz or os l ot ou">df_regions = pd.read_csv('../sources/eu_regions.csv', sep=';')</span></pre><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj oz"><img src="../Images/7b75ce7b6868a058f479f694f67eaf3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jawepFa7URjrE9H1cn6Dgg.png"/></div></div><p class="lg lh gk gi gj li lj bd b be z dk translated">ä½œè€…å›¾ç‰‡</p></figure><p id="c938" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">æˆ‘å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå›½å®¶ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›å®ƒçš„å­åŒºåŸŸã€‚è¯¥å‡½æ•°è¿˜ç®¡ç†å¼‚å¸¸ã€‚</p><pre class="kv kw kx ky gu om ol on oo aw op bi"><span id="eb7f" class="oq nm iw ol b gz or os l ot ou">def get_region(x):<br/>    south_exceptions = ['Cyprus', 'Turkey']<br/>    east_exceptions = ['Armenia', 'Azerbaijan']<br/>    if x in south_exceptions:<br/>        return 'Southern Europe'<br/>    if x in east_exceptions:<br/>        return 'Eastern Europe'<br/>    row = df_regions[df_regions['Country'] == x]<br/>    return row['Subregion'].iloc[0]</span></pre><p id="44ae" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">ç°åœ¨æˆ‘ä¸°å¯Œäº†æˆ‘çš„åŸå§‹æ•°æ®é›†:</p><pre class="kv kw kx ky gu om ol on oo aw op bi"><span id="2ddb" class="oq nm iw ol b gz or os l ot ou">df['Region'] = df['Country'].apply(lambda x: get_region(x))</span></pre><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj pa"><img src="../Images/c9a2a79209c913630f46b2d9f99b2547.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*fWi_WmBWqeG_hTZerMKRNg.png"/></div></div><p class="lg lh gk gi gj li lj bd b be z dk translated">ä½œè€…å›¾ç‰‡</p></figure><p id="0b4d" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">ç°åœ¨ï¼Œæˆ‘æ„å»ºèšåˆæ¡å½¢å›¾ã€‚æˆ‘åˆ©ç”¨<code class="fe oi oj ok ol b">transform_aggregate()</code>å‡½æ•°æ¥è®¡ç®—æ¯ä¸ªåŒºåŸŸçš„å¹³å‡å€¼ã€‚æˆ‘è¦æ„Ÿè°¢<a class="pb pc ep" href="https://medium.com/u/2cf6b549448?source=post_page-----e721f5c0ad87--------------------------------" rel="noopener" target="_blank">Soner y ldr RM</a>ï¼Œä»–è®©æˆ‘åœ¨é¢˜ä¸º<a class="ae lk" rel="noopener" target="_blank" href="/3-examples-to-show-python-altair-is-more-than-a-data-visualization-library-700e37cbf95b"> 3 ä¸ªä¾‹å­æ¥å±•ç¤º Python Altair ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ•°æ®å¯è§†åŒ–åº“</a>çš„æ–‡ç« ä¸­å‘ç°äº†<code class="fe oi oj ok ol b">transform_aggregate()</code>å‡½æ•°ã€‚</p><pre class="kv kw kx ky gu om ol on oo aw op bi"><span id="150a" class="oq nm iw ol b gz or os l ot ou">bars = alt.Chart(df).mark_bar().encode(<br/>    x=alt.X('avg_value:Q'),<br/>    y=alt.Y('Region:N')<br/>).<strong class="ol jg">transform_aggregate</strong>(<br/>   avg_value = 'average(2020)', groupby = ['Region']<br/>)</span></pre><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div class="gi gj pd"><img src="../Images/0787d47cc7fb8806dc3d1c56235d3bcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*9Wk3E3XfVGAKsq30VjxRcQ.png"/></div><p class="lg lh gk gi gj li lj bd b be z dk translated">ä½œè€…å›¾ç‰‡</p></figure><p id="5102" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">åœ¨æ¯”è¾ƒæ•°é‡æ—¶ï¼Œç»å¯¹å€¼ä¸æ˜¯æœ€ä½³è§£å†³æ–¹æ¡ˆã€‚å› æ­¤ï¼Œæˆ‘è®¡ç®—äº† 2020 å¹´ç›¸å¯¹äº 2019 å¹´çš„æ´»äº§å‡å°‘/å¢åŠ ç™¾åˆ†æ¯”:</p><pre class="kv kw kx ky gu om ol on oo aw op bi"><span id="f132" class="oq nm iw ol b gz or os l ot ou">import math</span><span id="47d2" class="oq nm iw ol b gz ov os l ot ou">df['2020_2019'] = -(df['2020'] - df['2019'])/df['2019']</span></pre><p id="0e12" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">æˆ‘å†æ¬¡ç»˜åˆ¶æ¡å½¢å›¾:</p><pre class="kv kw kx ky gu om ol on oo aw op bi"><span id="f9b4" class="oq nm iw ol b gz or os l ot ou">bars = alt.Chart(df).mark_bar().encode(<br/>    x=alt.X('avg_value:Q'),<br/>    y=alt.Y('Region:N')<br/>).transform_aggregate(<br/>   avg_value = 'average(2020_2019)', groupby = ['Region']<br/>)</span></pre><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div class="gi gj pd"><img src="../Images/ecffea8246c2b053a1d242a47aaf3152.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*TdS8q6y4YEgkUbn6KCE42g.png"/></div><p class="lg lh gk gi gj li lj bd b be z dk translated">ä½œè€…å›¾ç‰‡</p></figure><p id="bd4c" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">å›¾è¡¨å¾ˆæ¸…æ¥š:<strong class="ln jg">ä¸œæ¬§ç»å†äº†æœ€å¤§çš„ç™¾åˆ†æ¯”ä¸‹é™</strong>ã€‚è¿™ä¸€æ–¹é¢å¯èƒ½æ˜¯è¦è®²çš„æ•…äº‹ã€‚</p><h1 id="4171" class="nl nm iw bd nn no np nq nr ns nt nu nv kl nw km nx ko ny kp nz kr oa ks ob oc bi translated">4 æœ€ç»ˆæ¸…ç†</h1><p id="3fd4" class="pw-post-body-paragraph ll lm iw ln b lo od kg lq lr oe kj lt lu of lw lx ly og ma mb mc oh me mf mg ip bi translated">ç°åœ¨ï¼Œæ•…äº‹å·²ç»ä»æ•°æ®ä¸­æå–å‡ºæ¥ï¼Œæˆ‘å¯ä»¥è¿›ä¸€æ­¥æ•´ç†å›¾è¡¨ã€‚é¦–å…ˆï¼Œæˆ‘è®¾ç½®äº†å›¾å½¢æ ‡é¢˜:</p><pre class="kv kw kx ky gu om ol on oo aw op bi"><span id="eb67" class="oq nm iw ol b gz or os l ot ou">bars = alt.Chart(df).mark_bar().encode(<br/>    x=alt.X('avg_value:Q'),<br/>    y=alt.Y('Region:N')<br/>).transform_aggregate(<br/>   avg_value = 'average(2020_2019)', groupby = ['Region']<br/>)<strong class="ol jg">.properties(<br/>     height = 300<br/>)</strong></span></pre><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div class="gi gj pd"><img src="../Images/c7b5c68d63e09bcd89140cda8e95cdae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*2Qifa-UtPxNA0n0Wh_GpRw.png"/></div><p class="lg lh gk gi gj li lj bd b be z dk translated">ä½œè€…å›¾ç‰‡</p></figure><p id="72ec" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">ç„¶åï¼Œæˆ‘æŠŠæ ‡ç­¾è´´åœ¨æ …æ é™„è¿‘:</p><pre class="kv kw kx ky gu om ol on oo aw op bi"><span id="4362" class="oq nm iw ol b gz or os l ot ou">bars = alt.Chart(df).mark_bar().encode(<br/>    x=alt.X('avg_value:Q'),<br/>    y=alt.Y('Region:N')<br/>).transform_aggregate(<br/>   avg_value = 'average(2020_2019)', groupby = ['Region']<br/>)</span><span id="cb3a" class="oq nm iw ol b gz ov os l ot ou"><strong class="ol jg">text = bars.mark_text(<br/>    align='left',<br/>    baseline='middle',<br/>    dx=3,<br/>    fontStyle='bold',<br/>    fontSize=20<br/>).encode(<br/>    text=alt.Text('avg_value:Q', format=",.3f")</strong><br/>)</span><span id="cbb0" class="oq nm iw ol b gz ov os l ot ou">final_bar = (bars + text).properties(<br/>     height = 300<br/>)</span></pre><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div class="gi gj pe"><img src="../Images/4b0df869e9b8512e14c57c1355a31b1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1098/format:webp/1*a4HsbtV5WsLRZXOJszUP_A.png"/></div><p class="lg lh gk gi gj li lj bd b be z dk translated">ä½œè€…å›¾ç‰‡</p></figure><p id="6aa9" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">æˆ‘ç§»é™¤è½´:</p><pre class="kv kw kx ky gu om ol on oo aw op bi"><span id="feb1" class="oq nm iw ol b gz or os l ot ou">bars = alt.Chart(df).mark_bar().encode(<br/>    x=alt.X('avg_value:Q', <strong class="ol jg">axis=None</strong>),<br/>    y=alt.Y('Region:N', <strong class="ol jg">title=''</strong>)<br/>).transform_aggregate(<br/>   avg_value = 'average(2020_2019)', groupby = ['Region']<br/>)</span><span id="d0bb" class="oq nm iw ol b gz ov os l ot ou">text = bars.mark_text(<br/>    align='left',<br/>    baseline='middle',<br/>    dx=3,<br/>    fontStyle='bold',<br/>    fontSize=20<br/>).encode(<br/>    text=alt.Text('avg_value:Q', format=",.3f")<br/>)</span><span id="96f6" class="oq nm iw ol b gz ov os l ot ou">final_bar = (bars + text).properties(<br/>     height = 300<br/>)<br/>final_bar</span></pre><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div class="gi gj pf"><img src="../Images/e1d649c9725c8be2b3661a511d6c7411.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*7IoEPSQIg5G-_IbVrX42Eg.png"/></div><p class="lg lh gk gi gj li lj bd b be z dk translated">ä½œè€…å›¾ç‰‡</p></figure><p id="a1d2" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">æˆ‘åŠ ä¸Šæ ‡é¢˜:</p><pre class="kv kw kx ky gu om ol on oo aw op bi"><span id="03ec" class="oq nm iw ol b gz or os l ot ou">bars = alt.Chart(df).mark_bar().encode(<br/>    x=alt.X('avg_value:Q', axis=None),<br/>    y=alt.Y('Region:N', title='')<br/>).transform_aggregate(<br/>   avg_value = 'average(2020_2019)', groupby = ['Region']<br/>)</span><span id="8fbc" class="oq nm iw ol b gz ov os l ot ou">text = bars.mark_text(<br/>    align='left',<br/>    baseline='middle',<br/>    dx=3,<br/>    fontStyle='bold',<br/>    fontSize=20<br/>).encode(<br/>    text=alt.Text('avg_value:Q', format=",.3f"),<br/>    <br/>)</span><span id="8206" class="oq nm iw ol b gz ov os l ot ou">final_bar = (bars + text).properties(<br/>    height = 300,<br/>    <strong class="ol jg">title = 'Percentage Decrease in Live Births (2020-2019)'</strong><br/>).<strong class="ol jg">configure_title(<br/>    fontSize=24<br/>)</strong></span></pre><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div class="gi gj pg"><img src="../Images/ada97a97158304a3110014dd7912c922.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*RfsV1Z_XH0ev7xE-9OT4HQ.png"/></div><p class="lg lh gk gi gj li lj bd b be z dk translated">ä½œè€…å›¾ç‰‡</p></figure><p id="ba53" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">æœ€åï¼Œæˆ‘å°†é‡ç‚¹ä»‹ç»ä¸€ä¸ªåœ°åŒº(å—æ¬§)çš„æƒ…å†µ:</p><pre class="kv kw kx ky gu om ol on oo aw op bi"><span id="38a0" class="oq nm iw ol b gz or os l ot ou">bars = alt.Chart(df).mark_bar().encode(<br/>    x=alt.X('avg_value:Q', axis=None),<br/>    y=alt.Y('Region:N', title=''),<br/>    <strong class="ol jg">color=alt.condition(alt.datum.Region == 'Southern Europe', alt.value('#8B0000'), alt.value('grey'))</strong><br/>).transform_aggregate(<br/>   avg_value = 'average(2020_2019)', groupby = ['Region']<br/>)</span><span id="8c06" class="oq nm iw ol b gz ov os l ot ou">text = bars.mark_text(<br/>    align='left',<br/>    baseline='middle',<br/>    dx=3,<br/>    fontStyle='bold',<br/>    fontSize=20<br/>).encode(<br/>    text=alt.Text('avg_value:Q', format=",.3f"),<br/>    <br/>)</span><span id="0f1a" class="oq nm iw ol b gz ov os l ot ou">final_bar = (bars + text).properties(<br/>    height = 300,<br/>    title = 'Percentage Decrease in Live Births (2020-2019)'<br/>).configure_title(<br/>    fontSize=24<br/>)</span></pre><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div class="gi gj pg"><img src="../Images/c610b3c96af4a5433d4435981a270e08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*Kcqao1Dr8jwRT-maFnlsZA.png"/></div><p class="lg lh gk gi gj li lj bd b be z dk translated">ä½œè€…å›¾ç‰‡</p></figure><h1 id="7e89" class="nl nm iw bd nn no np nq nr ns nt nu nv kl nw km nx ko ny kp nz kr oa ks ob oc bi translated">æ‘˜è¦</h1><p id="1a47" class="pw-post-body-paragraph ll lm iw ln b lo od kg lq lr oe kj lt lu of lw lx ly og ma mb mc oh me mf mg ip bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä¸¾ä¾‹è¯´æ˜äº†ä¸€ä¸ªåœ¨ Altair ä¸­æ•´ç†æ¡å½¢å›¾å¹¶ä½¿å…¶å¯è¯»æ€§æ›´å¥½çš„å®ä¾‹ã€‚æ¸…ç†éœ€è¦ä»¥ä¸‹æ“ä½œ:</p><ul class=""><li id="7d83" class="mx my iw ln b lo lp lr ls lu mz ly na mc nb mg nc nd ne nf bi translated">ä¸ºåˆæ­¥æ•°æ®æ¢ç´¢æ„å»ºä¸€ä¸ªåŸºæœ¬æ¡å½¢å›¾</li><li id="d7a8" class="mx my iw ln b lo ng lr nh lu ni ly nj mc nk mg nc nd ne nf bi translated">èšåˆæ•°æ®ï¼Œå¦‚æœèšåˆæ•°æ®ä¸å¯ç”¨ï¼Œåˆ™æœç´¢å¦ä¸€ä¸ªæ•°æ®é›†</li><li id="8871" class="mx my iw ln b lo ng lr nh lu ni ly nj mc nk mg nc nd ne nf bi translated">ç»˜åˆ¶èšåˆæ•°æ®å¹¶æå–æ•…äº‹</li><li id="8e53" class="mx my iw ln b lo ng lr nh lu ni ly nj mc nk mg nc nd ne nf bi translated">é€šè¿‡åˆ é™¤è½´ã€æ·»åŠ æ ‡é¢˜å’Œçªå‡ºæ˜¾ç¤ºæ–‡ç« ï¼Œæ‰§è¡Œæœ€ç»ˆçš„æ•´ç†ã€‚</li></ul><p id="f6f0" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">å¦‚æœä½ å·²ç»èµ°åˆ°è¿™ä¸€æ­¥æ¥é˜…è¯»ï¼Œå¯¹æˆ‘æ¥è¯´ï¼Œä»Šå¤©å·²ç»æœ‰å¾ˆå¤šäº†ã€‚è°¢è°¢ï¼ä½ å¯ä»¥åœ¨æœ¬æ–‡ä¸­è¯»åˆ°æ›´å¤šå…³äºæˆ‘çš„ä¿¡æ¯ã€‚</p><p id="d73f" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">æ‚¨å¯ä»¥ä»æˆ‘çš„<a class="ae lk" href="https://github.com/alod83/data-science/blob/master/DataVisualization/Altair/Altair%20Decluttering.ipynb" rel="noopener ugc nofollow" target="_blank"> Github èµ„æºåº“</a>ä¸‹è½½æœ¬æ•™ç¨‹çš„å®Œæ•´ä»£ç ã€‚</p><h1 id="9c06" class="nl nm iw bd nn no np nq nr ns nt nu nv kl nw km nx ko ny kp nz kr oa ks ob oc bi translated">ç›¸å…³æ–‡ç« </h1><div class="ph pi gq gs pj pk"><a rel="noopener follow" target="_blank" href="/how-to-run-animations-in-altair-and-streamlit-2a0624789ad"><div class="pl ab fp"><div class="pm ab pn cl cj po"><h2 class="bd jg gz z fq pp fs ft pq fv fx jf bi translated">å¦‚ä½•åœ¨ç‰›éƒæ˜Ÿå’Œç»†æµä¸­è¿è¡ŒåŠ¨ç”»</h2><div class="pr l"><h3 class="bd b gz z fq pp fs ft pq fv fx dk translated">ä¸€ä¸ªå‡†å¤‡è¿è¡Œçš„æ•™ç¨‹ï¼Œå®ƒæè¿°äº†å¦‚ä½•å»ºç«‹ä¸€ä¸ªåŠ¨ç”»æŠ˜çº¿å›¾ä½¿ç”¨é˜¿å°”æ³°å’Œç»†æµã€‚</h3></div><div class="ps l"><p class="bd b dl z fq pp fs ft pq fv fx dk translated">towardsdatascience.com</p></div></div><div class="pt l"><div class="pu l pv pw px pt py le pk"/></div></div></a></div><div class="ph pi gq gs pj pk"><a rel="noopener follow" target="_blank" href="/data-visualisation-principles-part-1-a-practical-example-in-altair-b6e16f665fc6"><div class="pl ab fp"><div class="pm ab pn cl cj po"><h2 class="bd jg gz z fq pp fs ft pq fv fx jf bi translated">æ•°æ®å¯è§†åŒ–åŸç†ç¬¬ 1 éƒ¨åˆ†â€”â€”é˜¿å°”æ³°ä¸­çš„ä¸€ä¸ªå®ä¾‹</h2><div class="pr l"><h3 class="bd b gz z fq pp fs ft pq fv fx dk translated">è¿™æ˜¯ä¸€ä¸ªå®ç”¨çš„æ•™ç¨‹ï¼Œä»‹ç»å¦‚ä½•åœ¨ Python Altair ä¸­æ„å»ºã€è‡ªå®šä¹‰ç®€å•æ¡å½¢å›¾å¹¶å‘å…¶æ·»åŠ æ³¨é‡Š</h3></div><div class="ps l"><p class="bd b dl z fq pp fs ft pq fv fx dk translated">towardsdatascience.com</p></div></div><div class="pt l"><div class="pz l pv pw px pt py le pk"/></div></div></a></div><div class="ph pi gq gs pj pk"><a rel="noopener follow" target="_blank" href="/data-visualisation-principles-part-1-white-space-text-and-colour-13f520f90ce9"><div class="pl ab fp"><div class="pm ab pn cl cj po"><h2 class="bd jg gz z fq pp fs ft pq fv fx jf bi translated">æ•°æ®å¯è§†åŒ–åŸåˆ™ç¬¬ 1 éƒ¨åˆ†:ç©ºç™½ã€æ–‡æœ¬å’Œé¢œè‰²</h2><div class="pr l"><h3 class="bd b gz z fq pp fs ft pq fv fx dk translated">ä»åŸºæœ¬çš„å¹³é¢è®¾è®¡åŸåˆ™å¼€å§‹ã€‚</h3></div><div class="ps l"><p class="bd b dl z fq pp fs ft pq fv fx dk translated">towardsdatascience.com</p></div></div><div class="pt l"><div class="qa l pv pw px pt py le pk"/></div></div></a></div></div></div>    
</body>
</html>