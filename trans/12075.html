<html>
<head>
<title>DeepDiff — Recursively Find and Ignore Trivial Differences Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">DeepDiff——使用Python递归查找并忽略细微差异</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/deepdiff-recursively-find-and-ignore-trivial-differences-using-python-231a5524f41d?source=collection_archive---------12-----------------------#2021-12-06">https://towardsdatascience.com/deepdiff-recursively-find-and-ignore-trivial-differences-using-python-231a5524f41d?source=collection_archive---------12-----------------------#2021-12-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8d30" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">比较两个Python对象时出现有意义的断言错误</h2></div><h1 id="c8e5" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">动机</h1><p id="e356" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在比较两个Python对象时，您可能不希望测试集中在一些细微的差异上，比如列表中值的顺序。</p><p id="48b6" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">例如，您可能希望测试认为<code class="fe mb mc md me b">[3, 2]</code>与<code class="fe mb mc md me b">[2, 3]</code>相同。</p><figure class="mf mg mh mi gt mj"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="308e" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">但是，如果顺序不同，就会出现错误。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/84440012e08034edfaecf60fe4835d74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/format:webp/1*Z1ehQ4jD8G40Xl4vis1MDg.png"/></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">作者图片</p></figure><p id="7611" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">在比较两个Python对象时，有没有一种方法可以忽略顺序？</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi mt"><img src="../Images/80f0f5802ea3c6de0a6716b508ff3d9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CtVLOs4b8R9tTmJOac4CMg.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">作者图片</p></figure><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/f89ebb46e118e112587194555b69fc35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/format:webp/1*YKCpv60eNOdyrKKp2PMCTA.png"/></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">作者图片</p></figure><p id="fbd1" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">这时DeepDiff就派上用场了。在本文中，您将学习如何使用DeepDiff来防止比较Python对象的某些部分。</p><h1 id="160d" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">什么是DeepDiff？</h1><p id="1831" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">DeepDiff 是一个Python库，它递归地查找字典、可重复项、字符串和其他对象中的所有变化。</p><p id="8dbe" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">要安装DeepDiff，请键入:</p><pre class="mf mg mh mi gt mz me na nb aw nc bi"><span id="5119" class="nd kj it me b gy ne nf l ng nh">pip install deepdiff</span></pre><h1 id="b3b3" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">描述错误</h1><p id="5bcb" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">当使用<code class="fe mb mc md me b">assert</code>比较两个不同的Python对象时，您可能会得到类似下面的错误:</p><figure class="mf mg mh mi gt mj"><div class="bz fp l di"><div class="mk ml l"/></div></figure><pre class="mf mg mh mi gt mz me na nb aw nc bi"><span id="5287" class="nd kj it me b gy ne nf l ng nh">AssertionError: assert {'apple': 2, 'banana': [3, 2, 2], 'orange': 3} == {'apple': 2, 'banana': [3, 2], 'orange': 3}</span></pre><p id="36a5" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">这个断言错误信息不多，因为我们不知道使这两个字典不同的确切元素。</p><p id="ebc3" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">使用DeepDiff，我们可以看到一个更具描述性的错误，它显示了差异是什么以及差异发生在哪里。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi ni"><img src="../Images/300c923bb0fcf1aedce4f2b6ea4be836.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XUz9Mnz_tGUPDoAmb66AsA.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">图片由作者提供—将上述<a class="ae my" href="https://gist.github.com/khuyentran1401/c1ca031994df0d3e0794259795980238" rel="noopener ugc nofollow" target="_blank">的代码复制到此处</a></p></figure><p id="8c94" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">从上面的错误中，我们知道了三件事:</p><ul class=""><li id="9c86" class="nj nk it lc b ld lw lg lx lj nl ln nm lr nn lv no np nq nr bi translated"><code class="fe mb mc md me b">price1</code>中的一项在<code class="fe mb mc md me b">price2</code>中被删除。</li><li id="d81d" class="nj nk it lc b ld ns lg nt lj nu ln nv lr nw lv no np nq nr bi translated">移除的项目在<code class="fe mb mc md me b">price1['banana'][2]</code>。</li><li id="48eb" class="nj nk it lc b ld ns lg nt lj nu ln nv lr nw lv no np nq nr bi translated">移除项目的值为<code class="fe mb mc md me b">2</code>。</li></ul><h2 id="4844" class="nd kj it bd kk nx ny dn ko nz oa dp ks lj ob oc ku ln od oe kw lr of og ky oh bi translated">树形视图</h2><p id="d68d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><code class="fe mb mc md me b">DeepDiff</code>的默认视图是<code class="fe mb mc md me b">"text"</code>。要将视图更改为树形视图，使用<code class="fe mb mc md me b">view="tree"</code>。在树视图中，您可以遍历树并查看哪些项目相互比较。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi oi"><img src="../Images/0735179258fc015e2f517985e916443c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1IzP7229VEBtX6G9UnnptA.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">图片由作者提供—将上述<a class="ae my" href="https://gist.github.com/khuyentran1401/ee17e6b8b5a4be1625c74b6cda78f2fa" rel="noopener ugc nofollow" target="_blank">的代码复制到此处</a></p></figure><h1 id="ee2a" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">忽略订单</h1><p id="f998" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如文章开头所示，可以使用<code class="fe mb mc md me b">ignore_order=True</code>忽略顺序:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi mt"><img src="../Images/80f0f5802ea3c6de0a6716b508ff3d9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CtVLOs4b8R9tTmJOac4CMg.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">图片由作者提供—将上面的代码<a class="ae my" href="https://gist.github.com/khuyentran1401/8d33c963437f824af500d76d7500c524" rel="noopener ugc nofollow" target="_blank">复制到这里</a></p></figure><p id="e738" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">输出<code class="fe mb mc md me b">{}</code>显示两个Python对象之间没有区别。</p><p id="994b" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">您也可以使用<code class="fe mb mc md me b">ignore_order=True</code>来忽略重复项:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi ni"><img src="../Images/ccc5f385c8f2b8e62c1578cc408d34f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CoDwu4wR1mt4C9_TogU1Ew.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">图片由作者提供—将上述<a class="ae my" href="https://gist.github.com/khuyentran1401/9755cf665bccfcc5f1e5c77e7d018522" rel="noopener ugc nofollow" target="_blank">的代码复制到此处</a></p></figure><h1 id="b20a" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">忽略两个数字之间的微小差异</h1><h2 id="b07f" class="nd kj it bd kk nx ny dn ko nz oa dp ks lj ob oc ku ln od oe kw lr of og ky oh bi translated">忽略某个数字</h2><p id="bc84" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">当两个数字非常接近时，看到断言错误可能会很烦人。如果您想忽略特定数字后两个数字之间的差异，请使用<code class="fe mb mc md me b">significant_digits</code>。</p><p id="6385" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">在下面的代码中，我们只比较这两个数字的第二位数。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi oj"><img src="../Images/323983b6946c0a77b5b708a5f1297cee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J1FFt-sLzwL62AJpqyGA9g.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">图片由作者提供—将上述<a class="ae my" href="https://gist.github.com/khuyentran1401/e8704e9ccd7fb479cf55e030b307604f" rel="noopener ugc nofollow" target="_blank">的代码复制到此处</a></p></figure><h2 id="195f" class="nd kj it bd kk nx ny dn ko nz oa dp ks lj ob oc ku ln od oe kw lr of og ky oh bi translated">忽略ε以下的差异</h2><p id="c268" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">有时候，两个数字非常接近，但是它们没有相似的数字。要忽略两个数字之间的微小差异，请使用<code class="fe mb mc md me b">math_epsilon</code>。</p><p id="9827" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">在下面的代码中，我使用<code class="fe mb mc md me b">math_epsilon=0.001</code>告诉<code class="fe mb mc md me b">DeepDiff</code>忽略小于0.001的差异。因为1和0.9999之间的差是0.0001，所以该差被忽略。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi ok"><img src="../Images/47b059daf0dedd86968165eac5518da7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1lGV1upjKzThF6k3b8D6EA.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">图片由作者提供—将上面的代码<a class="ae my" href="https://gist.github.com/khuyentran1401/29d48239eb9ee94c401e3c8f22d8066b" rel="noopener ugc nofollow" target="_blank">复制到这里</a></p></figure><h1 id="4c24" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">忽略字符串大小写</h1><p id="2cdb" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果想忽略字符串大小写(即“红色”和“红色”)，使用<code class="fe mb mc md me b">ignore_string_case=True</code>。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi ok"><img src="../Images/7e21851dfc9feef408843f442eb5ee0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pj-v1Jaeq7L5yzU6nt1FDg.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">图片由作者提供—将上述<a class="ae my" href="https://gist.github.com/khuyentran1401/1c59b416b99af810d62d1fd2b373c265" rel="noopener ugc nofollow" target="_blank">的代码复制到此处</a></p></figure><h1 id="faf5" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">忽略NaN不等式</h1><p id="b904" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果你和一些nan一起工作过，你可能知道在Python中不是每个nan都是平等的:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi ol"><img src="../Images/b984b7c81454b01d955a6db8f92dc5be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OeLTNHKSbSQTfe4WW7wiSw.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">作者图片</p></figure><p id="47a5" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">因此，比较包含不同类型的nan的对象可能会令人困惑。(难道<code class="fe mb mc md me b">[nan, 1, 2]</code>不等于<code class="fe mb mc md me b">[nan, 1, 2]</code>？)</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi om"><img src="../Images/bc458ba0dc1b06423679533e84483a5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wG8EYZzxltsO2DxcXhOcpA.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">图片由作者提供—将上述<a class="ae my" href="https://gist.github.com/khuyentran1401/47d89c466b79a78152d0b549510ceee3" rel="noopener ugc nofollow" target="_blank">的代码复制到此处</a></p></figure><p id="6acc" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">要忽略不同类型的nan，请使用<code class="fe mb mc md me b">ignore_nan_inequality=True</code>:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi on"><img src="../Images/082492aa64d541836497ca6cb5abefde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_aopFPFSN6X22Ww_eH9d3g.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">图片由作者提供—将上面的代码<a class="ae my" href="https://gist.github.com/khuyentran1401/f1879d980b826069c7c45008641d6c0f" rel="noopener ugc nofollow" target="_blank">复制到这里</a></p></figure><h1 id="83f1" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">排除类型</h1><p id="56c0" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">有时，您可能不关心某些类型是否会改变。要包含某些数据类型，请使用<code class="fe mb mc md me b">exclude_types</code>:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi oo"><img src="../Images/aaa3659fce2da0b0275fa91f94a4d44b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n7q-FKVL9r-Kop6YIcEjMw.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">图片由作者提供—将上面<a class="ae my" href="https://gist.github.com/khuyentran1401/1cd9f89a47d4ede56f5a56064843584b" rel="noopener ugc nofollow" target="_blank">的代码复制到这里</a></p></figure><h2 id="2212" class="nd kj it bd kk nx ny dn ko nz oa dp ks lj ob oc ku ln od oe kw lr of og ky oh bi translated">忽略数字类型</h2><p id="1850" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><code class="fe mb mc md me b">2 != 2.0</code>因为<code class="fe mb mc md me b">2</code>是整数而<code class="fe mb mc md me b">2.0</code>是浮点数。您可以使用<code class="fe mb mc md me b">ignore_numeric_type_changes=True</code>忽略数值类型的变化。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi oo"><img src="../Images/d3c9a1496d7eca974e42401d1ef47eeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tbDI_UdsfaBLmGadyxLXvA.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">图片由作者提供—将上述<a class="ae my" href="https://gist.github.com/khuyentran1401/94ee63b0b059a3fe17f0aac45f3f45a6" rel="noopener ugc nofollow" target="_blank">的代码复制到此处</a></p></figure><h1 id="f9a2" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">截断日期时间</h1><p id="947c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在比较两个datetime对象时，您可能只想确保它们在一定程度上是相似的(具有相同的小时，而不是相同的小时和分钟)。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi op"><img src="../Images/e39e6de157e61271adb8e938db3b4e41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HTZa53B5prqTm5eUUP34tw.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">作者图片</p></figure><p id="5a99" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">您可以使用<code class="fe mb mc md me b">truncate_datetime</code>指定<code class="fe mb mc md me b">DeepDiff</code>在两个日期时间对象之间进行比较的精确程度。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi oq"><img src="../Images/9445405e12f78c8c35dbd9a65ad9a462.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iiSKg8-ypGI32Sxt0KGGjg.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">图片由作者提供—将上述<a class="ae my" href="https://gist.github.com/khuyentran1401/54fe5ceb83da59c69b952641abf2bb3b" rel="noopener ugc nofollow" target="_blank">的代码复制到此处</a></p></figure><h1 id="4468" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">忽略路径</h1><p id="99df" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果您想从报告中排除某些路径，您可以<code class="fe mb mc md me b">exclude_paths</code>:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi oi"><img src="../Images/ca5c1c8ebe5e2257f03003ca1c897829.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wn4WI_9m3wTNeNBrWOKveA.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">图片由作者提供—将上面的代码<a class="ae my" href="https://gist.github.com/khuyentran1401/c4e06b22042d6472aa43fcfd83c9f5f6" rel="noopener ugc nofollow" target="_blank">复制到这里</a></p></figure><h1 id="6aea" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">排除返回路径</h1><p id="78dc" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果想忽略某个模式的多条路径，使用<code class="fe mb mc md me b">exclude_regrex_paths</code>。</p><p id="6a45" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">例如，为了避免比较<code class="fe mb mc md me b">aldi[0]['color']</code>和<code class="fe mb mc md me b">walmart[0]['color']</code>以及<code class="fe mb mc md me b">aldi[1]['color']</code>和<code class="fe mb mc md me b">walmart[1]['color']</code>，我们简单地忽略了正则表达式<code class="fe mb mc md me b">root[\d+\]\['color'\]</code>指定的路径，其中<code class="fe mb mc md me b">\d+</code>代表一个或多个数字。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi or"><img src="../Images/d470db574ad8a03b87483c064b5dd3d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r0fz8mo_fY-wgSYKz8uRJw.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">图片由作者提供—将上面<a class="ae my" href="https://gist.github.com/khuyentran1401/a54300eb7412212da5cc11015352bb5d" rel="noopener ugc nofollow" target="_blank">的代码复制到这里</a></p></figure><p id="8275" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">如果您不熟悉正则表达式，请查看此备忘单。</p><h1 id="0ce8" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">将DeepDiff与pytest一起使用</h1><p id="96cb" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">要将DeepDiff与pytest一起使用，请编写<code class="fe mb mc md me b">assert not DeepDiff(...)</code>。这意味着我们想要断言两个Python对象之间没有区别。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi or"><img src="../Images/b3aaff7a619ed9a1ae281484102ceb8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SAaa3Jds1Sg2LOK62Nwogg.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">作者图片</p></figure><h1 id="e389" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">结论</h1><p id="1473" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">恭喜你！您刚刚学习了如何在使用DeepDiff比较两个Python对象时忽略某些元素。我希望这个工具能让你更容易地编写测试和调试代码。</p><p id="b7c7" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">随意发挥，并在这里叉这篇文章的源代码:</p><div class="os ot gp gr ou ov"><a href="https://github.com/khuyentran1401/Data-science/blob/master/productive_tools/deepdiff_example.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd iu gy z fp pa fr fs pb fu fw is bi translated">数据科学/deepdiff _ example . ipynb at master khuyentran 1401/数据科学</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">收集有用的数据科学主题以及代码和文章-Data-science/deepdiff _ example . ipynb at master…</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">github.com</p></div></div><div class="pe l"><div class="pf l pg ph pi pe pj mn ov"/></div></div></a></div></div><div class="ab cl pk pl hx pm" role="separator"><span class="pn bw bk po pp pq"/><span class="pn bw bk po pp pq"/><span class="pn bw bk po pp"/></div><div class="im in io ip iq"><p id="8f26" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的数据科学工具。你可以在LinkedIn和T2 Twitter上与我联系。</p><p id="483e" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">星<a class="ae my" href="https://github.com/khuyentran1401/Data-science" rel="noopener ugc nofollow" target="_blank">这个回购</a>如果你想检查我写的所有文章的代码。在Medium上关注我，了解我的最新数据科学文章，例如:</p><div class="os ot gp gr ou ov"><a rel="noopener follow" target="_blank" href="/4-pre-commit-plugins-to-automate-code-reviewing-and-formatting-in-python-c80c6d2e9f5"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd iu gy z fp pa fr fs pb fu fw is bi translated">4个预提交插件，用于在Python中自动检查和格式化代码</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">使用black、flake8、isort和interrogate编写高质量的代码</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">towardsdatascience.com</p></div></div><div class="pe l"><div class="pr l pg ph pi pe pj mn ov"/></div></div></a></div><div class="os ot gp gr ou ov"><a rel="noopener follow" target="_blank" href="/pydash-a-bucket-of-missing-python-utilities-5d10365be4fc"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd iu gy z fp pa fr fs pb fu fw is bi translated">Pydash:缺少Python实用程序的厨房水槽</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">以函数的方式使用Python</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">towardsdatascience.com</p></div></div><div class="pe l"><div class="ps l pg ph pi pe pj mn ov"/></div></div></a></div><div class="os ot gp gr ou ov"><a rel="noopener follow" target="_blank" href="/3-tools-to-track-and-visualize-the-execution-of-your-python-code-666a153e435e"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd iu gy z fp pa fr fs pb fu fw is bi translated">3个跟踪和可视化Python代码执行的工具</h2><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">towardsdatascience.com</p></div></div><div class="pe l"><div class="pt l pg ph pi pe pj mn ov"/></div></div></a></div><div class="os ot gp gr ou ov"><a rel="noopener follow" target="_blank" href="/how-to-create-mathematical-animations-like-3blue1brown-using-python-f571fb9da3d1"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd iu gy z fp pa fr fs pb fu fw is bi translated">如何使用Python创建类似3Blue1Brown的数学动画</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">利用您的Python技能创建美丽的数学动画</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">towardsdatascience.com</p></div></div><div class="pe l"><div class="pu l pg ph pi pe pj mn ov"/></div></div></a></div></div></div>    
</body>
</html>