<html>
<head>
<title>An Intuitive Guide To The F1 Score</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">F1分数的直观指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/an-intuitive-guide-to-the-f1-score-55fe8233c79e?source=collection_archive---------25-----------------------#2021-10-11">https://towardsdatascience.com/an-intuitive-guide-to-the-f1-score-55fe8233c79e?source=collection_archive---------25-----------------------#2021-10-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6586" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">揭秘一个非常流行的分类标准</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1e4ed0cd0b27bb555c82e0a16ebf4b2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*X_2og-2jiMAz_Dkb"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">安托万·道特里在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="e876" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为一名数据科学家，我广泛使用了F1分数的概念，因为这是一种在澄清任务中同时考虑精确度和召回率的好方法。这是一个非常受欢迎的指标，也被称为索伦森-戴斯系数。但对我来说，这从来不是一个直观的平均值。</p><p id="d99d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了刷新我们的记忆，F1分数的公式是2<em class="ls">m1</em>*<em class="ls">m2</em>/(<em class="ls">m1</em>+<em class="ls">m2</em>)，其中<em class="ls"> m1 </em>和<em class="ls"> m2 </em>代表精度和召回分数。</p><p id="7941" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我看来，F1的分数有两个关键属性:</p><ol class=""><li id="9ae2" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">F1分数在定义时位于<em class="ls"> m1 </em>和<em class="ls"> m2 </em>之间。</li><li id="38c1" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">F1分数从来不会大于<em class="ls"> m1 </em>和<em class="ls"> m2 </em>的算术平均值，但往往会更小。(即F1分数向<em class="ls"> m1 </em>和<em class="ls"> m2 </em>中较小的一个加权)。其实只有在<em class="ls"> m1 </em> = <em class="ls"> m2 </em>时才等于算术平均值。</li></ol><p id="a567" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我看来，这两个属性非常关键，因为如果没有第一个属性，它就不能被认为是一个平均值。如果没有第二个，就很难理解为什么要用F1分数来分类，而不是用典型的算术平均值来分类。有了这个属性，我们就可以强制要求一个分类算法在精确度和召回率上都是体面的。当使用F1分数时，该算法不能通过另一个中的优秀来弥补一个中的严重不足，因为分数倾向于两者中较低的一个。典型的算术平均数不是这种情况。</p><p id="f4cf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从F1分数的上述定义中，这两个重要的特性都没有突出出来。</p><p id="cc70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果其他人处于相同的位置，我想我会提供一个清晰，直观的指南来理解F1的分数。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><p id="4a94" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们从一个(看似)不相关的概念开始。</p><p id="73c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可能听过一个常见的谜语，它是这样的:</p><p id="f1cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你正在跑10公里。如果你以10公里/小时的速度跑完前5公里，然后以15公里/小时的速度跑完最后5公里，你在整个比赛中的平均速度是多少？</p><p id="8822" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">经过多年数学教育的磨练，典型的本能是脱口而出“12.5！”，这当然是错误的。这是算术平均值，如果比赛是根据时间而不是距离分成两部分，这将是正确的。</p><p id="e93b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正确答案是10/(5/10 + 5/15) = 12公里/小时</p><p id="f731" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很有意思。</p><p id="d457" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">答案小于12.5的原因是，我们实际上花了更多的时间以较慢的速度前进，这将平均速度向较慢的速度加权。(要把这一点说清楚，想想如果你以0公里每小时的速度跑完下半场会发生什么。您将永远跑完这场比赛，您的平均速度必须设置为0。)这反映在正确的答案中。</p><p id="949a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们以两个任意的速度求解一个任意长度的比赛。</p><p id="e0e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">考虑一场长度为x的比赛，前半段距离(x/2)我们以<em class="ls"> m1 </em>的速度前进，后半段以<em class="ls"> m2 </em>的速度前进。在整个比赛中，我们的平均速度是多少？我们继续进行下图中的计算。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/3bcb240f73b3b19cee7969b019f432a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:770/format:webp/1*ZAPT9-1rZTs7OxDAyzF1Xw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者形象</p></figure><p id="8753" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在第1行，分子是所覆盖的总距离，分母是所用时间。我们进行到第2行，通过交叉乘法，将2移至分母。接下来，我们算出x，并以取消x和重新排列结束。</p><p id="82c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">也许你现在看到了这个常见谜语和F1成绩之间的联系。平均速度公式简化为精确的F1分数公式，其中<em class="ls"> m1 </em>和<em class="ls"> m2 </em>表示精确和召回。</p><p id="1dcf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用我们可能称之为“两个一半的比赛”的故事来指导我们的直觉的优势在于，现在上面提到的F1成绩的两个关键属性自然出现了。在不借助抽象数学证明的情况下，这些性质从故事中直观地表现出来。事实上，他们不可能是其他人。</p><p id="dc58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">具体来说:</p><ol class=""><li id="644d" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">F1成绩不能大于准确率和召回率中的较大者，也不能小于两者中的较小者。因此，它确实是一种平均值。这显然是对的，因为你在整个比赛中的平均速度不能快于你在比赛中最快的瞬时速度，也不能慢于你最慢的瞬时速度。</li><li id="cab9" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">如果两者确实不相等，F1分数更接近精确度和召回率中的较小者，而不是较大者。因此，F1分数不能大于算术平均值(且通常较小)。这是显而易见的，因为你花更多的时间在较慢的速度上，所以平均速度会朝着较慢的速度下降。当然，在两种速度相等的情况下，这一点没有意义。</li></ol><p id="745f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">诚然，这些属性可以直接从F1成绩的定义中得到正式证明，为了完整起见，我将在下面提供正式证明，但它们比故事中出现的更直观。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><p id="4f1c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好了，该证明了。</p><p id="9c41" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">深呼吸。</p><p id="15f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了开始第一个性质的证明，我们注意到如果<em class="ls"> m1 </em>和<em class="ls"> m2 </em>中恰好有一个是0，那么F1=0，性质1是非常正确的。如果m1和m2均为0，则F1分数未定义。</p><p id="7896" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们只需要关注m1和m2都不是0的情况。</p><p id="ff94" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将用矛盾来证明性质1:</p><p id="8cf9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不失一般性，让<em class="ls"> m1 </em> ≦ <em class="ls"> m2 </em>。因此，我们把<em class="ls"> m2 </em>作为两者中的较大者，如果确实存在较大者的话。</p><p id="5e2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们假设，与我们试图证明的相反，F1 = 2<em class="ls">m1</em>*<em class="ls">m2</em>/(<em class="ls">m1</em>+<em class="ls">m2</em>)&gt;<em class="ls">m2</em>。</p><p id="f41a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">既然我们知道m2不为零，那么我们可以将两边除以<em class="ls"> m2 </em>，得到:2<em class="ls">m1</em>/(<em class="ls">m1</em>+<em class="ls">m2</em>)&gt;1<em class="ls">。</em></p><p id="e680" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将两边乘以(<em class="ls"> m1 </em> + <em class="ls"> m2 </em>)并组合相似项得到:<em class="ls"> m1 </em> &gt; <em class="ls"> m2 </em>，这与我们假设的<em class="ls"> m1 </em> ≦ <em class="ls"> m2相矛盾。</em></p><p id="a114" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由此，我们得出F1 ≦ <em class="ls"> m2 </em>的结论。</p><p id="6b89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过几乎相同的论证，我们可以得出F1 ≧ <em class="ls"> m1 </em>的结论。我们假设F1 &lt; m1，两边除以m1，两边乘以(<em class="ls"> m1 </em> + <em class="ls"> m2 </em>)并组合类似的项。这就产生了<em class="ls"> m2 </em> &lt; <em class="ls"> m1 </em>，再次与我们的假设<em class="ls"> m1 </em> ≦ <em class="ls"> m2 </em>相矛盾。</p><p id="6cb8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我们已经证明F1必须位于m1和m2之间，并且第一个性质被证明。</p><p id="9796" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">进一步，在<em class="ls"> m1 </em> = <em class="ls"> m2 </em>的情况下，很明显F1= <em class="ls"> m1 </em> = <em class="ls"> m2 </em>，由于F1 = 2<em class="ls">m1</em>*<em class="ls">m2</em>/(<em class="ls">m1</em>+<em class="ls">m2</em>)= 2<em class="ls">m1</em>*<em class="ls"/></p><p id="c91e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了证明性质2，我们再次使用矛盾的方法:</p><p id="3cf3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们假设F1 = 2<em class="ls">m1</em>*<em class="ls">m2</em>/(<em class="ls">m1</em>+<em class="ls">m2</em>)&gt;(<em class="ls">m1</em>+<em class="ls">m2</em>)/2，其中(<em class="ls"> m1 </em> + <em class="ls"> m2 </em> )/2为算术平均值。</p><p id="d238" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就简化为4个<em class="ls">m1</em>*<em class="ls">m2</em>&gt;(<em class="ls">m1</em>+<em class="ls">m2</em>)。如果我们乘出并组合类似的项，我们得到0&gt;m1+<em class="ls">m2</em>-2<em class="ls">m1</em>*<em class="ls">m2</em>=(<em class="ls">m1</em>-<em class="ls">m2</em>)。</p><p id="9a5c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是不可能的，因为一个数的平方不可能是负数。此外，等式仅在<em class="ls"> m1 </em> = <em class="ls"> m2 </em>时成立。因此，我们已经表明，F1等于算术平均值当且仅当<em class="ls"> m1 </em> = <em class="ls"> m2 </em>，(这符合事实，在这种情况下F1 =<em class="ls">m1</em>=<em class="ls">m2</em>，如上所述)，否则F1小于算术平均值，这是性质二。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><p id="ee64" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然上述证明并不特别困难，但我相信你会同意我的观点，这个故事提供了非常需要的直觉。</p><p id="e5a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以下一次你遇到F1的分数时，把它想象成你在一场比赛中的平均速度，你以等于精确的速度跑到一半，以等于回忆的速度跑到另一半。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><p id="236d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">精确和回忆有好几个名字。精度也称为用户的准确度。召回也被称为敏感性和生产者的准确性。精确性和回忆性也与遗漏和犯错误的概念有关。这些概念的名称各不相同，这表明这些概念在多少学科中是至关重要的。</p><p id="d479" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">维基百科贡献者。(2021年9月28日)。索伦森-骰子系数。在<em class="ls">维基百科，免费百科</em>。2021年10月10日16:58从https://en.wikipedia.org/w/index.php?<a class="ae kv" href="https://en.wikipedia.org/w/index.php?title=S%C3%B8rensen%E2%80%93Dice_coefficient&amp;oldid=1047086456" rel="noopener ugc nofollow" target="_blank">检索title = S % C3 % b 8 rensen % E2 % 80% 93 ice _ coefficient&amp;oldid = 1047086456</a></p><p id="d6eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://deepai.org/machine-learning-glossary-and-terms/f-score" rel="noopener ugc nofollow" target="_blank">https://deepai . org/machine-learning-glossary-andterms/f-score</a></p></div></div>    
</body>
</html>