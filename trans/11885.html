<html>
<head>
<title>Exploratory Data Analysis with Python — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python进行探索性数据分析—第1部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/exploratory-data-analysis-with-python-part-1-b6248b28dc85?source=collection_archive---------13-----------------------#2021-11-28">https://towardsdatascience.com/exploratory-data-analysis-with-python-part-1-b6248b28dc85?source=collection_archive---------13-----------------------#2021-11-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1e2f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让您开始使用Python和Pandas分析数据的模板</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0102c5e562a2aa9bf314e05bcd0f98fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wvJnQ-z43okGgQZxjDR9sA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@markuswinkler?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">马库斯·温克勒</a>在<a class="ae ky" href="https://unsplash.com/s/photos/database?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="301a" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">数据科学没有秘方。不要认为每个数据集都有一个模板可以遵循。没有。</p><p id="c798" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我将在这一系列文章中提出的只是一个建议，一个开始的地方。显然，从那里开始，您将被您的数据所牵引，以执行其他符合您的项目需求的检查。它不应该被理解为一个要遵循的模型或一套规则，而只是让你行动起来并帮助你从数据中提取第一个见解的东西。</p><h2 id="f52a" class="mc md it bd me mf mg dn mh mi mj dp mk lp ml mm mn lt mo mp mq lx mr ms mt mu bi translated">摘要</h2><p id="33c5" class="pw-post-body-paragraph lg lh it li b lj mv ju ll lm mw jx lo lp mx lr ls lt my lv lw lx mz lz ma mb im bi translated">探索性数据分析(EDA)是理解数据集并从中提取初步见解的艺术，因此您可以为数据科学流程的下一阶段做准备，例如数据清理、数据格式化、要素工程和建模。</p><p id="dc2f" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">本系列包括以下主题:</p><ul class=""><li id="775f" class="na nb it li b lj lk lm ln lp nc lt nd lx ne mb nf ng nh ni bi translated">库导入和加载数据</li><li id="e8dd" class="na nb it li b lj nj lm nk lp nl lt nm lx nn mb nf ng nh ni bi translated">检查数据类型</li><li id="96a7" class="na nb it li b lj nj lm nk lp nl lt nm lx nn mb nf ng nh ni bi translated">查找空值或缺失值</li><li id="d1ab" class="na nb it li b lj nj lm nk lp nl lt nm lx nn mb nf ng nh ni bi translated">描述性统计剖析</li><li id="de87" class="na nb it li b lj nj lm nk lp nl lt nm lx nn mb nf ng nh ni bi translated">单变量分析</li><li id="7b6e" class="na nb it li b lj nj lm nk lp nl lt nm lx nn mb nf ng nh ni bi translated">相关</li><li id="283c" class="na nb it li b lj nj lm nk lp nl lt nm lx nn mb nf ng nh ni bi translated">多变量分析</li></ul><h2 id="4609" class="mc md it bd me mf mg dn mh mi mj dp mk lp ml mm mn lt mo mp mq lx mr ms mt mu bi translated">数据集和库</h2><p id="3828" class="pw-post-body-paragraph lg lh it li b lj mv ju ll lm mw jx lo lp mx lr ls lt my lv lw lx mz lz ma mb im bi translated">当我创建一些例子时，我喜欢使用seaborn包中的数据集<em class="no">提示</em>,因为我发现它真的很有教育意义。我们有不同的数据类型——浮点数、整数、字符串、类别——这有助于我们展示概念。所以我们来装吧。</p><p id="5610" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我通常还导入其他基本模块来帮助我处理数据。</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="7936" class="mc md it nq b gy nu nv l nw nx"># Basics<br/>import pandas as pd<br/>import numpy as np</span><span id="478d" class="mc md it nq b gy ny nv l nw nx"># Visualizations<br/>import seaborn as sns<br/>import matplotlib.pyplot as plt<br/>import plotly.express as px</span><span id="3517" class="mc md it nq b gy ny nv l nw nx"># Loading the dataset<br/>df = sns.load_dataset('tips')</span></pre><p id="b61d" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">现在，加载数据集本身就是分析的一部分。在这篇文章中，我有一组很好的代码片段，可以帮助你在将数据加载到Python会话时更上一层楼:</p><div class="nz oa gp gr ob oc"><a href="https://medium.com/gustavorsantos/go-next-level-with-pandas-read-csv-29e3c207a66d" rel="noopener follow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">熊猫的下一关read_csv()</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">众所周知的Pandas的read_csv()方法的9个使用不足的参数。</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">medium.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq ks oc"/></div></div></a></div><p id="acf0" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">首先要做的是查看数据集。重要的是实际查看它，如果导入顺利，查看数据集是大还是长，了解每个变量中的内容。</p><p id="1bbc" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">这是用<code class="fe or os ot nq b">head</code>完成的，带来数据集的前5行。</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="8920" class="mc md it nq b gy nu nv l nw nx">df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/acc5e11e42682babadeaaf007d834a3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*LhhxY1wxCbScqQ7JV0Jruw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据集提示的df.head()。图片由作者提供。</p></figure><p id="5c6a" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">因此，我们看到数据显然是好的，它被正确地导入，至少在前几行没有奇怪的值。如果你想查看最后5行，你也可以使用<code class="fe or os ot nq b">df.tail()</code>。</p><h2 id="5e10" class="mc md it bd me mf mg dn mh mi mj dp mk lp ml mm mn lt mo mp mq lx mr ms mt mu bi translated">检查数据类型</h2><p id="1578" class="pw-post-body-paragraph lg lh it li b lj mv ju ll lm mw jx lo lp mx lr ls lt my lv lw lx mz lz ma mb im bi translated">了解数据类型至关重要。为什么？</p><blockquote class="ov"><p id="7c5b" class="ow ox it bd oy oz pa pb pc pd pe mb dk translated">软件中的数据类型对软件如何处理数据起着信号的作用。(Bruce，Peter和Bruce，Andrew——数据科学家实用统计，2017年)</p></blockquote><p id="a8ca" class="pw-post-body-paragraph lg lh it li b lj pf ju ll lm pg jx lo lp ph lr ls lt pi lv lw lx pj lz ma mb im bi translated">当你查看数据集头部时，你的大脑会自动发现<em class="no"> total_bill、tip </em>和<em class="no"> size </em>是数字，其他变量是文本，其中一些可能是二进制的(只有两个可能的值)。因此，您知道数字列可以进行计算。但是如果我们不检查计算机是否正确理解了它们，例如，当你试图为这些数字创建统计数据时，你肯定会看到错误。</p><p id="b753" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">有一些方法可以完成这项任务。</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="d31f" class="mc md it nq b gy nu nv l nw nx"># Info will show the shape and data types.<br/>df.info()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/43e33944059afb004c5b0ead72df2674.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*Ez7_GkNoadZMOJNoaNCS9Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">df.info()信息。图片由作者提供。</p></figure><p id="2493" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">请注意，它带来了一些有用的信息，如行数、列数、数据类型，以及是否有空值(我们在这里没有看到空值！).</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="ecbb" class="mc md it nq b gy nu nv l nw nx"># Another way is to look at it separately</span><span id="4d51" class="mc md it nq b gy ny nv l nw nx">#Shape<br/>df.shape<br/>(244, 7) #(number of rows, number of columns)</span><span id="083a" class="mc md it nq b gy ny nv l nw nx">#Types<br/>df.dtypes</span><span id="8a0d" class="mc md it nq b gy ny nv l nw nx">total_bill     float64 <br/>tip            float64 <br/>sex           category <br/>smoker        category <br/>day           category <br/>time          category <br/>size             int64 <br/>dtype: object</span></pre><h2 id="e4a6" class="mc md it bd me mf mg dn mh mi mj dp mk lp ml mm mn lt mo mp mq lx mr ms mt mu bi translated">查找空值或缺失值</h2><p id="c229" class="pw-post-body-paragraph lg lh it li b lj mv ju ll lm mw jx lo lp mx lr ls lt my lv lw lx mz lz ma mb im bi translated">我们不是刚看过吗？</p><p id="5852" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">是的，我们看到现在有了。但也有可能。因此，我将在这里展示一些检测这些值的好方法。</p><p id="20af" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">第一种方法是最基本的。我们运行一个返回布尔值(True或False)的命令，知道Python中True = 1和False = 0，我们可以对这些值求和。当我们看到一个大于零的值时，这意味着数据丢失。</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="7d59" class="mc md it nq b gy nu nv l nw nx"># Checking for missing values<br/>df.isnull().sum()</span><span id="4f78" class="mc md it nq b gy ny nv l nw nx">total_bill    0 <br/>tip           0 <br/>sex           0 <br/>smoker        0 <br/>day           0 <br/>time          0 <br/>size          0 <br/>dtype: int64</span></pre><p id="30b9" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">视觉方式也很有趣。我们可以使用seaborn的热图来查看数据丢失的地方。我在那里插入了一行NAs，以便您可以看到它在视觉效果中的样子。</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="c2fd" class="mc md it nq b gy nu nv l nw nx"># Heatmap of null values<br/>sns.heatmap(df.isnull(), cbar=False)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pl"><img src="../Images/8943045166e7e46716a9d4e66f4f911f.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/1*PLBQbYMYKcJRvn4iQs9DhA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">为示例目的插入的NAs:请参见“smoker”变量。作者图片</p></figure><p id="1811" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">整洁！我个人喜欢热图的视觉效果。这使得查看整体并找出空值或缺失值变得非常容易。</p><p id="8e86" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">现在，我还加了一些“？”故意的。而那些在你运行<code class="fe or os ot nq b">df.isnull()</code>的时候是检测不到的。空值并不总是像<code class="fe or os ot nq b">NaN</code>一样。有时候他们会扮成。或者别的什么。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/807212f91d27efddc3da29cb70adaafd.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*mf7cIk9e4OI9VbSLd13n7w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">'?'为此示例添加了空值。图片由作者提供。</p></figure><p id="466c" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">检查的一个好方法是使用正则表达式和Pandas的字符串包含方法。</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="a6d8" class="mc md it nq b gy nu nv l nw nx"># Checking possible null values - [?.,:*] only on text columns</span><span id="ab64" class="mc md it nq b gy ny nv l nw nx">for col in df2.select_dtypes(exclude='number').columns:<br/>    print(f"{col}: {df2[col].str.contains('[?.,:*]').sum()} possible   null(?.,:*) values")</span><span id="fc44" class="mc md it nq b gy ny nv l nw nx"><strong class="nq iu">[OUT]:<br/></strong>sex: 0 possible null(?.,:*) values <br/>smoker: 0 possible null(?.,:*) values <br/><strong class="nq iu">day: 5 possible null(?.,:*) values </strong><br/>time: 0 possible null(?.,:*) values</span></pre><p id="7d52" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">您可以替换“？”用<code class="fe or os ot nq b">NaN</code>使用<code class="fe or os ot nq b">replace</code>的方法。</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="e5b6" class="mc md it nq b gy nu nv l nw nx"># If you want to replace the '?' values<br/>df2.replace({'?':np.nan})</span></pre><p id="75e0" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">一旦您知道丢失的值在哪里，您就可以使用许多技术来替换它们。这将是你必须根据你的项目做出的决定。一个很好的经验法则是，如果它少于数据集的5%，就应该放弃NAs。但是你也可以使用平均值，中间值，最频繁值，<a class="ae ky" href="https://medium.com/gustavorsantos/input-missing-data-with-missingpy-e055899442eb" rel="noopener">使用missingpy来预测值</a>。对于那个任务，你可以使用<code class="fe or os ot nq b">df.fillna(value)</code></p><p id="1766" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">最简单的方法就是扔掉它们。</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="a81a" class="mc md it nq b gy nu nv l nw nx"># Find the most common value for variables<br/>most_common_smoker = df.smoker.value_counts().index[0]<br/>most_common_day = df.day.value_counts().index[0]</span><span id="94da" class="mc md it nq b gy ny nv l nw nx"># Fill NA Values with the most common value<br/>df2.fillna(value={'smoker':most_common_smoker, 'day':most_common_day})</span><span id="b254" class="mc md it nq b gy ny nv l nw nx"># Drop the NA values<br/>df2.dropna(inplace=True)</span></pre><h2 id="76d3" class="mc md it bd me mf mg dn mh mi mj dp mk lp ml mm mn lt mo mp mq lx mr ms mt mu bi translated">描述性统计剖析</h2><p id="991f" class="pw-post-body-paragraph lg lh it li b lj mv ju ll lm mw jx lo lp mx lr ls lt my lv lw lx mz lz ma mb im bi translated">按照流程，一旦您的数据清除了缺失值，就该开始检查描述性统计数据了。有些人喜欢在清除丢失的值之前检查统计数据，因为如果您丢失一些值，您的分布将会改变。但是，如果您只是删除几行，我不认为会有太大的变化。此外，使用干净的数据，您已经可以获得良好的统计数据，显示数据在更改后是如何分布的。</p><p id="2112" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">这一部分是非常必要的，这样你就会知道数据是如何分布的，你可以开始得到第一手的见解。只需一个简单的命令，您就可以在屏幕上打印统计数据。如果需要，使用参数<code class="fe or os ot nq b">include='all'</code>查看分类数据。</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="2b5f" class="mc md it nq b gy nu nv l nw nx"># Since the fake NAs were all deleted, I will come back to using df.<br/>df.describe(include='all')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/732e1500afd3fa59fe0df24a1a275ed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*9Yw202_AaFcgjZ-0wU2Ucw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">df.describe(include='all ')结果。图片由作者提供。</p></figure><p id="f7fc" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">从这里我们可以读到很多东西。例如:</p><ul class=""><li id="3b78" class="na nb it li b lj lk lm ln lp nc lt nd lx ne mb nf ng nh ni bi translated">大部分的观察都是在周六和晚餐时间。</li><li id="6e4c" class="na nb it li b lj nj lm nk lp nl lt nm lx nn mb nf ng nh ni bi translated">数据集有更多的男性和不吸烟者。</li><li id="c5a3" class="na nb it li b lj nj lm nk lp nl lt nm lx nn mb nf ng nh ni bi translated">标准差相当高，表明数据是分散的，可能有异常值。</li><li id="2568" class="na nb it li b lj nj lm nk lp nl lt nm lx nn mb nf ng nh ni bi translated">平均小费是2.99美元。</li><li id="e465" class="na nb it li b lj nj lm nk lp nl lt nm lx nn mb nf ng nh ni bi translated">每桌平均人数在2到3人之间。</li></ul><p id="db86" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我相信你能够看到这些统计数据对理解你的数据有多么强大。</p><h2 id="19a1" class="mc md it bd me mf mg dn mh mi mj dp mk lp ml mm mn lt mo mp mq lx mr ms mt mu bi translated">在你走之前</h2><p id="3ad9" class="pw-post-body-paragraph lg lh it li b lj mv ju ll lm mw jx lo lp mx lr ls lt my lv lw lx mz lz ma mb im bi translated">好了，第一部分到此结束。我们已经介绍了一半的内容，现在您已经了解了如何加载数据集、检查数据类型、理解这一点的重要性、找到缺失值以及从数据集中清除缺失值的几种方法。</p><p id="fa36" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">这篇文章的完整代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="po pp l"/></div></figure><p id="3be2" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">下一篇文章我们将继续这个过程。</p><p id="7321" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">如果这是你感兴趣的内容，请关注我的博客。</p><div class="nz oa gp gr ob oc"><a href="https://medium.com/gustavorsantos" rel="noopener follow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">古斯塔夫·桑托斯</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">让我们做出更好的决定。数据驱动的决策。我用Python，R，Excel，SQL创建数据科学项目。</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">medium.com</p></div></div><div class="ol l"><div class="pq l on oo op ol oq ks oc"/></div></div></a></div></div></div>    
</body>
</html>