<html>
<head>
<title>How-to Uninstall PostgreSQL 13.3 and Reinstall via Brew</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何卸载PostgreSQL 13.3并通过Brew重新安装</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-uninstall-postgresql-13-3-and-reinstall-via-brew-6c1e7047f349?source=collection_archive---------7-----------------------#2021-08-04">https://towardsdatascience.com/how-to-uninstall-postgresql-13-3-and-reinstall-via-brew-6c1e7047f349?source=collection_archive---------7-----------------------#2021-08-04</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="c134" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">关于删除通过安装程序安装的PostgresSQL并通过brew for macOS Catalina重新安装它的分步指南</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/63031200bf4dcbe4e88fd5ec90adaafa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_U2owHxQTDFVvEcg"/></div></div><p class="ks kt gk gi gj ku kv bd b be z dk translated">马库斯·斯皮斯克在<a class="ae kw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="9937" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">这是给谁的？</strong></p><p id="9957" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">对于任何需要完全卸载PostgresSQL 13.3的人，该版本是通过<a class="ae kw" href="https://www.enterprisedb.com/downloads/postgres-postgresql-downloads" rel="noopener ugc nofollow" target="_blank">安装程序</a>安装的。</p><p id="8a45" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">本文将涵盖三个主题:</strong></p><ul class=""><li id="7a4a" class="lt lu ir kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated">如何卸载PostgreSQL 13.3</li><li id="0ab7" class="lt lu ir kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">如何通过brew重新安装PostgreSQL</li><li id="7519" class="lt lu ir kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">测试它是否工作:创建数据库、用户和授予特权</li></ul><ol class=""><li id="4896" class="lt lu ir kz b la lb ld le lg lv lk lw lo lx ls mh lz ma mb bi translated"><strong class="kz is">如何卸载PostgreSQL 13.3</strong></li></ol><p id="9444" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">第一步</strong>:打开你的终端。检查安装的版本和位置。在我的例子中，它安装在<code class="fe mi mj mk ml b">/Library/PostgreSQL/13/bin/psql</code>下</p><pre class="kh ki kj kk gu mm ml mn mo aw mp bi"><span id="b4eb" class="mq mr ir ml b gz ms mt l mu mv"># check version<br/>$ postgres --version<br/>postgres (PostgreSQL) 13.3</span><span id="266c" class="mq mr ir ml b gz mw mt l mu mv"># locate where it is installed<br/>$ which psql<br/>/Library/PostgreSQL/13/bin/psql</span></pre><p id="97b7" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">第二步</strong>:根据<code class="fe mi mj mk ml b">uninstall-postgres.app</code>是否安装，我们有两种解决方案。</p><p id="ad7c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">解2A: </strong></p><p id="d689" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">改变目录运行<code class="fe mi mj mk ml b">uninstall-postgres.app</code>这个应用程序位于<code class="fe mi mj mk ml b">bin</code>文件夹的上层目录，在我的例子中是<code class="fe mi mj mk ml b">/Library/PostgreSQL/13</code>。</p><pre class="kh ki kj kk gu mm ml mn mo aw mp bi"><span id="350d" class="mq mr ir ml b gz ms mt l mu mv"># change directory</span><span id="470d" class="mq mr ir ml b gz mw mt l mu mv">$ cd /Library/PostgreSQL/13<br/>$ open uninstall-postgres.app</span></pre><p id="30ef" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果卸载窗口提示，您可以按照<a class="ae kw" href="https://www.enterprisedb.com/docs/supported-open-source/postgresql/installer/05_uninstalling_postgresql/" rel="noopener ugc nofollow" target="_blank">本指南</a>上的【在Mac上卸载PostgreSQL】一节进行操作。</p><p id="60e4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">然而，这个解决方案对我不起作用。我收到一条错误消息:</p><pre class="kh ki kj kk gu mm ml mn mo aw mp bi"><span id="dadc" class="mq mr ir ml b gz ms mt l mu mv">$ open uninstall-postgres.app</span><span id="8e42" class="mq mr ir ml b gz mw mt l mu mv">The file /Library/PostgreSQL/13/uninstall-postgres.app does not exist.</span></pre><p id="4ef1" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在网上尝试了许多其他方法后，虽然似乎都没有结果，但我注意到<strong class="kz is">一个有趣的模式，即→对于同一功能，有些人会使用</strong> <code class="fe mi mj mk ml b"><strong class="kz is">postgres</strong></code> <strong class="kz is">，而其他人会使用</strong> <code class="fe mi mj mk ml b"><strong class="kz is">postgresql</strong></code>。出于绝望，我意外地发现了解2B。</p><p id="f489" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">解2B </strong>:</p><p id="db62" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">改变就好→</p><p id="8812" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe mi mj mk ml b">$ open uninstall-postgres.app</code>到</p><p id="e987" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe mi mj mk ml b">$ open uninstall-postgresql.app</code>。</p><p id="cf84" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这是一个很小的变化，但它的工作！🤩</p><pre class="kh ki kj kk gu mm ml mn mo aw mp bi"><span id="19d0" class="mq mr ir ml b gz ms mt l mu mv"># change directory</span><span id="2777" class="mq mr ir ml b gz mw mt l mu mv">$ cd /Library/PostgreSQL/13<br/>$ open uninstall-postgresql.app</span></pre><p id="d53d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">卸载窗口提示！如果这也适用于你，你可以遵循<a class="ae kw" href="https://www.enterprisedb.com/docs/supported-open-source/postgresql/installer/05_uninstalling_postgresql/" rel="noopener ugc nofollow" target="_blank">本指南</a>中的【在Mac上卸载PostgreSQL】一节，直到图8。</p><p id="845c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">重要提示:在你按照上面的指南，一直到图8，我们还没有完成！为了删除所有Postgres相关文件，您需要执行步骤3。</p><p id="b170" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">步骤3:删除Postgres相关文件</p><pre class="kh ki kj kk gu mm ml mn mo aw mp bi"><span id="0f5f" class="mq mr ir ml b gz ms mt l mu mv"># change to home directory<br/>$ cd ~<br/>$ sudo rm -rf /Library/PostgreSQL<br/>$ sudo rm /etc/postgres-reg.ini</span><span id="c28f" class="mq mr ir ml b gz mw mt l mu mv"># some people also suggested to remove sysctl.conf<br/># but I don't seem to have this file in my environment<br/># so I ignored it. You can try if you'd like<br/>$ sudo rm /etc/sysctl.conf</span><span id="a70a" class="mq mr ir ml b gz mw mt l mu mv">rm: /etc/sysctl.conf: No such file or directory</span></pre><p id="414e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">🎉🎉🎉万岁！我们成功卸载了PostgreSQL 13.3！！</p><p id="4f0c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> 2。如何通过brew重新安装PostgreSQL】🍺</strong></p><p id="28b0" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我需要卸载PostgreSQL的原因是，当我需要创建一个测试数据库时，我不能使用我的同事正在使用的代码。我们怀疑通过安装程序安装的PostgreSQL和通过brew安装的PostgreSQL是有区别的。长话短说，这是真的至少在我的情况下，它解决了问题。</p><p id="2884" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">通过brew安装PostgreSQL非常简单，它有两个步骤:</p><pre class="kh ki kj kk gu mm ml mn mo aw mp bi"><span id="ba15" class="mq mr ir ml b gz ms mt l mu mv"># 1. update brew<br/>$ brew update</span><span id="eee2" class="mq mr ir ml b gz mw mt l mu mv"># optional: run brew doctor (I did this.)<br/>$ brew doctor</span><span id="4294" class="mq mr ir ml b gz mw mt l mu mv"># 2. install postgresql<br/>$ brew install postgresql</span></pre><p id="a07b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">至此，我们可以通过运行下面的命令来启动PostgreSQL。</p><pre class="kh ki kj kk gu mm ml mn mo aw mp bi"><span id="e8e2" class="mq mr ir ml b gz ms mt l mu mv">$ brew services start postgresql</span></pre><p id="bfb3" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">运行之后，它告诉我们已经成功启动了<code class="fe mi mj mk ml b">postgresql</code></p><pre class="kh ki kj kk gu mm ml mn mo aw mp bi"><span id="4444" class="mq mr ir ml b gz ms mt l mu mv">==&gt; <strong class="ml is">Successfully started `postgresql` (label: homebrew.mxcl.postgresql)</strong></span></pre><p id="37b2" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">现在，让我们测试一下它是否工作。</strong></p><p id="bd9a" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> 3。测试:执行三项任务—创建数据库、用户和授予特权。</strong></p><p id="fb53" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">第一步</strong>:启动Postgres</p><pre class="kh ki kj kk gu mm ml mn mo aw mp bi"><span id="763a" class="mq mr ir ml b gz ms mt l mu mv"># 1. launch postgres<br/>$ psql postgres</span><span id="1f0b" class="mq mr ir ml b gz mw mt l mu mv">psql (13.3)<br/>Type "help" for help.</span><span id="acbe" class="mq mr ir ml b gz mw mt l mu mv">postgres=# ls<br/>postgres-# help<br/>Use \? for help or press control-C to clear the input buffer.<br/>postgres-# \q</span></pre><p id="ac1f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">您可以使用命令<code class="fe mi mj mk ml b">\l</code>查看所有可用的数据库。比如这是我能看到的。</p><pre class="kh ki kj kk gu mm ml mn mo aw mp bi"><span id="c695" class="mq mr ir ml b gz ms mt l mu mv"># note: postgres=# is a prompt, not part of the command<br/># the command is \l, which lists all databases</span><span id="b11c" class="mq mr ir ml b gz mw mt l mu mv">postgres=# \l</span></pre><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj mx"><img src="../Images/c9ccfc14871f361d5b2405703e34fdb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jJJAU_PEiArdZ6WUyb1L4Q.png"/></div></div></figure><p id="efb3" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">第二步:我创建了一个名为<code class="fe mi mj mk ml b">discovery_db</code>的数据库，你可以根据自己的目的命名这个数据库。</p><pre class="kh ki kj kk gu mm ml mn mo aw mp bi"><span id="3d56" class="mq mr ir ml b gz ms mt l mu mv">postgres=# create database discovery_db;</span><span id="5895" class="mq mr ir ml b gz mw mt l mu mv"># use \l to check again<br/>postgres=# \l</span></pre><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj my"><img src="../Images/4be54970c47177fe9ec812d64adbf7af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3DcbNKUbwLfnj6-RrByz0Q.png"/></div></div></figure><p id="a800" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在我们有4排，<code class="fe mi mj mk ml b">discovery_db</code>列在最上面。整洁！</p><p id="e450" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">第三步</strong>:创建一个带密码的用户。</p><pre class="kh ki kj kk gu mm ml mn mo aw mp bi"><span id="faed" class="mq mr ir ml b gz ms mt l mu mv">postgres=# create user discovery_db_user with encrypted password 'discovery_db_pass';</span></pre><p id="8734" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">第四步</strong>:将所有权限授予我们刚刚创建的用户。</p><pre class="kh ki kj kk gu mm ml mn mo aw mp bi"><span id="ad7b" class="mq mr ir ml b gz ms mt l mu mv">postgres=# grant all privileges on database discovery_db to discovery_db_user;</span></pre><p id="a259" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，我们再检查一遍→</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj mz"><img src="../Images/d18f690e4e776c2d3cc7ea39c9993908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mvkCXbDn3L0Gk4GppqhPmQ.png"/></div></div></figure><p id="19c1" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在输出<code class="fe mi mj mk ml b">Access privileges</code>中，我们可以看到<code class="fe mi mj mk ml b">discovery_db_users</code>拥有与所有者<code class="fe mi mj mk ml b">wen</code>(我)相同的特权😊).</p><p id="e687" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">最后，我们可以用内容退出postgres <code class="fe mi mj mk ml b">\q</code>。</p><pre class="kh ki kj kk gu mm ml mn mo aw mp bi"><span id="d745" class="mq mr ir ml b gz ms mt l mu mv">postgres=# \q</span></pre><p id="be43" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">关键要点:</strong></p><ol class=""><li id="1644" class="lt lu ir kz b la lb ld le lg lv lk lw lo lx ls mh lz ma mb bi translated">如果您遇到Postgres问题，并且您在网上找到的博客帖子似乎对您不起作用，请尝试修改命令<code class="fe mi mj mk ml b">postgres</code>到<code class="fe mi mj mk ml b">postgresql</code>，反之亦然。</li><li id="8c10" class="lt lu ir kz b la mc ld md lg me lk mf lo mg ls mh lz ma mb bi translated">Postgres有许多不同的版本。如果你不能运行其他人的代码，完全卸载Postgres并重新安装可能比调试几天更容易。</li><li id="3392" class="lt lu ir kz b la mc ld md lg me lk mf lo mg ls mh lz ma mb bi translated">我意识到一旦有了新版本的Postgres，这篇文章可能会过时，但我认为它至少可以作为PostgreSQL 13.3 + MacOS Catalina系统的定时解决方案。</li></ol></div></div>    
</body>
</html>