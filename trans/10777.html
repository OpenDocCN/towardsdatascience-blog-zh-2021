<html>
<head>
<title>Version Control your Large Datasets using Google Drive</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Google Drive对大型数据集进行版本控制</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/version-control-your-large-datasets-using-google-drive-dd42211ab740?source=collection_archive---------24-----------------------#2021-10-18">https://towardsdatascience.com/version-control-your-large-datasets-using-google-drive-dd42211ab740?source=collection_archive---------24-----------------------#2021-10-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d5ad" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使可再现的数据集成为可能</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c7d67209e87219f44e0c1bb9d5ae191d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nXgGjLQLF9UwHfJc"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@dav420?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">大卫·普帕扎</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="c1cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">MLOps最近在机器学习社区获得了一些关注。有了这么多的实验，跟踪、管理和协调它们与其他组件已经成为最近讨论的一个重要主题。特别是，当你尝试你的实验时，数据集一直在变化。您可能正在进行缩放、创建新要素、消除要素或只是对整个数据集进行采样。像<code class="fe lv lw lx ly b">data_feat1.csv</code>、<code class="fe lv lw lx ly b">data_scaling.csv</code>、<code class="fe lv lw lx ly b"> data_v2.csv</code>等命名约定。对于最初的几个实验来说是可以的，但是当你扩大实验规模的时候就很痛苦了。</p><p id="7033" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，我想我们可以使用git来控制数据集的版本。但是git不允许存储大于100 MB的数据或者对数据进行版本控制。例如，这里我只是将一个非常著名的<code class="fe lv lw lx ly b">MNIST</code>数据集用于版本控制。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lz"><img src="../Images/e0d1713848f357efefc089e79f6aa511.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JBGQZJ7v-gSMdxyiFryeCQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自作者</p></figure><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="7f9c" class="me mf it ly b gy mg mh l mi mj">git add *<br/>git commit -m "Adding files"<br/>git push -u origin master</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/90bdc9b28d49b7448d87b08240b5f210.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w-CaRB3GvJzq8gdxbeu4Gg.png"/></div></div></figure><p id="2974" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从上面的截图可以看出，git不接受大于100 MB的文件直接推送。我遇到了两个可供尝试的选择:</p><ol class=""><li id="22a7" class="ml mm it lb b lc ld lf lg li mn lm mo lq mp lu mq mr ms mt bi translated">使用Git大文件存储(建议在输出终端使用)</li><li id="0406" class="ml mm it lb b lc mu lf mv li mw lm mx lq my lu mq mr ms mt bi translated">使用DVC进行数据集的版本控制。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/6fe90fb46149015fa598c212b5aa7161.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H2MwESY9EKkvoY_3t5Aawg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者创建的图像</p></figure><p id="a6dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我没有使用Git LFS(大文件存储),因为当使用版本控制系统如DVC来跟踪你的模型、度量等时。把所有东西都放在一个系统下会变得更容易。DVC提供了几个选项来存储数据集，如亚马逊S3、Azure Blob存储，但我最喜欢的是Google Drive。DVC设计的系统，整个过程是无缝集成，一旦你开始使用DVC。以下是说明如何做到这一点的步骤:</p><h2 id="575b" class="me mf it bd na nb nc dn nd ne nf dp ng li nh ni nj lm nk nl nm lq nn no np nq bi translated">步骤1:初始化存储库:</h2><p id="bd6c" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">在您当前拥有数据集的本地目录/位置中初始化git和DVC。转到终端，键入以下内容:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="857b" class="me mf it ly b gy mg mh l mi mj">$ git init<br/>$ dvc init</span></pre><p id="e783" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意:<code class="fe lv lw lx ly b">dvc init</code>需要输入准确的位置。git文件已定位。请确保这一点，否则您的<code class="fe lv lw lx ly b">dvc</code>将无法识别git文件。这里我们将尝试初始化大约105 MB的训练数据。</p><h2 id="9486" class="me mf it bd na nb nc dn nd ne nf dp ng li nh ni nj lm nk nl nm lq nn no np nq bi translated">步骤2:暂存要提交的文件:</h2><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="1ea5" class="me mf it ly b gy mg mh l mi mj">$ dvc add *<br/>$ ls -alh</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/59663c4fb4364ccf9aa62cafc85637ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uXIs1H2KHp8YV3pnQE6CoA.png"/></div></div></figure><p id="98bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将看到创建了一个名为<code class="fe lv lw lx ly b">train.csv.dvc</code>的新文件，使用以下代码将新文件提交给git:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="3025" class="me mf it ly b gy mg mh l mi mj">$ git add .gitignore train.csv.dvc<br/>$ git commit -m "Adding training data"</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/87020b764c3f596af25e38d446ceab83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rXJ1Wj4mfrUWYEZlLtinNA.png"/></div></div></figure><p id="c69d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您看到这个<code class="fe lv lw lx ly b">.dvc</code>文件的内容，您会看到md5和path，这是一个链接到数据的元文件，可用于跟踪数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/1eb2619a9cd801cb86c46b9f6ca0eb0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*cvGUtSinNNB6Ei2yN7njeg.png"/></div></figure><p id="4787" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，提交是在本地完成的。然而，这些文件还没有被推送或存储到任何地方(这里是google drive)。</p><h2 id="efff" class="me mf it bd na nb nc dn nd ne nf dp ng li nh ni nj lm nk nl nm lq nn no np nq bi translated">第三步:将文件推送到谷歌硬盘:</h2><p id="57f2" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">下一步是定义要存储文件的存储位置。您可以使用以下代码来完成该操作:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="82d2" class="me mf it ly b gy mg mh l mi mj">$ dvc remote add -d storage gdrive://auth_code_folder_location</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/f7e04807eb9b10f1289b825e0998bd21.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*XKpR21-_WNwyHH5RMfUs0w.png"/></div></figure><p id="24d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来是git提交，使用:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="d382" class="me mf it ly b gy mg mh l mi mj">git commit .dvc/config -m "Config remote storage"</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/f214b6400642723961edbca8ed1ebfad.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/format:webp/1*C0NtYRBX39P0D2OvNoDtQQ.png"/></div></figure><p id="de1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用以下方式将数据推送到存储位置:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="19fa" class="me mf it ly b gy mg mh l mi mj">dvc push</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/e2f68e52dda790c28ca669b2f07bf1ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EaWGiGN1wMoY2HhXTJ74eg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者形象</p></figure><p id="3354" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您没有安装软件包<code class="fe lv lw lx ly b">pydrive2</code>，可能会出现上述错误。</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="f618" class="me mf it ly b gy mg mh l mi mj">pip install pydrive2</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/0b630bf2717db8deb1ea9ea198e55d6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TbLrQq2Yt6PMVcHWjqe-FA.png"/></div></div></figure><p id="6283" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击链接并验证它是否提供了访问DVC的权限，以将文件推送到谷歌存储。一旦您允许，它将提供一个需要输入终端的验证码，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/ccb950831412c087ee3c414168ffb505.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*JySZYLpgfOdtTzKhPWfNCA.png"/></div></figure><p id="ca4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦你输入代码，你会看到文件被推送到谷歌驱动器。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/ec90e6c59907fcabc9729eeb68e794f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:326/format:webp/1*akb4xHfduOceLbs3-WGruQ.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/a7f97f70f8e6ab830af044a770171fa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RVFB-Nzm_QLb6BoX0lNN3g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者创造的形象</p></figure><h2 id="94e1" class="me mf it bd na nb nc dn nd ne nf dp ng li nh ni nj lm nk nl nm lq nn no np nq bi translated">第4步:将您的元信息推送到Github:</h2><p id="72b7" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">现在所有的跟踪信息都在本地git repo中进行版本控制。你可以把这些都推给你的Github回购计划。您可以在终端中执行以下步骤:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="ffe5" class="me mf it ly b gy mg mh l mi mj">$ git remote add origin &lt;your repo&gt;<br/>$ git push -f origin master</span></pre><p id="939a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该可以在github上看到所有的变化:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/f699d15203bc6b895c2dd00ab05b1a87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5JzB_Mb_q4OfNxONKjpV-g.png"/></div></div></figure></div><div class="ab cl oh oi hx oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="im in io ip iq"><p id="c5a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们说，如果你想从其他地方/电脑访问数据，你需要安装DVC，你可以按照下面的步骤在本地下载数据。</p><p id="d617" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先要检查数据是否存在，您只需输入以下内容:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="2aa8" class="me mf it ly b gy mg mh l mi mj">dvc list &lt;your repo&gt;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/2048d07d30dec5631eb992e70fe7f417.png" data-original-src="https://miro.medium.com/v2/resize:fit:886/format:webp/1*uMZL_SP5rbakbqN9QtGbaw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者的形象</p></figure><p id="0746" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是在下载数据之前，您需要克隆存储库。您可以执行以下操作:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="acf2" class="me mf it ly b gy mg mh l mi mj">git clone &lt;your repo&gt;</span></pre><p id="9a19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">克隆回购后，可以进行<code class="fe lv lw lx ly b">git pull</code>。它将提示一个url，需要像以前一样进行验证。请参见下面的截图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/3a6ebce9a1e42fe98f74e71d17ea61da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pxDXcdLV71CHDGV6TOGkIg.png"/></div></div></figure><p id="2166" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，您会看到文件被下载到您的本地计算机上！瞧。！</p><p id="fdb7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您抽出时间阅读本文。我希望你喜欢这个内容，并对你有所帮助。请随意发表评论，提出任何建议/想法。</p></div><div class="ab cl oh oi hx oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="im in io ip iq"><blockquote class="oq or os"><p id="35fe" class="kz la ot lb b lc ld ju le lf lg jx lh ou lj lk ll ov ln lo lp ow lr ls lt lu im bi translated"><em class="it">跟我上</em> <a class="ae ky" href="https://twitter.com/pratikkgandhi" rel="noopener ugc nofollow" target="_blank"> <em class="it"> Twitter </em> </a>或<em class="it"/><a class="ae ky" href="https://www.linkedin.com/in/pratikkgandhi/" rel="noopener ugc nofollow" target="_blank"><em class="it">LinkedIn</em></a><em class="it">。你也可以通过pratikkgandhi@gmail.com联系我</em></p></blockquote></div><div class="ab cl oh oi hx oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="im in io ip iq"><p id="b710" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ot">如您想成为</em> <a class="ae ky" href="https://pratikkgandhi.medium.com/membership" rel="noopener"> <em class="ot">中型会员</em> </a> <em class="ot">并无限享受阅读文章的乐趣，请注册会员。Medium将与我分享使用上述链接注册的任何成员的一部分！谢谢。</em></p></div></div>    
</body>
</html>