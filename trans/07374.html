<html>
<head>
<title>Turn a Pandas DataFrame into an API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将熊猫数据帧转换成API</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/turn-a-pandas-dataframe-into-an-api-ac56eaefe11b?source=collection_archive---------10-----------------------#2021-07-05">https://towardsdatascience.com/turn-a-pandas-dataframe-into-an-api-ac56eaefe11b?source=collection_archive---------10-----------------------#2021-07-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7c17" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">与他人共享数据框架或将数据集成到前端。</h2></div><p id="33f9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">熊猫数据框是我最喜欢的用Python操作数据的方式。事实上，我的许多小型分析项目的最终产品只是一个包含我的结果的数据框架。</p><p id="bcb6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我过去常常将我的数据帧转储到CSV文件中，并保存到Github中。但是最近，我一直在使用下面的<a class="ae lb" href="https://about.beneath.dev" rel="noopener ugc nofollow" target="_blank">，一个我正在构建的数据共享服务，来保存我的数据帧，同时将它们转化为一个完整的API和一个网站。当我需要将数据集移交给客户端或将数据集成到前端时，它非常有用。</a></p><p id="e37e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我将向你展示这是如何工作的！我将获取GitHub提交，分析它们，并使用before将结果转换成API。</p><h1 id="21d2" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">下的<strong class="ak">设置</strong></h1><p id="41ea" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">要开始，你需要安装under<code class="fe lz ma mb mc b">pip</code>模块，并使用免费under帐户登录。这很简单，医生已经做好了准备。只要按照<a class="ae lb" href="https://about.beneath.dev/docs/quick-starts/install-sdk/" rel="noopener ugc nofollow" target="_blank">这些步骤</a>就可以了。</p><p id="41ee" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请务必记住您的用户名，因为您马上就要用到它了！</p><h1 id="f0a3" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">让我们分析一些数据</h1><p id="0aa4" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">我认为Github活动是一个迷人的、未被充分开发的数据源。让我们揭开表面，看看对…熊猫的承诺！这里有一个快速脚本来获取<code class="fe lz ma mb mc b">pandas</code>源代码，并汇总一些关于提交和贡献者数量的每日统计数据:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="6248" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，<code class="fe lz ma mb mc b">df</code>变量包含了我们的洞察力。如果您正在跟进，您可以更改<code class="fe lz ma mb mc b">repo</code>变量来抓取另一个Github项目。只是要小心一些主要的回购可能要花很长时间来分析(我看着你，<a class="ae lb" href="https://github.com/torvalds/linux" rel="noopener ugc nofollow" target="_blank"> torvalds/linux </a>)。</p><h1 id="9b98" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">将数据框保存到下方</h1><p id="67af" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">首先，我们将创建一个新项目来存储我们的结果。我将从命令行完成，但是您也可以使用web <a class="ae lb" href="https://beneath.dev/-/create/project" rel="noopener ugc nofollow" target="_blank">控制台</a>:</p><pre class="md me mf mg gt mk mc ml mm aw mn bi"><span id="c304" class="mo ld iq mc b gy mp mq l mr ms">beneath project create USERNAME/github-fun</span></pre><p id="80a7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">只需用你自己的用户名替换<code class="fe lz ma mb mc b">USERNAME</code>。</p><p id="0654" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们准备发布数据框架。我们在Python中直接用一个简单的一行程序来实现它(好吧，我把它分成了多行，但它仍然只是一个调用):</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="5f45" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里发生了一些事情。让我们浏览一下:</p><ul class=""><li id="352f" class="mt mu iq kh b ki kj kl km ko mv ks mw kw mx la my mz na nb bi translated"><code class="fe lz ma mb mc b">table_path</code>给出了输出表的完整路径，包括我们的用户名和项目。</li><li id="2d81" class="mt mu iq kh b ki nc kl nd ko ne ks nf kw ng la my mz na nb bi translated">我们使用<code class="fe lz ma mb mc b">records</code>参数来传递我们的数据帧。</li><li id="a25c" class="mt mu iq kh b ki nc kl nd ko ne ks nf kw ng la my mz na nb bi translated">我们为数据提供一个<code class="fe lz ma mb mc b">key</code>。自动生成的API使用键<a class="ae lb" href="https://about.beneath.dev/docs/reading-writing-data/index-filters/" rel="noopener ugc nofollow" target="_blank">索引数据</a>，这样我们可以快速过滤记录。默认情况下，index将使用DataFrame的索引作为键，但我更喜欢手动设置它。</li><li id="b94f" class="mt mu iq kh b ki nc kl nd ko ne ks nf kw ng la my mz na nb bi translated"><code class="fe lz ma mb mc b">description</code>参数向数据集添加了一些文档，这些文档将显示在表页面的顶部。</li></ul><p id="03d0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就是这样！现在让我们来探究结果。</p><h1 id="a130" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">探索您的数据</h1><p id="d909" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">您现在可以前往<a class="ae lb" href="https://beneath.dev/?noredirect=1" rel="noopener ugc nofollow" target="_blank"> web控制台</a>并浏览数据及其API文档。我的名字在<a class="ae lb" href="https://beneath.dev/epg/github-fun/table:pandas-commits](https://beneath.dev/epg/github-fun/table:pandas-commits)" rel="noopener ugc nofollow" target="_blank">https://beneath.dev/epg/github-fun/table:pandas-commits</a>(如果你使用相同的项目和表名，你可以把我的用户名<code class="fe lz ma mb mc b">epg</code>替换成你自己的)。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi nh"><img src="../Images/0af1a6c07468b9660a9ca2e8fc2e8c5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i6XOYF1q2K6vYRzDDYWPLg.png"/></div></div><p class="no np gj gh gi nq nr bd b be z dk translated">在下面的控制台中浏览您的数据</p></figure><p id="1108" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您还可以共享或发布数据。权限是在项目层管理的，所以只需进入项目页面添加成员或将项目设置切换到<code class="fe lz ma mb mc b">public</code>。</p><h1 id="888e" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">使用API</h1><p id="ea36" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">既然数据在下面，任何有权限的人都可以使用这个API。在表格页面的“API”选项卡上，我们获得了用于集成数据集的自动生成的代码片段。</p><p id="ed2f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以将数据帧加载回Python:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="7585" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者我们可以在2021年5月的每一天查询REST API并获取提交信息:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="7b37" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者使用React钩子将数据直接读入前端:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="9a6d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在下面的控制台中查看我的数据框架的<a class="ae lb" href="https://beneath.dev/epg/github-fun/table:pandas-commits/-/api" rel="noopener ugc nofollow" target="_blank"> API标签</a>以查看使用数据的所有方法。</p><h1 id="97f5" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">好了</h1><p id="d3c2" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">就是这样！我们使用used将熊猫数据帧转换成API。如果您有任何问题，我大部分时间都在线，在under的<a class="ae lb" href="https://discord.gg/f5yvx7YWau" rel="noopener ugc nofollow" target="_blank"> Discord </a>(我喜欢谈论数据科学，所以也欢迎您只是打个招呼👋).让我知道你是否发布了一个很酷的数据集，我可以在特色项目中聚焦！</p></div></div>    
</body>
</html>