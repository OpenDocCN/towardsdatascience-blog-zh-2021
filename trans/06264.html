<html>
<head>
<title>What’s New In Python 3.10–4 Amazing Features You Should Try</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 3.10的新特性–您应该尝试的4个惊人特性</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/whats-new-in-python-3-10-4-amazing-features-you-should-try-4f3044871476?source=collection_archive---------5-----------------------#2021-06-05">https://towardsdatascience.com/whats-new-in-python-3-10-4-amazing-features-you-should-try-4f3044871476?source=collection_archive---------5-----------------------#2021-06-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4867" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从更好的上下文管理器到Switch语句——这将是一个大问题。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ffcef6fc666f2dc240cf438e852ec9c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xs0pI6xaUQTz-EgEDO-itA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@lastly?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">泰勒·拉斯托维奇</a>在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="7c64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着<a class="ae ky" href="https://docs.python.org/3.10/whatsnew/3.10.html" rel="noopener ugc nofollow" target="_blank"> Python 3.10 </a>目前进入alpha版本，值得看看令人兴奋的新特性。今天，我们将探讨最重要的四个，并简要提及一些小的修复和更改。</p><p id="73e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">免责声明</strong> : <em class="lv"> Python 3.10还没有准备好投入生产，所以把它作为默认的Python解释器安装可能不是一个好主意。</em></p><p id="26d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章的结构如下:</p><ul class=""><li id="966a" class="lw lx it lb b lc ld lf lg li ly lm lz lq ma lu mb mc md me bi translated">更好的错误消息</li><li id="0efa" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">结构模式匹配(Switch语句)</li><li id="0362" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">Union运算符</li><li id="6f2f" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">更好的上下文管理器</li><li id="34ec" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">最后的想法</li></ul></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="fd65" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">更好的错误消息</h1><p id="0201" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">Python中的错误消息有时会令人沮丧。Python 3.10改变了这一点。对语法、缩进、属性和名称错误进行了改进。</p><p id="d87d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面我们来探究几个。</p><p id="043a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">情况1 </strong> —字典未关闭:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/3b35dddf3b563befc9d7bd4e9127b7ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OLn891sxtszcmzQ6245xtQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图1 —未关闭词典的语法错误(作者提供的图片)</p></figure><p id="07a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">案例2 </strong> —无效字符串文字:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/900c6e88e2d447250bae8e346332b7e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5SiiPIRWgeJDhFKKJZwJ0Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片2-无效字符串文字的语法错误(图片由作者提供)</p></figure><p id="dda0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">案例3</strong>——块前缺少<code class="fe nq nr ns nt b">:</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/2cd316bd80843d24ab622b1e962ca5ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*akQNhAb-0KZFwETQ3IUuew.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图3-块前缺少冒号的语法错误(作者提供的图片)</p></figure><p id="4970" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">案例4 </strong> —不合适的缩进:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/5387f5f7ef2315a97db6279647e3e0fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nz3CXzsVsVum9bFTsDvVmA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图4 —缺少缩进级别的缩进错误(作者提供的图片)</p></figure><p id="1ff5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以自己进一步探索，但是改进的错误消息应该可以节省一些调试时间。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="91b7" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">结构模式匹配(Switch语句)</h1><p id="9935" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">是时候了。</p><p id="6668" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Switch语句在大多数编程语言中都很常见，它提供了一种更简洁的实现条件逻辑的方式。当有很多条件需要评估时，它们就派上用场了。</p><p id="cbbc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们使用结构模式匹配来编写一个简单的函数— <code class="fe nq nr ns nt b">get_mood(day: str) -&gt; str</code>，它返回一个值取决于输入参数的字符串。随着周末的临近，返回值变得更加令人兴奋。愚蠢的小功能，但可以用于演示目的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="3245" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简而言之，结构化模式匹配将提供一种更整洁的方式来组织您的代码，并避免一堆if-else语句。概括一下:</p><ul class=""><li id="d321" class="lw lx it lb b lc ld lf lg li ly lm lz lq ma lu mb mc md me bi translated">使用<code class="fe nq nr ns nt b">case</code>关键字来评估条件(<code class="fe nq nr ns nt b">case ‘Monday’</code>与<code class="fe nq nr ns nt b">if day == ‘Monday’</code>相同)</li><li id="d8e9" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">使用管道操作符<code class="fe nq nr ns nt b">|</code>分隔多个条件，例如，如果两个输入值应该产生相同的返回值</li><li id="4497" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">使用下划线运算符— <code class="fe nq nr ns nt b">_</code> —指定默认大小写。</li></ul></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="26a1" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">Union运算符</h1><p id="86fc" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">类型提示是一个东西。您可能知道，Python不要求您在声明变量时指定变量的数据类型，而是提供了一种可选的方法。</p><p id="75f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，糟糕的是声明一个接受整数或浮点数的函数。如何指定数据类型？在3.10版本之前，你可以使用<code class="fe nq nr ns nt b">Union</code>操作符。</p><p id="86d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">长话短说，用类型提示声明一个返回一个数的平方根的函数如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="8e07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从Python 3.10开始，一定会有更好的解决方案，而且确实有。您可以完全抛弃<code class="fe nq nr ns nt b">Union</code>操作符，用管道操作符<code class="fe nq nr ns nt b">|</code>分隔潜在的数据类型。这里有一个例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="9b37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在干净多了，不是吗？</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="56ae" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">更好的上下文管理器</h1><p id="fd5b" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">上下文管理器的概念在Python 3.10中并不陌生。新的Python版本允许在上下文管理器(<a class="ae ky" href="https://docs.python.org/3.10/whatsnew/3.10.html#parenthesized-context-managers" rel="noopener ugc nofollow" target="_blank"> source </a>)中使用圆括号来延续多个文本行。</p><p id="1e19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看一个例子。我有两个TXT文件:</p><ul class=""><li id="d1d4" class="lw lx it lb b lc ld lf lg li ly lm lz lq ma lu mb mc md me bi translated"><code class="fe nq nr ns nt b">first_file.txt</code> —包含“这是第一个文件”</li><li id="18df" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated"><code class="fe nq nr ns nt b">second_file.txt</code> —包含“这是第二个文件。”</li></ul><p id="cf37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在将使用上下文管理器来打开和处理这两者的内容。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="25d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相应的输出如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/d305ed53e9deda73a92e3a0fce5dddd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*e9rQILTqudk-pZHCESh6-Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图5 —上下文管理器输出(作者提供的图片)</p></figure><p id="0d22" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，您现在可以以一种更有条理的方式管理多个文件。这不是一个革命性的特性，但绝对值得拥有。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="cbc2" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">最后的想法</h1><p id="ab47" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">我必须说，自从3.6版本引入f字符串以来，我还没有对新的Python版本如此兴奋过。这四个不会彻底改变我写Python代码的方式，但肯定会使一些事情变得更简单、更有条理。</p><p id="a6a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天的文章只涵盖了主要的新特性，因此请参考官方文档<a class="ae ky" href="https://docs.python.org/3.10/whatsnew/3.10.html#parenthesized-context-managers" rel="noopener ugc nofollow" target="_blank">以获得完整列表。</a></p><p id="f27f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你最喜欢的Python新特性是什么？</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="4289" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">喜欢这篇文章吗？成为 <a class="ae ky" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="lv">中等会员</em> </a> <em class="lv">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="nz oa gp gr ob oc"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">通过我的推荐链接加入Medium-Dario rade ci</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">medium.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq ks oc"/></div></div></a></div></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="734f" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">了解更多信息</h1><ul class=""><li id="9d20" class="lw lx it lb b lc nj lf nk li or lm os lq ot lu mb mc md me bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/top-3-reasons-why-i-sold-my-m1-macbook-pro-as-a-data-scientist-abad1226f52a">我作为数据科学家卖掉我的M1 Macbook Pro的三大理由</a></li><li id="e19a" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/how-to-schedule-python-scripts-with-cron-the-only-guide-youll-ever-need-deea2df63b4e">如何使用Cron调度Python脚本——您需要的唯一指南</a></li><li id="3a69" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/dask-delayed-how-to-parallelize-your-python-code-with-ease-19382e159849"> Dask延迟—如何轻松并行化您的Python代码</a></li><li id="a2dd" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/how-to-create-pdf-reports-with-python-the-essential-guide-c08dd3ebf2ee">如何使用Python创建PDF报告—基本指南</a></li><li id="0183" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/become-a-data-scientist-in-2021-even-without-a-college-degree-e43fa934e55">即使没有大学文凭也要在2021年成为数据科学家</a></li></ul></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="e6c1" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">保持联系</h1><ul class=""><li id="7916" class="lw lx it lb b lc nj lf nk li or lm os lq ot lu mb mc md me bi translated">关注我的<a class="ae ky" href="https://medium.com/@radecicdario" rel="noopener"> Medium </a>了解更多类似的故事</li><li id="99e5" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">注册我的<a class="ae ky" href="https://mailchi.mp/46a3d2989d9b/bdssubscribe" rel="noopener ugc nofollow" target="_blank">简讯</a></li><li id="1f37" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">在<a class="ae ky" href="https://www.linkedin.com/in/darioradecic/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上连接</li></ul></div></div>    
</body>
</html>