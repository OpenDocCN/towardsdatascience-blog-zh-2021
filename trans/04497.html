<html>
<head>
<title>How to Create Bindings and Conditions Between Multiple Plots Using Altair</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Altair创建多个图之间的绑定和条件</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-create-bindings-and-conditions-between-multiple-plots-using-altair-4e4fe907de37?source=collection_archive---------16-----------------------#2021-04-17">https://towardsdatascience.com/how-to-create-bindings-and-conditions-between-multiple-plots-using-altair-4e4fe907de37?source=collection_archive---------16-----------------------#2021-04-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3c85" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用绘图绑定从不同角度理解数据</h2></div><h1 id="0dae" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">动机</h1><p id="4cdd" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">你有没有像下面这样和另一个剧情互动的时候，希望看到一个剧情发生变化？这就是牛郎星派上用场的时候。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi lw"><img src="../Images/ea2c37fc48e18fba2963be45a5246c8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Zax-ZldAMIDP0qlpQKoWFg.gif"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者GIF</p></figure><p id="a8f3" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">上图是用Altair创建的。如果你不了解Altair，<a class="ae mr" href="https://altair-viz.github.io/" rel="noopener ugc nofollow" target="_blank"> Altair </a>是一个基于Vega和Vega-Lite的Python统计可视化库。在我的上一篇文章中，我展示了Altair <a class="ae mr" rel="noopener" target="_blank" href="/how-to-create-interactive-and-elegant-plot-with-altair-8dd87a890f2a">如何允许您使用简洁的可视化语法来快速构建统计图形</a>。</p><p id="e247" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">在本文中，我将展示如何使用Altair在多个图之间创建绑定和条件。</p><h1 id="afb3" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">开始</h1><p id="3ced" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">要安装Altair，请键入:</p><pre class="lx ly lz ma gt ms mt mu mv aw mw bi"><span id="4d7f" class="mx kj it mt b gy my mz l na nb">pip install altair</span></pre><p id="0ab2" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">我们将使用Altair来研究从Kaggle 上发布的学生考试成绩数据下载的CSV文件。</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="nc nd l"/></div></figure><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ne nd l"/></div></figure><p id="182c" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">酷！现在我们有了数据，让我们用Altair可视化它。</p><h1 id="0dc5" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">使用间隔选择来过滤条形图</h1><h2 id="7c17" class="mx kj it bd kk nf ng dn ko nh ni dp ks lj nj nk ku ln nl nm kw lr nn no ky np bi translated">创建间隔选择</h2><p id="51cf" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们将创建一个使用区间选择来过滤条形图内容的图表。首先创建一个散点图，它允许我们通过单击和拖动来选择特定的时间间隔。</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ne nd l"/></div></figure><p id="28b6" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">尝试单击并拖动上面的图表。您应该只看到所选区域内的点的颜色被突出显示！</p><p id="be6c" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">产生上面输出的代码:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="444d" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">解释:</p><ul class=""><li id="3955" class="nq nr it lc b ld mm lg mn lj ns ln nt lr nu lv nv nw nx ny bi translated"><code class="fe nz oa ob mt b">brush = alt.selection(type="interval")</code>:创建区间选择对象</li><li id="691b" class="nq nr it lc b ld oc lg od lj oe ln of lr og lv nv nw nx ny bi translated"><code class="fe nz oa ob mt b">encode</code>:指定x轴和y轴显示的列</li><li id="a7fc" class="nq nr it lc b ld oc lg od lj oe ln of lr og lv nv nw nx ny bi translated"><code class="fe nz oa ob mt b">color=alt.condition(brush, “gender:N”, alt.value(“lightgray”)</code>:如果点在选择的区间内，用<code class="fe nz oa ob mt b">gender</code>给这些点着色，否则用<code class="fe nz oa ob mt b">lightgray</code>给这些点着色。</li><li id="d568" class="nq nr it lc b ld oc lg od lj oe ln of lr og lv nv nw nx ny bi translated"><code class="fe nz oa ob mt b">tooltip</code>:悬停在某点上时显示的信息</li><li id="f844" class="nq nr it lc b ld oc lg od lj oe ln of lr og lv nv nw nx ny bi translated"><code class="fe nz oa ob mt b">add_selection(brush)</code>:将区间选择应用于图表</li><li id="3959" class="nq nr it lc b ld oc lg od lj oe ln of lr og lv nv nw nx ny bi translated"><code class="fe nz oa ob mt b">Q</code>指定定量(数值数据)，<code class="fe nz oa ob mt b">N</code>指定名义(分类数据)</li></ul><p id="7dfa" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">如果你想了解更多关于Altair的基本语法，请参考本文。</p><h2 id="4c50" class="mx kj it bd kk nf ng dn ko nh ni dp ks lj nj nk ku ln nl nm kw lr nn no ky np bi translated">使条形图响应间隔选择</h2><p id="c5e7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">现在我们已经创建了区间选择，让我们将它连接到另一个条形图。</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ne nd l"/></div></figure><p id="d631" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">尝试单击并拖动散点图。当选择不同的间隔时，您应该会看到条形图的分布发生变化！</p><p id="22ab" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">产生上面这个情节的代码:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="76a9" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">解释:</p><ul class=""><li id="b5d5" class="nq nr it lc b ld mm lg mn lj ns ln nt lr nu lv nv nw nx ny bi translated"><code class="fe nz oa ob mt b">x="count(parental_level_of_education):Q"</code>:对<code class="fe nz oa ob mt b">parental_level_of_education</code>栏中每个值的计数。</li><li id="1e70" class="nq nr it lc b ld oc lg od lj oe ln of lr og lv nv nw nx ny bi translated"><code class="fe nz oa ob mt b">color=alt.Color(“parental_level_of_education:N”)</code>:根据<code class="fe nz oa ob mt b">parental_level_of_education</code>给条形应用颜色</li><li id="ea49" class="nq nr it lc b ld oc lg od lj oe ln of lr og lv nv nw nx ny bi translated"><code class="fe nz oa ob mt b">transform_filter(brush)</code>:根据选择的间隔过滤数据</li></ul><h1 id="9801" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">我还可以用牛郎星做什么？</h1><p id="6d76" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">使用Altair的绑定功能，您可以做许多很酷的事情来使您的情节更加清晰，例如:</p><h2 id="097d" class="mx kj it bd kk nf ng dn ko nh ni dp ks lj nj nk ku ln nl nm kw lr nn no ky np bi translated">放大直方图</h2><p id="e41f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">有时，您可能希望放大直方图，以获得直方图的更细粒度视图。这可以用Altair来完成。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/4fb645a2291f45abca863774860551ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/1*VeOvQJa7ZGRU9d4beyUGVQ.gif"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者GIF</p></figure><p id="80a5" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">你可以在这里自己摆弄图表:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ne nd l"/></div></figure><p id="c55c" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">创建上述地块的代码:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h2 id="7f83" class="mx kj it bd kk nf ng dn ko nh ni dp ks lj nj nk ku ln nl nm kw lr nn no ky np bi translated">仅显示直方图中突出显示的点</h2><p id="d424" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">您可能还希望通过查看哪些点落在直方图的选定区间来理解直方图。牛郎星也可以做到这一点:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/72d8330ab27e01a7d8e4f9c6515e7bc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/1*0h1Hoc5Jvz3RFq4RCX3wbA.gif"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者GIF</p></figure><p id="d273" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">你可以在这里自己摆弄图表:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ne nd l"/></div></figure><p id="509f" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">创建上述地块的代码:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h2 id="6a28" class="mx kj it bd kk nf ng dn ko nh ni dp ks lj nj nk ku ln nl nm kw lr nn no ky np bi translated">基于下拉栏和单选按钮过滤数据点</h2><p id="78bf" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">您也可以使用Altair将多个过滤器应用到您的数据点，如下所示:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi oi"><img src="../Images/86e634094763e3058a35c6bfc9a7a6c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*lN9iNeFFxLwVeWQONdvxSA.gif"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者GIF</p></figure><p id="103b" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">你可以在这里玩剧情:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ne nd l"/></div></figure><p id="c07f" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">上图的代码:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="18a3" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">希望上面的代码没有吓到你！上面的许多代码行显示了我们在第一部分已经学到的内容。一些之前没有提到的新牛郎星天体:</p><ul class=""><li id="b52b" class="nq nr it lc b ld mm lg mn lj ns ln nt lr nu lv nv nw nx ny bi translated"><code class="fe nz oa ob mt b">alt.selection_single</code>:允许用户一次只选择一个选项</li><li id="4b64" class="nq nr it lc b ld oc lg od lj oe ln of lr og lv nv nw nx ny bi translated"><code class="fe nz oa ob mt b">alt.binding_select</code>:创建下拉栏</li><li id="a459" class="nq nr it lc b ld oc lg od lj oe ln of lr og lv nv nw nx ny bi translated"><code class="fe nz oa ob mt b">alt.binding_radio</code>:创建一个单选按钮</li></ul><h1 id="f0c0" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">结论</h1><p id="7eea" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">恭喜你！您刚刚学习了如何使用Altair绑定多个情节！能够在多个图之间建立联系将使您的数据分析更加清晰。另外，你也可以用这些情节打动你的观众！</p><p id="aec3" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">随意发挥，并在这里叉这篇文章的源代码:</p><div class="oj ok gp gr ol om"><a href="https://github.com/khuyentran1401/Data-science/blob/master/visualization/altair/altair_advanced.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">khuyentran 1401/数据科学</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">有用的数据科学主题以及代码和文章的集合- khuyentran1401/Data-science</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">github.com</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa mg om"/></div></div></a></div><p id="9026" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的算法和数据科学工具。你可以在LinkedIn和Twitter上与我联系。</p><p id="43a6" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">如果你想查看我写的所有文章的代码，请点击这里。在Medium上关注我，了解我的最新数据科学文章，例如:</p><div class="oj ok gp gr ol om"><a rel="noopener follow" target="_blank" href="/i-scraped-more-than-1k-top-machine-learning-github-profiles-and-this-is-what-i-found-1ab4fb0c0474"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">我收集了超过1k的顶级机器学习Github配置文件，这就是我的发现</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">从Github上的顶级机器学习档案中获得见解</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">towardsdatascience.com</p></div></div><div class="ov l"><div class="pb l ox oy oz ov pa mg om"/></div></div></a></div><div class="oj ok gp gr ol om"><a rel="noopener follow" target="_blank" href="/top-6-python-libraries-for-visualization-which-one-to-use-fe43381cd658"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">可视化的6大Python库:使用哪一个？</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">对使用哪种可视化工具感到困惑？我为你分析了每个图书馆的利弊</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">towardsdatascience.com</p></div></div><div class="ov l"><div class="pc l ox oy oz ov pa mg om"/></div></div></a></div><div class="oj ok gp gr ol om"><a rel="noopener follow" target="_blank" href="/introduction-to-yellowbrick-a-python-library-to-explain-the-prediction-of-your-machine-learning-d63ecee10ecc"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">Yellowbrick简介:可视化机器学习预测的Python库…</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">您将f1分数提高到了98%！但这是否意味着你的模型表现更好呢？</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">towardsdatascience.com</p></div></div><div class="ov l"><div class="pd l ox oy oz ov pa mg om"/></div></div></a></div><div class="oj ok gp gr ol om"><a rel="noopener follow" target="_blank" href="/how-to-create-mathematical-animations-like-3blue1brown-using-python-f571fb9da3d1"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">如何使用Python创建类似3Blue1Brown的数学动画</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">利用您的Python技能创建美丽的数学动画</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">towardsdatascience.com</p></div></div><div class="ov l"><div class="pe l ox oy oz ov pa mg om"/></div></div></a></div></div></div>    
</body>
</html>