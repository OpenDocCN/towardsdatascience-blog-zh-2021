<html>
<head>
<title>Practical Classification Metrics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实用分类标准</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/practical-classification-metrics-f056805cf1f1?source=collection_archive---------33-----------------------#2021-04-26">https://towardsdatascience.com/practical-classification-metrics-f056805cf1f1?source=collection_archive---------33-----------------------#2021-04-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ee20" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">决定使用哪些分类标准来解决现实世界中的分类问题的方法</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c1d33879881ecfba4febab1b3be02bc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GN17-YVoqsstzt3m"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">拉克伦·唐纳德在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="ec52" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个<a class="ae kv" href="https://www.google.com/search?q=classification+metrics" rel="noopener ugc nofollow" target="_blank">快速的谷歌搜索</a>会告诉你在<a class="ae kv" href="https://en.wikipedia.org/wiki/Evaluation_of_binary_classifiers" rel="noopener ugc nofollow" target="_blank">分类标准</a>上有数百个不同的论文/博客/文章，即。、精度、召回率、F1、真阳性率、假阳性率、PPV、NPV等。如果您不理解这些指标的定义，这些文章是一个很好的起点。例如<a class="ae kv" rel="noopener" target="_blank" href="/understanding-data-science-classification-metrics-in-scikit-learn-in-python-3bc336865019">这篇</a>博客谈到了sklearn中的各种分类标准；<a class="ae kv" rel="noopener" target="_blank" href="/the-ultimate-guide-to-binary-classification-metrics-c25c3627dd0a">这个</a>博客列出了19种不同的二进制分类标准(其中许多我甚至从未听说过)；<a class="ae kv" href="https://medium.com/@MohammedS/performance-metrics-for-classification-problems-in-machine-learning-part-i-b085d432082b" rel="noopener">此</a>采用“混淆矩阵”的观点来解释一些度量标准；此外，还有针对像<a class="ae kv" href="https://machinelearningmastery.com/tour-of-evaluation-metrics-for-imbalanced-classification/" rel="noopener ugc nofollow" target="_blank">不平衡分类</a>这样的小众案例的博客。但是，这些博客要么提供了太多的信息，将选择正确指标的责任留给了用户，要么提供了指标的学术观点，这在工业环境中可能可行，也可能不可行(例如，使用AUC指标无法给出操作点)。在这里，我提供了一个方法来决定在实际(二进制和多类)分类问题的各种场景中使用哪些度量。它面向知道基本定义，但不知道如何选择期望影响的指标的用户。</p><blockquote class="ls"><p id="4781" class="lt lu iq bd lv lw lx ly lz ma mb lr dk translated">在这里，我提供了一个方法来决定在实际(二进制和多类)分类问题的各种场景中使用哪些度量。</p></blockquote><h1 id="058d" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">问:选择什么指标？答:试试精确召回覆盖(PRC)频谱。</h1><p id="e96d" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">鉴于机器学习(ML)在企业界的流行，许多产品经理现在都熟悉精确召回或精确覆盖的概念，经常混淆两者。问题是，即使在机器学习领域工作了15年，我仍然不明白精度对于手头的问题“到底”意味着什么。一般来说<strong class="ky ir"> <em class="mz">精度</em> </strong>的意思是“预测正确的百分比是多少”。但是，对于一个多类问题，人们可以提出两种非常不同的精度定义——都是对“正确预测百分比”的有效解释。召回率和覆盖率是另外两个经常(不正确地)互换使用的指标。<strong class="ky ir"> <em class="mz">回忆</em> </strong>本质上是‘我能够检索到的初级类的百分比是多少’，而<strong class="ky ir"> <em class="mz">覆盖</em> </strong>本质上是‘我对人口的百分比做了预测’。有时其中一个对问题没有意义，例如，在二进制设置中使用覆盖率是不常见的(尽管我将展示从实践的角度来看它很有意义)。</p><p id="5c94" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么，如何通过逆向成为客户 来决定选择哪个指标呢？首先理解在不同的问题设置中，度量标准意味着什么(这是本博客将帮助你的地方)；接下来，确定这些分类标准对应用程序/最终客户的影响。例如，当任务是将产品分类到一组类别中时，您可能会问— <em class="mz">我是将分类系统用于自动分类还是作为手动工作流的输入？有没有我特别感兴趣的特定类别，或者所有类别都同样重要？或者可能更受欢迎的类，即具有更高发生率的类，应该得到更高的权重？对部分产品不进行分类可以吗？低信心物品不补充手动标签怎么样？</em>等。其中一些问题的答案将定义如何着手选择正确的指标。让我们尝试理解不同场景中的各种指标。</p><p id="4107" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们深入研究之前，需要注意一点——这个博客主要关注分类问题的各种精确召回率。就我的经验而言，就对最终客户的影响而言，它们更具可操作性，解释也更简单。其他指标，如AUC、ROC、TPR、FPR等。，可以在特定的环境中找到用途，例如，我仍然更喜欢PR-AUC或ROC-AUC来在两种算法之间做出决定，因为它们是跨各种操作点的更鲁棒的度量，但是基于精确召回率覆盖的度量是大多数实际分类问题的良好起点，其中分类输出用于一些下游应用。</p><blockquote class="ls"><p id="9f39" class="lt lu iq bd lv lw lx ly lz ma mb lr dk translated">就对最终客户的影响而言，精确召回率更具可操作性，解释也更简单。</p></blockquote><figure class="na nb nc nd ne kk"><div class="bz fp l di"><div class="nf ng l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">精确-召回-覆盖度量对于商业环境中的分类问题是非常实用的。</p></figure></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><h1 id="52b1" class="mc md iq bd me mf no mh mi mj np ml mm jw nq jx mo jz nr ka mq kc ns kd ms mt bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="0706" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">下表总结了可用于不同设置的各种指标:</p><h2 id="cb91" class="nt md iq bd me nu nv dn mi nw nx dp mm lf ny nz mo lj oa ob mq ln oc od ms oe bi translated">二元分类</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/589048f33e73175193e663b063f842a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CEVlU_V0TDsWlXtfDpfgXA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd og">表-1: </strong>二进制分类的各种精确-召回-覆盖度量。通常，二元分类器具有主要类别，即感兴趣的主要类别。例如垃圾邮件对非垃圾邮件，将“垃圾邮件”作为主要类别。第1列是可以使用的各种PRC指标。第2列定义了选择“工作点”的度量标准。第3列是用户需要输入的操作点的所需主要度量，第4列提供了如何计算相应度量的洞察。</p></figure><h2 id="dd71" class="nt md iq bd me nu nv dn mi nw nx dp mm lf ny nz mo lj oa ob mq ln oc od ms oe bi translated"><strong class="ak">多级分类</strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/cd8829738f40e33774005da8a22813ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qXNKLPiJi0_oUzQrMe9IKg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd og">表-2: </strong>多类分类的各种精确查全率指标。第1列是可以使用的各种PRC指标。第2列定义了选择“工作点”的度量标准。第3列是用户需要输入的操作点的所需主要度量，第4列提供了如何计算相应度量的洞察。</p></figure><h2 id="3dfc" class="nt md iq bd me nu nv dn mi nw nx dp mm lf ny nz mo lj oa ob mq ln oc od ms oe bi translated">多标签分类</h2><p id="23be" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">在下一篇博客中。</p></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><h1 id="123c" class="mc md iq bd me mf no mh mi mj np ml mm jw nq jx mo jz nr ka mq kc ns kd ms mt bi translated">二元分类</h1><p id="a548" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">当有两个类时，执行二元分类。通常，两个类别中的一个是主要类别(比如标签为‘1’)，第二个类别是主要类别的缺失(比如标签为‘0’)，例如，垃圾邮件对非垃圾邮件，电子产品对非电子产品。在某些情况下，两个类别都可能是感兴趣的，例如，男子对女子。但是，在这两种情况下，只需要学习一个分类器来区分这两个类别。假设在测试集中有“N”个项目，我们存储两个类的预测。这将产生一个“N”×2维的输出矩阵“O”。</p><p id="534f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看上面的表-1，我们可以计算精确召回覆盖度量的三个不同的变量，其在输出矩阵‘O’上使用不同的运算。作为参考，我们可以通过计算两个分数的最大值，并将相应的预测标签与实际情况进行比较，来计算“准确性”度量。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/bd3115b8d77c10e40f965263f11698c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-O8NgzoEJpbOs-E7OvYPsg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd og">图-1: </strong>各种输出分数。a)具有基本事实的输入数据，b)两个类的输出分数，c)初级类的分数(列-2)，以及d)每行的最大值和作为预测标签的Max的相应索引。</p></figure><p id="d363" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，对于上面的玩具问题，分类精度是75%，这是6/8，因为总共8个标签中有6个标签匹配，而不管它是0还是1。还要注意的是，在这篇博客中，我采用了一个简单的准确度版本，其中两个分数的最大值是预测的输出，即阈值0.5。选择不同的阈值是完全有效的，这将给出不同的准确性度量。但是，在这种情况下，最好定义基于PRC的指标。在学术环境中，精度仍然是一个受欢迎的选择，尤其是当这两个类在数据集中达到平衡时。</p><h2 id="6e5e" class="nt md iq bd me nu nv dn mi nw nx dp mm lf ny nz mo lj oa ob mq ln oc od ms oe bi translated">初级类的精确召回</h2><p id="4253" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">二元设置中的精确召回(PR)曲线是二元分类的最常见度量之一。可以计算两条不同的PR曲线，每条曲线对应一个类别。尽管通常只对主类进行计算。同样，在大多数问题中，同时实现高精度和高召回率是不可能的，人们必须决定哪一个对下游应用程序具有“期望的影响”——精度或召回率，或者两者的组合(例如F1分数)。例如，对于产品分类问题，如果您使用您的分类器来实现更好的“浏览”，即客户选择一个类别(比如“笔记本电脑”)，系统显示所有标有该类别的产品(例如，显示所有笔记本电脑)，那么如果您不想显示“台式机”而不是“笔记本电脑”(这是在谷歌搜索上发生的事情)，那么为了精确度而牺牲召回可能更有意义。可能需要高召回制度的一个例子是“攻击性”产品，如枪支、毒品等。即使展示一个攻击性的产品也会导致信任/公共关系问题，所以如果你正在建立一个攻击性的产品分类器，你可能想要在更高的召回率下操作。如果你不清楚什么对你更重要，一个好的选择是找到F1最高分的工作点。f1-分数定义为(2 *(精度*召回率))/(精度+召回率)。同样，您需要深入了解分类器在下游应用中的使用情况/它将如何影响最终客户，以决定是高精度、高召回率还是高F1影响。</p><div class="kg kh ki kj gt ab cb"><figure class="oj kk ok ol om on oo paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/b2fee5ac3d00bf6dabe9fd90dab5c15f.png" data-original-src="https://miro.medium.com/v2/resize:fit:504/format:webp/1*T_2_I-gQZF0WYwnkk96qhQ.png"/></div></figure><figure class="oj kk op ol om on oo paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/d93e4be2ec7dd35f65ad4917b56f31e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*CW4HreI392dEN_QCaImOEg.png"/></div></figure><figure class="oj kk oq ol om on oo paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/b38cfba52477d84d84567c54a9b8bbf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:736/format:webp/1*lF3Gb7jqUVSwxIkIiKiYQw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk or di os ot translated"><strong class="bd og">图-2:【左】</strong>根据原始分数排序的分数和标签，<strong class="bd og">中间</strong>玩具问题的精度-召回图，<strong class="bd og">【右】</strong>不同阈值选择的精度和召回。</p></figure></div><p id="4203" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于玩具问题，图2(左)显示了在不同阈值下，基于初级分类的分数排名，(中)精确回忆曲线，(右)精确回忆曲线。需要阈值图来决定工作点。比方说，我们要以90%的精度操作，看PR图，可以看到召回率是50%。对应的阈值是‘0.6’，这意味着如果分类器的得分≥0.6，我们应该将一个示例分类为‘初级’类，其余的分类为‘次级’类。这些图本身是插值的，对于这个玩具问题，我们只有8个例子。在P=0.75，R=0.75，th=0.3时，F1得分最高，为0.75。</p><p id="713c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，PR曲线对测试集中的类别比例很敏感。如果类别比例不同，两个不同的PR曲线不能在两个不同的测试集之间进行比较。与小学班级的10:90比例的测试集相比，50:50比例的测试集通常具有更高的分数。这是一些人可能更喜欢基于TPR/FPR的指标的地方，因为它们针对等级不平衡进行了标准化。但是，如果在实际环境中，您预计会出现不平衡，PRC指标可能更容易解释。</p><h2 id="f35a" class="nt md iq bd me nu nv dn mi nw nx dp mm lf ny nz mo lj oa ob mq ln oc od ms oe bi translated">主要类别的精确召回覆盖率</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/11fb8a33b404119a6eb58b49cf3f7c99.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*j-xZ66xn01bk4YGQAOPkYA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd og">图-3 </strong>:主要类的精确召回覆盖率</p></figure><p id="6c20" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的场景中，我们“总是”做出主次分明的决定。在任何操作阈值(th)下，无论是在特定精度下，还是回忆或基于最佳F1分数，所有测试项目≥th都被标记为“主要”,&lt; th被标记为“次要”。如果我们可以灵活地“不”对物品进行分类，那会怎么样？也许我们想“确保”我们同时以高精度和高召回率运行。也许我们有审计带宽来标记一些项目，但希望挑选对系统来说最困难的项目。假设我们已经花了足够的时间来优化特征、分类器、参数、训练集等。“不分类”是保证高精度和高召回率的一种选择。在这种情况下，我们分类的项目的%年龄被称为覆盖率。这里的权衡是如何在高精度和高召回率下最大化覆盖率。其思想是，如果分数在“上限”和“下限”之间，则不进行分类，并计算剩余样本的精确度和召回率。例如，在图3中，如果我们选择上限阈值≥0.7，下限阈值&lt; 0.1，则我们将实现P=1.0，R=1.0，C=3/8=37.5%。一般来说，最好将第二个类作为一个替代类，并采用精度覆盖度量，如下所示。</p><h2 id="2d47" class="nt md iq bd me nu nv dn mi nw nx dp mm lf ny nz mo lj oa ob mq ln oc od ms oe bi translated">精确覆盖小学和中学(PPV，NPV)</h2><p id="c5b1" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">小学和中学的精确覆盖率也是一个有用的指标。它用于两个类别同等重要的情况(例如，准确地分为男性和女性)。它们也被称为PPV(正预测值)率和NPV(负预测值)率。二元问题的这些度量可以用两种不同的方法计算，都可以得到相同的答案。第一种方法与“精确-召回-覆盖”图的方法相同——使用两个不同的阈值，在排序的主要分数上的上限和下限。项目&gt;上部将被分类为初级和<lower will="" be="" labeled="" as="" secondary.="" the="" second="" is="" to="" compute="" precision-coverage="" of="" primary="" and="" secondary="" classes="" independently="" having="" two="" thresholds="" based="" on="" plots.="" for="" instance="" using="" same="" that="" in="" figure-3="" lower="" we="" achieve="" a="" p_primary="2/2" p_secondary="1/1=1.0," c="3/8=37.5%." an="" alternate="" choice="" could="" upper="" which="" lead="" metrics="" can="" computed="" way="" help="" expand="" per-class="" multi-class="" setting.="" here="" instead="" score="" would="" sort="" max="" score.="" then="" classification="" into="" find="" different="" desired="" precision.=""/></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/223f3912961de4661f5a981fb00ab704.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KYEyrMAsOcdDyOEicdtpgA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd og">图-4: </strong>计算初级和二级精度覆盖率的替代方法。</p></figure><p id="99cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如图4所示，我们分别收集分类为主要和次要的项目，然后根据每个类别的期望精度找到两个不同的阈值。在图中，初级的阈值≥0.7，次级的阈值≥0.8(与初级分数≤0.2相同)，导致P_primary=2/2 =1.0，P_secondary=3/4=0.75，C=6/8=75%。</p><h1 id="3d1d" class="mc md iq bd me mf mg mh mi mj mk ml mm jw ow jx mo jz ox ka mq kc oy kd ms mt bi translated">多类分类</h1><p id="5ece" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">多类分类问题是当我们想要从“C”类中挑选一个作为标签时。通常情况下，所有的类都是感兴趣的。多类分类器可以以一对一的方式训练，这相当于为每个类学习一个分类器，或者作为单个联合分类器，例如使用softmax损失函数，其返回概率分布。与二进制一样，“分类精度”是人们可以选择来评估多类分类器的最简单的度量。分类准确度有两种变体—微观和宏观。微精度是每个实例的平均值，这意味着实例越多的类权重越高，因此对性能的贡献也越大。为了计算宏观精度，我们首先计算每个类的精度，然后平均它，确保每个类得到相同的权重。对于产品分类问题，如果您希望确保目录符合预期的性能，微精度是有意义的。如果您希望确保目录中的每个类别都是准确的，那么宏观准确性是有意义的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oz"><img src="../Images/a0cc72cf60400e080e069e485cd18762.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zMmuPsrztG3vJAzldgZ6WA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd og">图-5: </strong> 3类数据集a)具有地面真值的输入数据，b)所有三个类的输出分数，c) Max per-row和Max的对应索引作为预测标签。</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/8165695a8a5818392db4d34630c389a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:354/format:webp/1*Y-V4H4LXfSu_YXOuy2WVuw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd og">图-6: </strong>混乱矩阵</p></figure><p id="686e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，对于上面的玩具问题，微分类准确度是75%，这是6/8，因为总共8个标签中有6个标签匹配。使用图6所示的混淆矩阵可以最好地计算出每类的精度。一级精度= 3/4，二级精度= 1/2，三级精度= 2/2，宏观精度= (0.75 + 0.5 + 1)/3，顺便说一下，这本身就是75%。</p><h2 id="679c" class="nt md iq bd me nu nv dn mi nw nx dp mm lf ny nz mo lj oa ob mq ln oc od ms oe bi translated">精确覆盖(全局和每个类别)</h2><p id="dae2" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">多类分类问题的一个实用度量是能够以期望的精度对数据进行分类，并计算准确分类的目录百分比，即覆盖率。与微观和宏观精度一样，可以在目录级别计算精度(其中主导类将主导精度)，或者如果我们希望每个类都精确，我们可以选择选取一个阈值，使每个类都高于所需精度，然后计算coverage。这两个指标都是通过对最大分数进行排序来计算的。</p><div class="kg kh ki kj gt ab cb"><figure class="oj kk pb ol om on oo paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/5fd47bfcf0feac57fd397f374ab44c3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:458/format:webp/1*6jNYutA1N5wmDFcPt1Xn8g.png"/></div></figure><figure class="oj kk pc ol om on oo paragraph-image"><img src="../Images/25bda435692727a5aa7351643705433e.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*vRpwqSm_ErS7TCWLB1rIkA.png"/></figure><figure class="oj kk pd ol om on oo paragraph-image"><img src="../Images/1d2a54141da1b29cf4f60e43610ebc2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*SB1hw1ynz--1B-X-vyNVDQ.png"/><p class="kr ks gj gh gi kt ku bd b be z dk pe di pf ot translated"><strong class="bd og">图-7:【左】</strong>根据最高分排序的分数和标签，<strong class="bd og">中间</strong>玩具问题的精度-覆盖率图，<strong class="bd og">【右】</strong>不同阈值选择的精度和覆盖率。</p></figure></div><p id="c7bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于玩具问题，图7(左)显示了基于最高分的分数排名，(中)精度-覆盖率(PC)曲线，(右)不同阈值下的精度和覆盖率。需要阈值图来决定工作点。比方说，我们希望以95%的精度运行，查看PC图，我们可以看到覆盖率为55%(插值)。对应的阈值是‘0.7’，也就是说如果max评分≥0.7，我们就要把一个例子归类，其余的为‘无法归类或UTC’。这些图本身是插值的，对于这个玩具问题，我们只有8个例子。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/f64748c20e053db71c60a277e40a0c68.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/format:webp/1*DLz0b7JmXjAhwNx0hznROA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd og">图-8: </strong>每类精度覆盖率。</p></figure><p id="9688" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了计算每个类的阈值，我们将基于预测的类旋转输出，然后计算每个类的阈值，这样每个类都有95%的精度。这并不类似于图4中计算小学和中学精确覆盖率的另一种方法。对于玩具多类问题，这导致1类覆盖率(精度&gt; 95%)为3/3，2类覆盖率(精度&gt; 95%)为0/2，3类覆盖率(精度&gt; 95%)为2/2，覆盖率(精度&gt; 95%)=(3+0+2)/8 = 62.5%。覆盖范围的增加并不是因为我们对于等级3，我们可以承受一个更低的阈值0.4，根据玩具问题。在现实世界中，您可能希望每个类都有最小的计数，以确保健壮性。</p><h2 id="041c" class="nt md iq bd me nu nv dn mi nw nx dp mm lf ny nz mo lj oa ob mq ln oc od ms oe bi translated">精确召回率(每类)</h2><p id="ddc3" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">可以将C类多类分类器视为C个独立的二进制分类器，并报告每个二进制分类器的精确召回度量，将特定类视为主要类，将所有其他类视为次要类。</p><p id="f4df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">曾经可以使用混淆矩阵(图6)对PR进行点估计。对于每个类，正确分类到该类中的实例百分比是精度，检索到的实例百分比是召回率。例如，对于类-1，精度和召回率都是3/4 = 75%，类-2: P=1/2，R=1/2，类-3: P=2/2，R=2/2(同样，精度和召回率恰好相同)。为了计算整个PR曲线，输出矩阵的每一列都可以作为初级类的分数。遵循类似于二元PR曲线的方法，我们可以构建C条不同的PR曲线，每条曲线对应一个类别。</p><div class="kg kh ki kj gt ab cb"><figure class="oj kk ph ol om on oo paragraph-image"><img src="../Images/4c099973e8dd3dce14169f8902d97ca4.png" data-original-src="https://miro.medium.com/v2/resize:fit:454/format:webp/1*kzENsZhyeLAkPw4jCBMCwQ.png"/></figure><figure class="oj kk pi ol om on oo paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/dc829b81131ee2e5cf5d4f6423a6f016.png" data-original-src="https://miro.medium.com/v2/resize:fit:358/format:webp/1*MOHPb5vwKBlfH0l6hao5pw.png"/></div></figure><figure class="oj kk pj ol om on oo paragraph-image"><img src="../Images/a158844fc1610cc9f1310e2fe45654ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*Up_VcydRRvlsPNG8ei-45A.png"/><p class="kr ks gj gh gi kt ku bd b be z dk pk di pl ot translated"><strong class="bd og">图-9:[左] </strong>所有类的分数，<strong class="bd og">【中】</strong>基于类1分数的排序示例，<strong class="bd og">【右】</strong>所有类的精确召回曲线。</p></figure></div><p id="4305" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于上面的3类问题，图9(左)显示了所有类的分数。在中间，突出显示了基于第1类分数的排序示例，在右边，绘制了所有类的精确-召回曲线。</p><h1 id="3a2a" class="mc md iq bd me mf mg mh mi mj mk ml mm jw ow jx mo jz ox ka mq kc oy kd ms mt bi translated">多标签分类</h1><p id="37c9" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">在下一篇博客中。</p></div></div>    
</body>
</html>