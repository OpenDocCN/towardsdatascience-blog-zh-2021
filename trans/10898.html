<html>
<head>
<title>Discovering entity connections insights using Network Analytics (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用网络分析发现实体连接洞察(第2部分)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/discovering-entity-connections-insights-using-network-analytics-part-2-d445751413b3?source=collection_archive---------20-----------------------#2021-10-22">https://towardsdatascience.com/discovering-entity-connections-insights-using-network-analytics-part-2-d445751413b3?source=collection_archive---------20-----------------------#2021-10-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="844a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将关系数据转换为图形，使用NetworkX构建可视化</h2></div><p id="e497" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我在之前的文章中已经分享了网络分析的概念和可用性。这是一项用于<strong class="kk iu">分析实体之间关系的伟大技术</strong>，并且可以用于对欺诈检测、营销改进的社会影响和供应链设置等一些复杂问题进行建模。</p><p id="23a0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我将关注如何<strong class="kk iu">将这些概念</strong>应用到实际的数据集，并从中发现洞见。我将分享将你的关系数据转换成图表格式的步骤，将它可视化，并最终探索它。具体到图形可视化，我将使用<a class="ae le" href="https://networkx.org/" rel="noopener ugc nofollow" target="_blank"> NetworkX </a>，这是一个Python包，专门用于创建、操作和研究复杂网络的结构、动态和功能。</p><p id="0282" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个分析中使用的代码可以在<a class="ae le" href="https://github.com/oliviatan29/network_analysis" rel="noopener ugc nofollow" target="_blank">这个GitHub库</a>中找到。</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="2bd7" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated"><strong class="ak"> 1。预分析</strong></h1><h2 id="5fd6" class="me ln it bd lo mf mg dn ls mh mi dp lw kr mj mk ly kv ml mm ma kz mn mo mc mp bi translated">1.1问题陈述</h2><p id="cf05" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">与任何类型的数据分析一样，您首先要定义分析目标，您想要回答什么问题，或者您想要解决什么问题。在这篇分析中，我将探索印尼菜肴中各种配料的联系。</p><p id="3d20" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在印度尼西亚众多的T21美食中，我很想知道:</p><blockquote class="mw mx my"><p id="597c" class="ki kj mv kk b kl km ju kn ko kp jx kq mz ks kt ku na kw kx ky nb la lb lc ld im bi translated">印尼菜的关键配料/成分是什么？</p><p id="3971" class="ki kj mv kk b kl km ju kn ko kp jx kq mz ks kt ku na kw kx ky nb la lb lc ld im bi translated">哪些配料组合在一起效果很好(在许多菜肴中一起使用)？</p></blockquote><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi nc"><img src="../Images/d419cddb0bd37c7a635c5cbd3f58d423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bIP3vKiF45zATiZu"/></div></div><p class="no np gj gh gi nq nr bd b be z dk translated"><a class="ae le" href="https://unsplash.com/@baiqdaling?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">拜克达令</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h2 id="983a" class="me ln it bd lo mf mg dn ls mh mi dp lw kr mj mk ly kv ml mm ma kz mn mo mc mp bi translated">1.2数据准备</h2><p id="41e8" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">一旦问题清楚了，我就继续进行数据收集过程。为了回答上面的问题，我需要一个印度尼西亚菜肴及其所有配料的数据集。原始数据集是从<a class="ae le" href="https://www.wikidata.org/wiki/Wikidata:Main_Page" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">维基数据</strong> </a> <strong class="kk iu"> </strong> <a class="ae le" href="https://query.wikidata.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">查询服务</strong> </a>中检索的，针对原产地为<a class="ae le" href="https://commons.wikimedia.org/wiki/Category:Indonesia" rel="noopener ugc nofollow" target="_blank">印尼</a>的<a class="ae le" href="https://commons.wikimedia.org/wiki/Category:Food" rel="noopener ugc nofollow" target="_blank">食品</a>的所有实例。</p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi ns"><img src="../Images/fff1fa4da34ebdcbc2faafd27cf9977e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nZiquujprREQoae5I3mdPA.png"/></div></div><p class="no np gj gh gi nq nr bd b be z dk translated">从维基数据中检索到的表格(图片来自作者)</p></figure><p id="7014" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我做了一些<strong class="kk iu">数据清理</strong>来(1)转换具有科学名称的成分，以及(2)规范化类似的项目名称，如【矿泉水、饮用水和水】，因为它们指的是同一项目。我还做了一些<strong class="kk iu">数据丰富</strong>来分类配料项目，如水果、蔬菜、调味料、香料、碳水化合物、坚果、奶制品和鸡蛋、动物和植物蛋白。</p><h1 id="81c2" class="lm ln it bd lo lp nt lr ls lt nu lv lw jz nv ka ly kc nw kd ma kf nx kg mc md bi translated">2.转换数据</h1><p id="29c9" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">现在来看这篇文章的重点，即将我们上面收集的关系数据转换成图形/网络格式。</p><h2 id="c643" class="me ln it bd lo mf mg dn ls mh mi dp lw kr mj mk ly kv ml mm ma kz mn mo mc mp bi translated">2.1确定要建模的连接</h2><p id="7b99" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">在进入转换代码之前，首先我们需要确定图中要建模的连接。</p><blockquote class="mw mx my"><p id="9529" class="ki kj mv kk b kl km ju kn ko kp jx kq mz ks kt ku na kw kx ky nb la lb lc ld im bi translated">网络分析建模需要识别的关键点:(1)实体<strong class="kk iu"/>,( 2)实体间的<strong class="kk iu">连接</strong>,( 3)图类型,( 4)连接的<strong class="kk iu">属性</strong>(如果有的话)。</p></blockquote><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi ny"><img src="../Images/3154fa2c47f88e647d2ac79b3affbd84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XOSOnaJtxNpr4LbQ6tTOAw.png"/></div></div><p class="no np gj gh gi nq nr bd b be z dk translated">要建模的连接的图示(图片来自作者)</p></figure><p id="f3fe" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本例中，<strong class="kk iu">实体是一个项目配料</strong>，要建模的<strong class="kk iu">连接</strong>是印尼菜肴中的<strong class="kk iu">事件。这些实体具有item类型的属性，连接具有绑定它们的dish名称的属性。这里的图类型是一个<a class="ae le" href="https://mathinsight.org/definition/undirected_graph" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">无向图</strong> </a>，因为A项和B项之间的关系是相互的，没有发生联系的方向。</strong></p><h2 id="4b7d" class="me ln it bd lo mf mg dn ls mh mi dp lw kr mj mk ly kv ml mm ma kz mn mo mc mp bi translated">2.2创建连接列表</h2><p id="e3a9" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">现在，建模时间！</p><p id="bf8f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我<strong class="kk iu">列出了所有的连接</strong>(菜名)和要连接的实体(配料项目)，每个都在一条记录下。配料项目在这里由空格字符分隔。</p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/9f2855adbc0d511dfe29843ce5093fc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*nOekvGuT7MXUCtpsQ6T_Mg.png"/></div><p class="no np gj gh gi nq nr bd b be z dk translated">连接及其实体(图片来自作者)</p></figure><p id="2765" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我收集了列表中所有项目之间的<strong class="kk iu">共现，并以矩阵形式表示出来。它的工作方式是，对于每个<code class="fe oa ob oc od b">food_name</code>，我遍历相关的<code class="fe oa ob oc od b">ingredient_list</code>，并以矩阵格式列出它们的共现。</strong></p><p id="4a11" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以对于“阿顿-阿顿科罗”，我创建了{生姜和香料}、{生姜和椰奶}、{生姜和棕榈糖}、{香料和椰奶}、{香料和棕榈糖}、{椰奶和棕榈糖}之间的联系。对数据框中的所有食物/菜肴名称都这样做。对于现有项目之间的任何附加连接，该值将递增到矩阵中。</p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi oe"><img src="../Images/aff6fa48dc6aec15087f8e432dfd1d13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r1iNHjLZRPTaNB6-FUWzUw.png"/></div></div><p class="no np gj gh gi nq nr bd b be z dk translated">实体连接矩阵(图片来自作者)</p></figure><p id="6571" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">之后我把矩阵总结成了更简单的表格格式。在该表中，<strong class="kk iu">每一行代表我们拥有的每一条边</strong>，而<strong class="kk iu">代表相关的权重</strong>，在本例中，权重是配料对同时出现的次数。该边填充了一个连接了的<strong class="kk iu">节点元组，在本例中是项目配料。</strong></p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div class="gh gi of"><img src="../Images/82b1b39bfe783b109d79c4e8ff2f608f.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*S3N14zhyxTasy38JwplOug.png"/></div><p class="no np gj gh gi nq nr bd b be z dk translated">最终边缘列表和权重(图片来自作者)</p></figure><h1 id="17a3" class="lm ln it bd lo lp nt lr ls lt nu lv lw jz nv ka ly kc nw kd ma kf nx kg mc md bi translated">3.可视化和探索网络</h1><p id="9cd1" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">网络分析的优势在于图形的可视化，可用于轻松发现项目之间的关系。在这个分析中，我使用了<a class="ae le" href="https://networkx.org/" rel="noopener ugc nofollow" target="_blank"> NetworkX </a>包来创建、可视化和分析网络。</p><h2 id="1295" class="me ln it bd lo mf mg dn ls mh mi dp lw kr mj mk ly kv ml mm ma kz mn mo mc mp bi translated">3.1创建图表</h2><p id="4440" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">与任何数据可视化一样，您需要仔细选择要可视化的数据点。<em class="mv">可视化中有太多的数据会让你难以专注于关键的洞察</em>。对于这个分析，我试图找到印度尼西亚菜肴的关键成分，因此我只关注上面的100个边缘。</p><pre class="nd ne nf ng gt og od oh oi aw oj bi"><span id="636c" class="me ln it od b gy ok ol l om on">import networkx as nx</span><span id="d86b" class="me ln it od b gy oo ol l om on"># Create dictionary of edges and their weights<br/>d = df_compiled.head(100).set_index(‘bigram’).T.to_dict(‘records’)</span><span id="b462" class="me ln it od b gy oo ol l om on"># Create network plot <br/>G = nx.Graph()</span><span id="2e2c" class="me ln it od b gy oo ol l om on"># Create connections between nodes<br/>for k, v in d[0].items():<br/> G.add_edge(k[0], k[1], weight=(v * 10))</span></pre><p id="486c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是用来给网络添加边的字典<code class="fe oa ob oc od b">d</code>的截图。</p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div class="gh gi op"><img src="../Images/3682f20b8e8fcbc5f3439a95548aaee8.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*G-jyZ1pGN-b-PEAQp8xvBQ.png"/></div><p class="no np gj gh gi nq nr bd b be z dk translated">用于在NetworkX中向图中添加边的字典(图片来自作者)</p></figure><h2 id="699d" class="me ln it bd lo mf mg dn ls mh mi dp lw kr mj mk ly kv ml mm ma kz mn mo mc mp bi translated">3.2形象化图表</h2><p id="6d39" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">最后，可视化图表！</p><p id="655b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">NetworkX有多个<a class="ae le" href="https://networkx.org/documentation/stable/reference/drawing.html" rel="noopener ugc nofollow" target="_blank">绘图功能</a>，可以根据分析需要使用。在这个分析中，我使用的是NetworkX的<a class="ae le" href="https://networkx.org/documentation/stable/reference/generated/networkx.drawing.layout.spring_layout.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">弹簧布局</strong> </a>。spring布局使用<a class="ae le" href="https://en.wikipedia.org/wiki/Force-directed_graph_drawing" rel="noopener ugc nofollow" target="_blank"> Fruchterman-Reingold力定向算法</a>在图中定位节点，通俗地说就是<strong class="kk iu"> <em class="mv">排列节点，使边具有相似的长度和最小交叉边</em> </strong>，使其在视觉上更令人愉悦。</p><p id="ce49" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">其他一些布局类型包括<strong class="kk iu"> <em class="mv">随机布局</em> </strong>(节点在单位正方形内随机均匀定位)<strong class="kk iu"> <em class="mv">圆形布局</em> </strong>(节点在一个圆上)<strong class="kk iu"> <em class="mv">二分布局</em> </strong>(节点在两条直线上)<strong class="kk iu"> <em class="mv">光谱布局</em> </strong>(节点使用图的拉普拉斯特征向量定位)。其他绘图功能可以在这里<a class="ae le" href="https://networkx.org/documentation/stable/reference/drawing.html" rel="noopener ugc nofollow" target="_blank">探索。</a></p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/fdd0d64790ce48f2bf43dad61a07e63d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*2OBFq_3HUHgv5VMF.png"/></div><p class="no np gj gh gi nq nr bd b be z dk translated">NetworkX中的可视化布局示例(<em class="or">来源:NetworkX文档</em><a class="ae le" href="https://networkx.org/grave/latest/gallery/plot_layout.html" rel="noopener ugc nofollow" target="_blank"><em class="or">https://networkx.org/grave/latest/gallery/plot_layout.html</em></a>)</p></figure><p id="59f6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">底层的NetworkX可视化使用Matplotlib，因此我们可以使用Matplotlib函数来定义图表的图形大小并显示可视化。下面是NetworkX简单可视化的示例代码。</p><pre class="nd ne nf ng gt og od oh oi aw oj bi"><span id="2237" class="me ln it od b gy ok ol l om on">fig, ax = plt.subplots(figsize=(16, 12))</span><span id="2122" class="me ln it od b gy oo ol l om on">pos = nx.spring_layout(G, k=2)</span><span id="367f" class="me ln it od b gy oo ol l om on"># Plot networks<br/>nx.draw_networkx(G, pos,<br/>                 font_size=8,<br/>                 width=3,<br/>                 edge_color='grey',<br/>                 node_color='#00b4d9',<br/>                 with_labels = True,<br/>                 ax=ax)</span><span id="fa06" class="me ln it od b gy oo ol l om on">plt.show()</span></pre><p id="61a3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们得到了我们的第一次可视化！</p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi os"><img src="../Images/8cb8623322bbd60ef7ce2678678fdd07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iZNchHeda99GRCyYDYW87g.png"/></div></div><p class="no np gj gh gi nq nr bd b be z dk translated">网络可视化——印尼菜肴的配料(图片来自作者)</p></figure><h2 id="424a" class="me ln it bd lo mf mg dn ls mh mi dp lw kr mj mk ly kv ml mm ma kz mn mo mc mp bi translated">3.3修改可视化效果</h2><p id="5b01" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">我们可以保留上面的可视化，但是我们为什么不把它做得更好，以便于分析呢？</p><p id="d788" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可以在这里进行一些定制:</p><ul class=""><li id="b885" class="ot ou it kk b kl km ko kp kr ov kv ow kz ox ld oy oz pa pb bi translated">改变<strong class="kk iu">节点尺寸</strong>。我们可以根据节点度(它所连接的边的数量)来修改节点的大小。</li><li id="7f6c" class="ot ou it kk b kl pc ko pd kr pe kv pf kz pg ld oy oz pa pb bi translated">改变<strong class="kk iu">节点的颜色</strong>。我们有一个配料类别(即碳水化合物、水果、蔬菜、香料等)，这是之前确定的。我们可以根据这个类别给节点着色，这样我们就可以很容易地检查来自同一个类别的项目是否紧密相连。</li></ul><pre class="nd ne nf ng gt og od oh oi aw oj bi"><span id="20a1" class="me ln it od b gy ok ol l om on">import matplotlib</span><span id="5f93" class="me ln it od b gy oo ol l om on"># Create network plot <br/>G_mod = nx.Graph()</span><span id="998c" class="me ln it od b gy oo ol l om on"># Create connections between nodes<br/>for k, v in d[0].items():<br/>    G_mod.add_edge(k[0], k[1], weight=(v * 10))</span><span id="dab5" class="me ln it od b gy oo ol l om on"># Get the dataframe of ingredient name and it's category    <br/>carac = pd.DataFrame()<br/>carac = total_ingredient[['ingredient_name','ingredient_category']]</span><span id="1e8e" class="me ln it od b gy oo ol l om on"># Reindex the dataframe to align with graph's nodes<br/>carac = carac.set_index('ingredient_name')<br/>carac = carac.reindex(G_mod.nodes())</span><span id="3ac5" class="me ln it od b gy oo ol l om on">carac['ingredient_category'] = pd.Categorical(carac['ingredient_category'])<br/>carac['ingredient_category'].cat.codes</span><span id="fd89" class="me ln it od b gy oo ol l om on"># Specify colors, number of colors listed should align with the number of categories<br/>cmap = matplotlib.colors.ListedColormap(['C0', 'darkorange', 'lightgreen', 'lightyellow', 'darkgreen', 'darkblue', 'purple', 'red', 'pink', 'brown'])</span><span id="82ad" class="me ln it od b gy oo ol l om on"># Get node degree in a dict for node size parameter<br/>d = dict(G.degree)</span><span id="799d" class="me ln it od b gy oo ol l om on"># Draw graph<br/>fig, ax = plt.subplots(figsize=(16, 12))</span><span id="244e" class="me ln it od b gy oo ol l om on">pos = nx.spring_layout(G, k=2)</span><span id="4579" class="me ln it od b gy oo ol l om on">nx.draw(G, pos,<br/>        font_size=10,<br/>        width=1,<br/>        edge_color='grey',<br/>        node_color=carac['ingredient_category'].cat.codes, <br/>        cmap=cmap,<br/>        with_labels = True, <br/>        nodelist=d.keys(), <br/>        node_size=[v * 12 for v in d.values()])<br/>plt.show()</span></pre><p id="ae81" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">瞧啊。我们的可视化在这里！</p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi os"><img src="../Images/82209e561d9afefe841561e269972d84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mE83AHIisDszN2uE-v90ww.png"/></div></div><p class="no np gj gh gi nq nr bd b be z dk translated">网络可视化——印尼菜肴的配料(图片来自作者)</p></figure><h2 id="9d15" class="me ln it bd lo mf mg dn ls mh mi dp lw kr mj mk ly kv ml mm ma kz mn mo mc mp bi translated">3.4分析图表</h2><p id="3374" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">从图中我们可以看到<strong class="kk iu">椰奶</strong>位于图 的<strong class="kk iu"> <em class="mv">中心，具有相当大的节点大小和相当高的边连通数。但是是吗？</em></strong></p><p id="2648" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">NetworkX也有一些分析功能来帮助我们获得每个节点的<strong class="kk iu"> <em class="mv">中心度</em> </strong>值，我们可以用它来回答这个问题。</p><pre class="nd ne nf ng gt og od oh oi aw oj bi"><span id="9e31" class="me ln it od b gy ok ol l om on"># Compute the degree centralities of G: deg_cent<br/>deg_cent = nx.degree_centrality(G)</span><span id="7e6a" class="me ln it od b gy oo ol l om on"># Compute the maximum degree centrality: max_dc<br/>max_dc = max(deg_cent.values())</span><span id="5892" class="me ln it od b gy oo ol l om on"># Find the item(s) that have highest co-occurrence: prolific_collaborators<br/>prolific_collaborators = [n for n, dc in deg_cent.items() if dc == max_dc]</span></pre><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi ph"><img src="../Images/9cb309452c8d3d85b1fda2fc93a7269c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3RvUdokDV-sxywhhAgoQNQ.png"/></div></div></figure><p id="6ff1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">事实证明，是的，椰奶是同现率最高的项目！仔细想想，它在印尼菜肴中被广泛使用。从像<em class="mv"> Soto ayam </em>这样的浓汤菜到像<em class="mv"> Nasi uduk </em>这样的正餐以及像B <em class="mv"> ubur ketan hitam </em>这样的甜点——它们的配料中都有椰奶！</p><p id="b2dc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还可以使用NetworkX来查找网络中的组。在这里，我们用<a class="ae le" href="https://networkx.org/documentation/stable/reference/algorithms/clique.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> <em class="mv">嫡系</em> </strong> </a>函数来表示它。看起来很简单，我们可以使用下面的命令列出派系。</p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi pi"><img src="../Images/71ce69bb7935324080cdd3ca7348070a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uXh-wE5DvYHu9LW5jzliEw.png"/></div></div></figure><p id="5d7f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还可以识别一些感兴趣的项目，并具体放大它，找出该项目的联系。</p><pre class="nd ne nf ng gt og od oh oi aw oj bi"><span id="8e7e" class="me ln it od b gy ok ol l om on"># Define get_nodes_and_nbrs()<br/>def get_nodes_and_nbrs(G, nodes_of_interest):<br/>    """<br/>    Returns a subgraph of the graph `G` with only the `nodes_of_interest` and their neighbors.<br/>    """<br/>    nodes_to_draw = []</span><span id="14f3" class="me ln it od b gy oo ol l om on"># Iterate over the nodes of interest<br/>    for n in nodes_of_interest:</span><span id="8992" class="me ln it od b gy oo ol l om on"># Append the nodes of interest to nodes_to_draw<br/>        nodes_to_draw.append(n)</span><span id="f5ab" class="me ln it od b gy oo ol l om on"># Iterate over all the neighbors of node n<br/>        for nbr in G.neighbors(n):</span><span id="3b6e" class="me ln it od b gy oo ol l om on"># Append the neighbors of n to nodes_to_draw<br/>            nodes_to_draw.append(nbr)</span><span id="8c08" class="me ln it od b gy oo ol l om on">return G.subgraph(nodes_to_draw)</span><span id="0f24" class="me ln it od b gy oo ol l om on"># Extract the subgraph with the nodes of interest: T_draw<br/>T_draw = get_nodes_and_nbrs(G, ['coconut_milk'])</span><span id="90fa" class="me ln it od b gy oo ol l om on"># Draw the subgraph to the screen<br/>nx.draw(T_draw, with_labels=True)<br/>plt.show()</span></pre><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi pj"><img src="../Images/8080b69bceda155848186b291c9ca155.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZBKO2swFPtUynooHdmLMRw.png"/></div></div><p class="no np gj gh gi nq nr bd b be z dk translated">子图可视化</p></figure><p id="859e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">查看上面的可视化和探索NetworkX函数，我们可以很容易地找到所定义的问题陈述的答案。</p><p id="d57f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">印度尼西亚菜肴的主要配料包括<strong class="kk iu">椰奶</strong>，盐和糖等调料，还有蒜、葱、姜和辣椒等香料。使用的顶级蛋白质包括<strong class="kk iu">鸡蛋</strong>、<strong class="kk iu">豆腐</strong>、<strong class="kk iu">鸡肉</strong>。</p><p id="d925" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以通过研究通常提到的派系来找到能够很好地协同工作的成分。在这种情况下，我们找到<strong class="kk iu">盐和糖</strong>(显然！);c <strong class="kk iu">椰子奶，和米粉</strong>(印尼kuehs常用)。</p><p id="e8fc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">很有帮助，不是吗？</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="b189" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">结论</h1><p id="d3ed" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">这就总结了网络分析在探索印度尼西亚菜肴中的配料方面的应用。正如我在<a class="ae le" rel="noopener" target="_blank" href="/discovering-entity-connections-insights-using-network-analytics-e321e8b21318">上一篇文章</a>中提到的，网络分析有许多方法可以用于其他用例，从欺诈检测到营销改进和供应链设置。</p><p id="08bc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你渴望了解更多关于网络分析的知识，你可以探索这些资源——这也是我学习的地方:)</p><ul class=""><li id="7dc7" class="ot ou it kk b kl km ko kp kr ov kv ow kz ox ld oy oz pa pb bi translated"><a class="ae le" href="https://networkx.org/documentation/stable/tutorial.html" rel="noopener ugc nofollow" target="_blank"> NetworkX教程</a></li><li id="0ae9" class="ot ou it kk b kl pc ko pd kr pe kv pf kz pg ld oy oz pa pb bi translated"><a class="ae le" href="https://www.datacamp.com/courses/network-analysis-in-python-part-1" rel="noopener ugc nofollow" target="_blank">数据营课程</a></li><li id="46fa" class="ot ou it kk b kl pc ko pd kr pe kv pf kz pg ld oy oz pa pb bi translated"><a class="ae le" href="https://www.analyticsvidhya.com/blog/2018/04/introduction-to-graph-theory-network-analysis-python-codes/" rel="noopener ugc nofollow" target="_blank">分析Vidhya </a></li></ul><p id="d27d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">快乐学习探索！</p></div></div>    
</body>
</html>