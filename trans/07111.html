<html>
<head>
<title>Interactive data analysis with dropdown menu Ipywidgets and Plotly in Jupyter Notebook.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Jupyter笔记本中使用下拉菜单Ipywidgets和Plotly进行交互式数据分析。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/interactive-data-analysis-with-dropdown-menu-ipywidgets-and-plotly-in-jupyter-notebook-591a84a81b22?source=collection_archive---------3-----------------------#2021-06-28">https://towardsdatascience.com/interactive-data-analysis-with-dropdown-menu-ipywidgets-and-plotly-in-jupyter-notebook-591a84a81b22?source=collection_archive---------3-----------------------#2021-06-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9b4b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">这是一个例子，展示了如何设置一个交互式下拉菜单小部件，以及如何使用IPython和Pandas在Jupyter Notebook中显示数据库分析的结果。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/53fb4087a2ee6845878ff75fea29c9c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kVDrD76AC3dk7LmSD8Tr7w.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片:拉森火山国家公园。</p></figure><h2 id="10d2" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">挑战</h2><p id="19cc" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">最近，在为我的一个研究生班做项目时，我面临着这样一个问题:对我在Jupyter笔记本上处理的多个数据集进行数据库分析的最佳方式是什么。这些数据库中的每一个都包含了多年来收集的信息，并且对于该特定数据库中询问的每个不同问题都有多个分层级别，例如性别和种族。此外，每个数据库都有国家汇编的信息。例如，每次您想要查看不同州的数据或按种族或性别查看数据时，都必须修改代码并重新运行每个单元格，这既麻烦又低效。这个问题的解决方案在于<a class="ae mk" href="https://ipywidgets.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> ipywidgets。</a> Ipywidgets是用于Jupyter笔记本和IPython内核的交互式HTML小部件。它们使用户能够以快速、简单和有效的方式与数据交互并可视化数据中的变化。</p><p id="39ad" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">在本文中，我将展示如何设置交互式下拉菜单小部件，以“阿尔茨海默氏病和健康老化数据”CDC数据库为例进行简单的数据分析。3下拉菜单部件将建立一个用户友好的菜单，在这里可以选择一个国家，一个分层水平(性别，种族或整体)和一个问题，用户希望看到的信息。我将使用Plotly这个交互式图形库来显示存储在数据库中的信息的图形表示。</p><p id="0956" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">本文使用的csv文件可在<a class="ae mk" href="https://chronicdata.cdc.gov/Healthy-Aging/Alzheimer-s-Disease-and-Healthy-Aging-Data/hfr9-rurv" rel="noopener ugc nofollow" target="_blank"> CDC网站</a>上公开下载。</p><h2 id="2d81" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">首先，让我们导入所有需要的库和扩展:</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><h2 id="d3ca" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">其次，让我们准备好要处理的cvs文件:</h2><ul class=""><li id="46a0" class="ms mt iq lt b lu lv lx ly le mu li mv lm mw mj mx my mz na bi translated">为了简化输出，我们将只查看数据集中评估的以下5个问题:</li></ul><ol class=""><li id="73b6" class="ms mt iq lt b lu ml lx mm le nb li nc lm nd mj ne my mz na bi translated">身体质量指数(身体质量指数)为30或以上的肥胖老年人的百分比。</li><li id="215d" class="ms mt iq lt b lu nf lx ng le nh li ni lm nj mj ne my mz na bi translated">在过去的一个月中没有任何闲暇时间体育活动的老年人的百分比。</li><li id="978b" class="ms mt iq lt b lu nf lx ng le nh li ni lm nj mj ne my mz na bi translated">终生被诊断患有抑郁症的老年人的百分比。</li><li id="bdf5" class="ms mt iq lt b lu nf lx ng le nh li ni lm nj mj ne my mz na bi translated">被告知患有高血压的老年人中目前正在服药治疗高血压的比例。</li><li id="18fb" class="ms mt iq lt b lu nf lx ng le nh li ni lm nj mj ne my mz na bi translated">每天吃3种或3种以上蔬菜的老年人百分比。</li></ol><ul class=""><li id="9209" class="ms mt iq lt b lu ml lx mm le nb li nc lm nd mj mx my mz na bi translated">不需要的列将被删除。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl nk"><img src="../Images/55a63ce0733b037f125b20e00b43e06c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*vcrumVlCDIa6ofSGPaq2mQ.png"/></div></figure><h2 id="dcd9" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">现在，让我们设置存储在“阿尔茨海默氏病和健康老化数据”数据库中的信息的图形表示所需的所有函数:</h2><ul class=""><li id="4625" class="ms mt iq lt b lu lv lx ly le mu li mv lm mw mj mx my mz na bi translated">为了简化输出，我们将只关注所有年龄组的数据点。</li><li id="0735" class="ms mt iq lt b lu nf lx ng le nh li ni lm nj mj mx my mz na bi translated">将只分析2015年至2019年的可用数据。</li></ul><p id="6969" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">函数plot_healthy_aging_data_gender采用2个字母的状态缩写，3个数据帧，其中包含制作Plotly图形和一个问题所需的信息。如果用户在dropdown小部件中指定他们希望看到按性别绘制的数据，将选择该功能。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="3486" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">函数plot_healthy_aging_data_race采用2个字母的状态缩写，3个数据帧，其中包含制作Plotly图形和一个问题所需的信息。如果用户在dropdown小部件中指定他们希望看到按种族绘制的数据，将选择此功能。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="2543" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">函数plot _ healthy _ aging _ data _ overall采用2个字母的状态缩写，3个数据帧，其中包含制作Plotly图形和一个问题所需的信息。如果用户在dropdown小部件中指定他们希望查看按总体分层类别绘制的数据，将选择此功能。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="bfff" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">函数dataset _ analysis _ aging查询原始数据集，根据种族、性别或整体(所有种族、性别和年龄)分层类别将结果划分为3个不同的数据框架。该功能旨在用户选择输入后，提取制作曲线图所需的信息。</p><p id="07e3" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">如前所述，为了简化输出，我们将只关注所有年龄组的数据点，这些数据点在数据集的“分层1”列中标记为整体。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="d4b3" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">函数dataset_analysis_aging_gender、dataset_analysis_aging_race和dataset_analysis_aging _ race是帮助函数，用于将州、问题和分层类别(性别、种族或总体)的数据集信息传递给dataset _ analysis _ aging函数。然后将返回的数据帧传递给相应的分层类别绘图函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="bd19" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">现在，我们准备设置3个下拉菜单小部件，用于“阿尔茨海默氏病和健康老化数据”数据库的数据分析。这将通过编写一个函数来完成，该函数创建一个下拉菜单来选择特定的状态、问题和分层类别，并将这些信息传递到数据集分析函数中以获得特定的输出。</p><p id="fecf" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">函数drop down _ menu _ widget _ healthy _ ageing接受一个与健康老龄化相关的数据集，以及3个帮助函数和一个要查询的问题列表。每个助手功能用于控制UI界面，以选择特定的状态、问题和分层，即性别、种族或总体数据。</p><p id="f111" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">该功能首先返回下拉菜单以选择要分析的状态、问题和分层类别，并且在用户选择输入之后，该功能基于所做的下拉菜单选择返回数据分析。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="07c0" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">最后，我们准备调用交互式drop down _ menu _ widget _ healthy _ age函数。在初始输入选择后，用户可以继续改变菜单中的输入，以查看不同输入的图形输出，而无需重新运行任何单元。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="07c6" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">在Jupyter笔记本中运行上面的单元格后，会出现下面显示的下拉菜单。现在可以选择下拉菜单来显示相应的曲线图。下拉菜单演示可以在文章末尾找到。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/d31cfc8048137daaefaf8d086c408ab7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H-RiADsjOvI3wB1RTVDCcQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/e47da338d883a23d31c41a7b3ec410eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mSTuIvF7FVPwesxbx90PTw.png"/></div></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn mr l"/></div></figure><p id="13e1" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">本文使用的Jupyter笔记本和数据集可以在GitHub找到:<a class="ae mk" href="https://github.com/drozenshteyn/Jupyter_widgets_dropdown" rel="noopener ugc nofollow" target="_blank">https://github.com/drozenshteyn/Jupyter_widgets_dropdown</a></p><p id="636d" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">感谢您的阅读，</p><p id="4d58" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">月形蝴蝶</p><p id="ab02" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">注:我使用了<a class="ae mk" href="https://www.dexplo.org/jupyter_to_medium" rel="noopener ugc nofollow" target="_blank"> jupyter_to_medium </a>和GitHub embeds的组合来发布这篇文章。</p></div></div>    
</body>
</html>