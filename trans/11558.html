<html>
<head>
<title>Understanding Consumer Behavior With The Market Basket Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用购物篮分析理解消费者行为</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/understanding-consumer-behavior-with-the-market-basket-analysis-3d0c017e5613?source=collection_archive---------15-----------------------#2021-11-15">https://towardsdatascience.com/understanding-consumer-behavior-with-the-market-basket-analysis-3d0c017e5613?source=collection_archive---------15-----------------------#2021-11-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0083" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解用于优化零售和电子商务行业销售的数据挖掘技术</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/aa9cb4c092cc2b921e2d2aaf881db9a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*isCO9dvlqzqSaB5b"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塔曼娜·茹米在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="d696" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">预测客户的兴趣是许多商业模式中采用的策略。公司在各种策略上进行了大量投资，从进行客户调查到建立复杂的机器学习模型以更好地了解客户行为。</p><p id="52e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用的一个比较突出的方法是<strong class="ky ir">市场篮子分析</strong>，这是一种数据挖掘技术，可以识别表现出强关系的产品。</p><p id="a7b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这项研究可以识别出表面上看不出来的高相关性产品。这是一个重要的工具，因为知道哪些产品有利于购买其他产品可以使企业以更大的成功率推广和推荐商品。</p><p id="0375" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，我们将涵盖市场篮子分析的来龙去脉。</p><h1 id="4164" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">市场篮子分析</h1><p id="33a5" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">购物篮分析是关联规则挖掘的一种形式，它发现具有强关联或相关性的项目。</p><p id="4bc3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在解释购物篮分析之前，重要的是要涵盖一些关键术语。</p><p id="4d59" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在一个事务中购买的一组项目被称为一个<strong class="ky ir">项目集</strong>。</p><p id="4e93" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个<strong class="ky ir">关联规则</strong>本质上是一个 if-then 语句，旨在建立所购买商品之间的关系。</p><p id="cea5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设你正在网上寻找一部新手机。将手机放入购物车后，您决定也要买一个手机壳。您将手机壳添加到购物车中并进行购买。</p><p id="6d35" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这种情况下，项目集是{Phone，Phone Case}。</p><p id="0931" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此项集的关联规则是:if {Phone}，then {Phone Case}。</p><p id="2316" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">项目集中的乘积可以分为两组:前因和后果。</p><p id="1190" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">前件</strong>指的是位于关联规则左侧的产品。</p><p id="4a5f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">结果</strong>是指位于关联规则右侧的产品。</p><p id="6096" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个例子中，先行词是电话，而结果词是手机壳。</p><p id="e345" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">购物篮分析需要找到表现出最强关联的项目集。</p><p id="22ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">也就是说，通过识别和评估项目的所有组合来找到最显著的项目集是困难的，因为它提出了两个问题。</p><h2 id="d170" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated"><strong class="ak">问题#1 </strong>:单从表面价值来看，我们无法区分最显著的项目集。</h2><p id="2477" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">有了上面的例子，购买手机和购买手机壳有很强的相关性就说得通了。但是，如何评价表面上没有那么直接联系的物品呢？</p><p id="a0de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">幸运的是，有一些评估指标可以帮助定量地衡量前因和后果之间的联系。</p><p id="59bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> support </strong>度量测量项目集的频率。换句话说，它将告诉您购买项目集中的产品的频率。</p><p id="dde9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">支持度量的公式为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/b288cddcf6fc7f8ba5eadd165af55f23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*WHNjPB0GkVql4nw6VUO_sg.png"/></div></figure><p id="ad26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">置信度</strong>衡量的是在购买了前因的情况下，购买后果的可能性。</p><p id="ed4d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">置信度度量的公式为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/cd8f17d3c7be34d1e70b8440d23d76b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*CYMfVRNTSIyjxmxZabmThw.png"/></div></figure><p id="c0d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">提升</strong>指标衡量购买前因对购买后果的影响。</p><p id="b044" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">提升度量的公式为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/b12def62b250b3615bb7348c3907377f.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*5-a1BUUqTm9K4E6QLFXNdQ.png"/></div></figure><p id="2487" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果关联的提升为 1，那么前件和后件的购买是独立的。</p><p id="b7dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果一个关联的提升大于 1，购买前因会增加购买后果的可能性。</p><p id="564c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果一个关联的提升值小于 1，购买前因会降低购买后果的可能性。</p><p id="ffcc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过这些评估指标，我们可以筛选出不符合标准的产品组合。</p><h2 id="a584" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated">问题<strong class="ak"> #2 </strong>:考虑到项目集组合的总数，我们无法处理所有的项目集。</h2><p id="5fef" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">简单来说，测试和评估每一个可能的唯一项集是不合理的。</p><p id="5b9e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">客观地说，如果你有 1000 种不同的产品，那么在寻找最佳关联规则时，你需要考虑 499，500 种不同的两种商品的组合。任何大小组合的总数都超过了海滩上沙粒的数量。</p><p id="b302" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">谢天谢地，有一个简单的方法可以绕过这个问题。</p><p id="e5f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">apriori 算法是一种有效的替代方法，可以帮助识别频繁项集，同时过滤掉不频繁的项集。它可以不考虑项目集，而不必对它们进行评估。本文不会涉及 apriori 算法的内部工作原理，但是如果你感兴趣，你可以在这里了解更多。</p><h1 id="2d23" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">缺点</h1><p id="6a8c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">尽管购物篮分析是一种非常有用的数据挖掘技术，但它绝不是对消费者行为的可靠研究。</p><p id="865b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，即使产品之间的关联显示出有希望的评价指标，它也不能直接证明产品之间的因果关系。毕竟，相关性不等于因果关系。</p><p id="204c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其次，像任何数据挖掘技术一样，购物篮分析容易出错。它可能会错误地忽略重要的关联或错误地包含不重要的关联。</p><p id="3457" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在你进行分析的时候，记住这些缺点，以免你从你的发现中得出错误的结论。</p><h1 id="22a6" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">个案研究</h1><p id="bef5" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们可以通过对一个存储电子商务购买的数据集(无版权保护)进行研究来演示市场购物篮分析，该数据集可以在这里访问。</p><p id="a7db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是数据集的预览。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/47c39e9158f6f64f8e7e96f7691c6177.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*9AM1jOyYQo6bkH1FktWOWw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">代码输出(由作者创建)</p></figure><p id="3145" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们只对每位顾客购买的商品感兴趣，这在“子类别”栏中有提及。让我们将这个列转换成一个列表的列表，每个列表代表一个项集。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/4dad25530b78b61c0e263849ed7d8435.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DK_8DxF20inWLlhYoASphg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">代码输出(由作者创建)</p></figure><p id="d36e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">执行市场篮分析需要计算每个项目集中关联的支持度、置信度和提升度量，如果手动执行，可能会非常耗时。谢天谢地，Python 中的<a class="ae kv" href="https://rasbt.github.io/mlxtend/" rel="noopener ugc nofollow" target="_blank"> mlxtend </a>模块允许我们轻松地执行这样的操作。</p><p id="799b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们有了项目集列表，我们必须使用 apriori 算法来删除不常用的项目集。这样做需要对数据进行一次热编码。</p><p id="51a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">mlxtend 模块有自己的编码器，可以对项集进行一次性热编码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/8d0442d3c3cd101051370d8e469fa599.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xV92yFVn8BIoyiO8T-xBqg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">代码输出(由作者创建)</p></figure><p id="e98e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用 mlxtend 模块，我们可以使用 apriori 算法来识别支持值大于或等于 0.1 的项集。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/a53e4ba53374ccdd8745183f016c551e.png" data-original-src="https://miro.medium.com/v2/resize:fit:618/format:webp/1*afDsVEy2HMrCCdYg0feyvQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">代码输出(由作者创建)</p></figure><p id="33ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为目标是识别具有强关系的产品，所以我们将使用 association_rules 函数来查找关联类型符合要求的产品。</p><p id="fc83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这种情况下，如果一个项集中的提升值超过 1，我们将认为该关联是理想的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/c191c3e52616e507a5ab3de5576bfd9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ndu4hpD2XGa8Qo-VxHtNaw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">代码输出(由作者创建)</p></figure><p id="e85a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据结果，有手帕和披肩的项目集具有最高的提升值。值得探究的是，为什么购买手帕会增加购买披肩的可能性，反之亦然。</p><p id="30eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请记住，这项研究只证实了这两个项目之间的强相关性，而不是因果关系。</p><p id="b041" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从这一分析中得出的一个误导是，向购买披肩的人积极推销手帕是最理想的。只有在进一步探索这两个项目之间的潜在关系后，才能得出这样的结论。</p><h1 id="49b2" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/e8e18acf17111d3cef86bdcf92df22ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DyoyGN0V2k9_qnYB"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@prateekkatyal?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">普拉蒂克·卡蒂亚尔</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="cf0e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">能够理解消费者的行为几乎就像是一种超能力。</p><p id="4248" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是为什么购物篮分析作为一种技术脱颖而出，在寻找客户购买的模式和趋势时可以依赖。</p><p id="2379" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这种分析本身似乎很简单，但它是产品推荐和促销系统基础的一部分，服务行业在未来许多年都将依赖这种系统。</p><p id="e66d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我祝你在数据科学的努力中好运！</p><h1 id="de5c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">参考</h1><ol class=""><li id="0a60" class="nm nn iq ky b kz mk lc ml lf no lj np ln nq lr nr ns nt nu bi translated">罗山，B. (2019)。电子商务数据，第 2 版。于 2021 年 11 月 12 日从 https://www.kaggle.com/benroshan/ecommerce-data.取回</li></ol></div></div>    
</body>
</html>