<html>
<head>
<title>Have you ever thought about using Python virtualenv?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有没有想过用Python virtualenv？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/have-you-ever-thought-about-using-python-virtualenv-fc419d8b0785?source=collection_archive---------18-----------------------#2021-06-26">https://towardsdatascience.com/have-you-ever-thought-about-using-python-virtualenv-fc419d8b0785?source=collection_archive---------18-----------------------#2021-06-26</a></blockquote><div><div class="fc ik il im in io"/><div class="ip iq ir is it"><h2 id="bbe6" class="iu iv iw bd b dl ix iy iz ja jb jc dk jd translated" aria-label="kicker paragraph">环境设置</h2><div class=""/><div class=""><h2 id="8959" class="pw-subtitle-paragraph kc jf iw bd b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dk translated">在终端和Jupyter笔记本上安装和使用Python virtualenv的实用指南。</h2></div><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj ku"><img src="../Images/0852648f7fe7d0a9762cc6f68729f96e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*epCY5DTve9Z6F9Da14EVhw.jpeg"/></div></div><p class="lg lh gk gi gj li lj bd b be z dk translated">图片来自<a class="ae lk" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=995187" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae lk" href="https://pixabay.com/users/klimkin-1298145/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=995187" rel="noopener ugc nofollow" target="_blank"> klimkin </a></p></figure><p id="02d9" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">通常，一个初学者开始在主Python环境中安装所有需要的库。随着项目数量的增长，安装的库也在增长。在不同的项目中，可能会发生库冲突。</p><p id="ce16" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">例如，可能会发生<em class="mh">两个不同的项目需要同一个库的两个不同版本</em>，所以在单个Python环境中，不能安装同一个库的两个版本。</p><p id="fb56" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated"><strong class="ln jg">如何解决这个问题？Virtualenv可能会有所帮助。</strong></p><p id="1dee" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">Python virtualenv是一个独立的Python环境，您可以在其中仅安装项目所需的包。</p><h1 id="0286" class="mi mj iw bd mk ml mm mn mo mp mq mr ms kl mt km mu ko mv kp mw kr mx ks my mz bi translated">安装和运行虚拟环境</h1><p id="1211" class="pw-post-body-paragraph ll lm iw ln b lo na kg lq lr nb kj lt lu nc lw lx ly nd ma mb mc ne me mf mg ip bi translated">首先，你需要安装<code class="fe nf ng nh ni b">virtualenv</code>包。例如，这可以通过以下命令在<code class="fe nf ng nh ni b">pip</code>中完成:</p><pre class="kv kw kx ky gu nj ni nk nl aw nm bi"><span id="e9e1" class="nn mj iw ni b gz no np l nq nr">pip install virtualenv</span></pre><p id="98f7" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">然后，<strong class="ln jg">您可以创建一个目录，在那里您将存储所有的虚拟环境</strong>。一旦创建了目录，您就可以访问它，并且只需运行以下命令就可以创建虚拟env</p><pre class="kv kw kx ky gu nj ni nk nl aw nm bi"><span id="a992" class="nn mj iw ni b gz no np l nq nr">virtualenv my_virtual_env</span></pre><p id="fb23" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">其中<code class="fe nf ng nh ni b">my_virtual_env</code>可以是你想要的任何名字。通常，新的虚拟env是干净的，因为它不包含任何全局库。</p><p id="7383" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">您可以通过终端激活您的虚拟环境，只需进入虚拟环境目录并运行<code class="fe nf ng nh ni b">source</code>命令:</p><pre class="kv kw kx ky gu nj ni nk nl aw nm bi"><span id="6f9c" class="nn mj iw ni b gz no np l nq nr">cd my_virtual_env<br/>source bin/activate</span></pre><p id="6169" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">现在你的虚拟环境是活跃的。您可以在终端行的左侧看到虚拟环境名称，如下所示:</p><pre class="kv kw kx ky gu nj ni nk nl aw nm bi"><span id="a9aa" class="nn mj iw ni b gz no np l nq nr">(my_virtual_env) my_pc:</span></pre><p id="5862" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">一个非常有用的功能是列出虚拟环境的所有库:</p><pre class="kv kw kx ky gu nj ni nk nl aw nm bi"><span id="b09b" class="nn mj iw ni b gz no np l nq nr">pip list --local</span></pre><p id="ef75" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">所有已安装库的列表也允许快速<strong class="ln jg">写下项目</strong>所需的库。</p><p id="fc58" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">要退出(停用)虚拟env，只需运行以下命令:</p><pre class="kv kw kx ky gu nj ni nk nl aw nm bi"><span id="ee44" class="nn mj iw ni b gz no np l nq nr">deactivate</span></pre><h1 id="a98e" class="mi mj iw bd mk ml mm mn mo mp mq mr ms kl mt km mu ko mv kp mw kr mx ks my mz bi translated">从Jupyter笔记本运行虚拟环境</h1><p id="aae2" class="pw-post-body-paragraph ll lm iw ln b lo na kg lq lr nb kj lt lu nc lw lx ly nd ma mb mc ne me mf mg ip bi translated">虚拟env也可以在Jupyter中使用。首先，您需要在您的虚拟环境中安装<code class="fe nf ng nh ni b">ipykernel</code>。因此，您激活您的虚拟env，然后从您的虚拟env运行以下命令:</p><pre class="kv kw kx ky gu nj ni nk nl aw nm bi"><span id="e9ca" class="nn mj iw ni b gz no np l nq nr">pip install ipykernel</span></pre><p id="5430" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">现在您可以告诉Jupyter在哪里可以找到虚拟env。通过指定要连接到Jupyter的虚拟env的名称，运行以下命令:</p><pre class="kv kw kx ky gu nj ni nk nl aw nm bi"><span id="d0a7" class="nn mj iw ni b gz no np l nq nr">python -m ipykernel install --name=my_virtual_env </span></pre><p id="2fb6" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">您可以运行Jupyter服务器，当您选择New时，您会看到虚拟env的名称出现，如下图所示:</p><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div class="gi gj ns"><img src="../Images/46203b5dbb30fee0d52e8a12bfb8a667.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*LQ3wYxwxy1xsf9zfZk5Ztg.png"/></div><p class="lg lh gk gi gj li lj bd b be z dk translated">作者图片</p></figure><p id="2993" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">如果你想从Jupyter单元安装一些库，你不能利用传统的方法<code class="fe nf ng nh ni b">!pip install &lt;library_name&gt;</code>，因为这将运行全局软件包管理器。相反，您可以运行以下命令:</p><pre class="kv kw kx ky gu nj ni nk nl aw nm bi"><span id="f4b9" class="nn mj iw ni b gz no np l nq nr">import sys<br/>!{sys.executable} -m pip install &lt;library_name&gt;</span></pre><p id="eace" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">无论如何，如果前面的代码看起来太复杂，您总是可以从命令行安装库。</p><h1 id="47aa" class="mi mj iw bd mk ml mm mn mo mp mq mr ms kl mt km mu ko mv kp mw kr mx ks my mz bi translated">移除虚拟环境</h1><p id="8479" class="pw-post-body-paragraph ll lm iw ln b lo na kg lq lr nb kj lt lu nc lw lx ly nd ma mb mc ne me mf mg ip bi translated">如果只想从Jupyter中删除虚拟env，可以从终端运行以下命令:</p><pre class="kv kw kx ky gu nj ni nk nl aw nm bi"><span id="40b6" class="nn mj iw ni b gz no np l nq nr">jupyter kernelspec uninstall my_virtual_env</span></pre><p id="9636" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">如果您想从全局系统中删除虚拟环境，首先您必须停用虚拟环境，然后您可以删除包含虚拟环境的文件夹。</p><p id="c015" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">或者，您可以通过以下命令删除所有已安装的包，并保持虚拟env活动</p><pre class="kv kw kx ky gu nj ni nk nl aw nm bi"><span id="cef0" class="nn mj iw ni b gz no np l nq nr">virtualenv --clear path_to_my_venv</span></pre><h1 id="9508" class="mi mj iw bd mk ml mm mn mo mp mq mr ms kl mt km mu ko mv kp mw kr mx ks my mz bi translated">摘要</h1><p id="8fec" class="pw-post-body-paragraph ll lm iw ln b lo na kg lq lr nb kj lt lu nc lw lx ly nd ma mb mc ne me mf mg ip bi translated">在本教程中，我解释了如何安装和运行Python虚拟env。显然，您可以创建任意多的虚拟env。</p><p id="3c67" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">我希望这篇文章能帮助你建立一个更有组织的编码策略:)</p><h1 id="71d1" class="mi mj iw bd mk ml mm mn mo mp mq mr ms kl mt km mu ko mv kp mw kr mx ks my mz bi translated">相关文章</h1><div class="nt nu gq gs nv nw"><a rel="noopener follow" target="_blank" href="/how-to-install-python-and-jupyter-notebook-onto-an-android-device-900009df743f"><div class="nx ab fp"><div class="ny ab nz cl cj oa"><h2 class="bd jg gz z fq ob fs ft oc fv fx jf bi translated">如何在Android设备上安装Python和Jupyter Notebook</h2><div class="od l"><p class="bd b dl z fq ob fs ft oc fv fx dk translated">towardsdatascience.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj le nw"/></div></div></a></div><div class="nt nu gq gs nv nw"><a href="https://medium.com/analytics-vidhya/basic-statistics-with-python-pandas-ec7837438a62" rel="noopener follow" target="_blank"><div class="nx ab fp"><div class="ny ab nz cl cj oa"><h2 class="bd jg gz z fq ob fs ft oc fv fx jf bi translated">python熊猫的基本统计数据</h2><div class="ok l"><h3 class="bd b gz z fq ob fs ft oc fv fx dk translated">入门指南</h3></div><div class="od l"><p class="bd b dl z fq ob fs ft oc fv fx dk translated">medium.com</p></div></div><div class="oe l"><div class="ol l og oh oi oe oj le nw"/></div></div></a></div><div class="nt nu gq gs nv nw"><a href="https://alod83.medium.com/how-to-design-a-data-journalism-story-b2e421673b6e" rel="noopener follow" target="_blank"><div class="nx ab fp"><div class="ny ab nz cl cj oa"><h2 class="bd jg gz z fq ob fs ft oc fv fx jf bi translated">如何设计一个数据新闻故事</h2><div class="ok l"><h3 class="bd b gz z fq ob fs ft oc fv fx dk translated">如何设计一个数据新闻故事</h3></div><div class="od l"><p class="bd b dl z fq ob fs ft oc fv fx dk translated">如何设计一个数据新闻Storyalod83.medium.com</p></div></div><div class="oe l"><div class="om l og oh oi oe oj le nw"/></div></div></a></div><h1 id="46b8" class="mi mj iw bd mk ml mm mn mo mp mq mr ms kl mt km mu ko mv kp mw kr mx ks my mz bi translated">参考</h1><div class="nt nu gq gs nv nw"><a href="https://medium.com/@shivangisareen/for-anyone-using-jupyter-notebook-installing-packages-18a9468d0c1c" rel="noopener follow" target="_blank"><div class="nx ab fp"><div class="ny ab nz cl cj oa"><h2 class="bd jg gz z fq ob fs ft oc fv fx jf bi translated">对于任何使用Jupyter笔记本的人-安装软件包</h2><div class="ok l"><h3 class="bd b gz z fq ob fs ft oc fv fx dk translated">全局和本地安装软件包</h3></div><div class="od l"><p class="bd b dl z fq ob fs ft oc fv fx dk translated">medium.com</p></div></div><div class="oe l"><div class="on l og oh oi oe oj le nw"/></div></div></a></div><div class="nt nu gq gs nv nw"><a href="https://stackoverflow.com/questions/42449814/running-jupyter-notebook-in-a-virtualenv-installed-sklearn-module-not-available" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fp"><div class="ny ab nz cl cj oa"><h2 class="bd jg gz z fq ob fs ft oc fv fx jf bi translated">在虚拟环境中运行Jupyter笔记本电脑v:安装的sklearn模块不可用</h2><div class="ok l"><h3 class="bd b gz z fq ob fs ft oc fv fx dk translated">我已经安装了一个创建了virtualenv machinelearn并且安装了几个python模块(pandas，scipy和sklearn)在…</h3></div><div class="od l"><p class="bd b dl z fq ob fs ft oc fv fx dk translated">stackoverflow.com</p></div></div><div class="oe l"><div class="oo l og oh oi oe oj le nw"/></div></div></a></div><div class="nt nu gq gs nv nw"><a href="https://janakiev.com/blog/jupyter-virtual-envs/" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fp"><div class="ny ab nz cl cj oa"><h2 class="bd jg gz z fq ob fs ft oc fv fx jf bi translated">在Jupyter Notebook和Python中使用虚拟环境</h2><div class="ok l"><h3 class="bd b gz z fq ob fs ft oc fv fx dk translated">你在用Jupyter Notebook和Python吗？您是否也想从虚拟环境中获益？在这个…</h3></div><div class="od l"><p class="bd b dl z fq ob fs ft oc fv fx dk translated">janakiev.com</p></div></div><div class="oe l"><div class="op l og oh oi oe oj le nw"/></div></div></a></div></div></div>    
</body>
</html>