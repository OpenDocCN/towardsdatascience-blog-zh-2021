<html>
<head>
<title>How to Assign Computing Resources for Four Different Cloud Kubernetes Services: AKS, EKS, GKE, and Minikube</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为四种不同的云Kubernetes服务分配计算资源:AKS、EKS、GKE和Minikube</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-assign-computing-resources-for-four-different-cloud-kubernetes-services-aks-eks-gke-and-b3f4deb722bc?source=collection_archive---------27-----------------------#2021-05-20">https://towardsdatascience.com/how-to-assign-computing-resources-for-four-different-cloud-kubernetes-services-aks-eks-gke-and-b3f4deb722bc?source=collection_archive---------27-----------------------#2021-05-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0fb3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Kubernetes架构不需要公开来分配云计算硬件。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/45324b71a025fa98175b5d210aadb322.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L6cVsCzKG69lgFtuw3s3uQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">计算商品云。马西莫·博图里在<a class="ae ky" href="https://unsplash.com/collections/9766550/cloud-computing?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="ac83" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="71cc" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在本文中，我将向您展示如何为四种不同的云类型指定Kubernetes节点的计算资源:</p><ol class=""><li id="96cc" class="mn mo it lt b lu mp lx mq ma mr me ms mi mt mm mu mv mw mx bi translated"><a class="ae ky" href="https://kubernetes.io/docs/setup/learning-environment/minikube/" rel="noopener ugc nofollow" target="_blank"> Minikube </a>，一种在本地工作站(沙盒)上训练或测试Kubernetes的流行方法；</li><li id="0f03" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">用于亚马逊网络服务(AWS)云的弹性Kubernetes服务(EKS)；</li><li id="0bee" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">面向微软Azure云的Azure Kubernetes服务(AKS)；</li><li id="479f" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">用于谷歌云平台(GCP)云的谷歌Kubernetes引擎(GKE)。</li></ol><p id="859a" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">我们从云、Kubernetes、节点、节点池、集群和虚拟机的工作定义开始。</p><h1 id="6731" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是云？</h1><p id="f1cd" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">云是无数的异构硬件，每个都有自己的操作系统，托管您的应用程序，您希望复制这些应用程序(扩展)并在服务失败时重新启动(容错)。</p><p id="fd89" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated"><strong class="lt iu"> <em class="ng">注</em> </strong> <em class="ng">:我用“应用”作为一个微服务、服务、应用、包、网络资源、存储服务的通称，或者</em> <a class="ae ky" href="https://www.parallels.com/blogs/ras/aaas-application-as-a-service/" rel="noopener ugc nofollow" target="_blank"> <em class="ng">应用即服务</em></a><em class="ng">(</em><a class="ae ky" href="https://www.parallels.com/blogs/ras/aaas-application-as-a-service/" rel="noopener ugc nofollow" target="_blank"><em class="ng">AaaS</em></a><em class="ng">= = Saas)。</em></p><p id="d160" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">云供应商意识到，计算引擎是作为通用资源指定的通用计算类型提供的商品。</p><p id="7042" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">云供应商联合起来…</p><ul class=""><li id="3fc4" class="mn mo it lt b lu mp lx mq ma mr me ms mi mt mm nh mv mw mx bi translated">网络计算引擎商品</li><li id="ad04" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm nh mv mw mx bi translated">应用程序</li></ul><p id="aede" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">…让您能够为不同类型的应用租赁不同类型的计算引擎。</p><p id="595d" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated"><strong class="lt iu"> <em class="ng">注</em> </strong> <em class="ng">:云厂商凭借开源许可、无价格许可、高带宽成为可行。想象一下管理许可费用的成本与云供应商对开源软件的维护成本的对比。</em></p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="ff1f" class="kz la it bd lb lc np le lf lg nq li lj jz nr ka ll kc ns kd ln kf nt kg lp lq bi translated">什么是Kubernetes？</h1><p id="7d9c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">假设有一个应用程序，您希望跨计算引擎复制(扩展)该应用程序，如果某个应用程序的计算引擎出现故障(容错)，则将该应用程序移动到另一个计算引擎。</p><p id="a83f" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">因为需要可扩展、容错的分布式操作服务，谷歌在2015年开源了Kubernetes。</p><p id="7610" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">Kubernetes是独立于云的，因为:</p><ol class=""><li id="d22a" class="mn mo it lt b lu mp lx mq ma mr me ms mi mt mm mu mv mw mx bi translated">将物理机引擎转变为虚拟机。然后将虚拟机映射到Kubernetes <em class="ng">节点</em>抽象<em class="ng">。</em></li><li id="0108" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">通过将应用程序放入<a class="ae ky" href="https://www.cio.com/article/2924995/what-are-containers-and-why-do-you-need-them.html" rel="noopener ugc nofollow" target="_blank">容器</a>，将应用程序转换为虚拟应用程序。然后将一个或多个容器映射到Kubernetes <em class="ng"> pods </em>抽象<em class="ng">。</em></li></ol><p id="bba7" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">Kubernetes协调pod，在<em class="ng">节点</em>上启动和初始化<em class="ng">pod</em>，如果它们变得不可达(容错)，则在不同的<em class="ng">节点</em>上重新启动<em class="ng">pod</em>，复制(扩展)pod，以及pod上的其他分布式操作系统协调操作。</p><p id="71f6" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">我在这篇博客文章中详细介绍了云计算硬件如何映射到Kubernetes节点。云供应商的文档中指定了计算资源的供应。</p><p id="7049" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">您无法在Kubernetes文档中找到如何配置计算资源的方法，也不应该这样做。</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="5469" class="kz la it bd lb lc np le lf lg nq li lj jz nr ka ll kc ns kd ln kf nt kg lp lq bi translated">什么是Kubernetes节点和节点池？</h1><p id="cbc3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Kubernetes的一个重要概念是独立于计算硬件的类型。Kubernetes将计算引擎(硬件和操作)规范抽象为一个<em class="ng">节点</em>。</p><p id="199d" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">一个<em class="ng">节点</em>是主要云供应商的一组有限的虚拟机(VM)产品。每种供应类型指定计算资源和每单位时间租赁计算资源的价格。</p><p id="c835" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">虚拟机类型描述了CPU、GPU和xPU的混合；记忆的数量和类型(快速记忆)；磁盘的数量和类型(慢速内存)；以及免费的Linux变种操作系统(OS)。</p><p id="e7b8" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">每个云供应商还允许你用你想放入或替换的其他计算资源来构建定制的VM类型。</p><p id="d483" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated"><strong class="lt iu"> <em class="ng">注</em> </strong> <em class="ng">:云厂商提供MS Windows NT等其他OS变种。在许可证供应商的许可下，您还可以将许可证移动到云虚拟机。</em></p><p id="7e0a" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">您将一个VM类型分配给Kubernetes外部的一个节点。因此，Kubernetes配置是独立于云的，因为它只知道哪些<em class="ng">节点</em>被分配给了<em class="ng">集群</em>，并且独立于该节点的实际虚拟机类型。</p><p id="943e" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated"><strong class="lt iu"> <em class="ng">注</em> </strong> <em class="ng">:异构计算引擎造成的限制只允许将同构节点(相同VM类型)的节点池添加到Kubernetes集群。Kubernetes编排服务(如故障转移和复制)使用不同虚拟机的节点池是一个尚未解决的问题。</em></p><p id="1862" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">从现在开始，我使用更多的术语虚拟机(VM)来指代计算引擎。</p><p id="5270" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated"><strong class="lt iu"> <em class="ng">注</em> </strong> <em class="ng">:如果你熟悉DAG(有向无环图)，那么一条直线型DAG将云虚拟机连接到节点到节点池再到集群。</em></p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="3a94" class="kz la it bd lb lc np le lf lg nq li lj jz nr ka ll kc ns kd ln kf nt kg lp lq bi translated">什么是Kubernetes集群？</h1><p id="b421" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Kubernetes是一个用于通过网络连接的节点(VM)的分布式操作系统。一个特定的节点网络(节点池)是一个Kubernetes <em class="ng">集群</em>。</p><p id="12d6" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">一个或多个节点池被分配给Kubernetes集群(节点)。节点池或节点被分配给一个群集，不能分配给两个或多个群集。</p><p id="35fd" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">Kubernetes通常在一个集群中编排几个节点(节点池)。</p><p id="43db" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">Kubernetes可以命名和管理许多集群。</p><p id="7bca" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated"><strong class="lt iu"> <em class="ng">注</em> </strong> <em class="ng">:一个集群可以驻留在多个云上，称为多云或混合云。我不会在这篇博客文章中进一步讨论hybris云，因为这超出了我们的主要讨论点。</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/26dd2d0ca414496f81324888c8cf6d9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cSDUCSlaBktQVCejF3XILw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图一。物理硬件被描述为云中的虚拟机(VM)。每个虚拟机都映射到一个节点。相同虚拟机类型的节点被分组到一个节点池中。一个或多个节点池被分配给一个群集。群集不能共享池，节点池也不能共享节点。结果是虚拟机被分配到一个集群。在此图中，我们看到16台虚拟机分配给节点池0，两台不同类型的虚拟机分配给节点池1，一台虚拟机分配给节点池2。图片作者。</p></figure><p id="1c5d" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">云计算硬件映射到Kubernetes节点组。一个节点组被分配给一个Kubernetes集群。</p><p id="5ca3" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">现在，我们研究四种不同的云文档，以确定虚拟机如何映射到节点组。</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="3d28" class="kz la it bd lb lc np le lf lg nq li lj jz nr ka ll kc ns kd ln kf nt kg lp lq bi translated">响亮的类型1: Minikube</h1><p id="edde" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Minikube就是你如何在本地计算机上运行外观和感觉都很像的Kubernetes。</p><p id="a4cd" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">我认为Minikube是我安装在本地机器上的一个程序，用于培训或测试Kubernetes。</p><p id="a258" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">因为它位于一个本地工作站上，所以Minkube实例代表工作站上的一个集群。</p><p id="4a28" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">在将Kubernetes配置推送到云之前，我们在本地沙箱(工作站)上使用Minikube。</p><p id="32e5" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">和Kubernetes一样，Minikube使用客户端命令行工具<code class="fe nv nw nx ny b">kubectl</code>。但是，Minikube还需要一个名为。<code class="fe nv nw nx ny b">minikube.</code></p><h2 id="3579" class="nz la it bd lb oa ob dn lf oc od dp lj ma oe of ll me og oh ln mi oi oj lp ok bi translated">Minikube配置文件</h2><p id="49a2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Kubernetes拥有被命名为集群的<em class="ng">上下文</em>。<em class="ng"> </em>通过使用上下文名，<code class="fe nv nw nx ny b">kubectl</code>指向哪个Kubernetes集群就对哪个集群进行操作。</p><p id="e28b" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">Minikube <em class="ng">概要文件</em>是Minikube实例的<em class="ng">名称</em>，它是本地机器上的一个集群。另一种不同但等效的说法是:“<em class="ng">每个新集群都需要一个新的Minikube实例。”</em></p><p id="c807" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">如果Minicube <em class="ng">配置文件</em>与<code class="fe nv nw nx ny b">kubectl</code> <em class="ng">上下文</em>同名(字符串)，则<code class="fe nv nw nx ny b">kubectl</code>在Minikube实例(当前配置文件)(集群)上运行。</p><p id="59d2" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">关于Mimikube上下文和<code class="fe nv nw nx ny b">kubectl</code>简介的更详细讨论:</p><div class="ol om gp gr on oo"><a href="https://itnext.io/understanding-the-connection-between-minicubes-profile-and-kubectl-s-context-f9a30f89bc62" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">理解Minikube的简介和Kubectl的背景之间的联系</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">我讨论了导致Minicube表现得像Kubernetes一样的稀疏记录的桥接概念。</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">itnext.io</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc ks oo"/></div></div></a></div><h2 id="6a31" class="nz la it bd lb oa ob dn lf oc od dp lj ma oe of ll me og oh ln mi oi oj lp ok bi translated">用于指定本地虚拟机的Minikube启动选项。</h2><p id="0318" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">您可以在本地工作站上使用以下命令启动一个Minkube虚拟机(VM)实例:</p><pre class="kj kk kl km gt pd ny pe pf aw pg bi"><span id="4fda" class="nz la it ny b gy ph pi l pj pk">minikube start -p &lt;profile-name&gt; <!-- -->[options]</span></pre><p id="246e" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">您的虚拟机默认使用下面列出的<code class="fe nv nw nx ny b">[options]</code>:</p><pre class="kj kk kl km gt pd ny pe pf aw pg bi"><span id="684b" class="nz la it ny b gy ph pi l pj pk">minikube start -h</span></pre><p id="e20f" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">Minikube实例的一些有用选项:</p><pre class="kj kk kl km gt pd ny pe pf aw pg bi"><span id="96d3" class="nz la it ny b gy ph pi l pj pk">Options:</span><span id="1bcc" class="nz la it ny b gy pl pi l pj pk">--cpus=2: Number of local workstation CPUs allocated to Minikube VM instance.</span><span id="0bbd" class="nz la it ny b gy pl pi l pj pk">--disk-size='20000mb': The local workstation disk size allocated to the minikube VM (format: &lt;number&gt;[&lt;unit&gt;], where unit = b, k, m or g).</span><span id="6744" class="nz la it ny b gy pl pi l pj pk">--memory='': Amount of local workstation RAM to allocate to Kubernetes (format: &lt;number&gt;[&lt;unit&gt;], where unit = b, k, m or g).</span><span id="a5a9" class="nz la it ny b gy pl pi l pj pk">-n, --nodes=1: The number of nodes to spin up in the Kubernetes cluster. Defaults to 1.</span></pre><p id="5c01" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">例如:</p><pre class="kj kk kl km gt pd ny pe pf aw pg bi"><span id="619e" class="nz la it ny b gy ph pi l pj pk">start -p sanbox -cpus=10 -nodes=5</span><span id="6f4e" class="nz la it ny b gy pl pi l pj pk">. [log]<br/>. [messages]<br/>. [from starting profile(cluster) sandbox]</span><span id="db08" class="nz la it ny b gy pl pi l pj pk">minikube dashboard &amp;  #startup kubernetes dashboard</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pm"><img src="../Images/b8b2f7288e2ebed5c1176cf460cf7ffb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FcoT09onVzAYaIkAlV63GQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图二。Kubernetes仪表板显示Minikube配置文件(集群)sanbox的5个节点。图片:作者工作站的桌面截图。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pn"><img src="../Images/cb38a212284c335f5cfaa9bc4172a849.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*79Sg9EJPuUAcUt_fNShtqw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图3。节点sanbox-m05元数据。图片:作者工作站的桌面截图。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi po"><img src="../Images/44e1044c68dc2db784d3c42ddd404e4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZjoEEMctF4ZiGANfyZrudQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图3(续)).节点sanbox-m05元数据。图片:作者工作站的桌面截图。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pp"><img src="../Images/ed8585575ae6650360cdfc2b730bd910.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7-F3fIXTD_2KuhzUWRnx9w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图3(续)).节点sanbox-m05元数据。图片:作者工作站的桌面截图。</p></figure><p id="d1ad" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">我们看到，以下三家云供应商与Minikube在Kubernetes节点的虚拟机预约方面形成鲜明对比。</p><p id="57ec" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">在Minikube中，Kubernetes集群由一个虚拟机组成。云由一个或多个虚拟机组成。</p><p id="82df" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">每个Minkube实例都是一个Kubernetes集群，驻留在从您的工作站的计算资源创建的VM中。Minkube实例节点是同构的，并对单个虚拟机进行分区。</p><p id="6fab" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">相比之下，云定义节点池。Kubernetes集群由节点池组成，其中每个节点池都是一种特定的虚拟机类型。</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="9bd3" class="kz la it bd lb lc np le lf lg nq li lj jz nr ka ll kc ns kd ln kf nt kg lp lq bi translated">云类型2:亚马逊EKS节点、节点组和集群</h1><p id="6ba4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">亚马逊为EC2提供的Kubernetes服务叫做<a class="ae ky" href="https://docs.aws.amazon.com/eks/latest/userguide/what-is-eks.html" rel="noopener ugc nofollow" target="_blank">弹性Kubernetes服务(EKS </a>)。</p><p id="9385" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">EKS支持Kubernetes API。<code class="fe nv nw nx ny b">eksctl</code>是用于在EKS上创建和管理集群的命令行界面(CLI)工具。</p><p id="e4b3" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">如果您熟悉Kubernetes <code class="fe nv nw nx ny b">kuberctl</code>命令行界面(CLI ),则EKS的等效界面称为。<code class="fe nv nw nx ny b">eksctl</code>。</p><h2 id="e4c3" class="nz la it bd lb oa ob dn lf oc od dp lj ma oe of ll me og oh ln mi oi oj lp ok bi translated">分配虚拟机(VM)</h2><p id="ca0d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">有多种方法和选项可以将虚拟机分配给弹性Kubernetes服务(EKS)集群。</p><p id="88cf" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">首先，创建一个名为<code class="fe nv nw nx ny b"><em class="ng">&lt;my-cluster&gt;</em></code>的Kubernetes <a class="ae ky" href="https://docs.aws.amazon.com/eks/latest/userguide/create-cluster.html" rel="noopener ugc nofollow" target="_blank">集群</a>:</p><pre class="kj kk kl km gt pd ny pe pf aw pg bi"><span id="b839" class="nz la it ny b gy ph pi l pj pk"># Example<br/>eksctl create cluster \<br/> --name <em class="ng">&lt;</em>zetaC<em class="ng">luster&gt;</em> \ <br/> --without-nodegroup</span></pre><p id="135e" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">我们<a class="ae ky" href="https://docs.aws.amazon.com/eks/latest/userguide/create-managed-node-group.html" rel="noopener ugc nofollow" target="_blank">手动分配</a>节点组、节点和<a class="ae ky" href="https://docs.aws.amazon.com/pricing-calculator/latest/userguide/advanced-estimate.html#ec2-advanced-instance-type" rel="noopener ugc nofollow" target="_blank">虚拟机类型</a>给</p><ol class=""><li id="e69d" class="mn mo it lt b lu mp lx mq ma mr me ms mi mt mm mu mv mw mx bi translated">创建一个节点组名<code class="fe nv nw nx ny b"><em class="ng">&lt;my-ng&gt;;</em></code></li><li id="bd5f" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">把它分配给库伯内特集群<code class="fe nv nw nx ny b"><em class="ng">&lt;zetaCluster&gt;;</em></code></li><li id="6e20" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">在<a class="ae ky" href="https://docs.aws.amazon.com/eks/latest/userguide/local-zones.html" rel="noopener ugc nofollow" target="_blank">区域</a>T3】</li><li id="fa99" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">节点(虚拟机)类型的<code class="fe nv nw nx ny b"><em class="ng">&lt;VM-type&gt;;</em></code></li><li id="bcb9" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">起始节点计数为<code class="fe nv nw nx ny b"><em class="ng">&lt;&lt;number-in-node-group&gt;&gt;;</em></code></li><li id="5c40" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">最小节点数为<code class="fe nv nw nx ny b"><em class="ng">&lt;minimum-number-in-node-group&gt;;</em></code></li><li id="b9a3" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">最大节点数为<code class="fe nv nw nx ny b"><em class="ng">&lt;maximum-number-in-node-group&gt;;</em></code></li></ol><pre class="kj kk kl km gt pd ny pe pf aw pg bi"><span id="c88b" class="nz la it ny b gy ph pi l pj pk">eksctl create nodegroup \<br/>   --cluster &lt;zetaC<em class="ng">luster&gt;</em> \<br/>   --region <em class="ng">&lt;region&gt;</em> \<br/>   --name <em class="ng">&lt;nogroup-name&gt;</em> \<br/>   --node-type <em class="ng">&lt;VM-type&gt;</em> \<br/>   --nodes <em class="ng">&lt;number-in-node-group&gt;</em> \<br/>   --nodes-min <em class="ng">&lt;minimum-number-in-node-group&gt;</em> \<br/>   --nodes-max <em class="ng">&lt;maximum-number-in-node-group&gt;</em></span></pre><p id="d2f7" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated"><strong class="lt iu"> <em class="ng">注</em> </strong> <em class="ng">:节点池在EKS称为节点组。</em></p><p id="8999" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated"><strong class="lt iu"> <em class="ng">注</em> </strong> <em class="ng">:我并没有定义我使用的每一个云概念——比如，区域这个术语。</em></p><p id="8187" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">您不能在EKS集群中添加或删除<em class="ng">节点</em>；您可以在EKS集群中添加或删除节点组。</p><p id="cecb" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated"><a class="ae ky" href="https://aws.amazon.com/ec2/instance-types/" rel="noopener ugc nofollow" target="_blank">AWS提供的VM类型(Amazon EC2实例类型)。</a></p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="36f3" class="kz la it bd lb lc np le lf lg nq li lj jz nr ka ll kc ns kd ln kf nt kg lp lq bi translated">云类型3: Azure AKS节点，ResourseGroup。和集群</h1><p id="4dc6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在Azure Kubernetes服务(AKS)中，相同配置的节点被分组到<em class="ng">节点池</em>中。这些节点池包含运行应用程序的底层虚拟机。</p><p id="b066" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">您可以向节点池中添加节点。遵循独立于云的Kubernetes计算资源抽象规则，您可以向AKS集群添加一个或多个节点池。</p><p id="270f" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">如果您熟悉Kubernetes <code class="fe nv nw nx ny b">kuberctl</code>命令行界面(CLI ),那么EKS的对应界面叫做<code class="fe nv nw nx ny b">az,</code>用于在AKS上创建和管理集群的CLI。</p><p id="f44f" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">在Azure中，首先，创建一个名为<em class="ng">的资源组</em>。</p><pre class="kj kk kl km gt pd ny pe pf aw pg bi"><span id="f0fa" class="nz la it ny b gy ph pi l pj pk">az group create — name &lt;nameResourceGroupVM&gt; — location &lt;region&gt;</span><span id="00cc" class="nz la it ny b gy pl pi l pj pk">#### Example</span><span id="46be" class="nz la it ny b gy pl pi l pj pk">az group create — name zetaResourceGroupVM — location westeurope</span></pre><h2 id="9c08" class="nz la it bd lb oa ob dn lf oc od dp lj ma oe of ll me og oh ln mi oi oj lp ok bi translated">为什么需要创建AKS资源组？(可选阅读)</h2><p id="7732" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">只有AKS的Kubernetes实现有资源组。AKS ResourceGroups的目的似乎是指定从哪个Azure区域分配虚拟机，以及从哪个区域启动集群。</p><p id="a295" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">实质上，AKS区域是在资源组中指定的，而不是在集群中。您可以通过引用不同的资源组来加速另一个AKS区域中的集群。</p><p id="db61" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">每个集群创建了两个资源组。一个名为，是显式的，伞对象实例链接该集群的所有内部AKS系统资源。</p><p id="af03" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated"><strong class="lt iu"> <em class="ng">注</em> </strong> <em class="ng"> : IMHO，ResorceGroups可能是为了对Kubernetes内部系统虚拟机收费而引入的。可以想象Kubernetes群体如此之大，以至于消耗了大量的计算资源。我知道云供应商通过合同谈判管理大型Kubernetes群，而不使用名称。微软可能也会这么做。我不知道他们有没有。</em></p><p id="60a5" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">第二个ResourceGroup实例是未命名的，在创建集群时自动创建。伞状对象实例链接您可能分配给AKS集群的所有节点池。</p><pre class="kj kk kl km gt pd ny pe pf aw pg bi"><span id="b100" class="nz la it ny b gy ph pi l pj pk"># Create a resource group named sandboxResourceGroup<br/># in region(az group): East US<br/>create --name sandboxResourceGroup --location eastus</span></pre><h2 id="f9f1" class="nz la it bd lb oa ob dn lf oc od dp lj ma oe of ll me og oh ln mi oi oj lp ok bi translated">创建一个AKS集群。</h2><p id="0747" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">接下来，您需要创建一个名为<code class="fe nv nw nx ny b">sandboxCluster</code>的AKS集群:</p><pre class="kj kk kl km gt pd ny pe pf aw pg bi"><span id="8585" class="nz la it ny b gy ph pi l pj pk"># Create a basic single-node AKS cluster <br/>az aks create \<br/>     --resource-group sandboxResourceGroup \<br/>     --name sandboxCluster \<br/>     --node-count 3 \</span></pre><p id="dbc5" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">创建AKS集群时，创建了一个默认的<em class="ng">节点池1 </em>，节点计数为3。</p><pre class="kj kk kl km gt pd ny pe pf aw pg bi"><span id="42ad" class="nz la it ny b gy ph pi l pj pk">az aks nodepool list --resource-group sandboxResourceGroup \<br/>     --cluster-name sandboxCluster</span></pre><p id="407f" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">输出= &gt;</p><pre class="kj kk kl km gt pd ny pe pf aw pg bi"><span id="cecd" class="nz la it ny b gy ph pi l pj pk"> [<br/>   { ...<br/>     "count": 3,<br/>     ...<br/>     "name": "nodepool1",<br/>     "orchestratorVersion": "1.15.7",<br/>     ...<br/>     "provisioningState": "Succeeded",<br/>     ...<br/>     "vmSize": "Standard_DS2_v2",<br/>     ...<br/>   }<br/> ]</span></pre><h2 id="9b30" class="nz la it bd lb oa ob dn lf oc od dp lj ma oe of ll me og oh ln mi oi oj lp ok bi translated">向群集添加节点池。</h2><p id="8980" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们可以通过以下方式向<code class="fe nv nw nx ny b">sandboxClutser</code>添加第二个节点池:</p><pre class="kj kk kl km gt pd ny pe pf aw pg bi"><span id="2b05" class="nz la it ny b gy ph pi l pj pk">az aks nodepool add \<br/>     --resource-group sandboxResourceGroup \<br/>     --cluster-name myAKSCluster \<br/>     --name sb1nodepool \<br/>     --node-count 7</span><span id="0492" class="nz la it ny b gy pl pi l pj pk">az aks nodepool list --resource-group sandboxResourceGroup \<br/>     --cluster-name sandboxCluster</span></pre><p id="eb85" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">输出= &gt;</p><pre class="kj kk kl km gt pd ny pe pf aw pg bi"><span id="f5cd" class="nz la it ny b gy ph pi l pj pk">[<br/>   { ...<br/>     "count": 3,<br/>     ...<br/>     "name": "nodepool1",<br/>     "orchestratorVersion": "1.15.7",<br/>     ...<br/>     "provisioningState": "Succeeded",<br/>     ...<br/>     "vmSize": "Standard_DS2_v2",<br/>     ...<br/>   },<br/>   { ...<br/>     "count": 7,<br/>     ...<br/>     "name": "sb1nodepool",<br/>     "orchestratorVersion": "1.15.7",<br/>     ...<br/>     "provisioningState": "Succeeded",<br/>     ...<br/>     "vmSize": "Standard_DS2_v2",<br/>     ...<br/>   }</span><span id="e2e6" class="nz la it ny b gy pl pi l pj pk"> ]</span></pre><blockquote class="pq pr ps"><p id="2914" class="lr ls ng lt b lu mp ju lw lx mq jx lz pt nd mc md pu ne mg mh pv nf mk ml mm im bi translated"><em class="it">如果在添加节点池时未指定VmSize，则默认大小为Windows节点池的Standard_D2s_v3和Linux节点池的Standard_DS2_v2。— </em> <a class="ae ky" href="https://docs.microsoft.com/en-us/azure/aks/use-multiple-node-pools" rel="noopener ugc nofollow" target="_blank"> <em class="it">微软Azure文档。</em> </a></p></blockquote><p id="9724" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">所有虚拟机规格和其他选项都交给<code class="fe nv nw nx ny b"><a class="ae ky" href="https://docs.microsoft.com/en-us/cli/azure/aks/nodepool?view=azure-cli-latest#az_aks_nodepool_add" rel="noopener ugc nofollow" target="_blank">ak aks nodepool add</a>.</code></p><h2 id="50aa" class="nz la it bd lb oa ob dn lf oc od dp lj ma oe of ll me og oh ln mi oi oj lp ok bi translated">从群集中删除节点池。</h2><p id="e9de" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果不再需要某个池，可以将其删除并移除底层虚拟机节点。要删除节点池，使用<a class="ae ky" href="https://docs.microsoft.com/en-us/cli/azure/aks/nodepool?view=azure-cli-latest&amp;preserve-view=true#az_aks_nodepool_delete" rel="noopener ugc nofollow" target="_blank"> az aks节点池删除</a>命令并指定节点池名称。</p><pre class="kj kk kl km gt pd ny pe pf aw pg bi"><span id="55b9" class="nz la it ny b gy ph pi l pj pk">az aks nodepool delete -g sandboxResourceGroup /<br/>        --cluster-name sandboxCluster /<br/>       --name nodepool1 --no-wait</span></pre><p id="735e" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">输出= &gt;</p><pre class="kj kk kl km gt pd ny pe pf aw pg bi"><span id="e404" class="nz la it ny b gy ph pi l pj pk">[<br/>   { ...<br/>     "count": 7,<br/>     ...<br/>     "name": "sb1nodepool",<br/>     "orchestratorVersion": "1.15.7",<br/>     ...<br/>     "provisioningState": "Succeeded",<br/>     ...<br/>     "vmSize": "Standard_DS2_v2",<br/>     ...<br/>   }<br/>]</span></pre><h2 id="bf1a" class="nz la it bd lb oa ob dn lf oc od dp lj ma oe of ll me og oh ln mi oi oj lp ok bi translated">你可能会发现有用的杂项Azure链接。</h2><p id="e5be" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">虚拟机配置中的批处理池支持几乎所有的<a class="ae ky" href="https://docs.microsoft.com/en-us/azure/virtual-machines/sizes" rel="noopener ugc nofollow" target="_blank">虚拟机大小</a>。</p><p id="2a38" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated"><a class="ae ky" href="https://docs.microsoft.com/en-US/troubleshoot/azure/cloud-services/support-linux-open-source-technology" rel="noopener ugc nofollow" target="_blank">Azure支持的Linux发行版和版本。</a></p><p id="8a83" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated"><a class="ae ky" href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/compute-benchmark-scores" rel="noopener ugc nofollow" target="_blank">各种虚拟机包及其性能指标评测。</a></p><p id="5179" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated"><a class="ae ky" href="https://www.youtube.com/watch?v=zOSvnJFd3ZM" rel="noopener ugc nofollow" target="_blank">虚拟机设置—哪个虚拟机最适合您在Azure中的工作负载？</a></p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="bd2d" class="kz la it bd lb lc np le lf lg nq li lj jz nr ka ll kc ns kd ln kf nt kg lp lq bi translated">云类型4:护目镜GKE</h1><p id="2bc3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">要使用以下命令签名创建GKE集群:</p><pre class="kj kk kl km gt pd ny pe pf aw pg bi"><span id="25ff" class="nz la it ny b gy ph pi l pj pk">gcloud container clusters create &lt;<!-- -->CLUSTER_NAME&gt; [options]</span></pre><p id="d2f2" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">所有的<code class="fe nv nw nx ny b">gcloud ontainer clusters create</code>选项都在这里<a class="ae ky" href="https://cloud.google.com/sdk/gcloud/reference/container/clusters/create" rel="noopener ugc nofollow" target="_blank">详细说明。</a></p><h2 id="1d28" class="nz la it bd lb oa ob dn lf oc od dp lj ma oe of ll me og oh ln mi oi oj lp ok bi translated">创建GKE节点池。</h2><p id="98b4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">与其他云类似，Goggle Kubernetes引擎(GKE)将虚拟机抽象为一个节点。</p><p id="899f" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">节点池而不是节点被添加到GKE群集中。</p><p id="5dcc" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">要创建节点池，请运行<code class="fe nv nw nx ny b"><a class="ae ky" href="https://cloud.google.com/sdk/gcloud/reference/container/node-pools/create" rel="noopener ugc nofollow" target="_blank">gcloud container node-pools create</a></code>命令:</p><pre class="kj kk kl km gt pd ny pe pf aw pg bi"><span id="0b3b" class="nz la it ny b gy ph pi l pj pk">gcloud container node-pools create &lt;POOL_NAME&gt; --cluster <!-- -->&lt;<!-- -->CLUSTER_NAME&gt; [options]</span></pre><p id="dfed" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">使用以下任一选项指定节点池中的虚拟机类型:</p><p id="8ffa" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">来自<a class="ae ky" href="https://cloud.google.com/sdk/gcloud/reference/container/node-pools/create" rel="noopener ugc nofollow" target="_blank"> GKE文件</a>:</p><blockquote class="pq pr ps"><p id="bd39" class="lr ls ng lt b lu mp ju lw lx mq jx lz pt nd mc md pu ne mg mh pv nf mk ml mm im bi translated"><code class="fe nv nw nx ny b">--machine-type</code>:节点池中实例使用的计算引擎<a class="ae ky" href="https://cloud.google.com/compute/docs/machine-types" rel="noopener ugc nofollow" target="_blank">机器类型</a>。如果未指定，默认机器类型为<code class="fe nv nw nx ny b">e2-medium</code>。关于指定机器类型的信息，请参考<code class="fe nv nw nx ny b"><a class="ae ky" href="https://cloud.google.com/sdk/gcloud/reference/container/node-pools/create#--machine-type" rel="noopener ugc nofollow" target="_blank">gcloud container node-pools create --machine-type</a></code>。</p><p id="d844" class="lr ls ng lt b lu mp ju lw lx mq jx lz pt nd mc md pu ne mg mh pv nf mk ml mm im bi translated"><code class="fe nv nw nx ny b">--num-nodes</code>:指定要在节点池中创建的节点数。默认值为3。您的项目必须有足够的<a class="ae ky" href="https://cloud.google.com/compute/docs/resource-quotas" rel="noopener ugc nofollow" target="_blank">配额</a>用于节点数。</p><p id="3d8a" class="lr ls ng lt b lu mp ju lw lx mq jx lz pt nd mc md pu ne mg mh pv nf mk ml mm im bi translated"><code class="fe nv nw nx ny b">--disk-size</code>:节点虚拟机引导磁盘的大小，以GB为单位。默认为100GB。</p><p id="8e3f" class="lr ls ng lt b lu mp ju lw lx mq jx lz pt nd mc md pu ne mg mh pv nf mk ml mm im bi translated"><code class="fe nv nw nx ny b">--image-type</code>:用于节点池的<a class="ae ky" href="https://cloud.google.com/kubernetes-engine/docs/concepts/node-images" rel="noopener ugc nofollow" target="_blank">图像类型</a>。映像类型指定要在节点池中的节点上运行的基本操作系统。如果未指定，服务器将选择默认图像类型。</p></blockquote><p id="5134" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">其他<code class="fe nv nw nx ny b">gcloud container node-pools create</code>选项的<a class="ae ky" href="https://cloud.google.com/sdk/gcloud/reference/container/node-pools/create" rel="noopener ugc nofollow" target="_blank">在此详述。</a></p><h2 id="f378" class="nz la it bd lb oa ob dn lf oc od dp lj ma oe of ll me og oh ln mi oi oj lp ok bi translated">你可能会发现有用的杂项GKE链接。</h2><p id="baf0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="https://cloud.google.com/kubernetes-engine/docs/how-to/node-pools" rel="noopener ugc nofollow" target="_blank">其他节点池管理命令。</a></p><p id="ce44" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">可用的有效<a class="ae ky" href="https://cloud.google.com/compute/docs/machine-types" rel="noopener ugc nofollow" target="_blank">虚拟机类型</a>列表。</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="a6d4" class="kz la it bd lb lc np le lf lg nq li lj jz nr ka ll kc ns kd ln kf nt kg lp lq bi translated">摘要</h1><p id="f43d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">有人提醒我们，Kubernetes与机器类型(VM)无关，因此也与云类型无关。</p><p id="2e18" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">Kubernetes将计算资源抽象为节点，节点映射到云供应商提供的虚拟机。</p><p id="aeab" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">由于Kubernetes编排服务的异构性(如故障转移和复制)造成的限制，云类型实施只允许将同构节点(相同虚拟机类型)的节点池添加到Kubernetes集群。</p><p id="71b7" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">我向您展示了如何针对四种不同的云类型将VM映射到Kubernetes节点:</p><ol class=""><li id="ed24" class="mn mo it lt b lu mp lx mq ma mr me ms mi mt mm mu mv mw mx bi translated"><a class="ae ky" href="https://kubernetes.io/docs/setup/learning-environment/minikube/" rel="noopener ugc nofollow" target="_blank"> Minikube </a>在本地工作站上使用Kubernetes进行培训或测试的流行方法；</li><li id="2416" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">用于亚马逊网络服务(AWS)的弹性Kubernetes服务(EKS)；</li><li id="1408" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">面向微软Azure的Azure Kubernetes服务(AKS)；</li><li id="fc74" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">用于谷歌云平台(GCP)的谷歌Kubernetes引擎(GKE)。</li></ol><p id="aac3" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">未来的博客文章将讨论Kubernetes在生产中为您的机器学习管道提供的机会。</p><p id="e941" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">编码快乐！</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="3344" class="kz la it bd lb lc np le lf lg nq li lj jz nr ka ll kc ns kd ln kf nt kg lp lq bi translated">附录a .定价</h1><p id="c09a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">所有云供应商都有相同的基本价格模型，这并不奇怪，因为计算资源现在是商品。根据云供应商及其卓越的产品，在基本定价模型中添加了定制附加服务。</p><p id="427c" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">下面我展示了Goggle<a class="ae ky" href="https://cloud.google.com/compute/all-pricing" rel="noopener ugc nofollow" target="_blank">价格模型</a>的一部分。</p><blockquote class="pw"><p id="5f18" class="px py it bd pz qa qb qc qd qe qf mm dk translated">您需要为虚拟机实例使用的资源付费。创建虚拟机实例时，您需要为实例选择一种机器类型，并按照虚拟机实例定价页面中的描述进行计费。具体来说，您需要按照基于资源的计费模型中所述，为每个vCPU和GB内存单独计费。适用折扣，如持续使用折扣和承诺使用折扣。</p></blockquote><p id="4a32" class="pw-post-body-paragraph lr ls it lt b lu qg ju lw lx qh jx lz ma qi mc md me qj mg mh mi qk mk ml mm im bi translated">所有云供应商都提供合同、批量和/或专用计算资源定价。</p></div></div>    
</body>
</html>