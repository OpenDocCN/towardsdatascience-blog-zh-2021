<html>
<head>
<title>3 levels of technical abstraction when sharing your code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">共享代码时的3个技术抽象层次</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/3-levels-of-technical-abstraction-when-sharing-your-code-50ddc6e73946?source=collection_archive---------46-----------------------#2021-04-13">https://towardsdatascience.com/3-levels-of-technical-abstraction-when-sharing-your-code-50ddc6e73946?source=collection_archive---------46-----------------------#2021-04-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1bea" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">探索GitHub、Docker和Heroku</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a90c1b2644898f47b5b1f8dac2825181.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TsEAU1f6CkyiA0ba"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">paweczerwi ski在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="8fd7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我已经编程八年了，直到<em class="lv">几个月前</em>，我才能够回答我一直以来的一个问题:<strong class="lb iu">“我如何与他人分享我的项目？”</strong></p><p id="7a04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我说“项目”时，我指的不是一个R脚本或一些bash命令——即使22岁的我也能理解复制和粘贴！我指的是一个有<strong class="lb iu"> <em class="lv">几个文件</em> </strong>的项目，也许在<strong class="lb iu"> <em class="lv">多语言</em> </strong>，有<strong class="lb iu"> <em class="lv">外部依赖</em> </strong>。我是不是要把它们都扔进一个压缩文件夹里？我如何处理不向后兼容的新版本语言和软件包？如果和我分享的人根本不知道怎么编码呢？</p><p id="c917" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">分享你的项目的正确方式取决于你希望你的接收者看到多少代码，以及从<a class="ae ky" href="https://whatis.techtarget.com/definition/abstraction" rel="noopener ugc nofollow" target="_blank">摘要</a>中带走多少。本帖将涵盖三个抽象层次:<a class="ae ky" href="https://guides.github.com/introduction/flow/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">GitHub</strong></a><a class="ae ky" href="https://docs.docker.com/get-started/overview/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">Docker</strong></a><a class="ae ky" href="https://www.heroku.com/what" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">Heroku</strong></a>。我们将从共享原始文件开始，以隐藏几乎所有内容结束。</p><h1 id="3ad5" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">第一级:GitHub</h1><p id="2d72" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">收件人需要做的事情:</em> </strong> <em class="lv">确保他们的计算机拥有适用于其操作系统的正确版本的适当语言和软件包；实际上知道执行什么代码来启动你的应用程序。</em></p><p id="adec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://guides.github.com/activities/hello-world/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>是托管您的代码、跟踪代码变更并与其他人共享代码的行业标准。通过向某人发送指向您的存储库的URL，他们可以查看您的代码，查看更改的历史记录，将代码保存到他们的计算机上，并将更改提交给您进行审批。</p><p id="694b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过GitHub共享代码是我们三个选项中最不抽象的一个—<strong class="lb iu">你的接收者获得原始代码本身。</strong>虽然这对于从另一个角度了解你的项目的内部运作很有帮助，但是对于使用你的代码的<em class="lv">来说，GitHub repo本身实际上是非常简单的。如果没有详细的说明，您的收件人可能不知道您的代码应该做什么或如何实际运行它！</em></p><p id="9b9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比如看一下<a class="ae ky" href="https://github.com/python/cpython" rel="noopener ugc nofollow" target="_blank">Python</a>的GitHub repo(没错，<em class="lv">Python</em>)。只看文件和文件夹，你有什么想法输入什么命令来安装Python？(谢天谢地，他们的自述里有详细的说明！)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/e8d48da6986e979ea37024d2c2b38387.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IftrjU0V5wKZC2BwGmqVAA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截图</p></figure><p id="9519" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了如何启动项目的说明，列出<em class="lv">外部依赖</em>(例如Python库)及其版本也很重要。即使你在给某人发送GitHub repo时共享了原始代码，如果你的代码引用了你的接收者没有安装的库，你的项目<em class="lv">可能仍然不能在他们的计算机上运行</em>。</p><p id="4ccd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是为什么<strong class="lb iu">提供如何在您的计算机上重建环境的说明至关重要。</strong>事实上，基于Python的项目几乎总是从用户创建一个<a class="ae ky" href="https://realpython.com/python-virtual-environments-a-primer/" rel="noopener ugc nofollow" target="_blank">虚拟环境</a>并安装在<code class="fe mu mv mw mx b">requirements.txt</code>文件中提供的库开始。</p><p id="ec3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，如果你的项目涉及到多种语言和一个数据库，即使是详细的说明和一个<code class="fe mu mv mw mx b">requirements.txt</code>文件也可能不够。例如，这个<a class="ae ky" href="https://github.com/dockersamples/example-voting-app" rel="noopener ugc nofollow" target="_blank">计票app </a>的回购示例涉及Python、<a class="ae ky" href="https://nodejs.org/en/about/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>、<a class="ae ky" href="https://aws.amazon.com/redis/" rel="noopener ugc nofollow" target="_blank"> Redis </a>、<a class="ae ky" href="https://www.postgresql.org/" rel="noopener ugc nofollow" target="_blank"> Postgres </a>和<a class="ae ky" href="https://dotnet.microsoft.com/learn/dotnet/what-is-dotnet" rel="noopener ugc nofollow" target="_blank">。网</a>。如果你愿意隐藏一些代码来使你的应用程序更容易使用，那么转移到下一个抽象层次:Docker可能是值得的。</p><h1 id="494f" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">第二级:码头工人</h1><p id="965b" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">你的收件人需要做的事情:</em> </strong> <em class="lv">安装Docker，拉相关图片，运行一个</em> <a class="ae ky" href="https://docs.docker.com/compose/" rel="noopener ugc nofollow" target="_blank"> <em class="lv"> Docker撰写</em> </a> <em class="lv">。</em></p><p id="3d9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Docker 是一种集装箱服务。一个<strong class="lb iu">容器</strong>是一个隔离的软件环境，其中的库、程序、<em class="lv">甚至操作系统</em>都独立于你的计算机的其余部分。<strong class="lb iu">把Docker容器想象成你电脑里面的一台微型电脑。</strong> [1]</p><p id="1753" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用Docker，您可以将项目的各个部分——例如机器学习模型、数据库和电子邮件提醒——隔离到独立的容器中，这些容器的环境完全符合该组件的需求。然后，您可以并行运行这些容器，就像它们在同一台计算机上一样。</p><p id="33cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">容器来自<a class="ae ky" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker Hub </a>上公开可用的软件“快照”，或<strong class="lb iu">图像</strong>。例如，如果你的应用程序只运行在Python2上，与其让你的接收者头疼地去说服他们降级他们的Python，<a class="ae ky" href="https://hub.docker.com/search?q=python2.7&amp;type=image" rel="noopener ugc nofollow" target="_blank"> <em class="lv">不如让他们下载一个Python2.7的Docker镜像</em> </a>。</p><p id="c271" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">截至2021年4月，Docker Hub上有<em class="lv">超过580万张图片</em>可以免费下载。而且实验是没有成本的:你下载的任何图像都被悄悄地从你的计算机的全局环境中隐藏起来，直到你调用它们来创建一个容器。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/1874a3c3d21db88916eff138435bc9da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*06H2rm3XxzUi0G5KB4r7DQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截图</p></figure><p id="6668" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更好的是，你可以<em class="lv">创建你自己的</em>图像。[2]下面的代码是为一个简单的Flask应用程序创建Docker映像所需的全部内容。步骤包括安装<a class="ae ky" href="https://en.wikipedia.org/wiki/Ubuntu" rel="noopener ugc nofollow" target="_blank"> Ubuntu </a>操作系统、Python和Flask将您的<code class="fe mu mv mw mx b">app.py</code>文件复制到容器中；并使您的计算机内部网络可以访问该容器。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="d823" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要将多个图像捆绑在一起，您需要运行一个<a class="ae ky" href="https://docs.docker.com/compose/" rel="noopener ugc nofollow" target="_blank"> Docker Compose </a>。下面是将Flask应用程序与Postgres数据库捆绑在一起的合成文件的样子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="c906" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用Docker，我们可以简单地向我们的收件人发送一些Docker图像和一个Docker合成文件，告诉他们运行<code class="fe mu mv mw mx b">docker compose up</code>，然后在他们的浏览器中导航到一个URL(例如<code class="fe mu mv mw mx b">http://localhost:5000</code>)。就是这样。用户可以查看Compose文件以了解正在使用哪些服务(例如，我们是否正在使用Postgres vs. MySQL数据库)，否则大多数代码都不会被使用。</p><h1 id="2284" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">第三级:Heroku</h1><p id="8c71" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">你的收件人需要做的事情:</em> </strong> <em class="lv">点击一个网址。</em></p><p id="dabc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于我们最后的抽象层次，我们删除所有代码。没有GitHub repos，没有命令行。当你在像<a class="ae ky" href="https://www.heroku.com/what" rel="noopener ugc nofollow" target="_blank"> Heroku </a>、<a class="ae ky" href="https://aws.amazon.com/what-is-aws/" rel="noopener ugc nofollow" target="_blank"> AWS </a>或<a class="ae ky" href="https://www.cloudways.com/blog/what-is-digital-ocean/" rel="noopener ugc nofollow" target="_blank"> DigitalOcean </a>这样的服务上托管你的应用时，某个数据中心的服务器会负责运行你的应用。然后，你的用户只需要点击一个URL，就可以把他们带到那个服务器。</p><p id="b7bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个抽象层次中，<strong class="lb iu">你的用户看到的只是你的应用的</strong> <a class="ae ky" href="https://frontendmasters.com/books/front-end-handbook/2018/what-is-a-FD.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">前端</strong></a><strong class="lb iu">——通常是一个图形界面。</strong>【3】下面举例，是我写的一个垃圾邮件捕捉app 的截图<a class="ae ky" href="https://spam-catcher.herokuapp.com" rel="noopener ugc nofollow" target="_blank">。除了网页上的HTML和CSS，你无法知道幕后发生了什么。(除非你去看GitHub repo或者阅读我写的博客系列。；-))</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/8834cb009c3fe370973f46b5dc81c76a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QA9PUfvD5eNqqWDtzqGrgQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截图</p></figure><p id="63c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你的应用程序的前端代码写得很好，即使是狡猾的用户也无法判断你的应用程序的后端是100行代码还是数百万行代码。事实上，这是大多数应用程序的工作方式:当你打开谷歌地图或Slack时，你看不到源代码——你只看到用户界面。</p><p id="315f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在商业环境中，只向用户展示你想让他们看到的东西，而不是透露你的应用程序的所有秘密，变得至关重要。例如，你不希望好奇的用户发现其他用户的私人数据，或者与世界分享你公司漂亮的聚类算法是如何工作的。在这种情况下，我们的最终抽象层对于共享您的项目是必要的。</p><h1 id="f278" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">结论</h1><p id="e318" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">这篇文章旨在回答这个问题，“我如何与他人分享我的编码项目？”事实证明，答案取决于你希望你的用户如何进入杂草中！</p><p id="6964" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最不抽象的方法是发送一个<strong class="lb iu">GitHub</strong>repo——原始代码。这是协作的理想选择，因为你的接收者可以清楚地看到你的应用程序是如何工作的。但是对他们来说，实际上<em class="lv">运行</em>你的项目可能很难，因为他们需要重新创建所有的库、语言，甚至可能是你正在使用的操作系统。</p><p id="0a36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一个抽象层次是<strong class="lb iu"> Docker </strong>，在这里你可以创建其他人可以下载的软件“快照”。这消除了管理项目依赖关系的麻烦，并且大多数实际代码对用户是隐藏的。然而，他们仍然可以看到你的应用程序使用了哪些<em class="lv">服务</em>——确切的数据库风格，你的模型是使用Python还是R，等等。</p><p id="a006" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后一层是用一个像Heroku这样的服务托管你的代码，并给你的接收者发送一个URL。这对用户完全隐藏了任何后端代码，这在业务环境中是理想的。这种方法把你的接收者变成了你产品的消费者，而不是合作者，因为他们不知道幕后发生了什么。</p><p id="0b2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正确的方法取决于你希望你的接收者如何与你的项目互动。但是你也不必只选择这些方式中的一种来共享代码！事实上，我建议与你的用户分享它们:Heroku中的应用程序可以立即与之交互，GitHub repo可以查看底层代码，Dockerfile可以在本地运行。</p><p id="9f95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编码快乐！</p><p id="573e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最好，<br/>马特</p><h1 id="d26f" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">脚注</h1><h2 id="6ca5" class="nc lx it bd ly nd ne dn mc nf ng dp mg li nh ni mi lm nj nk mk lq nl nm mm nn bi translated">1.第二级:码头工人</h2><p id="3a0b" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">每当你谈论Docker时，你可能需要来自虚拟机的必要的歧义消除。虽然Docker容器与你的计算机的其余部分(以及其他Docker容器，除非你显式地链接它们)是隔离的，但是容器<em class="lv">确实</em>共享诸如RAM和CPU之类的主机资源，并且使用相同的主机<a class="ae ky" href="https://en.wikipedia.org/wiki/Kernel_(operating_system)" rel="noopener ugc nofollow" target="_blank">内核</a>。如果不指定限制，一个容器可以愉快地吸走CPU，降低周围所有容器的速度。另一方面，虚拟机有自己的RAM和CPU，并且是真正隔离的。</p><p id="60a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">顺便提一下，当您在Windows或Mac计算机上运行带有Linux操作系统的Docker容器时，Docker实际上是在Linux虚拟机上运行容器<a class="ae ky" href="https://www.docker.com/blog/docker-for-mac-windows-beta/" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="5f43" class="nc lx it bd ly nd ne dn mc nf ng dp mg li nh ni mi lm nj nk mk lq nl nm mm nn bi translated">2.第二级:码头工人</h2><p id="f761" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">从GitHub到Docker和Heroku的一个必要的飞跃是把你的项目变成一个API，让其他软件(比如网络浏览器)和你的代码交流。你可以用Python中的<a class="ae ky" href="https://flask.palletsprojects.com/en/1.1.x/" rel="noopener ugc nofollow" target="_blank"> Flask </a>或者r中的<a class="ae ky" href="https://www.rplumber.io/" rel="noopener ugc nofollow" target="_blank"> Plumber </a>来做这件事。</p><h2 id="d97e" class="nc lx it bd ly nd ne dn mc nf ng dp mg li nh ni mi lm nj nk mk lq nl nm mm nn bi translated">3.第三级:Heroku</h2><p id="ce9a" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">图形界面对于那些受众包括非程序员的应用程序来说是必不可少的。但是如果你的应用是面向开发者的(例如<a class="ae ky" href="https://developers.google.com/maps" rel="noopener ugc nofollow" target="_blank">谷歌地图API </a>而不是普通的谷歌地图)，那么“前端”可能只是你命令行中的一个小小的欢迎信息。无论哪种方式，后端代码仍然对您完全隐藏。</p></div></div>    
</body>
</html>