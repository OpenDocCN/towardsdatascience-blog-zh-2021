<html>
<head>
<title>Fetching green areas from OSM data in Toledo</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从托莱多的 OSM 数据中提取绿色区域</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/fetching-green-areas-from-osm-data-a6ff835c40dc?source=collection_archive---------18-----------------------#2021-12-31">https://towardsdatascience.com/fetching-green-areas-from-osm-data-a6ff835c40dc?source=collection_archive---------18-----------------------#2021-12-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="afc8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用 OSMnx 以几何图形的形式检索公园</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/750438173bc085beb5bc14dd15a7d479.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NIKJxr0864WQMn37IWQ7QQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供。OSM 数据托莱多市中心(建筑、道路、公园)</p></figure><p id="4f8a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我在赫尔辛基大学的自动化 GIS 课程中担任研究助理的经历非常棒。我支持学生的任务，提供 GIS 流程自动化方面的提示。我很高兴看到地理学家是如何用 python 脚本接管地理空间分析的。这些课结束了，但学到的东西还在。我想保留的一个类是由<a class="lv lw ep" href="https://medium.com/u/c490d872f7a?source=post_page-----a6ff835c40dc--------------------------------" rel="noopener" target="_blank"> Geoff Boeing </a>创建的 python 库<a class="ae lu" href="https://geoffboeing.com/2016/11/osmnx-python-street-networks/" rel="noopener ugc nofollow" target="_blank"> OSMnx </a>的用法。多亏了这个图书馆，从世界各地的城市获取街道网络成为可能。此外，还可以获取其他元素，如本编码实践所示。我在这里展示了一个关于如何绘制绿色区域和街道网络的简短教程。</p><p id="5133" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你有兴趣从 OSM 找到更多的几何物体，你可以仔细查看<a class="ae lu" href="https://wiki.openstreetmap.org/wiki/Buildings" rel="noopener ugc nofollow" target="_blank"> OSM 维基上的建筑标签</a>。您可以使用标签来检索咖啡馆、市场、停车场等。另一个有用的网站是<a class="ae lu" href="https://nominatim.openstreetmap.org/ui/search.html?q=toledo" rel="noopener ugc nofollow" target="_blank"> OSM 域名</a>，在那里你可以找到你想要从 OSMnx 中检索数据的地方的名称。因此，不要怀疑测试它与您想要的城市，不要忘记分享您的地图。我会很高兴看到你的作品。我在这种情况下是托莱多。</p><blockquote class="lx"><p id="407b" class="ly lz it bd ma mb mc md me mf mg lt dk translated">找到此回购中的材料:<a class="ae lu" href="https://github.com/bryanvallejo16/fetch_OSM_data" rel="noopener ugc nofollow" target="_blank">获取 OSM </a></p></blockquote><h1 id="995f" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">编码实践</h1><p id="fe37" class="pw-post-body-paragraph ky kz it la b lb mz ju ld le na jx lg lh nb lj lk ll nc ln lo lp nd lr ls lt im bi translated">首先，您将导入库</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="08c5" class="nj mi it nf b gy nk nl l nm nn"><strong class="nf iu">import </strong>osmnx <strong class="nf iu">as </strong>ox<br/><strong class="nf iu">import </strong>matplotlib.pyplot <strong class="nf iu">as </strong>plt</span></pre><p id="8eaf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后你从 OSM 命名中指定位置并想象这个区域。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="d24a" class="nj mi it nf b gy nk nl l nm nn"><strong class="nf iu"># Specify the name that is used to seach for the data</strong><br/>place_name = “ Toledo, Castile-La Mancha, Spain”</span><span id="aac4" class="nj mi it nf b gy no nl l nm nn"><strong class="nf iu"># Fetch OSM street network from the location</strong><br/>graph = ox.graph_from_place(place_name)</span><span id="f411" class="nj mi it nf b gy no nl l nm nn"><strong class="nf iu"># Plot the streets</strong><br/>fig, ax = ox.plot_graph(graph)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/eafdee64f2db53801af09e7d13722b9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*EGfn92xMZlPFZgQUQ0oHfw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由作者想象。托莱多的曲线图</p></figure><p id="e3e8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">将边(街道网络)放入地理数据框架</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="cb0d" class="nj mi it nf b gy nk nl l nm nn"><strong class="nf iu"># Retrieve nodes and edges</strong><br/>nodes, edges = ox.graph_to_gdfs(graph)</span></pre><p id="bf77" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">将地名(Toledo)放入地理数据框架</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="b208" class="nj mi it nf b gy nk nl l nm nn"><strong class="nf iu"># Get place boundary related to the place name as a geodataframe</strong><br/>area = ox.geocode_to_gdf(place_name)</span><span id="7398" class="nj mi it nf b gy no nl l nm nn">area.plot();</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/b879746a47518db1c03f756417098a7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*-MfS56Kg5W6ZVaoCmjkBDQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供。托莱多行政单位</p></figure><p id="b46c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">获取带有标签和地名的建筑物几何图形作为地理数据框</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="f81b" class="nj mi it nf b gy nk nl l nm nn"><strong class="nf iu"># List key-value pairs for tags</strong><br/>tags = {‘building’: True}</span><span id="7c94" class="nj mi it nf b gy no nl l nm nn">buildings = ox.geometries_from_place(place_name, tags)</span></pre><p id="90d5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">绿色区域/公园的标签很棘手，但希望你能在 OSM 维基中找到你需要的所有对象。现在，让我们把绿色区域作为地理数据框架</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="4f5b" class="nj mi it nf b gy nk nl l nm nn"><strong class="nf iu"># List key-value pairs for tags</strong><br/>tags = {‘leisure’: ‘park’, ‘landuse’: ‘grass’}</span><span id="dddd" class="nj mi it nf b gy no nl l nm nn"><strong class="nf iu"># Get the data</strong><br/>parks = ox.geometries_from_place(place_name, tags)</span><span id="af96" class="nj mi it nf b gy no nl l nm nn">parks.plot(color="green");</span></pre><p id="63a4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在我们一起来出图。在整个地区。</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="fcae" class="nj mi it nf b gy nk nl l nm nn">fig, ax = plt.subplots(figsize=(12,8))</span><span id="aabc" class="nj mi it nf b gy no nl l nm nn"><strong class="nf iu"># Plot the footprint</strong><br/>area.plot(ax=ax, facecolor=’black’, zorder=0)</span><span id="eb64" class="nj mi it nf b gy no nl l nm nn"><strong class="nf iu"># Plot street edges</strong><br/>edges.plot(ax=ax, linewidth=0.5, edgecolor=’dimgray’, zorder=1)</span><span id="9b97" class="nj mi it nf b gy no nl l nm nn"><strong class="nf iu"># Plot buildings</strong><br/>buildings.plot(ax=ax, facecolor=’silver’, alpha=0.7, zorder=2)</span><span id="fe14" class="nj mi it nf b gy no nl l nm nn"><strong class="nf iu"># Plot parks<br/>parks.plot(ax=ax, color=’green’, alpha=0.7, markersize=10, zorder=3)</strong></span><span id="4562" class="nj mi it nf b gy no nl l nm nn">plt.tight_layout()<br/>plt.axis(‘off’)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/d427af7381989b00bae65775b9ffa09f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BcZCsK8vmA-CG6huoSTgRA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供。获取 OSM 数据的托莱多</p></figure><p id="e47e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">由于我们注意到区域太大，所以我们将 xlim 和 ylim 指定到市中心，以便以更好的方式可视化 OSM 数据。只需在此之前添加到单元格的末尾</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="e7a9" class="nj mi it nf b gy nk nl l nm nn">plt.xlim((-4.05, -4.01))<br/>plt.ylim((39.89, 39.85))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/158c61d08553025566c78485fd4af7bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*xwO-KtZyBEcIOlBxGt_GaQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供。获取 OSM 数据的托莱多市中心</p></figure><p id="fae1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以保存地理数据框，并根据自己的喜好和设计创建地图。主要有:<code class="fe nt nu nv nf b">edges</code>、<code class="fe nt nu nv nf b">area</code>、<code class="fe nt nu nv nf b">parks</code>和<code class="fe nt nu nv nf b">buildings</code></p><h1 id="e43d" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz nw ka mt kc nx kd mv kf ny kg mx my bi translated"><strong class="ak">结论</strong></h1><p id="3dc5" class="pw-post-body-paragraph ky kz it la b lb mz ju ld le na jx lg lh nb lj lk ll nc ln lo lp nd lr ls lt im bi translated">OSMnx 确实可以方便地获取街道网络。它的特别之处在于，您可以在分析中包含大量的几何对象选项。像医院、公园、市场、咖啡馆、餐馆或不同种类的建筑。OSM 维基会给你线索。我希望这是有用的。学习好；)</p></div></div>    
</body>
</html>