<html>
<head>
<title>A Quick Guide to Part of Speech Tagging</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">词性标注快速指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/part-of-speech-tagging-514c25fd7882?source=collection_archive---------12-----------------------#2021-12-11">https://towardsdatascience.com/part-of-speech-tagging-514c25fd7882?source=collection_archive---------12-----------------------#2021-12-11</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="b5a1" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">利用NLP的这一重要组成部分来执行客户意见分析</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/164c9c8f759483a579a21e360cdfd548.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B3wD_wf2US_QSHXP"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">亚历山大·佩莱斯在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="87ee" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">什么是词类？</h1><p id="f5ff" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">词性是描述单词语法功能的一种方式。在自然语言处理(NLP)中，词性是语言模型和解释文本的基本构件。虽然在NLP的高级功能中使用了POS标签，但是理解它们本身是很重要的，并且可以在文本分析中利用它们达到有用的目的。</p><p id="8a75" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">英语中有八种(有时是九种)不同的词类被普遍定义为<strong class="lu iv">。<a class="ae kz" href="https://www.butte.edu/departments/cas/tipsheets/grammar/parts_of_speech.html" rel="noopener ugc nofollow" target="_blank">布特学院</a>介绍以下定义:</strong></p><blockquote class="mt mu mv"><p id="a4a0" class="ls lt mw lu b lv mo jv lx ly mp jy ma mx mq md me my mr mh mi mz ms ml mm mn in bi translated">名词:名词是一个人、地方、事物或想法的名称。<br/> <strong class="lu iv">代词</strong>:代词是用来代替名词的词。<br/> <strong class="lu iv">动词</strong>:动词表示动作或存在。<br/> <strong class="lu iv">形容词</strong>:形容词修饰或描述名词或代词。副词:副词修饰或描述一个动词、一个形容词或另一个副词。<br/> <strong class="lu iv">介词</strong>:介词是放在名词或代词前的词，构成短语，修饰句子中的另一个词。<br/> <strong class="lu iv">连词</strong>:连词连接单词、短语或从句。<br/> <strong class="lu iv">感叹词</strong>:感叹词是用来表达情感的词。<br/> <strong class="lu iv">限定词或冠词</strong>:表示确定(the)或不确定(A，an)的语法标记。这些并不总是被认为是词性，但通常包含在词性标注库中。</p></blockquote><h1 id="32eb" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">词性标注的基础</h1><p id="37ac" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">让我们从一些简单的例子开始，这些例子使用了三个常见的Python库:NLTK、TextBlob和Spacy。我们将为每一个做绝对的基础，并比较结果。</p><p id="4651" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">从导入所有需要的库开始。</p><pre class="kk kl km kn gu na nb nc bn nd ne bi"><span id="a668" class="nf lb iu nb b be ng nh l ni nj">import nltk<br/><br/>from textblob import TextBlob<br/>from textblob.taggers import PatternTagger<br/><br/>import spacy</span></pre><p id="b35a" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">在我们的例子中，我们将使用两个带有一个常用词的句子，<em class="mw"> book </em>，这个词可以是名词也可以是动词，来测试词性标注在上下文中的表现。</p><ul class=""><li id="020f" class="nk nl iu lu b lv mo ly mp mb nm mf nn mj no mn np nq nr ns bi translated">请帮我订一张去加州的机票</li><li id="8eb6" class="nk nl iu lu b lv nt ly nu mb nv mf nw mj nx mn np nq nr ns bi translated"><em class="mw">我读了一本非常好的书</em></li></ul><h1 id="6c40" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">NLTK</h1><p id="e716" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">先说Python中NLP最常见的库；自然语言工具包或<strong class="lu iv"> NLTK </strong>。</p><pre class="kk kl km kn gu na nb nc bn nd ne bi"><span id="7b42" class="nf lb iu nb b be ng nh l ni nj">tokenized_sent = nltk.sent_tokenize("Please book my flight to California")<br/>[nltk.pos_tag(nltk.word_tokenize(word)) for word in tokenized_sent]</span></pre><pre class="ny na nb nc bn nd ne bi"><span id="77d9" class="nf lb iu nb b be ng nh l ni nj">[[('Please', 'NNP'),<br/>  ('book', 'NN'),<br/>  ('my', 'PRP$'),<br/>  ('flight', 'NN'),<br/>  ('to', 'TO'),<br/>  ('California', 'NNP')]]</span></pre><pre class="ny na nb nc bn nd ne bi"><span id="6f85" class="nf lb iu nb b be ng nh l ni nj">tokenized_sent = nltk.sent_tokenize("I read a very good book")<br/>[nltk.pos_tag(nltk.word_tokenize(word)) for word in tokenized_sent]</span></pre><pre class="ny na nb nc bn nd ne bi"><span id="8e08" class="nf lb iu nb b be ng nh l ni nj">[[('I', 'PRP'),<br/>  ('read', 'VBP'),<br/>  ('a', 'DT'),<br/>  ('very', 'RB'),<br/>  ('good', 'JJ'),<br/>  ('book', 'NN')]]</span></pre><p id="c5b8" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">我们在这里注意到的是，在大多数情况下，<strong class="lu iv"> NLTK </strong>正确地识别了上下文中的单词；然而，在我们的第一句话中，有几个错误，如<em class="mw"> Please </em>被标记为<em class="mw">专有名词(NNP) </em>和<em class="mw"> book </em>被标记为<em class="mw">名词(NN) </em>，而它应该是一个<em class="mw">动词(VB) </em>。</p><p id="b99c" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated"><strong class="lu iv">注意:</strong>关于标签含义的列表，请参见<a class="ae kz" href="https://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html" rel="noopener ugc nofollow" target="_blank"> Penn Treebank项目</a>。</p><h1 id="d32f" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">文本Blob</h1><p id="f74d" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">让我们试试另一个名为<strong class="lu iv"> TextBlob </strong>的库，它提供了一个简单的API来执行标准的自然语言处理(NLP)任务。这是NLP库的一个非常好的Pythonic实现，简化了一些常见的NLP任务。<strong class="lu iv"> TextBlob </strong>做的大部分事情是<em class="mw">包装NLTK </em>和其他流行的NLP库，使它们更容易使用。</p><pre class="kk kl km kn gu na nb nc bn nd ne bi"><span id="c845" class="nf lb iu nb b be ng nh l ni nj">blob = TextBlob("Please book my flight to California", pos_tagger=PatternTagger())<br/>blob.tags</span></pre><pre class="ny na nb nc bn nd ne bi"><span id="3685" class="nf lb iu nb b be ng nh l ni nj">[('Please', 'VB'),<br/> ('book', 'NN'),<br/> ('my', 'PRP$'),<br/> ('flight', 'NN'),<br/> ('to', 'TO'),<br/> ('California', 'NNP')]</span></pre><pre class="ny na nb nc bn nd ne bi"><span id="74b6" class="nf lb iu nb b be ng nh l ni nj">blob = TextBlob("I read a very good book", pos_tagger=PatternTagger())<br/>blob.tags</span></pre><pre class="ny na nb nc bn nd ne bi"><span id="067e" class="nf lb iu nb b be ng nh l ni nj">[('I', 'PRP'),<br/> ('read', 'VB'),<br/> ('a', 'DT'),<br/> ('very', 'RB'),<br/> ('good', 'JJ'),<br/> ('book', 'NN')]</span></pre><p id="2124" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">注意在Blob的初始化中使用了<code class="fe nz oa ob nb b">PatternTagger</code>。默认情况下使用NLTK的tagger，产生与上面相同的结果。这允许我们尝试不同的POS Tagger并检查其性能。我们可以看到<strong class="lu iv"> TextBlob </strong>这次正确地将<em class="mw"> Please </em>识别为<em class="mw">动词</em>但在第一句中仍然遗漏了<em class="mw"> Book </em>为<em class="mw">动词</em>。</p><h1 id="583a" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">空间</h1><p id="268c" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">Spacy 是这三款中最现代、最先进的。它对于大量的NLP任务来说非常健壮，如果需要更多的能力，还可以进行定制。这是我目前最喜欢的NLP库，让我们用我们的句子来看看吧。</p><pre class="kk kl km kn gu na nb nc bn nd ne bi"><span id="f2c3" class="nf lb iu nb b be ng nh l ni nj">doc = nlp("Please book my flight to California")<br/>for token in doc:<br/>    print(token.text, token.pos_)</span></pre><pre class="ny na nb nc bn nd ne bi"><span id="9770" class="nf lb iu nb b be ng nh l ni nj">Please INTJ<br/>book VERB<br/>my PRON<br/>flight NOUN<br/>to ADP<br/>California PROPN</span></pre><pre class="ny na nb nc bn nd ne bi"><span id="7e19" class="nf lb iu nb b be ng nh l ni nj">doc = nlp("I read a very good book")<br/>for token in doc:<br/>    print(token.text, token.pos_)</span></pre><pre class="ny na nb nc bn nd ne bi"><span id="0487" class="nf lb iu nb b be ng nh l ni nj">I PRON<br/>read VERB<br/>a DET<br/>very ADV<br/>good ADJ<br/>book NOUN</span></pre><p id="ee49" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">我们在这里看到<strong class="lu iv"> Spacy </strong>正确地标记了我们所有的单词，它将<em class="mw"> Please </em>识别为一个<em class="mw">感叹词</em>而不是一个<em class="mw">动词</em>，后者更准确，并且在第一句中还将<em class="mw"> Book </em>识别为一个<em class="mw">动词</em>。</p><p id="d6b0" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">这些库各有利弊。我相信你应该从NLTK开始理解它是如何工作的，特别是因为它对不同的语料库有如此强大的支持。当你想要简单的处理几个NLP任务时，TextBlob 是很棒的，当你想要一个最健壮的NLP库时，text blob<strong class="lu iv">Spacy</strong>是很棒的。</p><p id="68a1" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">看看这个伟大的自然语言系列<a class="ae kz" href="https://pythonprogramming.net/tokenizing-words-sentences-nltk-tutorial/" rel="noopener ugc nofollow" target="_blank"> NLTK和Python</a>来自<em class="mw">PythonProgramming.net</em>。</p><h1 id="09e5" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">用词类分析客户之声</h1><p id="cef5" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">NLP执行的最常见的任务之一是分析来自各种来源的客户反馈，并确定客户对您的产品或服务的评价。这种类型的分析称为<strong class="lu iv">客户分析之声</strong>或<strong class="lu iv"> VOC </strong>。</p><p id="5280" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">有许多方法可以进行VOC分析。从<em class="mw">情感分析</em>到<em class="mw">话题建模</em>，你可以使用的一种方法是词性标注来缩小<em class="mw">客户在谈论什么</em>以及<em class="mw">他们如何谈论你的产品和服务。</em></p><p id="3566" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">用于分析的文本可以来自调查回复、支持票、脸书评论、推文、聊天对话、电子邮件、电话记录和在线评论。假设您有一个客户评论集。你可能想确定的事情之一是人们正在谈论的所有<strong class="lu iv">产品</strong>。您可能在数据库中有一个完美的产品分类，但是如果您没有达到您需要的粒度级别呢？对于这个例子，我们将使用Kaggle上<a class="ae kz" href="https://www.kaggle.com/nicapotato/womens-ecommerce-clothing-reviews" rel="noopener ugc nofollow" target="_blank">女装电商服装评论</a>的数据集。</p><p id="5ea4" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">导入数据集后，我们可以为所有单词及其POS标签创建一个新的<strong class="lu iv">数据帧</strong>。下面的函数获取每个评论并确定每个单词的POS标签；一个<strong class="lu iv">重要的</strong>区别，因为我们得到了句子中每个单词的<em class="mw">上下文</em>，正如我们在上面看到的，这对于关联哪个POS标签有很大的区别。</p><pre class="kk kl km kn gu na nb nc bn nd ne bi"><span id="e05c" class="nf lb iu nb b be ng nh l ni nj">def pos_tag(text):<br/>    df = pd.DataFrame(columns = ['WORD', 'POS'])<br/>    doc = nlp(text)<br/>    for token in doc:<br/>        df = df.append({'WORD': token.text, 'POS': token.pos_}, ignore_index=True)<br/>    return df</span></pre><p id="586a" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">接下来，我们可以对评论的子集运行该函数。由于我们使用的是单个单词，数量可能是数百万，我们很可能不需要整个数据集。</p><pre class="kk kl km kn gu na nb nc bn nd ne bi"><span id="cc6f" class="nf lb iu nb b be ng nh l ni nj"># Take a random sample of reviews<br/>df2 = df.sample(10000, random_state=42).copy()<br/># Create an empty dataframe to store the results<br/>df_pos = pd.DataFrame(columns = ['WORD', 'POS'])<br/># Iterate through the reviews and append each POS tag to the dataframe<br/>df_pos = pos_tag(df2['Review Text'].to_string())<br/>df_pos.shape</span></pre><pre class="ny na nb nc bn nd ne bi"><span id="6c1e" class="nf lb iu nb b be ng nh l ni nj">(144498, 2)</span></pre><p id="1124" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">接下来，我们可以对每个POS标签进行分组和计数，以查看使用频率最高的标签。</p><pre class="kk kl km kn gu na nb nc bn nd ne bi"><span id="e9fc" class="nf lb iu nb b be ng nh l ni nj">df_top_pos = df_pos.groupby('POS')['POS'].count().\<br/>    reset_index(name='count').sort_values(['count'],ascending=False).head(15)</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oc"><img src="../Images/f65aa283555e71dfedbc5ba272da2540.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MRWgmRZ5OzKztfPI.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者图片</p></figure><p id="7541" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">太好了！我们有很多标签和单词。然而，这些标签本身并不能告诉我们太多，只能让我们看到不同标签的分布情况。然而，现在我们可以使用我们的标签来提取可能代表<strong class="lu iv">产品</strong>的词，而不是那些代表我们评论中其他词的词。为此，我们可以只过滤<strong class="lu iv">名词</strong>。</p><pre class="kk kl km kn gu na nb nc bn nd ne bi"><span id="f21c" class="nf lb iu nb b be ng nh l ni nj">df_nn = df_pos[df_pos['POS'] == 'NOUN'].copy()<br/>df_nn.groupby('WORD')['WORD'].count().reset_index(name='count').\<br/>    sort_values(['count'], ascending=False).head(10)</span></pre><pre class="ny na nb nc bn nd ne bi"><span id="7dd9" class="nf lb iu nb b be ng nh l ni nj">         WORD  COUNT<br/>667     dress   1779<br/>2062      top   1176<br/>1764    shirt    463<br/>1971  sweater    437<br/>453     color    383<br/>1807     size    312<br/>765    fabric    287<br/>1922    store    274<br/>1822    skirt    256<br/>1416    pants    246</span></pre><p id="d261" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">看那个！我们有这个评论子集中使用的前15个词，其中大多数看起来像产品类别。如果我们现在查看相同评论子集的顶级形容词会怎么样？</p><pre class="kk kl km kn gu na nb nc bn nd ne bi"><span id="d42b" class="nf lb iu nb b be ng nh l ni nj">df_adj = df_pos[df_pos['POS'] == 'ADJ'].copy()<br/>df_adj.groupby('WORD')['WORD'].count().reset_index(name='count').\<br/>    sort_values(['count'], ascending=False).head(15)</span></pre><pre class="ny na nb nc bn nd ne bi"><span id="fc9f" class="nf lb iu nb b be ng nh l ni nj">            WORD  COUNT<br/>400        great    481<br/>144    beautiful    405<br/>248         cute    398<br/>784         soft    321<br/>218  comfortable    272<br/>632      perfect    243<br/>585         nice    196<br/>776        small    176<br/>41         Great    149<br/>666       pretty    146<br/>394     gorgeous    144<br/>511       little    142<br/>611        other    142<br/>523       lovely    125<br/>349   flattering    122</span></pre><p id="c0c9" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">忠太🎉！描述<em class="mw">顾客如何</em>谈论我们产品的最常用词。我们有很多积极的词汇，但也有一些词汇可能值得研究。像<em class="mw">小号</em>和<em class="mw">小号</em>这样的东西潜在地说明了尺码问题，有些衣服不太合身。产品经理可以利用这些信息，更深入地研究提到这个词的评论。</p><p id="3f28" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">如上所述，还有其他可能更好的方法来分析文本，比如情感分析和主题建模。然而，这是一种在实际用例中应用POS标记的有趣方式，甚至可以与其他NLP工具结合使用，以帮助您最大限度地利用客户的反馈。</p><p id="969b" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">这个分析的所有代码都可以在<a class="ae kz" href="https://github.com/broepke/POS" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上获得。</p><p id="f03d" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，可以考虑报名成为一名媒体成员。一个月5美元，让你可以无限制地访问成千上万篇文章。如果你使用<a class="ae kz" href="https://medium.com/@broepke/membership" rel="noopener">我的链接</a>注册，我会赚一小笔佣金，不需要你额外付费。</p><h1 id="e248" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">参考</h1><p id="54bb" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated"><a class="ae kz" href="https://en.wikipedia.org/wiki/Part_of_speech" rel="noopener ugc nofollow" target="_blank">维基百科上的词性</a></p><p id="bd82" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated"><a class="ae kz" href="https://www.quora.com/What-are-the-applications-of-tagging-in-NLP" rel="noopener ugc nofollow" target="_blank">标注在自然语言处理中有哪些应用？</a></p><p id="91d0" class="pw-post-body-paragraph ls lt iu lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn in bi translated"><a class="ae kz" href="https://www.butte.edu/departments/cas/tipsheets/grammar/parts_of_speech.html" rel="noopener ugc nofollow" target="_blank">八种词性</a></p></div></div>    
</body>
</html>