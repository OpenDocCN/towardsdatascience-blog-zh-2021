<html>
<head>
<title>Full Deployment of Jupyter Notebooks on a Server including TLS/SSL with Let’s Encrypt</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在服务器上全面部署Jupyter笔记本电脑，包括TLS/SSL和加密功能</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/full-deployment-of-jupyter-notebooks-on-a-server-including-tls-ssl-with-lets-encrypt-b30cc758881e?source=collection_archive---------8-----------------------#2021-05-29">https://towardsdatascience.com/full-deployment-of-jupyter-notebooks-on-a-server-including-tls-ssl-with-lets-encrypt-b30cc758881e?source=collection_archive---------8-----------------------#2021-05-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f4ca" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在服务器或云上完成Jupyter笔记本电脑或JupyterLab的设置和安装</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f6685697bf7c064082714f646f361d71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aWdD83kA38aZ1lEd.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://commons.wikimedia.org/wiki/File:Leitstand_2.jpg" rel="noopener ugc nofollow" target="_blank">维基共享资源</a></p></figure><p id="9fc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Jupyter Notebook是一个强大的工具，但是你如何在服务器上使用它呢？在本教程中，你将看到如何在服务器上设置Jupyter notebook，如<a class="ae ky" href="https://m.do.co/c/cd7e4dd5ee1f" rel="noopener ugc nofollow" target="_blank">数字海洋</a>、<a class="ae ky" href="https://hetzner.cloud/?ref=FkpdQcqbGXhP" rel="noopener ugc nofollow" target="_blank">海兹纳</a>、<a class="ae ky" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank"> AWS </a>或其他大多数可用的主机提供商。此外，您将看到如何通过SSH隧道或TLS/SSL使用Jupyter notebooks和<a class="ae ky" href="https://letsencrypt.org/" rel="noopener ugc nofollow" target="_blank">让我们加密</a>。本文原载<a class="ae ky" href="https://janakiev.com/blog/jupyter-notebook-server/" rel="noopener ugc nofollow" target="_blank">此处</a>。</p><p id="652d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Jupyter 是一个开源的web应用程序，支持从浏览器进行交互式计算。您可以创建包含实时代码的文档、带有Markdown的文档、等式、可视化甚至小部件和其他有趣的功能。Jupyter来自支持的三种核心语言:Julia、Python和r。Jupyter连接到使用特定语言的内核，最常见的是IPython内核。它支持各种各样的内核，你应该能找到你需要的大多数语言。本教程写于<a class="ae ky" href="https://jupyterlab.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> JupyterLab </a>，Jupyter笔记本的下一步发展:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/21124ee269b337d47ede0ed7c9a5674f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b7IhUHUtGaA9tr0h.png"/></div></div></figure><p id="e2a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，我们将使用Ubuntu 18.04/20.04服务器，但大多数步骤应该与Debian 9/10发行版相当相似。我们将首先创建SSH密钥，在服务器上添加一个新用户，并使用<a class="ae ky" href="https://www.anaconda.com/" rel="noopener ugc nofollow" target="_blank"> Anaconda </a>安装Python和Jupyter。接下来，您将设置Jupyter在服务器上运行。最后，你可以选择在SSH隧道上运行Jupyter笔记本，或者在SSL上运行<a class="ae ky" href="https://letsencrypt.org/" rel="noopener ugc nofollow" target="_blank">让我们加密</a>。</p><h1 id="8c1c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">创建SSH密钥</h1><p id="af27" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们从一个全新的服务器开始，为了在访问您的服务器时增加更多的安全性，您应该考虑使用SSH密钥对。这些密钥对由上传到服务器的公钥和保存在机器上的私钥组成。一些主机提供商要求您在创建服务器实例之前上传公钥。要创建新的SSH密钥，您可以使用<a class="ae ky" href="https://www.ssh.com/ssh/keygen/" rel="noopener ugc nofollow" target="_blank"> ssh-keygen </a>工具。要创建密钥对，您只需键入以下命令:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="86aa" class="mx lw it mt b gy my mz l na nb">ssh-keygen</span></pre><p id="5621" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您愿意，这将提示您添加文件路径和密码。还有其他选项参数可供选择，如公钥算法或文件名。你可以在这里找到一个非常好的教程<a class="ae ky" href="https://www.ssh.com/ssh/keygen/" rel="noopener ugc nofollow" target="_blank">关于如何用ssh-keygen为Linux或macOS创建一个新的SSH密钥。如果您使用的是Windows，您可以使用PuTTYgen创建SSH-keys，如这里的</a><a class="ae ky" href="https://www.ssh.com/ssh/putty/windows/puttygen" rel="noopener ugc nofollow" target="_blank">所述</a>。如果您的主机提供商在创建前不需要公钥，您可以使用<a class="ae ky" href="https://www.ssh.com/ssh/copy-id" rel="noopener ugc nofollow" target="_blank"> ssh-copy-id </a>工具复制公钥:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="3024" class="mx lw it mt b gy my mz l na nb">ssh-copy-id -i ~/.ssh/jupyter-cloud-key user@host</span></pre><p id="9739" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，您可以通过以下方式连接到您的服务器:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="7c17" class="mx lw it mt b gy my mz l na nb">ssh -i ~/.ssh/id_rsa root@host</span></pre><p id="517a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其中<code class="fe nc nd ne mt b">~/.ssh/id_rsa</code>是您的ssh私有密钥的路径，而<code class="fe nc nd ne mt b">host</code>是您的服务器实例的主机地址或IP地址。</p><h1 id="64db" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">添加新用户</h1><p id="aea1" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在一些服务器中，您是作为根用户开始的。直接使用根用户被认为是一种不好的做法，因为它有很多特权，如果某些命令是意外执行的，这些特权可能是破坏性的。如果您已经有用户，可以跳过这一部分。请注意，您可以将以下所有命令中的<code class="fe nc nd ne mt b">cloud-user</code>替换为您想要的用户名。首先创建一个新用户:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="5536" class="mx lw it mt b gy my mz l na nb">adduser cloud-user</span></pre><p id="d2bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个命令会问你几个问题，包括密码。接下来，您需要向该用户授予管理权限。您可以通过键入以下命令来完成此操作:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="4301" class="mx lw it mt b gy my mz l na nb">usermod -aG sudo cloud-user</span></pre><p id="6253" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你可以用<code class="fe nc nd ne mt b">su cloud-user</code>切换到新用户，或者用<code class="fe nc nd ne mt b">ssh cloud-user@host</code>连接到你的服务器。或者，您可以将root用户的SSH密钥添加到新用户中，以提高安全性。否则，您可以跳到下一节如何安装Anaconda。现在，如果您有根用户的现有SSH密钥，您可以将公钥从根主文件夹复制到用户主文件夹，如下所示:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="9613" class="mx lw it mt b gy my mz l na nb">mkdir /home/cloud-user/.ssh<br/>cp /root/.ssh/authorized_keys /home/cloud-user/.ssh/</span></pre><p id="5db5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，您需要更改文件夹和公钥的权限:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="cab5" class="mx lw it mt b gy my mz l na nb">cd /home/user/<br/>chmod 700 .ssh/<br/>chmod 600 .ssh/authorized_keys</span></pre><p id="3916" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您正在为您的用户使用密码，您需要更新<code class="fe nc nd ne mt b">/etc/ssh/sshd_config</code>:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="7530" class="mx lw it mt b gy my mz l na nb">nano /etc/ssh/sshd_config</span></pre><p id="40a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，您希望找到行<code class="fe nc nd ne mt b">PasswordAuthentication no</code>，并将<code class="fe nc nd ne mt b">no</code>更改为<code class="fe nc nd ne mt b">yes</code>，以允许密码验证。最后，您希望通过键入<code class="fe nc nd ne mt b">service ssh restart</code>来重启SSH服务。对于其他发行版，请看一下这个指南，在那里你也会看到如何设置防火墙。</p><h1 id="566c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">安装Anaconda</h1><p id="49dc" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Anaconda是Python(和R)的开源发行版，用于科学计算，包括包管理和部署。有了它，你就有了你需要的大部分工具，包括Jupyter。要安装Anaconda，请转到linux的<a class="ae ky" href="https://www.anaconda.com/download/#linux" rel="noopener ugc nofollow" target="_blank">下载</a>，并复制最新Python 3.x版本的Linux安装程序链接。然后你可以用<code class="fe nc nd ne mt b">wget</code>下载安装程序:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="89ef" class="mx lw it mt b gy my mz l na nb">wget <a class="ae ky" href="https://repo.anaconda.com/archive/Anaconda3-5.2.0-Linux-x86_64.sh" rel="noopener ugc nofollow" target="_blank">https://repo.anaconda.com/archive/Anaconda3-5.2.0-Linux-x86_64.sh</a></span></pre><p id="02cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，您可以使用<code class="fe nc nd ne mt b">bash</code>安装Anaconda，如下所示:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="4c85" class="mx lw it mt b gy my mz l na nb">bash Anaconda3-5.2.0-Linux-x86_64.sh</span></pre><p id="188e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在安装过程中，当安装过程中出现以下提示时，键入<code class="fe nc nd ne mt b">yes</code>非常重要:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="9cf2" class="mx lw it mt b gy my mz l na nb">Do you wish the installer to prepend the Anaconda3 install location<br/>to PATH in your /home/user/.bashrc ? [yes|no]</span></pre><p id="caac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装完成后，您希望通过Anaconda用以下命令初始化<code class="fe nc nd ne mt b">conda</code>命令行工具和包管理器:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="fc55" class="mx lw it mt b gy my mz l na nb">source .bashrc <br/>conda update conda</span></pre><p id="0108" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这两个命令在您的服务器上设置Anaconda。如果您已经用sudo运行了Anaconda bash文件，您将得到一个<code class="fe nc nd ne mt b">Permission denied</code>错误。你可以通过输入<code class="fe nc nd ne mt b">sudo chown -R $$USER:$$USER /home/user/anaconda3</code>来解决这个<a class="ae ky" href="https://stackoverflow.com/questions/49181799/conda-update-conda-permission-error" rel="noopener ugc nofollow" target="_blank">问题</a>所示的问题。这将使用<a class="ae ky" href="https://en.wikipedia.org/wiki/Chown" rel="noopener ugc nofollow" target="_blank"> chown </a>命令将该文件夹的所有者更改为当前用户。</p><h1 id="32d7" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">正在启动Jupyter笔记本服务器</h1><p id="123d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Jupyter与Anaconda一起安装，但是我们需要做一些配置以便在服务器上运行它。首先，您需要为Jupyter笔记本创建一个密码。您可以通过用<code class="fe nc nd ne mt b">ipython</code>启动IPython shell并生成一个密码散列来实现这一点:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="3e34" class="mx lw it mt b gy my mz l na nb">from IPython.lib import passwd<br/>passwd()</span></pre><p id="1370" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">暂时保存这个结果散列，我们稍后会用到它。接下来，您想要生成一个配置文件，您可以通过键入。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="3a22" class="mx lw it mt b gy my mz l na nb">jupyter-notebook --generate-config</span></pre><p id="f533" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在用<code class="fe nc nd ne mt b">sudo nano ~/.jupyter/jupyter_notebook_config.py</code>打开配置文件，将下面的代码复制到文件中，并用您之前生成的代码替换这个代码片段中的散列:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="8651" class="mx lw it mt b gy my mz l na nb">c = get_config()  # get the config object<br/># do not open a browser window by default when using notebooks<br/>c.NotebookApp.open_browser = False<br/># this is the password hash that we generated earlier.<br/>c.NotebookApp.password = 'sha1:073bb9acaa67:b367308802ab66cb1d7654b6684eafefbd61d004'</span></pre><p id="da3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你应该设置好了。接下来，您可以决定是使用SSH隧道还是使用SSL加密并通过您自己的域名访问您的jupyter笔记本。</p><h1 id="604b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">Linux或MacOS上的SSH隧道</h1><p id="e557" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">您可以通过在负责端口转发的<code class="fe nc nd ne mt b">ssh</code>命令中添加<code class="fe nc nd ne mt b">-L</code>参数来隧道连接到您的服务器。第一个<code class="fe nc nd ne mt b">8888</code>是您将在本地机器上访问的端口(如果您已经为另一个juypter实例使用了这个端口，那么您可以使用端口8889或不同的开放端口)。你可以用<code class="fe nc nd ne mt b">localhost:8888</code>在你的浏览器上访问它。第二部分<code class="fe nc nd ne mt b">localhost:8888</code>指定从服务器访问的跳转服务器地址。因为我们希望在服务器上本地运行笔记本，所以这也是localhost。这意味着我们从服务器通过端口转发到我们机器上的<code class="fe nc nd ne mt b">localhost:8888</code>来访问<code class="fe nc nd ne mt b">localhost:8888</code>。下面是该命令的样子:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="6add" class="mx lw it mt b gy my mz l na nb">ssh -L 8888:localhost:8888 cloud-user@host</span></pre><p id="8995" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您的本地机器上已经运行了另一个Jupyter笔记本，您可以将端口更改为<code class="fe nc nd ne mt b">8889</code>，这将导致命令:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="fb19" class="mx lw it mt b gy my mz l na nb">ssh -L 8889:localhost:8888 cloud-user@host</span></pre><p id="d542" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您可以在服务器上为您的项目创建一个笔记本文件夹，并在其中运行Jupyter notebook:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="9eb9" class="mx lw it mt b gy my mz l na nb">mkdir notebook<br/>cd notebook/<br/>jupyter-notebook</span></pre><p id="ac2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你也可以使用<a class="ae ky" href="https://jupyterlab.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> JupyterLab </a>来代替，这是一个更强大的接口，它也预装了Anaconda。你可以通过输入<code class="fe nc nd ne mt b">jupyter-lab</code>而不是<code class="fe nc nd ne mt b">juypter-notebook</code>来启动它。</p><h1 id="231c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">让我们加密的SSL加密</h1><p id="01e3" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">也可以对你的jupyter笔记本使用SSL加密。这使您能够通过互联网访问您的Jupyter笔记本，从而方便地与您的同事分享结果。要做到这一点，您可以使用<a class="ae ky" href="https://letsencrypt.org/" rel="noopener ugc nofollow" target="_blank">让我们加密</a>，这是一个免费的<a class="ae ky" href="https://en.wikipedia.org/wiki/Certificate_authority" rel="noopener ugc nofollow" target="_blank">认证中心(CA) </a>，它为TLS/SSL证书提供了一种简单的方法。这可以用他们的<a class="ae ky" href="https://certbot.eff.org/" rel="noopener ugc nofollow" target="_blank"> certbot </a>工具全自动完成。要找到您系统的安装指南，请查看此<a class="ae ky" href="https://certbot.eff.org/all-instructions" rel="noopener ugc nofollow" target="_blank">列表</a>。对于Ubuntu 18.04，<a class="ae ky" href="https://certbot.eff.org/lets-encrypt/ubuntubionic-apache.html" rel="noopener ugc nofollow" target="_blank">安装</a>如下所示:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="a786" class="mx lw it mt b gy my mz l na nb">sudo apt-get update<br/>sudo apt-get install software-properties-common<br/>sudo add-apt-repository universe<br/>sudo add-apt-repository ppa:certbot/certbot<br/>sudo apt-get update<br/>sudo apt-get install certbot python-certbot-apache</span></pre><p id="b05a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您可以为您拥有的域运行certbot:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="9c3b" class="mx lw it mt b gy my mz l na nb">sudo certbot certonly -d example.com</span></pre><p id="7b3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成提示后，您应该会看到以下输出:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="45dc" class="mx lw it mt b gy my mz l na nb">IMPORTANT NOTES:<br/> - Congratulations! Your certificate and chain have been saved at:<br/>   /etc/letsencrypt/live/example.com/fullchain.pem<br/>   Your key file has been saved at:<br/>   /etc/letsencrypt/live/example.com/privkey.pem<br/>   Your cert will expire on 2019-05-09. To obtain a new or tweaked<br/>   version of this certificate in the future, simply run certbot again<br/>   with the "certonly" option. To non-interactively renew *all* of<br/>   your certificates, run "certbot renew"<br/> - If you like Certbot, please consider supporting our work by:</span><span id="3590" class="mx lw it mt b gy nf mz l na nb">   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate<br/>   Donating to EFF:                    <a class="ae ky" href="https://eff.org/donate-le" rel="noopener ugc nofollow" target="_blank">https://eff.org/donate-le</a></span></pre><p id="6abb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太好了！您已经准备好了证书和密钥文件。现在，您可以使用jupyter笔记本配置文件中的证书和密钥文件。在此之前，您需要更改证书和密钥文件的所有者(用您自己的用户名更改<code class="fe nc nd ne mt b">user</code>):</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="dd92" class="mx lw it mt b gy my mz l na nb">sudo chown user /usr/local/etc/letsencrypt/live<br/>sudo chown user /usr/local/etc/letsencrypt/archive</span></pre><p id="9fea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，您可以将以下代码添加到<code class="fe nc nd ne mt b">~/.jupyter/jupyter_notebook_config.py</code>配置文件中:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="4a3a" class="mx lw it mt b gy my mz l na nb"># Path to the certificate <br/>c.NotebookApp.certfile = '/etc/letsencrypt/live/example.com/fullchain.pem' <br/># Path to the certificate key we generated<br/>c.NotebookApp.keyfile = '/etc/letsencrypt/live/example.com/privkey.pem' <br/># Serve the notebooks for all IP addresses<br/>c.NotebookApp.ip = '0.0.0.0'</span></pre><p id="cf1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，你可以通过<code class="fe nc nd ne mt b">https://example.com:8888</code>安全地访问Jupyter笔记本。只是确保使用<code class="fe nc nd ne mt b">https://</code>而不是<code class="fe nc nd ne mt b">http://</code>。如果您犯了任何错误，您可以用<code class="fe nc nd ne mt b">sudo certbot delete</code>或<code class="fe nc nd ne mt b">sudo certbot delete --cert-name example.com</code>删除certbot证书。如果您使用的是防火墙，请确保端口<code class="fe nc nd ne mt b">8888</code>是打开的。这里有一个关于使用<a class="ae ky" href="https://en.wikipedia.org/wiki/Uncomplicated_Firewall" rel="noopener ugc nofollow" target="_blank">简单防火墙(UFW) </a>防火墙的很好的<a class="ae ky" href="https://www.digitalocean.com/community/tutorials/ufw-essentials-common-firewall-rules-and-commands" rel="noopener ugc nofollow" target="_blank">指南</a>。</p><h1 id="b117" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="441f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">您已经从头到尾学习了如何为服务器设置Jupyter。随着您设置的每一台服务器，这项任务变得越来越容易。请务必深入研究Linux服务器管理的相关主题，因为一开始使用服务器可能会令人生畏。使用Jupyter，您可以访问各种各样的内核，这些内核使您能够使用其他语言。所有可用内核的列表可以在<a class="ae ky" href="https://github.com/jupyter/jupyter/wiki/Jupyter-kernels" rel="noopener ugc nofollow" target="_blank">这里</a>找到。我希望这是有帮助的，如果你有任何进一步的问题或意见，请在下面的评论中分享。</p><p id="379e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在<a class="ae ky" href="https://janakiev.com/til/jupyter-virtual-envs/" rel="noopener ugc nofollow" target="_blank">之前的教程</a>中提到了如何在Jupyter笔记本中使用虚拟环境。还有一个将Jupyter作为Docker容器运行的选项。例如，您可以使用<a class="ae ky" href="https://hub.docker.com/r/jupyter/datascience-notebook/" rel="noopener ugc nofollow" target="_blank">jupyter/data science-notebook</a>容器。你可以在本指南的<a class="ae ky" href="https://jupyter-docker-stacks.readthedocs.io/en/latest/index.html" rel="noopener ugc nofollow" target="_blank">中阅读更多关于如何使用Jupyter和Docker的信息。关于进一步的安全考虑，请看一下Jupyter笔记本服务器</a>中的<a class="ae ky" href="https://jupyter-notebook.readthedocs.io/en/stable/security.html" rel="noopener ugc nofollow" target="_blank">安全性。以下是我从中学到的更多链接，可能对你也有用:</a></p><ul class=""><li id="4e8f" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><a class="ae ky" href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-18-04" rel="noopener ugc nofollow" target="_blank">初始服务器设置</a></li><li id="4971" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><a class="ae ky" href="https://jupyter-notebook.readthedocs.io/en/stable/public_server.html" rel="noopener ugc nofollow" target="_blank">运行笔记本服务器</a></li><li id="9115" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><a class="ae ky" href="https://www.digitalocean.com/community/tutorials/how-to-set-up-jupyter-notebook-for-python-3" rel="noopener ugc nofollow" target="_blank">如何为Python 3设置Jupyter笔记本</a></li><li id="918e" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><a class="ae ky" href="https://www.digitalocean.com/community/tutorials/how-to-use-certbot-standalone-mode-to-retrieve-let-s-encrypt-ssl-certificates-on-ubuntu-16-04" rel="noopener ugc nofollow" target="_blank">如何使用Certbot独立模式检索加密SSL证书</a></li><li id="a854" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><a class="ae ky" href="https://www.digitalocean.com/community/tutorials/ufw-essentials-common-firewall-rules-and-commands" rel="noopener ugc nofollow" target="_blank"> UFW基础:通用防火墙规则和命令</a></li><li id="cb46" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><a class="ae ky" href="https://janakiev.com/til/jupyter-virtual-envs/" rel="noopener ugc nofollow" target="_blank">在Jupyter笔记本和Python中使用虚拟环境</a></li><li id="e6b8" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><a class="ae ky" href="https://janakiev.com/blog/creating-slides-with-jupyter-notebook/" rel="noopener ugc nofollow" target="_blank">用Jupyter笔记本制作幻灯片</a></li></ul><h1 id="3288" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">更多参考</h1><ul class=""><li id="e5cb" class="ng nh it lb b lc mn lf mo li nu lm nv lq nw lu nl nm nn no bi translated"><a class="ae ky" href="https://perrohunter.com/how-to-use-letsencrypt-certificates-in-jupyter/" rel="noopener ugc nofollow" target="_blank">如何在Jupyter和IPython中使用letsencrypt证书</a></li><li id="8829" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><a class="ae ky" href="https://pythonforundergradengineers.com/add-ssl-and-domain-name-to-jupyterhub.html" rel="noopener ugc nofollow" target="_blank">向Jupyter Hub添加SSL和域名</a></li></ul></div></div>    
</body>
</html>