<html>
<head>
<title>Python Assert Statement — Everything You Need To Know Explained in 5 Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python Assert语句—你需要知道的一切在5分钟内解释完毕</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-assert-statement-everything-you-need-to-know-explained-in-5-minutes-4b13c39c8391?source=collection_archive---------15-----------------------#2021-10-11">https://towardsdatascience.com/python-assert-statement-everything-you-need-to-know-explained-in-5-minutes-4b13c39c8391?source=collection_archive---------15-----------------------#2021-10-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1b20" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">原因、时间和方式—立即学习Python中的assert语句。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9cc6f10c7f436ac654bc37ce61e1ab21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gpoOVBuPNyPAyR6NO7oXCg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@jsnbrsc?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Jason Briscoe </a>在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="b54e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一种解释型和动态类型的语言，Python有着难以预料和难以跟踪的错误的坏名声。这份声明可能会让你少一两次紧张。这是一种捕捉不应该在早期发生的事情的常用方法，最有可能发生在函数的开始。</p><p id="1e92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个简单的布尔表达式，用于检查条件是否返回true。如果是这样，什么都不会发生。如果没有，脚本会用一条可选消息引发一个<code class="fe lv lw lx ly b">AssertionError</code>。</p><p id="d5bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请记住，断言不能代替异常处理。你应该使用<code class="fe lv lw lx ly b">try except</code>块来防止在某个时候必然会发生的任何错误。对不应该发生的事情使用断言。</p><p id="6dee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不想看书？看看我关于这个主题的视频:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="4c53" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">如何使用assert？</h1><p id="fcb2" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">正如您所想象的，Python内置了<code class="fe lv lw lx ly b">assert</code>关键字。它后面必须跟一个条件，如果条件的计算结果为false，您可以选择打印一条消息。</p><p id="4c3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是语法:</p><pre class="kj kk kl km gt nf ly ng nh aw ni bi"><span id="de6a" class="nj mj it ly b gy nk nl l nm nn">assert &lt;condition&gt;, &lt;optional error message&gt;</span></pre><p id="69ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果梅根未成年，她就不能进入俱乐部:</p><pre class="kj kk kl km gt nf ly ng nh aw ni bi"><span id="87c5" class="nj mj it ly b gy nk nl l nm nn">assert age &gt; 18, 'Go home, Megan.'</span></pre><p id="9886" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们暂时离开Megan，关注一个更简单的例子。我们有一个设置为1的变量<code class="fe lv lw lx ly b">x</code>。让我们断言它，看看会发生什么:</p><pre class="kj kk kl km gt nf ly ng nh aw ni bi"><span id="b6ef" class="nj mj it ly b gy nk nl l nm nn">x = 1<br/>assert x == 1</span></pre><p id="b3db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是输出结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/9f283bc98cc664890fb93dbe5e67ad6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C3QC1O_fLyTX_CT_N3WjVg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片1 —断言基础知识(1)(图片由作者提供)</p></figure><p id="bedc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">实际上什么也没发生。这是因为条件评估为真，所以没有引发错误。让我们稍微修改一下代码:</p><pre class="kj kk kl km gt nf ly ng nh aw ni bi"><span id="2073" class="nj mj it ly b gy nk nl l nm nn">x = 1<br/>assert x == 2</span></pre><p id="876b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这次的输出有所不同:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/b9a51dc0b22550f02755f4b8bb9c0fee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g4w7vhk5ofxK5BNeIMdqKg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片2-断言基础(2)(图片由作者提供)</p></figure><p id="5f71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您得到了一个<code class="fe lv lw lx ly b">AssertionError</code>，因为条件评估为假— <code class="fe lv lw lx ly b">x</code>是1，所以它不可能是2。控制台输出没有提供任何解释，这可能不是您想要的。您可以指定当<code class="fe lv lw lx ly b">AssertionError</code>出现时打印的错误信息:</p><pre class="kj kk kl km gt nf ly ng nh aw ni bi"><span id="405f" class="nj mj it ly b gy nk nl l nm nn">x = 1<br/>assert x == 2, 'X should be 1'</span></pre><p id="78c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是输出结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/90fd6c7b735fd78702e2d18a6c48c784.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Az_3PJvfKA-F61fmoD_wRg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片3-断言基础(3)(图片由作者提供)</p></figure><p id="3c9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="np">简单，对吧？</em>应该是。实际上，你更有可能在函数的开头写<code class="fe lv lw lx ly b">assert</code>语句。让我们看看接下来该怎么做。</p></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="6187" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">Python函数中的断言</h1><p id="080d" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">让我们声明一个简单的Python函数。它将接受一个列表作为参数，对其求和，然后以浮点形式返回总和。有两个问题需要尽早发现:</p><ol class=""><li id="e5c8" class="nq nr it lb b lc ld lf lg li ns lm nt lq nu lu nv nw nx ny bi translated"><strong class="lb iu">列表是否传递给函数？</strong>你可以在Python中使用类型提示来指示应该传递哪种数据类型，但是没有人阻止你传递字典而不是列表。暗示只是暗示。</li><li id="844f" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated"><strong class="lb iu">列表是空的吗？显然，你不能对一个空列表求和。嗯，调用<code class="fe lv lw lx ly b">sum([])</code>返回0，但这不是你想要的。</strong></li></ol><p id="edd0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是为什么您将有两个断言语句，后面是一段用于汇总列表元素的代码。如果这两个条件都不为真，Python解释器将不会执行该代码:</p><pre class="kj kk kl km gt nf ly ng nh aw ni bi"><span id="7beb" class="nj mj it ly b gy nk nl l nm nn">def sum_list(lst: list) -&gt; float:<br/>    assert type(lst) == list, 'Param `lst` must be of type list!'<br/>    assert len(lst), 'The input list is empty!'<br/><br/>    total = 0<br/>    for item in lst:<br/>        total += item <br/>    <br/>    return total</span></pre><p id="8e66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们试着调用<code class="fe lv lw lx ly b">sum_list()</code>并传入一个字典:</p><pre class="kj kk kl km gt nf ly ng nh aw ni bi"><span id="6f5b" class="nj mj it ly b gy nk nl l nm nn">lst_sum = sum_list(lst={'a': 1, 'b': 4})<br/>print(lst_sum)</span></pre><p id="3a16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事情是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/1cd0f960deb0c8dbe7cdf8279a5fab26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gUv4KDX2bimMfd9KILx2uQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图4 —函数中的断言(1)(作者图片)</p></figure><p id="fe23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您所希望的——没有向函数提供列表，因此将一个适当的断言错误打印到控制台。</p><p id="9357" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="np">传一个空单怎么办？</em></p><pre class="kj kk kl km gt nf ly ng nh aw ni bi"><span id="a1ab" class="nj mj it ly b gy nk nl l nm nn">lst_sum = sum_list(lst=[])<br/>print(lst_sum)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/2ccbbc391e8f1b74a0539d80ed3a2077.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ynrp1Tzl0T-iGSFChA_Mfg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图5 —函数中的断言(2)(图片由作者提供)</p></figure><p id="3f50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你仍然得到了<code class="fe lv lw lx ly b">AssertionError</code>，但是这一次有了不同的消息。</p><p id="34cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，让我们通过提供一系列数字来验证该函数是否正常工作:</p><pre class="kj kk kl km gt nf ly ng nh aw ni bi"><span id="4622" class="nj mj it ly b gy nk nl l nm nn">lst_sum = sum_list([1.11, 2.21, 3.14])<br/>print(lst_sum)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/1780f946c8716c96130ea75847ae4c96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KOSLHtoFa0SVTlKWve3jHg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图6 —函数中的断言(3)(图片由作者提供)</p></figure><p id="a1de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你知道了，它像广告宣传的那样工作。</p></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="8501" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">如何忽略运行时的断言？</h1><p id="eb68" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated"><code class="fe lv lw lx ly b">assert</code>语句的特别之处在于，您可以在运行脚本时忽略它们，而无需修改代码。</p><p id="b83d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是如何正常运行Python脚本:</p><pre class="kj kk kl km gt nf ly ng nh aw ni bi"><span id="eedd" class="nj mj it ly b gy nk nl l nm nn">python3 script.py</span></pre><p id="f176" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您有<code class="fe lv lw lx ly b">asserts</code>语句并且想忽略它们，只需在命令中添加<code class="fe lv lw lx ly b">-O</code>:</p><pre class="kj kk kl km gt nf ly ng nh aw ni bi"><span id="263f" class="nj mj it ly b gy nk nl l nm nn">python3 -O script.py</span></pre><p id="ee14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个我们的<code class="fe lv lw lx ly b">assertion.py</code>文件的例子，里面有下面的代码(你之前已经声明了<code class="fe lv lw lx ly b">sum_list()</code>函数):</p><pre class="kj kk kl km gt nf ly ng nh aw ni bi"><span id="a2ff" class="nj mj it ly b gy nk nl l nm nn">lst_sum = sum_list(lst={'a': 1, 'b': 4})<br/>print(lst_sum)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/576282e2a3747d288671d91572fe933a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x7Lz3qKNeGH90JoqLDKtuw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图7 —忽略运行时的断言(作者图片)</p></figure><p id="6046" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，引发了<code class="fe lv lw lx ly b">TypeError</code>，因为传递的是字典而不是列表。</p></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="e342" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">应该使用断言语句吗？</h1><p id="e244" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">我以前已经说过了，但是我要再重复一次——断言不能代替<code class="fe lv lw lx ly b">try except</code>块。对于不可避免会发生的错误，您应该总是使用<code class="fe lv lw lx ly b">try except</code>。</p><p id="2f01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管如此，<code class="fe lv lw lx ly b">assert</code>语句至少有两个优点。</p><p id="b3e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b"><strong class="lb iu">assert</strong></code> <strong class="lb iu">比</strong> <code class="fe lv lw lx ly b"><strong class="lb iu">if</strong></code>更紧凑，可读性更强。写<code class="fe lv lw lx ly b">assert &lt;condition&gt;, &lt;message&gt;</code>比写<code class="fe lv lw lx ly b">if &lt;condition&gt;: &lt;message&gt;</code>容易。至少它会为您节省一行代码。此外，通过写<code class="fe lv lw lx ly b">assert</code>，你知道你在检查不应该发生的情况。<code class="fe lv lw lx ly b">if</code>只是一个一般性的检查。</p><p id="568c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b"><strong class="lb iu">assert</strong></code> <strong class="lb iu">语句在运行时可以忽略</strong>。你已经看到如何做到这一点，所以我不会重复自己。</p><p id="fc74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总而言之，<code class="fe lv lw lx ly b">assert</code>编写起来更快，也更容易与常规的条件检查区分开来。好好使用它们，但不要把它们作为异常处理的唯一方法。</p></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><p id="a862" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="np">你们觉得断言语句怎么样？它们是你的Python项目的一部分吗，还是你经常使用if和</em> <code class="fe lv lw lx ly b"><em class="np">try except</em></code> <em class="np">？</em>。请在下面的评论区告诉我。</p></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><p id="815a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="np">喜欢这篇文章吗？成为</em> <a class="ae ky" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="np">中等会员</em> </a> <em class="np">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="oe of gp gr og oh"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd iu gy z fp om fr fs on fu fw is bi translated">通过我的推荐链接加入Medium-Dario rade ci</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">medium.com</p></div></div><div class="oq l"><div class="or l os ot ou oq ov ks oh"/></div></div></a></div></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="d6fc" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">保持联系</h1><ul class=""><li id="fece" class="nq nr it lb b lc na lf nb li ow lm ox lq oy lu oz nw nx ny bi translated">注册我的<a class="ae ky" href="https://mailchi.mp/46a3d2989d9b/bdssubscribe" rel="noopener ugc nofollow" target="_blank">简讯</a></li><li id="e2e0" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu oz nw nx ny bi translated">在YouTube<a class="ae ky" href="https://www.youtube.com/c/BetterDataScience" rel="noopener ugc nofollow" target="_blank">上订阅</a></li><li id="0a68" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu oz nw nx ny bi translated">在LinkedIn 上连接</li></ul></div></div>    
</body>
</html>