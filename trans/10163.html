<html>
<head>
<title>Managing Python Environments Like a Pro</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">像专家一样管理Python环境</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/managing-python-environments-like-a-pro-4d8ad1d5b80?source=collection_archive---------7-----------------------#2021-09-26">https://towardsdatascience.com/managing-python-environments-like-a-pro-4d8ad1d5b80?source=collection_archive---------7-----------------------#2021-09-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2953" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">还在用virtualenv？试试这个新工具。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/214a9322ca4c390825a590997d00c63c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wNx5VlQ52-tIOCgz"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae kv" href="https://unsplash.com/@chuttersnap?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> CHUTTERSNAP </a>拍摄</p></figure><p id="78f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Python虚拟环境帮助我们轻松地管理依赖性。最常见的环境创建工具是<a class="ae kv" href="https://virtualenv.pypa.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> virtualenv </a>和<a class="ae kv" href="https://docs.conda.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> conda </a>，后者用于多种语言的环境管理，而前者是专门为python开发的。</p><p id="ddb9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为什么不使用全局python包，那么我们就不需要陷入这种环境混乱，对吗？是的，这将节省我们管理环境的时间，但代价是，为项目做好准备的痛苦将呈指数增长。我通过艰难的方式了解到这个事实，对所有事情都使用全局包，而不是对每个项目都有一个专用的环境。</p><p id="afa1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇博客中，我将写关于<a class="ae kv" href="https://virtualenvwrapper.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> virtualenvwrapper </a>的内容，这是一个python库，用于管理和定制python中的环境，它运行在优秀的旧virtualenv之上。随着我们的进展，我们将看到VEW CLI命令如何类似于Linux命令，如mkdir、rmdir和cp。</p><p id="d86b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">注意:在本文中，我将把virtualenvwrapper称为VEW</em></p><h2 id="adf5" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">开始前</h2><p id="7e03" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">值得注意的是，pyenv与virtualenv或VEW没有关系。pyenv用于在多个python版本之间切换，并且不管理已安装的包。另外，pip是python中的一个包管理器，pip也不能帮助我们管理环境，因为它不是用来做这个的。有关更多信息，请阅读此stackoverflow线程。</p><div class="mr ms gp gr mt mu"><a href="https://stackoverflow.com/questions/38217545/what-is-the-difference-between-pyenv-virtualenv-anaconda" rel="noopener  ugc nofollow" target="_blank"><div class="mv ab fo"><div class="mw ab mx cl cj my"><h2 class="bd ir gy z fp mz fr fs na fu fw ip bi translated">pyenv，virtualenv，anaconda有什么区别？</h2><div class="nb l"><h3 class="bd b gy z fp mz fr fs na fu fw dk translated">我是一名试图学习python的ruby程序员。我和pyenv是一家人，因为它就像是从……</h3></div><div class="nc l"><p class="bd b dl z fp mz fr fs na fu fw dk translated">stackoverflow.com</p></div></div><div class="nd l"><div class="ne l nf ng nh nd ni kp mu"/></div></div></a></div><h2 id="5fed" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">装置</h2><p id="e4db" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">安装过程与任何其他库相同。</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="f0f4" class="lt lu iq nk b gy no np l nq nr">pip install virtualenvwrapper</span></pre><p id="8284" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Linux系统中，安装之后，我们需要编辑。bashrc文件，这将允许用户在任何终端和位置访问VEW。</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="2958" class="lt lu iq nk b gy no np l nq nr">export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3</span><span id="b4a8" class="lt lu iq nk b gy ns np l nq nr">export WORKON_HOME=~/my_env_folder</span><span id="7569" class="lt lu iq nk b gy ns np l nq nr">export VIRTUALENVWRAPPER_VIRTUALENV=/home/my_user/.local/bin/virtualenv</span><span id="03ab" class="lt lu iq nk b gy ns np l nq nr">source ~/.local/bin/virtualenvwrapper.sh</span></pre><ol class=""><li id="fd30" class="nt nu iq ky b kz la lc ld lf nv lj nw ln nx lr ny nz oa ob bi translated">在第一行中，我们设置了VIRTUALENVWRAPPER_PYTHON变量，该变量指向VEW必须引用的PYTHON二进制安装</li><li id="2854" class="nt nu iq ky b kz oc lc od lf oe lj of ln og lr ny nz oa ob bi translated">接下来，WORKON_HOME是VEW将存储所有环境和实用程序脚本的文件夹</li><li id="59ae" class="nt nu iq ky b kz oc lc od lf oe lj of ln og lr ny nz oa ob bi translated">VIRTUALENVWRAPPER_VIRTUALENV是原始VIRTUALENV二进制文件的路径</li></ol><h2 id="34ff" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">创建新的虚拟环境</h2><p id="775a" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">如前所述，这里的命令类似于Linux命令。要创建一个新环境，请执行下面一行。</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="b8c2" class="lt lu iq nk b gy no np l nq nr">mkvirtualenv my-env</span></pre><p id="2deb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该环境将存储在WORKON_HOME变量中指定的路径中。除virtualenv选项外，还支持三个选项，它们是:</p><ol class=""><li id="a9ea" class="nt nu iq ky b kz la lc ld lf nv lj nw ln nx lr ny nz oa ob bi translated">-一个<em class="ls"> my_path </em>:环境的文件夹，表示每当环境被激活时，无论用户当前在什么路径，都会被重定向到<em class="ls"> my_path </em>。这并不意味着环境将创建在<em class="ls"> my_path中。</em></li><li id="1165" class="nt nu iq ky b kz oc lc od lf oe lj of ln og lr ny nz oa ob bi translated">-i <em class="ls"> package1 package2 … </em>:创建环境后，尝试安装提到的包。</li><li id="028c" class="nt nu iq ky b kz oc lc od lf oe lj of ln og lr ny nz oa ob bi translated">-r <em class="ls"> requirements.txt </em>:创建一个环境，从requirements.txt文件安装。</li></ol><h2 id="4d17" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">删除虚拟环境</h2><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="968b" class="lt lu iq nk b gy no np l nq nr">rmvirtualenv my_env</span></pre><p id="393b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">删除环境文件夹。请记住在删除环境之前将其停用。</p><h2 id="b34e" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">显示环境的详细信息</h2><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="d69c" class="lt lu iq nk b gy no np l nq nr">showvirtualenv my-env</span></pre><h2 id="9e86" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">列出所有虚拟环境</h2><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="5ad4" class="lt lu iq nk b gy no np l nq nr">lsvirtualenv</span></pre><p id="6e4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">列出通过该工具创建的所有虚拟环境。使用-b选项仅列出环境并忽略细节。</p><h2 id="f9ab" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">激活环境</h2><p id="71f1" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">virtualenv使用以下命令激活环境。</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="e2d8" class="lt lu iq nk b gy no np l nq nr">source my-env/bin/activate</span></pre><p id="ea45" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe oh oi oj nk b">source</code>是一个常用的Linux命令，主要用于改变当前shell的环境变量。点击阅读更多信息<a class="ae kv" href="https://linuxhandbook.com/source-command/" rel="noopener ugc nofollow" target="_blank">。VEW抽象了这个源命令，并提供了一个易于记忆的替代命令<code class="fe oh oi oj nk b">workon</code>。</a></p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="1ee1" class="lt lu iq nk b gy no np l nq nr">workon my-env</span></pre><p id="097b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在引擎盖下，VEW执行<code class="fe oh oi oj nk b">source</code>命令。</p><h2 id="0408" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">停用环境</h2><p id="fef3" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">停用VEW的环境与virtualenv相同。在活动环境shell中，执行以下命令。</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="6717" class="lt lu iq nk b gy no np l nq nr">deactivate</span></pre><h2 id="66db" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">卸载环境中的第三方软件包</h2><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="a6df" class="lt lu iq nk b gy no np l nq nr">wipeenv</span></pre><p id="5a2a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该命令将在活动环境中运行。当这被执行时，VEW将识别所有第三方库并卸载它们。</p><h2 id="43a0" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">结论</h2><p id="9902" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">虽然virtualenv可以很好地管理我们所有的环境，但virtualenvwrapper是一个推荐的附加组件。它与Linux命令的相似性使得操作更容易记忆。关注更多这样的文章。感谢阅读到最后:)</p></div></div>    
</body>
</html>