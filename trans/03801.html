<html>
<head>
<title>A (very) simplified approach to ML models pricing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一种(非常)简化的ML模型定价方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-very-simplified-approach-to-ml-models-pricing-4af251226779?source=collection_archive---------34-----------------------#2021-03-29">https://towardsdatascience.com/a-very-simplified-approach-to-ml-models-pricing-4af251226779?source=collection_archive---------34-----------------------#2021-03-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3b11" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何评估实现模型的预期收益</h2></div><p id="c009" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通常，在数据组织中，利益相关者必须做出关于ML策略的决策。诸如是否追求新模型的开发、决定实现一个新模型(希望花费很少的部署成本)或者从数据提供者那里购买信息的选择通常仅仅基于直觉。</p><p id="8335" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，基于对情景、公司经营的经济模式和ROC曲线形状的一般假设，我试图阐明这个话题。目标是有一个函数来计算将基于具有给定AUC的模型的策略替换为具有不同AUC的模型的边际预期利润增益。</p><h1 id="02cb" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">经济模式</h1><p id="4c26" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">在该研究的第一次迭代中，我们将商业模型近似为一个游戏，当客户不违约时，公司赚取费用，否则将失去一个单位价格。</p><p id="af3a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">公司可以选择是否向任何顾客出售产品。让我们将条件正定义为客户违约的事件，将预测正定义为公司拒绝运营的事件。</p><p id="1e35" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">预期利润是:</p><blockquote class="ly lz ma"><p id="1dfb" class="kf kg mb kh b ki kj jr kk kl km ju kn mc kp kq kr md kt ku kv me kx ky kz la ij bi translated">预期利润=概率真阴性×费用-概率假阴性-概率假阳性×费用</p></blockquote><p id="d932" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一个假阳性的成本费用作为机会成本，一个假阴性的成本1，因为价格是单一的。</p><h1 id="875d" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">从AUC到ROC曲线</h1><p id="27f7" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">目的是在给定AUC的情况下构建ROC曲线。我们假设所有ROC曲线是参数a设置为1的正则化β函数，并且参数b使得曲线的面积等于AUC这意味着b = AUC/(1-AUC)。</p><p id="7d12" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面我们展示了这些曲线的一些例子:</p><figure class="mg mh mi mj gt mk gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mf"><img src="../Images/2168f8551dc32c6588ee8337e8d0dd5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yt0oQeFeTRL7CAsxEbiBCg.png"/></div></div><p class="mr ms gj gh gi mt mu bd b be z dk translated">具有不同AUC的ROC曲线—作者图片</p></figure></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="41c8" class="lb lc iq bd ld le nc lg lh li nd lk ll jw ne jx ln jz nf ka lp kc ng kd lr ls bi translated">从运营角度到利润</h1><p id="83e7" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">在具有恒定总体不良率的场景中，可以基于一个操作点——(假阳性率，真阳性率)ROC空间中的一个点——获得经济模型计算代理期望利润所需的所有概率:</p><pre class="mg mh mi mj gt nh ni nj nk aw nl bi"><span id="3136" class="nm lc iq ni b gy nn no l np nq">Probability true negative = False Positive Rate × bad rate Probability false negative = (1 - True Positive Rate) ×bad rate Probability false positive = False Positive Rate ×(1 - bad rate)</span></pre><p id="92b8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果公司有一个给定AUC的模型，它可以选择最优操作点作为最大化期望利润的点。</p><h1 id="37c1" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">预期利润增长</h1><p id="0f7b" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">至此，我们可以建立一个从AUC到预期利润的函数。</p><p id="90c1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一个公司，在一个给定的场景-不良利率和费用-面临的问题是，是否改变其基于模型的战略，一个新的算法，承诺更好的AUC，可以使用这个函数作为决策的输入。基于当前模型的AUC的该函数的输出减去基于新模型AUC的输出是预期利润增加。</p><p id="fec6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们通过调查一些示例场景来研究不同的因素如何促成预期利润的增加。</p><p id="5e0a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为第一个例子，让我们看看在费用为0.2和不同坏账率的情况下，不使用模型(AUC=0.5)的相对利润增加。</p><figure class="mg mh mi mj gt mk gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mf"><img src="../Images/9188b13e384e8ee31c12a80206c08c1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*awxHlFOoLw9pisCIpTAcKg.png"/></div></div><p class="mr ms gj gh gi mt mu bd b be z dk translated">预期利润增加示例-作者图片</p></figure><p id="613f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">可以做一些评论:</p><ul class=""><li id="a0dd" class="nr ns iq kh b ki kj kl km ko nt ks nu kw nv la nw nx ny nz bi translated">对于任何AUC收益，利润的显著增加并不是在每种情况下都发生。</li><li id="1a7b" class="nr ns iq kh b ki oa kl ob ko oc ks od kw oe la nw nx ny nz bi translated">在不良率较低的情况下，AUC收益应该非常显著，以证明模型变化的合理性。</li></ul><p id="6da9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">更具体地说:在费用为0.2且不良率为10%的情况下，当新模型的AUC至少为0.79时，从不使用模型且不过滤掉任何操作的策略进行切换是有利的。</p><p id="2bc0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这种情况下，对提供AUC 0.85模型的服务进行查询的最高价格是产品价格的0.009倍。</p><p id="8c0e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们绘制了针对不同场景改变模型时的预期利润增长:</p><figure class="mg mh mi mj gt mk gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi of"><img src="../Images/3d92b7698fe15ef05af8503637dc8a34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bB-jpRrdXrzwQvBiGpe76w.png"/></div></div><p class="mr ms gj gh gi mt mu bd b be z dk translated">不同情景下的相对利润增长—图片由作者提供</p></figure><p id="1278" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一些进一步的结论:</p><ul class=""><li id="ae96" class="nr ns iq kh b ki kj kl km ko nt ks nu kw nv la nw nx ny nz bi translated">只有当达到某个临界性能时，切换模型才是有利的。</li><li id="15f7" class="nr ns iq kh b ki oa kl ob ko oc ks od kw oe la nw nx ny nz bi translated">在分析空间中，结果似乎对fee比对基础AUC更敏感。</li></ul><h1 id="f5a7" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">关键AUC</h1><p id="f5e5" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">在示例中，我们看到只有达到某个AUC阈值，转换模型才是明智的决策。让我们称之为临界AUC:给定场景中的最小值，如果被模型超越，则可以看到利润增加。</p><p id="a3a3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面我们可以看到在基本AUC=0.5的情况下，不同费用的关键AUC在不同坏账率之间的变化。</p><figure class="mg mh mi mj gt mk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/edb5d4d3958be9b9f39cd2c9aeb2759a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*7I-dofjA2Rkqffu5Iqj_sw.png"/></div><p class="mr ms gj gh gi mt mu bd b be z dk translated">关键AUC示例—按作者分类的图像</p></figure><p id="f98f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对这一结果的观察:</p><ul class=""><li id="5e48" class="nr ns iq kh b ki kj kl km ko nt ks nu kw nv la nw nx ny nz bi translated">对于一个固定的费用，只有在一个特定的坏率的情况下，任何模型性能增益增加利润。在这种情况下，公司会收支平衡。</li><li id="193a" class="nr ns iq kh b ki oa kl ob ko oc ks od kw oe la nw nx ny nz bi translated">对于低不良率，新模型的性能应该非常高，以证明改变简单地不过滤任何操作的天真策略是正确的。</li><li id="e32a" class="nr ns iq kh b ki oa kl ob ko oc ks od kw oe la nw nx ny nz bi translated">费用越少，就越容易获得关键AUC。</li><li id="2b27" class="nr ns iq kh b ki oa kl ob ko oc ks od kw oe la nw nx ny nz bi translated">对于接近1的不良率，该模型也应该非常好，以取代拒绝任何操作的天真策略。</li></ul><h1 id="d2bd" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">警告</h1><ul class=""><li id="5249" class="nr ns iq kh b ki lt kl lu ko oh ks oi kw oj la nw nx ny nz bi translated">本研究中考虑的AUC是从整个人群中计算的。实际上，这是很难做到的:我们只能观察实际服用该产品的人的事件结果。这就是为什么没有考虑新人是否有资格进行手术。</li><li id="45f5" class="nr ns iq kh b ki oa kl ob ko oc ks od kw oe la nw nx ny nz bi translated">我们还认为，改变策略时，费用将保持不变。因此，减少费用以增加产量的可能性就被忽略了。</li><li id="a7b1" class="nr ns iq kh b ki oa kl ob ko oc ks od kw oe la nw nx ny nz bi translated">所考虑的ROC曲线族很小。虽然我相信曲线的形状不会对整体结果产生重大影响，但这还有待于进一步的分析来证实。</li><li id="2df1" class="nr ns iq kh b ki oa kl ob ko oc ks od kw oe la nw nx ny nz bi translated">我们认为模型是完全连续的。专注于某些预测在模型开发中很常见，可能会改变结果。</li></ul><h1 id="ff3b" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">结束注释</h1><p id="732d" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">这项研究并不自称已经完成。如果您看到一些可以更好地解决的问题或任何荒谬的假设，请通过任何方式ping，或者更好的是，使用我在本次研究中使用的<a class="ae ok" href="https://github.com/mesquita-daniel/model_price_study" rel="noopener ugc nofollow" target="_blank">回购</a>并进行调整。</p><p id="7f1c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您想自己探索结果，在回购中实现了计算从具有基本AUC的模型切换到不同模型的预期利润的功能。</p></div></div>    
</body>
</html>