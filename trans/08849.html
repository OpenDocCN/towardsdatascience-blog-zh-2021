<html>
<head>
<title>My top 4 GeoPandas Functions: a practical story</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我的四大GeoPandas功能:一个实用的故事</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/my-top-4-geopandas-functions-a-practical-story-ed375b76c686?source=collection_archive---------21-----------------------#2021-08-15">https://towardsdatascience.com/my-top-4-geopandas-functions-a-practical-story-ed375b76c686?source=collection_archive---------21-----------------------#2021-08-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/02de73c7d270c11bdbb16f47df3d85ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k-Ydc6fCmVnSah5Y"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">六月在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的<a class="ae kc" href="https://unsplash.com/@starworshipp3r?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"/></p></figure><p id="8127" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在过去的几个月里，我一直在研究GeoPandas，它很快成为我最喜欢的Python包之一。就个人而言，我对数据科学如何应用于城市规划、地理空间信息和技术等领域很感兴趣。对于这些，GeoPandas特别有用，因为它允许用户操作地理数据并从中提取有价值的信息。在这个故事中，我将根据我的学习经验，用一个实际的例子向您展示我在GeoPandas中的4个顶级函数。</p><h2 id="4c3f" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">1.获取可用数据集</h2><p id="160b" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">首先，如果您刚刚开始使用GeoPandas，您将需要一些易于访问的数据集。这可以通过使用“.“可用”功能如下:</p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="d537" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这会产生以下结果，每个结果都是一个数据集:</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/8ad057a0ed1284800b7184c54e94d364.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*fVqMD62tZcb3jFeeSpbQ-Q.png"/></div></figure><h2 id="0011" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">2.来自xy的点</h2><p id="ed39" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">如果您发现自己正在处理地理空间数据，它可能并不总是适合您立即开始处理的格式。一个这样的例子是当您的数据包含在纬度和经度列中，并且您需要它们在点几何中。幸运的是，GeoPandas提供了一个函数来快速将这些数据转换为点格式。这个函数叫做“points_from_xy”。让我们来看看它的实际应用:</p><p id="b45a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用城市的数据集，让我们分解x和y坐标中的点几何列，然后将它们作为列添加到数据框中:</p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="1526" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是新的数据框架:</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/55dd75d987bd6300bb5225928a30cc0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/format:webp/1*X77YUSHfvcQK5PhnK21fog.png"/></div></figure><p id="d9db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们可以使用“points_from_xy”函数将纬度和经度转换回点几何:</p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="dbac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">结果如下:</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mh"><img src="../Images/e38f0862fdf13ed950cd80c17c198b06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*v_R022lqR-Rh68UCvy6dHQ.png"/></div></div></figure><h2 id="1c4f" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">3.制作地图</h2><p id="131e" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">使用地理空间数据的很大一部分是能够在地图中有效地可视化它们。GeoPandas允许对用户表示地图数据的方式进行大量细化，包括添加不同的地图图层和处理缺失数据。在这一部分，我们来看看如何制作一个多层地图。首先，我们需要创建一个基础层。假设我们将着眼于仅位于南半球的城市。让我们过滤掉这些数据，然后使用geopandas.plot绘制它:</p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="md me l"/></div></figure><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/d76bb56a3037ff9eb987b38a49b8f800.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*tunBtsB4V-3PzIU_PYjjPg.png"/></div></figure><p id="3f34" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，让我们用一张世界地图覆盖这些城市，该地图在GeoPandas可用数据集中提供。我们将调整国家边界的颜色，这些国家的填充，以及城市点的颜色和大小:</p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="md me l"/></div></figure><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/18cd23e8f17378046148cd6974892d55.png" data-original-src="https://miro.medium.com/v2/resize:fit:794/format:webp/1*4g1hwCjhPZLldm-hu4IDlQ.png"/></div></figure><p id="a8d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们有了一张分层地图，可以看到世界南部的一些城市和国家的边界。</p><h2 id="d759" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">4.计算面积</h2><p id="14ac" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">对于第四个也是最后一个函数，我选择了“area”函数。这个函数顾名思义就是计算多边形和多重多边形等形状的面积。这在处理几何数据时非常有用，我们将在下面看到。</p><p id="2fec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于这个例子，让我们使用“nybb”数据集，它包含关于纽约行政区的信息。如下图所示，数据框包括代表纽约每个区域形状的多重多边形:</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/41828b056103178d24d382eefc35bbce.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*2y_s3eJnGjz6VW34TK-Ijg.png"/></div></figure><p id="08e9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从这里开始，计算每个多边形的面积非常简单:</p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="77f0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下是输出:</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/75b205534a9ea0235c6d4fea66e163d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:320/format:webp/1*DtrsKLIfDRY5TKY51Q6hbg.png"/></div></figure><p id="4b6e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们使用此结果，并使用GeoPandas绘图功能绘制行政区，使用图例按区域对其进行着色:</p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="md me l"/></div></figure><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/93b22f585061a3f5cbdf2627a149c9a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*XLp-CLWKfSG5v-ZXim5ekg.png"/></div></figure><p id="d6ee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们已经完成了4个函数，我希望您也受到启发，开始使用GeoPandas并进一步探索它。感谢您的阅读，如有任何问题，请联系我！</p></div></div>    
</body>
</html>