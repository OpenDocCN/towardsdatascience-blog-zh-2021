<html>
<head>
<title>Visualize Your Strava Data on an Interactive Map with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python在交互式地图上可视化您的Strava数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/visualize-your-strava-data-on-an-interactive-map-with-python-92c1ce69e91d?source=collection_archive---------9-----------------------#2021-10-19">https://towardsdatascience.com/visualize-your-strava-data-on-an-interactive-map-with-python-92c1ce69e91d?source=collection_archive---------9-----------------------#2021-10-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3193" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Strava API和Python下载您的活动数据、创建高程剖面并在交互式地图上绘制您的活动详细信息，只需几个简单的步骤。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8527896c49b13bd251c6f9fbe5ca5346.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jxWkuS1935lEbcmW7kleHQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="b0a4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi lr translated"><span class="l ls lt lu bm lv lw lx ly lz di"> D </span>下载你的Strava数据并不复杂。但首先，您必须通过一个一次性的手动过程，授权您的应用程序访问您的所有活动数据。首先，我建议你按照Matt Ambrogi在他精彩的<a class="ae mc" rel="noopener" target="_blank" href="/using-the-strava-api-and-pandas-to-explore-your-activity-data-d94901d9bfde">故事</a>中解释的步骤<a class="ma mb ep" href="https://medium.com/u/1e23ad8f92c5?source=post_page-----92c1ce69e91d--------------------------------" rel="noopener" target="_blank">。之后，你就可以走了。</a></p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><p id="b0c6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先:导入一些重要的Python包。还建议禁用特定的<code class="fe mk ml mm mn b">urllib3</code>警告。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="ba92" class="ms mt iq mn b gy mu mv l mw mx"># import modules<br/>import os<br/>import requests<br/>import urllib3<br/>import pandas as pd<br/>import numpy as np<br/>import time<br/>import matplotlib.pyplot as plt<br/>import folium<br/>import polyline<br/>import base64<br/>from tqdm import tqdm</span><span id="7d64" class="ms mt iq mn b gy my mv l mw mx"># disable warnings<br/>urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)</span></pre><p id="e8be" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要下载您的Strava数据，需要设置一些变量。当您在线登录到您的Strava count时，您可以查找所需的值。进入“设置”，然后进入“我的API应用程序”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/095d700d84ee6bfef74e8b1e9ebd85c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*N2GFcAZ55yWFWYDY0pXtnQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="8d37" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您将需要您的<em class="na">客户端ID </em>、<em class="na">客户端密码</em>和<em class="na">刷新令牌</em>。在下面的代码块中，将文本<em class="na">在此插入您的值</em>替换为您的个人值。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="1fd7" class="ms mt iq mn b gy mu mv l mw mx"># set strava variables<br/>client_id = ‘insert your value here‘<br/>client_secret = ‘insert your value here’<br/>refresh_token = ‘insert your value here'</span></pre><p id="e612" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">基于您刚刚声明的变量，您可以获得一个新的访问令牌。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="b6a8" class="ms mt iq mn b gy mu mv l mw mx"># define function to get a new access token<br/>def get_access_token(client_id, client_secret, refresh_token):<br/> <br/>   oauth_url = ‘<a class="ae mc" href="https://www.strava.com/oauth/token'" rel="noopener ugc nofollow" target="_blank">https://www.strava.com/oauth/token'</a><br/> <br/>   payload = {<br/>       ‘client_id’: client_id, <br/>       ‘client_secret’: client_secret, <br/>       ‘refresh_token’: refresh_token, <br/>       ‘grant_type’: ‘refresh_token’, <br/>       ‘f’: ‘json’, <br/>   }<br/> <br/>   r = requests.post(oauth_url, data=payload, verify=False)<br/> <br/>   access_token = r.json()[‘access_token’]</span><span id="a8a4" class="ms mt iq mn b gy my mv l mw mx">   return access_token</span><span id="cb48" class="ms mt iq mn b gy my mv l mw mx"># get new access token<br/>access_token = get_access_token(client_id, client_secret, refresh_token)</span></pre><p id="808d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在您有了一个新的访问令牌，您可以下载您的Strava数据。一页数据包含200个活动(默认值)。因此，平均每周4次活动大约是每年1页Strava数据(4次活动<strong class="kx ir">×50周)。我们将设置一个初始值，最大获取10页。然而，当发现一个空页面时，控制循环将停止。</strong></p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="b304" class="ms mt iq mn b gy mu mv l mw mx"># define function to get your strava data<br/>def get_data(access_token, per_page=200, page=1):<br/> <br/>   activities_url = ‘<a class="ae mc" href="https://www.strava.com/api/v3/athlete/activities'" rel="noopener ugc nofollow" target="_blank">https://www.strava.com/api/v3/athlete/activities'</a><br/>   headers = {‘Authorization’: ‘Bearer ‘ + access_token}<br/>   params = {‘per_page’: per_page, ‘page’: page}<br/>   <br/>   data = requests.get(<br/>       activities_url, <br/>       headers=headers, <br/>       params=params<br/>   ).json()<br/> <br/>   return data</span><span id="d3b5" class="ms mt iq mn b gy my mv l mw mx"># get you strava data<br/>max_number_of_pages = 10<br/>data = list()<br/>for page_number in tqdm(range(1, max_number_of_pages + 1)):<br/>    page_data = get_data(access_token, page=page_number)<br/>    if page_data == []:<br/>        break<br/>    data.append(page_data)</span></pre><p id="fdea" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在我们有了一个带有页面结果的列表中的数据，我们将把它们放在一个字典中，并打印下载的活动数量。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="26f0" class="ms mt iq mn b gy mu mv l mw mx"># data dictionaries<br/>data_dictionaries = []<br/>for page in data:<br/>    data_dictionaries.extend(page)</span><span id="d769" class="ms mt iq mn b gy my mv l mw mx"># print number of activities<br/>print(‘Number of activities downloaded: {}’.format(len(data_dictionaries)))</span></pre><p id="b0e7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后一步是将数据标准化为熊猫数据框架，并对一些数据进行采样以获得第一印象。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="1b64" class="ms mt iq mn b gy mu mv l mw mx"># normalize data<br/>activities = pd.json_normalize(data_dictionaries)</span><span id="e243" class="ms mt iq mn b gy my mv l mw mx"># sample activities<br/>activities[['name', 'distance', 'average_speed', 'moving_time']]\<br/>.sample(5)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/c60af526410f06b61509c151de4facbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/1*RuU_eF0KGU5mHtalPmpDOg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="551b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">列<code class="fe mk ml mm mn b">map.summary_polyline</code>是Google格式的，我们需要先解码，然后才能在地图上绘制路线(折线)。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="e181" class="ms mt iq mn b gy mu mv l mw mx"># add decoded summary polylines<br/>activities[‘map.polyline’] = activities[‘map.summary_polyline’].apply(polyline.decode)</span></pre><p id="ed55" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">新创建的列<code class="fe mk ml mm mn b">map.polyline</code>将用于使用开放高程API向数据帧添加高程数据。注意:根据活动的数量和距离(折线中的坐标数)，下载高程数据可能需要相当长的时间。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="d556" class="ms mt iq mn b gy mu mv l mw mx"># define function to get elevation data using the open-elevation API<br/>def get_elevation(latitude, longitude):<br/>    base_url = ‘<a class="ae mc" href="https://api.open-elevation.com/api/v1/lookup'" rel="noopener ugc nofollow" target="_blank">https://api.open-elevation.com/api/v1/lookup'</a><br/>    payload = {‘locations’: f’{latitude},{longitude}’}<br/>    r = requests.get(base_url, params=payload).json()[‘results’][0]<br/>    return r[‘elevation’]</span><span id="e2cd" class="ms mt iq mn b gy my mv l mw mx"># get elevation data<br/>elevation_data = list()<br/>for idx in tqdm(activities.index):<br/>    activity = activities.loc[idx, :]<br/>    elevation = [get_elevation(coord[0], coord[1]) for coord in activity['map.polyline']]<br/>    elevation_data.append(elevation)</span><span id="686c" class="ms mt iq mn b gy my mv l mw mx"># add elevation data to dataframe<br/>activities['map.elevation'] = elevation_data</span></pre><p id="0095" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在我们的数据框架中还有一些工作要做。日期没有日期时间格式，距离以米为单位，速度以米每秒为单位。设置一个索引列并删除我们不使用的列也是一个很好的做法。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="76e4" class="ms mt iq mn b gy mu mv l mw mx"># convert data types<br/>activities.loc[:, ‘start_date’] = pd.to_datetime(activities[‘start_date’]).dt.tz_localize(None)<br/>activities.loc[:, ‘start_date_local’] = pd.to_datetime(activities[‘start_date_local’]).dt.tz_localize(None)</span><span id="760f" class="ms mt iq mn b gy my mv l mw mx"># convert values<br/>activities.loc[:, ‘distance’] /= 1000 # convert from m to km<br/>activities.loc[:, ‘average_speed’] *= 3.6 # convert from m/s to km/h<br/>activities.loc[:, ‘max_speed’] *= 3.6 # convert from m/s to km/h</span><span id="59cf" class="ms mt iq mn b gy my mv l mw mx"># set index<br/>activities.set_index(‘start_date_local’, inplace=True)</span><span id="e688" class="ms mt iq mn b gy my mv l mw mx"># drop columns<br/>activities.drop(<br/>    [<br/>        ‘map.summary_polyline’, <br/>        ‘resource_state’,<br/>        ‘external_id’, <br/>        ‘upload_id’, <br/>        ‘location_city’, <br/>        ‘location_state’, <br/>        ‘has_kudoed’, <br/>        ‘start_date’, <br/>        ‘athlete.resource_state’, <br/>        ‘utc_offset’, <br/>        ‘map.resource_state’, <br/>        ‘athlete.id’, <br/>        ‘visibility’, <br/>        ‘heartrate_opt_out’, <br/>        ‘upload_id_str’, <br/>        ‘from_accepted_tag’, <br/>        ‘map.id’, <br/>        ‘manual’, <br/>        ‘private’, <br/>        ‘flagged’, <br/>    ], <br/>    axis=1, <br/>    inplace=True<br/>)</span></pre><p id="2861" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们的第一个情节开始了！我们将从在地图上绘制一条活动路线开始。为了正确地使地图居中，我们计算质心或“折线中心”。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="1e6a" class="ms mt iq mn b gy mu mv l mw mx"># select one activity<br/>my_ride = activities.iloc[0, :] # first activity (most recent)</span><span id="3a77" class="ms mt iq mn b gy my mv l mw mx"># plot ride on map<br/>centroid = [<br/>    np.mean([coord[0] for coord in my_ride['map.polyline'][0]]), <br/>    np.mean([coord[1] for coord in my_ride['map.polyline'][0]])<br/>]<br/>m = folium.Map(location=centroid, zoom_start=10)<br/>folium.PolyLine(my_ride['map.polyline'], color='red').add_to(m)<br/>display(m)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/c9ecb6b4d1f84470ab59c35eb4522400.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ds7PpFsndDgiW0trpTKUTA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="8e8e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们画出这次乘坐的高度剖面图。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="a47e" class="ms mt iq mn b gy mu mv l mw mx"># plot elevation profile</span><span id="e908" class="ms mt iq mn b gy my mv l mw mx">fig, ax = plt.subplots(figsize=(10, 4))<br/>ax = pd.Series(my_ride[‘map.elevation’][0]).rolling(3).mean().plot(<br/>    ax=ax, <br/>    color=’steelblue’, <br/>    legend=False<br/>)<br/>ax.set_ylabel(‘Elevation’)<br/>ax.axes.xaxis.set_visible(False)<br/>ax.spines[‘top’].set_visible(False)<br/>ax.spines[‘right’].set_visible(False)<br/>plt.show()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/bd19151a36c696f1758ea2a4db42544f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*mSvdqfwUjrKd27X7ArCJ8A.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="2d12" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，我们准备在一张地图上绘制所有活动，每条路线(中途)都有一个标记，还有一个包含所有活动详细信息的交互式弹出窗口。对于每种类型的活动(骑行、跑步、步行)，我们将使用不同的颜色。我们将分两步进行。在步骤1中，我们创建弹出窗口所需的所有高程剖面。在步骤2中，创建并保存了实际的地图。</p><p id="2eb3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">步骤1:立面图</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="b089" class="ms mt iq mn b gy mu mv l mw mx"># color scheme<br/>color = {'Ride':'red', 'Run':'blue', 'Walk':'purple'}</span><span id="4002" class="ms mt iq mn b gy my mv l mw mx"># create dictionary with elevation profiles<br/>elevation_profile = dict()</span><span id="17a0" class="ms mt iq mn b gy my mv l mw mx">for row in activities.iterrows():<br/>    row_values = row[1]<br/> <br/>    # figure<br/>    fig, ax = plt.subplots(figsize=(6, 2))<br/>    ax = pd.Series(row_values[‘map.elevation’]).rolling(3).mean().plot(<br/>        ax=ax, <br/>        color=color[row_values[‘type’]],<br/>        legend=False, <br/>    )<br/>    ax.set_ylabel(‘Elevation’)<br/>    ax.axes.xaxis.set_visible(False)<br/>    ax.spines[‘top’].set_visible(False)<br/>    ax.spines[‘right’].set_visible(False)<br/>    png = ‘elevation_profile_{}.png’.format(row_values[‘id’])<br/>    fig.savefig(png, dpi=75)<br/>    plt.close()<br/> <br/>    # read png file<br/>    elevation_profile[row_values[‘id’]] = base64.b64encode(open(png, ‘rb’).read()).decode()<br/> <br/>    # delete file<br/>    os.remove(png)</span></pre><p id="7d6f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">第二步:绘制交互式地图</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="988f" class="ms mt iq mn b gy mu mv l mw mx"># plot all activities on map<br/>resolution, width, height = 75, 6, 6.5</span><span id="bd82" class="ms mt iq mn b gy my mv l mw mx">def centroid(polylines):<br/>    x, y = [], []<br/>    for polyline in polylines:<br/>        for coord in polyline:<br/>            x.append(coord[0])<br/>            y.append(coord[1])<br/>    return [(min(x)+max(x))/2, (min(y)+max(y))/2]</span><span id="7c47" class="ms mt iq mn b gy my mv l mw mx">m = folium.Map(location=centroid(activities['map.polyline']), zoom_start=4)</span><span id="1b63" class="ms mt iq mn b gy my mv l mw mx">for row in activities.iterrows():<br/>    row_index = row[0]<br/>    row_values = row[1]<br/>    folium.PolyLine(row_values['map.polyline'], color=color[row_values['type']]).add_to(m)<br/>    <br/>    halfway_coord = row_values['map.polyline'][int(len(row_values['map.polyline'])/2)]</span><span id="a02b" class="ms mt iq mn b gy my mv l mw mx"># popup text<br/>    html = """<br/>    &lt;h3&gt;{}&lt;/h3&gt;<br/>        &lt;p&gt;<br/>            &lt;code&gt;<br/>            Date : {} &lt;br&gt;<br/>            Time : {}<br/>            &lt;/code&gt;<br/>        &lt;/p&gt;<br/>    &lt;h4&gt;{}&lt;/h4&gt;<br/>        &lt;p&gt; <br/>            &lt;code&gt;<br/>                Distance&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp: {:.2f} km &lt;br&gt;<br/>                Elevation Gain&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp: {:.0f} m &lt;br&gt;<br/>                Moving Time&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp: {} &lt;br&gt;<br/>                Average Speed&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp: {:.2f} km/h (maximum: {:.2f} km/h) &lt;br&gt;<br/>                Average Cadence&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp: {:.1f} rpm &lt;br&gt;<br/>                Average Heart Rate&amp;nbsp;&amp;nbsp: {:.0f} bpm (maximum: {:.0f} bpm) &lt;br&gt;<br/>                Average Watts&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp: {:.1f} W &lt;br&gt;<br/>                Average Temperature&amp;nbsp: {:.1f} &lt;br&gt;<br/>                Kilojoules&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp: {:.1f} &lt;br&gt;<br/>                Relative Effort&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp: {:.0f} &lt;br&gt;<br/>                Athletes&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp: {:.0f} &lt;br&gt;<br/>                Kudos&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp: {:.0f} &lt;br&gt;<br/>            &lt;/code&gt;<br/>        &lt;/p&gt;<br/>    &lt;img src="data:image/png;base64,{}"&gt;<br/>    """.format(<br/>        row_values['name'], <br/>        row_index.date(), <br/>        row_index.time(),  <br/>        row_values['type'], <br/>        row_values['distance'], <br/>        row_values['total_elevation_gain'], <br/>        time.strftime('%H:%M:%S', time.gmtime(row_values['moving_time'])), <br/>        row_values['average_speed'], row_values['max_speed'], <br/>        row_values['average_cadence'],  <br/>        row_values['average_heartrate'], row_values['max_heartrate'], <br/>        row_values['average_watts'], <br/>        row_values['average_temp'], <br/>        row_values['kilojoules'], <br/>        row_values['suffer_score'], <br/>        row_values['athlete_count'], <br/>        row_values['kudos_count'], <br/>        elevation_profile[row_values['id']], <br/>    )<br/>    <br/>    # add marker to map<br/>    iframe = folium.IFrame(html, width=(width*resolution)+20, height=(height*resolution)+20)<br/>    popup = folium.Popup(iframe, max_width=2650)<br/>    icon = folium.Icon(color=color[row_values['type']], icon='info-sign')<br/>    marker = folium.Marker(location=halfway_coord, popup=popup, icon=icon)<br/>    marker.add_to(m)</span><span id="fa53" class="ms mt iq mn b gy my mv l mw mx">m.save('mymap.html')<br/>display(m)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/533651277729e28ac76b4caae4cfc925.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2WD6DzYqvr66HTkUP1MYlg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/357d02a888fe8be8263fdb771a4a6359.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MmS4l5BPLsUk__HrzxgBig.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="df3d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您的互动地图另存为<code class="fe mk ml mm mn b">mymap.html</code>，可以分享！你只需要一个网络浏览器来查看你的(本地)文件。</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="cbd6" class="ng mt iq bd nh ni nj nk nl nm nn no np jw nq jx nr jz ns ka nt kc nu kd nv nw bi translated">最后的想法</h1><p id="46aa" class="pw-post-body-paragraph kv kw iq kx b ky nx jr la lb ny ju ld le nz lg lh li oa lk ll lm ob lo lp lq ij bi translated">Python是一种功能强大的语言，拥有惊人的库来可视化您的数据。你最喜欢的可视化地理数据的语言和包是什么？让我知道你的想法。</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><div class="kg kh ki kj gt oc"><a href="https://medium.datadriveninvestor.com/create-thematic-maps-using-shapefiles-in-julia-135ea67e9628" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ir gy z fp oh fr fs oi fu fw ip bi translated">使用Julia中的Shapefiles创建专题地图</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">如何在Julia中使用Plots包绘制choropleth图</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">medium.datadriveninvestor.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq kp oc"/></div></div></a></div><div class="or os gp gr ot oc"><a rel="noopener follow" target="_blank" href="/reactive-data-analysis-with-julia-in-pluto-notebooks-b4652defd03e"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ir gy z fp oh fr fs oi fu fw ip bi translated">在Pluto笔记本中使用Julia进行反应数据分析</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">当你喜欢朱庇特的时候，你就会爱上冥王星！</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">towardsdatascience.com</p></div></div><div class="ol l"><div class="ou l on oo op ol oq kp oc"/></div></div></a></div><div class="or os gp gr ot oc"><a rel="noopener follow" target="_blank" href="/5-amazing-pandas-features-you-probably-dont-know-about-5533498aac88"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ir gy z fp oh fr fs oi fu fw ip bi translated">你可能不知道的5个令人惊奇的熊猫特征</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">解释强大的熊猫功能，以提高您的数据分析工作流程。</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">towardsdatascience.com</p></div></div><div class="ol l"><div class="ov l on oo op ol oq kp oc"/></div></div></a></div></div></div>    
</body>
</html>