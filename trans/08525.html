<html>
<head>
<title>Analyzing ML Model using Dashboard</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用仪表板分析ML模型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/analyzing-ml-model-using-dashboard-f69e17a942f9?source=collection_archive---------14-----------------------#2021-08-06">https://towardsdatascience.com/analyzing-ml-model-using-dashboard-f69e17a942f9?source=collection_archive---------14-----------------------#2021-08-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0cf8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">显然用于创建机器学习模型仪表板</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2559584cb8e5df953e79968ab16ae7bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8MYW4cfHUXVMprPduoC-JQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:作者</p></figure><p id="c225" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">解释机器学习模型是一个困难的过程，因为通常大多数模型都是一个黑盒，我们并不真正知道模型内部发生了什么。创建不同类型的可视化有助于理解模型是如何执行的，但是很少有库可以用来解释模型是如何工作的。</p><p id="aa19" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一个模型的性能可以基于不同的度量标准，如分类报告、MAE、MSE等。类似地，有不同的可视化显示数据的漂移，这意味着特征分布的变化，我们也可以在目标变量中找到这种漂移。</p><p id="bf06" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">显然是一个开源Python库，用于创建交互式可视报告、仪表盘和JSON配置文件，有助于在验证和预测期间分析机器学习模型。它可以创建6种不同类型的报告，涉及数据漂移、分类或回归的模型性能等。</p><p id="98ff" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我们将探索并创建交互式报告/仪表板。</p><p id="363f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们开始吧…</p><h1 id="83ce" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">安装所需的库</h1><p id="6597" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">我们将从使用pip安装开始。下面给出的命令可以做到这一点。</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="65f7" class="mw lv it ms b gy mx my l mz na">!pip install evidently</span></pre><h1 id="c4e7" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">导入所需的库</h1><p id="83e7" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">在这一步中，我们将导入创建ML模型所需的库。我们还将导入一些库，这些库将用于创建一个仪表板来分析模型性能。此外，我们将导入熊猫来加载数据集。</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="86d6" class="mw lv it ms b gy mx my l mz na">import pandas as pd<br/>import numpy as np<br/>from sklearn.ensemble import RandomForestRegressor<br/>from evidently.dashboard import Dashboard<br/>from evidently.tabs import RegressionPerformanceTab<br/>from evidently.model_profile import Profile<br/>from evidently.profile_sections import RegressionPerformanceProfileSection</span></pre><h1 id="0955" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">加载数据集</h1><p id="8d5e" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">在这一步中，我们将加载数据，并将其分为参考数据和预测数据。</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="4507" class="mw lv it ms b gy mx my l mz na">raw_data = pd.read_csv('/content/day.csv', header = 0, sep = ',', parse_dates=['dteday'])</span><span id="28ca" class="mw lv it ms b gy nb my l mz na">ref_data = raw_data[:120]<br/>prod_data = raw_data[120:150]</span><span id="5d1b" class="mw lv it ms b gy nb my l mz na">ref_data.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/adac03de7cc7692d1fcdd77d07674d7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0-poBYtCtUMOZU25os7UEQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据集(来源:作者)</p></figure><h1 id="195f" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">创建模型</h1><p id="dd43" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">在这一步中，我们将创建机器学习模型，对于这个特定的数据集，我们使用随机森林回归模型。</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="08e8" class="mw lv it ms b gy mx my l mz na">target = 'cnt'<br/>datetime = 'dteday'<br/>numerical_features = ['mnth', 'temp', 'atemp', 'hum', 'windspeed']<br/>categorical_features = ['season', 'holiday', 'weekday', 'workingday', 'weathersit',]<br/>features = numerical_features + categorical_features</span><span id="7c06" class="mw lv it ms b gy nb my l mz na">model = RandomForestRegressor(random_state = 0)</span><span id="a1b2" class="mw lv it ms b gy nb my l mz na">model.fit(ref_data[features], ref_data[target])</span><span id="c63c" class="mw lv it ms b gy nb my l mz na">ref_data['prediction']  = model.predict(ref_data[features])<br/>prod_data['prediction'] = model.predict(prod_data[features])</span></pre><h1 id="8eeb" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">创建仪表板</h1><p id="a935" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">在此步骤中，我们将创建仪表板，用于解释模型性能和分析模型的不同属性，如MAE、MAPE、误差分布等。</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="29f6" class="mw lv it ms b gy mx my l mz na">column_mapping = {}<br/>column_mapping['target'] = target<br/>column_mapping['prediction'] = 'prediction'<br/>column_mapping['datetime'] = datetime<br/>column_mapping['numerical_features'] = numerical_features<br/>column_mapping['categorical_features'] = categorical_features</span><span id="65b3" class="mw lv it ms b gy nb my l mz na">dashboard = Dashboard(tabs=[RegressionPerformanceTab])</span><span id="48ba" class="mw lv it ms b gy nb my l mz na">dashboard .calculate(ref_data, prod_data, column_mapping=column_mapping)</span><span id="859b" class="mw lv it ms b gy nb my l mz na">dashboard.save('bike_sharing_demand_model_perfomance.html')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/6bbf862bd148b19a91311bae61ead68e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BNTdMu_AaGVaHYB1pRi3Ig.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">仪表板(来源:作者)</p></figure><p id="7c67" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在上面的图片中，我们可以清楚地看到显示模型性能的报告，您可以下载我们使用上面的代码为本文创建的HTML报告。HTML报告是可共享的，可以在不同的浏览器中打开。</p><p id="851d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">继续尝试使用不同的数据集和机器学习模型仪表板。如果您发现任何困难，请在回复部分告诉我。</p><p id="a7cd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本文是与<a class="ne nf ep" href="https://medium.com/u/40808d551f5a?source=post_page-----f69e17a942f9--------------------------------" rel="noopener" target="_blank"> Piyush Ingale </a>合作完成的。</p><h1 id="85ea" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">在你走之前</h1><p id="a5ff" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated"><strong class="la iu"> <em class="ng">感谢</em> </strong> <em class="ng">的阅读！如果你想与我取得联系，请随时通过hmix13@gmail.com联系我或我的</em> <a class="ae nh" href="http://www.linkedin.com/in/himanshusharmads" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu"> <em class="ng"> LinkedIn个人资料</em> </strong> </a> <em class="ng">。可以查看我的</em><a class="ae nh" href="https://github.com/hmix13" rel="noopener ugc nofollow" target="_blank"><strong class="la iu"><em class="ng">Github</em></strong><em class="ng"/></a><em class="ng">简介针对不同的数据科学项目和包教程。还有，随意探索</em> <a class="ae nh" href="https://medium.com/@hmix13" rel="noopener"> <strong class="la iu"> <em class="ng">我的简介</em> </strong> </a> <em class="ng">，阅读我写过的与数据科学相关的不同文章。</em></p></div></div>    
</body>
</html>