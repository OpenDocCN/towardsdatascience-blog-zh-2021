<html>
<head>
<title>Interactive Geographical maps with GeoPandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有 GeoPandas 的交互式地理地图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/interactive-geographical-maps-with-geopandas-4586a9d7cc10?source=collection_archive---------5-----------------------#2021-11-10">https://towardsdatascience.com/interactive-geographical-maps-with-geopandas-4586a9d7cc10?source=collection_archive---------5-----------------------#2021-11-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3a34" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过交互式可视化浏览地理空间数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8f4b77061bac04d148d918be251c9a6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IA9zd_uB0xAUCoA99F3Gsg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者使用 GeoPandas 库创建的世界地图</p></figure><blockquote class="ky"><p id="361c" class="kz la it bd lb lc ld le lf lg lh li dk translated">如果地理是散文，地图就是图像学</p></blockquote><p id="0745" class="pw-post-body-paragraph lj lk it ll b lm ln ju lo lp lq jx lr ls lt lu lv lw lx ly lz ma mb mc md li im bi translated">地理空间一词由两个不同的术语组成。<strong class="ll iu"> Geo </strong>的意思是地球，<strong class="ll iu"> Spatial </strong>的意思是关于或者占据空间。它共同指代<a class="ae me" rel="noopener" target="_blank" href="/visualizing-indias-seismic-activity-4ed390de298c">与地球表面特定位置相关的基于时间的数据</a>。GeoPandas 是一个流行的库，用于分析和处理 Python 中的地理空间数据。在最近的一次更新中，该库增加了支持交互式可视化的方法和实用程序。这是对一个已经很有用的库的一个很好的补充。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://geopandas.readthedocs.io/en/latest/docs/changelog.html#version-0-10-0-october-3-2021"><div class="gh gi mf"><img src="../Images/b56ec61df954729840e5483588370b85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5yEcgiFtbtbR_nOjAGk-vg.png"/></div></a><p class="ku kv gj gh gi kw kx bd b be z dk translated">GeoPandas 库最新版本亮点:来源:<a class="ae me" href="https://geopandas.readthedocs.io/en/latest/docs/changelog.html#version-0-10-0-october-3-2021" rel="noopener ugc nofollow" target="_blank">https://geo pandas . readthe docs . io/en/latest/docs/changelog . html # version-0-10-0-10-3-2021</a></p></figure><p id="6171" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">在本文中，我们将详细探讨 GeoPandas 的交互性。我们将从简单介绍 GeoPandas 开始，然后继续介绍它的一些可视化功能。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="72ee" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">地质公园</h1><p id="9fbf" class="pw-post-body-paragraph lj lk it ll b lm nk ju lo lp nl jx lr ls nm lu lv lw nn ly lz ma no mc md li im bi translated"><a class="ae me" href="https://geopandas.org/en/stable/" rel="noopener ugc nofollow" target="_blank"> GeoPandas </a>是一个广泛使用的开源库，用于在 Python 中操作地理空间数据。它扩展了 pandas data frame 的功能，从而使在 pandas 中处理空间数据成为可能，因此得名。在某种程度上，GeoPandas 结合了熊猫和 Shapley 的力量。<a class="ae me" href="https://github.com/Toblerity/Shapely" rel="noopener ugc nofollow" target="_blank"> Shapley </a>是一个 Python 包，用于处理和分析笛卡尔平面中的几何对象。</p><h2 id="1313" class="np mt it bd mu nq nr dn my ns nt dp nc ls nu nv ne lw nw nx ng ma ny nz ni oa bi translated">装置</h2><p id="dd69" class="pw-post-body-paragraph lj lk it ll b lm nk ju lo lp nl jx lr ls nm lu lv lw nn ly lz ma no mc md li im bi translated">Geopandas 可以用<code class="fe ob oc od oe b">conda</code>、<code class="fe ob oc od oe b">pip</code>安装，也可以直接从<code class="fe ob oc od oe b">source</code>安装。然而，首选方法是使用 conda，因为它为所有平台(Windows、Mac、Linux)提供了预构建的二进制文件。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="845d" class="np mt it oe b gy oj ok l ol om">conda install -c conda-forge geopandas</span></pre><p id="2b34" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">此外，还需要 folium、matplotlib 和 mapclassify 包来实现交互性。您可以使用以下方式安装它们:</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="5c2a" class="np mt it oe b gy oj ok l ol om">conda install -c conda-forge folium matplotlib mapclassify</span><span id="6b98" class="np mt it oe b gy on ok l ol om">or</span><span id="bbd2" class="np mt it oe b gy on ok l ol om">pip install folium matplotlib mapclassify</span></pre><p id="3bff" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">参考<a class="ae me" href="https://geopandas.readthedocs.io/en/latest/getting_started/install.html" rel="noopener ugc nofollow" target="_blank">安装指南</a>获取详细说明和疑难解答。</p><h2 id="56e6" class="np mt it bd mu nq nr dn my ns nt dp nc ls nu nv ne lw nw nx ng ma ny nz ni oa bi translated">使用 GeoPandas 的第一步</h2><p id="4381" class="pw-post-body-paragraph lj lk it ll b lm nk ju lo lp nl jx lr ls nm lu lv lw nn ly lz ma no mc md li im bi translated">如果这是你第一次听说 GeoPandas，我推荐你浏览一下这个<a class="ae me" href="https://geopandas.readthedocs.io/en/v0.10.2/getting_started/introduction.html" rel="noopener ugc nofollow" target="_blank">简短教程</a>。本教程将帮助您快速熟悉该库。简而言之，GeoPandas 建立在 Pandas 库的基础上，使其与地理空间数据兼容。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oo"><img src="../Images/d462ef63ad51cf4fcfcf7ddb0802e408.png" data-original-src="https://miro.medium.com/v2/format:webp/1*y6L5UhMLtW4DrSSMEOU1rA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">GeoPandas 建立在熊猫图书馆上|图片由作者提供</p></figure><p id="d1a5" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">GeoPandas 使用<code class="fe ob oc od oe b">GeoSeries</code>和<code class="fe ob oc od oe b">GeoDataFrame</code>类型，它们分别是<code class="fe ob oc od oe b">pandas.Series</code>和<code class="fe ob oc od oe b">pandas.DataFrame</code>的子类。上图显示了两者之间的关系。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="737e" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">用 GeoPandas 绘制静态地图</h1><p id="3012" class="pw-post-body-paragraph lj lk it ll b lm nk ju lo lp nl jx lr ls nm lu lv lw nn ly lz ma no mc md li im bi translated">在本节中，我们将了解 GeoPandas 的基本功能，即绘制静态地图。这一节为下一节打下了必要的基础，下一节涉及到创建交互式可视化。</p><p id="1cf5" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">🔗您可以从以下位置访问代码笔记本👇</p><div class="op oq gp gr or os"><a href="https://github.com/parulnith/Data-Science-Articles/tree/main/Interactive%20Geographical%20maps%20with%20Geopandas" rel="noopener  ugc nofollow" target="_blank"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd iu gy z fp ox fr fs oy fu fw is bi translated">数据-科学-文章/交互式地理地图，主要是地理区域…</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">我关于数据科学和机器学习的博客集。-数据-科学-文章/交互式地理地图…</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">github.com</p></div></div><div class="pb l"><div class="pc l pd pe pf pb pg ks os"/></div></div></a></div><h2 id="f972" class="np mt it bd mu nq nr dn my ns nt dp nc ls nu nv ne lw nw nx ng ma ny nz ni oa bi translated">导入库</h2><p id="5804" class="pw-post-body-paragraph lj lk it ll b lm nk ju lo lp nl jx lr ls nm lu lv lw nn ly lz ma no mc md li im bi translated">GeoPandas 成功安装后，我们可以导入它并验证我们的系统上是否安装了最新版本。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="8e09" class="np mt it oe b gy oj ok l ol om">import geopandas<br/>import matplotlib.pyplot as plt<br/>print(geopandas.__version__)<br/>------------------------------------------<br/>0.10.2</span></pre><h2 id="5bd8" class="np mt it bd mu nq nr dn my ns nt dp nc ls nu nv ne lw nw nx ng ma ny nz ni oa bi translated">读入数据</h2><p id="ba70" class="pw-post-body-paragraph lj lk it ll b lm nk ju lo lp nl jx lr ls nm lu lv lw nn ly lz ma no mc md li im bi translated">让我们使用内置的 GeoPandas 数据集进行演示。在本文的后面，我们还将学习如何处理我们自己的数据。GeoPandas 附带三个预制地图，可通过以下方式轻松访问:</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="696f" class="np mt it oe b gy oj ok l ol om">geopandas.datasets.available<br/>----------------------------------------<br/>['naturalearth_cities', 'naturalearth_lowres', 'nybb']</span></pre><p id="0e78" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">在哪里</p><ul class=""><li id="bfb9" class="ph pi it ll b lm mg lp mh ls pj lw pk ma pl li pm pn po pp bi translated"><strong class="ll iu"> naturalearth_lowres → </strong>国家轮廓</li><li id="c81a" class="ph pi it ll b lm pq lp pr ls ps lw pt ma pu li pm pn po pp bi translated"><strong class="ll iu"> naturalearth_cities → </strong>城市位置</li><li id="5842" class="ph pi it ll b lm pq lp pr ls ps lw pt ma pu li pm pn po pp bi translated"><strong class="ll iu"> nybb → </strong>纽约行政区</li></ul><p id="627a" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">让我们使用<code class="fe ob oc od oe b"><strong class="ll iu">naturalearth_lowres</strong></code> <strong class="ll iu"> </strong>选项并显示数据集。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="6bb0" class="np mt it oe b gy oj ok l ol om">world_filepath = geopandas.datasets.get_path('naturalearth_lowres')<br/>world = geopandas.read_file(world_filepath)<br/>world.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pv"><img src="../Images/d9d6a372199de15fa900f41aadfa6c71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nseWDNQ6hgmxaQtPMrypBA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者的 GeoPandas 数据帧|图像</p></figure><p id="beb0" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">如上所述，我们得到一个 GeoPandas 数据帧，其中有一个独特的几何列。除此之外，还可以获得各个国家的 GDP 和人口等信息。</p><h2 id="3065" class="np mt it bd mu nq nr dn my ns nt dp nc ls nu nv ne lw nw nx ng ma ny nz ni oa bi translated">可视化数据</h2><p id="1686" class="pw-post-body-paragraph lj lk it ll b lm nk ju lo lp nl jx lr ls nm lu lv lw nn ly lz ma no mc md li im bi translated">为了绘制活动几何图形，我们将调用<code class="fe ob oc od oe b"><a class="ae me" href="https://geopandas.readthedocs.io/en/latest/docs/reference/api/geopandas.GeoSeries.plot.html#geopandas.GeoSeries.plot" rel="noopener ugc nofollow" target="_blank">GeoDataFrame.plot()</a>.</code>。该方法使用 matplotlib 生成几何图形列的图形。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="788c" class="np mt it oe b gy oj ok l ol om">world.plot()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pw"><img src="../Images/8c76769e44b5e64ea629f353ed003ab6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*sP9MCUmbfSN9P4CRmshBSA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="8721" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">输出是使用一行代码创建的世界地图。我们还可以利用可用的参数在获得的图中创建多种变化。</p><ul class=""><li id="654f" class="ph pi it ll b lm mg lp mh ls pj lw pk ma pl li pm pn po pp bi translated"><strong class="ll iu">特定列的颜色编码</strong></li></ul><p id="4cfb" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">假设我们想要以国家为单位来可视化世界人口。为此，我们将传递列<code class="fe ob oc od oe b"><em class="px">pop_est</em></code>，即数据帧中指定人口作为第一个参数的列。从技术上讲，几何列仍然被绘制，但是该图由<code class="fe ob oc od oe b"><em class="px">pop_est</em></code>列进行颜色编码。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="1411" class="np mt it oe b gy oj ok l ol om">world.plot('pop_est', legend=True,figsize=(12,8))<br/>plt.title('World Population')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi py"><img src="../Images/dd9e0964a3ac022567c65bc346df1e87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*a9Jq_oaU-uN7wgh-Mmg1UQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="fec5" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">人口最多的国家用黄色和浅绿色表示，而人口最少的国家用紫色表示。</p><ul class=""><li id="8638" class="ph pi it ll b lm mg lp mh ls pj lw pk ma pl li pm pn po pp bi translated"><strong class="ll iu">彩色地图</strong></li></ul><p id="9ff2" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">如果你不喜欢默认的地图颜色，你可以使用<code class="fe ob oc od oe b">cmap</code>属性轻松修改它。有关兼容选项的列表，请访问官方<a class="ae me" href="https://matplotlib.org/stable/tutorials/colors/colormaps.html" rel="noopener ugc nofollow" target="_blank"> matplotlib 网站</a>。默认颜色图是<code class="fe ob oc od oe b">viridis</code>。让我们来看看更多的色彩映射表以及它们是如何渲染地图的:</p><p id="7c0d" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">🎨<strong class="ll iu">设置 2 </strong></p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="ce24" class="np mt it oe b gy oj ok l ol om">cmap='Set2'<br/>world.plot('pop_est', cmap=cmap, legend=True,figsize=(12,8))<br/>plt.title(f'World Population with colormap: {cmap}')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi py"><img src="../Images/6a2ba2a40357f913b762df4c54c0b72f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*tXXzyp8yWcMlwSqwZ9yL3w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="7333" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated"><strong class="ll iu">T19】🎨 </strong> <strong class="ll iu">岩浆</strong></p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="9461" class="np mt it oe b gy oj ok l ol om">cmap='magma'<br/>world.plot('pop_est', cmap=cmap, legend=True,figsize=(12,8))<br/>plt.title(f'World Population with colormap: {cmap}')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi py"><img src="../Images/96262aabbb00428c88d274ea2716e69f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*w_KOY7mBuZVDqjLrj00g-g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><ul class=""><li id="09b8" class="ph pi it ll b lm mg lp mh ls pj lw pk ma pl li pm pn po pp bi translated"><strong class="ll iu">边界</strong></li></ul><p id="07e6" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">也可以只显示地图边界。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="4680" class="np mt it oe b gy oj ok l ol om">world.boundary.plot(figsize=(12,8))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pz"><img src="../Images/ae542d69cac8f933cb3055c79e5b85d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hOKxSZhkkmW9JpZ-5cinYg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="8566" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">绘制交互式地图</h1><p id="61b2" class="pw-post-body-paragraph lj lk it ll b lm nk ju lo lp nl jx lr ls nm lu lv lw nn ly lz ma no mc md li im bi translated">上一节所有的情节本质上都是静态的。这意味着我们无法通过缩放、平移、悬停或弹出窗口等功能与他们互动。然而，<code class="fe ob oc od oe b">explore</code>方法提供了将静态地图转换成交互式地图的能力。</p><h2 id="5c87" class="np mt it bd mu nq nr dn my ns nt dp nc ls nu nv ne lw nw nx ng ma ny nz ni oa bi translated">句法</h2><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="770e" class="np mt it oe b gy oj ok l ol om"><em class="px">GeoDataFrame.explore()</em></span></pre><p id="733a" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">用法上没有太大区别。<code class="fe ob oc od oe b">explore()</code>方法返回一个呈现交互式地图的<code class="fe ob oc od oe b">folium.Map</code>对象。让我们将上面创建的静态人口世界地图转换为交互式地图。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="ab68" class="np mt it oe b gy oj ok l ol om">world.explore(column='pop_est',cmap='Set2')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qa"><img src="../Images/044d8d4c9f73c7e47ece69cf6f6d63e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QZUgYJrx34N39FGFM0ANvA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="0849" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">稍加修改，我们就有了一个完全交互式的图表。让我们创建一个只显示亚洲地区 GDP 的新图表。由于 GeoPandas 是 Pandas 的扩展，我们可以很容易地根据条件过滤列。</p><p id="1e54" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated"><strong class="ll iu">计算亚洲的 GDP</strong></p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="5d82" class="np mt it oe b gy oj ok l ol om">asia = world[world['continent'] =='Asia']<br/>asia.explore(column='gdp_md_est',cmap='Set2')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qb"><img src="../Images/fab6bb7b008612585416a088f9445b23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_OQqyFotSGpYOJHlhNKHdw.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="f49b" class="np mt it bd mu nq nr dn my ns nt dp nc ls nu nv ne lw nw nx ng ma ny nz ni oa bi translated"><strong class="ak">参数</strong></h2><p id="734c" class="pw-post-body-paragraph lj lk it ll b lm nk ju lo lp nl jx lr ls nm lu lv lw nn ly lz ma no mc md li im bi translated">在上面的例子中。我们只使用了两个参数，即<code class="fe ob oc od oe b">column</code>和<code class="fe ob oc od oe b">cmap</code>。然而，<code class="fe ob oc od oe b">explore()</code>方法附带了许多有用的参数。一些有趣的例子如下:</p><ol class=""><li id="c343" class="ph pi it ll b lm mg lp mh ls pj lw pk ma pl li qc pn po pp bi translated"><strong class="ll iu">工具提示</strong></li></ol><p id="1de1" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">默认为<code class="fe ob oc od oe b">True</code>的<code class="fe ob oc od oe b">tooltip</code>参数显示悬停在对象上时的地理数据场属性。可以通过将其设置为 False 来禁用它。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="ab78" class="np mt it oe b gy oj ok l ol om">asia = world[world['continent'] =='Asia']<br/>asia.explore(column='gdp_md_est',cmap='Set2',tooltip=False)</span></pre><p id="b14a" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">我们还可以传递一个字符串或一个字符串列表来指定那些需要包含的列。在下面的地图中，我们只需要国家的名称及其对应的 GDP 值。因此，我们将在工具提示参数中指定相同的内容。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="200b" class="np mt it oe b gy oj ok l ol om">asia = world[world['continent'] =='Asia']<br/>asia.explore(column='gdp_md_est',<br/>             cmap='Set2',<br/>             legend=False,<br/>             <strong class="oe iu">tooltip=['name','gdp_md_est']</strong>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qd"><img src="../Images/019eb934cb8f6b53461bebb8467c6adc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*mWjpIYgG0PfY4fzhLe-viA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="11e3" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">2.<strong class="ll iu">弹出</strong></p><p id="8e2f" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">如果工具提示参数已启用，属性会在简单悬停时可见。另一个选项是使用弹出选项有选择地启用它们。使用弹出窗口的好处是属性信息只有在被点击时才会显示。在这里，我们也可以传递字符串或字符串列表来指定要包含的列。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="5a57" class="np mt it oe b gy oj ok l ol om">asia = world[world['continent'] =='Asia']<br/>asia.explore(column='gdp_md_est',<br/>             cmap='Set2',<br/>             legend=False,<br/>             tooltip=False<br/>             <strong class="oe iu">popup=['name','gdp_md_est']</strong>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qe"><img src="../Images/7dc1f0d532fa7535ee87908ce6424df0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*oPB04HGbsrkfDM91m_da_A.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="ec4e" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">3.<strong class="ll iu">瓷砖</strong></p><p id="a419" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">此参数指定要使用的图块。内置选项包括:</p><blockquote class="qf qg qh"><p id="f725" class="lj lk px ll b lm mg ju lo lp mh jx lr qi mi lu lv qj mj ly lz qk mk mc md li im bi translated">OpenStreetMap，雄蕊地形，雄蕊调色剂，雄蕊水彩，CartoDB 正电子，CartoDB 暗物质 _ deafult 使用 OpenStreetMap 的地方。</p></blockquote><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="dc4c" class="np mt it oe b gy oj ok l ol om">asia = world[world['continent'] =='Asia']</span><span id="438a" class="np mt it oe b gy on ok l ol om">asia.explore(column='gdp_md_est',<br/>             legend=False,<br/>              <strong class="oe iu">tiles</strong>=&lt;enter the name of the tile to be used&gt;)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ql"><img src="../Images/265991b14f4013e55d77e576a46fc09b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zAFNgaZxDNgB-aNfDSFudw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="d46a" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">4.<strong class="ll iu">图例</strong></p><p id="8913" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">此参数决定是否在地图上显示图例。</p><p id="5513" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">5.<strong class="ll iu"> style_kwds </strong></p><p id="582b" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">如果需要传递一些额外的样式，那么<code class="fe ob oc od oe b">style_kwds</code>就是要传递的参数。例如，是否在地图上绘制边界、边界的颜色、不透明度、填充选项可以由该参数控制。例如，假设我们想要显示亚洲 GDP 地图，其中边界是红色的，宽度= 0.2，不透明度为 0.1。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="5b40" class="np mt it oe b gy oj ok l ol om">asia = world[world['continent'] =='Asia']<br/>asia.explore(column='gdp_md_est',<br/>             cmap='Set2',<br/>             legend=False,<br/>             style_kwds=dict(color="black",weight=3, opacity=0.4))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qm"><img src="../Images/53bce658aa4780fa33e5eff16a51b6d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DoDKPn-mGsRnDKf7HXxhoA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="3741" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">使用你自己的数据</h1><p id="c19c" class="pw-post-body-paragraph lj lk it ll b lm nk ju lo lp nl jx lr ls nm lu lv lw nn ly lz ma no mc md li im bi translated">到目前为止，我们一直使用库预加载的自定义数据集。实际上，我们希望使用自己的数据集。包含一个<code class="fe ob oc od oe b">latitude</code>和一个<code class="fe ob oc od oe b">longitude</code>列的数据集可以很容易地转换成 GeoPandas 数据帧。为了演示这种技术，我借用了下面这篇文章中的数据集:</p><div class="op oq gp gr or os"><a rel="noopener follow" target="_blank" href="/visualizing-indias-seismic-activity-4ed390de298c"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd iu gy z fp ox fr fs oy fu fw is bi translated">可视化印度的地震活动</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">在 Jupyter 笔记本中无缝分析和可视化地震数据</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">towardsdatascience.com</p></div></div><div class="pb l"><div class="qn l pd pe pf pb pg ks os"/></div></div></a></div><p id="9fe4" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">该数据集包括自 2018 年以来印度每次地震的日期、时间、位置、深度、震级和震源的记录。让我们导入数据并查看各种属性。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://github.com/parulnith/Data-Science-Articles/tree/main/Interactive%20Geographical%20maps%20with%20Geopandas"><div class="gh gi qo"><img src="../Images/8374f5c493a1fc16e805c556c8fe2b19.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/0*sksl5-bpHEqfR9b_.png"/></div></a></figure><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="05c7" class="np mt it oe b gy oj ok l ol om">df = pd.read_csv('Indian_earthquake_data.csv')<br/>df.head(10)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qp"><img src="../Images/2b4498daa1dcbff2e52de937a99bfe14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZjNewkc3audvTT7l.png"/></div></figure><p id="6ed8" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated">由于 dataframe 有一个纬度和经度列，因此可以很容易地将其转换为 GeoPandas Dataframe。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="0726" class="np mt it oe b gy oj ok l ol om">from geopandas import GeoDataFrame<br/>from geopandas import points_from_xy</span><span id="8122" class="np mt it oe b gy on ok l ol om">geometry = points_from_xy(df['Latitude'],df['Longitude'])<br/>df2 = GeoDataFrame(df, geometry=geometry)<br/>df2.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qq"><img src="../Images/5eceb2d3b0c20651d4dc57c33c9e2233.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vI7A0Wkq3X7-9rNNLjbuCg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="7e20" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">结论</h1><p id="deb5" class="pw-post-body-paragraph lj lk it ll b lm nk ju lo lp nl jx lr ls nm lu lv lw nn ly lz ma no mc md li im bi translated">本文介绍了通用的 GeoPandas 库，以及它在使用 Python 处理地理空间数据时的表现。我们首先学习了它的基本用法，然后转向更新的交互功能。我相信您会喜欢进一步探索这个库，并将其用于您自己的数据集来执行分析。地理空间分析是一个迷人的领域，GeoPandas 完成了主要的繁重工作，因此用户可以将注意力更多地放在手头的问题上，而不是工具上。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><p id="0133" class="pw-post-body-paragraph lj lk it ll b lm mg ju lo lp mh jx lr ls mi lu lv lw mj ly lz ma mk mc md li im bi translated"><em class="px">👉</em> <strong class="ll iu"> <em class="px">对自己阅读其他文章感兴趣。这个</em> </strong> <a class="ae me" href="https://github.com/parulnith/Data-Science-Articles/blob/main/README.md" rel="noopener ugc nofollow" target="_blank"> <strong class="ll iu"> <em class="px">回购</em> </strong> </a> <strong class="ll iu"> <em class="px">包含了我写的所有文章，分类排序。</em>T15】</strong></p><div class="op oq gp gr or os"><a href="https://github.com/parulnith/Data-Science-Articles/blob/main/README.md" rel="noopener  ugc nofollow" target="_blank"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd iu gy z fp ox fr fs oy fu fw is bi translated">Data-Science-Articles/readme . MD at main parulnith/Data-Science-Articles</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">我关于数据科学和机器学习的博客集。-Data-Science-Articles/readme . MD at main…</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">github.com</p></div></div><div class="pb l"><div class="qr l pd pe pf pb pg ks os"/></div></div></a></div></div></div>    
</body>
</html>