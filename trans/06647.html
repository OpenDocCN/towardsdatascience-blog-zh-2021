<html>
<head>
<title>How to Add New Line in Python f-strings</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Python f-strings中添加新行</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-add-new-line-in-python-f-strings-7b4ccc605f4a?source=collection_archive---------4-----------------------#2021-06-15">https://towardsdatascience.com/how-to-add-new-line-in-python-f-strings-7b4ccc605f4a?source=collection_archive---------4-----------------------#2021-06-15</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="7926" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">如何修复语法错误:f字符串表达式部分不能包含反斜杠</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/dfc8c185fd47be6693c5227d8e0840bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*45Jq2kYwOqRfc2dCYmw_Hg.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@kivenage?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Kevin Mak </a>在<a class="ae kz" href="https://unsplash.com/s/photos/lines?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="a1ab" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">介绍</h2><p id="bc38" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在Python中，不可能在f字符串的花括号<code class="fe mp mq mr ms b">{}</code>中包含反斜杠。这样做会导致一个<code class="fe mp mq mr ms b">SyntaxError</code>:</p><pre class="kk kl km kn gu mt ms mu mv aw mw bi"><span id="622c" class="la lb iu ms b gz mx my l mz na">&gt;&gt;&gt; f'{\}'<br/>SyntaxError: f-string expression part cannot include a backslash</span></pre><p id="399a" class="pw-post-body-paragraph lw lx iu ly b lz nb jv mb mc nc jy me lj nd mg mh ln ne mj mk lr nf mm mn mo in bi translated">这种行为完全符合<a class="ae kz" href="https://www.python.org/dev/peps/pep-0498/#escape-sequences" rel="noopener ugc nofollow" target="_blank"> PEP-0498 </a>关于文字字符串插值的要求:</p><blockquote class="ng"><p id="3708" class="nh ni iu bd nj nk nl nm nn no np mo dk translated">反斜杠不能出现在f字符串的表达式部分中，所以你不能使用它们，例如，在f字符串中转义引号</p></blockquote><p id="08f4" class="pw-post-body-paragraph lw lx iu ly b lz nq jv mb mc nr jy me lj ns mg mh ln nt mj mk lr nu mm mn mo in bi translated">在接下来的几节中，我们将探索几个选项，你可以使用这些选项在f弦中添加反斜杠(包括新行)。</p></div><div class="ab cl nv nw hy nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="in io ip iq ir"><h2 id="7876" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">在f弦中使用反斜杠</h2><p id="7ddc" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">正如我们已经讨论过的，反斜杠不能直接在Python f字符串中使用。但是，有一个简单的解决方法，允许我们使用反斜杠来表示新行、制表符等。</p><p id="a402" class="pw-post-body-paragraph lw lx iu ly b lz nb jv mb mc nc jy me lj nd mg mh ln ne mj mk lr nf mm mn mo in bi translated">假设我们有一个想要输出到标准输出的整数列表。</p><pre class="kk kl km kn gu mt ms mu mv aw mw bi"><span id="4ced" class="la lb iu ms b gz mx my l mz na">nums = [10, 20, 30] <br/>print(f"Numbers:\n {'\n'.join(map(str, nums))}")</span></pre><p id="bdfd" class="pw-post-body-paragraph lw lx iu ly b lz nb jv mb mc nc jy me lj nd mg mh ln ne mj mk lr nf mm mn mo in bi translated">不出所料，上述操作将会失败</p><pre class="kk kl km kn gu mt ms mu mv aw mw bi"><span id="e38b" class="la lb iu ms b gz mx my l mz na">SyntaxError: f-string expression part cannot include a backslash</span></pre><p id="9c93" class="pw-post-body-paragraph lw lx iu ly b lz nb jv mb mc nc jy me lj nd mg mh ln ne mj mk lr nf mm mn mo in bi translated">一种解决方法是将新的行字符(即<code class="fe mp mq mr ms b">'\n'</code>)添加到一个字符串变量中，然后在打印出数字时引用该变量。举个例子，</p><pre class="kk kl km kn gu mt ms mu mv aw mw bi"><span id="ff94" class="la lb iu ms b gz mx my l mz na">new_line = '\n'<br/>nums = [10, 20, 30] <br/>print(f"Numbers:{new_line}{new_line.join(map(str, nums))}")</span></pre><p id="b935" class="pw-post-body-paragraph lw lx iu ly b lz nb jv mb mc nc jy me lj nd mg mh ln ne mj mk lr nf mm mn mo in bi translated">输出应该是</p><pre class="kk kl km kn gu mt ms mu mv aw mw bi"><span id="ce5c" class="la lb iu ms b gz mx my l mz na">Numbers:<br/>10<br/>20<br/>30</span></pre><p id="28e4" class="pw-post-body-paragraph lw lx iu ly b lz nb jv mb mc nc jy me lj nd mg mh ln ne mj mk lr nf mm mn mo in bi translated">请注意，您可以对几乎所有需要反斜杠的字符都这样做。例如，让我们假设您想要在f字符串中使用制表符。以下应该是窍门:</p><pre class="kk kl km kn gu mt ms mu mv aw mw bi"><span id="1105" class="la lb iu ms b gz mx my l mz na">tab = '\t'<br/>print(f'Hello {tab} World!')</span><span id="bbe1" class="la lb iu ms b gz oc my l mz na"># Output<br/>Hello   World!</span></pre></div><div class="ab cl nv nw hy nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="in io ip iq ir"><h2 id="c8d2" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">如何在f弦中添加新的一行</h2><p id="db86" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">特别是对于新行，我们还可以遵循另一种方法在Python f-strings中添加新的行字符。</p><p id="b6ba" class="pw-post-body-paragraph lw lx iu ly b lz nb jv mb mc nc jy me lj nd mg mh ln ne mj mk lr nf mm mn mo in bi translated"><code class="fe mp mq mr ms b">os</code>包附带了一些关于其他系统信息的功能。这包括返回新行字符的<code class="fe mp mq mr ms b"><a class="ae kz" href="https://docs.python.org/3/library/os.html#os.linesep" rel="noopener ugc nofollow" target="_blank">os.linesep</a></code>。</p><blockquote class="od oe of"><p id="8751" class="lw lx og ly b lz nb jv mb mc nc jy me oh nd mg mh oi ne mj mk oj nf mm mn mo in bi translated">用于在当前平台上分隔(或者说，终止)行的字符串。这可以是单个字符，比如POSIX的<code class="fe mp mq mr ms b">'\n'</code>，也可以是多个字符，比如Windows的<code class="fe mp mq mr ms b">'\r\n'</code>。</p></blockquote><p id="2922" class="pw-post-body-paragraph lw lx iu ly b lz nb jv mb mc nc jy me lj nd mg mh ln ne mj mk lr nf mm mn mo in bi translated">举个例子，</p><pre class="kk kl km kn gu mt ms mu mv aw mw bi"><span id="f068" class="la lb iu ms b gz mx my l mz na">import os</span><span id="18b6" class="la lb iu ms b gz oc my l mz na">nums = [10, 20, 30] <br/>print(f"Numbers:{os.linesep}{os.linesep.join(map(str, nums))}")</span></pre><p id="61a9" class="pw-post-body-paragraph lw lx iu ly b lz nb jv mb mc nc jy me lj nd mg mh ln ne mj mk lr nf mm mn mo in bi translated">输出将再次是</p><pre class="kk kl km kn gu mt ms mu mv aw mw bi"><span id="4dd7" class="la lb iu ms b gz mx my l mz na">Numbers:<br/>10<br/>20<br/>30</span></pre><p id="0ca3" class="pw-post-body-paragraph lw lx iu ly b lz nb jv mb mc nc jy me lj nd mg mh ln ne mj mk lr nf mm mn mo in bi translated">请注意，在编写以文本模式打开的文件时，必须避免使用<code class="fe mp mq mr ms b">os.linesep</code>作为行终止符。相反，你必须使用单个的<code class="fe mp mq mr ms b">'\n'</code>。</p></div><div class="ab cl nv nw hy nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="in io ip iq ir"><p id="2c85" class="pw-post-body-paragraph lw lx iu ly b lz nb jv mb mc nc jy me lj nd mg mh ln ne mj mk lr nf mm mn mo in bi translated">另一种可能，是用<code class="fe mp mq mr ms b">chr()</code>功能生成一个新的行字符。Python中的<code class="fe mp mq mr ms b">chr()</code>函数返回对应于Unicode字符的输入整数的字符串表示。Unicode中<code class="fe mp mq mr ms b">10</code>的十进制值相当于换行符(即新行)。</p><pre class="kk kl km kn gu mt ms mu mv aw mw bi"><span id="456f" class="la lb iu ms b gz mx my l mz na">&gt;&gt;&gt; chr(10)<br/>'\n'</span></pre><p id="659d" class="pw-post-body-paragraph lw lx iu ly b lz nb jv mb mc nc jy me lj nd mg mh ln ne mj mk lr nf mm mn mo in bi translated">因此，为了使用<code class="fe mp mq mr ms b">chr()</code>在f弦中添加新的线条，您需要做的就是</p><pre class="kk kl km kn gu mt ms mu mv aw mw bi"><span id="ab41" class="la lb iu ms b gz mx my l mz na">nums = [10, 20, 30] <br/>print(f"Numbers:{chr(10)}{chr(10).join(map(str, nums))}")</span><span id="da78" class="la lb iu ms b gz oc my l mz na"># Numbers:<br/># 10<br/># 20<br/># 30</span></pre></div><div class="ab cl nv nw hy nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="in io ip iq ir"><h2 id="b699" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">最后的想法</h2><p id="ad03" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在今天的文章中，我们讨论了Python的一个限制，它阻止我们在f字符串中使用反斜杠。我们介绍了一些可能的解决方法，并且我们还特别探索了如何在Python f-strings中隐式地添加新行。</p><p id="3ae4" class="pw-post-body-paragraph lw lx iu ly b lz nb jv mb mc nc jy me lj nd mg mh ln ne mj mk lr nf mm mn mo in bi translated">本质上，你有三个选择；第一个是定义一个新行作为字符串变量，并在f-string花括号中引用该变量。第二种解决方法是使用返回新行字符的<code class="fe mp mq mr ms b">os.linesep</code>，最后一种方法是使用对应于Unicode新行字符的<code class="fe mp mq mr ms b">chr(10)</code>。</p></div></div>    
</body>
</html>