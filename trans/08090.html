<html>
<head>
<title>Navigating Statistical Tests</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">导航统计测试</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/levels-of-measurement-statistics-and-python-implementations-8ff8e7867d0b?source=collection_archive---------4-----------------------#2021-07-25">https://towardsdatascience.com/levels-of-measurement-statistics-and-python-implementations-8ff8e7867d0b?source=collection_archive---------4-----------------------#2021-07-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="7746" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">快速参考指南；统计测试</h2><div class=""/><h1 id="8f09" class="jz ka it bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">介绍</h1><p id="29be" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设您正在进行探索性的数据分析，或者决定特征工程的变量。但是，您不能确定变量组之间是否存在显著差异，以确认特定假设或保证变量用于建模。更糟糕的是，您可能要努力使用合适的测试。听起来很熟悉？</p><p id="d70c" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">事实上，这篇文章的主要驱动力来自于努力加深理解并记下一些常用的统计方法及其应用背景以供将来参考。对于每种方法，概述如下</p><ul class=""><li id="d107" class="ma mb it kz b la lv le lw li mc lm md lq me lu mf mg mh mi bi translated">统计检验简介</li><li id="b058" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">使用虚拟数据的工作示例</li><li id="7159" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">结果的解释</li><li id="d1c8" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">讨论用例(如果有的话)和实现中的变化。</li></ul><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi mo"><img src="../Images/f9982bab2856f33c13cf47bfe1730d6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yFIFrjdXBmQ3PyGR"/></div></div><p class="na nb gj gh gi nc nd bd b be z dk translated">丹·梅耶斯在<a class="ae ne" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><p id="5c85" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi nm translated"><span class="l nn no np bm nq nr ns nt nu di">使用哪种类型的统计检验受变量的测量水平影响。变量可以是:</span></p><ul class=""><li id="7702" class="ma mb it kz b la lv le lw li mc lm md lq me lu mf mg mh mi bi translated">数值(测量可以是离散的或连续的；间隔或比例)</li><li id="16cf" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">分类(测量是离散的；名义的或顺序的)</li></ul><p id="b40b" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated"><em class="nv">注:</em></p><ul class=""><li id="4d0e" class="ma mb it kz b la lv le lw li mc lm md lq me lu mf mg mh mi bi translated"><em class="nv">标称——测量级别中没有等级序列。</em></li><li id="3cd3" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated"><em class="nv">序数——在测量级别中有特定的顺序。</em></li></ul><p id="6d6f" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">考虑到自变量(预测值)和因变量(目标值)，统计检验可以这样安排:</p><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/0764631778153e926a99a06e05362df5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/1*do1q9YQ7yok2DZsPjIBx2A.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">统计测试的类型，按相应的变量类型排列|按作者排列的图片</p></figure></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="76dd" class="jz ka it bd kb kc nx ke kf kg ny ki kj kk nz km kn ko oa kq kr ks ob ku kv kw bi translated">示例和代码实现</h1><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="8e7d" class="oh ka it od b gy oi oj l ok ol"># Import libraries<br/>import pandas as pd<br/>import numpy as np<br/>import random<br/>import scipy.stats as stats<br/>import statsmodels.api as sm<br/>import statsmodels.stats.contingency_tables as ct<br/>from statsmodels.graphics.gofplots import qqplot<br/>from statsmodels.stats.weightstats import ztest<br/>import matplotlib.pyplot as plt <br/>plt.style.use('default')<br/>plt.style.use ('seaborn-darkgrid')</span></pre><h1 id="466f" class="jz ka it bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">卡方检验</h1><p id="ad9c" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">独立性卡方检验确定两个<strong class="kz jd">分类变量(即名义变量或顺序变量)(具有两个或更多互斥组)之间是否存在显著关系。</strong>因此，零假设是两个变量之间不存在关系。</p><ul class=""><li id="2013" class="ma mb it kz b la lv le lw li mc lm md lq me lu mf mg mh mi bi translated">非参数化；不需要关于人口参数的假设</li><li id="2557" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">比较各组之间人口比例的差异</li><li id="3343" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">需要观察值的列联表。</li></ul><p id="d648" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">这是表明变量是否相关(即相关)的测试。如果它们相关，我们可以使用<strong class="kz jd">φ系数</strong>来进一步确定相关的<strong class="kz jd">强度。</strong></p><p id="23b2" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">卡方检验对样本大小很敏感(即渐近)</p><ul class=""><li id="9212" class="ma mb it kz b la lv le lw li mc lm md lq me lu mf mg mh mi bi translated">随着样本量的增加，绝对差异在期望值中所占的比例越来越小。</li><li id="9d27" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">结果是，如果样本量小，强关联可能不会出现。</li><li id="b62d" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">在大样本量中，统计显著性可能会出现，但相关性并不显著(即非常弱)</li></ul><h2 id="5092" class="oh ka it bd kb om on dn kf oo op dp kj li oq or kn lm os ot kr lq ou ov kv iz bi translated"><em class="ow">卡方示例1 </em></h2><p id="01b7" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据这些数据，肥胖和糖尿病之间有什么联系吗？</p><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="86d6" class="oh ka it od b gy oi oj l ok ol"># Create contingency table <br/>OD = pd.DataFrame({'notObese': [173, 259],<br/>                   'Obese' : [27, 61]},index ={'nonDiabetic','Diabetic'})<br/>OD</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/23b9b976c491fb349046cfa02f7cbf26.png" data-original-src="https://miro.medium.com/v2/resize:fit:468/format:webp/1*czvDVRhCVfzWGL6kstCVGg.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">作者图片</p></figure><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="e5b1" class="oh ka it od b gy oi oj l ok ol"># chi-square test<br/>chiRes = stats.chi2_contingency(OD)</span><span id="8ff4" class="oh ka it od b gy oy oj l ok ol"># Details<br/>print(f'chi-square statistic: {chiRes[0]}')<br/>print(f'p-value: {chiRes[1]}')<br/>print(f'degree of freedom: {chiRes[2]}')<br/>print('expected contingency table') <br/>print(chiRes[3])</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/3d9bc8db92558733c0ea04130d410f8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/1*WL5gyaa-FbXg_XurPoe0Pw.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">卡方检验结果|图片由作者提供</p></figure><p id="f6bf" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">结果解释:</p><p id="569f" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">当p值大于0.05时，我们无法拒绝零假设(H0:两个变量之间没有关系)。肥胖与糖尿病无关。如果零假设为真，期望列联表显示期望值。可以从预期列联表的值(如果肥胖与糖尿病密切相关)和初始列联表的值之间的差异来检查细节。</p><h2 id="33f4" class="oh ka it bd kb om on dn kf oo op dp kj li oq or kn lm os ot kr lq ou ov kv iz bi translated">卡方示例2</h2><p id="0363" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">给定数据，性别和眼睛颜色有关系吗？</p><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="1335" class="oh ka it od b gy oi oj l ok ol"># Create the contigency table<br/>GE = pd.DataFrame({'Blue' :[370, 359],<br/>                   'Brown':[352, 290],<br/>                   'Green':[198, 110],<br/>                   'Hazel':[187, 169]},index={'Female','Male'})<br/>GE</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/4dd2e55ee4098d2dee38477d6fe5ca82.png" data-original-src="https://miro.medium.com/v2/resize:fit:562/format:webp/1*y3UUCrVgTvSp3xkeIEfvqQ.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">作者图片</p></figure><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="2974" class="oh ka it od b gy oi oj l ok ol"># chi-square test<br/>chiRes2 = stats.chi2_contingency(GE)</span><span id="0a31" class="oh ka it od b gy oy oj l ok ol"># Details<br/>print(f'chi-square statistic: {chiRes2[0]}')<br/>print(f'p-value: {chiRes2[1]}')<br/>print(f'degree of freedom: {chiRes2[2]}')<br/>print('expected contingency table') <br/>print(chiRes2[3])</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/d82dfd24538e09b2d54163503dd3021f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*J1SIv92bReK4glAmMfcRuw.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">卡方检验结果|图片由作者提供</p></figure><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="c3fa" class="oh ka it od b gy oi oj l ok ol"># An alternative approach usng stats model api to derive expected table<br/># statsmodel table object<br/>table = sm.stats.Table(GE)<br/>table.fittedvalues</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/fce166b456a1d5198cad1a4bcd2863fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*7zYl3b-Pc9FkKx_khQwa0Q.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">期望值的列联表|作者图片</p></figure><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="b5c7" class="oh ka it od b gy oi oj l ok ol"># Can derive the direction of change between initial and expected table<br/># resid_pearson method returns a table of residuals<br/># positives - more observations than expected<br/># negatives - less observations than expected<br/>table.resid_pearson</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/79c6f1fdb0d2adb41baf4e8235d72f72.png" data-original-src="https://miro.medium.com/v2/resize:fit:706/format:webp/1*tQKyPcvasfawZCrxMuh5OA.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">初始表格和预期表格之间的变化方向|作者图片</p></figure><p id="437e" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">结果解释:</p><p id="3512" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">p值小于0.05，我们拒绝零假设(H0:两个变量之间没有关系)。在初始列联表和期望列联表之间，性别和眼睛颜色是相互依赖的。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="4227" class="jz ka it bd kb kc nx ke kf kg ny ki kj kk nz km kn ko oa kq kr ks ob ku kv kw bi translated">克莱姆氏V</h1><p id="1516" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用于确定分类变量之间关系的强度。假设p值较低，将讨论返回到卡方；存在相关性(变量之间具有统计显著性的相关性)。克莱姆V有助于表明这种依赖的强度。在统计显著性卡方可能是大样本量的结果而不是变量之间的实质性关系的情况下将是有用的。</p><ul class=""><li id="f1bd" class="ma mb it kz b la lv le lw li mc lm md lq me lu mf mg mh mi bi translated">对大样本量稳健</li><li id="8fac" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">比较两个分类变量之间的关系强度</li><li id="617f" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">每个类别的变量应该有两个或更多的唯一值</li><li id="3e99" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">如果<strong class="kz jd">只有两个唯一的测量水平</strong>，则与<strong class="kz jd">φ系数</strong>相同</li><li id="ba98" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">系数的范围从0到1</li></ul><h2 id="854e" class="oh ka it bd kb om on dn kf oo op dp kj li oq or kn lm os ot kr lq ou ov kv iz bi translated">克莱姆V例1</h2><p id="4ad2" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">性别和眼睛颜色之间的关联(即依赖)强度是多少？</p><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="3eed" class="oh ka it od b gy oi oj l ok ol"># chi-square test<br/>print(f'chi-square statistic: {chiRes2[0]}')<br/>print(f'p-value: {chiRes2[1]}')<br/># chi-square test statistic (alternative method to derive chi-sq stat)<br/>chisq_stat = stats.chi2_contingency(GE, correction=False)[0]<br/># sample size<br/>n = np.sum(np.sum(GE))<br/># minimum of rows &amp; columns<br/>minshape = min(GE.shape)-1<br/># Cramer's v<br/>V_ = np.sqrt( (chisq_stat/n)/minshape)<br/>print(f"Cramer' V: {V_}")</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/1fa450cfc62b9082e22ee402b83f1f64.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/format:webp/1*y4t1RY0A9EhDHrYJXujwsQ.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">克莱姆的V结果|作者图片</p></figure><p id="d2a3" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">结果解释:</p><p id="03b5" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">p值小于0.05，我们拒绝零假设(H0:两个变量之间没有关系)。看克莱姆的V，依赖的强度低。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="abcc" class="jz ka it bd kb kc nx ke kf kg ny ki kj kk nz km kn ko oa kq kr ks ob ku kv kw bi translated">Phi系数</h1><ul class=""><li id="749d" class="ma mb it kz b la lb le lf li pf lm pg lq ph lu mf mg mh mi bi translated">比较两个分类变量之间的关系强度</li><li id="836c" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">变量只有两个独特的测量水平</li><li id="c840" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">系数的范围从0到1</li></ul><h2 id="69b2" class="oh ka it bd kb om on dn kf oo op dp kj li oq or kn lm os ot kr lq ou ov kv iz bi translated">Phi系数示例1</h2><p id="f132" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">性别和眼睛颜色(仅棕色和绿色)之间的关联强度(即依赖性)如何？</p><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="f421" class="oh ka it od b gy oi oj l ok ol"># Phi coefficient; two by by contigency table<br/>GEsubset = GE.drop(columns=['Blue', 'Hazel'])<br/>GEsubset</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/a94d186950257edc0cd7cba7da7b29fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:358/format:webp/1*h9A-0rdJL_kntXobyjo8lw.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">2 x 2列联表|作者图片</p></figure><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="69c0" class="oh ka it od b gy oi oj l ok ol">chiRes3 = stats.chi2_contingency(GEsubset)</span><span id="1e2b" class="oh ka it od b gy oy oj l ok ol"># chi-square test<br/>print(f'chi-square statistic: {chiRes3[0]}')<br/>print(f'p-value: {chiRes3[1]}')</span><span id="cb5a" class="oh ka it od b gy oy oj l ok ol"># chi-square test statistic (alternative method to derive chi-sq stat)<br/>chisq_stat = stats.chi2_contingency(GEsubset, correction=False)[0]</span><span id="1bbd" class="oh ka it od b gy oy oj l ok ol"># sample size<br/>n = np.sum(np.sum(GEsubset))<br/># minimum of rows &amp; columns<br/>minshape = min(GEsubset.shape)-1<br/># Phi<br/>Phi_ = np.sqrt( (chisq_stat/n)/minshape)<br/>print(f"Phi Coefficient: {Phi_}")</span></pre><p id="dfcb" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">结果解释:</p><p id="0142" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">p值小于0.05，我们拒绝零假设(H0:两个变量之间没有关系)。查看Phi系数，依赖的强度较低。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="67b6" class="jz ka it bd kb kc nx ke kf kg ny ki kj kk nz km kn ko oa kq kr ks ob ku kv kw bi translated">曼恩-惠特尼大学</h1><p id="4cd3" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也被称为曼·惠特尼·威尔科克森检验或威尔科克森秩和检验。</p><ul class=""><li id="98ed" class="ma mb it kz b la lv le lw li mc lm md lq me lu mf mg mh mi bi translated">当<strong class="kz jd">因变量为顺序变量或连续变量</strong>、&amp;、<strong class="kz jd">非正态分布</strong>时，比较两个变量之间的差异。</li><li id="721e" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated"><strong class="kz jd">自变量应该由两个分类的独立组组成</strong>。</li></ul><h2 id="d2a6" class="oh ka it bd kb om on dn kf oo op dp kj li oq or kn lm os ot kr lq ou ov kv iz bi translated">Mann-Whitney U示例1</h2><p id="6375" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">鉴于数据不是正态分布，有海鲜的拉面和无海鲜的拉面评分有区别吗？</p><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="8cf7" class="oh ka it od b gy oi oj l ok ol"># create dataframe<br/># for 'hasSeafood', 1 stands for noodles with seafood.<br/>ramenRating = pd.DataFrame({'hasSeafood':[1,1,1,0,0,0,1,0,1,0,1,0],<br/>                            'Stars':[5.0,2.5,1.5,3.5,4.75,3.0,4.0,3.0,3.0,2.75,1.0,1.0]})<br/>ramenRating</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/302f159202c924b3c9d772f2a54f8700.png" data-original-src="https://miro.medium.com/v2/resize:fit:366/format:webp/1*Vh2CibUH-Lj05A5ybwZTgA.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">选择拉面评分数据|作者图片</p></figure><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="d6fc" class="oh ka it od b gy oi oj l ok ol"># mann-whitney u test<br/>stats.mannwhitneyu(x=ramenRating['hasSeafood'],<br/>                   y=ramenRating['Stars'])</span></pre><p id="885e" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">结果解释:</p><p id="76b6" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">p值小于0.05，我们可以拒绝含有海鲜的面条和不含海鲜的面条之间评级没有差异的零假设。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="7732" class="jz ka it bd kb kc nx ke kf kg ny ki kj kk nz km kn ko oa kq kr ks ob ku kv kw bi translated">麦克内马试验</h1><p id="3f0a" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确定是否存在统计上显著的<strong class="kz jd">差异</strong>(注意:不是依赖性！)在<strong class="kz jd">成对的分类变量或二分类变量</strong>之间。这使它不同于独立性的卡方检验。</p><ul class=""><li id="42ab" class="ma mb it kz b la lv le lw li mc lm md lq me lu mf mg mh mi bi translated">非参数</li><li id="33cc" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">测量变量组之间的差异</li><li id="d798" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">受限于2×2表(即卡方检验的列联表可能是n×2，取决于变量中的序数组)。</li><li id="3c19" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">提示:要应用测试，请以嵌套数组的形式输入数据</li></ul><h2 id="ae7e" class="oh ka it bd kb om on dn kf oo op dp kj li oq or kn lm os ot kr lq ou ov kv iz bi translated">Mc nemar的测试示例1</h2><p id="aa7f" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">服用特定测试药物前后的疼痛缓解有区别吗？</p><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="a77d" class="oh ka it od b gy oi oj l ok ol"># Create table<br/>Med = pd.DataFrame({'postMedpain_No': [400, 800],<br/>                    'postMedpain_Yes' : [10, 40]},index={'priorMedpain_No','priorMedpain_Yes'})<br/>Med</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/4f693e8a85e5bb85e07c64fd31b75ed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*TeOq-cyHqkOx9h2tFHBnng.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">作者图片</p></figure><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="db41" class="oh ka it od b gy oi oj l ok ol"># convert to array<br/>frame = Med.to_numpy()<br/>frame</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi pl"><img src="../Images/bbcda70c461ab4846ad64368c0d781e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:654/format:webp/1*5sMhaSFrU7EV9fVXdNgfOg.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">作者图片</p></figure><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="d665" class="oh ka it od b gy oi oj l ok ol"># McNemar's Test<br/>print(ct.mcnemar(frame, exact=False))</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/4812e45dfb984b89e01ac4899b0d927b.png" data-original-src="https://miro.medium.com/v2/resize:fit:702/format:webp/1*2HAp-BU7kf8suk7ko0EB7A.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">Mc nemar的测试结果|作者图片</p></figure><p id="325f" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">结果解释:</p><p id="0c28" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">p值小于0.05时，用药前后出现疼痛的患者数量存在统计学差异。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="3daf" class="jz ka it bd kb kc nx ke kf kg ny ki kj kk nz km kn ko oa kq kr ks ob ku kv kw bi translated">科克伦Q检验</h1><p id="4af6" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">麦克内马检验的扩展。如果变量只有两个唯一值，则科克伦的Q检验与麦克内马的检验相同。</p><p id="6db0" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">检验的无效假设是不同治疗的成功概率在人群中是相同的。如果无效假设被拒绝，建议进行事后分析。这是因为虽然我们只能推断出各组之间的比例存在差异，但科克伦的Q检验并不能说明哪些特定的组是不同的。</p><ul class=""><li id="cce6" class="ma mb it kz b la lv le lw li mc lm md lq me lu mf mg mh mi bi translated">因变量是二分的。</li><li id="a945" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">独立变量是分类变量，有三个或更多的<strong class="kz jd">相关的</strong>组。相关组是允许的，因为在同一因变量上多次测量时，每个组中可能有相同的测试对象。</li><li id="2f99" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">这些病例是从人群中随机抽样的。</li><li id="b0f5" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">样本量足够大。根据经验，回答不全是0或1的受试者人数n应≥ 4，nk应≥ 24。这对于精确的二项式麦克纳玛检验是不需要的。</li></ul><p id="86c7" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated"><strong class="kz jd"> <em class="nv">补充说明</em> </strong>:在Python中，Cochran的Q测试实现的一个经常被忽视的方面是，要传入的数据格式和结构需要与数据记录中出现的一样；不在列联表格式中。</p><h2 id="b360" class="oh ka it bd kb om on dn kf oo op dp kj li oq or kn lm os ot kr lq ou ov kv iz bi translated">科克伦的Q测试示例1</h2><p id="34f6" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在随后的3个疗程中，抑郁症的情况有所不同吗？</p><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="df08" class="oh ka it od b gy oi oj l ok ol"># three columns for 3 sessions<br/># 1 represents depression<br/># 0 represents no more depression<br/><br/>cases = np.array([[0, 0, 0],<br/>                  [1, 0, 0],<br/>                  [1, 1, 0],<br/>                  [1, 1, 1]])<br/>                      <br/>count = np.array([ 6,  16, 4,  2])<br/>data = np.repeat(cases, count, 0)</span><span id="668d" class="oh ka it od b gy oy oj l ok ol"># Cochran's Q Test<br/>print(ct.cochrans_q(data))</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/21cebec4f02dc6ad4b8bcf92e844263d.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*oxR7kbbNt2c8r03qzWr0FQ.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">科克伦的Q测试结果|作者图片</p></figure><p id="ab93" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">结果解释:</p><p id="725a" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">在p值小于0.05的情况下，在不同次数的会话之间，经历抑郁和没有抑郁的患者批次存在统计学差异。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="8692" class="jz ka it bd kb kc nx ke kf kg ny ki kj kk nz km kn ko oa kq kr ks ob ku kv kw bi translated">点双列相关</h1><ul class=""><li id="7bac" class="ma mb it kz b la lb le lf li pf lm pg lq ph lu mf mg mh mi bi translated">用于衡量关联的强度和方向</li><li id="7be3" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated"><strong class="kz jd">之间连续的</strong> &amp; <strong class="kz jd">分类的</strong>变量</li></ul><h2 id="4750" class="oh ka it bd kb om on dn kf oo op dp kj li oq or kn lm os ot kr lq ou ov kv iz bi translated">点-双列相关示例1</h2><p id="4b38" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">考试成绩和是否为考试而学习之间的联系有多大？</p><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="90fa" class="oh ka it od b gy oi oj l ok ol"># initialize random number generator<br/>random.seed(36)<br/># Assume y is studied (1)/ not studied (0) <br/># X is the test score, max 20 marks<br/>y = [random.randint(0, 1) for num in range(0, 10)]<br/>print(f'y values: {y}')</span><span id="1f56" class="oh ka it od b gy oy oj l ok ol">X = []<br/>for i in y:<br/>    if i != 0:<br/>        ele = random.randint(11, 20)        <br/>    else:<br/>        ele = random.randint(1, 10) # 1-10 not studied<br/>    X.append(ele)<br/>print(f'X values: {X}')</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi po"><img src="../Images/79d8e7cc57bf4677bfc2b4c5bc374510.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/format:webp/1*2WNU1bN3lGYxcTG5FnPGbw.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">虚拟X和y值|作者图片</p></figure><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="ee29" class="oh ka it od b gy oi oj l ok ol"># point-biserial correlation<br/># output is a tuple<br/>result = stats.pointbiserialr(X, y)<br/>print(f'correlation between X and y: {result[0]:.2f}')<br/>print(f'p-value: {result[1]:.2g}')</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/cc818557c9b0e0027c3e6e1bac22770f.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/format:webp/1*Br12AoILfhT5xI3Ng8-KDw.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">作者图片</p></figure><p id="c32d" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">结果解释:</p><p id="f90d" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">p值小于0.05时，我们拒绝零假设。x和y是依赖的；它们之间有着紧密的联系。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="92f6" class="jz ka it bd kb kc nx ke kf kg ny ki kj kk nz km kn ko oa kq kr ks ob ku kv kw bi translated">方差分析</h1><ul class=""><li id="fc69" class="ma mb it kz b la lb le lf li pf lm pg lq ph lu mf mg mh mi bi translated">比较多个独立变量组中连续度量的方差</li><li id="282a" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated"><strong class="kz jd">分类&amp;连续变量</strong></li><li id="522f" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">可以是单向或双向方差分析</li><li id="70b0" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">单因素方差分析适用于变量包含三个或更多独立测量水平的情况。</li></ul><h2 id="53bd" class="oh ka it bd kb om on dn kf oo op dp kj li oq or kn lm os ot kr lq ou ov kv iz bi translated">方差分析示例1</h2><p id="79d9" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">三个排名在收入上有显著差异吗？</p><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="10f8" class="oh ka it od b gy oi oj l ok ol"># Create a dataframe with artifical values<br/># Sector Ranking, SR1 to SR9, SR1 ranked highest (more than 3 groups)<br/># Salary; continuous variable</span><span id="09ed" class="oh ka it od b gy oy oj l ok ol">SRs = ['SR1', 'SR9', 'SR2', 'SR8', 'SR3', 'SR7', 'SR4', 'SR6', 'SR5',<br/>       'SR1', 'SR9'] <br/>Salary = [10000, 5000, 8000, 5500, 7500, 6000, 7000, 6500, 6800,<br/>          11000, 5100]<br/>rawData = pd.DataFrame({'ranks':SRs,<br/>                        'sal':Salary })</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi pq"><img src="../Images/092873c49a84a1c4493fa709752abedb.png" data-original-src="https://miro.medium.com/v2/resize:fit:258/format:webp/1*JCItCZsqITYNMTFBJPGLlg.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">工资到排名数据|作者图片</p></figure><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="7ae3" class="oh ka it od b gy oi oj l ok ol"># derive the groups (i.e. sector ranks)<br/>groups = pd.unique(frame.ranks.values)</span><span id="4ef6" class="oh ka it od b gy oy oj l ok ol"># Create a dictionary to hold respective salary of sector rank groups<br/>statData = {grp: rawData['sal'][rawData['ranks'] == grp] for grp in groups}</span><span id="af36" class="oh ka it od b gy oy oj l ok ol">stats.f_oneway(statData['SR1'], statData['SR2'], statData['SR9'])</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi pr"><img src="../Images/1312f27e2a49e750198ca3e418bda1b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TOzoR_jOO25tIX4NkFai_A.png"/></div></div><p class="na nb gj gh gi nc nd bd b be z dk translated">onewayAnova结果|作者图片</p></figure><p id="1450" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">结果解释:</p><p id="27ca" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">零假设被拒绝，p值小于0.05。所分析的各级别之间的收入差异很大。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="75d4" class="jz ka it bd kb kc nx ke kf kg ny ki kj kk nz km kn ko oa kq kr ks ob ku kv kw bi translated">z检验</h1><ul class=""><li id="97d5" class="ma mb it kz b la lb le lf li pf lm pg lq ph lu mf mg mh mi bi translated">比较两个样本的均值是否不同</li><li id="54ed" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">如果样本量小于30，则不使用</li><li id="270e" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">假设样本是独立的；遵循正态分布</li><li id="44df" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">均值可能未知，方差已知</li></ul><h2 id="4693" class="oh ka it bd kb om on dn kf oo op dp kj li oq or kn lm os ot kr lq ou ov kv iz bi translated">z测试示例1</h2><p id="a841" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">两个业务组的平均工资有区别吗？</p><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="ddf2" class="oh ka it od b gy oi oj l ok ol"># create dataframe of salary(K) for 2 business groups<br/>np.random.seed(123)<br/>marketing = np.random.normal(106,2,40) # mean 106, std dev 2, sample 40<br/>finance = np.random.normal(108,1,40) # mean 108, std dev 1, sample 40<br/>marketingLst = marketing.tolist()<br/>financeLst = finance.tolist()<br/>salData = pd.DataFrame({'marketing':marketingLst, <br/>                        'finance':financeLst})</span><span id="6a1f" class="oh ka it od b gy oy oj l ok ol">print('marketing median sal:', salData['marketing'].median(), '\n' <br/>      'finance median sal:', salData['finance'].median())</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi ps"><img src="../Images/56d2259bf7fee2529e81f04e8367708d.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*0PmV2Hwlp8MjFslTctrr3A.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">作者图片</p></figure><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="789f" class="oh ka it od b gy oi oj l ok ol"># combine the 2 lists to get overall salary distribution<br/>marketingLst.extend(financeLst)<br/>salFrame = pd.DataFrame(marketingLst,columns=['salary'])</span><span id="8c2a" class="oh ka it od b gy oy oj l ok ol"># check normality<br/>fig, ax = plt.subplots(figsize=(4,4))<br/>qqplot(salFrame['salary'], fit=True, line='s',ax=ax)<br/>plt.show()</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/d03338ce625c4458a176867343e9a0d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*bSYgcTWVnX5T6UYaSz6x-Q.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">工资数据QQ plot |作者图片</p></figure><p id="9180" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">如果大多数点都在红线内，则分布是正常的。两端有轻微的歪斜。工资大部分是正常分配的。z检验适用于正态分布的数据。</p><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="e3ea" class="oh ka it od b gy oi oj l ok ol"># ztest<br/># z-score, p-value<br/>zScore, pValue = ztest(salData['marketing'], salData['finance'])<br/>print('zscore:', zScore, 'p-value:', pValue)</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi pt"><img src="../Images/89dfea53cd0da75402f837c3eb68037c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*wgVq294iMUTl5a8F5fTlqQ.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">z测试结果|作者图片</p></figure><p id="09df" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">结果解释:</p><p id="418d" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">零假设被拒绝，p值小于0.05。两组的平均工资有显著差异。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="2020" class="jz ka it bd kb kc nx ke kf kg ny ki kj kk nz km kn ko oa kq kr ks ob ku kv kw bi translated">t检验</h1><ul class=""><li id="18e8" class="ma mb it kz b la lb le lf li pf lm pg lq ph lu mf mg mh mi bi translated">类似于z检验，但适用于样本量小于30的情况</li><li id="c6e7" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">如果样本量很大，z检验和t检验之间的差别很小</li><li id="723c" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">假设样本服从均值和方差未知的正态分布</li><li id="41e9" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">一个样本t检验将平均值与总体值进行比较</li><li id="05f1" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">如果两个样本的平均值相等，则进行两个样本t检验</li><li id="ed73" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">通过等方差t检验和非等方差t检验(即韦尔奇检验)来区分</li></ul><h2 id="192f" class="oh ka it bd kb om on dn kf oo op dp kj li oq or kn lm os ot kr lq ou ov kv iz bi translated">t检验示例1(单样本)</h2><p id="3225" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">营销组平均工资和公司平均工资有区别吗？</p><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="82cd" class="oh ka it od b gy oi oj l ok ol"># Create the data (2 sets of test scores)<br/>np.random.seed(42)<br/>marketing2 = np.random.normal(106,2,20) # mean 106, std dev 2, sample 20<br/>finance2 = np.random.normal(108,2,20) # mean 108, std dev 1, sample 20</span><span id="2643" class="oh ka it od b gy oy oj l ok ol"># Normality can be checked by shew and kurtosis besides qqplot<br/># For normally distributed data, the skewness should be about zero.<br/>print('marketing2 skew:', stats.skew(marketing2), '\n'<br/>      'finance2 skew:', stats.skew(finance2))<br/># value of kurtosis measure for normal distr is 3<br/>print('marketing2 kurtosis:', stats.kurtosis(marketing2), '\n'<br/>      'finance2 kurtosis:', stats.kurtosis(finance2))</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi pu"><img src="../Images/6a5f6e562e3abf148043b2c1503dda2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:814/format:webp/1*cgDepwsBgxrIJfeuZpze0g.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">作者图片</p></figure><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="e5db" class="oh ka it od b gy oi oj l ok ol"># 1 sample t-test, tests population mean salary 106<br/>stats.ttest_1samp(a=marketing2, popmean=106)</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi pv"><img src="../Images/85dfe2eadc022f71ef20384929fd4c72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vDUU5_vCvW5VPdeLUig6_A.png"/></div></div><p class="na nb gj gh gi nc nd bd b be z dk translated">作者图片</p></figure><p id="572c" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">结果解释:</p><p id="ade5" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">p值大于0.05，无法拒绝总体平均工资为106的零假设。</p><h2 id="a301" class="oh ka it bd kb om on dn kf oo op dp kj li oq or kn lm os ot kr lq ou ov kv iz bi translated">t检验示例2(双样本；相似方差)</h2><p id="96a2" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">两组的平均工资有差别吗？</p><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="b945" class="oh ka it od b gy oi oj l ok ol"># check if variance similar<br/>np.var(marketing2)/np.var(finance2)</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi pw"><img src="../Images/4c4c67049da7f86e27ec925fc9c44f0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:388/format:webp/1*cGB9UfrofGzovF0AsFV1dg.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">作者图片</p></figure><p id="9b20" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">方差比小于4:1时，执行t检验，否则，执行韦尔奇t检验(即，将equal_var设置为False)。)</p><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="6c97" class="oh ka it od b gy oi oj l ok ol"># Can assume equal variance<br/>stats.ttest_ind(a=marketing2, b=finance2, equal_var=True)</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi px"><img src="../Images/5056029933510434c2940e589d802131.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vm38SJFZk5EubZDXJtOX9w.png"/></div></div><p class="na nb gj gh gi nc nd bd b be z dk translated">作者图片</p></figure><h2 id="e5dd" class="oh ka it bd kb om on dn kf oo op dp kj li oq or kn lm os ot kr lq ou ov kv iz bi translated">t检验示例2(双样本；不等方差)</h2><p id="4fa2" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">两组的平均工资有差别吗？</p><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="9104" class="oh ka it od b gy oi oj l ok ol"># Create the data (2 sets of test scores)<br/>np.random.seed(123)<br/>marketing3 = np.random.normal(108,2.5,20) # mean 90, std dev 2.5, sample 20<br/>finance3 = np.random.normal(108,1,20) # mean 108, std dev 1, sample 20</span><span id="f779" class="oh ka it od b gy oy oj l ok ol"># check if variance similar<br/>np.var(marketing3)/np.var(finance3)</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi py"><img src="../Images/dafa56543890b1851e121c3f2eba2de5.png" data-original-src="https://miro.medium.com/v2/resize:fit:418/format:webp/1*lEwNYvFlFyAft0G-vGU9dA.png"/></div></div><p class="na nb gj gh gi nc nd bd b be z dk translated">作者图片</p></figure><p id="7cfc" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">方差比大于4:1时，执行韦尔奇t检验(即，将equal_var设置为False。)</p><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="1772" class="oh ka it od b gy oi oj l ok ol">stats.ttest_ind(a=marketing3, b=finance3, equal_var=False)</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi pz"><img src="../Images/a2be658bef10e18bc54435f06ff33127.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NBekfMdqlNJZKEUppEBH2Q.png"/></div></div><p class="na nb gj gh gi nc nd bd b be z dk translated">作者图片</p></figure><p id="2545" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">结果解释:</p><p id="a05d" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">p值大于0.05，无法拒绝两个薪金均值相等的零假设。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="72d2" class="jz ka it bd kb kc nx ke kf kg ny ki kj kk nz km kn ko oa kq kr ks ob ku kv kw bi translated">皮尔逊相关</h1><p id="f5ec" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相关系数给出了两个变量之间线性关系的度量。如果使用。corr() via pandas，默认的关联方法是Pearson。</p><ul class=""><li id="9536" class="ma mb it kz b la lv le lw li mc lm md lq me lu mf mg mh mi bi translated">负一比一的范围(分别为负相关和正相关)</li><li id="ecdf" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">计算相关系数的公式将变量标准化，<strong class="kz jd">标度或测量单位的变化不会影响其值</strong>。</li></ul><p id="fd83" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated"><strong class="kz jd">皮尔逊相关</strong>是衡量两个连续变量之间线性关系的强度和方向。它依赖于四个关键假设:</p><ul class=""><li id="d2f9" class="ma mb it kz b la lv le lw li mc lm md lq me lu mf mg mh mi bi translated">数据是区间或比值。这些类型的连续数据对于相关性如何假设变量中的值是相关的非常重要。序数或分类变量编码不起作用。</li><li id="b1f7" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">皮尔森只处理线性数据。</li><li id="6356" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">数据中没有异常值。</li><li id="87ea" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">数据呈正态分布。</li><li id="3886" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">数据必须是同质的。同方差假设数据在回归线周围均匀分布</li></ul><p id="5ea8" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated"><strong class="kz jd"> Spearman相关性</strong>是非参数的。它依赖于几乎所有与皮尔逊相同的假设，但它不依赖于正态性。一个变量的分数必须与另一个变量单调相关。可用于成对的<strong class="kz jd">连续</strong>(不遵循线性关系)或<strong class="kz jd">顺序</strong>变量。</p><p id="9ba4" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated"><strong class="kz jd">肯德尔等级相关性</strong>是非参数的。它衡量两个变量之间的依赖程度。它可以用于顺序数据或连续数据。</p><p id="16d3" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated"><strong class="kz jd">效果强度</strong> : Cohen的标准可应用于该系数，以确定效果的强度。</p><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi qa"><img src="../Images/1d9369702a0cc25f7af6c8a7f6dea143.png" data-original-src="https://miro.medium.com/v2/resize:fit:582/format:webp/1*X2w0q3alq8A3IhWHOt9hBA.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">效果强度表|作者图片</p></figure><h2 id="415d" class="oh ka it bd kb om on dn kf oo op dp kj li oq or kn lm os ot kr lq ou ov kv iz bi translated">皮尔逊相关性示例1</h2><p id="89be" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">连续变量X1，X2和y之间的相关性是什么？</p><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="2fdb" class="oh ka it od b gy oi oj l ok ol">X1 = [500,400,300,200,100]<br/>X2 = [200,400,600,800,1000]<br/>y = [100,200,300.5,400,500.5]<br/>df = pd.DataFrame({'X1':X1,<br/>                   'X2':X2,<br/>                   'y' :y})<br/># correlation matrix<br/>df.corr()</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi qb"><img src="../Images/f338ea2c885e8bc07d3a36dd1dddc66c.png" data-original-src="https://miro.medium.com/v2/resize:fit:510/format:webp/1*RhN0FGsXH0KplD9iRBI1Dg.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">作者图片</p></figure><p id="b5e1" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">结果解释:</p><p id="21a8" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">假设y指的是房屋销售价格、X1 Sibor利率和距离城市的X2距离(km)。从系数来看，X1与X2和y呈强负相关，X2与y呈强正相关</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="66e1" class="jz ka it bd kb kc nx ke kf kg ny ki kj kk nz km kn ko oa kq kr ks ob ku kv kw bi translated">配对t检验</h1><ul class=""><li id="fb68" class="ma mb it kz b la lb le lf li pf lm pg lq ph lu mf mg mh mi bi translated">确定成对的连续变量之间是否存在统计上的显著差异。</li><li id="5c6c" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">两个相关样本之间(如前后测试分数)</li><li id="7936" class="ma mb it kz b la mj le mk li ml lm mm lq mn lu mf mg mh mi bi translated">测试变化倾向于正向还是负向</li></ul><h2 id="3538" class="oh ka it bd kb om on dn kf oo op dp kj li oq or kn lm os ot kr lq ou ov kv iz bi translated">配对t检验示例1</h2><p id="d530" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">期中和期末考试成绩有显著差异吗？</p><pre class="mp mq mr ms gt oc od oe of aw og bi"><span id="c8e4" class="oh ka it od b gy oi oj l ok ol"># compare the two test scores for each individual student.<br/># create two score samples; one mid-term exam, the other end-of-term exam<br/>np.random.seed(123)<br/>midTerm = np.random.normal(59.45, 1.5, 100)<br/>endTerm = np.random.normal(60.05, 1.5, 100)<br/># Paired (related) test<br/>t,p = stats.ttest_rel(endTerm, midTerm)<br/># ttest_rel is 2-tailed, so half the resulting p-value to get a 1-tailed p-value<br/>p1 = '%f' % (p/2)<br/>print("t-statistic:" + str(t))<br/>print("p-value:" + str(p1))</span></pre><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div class="gh gi qc"><img src="../Images/0be073718a125a2e6cf30c0ba2223cd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*OacWsZj4eEr_pV8Dneb4Jw.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">配对t检验结果|作者图片</p></figure><p id="d408" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">结果解释:</p><p id="5a15" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">p值小于0.1 (90% CI)时，我们拒绝零假设。两次考试成绩有显著差异。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><p id="c0a7" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">目前就这些。希望这是一个有用的入门/指南，帮助你完成各种统计测试。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h2 id="357a" class="oh ka it bd kb om on dn kf oo op dp kj li oq or kn lm os ot kr lq ou ov kv iz bi translated">参考</h2><p id="8a95" class="pw-post-body-paragraph kx ky it kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">进一步阅读变量和统计方法的简明资源:<a class="ae ne" href="http://web.pdx.edu/~newsomj/pa551/lectur23.htm" rel="noopener ugc nofollow" target="_blank">http://web.pdx.edu/~newsomj/pa551/lectur23.htm</a></p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><p id="3bb6" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">2021年7月:初稿</p><p id="3936" class="pw-post-body-paragraph kx ky it kz b la lv lc ld le lw lg lh li lx lk ll lm ly lo lp lq lz ls lt lu im bi translated">2021年10月26日:更新了新的测试，纠正了打字错误</p></div></div>    
</body>
</html>