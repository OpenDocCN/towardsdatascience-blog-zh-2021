<html>
<head>
<title>Extended Reciprocal Rank — ExtRR: An Introduction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">扩展倒数秩——ExtRR:介绍</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/extended-reciprocal-rank-ranking-evaluation-metric-5929573c778a?source=collection_archive---------27-----------------------#2021-07-29">https://towardsdatascience.com/extended-reciprocal-rank-ranking-evaluation-metric-5929573c778a?source=collection_archive---------27-----------------------#2021-07-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1f85" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一种强有力的排名评价指标的研究</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f6992c6721d90373665df19a8fc231d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bd7UX4O4EL3clA4mFxeLEw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Unsplash上的Marten Newhall </p></figure><h2 id="64c2" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">动机</h2><p id="e901" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">最近，我正在评估搜索结果的质量。倒数排名(RR)对我们的用例来说似乎很有希望，因为在结果集中的100或1000个文档中，我们只有几个“已知的”相关文档。</p><p id="b242" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">我在倒数排名和其他排名方法上遇到的问题——在我们的用例中，</p><ul class=""><li id="39c0" class="mq mr iq lu b lv ml ly mm lf ms lj mt ln mu mk mv mw mx my bi translated">RR只评估最上面的文档。</li><li id="1c95" class="mq mr iq lu b lv mz ly na lf nb lj nc ln nd mk mv mw mx my bi translated">在其他措施中，您需要标记/分级结果集中的所有文档(未标记的零级)，即使您不确定某些内容是否相关。</li><li id="afa6" class="mq mr iq lu b lv mz ly na lf nb lj nc ln nd mk mv mw mx my bi translated">我需要像常规测试一样工作的东西，有预期的结果，实际的结果，并对它们执行断言。</li></ul><p id="9fc1" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">所以，我试图将这种倒序推广到N个<strong class="lu ir">已知的</strong>相关文档中。因此得名<strong class="lu ir">扩展互惠等级(ExtRR)。</strong></p><blockquote class="ne nf ng"><p id="2e07" class="ls lt nh lu b lv ml jr lx ly mm ju ma ni mn mc md nj mo mf mg nk mp mi mj mk ij bi translated">注意，这些是N个已知的相关文档，不一定是前N个文档</p></blockquote><p id="75a7" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated"><strong class="lu ir">平均倒数排名</strong>是搜索/推荐排名评估度量。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/a49e180a254a539aab87151157edbf7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*Yz8One3GN-vJfQxy6n2rAw.png"/></div></figure><p id="d53f" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">这里，</p><ul class=""><li id="6468" class="mq mr iq lu b lv ml ly mm lf ms lj mt ln mu mk mv mw mx my bi translated">|<strong class="lu ir">|<em class="nh">|</em>|</strong>表示查询的总次数</li><li id="7014" class="mq mr iq lu b lv mz ly na lf nb lj nc ln nd mk mv mw mx my bi translated"><strong class="lu ir"> <em class="nh"> rank(i) </em> </strong>表示第<strong class="lu ir"><em class="nh">I</em></strong><em class="nh">th</em>查询的结果集中顶部文档的位置。</li></ul><p id="9a69" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">因此，为了计算平均倒数排名(MRR)，我们简单地将各个查询的倒数排名相加，然后除以查询的总数。</p><p id="e5a2" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">正如我们在上面的公式中看到的，如果在结果列表中发现顶部的文档位置靠后，我们会降低搜索质量。</p><h2 id="d4d0" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated"><strong class="ak">扩展倒数秩(ExtRR) </strong></h2><p id="11f3" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">我们可以将这个概念推广到已知的相关文档，而不是集中在单个最上面的文档。</p><p id="5e6a" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">考虑下图，我们有9个结果，其中3个是已知的<strong class="lu ir">相关文档，其他的可能相关也可能不相关。</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/0575db24c505f26dc3f557bcb12b6f48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g9M_dy3ws8rosOq5XQBC7Q.png"/></div></div></figure><p id="729c" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">上表中的<strong class="lu ir"><em class="nh">max _ expected _ position</em></strong>表示单据的预期位置。<br/>如果单据的实际位置大于预期值，评估员应扣分。</p><blockquote class="ne nf ng"><p id="ab3a" class="ls lt nh lu b lv ml jr lx ly mm ju ma ni mn mc md nj mo mf mg nk mp mi mj mk ij bi translated">注意，我没有将图中三个文档的<strong class="lu ir"><em class="iq">max _ expected _ position</em></strong>分别设为1、2、3。这意味着这个文档不一定是前三个文档。相反，可以这样想——“我知道三个文档(我不知道它们的确切位置)肯定是相关的，它们应该在第十个位置之前出现”</p></blockquote><p id="ba25" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">如上图所示，<em class="nh"> DOC #5 </em>必须出现在1和4之间的任何位置。<br/>现在，直观地，我们可以说文件#5偏离了1个位置，即5 - 4 = 1。<br/>在倒数排名中，如果顶部文档偏离1个位置，意味着它位于第二个位置，我们说质量得分为1/2。<br/>同样，在我们的例子中，文档#5的倒数将是1/(5–4+1)= 1/2</p><p id="ba6d" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">使用上述类比，我们可以设计出ExtRR的公式:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/bf9027ea261baba7e3cf94e665f2dd3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BPSD9MGLpeJwnv5slUp69w.png"/></div></div></figure><blockquote class="ne nf ng"><p id="81e4" class="ls lt nh lu b lv ml jr lx ly mm ju ma ni mn mc md nj mo mf mg nk mp mi mj mk ij bi translated">如果在最大预期位置或之前找到文档，则ExtRR的除数(y)将为1。</p></blockquote><p id="964b" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated"><strong class="lu ir">使用上面的公式，让我们计算上一个例子的ExtRR:</strong></p><p id="4bb2" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">ExtRR =(1/1+1/(5–4+1)+1/(8–6+1))/3 = ~ 0.61<br/>或者，<br/>我们甚至可以说，3次测试中有1次通过。</p><p id="6cd1" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">理想的情况是在最大位置之前找到所有文档。在这种情况下，ExtRR将:<br/> ExtRR = (1/1 + 1/1 + 1/1) /3 = 1</p><p id="52cb" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated"><strong class="lu ir"> Github代码链接:</strong> <a class="ae kv" href="https://github.com/bkatwal/search-ranking-measures/blob/main/src/main/java/org/bkatwal/relevanceevaluator/ExtendedReciprocalRank.java" rel="noopener ugc nofollow" target="_blank">扩展倒数排名</a> <br/> <strong class="lu ir">测试链接:</strong> <a class="ae kv" href="https://github.com/bkatwal/search-ranking-measures/blob/main/src/test/java/org/bkatwal/relevanceevaluator/TestExtendedReciprocalRank.java" rel="noopener ugc nofollow" target="_blank"> ExtRR测试</a></p><h2 id="5f7c" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">结论</h2><p id="f42d" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">正如我们到目前为止所看到的，ExtRR主要关注已知的“n”个相关文档，并根据它们在搜索结果中的位置给出质量分数。<br/>因此，当我们确定一些文档是相关的，但不确定其他文档是否相关时，ExtRR是一个很好的选择。</p><p id="69f7" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">ExtRR最大的优点是——你可以通过使用一些相关的文档来评估搜索质量，而不需要对所有的文档进行评级。</p><h2 id="3ba5" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">参考</h2><div class="no np gp gr nq nr"><a href="https://en.wikipedia.org/wiki/Mean_reciprocal_rank" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd ir gy z fp nw fr fs nx fu fw ip bi translated">平均倒数排名-维基百科</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">平均倒数排名是一种统计方法，用于评估产生可能响应列表的任何过程…</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">en.wikipedia.org</p></div></div><div class="oa l"><div class="ob l oc od oe oa of kp nr"/></div></div></a></div></div></div>    
</body>
</html>