<html>
<head>
<title>Handling “Missing Data” Like a Pro — Part 1 — Deletion Methods</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">像专家一样处理“缺失数据”——第1部分——删除方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/handling-missing-data-like-a-pro-part-1-deletion-methods-9f451b475429?source=collection_archive---------15-----------------------#2021-07-07">https://towardsdatascience.com/handling-missing-data-like-a-pro-part-1-deletion-methods-9f451b475429?source=collection_archive---------15-----------------------#2021-07-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="ca6f" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">数据科学。分析。统计学。Python。</h2><div class=""/><div class=""><h2 id="c334" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">面向21世纪数据科学家的基本和高级技术</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/3db29d4add07ae4fca3bfd4244471ec1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DbR_2AhcZVXD_tUQ"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">艾米丽·莫特在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="5f3e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">正如我们在致力于缺失数据系列的<a class="ae lh" rel="noopener" target="_blank" href="/the-three-types-of-missing-data-every-data-professional-should-know-d988e17d6ace">第一篇文章</a>中提到的，关于“缺失”的机制或结构的知识是至关重要的，因为我们的反应将依赖于它们。</p><p id="34b0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">虽然处理缺失数据的技术越来越多，但我们在下面讨论一些最基本到最著名的技术。这些技术包括数据删除、常数单和基于模型的插补，等等。</p><p id="f500" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在我们开始讨论它们之前，请注意这些技术的应用需要数据科学家的洞察力。即使我们可以确定遗漏的机制，也需要其他信息，如数据收集和方法学来选择最合适的技术。</p><p id="e8f8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">因为我们将要讨论的技术范围相当广泛，所以让我们把它们分割开来，使它们更容易理解。对于文章的这一部分，我们将关注:<strong class="lk jd">删除方法</strong>。</p><h1 id="c951" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">成人收入数据集</h1><p id="5c4e" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">为了加强我们的理解，让我们使用一个数据集，特别是来自<a class="ae lh" href="https://archive.ics.uci.edu/ml/datasets/adult" rel="noopener ugc nofollow" target="_blank"> UCI </a>的成人收入数据集。</p><p id="6a02" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在我们开始之前，为这个数据集执行EDA是很重要的。变量密度的知识将在选择合适的技术时派上用场。<a class="ae lh" rel="noopener" target="_blank" href="/dramatically-improve-your-exploratory-data-analysis-eda-a2fc8c851124">关于这个</a>见我的文章。</p><h2 id="9f98" class="nb mf it bd mg nc nd dn mk ne nf dp mo lr ng nh mq lv ni nj ms lz nk nl mu iz bi translated">预赛</h2><pre class="ks kt ku kv gt nm nn no np aw nq bi"><span id="b31a" class="nb mf it nn b gy nr ns l nt nu">import random<br/>import numpy as np<br/>import pandas as pd</span><span id="2976" class="nb mf it nn b gy nv ns l nt nu">#For data exploration<br/>import missingno as msno #A simple library to view completeness of data<br/>import matplotlib.pyplot as plt</span><span id="11ac" class="nb mf it nn b gy nv ns l nt nu">from numpy import random<br/>%matplotlib inline</span></pre><h2 id="7bdb" class="nb mf it bd mg nc nd dn mk ne nf dp mo lr ng nh mq lv ni nj ms lz nk nl mu iz bi translated">加载数据集</h2><pre class="ks kt ku kv gt nm nn no np aw nq bi"><span id="412d" class="nb mf it nn b gy nr ns l nt nu">df = pd.read_csv('data/adult.csv')<br/>df.head()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nw"><img src="../Images/e48f3a07a72b52d5d927377cb8c0746a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FC5B7OrY_c2389tRj9DDmg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">通过缺失no包实现完整性可视化。我们的数据在分类变量中缺少一些值。</p></figure><h2 id="aad8" class="nb mf it bd mg nc nd dn mk ne nf dp mo lr ng nh mq lv ni nj ms lz nk nl mu iz bi translated">模拟失踪</h2><p id="c078" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">让我们模拟一些连续变量的缺失:<em class="nx">年龄</em>和<em class="nx"> fnlwgt </em>。注意，这里的收入是目标变量，是分类变量。</p><pre class="ks kt ku kv gt nm nn no np aw nq bi"><span id="14f1" class="nb mf it nn b gy nr ns l nt nu">#Random Seed<br/>random.seed(25)</span><span id="e0fb" class="nb mf it nn b gy nv ns l nt nu">#Percentage Missing<br/>percentage_missing_1 = 0.15<br/>percentage_missing_2 = 0.10</span><span id="a057" class="nb mf it nn b gy nv ns l nt nu">#Number of Observations<br/>obs = df.shape[0]</span><span id="84f7" class="nb mf it nn b gy nv ns l nt nu">#Simulation<br/>df["fnlwgt"] = random.binomial(1,(1-percentage_missing_1), size=obs)*df['fnlwgt']<br/>df["age"] = random.binomial(1,(1-percentage_missing_2), size=obs)*df['age']<br/>df["fnlwgt"] = df["fnlwgt"].replace(0, np.nan)<br/>df["age"]= df["age"].replace(0, np.nan)</span><span id="2c12" class="nb mf it nn b gy nv ns l nt nu">msno.matrix(df)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ny"><img src="../Images/413e89bcc861f147e45e35748bd1927a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_eJxWWLI-PhzRdHuWZOvbQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">在我们模拟了一些缺失数据后的完整性可视化。</p></figure><p id="b30d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">“最终重量”变量的缺失数据最多。这与我们的缺失数据模拟是一致的。请注意，我们采用的机制仅仅是MCAR。</p><p id="3f96" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">“最终重量”变量的缺失数据最多。这与我们的缺失数据模拟是一致的。</p><p id="c836" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">既然我们有了丢失数据的数据集，我们现在可以继续检查我们的不同技术如何影响数据集，以及使用这样的数据集的结果。</p><h1 id="9add" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">数据删除方法</h1><p id="3fcc" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">所有数据科学博客(<em class="nx">甚至一些发表的文章</em>)中最简单的数据处理方法是数据删除。但是正如我们在引言中提到的，数据删除会降低我们的模型的有效性，特别是如果丢失的数据量很大的话。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nz"><img src="../Images/d7f1833980d0e0ec8005d142e3f73c3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cG-WIyItx8j4JL7fYv064w.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">缺失数据的数据删除方法总结</p></figure><h2 id="a908" class="nb mf it bd mg nc nd dn mk ne nf dp mo lr ng nh mq lv ni nj ms lz nk nl mu iz bi translated">列表法\完全案例法</h2><p id="df6b" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">从名称本身来看，只要缺少一个值，listwise或complete方法就会删除一个观察值。如果应用不小心，回顾一下这是如何减少我们的观察的:</p><pre class="ks kt ku kv gt nm nn no np aw nq bi"><span id="e979" class="nb mf it nn b gy nr ns l nt nu">df1 = df.copy()<br/>df1.dropna(inplace=True)<br/>df1.shape[0]</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/10722856a5309a97fd546cf1f99d93d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:294/format:webp/1*SSS2D0PXggk8-8E-CUI-LQ.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">我们的观察失去了30%的原始价值。</p></figure><p id="ed4f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们失去了30%的观测数据，这是一个很大的数字！这是显而易见的，因为整个数据集中使用的<em class="nx"> dropna() </em>会丢弃所有的观察值，只要有一列丢失。</p><p id="08ae" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这种方法有一些优点，例如简单高效，但请注意，这种方法仅适用于MCAR数据集。</p><p id="2aa8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">应用列表删除前</strong></p><p id="b591" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在决定如何处理缺失数据之前，尤其是如果您计划应用列表式删除，您需要首先确定研究的相关变量。</p><p id="9ce2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果不需要该变量，则特定项是否丢失并不重要，并且应该在应用列表式删除之前将其排除在dataframe的子集中。</p><p id="245d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如:如果我们认为最终权重与我们的研究无关(例如<em class="nx">预测收入等级</em>)，我们可以将其从我们的特征数据框架中排除。</p><pre class="ks kt ku kv gt nm nn no np aw nq bi"><span id="8f84" class="nb mf it nn b gy nr ns l nt nu">df2 = df.copy()<br/>df2 = df2.loc[:, df2.columns != 'fnlwgt']</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/86f4284abdaa90fc85b6c40c14402769.png" data-original-src="https://miro.medium.com/v2/resize:fit:274/format:webp/1*5kP2OIkOeLXmYBKY1jhsDA.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">排除一个变量只会导致总观察值的17%下降。</p></figure><p id="3f7e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">通过这一额外的步骤，我们能够从浪费的删除中节省额外的6，182个观察值。对于一些研究来说，这一小步可能是你所追求的目标精确度的差异制造者。</p><p id="23e0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">列表删除主要用于MCAR数据。由于数据是以完全随机的方式丢失的，假设我们没有删除大量的观测数据，那么我们可以假设删除操作几乎没有丢失任何信息。</p><p id="ab43" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">列表删除在大多数回归和监督学习方法中使用，包括主成分分析。(PCA)</p><h2 id="9636" class="nb mf it bd mg nc nd dn mk ne nf dp mo lr ng nh mq lv ni nj ms lz nk nl mu iz bi translated">成对删除\可用案例方法</h2><p id="0291" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">与列表删除相比，可用案例方法使用所有可用的观察值。也就是说，如果观察的特征/变量丢失，使用该特征/变量的方法或技术仅丢弃具有丢失信息的变量，而不是整个观察。</p><p id="0af6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，如果我们的数据框架中的上述观察值不包含“最终重量”值，则不会为该观察值计算需要最终重量值的测量/指标或参数。其他一切都将继续利用这个观察。</p><p id="56e4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这种方法如此不受重视，以至于大多数人都没有意识到这是相关性分析中使用的方法。要了解这一点，请访问:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oc"><img src="../Images/0eb2a7db2b6732013e7a3c825c3a6bf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9TOiW87THFCVP0d6NpCWvw.png"/></div></div></figure><p id="fb6e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">请注意，我们使用了带有缺失值的原始数据帧，并且仍然可以计算相关性。</p><p id="9aa0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">除了相关性分析，成对方法还用于因子分析。对于那些正在计算的人</p><h2 id="a765" class="nb mf it bd mg nc nd dn mk ne nf dp mo lr ng nh mq lv ni nj ms lz nk nl mu iz bi translated"><strong class="ak">可用项目</strong></h2><p id="75d5" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">用于复合变量的<strong class="lk jd">创建的方法是可用项方法。这种方法与可用案例方法一样，使用所有可用的信息。</strong></p><p id="336b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">可用项目方法通过以下方式汇总<strong class="lk jd">相关项目</strong>:</p><ol class=""><li id="055f" class="od oe it lk b ll lm lo lp lr of lv og lz oh md oi oj ok ol bi translated">首先应用标准化方法，例如z分数。</li><li id="1162" class="od oe it lk b ll om lo on lr oo lv op lz oq md oi oj ok ol bi translated">此后，<strong class="lk jd">变换后的变量不是被相加，而是对每个观察值进行平均。</strong></li></ol><p id="00d3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">因此，现在可以创建一个综合分数。</p><p id="b523" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，这被称为删除方法，因为<strong class="lk jd">它没有试图替换丢失的值。</strong></p><p id="b5d4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果您计划创建综合分数，可以简单地应用此算法。</p><h1 id="3b54" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">结束语</h1><p id="a8f2" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">本文介绍了用于处理缺失数据的第一类技术——删除。</p><p id="0868" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">删除的主要优点是简单，而主要缺点是失去了统计能力。但正如我们将在下一篇文章中看到的，另一类技术，即插补，在某些情况下也有缺点，即缺失数据专家宁愿使用删除方法。</p><p id="7eef" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">最后，我们上面提到的任何技术的应用，需要由研究者的目标、数据收集方法和遗漏的潜在机制所引导的判断。</p><p id="9ce3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在下一篇文章中，我们将讨论插补方法。</p><p id="e286" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/handling-missing-data-like-a-pro-part-2-imputation-methods-eabbf10b9ce4">像专家一样处理“缺失数据”——第2部分:插补方法</a></p><p id="03d1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/handling-missing-data-like-a-pro-part-3-model-based-multiple-imputation-methods-bdfe85f93087">像专家一样处理“缺失数据”——第3部分:基于模型的&amp;多重插补方法</a></p><h1 id="a0c7" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">参考</h1><p id="3b3c" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">麦克奈特，P. E. (2007)。<em class="nx">缺失数据:温柔的介绍</em>。吉尔福德出版社。</p></div></div>    
</body>
</html>