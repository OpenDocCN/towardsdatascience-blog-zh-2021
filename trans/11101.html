<html>
<head>
<title>A Data Pipeline for Go Trains Delay Analysis — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Go 列车延误分析的数据管道—第 1 部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-data-pipeline-for-go-trains-delay-analysis-part-1-21b2c2496aca?source=collection_archive---------25-----------------------#2021-10-29">https://towardsdatascience.com/a-data-pipeline-for-go-trains-delay-analysis-part-1-21b2c2496aca?source=collection_archive---------25-----------------------#2021-10-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b7f2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">周末建设和学习</h2></div><p id="3202" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi le translated">当我回顾我的文章频率时，我发现“周末建设和学习”最有成效的季节是秋天。我认为原因是秋天的颜色和咖啡。好的。让我们看看这个周末我们将建造和学习什么。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ln"><img src="../Images/0d418606b20fc26f2361c4031d726d50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qrd5bBzpLM-KqLEf"/></div></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">由<a class="ae md" href="https://unsplash.com/@vince_erhart?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">文森特·埃哈特</a>在<a class="ae md" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><p id="60af" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi le translated"><span class="l lf lg lh bm li lj lk ll lm di">在</span>这个构建和学习系列中，我将带您了解概念、设计、架构和构建，这与编码结合在一起，确保我们对我们最喜欢的编码部分进行端到端的逻辑思考。</p><h1 id="6287" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">用例定义</h1><p id="72fa" class="pw-post-body-paragraph ki kj it kk b kl nd ju kn ko ne jx kq kr nf kt ku kv ng kx ky kz nh lb lc ld im bi translated">自从疫情和 WFH 开赛以来，我不需要乘坐 Go Train 去上班，但我仍然通过电子邮件收到了我注册的 Go Train 延迟警报。时不时地，当我更频繁地收到提醒邮件时。我想到的问题是:</p><ol class=""><li id="bbc5" class="ni nj it kk b kl km ko kp kr nk kv nl kz nm ld nn no np nq bi translated">每天延误多少次？</li><li id="74e5" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">平均延误时间是多少分钟？</li><li id="ff2b" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">哪个车站发生的延误最多？？</li><li id="cd46" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">如果这些数据可以建立一个模型来预测火车晚点会怎么样？这将是非常整洁的。</li><li id="4067" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">等等。</li></ol><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi nw"><img src="../Images/3ac8358d5109570384d1bd8e0ce4cee1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LTO10xEZBfZjR1th"/></div></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">约翰·麦克阿瑟在<a class="ae md" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="4df5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好了，我们来总结一下我们的要求；它分为两项:</p><ol class=""><li id="cda1" class="ni nj it kk b kl km ko kp kr nk kv nl kz nm ld nn no np nq bi translated">作为一个用户，我希望看到一个仪表板，它显示关于列车晚点信息的数据元素。</li><li id="a550" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">作为一个用户，我想预测在即将到来的日期去火车延误。</li></ol><p id="0c7b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以对于这两个需求，最重要的部分是第一个，因为第二个是基于第一个的。让我们分清主次。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="6656" class="ml mm it bd mn mo nx mq mr ms ny mu mv jz nz ka mx kc oa kd mz kf ob kg nb nc bi translated">技术分析</h1><p id="a752" class="pw-post-body-paragraph ki kj it kk b kl nd ju kn ko ne jx kq kr nf kt ku kv ng kx ky kz nh lb lc ld im bi translated">需求就是需求，是人们对归档器或结果的定义。然而，</p><ol class=""><li id="6dc8" class="ni nj it kk b kl km ko kp kr nk kv nl kz nm ld nn no np nq bi translated">能做到吗？</li><li id="68d0" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">快速交付成果有什么可用的吗？</li><li id="cf00" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">有什么技术挑战吗？</li><li id="045d" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">等等。</li></ol><p id="0e56" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">上面的分析，我们可以称之为业务/技术分析，它将业务语言/需求翻译成 IT/技术语言。这项任务通常由传统公司的业务分析师(BSA)或架构师负责，有一个项目里程碑。</p><p id="e800" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在一些小型创业公司中，它将由 sprints 中的工程师负责。</p><p id="0689" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">机器学习管道需要一致的数据输入，以提高准确率。因此，在这种情况下，我们需要知道如何获得最简单快捷的数据。让我们谷歌一下，看看现有的 API 或数据集是否可用，但以可扩展的方式需要。</p><p id="fe03" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">很快，我发现 Go Train 服务确实存在一些 API /数据集，如下所示:</p><div class="oc od gp gr oe of"><a href="https://www.metrolinx.com/en/aboutus/opendata/default.aspx" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">Metrolinx 开放数据</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">作为一个省政府机构，Metrolinx 受安大略省的开放数据指令，最大限度地访问…</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">www.metrolinx.com</p></div></div><div class="oo l"><div class="op l oq or os oo ot lx of"/></div></div></a></div><p id="dc16" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，经过一些审查和分析，结论如下:</p><ol class=""><li id="c473" class="ni nj it kk b kl km ko kp kr nk kv nl kz nm ld nn no np nq bi translated">根据我到目前为止的搜索，数据集(GTFS)文件不包含 Go Train Delay 的警报和信息。</li><li id="6797" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">我们需要注册 API 来访问它；我已经提交给个人使用，但我仍在等待批准。根据数据集和响应数据结构，我没有看到当前分析的延迟时间，这是我们需要的关键信息。</li></ol><p id="72db" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好吧，让我们退一步，我们需要什么？我们需要知道</p><ol class=""><li id="b77d" class="ni nj it kk b kl km ko kp kr nk kv nl kz nm ld nn no np nq bi translated">发生日期和时间延迟</li><li id="499a" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">出发站</li><li id="62e5" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">预定的出发时间</li><li id="9266" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">目的站</li><li id="4516" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">目的地预定时间</li><li id="d760" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">延迟分钟。</li></ol><p id="c9d4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是该信息存在于提醒电子邮件中。酷毙了。我如何持续自动收到这些提醒邮件？</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="0ad0" class="ml mm it bd mn mo nx mq mr ms ny mu mv jz nz ka mx kc oa kd mz kf ob kg nb nc bi translated">体系结构</h1><p id="6c6b" class="pw-post-body-paragraph ki kj it kk b kl nd ju kn ko ne jx kq kr nf kt ku kv ng kx ky kz nh lb lc ld im bi translated">该架构将更加关注<strong class="kk iu">如何</strong>。</p><p id="7306" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这可能是一个先决条件。我用来接收 Go Train 提醒消息的电子邮件是 Gmail。</p><p id="b8b1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">经过进一步分析，我们发现 Google GMAIL API 提供了访问邮件的权限，甚至还有推送通知功能。这可用于增量数据处理，避免每次繁重的处理。</p><div class="oc od gp gr oe of"><a href="https://developers.google.com/gmail/api" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">Gmail API |谷歌开发者</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">编辑描述</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">developers.google.com</p></div></div><div class="oo l"><div class="ou l oq or os oo ot lx of"/></div></div></a></div><p id="cdb5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦我们知道了<strong class="kk iu">如何</strong>获取，现在将关注于<strong class="kk iu">获取什么</strong>，如果我们可以启动访问并处理电子邮件，只找出去火车延迟电子邮件，然后我们可以检索我们需要的信息作为如下模式的警报电子邮件:</p><blockquote class="ov ow ox"><p id="5d0c" class="ki kj oy kk b kl km ju kn ko kp jx kq oz ks kt ku pa kw kx ky pb la lb lc ld im bi translated"><strong class="kk iu"> <em class="it">主题:</em> </strong> <em class="it"> </em> <strong class="kk iu"> <em class="it">列车晚点—奥克维尔去 17:32 —联合车站 18:15 </em> </strong></p><p id="8891" class="ki kj oy kk b kl km ju kn ko kp jx kq oz ks kt ku pa kw kx ky pb la lb lc ld im bi translated"><em class="it">奥克维尔 GO 17:32 —联合车站 18:15 的列车预计将延迟 10 分钟到达</em> <strong class="kk iu"> <em class="it"> 15 分钟</em> </strong> <em class="it">从克拉克森 GO 出发，由于较早的轨道检查。我们为延迟道歉。您可以使用 gotracker.ca 来跟踪您的火车，并查看您的火车预计何时到达您的车站:</em></p></blockquote><p id="7e9a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如您所见，电子邮件标题已经包含了电台和预定时间，并且电子邮件内容具有延迟的 min 属性。</p><p id="f4fb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">看来我们正走在正确的道路上。</p><p id="28ed" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们看看数据流。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/4d51c6c8d2cb76db399545d35f4b3c2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/0*WMGhG-aprMBSrT1k.png"/></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">架构—作者截图</p></figure></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="96c9" class="ml mm it bd mn mo nx mq mr ms ny mu mv jz nz ka mx kc oa kd mz kf ob kg nb nc bi translated">构建，编码</h1><p id="1042" class="pw-post-body-paragraph ki kj it kk b kl nd ju kn ko ne jx kq kr nf kt ku kv ng kx ky kz nh lb lc ld im bi translated">我最近写了很多铁锈；在这个构建和学习中，我将使用 Golang。Golang 专为 Go Train 打造，很酷吧？</p><p id="e087" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">玩笑归玩笑，我们选择 Golang 是因为 Google Gmail API 有内置的 Golang API SDK，有助于开发过程。</p><p id="8a91" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是一个专注于以最有效的方式完成工作的极好例子。这不是关于哪种语言/技术是最好的，在我之前的文章中也阐述了这一点。</p><div class="oc od gp gr oe of"><a href="https://medium.com/swlh/dog-fight-python-vs-golang-vs-rust-for-json-processing-33c1ffe15ab9" rel="noopener follow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">争夺 JSON 处理的大战——Python VS Golang VS Rust</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">真实世界的用例比较</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">medium.com</p></div></div><div class="oo l"><div class="pd l oq or os oo ot lx of"/></div></div></a></div><p id="bc5c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们开始将它分解为更多的技术细节流程:</p><ol class=""><li id="e526" class="ni nj it kk b kl km ko kp kr nk kv nl kz nm ld nn no np nq bi translated">通过 Gmail API 访问 Gmail 电子邮件的 OAuth 认证。</li><li id="feac" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">只接收标题为“去火车延误”的电子邮件。</li><li id="d92c" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">处理每封邮件，提取我们需要的数据元素。</li><li id="e057" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">插入/加载到数据库。</li><li id="aee3" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">使用数据来训练或产生谓词模型。</li><li id="1c5c" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">为使用的列车延误谓词公开 API。</li></ol><p id="727f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我们加入每一项之前，这里是我们的代码结构。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/a9b59198706f956e20c07d26667bbc57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/0*TInGY0_XIr9geEFt.png"/></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">代码结构—作者截图</p></figure><h2 id="75d8" class="pf mm it bd mn pg ph dn mr pi pj dp mv kr pk pl mx kv pm pn mz kz po pp nb pq bi translated">1.证明</h2><p id="5569" class="pw-post-body-paragraph ki kj it kk b kl nd ju kn ko ne jx kq kr nf kt ku kv ng kx ky kz nh lb lc ld im bi translated">这应该很简单；然而，我想强调的唯一部分是 OAuth 2.0 VS 服务帐户，以及为什么我们不使用服务帐户身份验证方法。</p><p id="66e4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">根据谷歌:</p><blockquote class="ov ow ox"><p id="eeb9" class="ki kj oy kk b kl km ju kn ko kp jx kq oz ks kt ku pa kw kx ky pb la lb lc ld im bi translated"><em class="it">对 Gmail API </em> <strong class="kk iu"> <em class="it">的请求必须使用 OAuth 2.0 凭证</em> </strong> <em class="it">授权。当您的应用程序需要代表用户访问 Google APIs 时，例如，当用户离线时，您应该使用服务器端流。这种方法需要将一次性授权码从客户端传递到服务器；此代码用于为您的服务器获取访问令牌和刷新令牌。</em></p></blockquote><p id="78b8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用 credentcial.json，从谷歌 GCP 下载意味着通过 OAuth 过程生成令牌。并将该令牌用于将来的请求。</p><p id="d0a3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">而且 Google Golang Gmail API 也有现成的代码。</p><div class="oc od gp gr oe of"><a href="https://developers.google.com/gmail/api/quickstart/go" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">快速入门| Gmail API | Google 开发者</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">完成本页剩余部分描述的步骤，创建一个简单的 Go 命令行应用程序，使…</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">developers.google.com</p></div></div><div class="oo l"><div class="pr l oq or os oo ot lx of"/></div></div></a></div><h2 id="999e" class="pf mm it bd mn pg ph dn mr pi pj dp mv kr pk pl mx kv pm pn mz kz po pp nb pq bi translated">2.应用程序初始和主序列运行流程</h2><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="ps pt l"/></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">新的初始应用程序—作者代码片段</p></figure><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="ps pt l"/></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">主运行流程—作者的代码片段</p></figure><h2 id="004a" class="pf mm it bd mn pg ph dn mr pi pj dp mv kr pk pl mx kv pm pn mz kz po pp nb pq bi translated">3.仅接收标题为“列车晚点”的电子邮件</h2><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="ps pt l"/></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">内嵌流程电子邮件—按作者分类的代码片段</p></figure><h2 id="d7e7" class="pf mm it bd mn pg ph dn mr pi pj dp mv kr pk pl mx kv pm pn mz kz po pp nb pq bi translated">4.插入/加载到数据库</h2><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="ps pt l"/></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">插入/加载到数据库实现—作者的代码片段</p></figure><h1 id="8cff" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">最后，运行输出和结果</h1><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi pu"><img src="../Images/def6448f228d6a644ebfe3f850cdd450.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*J-XaRBTYq6TAPjb2.gif"/></div></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">跑步-作者截图</p></figure><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi pv"><img src="../Images/88977584e06f13930eb7f1e32a51e807.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nHdLBNSBfZMDxQVX.png"/></div></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">加载的表格—作者截图</p></figure></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="6e07" class="ml mm it bd mn mo nx mq mr ms ny mu mv jz nz ka mx kc oa kd mz kf ob kg nb nc bi translated">额外奖励—增量负载</h1><p id="d469" class="pw-post-body-paragraph ki kj it kk b kl nd ju kn ko ne jx kq kr nf kt ku kv ng kx ky kz nh lb lc ld im bi translated">我假设当你关注最终结果时，你可能会问:</p><p id="8fb2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">等一下；上面的实现只包括初始负载；增量的怎么样？</p><p id="08c4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们现在就实施它。</p><p id="5e6d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">增量应该基于电子邮件的更新，看起来这一切都是在 Google API / SDK 中完成的；我们将看看是否有任何 PubSub 机制可以用来监听电子邮件更新并触发处理，这意味着:</p><ol class=""><li id="7123" class="ni nj it kk b kl km ko kp kr nk kv nl kz nm ld nn no np nq bi translated"><strong class="kk iu">创建发布订阅客户端</strong></li></ol><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="ps pt l"/></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">创建 pubsub 客户端—作者截图</p></figure><p id="9557" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> 2。听听变化</strong></p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="ps pt l"/></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">收听订阅更改—作者截图</p></figure><p id="5871" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> 3。处理即将到来的新邮件。</strong></p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="ps pt l"/></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">处理更改-作者截图</p></figure><h2 id="ac70" class="pf mm it bd mn pg ph dn mr pi pj dp mv kr pk pl mx kv pm pn mz kz po pp nb pq bi translated">新的最终结果如下。</h2><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi pv"><img src="../Images/8246ea420c21ae4cc23c092debfe65f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*09rQdI2cdW4u91uD.png"/></div></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">最终初始和增量加载—作者截图</p></figure><p id="585a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们有初始负载，并有所有传入延迟警报的监听器，这可以保持数据库增长，并增加训练数据集的大小和容量。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="de6c" class="ml mm it bd mn mo nx mq mr ms ny mu mv jz nz ka mx kc oa kd mz kf ob kg nb nc bi translated">第一部分的结论</h1><p id="e06b" class="pw-post-body-paragraph ki kj it kk b kl nd ju kn ko ne jx kq kr nf kt ku kv ng kx ky kz nh lb lc ld im bi translated">在第 1 部分中，我们从用例、分析、概念、解决方案开始，当然还有编码和构建。</p><p id="3146" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">目标状态将是完整的端到端 ML Ops 管道。</p><p id="75b0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在第 2 部分中，我们将基于 ETLed 表，开始构建</p><ol class=""><li id="a69b" class="ni nj it kk b kl km ko kp kr nk kv nl kz nm ld nn no np nq bi translated">仪表盘</li><li id="da61" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">ML 模型和用于模型 API 的 API 可以与用户请求交互。</li></ol><p id="ce61" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在第 3 部分中，我们将关注 Github 操作(CI/CD)和部署。</p><blockquote class="pw"><p id="0a4c" class="px py it bd pz qa qb qc qd qe qf ld dk translated">感谢你花时间陪我度过我的建设和学习周末。</p></blockquote></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><p id="db7b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi le translated">T2:这是一个独特的构建和学习项目；本文中显示的数字、分析和仪表板与 <a class="ae md" href="https://www.metrolinx.com/en/aboutus/opendata/default.aspx" rel="noopener ugc nofollow" target="_blank"> <em class="oy"> Metrolinx </em> </a>提供的任何服务或 API 无关，它只是我的分析注释，供我学习使用。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><p id="8602" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我开始写作之旅已经快三年了。你们的支持是让我不断前进，写出更多精彩学习分享的最重要动力。</p><div class="oc od gp gr oe of"><a href="https://jayhuang75.medium.com/membership" rel="noopener follow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">用我的推荐链接-黄伟加入媒体</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">jayhuang75.medium.com</p></div></div><div class="oo l"><div class="qg l oq or os oo ot lx of"/></div></div></a></div><p id="0415" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另外，你可以用下面的链接给我买一杯咖啡，让我有动力在周末进行更多的锻炼和学习。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><a href="https://www.buymeacoffee.com/jayhuang75"><div class="gh gi pv"><img src="../Images/69bc0ea6da502e91f6688c04a508bcdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6FVkWZEmOS9NwhqB.png"/></div></a><p class="lz ma gj gh gi mb mc bd b be z dk translated">你能给我买杯咖啡吗？</p></figure><div class="oc od gp gr oe of"><a href="https://medium.com/geekculture/a-data-pipeline-for-go-trains-delay-analysis-part-2-e5b9ef0ea315" rel="noopener follow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">Go 列车延误分析的数据管道——第二部分</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">BI 仪表板和弹性搜索，如 API Power by Rust</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">medium.com</p></div></div><div class="oo l"><div class="qh l oq or os oo ot lx of"/></div></div></a></div></div></div>    
</body>
</html>