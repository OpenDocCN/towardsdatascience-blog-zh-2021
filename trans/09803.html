<html>
<head>
<title>How to Create a Docker Image with Jupyter Notebook and Kotlin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Jupyter笔记本和Kotlin打造Docker形象</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-create-a-docker-image-with-jupyter-notebook-kotlin-2e8bbf212f81?source=collection_archive---------7-----------------------#2021-09-14">https://towardsdatascience.com/how-to-create-a-docker-image-with-jupyter-notebook-kotlin-2e8bbf212f81?source=collection_archive---------7-----------------------#2021-09-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b406" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用<strong class="ak"> Docker </strong>分3步设置自定义<strong class="ak"> Jupyter </strong>笔记本环境兼容<strong class="ak">T3】KotlinT5】内核。</strong></h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/ce6b2eb8522d1156d70f18a88d13f52f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eSFJX2aGMKxwt6hOag-pyQ.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Jupyter + kotlin内核示例(图片由作者提供)</p></figure><p id="077a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">计算笔记本</em> </strong>或<strong class="lb iu"> <em class="lv"> </em> </strong>简称<strong class="lb iu"> <em class="lv">笔记本</em> </strong>是一种灵活的交互式工具，允许科学家在同一文档中组合软件代码、计算输出和解释性资源(如文本、图表和任何其他媒体内容)。笔记本电脑有多种用途，包括数据清理和转换、数值模拟、统计建模、数据可视化、机器学习等等。</p><p id="f6ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">计算笔记本并不是什么新东西，它们已经存在了很长时间。然而，基于web的开发环境的兴起以及对数据科学学科(如探索性数据分析、机器学习或深度学习等)日益增长的兴趣，已经指定一般的笔记本电脑以及特别是<a class="ae lw" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="lv">【Jupyter】</em></strong></a><strong class="lb iu"><em class="lv">笔记本电脑</em> </strong>作为全世界科学家和研究人员的首选工具。有很多方法可以在您的本地环境中安装<strong class="lb iu"><em class="lv">Jupyter</em></strong>(<a class="ae lw" href="https://pypi.org/project/pip/" rel="noopener ugc nofollow" target="_blank">pip</a>，<a class="ae lw" href="https://www.anaconda.com/" rel="noopener ugc nofollow" target="_blank"> Anaconda </a>，…)甚至直接在云驱动的笔记本环境中工作(比如<a class="ae lw" href="https://colab.research.google.com/notebooks/intro.ipynb" rel="noopener ugc nofollow" target="_blank"> Google Colab) </a>。然而，这些方法中的大多数都是面向<strong class="lb iu"> Python </strong>的，这意味着如果你想将<strong class="lb iu">Jupyter<em class="lv">Jupyter</em>T25】与任何其他语言(如<strong class="lb iu">T27】KotlinT29】Scala或Java)一起使用，你将不得不安装额外的<em class="lv">内核</em>。在这篇文章中，我们将解释一个非常简单的方法来设置你自己的<a class="ae lw" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="lv">Jupyter</em></strong></a><strong class="lb iu"><em class="lv"/></strong>环境<strong class="lb iu"> <em class="lv"> </em> </strong>兼容<strong class="lb iu"> <em class="lv"> Kotlin </em> </strong>语言，不需要安装任何东西，只需要在你的笔记本电脑上安装一个工具:<a class="ae lw" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>。</strong></strong></p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="f0c4" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">环境</h1><p id="25e0" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">本文是基于以下平台编写的:</p><ul class=""><li id="6f90" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated"><strong class="lb iu">操作系统</strong> : MacOS Catalina 10.15.7</li><li id="5c19" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><strong class="lb iu"> Docker社区:</strong> v.20.10.2 for Mac ( <a class="ae lw" href="https://docs.docker.com/docker-for-mac/install/" rel="noopener ugc nofollow" target="_blank">如何安装docker </a>)</li></ul><h1 id="580b" class="me mf it bd mg mh np mj mk ml nq mn mo jz nr ka mq kc ns kd ms kf nt kg mu mv bi translated">目标</h1><p id="29ad" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">本文旨在详细说明使用以下组件创建自定义docker映像的步骤:<strong class="lb iu"><em class="lv">【Jupyter Notebook】</em></strong>和<strong class="lb iu"> <em class="lv"> Kotlin内核</em> </strong>。一旦环境建立起来，我们将展示如何访问它以及如何使用它。最后，在确认一切正常后，我们将把我们的图像上传到一个容器图像库，如<a class="ae lw" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker Hub </a>，这样社区就可以轻松访问它。</p><p id="2098" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们简单讨论一下我们将要使用的技术和产品:</p><p id="75f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae lw" href="http://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> Docker </strong> </a>是一个软件平台，旨在通过使用容器来简化应用程序的创建、部署和运行。<strong class="lb iu"> <em class="lv"> Docker </em> </strong>允许开发者将应用程序及其所有依赖项打包到一个容器中，然后作为一个包发送出去。这项技术允许停止担心安装组件和库，只需专注于工作。</p><p id="5955" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae lw" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="lv">Jupyter</em></strong></a><strong class="lb iu"/>是一个基于web的交互式开发环境，允许管理<strong class="lb iu"> Jupyter </strong> <strong class="lb iu">笔记本</strong>。Jupyter Notebook是一种基于<a class="ae lw" href="https://www.json.org/json-en.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> JSON </strong> </a>的交互式开放文档格式，用于将软件源代码、叙述性文本、媒体内容和计算输出组合在一个单独的文档中。</p><p id="84c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae lw" href="https://kotlinlang.org/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="lv">Kotlin</em></strong></a>是由<a class="ae lw" href="https://www.jetbrains.com/" rel="noopener ugc nofollow" target="_blank"> JetBrains </a>创建的通用、免费、开源、静态类型化的“实用主义”编程语言。<strong class="lb iu"> <em class="lv"> Kotlin </em> </strong>结合了面向对象和函数式编程特性，它被设计成完全与Java互操作，而Kotlin的标准库的JVM版本依赖于Java类库。</p><p id="884c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">讨论在您的数据科学项目中使用<strong class="lb iu"> <em class="lv"> Kotlin </em> </strong>的原因超出了本文的范围，但是如果您想了解这个主题，我建议您查看以下来自JetBrains的资源(<a class="ae lw" href="https://resources.jetbrains.com/storage/products/kotlinconf2017/slides/kotlin_for_data_science.pdf" rel="noopener ugc nofollow" target="_blank">此处为</a>)。</p><h1 id="8e0f" class="me mf it bd mg mh np mj mk ml nq mn mo jz nr ka mq kc ns kd ms kf nt kg mu mv bi translated">步骤1:创建Dockerfile文件</h1><p id="2984" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">一个<em class="lv"> Dockerfile </em>是一个文本文档，包含用户可以在命令行上执行的指令，以构建和组装docker映像。因为我们目标是创建一个docker映像，所以我们的第一步是创建一个docker文件。因此，转到您的项目目录并创建一个名为<em class="lv"> Dockerfile的新文件。</em>创建后，我们可以通过添加如下内容对其进行编辑:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nu nv l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae lw" href="https://gist.github.com/migueldoctor/eb29f91aae612c618d9b12ff3b297e6c" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/Miguel doctor/EB 29 f 91 aae 612 c 618d 9 b 12 ff 3 b 297 E6 c</a></p></figure><p id="4a44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们解释一下文件的内容:</p><ul class=""><li id="caaa" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated"><code class="fe nw nx ny nz b">FROM jupyter/base-notebook:</code>这是我们<em class="lv"> Dockerfile </em>的第一行。通常一个<em class="lv"> Dockerfile </em>以<code class="fe nw nx ny nz b">FROM</code>命令开始。FROM指令接收预先存在的docker图像作为参数。想法是使用这个图像提供的服务，并通过在其上添加新的层来扩展它。作为参数传递的基本图像是<code class="fe nw nx ny nz b">jupyter/base-notebook</code>。此映像包含已经安装的Jupyter的基本版本。</li><li id="4a66" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe nw nx ny nz b">LABEL Miguel Doctor &lt;migueldoctor@gmail.com&gt;:</code>标签命令是可选的。它用于标识映像的维护者。如果包括在内，您允许对您的图像感兴趣的人联系您，以防他们需要问您一些问题或报告图像的问题。</li><li id="a0df" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe nw nx ny nz b">ENV</code>定义了环境变量。在这种情况下，我们指出，我们希望使用完整的<a class="ae lw" href="https://github.com/jupyterlab/jupyterlab" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="lv">Jupyter Lab</em></strong></a><strong class="lb iu"><em class="lv"/></strong>解决方案，它允许我们处理几个笔记本电脑并使用一个漂亮的浏览器web界面。</li></ul><h1 id="1e45" class="me mf it bd mg mh np mj mk ml nq mn mo jz nr ka mq kc ns kd ms kf nt kg mu mv bi translated">步骤2:将openjdk-8-jre和Kotlin内核添加到docker文件中</h1><p id="92d0" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">如前所述，Jupyter的默认配置是面向Python的，因此为了使用不同的语言，如<strong class="lb iu"> <em class="lv"> Kotlin </em> </strong>，我们需要安装和配置特定的内核。由于<strong class="lb iu"> <em class="lv"> Kotlin </em> </strong>是一种<a class="ae lw" href="https://docs.oracle.com/javase/8/docs/technotes/guides/vm/" rel="noopener ugc nofollow" target="_blank"> JVM </a>语言，所以首先要安装的就是Java运行时环境(JRE)。</p><p id="9964" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，让我们更新我们的<em class="lv"> Dockerfile </em>，在它上面包含<em class="lv"> openjdk-8-jre </em>安装。一旦安装了JRE，我们需要添加<strong class="lb iu"> <em class="lv"> Kotlin </em> </strong>内核，这样它就可以连接到<strong class="lb iu"> <em class="lv"> Jupyter </em> </strong>。要做到这一点，我们只需打开<em class="lv"> Dockerfile </em>并编辑其内容，如以下脚本所示:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nu nv l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae lw" href="https://gist.github.com/migueldoctor/3344baf619ac62dd773c0669a4cba8d6" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/Miguel doctor/3344 BAF 619 AC 62 DD 773 c 0669 a4 CBA 8d 6</a></p></figure><p id="5f64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所见，我们在文件中添加了几行，这些行使用了新的<em class="lv"> Dockerfile </em>关键字，如USER和RUN。所以让我们解释一下这些命令是用来做什么的。</p><ul class=""><li id="e2ac" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated"><code class="fe nw nx ny nz b">USER</code>命令允许改变负责在<em class="lv"> Dockerfile </em>中执行以下指令的用户帐号。因为在容器上安装JDK 8只有根用户可以使用，我们需要在文件中指明。</li><li id="49e0" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">关键字<code class="fe nw nx ny nz b">RUN</code>负责在构建时执行动作。通过使用RUN，您可以自定义底层映像更新软件包，向映像添加新的应用程序或安排安全规则等。在我们的例子中，我们在文件中调用RUN指令两次。首先运行<a class="ae lw" href="https://wiki.debian.org/Apt" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="lv">apt</em></strong></a><em class="lv"/>包管理实用程序，这样<a class="ae lw" href="https://openjdk.java.net/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="lv">open-JDK</em></strong></a>(版本8)就可以安装在容器上了。第二条<code class="fe nw nx ny nz b">RUN</code>指令执行<a class="ae lw" href="https://docs.conda.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> <em class="lv">康达</em></strong></a><strong class="lb iu"><em class="lv"/></strong>命令行工具安装<strong class="lb iu"><em class="lv">kotlin-jupyter-kernel</em></strong>。</li></ul><h1 id="6235" class="me mf it bd mg mh np mj mk ml nq mn mo jz nr ka mq kc ns kd ms kf nt kg mu mv bi translated">步骤3:创建一个Makefile来构建和运行映像</h1><p id="aa60" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">关于<em class="lv"> Dockerfile </em>就这么多了！现在，我们需要使用docker来获取刚刚创建的docker文件并构建docker映像，以便它可以作为容器运行。为此，只需进入终端，导航到您的项目文件夹(<em class="lv"> Dockerfile </em>所在的位置)并创建一个名为<em class="lv"> Makefile的新文本文件。</em>然后你需要添加以下内容:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nu nv l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae lw" href="https://gist.github.com/migueldoctor/5bce365502a60fba65b36f85830d4631" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/Miguel doctor/5 BCE 365502 a 60 FBA 65 b 36 f 85830d 4631</a></p></figure><p id="3006" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们解释一下我们刚刚添加到文件中的内容:</p><p id="3068" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nw nx ny nz b">1) run</code>关键字定义了运行<strong class="lb iu"> <em class="lv"> Makefile时要执行的指令段。</em> </strong></p><p id="70da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nw nx ny nz b">2) docker build -t &lt;name of the image&gt; &lt;path or the dockerfile&gt;:</code>它通过将图像的名称和<strong class="lb iu"> <em class="lv"> Dockerfile </em> </strong>所在的路径作为参数传递来创建docker图像。</p><blockquote class="oa ob oc"><p id="187f" class="kz la lv lb b lc ld ju le lf lg jx lh od lj lk ll oe ln lo lp of lr ls lt lu im bi translated"><em class="it">重要提示:标签</em>“Miguel doctor/docker-jupyter-kot Lin-notebook”<em class="it">是我们分配给图像的标识符。这是一个任意参数，因此您可以随意修改。</em></p></blockquote><p id="ec05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nw nx ny nz b">3) docker run</code>:这个命令实际上启动了docker容器。它需要一些参数，我们解释如下:</p><ul class=""><li id="02ba" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated">参数- <strong class="lb iu"> <em class="lv"> name </em> </strong>用于给容器指定一个特定的名称。</li><li id="45c6" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">选项<strong class="lb iu"> - <em class="lv"> v </em> </strong>用于在位于主机上的文件夹(<strong class="lb iu">/Users/mdoctor/Documents/docker volumes/kotlin-jupyter)</strong>和容器内的特定路径(<strong class="lb iu"> /home/jovyan/work) </strong>之间建立映射(如果该文件夹不存在，您必须创建它)。这就是<strong class="lb iu"> <em class="lv"> Docker </em> </strong>定义的<strong class="lb iu">卷</strong>，它允许在主机和容器之间共享信息。当作为参数传递给<code class="fe nw nx ny nz b">docker run</code>命令时，两个路径都需要用冒号(:)分隔。如果你想了解更多关于体积的知识，你可以点击查看<a class="ae lw" href="https://medium.com/geekculture/data-persistence-on-mysql-phpmyadmin-using-docker-in-3-steps-c3760d534e41" rel="noopener">的帖子。</a></li><li id="5123" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">选项<strong class="lb iu"> <em class="lv"> -p </em> </strong>允许我们映射主机端口和容器端口。<em class="lv"> -p </em>参数后面是主机的端口号(<strong class="lb iu"> 8888 </strong>)，将被重定向到容器的端口号(<strong class="lb iu"> 8888 </strong>)。</li><li id="5c55" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">最后，我们需要将在之前的docker build命令中创建的图像<em class="lv">Miguel doctor/docker-jupyter-kot Lin-notebook</em>作为参数进行传递。</li></ul><p id="edb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">曾经解释过的<strong class="lb iu"><em class="lv">Makefile</em></strong><em class="lv">，</em>我们只需要保存文件并在定位到项目的文件夹时键入以下命令即可。</p><pre class="kk kl km kn gt og nz oh oi aw oj bi"><span id="40d1" class="ok mf it nz b gy ol om l on oo">$ make</span></pre><p id="506e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一会儿，终端将显示正在执行的指令列表(构建映像、启动容器……)，最终您将看到类似下面的日志跟踪:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi op"><img src="../Images/81813176c4ad00ba0399e643a4a17460.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jQQK-ehAUUwJ12htBIuqVA.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Juptyer服务器已准备就绪(图片由Miguel Doctor提供)</p></figure><p id="fc72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着<strong class="lb iu"> <em class="lv"> Jupyter </em> </strong>服务器已经启动并运行，你可以通过打开你的网络浏览器并键入日志上显示的最后一个URL来访问它:(<a class="ae lw" href="http://localhost:8888/" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8888/</a><a class="ae lw" href="http://8f212e15d9a4:8888/lab?token=de4d7f250f18430848ad1b40bb84a127d558968907cb10a6" rel="noopener ugc nofollow" target="_blank">lab？token = de 4d 7 f 250 f 18430848 ad 1 b 40 bb 84 a 127d 558968907 CB 10a 6</a>。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi oq"><img src="../Images/948f186dc46e5e1ac716823fe07f5022.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m36iACPZfglAHjWFzzin_w.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">安装了Kotlin内核的Jupyter实验室(图片由作者提供)</p></figure><p id="8ae0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你能看到图中所示，恭喜你！这意味着容器正在运行<strong class="lb iu"> <em class="lv"> Jupyter </em> </strong>和<strong class="lb iu"> <em class="lv"> Kotlin </em> </strong>内核。现在，您只需点击笔记本部分的<strong class="lb iu"> <em class="lv"> Kotlin </em> </strong>图标，即可创建您的笔记本并开始使用。如下所示，你可以看到一个简单的笔记本应该是什么样子的，带有一些<strong class="lb iu"> <em class="lv">科特林</em> </strong>代码。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/ce6b2eb8522d1156d70f18a88d13f52f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eSFJX2aGMKxwt6hOag-pyQ.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Jupyter + kotlin内核示例(图片由作者提供)</p></figure><p id="3873" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">重要:</em> </strong>注意，运行<em class="lv"> make </em>命令会在每次执行时构建docker镜像，这意味着如果没有在<em class="lv">docker文件</em>中做任何修改，会浪费时间和资源。因此，除非您编辑<em class="lv"> Dockerfile </em>，否则您应该使用以下命令运行容器(已经包含在makefile中，并在上面解释过)。</p><pre class="kk kl km kn gt og nz oh oi aw oj bi"><span id="03dc" class="ok mf it nz b gy ol om l on oo">$ docker run --name my-jupyter-kotlin -v /Users/mdoctor/Documents/dockerVolumes/kotlin-jupyter/:/home/jovyan/work -p 8888:8888 migueldoctor/docker-jupyter-kotlin-notebook</span></pre><h1 id="78ef" class="me mf it bd mg mh np mj mk ml nq mn mo jz nr ka mq kc ns kd ms kf nt kg mu mv bi translated">可选:将图像推送到Docker Hub</h1><p id="da45" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">在某些情况下，我们可能会对向社区发布我们的docker图像感兴趣，这样每个人都可以从我们的工作中受益。对于我们的特殊情况，我们已经决定使用<a class="ae lw" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker Hub </a>作为我们的中央注册中心。如下，我们描述了将刚刚创建的图像上传到Docker Hub的方法:</p><ul class=""><li id="8327" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated">Docker Hub 允许用户根据需要创建一个账户来上传图片，所以如果你还没有注册，你需要在网上注册。</li><li id="8a01" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">注册之后，您需要打开一个终端，并使用<code class="fe nw nx ny nz b">docker login</code>命令连接到Docker注册中心。系统会提示您输入用户名和密码。</li></ul><pre class="kk kl km kn gt og nz oh oi aw oj bi"><span id="4b9f" class="ok mf it nz b gy ol om l on oo">$ docker login<br/>Login with your Docker ID to push and pull images from Docker Hub. If you don't have a Docker ID, head over to <a class="ae lw" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank">https://hub.docker.com</a> to create one.<br/>Username:</span></pre><ul class=""><li id="1136" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated">最后，您需要使用<code class="fe nw nx ny nz b">docker push</code>后跟图片名称来上传。由于我们使用了docker ID用户名(<em class="lv"> migueldoctor) </em>作为构建映像的前缀，我们可以使用下面的命令直接推送映像。如果您没有使用您的docker ID作为前缀，您需要按照以下<a class="ae lw" href="https://migueldoctor.medium.com/how-to-create-a-custom-docker-image-with-jdk8-maven-and-gradle-ddc90f41cee4" rel="noopener">帖子</a>的<strong class="lb iu"> <em class="lv">步骤5 </em> </strong>中的指示对其进行标记:</li></ul><pre class="kk kl km kn gt og nz oh oi aw oj bi"><span id="c4f1" class="ok mf it nz b gy ol om l on oo">$ docker push migueldoctor/docker-jupyter-kotlin-notebook</span></pre><p id="63a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦图像被成功地推入Docker Hub，就会创建一个新的url来提供对图像的公共访问。该url将包含图像的当前版本以及我们将来可能想要推送的任何新版本/标签。对于我们的示例，url如下:</p><p id="46f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae lw" href="https://hub.docker.com/r/migueldoctor/docker-jupyter-kotlin-notebook" rel="noopener ugc nofollow" target="_blank">https://hub . docker . com/r/Miguel doctor/docker-jupyter-kot Lin-notebook</a></p><h1 id="d171" class="me mf it bd mg mh np mj mk ml nq mn mo jz nr ka mq kc ns kd ms kf nt kg mu mv bi translated">结论</h1><p id="e59d" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">在这篇文章中，我们已经描述了如何创建自己的定制docker映像，包括一个与<strong class="lb iu"><em class="lv">Kotlin</em></strong><strong class="lb iu"><em class="lv">内核</em> </strong>兼容的全功能<strong class="lb iu"> <em class="lv"> Jupyter </em> </strong>笔记本服务器。此外，我们解释了所有参数，以便您可以通过添加/删除内核来定制映像。最后，我们解释了如何运行映像以及将docker映像推送到Docker Hub registry的步骤。</p><p id="f1f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请随时留下您在文章中发现的任何评论、见解或错误。非常欢迎您的反馈，这将有助于提高文章的质量。一如既往的感谢您的阅读。我强烈希望本教程能帮助你使用<strong class="lb iu"><em class="lv"/></strong><strong class="lb iu"><em class="lv">kot Lin</em></strong>和<strong class="lb iu"> <em class="lv"> Docker </em> </strong> <em class="lv">开始数据科学项目。</em></p><h1 id="7187" class="me mf it bd mg mh np mj mk ml nq mn mo jz nr ka mq kc ns kd ms kf nt kg mu mv bi translated">来源</h1><ul class=""><li id="ebac" class="nb nc it lb b lc mw lf mx li or lm os lq ot lu ng nh ni nj bi translated"><a class="ae lw" href="https://docs.docker.com/engine/reference/run/" rel="noopener ugc nofollow" target="_blank">https://docs.docker.com/engine/reference/run/</a></li><li id="2292" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><a class="ae lw" href="https://jupyter.org/documentation" rel="noopener ugc nofollow" target="_blank">https://jupyter.org/documentation</a></li><li id="7cb4" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><a class="ae lw" href="https://kotlinlang.org/" rel="noopener ugc nofollow" target="_blank">https://kotlinlang.org/</a></li><li id="764b" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><a class="ae lw" href="https://howtodoinjava.com/library/docker-hello-world-example/#create-docker-image" rel="noopener ugc nofollow" target="_blank">https://howtodoinjava . com/library/docker-hello-world-example/# create-docker-image</a></li><li id="f0f9" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><a class="ae lw" href="https://www.nature.com/articles/d41586-018-07196-1" rel="noopener ugc nofollow" target="_blank">https://www.nature.com/articles/d41586-018-07196-1</a></li><li id="3659" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><a class="ae lw" href="https://www.json.org/json-en.html" rel="noopener ugc nofollow" target="_blank">https://www.json.org/json-en.html</a></li><li id="23cb" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><a class="ae lw" href="https://migueldoctor.medium.com/how-to-create-a-custom-docker-image-with-jdk8-maven-and-gradle-ddc90f41cee4" rel="noopener">https://Miguel doctor . medium . com/how-to-create-a-custom-docker-image-with-JDK 8-maven-and-gradle-DDC 90 f 41 CEE 4</a></li></ul></div></div>    
</body>
</html>