<html>
<head>
<title>3 Libraries to visualize the execution of your Python code in real-time</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">3个库来实时可视化Python代码的执行</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/3-libraries-to-visualize-the-execution-of-your-python-code-in-real-time-cdbb5a46f216?source=collection_archive---------15-----------------------#2021-06-12">https://towardsdatascience.com/3-libraries-to-visualize-the-execution-of-your-python-code-in-real-time-cdbb5a46f216?source=collection_archive---------15-----------------------#2021-06-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d110" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过可视化执行来了解性能瓶颈</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/292c4b32885d661449cc2d4a38d03423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1XsIDbGmjXAisGuL3y70Eg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=4005286" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae ky" href="https://pixabay.com/users/billithecat-7996303/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=4005286" rel="noopener ugc nofollow" target="_blank">妮娜·加曼</a></p></figure><p id="e135" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python比其他语言慢，因为它的动态性和多功能性。有时复杂的计算或算法在Python中需要花费大量时间来执行。需要跟踪代码的执行流程，深入了解性能瓶颈。</p><p id="0fdd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python中的日志模块可用于跟踪代码事件，并可用于确定代码崩溃的原因。高效使用记录器还可以跟踪代码片段的时间复杂度。日志可能是有用的，但是它太技术性了，需要正确的实现。<em class="lv"> </em>在本文中，我们将讨论3个这样的开源Python库，它们可以帮助开发人员只用几行代码就能可视化程序的执行。</p><h1 id="82e6" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">Pyheat:</h1><p id="4c27" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Pyheat是一个开源Python库，帮助开发人员获得代码执行的逐行时间分布。Pyheat不是以表格形式呈现，而是用热图表示运行每行代码所需的时间。</p><h2 id="7cb0" class="mt lx it bd ly mu mv dn mc mw mx dp mg li my mz mi lm na nb mk lq nc nd mm ne bi translated">安装:</h2><p id="e7f5" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Pyheat可以从PyPl安装，使用</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="ca03" class="mt lx it ng b gy nk nl l nm nn"><strong class="ng iu">pip install py-heat</strong></span></pre><p id="9fd4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并使用<code class="fe no np nq ng b"><strong class="lb iu">from pyheat import PyHeat</strong></code>将其导入</p><h2 id="03d5" class="mt lx it bd ly mu mv dn mc mw mx dp mg li my mz mi lm na nb mk lq nc nd mm ne bi translated">用法:</h2><p id="2c95" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Pyheat可用于为Python模块的每一行代码生成时间编号的热图。将Python文件的路径作为参数传递给<code class="fe no np nq ng b"><strong class="lb iu">PyHeat</strong></code>函数。</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="4b44" class="mt lx it ng b gy nk nl l nm nn"><strong class="ng iu">ph = PyHeat('merge_sort.py')<br/>ph.create_heatmap()<br/>ph.show_heatmap()</strong></span></pre><p id="d76b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上述代码生成一个热图，表示在<code class="fe no np nq ng b">merge_sort.py</code>模块中运行每一行代码所需的时间(秒)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/60a462f644ee210233dcb1b8ee7bcba1.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*eD7ORQD7UjTi6OvsUWjsXw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="65ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过观察上面的热图，第17行中的while循环花费了大部分时间(7秒)来执行。热图有助于开发人员识别花费大部分时间执行的代码片段，这些代码片段可以进一步优化。</p><h1 id="b501" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">心率:</h1><p id="15c3" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Heartrate是一个开源的Python库，它提供了Python程序执行的实时可视化。它提供了执行的逐行可视化，其中的数字给出了每一行被执行的次数。它在浏览器的一个单独窗口中显示代码的执行情况。</p><h2 id="95a6" class="mt lx it bd ly mu mv dn mc mw mx dp mg li my mz mi lm na nb mk lq nc nd mm ne bi translated">安装:</h2><p id="ad48" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">心率库可以从PyPl安装，使用:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="5539" class="mt lx it ng b gy nk nl l nm nn"><strong class="ng iu">pip install heartrate</strong></span></pre><h2 id="c296" class="mt lx it bd ly mu mv dn mc mw mx dp mg li my mz mi lm na nb mk lq nc nd mm ne bi translated">用法:</h2><p id="a38c" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">导入包<code class="fe no np nq ng b">(import heartrate)</code>后，使用<code class="fe no np nq ng b">heartrate.trace(browser=True)</code>功能将打开一个浏览器窗口，显示调用<code class="fe no np nq ng b">trace()</code>的文件的可视化。</p><p id="d03e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在执行代码时，如果您现在可以跟随<a class="ae ky" href="http://localhost:9999/file/?filename=heartrate_example.py" rel="noopener ugc nofollow" target="_blank"> http://localhost:9999 </a>来观察执行的输出可视化，那么您的浏览器中将会弹出一个窗口。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/72108fd05d9ff8894a4faa884cde2ae7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*oG64I3b66X2W-rlubFOKSA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="65e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每行最左边的数字表示特定行被执行的次数。条形显示最近被点击的行，越长的条形表示点击越多，越浅的颜色表示越近。它还显示了一个实时堆栈跟踪。</p><h1 id="17f2" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">窥探:</h1><p id="b01b" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Snoop是另一个可以用作调试工具的包。Snoop帮助你识别局部变量的值并跟踪程序的执行。Snoop主要用作调试工具，以找出为什么您的Python代码没有做您认为它应该做的事情。</p><p id="ac06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有这些都可以通过在您想要跟踪的函数之前使用一个snoop装饰器来实现。</p><h2 id="e902" class="mt lx it bd ly mu mv dn mc mw mx dp mg li my mz mi lm na nb mk lq nc nd mm ne bi translated">安装:</h2><p id="7ebe" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Snoop库可以从PyPl安装，使用:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="80bf" class="mt lx it ng b gy nk nl l nm nn"><strong class="ng iu">pip install snoop</strong></span></pre><h2 id="a926" class="mt lx it bd ly mu mv dn mc mw mx dp mg li my mz mi lm na nb mk lq nc nd mm ne bi translated">用法:</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><h1 id="43db" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">结论:</h1><p id="75be" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在本文中，我们转换了3个库，可以用来可视化Python代码的执行。这些库帮助开发人员深入挖掘代码，找到并理解性能瓶颈，只需添加几行代码。</p><h1 id="f03d" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">参考资料:</h1><p id="f401" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">[1]py heat GitHub:<a class="ae ky" href="https://github.com/csurfer/pyheat" rel="noopener ugc nofollow" target="_blank">https://github.com/csurfer/pyheat</a></p><p id="acd8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[2]心率GitHub:<a class="ae ky" href="https://github.com/alexmojaki/heartrate" rel="noopener ugc nofollow" target="_blank">https://github.com/alexmojaki/heartrate</a></p><p id="0290" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[3]Snoop GitHub:<a class="ae ky" href="https://github.com/alexmojaki/snoop" rel="noopener ugc nofollow" target="_blank">https://github.com/alexmojaki/snoop</a></p><blockquote class="nv"><p id="acec" class="nw nx it bd ny nz oa ob oc od oe lu dk translated">感谢您的阅读</p></blockquote></div></div>    
</body>
</html>