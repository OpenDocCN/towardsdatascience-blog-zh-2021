<html>
<head>
<title>A hidden gem: df.select_dtypes()</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一颗隐藏的宝石:df.select_dtypes()</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-hidden-gem-df-select-dtypes-a660db0e8609?source=collection_archive---------21-----------------------#2021-11-12">https://towardsdatascience.com/a-hidden-gem-df-select-dtypes-a660db0e8609?source=collection_archive---------21-----------------------#2021-11-12</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="042b" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">一个关于2014年熊猫功能的微帖子一直在我的雷达下飞行。</h2></div><p id="5efe" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">有多少次你把一个熊猫<a class="ae lf" href="https://pandas.pydata.org/docs/reference/frame.html" rel="noopener ugc nofollow" target="_blank">数据帧</a>输入到另一个库的一个实用函数中，却因为有对象列而失败。也许这是来自seaborn的图表？(我们在看你<a class="ae lf" href="https://seaborn.pydata.org/generated/seaborn.clustermap.html" rel="noopener ugc nofollow" target="_blank"> sns.clustermaps() </a>)。</p><pre class="lg lh li lj gu lk ll lm ln aw lo bi"><span id="4468" class="lp lq iu ll b gz lr ls l lt lu">&gt;&gt;&gt; sns.clustermap(<br/>        df, <br/>        method='ward', <br/>        cmap="YlGnBu", <br/>        standard_scale=1<br/>    )</span><span id="e8fd" class="lp lq iu ll b gz lv ls l lt lu">TypeError: unsupported operand type(s) for -: 'str' and 'str'</span></pre><p id="13b2" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">因此，我构建了一个列的所有数据类型的列表，过滤掉那些非数字列，并将结果数据帧传递给只需要数字列的函数。</p><pre class="lg lh li lj gu lk ll lm ln aw lo bi"><span id="985c" class="lp lq iu ll b gz lr ls l lt lu">&gt;&gt;&gt; numeric_cols = [<br/>        col <br/>        for col, dtype <br/>        in df.dtypes.items() <br/>        if dtype=='float64'<br/>    ]</span><span id="5107" class="lp lq iu ll b gz lv ls l lt lu">&gt;&gt;&gt; print(numeric_cols)<br/>['col1', 'col2']</span><span id="445a" class="lp lq iu ll b gz lv ls l lt lu">&gt;&gt;&gt; sns.clustermap(<br/>        df[numeric_cols], <br/>        method='ward', <br/>        cmap="YlGnBu", <br/>        standard_scale=1<br/>    )</span></pre><figure class="lg lh li lj gu lx gi gj paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gi gj lw"><img src="../Images/49309f06c31c5fa7a2299ef29cc288fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qfTFv2FuGoWbiEmqeSgg3A.png"/></div></div><p class="me mf gk gi gj mg mh bd b be z dk translated">来自<a class="ae lf" href="https://www.ebi.ac.uk/arrayexpress/experiments/E-GEOD-20108/" rel="noopener ugc nofollow" target="_blank"> E-GEOD-20108 </a>的数据—单倍体和二倍体菌株对乙醇的反应|图片由作者提供</p></figure><p id="8ffe" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">当我昨天在研究一些与酵母中基因表达相关的数据时，我开始思考。一定有更好的方法。按数据类型过滤数据帧的列的概念应该很常见，足以成为一行程序！事实证明确实如此，尽管我认为我已经爬了足够多的次数去查阅文档，以至于可以跨越熊猫API，但事实证明总是有新的隐藏的宝石！</p><p id="797f" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">Pandas DataFrames有一个名为<code class="fe mi mj mk ll b">select_dtypes()</code>的内置方法，这正是我想要的。并且重写上面的代码来使用这个新的(对我来说)函数看起来像下面这样(注意select_dtypes()取一个列表，可以过滤多种数据类型！):</p><pre class="lg lh li lj gu lk ll lm ln aw lo bi"><span id="377a" class="lp lq iu ll b gz lr ls l lt lu">&gt;&gt;&gt; sns.clustermap(<br/>        df.select_dtypes(['number']), <br/>        method='ward', <br/>        cmap="YlGnBu", <br/>        standard_scale=1<br/>    )</span></pre><p id="514d" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">我相信你们中的大多数人都已经经历过这个了，因为(我在熊猫git repo上做了一个git责备，看看它是什么时候添加的:2014年<a class="ae lf" href="https://emojipedia.org/person-facepalming/#:~:text=Emoji%20Meaning,to%20the%20Picard%20Facepalm%20meme." rel="noopener ugc nofollow" target="_blank">🤦</a>)。无论如何，我希望也许有人会像我一样发现这很有帮助。编码快乐！</p><div class="ml mm gq gs mn mo"><a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.select_dtypes.html" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fp"><div class="mq ab mr cl cj ms"><h2 class="bd iv gz z fq mt fs ft mu fv fx it bi translated">熊猫。data frame . select _ dtypes-pandas 1 . 3 . 4文档</h2><div class="mv l"><h3 class="bd b gz z fq mt fs ft mu fv fx dk translated">编辑描述</h3></div><div class="mw l"><p class="bd b dl z fq mt fs ft mu fv fx dk translated">pandas.pydata.org</p></div></div></div></a></div><div class="ml mm gq gs mn mo"><a href="https://www.ebi.ac.uk/arrayexpress/experiments/E-GEOD-20108/" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fp"><div class="mq ab mr cl cj ms"><h2 class="bd iv gz z fq mt fs ft mu fv fx it bi translated">数组表达式</h2><div class="mv l"><h3 class="bd b gz z fq mt fs ft mu fv fx dk translated">发布于2010年2月21日，最后更新于2014年5月2日二倍体和单倍体菌株通常表现出不同的耐受性…</h3></div><div class="mw l"><p class="bd b dl z fq mt fs ft mu fv fx dk translated">www.ebi.ac.uk</p></div></div></div></a></div><div class="ml mm gq gs mn mo"><a href="https://seaborn.pydata.org/generated/seaborn.clustermap.html" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fp"><div class="mq ab mr cl cj ms"><h2 class="bd iv gz z fq mt fs ft mu fv fx it bi translated">seaborn . cluster map-seaborn 0 . 11 . 2文档</h2><div class="mv l"><h3 class="bd b gz z fq mt fs ft mu fv fx dk translated">海博恩。clustermap( data，*，，，，，，，，，，，，，，** kwargs)将矩阵数据集绘制为…</h3></div><div class="mw l"><p class="bd b dl z fq mt fs ft mu fv fx dk translated">seaborn.pydata.org</p></div></div><div class="mx l"><div class="my l mz na nb mx nc mc mo"/></div></div></a></div></div></div>    
</body>
</html>