<html>
<head>
<title>Pro Tips for Data Analysis in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R中数据分析的专业技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/pro-tips-for-data-analysis-in-r-45848bf48de9?source=collection_archive---------6-----------------------#2021-08-07">https://towardsdatascience.com/pro-tips-for-data-analysis-in-r-45848bf48de9?source=collection_archive---------6-----------------------#2021-08-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0bbc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为了更好的工作流程——基于我5年争论数据的经验。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/98daf156e63d5374afdcaaf7eb92eb69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jtHpQULjgBorkVxH"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">约翰·施诺布里奇在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="f0eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">r和Python是最流行的数据分析编程语言之一。作为一名数据科学顾问，我在工作中的许多项目中都在研究开发。有很多事情我希望我能早点知道！在这篇文章中，我想和你分享一些我学到的最重要的技巧，当你开始在r中工作时，这些技巧可以改善你的工作流程。</p><p id="27da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"><em class="lv">*注:如果你更喜欢看这篇文章的视频版本，你可以查看下面我的Youtube频道上的视频。</em> </strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lw lx l"/></div></figure><h1 id="bdee" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated"><strong class="ak">提示1:使用R项目</strong></h1><p id="41f4" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">让我告诉你一些事情。在使用R好几年后，我意识到我犯了一个非常非常严重的错误。那个错误就是我没有用R项目。你可能不常在R编程在线课程和编程书籍中看到R项目的介绍。但是这是一种耻辱，因为有很多很好的理由说明为什么R项目可以让你的工作流程变得更加干净和流畅。</p><p id="9269" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你不知道R项目是什么，它只是一个用。RProj文件。你可以通过进入<em class="lv">文件&gt;新建项目</em> &gt;在RStudio中创建新的R项目，然后你可以在给定的目录中创建新的项目。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/3ddd4d04cc1262bb1fd77b5e18e49796.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*nNvI1udoFWqXKyVIA2X_HA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一个空R项目。作者图片</p></figure><p id="4e05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，好吧，你可能会问，使用R project的好处是什么，而不是把你的代码和所有东西都放在一个普通的文件夹里。以下是原因:</p><ul class=""><li id="7418" class="mw mx it lb b lc ld lf lg li my lm mz lq na lu nb nc nd ne bi translated">首先，R项目<strong class="lb iu">消除了设置工作目录</strong>的需要，因为一切都变成了项目文件夹的相对文件路径。这意味着你不需要设置绝对路径，所以你可以与任何人共享你的项目文件夹，他们仍然可以运行它。我曾经在代码中设置了绝对路径，犯了一个严重的错误，每次当我将它发送给同事或推送到Github时，我的同事都不得不费力地更改路径，以使它在他的计算机上工作。</li><li id="6ad9" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">这就引出了第二点，那就是项目<strong class="lb iu">改善</strong>既<strong class="lb iu">再现性</strong>又<strong class="lb iu">协作</strong>。给定R项目文件夹，每个人都可以运行您的代码，而无需设置工作目录。因为项目文件夹将始终是该文件夹中代码的默认工作目录。</li><li id="6074" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">r项目也是<strong class="lb iu">方便的</strong>,因为它可以选择用Git进行<strong class="lb iu">版本控制</strong>。所以您不需要在以后为您的项目初始化Git repo。</li></ul><h1 id="3965" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">技巧#2:构建分析文件夹</h1><p id="a869" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">如果我告诉你，你需要组织你的项目文件夹，这可能看起来有点琐碎。但我向你保证，这会让你的工作流程变得更有效率。</p><p id="1a2c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我给你展示一个我的项目文件夹的简单设置。这是一个适用于许多不同类型项目的模板，但它当然可以根据您的需求进行调整:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/666368e627f32f3fe1f576873ef2b0e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*It7ZcmHgowKmv18N5Qwfrw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我的分析模板文件夹。作者图片</p></figure><ul class=""><li id="0cc0" class="mw mx it lb b lc ld lf lg li my lm mz lq na lu nb nc nd ne bi translated"><strong class="lb iu">数据</strong>——这是我保存所有源文件的子文件夹，我需要将这些文件读入R以进行分析或可视化。这些可以是Excel / CSV文件中的任何内容，或者。RDS文件，这是存储R对象的文件类型。</li><li id="5d14" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">脚本 —这是我保存所有R脚本和RMarkdown文件的地方。我发现将所有的<strong class="lb iu"> <em class="lv">函数</em> </strong>保存在一个独立于我的主分析脚本的脚本中很方便，因为它帮助我的主分析脚本更干净。我只需要将这些函数读入我的分析脚本，而不是将它们都放在一个大脚本中，这样会使代码变得混乱和笨拙。<strong class="lb iu"> <em class="lv"> run_analysis </em> </strong>文件是我运行所有分析的主要分析R脚本。由您决定是使用一个分析脚本还是多个脚本来执行不同的任务。如果您有一个<strong class="lb iu"> <em class="lv"> R markdown </em> </strong>文件，您也可以将其保存在该文件夹中。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/0af53db79b0111a6a143a0e97fc1a64a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*iCOo5-IFBGdAHWuX2IJZGA.png"/></div></figure><ul class=""><li id="e913" class="mw mx it lb b lc ld lf lg li my lm mz lq na lu nb nc nd ne bi translated"><strong class="lb iu">输出</strong>——在这个文件夹中，我保存了我所有的输出，包括绘图、HTML和数据输出。拥有这个输出文件夹有助于其他人轻松识别哪些文件是代码的<strong class="lb iu">输出</strong>。它还可以帮助您更快更容易地找到输出。</li></ul><p id="cb81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您开始处理具有许多不同脚本和输入输出文件类型的更复杂的项目时，这种结构将帮助您组织起来，并帮助团队中的新成员理解项目。这种结构也将你的函数从分析运行中分离出来，从输出文件中分离出输入，当有一天你想从你的代码中创建一个R包时，这是非常有用的。一般来说，你设置了什么样的子文件夹并不重要，只要它们是合理的。您可以决定设置子文件夹，以便它们与分析步骤而不是文件类型保持一致。</p><h1 id="9cb9" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">技巧3:Base R vs tidy verse vs data . table——我使用什么</h1><p id="9848" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">您可以在R中使用不同的库或生态系统，它们为操作数据提供不同类型的语法，有些更快，有些更慢。3个最常见的包/生态系统是:</p><ul class=""><li id="4391" class="mw mx it lb b lc ld lf lg li my lm mz lq na lu nb nc nd ne bi translated">碱基R</li><li id="8434" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">Tidyverse (dplyr是主包之一)</li><li id="aa78" class="mw mx it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">数据表</li></ul><p id="478a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而如果你不知道用什么，我在这里稍微宠一下你:<strong class="lb iu">我大概95%的时间都用data . table</strong>，主要是因为简洁的语法和它处理大数据集无与伦比的速度。久而久之就上瘾了！我太喜欢它了，我写了一篇文章，我写了一整篇关于前一段时间的文章。</p><p id="897a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们对这些包做一个小小的比较，让您有一个大概的了解。在下面的图片中，你可以看到每个库中关键函数的摘要。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/940bb98c968b77e55e0e9db275fb1f52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ucrxPcn1hYIJNeCHWAzPtw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://mgimond.github.io/rug_2019_12/Index.html" rel="noopener ugc nofollow" target="_blank">https://mgimond.github.io/rug_2019_12/Index.html</a></p></figure><p id="2fef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以看到语法看起来有点不同。尤其是<code class="fe nl nm nn no b">tidyverse</code>比其他两个更加冗长。<code class="fe nl nm nn no b">data.table</code>有这种典型的数据操作语法。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/0c768ff0a5b22292fcf73ede789a5815.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_NjLjjUzaoQNrRLo.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://github.com/Rdatatable/data.table/wiki" rel="noopener ugc nofollow" target="_blank">https://github.com/Rdatatable/data.table/wiki</a></p></figure><p id="5a42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些生态系统各有利弊:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/870ce4dcacd4ade4bb34b69888c1bd18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DZ1-4rzO1lVnjK47uivWvQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">生态系统的利与弊。作者图片</p></figure><p id="befe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是不管你采用什么样的库和语法，在一个脚本中坚持使用其中的一种是一个很好的实践，这样其他人更容易理解你的代码。</p><h1 id="50d4" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">技巧4:在RStudio中使用调试器工具</h1><p id="66a5" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">编程中最重要的事情之一就是学习如何调试你的代码。我们人类并不完美，我们会犯错误，所以如果你在用R或Python做数据分析，调试你自己的代码可能是你大部分时间要做的事情。我后悔没有早点使用Rstudio中的调试器工具。</p><p id="64e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在早期，我只是手动进入每个函数并打印出每个步骤的输出。这没什么错，但它很快就会变得令人困惑，需要花费大量的时间和精力。我鼓励您学习如何使用Rstudio中的调试器工具。</p><p id="d37f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Rstudio文档有一篇关于这方面的非常好的文章，一定要去看看！否则你也可以在<a class="ae ky" href="https://www.youtube.com/watch?v=Y0c6cdbs4og" rel="noopener ugc nofollow" target="_blank">我的视频</a>中看到教程。</p><h1 id="9a20" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">额外提示#5:保存分析运行的日志文件</h1><p id="ba23" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">有时，您正在处理的数据集会每天或定期更新，这可能会影响您的分析结果。创建一个带有时间戳的小日志文件，在其中存储分析的关键信息，如数据的描述性统计和分析的主要结果，这将非常方便。您可以只为自己跟踪数据的变化(以及随后的分析)。</p><p id="4ea6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">R中有一个名为<code class="fe nl nm nn no b">sink()</code>的小函数，它可以将所有的打印结果指向一个文本文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/b8c886feb3e040f920bc6426ed5dbed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0TNBqbD7zJGx_SKv2ooj-w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">示例日志文件。图片作者。</p></figure></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><p id="505a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这些建议和技巧对你有所帮助，并在下面的评论区告诉我你的想法和你想分享的其他建议。感谢您的阅读！</p><p id="0b78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">如果你喜欢我关于数据科学的内容(偶尔还有与技术相关的东西和个人成长)，别忘了在Medium上关注我，注册我的邮件列表。</em> </strong></p><p id="db35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">想要连接？</em> </strong> <em class="lv">你可以通过</em><a class="ae ky" href="https://www.linkedin.com/in/thu-hien-vu-3766b174/" rel="noopener ugc nofollow" target="_blank"><em class="lv">LinkedIn</em></a><em class="lv">，</em><a class="ae ky" href="https://www.youtube.com/c/Thuvu5/videos" rel="noopener ugc nofollow" target="_blank"><em class="lv">Youtube</em></a><em class="lv">，或者</em><a class="ae ky" href="https://github.com/thu-vu92" rel="noopener ugc nofollow" target="_blank"><em class="lv">GitHub</em></a><em class="lv">联系到我。我随时欢迎快速聊天或虚拟咖啡:)。</em></p></div></div>    
</body>
</html>