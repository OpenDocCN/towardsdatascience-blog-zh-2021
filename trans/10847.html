<html>
<head>
<title>Benchmarking time series datasets with style</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用风格对时间序列数据集进行基准测试</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/benchmarking-time-series-datasets-with-style-2a4e8789a965?source=collection_archive---------18-----------------------#2021-10-20">https://towardsdatascience.com/benchmarking-time-series-datasets-with-style-2a4e8789a965?source=collection_archive---------18-----------------------#2021-10-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="7e0a" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/notes-from-industry" rel="noopener" target="_blank">行业笔记</a></h2><div class=""/><div class=""><h2 id="4ca6" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">如何交叉检查/核实大型时序数据集？</h2></div><p id="e1ff" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我从事能源系统建模、油气井建模和油井完整性管理系统的工作。在许多情况下，基准数据集或发现来自不同来源或来自多个建模结果的时间序列数据之间的差异至关重要。</p><blockquote class="lk"><p id="0bfe" class="ll lm iq bd ln lo lp lq lr ls lt lj dk translated">时间序列是一系列随时间变化的数据点。</p></blockquote><p id="6bd8" class="pw-post-body-paragraph ko kp iq kq b kr lu ka kt ku lv kd kw kx lw kz la lb lx ld le lf ly lh li lj ij bi translated">对大型数据集进行基准测试，并快速发现差异和风格，可以为您节省推动见解的时间。</p><p id="2d02" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">例如，在超过100个国家和60个行业的全球能源数据集中，绘制整个数据集以对两个不同的数据源进行基准测试，或者甚至在运行模型以预测不同的情景之后，这将是非常乏味的。</p><p id="b9e2" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在英国石油公司的《世界能源统计评论》中，对不同的能源情景进行了量化，显示了英国石油公司对不同能源环境下能源未来的看法(照常营业情景和净零情景)。</p><p id="f77f" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这些数据是2025年、2030年、2035年、2040年、2045年和2050年主要消费国和地区的数据。</p><p id="ce20" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们如何在不绘图的情况下发现时间序列预测(两种能源情景)之间的差异？我们如何跳过绘制两种能源情景之间的60个时间序列数据(120条线图)来找出主要变化在哪里？</p><h1 id="8fde" class="lz ma iq bd mb mc md me mf mg mh mi mj kf mk kg ml ki mm kj mn kl mo km mp mq bi translated"><strong class="ak">我们从哪里得到的数据？</strong></h1><p id="032b" class="pw-post-body-paragraph ko kp iq kq b kr mr ka kt ku ms kd kw kx mt kz la lb mu ld le lf mv lh li lj ij bi translated">我们在构建案例时所依赖的数据是《英国石油公司2020年世界能源统计评论》,我们在之前的工作中向<a class="ae mw" href="https://muadelm.medium.com/how-to-extract-and-clean-data-from-multiple-excel-sheets-using-python-5d506d959a05" rel="noopener">展示了如何使用python </a>以干净的形式提取数据。</p><h1 id="5c28" class="lz ma iq bd mb mc md me mf mg mh mi mj kf mk kg ml ki mm kj mn kl mo km mp mq bi translated">发现时间序列数据之间差异的传统方法</h1><p id="26af" class="pw-post-body-paragraph ko kp iq kq b kr mr ka kt ku ms kd kw kx mt kz la lb mu ld le lf mv lh li lj ij bi translated">我们的目标是区分不同燃料(石油、天然气、可再生能源、核能、煤炭)的预测需求，以及几个国家/地区(美国、欧盟、中国、印度等)的“一切照旧”情景和“净零”情景。).</p><p id="f58d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">传统的方法是在两个场景之间绘制一个线图</p><figure class="my mz na nb gt nc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi mx"><img src="../Images/6a43b454c3bcef64b432c583a3be0857.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*enGN9fKcPIuAERMjfqEOxw.jpeg"/></div></div><p class="nj nk gj gh gi nl nm bd b be z dk translated">线形图指出两个时间序列数据之间的差异。图片作者<a class="ae mw" href="https://www.linkedin.com/in/mustafa-adel-amer/" rel="noopener ugc nofollow" target="_blank">作者</a></p></figure><p id="4c95" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">传统方法的问题？</strong></p><p id="c8de" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这将需要绘制两种能源情景之间的60个时间序列数据(120个线图)，以确定主要变化在哪里。如果您有一个更大的模型或几个特征，使用绘图作为解决方案会变得更加困难。</p><h1 id="3392" class="lz ma iq bd mb mc md me mf mg mh mi mj kf mk kg ml ki mm kj mn kl mo km mp mq bi translated"><strong class="ak">如何更快发现一种风格的差异？</strong></h1><p id="706e" class="pw-post-body-paragraph ko kp iq kq b kr mr ka kt ku ms kd kw kx mt kz la lb mu ld le lf mv lh li lj ij bi translated">能够看到不同建模场景之间的时间序列数据差异的全貌，或者检查不同数据更新之间的差异，或者在大规模的基准测试过程中，可以节省更多时间来进行高质量的分析和提供见解。</p><p id="5173" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">对两种能源情景结果(时间序列数据)进行基准测试的步骤如下:</p><ol class=""><li id="e300" class="nn no iq kq b kr ks ku kv kx np lb nq lf nr lj ns nt nu nv bi translated">提取数据。</li><li id="ae6b" class="nn no iq kq b kr nw ku nx kx ny lb nz lf oa lj ns nt nu nv bi translated">以长格式重新组织数据，并有两列，每一列对应一个要进行基准测试的时间序列(能源场景)。</li><li id="0690" class="nn no iq kq b kr nw ku nx kx ny lb nz lf oa lj ns nt nu nv bi translated">计算两个时间序列数据集之间的<strong class="kq ja">无量纲差</strong>。</li></ol><p id="0caa" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">例如，2035年非洲煤炭消费的无量纲差异为<strong class="kq ja">{(5–2)/5 } = 0.6</strong></p><figure class="my mz na nb gt nc gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/5dbc9074a2965af2675d7025150a1393.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*9zSpkCxSt7-alw-SO2g82Q.jpeg"/></div><p class="nj nk gj gh gi nl nm bd b be z dk translated">长格式的结构化干净数据集。图片由<a class="ae mw" href="https://www.linkedin.com/in/mustafa-adel-amer/" rel="noopener ugc nofollow" target="_blank">作者</a></p></figure><p id="ed2f" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">4.<strong class="kq ja">求和</strong>每个县每个部门的两个时间序列之间的无量纲差异。</p><figure class="my mz na nb gt nc gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/5c684bc15da32ead3500a337e8ce59d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*FLs3W5S_gFmOzV3bwqbMTA.jpeg"/></div><p class="nj nk gj gh gi nl nm bd b be z dk translated">两个能源情景数据集之间的差异总和(时间序列)。作者图片</p></figure><p id="d175" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">5.重新构造数据帧，使两个最重要的变量是索引和列名。例如，<strong class="kq ja">国家</strong>是<strong class="kq ja">指标</strong>而<strong class="kq ja">部门</strong>是<strong class="kq ja">栏目</strong>。</p><figure class="my mz na nb gt nc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi od"><img src="../Images/a225efdac57230f479640f312ac972bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*17-61GiA5avU2z5C3f6eGA.jpeg"/></div></div><p class="nj nk gj gh gi nl nm bd b be z dk translated">图片作者<a class="ae mw" href="https://www.linkedin.com/in/mustafa-adel-amer/" rel="noopener ugc nofollow" target="_blank">作者</a></p></figure><p id="fc7a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">6.使用<strong class="kq ja">热图</strong>可视化结果。</p><figure class="my mz na nb gt nc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi oe"><img src="../Images/cc80929d8a9f94c8dc5173351e3100ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*myXiBxsmKXojoUgKhFVl4Q.jpeg"/></div></div><p class="nj nk gj gh gi nl nm bd b be z dk translated">发现(基准)两种能源情景(时间序列数据)之间差异的热图。图片由<a class="ae mw" href="https://www.linkedin.com/in/mustafa-adel-amer/" rel="noopener ugc nofollow" target="_blank">作者</a></p></figure><p id="16db" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">热图将浅色显示为两个数据集匹配的区域。也就是说，两种能源方案显示了相似的结果。美国的水电消费就是一个例子。然而，中东的可再生能源消费在一切照旧情景和净零情景之间有很大差异。</p><p id="db07" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">下面的示例显示了生成的热图如何帮助发现不同时间序列数据之间的差异。</p><figure class="my mz na nb gt nc gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi of"><img src="../Images/a7709e013ee2a73f120f0758a9fa611f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TG7z_Kj0MgSGUtehjVaPqQ.jpeg"/></div></div><p class="nj nk gj gh gi nl nm bd b be z dk translated">基准时间序列数据摘要。图片作者<a class="ae mw" href="https://www.linkedin.com/in/mustafa-adel-amer/" rel="noopener ugc nofollow" target="_blank">作者</a></p></figure><p id="036a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">整部作品可在<a class="ae mw" href="https://github.com/muadelm/BP-statistical-review-2020/blob/main/BP%20statistical%20review_benchmarking.ipynb" rel="noopener ugc nofollow" target="_blank"> Github </a>上获得。</p></div></div>    
</body>
</html>