<html>
<head>
<title>Stop One-Hot Encoding your Time-based Features</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止一次性编码基于时间的要素</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/stop-one-hot-encoding-your-time-based-features-24c699face2f?source=collection_archive---------9-----------------------#2021-08-21">https://towardsdatascience.com/stop-one-hot-encoding-your-time-based-features-24c699face2f?source=collection_archive---------9-----------------------#2021-08-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f4bf" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">循环特征的特征转换基本指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/088e6e7cd30b9632b557f46f6454ba67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sxfTGGTCh3gEkYmHlH7VIQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自<a class="ae ky" href="https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=2500991" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae ky" href="https://pixabay.com/users/sarah_loetscher-4248505/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=2500991" rel="noopener ugc nofollow" target="_blank">莎拉·罗彻</a>的图片</p></figure><p id="f105" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">特征工程是数据科学模型开发流程的重要组成部分。数据科学家将大部分时间用于分析和准备要素，以训练稳健的模型。原始数据集由各种类型的要素组成，包括分类要素、数值要素和基于时间的要素。</p><p id="d3db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">机器学习或深度学习模型只理解数字向量。分类和基于时间的特征需要编码成数字格式。对分类特征进行编码的特征工程策略多种多样，包括一键编码、计数矢量器等等。</p><p id="98a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基于时间的特性包括<code class="fe lv lw lx ly b"><strong class="lb iu">day of month</strong></code>、<code class="fe lv lw lx ly b"><strong class="lb iu">day of week</strong></code>、<code class="fe lv lw lx ly b"><strong class="lb iu">day of year</strong></code>、<code class="fe lv lw lx ly b"><strong class="lb iu">time</strong></code>。基于时间的特征本质上是周期性或季节性的。在本文中，我们将讨论为什么对于循环特性应该避免使用一键编码或哑编码，而是讨论并实现一个更好、更优雅的解决方案。</p><h2 id="220a" class="lz ma it bd mb mc md dn me mf mg dp mh li mi mj mk lm ml mm mn lq mo mp mq mr bi translated">为什么不是一次性编码？</h2><p id="e3da" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">独热编码是一种将分类特征转换成数字向量的特征编码策略。对于每个特征值，一键转换创建一个新的特征来区分特征值的存在与否。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/e626aae1473fa6686b7fcdbba1fd4436.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dWvkew37QCveEekRdTirsw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)，一键编码示例图</p></figure><p id="0b65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一键编码为每个实例创建d维向量，其中d是数据集中特征值的唯一数量。</p><p id="facf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于具有大量唯一特征值或类别的特征，一键编码不是一个好的选择。还有各种其他技术来编码分类(序数或名义)特征。</p><blockquote class="my mz na"><p id="7916" class="kz la nb lb b lc ld ju le lf lg jx lh nc lj lk ll nd ln lo lp ne lr ls lt lu im bi translated">阅读下面提到的文章，了解分类特征的几种特征编码策略:</p></blockquote><div class="nf ng gp gr nh ni"><a href="https://medium.com/swlh/stop-one-hot-encoding-your-categorical-features-avoid-curse-of-dimensionality-16743c32cea4" rel="noopener follow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd iu gy z fp nn fr fs no fu fw is bi translated">停止一次性编码你的分类特征——避免维数灾难</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">用许多级别/类别对分类特征进行编码的技术</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">medium.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw ks ni"/></div></div></a></div><p id="c37c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基于时间的特征，如<code class="fe lv lw lx ly b"><strong class="lb iu">day of month</strong></code>、<code class="fe lv lw lx ly b"><strong class="lb iu">day of week</strong></code>、<code class="fe lv lw lx ly b"><strong class="lb iu">day of year</strong></code>等，具有周期性，并且具有许多特征值。一键编码<code class="fe lv lw lx ly b"><strong class="lb iu">day of month</strong></code>特征产生30维向量，<code class="fe lv lw lx ly b"><strong class="lb iu">day of year</strong></code> <strong class="lb iu"> </strong>产生366维向量。一次性编码这些特征并不是一个好的选择，因为这可能会导致维数灾难。</p><h2 id="ef7f" class="lz ma it bd mb mc md dn me mf mg dp mh li mi mj mk lm ml mm mn lq mo mp mq mr bi translated">想法:</h2><p id="ca3b" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">对这些循环特征进行编码的优雅解决方案可以是使用数学公式和三角学。在本文中，我们将使用三角学的基本公式，通过计算特征的正弦和余弦来对循环特征进行编码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(作者代码)</p></figure><p id="b1c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b"><strong class="lb iu">day of week</strong></code> <strong class="lb iu"> </strong>该特征有7个唯一的特征值。取特征值的正弦和余弦将创建二维特征。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/b93d6e2ccc227e084090e7cc2d16025b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XFIbQTpi9U0QUbYEbXCjhA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)，计算星期特征的正弦和余弦</p></figure><p id="9ae1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，代替使用一键编码创建7维特征向量，2维变换的特征向量将用于表示整个特征的目的。现在，让我们用散点图来可视化新的二维变换特征向量。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/86fa1f306749b24d7a6219ff86342dfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/format:webp/1*g2b8V5vo2D78q3ljc0BQ0g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)，星期几特征的正弦和余弦散点图</p></figure><p id="666a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">散点图清楚地显示了<code class="fe lv lw lx ly b"><strong class="lb iu">day of week</strong></code> <strong class="lb iu"> </strong>特征的循环性质。这7个特征值(从0到6)现在被编码成一个二维向量。</p><p id="460a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b"><strong class="lb iu">day of month</strong></code> <strong class="lb iu"> </strong>和<code class="fe lv lw lx ly b"><strong class="lb iu">day of year</strong></code> <strong class="lb iu"> </strong>本质上是循环的，分别具有31和366个特征值。对它们进行一次性编码将增加最终数据集的维数。因此，使用特征值的三角变换将达到编码分类特征的目的。</p><div class="kj kk kl km gt ab cb"><figure class="ob kn oc od oe of og paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/1ae2ed05b2922dfb9ddaf18db0647079.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*5H-fW7EJEOhr2Rjs9ViGKg.png"/></div></figure><figure class="ob kn oh od oe of og paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/686bdaf2e98ba21f027da56f04dc0290.png" data-original-src="https://miro.medium.com/v2/resize:fit:716/format:webp/1*OrRZ8OQga3DT0MNemhkTZQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk oi di oj ok translated">(图片由作者提供)，<strong class="bd ol">左:</strong>计算正弦和余弦，<strong class="bd ol">右:</strong>正弦和余弦散点图；一个月中的某一天功能</p></figure></div><div class="ab cb"><figure class="ob kn om od oe of og paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/9542afbbeaf8d050090e0b0c9bbe940b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*ib9ZD7fqW4WtSLmLVB9sfg.png"/></div></figure><figure class="ob kn on od oe of og paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/368c3f8164fb375ddb500e547ca326b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*vW8Hj6UesDPcPxXaulwMCA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk oo di op ok translated">(图片由作者提供)，左:计算正弦和余弦，右:正弦和余弦的散点图；一年中的某一天功能</p></figure></div></div><div class="ab cl oq or hx os" role="separator"><span class="ot bw bk ou ov ow"/><span class="ot bw bk ou ov ow"/><span class="ot bw bk ou ov"/></div><div class="im in io ip iq"><h1 id="d9f0" class="ox ma it bd mb oy oz pa me pb pc pd mh jz pe ka mk kc pf kd mn kf pg kg mq ph bi translated">结论:</h1><p id="9339" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">所讨论的基于三角学的特征变换可以在任何循环出现的特征上实现。一次热编码适用于相对少量的分类值，但不建议对具有许多特征值或类别的要素进行一次热编码。</p><blockquote class="my mz na"><p id="fcc7" class="kz la nb lb b lc ld ju le lf lg jx lh nc lj lk ll nd ln lo lp ne lr ls lt lu im bi translated">阅读我以前的一篇关于特征编码的文章:</p></blockquote><div class="nf ng gp gr nh ni"><a rel="noopener follow" target="_blank" href="/stop-using-pandas-get-dummies-for-feature-encoding-5d2cd07cb4fc"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd iu gy z fp nn fr fs no fu fw is bi translated">停止使用Pandas get_dummies()进行特征编码</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">熊猫get_dummies()和Sklearn One-hot编码器基本指南</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">towardsdatascience.com</p></div></div><div class="nr l"><div class="pi l nt nu nv nr nw ks ni"/></div></div></a></div><div class="nf ng gp gr nh ni"><a href="https://medium.com/swlh/stop-one-hot-encoding-your-categorical-features-avoid-curse-of-dimensionality-16743c32cea4" rel="noopener follow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd iu gy z fp nn fr fs no fu fw is bi translated">停止一次性编码你的分类特征——避免维数灾难</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">用许多级别/类别对分类特征进行编码的技术</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">medium.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw ks ni"/></div></div></a></div><h1 id="238c" class="ox ma it bd mb oy pj pa me pb pk pd mh jz pl ka mk kc pm kd mn kf pn kg mq ph bi translated">参考资料:</h1><p id="a082" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">[1] Scikit-learn文档:<a class="ae ky" href="https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.OneHotEncoder.html" rel="noopener ugc nofollow" target="_blank">https://sci kit-learn . org/stable/modules/generated/sk learn . preprocessing . onehotencoder . html</a></p><blockquote class="po"><p id="8fac" class="pp pq it bd pr ps pt pu pv pw px lu dk translated">感谢您的阅读</p></blockquote></div></div>    
</body>
</html>