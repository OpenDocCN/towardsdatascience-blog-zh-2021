<html>
<head>
<title>Melting Faces With NLP</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用NLP熔化面</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/melting-faces-with-nlp-3d21031fba8c?source=collection_archive---------41-----------------------#2021-06-21">https://towardsdatascience.com/melting-faces-with-nlp-3d21031fba8c?source=collection_archive---------41-----------------------#2021-06-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a833" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用python发现90年代垃圾音乐中的主题</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a5ab6be054d61cd348532d5be9d126ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U59NoPM-CB8nSk-8nSuCpg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片，灵感来自Jeff Kravitz的摄影作品。</p></figure><h1 id="4cf6" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">活着是多么美好的时光</h1><p id="1d45" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">90年代给我们带来了一些致命的东西。这是Python和R蓬勃发展的十年！90年代也给了我们谷歌、Windows 95和第一条短信。另一方面，堆栈溢出直到2008年才被发现，所以我不确定人们实际上是如何使用Python或r的。</p><p id="7ac8" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我想那时候你真的必须很聪明才能编程，但我那时还只是个青少年。一个不关心成人的事业、发展技能或写关于事业和发展技能的文章的青少年。然而，我在90年代确实关心一件事:摇滚。</p><p id="96f6" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这十年给我们带来了涅槃乐队、碎南瓜乐队乐队、戴着镣铐的爱丽丝乐队、石神庙舞女乐队、声音花园乐队乐队、珍珠果酱乐队，以及许许多多其他伟大的乐队。但是柯特·科本警告我们:</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="7335" class="mt kw iq mp b gy mu mv l mw mx">"He's the one who likes all our pretty songs<br/>But he knows not what it means"</span></pre><p id="e2d6" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">接受挑战。</p><h1 id="e832" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">这个计划</h1><p id="d858" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在我们试图理解90年代垃圾音乐运动的意义之前，我们需要稍微放慢节奏。当我们思考单词的<em class="my">含义</em>时，这被称为情感。在我们开始从单词、短语、句子、歌曲和专辑中寻找情感之前，还有几个步骤。我打算这是一个多部分的系列，每次深入到NLP(自然语言处理)的不同方面。</p><p id="0c09" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">不要绝望！NLP的早期步骤还可以向我们展示文本中的有趣主题，这些主题可能对人眼(或者在音乐的情况下，对人耳)是裸露的。我们阅读或听音乐的单一经历是时间的小快照，当我们的注意力集中在当前时刻时，之前的时刻很快在我们的记忆中模糊了。NLP让我们能够一次看到所有这些模糊的时刻，将它们聚焦，并使它们相对于彼此有一个视角。</p><p id="5113" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">为了生成和捕捉这些主题，我们将使用短语频率分析。事情是这样的:</p><ul class=""><li id="620d" class="mz na iq lp b lq mj lt mk lw nb ma nc me nd mi ne nf ng nh bi translated">导入数据。这将是6首伟大的90年代垃圾专辑的歌词</li><li id="4c63" class="mz na iq lp b lq ni lt nj lw nk ma nl me nm mi ne nf ng nh bi translated">把这些文本块分解成单词列表</li><li id="5f8b" class="mz na iq lp b lq ni lt nj lw nk ma nl me nm mi ne nf ng nh bi translated">删除我们不关心的单词</li><li id="2522" class="mz na iq lp b lq ni lt nj lw nk ma nl me nm mi ne nf ng nh bi translated">把这些单词组成三个单词的短语</li><li id="cdcb" class="mz na iq lp b lq ni lt nj lw nk ma nl me nm mi ne nf ng nh bi translated">统计每个短语出现的频率</li><li id="c3ab" class="mz na iq lp b lq ni lt nj lw nk ma nl me nm mi ne nf ng nh bi translated">在一些看起来很酷的单词云中可视化这个分析，看看哪些主题上升到顶部</li></ul><p id="be76" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated"><em class="my"> PS:坚持到最后，我会告诉你我是如何在文章顶部制作出那个恶心的柯特·科本吉他云图像的！</em></p><h1 id="e0fc" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">入门指南</h1><p id="3381" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">这里是Github上完整项目的<a class="ae nn" href="https://github.com/KendonDarlington/MeltingFacesWithNLP" rel="noopener ugc nofollow" target="_blank">链接。它包括文件夹、代码和完成本教程所需的一切。</a></p><p id="c826" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">开始了。首先创建一个名为“短语分析”的文件夹。这是所有事情的发展方向。我更喜欢使用Pythons的Anaconda发行版，Spyder是我的IDE，但是你可以使用任何你觉得舒服的东西。</p><p id="8ccd" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">去这个项目的GitHub下载数据<a class="ae nn" href="https://github.com/KendonDarlington/MeltingFacesWithNLP/blob/main/Phrase%20Analysis/Grunge%20Lyrics.xlsx" rel="noopener ugc nofollow" target="_blank"> <strong class="lp ir">链接</strong> </a>。这个项目的数据是一个只有3行的excel文件。这个电子表格有两栏，乐队名称和歌词。两张专辑的歌词被塞进了每个单元格，以使这变得容易。所有这些数据都是从LyricsOnDemand.com的<a class="ae nn" href="https://www.lyricsondemand.com/" rel="noopener ugc nofollow" target="_blank">下载的，里面有整张专辑的歌词。这些是我们将要分析的专辑:</a></p><ul class=""><li id="8e5d" class="mz na iq lp b lq mj lt mk lw nb ma nc me nd mi ne nf ng nh bi translated">涅槃:没关系&amp;在子宫里</li><li id="36ee" class="mz na iq lp b lq ni lt nj lw nk ma nl me nm mi ne nf ng nh bi translated">砸碎南瓜:暹罗梦&amp;梅隆牧羊犬和无限悲伤</li><li id="6d64" class="mz na iq lp b lq ni lt nj lw nk ma nl me nm mi ne nf ng nh bi translated">珍珠果酱:十对五</li></ul><p id="b501" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">数据看起来是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/2e487360bd7faefc9e01046846b2c3d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1038/format:webp/1*lk-PC6dHOeNz5sa-tsoE6Q.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="d5aa" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">在我们开始编码之前，我们需要安装一些软件包。这些是你想要的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="324a" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">其中许多都带有蟒蛇。然而，您可能需要摆弄其中的几个来安装它们。只需一行一行地运行这些代码。在Spyder中，您可以突出显示一行代码，然后按F9键只运行突出显示的部分。其他ide可能称之为“运行选择”或“运行当前行”。监控控制台的错误，谷歌任何红色。我们没有1998年的谷歌，我们有这个漂亮、尖牙利齿的2021年的谷歌，所以你的python问题的答案总是只需要几次搜索…</p><p id="d06e" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">接下来，我们有一点我不能为你写的代码。还记得我们创建的名为“短语分析”的文件夹吗？让我们将工作目录指向该文件夹。只需将“PathToTheFolderYouCreated”替换为您计算机上的路径，您猜对了。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="9dcb" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">如果您的名字是Jessie，并且您在“我的文档”中创建了文件夹:“C:\ \ Users \ \ Jessie \ \ Documents \ \ Phrase Analysis”</p><p id="2424" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们为什么要设置工作目录？它让我们对这个项目中的其余代码使用相对路径，并减少了多余的文件路径类型，产生了看起来更整洁的代码。现在，要访问一个文件，你只需键入“file.txt”，而不必硬编码“C:\ \ Users \ \ Jessie \ \ Documents \ \ Phrase Analysis \ \ file . txt”。</p><h1 id="48b2" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">Loopapaloza的后台通行证</h1><p id="2128" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">接下来，我们将获取数据。让我们将这些数据存储到一个名为dfAlbums的熊猫数据帧中。很快我们将遍历dfAlbums的行(只有3行),并对每个文本块执行NLP。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="69f7" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们还将创建dfNgramFrequency来存储循环的结果。现在，这一行代码用列Band、Phrase和Frequency定义了一个空的数据帧。这将是我们进行频率分析的地方。我在循环之外定义了这个home，这样就不会被它覆盖了！</p><p id="78fd" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">现在是写一大块代码的时候了！你准备好了吗？大块的代码会让你焦虑到11吗？这很好，因为我将要解释每一行的作用。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="55d8" class="mt kw iq mp b gy mu mv l mw mx">for index, row in dfAlbums.iterrows():</span></pre><p id="127a" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这就是循环。它在说:为我们的乐队和他们的歌词的数据框架中的每一行，做一些事情。这意味着每个循环是一个乐队！涅槃第一，然后砸南瓜，然后珍珠酱。我们会把这个全明星阵容叫做Loopapaloza，它会卖光的。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="b79b" class="mt kw iq mp b gy mu mv l mw mx">band = dfAlbums.loc[dfAlbums['band'] == row[0]]['band'].item()<br/>lyrics = dfAlbums.loc[dfAlbums['band'] == row[0]]['lyrics'].item()</span></pre><p id="1476" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这将获取当前的循环乐队和歌词，并将它们存储到一个变量中。一旦有了熊猫，这就更容易解析了，这样我们就可以继续与vairbles合作了。代码越少越好。</p><p id="dd16" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这里有一些稍微有趣的事情</p><ul class=""><li id="604e" class="mz na iq lp b lq mj lt mk lw nb ma nc me nd mi ne nf ng nh bi translated">。loc:这有助于我们通过选择一列来访问dfAlbums数据帧的内容。在我们的例子中，我们通过波段栏来限制它。</li><li id="b9f9" class="mz na iq lp b lq ni lt nj lw nk ma nl me nm mi ne nf ng nh bi translated">。item():允许我们将单个dataframe单元格中的数据存储为字符串变量。没有它，熊猫会把信息存储成一个系列，这不是我们想要的</li></ul><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="4192" class="mt kw iq mp b gy mu mv l mw mx">lyrics = re.sub(r'[^\w\s]', '', lyrics)           <br/></span></pre><p id="e14a" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">首先，我们把歌词去掉所有标点符号。标点符号对短语频率分析真的没有任何帮助，它只是噪音。我使用一行正则表达式去掉了标点符号。不要相信它那么容易？在控制台中键入以下内容，然后按enter:</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="719f" class="mt kw iq mp b gy mu mv l mw mx">re.sub(r'[^\w\s]', '', "Hey! Wait! I've gotta backpropogate.")</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/7cf52ad68b294bb9ba1a778b5b96dc48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*D1FMuw__1XYV-FAYWkcaJA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="cb40" class="mt kw iq mp b gy mu mv l mw mx">stopWords = set(stopwords.words('english'))    <br/></span></pre><p id="dbc5" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">接下来，我们创建一组名为“停用词”的单词。在NLP中，停用词是字面上的词，你停在那里。它的意思是不要使用它们。一般来说，这些单词没有意义，或者对句子的情感没有贡献。在控制台中键入“stopWords”来打开它，并查看其中的单词类型:</p><p id="9413" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">现在我不是在这里这样做，但是将你自己的停用词添加到列表中是很常见的。你可以这样做来去除数据中的异常值，并添加对发现情绪没有价值的公司专用术语。如果我们想将单词“cheese”添加到这个列表中，我们可以键入:</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="ae60" class="mt kw iq mp b gy mu mv l mw mx">stopWords.add("cheese")</span></pre><p id="981c" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">奶酪现在不见了。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="4c5c" class="mt kw iq mp b gy mu mv l mw mx">wordTokens = word_tokenize(lyrics)</span></pre><p id="4c38" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">接下来，我们将打破我们的大块歌词文本，并把它变成一个单词列表。这个过程被称为标记化。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="cf05" class="mt kw iq mp b gy mu mv l mw mx">sentenceNoStopwords = [w for w in wordTokens if not w.lower() in stopWords]</span></pre><p id="bdbd" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">最后，我们从歌词列表中删除停用词。这存储在“句子注释”中。这是一个比较两个列表的简单循环，实际上是在说“对于单词令牌中的每个单词，确保它不在停用词中”。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="b6fd" class="mt kw iq mp b gy mu mv l mw mx">listOGrams = []<br/>n = 3</span><span id="ce86" class="mt kw iq mp b gy ns mv l mw mx">gramGenerator = ngrams(sentenceNoStopwords, n)    <br/>for grams in gramGenerator:<br/>      listOGrams.append(grams[0] + ' ' + grams[1] + ' ' + grams[2])</span></pre><p id="3e08" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">现在我们来看看好东西！首先，我们定义一个列表来存储我们的短语，我们循环遍历我们的单词列表(sentenceNoStopwords)并将所有三个单词短语存储到列表中。当你在NLP中看到“gram”时，把它想象成一个文本单位，通常是一个单词。我们的n设置为3，因此n元语法是3个单词短语，也称为“三元语法”。</p><p id="4cd9" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">如果我们将n设置为2，它将是两个单词短语，也称为“二元模型”。如果我们将它设置为1，它将是单个单词，也称为“字母组合”。最后，如果我们把它设置为-1，它会让时间倒流，让整个宇宙及其所有物质冲向大爆炸的奇点，我们称之为天启图。</p><p id="8f7a" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">实际上，python可能会崩溃。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="e9f1" class="mt kw iq mp b gy mu mv l mw mx">df = pd.DataFrame(listOGrams, columns = ['Phrase'])</span></pre><p id="c0d0" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">最后，我们把这个列表图转换成熊猫的数据图。这个数据帧只有一个名为“短语”的列。坚持住，我们快到了！！！</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="f322" class="mt kw iq mp b gy mu mv l mw mx">df = df.groupby(['Phrase']).size()<br/>df = df.to_frame()<br/>df['Phrase'] = df.index<br/>df.reset_index(drop=True, inplace=True)</span></pre><p id="07f1" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这些系做我们与熊猫的聚合。实际上，第一行是聚合，计算每个短语在文本中出现的次数。其余的行只是你必须对熊猫做的愚蠢的事情，以一个干净的数据帧结束。</p><p id="ec55" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">当你聚集在熊猫中时，它喜欢把你的分组(在我们的例子中是短语)发送到索引中。我们只需要在完成计数后将事情打乱，比如将短语从索引移回一列，然后重新设置索引，这样看起来就不会太草率。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="c10c" class="mt kw iq mp b gy mu mv l mw mx">df = df.rename(columns = {0: "Frequency"})<br/>df = df.sort_values(by = 'Frequency', ascending = False )    <br/>    <br/>df['Band'] = band</span></pre><p id="526c" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们将聚合列重命名为“Frequency ”,然后按降序对该值进行排序。我们还创建了一个名为“band”的列，其中填充了很久以前创建的band变量。现在，我们已经拥有了填充最终表格所需的一切。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="2191" class="mt kw iq mp b gy mu mv l mw mx">dfNgramFrequency = dfNgramFrequency.append(df, ignore_index = True)</span></pre><p id="5d5f" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这会将我们的聚合插入到dfNgramFrequency中，它是在我们的循环之外定义的。看，这并不难，是吗？</p><h1 id="f685" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">可视化结果</h1><p id="82d1" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">我们终于可以看到我们的短语频率分析的结果了。但是在我们开始之前，让我们在控制台中键入下面一行，来看一下我们的新数据:</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="2ab5" class="mt kw iq mp b gy mu mv l mw mx">dfNgramFrequency</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/d406f7ab469516f3da5155be57908555.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*81YVXnC8qDpVdPu8p77hgQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="65d8" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这里我们有一个数据框架，有3列，带，短语和短语出现的频率。短语和频率恰好是非常棒的stylecloud库接受的两种格式之一。</p><p id="de6d" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">Stylecloud是一个获取数据并生成一些好看的单词云的包。有两种方法可以将数据传递到stylecloud中。</p><ol class=""><li id="1347" class="mz na iq lp b lq mj lt mk lw nb ma nc me nd mi nu nf ng nh bi translated">将原始文本传递到库中</li><li id="572b" class="mz na iq lp b lq ni lt nj lw nk ma nl me nm mi nu nf ng nh bi translated">将包含短语和频率的csv传递到库中</li></ol><p id="eb76" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">为什么我不选择第一个选项？Styleclouds确实有自己的停用词函数，我们可以直接使用它。记住这是自然语言处理系列文章的第一篇。我喜欢在执行NLP时完全控制我的数据发生了什么，我觉得pythons优秀的NLTK库(这就是我们使用的)是这项工作的正确工具。</p><p id="ffcb" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">唯一令人失望的是，我们无法将数据帧直接传递给stylecloud，尽管我尽了最大努力来破解它，它还是想要一个csv(我说的最大努力是指我尝试了大约30秒后放弃)。作为一种变通方法，我只是将数据写入我们工作目录中的csv，并让stylecloud从中读取。</p><p id="d3c0" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">stylecloud库的另一个好处是我们可以将云做成<a class="ae nn" href="https://fontawesome.com/" rel="noopener ugc nofollow" target="_blank">字体图标</a>的形状。这些都是网页和应用程序开发中常用的漂亮图标。如果你碰巧是硅谷的数据科学家之一，你的FANG股票期权已经被抛到了月球上，你可以每年花99美元解锁所有图标。</p><p id="10aa" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">对于我们这些预算有限做数据科学的人来说，免费的就足够了。说够了，是时候变得时髦了！</p><h1 id="fc7d" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">开场表演:涅槃</h1><p id="2521" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">请允许我介绍我们在Loopapaloza的开场表演:涅槃:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="0994" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">让我们简单回顾一下这段代码在做什么。第一行获取我们的dfNgramFrequency数据帧，将它限制在只有波段是Nirvana的行。然后，我们将这些内容写入短语分析目录中的csv文件。然后Stylecloud从这个文件中读取数据来生成云。“icon_name”参数决定使用字体Awesome中的哪个图标。你可以点击他们网站上的任何图标来复制这个标识符。最后，我们显示图像。</p><p id="d359" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">结果是:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/d74ea9a301931f1da3533e9cd2e4d800.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PDyRsW5Y-Ms26KD-zHYiNQ.png"/></div></div></figure><p id="a5b1" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">你现在看到的是“Nevermind”和“In子宫”的短语频率分析，它们被塑造成有史以来最具表情的编程语言:Python。</p><p id="8c5b" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">看着云，你会注意到出现频率最高的三元模型一定是“说了说了”。只是，这有问题；柯特·科本从来没有说过这句话…</p><p id="81eb" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这来自于歌曲“品种”的歌词，它重复了两个词短语“她说，她说，她说”一遍又一遍。但是为什么我们的分析说‘说了说了说了’而不是‘她说了她’或者‘说了她说了’呢？停用词！</p><p id="cd29" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">停用词主要包含代词(如“我”、“她”和“他”)。我其实不认为这是世界末日。移除停用词有助于我们减少数据集中的噪音，并有助于识别主题。主题不一定是艺术家口中说出的顺序。主题不止于此。如果你从我们的项目中删除停用词代码，词云会变得不那么有趣，并且被没有太多实际意义的短语覆盖。</p><p id="7ddc" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">但是，如果您想将' said said '视为异常值，只需将这个单词添加到我们的停用词列表中，然后重新运行代码。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="ed6f" class="mt kw iq mp b gy mu mv l mw mx">stopWords = set(stopwords.words('english'))<br/>stopWords.add("said")</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/899e8f2bf5ad345a2a7ac983898c3492.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5ylxkfLtZcZtthciyfQO-A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="9b94" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">在那里，它不见了。现在，你可能注意到的另一件事是，歌曲副歌中的单词比歌词中的单词更突出(例如，歌曲“心形盒子”副歌中的“永远的债务无价”)。这是因为在典型的歌曲结构中，合唱是重复多次的，而韵文往往是唯一的。我将把这作为家庭作业留给读者(顺便说一句，就是你)，你可以冗长地删除第一首歌之后出现的所有合唱(每首歌一个合唱)。</p><p id="a4a3" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">结果可能很有趣，但我不认为这将有助于我们更好地找到意义或主题。仔细想想这个问题，我认为艺术家为副歌选择这些词是因为它们是歌曲中最重要的部分，所以它们应该比独唱部分更流行。</p><p id="0a10" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">当我看着这个风格云时，我看到了关于逃离、快乐、精神崩溃、枪支和抱怨的主题。你看到了什么？</p><h1 id="b103" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">第二幕:碎南瓜乐队！</h1><p id="06c0" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">Nirvanas一组结束了！现在是Loopapaloza的第二幕:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="1d10" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">结果是:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/2432f5e0b0c97f02821e05ddd9ac360a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BYc1_W9NSm29MXuwklkxqA.png"/></div></div></figure><p id="26b4" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">以下是《暹罗之梦》和《梅隆·柯利和无限悲伤》的歌词，它们被压缩成了最难懂的编程语言:r。</p><p id="26f5" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们可以看到围绕着爱、死亡、自由、归属、信任和退缩的清晰主题。比利·考根变得深沉了。</p><h1 id="1c0f" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">头条新闻:珍珠果酱</h1><p id="b0c6" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">最后我们在Loopapaloza有了最后的表演:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="3fed" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">结果是:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/7b37a1512e7f976685a560916e5db06d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RYFhVpwPF9VHId-D9ZN9Jg.png"/></div></div></figure><p id="9f2f" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我不知道你怎么想，但是我不戴眼镜就没法做数据科学。戴眼镜可能是你能做的最酷的事情了。Pearl Jams 'Ten '和' Vs '专辑中的歌词显示了荣耀、活着、儿童和弹丸枪等主题。</p><h1 id="4c46" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">安可！</h1><h2 id="3868" class="mt kw iq bd kx nw nx dn lb ny nz dp lf lw oa ob lh ma oc od lj me oe of ll og bi translated">艺术和数据联手。</h2><p id="6099" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">现在你可能想知道我是如何在文章顶部制作出那个很酷的图片的？我用Python，Photoshop和一点艺术技巧做了这个。有些人可能会说Photoshop在数据科学中没有一席之地，但我不同意。</p><p id="305b" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我相信，作为数据科学家，我们的工作就是抓住观众的注意力和想象力。当你将艺术和数据融合在一起时，你的作品可以在我们每天面对的条形图海洋中脱颖而出。虽然柯特·科本文字云可能不会比条形图更好地讲述一个故事，但它具有新颖性。作为一种生存机制，人类的大脑天生就能记住并专注于从未见过的新奇事物。让我们挖掘人性的这一弱点，并利用它为我们所用！</p><p id="af91" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">你可以通过4个简单的步骤制作这张图片！</p><ol class=""><li id="2c9a" class="mz na iq lp b lq mj lt mk lw nb ma nc me nd mi nu nf ng nh bi translated">购买数百美元的数字艺术设备，如绘图板和Photoshop订阅。</li><li id="526d" class="mz na iq lp b lq ni lt nj lw nk ma nl me nm mi nu nf ng nh bi translated">擅长数字艺术。为图像画一堆东西。</li><li id="a7d6" class="mz na iq lp b lq ni lt nj lw nk ma nl me nm mi nu nf ng nh bi translated">将您的作品用作文字云的剪贴蒙版。</li><li id="78ad" class="mz na iq lp b lq ni lt nj lw nk ma nl me nm mi nu nf ng nh bi translated">用Photoshop把它们混合在一起。</li></ol><p id="5b12" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">看容易！</p><p id="ac1b" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">为什么我选择了柯特·科本？有一些子宫内时代的令人敬畏的图像和摄影。有一些很酷的照片和视频，库尔特在真人大小的子宫内专辑艺术人体模型前表演歌曲，让它看起来好像他有天使的翅膀。杰夫·克拉维茨拍下了这些精彩瞬间的照片，你应该看看他的作品<a class="ae nn" href="https://jeffkravitzphoto.com/" rel="noopener ugc nofollow" target="_blank">这里</a>！</p><p id="2cbc" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">下面是如何做到这一点:</p><p id="206b" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">第一步:画一个左手挡泥板野马。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/225d6f90d6d3917489e86bef40a2db1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W-swogVS1d114kvFKOoDUQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="e174" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">第二步:画一些翅膀</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/e53fbe399aa5e68b645a96ba5d0445c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WW1O59Af7hAkA_c2P_dscg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="25e2" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">第三步:绘制柯特·科本的风格图。细节在这里并不重要。我们希望我们的目光被吸引到吉他和翅膀上。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/14a6ef51948ab030ab9263f71b880235.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*7g2_GlYRthaX60w23CLmQw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片由作者提供，灵感来自杰夫·克拉维茨和柯特·科本的摄影作品。</p></figure><p id="4cb4" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">第四步:Python！</p><p id="97b9" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">接下来，我们需要用文字填充翅膀和吉他。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="b694" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这里我用的是wordcloud库，而不是stylecloud。原因是因为wordcloud允许你在蒙版内部生成word cloud。什么是口罩？你拿一张涂黑的图片，单词云会填充它的形状。在数字艺术中，这有时被称为使用“剪贴蒙版”。假设你在短语分析文件夹里有上面的图片(它们在<a class="ae nn" href="https://github.com/KendonDarlington/MeltingFacesWithNLP" rel="noopener ugc nofollow" target="_blank"> Github项目</a>！).</p><p id="d033" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我也想把文字设置得和这篇文章的标题一样。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="f0b9" class="mt kw iq mp b gy mu mv l mw mx">Melting Faces with NLP<br/>Finding themes in 90s grunge with python<br/>By: Kendon Darlington</span></pre><p id="c953" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">你会注意到，在我的代码中，我多次重复这些单词，以使它们在云中变得更大。我也只是列出一堆数据科学术语，每次一个，这将使那些单词变得非常小，并作为我文章标题下的数据科学的基础。最后，我确保重复我的名字最多，所以它是最大的单词，因为我是一个自我吸收的俄勒冈小径千禧一代，并在关注中茁壮成长。</p><p id="b8b8" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">新吉他:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/a66f41b49bda92a30c3e60f0fe69b55c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*m0AI3TtnPfyjHAnDQB5wAw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="d3df" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">新翅膀:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/15e4bcdfa59727a03cfb6a4a3c66b051.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qIbfu1QvhXhevW6TrArUmg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="644d" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">现在这些图片本身就足够酷了。但是要真正让它流行起来，我们需要把它结合在一起。你需要在Photoshop中对所有的图像进行分层，重新绘制吉他和翅膀的轮廓，使它们更加平滑，并添加一些效果，比如从他嘴里发出的粉红色声波。我希望我在这里展示所有这些步骤，但是这将是一个photoshop教程！</p><p id="5839" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">最终结果是:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/188fe6ec56bb4d3916deada034a99a3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DetWismL2CmhF9y-bF_4sQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片，灵感来自Jeff Kravitz的摄影作品。</p></figure><p id="43bf" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">在Github上下载完整的项目。<a class="ae nn" href="https://github.com/KendonDarlington/MeltingFacesWithNLP" rel="noopener ugc nofollow" target="_blank">链接</a>。</p></div></div>    
</body>
</html>