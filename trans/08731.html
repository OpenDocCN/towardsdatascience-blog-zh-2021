<html>
<head>
<title>A Simple Guide to Deploying a Dockerized Python app to Azure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Dockerized Python应用部署到Azure的简单指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-simple-guide-to-deploying-a-dockerized-python-app-to-azure-29753ee507eb?source=collection_archive---------10-----------------------#2021-08-12">https://towardsdatascience.com/a-simple-guide-to-deploying-a-dockerized-python-app-to-azure-29753ee507eb?source=collection_archive---------10-----------------------#2021-08-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b306" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">以下是如何使用Docker、Azure容器注册中心和Azure容器实例在Azure上部署令人惊叹的应用程序</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/52f2b6345442b22b7dcf27b50bf0d954.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VbRuKvtC0xTwE9Su"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">詹姆斯·哈里逊在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="7e24" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你是说你已经开发了一个应用程序，现在你想把它发布给所有人看？不要再看了。下面是如何使用Docker、Azure容器注册中心和Azure容器实例在Azure上部署它。</p><p id="3363" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本指南使用FastAPI应用程序作为示例应用程序，并假设您熟悉使用终端、构建Python应用程序和基本Docker命令的基础知识。如果你有一个你自己的应用程序，你想把它部署到Azure上，你唯一需要做的就是使用一个合适的Dockerize文件来Dockerize化这个应用程序。</p><p id="c386" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">读完这本指南后，你会有什么收获？那么，你将在Azure上拥有你的应用的部署版本。很好，对吧？</p><h1 id="af9b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">1.设置你的应用</h1><p id="7d01" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">首先，让我们设置一个可以部署到Azure的FastAPI应用程序。我将使用一个简单的Hello World示例，您可以在这里找到:【https://github.com/bmaelum/fastapi-hello-world T4】</p><p id="a2e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该应用程序在/app文件夹中包含一个主文件，这是FastAPI代码所在的位置。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="8314" class="mu lt iq mq b gy mv mw l mx my">from fastapi import FastAPI  </span><span id="551b" class="mu lt iq mq b gy mz mw l mx my">app = FastAPI(<br/>    title="FastAPI - Hello World",    <br/>    description="This is the Hello World of FastAPI.",<br/>    version="1.0.0",)   </span><span id="fb57" class="mu lt iq mq b gy mz mw l mx my">@app.get("/")<br/>def hello_world():    <br/>    return {"Hello": "World"}</span></pre><p id="95ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要使用app，首先在你自己的Github帐户中创建一个副本。这是使用Github动作完成这些步骤所必需的。如果您想使用本指南的示例代码，请转到这个URL:<a class="ae kv" href="https://github.com/bmaelum/fastapi-hello-world" rel="noopener ugc nofollow" target="_blank">https://github.com/bmaelum/fastapi-hello-world</a>并单击“fork”按钮。</p><p id="1091" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了能够测试代码，将repo克隆到您的机器上:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="f8cf" class="mu lt iq mq b gy mv mw l mx my">git clone <a class="ae kv" href="mailto:git@github.com" rel="noopener ugc nofollow" target="_blank">git@github.com</a>:&lt;your-username&gt;/fastapi-hello-world.git</span></pre><p id="11d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后将requirements.txt文件中的需求安装到您的环境中:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="727d" class="mu lt iq mq b gy mv mw l mx my">pip install -r requirements.txt</span></pre><p id="395b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要运行该应用程序，只需输入:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="72a6" class="mu lt iq mq b gy mv mw l mx my">uvicorn app.main:app</span></pre><p id="1a5a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您应该在终端中看到类似这样的内容:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="01be" class="mu lt iq mq b gy mv mw l mx my">INFO:     Uvicorn running on <a class="ae kv" href="http://127.0.0.1:8000" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8000</a> (Press CTRL+C to quit)</span></pre><p id="b62d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">测试应用程序可以在浏览器中完成，也可以使用类似Postman的工具。要在您的浏览器中查看应用程序，只需转到终端中打印的URL，在本例中为:<a class="ae kv" href="http://127.0.0.1:8000" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:8000 </a>。</p><h1 id="ef07" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">2.是时候归档了</h1><p id="e099" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在，让我们将应用程序归档。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/8c1b52763ad40a0d4fe12399c9e96945.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CWHIc6COtEjDQnHI"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@carrier_lost?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">伊恩·泰勒</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><blockquote class="nb nc nd"><p id="0097" class="kw kx ne ky b kz la jr lb lc ld ju le nf lg lh li ng lk ll lm nh lo lp lq lr ij bi translated">使用Docker来部署你的应用程序是很棒的，原因有很多，其中之一是它可以帮助你确保你的本地开发和Azure上的部署有相同的环境。</p></blockquote><p id="7d76" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">确保你有一个合适的docker文件。在示例文件中，docker文件如下所示:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="ff99" class="mu lt iq mq b gy mv mw l mx my">FROM tiangolo/uvicorn-gunicorn-fastapi:python3.7 </span><span id="e591" class="mu lt iq mq b gy mz mw l mx my">COPY ./app /app </span><span id="45a3" class="mu lt iq mq b gy mz mw l mx my">COPY requirements.txt .<br/>RUN pip --no-cache-dir install -r requirements.txt</span></pre><h2 id="eeab" class="mu lt iq bd lu ni nj dn ly nk nl dp mc lf nm nn me lj no np mg ln nq nr mi ns bi translated">2.1建立码头工人形象</h2><p id="f302" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">要构建Docker映像，只需运行:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="0eac" class="mu lt iq mq b gy mv mw l mx my">docker build -t fastapi-image .</span></pre><h2 id="430e" class="mu lt iq bd lu ni nj dn ly nk nl dp mc lf nm nn me lj no np mg ln nq nr mi ns bi translated">2.2运行并测试Docker映像</h2><p id="7097" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">要在容器中运行映像，只需运行:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="5912" class="mu lt iq mq b gy mv mw l mx my">docker run -p 80:80 -it fastapi-image</span></pre><p id="ca41" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要测试app你可以用和以前一样的地址，只需要把端口改成80就可以了，像这样:<a class="ae kv" href="http://127.0.0.1:8000" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:80 </a>。</p><p id="7c0a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你的应用在本地工作，太好了！现在是时候把它部署到Azure了！</p><h1 id="ac50" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">3.让我们将应用程序部署到Azure</h1><p id="13fe" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">准备部署到Azure了吗？激动人心！</p><p id="4d2a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将应用部署到Azure需要我们在Azure门户中做一些动作，以及使用Github动作。</p><p id="fd9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ne">本指南将遵循微软的官方文档，网址为:https://docs . Microsoft . com/en-us/azure/container-instances/container-instances-github-action</em></p><h2 id="98a6" class="mu lt iq bd lu ni nj dn ly nk nl dp mc lf nm nn me lj no np mg ln nq nr mi ns bi translated">3.1资源组和服务主体</h2><p id="3e9f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">首先，我们需要在所需的资源组中创建一个服务主体，一个角色。如果您还没有资源组，只需在Azure门户的资源组中创建一个即可。</p><p id="573c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了创建服务主体，我们在Azure Cloud Shell中使用Bash。通过点击页面顶部的云壳图标打开它:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/22f09a098f30ad370b8723e04c3c8f23.png" data-original-src="https://miro.medium.com/v2/resize:fit:184/format:webp/1*3x4xtDjsFWZfA4fkyYhO0g.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">天蓝色云壳图标</p></figure><p id="afc7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">确保它设置为在云壳的左上方猛击:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/363269acbaf72b796614737ba70a6946.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dYhAdvPBb9_GI8MsjO_2_Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在Azure门户中使用云外壳时的Bash</p></figure><p id="dbe2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，通过使用以下命令在Azure中为资源组创建一个服务主体，并给角色一个名称，范围是您的资源组的资源ID。</p><p id="cd2a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">获取资源组ID:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="9f5d" class="mu lt iq mq b gy mv mw l mx my">groupId=$(az group show \<br/>  --name &lt;resource-group-name&gt; \<br/>  --query id --output tsv)</span></pre><p id="2d42" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建角色:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="4dcd" class="mu lt iq mq b gy mv mw l mx my">az ad sp create-for-rbac \<br/>  --name githubactions \<br/>  --scope $groupId \<br/>  --role Contributor \<br/>  --sdk-auth</span></pre><p id="3978" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将为您提供以下格式的JSON:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="c674" class="mu lt iq mq b gy mv mw l mx my">{<br/>  "clientId": "",<br/>  "clientSecret": "",<br/>  "subscriptionId": "",<br/>  "tenantId": "",<br/>  "activeDirectoryEndpointUrl": "<a class="ae kv" href="https://login.microsoftonline.com" rel="noopener ugc nofollow" target="_blank">https://login.microsoftonline.com</a>",<br/>  "resourceManagerEndpointUrl": "<a class="ae kv" href="https://management.azure.com/" rel="noopener ugc nofollow" target="_blank">https://management.azure.com/</a>",<br/>  "activeDirectoryGraphResourceId": "<a class="ae kv" href="https://graph.windows.net/" rel="noopener ugc nofollow" target="_blank">https://graph.windows.net/</a>",<br/>  "sqlManagementEndpointUrl": "<a class="ae kv" href="https://management.core.windows.net:8443/" rel="noopener ugc nofollow" target="_blank">https://management.core.windows.net:8443/</a>",<br/>  "galleryEndpointUrl": "<a class="ae kv" href="https://gallery.azure.com/" rel="noopener ugc nofollow" target="_blank">https://gallery.azure.com/</a>",<br/>  "managementEndpointUrl": "<a class="ae kv" href="https://management.core.windows.net/" rel="noopener ugc nofollow" target="_blank">https://management.core.windows.net/</a>"<br/>}</span></pre><p id="261a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请务必保存此信息，因为在使用Github操作时将使用它进行身份验证。</p><h1 id="fc0a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">4.创建容器注册表</h1><p id="26e1" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">要管理Docker容器和图像，您需要在Azure中创建一个容器注册表。</p><p id="85a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">搜索“容器注册表”，然后选择“创建”。选择您的资源组、实例名称和位置。对于SKU，您可以选择基本选项。</p><h1 id="d5c2" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">5.准备好Github动作和Azure容器实例了吗？</h1><p id="add4" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">很好，让我们开始设置Github操作。</p><p id="68e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还记得上一步收集的JSON吗？现在是时候使用它了。</p><p id="4b25" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">转到Github和包含您的应用程序的存储库。然后进入设置-&gt;密码，添加以下凭证(<a class="ae kv" href="https://docs.microsoft.com/en-us/azure/container-instances/container-instances-github-action" rel="noopener ugc nofollow" target="_blank">官方文件</a>):</p><p id="1d30" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nv nw nx mq b">AZURE_CREDENTIALS</code>服务主体创建步骤的整个JSON输出</p><p id="4c3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nv nw nx mq b">REGISTRY_LOGIN_SERVER</code>您的注册表的登录服务器名称(全部小写)。示例:<em class="ne"> myregistry.azurecr.io </em></p><p id="8f82" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">服务主体创建的JSON输出中的<code class="fe nv nw nx mq b">REGISTRY_USERNAME</code>和<code class="fe nv nw nx mq b">clientId</code></p><p id="ad38" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nv nw nx mq b">REGISTRY_PASSWORD</code>来自服务主体创建的JSON输出的<code class="fe nv nw nx mq b">clientSecret</code></p><p id="207d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nv nw nx mq b">RESOURCE_GROUP</code>用于确定服务主体范围的资源组的名称</p><h1 id="8aca" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">6.在Github操作中设置工作流程</h1><p id="0803" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在，让我们使用Github操作来设置工作流。首先，在Github上打开你的回购，点击“操作”按钮。在那里，选择“跳过这一步，自己设置工作流程”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/22d07763866a87c402e8e80a66152084.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G9a-XpTktMUZExRyxM9OSg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Github操作入门</p></figure><p id="7a7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用以下代码替换main.yml文件中的现有代码:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="e8c5" class="mu lt iq mq b gy mv mw l mx my">on: [push]<br/>name: PythonAppAzureDeployment<br/>jobs:<br/>    build-and-deploy:<br/>        runs-on: ubuntu-latest<br/>        steps:<br/>        # checkout the repo<br/>        - name: 'Checkout GitHub Action'<br/>          uses: actions/checkout@main<br/>          <br/>        - name: 'Login via Azure CLI'<br/>          uses: azure/login@v1<br/>          with:<br/>            creds: ${{ secrets.AZURE_CREDENTIALS }}<br/>        <br/>        - name: 'Build and push image'<br/>          uses: azure/docker-login@v1<br/>          with:<br/>            login-server: ${{ secrets.REGISTRY_LOGIN_SERVER }}<br/>            username: ${{ secrets.REGISTRY_USERNAME }}<br/>            password: ${{ secrets.REGISTRY_PASSWORD }}<br/>        - run: |<br/>            docker build . -t ${{ secrets.REGISTRY_LOGIN_SERVER }}/sampleapp:${{ github.sha }}<br/>            docker push ${{ secrets.REGISTRY_LOGIN_SERVER }}/sampleapp:${{ github.sha }}<br/>        <br/>        - name: 'Deploy to Azure Container Instances'<br/>          uses: 'azure/aci-deploy@v1'<br/>          with:<br/>            resource-group: ${{ secrets.RESOURCE_GROUP }}<br/>            dns-name-label: ${{ secrets.RESOURCE_GROUP }}${{ github.run_number }}<br/>            image: ${{ secrets.REGISTRY_LOGIN_SERVER }}/sampleapp:${{ github.sha }}<br/>            registry-login-server: ${{ secrets.REGISTRY_LOGIN_SERVER }}<br/>            registry-username: ${{ secrets.REGISTRY_USERNAME }}<br/>            registry-password: ${{ secrets.REGISTRY_PASSWORD }}<br/>            name: fastapi-sampleapp<br/>            location: 'west europe'</span></pre><p id="e30e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，提交文件，因为我们已经指定了“on: push ”,它将立即运行。如果它不能确保代码已被提交并推送到回购。</p><p id="39cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，等待构建和部署代码。您可以通过单击“Actions”并选择正在运行的管道来跟踪进度。</p><p id="525e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果出现错误:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="f253" class="mu lt iq mq b gy mv mw l mx my">Error: The subscription is not registered to use namespace ‘Microsoft.ContainerInstance’.</span></pre><p id="a703" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">只需在PowerShell中执行以下操作:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="3297" class="mu lt iq mq b gy mv mw l mx my">Register-AzResourceProvider -ProviderNamespace Microsoft.ContainerInstance</span></pre><p id="97a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或者，在Azure中，您可以转到“订阅”，选择您的订阅，转到资源提供商，搜索“ContainerInstance”，单击所需的结果，然后单击“注册”。</p><h1 id="f298" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">7.Azure容器实例</h1><p id="43cc" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">当你进入Azure门户中的容器实例时，你的Dockerized应用现在应该是可见的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/b0b54fc6d733d14edd82e8207107c7cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D-vgW79lrpc4WesgMUV49w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Azure容器实例</p></figure><h1 id="022e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">测试应用程序</h1><p id="9dbd" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">要测试应用程序，请单击新部署的容器实例，然后转到Properties。在FQDN下面有一个网址。将URL粘贴到您的浏览器中，您应该会看到类似这样的内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/2fbdb48e62d108fa24b75046579f575a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Clfw_Ot6Wu97DMzTBXgUCg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在浏览器中测试部署的应用程序</p></figure><h2 id="25dc" class="mu lt iq bd lu ni nj dn ly nk nl dp mc lf nm nn me lj no np mg ln nq nr mi ns bi translated"><strong class="ak">恭喜你，你现在已经在Azure上部署了一个Dockerized app！</strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/e2321e128e8b24b7a04cfd833001ab38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KSjPpUR_y0lBadso"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">布鲁斯·马尔斯在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure></div></div>    
</body>
</html>