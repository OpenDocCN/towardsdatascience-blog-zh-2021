<html>
<head>
<title>Five R Markdown tricks that you may not know about</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你可能不知道的五个降价技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/five-r-markdown-tricks-that-you-may-not-know-about-71e93f50c026?source=collection_archive---------20-----------------------#2021-10-25">https://towardsdatascience.com/five-r-markdown-tricks-that-you-may-not-know-about-71e93f50c026?source=collection_archive---------20-----------------------#2021-10-25</a></blockquote><div><div class="fc ij ik il im in"/><div class="io ip iq ir is"><div class=""/><div class=""><h2 id="4631" class="pw-subtitle-paragraph js iu iv bd b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj dk translated">这五个简单的技巧开启了你用R Markdown做什么的可能性</h2></div><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi kk"><img src="../Images/1ee4e6acbaa8e27c16814e2fae92a4d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1lfqHuJl2xJQ_lqFBX5HoA.jpeg"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">在<a class="ae la" href="https://unsplash.com/s/photos/happy-computer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae la" href="https://unsplash.com/@windows?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">窗口</a>拍摄的照片</p></figure><p id="4463" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">经常阅读我的文章的许多人会知道我是一个多么狂热的R Markdown迷。它无疑是最好的数据科学出版软件，而且完全免费，还在不断改进，变得更好、更灵活。</p><p id="a528" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">随着时间的推移，我不断学习新的技巧，让我的生活变得更轻松，或者从R Markdown中获得最大收益。我在这里与你分享最近的五个。希望你觉得有用。</p><h2 id="0a56" class="lx ly iv bd lz ma mb dn mc md me dp mf lk mg mh mi lo mj mk ml ls mm mn mo mp bi translated">1.新的内嵌块选项</h2><p id="92b8" class="pw-post-body-paragraph lb lc iv ld b le mq jw lg lh mr jz lj lk ms lm ln lo mt lq lr ls mu lu lv lw io bi translated">你们中的许多人可能知道R Markdown中的chunk选项。当你写一个代码块的时候，你可以添加许多选项来指示你想用这个代码块做什么。例如:</p><pre class="kl km kn ko gt mv mw mx my aw mz bi"><span id="05c1" class="lx ly iv mw b gy na nb l nc nd">```{r, echo = FALSE}<br/># some R code <br/>```</span></pre><p id="46e6" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">这将显示代码块的结果，但不会显示代码本身。或者:</p><pre class="kl km kn ko gt mv mw mx my aw mz bi"><span id="07ec" class="lx ly iv mw b gy na nb l nc nd">```{python, eval = FALSE}<br/># some python code<br/>```</span></pre><p id="5834" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">这将显示代码，但不会运行它。事实上，有非常多的块选项可用，如果你不得不把它们放在curly<code class="fe ne nf ng mw b">{}</code>中，有时会变得混乱和难以理解。</p><p id="0f63" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">如果你安装了1.35+版本的<code class="fe ne nf ng mw b">knitr</code>，你现在可以使用一个新的块选项特殊注释<code class="fe ne nf ng mw b">#|</code>在块中逐行输入你的块选项，例如:</p><pre class="kl km kn ko gt mv mw mx my aw mz bi"><span id="0f5e" class="lx ly iv mw b gy na nb l nc nd">```{r}<br/>#| echo = FALSE, out.width = "80%"<br/>#| fig.cap = "My caption"</span><span id="7029" class="lx ly iv mw b gy nh nb l nc nd">my_plot<br/>```</span></pre><h2 id="382c" class="lx ly iv bd lz ma mb dn mc md me dp mf lk mg mh mi lo mj mk ml ls mm mn mo mp bi translated">2.有条件地评估代码块</h2><p id="8f06" class="pw-post-body-paragraph lb lc iv ld b le mq jw lg lh mr jz lj lk ms lm ln lo mt lq lr ls mu lu lv lw io bi translated">你知道你可以在你的块选项中加入条件吗？这非常有用，可以让你只在满足某些条件的情况下运行程序块。例如，只有当对象<code class="fe ne nf ng mw b">my_data</code>超过三行时，才会评估这个块:</p><pre class="kl km kn ko gt mv mw mx my aw mz bi"><span id="451d" class="lx ly iv mw b gy na nb l nc nd">```{r}<br/>#| eval = nrow(my_data) &gt; 3</span><span id="d452" class="lx ly iv mw b gy nh nb l nc nd">my_data<br/>```</span></pre><p id="908c" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">您还可以使用条件块来显示不同的内容，这取决于您是要渲染为PDF还是HTML——这意味着您只需保留一个与您的预期输出无关的<code class="fe ne nf ng mw b">Rmd</code>文件。例如:</p><pre class="kl km kn ko gt mv mw mx my aw mz bi"><span id="569d" class="lx ly iv mw b gy na nb l nc nd">```{r}<br/>#| eval = knitr::is_html_output()</span><span id="aa46" class="lx ly iv mw b gy nh nb l nc nd"># code for html output (eg interactive graphic)<br/>```</span><span id="9319" class="lx ly iv mw b gy nh nb l nc nd">```{r}<br/>#| eval = knitr::is_latex_output()</span><span id="41f6" class="lx ly iv mw b gy nh nb l nc nd"># code for pdf output (eg static graphic)<br/>```</span></pre><p id="4ec0" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">您也可以在if语句中使用这些<code class="fe ne nf ng mw b">knitr</code>输出函数，因此另一种方法是:</p><pre class="kl km kn ko gt mv mw mx my aw mz bi"><span id="00fd" class="lx ly iv mw b gy na nb l nc nd">```{r}<br/>if (knitr::is_html_output()) {<br/>  # code for html output<br/>} else {<br/>  # code for latex output<br/>}<br/>```</span></pre><h2 id="df0b" class="lx ly iv bd lz ma mb dn mc md me dp mf lk mg mh mi lo mj mk ml ls mm mn mo mp bi translated">3.直接使用Javascript定制你闪亮的应用程序</h2><p id="4068" class="pw-post-body-paragraph lb lc iv ld b le mq jw lg lh mr jz lj lk ms lm ln lo mt lq lr ls mu lu lv lw io bi translated">你们中的一些人可能会使用两个独立的<code class="fe ne nf ng mw b">ui.R</code>和<code class="fe ne nf ng mw b">server.R</code>文件来编写自己的应用程序，但是你也可以在一个R Markdown文件中编写完整的应用程序。这样做的一个好处是，你可以使用Javascript定制你的应用程序，只需在<code class="fe ne nf ng mw b">js</code>块中直接输入Javascript。</p><p id="415f" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">让我们看一个简单的例子。在Shiny中，目前没有直接选项来限制文本区域输入框中的字符数。所以如果我使用这个标准的界面函数:</p><pre class="kl km kn ko gt mv mw mx my aw mz bi"><span id="0dc3" class="lx ly iv mw b gy na nb l nc nd">```{r}<br/>shiny::textAreaInput(<br/>  "comment",<br/>  "Enter your comment:"<br/>)<br/>```</span></pre><p id="6c8f" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">这将创建一个ID为<code class="fe ne nf ng mw b">comment</code>的<code class="fe ne nf ng mw b">textarea</code>框。然而，如果我想将所有的评论限制在1000个字符以内，我在<code class="fe ne nf ng mw b">textAreaInput()</code>函数中没有简单的方法。</p><p id="d91b" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">不过，不要担心——如果你懂一点Javascript/jQuery，你可以添加一个<code class="fe ne nf ng mw b">js</code>块来给<code class="fe ne nf ng mw b">textarea</code>框添加一个<code class="fe ne nf ng mw b">maxlength</code>属性，就像这样:</p><pre class="kl km kn ko gt mv mw mx my aw mz bi"><span id="b7da" class="lx ly iv mw b gy na nb l nc nd">```{js}<br/>$('[id="comment"]').attr('maxlength', 1000)<br/>```</span></pre><h2 id="c9d1" class="lx ly iv bd lz ma mb dn mc md me dp mf lk mg mh mi lo mj mk ml ls mm mn mo mp bi translated">4.使用块选项来简化/模块化你的文档/应用</h2><p id="cd32" class="pw-post-body-paragraph lb lc iv ld b le mq jw lg lh mr jz lj lk ms lm ln lo mt lq lr ls mu lu lv lw io bi translated">如果您的文档或应用程序变得很长，并且块中有很多代码，那么跟踪起来会很麻烦，并且很难维护。相反，您可以从chunk中取出代码并保存在R文件中，然后使用<code class="fe ne nf ng mw b">code</code> chunk选项从R或Python文件中读取代码。例如:</p><pre class="kl km kn ko gt mv mw mx my aw mz bi"><span id="7429" class="lx ly iv mw b gy na nb l nc nd">```{python}<br/>#| code = readLines("my_setup_code.py")</span><span id="e281" class="lx ly iv mw b gy nh nb l nc nd"># python code for setup<br/>```</span></pre><h2 id="0fd1" class="lx ly iv bd lz ma mb dn mc md me dp mf lk mg mh mi lo mj mk ml ls mm mn mo mp bi translated">5.使用CSS块定制你的文档</h2><p id="f510" class="pw-post-body-paragraph lb lc iv ld b le mq jw lg lh mr jz lj lk ms lm ln lo mt lq lr ls mu lu lv lw io bi translated">如果你想定制你的文档或应用程序的风格，你可以使用CSS代码块很容易地做到这一点。您可能必须呈现文档，然后在Google Chrome中检查它，以识别您想要定制的特定元素的类或ID，但是作为一个简单的示例，如果您想要将文档主体的背景颜色更改为漂亮的浅蓝色，您可以简单地插入以下内容:</p><pre class="kl km kn ko gt mv mw mx my aw mz bi"><span id="bb06" class="lx ly iv mw b gy na nb l nc nd">```{css}<br/>body {<br/> background-color: #d0e3f1;<br/>}<br/>```</span></pre><p id="e8ea" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">希望这些简洁的小技巧对你有用。如果你有任何其他的建议，请在评论中提出。</p></div><div class="ab cl ni nj hz nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="io ip iq ir is"><p id="c5c4" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">最初我是一名纯粹的数学家，后来我成为了一名心理计量学家和数据科学家。我热衷于将所有这些学科的严谨性应用到复杂的人的问题上。我也是一个编码极客和日本RPG的超级粉丝。在<a class="ae la" href="https://www.linkedin.com/in/keith-mcnulty/" rel="noopener ugc nofollow" target="_blank"><em class="np">LinkedIn</em></a><em class="np">或</em><a class="ae la" href="https://twitter.com/dr_keithmcnulty" rel="noopener ugc nofollow" target="_blank"><em class="np">Twitter</em></a><em class="np">上找我。也可以看看我在drkeithmcnulty.com的</em><em class="np"/><em class="np">上的博客。</em></p></div></div>    
</body>
</html>