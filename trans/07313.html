<html>
<head>
<title>The Auto-Sommelier â€” How to Implement HuggingFace Transformers and Build a Search Engine</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">è‡ªåŠ¨ä¾é…’å¸ˆâ€”â€”å¦‚ä½•å®ç°HuggingFace Transformerså¹¶æ„å»ºæœç´¢å¼•æ“</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://towardsdatascience.com/the-auto-sommelier-how-to-implement-huggingface-transformers-and-build-a-search-engine-9e0f401b1bda?source=collection_archive---------10-----------------------#2021-07-03">https://towardsdatascience.com/the-auto-sommelier-how-to-implement-huggingface-transformers-and-build-a-search-engine-9e0f401b1bda?source=collection_archive---------10-----------------------#2021-07-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a2af" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">äº«å—ä¸€äº›è‘¡è„é…’ï¼Œç°ä»£è‡ªç„¶è¯­è¨€å¤„ç†ï¼Œç®€å•çš„ä»£ç ï¼Œæƒ…èŠ‚å’Œç ´æŠ˜å·</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5b48e8320aa1c817b1c49a7419020c68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ld8OdDD2pdY9b6Tw"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">è´¾æ–¯æ±€Â·è‰¾é‡‘åœ¨<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šçš„ç…§ç‰‡</p></figure><h1 id="71d3" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">åˆ›å»ºè‡ªåŠ¨ä¾é…’å¸ˆ</h1><p id="500a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">å›åˆ°2019å¹´8æœˆï¼Œæˆ‘å°†æˆ‘çš„ç¬¬ä¸€ä¸ªè‡ªç„¶è¯­è¨€å¤„ç†(NLP)é¡¹ç›®æŠ•å…¥ç”Ÿäº§ï¼Œå¹¶åœ¨æˆ‘çš„ç½‘ç«™ä¸Šä¸»æŒäº†<a class="ae ky" href="http://robotsdodream.com" rel="noopener ugc nofollow" target="_blank">è‡ªåŠ¨ä¾é…’å¸ˆã€‚ä½¿ç”¨</a><a class="ae ky" rel="noopener" target="_blank" href="/generating-wine-recommendations-using-the-universal-sentence-encoder-d086edd13d00"> TensorFlow 1å’Œé€šç”¨è¯­å¥ç¼–ç å™¨</a>ï¼Œæˆ‘å…è®¸ç”¨æˆ·æè¿°ä»–ä»¬ç†æƒ³çš„è‘¡è„é…’ï¼Œå¹¶è¿”å›ä¸æŸ¥è¯¢ç›¸ä¼¼çš„æè¿°ã€‚è¯¥å·¥å…·å°†è‘¡è„é…’è¯„è®ºå’Œç”¨æˆ·è¾“å…¥è½¬æ¢ä¸ºå‘é‡ï¼Œå¹¶è®¡ç®—ç”¨æˆ·è¾“å…¥å’Œè‘¡è„é…’è¯„è®ºä¹‹é—´çš„ä½™å¼¦ç›¸ä¼¼æ€§ï¼Œä»¥æ‰¾åˆ°æœ€ç›¸ä¼¼çš„ç»“æœã€‚</p><p id="ee1b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Cosine_similarity" rel="noopener ugc nofollow" target="_blank">ä½™å¼¦ç›¸ä¼¼åº¦</a>æ˜¯ä¸€ç§æ¯”è¾ƒæ–‡æ¡£ç›¸ä¼¼åº¦çš„å¸¸ç”¨æ–¹æ³•ï¼Œå› ä¸ºå®ƒé€‚ç”¨äºè¯é¢‘ç­‰å¯¹åˆ†æéå¸¸é‡è¦çš„æ•°æ®ã€‚å®ƒåæ˜ äº†å•ä¸ªå‘é‡ç»´åº¦çš„ç›¸å¯¹æ¯”è¾ƒï¼Œè€Œä¸æ˜¯ç»å¯¹æ¯”è¾ƒã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä¸ä¼šæ·±å…¥æ¢ç©¶ä½™å¼¦ç›¸ä¼¼æ€§èƒŒåçš„æ•°å­¦ï¼Œä½†æˆ‘çŸ¥é“å®ƒæ˜¯å†…ç§¯ç©ºé—´çš„ä¸¤ä¸ªéé›¶å‘é‡ä¹‹é—´ç›¸ä¼¼æ€§çš„åº¦é‡ã€‚</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/0fc3d3ce000c10a76dc19b52e4328333.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N7KEcBOnrPhqKP0Ta0SH-Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">è‡ªåŠ¨ä¾é…’å¸ˆ(RobotsDoDreams.com)</p></figure><h1 id="f82e" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">å¢å¼ºæ—¶é—´åˆ°äº†</h1><p id="b5b4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">è™½ç„¶è¯¥æ¨¡å‹ä»ç„¶æœ‰æ•ˆï¼Œä½†è‡ª2019å¹´ä»¥æ¥ï¼Œè‡ªç„¶è¯­è¨€å¤„ç†å–å¾—äº†å·¨å¤§è¿›å±•ã€‚ä½¿ç”¨åƒHuggingFaceçš„Transformersè¿™æ ·çš„å·¥å…·ï¼Œå°†å¥å­æˆ–æ®µè½è½¬æ¢æˆå¯ç”¨äºè¯­ä¹‰ç›¸ä¼¼æ€§ç­‰NLPä»»åŠ¡çš„å‘é‡ä»æœªå¦‚æ­¤ç®€å•ã€‚ä½¿ç”¨æœ€æ–°çš„æŠ€æœ¯å’Œè¯­è¨€æ¨¡å‹é‡æ„æˆ‘çš„ä»£ç å°†ä¼šä½¿å®ƒæ›´æœ‰æ€§èƒ½ã€‚å¦‚æœä½ æ˜¯NLPæ–°æ‰‹ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„åˆå­¦è€…æ•™ç¨‹ã€‚</p><div class="mt mu gp gr mv mw"><a rel="noopener follow" target="_blank" href="/how-to-vectorize-text-in-dataframes-for-nlp-tasks-3-simple-techniques-82925a5600db"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">å¦‚ä½•å¯¹è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡çš„æ•°æ®å¸§ä¸­çš„æ–‡æœ¬è¿›è¡ŒçŸ¢é‡åŒ–â€”â€”3ç§ç®€å•çš„æŠ€æœ¯</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">ä½¿ç”¨Textheroã€Gensimå’ŒTensorflowçš„ç®€å•ä»£ç ç¤ºä¾‹</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">towardsdatascience.com</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk ks mw"/></div></div></a></div><p id="c0a4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘å°†è§£é‡Šå¦‚ä½•ä½¿ç”¨<a class="ae ky" href="https://huggingface.co/" rel="noopener ugc nofollow" target="_blank">æ‹¥æŠ±è„¸å˜å½¢é‡‘åˆšåº“</a>ã€<a class="ae ky" href="https://github.com/nmslib/nmslib" rel="noopener ugc nofollow" target="_blank">éåº¦é‡ç©ºé—´åº“</a>å’Œ<a class="ae ky" href="http://pythondashboards.com" rel="noopener ugc nofollow" target="_blank"> Dashåº“</a>æ¥æ„å»ºä¸€ä¸ªæ–°çš„å’Œæ”¹è¿›çš„è‡ªåŠ¨ä¾é…’å¸ˆã€‚å®Œæ•´çš„ä»£ç å’ŒGitHubé“¾æ¥å¯ä»¥åœ¨æ–‡ç« çš„åº•éƒ¨æ‰¾åˆ°ã€‚</p><h1 id="1292" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">è‘¡è„é…’æ•°æ®</h1><p id="901b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">è‘¡è„é…’æ•°æ®æ¥è‡ªåœ¨<a class="ae ky" href="https://www.kaggle.com/" rel="noopener ugc nofollow" target="_blank">kaggle.comä¸Šæ‰¾åˆ°çš„</a><a class="ae ky" href="https://www.kaggle.com/zynicide/wine-reviews" rel="noopener ugc nofollow" target="_blank">è‘¡è„é…’è¯„è®º</a>æ•°æ®é›†ã€‚åŸå§‹æ•°æ®åŒ…å«å¤§çº¦130ï¼Œ000è¡Œæ•°æ®ï¼ŒåŒ…æ‹¬å›½å®¶ã€æè¿°ã€æ ‡é¢˜ã€å“ç§ã€é…’å‚ã€ä»·æ ¼å’Œè¯„çº§ç­‰åˆ—ã€‚</p><p id="a051" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/generating-wine-recommendations-using-the-universal-sentence-encoder-d086edd13d00">æŸ¥çœ‹æ‰€æœ‰</a>æ•°æ®å·¥ç¨‹ä»£ç çš„åŸæ–‡ã€‚</p><p id="ef21" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">å°†æ•°æ®æ”¾å…¥dataframeåï¼Œæˆ‘åˆ é™¤äº†åŒ…å«é‡å¤æè¿°çš„è¡Œå’Œä»·æ ¼ä¸ºç©ºçš„è¡Œã€‚æˆ‘è¿˜å°†æ•°æ®é™åˆ¶åœ¨æœ‰è¶…è¿‡200æ¡è¯„è®ºçš„è‘¡è„é…’å“ç§ä¸Šã€‚</p><p id="3381" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">é€šè¿‡æ’é™¤å°‘äº200æ¡è¯„è®ºçš„å“ç§æ¥å‡å°‘æ•°æ®ï¼Œæˆ‘å¾—åˆ°äº†54ç§è‘¡è„é…’ã€‚åœ¨æ¸…é™¤äº†ç©ºæ•°æ®å’Œé‡å¤æ•°æ®ä¹‹åï¼Œå‰©ä¸‹100ï¼Œ228è¡Œã€‚é€šè¿‡è°·æ­Œæœç´¢å‰©ä¸‹çš„å“ç§ï¼Œæˆ‘å¯ä»¥æ·»åŠ ä¸€ä¸ªé¢œè‰²æ ï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥é€šè¿‡æƒ³è¦çš„è‘¡è„é…’é¢œè‰²æ¥é™åˆ¶ä»–ä»¬çš„æœç´¢ã€‚</p><h2 id="63e8" class="nl la it bd lb nm nn dn lf no np dp lj ma nq nr ll me ns nt ln mi nu nv lp nw bi translated">å¯¼å…¥ä¾èµ–é¡¹å’Œæ•°æ®</h2><p id="c5a7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">å¾ˆå®¹æ˜“å°†æ•°æ®è¿æ¥å¹¶åŠ è½½åˆ°dataframeä¸­ï¼Œå› ä¸ºå®ƒå·²ç»æ˜¯ä¸€ä¸ªsqliteæ–‡ä»¶ã€‚æŒ‰ç…§ä¸‰ä¸ªæ­¥éª¤åŠ è½½åº“ã€æ•°æ®å’Œæ•°æ®å¸§ã€‚</p><p id="9ba9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">1.å¯¼å…¥<em class="nx"> pandas </em>å’Œ<em class="nx"> sqlite3 </em>åº“ã€‚<br/> 2ã€‚è¿æ¥åˆ°<strong class="lt iu"> sqlite </strong>æ–‡ä»¶ã€‚<br/> 3ã€‚å°†æ•°æ®åŠ è½½åˆ°ç†ŠçŒ«æ•°æ®æ¡†æ¶ä¸­ã€‚</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="911f" class="nl la it nz b gy od oe l of og">#<em class="nx">Import dependencies <br/></em>import numpy as np<br/>import pandas as pd<br/>import sqlite3<br/>from sqlite3 import Error</span><span id="659b" class="nl la it nz b gy oh oe l of og">import texthero as hero<br/>from texthero import preprocessing<br/>from sentence_transformers import SentenceTransformer, util<br/>import nmslib</span><span id="5200" class="nl la it nz b gy oh oe l of og">import time<br/>import datetime</span><span id="9dc2" class="nl la it nz b gy oh oe l of og"><em class="nx"><br/>#Establish connection to sqlite database</em><br/>conn = sqlite3.connect("wine_data.sqlite")</span><span id="17cb" class="nl la it nz b gy oh oe l of og"><em class="nx">#load the data into a pandas DataFrame</em><br/>df = pd.read_sql("select * from wine_data", conn)</span></pre><p id="2e1e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">æ³¨æ„ï¼Œæˆ‘è¿˜å¯¼å…¥äº†å°†åœ¨æ•™ç¨‹ä¸­ä½¿ç”¨çš„å…¶ä»–åº“ã€‚æˆ‘å°†æ›´å¤šåœ°ä»‹ç»ä»–ä»¬ã€‚ä½¿ç”¨pandas <strong class="lt iu"> read_sql </strong>å‡½æ•°ç”Ÿæˆä¸€ä¸ªä½¿ç”¨åŸå§‹sqlçš„æ•°æ®å¸§ã€‚è¯·æ³¨æ„ï¼Œæ•°æ®é›†ä¸­æœ‰16åˆ—å’Œ100228è¡Œã€‚</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/651d53dd2367073f592ba5c8722ffcee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hSQDQzTiuUVHnLSmbPVlxg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">è‘¡è„é…’æ•°æ®df.head(3)</p></figure><p id="e338" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"/></p></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><h1 id="9d85" class="kz la it bd lb lc oq le lf lg or li lj jz os ka ll kc ot kd ln kf ou kg lp lq bi translated">æ‹¥æŠ±è„¸ğŸ¤—å˜å½¢é‡‘åˆš(ç”µå½±å)</h1><p id="04ff" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">å¦‚æœä½ åœ¨è¿‡å»ä¸€å¹´å·¦å³çš„æ—¶é—´é‡Œå‚ä¸äº†è‡ªç„¶è¯­è¨€å¤„ç†(NLP)é¢†åŸŸï¼Œä½ å¯èƒ½å·²ç»å¬è¯´è¿‡HuggingFaceğŸ¤—ã€‚HuggingFaceæ˜¯ä¸€ä¸ªä¸“æ³¨äºNLPçš„äººå·¥æ™ºèƒ½å’Œæ·±åº¦å­¦ä¹ å¹³å°ï¼Œç›®æ ‡æ˜¯å®ç°äººå·¥æ™ºèƒ½æŠ€æœ¯çš„æ°‘ä¸»åŒ–ã€‚ä»–ä»¬ç²¾ç®€å’Œç®€åŒ–äº†åº”ç”¨å’Œå¾®è°ƒé¢„å…ˆè®­ç»ƒçš„è¯­è¨€æ¨¡å‹ã€‚</p><p id="a06c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">Transformersæ˜¯ä¸€ä¸ªå¼€æºåº“ï¼Œå…·æœ‰ä¸€ä¸ªæ¨¡å‹ä¸­å¿ƒï¼Œå…è®¸ç”¨æˆ·åŸºäºé€šç”¨æ¶æ„(å¦‚BERTã€XLMã€DistilBertç­‰)å®ç°æœ€å…ˆè¿›çš„æ·±åº¦å­¦ä¹ æ¨¡å‹...å®ƒæ„å»ºåœ¨PyTorchã€TensorFlowå’ŒJaxä¹‹ä¸Šï¼Œå¹¶ä¸”å·²çŸ¥åœ¨æ¡†æ¶ä¹‹é—´å…·æœ‰è‰¯å¥½çš„äº’æ“ä½œæ€§ã€‚</p><p id="3668" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">ä»–ä»¬åˆšåˆšå‘å¸ƒäº†ä¸€ä¸ªå®Œæ•´çš„è¯¾ç¨‹ï¼Œå¸¦ä½ ç©¿è¶Šæ‹¥æŠ±è„¸ç”Ÿæ€ç³»ç»Ÿã€‚æˆ‘å¼ºçƒˆæ¨èå®ƒ:</p><div class="mt mu gp gr mv mw"><a href="https://huggingface.co/course/chapter1" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">å˜å½¢é‡‘åˆšæ¨¡å‹â€”â€”æ‹¥æŠ±è„¸è¯¾ç¨‹</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">è¿™é—¨è¯¾å°†æ•™ä½ è‡ªç„¶è¯­è¨€å¤„ç†(NLP ),ä½¿ç”¨æ¥è‡ªæ‹¥æŠ±è„¸ç”Ÿæ€ç³»ç»Ÿçš„åº“â€”â€”ğŸ¤—â€¦</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">huggingface.co</p></div></div><div class="nf l"><div class="ov l nh ni nj nf nk ks mw"/></div></div></a></div><p id="9f20" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">ä½¿ç”¨pipå®‰è£…åº“</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="9a91" class="nl la it nz b gy od oe l of og">$ pip install transformers</span></pre><p id="b839" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘å°†ä½¿ç”¨<a class="ae ky" href="https://huggingface.co/distilbert-base-uncased" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu"><em class="nx">distilBERT-base-un cased</em></strong></a>æ¨¡å‹ï¼Œå› ä¸ºå®ƒä¸æˆ‘ä»¬çš„ç”¨ä¾‹ã€è¯­ä¹‰ç›¸ä¼¼æ€§è¡¨ç°è‰¯å¥½ã€‚å®ƒå°†æ–‡æœ¬è½¬æ¢æˆ768ç»´å‘é‡ã€‚<a class="ae ky" href="https://huggingface.co/models?pipeline_tag=sentence-similarity" rel="noopener ugc nofollow" target="_blank">å¦‚æœä½ ä¸æƒ³ä½¿ç”¨distilBERT </a>ï¼Œæ¢ç´¢æ‰€æœ‰å¥å­ç›¸ä¼¼åº¦çš„HuggingFaceæ¨¡å‹ <a class="ae ky" href="https://huggingface.co/models?pipeline_tag=sentence-similarity" rel="noopener ugc nofollow" target="_blank">ã€‚è¿™ä¸ªæ¨¡å‹æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼Œè¿™æ„å‘³ç€å®ƒä¸åŒºåˆ†è‹±è¯­å’Œè‹±è¯­ã€‚</a><a class="ae ky" href="https://arxiv.org/abs/1910.01108" rel="noopener ugc nofollow" target="_blank">æŸ¥çœ‹å®˜æ–¹æ–‡ä»¶ï¼Œäº†è§£å…³äºè¯¥å‹å·çš„è¯¦ç»†ä¿¡æ¯</a>ã€‚</p><p id="9596" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">è¦å®ç°è¯¥æ¨¡å‹ï¼Œè¯·éµå¾ªä»¥ä¸‹æ­¥éª¤:</p><ol class=""><li id="6777" class="ow ox it lt b lu mn lx mo ma oy me oz mi pa mm pb pc pd pe bi translated">ç”¨<em class="nx">distil Bert-base-un cased</em>æ¨¡å‹å®ä¾‹åŒ–<strong class="lt iu"> SentenceTransformer </strong>ã€‚</li><li id="b83e" class="ow ox it lt b lu pf lx pg ma ph me pi mi pj mm pb pc pd pe bi translated">è°ƒç”¨<strong class="lt iu">ç¼–ç </strong>å¹¶å°†è‘¡è„é…’æè¿°ä¼ å…¥å…¶ä¸­ã€‚å°†å‚æ•°<strong class="lt iu">convert _ to _ tensor</strong>=<em class="nx">è®¾ç½®ä¸ºTrueã€‚</em></li></ol><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="e5f5" class="nl la it nz b gy od oe l of og">#load the distilbert model <br/>distilbert = SentenceTransformer('distilbert-base-uncased')</span><span id="8f54" class="nl la it nz b gy oh oe l of og">#generate the embeddings for the wine reviews<br/>embeddings = distilbert.encode(df['description'], convert_to_tensor=True)</span></pre><p id="a34f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> <em class="nx">æ³¨æ„</em> </strong>:å¦‚æœæ‚¨ä¹‹å‰ä»æœªä¸‹è½½è¿‡è¯¥æ¨¡å‹ï¼Œæ‚¨å°†çœ‹åˆ°å®ƒæ­£åœ¨ä¸‹è½½ï¼Œå¹¶ä¸”å¯èƒ½ä¼šå¼¹å‡ºä¸€äº›æ¶ˆæ¯ã€‚è¿™å¾ˆæ­£å¸¸ã€‚</p><p id="cb65" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">ä¸€æ—¦è¯¥è¿‡ç¨‹å®Œæˆï¼Œæ–‡æœ¬æè¿°å°†è¢«è½¬æ¢æˆé•¿åº¦ä¸º768çš„å‘é‡ã€‚æˆ‘ä»¬å¯ä»¥æ£€æŸ¥é•¿åº¦å’Œç¬¬ä¸€æ¬¡åµŒå…¥ï¼Œä»¥ç¡®ä¿å®ƒçœ‹èµ·æ¥åƒé¢„æœŸçš„é‚£æ ·:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/656e4c86a74a4c7af45c65f7e9738e6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*7b3iys5DpKK781EaHmhhBQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">print(len(embeddings[0])<br/>print(embeddings[0])</p></figure><p id="824a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">ä¸ºäº†ä½¿å‘é‡æ›´å®¹æ˜“åˆ†æï¼Œä½¿ç”¨numpyå°†æ•°æ®ä»å¼ é‡å¯¹è±¡è½¬æ¢ä¸ºåˆ—è¡¨å¯¹è±¡ï¼Œç„¶åå°†åˆ—è¡¨é™„åŠ åˆ°pandasæ•°æ®å¸§ã€‚</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="23a6" class="nl la it nz b gy od oe l of og">#add embeddings to dataframe<br/>df['distilbert'] = np.array(embeddings).tolist()</span><span id="ac3b" class="nl la it nz b gy oh oe l of og">#show the top row<br/>df.head(1)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/2dfd0a7d5cb669cfe1d8c2f2cce84bda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KiSKDZIjo0dtTiuB3K_hug.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">æ•°æ®å¸§ä¸­çš„åµŒå…¥df.head(1)</p></figure></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><h1 id="e6bb" class="kz la it bd lb lc oq le lf lg or li lj jz os ka ll kc ot kd ln kf ou kg lp lq bi translated">åˆ›å»ºæœç´¢ç´¢å¼•</h1><p id="35fa" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">å½“ä½¿ç”¨åƒè°·æ­Œæˆ–å¿…åº”è¿™æ ·çš„æœç´¢å¼•æ“æ—¶ï¼Œç”¨æˆ·å¸Œæœ›å¾ˆå¿«å¾—åˆ°ç»“æœã€‚ä¸ºäº†ä»¥é—ªç”µèˆ¬çš„é€Ÿåº¦æœç´¢æˆ‘ä»¬çš„ç»“æœé›†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è½»é‡çº§ä¸”é«˜æ•ˆçš„<a class="ae ky" href="https://github.com/nmslib/nmslib" rel="noopener ugc nofollow" target="_blank">éåº¦é‡ç©ºé—´åº“(NMSLIB) </a>ã€‚</p><p id="4a45" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">ä½¿ç”¨pipå®‰è£…å®ƒ:</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="119b" class="nl la it nz b gy od oe l of og">$ <!-- -->pip install nmslib</span></pre><p id="8170" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">å¦‚å‰æ‰€è¿°ï¼Œæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦ä½œä¸ºæˆ‘ä»¬æ¯”è¾ƒç”¨æˆ·è¾“å…¥å’Œè‘¡è„é…’æè¿°çš„åº¦é‡ã€‚æˆ‘ä»¬éœ€è¦èƒ½å¤Ÿæ‰¾åˆ°ä¸æˆ‘ä»¬çš„æœç´¢å‘é‡æœ€è¿‘çš„å‘é‡ã€‚ä½¿ç”¨è›®åŠ›æŠ€æœ¯æœç´¢å’Œæ’åºæ•°æ®æ—¢æ˜‚è´µåˆç¼“æ…¢ã€‚ç›¸åï¼Œåº”è¯¥ä¸ºæ•°æ®ç‚¹åˆ›å»ºä¸€ä¸ªç´¢å¼•ã€‚</p><p id="1e9c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">åˆ›å»ºæœç´¢ä½™å¼¦ç›¸ä¼¼æ€§ç´¢å¼•ç›¸å½“ç®€å•:</p><ol class=""><li id="ae22" class="ow ox it lt b lu mn lx mo ma oy me oz mi pa mm pb pc pd pe bi translated">åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ç´¢å¼•ï¼Œé€šè¿‡<em class="nx"> hnsw </em>ä½œä¸º<strong class="lt iu">æ–¹æ³•</strong>å’Œ<em class="nx">ä½™å¼¦ç±³å°”</em>ä½œä¸º<strong class="lt iu">ç©ºé—´</strong>ã€‚</li><li id="5817" class="ow ox it lt b lu pf lx pg ma ph me pi mi pj mm pb pc pd pe bi translated">ä½¿ç”¨<strong class="lt iu"> addDataPointBatch </strong>æ–¹æ³•å°†åµŒå…¥æ·»åŠ åˆ°ç´¢å¼•ä¸­ã€‚</li><li id="8a16" class="ow ox it lt b lu pf lx pg ma ph me pi mi pj mm pb pc pd pe bi translated">ä½¿ç”¨<strong class="lt iu"> createIndex </strong>æ–¹æ³•åˆ›å»ºå¸¦æœ‰æ•°æ®ç‚¹çš„ç´¢å¼•ã€‚</li></ol><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="887b" class="nl la it nz b gy od oe l of og"># initialize a new index, using a HNSW index on Cosine Similarity<br/>distilbert_index = nmslib.init(method='hnsw', space='cosinesimil')<br/>distilbert_index.addDataPointBatch(embeddings)<br/>distilbert_index.createIndex({'post': 2}, print_progress=True)</span></pre><p id="ed34" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">å¦‚æœæ‚¨å¸Œæœ›ä¿å­˜ç´¢å¼•å¹¶åœ¨ä»¥ååŠ è½½å®ƒ(æ¯”å¦‚åœ¨ç”Ÿäº§æœåŠ¡å™¨ä¸Š)ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹ä»£ç :</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="37ca" class="nl la it nz b gy od oe l of og">#Save a meta index and the data<br/>index.saveIndex('index.bin', save_data=True)</span><span id="0ead" class="nl la it nz b gy oh oe l of og">#Re-intitialize the library, specify the space<br/>newIndex = nmslib.init(method='hnsw', space='cosinesimil_sparse')</span><span id="6596" class="nl la it nz b gy oh oe l of og"><em class="nx">#Re-load the index and the data<br/></em>newIndex.loadIndex('sparse_index.bin', load_data=<strong class="nz iu">True</strong>)</span></pre></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><h1 id="c16e" class="kz la it bd lb lc oq le lf lg or li lj jz os ka ll kc ot kd ln kf ou kg lp lq bi translated">åˆ›å»ºæœç´¢åŠŸèƒ½</h1><p id="7426" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">æ—¢ç„¶æ•°æ®å·²ç»çŸ¢é‡åŒ–ï¼Œæœç´¢ç´¢å¼•ä¹Ÿå·²ç»å¡«å……ï¼Œé‚£ä¹ˆæ˜¯æ—¶å€™åˆ›å»ºæ¥æ”¶ç”¨æˆ·æŸ¥è¯¢å¹¶è¿”å›ç›¸ä¼¼è‘¡è„é…’çš„å‡½æ•°äº†ã€‚</p><p id="02c8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> search_wine </strong>å‡½æ•°å°†æ¥å—ä¸¤ä¸ªè¾“å…¥:<em class="nx"> DataFrame </em>å’Œ<em class="nx"> UserQuery </em>ã€‚ç”¨æˆ·æŸ¥è¯¢å°†ä½¿ç”¨<strong class="lt iu">ç¼–ç </strong>è½¬æ¢æˆä¸€ä¸ªå‘é‡ï¼Œå°±åƒæˆ‘ä»¬å¯¹è‘¡è„é…’æè¿°æ‰€åšçš„é‚£æ ·ã€‚ç„¶åNMSLIBå¯ä»¥ç”¨æ¥è¿”å›ç”¨æˆ·æŸ¥è¯¢å‘é‡çš„<a class="ae ky" href="https://en.wikipedia.org/wiki/K-nearest_neighbors_algorithm" rel="noopener ugc nofollow" target="_blank"> <em class="nx"> kè¿‘é‚»</em> </a>ã€‚æˆ‘è®¾ç½®äº†<em class="nx"> k=20 </em>ï¼Œä¸è¿‡å¯ä»¥éšæ„å®éªŒã€‚</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="d725" class="nl la it nz b gy od oe l of og">def search_wine(dataframe, userQuery):<br/>    <br/>    if dataframe is not None and userQuery is not None:<br/>        df = dataframe.copy()<br/>        query = distilbert.encode([userQuery], convert_to_tensor=True)<br/>        ids, distances = distilbert_index.knnQuery(query, k=20)</span><span id="15d6" class="nl la it nz b gy oh oe l of og">     matches = []</span><span id="414f" class="nl la it nz b gy oh oe l of og">     for i, j in zip(ids, distances):</span><span id="b952" class="nl la it nz b gy oh oe l of og">          matches.append({'country':df.country.values[i]<br/>                        , 'winery' : df.winery.values[i]<br/>                        , 'title' : df.title.values[i]<br/>                        , 'variety': df.variety.values[i]<br/>                        , 'color' : df.color.values[i]<br/>                        , 'description': df.description.values[i]<br/>                        , 'price': df.price.values[i]<br/>                        , 'rating': df.rating.values[i]<br/>                        , 'distance': j<br/>                       })</span><span id="16df" class="nl la it nz b gy oh oe l of og">     return pd.DataFrame(matches)</span></pre><p id="3aa8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">æ³¨æ„ç»“æœè¢«è¿”å›å¹¶ä½œä¸ºå­—å…¸é™„åŠ åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­ã€‚è¿™ä½¿å¾—å°†ç»“æœè½¬æ¢å›æ•°æ®å¸§å˜å¾—å®¹æ˜“ã€‚å¯¹äº<strong class="lt iu"> <em class="nx">è·ç¦»</em> </strong>å€¼ï¼Œè¶Šå°è¶Šå¥½ã€‚ä¾‹å¦‚ï¼Œè·ç¦»ä¸º0æ„å‘³ç€å‘é‡ç›¸åŒã€‚</p><p id="c168" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">æµ‹è¯•åŠŸèƒ½:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pm"><img src="../Images/047116fa6ee12e92db77f335f499704b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MCXwHU_UYYCa67UXMDza_g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">æœç´¢_è‘¡è„é…’ç»“æœ</p></figure><h1 id="1879" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">åˆ›å»ºå¯è§†åŒ–èµ„æºç®¡ç†å™¨</h1><p id="3493" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">é™¤äº†æ–‡æœ¬æœç´¢ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨é™ç»´æŠ€æœ¯åœ¨äºŒç»´ç©ºé—´ä¸­ç»˜åˆ¶è‘¡è„é…’ï¼Œä»è€Œæä¾›ä¸€ä¸ªå¯è§†åŒ–çš„æµè§ˆå™¨ã€‚ä½¿ç”¨<a class="ae ky" href="https://texthero.org/docs/api/texthero.representation.tsne" rel="noopener ugc nofollow" target="_blank"> Textheroåº“</a>ï¼Œå¾ˆå®¹æ˜“åº”ç”¨<a class="ae ky" href="https://en.wikipedia.org/wiki/T-distributed_stochastic_neighbor_embedding" rel="noopener ugc nofollow" target="_blank"> t-SNEç®—æ³•</a>æ¥é™ä½å‘é‡çš„ç»´æ•°å¹¶å°†å…¶å¯è§†åŒ–ã€‚åœ¨å¼•æ“ç›–ä¸‹ï¼ŒTextheroä½¿ç”¨<a class="ae ky" href="http://plotly.com" rel="noopener ugc nofollow" target="_blank"> Plotly </a>åˆ¶ä½œäº¤äº’å¼å›¾è¡¨ã€‚</p><p id="91bb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">t-SNE(t-distributed random neighbor embedding)æ˜¯ä¸€ç§ç”¨äºå¯è§†åŒ–é«˜ç»´æ•°æ®çš„<a class="ae ky" href="https://en.wikipedia.org/wiki/Machine_learning" rel="noopener ugc nofollow" target="_blank">æœºå™¨å­¦ä¹ </a>ç®—æ³•ã€‚t-SNEæŠ€æœ¯åº”ç”¨äº†<strong class="lt iu">éçº¿æ€§</strong>é™ç»´ã€‚</p><p id="a040" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">å°†t-SNEåº”ç”¨äºæ•°æ®å¸§ä¸­çš„<strong class="lt iu">è’¸é¦</strong>å‘é‡åˆ—ã€‚</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="a3d5" class="nl la it nz b gy od oe l of og">df['tsnedistilbert'] = hero.tsne(df['distilbert'])</span></pre><p id="b9ed" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">ä½¿ç”¨textheroåˆ›å»ºæ•£ç‚¹å›¾ã€‚</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="08b6" class="nl la it nz b gy od oe l of og">#create scatter plot of wines using the <br/>hero.scatterplot(df, col='tsnedistilbert'<br/>                 , color='variety'<br/>                 , title="Wine Explorer"<br/>                 , hover_data = ['title','variety','price','description'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pn"><img src="../Images/1ef4a4f3c5a0f005e14254fdd6a4a64b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I1i_HfkI0IDMWUz8ZTBSsw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">è‘¡è„é…’æµè§ˆå™¨å¯è§†åŒ–</p></figure><p id="aa2b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">æ•°æ®ä¸­æœ‰å¦‚æ­¤å¤šçš„å˜åŒ–ï¼Œä»¥è‡³äºæ•£ç‚¹å›¾çœ‹èµ·æ¥åƒå®‡å®™èƒŒæ™¯è¾å°„ï¼Œä½†è¿™æ²¡å…³ç³»ã€‚å°†é¼ æ ‡æ‚¬åœåœ¨ä¸€ä¸ªç‚¹ä¸Šä¼šæ˜¾ç¤ºæ›´å¤šä¿¡æ¯ã€‚ç”¨æˆ·å¯ä»¥ç‚¹å‡»ä¸€ä¸ªå“ç§ï¼Œå°†å…¶ä»å›¾è¡¨ä¸­åˆ é™¤ã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæ˜¯å…³äºè‘¡è„ç‰™çº¢è‰²å’Œç™½è‰²çš„æ··åˆ:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi po"><img src="../Images/21472c308b9cc15ad10d8f072f15568d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NfD-f4QlZxBFfxiIBJtZtg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">è‘¡è„ç‰™çº¢è‰²å’Œç™½è‰²æ··åˆ</p></figure><p id="1b01" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">æœ‰è¶£çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€äº›å“ç§æ˜¯å¦‚ä½•èšé›†åœ¨ä¸€èµ·çš„ï¼Œè€Œå¦ä¸€äº›å“ç§æ˜¯å¦‚ä½•åˆ†æ•£åœ¨å„å¤„çš„ã€‚</p></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><h1 id="14bf" class="kz la it bd lb lc oq le lf lg or li lj jz os ka ll kc ot kd ln kf ou kg lp lq bi translated">åˆ›å»ºç”¨æˆ·ç•Œé¢</h1><p id="75e1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">ä¸ºäº†å…è®¸ç”¨æˆ·ä¸æœç´¢åŠŸèƒ½è¿›è¡Œäº¤äº’ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Dash by Plotlyæ„å»ºä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç•Œé¢ã€‚<a class="ae ky" href="https://dash.plot.ly/" rel="noopener ugc nofollow" target="_blank"> Dashæ˜¯ä¸€ä¸ªåŸºäºFlaskã€Plotly.jså’ŒReact.jsç¼–å†™çš„Pythonæ¡†æ¶</a>ï¼Œå¦‚æœä½ æ˜¯Dashæ–°æ‰‹ï¼Œæƒ³è¦æŒæ¡åŸºç¡€çŸ¥è¯†ï¼Œè¯·æŸ¥çœ‹æˆ‘çš„æ‰€æœ‰æ•™ç¨‹:</p><div class="mt mu gp gr mv mw"><a href="https://medium.com/swlh/dashboards-in-python-for-beginners-and-everyone-else-using-dash-f0a045a86644" rel="noopener follow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">Pythonä¸­çš„ä»ªè¡¨ç›˜ï¼Œé€‚ç”¨äºåˆå­¦è€…å’Œä½¿ç”¨Dashçš„å…¶ä»–äºº</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">ä½¿ç”¨Pythonä¸­çš„Dashåˆå­¦è€…æ•™ç¨‹æ„å»ºä¸€ä¸ªåŸºæœ¬çš„å’Œé«˜çº§çš„ä»ªè¡¨æ¿</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">medium.com</p></div></div><div class="nf l"><div class="pp l nh ni nj nf nk ks mw"/></div></div></a></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pq"><img src="../Images/4de6a16d51d4b8a90bdc55098d57228a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7sb6z34I-RoGTTn5Vk53qg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ç”¨æˆ·ç•Œé¢</p></figure><p id="495b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">å¦‚æœæ‚¨æƒ³åœ¨jupyterç¬”è®°æœ¬ä¸­æ„å»ºdashåº”ç”¨ç¨‹åºï¼Œè¯·å®‰è£…Dashã€Dashå¼•å¯¼ç»„ä»¶å’Œjupyter-dashã€‚</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="e94e" class="nl la it nz b gy od oe l of og">pip install dash<br/>pip install dash-bootstrap-components<br/>pip install jupyter-dash #if you want to build in a jupyter notebook</span></pre><p id="3397" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">Dashåº”ç”¨ç¨‹åºç”±<strong class="lt iu">å¸ƒå±€</strong>å’Œ<strong class="lt iu">å›è°ƒ</strong>ç»„æˆ:</p><h2 id="3a47" class="nl la it bd lb nm nn dn lf no np dp lj ma nq nr ll me ns nt ln mi nu nv lp nw bi translated">å¸ƒå±€</h2><p id="fe10" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="https://dash.plot.ly/getting-started" rel="noopener ugc nofollow" target="_blank">å¸ƒå±€</a>ç”±ç»„ä»¶æ ‘ç»„æˆï¼Œæè¿°äº†åº”ç”¨ç¨‹åºçš„å¤–è§‚ä»¥åŠç”¨æˆ·å¦‚ä½•ä½“éªŒå†…å®¹ã€‚</p><h2 id="5ac0" class="nl la it bd lb nm nn dn lf no np dp lj ma nq nr ll me ns nt ln mi nu nv lp nw bi translated">å¤è¯•</h2><p id="aae6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="https://dash.plot.ly/getting-started-part-2" rel="noopener ugc nofollow" target="_blank">å›è°ƒ</a>ä½¿Dashåº”ç”¨ç¨‹åºå…·æœ‰äº¤äº’æ€§ã€‚å›è°ƒæ˜¯Pythonå‡½æ•°ï¼Œæ¯å½“<em class="nx">è¾“å…¥</em>å±æ€§æ”¹å˜æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨è°ƒç”¨ã€‚</p><h1 id="2cae" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">æ„å»ºå¸ƒå±€</h1><p id="cffe" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">å¸ƒå±€è¶…çº§ç®€å•ï¼Œé‡‡å–æç®€çš„æ‰‹æ³•ã€‚ä½¿ç”¨ä¸€å¼ å¡ç‰‡æ¥æ”¾ç½®æœç´¢æ¡†ï¼Œè®©ç”¨æˆ·æŒ‰ä¸€ä¸ªæŒ‰é’®ï¼Œç„¶åè¿”å›ç»“æœã€‚è¿™ä¸ªä¾‹å­ä½¿ç”¨äº†<a class="ae ky" href="https://dash-bootstrap-components.opensource.faculty.ai/docs/quickstart/" rel="noopener ugc nofollow" target="_blank">å¼•å¯¼ç»„ä»¶</a>ã€‚</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="4a21" class="nl la it nz b gy od oe l of og">import dash<br/>from jupyter_dash import JupyterDash<br/>import dash_bootstrap_components as dbc<br/>import dash_html_components as html<br/>import dash_core_components as dcc<br/>from dash.dependencies import Input, Output</span><span id="2ae6" class="nl la it nz b gy oh oe l of og">external_stylesheets = [dbc.themes.BOOTSTRAP]</span><span id="51b7" class="nl la it nz b gy oh oe l of og">app = JupyterDash(__name__, external_stylesheets = external_stylesheets)</span><span id="14e1" class="nl la it nz b gy oh oe l of og"># Create server variable with Flask server object for use with gunicorn<br/>server = app.server</span></pre><p id="213b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">æ·»åŠ boiler-plateä»£ç ä»¥è¿è¡ŒDashåº”ç”¨ç¨‹åºåï¼Œåˆ›å»ºå°†ç”¨ä½œå¸ƒå±€çš„ç»„ä»¶æ ‘ã€‚æˆ‘ç§°ç¬¬ä¸€ä¸ªç»„ä»¶æ ‘ä¸ºsearch_cardã€‚</p><p id="784a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">search_cardä½¿ç”¨<strong class="lt iu">å¡</strong>å’Œ<strong class="lt iu">å¡ä½“</strong>æ¥åŒ…å«<strong class="lt iu">æ–‡æœ¬åŒº</strong>å’Œ<strong class="lt iu">æŒ‰é’®</strong>ç»„ä»¶ã€‚åœ¨æˆ‘çœ‹æ¥ï¼ŒæŠŠå®ƒä»¬æ”¾è¿›å¡ç‰‡é‡Œä¼šè®©å®ƒçœ‹èµ·æ¥æ›´å¥½ä¸€ç‚¹ã€‚</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="57a9" class="nl la it nz b gy od oe l of og">search_card = dbc.Card(<br/>    dbc.CardBody(<br/>        [<br/>            html.H5("Auto-Sommelier", className="card-title")<br/>            , dbc.Textarea(id = 'user-input', bs_size="lg"<br/>                     , placeholder="Describe Ideal Wine")<br/>             ,dbc.Button('search', id = 'search', color="danger")<br/>        ]<br/>    )<br/>)</span></pre><p id="a0f8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">ç¬¬äºŒä¸ªç»„ä»¶æ ‘å……å½“<strong class="lt iu"> <em class="nx"> search_card </em> </strong>å’ŒåŒ…å«è‘¡è„é…’ç»“æœçš„å¡ç‰‡çš„å®¹å™¨ã€‚è¯¥ç»„ä»¶æ ‘å°†è¢«è®¾ç½®ä¸º<strong class="lt iu"> app.layout </strong>ã€‚</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="7f42" class="nl la it nz b gy od oe l of og">app.layout = html.Div([html.H1("Find Your Wine!")<br/>                   , html.Br()<br/>                   , dbc.Row(dbc.Col(<strong class="nz iu">search_card</strong>,<br/>                        width={"size": 6, "offset": 3}))#end row<br/>                  , html.Br()<br/>                  , dbc.Card(dbc.CardBody(html.Div(id = 'results')))<br/>                  ])</span></pre><p id="2dcc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">æ³¨æ„<strong class="lt iu"> <em class="nx"> search_card </em> </strong>è¢«æ”¾åˆ°<strong class="lt iu">è¡Œ</strong>å’Œ<strong class="lt iu">åˆ—</strong>ç»„ä»¶ä¸­ï¼Œè¿™æ ·æ›´å®¹æ˜“å±…ä¸­ã€‚åœ¨ç¬¬äºŒæ£µæ ‘çš„æœ«å°¾ï¼Œå®ƒåŒ…å«å¦ä¸€ä¸ª<strong class="lt iu">å¡ç‰‡</strong>å’Œ<strong class="lt iu">å¡ç‰‡ä¸»ä½“</strong>ï¼Œå…¶ä¸­<strong class="lt iu"> </strong>åªåŒ…å«ä¸€ä¸ª<strong class="lt iu"> <em class="nx"> htmlã€‚Div </em> </strong>ä¸<strong class="lt iu"> <em class="nx"> id =ç»“æœ</em> </strong>ã€‚è¯¥åº”ç”¨ç¨‹åºå°†ä¾é å›è°ƒæ¥ç”¨æœç´¢ç»“æœå¡«å……CardBodyçš„Divç»„ä»¶ã€‚</p><p id="57bc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">å›è°ƒä¼šå°†ç»“æœè¾“å‡ºåˆ°ç»“æœ<strong class="lt iu"> Div </strong>ã€‚ä½œä¸ºè¾“å…¥ï¼Œå›è°ƒå°†æ¥å—ç”¨æˆ·çš„æŸ¥è¯¢å’ŒæŒ‰é’®ç‚¹å‡»ã€‚å¦‚æœéƒ½ä¸æ˜¯ï¼ŒæŸ¥è¯¢å°†è¢«ä¼ é€’ç»™<strong class="lt iu"> search_wine </strong>å‡½æ•°ï¼Œå¹¶ä»¥æ•°æ®å¸§çš„å½¢å¼è¿”å›ç»“æœã€‚</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="eb13" class="nl la it nz b gy od oe l of og"><a class="ae ky" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.callback(Output("results", "children")<br/>              , [Input("user-input", "value")<br/>                , Input("search", "n_clicks")<br/>                ])<br/>def return_wine(userquery, n):<br/>    <br/>    if userquery is not None and n is not None:<br/>        <br/>        dff = df.copy()<br/>        results = search_wine(dff, userquery)<br/>        table = dbc.Table.from_dataframe(results, striped=True, bordered=True, hover=True)<br/>    <br/>        return table</span></pre><p id="b5f0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">è¯·æ³¨æ„ï¼Œdataframeæ˜¯ä½¿ç”¨bootstrap <strong class="lt iu"> Table </strong>ç»„ä»¶è½¬æ¢æˆHTMLè¡¨æ ¼çš„ã€‚</p><p id="9c7b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">è¦è¿è¡ŒDashåº”ç”¨ç¨‹åºï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤:</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="b735" class="nl la it nz b gy od oe l of og">app.run_server()<br/>#Dash app running on <a class="ae ky" href="http://127.0.0.1:8050/" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8050/</a></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pr"><img src="../Images/b1a699d9570842dbe0582aadeda099fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kgy7YRiSv95ganBcmVxtzw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">è‡ªåŠ¨ä¾é…’å¸ˆ</p></figure><p id="bb23" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">æ­å–œä½ ï¼ä½ åˆšåˆšç”¨æ‹¥æŠ±è„¸å˜å½¢ã€ä½™å¼¦ç›¸ä¼¼åº¦å’Œç ´æŠ˜å·åˆ¶ä½œäº†ä½ è‡ªå·±çš„è‘¡è„é…’æœç´¢å¼•æ“ï¼</p></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><h1 id="886a" class="kz la it bd lb lc oq le lf lg or li lj jz os ka ll kc ot kd ln kf ou kg lp lq bi translated">æœ€åçš„æƒ³æ³•å’Œå®Œæ•´çš„ä»£ç </h1><p id="35aa" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">ä¸æˆ‘åœ¨2019å¹´åˆ›å»ºçš„åŸå§‹è‡ªåŠ¨ä¾é…’å¸ˆç›¸æ¯”ï¼Œè¿™ä¸ªç‰ˆæœ¬çš„å®ç°é€Ÿåº¦å¿«å¾—å¤šï¼Œä¹Ÿç®€å•å¾—å¤šã€‚é€šè¿‡åƒHuggingFaceè¿™æ ·çš„æ¡†æ¶åˆ©ç”¨æœ€å…ˆè¿›çš„è¯­è¨€æ¨¡å‹çš„èƒ½åŠ›ä¸ºåƒæˆ‘è¿™æ ·çš„æœºå™¨å­¦ä¹ çˆ±å¥½è€…æ‰“å¼€äº†å¤§é—¨ï¼Œè®©ä»–ä»¬åªç”¨å‡ è¡Œä»£ç å°±å¯ä»¥æ„å»ºä¸€äº›ä»¤äººæ•¬ç•çš„åº”ç”¨ç¨‹åºã€‚ç°åœ¨æ˜¯åšä¸€äº›åˆ†æçš„æ—¶å€™äº†ï¼Œçœ‹çœ‹ç»“æœä¸åŸæ¥çš„å·¥å…·ç›¸æ¯”æœ‰ä»€ä¹ˆæ”¹è¿›ï¼</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ps"><img src="../Images/64fa9e5052592544549b79add4b1122f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nMUYk_9E4ksjBV4u8f5ysQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">æ¯”è¾ƒåŒä¸€æŸ¥è¯¢çš„ç»“æœã€‚æ–°(é¡¶éƒ¨)</p></figure><p id="54c0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">æ„Ÿè°¢é˜…è¯»ï¼ä»¥ä¸‹æ˜¯å®Œæ•´çš„ä»£ç :</p><div class="mt mu gp gr mv mw"><a href="https://github.com/bendgame/MediumWineRecommend2" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">bend game/medium wineæ¨è2</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">æ›´æ–°äº†Wineæ¨èä½¿ç”¨ä¸­ç­‰å¼¯æ›²æ¸¸æˆçš„æ‹¥æŠ±è„¸å˜å½¢é‡‘åˆš/ä¸­ç­‰Wineæ¨è2</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">github.com</p></div></div><div class="nf l"><div class="pt l nh ni nj nf nk ks mw"/></div></div></a></div><h1 id="be12" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">è°¢è°¢å¤§å®¶ï¼</h1><ul class=""><li id="9f8b" class="ow ox it lt b lu lv lx ly ma pu me pv mi pw mm px pc pd pe bi translated"><em class="nx">å¦‚æœä½ å–œæ¬¢æˆ‘çš„ä½œå“ï¼Œ</em> <a class="ae ky" href="https://medium.com/@erickleppen" rel="noopener"> <em class="nx">å…³æ³¨æˆ‘ä¸­çš„</em> </a> <em class="nx">äº†è§£æ›´å¤šï¼</em></li><li id="d9b0" class="ow ox it lt b lu pf lx pg ma ph me pi mi pj mm px pc pd pe bi translated"><a class="ae ky" href="https://erickleppen.medium.com/membership" rel="noopener"> <em class="nx">é€šè¿‡è®¢é˜…</em> </a>è·å¾—å¯¹æˆ‘çš„å†…å®¹çš„å®Œå…¨è®¿é—®å’Œå¸®åŠ©æ”¯æŒï¼</li><li id="75c5" class="ow ox it lt b lu pf lx pg ma ph me pi mi pj mm px pc pd pe bi translated"><em class="nx">æˆ‘ä»¬æ¥è¿çº¿ä¸Š</em><a class="ae ky" href="https://www.linkedin.com/in/erickleppen01/" rel="noopener ugc nofollow" target="_blank"><em class="nx">LinkedIn</em></a></li><li id="8488" class="ow ox it lt b lu pf lx pg ma ph me pi mi pj mm px pc pd pe bi translated"><em class="nx">ç”¨Pythonåˆ†ææ•°æ®ï¼ŸæŸ¥çœ‹æˆ‘çš„</em> <a class="ae ky" href="https://pythondashboards.com/" rel="noopener ugc nofollow" target="_blank"> <em class="nx">ç½‘ç«™</em> </a>ï¼</li></ul><p id="0c04" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="http://pythondashboards.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> â€”åŸƒé‡Œå…‹Â·å…‹è±å½­</strong> </a></p><div class="mt mu gp gr mv mw"><a href="https://erickleppen.medium.com/the-ultimate-guide-to-erics-articles-d32df8241353" rel="noopener follow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">åŸƒé‡Œå…‹æ–‡ç« çš„ç»ˆææŒ‡å—</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">æˆ‘çš„æ‰€æœ‰å†…å®¹æŒ‰ä¸»é¢˜ç»„ç»‡â€¦</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">erickleppen.medium.com</p></div></div><div class="nf l"><div class="py l nh ni nj nf nk ks mw"/></div></div></a></div></div></div>    
</body>
</html>