<html>
<head>
<title>Generating Synthetic Time-Series Data with Random Walks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用随机游走生成合成时间序列数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/generating-synthetic-time-series-data-with-random-walks-8701bb9a56a8?source=collection_archive---------24-----------------------#2021-09-01">https://towardsdatascience.com/generating-synthetic-time-series-data-with-random-walks-8701bb9a56a8?source=collection_archive---------24-----------------------#2021-09-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1c0f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">快速创建定制的合成数据来测试您的预测模型</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b5b5ad472b3e4f7f58980c50c0ee4695.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bOT317beuXbO8aqO"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@podustricat?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Podu Stricat </a>拍摄的照片</p></figure><p id="d971" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated"><span class="l lw lx ly bm lz ma mb mc md di"> R </span>随机游走是随机过程(random)。它们由数学空间中的许多步骤组成。最常见的随机游走从值0开始，然后每一步以相等的概率加上或减去1。</p><p id="92fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随机行走可用于为不同的机器学习应用生成合成数据。例如，当没有信息可用或没有实时数据可用时，具有随机游走的合成数据可以近似实际数据。</p><p id="fc6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="me">本帖利用一维随机游走为时序算法生成数据。</em></p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="48dd" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">生成数据</h1><p id="afc4" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">创建和测试时间序列模型时，以随机数据作为基线来测试模型是有益的。随机游走可以模拟股票、产能利用率甚至粒子运动的趋势。</p><p id="28e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过调整每一步的概率，行为被添加到随机行走中。此外，这些走步被修改为具有不同的步长，以产生更大或更小的波动。</p><p id="ed00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas中的“日期范围”功能可以快速生成时间序列数据。以下是2019年每天用一个随机值生成数据框的示例。</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="7dcc" class="no mn it nk b gy np nq l nr ns">import pandas as pd<br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/>import random</span><span id="b3ae" class="no mn it nk b gy nt nq l nr ns">DATE_START = '2019-01-01'<br/>DATE_END = '2019-12-31'</span><span id="a289" class="no mn it nk b gy nt nq l nr ns">dates = pd.date_range(DATE_START, DATE_END)<br/>df = pd.DataFrame({<br/>    'date': dates,<br/>    'value': np.random.normal(0,1,dates.size)<br/>})<br/>df.set_index('date', inplace=True)<br/>plt.plot(df['value'])<br/>plt.ylabel('Value')<br/>plt.xlabel('Date')<br/>plt.title('Random Values')<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/2b38625484e8e50fab2c1ec88834a99f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*J3GqtBtKyUbKE-ZeCE56cw.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一段时间内的随机值(作者提供照片)</p></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="66fc" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">随机漫步</h1><p id="6369" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">虽然这里的数据可用于时间序列模型，但看不到任何模式。由于实际数据包含与先前点的紧急模式关系，合成数据需要改进。随机行走是生成一些逼真行为的可行解决方案。在pandas中创建随机行走需要遍历数据帧的每一行。行走中的每一步都依赖于前一步。</p><p id="3ee5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是生成随机漫步的代码。第一个“previous_value”作为遍历的起点。接下来，步长设置为1。最后，“阈值”将积极或消极行走的概率设定为50%。</p><p id="cb83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，随机游走受最小值和最大值的限制。对于许多数据集，如股票价值，这些值是严格正值。</p><p id="ff81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随机游走的图是用“matplotlib”生成的</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="e02e" class="no mn it nk b gy np nq l nr ns">def random_walk(<br/>    df, start_value=0, threshold=0.5, <br/>    step_size=1, min_value=-np.inf, max_value=np.inf<br/>):<br/>    previous_value = start_value<br/>    for index, row in df.iterrows():<br/>        if previous_value &lt; min_value:<br/>            previous_value = min_value<br/>        if previous_value &gt; max_value:<br/>            previous_value = max_value<br/>        probability = random.random()<br/>        if probability &gt;= threshold:<br/>            df.loc[index, 'value'] = previous_value + step_size<br/>        else:<br/>            df.loc[index, 'value'] = previous_value - step_size<br/>        previous_value = df.loc[index, 'value']<br/>    return df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/5fbb9d514016e2eb7f4452c568258bdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*utvFKWaJ5-7Uh6KIk3uoIQ.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">步长为1的随机漫步(作者提供图片)</p></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="eb0c" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">修改随机漫步</h1><p id="eb6e" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">这些随机游走被调整以显示期望的行为。例如，对随机游走的最小值和最大值添加限制可以模拟容量利用率。</p><p id="6c0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随机游走的行为通过改变其他初始条件而被进一步改变，例如，强加一个整体的正趋势。通过调整概率阈值来实现正向趋势。通过增加正向步进的概率，正向趋势被强加于随机行走。对于这个代码，它是通过降低阈值来实现积极的一步。</p><p id="0554" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以这种方式建立随机游走可以更接近股票趋势。如果总体趋势是积极的或消极的，可以将细节纳入综合数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/c63f279dcb36e39377748d91434aa1d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*93MvLgaDoo23lcntYOLsNQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">具有积极趋势和价值限制的随机游走(作者提供图片)</p></figure><p id="bd1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有几个选项可以进一步调整随机游走。例如，在每一步中包含高斯噪声或将步长增加到较大的值会导致不同的行走跨越较大的空间。但是，还有一些其他的调整会导致非常不同的行为。</p><ul class=""><li id="44eb" class="nx ny it lb b lc ld lf lg li nz lm oa lq ob lu oc od oe of bi translated">随着时间的推移增加波动性是通过在每步之后少量增加步长来实现的。因此，随着时间的推移，步长会慢慢变大。</li><li id="1fe2" class="nx ny it lb b lc og lf oh li oi lm oj lq ok lu oc od oe of bi translated">也可以通过修改步长来实现行走的平滑，但是也可以在正步长之后增加步长，在负步长之后减小一个小值。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/83bde16435fe70d7a2ffdb725ff2bfbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Y0EqO_fz-Rc3vmlpS70_A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">波动性越来越大、步伐越来越平稳的随机漫步(作者供图)</p></figure><h1 id="a5ef" class="mm mn it bd mo mp om mr ms mt on mv mw jz oo ka my kc op kd na kf oq kg nc nd bi translated">结论</h1><p id="0847" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">随机漫步是一个有趣的随机过程。在很少的起始条件下，产生了许多不同的模式。因此，随机漫步可以用作合成的时间序列数据，并针对您的特定问题实例进行调整。</p><p id="deeb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章展示了随机漫步的一些可能的调优选项。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><p id="79d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有兴趣阅读关于新颖的数据科学工具和理解机器学习算法的文章，可以考虑在Medium上关注我。</p><p id="4f22" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="me">如果你对我的写作感兴趣，想直接支持我，请通过以下链接订阅。这个链接确保我会收到你的会员费的一部分。</em></p><div class="or os gp gr ot ou"><a href="https://zjwarnes.medium.com/membership" rel="noopener follow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">通过我的推荐链接加入Medium-Zachary Warnes</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">阅读扎卡里·沃恩斯(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">zjwarnes.medium.com</p></div></div><div class="pd l"><div class="pe l pf pg ph pd pi ks ou"/></div></div></a></div></div></div>    
</body>
</html>