<html>
<head>
<title>A Labelling Tool to Easily Extract and Label Wikipedia Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个容易提取和标记维基百科数据的标签工具</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-labelling-tool-to-easily-extract-and-label-wikipedia-data-63f58e2e76ae?source=collection_archive---------20-----------------------#2021-11-25">https://towardsdatascience.com/a-labelling-tool-to-easily-extract-and-label-wikipedia-data-63f58e2e76ae?source=collection_archive---------20-----------------------#2021-11-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6a7d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用DataQA从维基百科建立一个训练数据集</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/89d05cb9f4b1c4623ec94591ec3642c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GHS5L0roLs2RjQv1"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae kv" href="https://unsplash.com/@hadijasaidi?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">哈迪贾·赛义迪</a>拍摄</p></figure><p id="0f98" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">免责声明:我是DataQA的开发者，data QA是一个免费的开源文本探索和标记工具。</em></p><p id="8067" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">任何数据科学家的一个非常典型的任务是必须通过找到与其相关的附加属性来“丰富”一些种子数据集。诸如此类的问题经常出现:</p><ul class=""><li id="864a" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">这份2000家公司名单的总部在哪里？</li><li id="dc49" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">这500种药物的主要副作用是什么？</li><li id="9f95" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">这400家公司推出的主要产品有哪些？</li><li id="7261" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">这份1000名人榜的主要朋友有哪些？</li></ul><p id="c4b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好吧…也许不是最后一个。</p><p id="4415" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">维基百科拥有近650万篇文章(还在增加)，是世界上最大的人类知识库之一，因此也是我们大多数人寻找答案的第一个地方。好消息是它是在线的，而且(大部分)可以免费使用，坏消息是它主要是由非结构化文档组成的，手动提取这些信息会花费不合理的时间。开源工具<a class="ae kv" href="https://github.com/dataqa/dataqa" rel="noopener ugc nofollow" target="_blank"> DataQA </a>最近刚刚推出了一项新功能，可以让你快速有效地从维基百科中提取信息。在本教程中，我们将带您完成基本步骤。</p><h1 id="801e" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">下载你的数据</h1><p id="3920" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">本教程的先决条件是拥有感兴趣的文章的维基百科URL(或子路径)列表。在本教程中，我们有一个几乎400家公司的列表，其中一些是私有的“独角兽”,另一些是公开上市的，我们希望提取这些公司推出的产品的所有名称。输入文件必须是csv文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/65caa24136b6857d964716c259faca23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jOJEusD2hCo0DYvy0Cy2Iw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">示例输入csv文件。</p></figure><p id="3f47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">步骤1:创建一个新项目，从维基百科中提取实体</strong></p><p id="576b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">启动DataQA并创建一个新项目。关于如何安装和启动DataQA的说明可以在<a class="ae kv" href="https://dataqa.ai/docs/latest/" rel="noopener ugc nofollow" target="_blank">官方文档网站</a>上找到。安装只是一个简单的pip安装命令。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/9f978f9057d7deb7bfdd098986c43ffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D7TFe1MuFZCBgwIrMTrhLQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">创建一个项目来从Wiki页面提取实体。</p></figure><p id="bd04" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">步骤2:加载包含页面URL的csv文件。</strong></p><p id="8101" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一步是加载文件。DataQA只在启动时连接互联网，一切都在本地运行，你的数据不会离开你的电脑。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/4ac358a5bf606ff80b5546959b8d589c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bYPCimV0BsBoIibvB9n6Aw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">上传输入文件。</p></figure><p id="828d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上传可能需要几分钟，具体取决于有多少行。一个包含400个网址的列表大约需要10分钟。DataQA从维基百科中提取段落和表格，并对所有内容运行NLP管道。DataQA中的每个文档都只是原始文章的一部分，大约是一个段落。标注较小的文本块要容易得多。</p><p id="80e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">步骤3:加载带有实体名称的csv文件。</p><p id="7ad2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一步是上传一个带有我们想要标记的实体名称的文件。在这个例子中，只有一个名为“products”的类型，所以我们的csv除了列名之外只有一行。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/6f1ce47f55b87417b57e64773e6b9726.png" data-original-src="https://miro.medium.com/v2/resize:fit:244/format:webp/1*TZMrVMYh6AmO_fsCW22aaw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们的实体名称。这个文件可以根据需要包含任意多的实体，但是对于这个项目，我们只有“产品”。</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/74448e2f1f153127db715c2a51beeca8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1fASUyxRrF_RBri68eVcTA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">上传带有实体名称的文件。</p></figure><p id="37d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完成这一步后，您将进入项目的汇总表，其中包含关于已处理文档总数的信息。</p><p id="addd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的例子中，尽管原始文件只有400个wikipedia urls，但最终上传的文本“块”总数略超过12，000。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/36de842f2372085a437ca810ccc624fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ycI7p0xWrH8lYP4lWGiPQQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">项目概述:从维基百科中提取了12，172个不同的章节/段落。</p></figure><h1 id="9d3a" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">开始标记你的文件</h1><p id="cde8" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">一旦数据被上传，你可以点击左边的“搜索”开始探索从维基百科中提取的数据。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/d0b2d22106f29bac814f62f7b2e4688e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ckSditJZC72ejadbUSLlXA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">查询“产品”的搜索结果示例</p></figure><p id="55c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">手动标记12，000份文档实际上并不是一项可行的任务。幸运的是，DataQA提供了一些方法来缩小最有可能包含所需信息的文档的范围。每个段落都以页面部分的名称开始，我们注意到在这些维基百科页面中发现一个名为“产品”的部分是非常常见的。您可以输入正则表达式来匹配特定的文档或实体，并自动提取实体。</p><ul class=""><li id="0e06" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">我们可以创建一个规则，提取正则表达式<strong class="ky ir"> <em class="ls">部分产品之后的实体。*?开发</em> </strong>，</li><li id="1898" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">并且还<strong class="ky ir"> <em class="ls">款产品。*?发布</em> </strong>。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/5a8644bb92f19d5c23f06d78f1b6320c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8tS8UPOlhDFsgj1NSkeKgw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">创建一个规则，自动标记正则表达式后面的任何实体。</p></figure><p id="33d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们还可以使用其他规则来缩小要标记的文档的范围:</p><ul class=""><li id="41ff" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">用名为“产品”的列标记任何表。</li><li id="b4bc" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">获取任何包含单词“develop”和包含大写字母的名词短语的句子的段落。</li><li id="39f4" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">获取包含单词“release”和包含大写字母的名词短语的句子的任何段落。</li></ul><p id="4076" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">添加这些简单的规则后，我们的汇总表如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/f8ce518af7c73506e40630c729bf5d7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i2F42a7IwQTL4Rz6gbMk2Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">这些规则从超过12，000个候选段落中确定了1176个可能包含产品名称的段落。</p></figure><p id="d3df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们准备给这些文档贴标签。单击与规则位于同一行的手形图标，将仅显示该规则选择的文档。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/d11b0c12f74816c01bf2b42e4ce4dbdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xmM-ex4AlwNfnrbvQkixGw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">标记包含带有名为“产品”的列的表格的文档。</p></figure><p id="0ed5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击上面的手形图标将带您进入包含Wiki表格的文档，这些表格有一个名为“产品”的列。使用DataQA，可以从表格和段落中提取实体。在许多情况下，这些表将包含特定的产品名称，这就是我们希望从这个项目中提取的内容。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/46b768b4e2157bc7f35206790cc7facf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Gkwapc2Gy1CCAE9M-23EA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">从Wiki表中提取实体的示例。</p></figure><p id="ea9d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">只有某些跨度是有效的实体。例如，不可能将单词的一部分标记为实体。第一次单击检查图标时，将验证跨度的有效性。如果高兴，第二次点击时，这些标签被确认并保存，显示下一个文档。</p><h1 id="a529" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">将结果导出为csv格式</h1><p id="3f8c" class="pw-post-body-paragraph kw kx iq ky b kz nh jr lb lc ni ju le lf nj lh li lj nk ll lm ln nl lp lq lr ij bi translated">一旦我们对收集的标签数量感到满意，我们就可以将标签导出为csv文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/cf918a07f6da87feb87db8b1ddc9c03e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*AyaIQN52wiM8GuvwlmMSrQ.png"/></div></div></figure><p id="6ef6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输出csv文件将包含以下字段:</p><ul class=""><li id="ca9d" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated"><em class="ls"> row_id </em>:段落的索引，</li><li id="e750" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated"><em class="ls">网址</em>:原维基百科网址</li><li id="5da9" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated"><em class="ls">正文</em>:文档、</li><li id="9e46" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated"><em class="ls"> is_table </em>:如果文档是Wiki表，则为True，</li><li id="b7bf" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated"><em class="ls">手动_标注</em>:手动标注跨度，</li><li id="87e3" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated"><em class="ls"> merged_label </em>:所有规则跨度，</li><li id="e472" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated"><em class="ls">【规则名称】</em>:单个规则跨度。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nx ny l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">读取带有标签的文件。</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/185ba8e11259988a3493590f43e041b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nbi3esUnQTsFcsQsDXya4w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">输出csv文件。</p></figure><p id="d5e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls"> manual_label </em>列包含所有已被手动标记的量程。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nx ny l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们现在有了一个公司名称与该公司推出的所有产品的映射。</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/ff16174a10dbf9daad7807bbbe671686.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uy81faqjo6L85rv0f2jPRg.png"/></div></div></figure><p id="f5ec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当段落是表格时，文本是该表格的csv格式版本，可以加载到pandas数据框架中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/27c7150ea9e0d2f1433f9280919aeffd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x70dj4iLwkL5GOvmS2KUhA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">将维基表读入熊猫数据帧。</p></figure><p id="5e93" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">暂时就这样吧！</p><p id="a4b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在以后的博客文章中，我们将看到这些标签如何被用来训练NER模型。</p><h1 id="706b" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">参考</h1><ul class=""><li id="635f" class="lt lu iq ky b kz nh lc ni lf oc lj od ln oe lr ly lz ma mb bi translated">Github库:<a class="ae kv" href="https://github.com/dataqa/dataqa" rel="noopener ugc nofollow" target="_blank">https://github.com/dataqa/dataqa</a></li><li id="52e4" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">官方文档页面:<a class="ae kv" href="https://dataqa.ai/docs/v1.1.1/" rel="noopener ugc nofollow" target="_blank">https://dataqa.ai/docs/latest</a></li></ul></div></div>    
</body>
</html>