<html>
<head>
<title>A Better Comparison of TensorBoard Experiments</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">张量板实验的更好比较</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-better-comparison-of-tensorboard-experiments-b6d6b42e5d9e?source=collection_archive---------34-----------------------#2021-05-12">https://towardsdatascience.com/a-better-comparison-of-tensorboard-experiments-b6d6b42e5d9e?source=collection_archive---------34-----------------------#2021-05-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="eaf3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">TensorBoard在对实验进行排名时只考虑最后一个历元。以下是如何更好地评估您的指标。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/238b6c9362e479e2e6ac91348890972e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0QArmYSOIg68wlwUvU4OsQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来自<a class="ae kv" href="https://pixabay.com/illustrations/trading-forex-system-laptop-4453011/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></p></figure><p id="c9dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你使用<a class="ae kv" href="http://tensorflow.org/" rel="noopener ugc nofollow" target="_blank"> TensorFlow </a>进行机器学习算法的开发和实验，你很可能会遇到<a class="ae kv" href="https://www.tensorflow.org/tensorboard/" rel="noopener ugc nofollow" target="_blank"> TensorBoard </a>并使用它来记录每次运行的结果，并有更好的方式来直观地比较它们。您甚至可以通过记录各种指标来比较您的结果，从而进行一些超参数调整。</p><p id="1539" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，在我写这篇文章的那天，<strong class="ky ir"> TensorBoard只能根据上一个时期获得的指标来比较结果。</strong>尽管每次运行都有所有历史值，但当按特定指标对结果进行排序时，它将只考虑最后一个时期进行比较。根据不同的用例，这可能导致在不同的超参数上运行的模型的<strong class="ky ir">不正确的排序</strong>。</p><p id="816c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本文的目的是<strong class="ky ir">介绍一种比较Tensorboard </strong>中记录的结果的更好方法，不仅包括超参数调整，还包括正常标量运行的比较。具体来说，我们将通过<strong class="ky ir"> <em class="ls"> Python TensorBoard库</em> </strong>访问这些指标，将它们转换成<a class="ae kv" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Pandas </a> DataFrame，并从那里根据指标的子选择对运行进行分组和比较。</p><h2 id="0ce6" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">上传实验到TensorBoard。偏差</h2><p id="4fcf" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">首先，我们将把我们的实验目录上传到<a class="ae kv" href="https://tensorboard.dev/" rel="noopener ugc nofollow" target="_blank"> TensorBoard.dev </a>。对于那些不熟悉这个工具的人来说，它允许我们上传并与任何人分享我们的ML实验，最棒的是:零设置。</p><p id="1b07" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您尚未安装，可以通过以下方式安装:</p><blockquote class="mr ms mt"><p id="a5f5" class="kw kx ls ky b kz la jr lb lc ld ju le mu lg lh li mv lk ll lm mw lo lp lq lr ij bi translated">pip安装-U型张量板</p></blockquote><p id="83e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，您需要运行下面的命令，指定您的logdir，并可选地指定您想要上传的实验的名称:</p><blockquote class="mr ms mt"><p id="2d07" class="kw kx ls ky b kz la jr lb lc ld ju le mu lg lh li mv lk ll lm mw lo lp lq lr ij bi translated">tensorboard dev上传—logdir REPLACE _ LOG _ DIR \<br/>—name“(可选)我的最新实验”</p></blockquote><p id="a29b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该命令第一次执行将提示一些身份验证阶段。完成后，你将能够有一个看起来像"https://tensorboard.dev/experiment/EXPERIMENT_ID"的链接。</p><h2 id="455f" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">将实验加载到熊猫数据框架中</h2><p id="efc3" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">下一步是将上传的实验加载到本地Pandas DataFrame中，这可以通过将实验id传递给TensorBoard API调用<a class="ae kv" href="https://www.tensorflow.org/tensorboard/dataframe_api" rel="noopener ugc nofollow" target="_blank"><em class="ls">tensor board . data . experimental . experimental from dev()</em></a>来完成，然后获取实验标量。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/d96733ff100b6362049c30141eda3abd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9NCMyv7MERzfzaK8-1ohxg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">装载冲浪板。开发一个熊猫数据框架的实验。图片作者。</p></figure><p id="e880" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了将数据帧转换成更有用的格式(宽格式)，我们可以用<em class="ls">get _ scalar调用get _ scalar(pivot = True)。</em>但是，如果我们没有对所有实验使用相同的指标，并且我们想比较它们，即使有些实验没有可用的指标，这也是行不通的。为此，我们必须通过运行以下命令来手动旋转表格:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/f0a6cc87682289c7883c3f45cdf7025f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ji_6sJ_C-DKrML5rhqgJrw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">将数据帧转换为<em class="mz">宽格式</em>格式。图片作者。</p></figure><h2 id="2fba" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">排名结果</h2><p id="d19a" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">一旦我们准备好数据帧并正确格式化，剩下唯一要做的事情就是对结果进行排序，不仅要考虑最后一次，还要考虑每次运行的所有时期。此外，如果使用多个指标来比较运行，并希望找到与这些指标相结合的最佳模型，我们将使用<a class="ae kv" href="https://en.wikipedia.org/wiki/Harmonic_mean" rel="noopener ugc nofollow" target="_blank">调和平均值</a>，因为它比简单平均值更适合比率。</p><p id="a66c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，我在下面创建了一个要点，所有这些功能都包含在一个方法中。要调用它，只需要两个参数，我们上传到TensorBoard的实验的id。Dev和用于比较结果的指标。还有一些可选参数，用于仅考虑验证运行，根据整体性能对值进行排序，或者格式化返回数据帧的指标百分比。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="6ff5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为一个例子，下面是我在<a class="ae kv" href="http://mmlab.ie.cuhk.edu.hk/projects/DeepFashion.html" rel="noopener ugc nofollow" target="_blank"> DeepFashion </a>数据集上进行的一些实验。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/13704124fefdb4e1d34a300176d3f0e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AF86J1hedDMkpuGDsjlAdQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">深度时尚实验示例。图片作者。</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/a4b9074002142b29870550150bc1c33a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*36IBdS4cWvvFIK7_7NI8PA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">执行先前代码的输出。图片作者。</p></figure><h2 id="aa13" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">最后的话</h2><p id="a58d" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">在本文中，我向您介绍了一种更准确的方法来评估您的TensorFlow实验，即使在查看多个指标时，也可以通过手动访问TensorBoard数据来实现。我希望你喜欢这篇文章，它对你有帮助！😄你也可以在以下网址查看我的最新作品:</p><ul class=""><li id="8f9c" class="ne nf iq ky b kz la lc ld lf ng lj nh ln ni lr nj nk nl nm bi translated"><a class="ae kv" href="https://github.com/angeligareta" rel="noopener ugc nofollow" target="_blank"> GitHub </a></li><li id="d2c5" class="ne nf iq ky b kz nn lc no lf np lj nq ln nr lr nj nk nl nm bi translated"><a class="ae kv" href="https://www.linkedin.com/in/angeligareta/" rel="noopener ugc nofollow" target="_blank">领英</a></li><li id="0ef2" class="ne nf iq ky b kz nn lc no lf np lj nq ln nr lr nj nk nl nm bi translated"><a class="ae kv" href="https://angeligareta.com/" rel="noopener ugc nofollow" target="_blank">个人网站</a></li></ul></div></div>    
</body>
</html>