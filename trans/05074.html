<html>
<head>
<title>A python equivalent for R markdown</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R markdown的python等价物</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-python-equivalent-for-r-markdown-d6fba36dc577?source=collection_archive---------25-----------------------#2021-05-04">https://towardsdatascience.com/a-python-equivalent-for-r-markdown-d6fba36dc577?source=collection_archive---------25-----------------------#2021-05-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a850" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">R markdown是分享见解的强大工具。在这篇文章中，我们将展示如何用python编写类似的报告。</h2></div><p id="1408" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">R markdown 是一个与利益相关者分享见解的强大工具。您可以编写生成图的R代码片段。然后可以将其编译成HTML或pdf文件，与非技术相关人员共享。</p><p id="0e59" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这在python中没有这么简单。是的，Jupyter笔记本是与其他开发人员共享分析的一种很好的方式。但是编译成HTML/pdf，去掉代码片段，对于非技术利益相关者来说已经很不错了，我发现使用Jupyter笔记本很笨拙。R markdown也有很棒的工具来生成<a class="ae lb" href="https://bookdown.org/yihui/rmarkdown-cookbook/kable.html" rel="noopener ugc nofollow" target="_blank">好看的表格</a>，而不仅仅是绘图。</p><p id="d588" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不过，我一直在和一个python重型团队一起工作，所以一直在试图弄清楚如何生成R markdown风格的文档。在这篇文章中，我将概述我用python生成的HTML报告，这些报告看起来很好，足以与非技术利益相关者分享。这个过程使用一些工具。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/4e532c467d3c494a033b74a9020488c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eTW89iRFpvZNzjtn"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">卢克·切瑟在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="f7e8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">步骤1:在HTML中嵌入绘图</h1><p id="f59a" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">第一步是将图嵌入到一个静态HTML中，然后可以与他人共享。一个很好的工具是<a class="ae lb" href="https://plotly.com/python/" rel="noopener ugc nofollow" target="_blank"> plotly </a>。Plotly有一个<code class="fe mp mq mr ms b"><a class="ae lb" href="https://plotly.com/python-api-reference/generated/plotly.io.to_html.html" rel="noopener ugc nofollow" target="_blank">to_html</a></code> <a class="ae lb" href="https://plotly.com/python-api-reference/generated/plotly.io.to_html.html" rel="noopener ugc nofollow" target="_blank">函数</a>(我的一个了不起的同事发现了这个)，它将把图形写成HTML字符串，然后你可以把它写到一个文件中。</p><p id="a82a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Plotly图形看起来像零件，它们允许用户将鼠标悬停在点上，以查看值是多少；我发现这很受顾客欢迎。</p><p id="60ab" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时用户需要可以复制粘贴的图形。在这种情况下，我推荐使用python更标准的绘图库，如<a class="ae lb" href="https://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank"> seaborn </a>或<a class="ae lb" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> matplotlib </a>。要将图像嵌入到HTML中，而不需要HTML引用的单独的图像文件，这就有点复杂了。但是您可以通过将图像编码为base64并直接写入您的HTML来实现。只需按照这个<a class="ae lb" href="https://stackoverflow.com/questions/48717794/matplotlib-embed-figures-in-auto-generated-html" rel="noopener ugc nofollow" target="_blank"> stackoverflow帖子</a>中的说明。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi mt"><img src="../Images/2407b4dfef3eee09985f13539e7983db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*f7zTToBLo7a7hSK6"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">照片由<a class="ae lb" href="https://unsplash.com/@pankajpatel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Pankaj Patel </a>在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="aa7b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">步骤2:设置HTML文档的布局</h1><p id="0065" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">太好了，现在你可以在html中嵌入图形了，实际上如果你关闭了plotly的<code class="fe mp mq mr ms b">to_html</code>函数中的<code class="fe mp mq mr ms b">full_html</code>选项，你就可以通过添加字符串来编写任意多的plotly图形到HTML文件中。</p><p id="df44" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是布局、评论和数据表呢？这就是我使用python的HTML模板库的地方——它允许您使用python从模板生成静态HTML文件。这种技术非常强大，用于python后端开发库，如<a class="ae lb" href="https://flask.palletsprojects.com/en/1.1.x/" rel="noopener ugc nofollow" target="_blank"> flask </a>和<a class="ae lb" href="https://www.djangoproject.com/" rel="noopener ugc nofollow" target="_blank"> django </a>。学习起来很快，但是需要一些HTML知识。</p><p id="2886" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我使用<a class="ae lb" href="https://jinja.palletsprojects.com/en/2.11.x/" rel="noopener ugc nofollow" target="_blank"> Jinja </a>库来生成我的HTML报告(这是python中最流行的HTML模板库之一)。</p><h1 id="ae8a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">第三步:让报告看起来漂亮</h1><p id="d68b" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">对于任何以前使用过HTML的人来说，你会知道做任何看起来像样的东西都需要很长时间。</p><p id="074e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我不想在这上面花太多时间，因为我想尽快生成报告。所以我用了<a class="ae lb" href="https://getbootstrap.com/" rel="noopener ugc nofollow" target="_blank"> bootstrap </a> CSS库。这个工具可以让你在很短的时间内让你的报告看起来很漂亮(我倾向于做的就是用<code class="fe mp mq mr ms b">&lt;div class="container"&gt;</code>把所有的东西都包起来，可能还会添加一些填充)。</p><p id="5a49" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Bootstrap基本上是一组预建的HTML类，可以用来格式化HTML。例如，让一个HTML表格在bootstrap中看起来漂亮，就像<code class="fe mp mq mr ms b">&lt;table class="table"&gt;</code>一样简单(在标准HTML中，表格看起来很难看)。您可以通过添加<code class="fe mp mq mr ms b">&lt;h1 class="pt-1"&gt;</code>在标题元素的顶部添加填充。</p><h1 id="b0c4" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">思想</h1><p id="1cdd" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">正如你所看到的，这是一个比R markdown更复杂的过程(如果有人有更好的方法，请联系我们！).但是学习这些工具很有用，尤其是Jinja和bootstrap，它们是web开发的标准工具。一旦你学会了这些库，并且准备好了一些预制的模板，这个过程会变得很快。</p></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><p id="209e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nb">原载于2021年5月4日</em><a class="ae lb" href="https://jackbakerds.com/posts/python-equivalent-rmarkdown/" rel="noopener ugc nofollow" target="_blank"><em class="nb">【https://jackbakerds.com】</em></a><em class="nb">。</em></p></div></div>    
</body>
</html>