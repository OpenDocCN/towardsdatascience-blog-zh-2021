<html>
<head>
<title>The Match-Case In Python 3.10 Is Not That Simple</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 3.10中的匹配情况没有那么简单</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-match-case-in-python-3-10-is-not-that-simple-f65b350bb025?source=collection_archive---------1-----------------------#2021-10-24">https://towardsdatascience.com/the-match-case-in-python-3-10-is-not-that-simple-f65b350bb025?source=collection_archive---------1-----------------------#2021-10-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/390dfcb72d3b5505d100de5132c3228f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XO7oFpT6rutHcu9dvipQPw.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片来自Pixabay</p></figure><div class=""/><div class=""><h2 id="cf2e" class="pw-subtitle-paragraph kf jh ji bd b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw dk translated">7个示例说明“匹配大小写”不是“切换大小写”</h2></div><p id="a574" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">在我的上一篇文章中，我已经介绍了Python 3.10中所有主要的新特性，它在两周前刚刚发布。最重要的特性之一是大小写匹配语法。</p><p id="0a0e" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">一些人仍然认为Python不需要“切换用例”语法。甚至Guido本人也不支持在Python中添加这种语法。但是，为什么还是在这个新版本中发布呢？在我看来，原因可以从名字中找到。它被称为“匹配大小写”,而不是像大多数编程语言那样的“切换大小写”。</p><p id="141b" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">在本文中，我将使用7个例子来展示新语法是多么灵活和“pythonic化”。希望它能帮助你更容易地理解它。</p><p id="543a" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">如果你对Python 3.10中的其他特性感兴趣，可以参考我之前的帖子。</p><div class="is it gp gr iu lt"><a rel="noopener follow" target="_blank" href="/python-3-10-five-new-features-and-considerations-f775c9432887"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd jj gy z fp ly fr fs lz fu fw jh bi translated">Python 3.10五项新功能和注意事项</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">不仅仅是列表，还有例子和注意事项。</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">towardsdatascience.com</p></div></div><div class="mc l"><div class="md l me mf mg mc mh ja lt"/></div></div></a></div><h1 id="f267" class="mi mj ji bd mk ml mm mn mo mp mq mr ms ko mt kp mu kr mv ks mw ku mx kv my mz bi translated">1.基础</h1><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/1189ec565bf4e22fb7e67569570c1922.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q_O2Ds1ahw7lK-v755kEsA.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由来自<a class="ae ne" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=276014" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae ne" href="https://pixabay.com/users/larisa-k-1107275/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=276014" rel="noopener ugc nofollow" target="_blank"> Larisa Koshkina </a>拍摄</p></figure><p id="72ec" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">在任何有趣的东西之前，让我们从这个新语法的基本用例开始。假设我们正在编写一些代码来将HTTP状态代码转换成错误消息，我们可以使用如下的大小写匹配语法。</p><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="b68b" class="nk mj ji ng b gy nl nm l nn no">def http_status(status):<br/>    match status:<br/>        case 400:<br/>            return "Bad request"<br/>        case 401:<br/>            return "Unauthorized"<br/>        case 403:<br/>            return "Forbidden"<br/>        case 404:<br/>            return "Not found"</span></pre><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi np"><img src="../Images/76fb543e0984dd1ed5b35940d85f8501.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W4Cad6hJctYDiaLB7RgdJw.png"/></div></div></figure><p id="e1d2" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">实际上，对于这个特殊的例子，匹配用例并没有比if-else语法带来任何好处，如下所示。</p><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="f470" class="nk mj ji ng b gy nl nm l nn no">def http_error(status):<br/>    if status == 400:<br/>        return "Bad request"<br/>    elif status == 401:<br/>        return "Unauthorized"<br/>    elif status == 403:<br/>        return "Forbidden"<br/>    elif status == 404:<br/>        return "Not found"<br/>    else:<br/>        return "Unknown status code"</span></pre><p id="4bd5" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">如果它只能做这样的事情，我想它不会被添加。让我们继续用更多的例子来看看它能有什么样的灵活性。</p><h1 id="2d3a" class="mi mj ji bd mk ml mm mn mo mp mq mr ms ko mt kp mu kr mv ks mw ku mx kv my mz bi translated">2.默认情况</h1><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nq"><img src="../Images/92ab9e9ae733028dfd35259e4c47510d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vk-bAljVuS_WScIdvLEM7A.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片来自<a class="ae ne" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=736886" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae ne" href="https://pixabay.com/users/bessi-909086/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=736886" rel="noopener ugc nofollow" target="_blank">贝西</a></p></figure><p id="6fcd" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">这意味着它类似于大多数其他语言中的switch-case语法，因此它必须具有“默认大小写”。当没有定义的案例可以匹配时，将执行“默认案例”中的代码。</p><p id="7abb" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">Python的风格达到了这个要求。它使用代表匿名变量的下划线“_”。基本原理是匿名变量可以“匹配”任何东西。</p><p id="b584" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">让我们看看下面的例子。</p><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="fca4" class="nk mj ji ng b gy nl nm l nn no">def http_status(status):<br/>    match status:<br/>        case 400:<br/>            return "Bad request"<br/>        case 401:<br/>            return "Unauthorized"<br/>        case 403:<br/>            return "Forbidden"<br/>        case 404:<br/>            return "Not found"<br/>        case _:<br/>            return "Other error"</span></pre><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nr"><img src="../Images/f5e7db5450c4820775a90620955a42ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JBdp8LoZLU4JQicdJnK9Dg.png"/></div></div></figure><p id="0276" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">在上面的代码中，我们添加了默认情况并显示“其他错误”。</p><h1 id="268f" class="mi mj ji bd mk ml mm mn mo mp mq mr ms ko mt kp mu kr mv ks mw ku mx kv my mz bi translated">3.合并案例</h1><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/afeac987252ea7dc1f14a6dfe513f617.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J5hbyhxCUePsQlT_GApv5Q.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片来自<a class="ae ne" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=6677883" rel="noopener ugc nofollow" target="_blank">皮克斯巴伊</a></p></figure><p id="4d7c" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">如果有时我们有多个应该合并的案例呢？换句话说，这些是不同的情况，但我们处理它们的方式应该是相同的。</p><p id="31bc" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">在Python中，我们可以使用管道“|”将这些案例组合成一个案例。它也被认为是一种“或”关系。</p><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="8c1f" class="nk mj ji ng b gy nl nm l nn no">def http_status(status):<br/>    match status:<br/>        case 400:<br/>            return "Bad request"<br/>        case 401 | 403:<br/>            return "Authentication error"<br/>        case 404:<br/>            return "Not found"<br/>        case _:<br/>            return "Other error"</span></pre><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ns"><img src="../Images/00a5d3c265104d7480c4219d1d6d5017.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m_eulENrYd4NlqI8CE5rCQ.png"/></div></div></figure><p id="dd1b" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">在上面的代码中，我们将401和403错误都视为身份验证问题，因此我们可以在匹配的情况下将它们合并。</p><h1 id="ee1a" class="mi mj ji bd mk ml mm mn mo mp mq mr ms ko mt kp mu kr mv ks mw ku mx kv my mz bi translated">4.列表中的通配符</h1><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nq"><img src="../Images/d22879730eb5986dc30dada096536bcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Juew0C5KNFMNxmmctNKRDQ.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片来自<a class="ae ne" href="https://pixabay.com/users/frankwinkler-64960/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=192979" rel="noopener ugc nofollow" target="_blank">弗兰克·温克勒</a>来自<a class="ae ne" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=192979" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></p></figure><p id="7f8b" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">更有趣的东西来了。假设我们正在使用大小写匹配语法编写一个警报逻辑。它接受一个列表作为参数。第一个元素是一天中的时间。让我们保持简单，所以我们有“早上”、“下午”和“晚上”。第二个元素是我们需要闹钟提醒我们做的动作。</p><p id="38f2" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">然而，我们可能希望闹钟提醒我们同时做多件事情。因此，我们希望在列表中传递多个动作，以便警报可以提醒我们逐一完成所有动作。</p><p id="d6bf" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">下面是实现这一要求的代码。</p><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="0839" class="nk mj ji ng b gy nl nm l nn no">def alarm(item):<br/>    match item:<br/>        case [time, action]:<br/>            print(f'Good {time}! It is time to {action}!')<br/>        case [time, *actions]:<br/>            print('Good morning!')<br/>            for action in actions:<br/>                print(f'It is time to {action}!')</span></pre><p id="0349" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">在这个例子中，我们只有两种情况。第一种情况不需要解释太多，因为它只是试图匹配单个动作的情况。在第二种情况下，我们在变量“actions”前面加了一个星号，这样它可以匹配列表中的一个或多个动作！</p><p id="edf8" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">让我们试一试。</p><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="a821" class="nk mj ji ng b gy nl nm l nn no">alarm(['afternoon', 'work'])<br/>alarm(('morning', 'have breakfast', 'brush teeth', 'work'))</span></pre><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nt"><img src="../Images/f17a4726dccde98e47de05d32940d32e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MtuYaVgj-gPUovV5JQNOWw.png"/></div></div></figure><h1 id="85ea" class="mi mj ji bd mk ml mm mn mo mp mq mr ms ko mt kp mu kr mv ks mw ku mx kv my mz bi translated">5.子模式</h1><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/ee7fb3a38ad35338d8ae6bca89603d91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n3Xgnio_mHPijegSxxvbew.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片来自<a class="ae ne" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=770264" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></p></figure><p id="245a" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">有时，我们可能希望模式中有模式。具体来说，我们希望匹配案例将流分类到一个特定的“案例”中。然而，在这个模式中，我们想要添加更多的限制。</p><p id="0daa" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">还记得我们已经定义了一天中的“时间”必须是“早晨”、“下午”或“晚上”吗？让我们将这个限制添加到匹配大小写代码中。如果“时间”与这三个中的一个不匹配，告诉用户时间无效。</p><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="7c63" class="nk mj ji ng b gy nl nm l nn no">def alarm(item):<br/>    match item:<br/>        case [('morning' | 'afternoon' | 'evening'), action]:<br/>            print(f'Good (?)! It is time to {action}!')<br/>        case _:<br/>            print('The time is invalid.')</span></pre><p id="6fa5" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">在上面的代码中，它显示了我们可以使用一对括号将我们想要匹配的“模式”括起来，并使用管道来分隔这些模式。</p><p id="71d1" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">如果它与给定的3个“时间”中的一个不匹配，将执行默认情况。</p><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nt"><img src="../Images/68a9ca9472b6c77e153aa20970c22110.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q_lN-FCW9IjAbBdyYRcsJg.png"/></div></div></figure><p id="064f" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">为什么那里有一个问号？我故意添加它，因为我想强调解决方案。通常，匹配其中一个子模式，然后引用它精确匹配的模式并不容易。但是，我们可以在Python中有这个“引用”。</p><p id="95be" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">让我们添加一个“as”关键字，后跟一个变量，这个变量将是引用。</p><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="71a7" class="nk mj ji ng b gy nl nm l nn no">def alarm(item):<br/>    match item:<br/>        case [('morning' | 'afternoon' | 'evening') as time, action]:<br/>            print(f'Good {time}! It is time to {action}!')<br/>        case _:<br/>            print('The time is invalid.')</span></pre><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nu"><img src="../Images/62cf8f35fdbe5d4bf4b615c34bdfbbbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rr40ysujtn0ypuqhTZ55SQ.png"/></div></div></figure><h1 id="6d70" class="mi mj ji bd mk ml mm mn mo mp mq mr ms ko mt kp mu kr mv ks mw ku mx kv my mz bi translated">6.条件模式</h1><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/133d7bd0ae9fdca89b335fcdb6e7f17b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g5xaSMWM-9cFmHrvAfoQ8Q.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由来自<a class="ae ne" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=585348" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae ne" href="https://pixabay.com/users/pixcarraldo-656298/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=585348" rel="noopener ugc nofollow" target="_blank"> Michael Mürling </a>拍摄</p></figure><p id="2906" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我们需要让这个闹钟更加“智能”。到了晚上，让我们显示一些消息来感谢用户完成了一天的工作。</p><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="9bc1" class="nk mj ji ng b gy nl nm l nn no">def alarm(item):<br/>    match item:<br/>        case ['evening', action]:<br/>            print(f'You almost finished the day! Now {action}!')<br/>        case [time, action]:<br/>            print(f'Good {time}! It is time to {action}!')<br/>        case _:<br/>            print('The time is invalid.')</span></pre><p id="0620" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">因此，我们在上面的代码中增加了一个case，只匹配“evening”。</p><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nv"><img src="../Images/d32dfe9188e993f8eb3c1064e93ae4b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hBiHN3HdKYv9RMJ7-y_VoA.png"/></div></div></figure><p id="e41c" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">嗯……第二个好像有点沮丧。让我们让这个闹钟更加智能，以鼓励用户“工作生活平衡”。因此，当用户想要在晚上工作或学习时，闹钟建议用户休息一下。(我希望:D能有这样的警报)</p><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="75ff" class="nk mj ji ng b gy nl nm l nn no">def alarm(item):<br/>    match item:<br/>        case ['evening', action] if action not in ['work', 'study']:<br/>            print(f'You almost finished the day! Now {action}!')<br/>        case ['evening', _]:<br/>            print('Come on, you deserve some rest!')<br/>        case [time, action]:<br/>            print(f'Good {time}! It is time to {action}!')<br/>        case _:<br/>            print('The time is invalid.')</span></pre><p id="8a86" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">为了实现这一点，我们在顶部添加了另一个案例。这是有条件的。也就是说，当动作是“工作”或“学习”时，显示一些不同的消息。</p><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nw"><img src="../Images/a181ca9b292cc6330ca8685b5d7b4cc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UUxrZ89sdyfHgbvpoG4nwQ.png"/></div></div></figure><h1 id="72fa" class="mi mj ji bd mk ml mm mn mo mp mq mr ms ko mt kp mu kr mv ks mw ku mx kv my mz bi translated">7.匹配对象</h1><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/8d2bb95621823626464a3a1d4ae762c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*__B5w1MKl7ypbp5C7K9Wzg.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片来自<a class="ae ne" href="https://pixabay.com/users/pasja1000-6355831/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3667632" rel="noopener ugc nofollow" target="_blank"> pasja1000 </a>来自<a class="ae ne" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3667632" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></p></figure><p id="45b4" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">到目前为止，我们已经探索了很多。我猜你可能会有这样的感觉，它是一个“匹配盒”而不是一个“开关盒”，因为“模式”永远是关键。</p><p id="be0d" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">让我们来看一个更复杂的例子——一个类实例。是的，让我们用大小写匹配一个对象。</p><p id="e150" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我就编一个简单的用例。创建了一个名为“Direction”的类，用于保存水平(东或西)和垂直(北或南)轴上的方向。</p><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="007d" class="nk mj ji ng b gy nl nm l nn no">class Direction:<br/>    def __init__(self, horizontal=None, vertical=None):<br/>        self.horizontal = horizontal<br/>        self.vertical = vertical</span></pre><p id="8e62" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">现在，我们想使用match-case语法来匹配这个类中的一个实例，并根据属性显示一条消息。</p><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="0322" class="nk mj ji ng b gy nl nm l nn no">def direction(loc):<br/>    match loc:<br/>        case Direction(horizontal='east', vertical='north'):<br/>            print('You towards northeast')<br/>        case Direction(horizontal='east', vertical='south'):<br/>            print('You towards southeast')<br/>        case Direction(horizontal='west', vertical='north'):<br/>            print('You towards northwest')<br/>        case Direction(horizontal='west', vertical='south'):<br/>            print('You towards southwest')<br/>        case Direction(horizontal=None):<br/>            print(f'You towards {loc.vertical}')<br/>        case Direction(vertical=None):<br/>            print(f'You towards {loc.horizontal}')<br/>        case _:<br/>            print('Invalid Direction')</span></pre><p id="77d5" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">然后，让我们从类中创建一些对象进行测试。</p><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="0cd3" class="nk mj ji ng b gy nl nm l nn no">d1 = Direction('east', 'south')<br/>d2 = Direction(vertical='north')<br/>d3 = Direction('centre', 'centre')</span></pre><p id="5dc0" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">结果表明，match-case可以根据这些对象的属性轻松地匹配它们！</p><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="fea5" class="nk mj ji ng b gy nl nm l nn no">direction(d1)<br/>direction(d2)<br/>direction(d3)</span></pre><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nx"><img src="../Images/d7a2928225acba5a871055faad4badbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QLq5EMsReZzM9z-ZIeOF1g.png"/></div></div></figure><h1 id="66d4" class="mi mj ji bd mk ml mm mn mo mp mq mr ms ko mt kp mu kr mv ks mw ku mx kv my mz bi translated">摘要</h1><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/9a557de9cc3daff3b1003e09907ea413.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bDoyvYZOBgJqWj6KlIRqSw.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由来自<a class="ae ne" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=6664622" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae ne" href="https://pixabay.com/users/makabera-6773476/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=6664622" rel="noopener ugc nofollow" target="_blank"> Markus Kammermann </a>提供</p></figure><p id="83dd" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">在本文中，我介绍了Python 3.10中引入的新语法“match-case”，以及它是多么灵活和强大。我相信钉住这个新语法将帮助我们在可读性方面写更好的代码。</p><div class="is it gp gr iu lt"><a href="https://medium.com/@qiuyujx/membership" rel="noopener follow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd jj gy z fp ly fr fs lz fu fw jh bi translated">通过我的推荐链接加入灵媒-陶</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">medium.com</p></div></div><div class="mc l"><div class="ny l me mf mg mc mh ja lt"/></div></div></a></div><p id="b753" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated"><strong class="kz jj">如果你觉得我的文章有帮助，请考虑加入灵媒会员来支持我和成千上万的其他作家！(点击上面的链接)</strong></p></div></div>    
</body>
</html>