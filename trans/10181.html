<html>
<head>
<title>Automated Interactive Reports with Plotly and Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Plotly和Python自动生成交互式报告</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/automated-interactive-reports-with-plotly-and-python-88dbe3aae5?source=collection_archive---------9-----------------------#2021-09-27">https://towardsdatascience.com/automated-interactive-reports-with-plotly-and-python-88dbe3aae5?source=collection_archive---------9-----------------------#2021-09-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cf63" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Python中的Plotly轻松生成交互式报告</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/eabf117ac2a4ee5654ccf9bf9bd72130.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*mJQUN0lBJKIYcvftCaIAXw.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Plotly中的交互式加密货币报告(Gif由作者提供)</p></figure><p id="2bd9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi lu translated">生成报告是一项单调乏味的任务。相反，使用Plotly在Python中开发并创建自动化的交互式报告。</p><p id="b5d1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本文将讨论为不同的加密货币创建自动化交互报告所需的步骤。然后，最终报告被合并成一个单独的HTML文件，该文件在没有外部服务器的情况下保持Plotly的交互功能。</p><blockquote class="md"><p id="6466" class="me mf it bd mg mh mi mj mk ml mm lt dk translated">生成报告的完整代码在本文中。请随意收藏这篇文章以备将来使用。</p></blockquote><p id="8310" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">生成报告的方法遵循ETL过程。</p><ul class=""><li id="f0ef" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated"><strong class="la iu">首先是</strong>，数据被提取出来，在这种情况下，不同加密货币的价格</li><li id="d2cf" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated"><strong class="la iu">接下来</strong>，信息被转换，生成有用的指标和互动的图形</li><li id="acd9" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated"><strong class="la iu">最后一个</strong>，数据被加载到一个包含所有报告的HTML文件中。</li></ul></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="964f" class="nn no it bd np nq nr ns nt nu nv nw nx jz ny ka nz kc oa kd ob kf oc kg od oe bi translated"><strong class="ak">提取数据和财务分析</strong></h1><p id="8317" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">该报告使用了几种不同加密货币的价格数据。数据是使用免费的Alpha Vantage API for python提取的。</p><p id="4e23" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用这个API，您可以提取不同的股票、货币和加密价格。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用Alpha Vantage提取财务数据(作者代码)</p></figure><h2 id="15ac" class="om no it bd np on oo dn nt op oq dp nx lh or os nz ll ot ou ob lp ov ow od ox bi translated"><strong class="ak">烛台图表</strong></h2><p id="f662" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">蜡烛图是市场数据的标准可视化工具。这些图显示了股票的开盘价、收盘价、最低价和最高价。</p><p id="bfc6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">由于市场中的价格不断变化，这些值代表了一天中每分钟的交易模式。</p><h2 id="7638" class="om no it bd np on oo dn nt op oq dp nx lh or os nz ll ot ou ob lp ov ow od ox bi translated"><strong class="ak">布林线</strong></h2><p id="e2a7" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">理解股票的波动性是理解风险的关键。布林线代表市场的波动。</p><p id="792d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用移动平均线和滚动标准差计算波段。上带是用移动平均线加两个标准差确定的，下带是负两个标准差。</p><p id="150a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当市场波动越大，波段之间的差距越大。当波动性较小时，差距缩小。这些波段也有助于理解股票的价格范围。</p><h2 id="62dc" class="om no it bd np on oo dn nt op oq dp nx lh or os nz ll ot ou ob lp ov ow od ox bi translated"><strong class="ak">相对强度指数</strong></h2><p id="6d74" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">RSI是一个动量指标。该值的范围在0到100之间。因此，该指数表明股票是超买还是超卖。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/0da0ac52de961a5d9cf3cfcbafa311a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/1*463hE1LulnN9zN-lRddb1w.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">指数移动平均线的相对强度指数(作者提供图片)</p></figure><p id="d585" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">惯例是RSI在70以上时超买，30以下超卖。</p><p id="f63f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">RSI也可以揭示市场趋势。比如RSI在50以上时，有上升趋势，RSI在50以下时有下降趋势。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">计算熊猫的RSI(作者代码)</p></figure></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="35c0" class="nn no it bd np nq nr ns nt nu nv nw nx jz ny ka nz kc oa kd ob kf oc kg od oe bi translated"><strong class="ak">编写报告</strong></h1><p id="e061" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">我结合了Plotly的几种绘图类型，展示了开发报告的一些可用功能。这些图是使用python创建的。然而，从许多其他编程语言，包括R或Julia，都有扩展。</p><p id="c21b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些报告旨在显示信息、一些指标和市场数据变化的高级表格摘要。</p><h2 id="8868" class="om no it bd np on oo dn nt op oq dp nx lh or os nz ll ot ou ob lp ov ow od ox bi translated"><strong class="ak">数据表</strong></h2><p id="41be" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">尽管图表能够有效地表现数据的行为，但仍然需要汇总。数据表非常适合于具体的数据快照。</p><p id="1a42" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在Plotly中，数据表是一个内置函数，可以与其他绘图无缝集成。Plotly中的交互功能有限，但默认情况下，您可以重新排列数据表中的列。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">汇总财务数据(按作者编码)</p></figure><h2 id="8ada" class="om no it bd np on oo dn nt op oq dp nx lh or os nz ll ot ou ob lp ov ow od ox bi translated"><strong class="ak">填充区域系列</strong></h2><p id="84a3" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">构建布林线时，混乱的图表成为一个问题。数字太多会对图表的整体信息不利。</p><p id="17b4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里我使用了Plotly的填充区域功能。虽然每个时间序列都有一个填充选项，但要正确设置并不容易。</p><p id="8a5b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">标准填充选项“至零”和“至下一层”会导致不规则的行为。所以取而代之的是使用单个散点图，它的长度是整个图表的两倍。</p><p id="00b6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">实际上，高频带和低频带作为列表附加在一起，形成两倍长的序列。接下来，使用填充选项“toself”。以这种方式设置系列可确保Plotly正确地仅填充带之间的空间。</p><h2 id="c55f" class="om no it bd np on oo dn nt op oq dp nx lh or os nz ll ot ou ob lp ov ow od ox bi translated"><strong class="ak">恒纹</strong></h2><p id="089b" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">RSI是衡量市场趋势的常用指标。当这个指标超过一个阈值时，你就可以判断股票是超买还是超卖。</p><p id="a4fc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，在图表上用一条明显的线来表示这些阈值是有帮助的。这一细节是通过附加散点图和改变标记类型来实现的，以表明这些线不是主要系列。</p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="8ca6" class="nn no it bd np nq nr ns nt nu nv nw nx jz ny ka nz kc oa kd ob kf oc kg od oe bi translated"><strong class="ak">合并成一份报告</strong></h1><p id="807f" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">需要合并这些图表，以便将每个图合并成一个完整的报告。在Plotly中，函数“make_subplots”就是为这个目的而设计的。</p><p id="29a0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，在组合图时，您可以指定在所有报告之间共享x轴。该属性非常适合时间序列图，因为当您与图形交互时，每个序列都会对齐。</p><h2 id="4ff9" class="om no it bd np on oo dn nt op oq dp nx lh or os nz ll ot ou ob lp ov ow od ox bi translated"><strong class="ak">创建HTML报告</strong></h2><p id="a918" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">设计完完整的报告后，可以将其保存为HTML文件。虽然这不如PDF常见(尽管保存为PDF仍然是可能的)，但HTML文件包括Plotly的交互性，而不需要外部托管。</p><p id="6093" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">每个图形都可以单独保存为HTML文件。然后，像python中的任何其他文件一样，您可以重复地添加到HTML文件中，从而创建更广泛的报告。</p><p id="6a14" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您还可以向文件中添加任何想要的HTML元素，并进一步更新Plotly图表元素。对于那些精通web开发的人来说，这提供了更大的灵活性。</p><h2 id="da59" class="om no it bd np on oo dn nt op oq dp nx lh or os nz ll ot ou ob lp ov ow od ox bi translated"><strong class="ak">综合所有</strong></h2><p id="0f68" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">整个过程被组合成一个基本的ETL过程。考虑为那些需要定期报告的用户设置一个事件触发器，以便使用脚本定期运行报告。</p><p id="f077" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，报告生成过程如下:</p><ul class=""><li id="4d14" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated"><strong class="la iu">使用API提取</strong>数据(这里是Alpha Vantage)</li><li id="9603" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated"><strong class="la iu">将数据转换成汇总表、财务指标和图表。</strong></li><li id="f04a" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">将数据加载到一个HTML文件中，发送给相关的利益相关者。</li></ul><p id="ff0f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">该报告还利用了<strong class="la iu"> Plotly-Dark </strong>模板。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">自动化财务报告(作者代码)</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oz ol l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">单一报告示例(按作者分类)</p></figure></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="a470" class="nn no it bd np nq nr ns nt nu nv nw nx jz ny ka nz kc oa kd ob kf oc kg od oe bi translated">结论</h1><p id="7625" class="pw-post-body-paragraph ky kz it la b lb of ju ld le og jx lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">生成报告是一项相当简单的任务。然而，尽管提供了大量的信息，当信息不被理解时，报告就失去了价值。</p><p id="cd62" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我展示了如何使用Plotly和python创建不同加密货币的财务报告。该过程遵循基本的ETL方法，并且可以完全自动化。</p><p id="5486" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在您的报告中添加动态交互可以使审阅信息对您的受众更有吸引力。使用Plotly，您可以生成人们想要监控、阅读和探索数据的报告。</p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><p id="44b4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="pa">如果你有兴趣阅读关于新颖的数据科学工具和理解机器学习算法的文章，可以考虑在medium上关注我。</em></p><p id="4f22" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你对我的写作感兴趣，并想直接支持我，请通过以下链接订阅。这个链接确保我会收到你的会员费的一部分。</p><div class="pb pc gp gr pd pe"><a href="https://zjwarnes.medium.com/membership" rel="noopener follow" target="_blank"><div class="pf ab fo"><div class="pg ab ph cl cj pi"><h2 class="bd iu gy z fp pj fr fs pk fu fw is bi translated">通过我的推荐链接加入Medium-Zachary Warnes</h2><div class="pl l"><h3 class="bd b gy z fp pj fr fs pk fu fw dk translated">阅读扎卡里·沃恩斯(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="pm l"><p class="bd b dl z fp pj fr fs pk fu fw dk translated">zjwarnes.medium.com</p></div></div><div class="pn l"><div class="po l pp pq pr pn ps ks pe"/></div></div></a></div></div></div>    
</body>
</html>