<html>
<head>
<title>How SQL beginners use BigQuery to understand global pandemic</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SQL初学者如何使用BigQuery了解全局疫情</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-sql-beginners-use-bigquery-to-understand-global-pandemic-9f11c0332bc0?source=collection_archive---------14-----------------------#2021-07-10">https://towardsdatascience.com/how-sql-beginners-use-bigquery-to-understand-global-pandemic-9f11c0332bc0?source=collection_archive---------14-----------------------#2021-07-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5b1e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">无需预装，使用浏览器分析新冠肺炎公共数据集</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/aa35a93b263eefb4f2ff708fc4cd2b0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T655843UaJKGDg4MMB0p6w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">沃洛季米尔·赫里先科在<a class="ae ky" href="https://unsplash.com/photos/7JAyy7jLTAk" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="d7a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论你是准备数据分析师面试，学习SQL，还是仅仅对通过数据分析解决业务挑战感兴趣。面临这样的挑战是很常见的:我了解数据库是如何工作的，但不知道去哪里找项目？试题库很多，但都不是业务问题，知识和实践经验有差距。</p><p id="fdfc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将带您了解如何使用公共数据集来体验数据分析之旅。以BigQuery中的新冠肺炎公共数据集为例。</p><p id="1969" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一年多来，许多国家都在不同阶段谈论新冠肺炎。一些国家已经解除了戴口罩的禁令，但其他国家仍处于封锁状态。这个数据集帮助我们回答这样的问题:A国的回收率是多少？或者哪些国家和这个疫情打交道最好？</p><ul class=""><li id="fd36" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">挑战</li><li id="6044" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">解决办法</li><li id="5a49" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">步伐</li><li id="19d8" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">思想</li><li id="94ac" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">限制</li><li id="9eb3" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">结论</li></ul><h1 id="989d" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">挑战</h1><p id="93da" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">这些是我们学习SQL时面临的挑战</p><ul class=""><li id="b0e9" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">计算不同语法的练习是什么</li><li id="09b2" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">缺少场景</li><li id="a788" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">缺乏实践</li><li id="ed4f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">缺乏数据</li><li id="bc85" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">缺乏端到端的体验</li><li id="23e1" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">缺失数据</li><li id="5cd6" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">缺乏商业意识和对指标的理解，如保留率或转换率</li></ul><h1 id="87d3" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">解决办法</h1><p id="4518" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">谈到SQL、商业智能和ETL，有许多选择。在本文中，我将使用BigQuery。</p><h1 id="949c" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">什么是BigQuery，我为什么选择它？</h1><p id="cf38" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">BigQuery是谷歌云平台上一个流行的数据分析解决方案。它无需服务器，高度可扩展。最重要的是，它有许多公共数据集可以使用。</p><h1 id="4ed1" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">关于数据集</h1><p id="1038" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated"><a class="ae ky" href="https://console.cloud.google.com/marketplace/product/bigquery-public-datasets/covid19-open-data?authuser=1&amp;project=united-course-317009&amp;folder=&amp;organizationId=" rel="noopener ugc nofollow" target="_blank">数据集</a>的来源来自不同的组织，包括纽约时报、欧洲疾病预防和控制中心、谷歌、世界银行的全球健康数据、OpenStreetMap等。在2021年9月之前，它可以免费用于教育或研究目的。</p><p id="1e4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据大小为6.9GB，并且还在不断增长。超过1.2亿行700多列的数据。它包含确诊病例数、死亡、性别、年龄和恢复等数据。</p><h1 id="3eaa" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">步伐</h1><h1 id="e4e4" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">步骤1:将数据加载到BigQuery</h1><p id="8cfb" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">准备一个GCP账户或在Qwiklab上开始免费试用，然后使用这个数据集。</p><p id="288f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你看到下面的截图时，你已经准备好了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/00dd3e3a1768a37548fa093a7c562062.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3MMntw2df0VFyT9zSIm6Lg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">BigQuery Web界面(按作者)</p></figure><h1 id="28ac" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">步骤2:数据清理</h1><p id="3e74" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">我推荐保持的一个好习惯是在任何分析之前总是检查重复。您可以通过运行下面的查询来实现它。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="7e20" class="nm mk it ni b gy nn no l np nq">SELECT COUNT(*) AS num_duplicate_rows, <br/>FROM `the_table_you_want_to_check` <br/>GROUP BY column1,column2,column3<br/>HAVING num_duplicate_rows &gt; 1;</span></pre><h1 id="f24d" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">步骤3:练习您的SQL技能</h1><p id="02d0" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">是时候练习您的SQL技能了。</p><p id="d6b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个例子，找出2020年5月10日哪个国家的回收率最好。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="b4c5" class="nm mk it ni b gy nn no l np nq">WITH cases_by_country AS (  <br/>SELECT    <br/>country_name AS country,    <br/>sum(cumulative_confirmed) AS cases,   <br/>sum(cumulative_recovered) AS recovered_cases  <br/>FROM    bigquery-public-data.covid19_open_data.covid19_open_data  WHERE    <br/>date = '2020-05-10'  <br/>GROUP BY    <br/>country_name ), recovered_rate AS <br/>(SELECT  country, cases, recovered_cases,  (recovered_cases * 100)/cases AS recovery_rate<br/>FROM cases_by_country)SELECT <br/>country, <br/>cases AS confirmed_cases, <br/>recovered_cases, <br/>recovery_rate<br/>FROM <br/>recovered_rate<br/>WHERE cases &gt; 50000<br/>ORDER BY recovery_rate desc<br/>LIMIT 10</span></pre><p id="5785" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查询结果显示答案是法国。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/dc24bafa003b0a9ef0aa57e4f9c2f7b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QqoCAdvOavNfTc06-EVVuA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">BigQuery Web界面(按作者)</p></figure><h1 id="7be0" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">第四步:视觉化</h1><p id="7efe" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">最后，不要忘记将它形象化，因为这有助于我们更好地与观众沟通。点击“探索数据”并链接到谷歌的报告解决方案Data Studio，从不同角度展示结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/6c084c471523600199d13122c9c4db72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*185sIE26O_cUeL2d6tXXkw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Data Studio界面(由作者提供)</p></figure></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="8e2a" class="mj mk it bd ml mm oa mo mp mq ob ms mt jz oc ka mv kc od kd mx kf oe kg mz na bi translated">思想</h1><h1 id="c666" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">使用高质量的数据，这样您就可以专注于最重要的事情:数据分析</h1><p id="754c" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">就食物的质量而言，配料就是一切。数据分析可以是类似的，因为分析师不再需要担心数据的完整性或一致性。由于您可能没有高质量的数据，开放数据集将是一个不错的选择。</p><p id="4b30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">值得注意的是，云计算的一个优势是数据集保存在数据湖中。需要时，我们打开水龙头，数据流入BigQuery等服务。没有必要等待传输中的数据。</p><h1 id="5483" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak">一路发展你的商业理解</strong></h1><p id="5b97" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">预测销售预测时的关键特征是什么？评估政策影响的关键指标是什么？即使解决了数百个SQL挑战，这些问题仍然没有答案。这就是为什么使用上下文(如场景和用例)进行练习是必不可少的，因为它可以帮助我们将查询与现实世界的问题联系起来。</p><h1 id="ee92" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak">头脑风暴展示你掌握一项技能的另一种方法</strong></h1><p id="a24c" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">用一种方法来应对挑战是很好的，但是想出另一种方法怎么样？</p><p id="2afd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我和一个在数学方面很有天赋的朋友聊天。他在大学入学考试中名列前茅。一开始我以为他只是练了很多题。令人惊讶的是，他并没有大量练习题型。相反，他会考虑第二种甚至第三种方法来解决同样的问题。这个提示在我学习新东西的时候启发了我。也许我们不应该试图解决过去考试中的那么多问题。相反，思考一种新的方法来解决同样的问题！</p><h1 id="7f52" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">限制</h1><h1 id="6279" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">活动跟踪有时不起作用。</h1><p id="435b" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">如果你正在使用GCP提供的Quest进行练习，它会在你完成实验的各个部分时使用活动跟踪来监控你的工作。有时，它只计算特定的列或值。例如，我在一个查询中使用了country_code来计算确诊病例数，但没有得到要点。最后，我发现我应该用country_name来代替。想法是一样的，但是我们需要适应这个机制。</p><h1 id="a936" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">数据的详细程度因国家而异</h1><p id="ef7b" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">美国数据的粒度是最好的。例如，您可以按每个州检查案例。但是在其他国家找不到相同级别的粒度。</p><h1 id="371c" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">这个项目不是为面试准备而设计的</h1><p id="9166" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">如果你正在寻找面试准备材料，Leetcode或Hackerrank将是更好的选择，因为这些平台可以专注于某项具体技能的提高。</p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><p id="9e2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我对分析数据以找到解决方案很感兴趣，并且一直在寻找高质量的数据集来探索。我发现BigQuery提供的公共数据集很有帮助。我会推荐使用平台体验整个过程，从数据到结论。无论您是在寻找一个项目来练习您的SQL技能，好奇云计算是如何工作的，还是仅仅对解决问题感兴趣，这都是一个很好的起点。</p><p id="f17c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">免责声明:</strong>这是用BigQuery 完成<a class="ae ky" href="https://www.qwiklabs.com/quests/123?locale=zh_TW" rel="noopener ugc nofollow" target="_blank">对数据的洞察后的一篇综述。如果你需要更多的细节，请随时参考</a><a class="ae ky" href="https://github.com/wanchunghuang/Insights-from-Data-with-BigQuery-Challenge-Lab" rel="noopener ugc nofollow" target="_blank">我的问题</a>。</p><h1 id="e4d7" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">保持联系</h1><ul class=""><li id="6651" class="lv lw it lb b lc nb lf nc li of lm og lq oh lu ma mb mc md bi translated">在<a class="ae ky" href="https://medium.com/@wanchunghuang" rel="noopener"> Medium </a>上关注我，了解更多类似的故事</li><li id="ab96" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">在<a class="ae ky" href="https://www.linkedin.com/in/wanchung-huang/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上连接</li></ul></div></div>    
</body>
</html>