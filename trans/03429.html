<html>
<head>
<title>Announcing Theming for Streamlit Apps! 🎨</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">宣布Streamlit应用的主题化！🎨</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/announcing-theming-for-streamlit-apps-834ff831ac17?source=collection_archive---------31-----------------------#2021-03-18">https://towardsdatascience.com/announcing-theming-for-streamlit-apps-834ff831ac17?source=collection_archive---------31-----------------------#2021-03-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="088b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">尝试新的黑暗模式和自定义主题功能</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c2b1f0b04b4e8d9d901dcd543d3c0de9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*DFs9BwOpwxoz9AnFg7-P9Q.gif"/></div></div></figure><p id="0ec9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们喜欢认为Streamlit应用程序开箱后就很漂亮(希望你也是！)，但直到今天，改变外观和感觉来反映你的个人风格或公司的视觉品牌还不容易。Streamlit Theming现在允许您轻松地更改应用程序中的配色方案和字体，而无需接触任何HTML或CSS。</p><p id="29e5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，为了便于访问和用户友好，我们还让应用程序查看者能够在亮暗主题之间切换。</p><p id="b909" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://share.streamlit.io/streamlit/theming-showcase-blue/main" rel="noopener ugc nofollow" target="_blank">如果你想直接进入，看看这个示例应用</a>！</p><h1 id="6ee9" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">引入黑暗模式！</h1><p id="df8e" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">在我们进入自定义主题之前，我们先来谈谈黑暗模式。</p><p id="d76a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">根据大众需求，我们现在为应用程序查看者提供定制他们想要如何体验您的应用程序的能力。这对于在黑暗环境中使用应用程序的人，或者具有辅助功能需求、希望覆盖应用程序自定义主题的人非常有用。</p><p id="4fd5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要在各种主题之间切换，请进入右上角的菜单并选择设置。你会看到一个重新设计的设置对话框，让应用程序用户在不同的主题选项之间进行选择:</p><ul class=""><li id="7a1e" class="ml mm iq kt b ku kv kx ky la mn le mo li mp lm mq mr ms mt bi translated"><strong class="kt ir">灯光模式</strong>:这是你已经知道并喜爱的Streamlit主题</li><li id="20ee" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">黑暗模式:这是Streamlit新的黑暗主题。你也会喜欢这个的！</li><li id="8c02" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated"><strong class="kt ir">使用系统设置</strong> : Streamlit会自动拾取你的操作系统主题(亮或暗)，并随你的OS改变颜色(注意:可能不适用于某些浏览器和Linux发行版)。</li><li id="2640" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated"><strong class="kt ir">自定义主题</strong>(仅在app作者提供时可见):使用app作者提供的主题。如果提供，这是默认设置。否则，“使用系统设置”是默认设置。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/479014aa5517cb758c7f4a5c1f68d856.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*V5vUCI9qF6JxEY05.png"/></div></div></figure><h1 id="50fd" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">创建自定义主题</h1><p id="0c1a" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">主题通过<a class="ae ln" href="https://docs.streamlit.io/en/stable/streamlit_configuration.html#set-configuration-options" rel="noopener ugc nofollow" target="_blank"> Streamlit的配置系统</a>设置。你可以直接在那里设置主题，或者你可以使用我们新奇的主题编辑器界面来构建一个主题，然后把它复制到你的配置中。</p><h1 id="04e1" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">使用主题编辑器创建主题</h1><p id="9c95" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">应用程序开发人员只需进入菜单→设置→编辑活动主题，即可创建自定义主题。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fde6f40d6fc3d2f463b724e46d71145e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sfNP-fpxYJQaSJhg.gif"/></div></div></figure><p id="b247" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">注</strong>:主题编辑器菜单仅在<code class="fe na nb nc nd b">local</code>开发中可用。如果您已经使用Streamlit共享部署了您的应用,“编辑活动主题”按钮将不再显示在“设置”菜单中。</p><h1 id="f53c" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">直接使用<code class="fe na nb nc nd b">config.toml</code>创建主题</h1><p id="4d73" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">自定义主题也可以在配置文件中定义:<code class="fe na nb nc nd b">./.streamlit/config.toml</code></p><p id="00ae" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在<code class="fe na nb nc nd b">[theme]</code>部分，可以定义颜色变量来创建自定义主题</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="1288" class="ni lp iq nd b gy nj nk l nl nm">[theme]<br/><br/># Primary accent for interactive elements<br/>primaryColor = '#7792E3'<br/><br/># Background color for the main content area<br/>backgroundColor = '#273346'<br/><br/># Background color for sidebar and most interactive widgets<br/>secondaryBackgroundColor = '#B9F1C0'<br/><br/># Color used for almost all text<br/>textColor = '#FFFFFF'<br/><br/># Font family for all text in the app, except code blocks<br/># Accepted values (serif | sans serif | monospace) <br/># Default: "sans serif"<br/>font = "sans serif"</span></pre><p id="15cc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">(<strong class="kt ir">注</strong>:一次只能设置一个自定义主题)</p><h1 id="3c0e" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">来自配置文件的实时更新</h1><p id="2353" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">您知道当您更改其源代码时，您的Streamlit应用程序是如何实时更新的吗？我们现在也这样做，当你更新应用的配置文件！这样，直接在配置文件中编辑主题将使你的应用程序立即显示新的主题。</p><h1 id="1381" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">每种颜色设置的作用</h1><p id="170d" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">Streamlit的主题系统遵循一种将颜色和字体应用于应用程序的全球方法。颜色样式有语义名称和一种简单的颜色规范方法。</p><ul class=""><li id="46ce" class="ml mm iq kt b ku kv kx ky la mn le mo li mp lm mq mr ms mt bi translated"><strong class="kt ir">原色</strong>:交互元素的强调色，如<code class="fe na nb nc nd b">st.radio</code>，按钮边框等。默认情况下，这是粉红色的。</li><li id="f87d" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated"><strong class="kt ir">背景颜色</strong>:这是你的应用程序主体的背景颜色。</li><li id="cb9b" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated"><strong class="kt ir">文字颜色:</strong>漂亮不言自明！这是应用程序的文本颜色。</li><li id="ed87" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated"><strong class="kt ir">次要背景色:</strong>用作<code class="fe na nb nc nd b">st.sidebar</code>和几个小工具的背景。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/415f5b7376548c8db526a1ba3dca0223.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AGeUawdWR1b0zY9w.png"/></div></div></figure><p id="5e35" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">背景色和第二背景色在某种程度上是“互补的”,因为它们用于放置在基本元素“上面”的元素，以促进一致性和可及的对比度。这意味着<code class="fe na nb nc nd b">st.number_input</code>小部件在主体中定义时将使用<code class="fe na nb nc nd b">Secondary background color</code>作为背景色，但在侧边栏中定义时使用<code class="fe na nb nc nd b">Background color</code>。下图说明了这一点:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/52aad1bc9cedc4331620c86c066f7a70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ozJbt9OFbiUsDpHT.png"/></div></div></figure><h1 id="e4e6" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">主题和自定义组件</h1><p id="8a10" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">如果你是一个<strong class="kt ir">组件作者</strong>，我们可以让你很容易地阅读你的JS和CSS代码中的主题颜色。要使用这项新功能，请安装或更新最新版本的<code class="fe na nb nc nd b">streamlit-component-lib</code>。</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="234e" class="ni lp iq nd b gy nj nk l nl nm">npm install streamlit-component-lib</span></pre><p id="02f3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一旦这个包被更新，一个组件的背景和文本颜色将自动改变以匹配活动主题的颜色。附加的主题属性以两种等效的方式向组件公开:主题对象或主题样式。</p><h1 id="fbf3" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">作为一个反应道具</h1><p id="a197" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">通过<code class="fe na nb nc nd b">theme</code>道具传递给组件的对象具有以下形状:</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="af45" class="ni lp iq nd b gy nj nk l nl nm">{<br/>    "primaryColor": "someColor1"<br/>    "backgroundColor": "someColor3",<br/>    "secondaryBackgroundColor": "someColor4",<br/>    "textColor": "someColor5",<br/>    "font": "someFont",<br/>}</span></pre><h1 id="7e83" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">作为CSS变量</h1><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="bfbc" class="ni lp iq nd b gy nj nk l nl nm">--primary-color<br/>--background-color<br/>--secondary-background-color<br/>--text-color<br/>--font</span></pre><p id="f7c2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你不熟悉<a class="ae ln" href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties" rel="noopener ugc nofollow" target="_blank"> CSS变量</a>，TLDR版本是你可以这样使用它们:</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="6a98" class="ni lp iq nd b gy nj nk l nl nm">.mySelector {<br/>  color: var(--text-color);<br/>}</span></pre><p id="38f9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">向组件公开主题属性的两种方法包含相同的信息，因此使用哪一种取决于个人偏好。让定制组件与主题一起工作的例子可以在<a class="ae ln" href="https://github.com/streamlit/component-template/blob/bc6e70905beb8f9a178fc811603cc65b637bc38d/template/my_component/frontend/src/MyComponent.tsx#L33" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h1 id="7cb5" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">找到你最喜欢的新主题</h1><p id="0c1f" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">这是我们的贴图演示，有一个受“<a class="ae ln" href="https://onecrayon.com/products/quiet-light/" rel="noopener ugc nofollow" target="_blank">宁静光</a>”启发的主题:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/a23cce1affcccc9f02fc4535cda87b03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Imz0_2C-inD2le7h.png"/></div></div></figure><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="f395" class="ni lp iq nd b gy nj nk l nl nm">[theme]<br/><br/>primaryColor="#6eb52f"<br/>backgroundColor="#f0f0f5"<br/>secondaryBackgroundColor="#e0e0ef"<br/>textColor="#262730"<br/>font="sans serif"</span></pre><p id="ca4c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以下是一个受“<a class="ae ln" href="https://en.wikipedia.org/wiki/Solarized_(color_scheme)#Gallery" rel="noopener ugc nofollow" target="_blank">日晒</a>”启发的主题示例:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/0c1c01eb308bd4b415b44eed376507d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NcY1Rie8AUjnkB_A.png"/></div></div></figure><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="78b3" class="ni lp iq nd b gy nj nk l nl nm">[theme]<br/><br/>primaryColor="#d33682"<br/>backgroundColor="#002b36"<br/>secondaryBackgroundColor="#586e75"<br/>textColor="#fafafa"<br/>font="sans serif"</span></pre><h1 id="0320" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">尝试主题化，让我们知道你的想法！</h1><p id="a1b1" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">要尝试主题化，只需像往常一样升级到Streamlit的最新版本:</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="9c85" class="ni lp iq nd b gy nj nk l nl nm">$ pip install streamlit --upgrade</span></pre><p id="9902" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们迫不及待地想看到这个社区将要构建的又酷又神奇的主题。如果你创建了一个很酷的自定义主题，我们很乐意看到它，所以当你在<a class="ae ln" href="https://twitter.com/streamlit" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae ln" href="https://www.linkedin.com/company/streamlit/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>或我们的<a class="ae ln" href="https://discuss.streamlit.io" rel="noopener ugc nofollow" target="_blank">论坛</a>上分享时，请标记<code class="fe na nb nc nd b">@streamlit</code>。</p><h1 id="b812" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">资源</h1><ul class=""><li id="96be" class="ml mm iq kt b ku mg kx mh la no le np li nq lm mq mr ms mt bi translated"><a class="ae ln" href="https://docs.streamlit.io/en/stable/main_concepts.html#themes" rel="noopener ugc nofollow" target="_blank">文档</a></li><li id="a44a" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated"><a class="ae ln" href="https://github.com/streamlit/" rel="noopener ugc nofollow" target="_blank"> Github </a></li><li id="c02a" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated"><a class="ae ln" href="https://docs.streamlit.io/en/0.79.0/changelog.html" rel="noopener ugc nofollow" target="_blank">变更日志</a></li><li id="e4f9" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated"><a class="ae ln" href="https://discuss.streamlit.io/" rel="noopener ugc nofollow" target="_blank">论坛</a></li><li id="b69a" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated"><a class="ae ln" href="https://share.streamlit.io/streamlit/theming-showcase-blue/main" rel="noopener ugc nofollow" target="_blank">样本app </a></li></ul></div></div>    
</body>
</html>