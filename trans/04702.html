<html>
<head>
<title>Geopandas Hands-on: Geospatial Data Visualization and Intro to Geometry</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Geopandas动手操作:地理空间数据可视化和几何学介绍</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/geopandas-hands-on-geospatial-data-visualization-and-intro-to-geometry-7f2ed9df52ab?source=collection_archive---------19-----------------------#2021-04-23">https://towardsdatascience.com/geopandas-hands-on-geospatial-data-visualization-and-intro-to-geometry-7f2ed9df52ab?source=collection_archive---------19-----------------------#2021-04-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="39cf" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">第2部分:关于如何处理地理空间机器学习的教程</h2></div><p id="0bf5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第一部分:地理空间概念介绍(<a class="ae le" rel="noopener" target="_blank" href="/geopandas-hands-on-introduction-to-geospatial-machine-learning-6e7e4a539daf"> <em class="lf">跟随此处</em> </a> ) <br/>第二部分:地理空间可视化和几何创建(<em class="lf">本文</em> ) <br/>第三部分:地理空间操作(<a class="ae le" rel="noopener" target="_blank" href="/geopandas-hands-on-geospatial-relations-and-operations-a6e7047d7ba1#0bf5-2036d3ba94c4"> <em class="lf">跟随此处</em> </a> ) <br/>第四部分:构建地理空间机器学习管道(<a class="ae le" rel="noopener" target="_blank" href="/geopandas-hands-on-building-geospatial-machine-learning-pipeline-9ea8ae276a15"> <em class="lf">跟随此处</em> </a>)</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lg"><img src="../Images/116955dfc2ddf4a10e061142d5360a5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*w4qrnWG09yU-6234"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated"><a class="ae le" href="https://unsplash.com/@marjan_blan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Marjan Blan | @marjanblan </a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="8102" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本帖中，我们将介绍地理空间可视化的各个方面，并向您介绍如何使用Geopandas创建您自己的地理空间数据。</p><h1 id="f07d" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">目录:</h1><ol class=""><li id="c363" class="mo mp it kk b kl mq ko mr kr ms kv mt kz mu ld mv mw mx my bi translated">概述</li><li id="6875" class="mo mp it kk b kl mz ko na kr nb kv nc kz nd ld mv mw mx my bi translated">地理空间可视化</li><li id="dd06" class="mo mp it kk b kl mz ko na kr nb kv nc kz nd ld mv mw mx my bi translated">几何简介和创建您自己的地理空间数据</li></ol><h1 id="4978" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">概述</h1><p id="1f9d" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ne kt ku kv nf kx ky kz ng lb lc ld im bi translated">在之前的文章<a class="ae le" rel="noopener" target="_blank" href="/geopandas-hands-on-introduction-to-geospatial-machine-learning-6e7e4a539daf">这里</a>中，我们讨论了geopandas的基础知识，比如它的底层数据类型、几何列和内置属性，我们可以很容易地对它们进行操作。</p><p id="7f74" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我们将更深入地挖掘geopandas，例如如何生成漂亮的地理空间可视化，并创建您自己的地理空间数据，供后续在机器学习管道中使用。</p><h1 id="c81c" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">地理空间可视化</h1><p id="8ada" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ne kt ku kv nf kx ky kz ng lb lc ld im bi translated">我们仍将使用geopandas提供的纽约行政区内置数据集。</p><pre class="lh li lj lk gt nh ni nj nk aw nl bi"><span id="1eff" class="nm lx it ni b gy nn no l np nq">import geopandas<br/><br/>path_to_data = geopandas.datasets.get_path("nybb")<br/>gdf = geopandas.read_file(path_to_data)<br/><br/>gdf = gdf.set_index("BoroName")</span></pre><p id="1344" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设我们想要可视化纽约每个区的相对面积大小。我们可以轻松地调用plot()函数，与Matplotlib中的函数相同，并传入您想要绘制的列名，在本例中是“area”。</p><pre class="lh li lj lk gt nh ni nj nk aw nl bi"><span id="a749" class="nm lx it ni b gy nn no l np nq">gdf["area"] = gdf.area</span><span id="7dbb" class="nm lx it ni b gy nr no l np nq">gdf.plot("area", legend=True)</span></pre><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/98f434a5380247d401428d422a88846a.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/1*aZ1UPk5pWtbuBudnlK_gzA.png"/></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">纽约行政区的面积大小</p></figure><p id="05b5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">颜色似乎不能自然地表示连续变量，比如面积，让我们通过传递参数<em class="lf"> cmap </em>来尝试改变颜色。</p><pre class="lh li lj lk gt nh ni nj nk aw nl bi"><span id="ec89" class="nm lx it ni b gy nn no l np nq">gdf.plot("area", legend=True, cmap="OrRd")</span></pre><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/01e1e94ee5056508ceb4bbfb18943347.png" data-original-src="https://miro.medium.com/v2/resize:fit:716/format:webp/1*DWcWgkZ3gOgwtn62ePOEog.png"/></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">自然着色区</p></figure><p id="af6e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，哪一个区域更大就更明显了:被暗红色阴影笼罩的区域。如果您想查看配色方案及其相应标识符的列表，请点击此<a class="ae le" href="https://matplotlib.org/stable/tutorials/colors/colormaps.html" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><p id="f853" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">画两层或者标绘两层怎么样？回想一下，我们有先前的质心点:</p><pre class="lh li lj lk gt nh ni nj nk aw nl bi"><span id="d4c2" class="nm lx it ni b gy nn no l np nq">gdf["centroid"] = gdf.centroid</span></pre><p id="0d13" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以绘制2个或更多的层，首先创建一个轴，我们将绘制2个或更多的层，并告诉plot()函数在这个新创建的轴上绘制。</p><pre class="lh li lj lk gt nh ni nj nk aw nl bi"><span id="81f6" class="nm lx it ni b gy nn no l np nq">import matplotlib.pyplot as plt</span><span id="a68d" class="nm lx it ni b gy nr no l np nq">fig, ax = plt.subplots()<br/>gdf.plot(ax=ax, color='white', edgecolor='black')<br/>gdf['centroid'].plot(ax=ax)<br/>plt.show()</span></pre><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/3d25398761579fef015823fd7537a393.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/format:webp/1*QYwElGSlBzuggUgjA1NcRA.png"/></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">两层绘图</p></figure><h1 id="33e4" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">几何学导论</h1><p id="3433" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ne kt ku kv nf kx ky kz ng lb lc ld im bi translated">下一个问题随之而来:我们能从现有的几何图形中创造出新的几何图形吗？是的，这篇文章将展示两个这样的例子。</p><h2 id="9db7" class="nm lx it bd ly nv nw dn mc nx ny dp mg kr nz oa mi kv ob oc mk kz od oe mm of bi translated">A.缓冲器</h2><p id="c3a0" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ne kt ku kv nf kx ky kz ng lb lc ld im bi translated">比方说，你想在纽约周围设立一个无人驾驶飞机禁飞区，因为有贵宾进入该州，我们可以在该地区周围划出10，000英尺的缓冲区。</p><pre class="lh li lj lk gt nh ni nj nk aw nl bi"><span id="7074" class="nm lx it ni b gy nn no l np nq"># Get the boundary of each area<br/>gdf["boundary"] gdf.boundary</span><span id="0a2c" class="nm lx it ni b gy nr no l np nq"># buffering the active geometry by 10 000 feet (geometry is already in feet)<br/>gdf["buffered"] = gdf.buffer(10000)<br/>ax = gdf["buffered"].plot(alpha=.5)<br/>gdf["boundary"].plot(ax=ax, color="white", linewidth=.5)</span></pre><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="gh gi og"><img src="../Images/55caf31708d4dcee6ae89db3f7e6d86f.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/1*jboYZo4SeqQHUWd3craD2g.png"/></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">区域边界周围有10，000英尺的缓冲区</p></figure><h2 id="4a91" class="nm lx it bd ly nv nw dn mc nx ny dp mg kr nz oa mi kv ob oc mk kz od oe mm of bi translated">B.信封</h2><p id="4e36" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ne kt ku kv nf kx ky kz ng lb lc ld im bi translated">如果你想找到包围一个区域的最小的矩形，你也可以调用envelope函数并绘制出类似于上面的Buffer的几何图形。</p><pre class="lh li lj lk gt nh ni nj nk aw nl bi"><span id="16db" class="nm lx it ni b gy nn no l np nq">Get the envelope of each area<br/>gdf["enveloped"] = gdf.envelope</span><span id="998c" class="nm lx it ni b gy nr no l np nq"># plotting the smallest rectangle envelope around an area<br/>ax = gdf["enveloped"].plot(alpha=.5)<br/>gdf["boundary"].plot(ax=ax, color="white", linewidth=.5)</span></pre><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/0c06f2a2946b20b03c1e124783aed4af.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*rXYAhPljP6MXHyaZPfc1Tg.png"/></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">感兴趣区域周围的最小包络</p></figure><h1 id="f379" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">结论</h1><p id="1a53" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ne kt ku kv nf kx ky kz ng lb lc ld im bi translated">就是这样！希望你今天能学到新东西。在下一篇文章中，我们将深入探讨如何执行地理空间操作，如合并、聚合、空间连接等。敬请期待！</p></div><div class="ab cl oi oj hx ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="im in io ip iq"><p id="ed07" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="lf">做订阅我的邮件简讯:</em></strong><a class="ae le" href="https://tinyurl.com/2npw2fnz" rel="noopener ugc nofollow" target="_blank"><em class="lf">【https://tinyurl.com/2npw2fnz】</em></a><em class="lf"/><strong class="kk iu"><em class="lf">在这里我定期用通俗易懂的语言和漂亮的可视化总结AI研究论文。</em>T13】</strong></p></div></div>    
</body>
</html>