<html>
<head>
<title>AI-Powered Data Discovery with Amazon Kendra and AWS Glue Data Catalog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Amazon Kendra和AWS Glue数据目录进行人工智能驱动的数据发现</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/ai-powered-data-discovery-with-amazon-kendra-and-aws-glue-data-catalog-f2d2cdcc9233?source=collection_archive---------17-----------------------#2021-07-16">https://towardsdatascience.com/ai-powered-data-discovery-with-amazon-kendra-and-aws-glue-data-catalog-f2d2cdcc9233?source=collection_archive---------17-----------------------#2021-07-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f123" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何着手实施完全托管的数据发现服务</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/39d4be1d127753d8650bf4dbb7766794.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d-77CY8yv2fPSOdLXGez7w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">通过Amazon Kendra和AWS Glue数据目录进行人工智能数据发现——Olalekan Elesin</p></figure><p id="8c81" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在过去的几个月里，我询问了AWS基于AWS Glue Data Catalog的完全托管的数据发现服务，但是没有结果。我经常收到使用AWS Glue数据目录搜索功能的建议，并使用自定义UI和AWS SDK进行扩展，这样用户就不需要登录AWS控制台来查找可用于分析的相关数据。无论这种方法多么有用，它并没有被证明是有用的，因为我坚信数据发现不仅仅是一个搜索UI，更多的是关于搜索结果的相关性。这看起来像是机器学习和图形算法的完美问题——还记得PageRank吗？</p><p id="ef46" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">编写PageRank算法或重用现有模块是不可能的，主要是因为我要花时间让它投入生产。我还考虑了现有的开源产品，如<a class="ae lr" href="https://www.amundsen.io/" rel="noopener ugc nofollow" target="_blank">阿蒙森</a>(来自Lyft)和<a class="ae lr" href="https://datahubproject.io/" rel="noopener ugc nofollow" target="_blank">数据中心</a>(来自LinkedIn)，它们都以自己的方式取得了成功，但并不符合我的需要。这不是从功能的角度来看(因为两者都有丰富的功能)，而是从基础设施管理的复杂性来看。我在寻找一种可以使用AWS Cloud提供的构建模块轻松拼凑起来的东西。</p><h1 id="e8a8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">AWS搜索服务来救援</h1><p id="e58c" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">据我所知，在撰写本文时，AWS上大约有3到4个搜索管理服务。它们是:</p><ol class=""><li id="40dd" class="mp mq iq kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated"><a class="ae lr" href="https://aws.amazon.com/cloudsearch/" rel="noopener ugc nofollow" target="_blank">亚马逊云搜索</a></li><li id="7451" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><a class="ae lr" href="https://aws.amazon.com/elasticsearch-service/" rel="noopener ugc nofollow" target="_blank">亚马逊弹性搜索</a></li><li id="fe4d" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><a class="ae lr" href="https://aws.amazon.com/kendra/" rel="noopener ugc nofollow" target="_blank">亚马逊肯德拉</a></li><li id="cf07" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><a class="ae lr" href="https://dev.to/rainleander/what-is-aws-infinidash-2mjn" rel="noopener ugc nofollow" target="_blank"> AWS Infinidash </a>(这个服务是虚构的，不存在)</li></ol><p id="8b37" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这三者中，<a class="ae lr" href="https://aws.amazon.com/kendra/" rel="noopener ugc nofollow" target="_blank"> Amazon Kendra </a>符合我想要解决的特定需求，即使用机器学习来改善数据发现体验(注意:我并不专注于搜索功能)。</p><h2 id="9405" class="nd lt iq bd lu ne nf dn ly ng nh dp mc le ni nj me li nk nl mg lm nm nn mi no bi translated">什么是<a class="ae lr" href="https://aws.amazon.com/kendra/" rel="noopener ugc nofollow" target="_blank">亚马逊Kendra </a></h2><p id="401d" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">根据产品页面:</p><blockquote class="np nq nr"><p id="a47a" class="kv kw ns kx b ky kz jr la lb lc ju ld nt lf lg lh nu lj lk ll nv ln lo lp lq ij bi translated"><a class="ae lr" href="https://aws.amazon.com/kendra/" rel="noopener ugc nofollow" target="_blank">亚马逊Kendra </a>是一项由机器学习支持的智能搜索服务。Kendra为您的网站和应用程序重新设计了企业搜索，以便您的员工和客户可以轻松找到他们正在寻找的内容，即使这些内容分散在您组织内的多个位置和内容存储库中。… Amazon Kendra是一项完全托管的服务，因此无需供应服务器，也无需构建、训练或部署机器学习模型。</p></blockquote><div class="nw nx gp gr ny nz"><a href="https://aws.amazon.com/kendra/" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd ir gy z fp oe fr fs of fu fw ip bi translated">亚马逊肯德拉-智能搜索-亚马逊网络服务</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">由机器学习支持的高度准确的智能搜索服务。亚马逊Kendra是一个智能搜索服务…</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">aws.amazon.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on kp nz"/></div></div></a></div><p id="0d68" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如产品页面上所述，<a class="ae lr" href="https://aws.amazon.com/kendra/" rel="noopener ugc nofollow" target="_blank">亚马逊Kendra </a>是一项完全托管的服务，因此，维护和扩展机器学习系统的基础设施负担是完全不可能的。我需要做的就是弄清楚如何以适用于Amazon Kendra的格式准备我的数据。</p></div><div class="ab cl oo op hu oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="ij ik il im in"><h1 id="2814" class="ls lt iq bd lu lv ov lx ly lz ow mb mc jw ox jx me jz oy ka mg kc oz kd mi mj bi translated">这项工作</h1><p id="e518" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">出于本文的目的，我们将主要从AWS控制台关注一个简单的工作流。所附架构图中引用的组件不是本文的一部分，但是正在被开发成一个全功能的数据发现工具。</p><h2 id="47e0" class="nd lt iq bd lu ne nf dn ly ng nh dp mc le ni nj me li nk nl mg lm nm nn mi no bi translated">环境设置</h2><p id="417a" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">我们需要快速原型化和验证这个想法的AWS环境设置是一个<a class="ae lr" href="https://aws.amazon.com/sagemaker/" rel="noopener ugc nofollow" target="_blank">亚马逊SageMaker </a>笔记本实例(用于Jupyter环境)和一个<a class="ae lr" href="https://aws.amazon.com/kendra/" rel="noopener ugc nofollow" target="_blank">亚马逊Kendra </a>索引。我不会详细介绍如何建立一个亚马逊SageMaker笔记本实例，我坚信你会在网上和AWS机器学习博客上找到大量关于这方面的资源。</p><p id="1320" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae lr" href="https://aws.amazon.com/kendra/" rel="noopener ugc nofollow" target="_blank"> Amazon Kendra </a>也包含大量关于其设置的文档，但我想强调一下，只需点击几下鼠标，从控制台创建一个索引是多么容易。点击以下链接了解更多信息:</p><div class="nw nx gp gr ny nz"><a href="https://docs.aws.amazon.com/kendra/latest/dg/gs-console.html" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd ir gy z fp oe fr fs of fu fw ip bi translated">S3铲斗入门(控制台)</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">以下过程显示了如何使用AWS控制台创建和测试Amazon Kendra索引。在程序中…</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">docs.aws.amazon.com</p></div></div></div></a></div><p id="9e94" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一旦我们的<a class="ae lr" href="https://aws.amazon.com/kendra/" rel="noopener ugc nofollow" target="_blank"> Amazon Kendra </a>索引建立并运行，接下来的事情就是用可搜索的元数据填充索引。</p><h2 id="cb59" class="nd lt iq bd lu ne nf dn ly ng nh dp mc le ni nj me li nk nl mg lm nm nn mi no bi translated">在<a class="ae lr" rel="noopener" target="_blank" href="/data-catalogs-are-dead-long-live-data-discovery-a0dc8d02bd34">数据发现</a>中，元数据为王</h2><p id="75ff" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">与任何其他数据发现工具一样，元数据是王道。我们将利用<a class="ae lr" href="https://docs.aws.amazon.com/glue/latest/dg/populate-data-catalog.html" rel="noopener ugc nofollow" target="_blank"> AWS Glue数据目录</a>中的数据库和S3表。为了使这些信息可以通过Amazon Kendra进行搜索，我需要在Amazon Kendra中以可索引的格式准备元数据(即AWS Glue数据目录中的数据库和表名)。这对于AWS Python SDK boto3来说非常简单。请参见下面的示例:</p><pre class="kg kh ki kj gt pa pb pc pd aw pe bi"><span id="03b5" class="nd lt iq pb b gy pf pg l ph pi">def get_all_glue_tables():<br/>    """<br/>    Function to get all tables in AWS Glue Data Catalog<br/>    """<br/>    glue_tables = []<br/>    kwargs = {}<br/>    response = glue.search_tables(**kwargs)<br/>    glue_tables.extend(response['TableList'])<br/>    while 'NextToken' in response:<br/>        token = response['NextToken']<br/>        kwargs['NextToken'] = token<br/>        response = glue.search_tables(**kwargs)<br/>        glue_tables.extend(response['TableList'])<br/>    return glue_tables</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pj"><img src="../Images/924af3ce61368c519a2eed3baef6b6e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R7HPHm6JqjXMfuZ1vH6FbA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">如何准备AWS胶水搜索表结果索引到亚马逊Kendra</p></figure><h2 id="10ba" class="nd lt iq bd lu ne nf dn ly ng nh dp mc le ni nj me li nk nl mg lm nm nn mi no bi translated">在亚马逊肯德拉搜索和发现</h2><p id="0da4" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">随着元数据作为文档添加到<a class="ae lr" href="https://aws.amazon.com/kendra/" rel="noopener ugc nofollow" target="_blank">亚马逊Kendra </a>，是时候体验数据发现了。我的第一个搜索查询是寻找用户会话数据。为此，Amazon Kendra返回了正确的结果及其建议的答案，这与我正在寻找的答案相匹配。此外，基于Amazon Kendra中的元数据和方面配置，我可以过滤我感兴趣的列或表类型(视图或外部表)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pk"><img src="../Images/825d1825f0cea809472157636cbe235d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*63eI-pWH4_ADheASpAJNeA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用Amazon Kendra和AWS Glue数据目录进行数据发现—图片由Olalekan Elesin提供</p></figure><p id="4b97" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在研究了会话数据之后，我现在想看看转换时可用的数据。所以，我干脆问亚马逊Kendra:“转换数据在哪里”。瞧，结果如下图所示</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/39d4be1d127753d8650bf4dbb7766794.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d-77CY8yv2fPSOdLXGez7w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用Amazon Kendra和AWS Glue数据目录进行数据发现—图片由Olalekan Elesin提供</p></figure><p id="668c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，我希望看到带有<strong class="kx ir"> eventId </strong>列的表，这样我就知道要为我的分析连接哪些表或视图:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pl"><img src="../Images/4e560620fdb98a70673e968e069eb6db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VnkIU0PJfzjLvr2tTyhMfA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用Amazon Kendra和AWS Glue数据目录进行数据发现—图片由Olalekan Elesin提供</p></figure><h1 id="3666" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">视窗网际网路名称服务</h1><ol class=""><li id="1015" class="mp mq iq kx b ky mk lb ml le pm li pn lm po lq mu mv mw mx bi translated">搜索体验允许自然语言提问。例如“eventid用在哪里？”或者“转换数据在哪里？”。有了这一功能，任何人都可以更轻松地找到分析所需的相关数据。因此，减少了查找数据所需的时间。</li><li id="0a42" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">无需维护基础设施，只需将数据填充到Amazon Kendra索引中，并观察用户发现数据。</li><li id="450c" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">Amazon Kendra文档属性可以用作过滤器，在本例中是列名，为过滤提供了直观的UI。</li><li id="78f9" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">超越AWS控制台体验的可扩展性。这个我没有试过，但是我从AWS找到了React组件。<a class="ae lr" href="https://docs.aws.amazon.com/kendra/latest/dg/deploying.html" rel="noopener ugc nofollow" target="_blank">点击此处了解详情</a>。</li></ol><h1 id="e3c6" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">限制</h1><ol class=""><li id="f660" class="mp mq iq kx b ky mk lb ml le pm li pn lm po lq mu mv mw mx bi translated">不允许每个API调用向Amazon Kendra索引添加超过10个文档。这可能是一个很大的限制，尤其是对于包含大量表的AWS Glue数据目录。但是，有一个编程解决方法，可以将文档分成10个项目的块来添加。</li><li id="02cc" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">带有字符串列表(即StringList)的文档属性不能超过10项。在这个例子中，我添加了表列名作为带有字符串列表(即列名)的自定义属性。超过10列可能是企业表的标准，因此这是一个巨大的障碍</li><li id="ce18" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">贵！</li></ol><h1 id="f45a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">近期工作</h1><p id="1395" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">尽管这篇博客文章涵盖了在Amazon SageMaker笔记本实例和<a class="ae lr" href="https://aws.amazon.com/kendra/" rel="noopener ugc nofollow" target="_blank"> Amazon Kendra </a>控制台上开发的MVP，但要让这样的系统投入生产使用，还需要一个如下面的架构所示的全功能应用程序。此外，与公司内部wikis(如Confluence)的集成将改善搜索结果和数据可发现性，因为数据文档存在于此类系统中。该架构还可以扩展到尚未连接到<a class="ae lr" href="https://docs.aws.amazon.com/glue/latest/dg/populate-data-catalog.html" rel="noopener ugc nofollow" target="_blank"> AWS Glue数据目录</a>的数据源。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pp"><img src="../Images/038a982e64fcf16204ce0bd8f343562f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oU5u_Jlv0byl9dOdyJUtTg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">全功能数据发现工具的架构，包含Amazon Kendra、AWS Glue数据目录和Amazon Athena。图片由奥拉勒坎·埃勒辛拍摄</p></figure></div><div class="ab cl oo op hu oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="ij ik il im in"><p id="81cc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">迫不及待地想知道你会用<a class="ae lr" href="https://aws.amazon.com/kendra/" rel="noopener ugc nofollow" target="_blank">亚马逊Kendra </a>造出什么。您可以通过<a class="ae lr" href="mailto:elesin.olalekan@gmail.com" rel="noopener ugc nofollow" target="_blank">电子邮件</a>联系我，在<a class="ae lr" href="https://twitter.com/elesinOlalekan" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上关注我，或者在<a class="ae lr" href="https://www.linkedin.com/in/elesinolalekan/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上与我联系。</p></div></div>    
</body>
</html>