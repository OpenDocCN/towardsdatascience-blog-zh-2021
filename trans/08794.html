<html>
<head>
<title>Lightweight Pipelining In Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的轻量级流水线技术</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/lightweight-pipelining-in-python-1c7a874794f4?source=collection_archive---------35-----------------------#2021-08-13">https://towardsdatascience.com/lightweight-pipelining-in-python-1c7a874794f4?source=collection_archive---------35-----------------------#2021-08-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8c28" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Joblib将机器学习管道存储到文件中</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/907048d57632309798a60114281afc50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vVQ3BoiGoF6iIZIW"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">保罗·泰森在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="5ce4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">流水线过程有助于提供按需下载和使用机器学习模型的简单方法。它有助于并行化，这意味着不同的作业可以并行运行，还可以减少冗余，并有助于检查和调试模型中的数据流。</p><p id="4c2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">管道提供的一些功能包括按需计算、数据和计算跟踪、检查数据流等。尽管具有所有这些特征，但是创建和使用这些管道是困难的。如果我告诉你，你可以轻松地创建这些管道，没有任何麻烦，会怎么样？</p><p id="d01e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Joblib是一个开源Python库，有助于将管道保存到文件中，并在需要时使用它。它很容易实现，并且运行良好。</p><p id="0cd7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将探索Joblib提供的一些功能。</p><p id="9de8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们开始吧…</p><h1 id="212b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">安装所需的库</h1><p id="fe46" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们将从使用pip安装Joblib库开始。下面给出的命令可以做到这一点。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="e4ff" class="mx lw it mt b gy my mz l na nb">!pip install joblib</span></pre><h1 id="5c00" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">导入所需的库</h1><p id="cfc4" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在这一步中，我们将导入加载数据集、创建模型和创建管道所需的库。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="7f7b" class="mx lw it mt b gy my mz l na nb">import pandas as pd<br/>from sklearn.preprocessing import OneHotEncoder<br/>from sklearn.linear_model import LogisticRegression<br/>from sklearn.pipeline import make_pipeline<br/>import joblib</span></pre><h1 id="046f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">正在加载数据集</h1><p id="b755" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在本文中，我们将使用从Kaggle获取的著名的泰坦尼克号数据集。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="c75c" class="mx lw it mt b gy my mz l na nb">cols = ['Embarked', 'Sex']<br/>df = pd.read_csv('http://bit.ly/kaggletrain', nrows=10)<br/>X = df[cols]<br/>y = df['Survived']<br/>df_new = pd.read_csv('http://bit.ly/kaggletest', nrows=10)<br/>X_new = df_new[cols]<br/>df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/a066eacc9186c4338d3707b42697fa40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TKjBtgGuXx1RCMgnO0qyEA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据集(来源:作者)</p></figure><h1 id="7396" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">建模</h1><p id="8b6f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在这一步中，我们将从创建一个模型开始，我们将为其执行一些预处理。之后，我们将创建管道，对其进行拟合，并将其用于预测。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="c682" class="mx lw it mt b gy my mz l na nb">ohe = OneHotEncoder()<br/>logreg = LogisticRegression(solver='liblinear', random_state=1)<br/>pipe = make_pipeline(ohe, logreg)<br/>pipe.fit(X, y)<br/>pipe.predict(X_new)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/5bcd8b2e3ba6fd5852630bb35490ccc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:602/format:webp/1*Ea4kT1dVTQEk4DWX1m-OWQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">预测(来源:作者)</p></figure><p id="f35b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建管道后，我们现在将它转储到一个文件中，并在需要时使用它。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="2114" class="mx lw it mt b gy my mz l na nb"># save the pipeline to a file<br/>joblib.dump(pipe, 'pipe.joblib')</span></pre><p id="e395" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们将加载该管道，并使用它进行预测。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="93d4" class="mx lw it mt b gy my mz l na nb"># load the pipeline from a file<br/>same_pipe = joblib.load('pipe.joblib')<br/># use it to make the same predictions<br/>same_pipe.predict(X_new)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/5bcd8b2e3ba6fd5852630bb35490ccc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:602/format:webp/1*Ea4kT1dVTQEk4DWX1m-OWQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">预测(来源:作者)</p></figure><p id="6ceb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们发现使用Joblib创建管道并将其用于预测是多么容易。</p><p id="3e65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">继续尝试使用不同的数据集，存储模型管道并使用Joblib加载它。如果您发现任何困难，请在回复部分告诉我。</p><p id="400c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文是与<a class="ne nf ep" href="https://medium.com/u/40808d551f5a?source=post_page-----1c7a874794f4--------------------------------" rel="noopener" target="_blank">皮尤什·英格尔</a>合作完成的。</p><h1 id="be78" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">在你走之前</h1><p id="91d9" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><strong class="lb iu"> <em class="ng">感谢</em> </strong> <em class="ng">的阅读！如果你想与我取得联系，请随时通过hmix13@gmail.com联系我或我的</em> <a class="ae ky" href="http://www.linkedin.com/in/himanshusharmads" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> <em class="ng"> LinkedIn个人资料</em> </strong> </a> <em class="ng">。可以查看我的</em><a class="ae ky" href="https://github.com/hmix13" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="ng">Github</em></strong><em class="ng"/></a><em class="ng">简介针对不同的数据科学项目和包教程。还有，随意探索</em> <a class="ae ky" href="https://medium.com/@hmix13" rel="noopener"> <strong class="lb iu"> <em class="ng">我的简介</em> </strong> </a> <em class="ng">，阅读我写过的与数据科学相关的不同文章。</em></p></div></div>    
</body>
</html>