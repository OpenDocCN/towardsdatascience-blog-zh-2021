<html>
<head>
<title>Working with Python and JSON</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python和JSON</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/working-with-python-and-json-1ca0a7446744?source=collection_archive---------32-----------------------#2021-05-25">https://towardsdatascience.com/working-with-python-and-json-1ca0a7446744?source=collection_archive---------32-----------------------#2021-05-25</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="b08e" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">每个数据爱好者都必须了解的基础知识</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/787a779c975653e1d903d057c0d06352.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yo08G5pgZSR6AWRdEEzBCQ.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">在<a class="ae kz" href="https://unsplash.com/s/photos/pine?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kz" href="https://unsplash.com/@lebedych?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Vadym Lebedych </a>拍摄的照片</p></figure><p id="2060" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">作为数据分析师、数据工程师或数据科学家，你经常会接触到JSON格式的数据。而且对数据有兴趣的经理或来自不同部门的员工也经常有机会处理API并为仪表板或类似的东西提供数据。在这里，您经常使用JSON格式，因此了解它的最基本的知识对于快速、轻松地将数据放入Python DataFrame是很有用的。</p><h2 id="c812" class="lw lx iu bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">JSON是什么来着？</h2><p id="30b4" class="pw-post-body-paragraph la lb iu lc b ld mp jv lf lg mq jy li lj mr ll lm ln ms lp lq lr mt lt lu lv in bi translated"><strong class="lc iv"> JSON </strong> (JavaScript对象符号)是一种数据交换格式。用户可以轻松读写这种格式，机器也可以轻松解析生成。</p><p id="3e79" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">JSON建立在两种结构之上:</p><ul class=""><li id="573d" class="mu mv iu lc b ld le lg lh lj mw ln mx lr my lv mz na nb nc bi translated">名称/值对的集合:在各种语言中，这被实现为一个<em class="nd">对象</em>、记录、结构、字典、散列表、键列表或关联数组。</li><li id="f3d6" class="mu mv iu lc b ld ne lg nf lj ng ln nh lr ni lv mz na nb nc bi translated">值的有序列表:在大多数语言中，这被实现为一个<em class="nd">数组</em>、向量、列表或序列【1】。</li></ul><p id="a642" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">示例</strong></p><pre class="kk kl km kn gu nj nk nl nm aw nn bi"><span id="2e67" class="lw lx iu nk b gz no np l nq nr">{<br/>  "company": "Google",<br/>  "companycontacts": {<br/>    "phone": <strong class="nk iv">12345678</strong>,<br/>  },<br/>  "employees": [<br/>    {<br/>      "name": "Lukas",<br/>      "id": 19,<br/>    },<br/>    {<br/>      "name": "Lisa",<br/>      "id": 14,<br/>    }<br/>  ]<br/>}</span></pre><p id="f528" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在下图中，您可以看到一个典型的JSON示例。JSON对象以“{”开头，后跟一个名称(“公司”)和值(“Google”)。通常，您还会在对象中找到对象，如公司联系人。元素“employee”是一个经典的数组示例，其中也可以包含另一个数组。</p><h2 id="9bfc" class="lw lx iu bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">四个主要使用案例</h2><p id="02d9" class="pw-post-body-paragraph la lb iu lc b ld mp jv lf lg mq jy li lj mr ll lm ln ms lp lq lr mt lt lu lv in bi translated">首先让我们获取一些数据——在这里，我使用了finnhub API，这是一个非常好的API，可以为您提供非常智能的金融数据，如股票、货币和密码[2]。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ns"><img src="../Images/9d94533e3a3ca2e2fc991607075833ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eu9t5DbbzvUpt6zqQ2Arxg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">获取API数据—按作者排序的图像</p></figure><p id="8853" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第一种情况:对象中的对象:</strong>通常你会需要数据帧中来自API的数据——所以你需要平铺对象中的对象。将数据放在数据框中便于将数据用于数据科学任务或将其加载到数据库中。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nt"><img src="../Images/96cd8a595e2759a164b2c8c9b70b5305.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U9WzOxu6yiXeRdpZkShVPQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">在对象中展平对象—按作者排列的图像</p></figure><p id="4dd1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第二种情况:从JSON数组中读取:</strong></p><p id="312e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在让我们用JSON中的数组获取一些数据——在这个例子中，我请求了一些股票数据，包括买入、持有等。信息:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nu"><img src="../Images/eefcc942d4c0c393deb315a7db7775b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KgM17B6GQok072wPpN64Bg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">获取API数据—按作者排序的图像</p></figure><p id="71bf" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">从对象的数组中获取数据有点困难，但从数组本身的对象中获取数据也有点困难，就像您在这里看到的:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nu"><img src="../Images/87b7e90a3e0e4bfe09043c513f14b596.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k9FBaX8eNRCjenzCOpZxmg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">拼合对象中的数组—按作者排列的图像</p></figure><p id="9bd4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这个想法是在一个关系表结构中获得每只股票的基于周期的数据。这里，我们需要一些循环:</p><p id="3744" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第三种情况:显式键和值</strong></p><p id="d1d7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">上面的例子，但以获取某些键和值为目标可以通过:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nu"><img src="../Images/c0fab48fad5aea92c79948637c858430.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9g10uQuIycB_94xxxEheIg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">获取显式的键和值—按作者排序的图像</p></figure><p id="0bc1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">例如，我从数组中取出第二个项目(period月)和相应的<em class="nd"> buy=18 </em>值。</p><p id="4d01" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">第四种情况:将DataFrame写成JSON格式</strong></p><p id="a33f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您需要其他方式，只需通过以下方式即可:</p><pre class="kk kl km kn gu nj nk nl nm aw nn bi"><span id="3665" class="lw lx iu nk b gz no np l nq nr">out = df.to_json(orient=’records’)[1:-1].replace(‘},{‘, ‘} {‘)</span></pre><p id="c48c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您想将数据写回到像数据仓库或数据湖这样的系统中，这通常是需要的。像Amazon的Redshift或Google的Big Query这样的现代数据仓库技术也经常支持JSON和嵌套数据结构[3]。</p><h2 id="b64c" class="lw lx iu bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">结论</h2><p id="b573" class="pw-post-body-paragraph la lb iu lc b ld mp jv lf lg mq jy li lj mr ll lm ln ms lp lq lr mt lt lu lv in bi translated">当处理数据时，您无法避免JSON，尤其是在处理API和免费数据源时。对于数据管理系统的数据集成，使用JSON格式也是一个好主意。许多现代技术都支持JSON格式。作为一名数据分析师或工程师，你可能无法避开JSON，但即使作为一名经常处理数据的普通雇主，了解一些基础知识以及如何使用Python将数据转换成数据帧以供进一步处理也是有意义的。我希望这篇文章能为您提供关于JSON的最重要的信息，以及一些实际上如何开始处理这类数据的例子。</p><h2 id="870e" class="lw lx iu bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">资料来源和进一步阅读</h2><p id="ff7b" class="pw-post-body-paragraph la lb iu lc b ld mp jv lf lg mq jy li lj mr ll lm ln ms lp lq lr mt lt lu lv in bi translated">[1]JSON.org，<a class="ae kz" href="https://www.json.org/json-en.html" rel="noopener ugc nofollow" target="_blank">介绍JSON </a> (2021)</p><p id="dc71" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">[2]芬兰枢纽，<a class="ae kz" href="https://finnhub.io/" rel="noopener ugc nofollow" target="_blank">https://finnhub.io/</a>(2021)</p><p id="b1ec" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">[3] Google，<a class="ae kz" href="https://cloud.google.com/bigquery/docs/loading-data-cloud-storage-json" rel="noopener ugc nofollow" target="_blank">从云存储中加载JSON数据</a> (2021)</p></div></div>    
</body>
</html>