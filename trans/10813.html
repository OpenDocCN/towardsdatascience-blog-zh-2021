<html>
<head>
<title>3 NumPy Functions to Facilitate Data Analysis with Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">3个NumPy函数，便于对熊猫进行数据分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/3-numpy-functions-to-facilitate-data-analysis-with-pandas-b1ad342a569?source=collection_archive---------22-----------------------#2021-10-19">https://towardsdatascience.com/3-numpy-functions-to-facilitate-data-analysis-with-pandas-b1ad342a569?source=collection_archive---------22-----------------------#2021-10-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2044" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用NumPy提升你的熊猫代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6b50515ce7b9c20d6337901054231ed7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rp5DraR87eGEok5RNryt-A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com/s/photos/help?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@heftiba?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Toa Heftiba </a>拍摄的照片</p></figure><p id="9c15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas和Numpy是用于数据分析和操作的两个最流行的Python库。熊猫配备了许多实用和方便的功能。</p><p id="231a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas还允许使用一些Numpy函数，这使得Pandas的操作更加有效。在本文中，我们将介绍3个Numpy函数，它们在使用Pandas进行数据分析时非常有用。</p><p id="46a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从导入库和创建样本数据框开始。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="7d44" class="ma mb it lw b gy mc md l me mf">import numpy as np<br/>import pandas as pd</span><span id="32ab" class="ma mb it lw b gy mg md l me mf">df = pd.DataFrame({<br/>    "A": np.random.randint(10, size=6),<br/>    "B": np.random.randint(20, size=6),<br/>    "C": np.random.randint(10,20, size=6),<br/>    "D": np.random.random(6).round(2)<br/>})</span><span id="53e3" class="ma mb it lw b gy mg md l me mf">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/db0259662ce8520eeb08817b679197d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:432/format:webp/1*9T4ukKyy2QWFBsmr1ArcxQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">df(作者图片)</p></figure></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="f282" class="mp mb it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">在哪里</h1><p id="fa7d" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">我们感兴趣的第一个是where函数，它为创建条件列提供了一种方便的方法。</p><p id="a1c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将一个条件传递给where函数，并为满足和不满足该条件的行确定一个单独的值。</p><p id="856c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果列“B”和“C”中的值都大于10，我们可以创建一个值为1的列“E”。否则，“E”列中的值为0。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="e1bd" class="ma mb it lw b gy mc md l me mf">df["E"] = np.where((df["B"] &gt; 10) &amp; (df["C"] &gt; 10), 1, 0)</span><span id="decc" class="ma mb it lw b gy mg md l me mf">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/54119589c72bab8ee7f7b53453d02c10.png" data-original-src="https://miro.medium.com/v2/resize:fit:478/format:webp/1*bKW6lTellSyGJrSCGlqynA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">df(作者图片)</p></figure><p id="ea99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用逻辑运算符组合任意多的条件。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="558b" class="mp mb it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">挑选</h1><p id="c936" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">select函数就像是where的升级版。我们能够应用多个条件来确定每个条件的单独值。</p><p id="ce91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用where函数，我们只能测试一个条件(或一组条件)并确定两个值。select函数的作用是更进一步。我们可以测试多个条件(或多个条件集)，并为满足每个条件集的行分配一个单独的值。它还允许为不满足任何条件的行指定默认值。</p><p id="415f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">举个例子会更清楚。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="cbce" class="ma mb it lw b gy mc md l me mf">conditions = [<br/>  (df["B"] &gt;= 10) &amp; (df["A"] == 0),<br/>  (df["B"] &gt;= 10) &amp; (df["A"] == 8)<br/>]</span><span id="19e6" class="ma mb it lw b gy mg md l me mf">values = [1, 2]</span><span id="063d" class="ma mb it lw b gy mg md l me mf">df["F"] = np.select(conditions, values, default=0)</span><span id="6282" class="ma mb it lw b gy mg md l me mf">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/d7e13c4a43b34a0fbde02ab451f8ba2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:518/format:webp/1*Hm7UZy0TepXPtFXXV8i4gg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">df(作者图片)</p></figure></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="0c99" class="mp mb it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">原木</h1><p id="5833" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">对数函数，顾名思义，是用来取一个值的对数的。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="f33c" class="ma mb it lw b gy mc md l me mf">np.log10(100)<br/>2.0</span><span id="0fb5" class="ma mb it lw b gy mg md l me mf">np.log2(16)<br/>4.0</span><span id="d36f" class="ma mb it lw b gy mg md l me mf">np.log(1000)<br/>6.907755278982137</span></pre><p id="2369" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，我们可以将log函数应用于数据框的整个列。在许多情况下，记录列的日志是一种有用的做法。例如，如果机器学习模型中的目标变量包含异常值，则最好使用模型中目标变量的日志。对数线性模型常用于机器学习。</p><p id="a52d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们有以下数据框:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/2ad7113d7979941163643134a116af86.png" data-original-src="https://miro.medium.com/v2/resize:fit:524/format:webp/1*UjKy8M-KQVhXbe6zWapYvQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">df(作者图片)</p></figure><p id="7beb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与目标列中的其他值相比，值600和850相当大。让我们来看看这个专栏的日志有什么不同。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b513" class="ma mb it lw b gy mc md l me mf">df["log_target"] = np.log(df["target"])</span><span id="30a4" class="ma mb it lw b gy mg md l me mf">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/cd0a7398731a80e5353eae043ba2a2cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*BCqkNNbyDoqDluHUHhV0aQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">df(作者图片)</p></figure><p id="9a74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于对数函数，差异变得更小。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="6112" class="mp mb it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">结论</h1><p id="fa12" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">熊猫和熊猫携手并进。事实上，Pandas和其他一些Python库都是建立在Numpy之上的。</p><p id="fe64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在大多数情况下，我们能够用熊猫功能完成任务。但是，在某些情况下使用Numpy函数可以提供额外的好处和功能。</p><p id="3c11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>