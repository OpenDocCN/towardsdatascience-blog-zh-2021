<html>
<head>
<title>Generating a Requirements.txt File from a Jupyter Notebook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从Jupyter笔记本生成Requirements.txt文件</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/generating-a-requirements-file-jupyter-notebook-385f1c315b52?source=collection_archive---------4-----------------------#2021-07-22">https://towardsdatascience.com/generating-a-requirements-file-jupyter-notebook-385f1c315b52?source=collection_archive---------4-----------------------#2021-07-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="47a3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个很容易被忽视的节省时间的方法。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ceb015ab31d20948e57cd22bc70da313.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qYZ4LNr9elZfAOq_"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">伊恩·杜利在Unsplash<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">上的照片</a></p></figure><h1 id="f293" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="afc1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="#3793" rel="noopener ugc nofollow"> <strong class="lt iu">想直接跳到最佳选项？点击这里。</strong> </a></p><p id="e33b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">创建requirements.txt文件是一个必要的过程，尤其是在共享代码、开发MLOps或者只是将一些东西放入Docker容器时。</p><p id="6029" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">从Jupyter笔记本中获取一个干净的requirements.txt文件是非常棘手的，所以我研究了不同的方法来完成它…</p><h2 id="b4af" class="ms la it bd lb mt mu dn lf mv mw dp lj ma mx my ll me mz na ln mi nb nc lp nd bi translated">Pythonic式的方法:Pip冻结</h2><p id="50c9" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这是我见过的关于栈溢出最常见的方法，就是使用pip冻结。这将列出您当前虚拟环境中的每个包和版本。</p><p id="6a1f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">只需打开一个终端，并导航到您希望您的需求文件所在的文件夹。</p><p id="b5ca" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然后，您可以使用<em class="ne"> venv </em>或<em class="ne"> conda </em>激活虚拟环境。</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="c8c7" class="ms la it ng b gy nk nl l nm nn">conda activate myenv</span><span id="ecc7" class="ms la it ng b gy no nl l nm nn">pip freeze &gt; requirements.txt</span></pre><p id="19ed" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">这种方法的问题</strong></p><p id="d017" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">它将获取您在该环境中安装的每个软件包。如果你想创建一些轻量级的东西，只使用你的导入，那么你需要手动修剪这个文件。</p><h2 id="40b2" class="ms la it bd lb mt mu dn lf mv mw dp lj ma mx my ll me mz na ln mi nb nc lp nd bi translated">Jupyter方式:会话信息</h2><p id="7350" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果你想只使用当前jupyter笔记本中的包，你可以使用python包<em class="ne"/><a class="ae ky" href="https://pypi.org/project/session-info/" rel="noopener ugc nofollow" target="_blank"><em class="ne">session-info</em></a><em class="ne">。</em></p><p id="74fc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">安装使用:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="9269" class="ms la it ng b gy nk nl l nm nn">pip install session-info</span></pre><p id="a411" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在jupyter笔记本中，导入包后，您可以写下:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="b432" class="ms la it ng b gy nk nl l nm nn">import session_info</span><span id="b673" class="ms la it ng b gy no nl l nm nn">session_info.show()</span></pre><p id="fe17" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">你会得到类似这样的东西:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/577ebd8a71586a3e7e79c46182eec6b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8784pJ0U2of0cFWLPgog0Q.png"/></div></div></figure><p id="5ccd" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然后，您可以使用查找和替换功能复制、粘贴并替换空格为<em class="ne"> == </em>。</p><p id="bee6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这种方法的问题</p><p id="6dcf" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">它没有考虑来自我们<em class="ne">的依赖关系。py </em>文件，<em class="ne">自定义_函数</em>。但是，这些将与所有其他依赖项一起出现在较低的位置。</p><p id="6810" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">最大的问题是它采用了导入的名称，而不是包的名称。例如，<em class="ne"> sklearn </em>的命令实际上是<code class="fe nq nr ns ng b">pip install scikit-learn</code>，这意味着它不会作为requirements.txt文件工作。</p><h2 id="3793" class="ms la it bd lb mt mu dn lf mv mw dp lj ma mx my ll me mz na ln mi nb nc lp nd bi translated">可靠的方式:Pipreqs</h2><p id="bc18" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果您只想让requirements.txt文件与单个笔记本相关，而不是与您的整个环境相关，这是最好的方法。</p><p id="792b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">首先打开一个终端并安装<em class="ne"> pipreqs </em>和<em class="ne"> nbconvert </em>。</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="7bcc" class="ms la it ng b gy nk nl l nm nn">pip install pipreqs<br/>pip install nbconvert</span></pre><p id="ff3d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然后，导航到Jupyter笔记本所在的文件夹。</p><p id="72e5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果我们假设笔记本叫“我的nb”。您需要用反斜杠(\)对空格进行转义。</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="85ee" class="ms la it ng b gy nk nl l nm nn">jupyter nbconvert --output-dir="./reqs" --to script my\ nb.ipynb</span><span id="fa8c" class="ms la it ng b gy no nl l nm nn">cd reqs</span><span id="1598" class="ms la it ng b gy no nl l nm nn">pipreqs</span></pre><p id="00e8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果成功了，您应该会收到一条成功消息。</p><p id="5d3c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">所以我们在这里做的是把我们的笔记本转换成一个<em class="ne">。py </em>文件放在一个名为<em class="ne"> reqs </em>的新目录下，然后在这个新目录下运行<em class="ne"> pipreqs </em>。原因是<em class="ne"> pipreqs </em>只对<em class="ne">有效。py </em>文件，当文件夹中有其他文件时，我似乎无法让它工作。requirements.txt将在同一个文件夹中生成。</p><p id="b4e8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">你将得到一个完美的需求文件，你可以用它来做任何事情！</p><h2 id="9ae8" class="ms la it bd lb mt mu dn lf mv mw dp lj ma mx my ll me mz na ln mi nb nc lp nd bi translated">了解更多信息</h2><div class="nt nu gp gr nv nw"><a rel="noopener follow" target="_blank" href="/mlops-at-home-part2-3c4282df7714"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd iu gy z fp ob fr fs oc fu fw is bi translated">想在家里实现MLOps？重构您的代码</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">首先让您的代码可重用，然后看看工具</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">towardsdatascience.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok ks nw"/></div></div></a></div><h2 id="d444" class="ms la it bd lb mt mu dn lf mv mw dp lj ma mx my ll me mz na ln mi nb nc lp nd bi translated">将我的内容直接发送到您的收件箱！</h2><div class="nt nu gp gr nv nw"><a href="https://adamsh.substack.com/p/coming-soon" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd iu gy z fp ob fr fs oc fu fw is bi translated">Data Siens:机器学习技巧、诀窍和教程的资源。</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">欢迎来到亚当的数据西恩斯。我是一名数据科学家，有5年的分析经验。我喜欢谈论任何事情…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">adamsh.substack.com</p></div></div><div class="of l"><div class="ol l oh oi oj of ok ks nw"/></div></div></a></div></div></div>    
</body>
</html>