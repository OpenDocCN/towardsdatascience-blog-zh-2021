<html>
<head>
<title>How to Strip Outputs and Execute Interactive Code in a Python Script</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Python脚本中剥离输出并执行交互式代码</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-strip-outputs-and-execute-interactive-code-in-a-python-script-6d4c5da3beb0?source=collection_archive---------26-----------------------#2021-05-10">https://towardsdatascience.com/how-to-strip-outputs-and-execute-interactive-code-in-a-python-script-6d4c5da3beb0?source=collection_archive---------26-----------------------#2021-05-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9076" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用strip-interactive在一行代码中执行交互式Python代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6d9183aad7e639f2b3d5b2a723f9b576.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dEujObzb-7VJ_cbBceQoTw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="b2f8" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">动机</h1><p id="56fc" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">你见过这样的交互式Python代码教程吗:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="43bd" class="pw-post-body-paragraph lq lr it ls b lt mo ju lv lw mp jx ly lz mq mb mc md mr mf mg mh ms mj mk ml im bi translated">…并且希望只获得可以像下面这样执行的代码？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="8691" class="pw-post-body-paragraph lq lr it ls b lt mo ju lv lw mp jx ly lz mq mb mc md mr mf mg mh ms mj mk ml im bi translated">删除所有的<code class="fe mt mu mv mw b">&gt;&gt;&gt;</code>符号和移除所有的输出可能很耗时，尤其是当代码很长的时候。有没有一种方法可以让你在一行代码中得到如上的干净输入？</p><p id="d915" class="pw-post-body-paragraph lq lr it ls b lt mo ju lv lw mp jx ly lz mq mb mc md mr mf mg mh ms mj mk ml im bi translated">这就是为什么我创建了一个名为<a class="ae mx" href="https://github.com/khuyentran1401/strip_interactive" rel="noopener ugc nofollow" target="_blank"> strip-interactive </a>的包。在本文中，我将向您展示如何使用这个包来做到这一点。</p><p id="1187" class="pw-post-body-paragraph lq lr it ls b lt mo ju lv lw mp jx ly lz mq mb mc md mr mf mg mh ms mj mk ml im bi translated">要安装strip-interactive，请键入:</p><pre class="kj kk kl km gt my mw mz na aw nb bi"><span id="44b5" class="nc kz it mw b gy nd ne l nf ng">pip install strip-interactive</span></pre><h1 id="7abb" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">提取干净的输入</h1><p id="4e47" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">让我们使用strip-interactive从交互式Python代码中提取干净的输入:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="6fb0" class="pw-post-body-paragraph lq lr it ls b lt mo ju lv lw mp jx ly lz mq mb mc md mr mf mg mh ms mj mk ml im bi translated">输出:</p><pre class="kj kk kl km gt my mw mz na aw nb bi"><span id="9e95" class="nc kz it mw b gy nd ne l nf ng">import numpy as np<br/>print(np.array([1,2,3]))<br/>print(np.array([4,5,6]))</span></pre><p id="2596" class="pw-post-body-paragraph lq lr it ls b lt mo ju lv lw mp jx ly lz mq mb mc md mr mf mg mh ms mj mk ml im bi translated">酷！现在，这些干净的输入可以执行了。</p><h1 id="6c76" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">执行干净的输入</h1><p id="9920" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">为了执行我们刚刚从<code class="fe mt mu mv mw b">get_clean_code</code>得到的输入，使用<code class="fe mt mu mv mw b">exec</code>方法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mm mn l"/></div></figure><pre class="kj kk kl km gt my mw mz na aw nb bi"><span id="1e05" class="nc kz it mw b gy nd ne l nf ng">[1 2 3]<br/>[4 5 6]</span></pre><p id="cedd" class="pw-post-body-paragraph lq lr it ls b lt mo ju lv lw mp jx ly lz mq mb mc md mr mf mg mh ms mj mk ml im bi translated">如果您喜欢一步执行交互式Python代码，请使用<code class="fe mt mu mv mw b">run_interactive</code>方法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="21a9" class="pw-post-body-paragraph lq lr it ls b lt mo ju lv lw mp jx ly lz mq mb mc md mr mf mg mh ms mj mk ml im bi translated">输出:</p><pre class="kj kk kl km gt my mw mz na aw nb bi"><span id="2fb2" class="nc kz it mw b gy nd ne l nf ng">[1 2 3]<br/>[4 5 6]</span></pre><p id="bcc4" class="pw-post-body-paragraph lq lr it ls b lt mo ju lv lw mp jx ly lz mq mb mc md mr mf mg mh ms mj mk ml im bi translated">厉害！使用<code class="fe mt mu mv mw b">run_interactive</code>方法得到的输出与使用<code class="fe mt mu mv mw b">get_clean_code</code>和<code class="fe mt mu mv mw b">exec</code>方法得到的输出相同。</p><h2 id="46a8" class="nc kz it bd la nh ni dn le nj nk dp li lz nl nm lk md nn no lm mh np nq lo nr bi translated">如果我的交互代码有注释，这还有效吗？</h2><p id="2195" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我相信是的，但是最好测试一下。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="8a4d" class="pw-post-body-paragraph lq lr it ls b lt mo ju lv lw mp jx ly lz mq mb mc md mr mf mg mh ms mj mk ml im bi translated">产出:</p><pre class="kj kk kl km gt my mw mz na aw nb bi"><span id="d8e7" class="nc kz it mw b gy nd ne l nf ng">[1 2 3]</span></pre><p id="7452" class="pw-post-body-paragraph lq lr it ls b lt mo ju lv lw mp jx ly lz mq mb mc md mr mf mg mh ms mj mk ml im bi translated">太好了，成功了！</p><h2 id="782a" class="nc kz it bd la nh ni dn le nj nk dp li lz nl nm lk md nn no lm mh np nq lo nr bi translated">这个什么时候失效？</h2><p id="02d3" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">请注意，如果您对如下代码使用<code class="fe mt mu mv mw b">run_interactive</code>，将不会有输出:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="e17b" class="pw-post-body-paragraph lq lr it ls b lt mo ju lv lw mp jx ly lz mq mb mc md mr mf mg mh ms mj mk ml im bi translated">因此，请确保将<code class="fe mt mu mv mw b">print</code>添加到<code class="fe mt mu mv mw b">np.array([1,2,3])</code>以查看输出:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="8178" class="pw-post-body-paragraph lq lr it ls b lt mo ju lv lw mp jx ly lz mq mb mc md mr mf mg mh ms mj mk ml im bi translated">输出:</p><pre class="kj kk kl km gt my mw mz na aw nb bi"><span id="9d84" class="nc kz it mw b gy nd ne l nf ng">[1 2 3]</span></pre><h1 id="56a8" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">结论</h1><p id="96a4" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">恭喜你！您刚刚学习了如何使用strip-interactive在一行代码中执行Python脚本中的交互式Python代码。当您想在文章或文档中快速尝试交互式Python代码时，这将非常方便。</p><p id="5a47" class="pw-post-body-paragraph lq lr it ls b lt mo ju lv lw mp jx ly lz mq mb mc md mr mf mg mh ms mj mk ml im bi translated">这篇文章的代码可以在<a class="ae mx" href="https://github.com/khuyentran1401/Data-science/blob/master/data_science_tools/strip_interactive_example.py" rel="noopener ugc nofollow" target="_blank">这里</a>找到。如果你看到如何改进这个包，请在这里随意投稿或提交问题<a class="ae mx" href="https://github.com/khuyentran1401/strip_interactive" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="beb3" class="pw-post-body-paragraph lq lr it ls b lt mo ju lv lw mp jx ly lz mq mb mc md mr mf mg mh ms mj mk ml im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的算法和数据科学工具。你可以在LinkedIn和T2 Twitter上与我联系。</p><p id="d190" class="pw-post-body-paragraph lq lr it ls b lt mo ju lv lw mp jx ly lz mq mb mc md mr mf mg mh ms mj mk ml im bi translated">星<a class="ae mx" href="https://github.com/khuyentran1401/Data-science" rel="noopener ugc nofollow" target="_blank">这个回购</a>如果你想检查我写的所有文章的代码。在Medium上关注我，了解我的最新数据科学文章，例如:</p><div class="ns nt gp gr nu nv"><a rel="noopener follow" target="_blank" href="/stop-using-print-to-debug-in-python-use-icecream-instead-79e17b963fcc"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd iu gy z fp oa fr fs ob fu fw is bi translated">在Python中停止使用Print进行调试。用冰淇淋代替</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">你是使用打印还是日志来调试你的代码？用冰淇淋代替。</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">towardsdatascience.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj ks nv"/></div></div></a></div><div class="ns nt gp gr nu nv"><a rel="noopener follow" target="_blank" href="/how-to-create-mathematical-animations-like-3blue1brown-using-python-f571fb9da3d1"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd iu gy z fp oa fr fs ob fu fw is bi translated">如何使用Python创建类似3Blue1Brown的数学动画</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">利用您的Python技能创建美丽的数学动画</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">towardsdatascience.com</p></div></div><div class="oe l"><div class="ok l og oh oi oe oj ks nv"/></div></div></a></div><div class="ns nt gp gr nu nv"><a rel="noopener follow" target="_blank" href="/2-tools-to-automatically-reload-when-python-files-change-90bb28139087"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd iu gy z fp oa fr fs ob fu fw is bi translated">当Python文件改变时自动重新加载的2个工具</h2><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">towardsdatascience.com</p></div></div><div class="oe l"><div class="ol l og oh oi oe oj ks nv"/></div></div></a></div><div class="ns nt gp gr nu nv"><a rel="noopener follow" target="_blank" href="/3-tools-to-track-and-visualize-the-execution-of-your-python-code-666a153e435e"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd iu gy z fp oa fr fs ob fu fw is bi translated">3个跟踪和可视化Python代码执行的工具</h2><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">towardsdatascience.com</p></div></div><div class="oe l"><div class="om l og oh oi oe oj ks nv"/></div></div></a></div></div></div>    
</body>
</html>