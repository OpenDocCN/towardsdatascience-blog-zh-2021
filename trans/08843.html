<html>
<head>
<title>How To Change The Order of Columns In a Pandas DataFrame</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何改变熊猫数据框架中列的顺序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-change-the-order-of-dataframe-columns-in-pandas-c91370326053?source=collection_archive---------15-----------------------#2021-08-15">https://towardsdatascience.com/how-to-change-the-order-of-dataframe-columns-in-pandas-c91370326053?source=collection_archive---------15-----------------------#2021-08-15</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="082e" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">在pandas数据框架中更改列顺序并将列移到前面</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/88a2af456ffbf973836b5afdf57a9eb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XuNg3F5mNjKD7VxHCmi1Ag.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://unsplash.com/@stonewyq?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">斯通王</a>在<a class="ae kz" href="https://unsplash.com/s/photos/pandas?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h2 id="801a" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">介绍</h2><p id="7a89" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">对pandas数据帧中的列重新排序是我们想要执行的最常见的操作之一。当涉及到向其他人展示结果时，这通常是有用的，因为我们需要以某种逻辑顺序对(至少几个)列进行排序。</p><p id="4497" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">在今天的文章中，我们将讨论如何使用</p><ul class=""><li id="6bda" class="mu mv iu ly b lz mp mc mq lj mw ln mx lr my mo mz na nb nc bi translated">原始帧的切片——当您需要<strong class="ly iv">重新排序大多数列</strong>时最相关</li><li id="e490" class="mu mv iu ly b lz nd mc ne lj nf ln ng lr nh mo mz na nb nc bi translated"><code class="fe ni nj nk nl b">insert()</code>方法——如果你想<strong class="ly iv">将一个单独的列插入到指定的索引中</strong></li><li id="680c" class="mu mv iu ly b lz nd mc ne lj nf ln ng lr nh mo mz na nb nc bi translated"><code class="fe ni nj nk nl b">set_index()</code> —如果需要<strong class="ly iv">将一列移动到数据框的前面</strong></li><li id="15a2" class="mu mv iu ly b lz nd mc ne lj nf ln ng lr nh mo mz na nb nc bi translated">和，<code class="fe ni nj nk nl b">reindex()</code>方法——主要与您可以<strong class="ly iv">按照您希望的顺序指定列索引的情况相关</strong>(例如，按照字母顺序)</li></ul></div><div class="ab cl nm nn hy no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="in io ip iq ir"><p id="5c59" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">首先，让我们创建一个我们将在本指南中引用的示例数据帧。</p><pre class="kk kl km kn gu nt nl nu nv aw nw bi"><span id="757d" class="la lb iu nl b gz nx ny l nz oa">import pandas as pd</span><span id="d69a" class="la lb iu nl b gz ob ny l nz oa">df = pd.DataFrame({<br/>    'colA':[1, 2, 3], <br/>    'colB': ['a', 'b', 'c'],<br/>    'colC': [True, False, False],<br/>    'colD': [10, 20, 30],<br/>})</span><span id="40bc" class="la lb iu nl b gz ob ny l nz oa">print(df)<br/>#    colA colB   colC  colD<br/># 0     1    a   True    10<br/># 1     2    b  False    20<br/># 2     3    c  False    30</span></pre></div><div class="ab cl nm nn hy no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="in io ip iq ir"><h2 id="0172" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">使用切片</h2><p id="f1c9" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">最简单的方法是使用一个列表分割原始数据帧，该列表包含您希望它们遵循的新顺序的列名:</p><pre class="kk kl km kn gu nt nl nu nv aw nw bi"><span id="6aa4" class="la lb iu nl b gz nx ny l nz oa"><strong class="nl iv">df = df[['colD', 'colB', 'colC', 'colA']]</strong></span><span id="c7d1" class="la lb iu nl b gz ob ny l nz oa">print(df)<br/>#    colD colB   colC  colA<br/># 0    10    a   True     1<br/># 1    20    b  False     2<br/># 2    30    c  False     3</span></pre><p id="5642" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">如果您想对大多数列的名称进行重新排序，这种方法可能已经足够好了(而且您的数据框架可能有太多的列)。</p></div><div class="ab cl nm nn hy no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="in io ip iq ir"><h2 id="c628" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">使用insert()方法</h2><p id="03e5" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">如果您需要<strong class="ly iv">将列插入数据帧的指定位置</strong>，那么<code class="fe ni nj nk nl b"><a class="ae kz" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.insert.html" rel="noopener ugc nofollow" target="_blank">pandas.DataFrame.insert()</a></code>应该可以做到。但是，您应该确保首先将该列从原始数据帧中取出，否则将出现一个带有以下消息的<code class="fe ni nj nk nl b">ValueError</code>:</p><pre class="kk kl km kn gu nt nl nu nv aw nw bi"><span id="18a8" class="la lb iu nl b gz nx ny l nz oa">ValueError: cannot insert column_name, already exists</span></pre><p id="1a54" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">因此，在调用<code class="fe ni nj nk nl b">insert()</code>之前，我们首先需要对数据帧执行<code class="fe ni nj nk nl b"><a class="ae kz" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.pop.html" rel="noopener ugc nofollow" target="_blank">pop()</a></code>操作，以便从原始数据帧中删除该列并保留其信息。例如，如果我们想将<code class="fe ni nj nk nl b">colD</code>作为框架的第一列，我们首先需要<code class="fe ni nj nk nl b">pop()</code>该列，然后将其插回，这次是插入到所需的索引。</p><pre class="kk kl km kn gu nt nl nu nv aw nw bi"><span id="d6db" class="la lb iu nl b gz nx ny l nz oa"><strong class="nl iv">col = df.pop("colD")<br/>df.insert(0, col.name, col)</strong><br/></span><span id="ae07" class="la lb iu nl b gz ob ny l nz oa">print(df)<br/>#    colD  colA colB   colC<br/># 0    10     1    a   True<br/># 1    20     2    b  False<br/># 2    30     3    c  False</span></pre></div><div class="ab cl nm nn hy no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="in io ip iq ir"><h2 id="f2c1" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">使用set_index()方法</h2><p id="475e" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">如果你想把一列移到熊猫数据框的前面，那么<code class="fe ni nj nk nl b"><a class="ae kz" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.set_index.html" rel="noopener ugc nofollow" target="_blank">set_index()</a></code>就是你的朋友。</p><p id="9fc1" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">首先，您指定我们希望移到前面的列作为数据帧的索引，然后重置索引，以便旧的索引作为一列添加，并使用新的顺序索引。同样，请注意我们如何<code class="fe ni nj nk nl b">pop()</code>在将列添加为索引之前删除它。这是必需的，否则当试图使旧索引成为数据帧的第一列时会发生名称冲突。</p><pre class="kk kl km kn gu nt nl nu nv aw nw bi"><span id="5832" class="la lb iu nl b gz nx ny l nz oa"><strong class="nl iv">df.set_index(df.pop('colD'), inplace=True)</strong></span><span id="60f7" class="la lb iu nl b gz ob ny l nz oa">#       colA colB   colC <br/># colD<br/># 10       1    a   True<br/># 20       2    b  False<br/># 30       3    c  False</span><span id="3761" class="la lb iu nl b gz ob ny l nz oa"><strong class="nl iv">df.reset_index(inplace=True)</strong></span><span id="5beb" class="la lb iu nl b gz ob ny l nz oa">#    colD  colA colB   colC<br/># 0    10     1    a   True<br/># 1    20     2    b  False<br/># 2    30     3    c  False</span></pre></div><div class="ab cl nm nn hy no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="in io ip iq ir"><h2 id="161b" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">使用reindex()方法</h2><p id="6bfc" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">最后，如果您想要<strong class="ly iv">按照您希望的顺序指定列索引</strong>(例如按字母顺序)，您可以使用<code class="fe ni nj nk nl b"><a class="ae kz" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.reindex.html" rel="noopener ugc nofollow" target="_blank">reindex()</a></code>方法使数据帧符合新的索引。</p><p id="d7a5" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">例如，假设我们需要按字母降序排列列名</p><pre class="kk kl km kn gu nt nl nu nv aw nw bi"><span id="e6fc" class="la lb iu nl b gz nx ny l nz oa"><strong class="nl iv">df = df.reindex(columns=sorted(df.columns, reverse=True))</strong></span><span id="a69d" class="la lb iu nl b gz ob ny l nz oa">#    colD   colC colB  colA<br/># 0    10   True    a     1<br/># 1    20  False    b     2<br/># 2    30  False    c     3</span></pre><p id="9f57" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">请注意，上述内容相当于</p><pre class="kk kl km kn gu nt nl nu nv aw nw bi"><span id="8635" class="la lb iu nl b gz nx ny l nz oa">df.reindex(sorted(df.columns, reverse=True), axis='columns')</span></pre></div><div class="ab cl nm nn hy no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="in io ip iq ir"><h2 id="5765" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">最后的想法</h2><p id="787c" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在今天的简短指南中，我们讨论了如何以多种不同的方式改变熊猫数据帧中的列顺序。确保根据您的具体要求选择正确的方法。</p></div><div class="ab cl nm nn hy no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="in io ip iq ir"><p id="e3cd" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated"><strong class="ly iv">你可能也会喜欢</strong></p><div class="oc od gq gs oe of"><a rel="noopener follow" target="_blank" href="/how-to-delete-a-column-in-pandas-cc4120dbfc25"><div class="og ab fp"><div class="oh ab oi cl cj oj"><h2 class="bd iv gz z fq ok fs ft ol fv fx it bi translated">如何删除熊猫中的一个栏目</h2><div class="om l"><h3 class="bd b gz z fq ok fs ft ol fv fx dk translated">从pandas数据框架中删除列</h3></div><div class="on l"><p class="bd b dl z fq ok fs ft ol fv fx dk translated">towardsdatascience.com</p></div></div><div class="oo l"><div class="op l oq or os oo ot kt of"/></div></div></a></div><div class="oc od gq gs oe of"><a rel="noopener follow" target="_blank" href="/easter-eggs-in-python-f32b284ef0c5"><div class="og ab fp"><div class="oh ab oi cl cj oj"><h2 class="bd iv gz z fq ok fs ft ol fv fx it bi translated">蟒蛇皮复活节彩蛋</h2><div class="om l"><h3 class="bd b gz z fq ok fs ft ol fv fx dk translated">探索八个用Python包装的复活节彩蛋</h3></div><div class="on l"><p class="bd b dl z fq ok fs ft ol fv fx dk translated">towardsdatascience.com</p></div></div><div class="oo l"><div class="ou l oq or os oo ot kt of"/></div></div></a></div><div class="oc od gq gs oe of"><a rel="noopener follow" target="_blank" href="/whats-the-difference-between-shallow-and-deep-copies-in-python-ceee1e061926"><div class="og ab fp"><div class="oh ab oi cl cj oj"><h2 class="bd iv gz z fq ok fs ft ol fv fx it bi translated">Python中浅拷贝和深拷贝有什么区别？</h2><div class="om l"><h3 class="bd b gz z fq ok fs ft ol fv fx dk translated">Python中的copy()与deepcopy()</h3></div><div class="on l"><p class="bd b dl z fq ok fs ft ol fv fx dk translated">towardsdatascience.com</p></div></div><div class="oo l"><div class="ov l oq or os oo ot kt of"/></div></div></a></div></div></div>    
</body>
</html>