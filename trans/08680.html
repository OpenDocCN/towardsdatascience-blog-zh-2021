<html>
<head>
<title>4 Little Known Magic Commands That Boost Your Productivity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">4个鲜为人知的神奇命令可以提高你的工作效率</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/4-little-known-magic-commands-that-boost-your-productivity-af1ba4268c57?source=collection_archive---------32-----------------------#2021-08-10">https://towardsdatascience.com/4-little-known-magic-commands-that-boost-your-productivity-af1ba4268c57?source=collection_archive---------32-----------------------#2021-08-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="49f2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">释放iPython笔记本电脑的全部功能</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/63eba0280e2fca050b6a3d403fd6df46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mu0JMbHurAt4DErVS1h4JQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@dollargill?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">美元吉尔</a>在<a class="ae kv" href="https://unsplash.com/s/photos/magic?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="d5bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">神奇的命令已经成为每个使用数据科学笔记本的人的主食。通过扩展每台笔记本电脑的功能，他们的目标是提高笔记本电脑的工作效率。其中一些神奇的命令，如打印CPU和挂钟时间的<code class="fe ls lt lu lv b">%time</code>魔术，已经变得相当流行，而其他的在很大程度上一直在雷达下飞行。本文将重点介绍鲜为人知的神奇命令，而不是重新介绍最流行的神奇命令，这些命令可以为任何iPython环境增加巨大的价值。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h2 id="629e" class="md me iq bd mf mg mh dn mi mj mk dp ml lf mm mn mo lj mp mq mr ln ms mt mu mv bi translated">带有%%prun的配置文件代码</h2><p id="531a" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">虽然更广为人知的神奇命令<code class="fe ls lt lu lv b">%time</code>和<code class="fe ls lt lu lv b">%timeit</code>为Python代码提供了一些关于CPU和挂钟时间的信息，但它们无法分解代码的哪一部分执行了多长时间，这使得调试具有多个函数调用的单元更加繁琐。<code class="fe ls lt lu lv b">%prun</code>(行模式)和<code class="fe ls lt lu lv b">%%prun</code>(单元格模式)通过Python的分析器运行代码，并提供每个函数调用所用时间的详细信息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/e67566e22351fd7007dab8e9597c2310.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1uoX295ILC_Uzt_nw77Hsg.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">%%prun示例；由作者创建</p></figure><p id="4d3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">%%prun</code>并不仅仅显示单元运行的总时间，而是详细描述了函数被调用的频率以及这些调用运行了多长时间。在上面的例子中，调用了两个函数。但是，其中一个功能的运行时间要比另一个长得多。神奇的命令<code class="fe ls lt lu lv b">%%prun</code>显示<code class="fe ls lt lu lv b">firstFunction()</code>运行了0.722秒，而<code class="fe ls lt lu lv b">secondFunction()</code>只花了0.007秒。</p><h2 id="9b2e" class="md me iq bd mf mg mh dn mi mj mk dp ml lf mm mn mo lj mp mq mr ln ms mt mu mv bi translated">查看%more文件</h2><p id="2207" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">下载文件后，使用笔记本通常会迫使用户在单独的文本编辑器中打开文件，以确定使用了哪个分隔符、日期格式或空值占位符。神奇的命令<code class="fe ls lt lu lv b">%more</code>允许用户专注于他们的笔记本环境，并在编码时检查文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/387ba4f71cd379a53f412c40e3a92441.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*jTYvNOs7DbgyEajnCafjkQ.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">%更多示例；由作者创建</p></figure><p id="5cf0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然<code class="fe ls lt lu lv b">%more</code>没有假定文件是任何特定的类型，但是<code class="fe ls lt lu lv b">%pycat</code>假定文件是Python文件，并且还提供语法高亮。同样值得注意的是，<code class="fe ls lt lu lv b">%pycat</code>接受文件路径和URL。</p><h2 id="ed74" class="md me iq bd mf mg mh dn mi mj mk dp ml lf mm mn mo lj mp mq mr ln ms mt mu mv bi translated">使用%%debug进行交互式调试</h2><p id="6acc" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">虽然打印似乎仍然是笔记本中最常用的调试方法之一，但是Python已经自带了一个更加强大的调试器。神奇的命令<code class="fe ls lt lu lv b">%%debug</code>使用户能够交互式地使用Python的pdb调试器，并更快地找到bug。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/5ed81df7d6015048398fba80149bdb4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Wcbsurf1A23Gp9AG-g07pg.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">% %调试示例；由作者创建</p></figure><p id="81ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的例子中，Python的调试器允许使用<code class="fe ls lt lu lv b">s</code>命令逐步运行函数<code class="fe ls lt lu lv b">myFunc()</code>。遇到<code class="fe ls lt lu lv b">TypeError</code>后，<code class="fe ls lt lu lv b">a</code>命令列出当前函数调用中使用的所有参数，并显示<code class="fe ls lt lu lv b">y</code>参数导致了异常。</p><h2 id="a62e" class="md me iq bd mf mg mh dn mi mj mk dp ml lf mm mn mo lj mp mq mr ln ms mt mu mv bi translated">用%autocall实现快速函数调用</h2><p id="2fcc" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">当速度是唯一重要的事情时，使用<code class="fe ls lt lu lv b">%autocall 1</code>打开自动调用有助于显著加快原型制作。当autocall设置为<em class="nc">‘智能’</em>时，笔记本用户不再需要传递括号内的函数参数。使用上述<code class="fe ls lt lu lv b">%%debug</code>示例中的函数，autocall使用户能够使用<code class="fe ls lt lu lv b">myFunc 1,2</code>而不是<code class="fe ls lt lu lv b">myFunc(1,2)</code>来调用函数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/4696618e371fea827b5baceda8c80fd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*MYW0ElUA5ak15w2vMkzlTQ.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">%autocall示例；由作者创建</p></figure><p id="8042" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然autocall支持更快的原型开发，但重要的是要记住，它可能会降低生成的代码的可读性。</p><h1 id="a04b" class="nd me iq bd mf ne nf ng mi nh ni nj ml jw nk jx mo jz nl ka mr kc nm kd mu nn bi translated">摘要</h1><p id="fe2b" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">在使用数据科学笔记本电脑时，Magic commands是提高工作效率的绝佳工具，其功能远远超出了人们的预期。虽然本文中的四个神奇命令已经可以极大地提高生产率，但哪个神奇命令最有用通常取决于用户和手边的特定用例。幸运的是，在<code class="fe ls lt lu lv b">%quickref</code>中甚至有一个魔法命令来帮助用户在不离开笔记本环境的情况下试验魔法命令。此外，<a class="ae kv" href="https://ipython.readthedocs.io/en/stable/interactive/magics.html" rel="noopener ugc nofollow" target="_blank"> iPython文档</a>详细介绍了魔术命令的所有可用选项，以及如何通过构建定制魔术命令来扩展生态系统。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><p id="cf62" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nc">来源:</em></p><p id="fe63" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[1]“内置魔法命令。”IPython 7.26.0文档。2021年8月8日接入。<a class="ae kv" href="https://ipython.readthedocs.io/en/stable/interactive/magics.html." rel="noopener ugc nofollow" target="_blank">https://ipython . readthedocs . io/en/stable/interactive/magics . html</a></p><p id="0b34" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[2]“Pdb—Python调试器。”Python 3.9.6文档。2021年8月8日接入。https://docs.python.org/3/library/pdb.html.<a class="ae kv" href="https://docs.python.org/3/library/pdb.html." rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>