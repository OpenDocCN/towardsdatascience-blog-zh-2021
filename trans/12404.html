<html>
<head>
<title>A Practical Guide to ARIMA Models using PyCaret — Part 4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 PyCaret 的 ARIMA 模型实用指南—第 4 部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-practical-guide-to-arima-models-using-pycaret-part-4-d595da232540?source=collection_archive---------13-----------------------#2021-12-17">https://towardsdatascience.com/a-practical-guide-to-arima-models-using-pycaret-part-4-d595da232540?source=collection_archive---------13-----------------------#2021-12-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6160" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">结合“趋势”和“差异”术语</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/baa80f11841775b04e465dc53b83b6f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XQ0WTej-DaN-PsPa"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·斯皮斯克在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h2 id="a649" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">📚介绍</h2><p id="b9fe" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">在本系列的前几篇文章中，我们分别看到了趋势项和差异项对 ARIMA 模型输出的影响。本文将着眼于这两个术语的组合效果以及它们是如何建模的。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h2 id="bd7d" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">📖建议的先前阅读</h2><p id="e435" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">本系列以前的文章可以在下面找到。我建议读者在继续阅读本文之前先阅读这些内容。本文建立在前几篇文章中描述的概念的基础上，并重用了其中开发的框架。</p><p id="2ca2" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated"><a class="ae ky" href="https://medium.com/towards-data-science/understanding-arima-models-using-pycarets-time-series-module-part2-308ea7bfecf6" rel="noopener">使用 PyCaret 的 ARIMA 模型实用指南—第二部分</a>(趋势术语)</p><p id="e7b3" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">使用 PyCaret 的 ARIMA 模型实用指南—第 3 部分(差异项)</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h2 id="aa18" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">1️⃣将“差异-d”项与趋势分量相结合</h2><p id="43ef" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">当开发具有趋势和差异项的 ARIMA 模型时，模型方程表示如下(对于 d = 1)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/1dc53895460037de51ea8bd13fa22abc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XMxygAQ3YnRVVMfe.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带趋势项的 d=1 的 ARIMA 方程(图片由作者使用<a class="ae ky" href="https://latex2png.com/" rel="noopener ugc nofollow" target="_blank">https://latex2png.com/</a>)</p></figure><p id="c5be" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">读者会注意到，这是本系列前几篇文章中的差异和趋势术语的简单线性组合。和以前一样，用户可以选择指定如何对趋势进行建模。有 3 种方法可以对其建模— (1)仅使用截距项“a”，(2)仅使用漂移项“b”，或者(3)同时使用截距项和漂移项。我们将在本文中看到这三个例子。</p><p id="2ea5" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">另一个有趣的观察结果是，如果重新排列等式，如等式 2 所示，趋势项的系数(“a”和“b”)可以通过对数据的一阶差分进行线性回归拟合来获得。我们将使用这个等式来开发模型参数“a”和“b”的理论框架。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/83e08e64e08d55328d104e3bb5fa63f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3e62a5zLgne-EWM3.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">趋势项重排后的 d=1 的 ARIMA 方程(图片由作者使用<a class="ae ky" href="https://latex2png.com/" rel="noopener ugc nofollow" target="_blank">https://latex2png.com/</a>)</p></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h2 id="8902" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">2️⃣️使用 PyCaret 理解趋势项和差异项的组合效应</h2><p id="a3a7" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">👉<strong class="lx iu">步骤 1:设置 PyCaret 时序实验</strong></p><p id="de7c" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">设置与上一篇文章(描述了差异术语)中的设置相同。详细信息可在本文的 Jupyter 笔记本中找到(可在本文末尾找到)。</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="a974" class="kz la it nd b gy nh ni l nj nk"><em class="nl">#### Get data from data playground ----</em><br/>y = get_data("1", <strong class="nd iu">folder="time_series/random_walk"</strong>)</span><span id="ac1b" class="kz la it nd b gy nm ni l nj nk">exp = TimeSeriesExperiment()<br/>exp.setup(data=y, seasonal_period=1, fh=30, session_id=42)</span></pre><p id="f8fe" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">👉<strong class="lx iu">第 2 步:执行 EDA </strong></p><p id="1c9c" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">我们将跳过本文中的 EDA，因为我们已经在本系列的上一篇文章中执行了它。</p><p id="5052" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">👉<strong class="lx iu">第 3 步:理论计算</strong></p><p id="c17b" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">如上所述，我们将使用等式(2)来确定该 ARIMA 模型的模型系数。我们还将模拟三种不同的 ARIMA 模型变体。每个模型将包含第一个差异项和上述趋势选项之一。为了帮助进行理论计算，我们重复使用了前一篇文章中的框架(它只包含第一个差异项)，但此外，我们还对残差进行了线性回归。</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="edde" class="kz la it nd b gy nh ni l nj nk"><strong class="nd iu"><em class="nl"># Get Train &amp; Test Data Properties</em></strong><br/>y_train <strong class="nd iu">=</strong> exp<strong class="nd iu">.</strong>get_config("y_train")<br/>y_test <strong class="nd iu">=</strong> exp<strong class="nd iu">.</strong>get_config("y_test")</span><span id="105d" class="kz la it nd b gy nm ni l nj nk"><strong class="nd iu"><em class="nl"># Compute theoretical prediction for ARIMA(0,1,0)x(0,0,0,0)</em><br/></strong>train_data <strong class="nd iu">=</strong> pd<strong class="nd iu">.</strong>DataFrame({"y":y_train})<br/>train_data['preds'] <strong class="nd iu">=</strong> y_train<strong class="nd iu">.</strong>shift(1)<br/>train_data['split'] <strong class="nd iu">=</strong> "Train"<br/><br/>test_data <strong class="nd iu">=</strong> pd<strong class="nd iu">.</strong>DataFrame({'y': y_test})<br/>test_data['preds'] <strong class="nd iu">=</strong> y_train<strong class="nd iu">.</strong>iloc[<strong class="nd iu">-</strong>1]<br/>test_data['split'] <strong class="nd iu">=</strong> "Test"<br/><br/>data <strong class="nd iu">=</strong> pd<strong class="nd iu">.</strong>concat([train_data, test_data])<br/>data['residuals'] <strong class="nd iu">=</strong> data['y'] <strong class="nd iu">-</strong> data['preds']</span></pre><p id="8b10" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated"><strong class="lx iu"> (1)方法 1:d = 1、trend = "c" </strong>的 ARIMA 模型</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="612a" class="kz la it nd b gy nh ni l nj nk">y_for_lr <strong class="nd iu">=</strong> data<strong class="nd iu">.</strong>query("split=='Train'")['residuals']<strong class="nd iu">.</strong>dropna()<br/>y_for_lr<strong class="nd iu">.</strong>mean()</span><span id="c25e" class="kz la it nd b gy nm ni l nj nk"><strong class="nd iu"><em class="nl">&gt;&gt;&gt; 0.020172890811799432</em></strong></span></pre><p id="f901" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">因此，对于 d=1 且趋势= "c "的模型，我们预计" c "的值= 0.02017。</p><p id="670e" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated"><strong class="lx iu"> (2)方法 2:d = 1、trend = "t "的 ARIMA 模型</strong></p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="6866" class="kz la it nd b gy nh ni l nj nk">y_for_lr <strong class="nd iu">=</strong> data<strong class="nd iu">.</strong>query("split=='Train'")['residuals']<strong class="nd iu">.</strong>dropna()<br/>X_train <strong class="nd iu">=</strong> np<strong class="nd iu">.</strong>arange(1, len(y_for_lr)<strong class="nd iu">+</strong>1)<strong class="nd iu">.</strong>reshape(<strong class="nd iu">-</strong>1, 1)<br/><br/>reg <strong class="nd iu">=</strong> LinearRegression(fit_intercept<strong class="nd iu">=False</strong>)<strong class="nd iu">.</strong>fit(X_train, y_for_lr)<br/>print(f"Expected Intercept: {reg<strong class="nd iu">.</strong>intercept_}")<br/>print(f"Expected Slope: {reg<strong class="nd iu">.</strong>coef_}")</span><span id="1596" class="kz la it nd b gy nm ni l nj nk"><strong class="nd iu"><em class="nl">&gt;&gt;&gt; Expected Intercept: 0.0<br/>&gt;&gt;&gt; Expected Slope: [0.00018524]</em></strong></span></pre><p id="4d1c" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">对于 d=1 且趋势= "t "的模型，我们预计漂移" b "的值= 0.00018524。</p><p id="6a93" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated"><strong class="lx iu"> (3)方法 3:d = 1、trend = "ct "的 ARIMA 模型</strong></p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="71bd" class="kz la it nd b gy nh ni l nj nk">y_for_lr <strong class="nd iu">=</strong> data<strong class="nd iu">.</strong>query("split=='Train'")['residuals']<strong class="nd iu">.</strong>dropna()<br/>X_train <strong class="nd iu">=</strong> np<strong class="nd iu">.</strong>arange(1, len(y_for_lr)<strong class="nd iu">+</strong>1)<strong class="nd iu">.</strong>reshape(<strong class="nd iu">-</strong>1, 1)<br/><br/>reg <strong class="nd iu">=</strong> LinearRegression(fit_intercept<strong class="nd iu">=True</strong>)<strong class="nd iu">.</strong>fit(X_train, y_for_lr)<br/>print(f"Expected Intercept: {reg<strong class="nd iu">.</strong>intercept_}")<br/>print(f"Expected Slope: {reg<strong class="nd iu">.</strong>coef_}")</span><span id="8ddf" class="kz la it nd b gy nm ni l nj nk"><strong class="nd iu"><em class="nl">&gt;&gt;&gt; Expected Intercept: -0.03432448539897173<br/>&gt;&gt;&gt; Expected Slope: [0.0003516]</em></strong></span></pre><p id="b2b8" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">对于 d=1 且趋势= "ct "的模型，我们预期常数" a" = -0.0343 和漂移" b "的值= 0.0003516。</p><p id="6918" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">👉<strong class="lx iu">第 4 步:建模</strong></p><p id="3de3" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">现在，我们已经讨论了理论计算，让我们使用 PyCaret 构建这些模型，并在实践中观察它们的输出。</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="81f8" class="kz la it nd b gy nh ni l nj nk"><strong class="nd iu"># Model with d = 1 and Trend = "c" ----</strong><br/>model3b <strong class="nd iu">=</strong> exp<strong class="nd iu">.</strong>create_model(<br/>    "arima",<br/>    order<strong class="nd iu">=</strong>(0, 1, 0),<br/>    trend<strong class="nd iu">=</strong>"c"<br/>)</span><span id="2e55" class="kz la it nd b gy nm ni l nj nk"><strong class="nd iu"># Model with d = 1 and Trend = "t" ----<br/></strong>model3c <strong class="nd iu">=</strong> exp<strong class="nd iu">.</strong>create_model(<br/>    "arima",<br/>    order<strong class="nd iu">=</strong>(0, 1, 0),<br/>    with_intercept<strong class="nd iu">=True</strong>, trend<strong class="nd iu">=</strong>'t'<br/>)</span><span id="74d3" class="kz la it nd b gy nm ni l nj nk"><strong class="nd iu"># Model with d = 1 and Trend = "ct" ----<br/></strong>model3d <strong class="nd iu">=</strong> exp<strong class="nd iu">.</strong>create_model(<br/>    "arima",<br/>    order<strong class="nd iu">=</strong>(0, 1, 0),<br/>    trend<strong class="nd iu">=</strong>"ct"<br/>)</span></pre><p id="6f1d" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">👉<strong class="lx iu">第 5 步:结果分析</strong></p><p id="e1b3" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">我们将重复使用我们在上一篇文章中创建的帮助器函数来分析结果。</p><p id="d002" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated"><strong class="lx iu"> (1)方法 1:d = 1、trend = "c "的 ARIMA 模型</strong></p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="00b3" class="kz la it nd b gy nh ni l nj nk"><strong class="nd iu">summarize_model</strong>(model3b)<br/><strong class="nd iu">get_residual_properties</strong>(model3b)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/64ee6f59d84f106a8d36fe04dbc746ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*QISh8oJXwUDoZuHeMKD-BA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">模型 3B 统计摘要[作者图片]</p></figure><p id="0dc7" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">统计概要显示，创建的模型是一个带有“截距”项的<code class="fe no np nq nd b">SARIMAX(0,1,0)</code>模型。该模型的截距值为 0.0202，与我们的理论计算相符(注意，上面的显示显示了四舍五入的结果)。残差 sigma2(无法解释的方差)为 0.9788，代表等式 1 中的<code class="fe no np nq nd b">epsilon</code>项。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/678712633b91abdc3de21a9ba79f63c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vgSQ_pK38tumqLfz3tBSsg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">模型 3B 残差[作者图像]</p></figure><p id="413e" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">查看模型残差，我们可以看到残差的方差确实为 0.9788，这与统计汇总相符。接下来，让我们绘制预测图，并将其与我们的理论框架进行比较。</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="dc16" class="kz la it nd b gy nh ni l nj nk"><strong class="nd iu">plot_predictions</strong>(model3b)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/ef417158d3d2f5dafeaf0be0d0e2d6bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y7XKAs7FrC_lfELAD7C89g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">基于样本预测的 3B 模型[作者图片]</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/6089eb734bd0a167cbe03ef201fad2ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nuNNShcyhA9N3zlC_885Eg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">模型 3B 样本内预测[作者图片]</p></figure><p id="308a" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">由于计算预测值的方程(方程 1)比以前的文章更复杂，所以我构建了一个小型 excel 计算器来计算理论预测值(列“Pred(计算)”)，并将它们与模型预测值(列“Pred”)进行比较。它们完全匹配(“匹配”列)。此外，请注意，上面的计算器包含样本内点(例如，索引 0、1、2、3、4……)，以及样本外预测(索引 310、311、312……)。PyCaret 中的交互式绘图使用户可以非常容易地放大和验证各个时间点的值，以交叉检查答案。</p><p id="8c69" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated"><strong class="lx iu">注意:</strong>我只展示了样本内和样本外预测的一小部分。读者可能希望延伸到更多的点，以加强他们的理解。excel 可以在本文的末尾(在“参考资料”一节中)找到。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/edf719cc0d41b7d6b77e404d2124a12c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rrwR85XNZ2ptL-ItDyh8-A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">模型 3B 理论预测计算[图片由作者提供]</p></figure><p id="ef62" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated"><strong class="lx iu"> (2)方法二:d=1 且 trend = "t" </strong>的 ARIMA 模型</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="0497" class="kz la it nd b gy nh ni l nj nk"><strong class="nd iu">summarize_model</strong>(model3c)<br/><strong class="nd iu">get_residual_properties</strong>(model3c)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/6fb522c61b0bfa65993cf1d90db37f92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*uZH_oh0ecdlRZKZLoJnjLg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">模型 3C 统计摘要[图片由作者提供]</p></figure><p id="4cba" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">统计汇总显示，创建的模型是一个带有“漂移”项的<code class="fe no np nq nd b">SARIMAX(0,1,0)</code>模型。模型的漂移值 0.0002 与我们的理论计算相匹配(注意，上面显示的是四舍五入后的结果)。残差σ2(未解释方差)为 0.9781，代表等式 1 中的<code class="fe no np nq nd b">epsilon</code>项。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/731d2f0de857316f508c71e7a5bf0e2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q2JEzh5zbroW_G2UFtMs1A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">模型 3C 残差[图片由作者提供]</p></figure><p id="84f7" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">查看模型残差，我们可以看到残差确实具有 0.9781 的方差，这与统计汇总相匹配。接下来，让我们绘制预测图，并将其与我们的理论框架进行比较。</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="1374" class="kz la it nd b gy nh ni l nj nk"><strong class="nd iu">plot_predictions</strong>(model3c)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/9ccf04829c8c95b26facbda5b3198aa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MHnRfB71TQFQe6ReS1cTfA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从样本预测中模拟 3C[图片由作者提供]</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/58f9daaab153bed45d7de3f6320d8dc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5jECayNBbWcRh61v0yKyhQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">模型 3C 样本内预测[图片由作者提供]</p></figure><p id="0b90" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">同样，excel 计算器用于对照模型输出检查理论预测(这次使用斜率项“b”来匹配理论“漂移”值)。同样，由“Pred(计算)”列表示的理论预测(样本内和样本外)与由“Pred”列表示的模型输出相匹配。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/c33a1b55b3185ab96bbdb4e89d0a354a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Gb8nz0wBJey-VzgwJ9tkA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">模型 3C 理论预测计算[图片由作者提供]</p></figure><p id="06bc" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated"><strong class="lx iu"> (3)方法三:d=1 且 trend = "ct" </strong>的 ARIMA 模型</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="1f21" class="kz la it nd b gy nh ni l nj nk"><strong class="nd iu">summarize_model</strong>(model3d)<br/><strong class="nd iu">get_residual_properties</strong>(model3d)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/1c2b984fe7f80615eec84612dc367303.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*EgQSlCTLhvi5-Biuw2Cnqw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">模型 3D 统计摘要[图片由作者提供]</p></figure><p id="c6ee" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">统计概要表明，所创建的模型是一个既有“截距”又有“漂移”项的<code class="fe no np nq nd b">SARIMAX(0,1,0)</code>模型。模型中的值(截距=-0.0343 和漂移= 0.0004)与我们的理论计算相匹配(注意，上面显示的是四舍五入的结果)。残差σ2(未解释方差)为 0.9778，代表等式 1 中的<code class="fe no np nq nd b">epsilon</code>项。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/1e6069331ebc7a030c5e7459630d7671.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CebC2PGMx3R05tnAUUWyMA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">3D 残差模型[图片由作者提供]</p></figure><p id="aaad" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">查看模型残差，我们可以看到残差确实具有 0.9778 的方差，这与统计汇总相匹配。接下来，让我们绘制预测图，并将其与我们的理论框架进行比较。</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="fdee" class="kz la it nd b gy nh ni l nj nk"><strong class="nd iu">plot_predictions</strong>(model3d)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/75d72ebb3312a57df54e73d3e3fed87e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TvPS5I01JmB8dc2ZC9fKtw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">样本预测的 3D 模型[图片由作者提供]</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/794cbc4502233653b09397a9e068870b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4hoDc7JaUy8o47jYAVfYBQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">模型 3D 样本内预测[图片由作者提供]</p></figure><p id="c294" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">同样，excel 计算器用于对照模型输出检查理论预测(这次使用截距项“a”和斜率项“b”)。同样，由“Pred(计算)”列表示的理论预测(样本内和样本外)与由“Pred”列表示的模型输出相匹配。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/ac4342243b945930f703b2c4e8a41f4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZxMPYM8pvGhTUbOpXqqmvw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">模型 3D 理论预测计算[图片由作者提供]</p></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="dac7" class="oe la it bd lb of og oh le oi oj ok lh jz ol ka ll kc om kd lp kf on kg lt oo bi translated">🚀结论</h1><p id="6c5a" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">现在我们有了。我们将乐高风格的积木(“趋势”和“差异”术语)组合成一个更复杂的模型。希望这个简单的框架为我们理解这些术语在 ARIMA 模型中如何相互作用打下了良好的基础。在下一篇文章中，我们将看到季节参数“s”和季节差异“D”的影响。在那之前，如果你愿意在我的社交渠道上与我联系(我经常发布关于时间序列分析的文章)，你可以在下面找到我。暂时就这样了。预测快乐！</p><p id="957f" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">🔗<a class="ae ky" href="https://www.linkedin.com/in/guptanick/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a></p><p id="8bc9" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">🐦<a class="ae ky" href="https://twitter.com/guptanick13" rel="noopener ugc nofollow" target="_blank">推特</a></p><p id="c909" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">📘<a class="ae ky" href="https://github.com/ngupta23" rel="noopener ugc nofollow" target="_blank"> GitHub </a></p><p id="6b6b" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated"><em class="nl">喜欢这篇文章吗？成为</em> <a class="ae ky" href="https://ngupta13.medium.com/membership" rel="noopener"> <strong class="lx iu"> <em class="nl">中等会员</em> </strong> </a> <em class="nl">继续</em> <strong class="lx iu"> <em class="nl">无限制学习</em> </strong> <em class="nl">。如果你使用下面的链接，</em> <strong class="lx iu"> <em class="nl">，我会收到你的一部分会员费，而不会给你带来额外的费用</em> </strong> <em class="nl">。</em></p><div class="op oq gp gr or os"><a href="https://ngupta13.medium.com/membership" rel="noopener follow" target="_blank"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd iu gy z fp ox fr fs oy fu fw is bi translated">通过我的推荐链接加入媒体- Nikhil Gupta</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">阅读 Nikhil Gupta(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">ngupta13.medium.com</p></div></div><div class="pb l"><div class="pc l pd pe pf pb pg ks os"/></div></div></a></div></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="817c" class="oe la it bd lb of og oh le oi oj ok lh jz ol ka ll kc om kd lp kf on kg lt oo bi translated">📗资源</h1><ol class=""><li id="52ee" class="ph pi it lx b ly lz mb mc li pj lm pk lq pl mn pm pn po pp bi translated"><a class="ae ky" href="https://nbviewer.ipython.org/github/ngupta23/medium_articles/blob/main/time_series/pycaret/pycaret_ts_arima_010_0000.ipynb" rel="noopener ugc nofollow" target="_blank"> <strong class="lx iu"> Jupyter 笔记本</strong> </a>包含这篇文章的代码</li><li id="1f00" class="ph pi it lx b ly pq mb pr li ps lm pt lq pu mn pm pn po pp bi translated"><a class="ae ky" href="https://github.com/ngupta23/medium_articles/blob/main/time_series/pycaret/pycaret_ts_arima_010_0000.xlsx" rel="noopener ugc nofollow" target="_blank"> <strong class="lx iu"> Excel 计算器</strong> </a>进行理论预测。</li></ol></div></div>    
</body>
</html>