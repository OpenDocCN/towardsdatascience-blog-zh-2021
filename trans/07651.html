<html>
<head>
<title>The Easiest Way to Adjust Your Data for Inflation in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Python中调整通货膨胀数据的最简单方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-easiest-way-to-adjust-your-data-for-inflation-in-python-365490c03969?source=collection_archive---------15-----------------------#2021-07-13">https://towardsdatascience.com/the-easiest-way-to-adjust-your-data-for-inflation-in-python-365490c03969?source=collection_archive---------15-----------------------#2021-07-13</a></blockquote><div><div class="fc ij ik il im in"/><div class="io ip iq ir is"><figure class="iu iv gp gr iw ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi it"><img src="../Images/eb4ef59d0ebe7cadffc9ded0f7aa9d98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uD9rnci_X-yVHHkThuaj_w.jpeg"/></div></div><p class="je jf gj gh gi jg jh bd b be z dk translated">由<a class="ae ji" href="https://unsplash.com/@stereophototyp?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">萨拉·库菲</a>在<a class="ae ji" href="https://unsplash.com/s/photos/inflation?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><div class=""/><div class=""><h2 id="e563" class="pw-subtitle-paragraph ki jk jl bd b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dk translated">有了cpi库，你只用一行代码就可以做到！</h2></div><p id="7de6" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">通货膨胀——这个词我们几乎每天都能在新闻中听到。我们知道，长话短说，通货膨胀意味着我们的钱随着时间的推移越来越不值钱。但是减少多少以及如何调整通货膨胀的数值呢？在本文中，我将通过展示如何在Python中处理通货膨胀来回答这些问题。但是首先…</p><h1 id="3666" class="lw lx jl bd ly lz ma mb mc md me mf mg kr mh ks mi ku mj kv mk kx ml ky mm mn bi translated">一点理论</h1><p id="a31c" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">我不会花太多时间来写关于通货膨胀及其后果的经济学理论，因为这是一篇具有不同焦点的更长文章的主题。用一句话来定义<strong class="lc jm">通货膨胀</strong>——它是一个经济体在一段时间内价格水平的总体上升。这意味着，当总体价格水平上升时，每种货币单位(无论是美元、欧元等。)我们可以购买更少单位的某些商品或服务。这就是之前提到的货币购买力的下降。</p><p id="2f54" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">我们用<strong class="lc jm">通货膨胀率</strong>来衡量通货膨胀，通货膨胀率是一般价格指数，最常见的是消费者价格指数(CPI)的年度百分比变化。</p><p id="d2c5" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">我们需要再定义两个术语，以便于分析。第一个是<strong class="lc jm">当前美元</strong>。它是指从实际登记货币价值的时期开始的价值。或者，它是没有经过通货膨胀调整的值。第二项是<strong class="lc jm">实际美元</strong>，即经通胀调整后的价值。</p><p id="2a4f" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">利用消费物价指数调整通货膨胀价格的一般公式是:</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="3022" class="nc lx jl my b gy nd ne l nf ng">real_dollars = (current_dollars * cpi_new) / cpi_old</span></pre><p id="2071" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">这是理论，让我们进入动手部分！</p><h1 id="a333" class="lw lx jl bd ly lz ma mb mc md me mf mg kr mh ks mi ku mj kv mk kx ml ky mm mn bi translated">Python中的示例</h1><h2 id="ae1e" class="nc lx jl bd ly nh ni dn mc nj nk dp mg lj nl nm mi ln nn no mk lr np nq mm nr bi translated">设置</h2><p id="2ca3" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">像往常一样，我们导入所需的库。</p><figure class="mt mu mv mw gt ix"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="06ca" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">对于本文，我们将使用<code class="fe nu nv nw my b">cpi</code>库来调整美元值，这比手动下载CPI数据并调整值要容易得多。要记住的一件事是，这个图书馆只使用美元。对于其他货币，您必须手动调整数据或找到一个替代库。</p><p id="25bd" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">导入库时，我们可能会看到以下警告:</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="1597" class="nc lx jl my b gy nd ne l nf ng">StaleDataWarning: CPI data is out of date. To accurately inflate to today’s dollars, you must run `cpi.update()`.</span></pre><p id="9d0e" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">这是不言自明的，我们需要运行以下命令来获取最新的CPI数据。</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="817b" class="nc lx jl my b gy nd ne l nf ng">cpi.update()</span></pre><p id="20ba" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">我们现在准备调整通货膨胀的美元价值。</p><h2 id="4436" class="nc lx jl bd ly nh ni dn mc nj nk dp mg lj nl nm mi ln nn no mk lr np nq mm nr bi translated">cpi的基本操作</h2><p id="5011" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated"><code class="fe nu nv nw my b">cpi</code>库最重要的功能是<code class="fe nu nv nw my b">inflate</code>，我们用它来调整通货膨胀的现值。在下面的代码片段中，我们提供了美元价值以及记录美元价值的年份。</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="b3d9" class="nc lx jl my b gy nd ne l nf ng">cpi.inflate(100, 2000)</span><span id="790f" class="nc lx jl my b gy nx ne l nf ng"># 150.2967</span></pre><p id="6174" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">结果意味着，如果某样东西在2000年价值100美元，由于通货膨胀，它在2020年将价值150美元。这是因为该函数的默认设置将使用CPI-U ( <em class="ny">所有城市消费者的消费价格指数</em>)指数将该值调整到最近一整年(在撰写本文时，为2020年)，这是美国劳工统计局推荐的默认值。你可以在这里阅读更多关于指数<a class="ae ji" href="https://www.investopedia.com/terms/c/cpiu.asp" rel="noopener ugc nofollow" target="_blank">的内容。</a></p><p id="fb5e" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">我们还可以指定要将该值调整到的目标年份。</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="0461" class="nc lx jl my b gy nd ne l nf ng">cpi.inflate(100, 2000, <em class="ny">to</em>=2010)</span><span id="11a4" class="nc lx jl my b gy nx ne l nf ng"># 126.6295</span></pre><p id="bbd9" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">我们不限于使用年份。对于逐月调整，我们可以简单地提供<code class="fe nu nv nw my b">datetime.date</code>对象作为参数。</p><p id="52d6" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">最后，我们还可以使用<code class="fe nu nv nw my b">get</code>方法很容易地获得CPI指数的值。</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="365d" class="nc lx jl my b gy nd ne l nf ng">cpi.get(2020)</span><span id="dfc7" class="nc lx jl my b gy nx ne l nf ng"># 258.811</span></pre><h2 id="0638" class="nc lx jl bd ly nh ni dn mc nj nk dp mg lj nl nm mi ln nn no mk lr np nq mm nr bi translated">把cpi和熊猫结合起来</h2><p id="ba70" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">这已经很方便了，但是，在大多数情况下，我们不会对获取单个值感兴趣，而是调整存储在<code class="fe nu nv nw my b">pandas</code>系列/数据框架中的整个系列的值。</p><p id="6917" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">首先，我们需要一些数据。对于这个玩具示例，我们可以使用来自FRED数据库的<a class="ae ji" href="https://fred.stlouisfed.org/series/MEHOINUSA646N" rel="noopener ugc nofollow" target="_blank">美国家庭收入中位数</a>。仔细检查已经应用于数据的调整类型总是有好处的。我们可以在下图中看到，收入系列是以现值美元表示的。</p><figure class="mt mu mv mw gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi nz"><img src="../Images/1bc71555c03f213a1d59df4f6f94bddb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3bDMp6rEYfPqTi1pI70htg.png"/></div></div><p class="je jf gj gh gi jg jh bd b be z dk translated"><a class="ae ji" href="https://fred.stlouisfed.org/series/MEHOINUSA646N" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><p id="202c" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">我们从FRED的网站下载数据，并使用<code class="fe nu nv nw my b">pandas</code>将其加载到Python中。我们还进行了一些重命名，以保持名称有意义，并创建了一个额外的列，从日期中提取年份—我们将使用它来调整当前的美元值。</p><figure class="mt mu mv mw gt ix"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="mt mu mv mw gt ix gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/d1eeb71f2b446dcc75d2cd3d94e6fe88.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*pejLP24OTOMlkgafBs29xA.png"/></div><p class="je jf gj gh gi jg jh bd b be z dk translated">作者图片</p></figure><p id="d299" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">不幸的是，没有内置的功能来迭代使用<code class="fe nu nv nw my b">pandas</code>数据帧。然而，我们可以使用<code class="fe nu nv nw my b">apply</code>方法轻松地自己完成。</p><figure class="mt mu mv mw gt ix"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="df66" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">下面我们可以考察当前和实际美元的美国家庭收入中值。我们可以清楚地看到，这些值收敛到同一个值，但并不完全一致。这是因为收入时间序列在2019年结束，而我们正在调整到2020年。</p><figure class="mt mu mv mw gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi ob"><img src="../Images/d8b11acff3fb3fdb8bfbce2bbe4fb827.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZQPMi7X-yscbGcugVK5n3Q.jpeg"/></div></div><p class="je jf gj gh gi jg jh bd b be z dk translated">作者图片</p></figure><h1 id="4571" class="lw lx jl bd ly lz ma mb mc md me mf mg kr mh ks mi ku mj kv mk kx ml ky mm mn bi translated">外卖食品</h1><ul class=""><li id="c3e4" class="oc od jl lc b ld mo lg mp lj oe ln of lr og lv oh oi oj ok bi translated">通货膨胀是一个经济体在一段时间内平均价格水平的上升。</li><li id="090a" class="oc od jl lc b ld ol lg om lj on ln oo lr op lv oh oi oj ok bi translated">现值美元代表的是记录时的价值，而实际美元是根据通货膨胀调整的。</li><li id="8007" class="oc od jl lc b ld ol lg om lj on ln oo lr op lv oh oi oj ok bi translated">我们可以使用<code class="fe nu nv nw my b">cpi</code>库轻松调整通货膨胀(仅美元)。</li></ul><p id="f6c2" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">你可以在我的<a class="ae ji" href="https://github.com/erykml/medium_articles/blob/master/Data%20Wrangling/cpi.ipynb" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到本文使用的代码。此外，欢迎任何建设性的反馈。你可以在推特或评论中联系我。</p><p id="5ee3" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">如果你有兴趣学习如何使用Python进行量化金融，你可能想看看<a class="ae ji" href="https://www.quantra.quantinsti.com/?ref=eryklewinson" rel="noopener ugc nofollow" target="_blank"> Quantra </a> ( <em class="ny">免责声明:一个附属链接</em>)，它提供了关于这个主题的各种不同的课程。</p><p id="c706" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">如果您喜欢这篇文章，您可能还会对以下内容感兴趣:</p><div class="iu iv gp gr iw oq"><a rel="noopener follow" target="_blank" href="/9-useful-pandas-methods-you-probably-have-not-heard-about-28ff6c0bceee"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd jm gy z fp ov fr fs ow fu fw jk bi translated">你可能没听说过的9种有用的熊猫方法</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">它们可以让你的日常工作更容易、更快捷。</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">towardsdatascience.com</p></div></div><div class="oz l"><div class="pa l pb pc pd oz pe jc oq"/></div></div></a></div><div class="iu iv gp gr iw oq"><a rel="noopener follow" target="_blank" href="/mplfinance-matplolibs-relatively-unknown-library-for-plotting-financial-data-62c1c23177fd"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd jm gy z fp ov fr fs ow fu fw jk bi translated">mpl finance——matplolib相对不为人知的用于绘制金融数据的库</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">包括快速创建图表的方法，如烛台，连科，或点和图</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">towardsdatascience.com</p></div></div><div class="oz l"><div class="pf l pb pc pd oz pe jc oq"/></div></div></a></div><div class="iu iv gp gr iw oq"><a rel="noopener follow" target="_blank" href="/stockstats-a-handy-stocks-oriented-pandas-dataframe-wrapper-a879a06d9c3f"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd jm gy z fp ov fr fs ow fu fw jk bi translated">stock stats——一个方便的面向股票的熊猫数据框架包装器</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">只需调用列名即可访问各种技术指标！</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">towardsdatascience.com</p></div></div><div class="oz l"><div class="pg l pb pc pd oz pe jc oq"/></div></div></a></div><h1 id="ba8a" class="lw lx jl bd ly lz ma mb mc md me mf mg kr mh ks mi ku mj kv mk kx ml ky mm mn bi translated">参考</h1><p id="41d3" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">[1]美国人口普查局，美国家庭收入中值[MEHOINUSA646N]，从圣路易斯美联储银行的FRED处检索；https://fred.stlouisfed.org/series/MEHOINUSA646N, 2021年7月12日。</p></div></div>    
</body>
</html>