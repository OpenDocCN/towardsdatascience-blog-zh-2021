<html>
<head>
<title>9 Reasons Why You Should Start Using Python Dataclasses</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">应该开始使用Python数据类的9个理由</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/9-reasons-why-you-should-start-using-python-dataclasses-98271adadc66?source=collection_archive---------0-----------------------#2021-09-19">https://towardsdatascience.com/9-reasons-why-you-should-start-using-python-dataclasses-98271adadc66?source=collection_archive---------0-----------------------#2021-09-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5e66" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">提高效率，减少样板代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a56958fca4076c6b04fa19cae3a0732c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jJJgoz_ZkjUA9k3OJcG5ww.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="5149" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从3.7版本开始，Python引入了<strong class="la iu">数据类</strong>(参见<a class="ae lu" href="https://www.python.org/dev/peps/pep-0557/" rel="noopener ugc nofollow" target="_blank"> PEP 557 </a>)，这是一个定义包含和封装数据的类的新特性。</p><p id="9926" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我最近开始在几个数据科学项目中使用这个模块，我真的很喜欢它。我马上想到两个原因:</p><ol class=""><li id="cf2c" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt ma mb mc md bi translated"><strong class="la iu">较少的样板代码</strong></li><li id="bd7e" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated"><strong class="la iu">可读性更强，代码可维护性更好</strong></li></ol><blockquote class="mj mk ml"><p id="06aa" class="ky kz mm la b lb lc ju ld le lf jx lg mn li lj lk mo lm ln lo mp lq lr ls lt im bi translated"><strong class="la iu"> <em class="it">这篇文章总结了我的第一印象:我将用它来介绍数据类和它们旨在解决的问题，并介绍它们提供的9个不错的特性。<br/>我有时会将使用dataclasses编写的类与原生Python实现进行比较，找出不同之处。</em> </strong></p></blockquote><p id="e732" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">少说多做。让我们看一看🔍</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><p id="2050" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="mm"> PS:我不会涵盖关于数据类的所有内容，但是我们将介绍的特性应该可以让您快速了解。然而，如果您想要更深入的了解，可以看看参考资料部分的链接。</em></p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><blockquote class="mj mk ml"><p id="1b79" class="ky kz mm la b lb lc ju ld le lf jx lg mn li lj lk mo lm ln lo mp lq lr ls lt im bi translated">新到中？你可以每月订阅5美元，解锁我写的不限数量的关于编程、MLOps和系统设计的文章，以帮助数据科学家(或ML工程师)编写更好的代码。</p></blockquote><div class="mx my gp gr mz na"><a href="https://medium.com/membership/@ahmedbesbes" rel="noopener follow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd iu gy z fp nf fr fs ng fu fw is bi translated">通过我的推荐链接加入Medium—Ahmed bes bes</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">阅读Ahmed Besbes的每一个故事(以及媒体上成千上万的其他作家)。您的会员费直接支持…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">medium.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no ks na"/></div></div></a></div><h1 id="447a" class="np nq it bd nr ns nt nu nv nw nx ny nz jz oa ka ob kc oc kd od kf oe kg of og bi translated">0 —数据类:整体情况</h1><p id="c058" class="pw-post-body-paragraph ky kz it la b lb oh ju ld le oi jx lg lh oj lj lk ll ok ln lo lp ol lr ls lt im bi translated">顾名思义，数据类是用来保存数据的类。这个模块背后的动机是，我们有时定义只作为数据容器的类，当我们这样做时，我们会花费大量的时间编写带有大量参数的样板代码，一个丑陋的<code class="fe om on oo op b">__init__</code>方法和许多被覆盖的函数。</p><p id="a0ae" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">数据类缓解了这个问题，同时提供了额外的有用方法。此外，由于dataclasses在Python生态系统中相对较新，所以它强制实施了诸如类型注释之类的现代实践。</p><blockquote class="mj mk ml"><p id="8fe9" class="ky kz mm la b lb lc ju ld le lf jx lg mn li lj lk mo lm ln lo mp lq lr ls lt im bi translated"><strong class="la iu"> <em class="it">👉数据类仍然是类。因此，您可以在其中实现任何自定义方法，就像在普通类中一样。</em> </strong></p></blockquote><p id="46a6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">好，现在让我们看看他们的行动。</p><h1 id="59ed" class="np nq it bd nr ns nt nu nv nw nx ny nz jz oa ka ob kc oc kd od kf oe kg of og bi translated">1 —定义类的代码更少</h1><p id="84c7" class="pw-post-body-paragraph ky kz it la b lb oh ju ld le oi jx lg lh oj lj lk ll ok ln lo lp ol lr ls lt im bi translated">当我们定义一个类来存储一些属性时，它通常是这样的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="2e45" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是标准的Python语法。</p><p id="a5b2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当您使用dataclasses时，您首先必须导入<code class="fe om on oo op b">dataclass</code>,然后在您定义的类之前使用它作为装饰器。</p><p id="a273" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是前面使用dataclasses的代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="8169" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">关于这个语法，需要注意一些事情:</p><ul class=""><li id="6d78" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt os mb mc md bi translated">样板代码更少:我们定义每个属性一次，我们自己不重复</li><li id="2feb" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt os mb mc md bi translated">我们对每个属性使用类型注释。虽然这不会强制类型验证，但是如果您使用类似于<a class="ae lu" href="http://mypy-lang.org/" rel="noopener ugc nofollow" target="_blank"> mypy </a>的类型检查器，它会帮助您的文本编辑器提供更好的林挺。如果你不尊重类型，你的代码仍然可以工作，但是你的代码编辑器会发出不一致的信号。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/131c7c25191bd351423befaf66bbe6e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YYQtMYuwVV1i1E-jNvvQvg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">类型注释有助于检测潜在的错误—图片由作者提供</p></figure><ul class=""><li id="b24c" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt os mb mc md bi translated">dataclasses不仅仅允许您编写更紧凑的代码。dataclass decorator实际上是一个自动添加其他方法的代码生成器。如果我们使用<code class="fe om on oo op b">inspect</code>模块来检查哪些方法被添加到了<code class="fe om on oo op b">Person</code>类中，我们可以看到<code class="fe om on oo op b">__init__</code>、<code class="fe om on oo op b">__eq__</code>和<code class="fe om on oo op b">__repr__</code>方法:这些方法负责设置属性值、测试相等性并以良好的字符串格式表示对象。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/75bc8256fe1a01ea6bdbff97624fb239.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x8jr8lyKTZsnB0O_vZ2Bhg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截图</p></figure><p id="5a51" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们允许<code class="fe om on oo op b">Person</code>类支持顺序(参见关于比较的技巧9)，我们也会有这些方法。</p><ul class=""><li id="ee27" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt os mb mc md bi translated"><code class="fe om on oo op b">__ge__</code>:大于或等于</li><li id="333f" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt os mb mc md bi translated"><code class="fe om on oo op b">__gt__</code>:大于</li><li id="4f21" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt os mb mc md bi translated"><code class="fe om on oo op b">__le__</code>:低于或等于</li><li id="808a" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt os mb mc md bi translated"><code class="fe om on oo op b">__lt__</code>:低于</li></ul><h1 id="6275" class="np nq it bd nr ns nt nu nv nw nx ny nz jz oa ka ob kc oc kd od kf oe kg of og bi translated">2 —支持默认值</h1><p id="dff7" class="pw-post-body-paragraph ky kz it la b lb oh ju ld le oi jx lg lh oj lj lk ll ok ln lo lp ol lr ls lt im bi translated">您可以在保留注释的同时为每个属性添加默认值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="e6ae" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">👉请记住，没有默认值的字段不能出现在有默认值的字段之后。例如，下面的代码不起作用:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><h1 id="44d5" class="np nq it bd nr ns nt nu nv nw nx ny nz jz oa ka ob kc oc kd od kf oe kg of og bi translated">3-对象的自定义表示</h1><p id="a688" class="pw-post-body-paragraph ky kz it la b lb oh ju ld le oi jx lg lh oj lj lk ll ok ln lo lp ol lr ls lt im bi translated">由于dataclasses已经添加了<code class="fe om on oo op b">__repr__</code>方法，当实例被打印到屏幕上时，它们有了一个很好的、人类可读的表示。</p><p id="0203" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这使得调试更加容易。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="67a7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这种表示可以被覆盖以实现您想要的任何定制消息。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><h1 id="a32f" class="np nq it bd nr ns nt nu nv nw nx ny nz jz oa ka ob kc oc kd od kf oe kg of og bi translated">4-轻松转换为元组或字典</h1><p id="8531" class="pw-post-body-paragraph ky kz it la b lb oh ju ld le oi jx lg lh oj lj lk ll ok ln lo lp ol lr ls lt im bi translated">实例可以很容易地序列化成字典或元组。当您的代码与需要这些格式的其他程序交互时，这非常有用。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><h1 id="e051" class="np nq it bd nr ns nt nu nv nw nx ny nz jz oa ka ob kc oc kd od kf oe kg of og bi translated">5-冻结实例/不可变对象</h1><p id="9991" class="pw-post-body-paragraph ky kz it la b lb oh ju ld le oi jx lg lh oj lj lk ll ok ln lo lp ol lr ls lt im bi translated">使用dataclasses，您可以创建只读对象。您所要做的就是在<code class="fe om on oo op b">@dataclass</code>装饰器内将<code class="fe om on oo op b">frozen</code>参数设置为<code class="fe om on oo op b">True</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="d5d5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这样做时，一旦对象被实例化，就可以防止任何人修改属性值。</p><p id="6c77" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您试图将冻结对象的属性设置为新值，将会出现一个<code class="fe om on oo op b">FrozenInstanceError</code>错误。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/beae7cdc2e89f55f3f1c1c782aff5b70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b3ukgDrOoYUL5R-wudbMcA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截图</p></figure><h1 id="dbda" class="np nq it bd nr ns nt nu nv nw nx ny nz jz oa ka ob kc oc kd od kf oe kg of og bi translated">6 —不需要编写比较方法</h1><p id="b390" class="pw-post-body-paragraph ky kz it la b lb oh ju ld le oi jx lg lh oj lj lk ll ok ln lo lp ol lr ls lt im bi translated">当您使用标准Python语法定义一个类并测试具有相同属性值的两个实例之间的相等性时，您会得到以下结果:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="ff38" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这两个对象不相等，这很正常，因为<code class="fe om on oo op b">Person</code>类实际上没有实现测试相等的方法。为了增加平等性，你必须自己实现<code class="fe om on oo op b">__eq__</code>方法。这可能看起来像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="d9e1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">该方法首先检查两个对象是同一个类的实例，然后测试属性元组之间的相等性。</p><p id="17e9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，如果您决定向您的类添加新属性，您必须再次更新<code class="fe om on oo op b">__eq__</code>方法。如果使用的话，<code class="fe om on oo op b">__ge__</code>、<code class="fe om on oo op b">__gt__</code>、<code class="fe om on oo op b">__le__</code>和<code class="fe om on oo op b">__lt__</code>也是如此。</p><p id="07a3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这看起来像是不必要的代码输入，对吗？幸运的是，dataclasses消除了这种困扰。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><h1 id="2a8d" class="np nq it bd nr ns nt nu nv nw nx ny nz jz oa ka ob kc oc kd od kf oe kg of og bi translated">7-使用字段函数的自定义属性行为</h1><p id="b0db" class="pw-post-body-paragraph ky kz it la b lb oh ju ld le oi jx lg lh oj lj lk ll ok ln lo lp ol lr ls lt im bi translated">在某些情况下，您可能需要创建一个仅在内部定义的属性，而不是在类被实例化时定义。当属性的值依赖于先前设置的属性时，可能会出现这种情况。</p><p id="b145" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这里，您可以使用dataclasses中的<strong class="la iu">字段</strong>函数。</p><p id="3815" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过使用这个函数并将其<code class="fe om on oo op b">init</code>和<code class="fe om on oo op b">repr</code>参数设置为<code class="fe om on oo op b">False</code>来创建一个名为<code class="fe om on oo op b">full_name</code>的新字段，我们仍然可以实例化<code class="fe om on oo op b">Person</code>类，而无需设置<code class="fe om on oo op b">full_name</code>属性。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="b571" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">该属性在实例中尚不存在。如果我们试图访问它，就会抛出AttributeError。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/bdfc22178ec319f99aee4acd7e632124.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0LACYBWXyAZGk7XSzy41oQ.png"/></div></div></figure><p id="dd0e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们如何设置<code class="fe om on oo op b">full_name</code>的值，并且仍然将它保留在类的构造函数之外？为此，我们必须使用<code class="fe om on oo op b">__post_init__</code>方法。</p><h1 id="50ca" class="np nq it bd nr ns nt nu nv nw nx ny nz jz oa ka ob kc oc kd od kf oe kg of og bi translated">_ _ post _ init _ _挂钩</h1><p id="fb72" class="pw-post-body-paragraph ky kz it la b lb oh ju ld le oi jx lg lh oj lj lk ll ok ln lo lp ol lr ls lt im bi translated">dataclasses有一个特殊的方法叫做<code class="fe om on oo op b">__post_init__</code>。</p><p id="600c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">顾名思义，这个方法是在调用了<code class="fe om on oo op b">__init__</code>方法之后立即调用的。</p><p id="3e97" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">回到前面的例子，我们可以看到如何调用这个方法来初始化一个依赖于先前设置的属性的内部属性。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="dbd4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请注意，<code class="fe om on oo op b">field</code>函数中的<code class="fe om on oo op b">repr</code>参数已被设置为<code class="fe om on oo op b">True</code>，以使其在打印对象时可见。在前面的例子中，我们不能将这个参数设置为<code class="fe om on oo op b">True</code>，因为属性<code class="fe om on oo op b">full_name</code>还没有被创建。</p><h1 id="d6ca" class="np nq it bd nr ns nt nu nv nw nx ny nz jz oa ka ob kc oc kd od kf oe kg of og bi translated">9-比较对象并排序</h1><p id="22b2" class="pw-post-body-paragraph ky kz it la b lb oh ju ld le oi jx lg lh oj lj lk ll ok ln lo lp ol lr ls lt im bi translated">在处理包含数据的对象时，一个有用的特性是能够对它们进行比较，并按照您想要的任何顺序对它们进行排序。</p><p id="03cf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">默认情况下，dataclasses实现了<code class="fe om on oo op b">__eq__</code>。为了允许其他类型的比较(<code class="fe om on oo op b">__lt__</code>(小于)、<code class="fe om on oo op b">__le__</code>(小于或等于)、<code class="fe om on oo op b">__gt__</code>(大于)和<code class="fe om on oo op b">__ge__</code>(大于或等于)，我们必须在<code class="fe om on oo op b">@dataclass</code>装饰器中将<code class="fe om on oo op b">order</code>参数设置为<code class="fe om on oo op b">True</code>。</p><pre class="kj kk kl km gt ox op oy oz aw pa bi"><span id="c585" class="pb nq it op b gy pc pd l pe pf"><strong class="op iu">@dataclasses(order=True)</strong></span></pre><p id="8384" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">实现这些比较方法的方式是获取每个定义的<strong class="la iu">字段</strong>，并按照定义的顺序进行比较，直到出现不相等的值。</p><p id="62d0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们回到<code class="fe om on oo op b">Person</code>类。假设我们想要基于<code class="fe om on oo op b">age</code>属性比较这个类的实例(这是有意义的，对吗？).</p><p id="3610" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为此，我们必须添加一个字段，我们称之为<code class="fe om on oo op b">sort_index</code>，并将其值设置为<code class="fe om on oo op b">age</code>属性的值。</p><p id="4b85" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们这样做的方法是调用我们在前面的例子中看到的<code class="fe om on oo op b">__post_init__</code>方法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="fc0d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在来自<code class="fe om on oo op b">Person</code> a类的实例可以根据<code class="fe om on oo op b">age</code>属性进行排序。</p><h1 id="7b5d" class="np nq it bd nr ns nt nu nv nw nx ny nz jz oa ka ob kc oc kd od kf oe kg of og bi translated">让我们结束它</h1><p id="fda6" class="pw-post-body-paragraph ky kz it la b lb oh ju ld le oi jx lg lh oj lj lk ll ok ln lo lp ol lr ls lt im bi translated">Dataclasses提供了许多特性，允许您轻松地使用充当数据容器的类。</p><p id="02c1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">特别是，本模块有助于:</p><ul class=""><li id="6cac" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt os mb mc md bi translated">编写更少的样板代码</li><li id="c876" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt os mb mc md bi translated">以可读的格式表示对象</li><li id="0071" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt os mb mc md bi translated">实现自定义排序和比较</li><li id="7194" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt os mb mc md bi translated">快速访问属性并检查它们</li><li id="f879" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt os mb mc md bi translated">使用__post_init__等特殊方法来执行依赖于其他属性的属性初始化</li><li id="44e5" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt os mb mc md bi translated">定义内部字段…</li></ul><h1 id="1eaa" class="np nq it bd nr ns nt nu nv nw nx ny nz jz oa ka ob kc oc kd od kf oe kg of og bi translated">资源:</h1><p id="b8c2" class="pw-post-body-paragraph ky kz it la b lb oh ju ld le oi jx lg lh oj lj lk ll ok ln lo lp ol lr ls lt im bi translated">在学习dataclasses的过程中，我查阅了许多资源(博客帖子、Youtube视频、PEP、官方python文档)<br/>下面是我发现的最有趣的帖子和视频的精选列表。</p><ul class=""><li id="3b0c" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt os mb mc md bi translated"><a class="ae lu" href="https://docs.python.org/3/library/dataclasses.html" rel="noopener ugc nofollow" target="_blank">https://docs.python.org/3/library/dataclasses.html</a></li><li id="7d44" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt os mb mc md bi translated"><a class="ae lu" href="https://realpython.com/python-data-classes/" rel="noopener ugc nofollow" target="_blank">https://realpython.com/python-data-classes/</a></li><li id="e21c" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt os mb mc md bi translated">https://dev.to/dbanty/you-should-use-python-dataclass-lkc<a class="ae lu" href="https://dev.to/dbanty/you-should-use-python-dataclass-lkc" rel="noopener ugc nofollow" target="_blank"/></li><li id="46f4" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt os mb mc md bi translated"><a class="ae lu" href="https://dev.to/isabelcmdcosta/dataclasses-in-python-are-nice-1fff" rel="noopener ugc nofollow" target="_blank">https://dev . to/isabelcmdcosta/data classes-in-python-are-nice-1 fff</a></li><li id="ca98" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt os mb mc md bi translated"><a class="ae lu" href="https://youtu.be/vBH6GRJ1REM" rel="noopener ugc nofollow" target="_blank">https://youtu.be/vBH6GRJ1REM</a></li><li id="2512" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt os mb mc md bi translated"><a class="ae lu" href="https://youtu.be/vRVVyl9uaZc" rel="noopener ugc nofollow" target="_blank">https://youtu.be/vRVVyl9uaZc</a></li><li id="6e10" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt os mb mc md bi translated"><a class="ae lu" href="https://medium.com/mindorks/understanding-python-dataclasses-part-1-c3ccd4355c34" rel="noopener">https://medium . com/minworks/understanding-python-data classes-part-1-c3ccd 4355 c34</a></li><li id="8522" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt os mb mc md bi translated">(法国博客文章)<a class="ae lu" href="https://www.invivoo.com/dataclasses-python/" rel="noopener ugc nofollow" target="_blank">https://www.invivoo.com/dataclasses-python/</a></li><li id="dbfd" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt os mb mc md bi translated"><a class="ae lu" href="https://florimond.dev/en/posts/2018/10/reconciling-dataclasses-and-properties-in-python/" rel="noopener ugc nofollow" target="_blank">https://flori mond . dev/en/posts/2018/10/reconciling-data classes-and-properties-in-python/</a></li></ul><h1 id="4297" class="np nq it bd nr ns nt nu nv nw nx ny nz jz oa ka ob kc oc kd od kf oe kg of og bi translated">感谢阅读🙏</h1><p id="9560" class="pw-post-body-paragraph ky kz it la b lb oh ju ld le oi jx lg lh oj lj lk ll ok ln lo lp ol lr ls lt im bi translated">如果你已经做到这一步，我真的很感谢你的时间。</p><p id="b30a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我希望我已经阐明了使数据类变得伟大的不同特性，并且我已经说服您开始使用它。</p><p id="6a97" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你仍然不相信，请告诉我你使用的替代方案。我真的很想听听他们的故事。</p><p id="0881" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">今天就这些了。直到下次👋</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/14d953aa47b467c5f1326b9d26514b1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xgC_GBGe2WgOLdwY"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae lu" href="https://unsplash.com/@karsten116?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卡斯滕·怀恩吉尔特</a>在<a class="ae lu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="5cb1" class="np nq it bd nr ns nt nu nv nw nx ny nz jz oa ka ob kc oc kd od kf oe kg of og bi translated">新到中？您可以每月订阅5美元，并解锁无限的文章— <a class="ae lu" href="https://ahmedbesbes.medium.com/membership" rel="noopener">单击此处。</a></h1></div></div>    
</body>
</html>