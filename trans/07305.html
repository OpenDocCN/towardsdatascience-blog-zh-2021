<html>
<head>
<title>4 Methods for Changing the Column Order of a Pandas Data Frame</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">更改熊猫数据框列顺序的4种方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/4-methods-for-changing-the-column-order-of-a-pandas-data-frame-a16cf0b58943?source=collection_archive---------2-----------------------#2021-07-03">https://towardsdatascience.com/4-methods-for-changing-the-column-order-of-a-pandas-data-frame-a16cf0b58943?source=collection_archive---------2-----------------------#2021-07-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="322c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">举例说明。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6cf8f0f9f9a3064bcf3fe04244af703c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y8C4O4MYGqSkmomjBabCvA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Elena Mozhvilo 在<a class="ae ky" href="https://unsplash.com/s/photos/arrange?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="7636" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">熊猫是数据科学生态系统中最受欢迎的工具之一。这是一个用于数据分析和操作的Python库。</p><p id="38c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas提供了许多函数和方法来有效地处理表格数据。您可以轻松清理、操作或处理存储在数据框中的数据。</p><p id="81dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">熊猫数据框由带标签的行和列组成。在本文中，我们将介绍4种改变数据框中列顺序的方法。这听起来像是一个过于具体的任务。但是，在某些情况下，您需要更新列顺序。</p><p id="a8b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从导入库和创建样本数据框开始。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="fe0b" class="ma mb it lw b gy mc md l me mf">import numpy as np<br/>import pandas as pd</span><span id="bd44" class="ma mb it lw b gy mg md l me mf">df = pd.DataFrame({<br/>   "A": np.random.randint(10, size=5),<br/>   "B": np.random.randint(20, size=5),<br/>   "C": np.random.randint(5, size=5),<br/>   "D": np.random.randint(30, size=5)<br/>})</span><span id="0bd3" class="ma mb it lw b gy mg md l me mf">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/55a3146c2cf725fa372b56662521d96b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uojkGDO3D95Jorsaww0esQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="939c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们有一个4列5行的数据框。这些值是由Numpy的randint函数生成的随机整数。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h2 id="6e68" class="ma mb it bd mp mq mr dn ms mt mu dp mv li mw mx my lm mz na nb lq nc nd ne nf bi translated">第一种方法</h2><p id="6241" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">我们可以使用iloc方法来更改或更新列的顺序，如下所示:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c9ff" class="ma mb it lw b gy mc md l me mf">df.iloc[:, [2,3,1,0]]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/a4260546839b305986c473f33ae539c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NmurHJLCqjkKCpN0cUCGjQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="390f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">iloc方法适用于索引。逗号前的冒号表示我们需要所有的行。逗号后面的列表包含列索引。只要索引存在于数据帧中，我们可以按任何顺序排列索引。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h2 id="0f41" class="ma mb it bd mp mq mr dn ms mt mu dp mv li mw mx my lm mz na nb lq nc nd ne nf bi translated">第二种方法</h2><p id="85c1" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">loc方法类似于iloc方法，但它使用标签而不是索引。因此，我们可以通过创建一个带有列标签的列表来对列进行重新排序。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="6aec" class="ma mb it lw b gy mc md l me mf">df.loc[:, ["B","D","C","A"]]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/47860f2125c014ce32bf6188f4954bcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o4noC5mJkP5pc5eEcZtnTw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="e2a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们不必选择所有的行和列。loc和iloc方法都允许选择行和列的子集。</p><p id="e7dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以选择前3行以及A列和C列，如下所示:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b461" class="ma mb it lw b gy mc md l me mf">df.loc[:3, ["C","A"]]</span></pre><p id="0556" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请务必注意，数据框的行标签和索引是相同的。Pandas默认为行分配整数标签。除非我们更改行标签，否则我们使用loc和iloc方法选择行的方式是相同的。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h2 id="5e25" class="ma mb it bd mp mq mr dn ms mt mu dp mv li mw mx my lm mz na nb lq nc nd ne nf bi translated">第三种方法</h2><p id="4a93" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">Pandas还允许通过传递如下列表来选择列的子集:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0eb4" class="ma mb it lw b gy mc md l me mf">df[["A","D","C","B"]]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/7f01db7348dc1f070b2fe54f4cb3ad8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RyWbzXt_w0tNQnoJpmIIMA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="b94a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它类似于loc和iloc方法，但是我们无法控制要选择哪些行。所有的列都被选中，我们只能指定列名和顺序。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h2 id="3286" class="ma mb it bd mp mq mr dn ms mt mu dp mv li mw mx my lm mz na nb lq nc nd ne nf bi translated">第四种方法</h2><p id="3c57" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">这种方法可以认为是第三种方法的特例。它包含了基本Python的一些特性，比如反转列表。</p><p id="ec09" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">考虑这样一种情况，我们有一个包含大量行的数据框，我们需要颠倒列的顺序。</p><p id="6191" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以创建一个列列表并反转它。这个反向列表可以像第三种方法一样用于选择列。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="ef15" class="ma mb it lw b gy mc md l me mf">cols = list(df.columns)<br/>cols.reverse()</span><span id="0253" class="ma mb it lw b gy mg md l me mf">df[cols]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/feae52c9aeabbf16a3757c23341b882a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nF2rwJ08zEnvnbKpVCUv4g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="c0b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python的反向方法工作正常。因此，它不返回任何内容，而是反转列表。</p><p id="6e9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以通过使用索引来反转列表。这是执行相同操作的不同方式。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="8f27" class="ma mb it lw b gy mc md l me mf">cols = list(df.columns)</span><span id="0e01" class="ma mb it lw b gy mg md l me mf">df[cols[::-1]]</span></pre><p id="2119" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">表达式“[::-1]”选择步长为-1的列表中的所有项目。因此，它通过向后进行选择。结果，名单颠倒了。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h2 id="16b1" class="ma mb it bd mp mq mr dn ms mt mu dp mv li mw mx my lm mz na nb lq nc nd ne nf bi translated">结论</h2><p id="cd4a" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">我们在本文中介绍的内容演示了如何更改数据框中列的顺序。这些方法也可用于选择数据帧的子集。</p><p id="333a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更改列顺序的一个典型用例是当我们需要组合多个数据框时。如果数据框是沿着行轴组合或连接的(即一个在另一个之上)，则列的顺序必须相同。</p><p id="c3ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>