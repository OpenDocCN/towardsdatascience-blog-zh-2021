<html>
<head>
<title>From CSV to GitHub Pages in 5 Steps: Publishing an Interactive Social Network of the Marvel Universe</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从CSV到GitHub页面，5个步骤:发布漫威世界的互动社交网络</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/from-csv-to-github-pages-in-5-steps-publishing-an-interactive-social-network-of-the-marvel-7b8374bf44fb?source=collection_archive---------13-----------------------#2021-05-12">https://towardsdatascience.com/from-csv-to-github-pages-in-5-steps-publishing-an-interactive-social-network-of-the-marvel-7b8374bf44fb?source=collection_archive---------13-----------------------#2021-05-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7178" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何使用Python、Gephi和GitHub页面轻松创建令人惊叹的图形可视化</h2></div><p id="658c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我将提供一个循序渐进的指南，告诉你如何通过5个简单的步骤创建、发布和共享交互式网络图可视化。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/beb7b8cad330c5d6453ad7db2ccf2a83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*h7fwMuQRFPciWhMD"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">奥马尔·弗洛雷斯在<a class="ae lr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="74f5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们开始之前，我们需要三样东西:</p><ul class=""><li id="1a30" class="ls lt iq kh b ki kj kl km ko lu ks lv kw lw la lx ly lz ma bi translated">Python &amp; NetworkX库[ <a class="ae lr" href="https://networkx.org/" rel="noopener ugc nofollow" target="_blank"> 1 </a></li><li id="5ace" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la lx ly lz ma bi translated">ge phi[<a class="ae lr" href="https://gephi.org/" rel="noopener ugc nofollow" target="_blank">2</a>]&amp;sigma exporter包</li><li id="ba77" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la lx ly lz ma bi translated">GitHub帐户&amp;一个公共的GitHub存储库</li></ul><p id="c740" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">步骤1:导入CSV文件并创建一个NetworkX图形</strong></p><p id="ee1f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的数据源实际上可以是任何数据格式(例如TSV、pandas数据帧或数组)，但是在本文中，我们将重点关注CSV(<strong class="kh ir">C</strong>omma-<strong class="kh ir">S</strong>separated<strong class="kh ir">V</strong>alues)格式。在本教程中，我将使用来自Kaggle [ <a class="ae lr" href="https://www.kaggle.com/csanhueza/the-marvel-universe-social-network" rel="noopener ugc nofollow" target="_blank"> 3 </a> ]的漫威宇宙社交网络数据集来创建一个英雄之间关系的交互式图表。数据集描述了漫画中漫威英雄的共现，因此每行描述了一个实例，其中<em class="mg">英雄1 </em>(在第1列)与<em class="mg">英雄2 </em>(在第2列)出现在同一部漫画中。</p><p id="a295" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们首先导入三个Python库:(1) <em class="mg"> csv </em>用于读取csv文件，(2) <em class="mg"> tqdm </em>用于显示进度条(可选)，以及(3) <em class="mg"> NetworkX </em>用于创建和修改图形。</p><pre class="lc ld le lf gt mh mi mj mk aw ml bi"><span id="6e77" class="mm mn iq mi b gy mo mp l mq mr">import csv<br/>from tqdm import tqdm<br/>import networkx as nx</span></pre><p id="638e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们创建一个空的NetworkX图…</p><pre class="lc ld le lf gt mh mi mj mk aw ml bi"><span id="70bb" class="mm mn iq mi b gy mo mp l mq mr">import networkx as nx <strong class="mi ir"><br/></strong>G = nx.DiGraph()</span></pre><p id="f269" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">…并根据我们的CSV文件添加节点和边。我们迭代每一行，为<em class="mg"> hero1 </em>(第一列)和<em class="mg"> hero2 </em>(第二列)添加节点。不需要担心添加重复的节点，因为名称/标签充当唯一的id，并且已经在图中的节点被跳过。如果从<em class="mg"> hero1 </em>到<em class="mg"> hero2 </em>的边在我们的图中还不存在，我们就把它加上<em class="mg"> </em>并把它的权重值设为1(意思是他们曾经一起出现在一本漫画里)<em class="mg">。如果边已经存在，我们只需将现有边的权重增加1。</em></p><pre class="lc ld le lf gt mh mi mj mk aw ml bi"><span id="1919" class="mm mn iq mi b gy mo mp l mq mr"><strong class="mi ir">with</strong> open('./data/hero-network.csv', 'r') <strong class="mi ir">as</strong> f:<br/>    data = csv.reader(f)<br/>    headers = next(data)<br/>    <strong class="mi ir">for</strong> row <strong class="mi ir">in</strong> tqdm(data):<br/>        G.add_node(row[0]) <em class="mg">#superhero in first column</em><br/>        G.add_node(row[1]) <em class="mg">#superhero in second column</em><br/>        <strong class="mi ir">if</strong> G.has_edge(row[0], row[1]):<br/>            <em class="mg"># edge already exists, increase weight by one</em><br/>            G[row[0]][row[1]]['weight'] += 1<br/>        <strong class="mi ir">else</strong>:<br/>            <em class="mg"># add new edge with weight 1</em><br/>            G.add_edge(row[0], row[1], weight = 1)</span></pre><p id="4630" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了得到图中的第一个信息，我们打印出它的节点数和边数。</p><pre class="lc ld le lf gt mh mi mj mk aw ml bi"><span id="f7e6" class="mm mn iq mi b gy mo mp l mq mr">G_nodes = G.number_of_nodes()<br/>G_edges = G.number_of_edges()<br/>print("Nodes = ", G_nodes, " Edges = ",G_edges)</span></pre><p id="2ecb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的图总共有<strong class="kh ir">6426个节点</strong>和<strong class="kh ir">224181条边</strong>。</p><p id="83b1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">第二步:将NetworkX图形导出为gexf文件</strong></p><p id="f4a0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下一步，我们将NetworkX图形转换成gexf文件(<strong class="kh ir"> G </strong>图形<strong class="kh ir">E</strong>xchange<strong class="kh ir">X</strong>ML<strong class="kh ir">F</strong>format)并将其存储在我们的文件目录中。</p><pre class="lc ld le lf gt mh mi mj mk aw ml bi"><span id="9867" class="mm mn iq mi b gy mo mp l mq mr">nx.write_gexf(G, "./data/hero-network.gexf")</span></pre><p id="ce65" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">第三步:导入并修改Gephi中的图形</strong></p><p id="91ef" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于我们的图表存储为gexf文件，我们可以使用开源应用程序Gephi(可用于Windows、MacOS和Linux)导入、修改和可视化它，它提供了多种功能。</p><p id="c10a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们将gexf文件作为无向图导入，并安装SigmaExporter JS包(工具&gt;插件&gt;可用插件)，以利用适马JS [ <a class="ae lr" href="http://sigmajs.org/" rel="noopener ugc nofollow" target="_blank"> 4 </a> ]。如果您愿意，也可以选择安装和使用其他布局算法。</p><p id="e993" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在下一步中，我们希望让更多连接良好的相关节点(例如，托尼·斯塔克，美国队长)显得更大。为此，我们在statistics选项卡中计算平均加权度(对于有向图，我建议使用PageRank)，并在appearance选项卡中相应地设置节点大小，8是最小节点大小，48是最大节点大小。</p><p id="3d4d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们运行一个模块化算法[ <a class="ae lr" href="https://parklize.blogspot.com/2014/12/gephi-clustering-layout-by-modularity.html#:~:text=Modularity%20is%20one%20measure%20of,groups%2C%20clusters%20or%20communities).&amp;text=Biological%20networks%2C%20including%20animal%20brains,a%20high%20degree%20of%20modularity" rel="noopener ugc nofollow" target="_blank"> 5 </a> ]来聚集我们的图并将节点分配给一个模块。然后，我们根据模块关系分配节点颜色，并运行我们选择的图形布局算法(在我们的例子中是Force Atlas 2)。请记住，Gephi提供了多种方式来个性化我们的图表[ <a class="ae lr" href="http://gephi.michalnovak.eu/Mastering%20Gephi%20Network%20Visualization.pdf" rel="noopener ugc nofollow" target="_blank"> 6 </a> ]。</p><p id="1d2d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">第四步:将图形导出为适马JS </strong></p><p id="ad2d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们喜欢图表的布局和可视化，我们现在可以将其导出为适马JS模板(文件&gt;导出&gt;适马JS模板)。Gephi将要求我们在图表上提供一些基本信息(例如，标题、作者、图例和描述)。我建议检查搜索选项，因为它将允许在最终的图形可视化中查找节点。此外，将悬停行为设置为dim提供了改进的交互体验。最后，我们选择目标目录并单击export。我们现在应该在目标目录中有一个网络文件夹。</p><p id="34b3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">第五步:在GitHub页面上发布图形可视化</strong></p><p id="f626" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过打开导航到网络文件夹并使用以下命令打开Python http服务器来本地测试我们的图形。</p><pre class="lc ld le lf gt mh mi mj mk aw ml bi"><span id="d5c0" class="mm mn iq mi b gy mo mp l mq mr">python -m http.server</span><span id="3fb5" class="mm mn iq mi b gy ms mp l mq mr">python -m SimpleHTTPServer (<em class="mg">for earlier Python versions)</em></span></pre><p id="8b4f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们现在应该能够在我们的web浏览器中看到我们的图表，网址是:<a class="ae lr" href="http://localhost:8000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8000/ </a>。然而，如果我们想在线发布我们的图表并与其他人分享链接，我们可以通过利用GitHub页面来实现。首先，我们创建一个新的(公共)GitHub存储库并上传网络文件夹。然后，我们转到我们的存储库设置，并选择GitHub Pages选项卡。一旦到了那里，我们就将主分支设置为我们的源。该图现在应该可以从以下URL获得:</p><pre class="lc ld le lf gt mh mi mj mk aw ml bi"><span id="cc79" class="mm mn iq mi b gy mo mp l mq mr"><a class="ae lr" href="https://tdenzl.github.io/MarvelNetwork/network/" rel="noopener ugc nofollow" target="_blank"><strong class="mi ir">https://</strong>[YourGitHubName]<strong class="mi ir">.github.io/</strong>[YourRepositoryName]<strong class="mi ir">/network/</strong></a></span></pre><p id="a618" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们现在可以通过选择和搜索节点来浏览图表。此外，我们可以进一步调整图形的视觉效果[ <a class="ae lr" href="https://github.com/jacomyal/sigma.js/wiki/Settings" rel="noopener ugc nofollow" target="_blank"> 7 </a> ]。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mt"><img src="../Images/e5425b962d10e8ceb8e80bb347a83760.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*K_DPV-O7VGVTpWE_Gl7qqA.gif"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">先睹为快我们的互动漫威宇宙共现图可视化</p></figure><p id="4f26" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这里你可以找到最终由GitHub Pages主办的<a class="ae lr" href="https://tdenzl.github.io/MarvelNetwork/network/#" rel="noopener ugc nofollow" target="_blank">漫威宇宙共现网</a>。</p><p id="3190" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您想创建自己的网络可视化，请查看我的包含Jupyter笔记本脚本的<a class="ae lr" href="https://github.com/tdenzl/MarvelNetwork" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>。</p><p id="6913" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">参考文献:</strong></p><p id="5f4b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">[1] NetworkX，<a class="ae lr" href="https://networkx.org/" rel="noopener ugc nofollow" target="_blank">首页</a> (2021)</p><p id="78f4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">[2] Gephi，<a class="ae lr" href="https://gephi.org/" rel="noopener ugc nofollow" target="_blank">首页</a> (2021)</p><p id="4cca" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">[3] C. Sanhueza，<a class="ae lr" href="https://www.kaggle.com/csanhueza/the-marvel-universe-social-network" rel="noopener ugc nofollow" target="_blank">漫威宇宙社交网络</a> (2017)</p><p id="f52d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">[4]适马JS，<a class="ae lr" href="http://sigmajs.org/" rel="noopener ugc nofollow" target="_blank">首页</a> (2021)</p><p id="a0aa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">[5] Parklize，<a class="ae lr" href="https://parklize.blogspot.com/2014/12/gephi-clustering-layout-by-modularity.html#:~:text=Modularity%20is%20one%20measure%20of,groups%2C%20clusters%20or%20communities).&amp;text=Biological%20networks%2C%20including%20animal%20brains,a%20high%20degree%20of%20modularity" rel="noopener ugc nofollow" target="_blank"> Gephi -模块化集群布局</a> (2014)</p><p id="5a30" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">[6] K. Cherven，<a class="ae lr" href="http://gephi.michalnovak.eu/Mastering%20Gephi%20Network%20Visualization.pdf" rel="noopener ugc nofollow" target="_blank">掌握Gephi网络可视化</a> (2015)</p><p id="2a51" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">[7]适马JS，<a class="ae lr" href="https://github.com/jacomyal/sigma.js/wiki/Settings" rel="noopener ugc nofollow" target="_blank">文档</a> (2021)</p></div></div>    
</body>
</html>