<html>
<head>
<title>Visualizing Well Paths With The Welly Python Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Welly Python 库可视化井眼轨迹</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/visualizing-well-paths-with-the-well-python-library-2104b28e5c3?source=collection_archive---------7-----------------------#2021-11-14">https://towardsdatascience.com/visualizing-well-paths-with-the-well-python-library-2104b28e5c3?source=collection_archive---------7-----------------------#2021-11-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0b13" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用 Matplotlib 创建 3D 线图以可视化井眼轨迹</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/272b0b54c0520c7a244be6cfc84e1ba1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*9o4lu6_TwwKw5ninFsEVMw.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">显示从 Welly Python 库生成的井眼轨迹位置的 3D 线图。图片由作者提供。</p></figure><p id="5e9e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">测井中使用多个深度参考来表示沿井筒的位置。这些包括测量深度(MD)、真实垂直深度(TVD)、真实水下垂直深度(TVDSS)等。所有这些都是油井成功开发和完井的关键衡量标准。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/a833ec32fa5d46760c03fcd4db2e3c86.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/0*4p1JqRBuY0Hyn2SE.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">显示 MD、TVD 和 TVDSS 之间差异的图示。图片来源:<a class="ae lr" href="http://petroleum-companies.blogspot.com/2013/12/deviated-well-directional.html" rel="noopener ugc nofollow" target="_blank">http://petroleum-companies . blogspot . com/2013/12/diffused-well-directional . html</a></p></figure><p id="cc16" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">上图展示了本文中提到的关键深度参考。</p><ul class=""><li id="1d1b" class="ls lt it kw b kx ky la lb ld lu lh lv ll lw lp lx ly lz ma bi translated">测量深度(MD)是沿井眼长度测量的井眼长度。</li><li id="ffc1" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">真实垂直深度(TVD)，是基准面(如转盘)和井筒中一点之间的绝对垂直距离。</li><li id="b6ef" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">海底真实垂直深度(TVDSS)，是平均海平面和井筒中某点之间的绝对垂直距离。</li></ul><p id="04f7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当井是垂直的时，MD 等于从同一基准面测量的 TVD。在井斜的情况下，TVD 值变得小于 MD 值。</p><p id="727b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">大多数 LAS 文件都参考测量深度，通常不包含 TVD 曲线。因此，我们必须用一些数学来计算 TVD。为此，我们需要井的倾斜度，即井眼与垂直方向的偏差，我们还需要方位角，测量井眼轨迹相对于北方的方向。</p><p id="ddff" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本文中，我们不会关注 TVD 背后的计算，相反，我们将了解如何使用 Welly 的位置模块来计算它。如果你想知道更多关于计算背后的数学知识，我在下面的描述中提供了一些文章的链接。</p><div class="mg mh gp gr mi mj"><a href="https://www.drillingformulas.com/minimum-curvature-method/" rel="noopener  ugc nofollow" target="_blank"><div class="mk ab fo"><div class="ml ab mm cl cj mn"><h2 class="bd iu gy z fp mo fr fs mp fu fw is bi translated">最小曲率法</h2><div class="mq l"><h3 class="bd b gy z fp mo fr fs mp fu fw dk translated">Facebook0Tweet0Pin0LinkedIn0 最小曲率法平滑平衡切线的两条直线段…</h3></div><div class="mr l"><p class="bd b dl z fp mo fr fs mp fu fw dk translated">www.drillingformulas.com</p></div></div><div class="ms l"><div class="mt l mu mv mw ms mx ko mj"/></div></div></a></div><h2 id="1867" class="my mz it bd na nb nc dn nd ne nf dp ng ld nh ni nj lh nk nl nm ll nn no np nq bi translated">视频版教程</h2><p id="f34a" class="pw-post-body-paragraph ku kv it kw b kx nr ju kz la ns jx lc ld nt lf lg lh nu lj lk ll nv ln lo lp im bi translated">如果你喜欢跟随视频，你可以在我的 YouTube 频道找到它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h1 id="ac5a" class="ny mz it bd na nz oa ob nd oc od oe ng jz of ka nj kc og kd nm kf oh kg np oi bi translated">Python 教程</h1><h2 id="911c" class="my mz it bd na nb nc dn nd ne nf dp ng ld nh ni nj lh nk nl nm ll nn no np nq bi translated">导入库和加载数据</h2><p id="9762" class="pw-post-body-paragraph ku kv it kw b kx nr ju kz la ns jx lc ld nt lf lg lh nu lj lk ll nv ln lo lp im bi translated">让我们从导入将要使用的库开始。这些是来自 welly 图书馆和熊猫图书馆的位置和井模块。</p><pre class="kj kk kl km gt oj ok ol om aw on bi"><span id="7612" class="my mz it ok b gy oo op l oq or">from welly import Location<br/>from welly import Well<br/>import pandas as pd</span></pre><p id="7d16" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一旦我们导入了这些，我们就可以加载数据了。本例中使用的数据来自北海的荷兰部分，可以在<a class="ae lr" href="https://www.nlog.nl" rel="noopener ugc nofollow" target="_blank"> NLOG 网站</a>或我的<a class="ae lr" href="https://github.com/andymcdgeo/Andys_YouTube_Notebooks" rel="noopener ugc nofollow" target="_blank"> Github Repo 上找到。</a></p><pre class="kj kk kl km gt oj ok ol om aw on bi"><span id="49f8" class="my mz it ok b gy oo op l oq or">data = Well.from_las('Netherlands Data/L05-15-Spliced.las')</span></pre><h2 id="90e0" class="my mz it bd na nb nc dn nd ne nf dp ng ld nh ni nj lh nk nl nm ll nn no np nq bi translated">检查数据</h2><p id="3859" class="pw-post-body-paragraph ku kv it kw b kx nr ju kz la ns jx lc ld nt lf lg lh nu lj lk ll nv ln lo lp im bi translated">如果我们调用刚刚创建的<code class="fe os ot ou ok b">data</code>变量，我们可以得到油井的摘要。我们可以看到井的名称、位置以及文件中包含的数据信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ow ox di oy bf oz"><div class="gh gi ov"><img src="../Images/ad9fcba32ce689e7163d3bf0cd9b1333.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1ezZQP8N0D04Bpe6htNFmQ.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">使用 Python Welly 库生成的井的摘要(图片由作者提供)</p></figure><p id="9815" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果我们想更仔细地查看数据，我们可以调用我们的 well 对象，后跟<code class="fe os ot ou ok b">.data</code>。这提供了一个包含曲线助记符以及前 3 行和后 3 行中包含的值的 dictionary 对象。不出所料，大部分数据都丢失了。</p><pre class="kj kk kl km gt oj ok ol om aw on bi"><span id="194a" class="my mz it ok b gy oo op l oq or">data.data</span><span id="6b6a" class="my mz it ok b gy pa op l oq or">{'BHT': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'CAL': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'CHT': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'CN': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'CNC': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'CNCQH': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'CNQH': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'GR': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'MBVI': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'MBVM': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'MCBW': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'MPHE': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'MPHS': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'MPRM': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'PEQH': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'PORZ': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'PORZC': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'TEN': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'TTEN': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'WTBH': Curve([   nan,    nan, 87.943, ...,    nan,    nan,    nan]),<br/> 'ZCORQH': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'ZDEN': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'ZDENQH': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'ZDNC': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'ZDNCQH': Curve([nan, nan, nan, ..., nan, nan, nan])}</span></pre><p id="9c9f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">理解数据内容的更好方法是查看<a class="ae lr" href="https://youtu.be/yNnMY_-X0Bo" rel="noopener ugc nofollow" target="_blank">测井曲线</a>。我们可以通过调用<code class="fe os ot ou ok b">data.plot</code>并设置曲线范围的关键字参数来实现。我们可以生成一个从第一个测量值开始到最后一个测量值的图。</p><pre class="kj kk kl km gt oj ok ol om aw on bi"><span id="e13b" class="my mz it ok b gy oo op l oq or">data.plot(extents='curves')</span></pre><p id="2bb6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这将返回以下图。该图允许我们快速查看每个测井测量的内容及其特征，如果数据中存在大量曲线，则很难查看。</p><p id="64f7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本文中，我们不会对测井数据进行绘图，但是如果您感兴趣，请务必查看我在 welly 系列中的<a class="ae lr" href="https://youtu.be/IUPajB6fETY" rel="noopener ugc nofollow" target="_blank"> YouTube 视频</a>，在该视频中，我重点介绍了单井和多井的工作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ow ox di oy bf oz"><div class="gh gi pb"><img src="../Images/66b9ef996233dc284d791fe96f0c077d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nVfiF-kMIPo7HKwATMZvQg.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">Welly 生成的显示井内容的测井图。图片由作者提供。</p></figure><h1 id="2ab2" class="ny mz it bd na nz oa ob nd oc od oe ng jz of ka nj kc og kd nm kf oh kg np oi bi translated">使用测量数据和 Welly</h1><h2 id="47ba" class="my mz it bd na nb nc dn nd ne nf dp ng ld nh ni nj lh nk nl nm ll nn no np nq bi translated">导入调查数据</h2><p id="ff01" class="pw-post-body-paragraph ku kv it kw b kx nr ju kz la ns jx lc ld nt lf lg lh nu lj lk ll nv ln lo lp im bi translated">现在我们已经加载了日志数据，我们可以开始加载调查数据了。</p><p id="c47e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在钻井过程中，通常以不规则的间隔测量勘测数据。它给出了测量时测量深度(MD)、倾角(INC)和方位角(AZI)的快照。由此，我们可以计算出油井原点的真实垂直深度(TVD)、x 偏移和 y 偏移。</p><p id="483d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">通常，数据以表格或 CSV 格式提供。要加载 CSV 数据，我们可以使用<code class="fe os ot ou ok b">pd.read_csv()</code>并传入文件的位置及其名称。</p><pre class="kj kk kl km gt oj ok ol om aw on bi"><span id="accc" class="my mz it ok b gy oo op l oq or">survey = pd.read_csv('Netherlands Data/L05-15-Survey.csv')</span></pre><p id="1aa3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当我们调用调查对象时，我们看到返回了一个包含关键井位置信息的数据帧。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl pc"><img src="../Images/6bac01977f03b168759bf254759d8e4e.png" data-original-src="https://miro.medium.com/v2/format:webp/1*8uIXQUQIBqYYQ_CeUdcZaw.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">熊猫数据框中的井调查数据。图片由作者提供。</p></figure><p id="1a25" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Welly 要求勘测数据包含测量的深度、倾斜度和方位角。这允许库计算 TVD、X 偏移和 Y 偏移。</p><p id="44c1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以通过调用调查数据框架并使用方括号传入所需列名的列表来对数据进行子集化。</p><pre class="kj kk kl km gt oj ok ol om aw on bi"><span id="47d6" class="my mz it ok b gy oo op l oq or">survey_subset = survey[['MD', 'INC', 'AZI']]</span></pre><p id="2ccc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当我们调用<code class="fe os ot ou ok b">survey_subset</code>时，我们得到下面的数据帧。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl pc"><img src="../Images/8ad23ca7c582fe023c7af305ad197bba.png" data-original-src="https://miro.medium.com/v2/format:webp/1*vYTrKLjQnF-PQCm3EmfOGw.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">准备好要导入 Welly Python 库的测量数据。图片由作者提供。</p></figure><h2 id="f036" class="my mz it bd na nb nc dn nd ne nf dp ng ld nh ni nj lh nk nl nm ll nn no np nq bi translated">向油井添加测量数据</h2><p id="f759" class="pw-post-body-paragraph ku kv it kw b kx nr ju kz la ns jx lc ld nt lf lg lh nu lj lk ll nv ln lo lp im bi translated">从 CSV 文件中加载调查数据后，我们需要计算我们的位置参数。默认情况下，<a class="ae lr" href="https://github.com/agile-geoscience/welly" rel="noopener ugc nofollow" target="_blank"> Welly </a>被设置为使用最小曲率法计算这些，这是最常见和最精确的方法。</p><p id="f0ba" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有关此方法的更多信息，请访问<a class="ae lr" href="https://petrowiki.spe.org/Calculation_methods_for_directional_survey" rel="noopener ugc nofollow" target="_blank">https://petro wiki . SPE . org/Calculation _ methods _ for _ directional _ survey</a></p><p id="1d4e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要将测量数据添加到井中，我们可以调用以下内容</p><pre class="kj kk kl km gt oj ok ol om aw on bi"><span id="f4c5" class="my mz it ok b gy oo op l oq or">#Add deviation data to a well<br/>data.location.add_deviation(survey_subset.values)</span></pre><p id="a0ea" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">既然勘测数据已经加载到我们的 Welly well 对象中，我们可以调用<code class="fe os ot ou ok b">data.location.position</code>来查看数据。对于这个例子，我使用切片符号只返回数据的前 5 行。</p><pre class="kj kk kl km gt oj ok ol om aw on bi"><span id="c11e" class="my mz it ok b gy oo op l oq or">#View first five rows of the data<br/>data.location.position[:5]</span></pre><p id="7020" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">返回的数组格式为:X 轴偏移量、Y 轴偏移量和 TVD。</p><pre class="kj kk kl km gt oj ok ol om aw on bi"><span id="83fc" class="my mz it ok b gy oo op l oq or">array([[  0.        ,   0.        ,   0.        ],<br/>       [  0.        ,   0.        ,  89.3       ],<br/>       [ -0.6333253 ,   0.8552655 , 142.08569704],<br/>       [ -1.59422229,   2.03112298, 170.14372544],<br/>       [ -3.19869524,   3.75201703, 197.74222054]])</span></pre><p id="4c5b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以通过分割数组将每个位置参数提取到变量中。这是通过使用方括号并使用冒号(:)后跟数组中的列来选择所有行来完成的。</p><pre class="kj kk kl km gt oj ok ol om aw on bi"><span id="f7d0" class="my mz it ok b gy oo op l oq or">x_loc = data.location.position[:,0]<br/>y_loc = data.location.position[:,1]<br/>z_loc = data.location.position[:,2]</span></pre><p id="a19d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果我们调用 z_loc，它是我们的 TVD，我们得到下面的数组:</p><pre class="kj kk kl km gt oj ok ol om aw on bi"><span id="e006" class="my mz it ok b gy oo op l oq or">array([   0.        ,   89.3       ,  142.08569704,  170.14372544,<br/>        197.74222054,  225.68858529,  254.17872844,  282.83986178,<br/>        311.3294853 ,  339.82739229,  368.42706739,  396.92691062,<br/>        425.62638313,  454.22551155,  482.42473573,  511.12342097,<br/>        539.72042719,  568.21483874,  597.00539705,  625.8900492 ,<br/>        654.36614119,  683.22656973,  711.6691264 ,  740.00649462,<br/>        767.54748074,  797.06893638,  825.36408467,  853.83548556,<br/>        882.30553194,  910.5784206 ,  939.03148052,  967.35658945,<br/>        995.56380403, 1023.95695144, 1052.22740711, 1080.54668678,<br/>       1108.68959153, 1136.6589388 , 1164.87003188, 1192.91335907,<br/>       1220.78632672, 1248.71483434, 1276.69724251, 1304.38501765,<br/>       1332.02759325, 1359.48829109, 1386.59399864, 1413.47807554,<br/>       1440.51055639, 1467.37758752, 1494.27990524, 1521.15255355,<br/>       1547.94826077, 1574.81148851, 1601.67556214, 1628.46190115,<br/>       1655.38744119, 1682.77094459, 1709.94467279, 1737.02953371,<br/>       1764.09191195, 1791.3868565 , 1818.75450935, 1845.99897829,<br/>       1873.48895669, 1900.86728951, 1928.20315443, 1955.1719983 ,<br/>       1982.16522007, 2009.02433087, 2035.75920778, 2062.44460278,<br/>       2088.89113734, 2115.18715337, 2141.53399746, 2167.86835015,<br/>       2194.17601217, 2220.34087524, 2246.65950847, 2273.26101123,<br/>       2300.13882036, 2326.97261339, 2353.95042418, 2380.81977995,<br/>       2407.70173751, 2434.4676547 , 2460.90920154, 2472.20902514,<br/>       2498.66491934, 2525.74629926, 2553.35452297, 2579.86481719,<br/>       2606.67927736, 2634.67341768, 2663.73057678, 2690.48389425,<br/>       2716.3110963 , 2743.39559139, 2770.53319932, 2798.10117685,<br/>       2824.99473242, 2851.85337513, 2879.55133503, 2906.56976579,<br/>       2933.96384651, 2960.25680057, 2986.50202763, 3013.35506117,<br/>       3039.2427437 , 3065.81112303, 3078.05551274, 3096.92997476])</span></pre><p id="8044" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们也可以通过调用<code class="fe os ot ou ok b">data.location.tvd.</code>来访问相同的数据</p><pre class="kj kk kl km gt oj ok ol om aw on bi"><span id="dd0f" class="my mz it ok b gy oo op l oq or">array([   0.        ,   89.3       ,  142.08569704,  170.14372544,<br/>        197.74222054,  225.68858529,  254.17872844,  282.83986178,<br/>        311.3294853 ,  339.82739229,  368.42706739,  396.92691062,<br/>        425.62638313,  454.22551155,  482.42473573,  511.12342097,<br/>        539.72042719,  568.21483874,  597.00539705,  625.8900492 ,<br/>        654.36614119,  683.22656973,  711.6691264 ,  740.00649462,<br/>        767.54748074,  797.06893638,  825.36408467,  853.83548556,<br/>        882.30553194,  910.5784206 ,  939.03148052,  967.35658945,<br/>        995.56380403, 1023.95695144, 1052.22740711, 1080.54668678,<br/>       1108.68959153, 1136.6589388 , 1164.87003188, 1192.91335907,<br/>       1220.78632672, 1248.71483434, 1276.69724251, 1304.38501765,<br/>       1332.02759325, 1359.48829109, 1386.59399864, 1413.47807554,<br/>       1440.51055639, 1467.37758752, 1494.27990524, 1521.15255355,<br/>       1547.94826077, 1574.81148851, 1601.67556214, 1628.46190115,<br/>       1655.38744119, 1682.77094459, 1709.94467279, 1737.02953371,<br/>       1764.09191195, 1791.3868565 , 1818.75450935, 1845.99897829,<br/>       1873.48895669, 1900.86728951, 1928.20315443, 1955.1719983 ,<br/>       1982.16522007, 2009.02433087, 2035.75920778, 2062.44460278,<br/>       2088.89113734, 2115.18715337, 2141.53399746, 2167.86835015,<br/>       2194.17601217, 2220.34087524, 2246.65950847, 2273.26101123,<br/>       2300.13882036, 2326.97261339, 2353.95042418, 2380.81977995,<br/>       2407.70173751, 2434.4676547 , 2460.90920154, 2472.20902514,<br/>       2498.66491934, 2525.74629926, 2553.35452297, 2579.86481719,<br/>       2606.67927736, 2634.67341768, 2663.73057678, 2690.48389425,<br/>       2716.3110963 , 2743.39559139, 2770.53319932, 2798.10117685,<br/>       2824.99473242, 2851.85337513, 2879.55133503, 2906.56976579,<br/>       2933.96384651, 2960.25680057, 2986.50202763, 3013.35506117,<br/>       3039.2427437 , 3065.81112303, 3078.05551274, 3096.92997476])</span></pre><h2 id="6d1a" class="my mz it bd na nb nc dn nd ne nf dp ng ld nh ni nj lh nk nl nm ll nn no np nq bi translated">创建位置图</h2><p id="ca88" class="pw-post-body-paragraph ku kv it kw b kx nr ju kz la ns jx lc ld nt lf lg lh nu lj lk ll nv ln lo lp im bi translated">为了了解井的位置，我们可以看三幅图。</p><ul class=""><li id="7f48" class="ls lt it kw b kx ky la lb ld lu lh lv ll lw lp lx ly lz ma bi translated">x 偏移与 Y 偏移(地形图)</li><li id="655b" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">x 偏移与 TVD</li><li id="4f25" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">y 偏移与 TVD</li></ul><p id="d367" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了创建这些图，我们可以使用 matplotlib 并使用<a class="ae lr" href="https://youtu.be/pPqLgmbyets" rel="noopener ugc nofollow" target="_blank"> subplot2grid </a>创建多个图。</p><pre class="kj kk kl km gt oj ok ol om aw on bi"><span id="3026" class="my mz it ok b gy oo op l oq or">import matplotlib.pyplot as plt<br/><br/>fig, ax = plt.subplots(figsize=(15,5))<br/>ax1 = plt.subplot2grid(shape=(1,3), loc=(0,0))<br/>ax2 = plt.subplot2grid(shape=(1,3), loc=(0,1))<br/>ax3 = plt.subplot2grid(shape=(1,3), loc=(0,2))<br/><br/>ax1.plot(x_loc, y_loc, lw=3)<br/>ax1.set_title('X Location vs Y Location')<br/><br/>ax2.plot(x_loc, z_loc, lw=3)<br/>ax2.set_title('X Location vs TVD')<br/><br/>ax3.plot(y_loc, z_loc, lw=3)<br/>ax3.set_title('Y Location vs TVD')</span><span id="9ad1" class="my mz it ok b gy pa op l oq or">Text(0.5, 1.0, 'Y Location vs TVD')</span></pre><p id="3fe1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这将返回我们的三个井剖面图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl pc"><img src="../Images/f22661279c2431d701ab019a319ca9dd.png" data-original-src="https://miro.medium.com/v2/format:webp/1*5rsUmWWehZNSDGRJtYbUHQ.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">使用 matplotlib 和 Welly 生成的油井剖面。图片由作者提供。</p></figure><p id="6938" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，这两个 TVD 图是颠倒的，我们将使用<code class="fe os ot ou ok b">ax.invert_yaxis()</code>进行排序。</p><h2 id="b2b9" class="my mz it bd na nb nc dn nd ne nf dp ng ld nh ni nj lh nk nl nm ll nn no np nq bi translated">为井的起点和终点添加标记</h2><p id="85d5" class="pw-post-body-paragraph ku kv it kw b kx nr ju kz la ns jx lc ld nt lf lg lh nu lj lk ll nv ln lo lp im bi translated">我们可以在图中添加标记，以显示井的起始位置(黑色方块)和结束位置(红星)。此外，我们将反转两个 TVD 图的 y 轴。</p><pre class="kj kk kl km gt oj ok ol om aw on bi"><span id="0af3" class="my mz it ok b gy oo op l oq or">fig, ax = plt.subplots(figsize=(15,5))<br/>ax1 = plt.subplot2grid(shape=(1,3), loc=(0,0))<br/>ax2 = plt.subplot2grid(shape=(1,3), loc=(0,1))<br/>ax3 = plt.subplot2grid(shape=(1,3), loc=(0,2))<br/><br/>ax1.plot(x_loc, y_loc, lw=3)<br/>ax1.plot(x_loc[0], y_loc[0], marker='s', color='black', ms=8)<br/>ax1.plot(x_loc[-1], y_loc[-1], marker='*', color='red', ms=8)<br/>ax1.set_title('X Location vs Y Location')<br/><br/>ax2.plot(x_loc, z_loc, lw=3)<br/>ax2.plot(x_loc[0], z_loc[0], marker='s', color='black', ms=8)<br/>ax2.plot(x_loc[-1], z_loc[-1], marker='*', color='red', ms=8)<br/>ax2.invert_yaxis()<br/>ax2.set_title('X Location vs TVD')<br/><br/>ax3.plot(y_loc, z_loc, lw=3)<br/>ax3.plot(y_loc[0], z_loc[0], marker='s', color='black', ms=8)<br/>ax3.plot(y_loc[-1], z_loc[-1], marker='*', color='red', ms=8)<br/>ax3.invert_yaxis()<br/>ax3.set_title('Y Location vs TVD')</span><span id="85c3" class="my mz it ok b gy pa op l oq or">Text(0.5, 1.0, 'Y Location vs TVD')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl pc"><img src="../Images/0c19d078994482cd45a0576fa1a1c38c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Ins-ZtuYAkb_2NiJihFHdw.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">使用 matplotlib 和 Welly 生成的油井剖面。还标记了孔的开始(黑色方块)和结束(红星)位置。图片由作者提供。</p></figure><h2 id="d97b" class="my mz it bd na nb nc dn nd ne nf dp ng ld nh ni nj lh nk nl nm ll nn no np nq bi translated">与原始调查进行比较</h2><p id="a83b" class="pw-post-body-paragraph ku kv it kw b kx nr ju kz la ns jx lc ld nt lf lg lh nu lj lk ll nv ln lo lp im bi translated">幸运的是，我们有一个包含位置参数和 TVD 的测量文件，但情况可能并不总是如此。通过将数据添加到我们的图中，我们可以快速检查 Welly 计算的数据和 CSV 文件中包含的数据。</p><pre class="kj kk kl km gt oj ok ol om aw on bi"><span id="1227" class="my mz it ok b gy oo op l oq or">fig, ax = plt.subplots(figsize=(15,5))<br/>ax1 = plt.subplot2grid(shape=(1,3), loc=(0,0))<br/>ax2 = plt.subplot2grid(shape=(1,3), loc=(0,1))<br/>ax3 = plt.subplot2grid(shape=(1,3), loc=(0,2))<br/><br/>ax1.plot(x_loc, y_loc, lw=7)<br/>ax1.plot(x_loc[0], y_loc[0], marker='s', color='black', ms=8)<br/>ax1.plot(survey['X-offset'], survey['Y-offset'])<br/>ax1.plot(x_loc[-1], y_loc[-1], marker='*', color='red', ms=8)<br/>ax1.set_title('X Location vs Y Location')<br/><br/>ax2.plot(x_loc, z_loc, lw=7)<br/>ax2.plot(x_loc[0], z_loc[0], marker='s', color='black', ms=8)<br/>ax2.plot(survey['X-offset'], survey['TVD'])<br/>ax2.plot(x_loc[-1], z_loc[-1], marker='*', color='red', ms=8)<br/>ax2.invert_yaxis()<br/>ax2.set_title('X Location vs TVD')<br/><br/>ax3.plot(y_loc, z_loc, lw=7)<br/>ax3.plot(y_loc[0], z_loc[0], marker='s', color='black', ms=8)<br/>ax3.plot(survey['Y-offset'], survey['TVD'])<br/>ax3.plot(y_loc[-1], z_loc[-1], marker='*', color='red', ms=8)<br/>ax3.invert_yaxis()<br/>ax3.set_title('X Location vs TVD')</span><span id="37ba" class="my mz it ok b gy pa op l oq or">Text(0.5, 1.0, 'X Location vs TVD')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl pc"><img src="../Images/6ffd1391cd3e6628f9d4b61437c3e1c4.png" data-original-src="https://miro.medium.com/v2/format:webp/1*YBZLxSbfpvEMzeBw-EnV6Q.png"/></div></figure><h1 id="36d8" class="ny mz it bd na nz oa ob nd oc od oe ng jz of ka nj kc og kd nm kf oh kg np oi bi translated">创建井眼轨迹的 3D 图</h1><p id="c0df" class="pw-post-body-paragraph ku kv it kw b kx nr ju kz la ns jx lc ld nt lf lg lh nu lj lk ll nv ln lo lp im bi translated">我们可以使用 matplotlib 以三维方式查看数据，而不是以二维方式查看数据。但首先，我们要计算连续的数据。这是通过使用<code class="fe os ot ou ok b">location.trajectory()</code>来完成的。这里我们可以提供一个数据，即地面井位的 UTM 坐标和一个垂直偏移。</p><p id="6331" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果我们看看 NLOG 网站上的下图，我们就有了油井的精确表面坐标</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl pc"><img src="../Images/13c96afb5bc2e0cf7c0fb67211b4b6d9.png" data-original-src="https://miro.medium.com/v2/format:webp/1*4j4XDcadKQWXsq4uaDRgkg.png"/></div></figure><p id="cffa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将在<code class="fe os ot ou ok b">location.trajectory() </code>功能中使用交付的位置坐标。</p><pre class="kj kk kl km gt oj ok ol om aw on bi"><span id="eb0a" class="my mz it ok b gy oo op l oq or"># Create a trajectory of regularly sampled points<br/>location_data = data.location.trajectory(datum=[589075.56, 5963534.91, 0], elev=False)</span><span id="3163" class="my mz it ok b gy pa op l oq or">xs = location_data[:,0]<br/>ys = location_data[:,1]<br/>zs = location_data[:,2]</span><span id="adde" class="my mz it ok b gy pa op l oq or">plt.plot(xs, ys)<br/>plt.xlabel('X Location')<br/>plt.ylabel('Y Location')<br/>plt.ticklabel_format(style='plain')<br/>plt.grid()</span></pre><p id="758b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当我们运行此代码时，我们现在有了油井的地形图，这些值反映了油井的真实坐标。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl pc"><img src="../Images/77c62166f1fd78727d55e497d4ab3c47.png" data-original-src="https://miro.medium.com/v2/format:webp/1*ujNw2nElBiF_Z0zLgRKfTg.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">使用参考基准面的 Welly Python 库创建的井眼轨迹计划。图片由作者提供。</p></figure><h2 id="2329" class="my mz it bd na nb nc dn nd ne nf dp ng ld nh ni nj lh nk nl nm ll nn no np nq bi translated">创建 3D 绘图</h2><p id="1702" class="pw-post-body-paragraph ku kv it kw b kx nr ju kz la ns jx lc ld nt lf lg lh nu lj lk ll nv ln lo lp im bi translated">现在，井位已经参考了基准面，我们可以继续绘制井眼轨迹了。不需要应用前面的步骤，您可以使用 x、y 和 z 位置进行查看</p><p id="74ba" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了创建 3D 绘图，我们需要从<code class="fe os ot ou ok b">mpl_toolkits.mplot3d</code>导入 Axes3D，然后当我们需要启用 3D 绘图时，使用一个神奇的 Jupyter 命令:<code class="fe os ot ou ok b">%matplotlib widget</code>。</p><p id="96de" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，我们创建图形并将投影设置为 3d，如下面的代码所示。</p><pre class="kj kk kl km gt oj ok ol om aw on bi"><span id="2cc7" class="my mz it ok b gy oo op l oq or">from mpl_toolkits.mplot3d import Axes3D</span><span id="86bd" class="my mz it ok b gy pa op l oq or"># Enable 3D Ploting<br/>%matplotlib widget</span><span id="253e" class="my mz it ok b gy pa op l oq or">fig = plt.figure(figsize=(8, 8))<br/><br/>ax = plt.axes(projection='3d')<br/>ax.plot3D(xs, ys, zs, lw=10)<br/>ax.set_zlim(3000, 0)<br/><br/>ax.set_xlabel('X Location')<br/>ax.set_ylabel('Y Location')<br/>ax.set_zlabel('TVD')<br/><br/>plt.ticklabel_format(style='plain')<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl pc"><img src="../Images/92ae66130e7684383f77a65637955973.png" data-original-src="https://miro.medium.com/v2/format:webp/1*LwsN-VxC_5LAlYIr_TSjYw.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">用 Welly 和 Matplotlib 创建的交互式 3D 井眼轨迹。图片由作者提供。</p></figure><h1 id="fdae" class="ny mz it bd na nz oa ob nd oc od oe ng jz of ka nj kc og kd nm kf oh kg np oi bi translated">摘要</h1><p id="2b41" class="pw-post-body-paragraph ku kv it kw b kx nr ju kz la ns jx lc ld nt lf lg lh nu lj lk ll nv ln lo lp im bi translated">在这个简短的教程中，我们已经了解了如何将原始井测量数据与井井对象相结合，以及如何在平面图和侧视图中显示井井轨迹。我们还看到了如何使用 matplotlib 在 3D 中可视化井眼轨迹。这样，我们可以更好地了解井眼轨迹。</p></div><div class="ab cl pd pe hx pf" role="separator"><span class="pg bw bk ph pi pj"/><span class="pg bw bk ph pi pj"/><span class="pg bw bk ph pi"/></div><div class="im in io ip iq"><p id="bfa2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="pk">感谢阅读！</em></p><p id="be10" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您觉得这篇文章有用，请随时查看我的其他文章，这些文章介绍了 Python 和测井数据的各个方面。你也可以在<a class="ae lr" href="https://github.com/andymcdgeo" rel="noopener ugc nofollow" target="_blank"><em class="pk">GitHub</em></a><em class="pk">找到我在这篇文章和其他文章中使用的代码。</em></p><p id="0d1b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="pk">如果你想联系我，你可以在</em><a class="ae lr" href="https://www.linkedin.com/in/andymcdonaldgeo/" rel="noopener ugc nofollow" target="_blank"><em class="pk">LinkedIn</em></a><em class="pk">或者我的</em> <a class="ae lr" href="http://andymcdonald.scot/" rel="noopener ugc nofollow" target="_blank"> <em class="pk">网站</em> </a> <em class="pk">找到我。</em></p><p id="cdb1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有兴趣了解更多关于 python 和测井数据或岩石物理学的知识吗？跟我上 <a class="ae lr" href="https://andymcdonaldgeo.medium.com/subscribe" rel="noopener"> <em class="pk">中</em> </a> <em class="pk">。</em></p><p id="2168" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你喜欢阅读这些教程，并想支持我作为一名作家和创作者，那么请考虑报名成为一名媒体成员。一个月 5 美元，你就可以无限制地阅读数千篇各种主题的文章。如果您使用<a class="ae lr" href="https://andymcdonaldgeo.medium.com/membership" rel="noopener"> <strong class="kw iu">我的链接</strong> </a> <strong class="kw iu">，</strong>注册，我将为您赚取一小笔佣金，无需额外费用！</p><div class="mg mh gp gr mi mj"><a href="https://andymcdonaldgeo.medium.com/membership" rel="noopener follow" target="_blank"><div class="mk ab fo"><div class="ml ab mm cl cj mn"><h2 class="bd iu gy z fp mo fr fs mp fu fw is bi translated">通过我的推荐链接加入 Medium 安迪·麦克唐纳</h2><div class="mq l"><h3 class="bd b gy z fp mo fr fs mp fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="mr l"><p class="bd b dl z fp mo fr fs mp fu fw dk translated">andymcdonaldgeo.medium.com</p></div></div><div class="ms l"><div class="pl l mu mv mw ms mx ko mj"/></div></div></a></div></div></div>    
</body>
</html>