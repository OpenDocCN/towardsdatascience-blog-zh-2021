<html>
<head>
<title>Towards Environmental Digital Twins in Azure with Dask and Pangeo</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">与Dask和Pangeo一起迈向Azure环境数字双胞胎</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/towards-environmental-digital-twins-in-azure-with-dask-and-pangeo-71d35414ec58?source=collection_archive---------25-----------------------#2021-04-16">https://towardsdatascience.com/towards-environmental-digital-twins-in-azure-with-dask-and-pangeo-71d35414ec58?source=collection_archive---------25-----------------------#2021-04-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/6deaa7aaf7df02d7f2f16c38c132f0b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kn2BnqQjRNMXN-Ym"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">J.A.Neshan Paul 在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="61d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">环境的数字双胞胎可以帮助实现可持续发展目标和解决气候变化相关问题。他们将强烈依赖地理空间数据及其处理和分析。云环境提供了处理潜在的巨大地理空间数据集所需的灵活性和可伸缩性。在这里，我探索了Azure云功能，并将它们放在一个更广阔的多云视角中。</p><p id="0ca0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">环保数码双胞胎</strong></p><p id="5c93" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">存在许多数字孪生的定义，但一个共同点是物理对象或过程的数字表示。通常，这些对象由数字孪生的用户控制。在环境数字双胞胎中，我将户外环境视为中心“对象”，它不拥有所有者，或者，例如，在土地所有者的情况下，没有人完全控制该对象。至少有三个群体可以从环境数字双胞胎中受益，它们是:</p><p id="a48d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">-影响环境的组织</p><p id="ea61" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">-规划土地使用和基础设施的组织</p><p id="618e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">-运营依赖于环境的组织</p><p id="1b80" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">云间交互</strong></p><p id="a2ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在另一篇<a class="ae kc" rel="noopener" target="_blank" href="/designing-for-digital-twins-e2b3e07a5d1e">博客文章</a>中，我讨论了当涉及大型地理空间数据集，如卫星数据或模拟大气数据时，我们当前面临的分散数据格局。这种情况将持续很多年，因为我已经说过，没有任何组织能够或愿意托管所有这些数据集。由于数据的规模，将数据从一个环境转移到另一个环境并不总是可行的，因此，我认为云之间的交互是成功的环境数字双胞胎的关键。为了最大限度地减少在云和本地环境之间传输的数据量，应该在传输之前对数据进行处理。在每个云环境中，应该为数据选择、聚合和评分以及针对自己的代码的处理提供处理能力。这篇博文的剩余部分将关注微软Azure云环境中的技术映射，它可以促进云间的交互(图1中的绿色矩形)。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/fdd28ce00112c7046a45c5a329538bbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ESa-Fv1_0oF77_64u7Aq1Q.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">图一。多云环境中的数字孪生设置，重点是支持云间交互的Azure功能——绿色矩形。图的详细解释可以在<a class="ae kc" rel="noopener" target="_blank" href="/designing-for-digital-twins-e2b3e07a5d1e">这里</a>找到(图片由作者提供)</p></figure><p id="aeb7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">蔚蓝能力</strong></p><p id="5257" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">微软的<a class="ae kc" href="https://www.microsoft.com/en-us/corporate-responsibility/sustainability" rel="noopener ugc nofollow" target="_blank">环境可持续发展目标</a>雄心勃勃，只有通过行业、政府、非政府组织和研究人员的合作才能实现。在某些方面，自然互动过程的运作以及与人类和地球系统的互动并没有被很好地理解。只有具备知识和洞察力，人们才能以可操作的洞察力有效应对气候变化。为了方便科学家和研究人员增加这些见解，微软建造了<a class="ae kc" href="https://planetarycomputer.microsoft.com/" rel="noopener ugc nofollow" target="_blank">行星计算机</a>。因此，行星计算机将有助于了解我们可以在哪里以及如何最好地减轻人类对环境的影响，以及支持决策者采取气候适应措施。行星计算机由四个主要部件组成，这四个部件也有助于建立环境数字双胞胎，它们是:</p><p id="07d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">-行星计算机数据目录-搜索和查找开放数据集</p><p id="1d3d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">-行星计算机API访问数据和检索数据</p><p id="13e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">- Planetary Computer Hub —用于数据处理，与统一的开发人员环境相结合</p><p id="db43" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">-行星计算机应用程序-第三方开放式和封闭式应用程序构建在行星计算机基础架构上</p><p id="e110" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">组织可以建立他们的环境数字双胞胎，部分基于行星计算机，完全驻留在Azure中，以及所有其他Azure服务。在这里，我们将行星计算机的技术映射到环境数字孪生组件，这些组件促进了从Azure cloud看到的云间交互，参见图2。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lg"><img src="../Images/a5a1784357888db80890926e979c811a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jE5fBj8NODs7kKwD-vJYcA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">图二。Azure中云内交互的技术映射支持云间交互的环境数字双胞胎(图片由作者提供)</p></figure><p id="4a63" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">开放数据和数据存储</strong></p><p id="0721" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">微软已经装载了数Pb的数据，并通过行星计算机使它们可用，当前可用的数据集可以在<a class="ae kc" href="https://planetarycomputer.microsoft.com/catalog" rel="noopener ugc nofollow" target="_blank">行星计算机数据目录</a>中找到。除其他外，这些数据集包括Landsat 8、Sentinel-2以及一个单独的统一的Landsat-Sentinel2数据集、Aster等。所有数据都存储在Azure blob上，可以通过blob存储API直接访问。由于在blob存储上查找数据集可能是一个挑战，因此它们通过开放时空资产目录<a class="ae kc" href="https://stacspec.org/" rel="noopener ugc nofollow" target="_blank"> STAC规范</a>进行索引和搜索。</p><p id="7b3a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">除了行星计算机提供的数据之外，数字双胞胎的主人还需要引入他们自己的数据，这些数据在大型数据集的情况下很可能会存储在blob中。然而，地理空间矢量数据可以登陆Azure管理的数据库(SQL，Postgres，CosmosDB)或blob，并通过<a class="ae kc" href="https://www.ogc.org/blog/4394#:~:text=OGC%20API%20%2D%20Features%20enables%20any,footprint%20of%20the%20data%20represented." rel="noopener ugc nofollow" target="_blank"> STAC OGC API-Features </a>提供。</p><p id="4740" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">计算引擎</strong></p><p id="fe88" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://planetarycomputer.microsoft.com/docs/concepts/computing/" rel="noopener ugc nofollow" target="_blank">行星计算机中枢</a>为基于<a class="ae kc" href="https://docs.dask.org/en/latest/" rel="noopener ugc nofollow" target="_blank"> Dask </a>集群的研究人员提供便利。Dask支持在机器或集群上高效地并行化Python代码。这些行星计算机集群可以通过web客户端启动和访问，它们预装了一个Pangeo环境。这使得研究人员能够在一个充满云和地理空间以及ML Python库的稳定环境中直接使用地理空间数据集。研究人员通过JuypterHub或您的本地Python环境与Dask集群进行交互。行星计算机中枢使研究人员能够在没有it知识的情况下快速启动云基础设施。当需要更大的集群时，Hub提供开箱即用，或者当Digital Twin所有者需要自己的应用程序基础架构时，Dask集群可以在Azure订阅中轻松创建。借助Dask云提供商，集群可以在<a class="ae kc" href="https://cloudprovider.dask.org/en/latest/azure.html" rel="noopener ugc nofollow" target="_blank"> Azure </a>和<a class="ae kc" href="https://cloudprovider.dask.org/en/latest/" rel="noopener ugc nofollow" target="_blank">其他云</a>中创建。这也使得能够一次性使用<a class="ae kc" href="https://github.com/pangeo-data/pangeo-docker-images" rel="noopener ugc nofollow" target="_blank"> Pangeo docker映像</a>，这样集群就预装了Pangeo环境，就像行星计算机中枢一样。</p><p id="17b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">统一开发环境</strong></p><p id="7155" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">行星计算机基于开源工具，具有开放数据并支持开放标准，使其对研究人员和开发人员来说是可访问的、透明的和灵活的。如果开发人员已经熟悉Python，则不需要学习新的工具或语言，并且现有的Python代码可以被带到Dask环境中。Dask集群可以通过<a class="ae kc" href="https://jupyterhub.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> JupyterHub </a> web客户端或本地Python环境访问。由于这种方法适用于多个公共云提供商，有了Dask云提供商，开发人员就有了一个统一的开发环境。</p><p id="9afd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">最后一个音符</strong></p><p id="50f0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有些情况下，上面介绍的技术可能不是最佳的，尤其是当不仅需要应用Python代码，或者需要特定的作业调度程序时。在Digital Twin所有者的Azure订阅中，可以使用许多其他选项来促进数据处理和自动化，如<a class="ae kc" href="https://docs.microsoft.com/en-us/azure/batch/batch-technical-overview" rel="noopener ugc nofollow" target="_blank"> Azure Batch </a>、<a class="ae kc" href="https://docs.microsoft.com/en-us/azure/databricks/scenarios/what-is-azure-databricks" rel="noopener ugc nofollow" target="_blank"> Azure Databricks </a>和<a class="ae kc" href="https://docs.microsoft.com/en-us/azure/synapse-analytics/spark/apache-spark-overview" rel="noopener ugc nofollow" target="_blank">Azure Synapse Analytics Spark Pool</a>、<a class="ae kc" href="https://docs.microsoft.com/en-us/azure/aks/intro-kubernetes" rel="noopener ugc nofollow" target="_blank"> Azure Kubernetes Services </a>等。</p><p id="9315" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">参考</strong>至总体博客文章:<a class="ae kc" rel="noopener" target="_blank" href="/designing-for-digital-twins-e2b3e07a5d1e"> <strong class="kf ir">为数字双胞胎设计</strong> </a></p><p id="2f32" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里的意见是我的。</p></div></div>    
</body>
</html>