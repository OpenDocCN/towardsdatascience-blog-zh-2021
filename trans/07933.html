<html>
<head>
<title>How to Create a Foolproof Interactive Terminal Menu With Bash Scripts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Bash脚本创建一个简单的交互式终端菜单</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-create-a-foolproof-interactive-terminal-menu-with-bash-scripts-97911586d4e5?source=collection_archive---------5-----------------------#2021-07-21">https://towardsdatascience.com/how-to-create-a-foolproof-interactive-terminal-menu-with-bash-scripts-97911586d4e5?source=collection_archive---------5-----------------------#2021-07-21</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="9d2a" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">适用于任何面向操作的终端应用程序的颜色协调的多选菜单</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/8bccede9a4fd22e1efeb2e7b151bff56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f6laUZGNYLJLuGC9EexoAw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">交互式终端菜单。图片由作者提供。</p></figure><h1 id="f837" class="kz la iu bd lb lc ld le lf lg lh li lj ka lk kb ll kd lm ke ln kg lo kh lp lq bi translated">介绍</h1><p id="4166" class="pw-post-body-paragraph lr ls iu lt b lu lv jv lw lx ly jy lz ma mb mc md me mf mg mh mi mj mk ml mm in bi translated">如果您正在考虑为下一个Bash脚本项目创建一个交互式菜单，那么您就找对了地方。在本文中，我们将创建一个简单的带有颜色的菜单模板，以便于导航。</p><p id="279d" class="pw-post-body-paragraph lr ls iu lt b lu mn jv lw lx mo jy lz ma mp mc md me mq mg mh mi mr mk ml mm in bi translated">终端命令使用选项向程序传递参数。这些选项可以是破折号后跟一个字母，也可以是两个破折号带一个单词。如果选项带有一个参数，则称为开关，否则称为标志。</p><p id="2aa7" class="pw-post-body-paragraph lr ls iu lt b lu mn jv lw lx mo jy lz ma mp mc md me mq mg mh mi mr mk ml mm in bi translated">如果您的应用程序有多层命令，使用终端命令的菜单系统会使导航变得容易。我用这个方法创建了一个添加了颜色的<a class="ae ms" href="https://levelup.gitconnected.com/discover-rejuvenate-your-music-library-with-command-line-f3268db67bba" rel="noopener ugc nofollow" target="_blank">终端收音机</a>。</p></div><div class="ab cl mt mu hy mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="in io ip iq ir"><h1 id="8a79" class="kz la iu bd lb lc na le lf lg nb li lj ka nc kb ll kd nd ke ln kg ne kh lp lq bi translated">炙单</h1><p id="ba99" class="pw-post-body-paragraph lr ls iu lt b lu lv jv lw lx ly jy lz ma mb mc md me mf mg mh mi mj mk ml mm in bi translated">主菜单功能包含两个菜单项，但您可以为您的项目添加更多菜单项。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nf ng l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae ms" href="https://tech.io/snippet/lfFEw6c" rel="noopener ugc nofollow" target="_blank">查看运行中的代码。</a></p></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nh"><img src="../Images/9386f5d359ad0a1934f7190ad5baa4c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/format:webp/1*CgggkcOU-_G0Cu7uARtzkw.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">带有-n选项的echo命令使光标保持在作者的同一行图像中。</p></figure><p id="ea72" class="pw-post-body-paragraph lr ls iu lt b lu mn jv lw lx mo jy lz ma mp mc md me mq mg mh mi mr mk ml mm in bi translated"><code class="fe ni nj nk nl b">echo -e</code>选项允许我们使用反斜杠来转义字符，例如，换行符<code class="fe ni nj nk nl b">\n</code>或制表符<code class="fe ni nj nk nl b">\t</code>，如果你需要的话。<code class="fe ni nj nk nl b">echo -n</code>选项省略了尾随换行符。如果没有<code class="fe ni nj nk nl b">-n</code>选项，光标会移动到下一行，如图所示。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nm"><img src="../Images/8b820e88d0baa82240073b4a7e8d0adc.png" data-original-src="https://miro.medium.com/v2/resize:fit:496/format:webp/1*C4bR7xdbreP1v6iZzhxR8Q.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">不带-n选项echo命令会追加一个换行符。图片由作者提供。</p></figure><p id="9b31" class="pw-post-body-paragraph lr ls iu lt b lu mn jv lw lx mo jy lz ma mp mc md me mq mg mh mi mr mk ml mm in bi translated">所有菜单都将包含<code class="fe ni nj nk nl b">case statement</code>来保存不同的选项。这使得它比使用多个if语句更容易阅读和管理。</p><p id="8870" class="pw-post-body-paragraph lr ls iu lt b lu mn jv lw lx mo jy lz ma mp mc md me mq mg mh mi mr mk ml mm in bi translated">如果用户选择1，它将显示子菜单。您可以将<code class="fe ni nj nk nl b">CMD1</code>更改为任何菜单名称。选项0将退出脚本，任何其他字母<code class="fe ni nj nk nl b">*</code>将显示警告，并以状态1退出。</p></div><div class="ab cl mt mu hy mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="in io ip iq ir"><h1 id="dcdb" class="kz la iu bd lb lc na le lf lg nb li lj ka nc kb ll kd nd ke ln kg ne kh lp lq bi translated">子菜单</h1><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nf ng l"/></div></figure><p id="a4d3" class="pw-post-body-paragraph lr ls iu lt b lu mn jv lw lx mo jy lz ma mp mc md me mq mg mh mi mr mk ml mm in bi translated">第一个子菜单项<code class="fe ni nj nk nl b">SUBCMD1</code>包含显示子子菜单的子命令。子子菜单一旦完成动作，就会再次显示子菜单。第二个菜单项<code class="fe ni nj nk nl b">Go Back to Main Menu</code>使用case语句中的<code class="fe ni nj nk nl b">menu</code>功能返回主菜单。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nn"><img src="../Images/135835d5b25c24c041493f0942d3854b.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*vX-yptNet-UgsMOm8d3Akw.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">子菜单包括返回主菜单。图片由作者提供。</p></figure></div><div class="ab cl mt mu hy mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="in io ip iq ir"><h1 id="81a5" class="kz la iu bd lb lc na le lf lg nb li lj ka nc kb ll kd nd ke ln kg ne kh lp lq bi translated">子子菜单</h1><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nf ng l"/></div></figure><p id="012e" class="pw-post-body-paragraph lr ls iu lt b lu mn jv lw lx mo jy lz ma mp mc md me mq mg mh mi mr mk ml mm in bi translated">我们为子菜单中的第一项和第二项添加了简单的功能。第三和第四项将返回到子菜单和主菜单。我们对<code class="fe ni nj nk nl b">0</code>和<code class="fe ni nj nk nl b">*</code>重复同样的操作，所以让我们在下一节创建公共函数。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj no"><img src="../Images/cb879461735d84ff06adecdc80b56d03.png" data-original-src="https://miro.medium.com/v2/resize:fit:658/format:webp/1*S9f_KICepbIGzIV5gZq20g.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">子子菜单。图片由作者提供。</p></figure></div><div class="ab cl mt mu hy mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="in io ip iq ir"><h1 id="b281" class="kz la iu bd lb lc na le lf lg nb li lj ka nc kb ll kd nd ke ln kg ne kh lp lq bi translated">创建常用功能</h1><p id="a14a" class="pw-post-body-paragraph lr ls iu lt b lu lv jv lw lx ly jy lz ma mb mc md me mf mg mh mi mj mk ml mm in bi translated">让我们为退出和错误选项创建函数:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nf ng l"/></div></figure><p id="64a6" class="pw-post-body-paragraph lr ls iu lt b lu mn jv lw lx mo jy lz ma mp mc md me mq mg mh mi mr mk ml mm in bi translated">然后我们可以将它们应用到我们<code class="fe ni nj nk nl b">case statements</code>中的<code class="fe ni nj nk nl b">0</code>和<code class="fe ni nj nk nl b">*</code>。</p><pre class="kk kl km kn gu np nl nq nr aw ns bi"><span id="1267" class="nt la iu nl b gz nu nv l nw nx">case $ans in<br/>...<br/>0)<br/>    fn_bye<br/>    ;;<br/>*)<br/>    fn_fail<br/>    ;;<br/>esac<br/>...</span></pre><p id="b511" class="pw-post-body-paragraph lr ls iu lt b lu mn jv lw lx mo jy lz ma mp mc md me mq mg mh mi mr mk ml mm in bi translated">到目前为止，菜单很简单。让我们在下一节中给菜单添加颜色。</p></div><div class="ab cl mt mu hy mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="in io ip iq ir"><h1 id="5fac" class="kz la iu bd lb lc na le lf lg nb li lj ka nc kb ll kd nd ke ln kg ne kh lp lq bi translated">创建颜色函数</h1><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nf ng l"/></div></figure><p id="6be3" class="pw-post-body-paragraph lr ls iu lt b lu mn jv lw lx mo jy lz ma mp mc md me mq mg mh mi mr mk ml mm in bi translated">这些颜色函数可以接受一个参数。例如:</p><pre class="kk kl km kn gu np nl nq nr aw ns bi"><span id="988c" class="nt la iu nl b gz nu nv l nw nx">$(greenprint '1)') SUBCMD1<br/>$(magentaprint '2)') Go Back to Main Menu<br/>$(redprint '0)') Exit</span></pre><p id="ad16" class="pw-post-body-paragraph lr ls iu lt b lu mn jv lw lx mo jy lz ma mp mc md me mq mg mh mi mr mk ml mm in bi translated">我们在引号内使用<code class="fe ni nj nk nl b">$(command)</code>。它运行<code class="fe ni nj nk nl b">command</code>并替换其输出。</p><p id="320c" class="pw-post-body-paragraph lr ls iu lt b lu mn jv lw lx mo jy lz ma mp mc md me mq mg mh mi mr mk ml mm in bi translated">对于我们的菜单，我们将使用洋红色代表返回主菜单，红色代表退出，以使整个菜单保持一致。此外，我们将添加不同的颜色菜单名称。</p><pre class="kk kl km kn gu np nl nq nr aw ns bi"><span id="debf" class="nt la iu nl b gz nu nv l nw nx">$(magentaprint 'MAIN MENU')<br/>$(blueprint 'CMD1 SUBMENU')<br/>$(yellowprint 'SUB-SUBMENU')</span></pre></div><div class="ab cl mt mu hy mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="in io ip iq ir"><h1 id="001d" class="kz la iu bd lb lc na le lf lg nb li lj ka nc kb ll kd nd ke ln kg ne kh lp lq bi translated">最终代码</h1><p id="dd63" class="pw-post-body-paragraph lr ls iu lt b lu lv jv lw lx ly jy lz ma mb mc md me mf mg mh mi mj mk ml mm in bi translated">让我们把它们放在一起。在本文的最后一节，您可以使用嵌入式交互式终端控制台测试该脚本。请尝试导航不同的菜单点。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ny"><img src="../Images/023720d7c20521d67f3001b6bbe669a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*ohMOh0aLUIdO-j0T9f4feA.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">菜单与颜色功能一起使用。图片由作者提供。</p></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nf ng l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae ms" href="https://tech.io/snippet/08FHqZR" rel="noopener ugc nofollow" target="_blank">查看运行中的最终代码。</a>图片作者。</p></figure><p id="2d98" class="pw-post-body-paragraph lr ls iu lt b lu mn jv lw lx mo jy lz ma mp mc md me mq mg mh mi mr mk ml mm in bi translated">下面是实际运行的最终代码。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nz ng l"/></div></figure></div><div class="ab cl mt mu hy mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="in io ip iq ir"><h1 id="0404" class="kz la iu bd lb lc na le lf lg nb li lj ka nc kb ll kd nd ke ln kg ne kh lp lq bi translated">结论</h1><p id="723f" class="pw-post-body-paragraph lr ls iu lt b lu lv jv lw lx ly jy lz ma mb mc md me mf mg mh mi mj mk ml mm in bi translated">我在名为<code class="fe ni nj nk nl b">tera</code>的终端无线电中使用了这种方法。请<a class="ae ms" href="https://github.com/shinokada/tera" rel="noopener ugc nofollow" target="_blank">安装它</a>，看看我是如何在实际应用中应用这些菜单系统的。</p><p id="5347" class="pw-post-body-paragraph lr ls iu lt b lu mn jv lw lx mo jy lz ma mp mc md me mq mg mh mi mr mk ml mm in bi translated">你可以发挥创意，也可以在菜单项中使用表情符号或数字字母。</p><p id="4a29" class="pw-post-body-paragraph lr ls iu lt b lu mn jv lw lx mo jy lz ma mp mc md me mq mg mh mi mr mk ml mm in bi translated">如果您的应用程序有多层菜单系统，交互式菜单系统比普通的选项解析器系统更容易在复杂的菜单系统中导航。</p><p id="8de0" class="pw-post-body-paragraph lr ls iu lt b lu mn jv lw lx mo jy lz ma mp mc md me mq mg mh mi mr mk ml mm in bi translated">我希望您可以将这些代码应用到下一个Bash脚本项目中。</p></div><div class="ab cl mt mu hy mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="in io ip iq ir"><p id="f131" class="pw-post-body-paragraph lr ls iu lt b lu mn jv lw lx mo jy lz ma mp mc md me mq mg mh mi mr mk ml mm in bi translated"><strong class="lt iv">通过</strong> <a class="ae ms" href="https://blog.codewithshin.com/membership" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iv">成为</strong> </a> <strong class="lt iv">会员，可以完全访问媒体上的每个故事。</strong></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj oa"><img src="../Images/0be3ee559fee844cb75615290e4a8b29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*DjTM9iFtVc2wlcWcOms7VQ.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae ms" href="https://blog.codewithshin.com/subscribe" rel="noopener ugc nofollow" target="_blank">https://blog.codewithshin.com/subscribe</a></p></figure></div><div class="ab cl mt mu hy mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="in io ip iq ir"><h1 id="6cc2" class="kz la iu bd lb lc na le lf lg nb li lj ka nc kb ll kd nd ke ln kg ne kh lp lq bi translated">参考</h1><ul class=""><li id="f49a" class="ob oc iu lt b lu lv lx ly ma od me oe mi of mm og oh oi oj bi translated"><a class="ae ms" href="https://devdojo.com/bobbyiliev/how-to-create-an-interactive-menu-in-bash" rel="noopener ugc nofollow" target="_blank">https://dev Dojo . com/bobbyliev/how-to-create-an-interactive-menu-in-bash</a></li><li id="4a4e" class="ob oc iu lt b lu ok lx ol ma om me on mi oo mm og oh oi oj bi translated"><a class="ae ms" href="https://bit.ly/3y3imV5" rel="noopener ugc nofollow" target="_blank">https://bit.ly/3y3imV5</a></li></ul></div></div>    
</body>
</html>