<html>
<head>
<title>The 6-Minute Guide to Scikit-learn’s Version 1.0 Changes 😎</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">sci kit-learn 1.0版的6分钟指南有所变化😎</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-6-minute-guide-to-scikit-learns-version-1-0-changes-91b739d99f71?source=collection_archive---------11-----------------------#2021-09-24">https://towardsdatascience.com/the-6-minute-guide-to-scikit-learns-version-1-0-changes-91b739d99f71?source=collection_archive---------11-----------------------#2021-09-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b7bf" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">最热门歌曲的快速浏览🎸</h2></div><p id="76e7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Scikit-learn多年来一直是主要的Python机器学习库。迁移到1.0版本并没有带来很多重大的突破性变化，但它确实包含了一些bug修复、一些新特性、一些加速和一大堆API清理。🧹</p><p id="091e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一个更加一致的API对新老用户来说都是极好的。在本文中，我将深入探讨这些变化，以便您知道如何利用1.0版本。🎉</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/1467e4b5cf37fb8e41b7c8d55812aba2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Me5smJ8Z0Od9qG5PqCO5Tg.jpeg"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">这只柯基很兴奋！资料来源:pixabay.com</p></figure><h2 id="34ab" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">新功能</h2><p id="9bfb" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">现在scikit-learn让你用<code class="fe ms mt mu mv b">preprocessing.SplineTransformer</code>创建B样条。我认为样条类似于更细粒度的多项式变换。如下图所示，样条可以更容易地避免高次多项式的荒谬外推。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/e4cb31ecfc10cf1c9c259835c148bdf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*gumyGQQdRQuxvSPG0eUeiQ.png"/></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">来源:<a class="ae mx" href="https://scikit-learn.org/dev/auto_examples/linear_model/plot_polynomial_interpolation.html" rel="noopener ugc nofollow" target="_blank"> scikit-learn文档</a></p></figure><p id="bbb7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">詹姆斯等人在他们最近更新的机器学习试金石<a class="ae mx" href="https://www.statlearning.com/" rel="noopener ugc nofollow" target="_blank"> <em class="my">统计学习介绍，第二版</em> </a>中都是关于样条的。</p><h2 id="864d" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">OneHot编码器改进🎉</h2><p id="fbd3" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">我最喜欢的1.0改动是对<code class="fe ms mt mu mv b">OneHotEncoder</code>。现在，您可以删除编码产生的第一个类别，转换步骤可以接受它以前没有见过的值。具体来说，<code class="fe ms mt mu mv b">Feature preprocessing.OneHotEncoder</code>现在支持<code class="fe ms mt mu mv b">handle_unknown='ignore'</code>和<code class="fe ms mt mu mv b">drop='first'</code>。如果您想对您的模型进行推理，这种增强特别有用。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/69335d941dbc011c21bd00da22fc13ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*GQyIoURMn3HBcmXs"/></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">资料来源:https://www.peacocktv.com/</p></figure><h2 id="ef58" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">熊猫爱🐼❤️</h2><p id="13b5" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">最近的scikit-learn版本增加了与熊猫一起工作的其他改进。版本1.0带来了更好地跟踪进出scikit的列名的能力-学习转换器和估计器。以下更改将使在scikit-learn中使用数据框架变得更好。</p><p id="4f1a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，当您将数据帧传递给估算器并调用fit时，估算器会将特性名称存储在<code class="fe ms mt mu mv b">feature_names_in_</code>属性中。同时，<code class="fe ms mt mu mv b">get_feature_names_out</code>已经被添加到transformer API中，以返回输出特性的名称。注意<code class="fe ms mt mu mv b">get_feature_names</code>已经被弃用。</p><p id="f43a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe ms mt mu mv b">get_feature_names_out</code>并不适用于所有的变形金刚，但它适用于<code class="fe ms mt mu mv b">ColumnTransformer</code>。例如，以下是如何对来自<a class="ae mx" href="https://raw.githubusercontent.com/mwaskom/seaborn-data/master/tips.csv" rel="noopener ugc nofollow" target="_blank"> tips数据集</a>的分类列进行一次编码，并返回到具有有意义的列名的数据帧:</p><pre class="lf lg lh li gt na mv nb nc aw nd bi"><span id="3790" class="lu lv it mv b gy ne nf l ng nh"># ... read in tips dataset and split into train and test sets</span><span id="3e93" class="lu lv it mv b gy ni nf l ng nh">from sklearn.compose import make_column_transformer<br/>from sklearn.preprocessing import OneHotEncoder</span><span id="03cb" class="lu lv it mv b gy ni nf l ng nh">ohe = OneHotEncoder(<br/>    sparse=False, <br/>    drop='if_binary', <br/>    handle_unknown='ignore', <br/>)</span><span id="2985" class="lu lv it mv b gy ni nf l ng nh">tfd = make_column_transformer(<br/>    (ohe, ['sex', 'smoker', 'day', 'time']),   <br/>    remainder='passthrough',<br/>)</span><span id="c4fe" class="lu lv it mv b gy ni nf l ng nh">X_train_encoded = tfd.fit_transform(X_train)</span><span id="b403" class="lu lv it mv b gy ni nf l ng nh">X_train_encoded = pd.DataFrame(<br/>    X_train_encoded, <br/>    columns=tfd.get_feature_names_out()<br/>)</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nj"><img src="../Images/005b44c96c1bed836262189491b2cdc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K6Ye9fUBSr8wOmk5wqD0xA.png"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">数据帧post-one-hot编码和重组。来源:杰夫的代码</p></figure><p id="fffd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我希望scikit-learn的OneHotEncoder能够提供一个选项，当您传递给它一个数据帧时，它会返回一个数据帧。我希望您也可以轻松地指定想要编码的列的子集。<a class="ae mx" href="https://github.com/scikit-learn-contrib/category_encoders" rel="noopener ugc nofollow" target="_blank">类别编码器包</a>有一个OneHotEncoder类，具有这两个优点，但是在撰写本文时这个库还没有被维护。😢</p><h2 id="fa5b" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">一致性</h2><p id="73c9" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">为损失或标准参数指定<code class="fe ms mt mu mv b">squared_error</code>,过去您可能已经用另一个名称指定了相同的内容。</p><p id="0828" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样适用于通过<code class="fe ms mt mu mv b">absolute_error</code>。过去你可能用过<code class="fe ms mt mu mv b">mae</code>或类似的东西，但现在你只需要通过<code class="fe ms mt mu mv b">absolute_error</code>。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nk"><img src="../Images/93934cda81b4d787d91c64e7efa944c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fvvEmvgEKBUFqMykrCuJJg.jpeg"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">一些不错的API清理。资料来源:pixabay.com</p></figure><h2 id="c326" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">分离</h2><p id="0abc" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">诸如<code class="fe ms mt mu mv b">LinearRegression</code>、<code class="fe ms mt mu mv b">Lasso</code>和<code class="fe ms mt mu mv b">Ridge</code>等<code class="fe ms mt mu mv b">linear_model</code>算法中的<code class="fe ms mt mu mv b">normalize</code>选项现已被弃用。为了获得相同的行为，在将转换后的数据传递给线性模型之前，首先将您的特征输入到<code class="fe ms mt mu mv b">StandardScaler(with_mean=False)</code>中。这种变化将预处理和建模问题分开。</p><h2 id="01ff" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">灵活性💪</h2><p id="9c6f" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">我教我的学生使用<code class="fe ms mt mu mv b">metrics.plot_confusion_matrix</code>和<code class="fe ms mt mu mv b">metrics.plot_precision_recall_curve</code>快速绘制混淆矩阵或精确回忆曲线。在旧版本中，您必须传递scikit-learn分类器和数据。这通常会导致重复的模型拟合。</p><p id="4d8a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用1.0，您仍然可以拟合模型并一步绘制结果，或者您可以只传递模型输出并获得您的图。</p><p id="0102" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">具体来说，<code class="fe ms mt mu mv b">metrics.ConfusionMatrixDisplay</code>现在有两个类方法:<code class="fe ms mt mu mv b">from_estimator</code>和<code class="fe ms mt mu mv b">from_predictions</code>，可以选择是拟合和绘图还是只绘图。同样，<code class="fe ms mt mu mv b">metrics.PrecisionRecallDisplay</code>有<code class="fe ms mt mu mv b">from_estimator</code>和<code class="fe ms mt mu mv b">from_predictions</code>方法来创建精确召回曲线。</p><p id="43f3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">与上述绘图功能的增强一样，Scikit-learn的<code class="fe ms mt mu mv b">calibration.CalibrationDisplay</code>现在可以使用<code class="fe ms mt mu mv b">from_estimator</code>或<code class="fe ms mt mu mv b">from_predictions</code>方法绘制校准曲线。</p><p id="e7bd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你已经从<code class="fe ms mt mu mv b">predict_proba</code>中得到预测的概率，使用<code class="fe ms mt mu mv b">from_predictions</code>。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nl"><img src="../Images/dc4d66184801034ebcd1ab536c64a1e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d9UVz7GsCNq17MOTgpQUmw.png"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">来源:杰夫的代码</p></figure><p id="a808" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">否则，将fit分类器的一个实例以及X和y数据传递给<code class="fe ms mt mu mv b">from_estimator</code>。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nm"><img src="../Images/f50bc607a6b386da78ba4dcabdd06c10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_lBk5xxzeBNugJHaFWxluA.png"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">来源:杰夫的代码</p></figure><p id="4236" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另外两个API改进可以为您的工作流提供更大的灵活性。</p><p id="195b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">递归特征消除通过迭代地移除最没有价值的特征来减少特征的数量，这由指定的算法来确定。在过去，你不能轻易地将参数传递给RFE所使用的估计量。现在有了<code class="fe ms mt mu mv b">feature_selection.RFE.fit</code>你就可以了。🚀</p><p id="2ad3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我喜欢预先处理我丢失的值，但是如果你不这样做，<code class="fe ms mt mu mv b">preprocessing.OrdinalEncoder</code>可以接受丢失的值。多方便啊。🙂</p><h2 id="69b9" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">毕业🎓</h2><p id="0b2c" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated"><code class="fe ms mt mu mv b">HistGradientBoostingClassifier</code>和<code class="fe ms mt mu mv b">HistGradientBoostingRegressor</code>已经不是实验性的了，不需要特意导入。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nk"><img src="../Images/adeaf9b92e03f7acbc087fce0b2059ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J4XaeirMsAfoUIMzPqH2ZQ.jpeg"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">不再是实验性的。资料来源:pixabay.com</p></figure><h2 id="046c" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">速度提升🚀</h2><p id="2948" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">我只想说有一些速度上的改进。我最兴奋的是<code class="fe ms mt mu mv b">preprocessing.PolynomialFeatures.</code>的提升</p><h2 id="1ce9" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">需要关键字…有时</h2><p id="04ae" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">最后，但同样重要的是，为了提高清晰度，许多参数现在需要关键字参数而不是位置参数。这一变化对新用户来说尤其有益。我继续寻找一些没有强制关键字参数的地方，但是寻找这种远离位置参数的趋势继续下去。</p><h1 id="031b" class="nn lv it bd lw no np nq lz nr ns nt mc jz nu ka mf kc nv kd mi kf nw kg ml nx bi translated">包装</h1><p id="6bf8" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">以上是我在1.0版本中最成功的作品。总之，1.0版本有一些不错的变化，但我认为0.24版本中的新增内容更加丰富。点击这里查看我的变化指南——我打赌你会学到一些新东西。😀</p><h2 id="77dd" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">尝试一下</h2><p id="d208" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">使用<code class="fe ms mt mu mv b">pip install -U scikit-learn</code>升级到最新稳定的scikit-learn版本。</p><p id="98f3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">非常感谢项目维护人员和所有为发布做出贡献的人！点击这里查看完整的变更日志<a class="ae mx" href="https://scikit-learn.org/dev/whats_new/v1.0.html#changes-1-0" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="2660" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我希望这篇scikit-learn 1.0中的基本变化指南对您有所帮助。如果你有，请分享到你最喜欢的社交媒体上。😀</p><p id="3d55" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我写关于数据科学、机器学习、<a class="ae mx" href="https://memorablepython.com" rel="noopener ugc nofollow" target="_blank"> Python </a>和其他有趣的话题。如果你对此感兴趣，请在此处阅读更多<a class="ae mx" href="https://medium.com/@jeffhale" rel="noopener"/>并订阅我的<a class="ae mx" href="https://dataawesome.com/" rel="noopener ugc nofollow" target="_blank"> Data Awesome时事通讯</a>，获取有用数据资源的不定期更新。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/337da596c49a1fc55f7054d666e26ca4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uL6oxkCzcu4SDY1TzSrdJA.jpeg"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">资料来源:pixabay.com</p></figure><p id="8365" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">sklearning快乐！👍</p></div></div>    
</body>
</html>