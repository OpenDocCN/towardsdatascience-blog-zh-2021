<html>
<head>
<title>How To Get The Row Count Of a Pandas DataFrame</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何获得熊猫数据帧的行数</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-get-the-row-count-of-a-pandas-dataframe-be67232ad5de?source=collection_archive---------3-----------------------#2021-08-23">https://towardsdatascience.com/how-to-get-the-row-count-of-a-pandas-dataframe-be67232ad5de?source=collection_archive---------3-----------------------#2021-08-23</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="dc88" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">探讨如何更有效地获取熊猫数据帧的行数</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/db46be3ac49aa8dcf451d07310312d4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_4D-6Vr-ILDSwXk9dwRGLg.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@steve_j?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">斯蒂夫·约翰森</a>在<a class="ae kz" href="https://unsplash.com/s/photos/count?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="c7dc" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">介绍</h2><p id="0609" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在今天的简短指南中，我们将讨论几种计算熊猫数据帧行数的方法。此外，我们将展示如何在导出计数时忽略空值。最后，我们将观察本文中介绍的每种方法的性能，并确定计算行数的最有效方法。</p></div><div class="ab cl mp mq hy mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="in io ip iq ir"><p id="865c" class="pw-post-body-paragraph lw lx iu ly b lz mw jv mb mc mx jy me lj my mg mh ln mz mj mk lr na mm mn mo in bi translated">首先，让我们创建一个示例数据框架，我们将在本指南中引用它来演示一些概念。</p><pre class="kk kl km kn gu nb nc nd ne aw nf bi"><span id="043b" class="la lb iu nc b gz ng nh l ni nj">import pandas as pd</span><span id="e207" class="la lb iu nc b gz nk nh l ni nj">df = pd.DataFrame({<br/>    'colA':[1, 2, None, 4, 5], <br/>    'colB': [None, 'b', 'c', 'd', 'e'],<br/>    'colC': [True, False, False, True, None],<br/>})</span><span id="5251" class="la lb iu nc b gz nk nh l ni nj">print(df)<br/>   <em class="nl">colA  colB   colC<br/>0   1.0  None   True<br/>1   2.0     b  False<br/>2   NaN     c  False<br/>3   4.0     d   True<br/>4   5.0     e   None</em></span></pre></div><div class="ab cl mp mq hy mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="in io ip iq ir"><h2 id="3884" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">使用len()</h2><p id="cc71" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">计算数据帧行数最简单明了的方法是使用<code class="fe nm nn no nc b">len()</code>内置方法:</p><pre class="kk kl km kn gu nb nc nd ne aw nf bi"><span id="adb0" class="la lb iu nc b gz ng nh l ni nj">&gt;&gt;&gt; <strong class="nc iv">len(df)</strong><br/>5</span></pre><p id="17b9" class="pw-post-body-paragraph lw lx iu ly b lz mw jv mb mc mx jy me lj my mg mh ln mz mj mk lr na mm mn mo in bi translated">请注意，您甚至可以通过<code class="fe nm nn no nc b">df.index</code>来稍微提高性能(在本文的最后一节中有更多相关内容):</p><pre class="kk kl km kn gu nb nc nd ne aw nf bi"><span id="4162" class="la lb iu nc b gz ng nh l ni nj">&gt;&gt;&gt; <strong class="nc iv">len(df.index)</strong><br/>5</span></pre></div><div class="ab cl mp mq hy mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="in io ip iq ir"><h2 id="522e" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">使用形状</h2><p id="9735" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">或者，您甚至可以使用<code class="fe nm nn no nc b"><a class="ae kz" href="https://pandas.pydata.org/pandas-docs/version/0.24.2/reference/api/pandas.DataFrame.shape.html" rel="noopener ugc nofollow" target="_blank">pandas.DataFrame.shape</a></code>，它返回一个表示数据帧维度的元组。元组的第一个元素对应于行数，而第二个元素表示列数。</p><pre class="kk kl km kn gu nb nc nd ne aw nf bi"><span id="55b4" class="la lb iu nc b gz ng nh l ni nj">&gt;&gt;&gt; <strong class="nc iv">df.shape[0]</strong><br/>5</span></pre><p id="354e" class="pw-post-body-paragraph lw lx iu ly b lz mw jv mb mc mx jy me lj my mg mh ln mz mj mk lr na mm mn mo in bi translated">您也可以解包<code class="fe nm nn no nc b">df.shape</code>的结果并推断行数，如下所示:</p><pre class="kk kl km kn gu nb nc nd ne aw nf bi"><span id="33b1" class="la lb iu nc b gz ng nh l ni nj">&gt;&gt;&gt; <strong class="nc iv">n_rows, _ = df.shape</strong><br/>&gt;&gt;&gt; n_rows<br/>5</span></pre></div><div class="ab cl mp mq hy mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="in io ip iq ir"><h2 id="246e" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">使用count()</h2><p id="65c9" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在计算pandas中的行数时，第三个选项是<code class="fe nm nn no nc b"><a class="ae kz" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.count.html" rel="noopener ugc nofollow" target="_blank">pandas.DataFrame.count()</a></code>方法，即<strong class="ly iv">返回非NA条目的计数</strong>。</p><p id="61e3" class="pw-post-body-paragraph lw lx iu ly b lz mw jv mb mc mx jy me lj my mg mh ln mz mj mk lr na mm mn mo in bi translated">假设我们想要计算某一列下没有空值的所有行。以下内容应该对我们有用:</p><pre class="kk kl km kn gu nb nc nd ne aw nf bi"><span id="76ee" class="la lb iu nc b gz ng nh l ni nj">&gt;&gt;&gt; <strong class="nc iv">df[df.columns[1]].count()</strong><br/>4</span></pre><p id="602b" class="pw-post-body-paragraph lw lx iu ly b lz mw jv mb mc mx jy me lj my mg mh ln mz mj mk lr na mm mn mo in bi translated">只有当您希望忽略空值时，才应该使用此方法。如果不是这种情况，那么您应该使用<code class="fe nm nn no nc b">len()</code>或<code class="fe nm nn no nc b">shape</code>。</p></div><div class="ab cl mp mq hy mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="in io ip iq ir"><h2 id="916a" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">表演</h2><p id="9ca2" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">现在我们已经知道了一些计算数据帧中行数的不同方法，讨论它们对性能的影响会很有意思。为此，我们将创建一个比我们在本指南中使用的数据帧更大的数据帧。</p><pre class="kk kl km kn gu nb nc nd ne aw nf bi"><span id="a744" class="la lb iu nc b gz ng nh l ni nj">import numpy as np<br/>import pandas as pd<br/></span><span id="3f3e" class="la lb iu nc b gz nk nh l ni nj">df = pd.DataFrame(<br/>    np.random.randint(0, 100, size=(10000, 4)),<br/>    columns=list('ABCD')<br/>)</span><span id="fa90" class="la lb iu nc b gz nk nh l ni nj">print(df)<br/>       <em class="nl">A   B   C   D<br/>0     61  38   2  39<br/>1     96  65  20  47<br/>2     35  56  97   8<br/>3     71  31  80  25<br/>4     20  63  99  34<br/>   ..  ..  ..  ..<br/>9995  96  81   6  43<br/>9996  43  22  83  47<br/>9997  62  92  42  26<br/>9998  11  48  91  85<br/>9999  55  47  77  66<br/>[10000 rows x 4 columns]</em></span></pre><p id="ed00" class="pw-post-body-paragraph lw lx iu ly b lz mw jv mb mc mx jy me lj my mg mh ln mz mj mk lr na mm mn mo in bi translated">为了评估性能，我们将使用<code class="fe nm nn no nc b"><a class="ae kz" href="https://docs.python.org/3/library/timeit.html" rel="noopener ugc nofollow" target="_blank">timeit</a></code>,这在对少量Python代码计时时很有用。</p><pre class="kk kl km kn gu nb nc nd ne aw nf bi"><span id="291a" class="la lb iu nc b gz ng nh l ni nj">&gt;&gt;&gt; <strong class="nc iv">%timeit len(df)</strong><br/><strong class="nc iv">548 ns</strong> ± 24.6 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)</span><span id="d211" class="la lb iu nc b gz nk nh l ni nj">&gt;&gt;&gt; <strong class="nc iv">%timeit len(df.index)</strong><br/><strong class="nc iv">358 ns</strong> ± 10.3 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)</span><span id="a9ee" class="la lb iu nc b gz nk nh l ni nj">&gt;&gt;&gt; <strong class="nc iv">%timeit df.shape[0]<br/>904 ns</strong> ± 48 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)</span><span id="c5f3" class="la lb iu nc b gz nk nh l ni nj">&gt;&gt;&gt; %timeit df[df.columns[1]].count()<br/><strong class="nc iv">81.9 µs</strong> ± 4.91 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)</span></pre><p id="5384" class="pw-post-body-paragraph lw lx iu ly b lz mw jv mb mc mx jy me lj my mg mh ln mz mj mk lr na mm mn mo in bi translated">从上面的结果我们可以看出<strong class="ly iv">熊猫中最高效的行数计算方法是</strong> <code class="fe nm nn no nc b"><strong class="ly iv">len()</strong></code> <strong class="ly iv">方法。通过提供索引(</strong> <code class="fe nm nn no nc b"><strong class="ly iv">len(df.index)</strong></code> <strong class="ly iv">)甚至更快。</strong></p><p id="bd66" class="pw-post-body-paragraph lw lx iu ly b lz mw jv mb mc mx jy me lj my mg mh ln mz mj mk lr na mm mn mo in bi translated"><strong class="ly iv">效率最低的方法是</strong> <code class="fe nm nn no nc b"><strong class="ly iv">count()</strong></code>，因此，只有在需要从计数中排除空条目时，才应该使用这种方法。</p></div><div class="ab cl mp mq hy mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="in io ip iq ir"><h2 id="6b1b" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">最后的想法</h2><p id="6299" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在今天的文章中，我们讨论了如何使用</p><ul class=""><li id="057b" class="np nq iu ly b lz mw mc mx lj nr ln ns lr nt mo nu nv nw nx bi translated"><code class="fe nm nn no nc b">len()</code></li><li id="94c3" class="np nq iu ly b lz ny mc nz lj oa ln ob lr oc mo nu nv nw nx bi translated"><code class="fe nm nn no nc b">shape</code></li><li id="1ba7" class="np nq iu ly b lz ny mc nz lj oa ln ob lr oc mo nu nv nw nx bi translated">和<code class="fe nm nn no nc b">count()</code></li></ul><p id="8907" class="pw-post-body-paragraph lw lx iu ly b lz mw jv mb mc mx jy me lj my mg mh ln mz mj mk lr na mm mn mo in bi translated">方法。注意<code class="fe nm nn no nc b">count()</code>应该只在你想忽略某些列的空行时使用。最后，我们讨论了这些方法在性能方面的差异。</p></div><div class="ab cl mp mq hy mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="in io ip iq ir"><p id="bd5e" class="pw-post-body-paragraph lw lx iu ly b lz mw jv mb mc mx jy me lj my mg mh ln mz mj mk lr na mm mn mo in bi translated"><a class="ae kz" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="ly iv">成为会员</strong> </a> <strong class="ly iv">阅读介质上的每一个故事。你的会员费直接支持我和你看的其他作家。</strong></p></div><div class="ab cl mp mq hy mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph lw lx iu ly b lz mw jv mb mc mx jy me lj my mg mh ln mz mj mk lr na mm mn mo in bi translated"><strong class="ly iv">你可能也会喜欢</strong></p><div class="od oe gq gs of og"><a rel="noopener follow" target="_blank" href="/loc-vs-iloc-in-pandas-92fc125ed8eb"><div class="oh ab fp"><div class="oi ab oj cl cj ok"><h2 class="bd iv gz z fq ol fs ft om fv fx it bi translated">熊猫中的loc与iloc</h2><div class="on l"><p class="bd b dl z fq ol fs ft om fv fx dk translated">towardsdatascience.com</p></div></div><div class="oo l"><div class="op l oq or os oo ot kt og"/></div></div></a></div></div><div class="ab cl mp mq hy mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu og"><a rel="noopener follow" target="_blank" href="/how-to-pretty-print-pandas-dataframes-and-series-b301fa78bb6c"><div class="oh ab fp"><div class="oi ab oj cl cj ok"><h2 class="bd iv gz z fq ol fs ft om fv fx it bi translated">如何漂亮地打印熊猫数据帧和系列</h2><div class="on l"><p class="bd b dl z fq ol fs ft om fv fx dk translated">towardsdatascience.com</p></div></div><div class="oo l"><div class="ou l oq or os oo ot kt og"/></div></div></a></div></div><div class="ab cl mp mq hy mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu og"><a href="https://betterprogramming.pub/11-python-one-liners-for-everyday-programming-f346a0a73f39" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fp"><div class="oi ab oj cl cj ok"><h2 class="bd iv gz z fq ol fs ft om fv fx it bi translated">用于日常编程的11个Python一行程序</h2><div class="ov l"><h3 class="bd b gz z fq ol fs ft om fv fx dk translated">令人惊叹的Python片段不会降低可读性</h3></div><div class="on l"><p class="bd b dl z fq ol fs ft om fv fx dk translated">better编程. pub</p></div></div><div class="oo l"><div class="ow l oq or os oo ot kt og"/></div></div></a></div></div></div>    
</body>
</html>