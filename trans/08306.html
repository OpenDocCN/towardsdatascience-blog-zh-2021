<html>
<head>
<title>Solve Sudoku using Linear Programming (Python — PuLP)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用线性编程解决数独(Python-PuLP)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/solve-sudoku-using-linear-programming-python-pulp-b41b29f479f3?source=collection_archive---------2-----------------------#2021-07-31">https://towardsdatascience.com/solve-sudoku-using-linear-programming-python-pulp-b41b29f479f3?source=collection_archive---------2-----------------------#2021-07-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b0c2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">利用线性规划的概念解决数独难题</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/36f47ef508cfe880c8377e5480416063.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7W8UpdLPr_zBJe-sb-RDYA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd kv">数独+线性规划</strong>(图片作者编译。数独图片— <a class="ae kw" href="https://en.wikipedia.org/wiki/Sudoku" rel="noopener ugc nofollow" target="_blank">维基</a></p></figure><p id="d0a1" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">数独是一种典型的涉及到笔、纸和思维共同作用的游戏。当你想让笔和大脑休息一下时，可以用数独解算器来解决。在这里，我们将尝试创建一个这样的数独求解器。</p><p id="092c" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">本文旨在利用线性规划的概念来解决数独难题。我们将从刷新线性编程背后的一些基本理论开始，然后使用PuLP包在Python中实现相同的内容。</p><p id="15ba" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在这里，我们将尝试解决两种类型的数独难题，常规数独和对角线数独，它们在数独网格的对角线上有额外的规则。随着我们的进展会有更多的报道。</p><h1 id="c6b4" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">什么是线性规划？</h1><p id="1e61" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">线性规划是一个约束优化模型，它有3个主要部分:目标函数、决策变量和约束。</p><p id="816d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir"> <em class="mq">目标函数:</em> </strong> <em class="mq">目标函数是一个线性函数，其值需要根据我们试图解决的问题最小化或最大化。</em></p><p id="5664" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir"> <em class="mq">决策变量:</em> </strong> <em class="mq">这些是决定最终输出的输出或目标变量。</em></p><p id="4f0e" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir"> <em class="mq">约束:</em> </strong> <em class="mq">约束是对决策变量的约束或限制。</em></p><p id="b8fd" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">线性规划的目标是在应用所有约束的情况下，为给定的目标函数找到一组最优的决策变量。该解决方案可以是可行的解决方案或最优的解决方案。</p><p id="8c68" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir"> <em class="mq">可行解:</em> </strong> <em class="mq">满足所有约束的线性规划的解。</em></p><p id="a529" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir"> <em class="mq">最优解:</em> </strong> <em class="mq">解</em> <strong class="kz ir"> <em class="mq"> </em> </strong> <em class="mq">以最佳目标函数值(最大化或最小化目标函数)</em></p><h1 id="8681" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">线性规划和数独</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/627717ab210d932da3f9984969308bcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6N89dZDATeZVeAVKOARkbw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd kv">数独的线性规划</strong>(图片由作者提供)</p></figure><p id="fc3a" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">以数独为例，我们需要确定一个可行的解决方案来解决它。</p><h1 id="8d4d" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">用Python中的线性规划求解数独</h1><p id="0592" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">这里我们将使用Python中的PuLP包来解决这个线性编程问题。</p><h2 id="4db2" class="ms lu iq bd lv mt mu dn lz mv mw dp md lg mx my mf lk mz na mh lo nb nc mj nd bi translated">解决数独问题的步骤:</h2><p id="6b8c" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated"><strong class="kz ir">步骤1: </strong>定义线性规划问题<br/> <strong class="kz ir">步骤2: </strong>设置目标函数<br/> <strong class="kz ir">步骤3: </strong>定义决策变量<br/> <strong class="kz ir">步骤4: </strong>设置约束<br/> <strong class="kz ir">步骤5: </strong>解决数独难题<br/> <strong class="kz ir">步骤6: </strong>检查是否找到最优结果</p><h1 id="0b50" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">步骤1:定义线性规划问题</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h1 id="71dd" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">第二步:设置目标函数</h1><p id="5f70" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">通常在线性规划中，我们有一个目标函数，我们试图最大化或最小化。但是在这种情况下，我们没有任何目标函数。这更像是一个可行性问题，也就是说，如果满足约束条件，那么数独就解决了。</p><p id="dd61" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">因此，我们在这里设置一个虚拟目标函数为0。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h1 id="236e" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">步骤3:定义目标变量或决策变量</h1><p id="7219" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">数独网格由81个单元格组成(9x9网格)。每个单元格可以取1到9之间的值。如果我们为每个值创建一组布尔决策变量，那么我们总共会得到729个变量(9x9x9)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="36a1" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">由于每个单元格只能有一个关联值，因此单元格的9个变量中只有一个布尔变量可以设置为true，其余的应为false。正如您将在下一节中看到的，这是通过约束来确保的。</p><h1 id="ea75" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">步骤4:设置约束</h1><h2 id="a523" class="ms lu iq bd lv mt mu dn lz mv mw dp md lg mx my mf lk mz na mh lo nb nc mj nd bi translated">数独的一般约束</h2><p id="af46" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">需要将数独的规则设置为约束来解决这个问题。<br/>鉴于数独是一个9x9的格子，游戏规则在这里提一下:</p><p id="a824" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">约束1: </strong>每个单元格都应该填充一个介于1和9之间的值</p><p id="b94e" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">约束2: 每一行应该包含一次从1到9的所有数字</p><p id="7d64" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">约束3: 每一列都应该包含一次从1到9的所有数字</p><p id="c773" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">约束4: </strong>从左上角开始，每个3x3网格应该包含1到9的每个数字一次</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h2 id="ed2d" class="ms lu iq bd lv mt mu dn lz mv mw dp md lg mx my mf lk mz na mh lo nb nc mj nd bi translated">对角数独的附加约束</h2><p id="bed7" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">还有另一个版本的数独，称为对角线数独，除了上面提到的通用规则，还应该满足以下约束。</p><p id="5467" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">约束5: 每条对角线应该包含1到9中的每个数字一次</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="8eaf" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">注意，这个约束需要应用于两条对角线(左上角到右下角和右上角到左下角)。</p><h2 id="86cc" class="ms lu iq bd lv mt mu dn lz mv mw dp md lg mx my mf lk mz na mh lo nb nc mj nd bi translated">初始化输入数独难题的约束</h2><p id="e709" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">既然游戏规则已经通过约束设置好了，下一步就是初始化拼图中的已知值。这是从我们试图解决的数独难题中提取的。填充预先填充的单元格作为LP问题的约束。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="da16" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">至此，解决数独游戏所需的所有约束都已设置好，我们已经准备好解决它了。</p><h1 id="0236" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">第五步:解决数独难题</h1><p id="7313" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">一旦设置了目标函数、决策变量和约束，解决难题就像对问题变量调用solve方法一样简单。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h1 id="45ca" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">步骤6:检查是否找到最佳结果</h1><p id="69c7" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">一旦问题得到解决，我们就可以通过检查状态标志来检查算法是否已经确定了最优解。</p><p id="4285" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">如果结果是“最优的”,那么线性规划算法已经确定了具有给定约束的解决方案。如果找不到解决方案，它将返回“不可行”状态。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h1 id="871a" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">时间来解决</h1><p id="a05f" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">将上面的代码包装成一个函数，这样它就可以解决作为输入传递的任何数独。下面给出了几个例子，其中正常数独和对角线数独是用这个求解器求解的。</p><h2 id="453f" class="ms lu iq bd lv mt mu dn lz mv mw dp md lg mx my mf lk mz na mh lo nb nc mj nd bi translated">数独1-普通数独</h2><p id="ed55" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated"><strong class="kz ir">输入</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/713153d01fce72ded56a58cb355a1562.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yx4qWD232ApLJuafIsxyeg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd kv">输入——普通数独</strong>(图片由作者提供)</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="3580" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">输出</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/e00c3bcf9ce279cfe35ec7f7d4a42768.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yFzgYyXDyyCySv-I1kJ5dQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd kv">解出的数独——正常</strong>(图片由作者提供)</p></figure><h2 id="5c00" class="ms lu iq bd lv mt mu dn lz mv mw dp md lg mx my mf lk mz na mh lo nb nc mj nd bi translated">数独2 —对角线数独</h2><p id="f5fd" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">投入</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/70a18f42631d7462951704a45172e813.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wXo3Ey-8LFUOLn8DxujqqA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd kv">输入——对角线数独</strong>(图片由作者提供)</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="be54" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">输出</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/d3ea46b434ae4aec56a6f85eb52d7361.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mRTmUgBFtyeNRdyUUDSjTw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd kv">解出的数独——对角线</strong>(图片由作者提供)</p></figure><h1 id="f932" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">源代码</h1><p id="b9a0" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">参考git repo获得完整的代码:<a class="ae kw" href="https://github.com/Lakshmi-1212/Sudoku_Solver_LP" rel="noopener ugc nofollow" target="_blank"> Sudoku_Solver_LP </a></p><h1 id="cc4d" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">结论</h1><p id="6e2a" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">这是一个非常简单的方法，说明如何使用Python中提供的线性编程包(即PuLP)来解决数独难题。</p><p id="d51f" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">还有进一步增强的空间，如从图像中读取数独网格或通过网络摄像头读取网格的视频处理。</p><p id="c878" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">稍后会有更多，希望你喜欢这篇文章！！</p></div></div>    
</body>
</html>