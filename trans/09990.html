<html>
<head>
<title>Integrating Scikit-learn Machine Learning models into the Microsoft .NET ecosystem using Open Neural Network Exchange (ONNX) format</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Scikit-learn机器学习模型集成到微软。NET生态系统使用开放神经网络交换(ONNX)格式</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/integrating-scikit-learn-machine-learning-models-into-the-microsoft-net-7eaec29e8669?source=collection_archive---------28-----------------------#2021-09-20">https://towardsdatascience.com/integrating-scikit-learn-machine-learning-models-into-the-microsoft-net-7eaec29e8669?source=collection_archive---------28-----------------------#2021-09-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="1438" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/notes-from-industry" rel="noopener" target="_blank">行业笔记</a></h2><div class=""/><div class=""><h2 id="5c89" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">使用ONNX格式将经过培训的Scikit-learn销售线索评分预测模型部署到。网络生态系统</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/7bca725b8a439089099a127f15247b1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pJiUVSWrOfSpf9XISOlq7w.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">照片由米格尔·Á拍摄。佩克斯公司的帕德里安</p></figure><p id="7022" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">作为设计和开发lead scoring系统原型的团队的一员，我面临着将机器学习模型集成到围绕<a class="ae ma" href="https://dotnet.microsoft.com/" rel="noopener ugc nofollow" target="_blank">微软构建的目标环境中的挑战。网络生态系统</a>。从技术上来说，我使用<a class="ae ma" href="https://scikit-learn.org/" rel="noopener ugc nofollow" target="_blank"> Scikit-learn </a>机器学习内置算法实现了领先得分预测模型，用于回归，更准确地说是<a class="ae ma" href="https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LogisticRegression.html" rel="noopener ugc nofollow" target="_blank">逻辑回归</a>。考虑到初始数据分析、数据预处理、探索性数据分析(EDA)以及模型构建本身的数据准备阶段，我使用了由<a class="ae ma" href="https://www.anaconda.com/" rel="noopener ugc nofollow" target="_blank"> Anaconda </a>发行版支持的<a class="ae ma" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"> Jupyter Notebook </a>环境进行<a class="ae ma" href="https://www.python.org/" rel="noopener ugc nofollow" target="_blank"> Python </a>科学计算。之前，我在<a class="ae ma" href="https://flask.palletsprojects.com/en/2.0.x/" rel="noopener ugc nofollow" target="_blank"> Flask中研究和接触过Python，它是用这种编程语言编写的一个微型web框架</a>。然而，我的目标是将Python编写的机器学习模型集成或部署到。NET生态系统，使用<a class="ae ma" href="https://docs.microsoft.com/en-us/dotnet/csharp/" rel="noopener ugc nofollow" target="_blank"> C#编程语言</a>和<a class="ae ma" href="https://visualstudio.microsoft.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio IDE </a>。</p><p id="c120" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><em class="mb"> *注意:本文中给出的源代码仅用于演示目的——简化到强调核心概念、库和转换解决方案的程度。</em></p><h1 id="de64" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">什么是销售线索评分？</h1><p id="5598" class="pw-post-body-paragraph le lf iq lg b lh mu ka lj lk mv kd lm ln mw lp lq lr mx lt lu lv my lx ly lz ij bi translated">销售线索评分代表一种共享的销售和营销方法，用于对销售线索进行排名，以描述他们对公司的销售准备程度的潜力。这是一种为公司的销售线索数据库分配不同值的技术，通过转换为“热门线索”和官方客户来指导营销和销售团队。从战略角度来看，销售线索评分被认为是调整公司战略、提高销售团队绩效和效率的重要过程。</p><h1 id="3d10" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">为什么这个故事里有ML？</h1><p id="19e0" class="pw-post-body-paragraph le lf iq lg b lh mu ka lj lk mv kd lm ln mw lp lq lr mx lt lu lv my lx ly lz ij bi translated">通常，数字营销、销售线索挖掘和销售团队会生成大量销售线索数据，这些数据通常以预定的结构化格式存储在单个或多个平台上。由于数据是即将到来的数字时代的新石油，公司如何处理和分析数据至关重要。然而，假设人类的专业知识足以检索有价值的数据洞察，那么将需要许多团队和人员。但是，即使这是完全正确的，它也只是一种可持续的模式，只适用于拥有丰富经验和资深数字营销、销售和商业分析背景的大型企业。</p><p id="b4e8" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">另一方面，机器学习方法在提到“大数据”这个热门术语后自然会立即出现。总的来说，机器学习算法不会取代人力资源，而是作为一种补充工具，改善和提高线索转化的过程和速度。利用数据背后的数学和统计学，机器学习可以打开视野，并“捕捉”人类肉眼目前无法“看到”的其他深入见解和结论。在有监督的机器学习领域，采用线索评分作为用例是值得一提的。我们可以使用生成数据的完整历史(作为监督学习方法的先决条件的标记数据集)。</p><h1 id="3e28" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">图片中的ONNX</h1><p id="f1ae" class="pw-post-body-paragraph le lf iq lg b lh mu ka lj lk mv kd lm ln mw lp lq lr mx lt lu lv my lx ly lz ij bi translated">在开发了用于销售线索评分的机器学习回归器之后，我开始研究将其集成到。NET世界，用C#编程语言访问它。不管目标环境是什么，这都是一个广泛讨论的话题，目标环境可以是Keras、TensorFlow或Java中的模型部署。总的来说，我不认为这是一个问题，而更像是一个解决系统互操作性、集成简单性和维护的挑战。归根结底，这是部署策略的复杂性。因此，我们的挑战是缩小在Python和Scikit-learn中进行数据分析和科学研究的技术“差距”,同时有机会将模型直接用作目标系统基础架构的一部分，该模型用C#编写，并受。NET核心框架。</p><p id="6564" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><a class="ae ma" href="https://onnx.ai/" rel="noopener ugc nofollow" target="_blank">开放神经网络交换(ONNX) </a>是代表机器学习模型的开放文件格式标准。按照设计，它完全作为一个框架无关的标准来实现，这意味着它是作为一个提供独特格式互操作性的解决方案来构建的。我使用ONNX标准来转换和存储机器学习模型。此外，我还使用了<a class="ae ma" href="https://onnxruntime.ai/" rel="noopener ugc nofollow" target="_blank"> ONNX运行时</a>，这是一个跨平台的高性能引擎，提供了一组不同的API，在我们的例子中，用于工作和集成到不同的目标环境。NET核心框架与C#。</p><h1 id="aff7" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">数据集概述</h1><p id="405e" class="pw-post-body-paragraph le lf iq lg b lh mu ka lj lk mv kd lm ln mw lp lq lr mx lt lu lv my lx ly lz ij bi translated">为了构建线索评分原型的初始版本，我决定使用在<a class="ae ma" href="https://www.kaggle.com/" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>上公开的<a class="ae ma" href="https://www.kaggle.com/amritachatterjee09/lead-scoring-dataset" rel="noopener ugc nofollow" target="_blank">线索评分数据集</a>案例研究。数据集由名为X Education的公司的营销/销售团队检索的历史数据组成。总的来说，该公司是一个在线学习平台的模型，许多专业人士/学生可以在这里找到兴趣并参与一门或多门课程。数据是使用不同的来源生成的，如网页、登录页面、表单等。由于联系对特定学习领域感兴趣的候选人的过程，还另外开发了填充有数据的字段。</p><p id="0559" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">初始数据集涵盖9.240条独特的记录</strong>、<strong class="lg ja">组织在37个不同的列</strong>中，包括用于独特前景识别的字段。数据分析、EDA过程以及数据预处理和准备超出了本文的范围，因此我将直接介绍在不同工作环境之间部署机器学习模型的实用方法。</p><h1 id="d2bd" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">构建ONNX模型</h1><p id="c672" class="pw-post-body-paragraph le lf iq lg b lh mu ka lj lk mv kd lm ln mw lp lq lr mx lt lu lv my lx ly lz ij bi translated">我将简要介绍机器学习模型构建的核心方面，作为创建ONNX模型的先决条件。为此，我使用来自<a class="ae ma" href="https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.train_test_split.html" rel="noopener ugc nofollow" target="_blank">sk learn . model _ selection</a>的标准拆分过程，将经过处理和优化的结果数据集划分为训练和测试子集。在这种情况下，我认为<strong class="lg ja"> 30%的数据是测试数据</strong>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mz"><img src="../Images/1ee0fdd66519d76ba1fe71703d800d07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QIKk3i2AUXVcQcpbaZzFcA.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="36cb" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">是时候做模型了。我使用<a class="ae ma" href="https://scikit-learn.org/stable/modules/classes.html#module-sklearn.linear_model" rel="noopener ugc nofollow" target="_blank"> sklearn.linear_model </a>库创建并装配了一个逻辑回归机器学习模型(使用<strong class="lg ja">‘liblinear’算法</strong>对其进行配置，以解决优化问题)。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi na"><img src="../Images/c43e7374dd617ec7b35c0b22779a6858.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6s2VP2SAeDdPNEYp3qr8ig.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="747f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">使用<a class="ae ma" href="https://scikit-learn.org/stable/modules/generated/sklearn.pipeline.Pipeline.html" rel="noopener ugc nofollow" target="_blank"> Scikit-learn的管道机制</a>，我创建了一个简单的管道表单，包含数据缩放(从<a class="ae ma" href="https://scikit-learn.org/stable/modules/preprocessing.html" rel="noopener ugc nofollow" target="_blank"> sklearn.preprocessing </a>导入的标准缩放算法)和模型。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nb"><img src="../Images/d287c31902d6073a43006456bfcdd8a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*thLAn5WeCsTd6SIorPVKmA.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="e6e2" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">此外，从另一个设计角度来看，如果只缩放数字属性(以调整零的公共平均值)，这是有效的。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nc"><img src="../Images/806df4d6b4b90aa3793c944814adebc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_-HNbdbzNMI6UdZGPNmYkg.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="a405" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">最后，我从<a class="ae ma" href="https://scikit-learn.org/stable/modules/classes.html#module-sklearn.model_selection" rel="noopener ugc nofollow" target="_blank">sk learn . model _ selection</a>中引用了<a class="ae ma" href="https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.cross_val_predict.html" rel="noopener ugc nofollow" target="_blank">cro _ val _ predict</a>功能，并生成了明确配置<strong class="lg ja">‘predict _ proba’</strong>估算器方法的交叉验证估算。这种评估方法确保<strong class="lg ja">获取成功的目标销售线索转化的概率</strong> —事实上，解决了向每个潜在客户分配销售线索得分的挑战。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi na"><img src="../Images/afd3d6c1e8602b21f344fdda11d97a4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Igi7mG7Acdkl7LTWxesbDQ.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="64a4" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><em class="mb"> *注意:模型验证、评估和性能调优的过程超出了本文的范围——它是机器学习设计的一部分。</em></p><p id="58ac" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">一旦机器学习模型准备就绪，就该创建ONNX模型了。下面提到了应该导入的标准ONNX包。作为旁注，我想强调的是，只有当<a class="ae ma" href="https://pypi.org/project/skl2onnx/" rel="noopener ugc nofollow" target="_blank"> skl2onnx </a>安装在开发环境上时，导入ONNX包才有效(这个模块可以使用<strong class="lg ja">“pip install skl 2 ONNX”命令</strong>安装)。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nd"><img src="../Images/02c2c505a0cab03d63a6ad4e1782c649.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f1UdH0fzoazlDnI4uv24-g.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="cbfb" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">ONNX模型的创建实际上意味着将Scikit学习模型转换成遵循ONNX格式的文件的过程。这是通过使用<a class="ae ma" href="http://onnx.ai/sklearn-onnx/" rel="noopener ugc nofollow" target="_blank"> convert_sklearn() </a>方法完成的，该方法采用之前创建的模型及其维度，在本例中是来自已处理数据集中的要素数量。在这个场景中，<strong class="lg ja">特征工程</strong>以及<strong class="lg ja">特征降维</strong>的过程产生了总共<strong class="lg ja"> 19个输入特征</strong>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ne"><img src="../Images/a60889e05ceb5aeb5a51eb7b364077ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GWUWThh3GeB0I7xbTaWOLg.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="96e3" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">最后一步是ONNX模型导出，在先前指定的系统位置/路径上序列化(声明文件扩展名为<strong class="lg ja">‘ONNX’</strong>)。</p><p id="d2e2" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这里一个重要的信息是ONNX库目前支持的机器学习算法的s <a class="ae ma" href="https://onnx.ai/sklearn-onnx/supported.html" rel="noopener ugc nofollow" target="_blank"> et。可以使用以下命令生成版本以及所有集成算法的列表(图像预览显示了受支持算法的完整列表的一部分)。</a></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nf"><img src="../Images/637f97f187c5d106e75688c592c8088b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xP4RWWHAviyL0cYOyg4TAQ.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ng"><img src="../Images/46d5ff4fb1a0817b1d45819402fa086a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KpH8KqeE-y-qoMGyVe9PTw.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="fbe3" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">因此，我总是建议在验证的上下文中检查列表，确认您正在使用受支持版本的算法来建立模型。这种检查应该在机器学习阶段进行，更准确地说是在算法选择阶段。值得一提的是，不属于ONNX包的任何其他算法也可以得到支持，但是适当的定制配置和调整超出了本文的范围。此外，还有一些众所周知的与软件包相关的限制，可以在官方文档页面中解决。</p><h1 id="6916" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">。网络核心集成</h1><p id="1a2f" class="pw-post-body-paragraph le lf iq lg b lh mu ka lj lk mv kd lm ln mw lp lq lr mx lt lu lv my lx ly lz ij bi translated">如前所述，将<strong class="lg ja"> sklearn模型</strong>转换为<strong class="lg ja"> ONNX模型</strong>是解决方案的第一部分，也是将ONNX模型导入的后续步骤的先决条件。网络生态系统。这可以使用微软的<a class="ae ma" href="https://www.nuget.org/packages/Microsoft.ML.OnnxRuntime/" rel="noopener ugc nofollow" target="_blank">来完成。ML.OnnxRuntime Nuget包</a>。我决定使用<a class="ae ma" href="https://docs.microsoft.com/en-us/azure/azure-functions/" rel="noopener ugc nofollow" target="_blank"> Microsoft Azure Function </a>模板来演示ONNX到。NET以及下一节中描述的集成验证和测试。我已经创建了<strong class="lg ja"> Azure函数</strong>,作为一个新项目，包含在一个面向。NET Core 3.1框架版本。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/d165fb5a1915915ee25debf0f2b9b9c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/format:webp/1*lPViZplugz2H5EdxZhNaBQ.jpeg"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ni"><img src="../Images/25c6c1ef76d718c6f1baf36fc9a1f22c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*39_ZTIsd0Uj_elzDZt7Rcw.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nj"><img src="../Images/819df6b3a15cdd16cc020fb71535b69b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8AZkZbZZHiC3PYQs4NSVFg.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="4b32" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">最初，我从<strong class="lg ja"> Http请求</strong>中提取请求体，并<strong class="lg ja">将其反序列化为动态数据对象</strong>，这是一种在运行时检索类型的技术。然后，我使用了简单的方法来声明和初始化请求体中的每个变量。这里值得一提的是，变量的数量(请求体参数的数量)应该与ONNX模型创建时定义的输入特征的数量相同。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nk"><img src="../Images/b749b420d5fee2062e3b656f1bba99ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MEWxL9kN8qSbv0nEv7lPjg.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="5147" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">之后，我定义了先前保存的ONNX模型的本地系统路径，并创建了创建输入特征列表和创建<strong class="lg ja">推理会话</strong>所需的<strong class="lg ja">输入张量</strong>。初始化会话后，就该运行它并以原始格式提取模型输出了。<strong class="lg ja">推理会话也可用于对Jupyter笔记本解决方案</strong>中已创建的ONNX模型进行预测。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nl"><img src="../Images/0794d54904c92dbd58b364c8c4e08fe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yo9Rhx_7nsg0-qqmqW9IBw.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="c872" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在会话执行之后，我已经将检索到的原始格式值解析为集合<strong class="lg ja"> DisposableNamedOnnxValue对象</strong>，然后使用该集合将结果数组提取为<strong class="lg ja"> Dictionary &lt; long、float&gt;T13】的形式。然后，字典结构用于提取转化销售线索的<strong class="lg ja">概率值</strong>(销售线索评分结果)。</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nm"><img src="../Images/311fdd27166e0d577443ba34b264e327.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4kcErIXyM0saE-5VtKXL8g.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><h1 id="9994" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">集成验证</h1><p id="cdd0" class="pw-post-body-paragraph le lf iq lg b lh mu ka lj lk mv kd lm ln mw lp lq lr mx lt lu lv my lx ly lz ij bi translated">考虑到最初用Python和Scikit-learn设计和编写的线索评分模型现已成功集成，我将使用<a class="ae ma" href="https://www.postman.com/" rel="noopener ugc nofollow" target="_blank"> Postman API平台</a>测试和验证完整的场景。因为我使用Microsoft Azure函数模板包装了集成，所以我可以在我的开发机器上通过HTTP调用本地访问它，遵循之前配置的路径(<strong class="lg ja"> url、端口和函数名绑定</strong>)。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/1872cf6049b84607722d33ca7f42e568.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*Cu70AxzlTcunI-DmzcreKA.jpeg"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="c7a7" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">利用Visual Studio集成调试器的优势，我深入研究了模型响应，研究了对象的结构和类型。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi no"><img src="../Images/91274b0b689cbc744fb07b7d1f3a51c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1kcyN_y1vRanFE6uWyCqMA.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi np"><img src="../Images/5da802e6be6e4244c3f928c035c64361.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CG3vAW810UzKk07V6_p1Rw.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/8096a89cebc6cd2eef338b62983bc098.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/format:webp/1*oScQxq6FZvRKGru1UPgDnQ.jpeg"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><h1 id="7be5" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">最后的话</h1><p id="717a" class="pw-post-body-paragraph le lf iq lg b lh mu ka lj lk mv kd lm ln mw lp lq lr mx lt lu lv my lx ly lz ij bi translated">在本文中，我展示了我们目前正在开发的线索评分原型的部分实际实现。基本上，<strong class="lg ja">它描述了解决从Python和Scikit转换和部署ML模型挑战的技术方法——了解不同的目标技术环境，在本例中是。网络生态系统</strong>。利用ONNX格式的优势，我演示了最简单的形式<strong class="lg ja">构建ONNX模型，并使用格式灵活性将其作为目标环境源代码的结构部分</strong>。除了这种方法正在弥合不同数据科学和应用程序开发平台之间的技术差异之外，它还提供了将已经设计好的模型与ML.NET的<a class="ae ma" href="https://dotnet.microsoft.com/apps/machinelearning-ai/ml-dotnet" rel="noopener ugc nofollow" target="_blank">优势相集成的机会。网)。此外，ONNX NuGet包和实现方法也可用于将Scikit-learn模型集成到</a><a class="ae ma" href="https://docs.microsoft.com/en-us/aspnet/core/tutorials/first-web-api?view=aspnetcore-3.1&amp;tabs=visual-studio" rel="noopener ugc nofollow" target="_blank"> Web API解决方案</a>中。</p><h1 id="87ac" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">更多应用</h1><p id="41d7" class="pw-post-body-paragraph le lf iq lg b lh mu ka lj lk mv kd lm ln mw lp lq lr mx lt lu lv my lx ly lz ij bi translated">除了构建销售线索评分系统，我们还成功创建了一个销售线索决策原型，该原型遵循类似的模式，除了机器学习算法选择之外。到目前为止，我已经使用<a class="ae ma" href="https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html" rel="noopener ugc nofollow" target="_blank">随机森林分类器</a>开发了一个线索决策集成模块。它也是ONNX包支持的算法列表的一部分。因此，从业务角度来看，我们提供了根据历史和当前数据做出销售线索决策的机会。</p><p id="733d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">此外，在进行探索性数据分析并涵盖设计和构建ML模型的过程时，<strong class="lg ja">我们正在提供和生成有益于未来应收集和跟踪的数据的优选类型和格式的数据见解和知识</strong>。<strong class="lg ja">这种全面的数据分析之后是模型的解释过程，通常提供特征和相关性重要性的其他有价值的方面</strong>。</p><p id="45e3" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi">— — — — — — — — — — — —</p><p id="2500" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">感谢您阅读内容，我坚信这些内容清晰、详细且有帮助。</p><p id="02b3" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我目前的重点和专业知识与企业web开发和架构中的最新和前沿技术优势有关，特别是微软。网络生态系统。此外，我喜欢从事数据科学、生物信息学和数字营销/销售线索挖掘中的机器学习应用。所以，如果你能花时间评论、支持和分享这篇文章，我将非常感激。</p></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><p id="2122" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><em class="mb">最初发表于</em><a class="ae ma" href="https://www.linkedin.com/pulse/integrating-scikit-learn-machine-learning-models-microsoft-cekikj" rel="noopener ugc nofollow" target="_blank"><em class="mb">【https://www.linkedin.com】</em></a><em class="mb">。</em></p></div></div>    
</body>
</html>