<html>
<head>
<title>Building a User Event Data Pipeline</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建用户事件数据管道</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-a-user-event-data-pipeline-f57ca088e766?source=collection_archive---------22-----------------------#2021-07-14">https://towardsdatascience.com/building-a-user-event-data-pipeline-f57ca088e766?source=collection_archive---------22-----------------------#2021-07-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="df52" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用定制数据管道控制您的数据从未如此简单</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6e65fd5645a2a4f6656323a2b5a8b3f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lnVrAE5xmDnepj8w"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae kv" href="https://unsplash.com/@scienceinhd?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">科学高清</a>拍摄的照片</p></figure><p id="3b08" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您只能为您的企业存储一种类型的分析数据，那么应该是用户事件——他们查看了什么页面，他们点击了什么按钮，他们提交了什么表单，他们购买了什么，等等。这个基本的事件流是大多数数据分析的基础。</p><p id="af6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">公司通常从像谷歌分析这样的一体化平台开始，但最终需要更加定制和灵活的东西。过去，构建定制数据管道需要大量的数据和工程资源，但最近托管服务和开源工具的爆炸式增长大大降低了障碍。现在，大多数公司都可以实现定制数据管道。</p><p id="5789" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用户事件数据管道由几个部分组成。有数据仓库、事件跟踪系统、数据建模层和报告/分析工具。下面的部分将详细介绍每一个选项，并链接到一些流行的商业和开源选项。</p><h1 id="da13" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">数据仓库</strong></h1><p id="e0cb" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">典型的应用程序数据库(MySQL、Postgres、MSSQL)针对读写混合查询进行了优化，这些查询一次插入/选择少量的行，可以相当好地处理高达1TB的数据。像MongoDB这样的非关系数据库更具可伸缩性，但是缺乏SQL支持对于大多数分析用例来说是一个障碍。另一方面，数据仓库为您提供了巨大的可伸缩性和完整的SQL支持。它们针对读取量大的工作负载进行了优化，这些工作负载会在大量的行中扫描少量的列，并且可以轻松扩展到数Pb的数据。</p><p id="d001" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个空间的主要玩家有<a class="ae kv" href="https://aws.amazon.com/redshift/?whats-new-cards.sort-by=item.additionalFields.postDateTime&amp;whats-new-cards.sort-order=desc" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">亚马逊红移</strong></a><a class="ae kv" href="https://cloud.google.com/bigquery" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">Google biqquery</strong></a><a class="ae kv" href="https://www.snowflake.com/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">雪花</strong> </a>。当您的数据工程师希望控制基础设施成本和调优时，Redshift是最佳选择。当您的工作负载非常大时，BigQuery是最好的。当你有一个更连续的使用模式时，雪花是最好的。Elvin Li提供了一个很棒的<a class="ae kv" href="https://medium.com/2359media/redshift-vs-bigquery-vs-snowflake-a-comparison-of-the-most-popular-data-warehouse-for-data-driven-cb1c10ac8555" rel="noopener">深度对比</a>如果你想了解更多细节，你应该去看看。</p><p id="fc12" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你更喜欢开源解决方案，还有<a class="ae kv" href="https://clickhouse.tech/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> ClickHouse </strong> </a>。它是由俄罗斯搜索引擎Yandex创建的，并迅速受到欢迎。</p><h1 id="b525" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">事件跟踪系统</strong></h1><p id="ff95" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">理论上，当用户在你的应用程序或网站上做事情时，你可以实时地直接插入到你的数据仓库中，但这种方法不能很好地扩展，也不能容错。相反，您确实需要将事件排队并定期批量插入它们。自己做起来可能相当复杂，但幸运的是有许多托管服务。<a class="ae kv" href="https://segment.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">段</strong> </a>是最受欢迎的选项，但也有一些缺点。它非常昂贵，容易受到广告拦截器的影响，一两个小时才同步一次数据，并且在它生成的模式中缺少一些关键字段(特别是会话和页面id)。Freshpaint是一种较新的商业替代品，旨在解决其中一些问题。</p><p id="287a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除了Segment和Freshpaint之外，还有许多开源选项(如果您不想自己托管，每个选项都有一个托管服务)。<a class="ae kv" href="https://snowplowanalytics.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">扫雪机</strong> </a>是最老最受欢迎的，但是需要一段时间进行设置和配置。<a class="ae kv" href="https://rudderstack.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">舵栈</strong> </a>是一款功能齐全的分段替代。Jitsu是一个精简的事件跟踪库，专注于让事件尽可能快地进入你的仓库。</p><h1 id="9c4c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">数据建模层</strong></h1><p id="f939" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">原始事件流数据有时很难处理。数据建模就是将原始数据转换成更加用户友好的东西。当你第一次开始时，这一层并不是必需的，但是你肯定会想要添加，所以很高兴知道它的存在。这个领域实际上只有两个主要参与者，都是提供托管服务的开源工具。</p><p id="971a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://airflow.apache.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Airflow </strong> </a>类似于Unix cron实用程序——你用Python编写脚本，调度它们每X分钟运行一次。Airflow可用于任何类型的调度任务，但通常用于数据建模。天文学家提供有管理的气流服务。</p><p id="ffc0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://www.getdbt.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> dbt </strong> </a>则是专门为数据建模而建的。您用SQL而不是Python来编写转换，并且有对CI/CD管道的内置支持来测试您的模型，并在提交到产品之前对它们进行准备。</p><h1 id="e618" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">报告/分析工具</strong></h1><p id="07a0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这就是从一体化平台中脱离出来的巨大回报所在。一旦数据进入仓库，有数百种令人惊叹的工具可以与数据进行交互，您可以使用任意多或任意少的工具，而不用担心被供应商锁定。</p><p id="4e55" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有许多SQL报告生成器，您可以在其中编写SQL并创建可以共享的数据图表和图形。<a class="ae kv" href="https://looker.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Looker </strong> </a>，<a class="ae kv" href="https://mode.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Mode </strong> </a>，<a class="ae kv" href="https://popsql.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> PopSQL </strong> </a>，<a class="ae kv" href="https://www.gooddata.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> GoodData </strong> </a>是流行的商业选项，<a class="ae kv" href="https://redash.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Redash </strong> </a>是一个很好的开源替代方案。</p><p id="c09c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还有一些不需要SQL知识的自助式拖放工具。有商业选项<a class="ae kv" href="https://www.tableau.com/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">【Tableau】</strong></a><a class="ae kv" href="https://powerbi.microsoft.com/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">power bi</strong></a><a class="ae kv" href="https://www.indicative.com/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">指示性</strong> </a>以及开源<a class="ae kv" href="https://superset.apache.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Apache超集</strong> </a>和<a class="ae kv" href="https://www.metabase.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">元数据库</strong> </a>。</p><p id="3da5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你有一个数据科学团队，他们可能会使用<a class="ae kv" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Jupyter笔记本</strong> </a>直接与仓库交互。在需要时深入原始数据的灵活性对于在您的公司建立强大的数据文化是绝对重要的。</p><p id="ec70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，还有一大堆专门的工具。<a class="ae kv" href="https://www.datafold.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> DataFold </strong> </a> <strong class="ky ir"> </strong>监控您的仓库，并在出现任何异常时向您发出警报(例如，如果在部署后结账转换率突然下降)。<a class="ae kv" href="https://www.hightouch.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Hightouch </strong> </a>可让您将数据从仓库同步到营销和销售平台。<a class="ae kv" href="https://github.com/dataframehq/whale" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Whale </strong> </a>是一个开源工具，可以记录和编目你的数据。<a class="ae kv" href="https://retool.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">重组</strong> </a>允许您将仓库数据集成到您的内部管理工具中。</p><p id="58cf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，是时候来个无耻的插播了。使用用户事件数据的最令人兴奋的方式之一是用于A/B测试。我一直在开发一个名为<a class="ae kv" href="https://www.growthbook.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Growth Book </strong> </a>的开源平台，它可以插入你的数据仓库，处理健壮的A/B测试分析所需的所有复杂的查询和统计。如果你认为这是你可能会想用的东西，那就去看看，并在GitHub上给它一颗星。</p><h1 id="ffa0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="1175" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在是构建用户事件数据管道的最佳时机。近年来，托管服务和开源工具的数量呈爆炸式增长，这使得任何公司都可以轻松地在一天内完成一些工作。不再有任何借口不控制您的数据并使用它来推动业务决策。</p></div></div>    
</body>
</html>