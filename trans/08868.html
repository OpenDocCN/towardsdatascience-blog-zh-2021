<html>
<head>
<title>Migrating From Heroku Postgres to Amazon RDS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从Heroku Postgres迁移到亚马逊RDS</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/migrating-from-heroku-postgres-to-amazon-rds-2e738e7730e5?source=collection_archive---------12-----------------------#2021-08-16">https://towardsdatascience.com/migrating-from-heroku-postgres-to-amazon-rds-2e738e7730e5?source=collection_archive---------12-----------------------#2021-08-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c126" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">完成如何将大型PostgresSQL数据库从Heroku迁移到RDS的分步指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4e8cb6bb7ede17a0cad39706f5ebb637.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ts7UiRZkl0eWPeOTlPH4Fg.jpeg"/></div></div></figure><p id="89f4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先是背景，<a class="ae ln" href="https://elements.heroku.com/addons/heroku-postgresql" rel="noopener ugc nofollow" target="_blank"> Heroku Postgres数据库</a>和<a class="ae ln" href="https://aws.amazon.com/rds/postgresql/" rel="noopener ugc nofollow" target="_blank"> Amazon RDS for PostgreSQL </a>有什么区别，为什么还要费事迁移？</p><p id="64aa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">每个用过Heroku的人都知道它的<a class="ae ln" href="https://elements.heroku.com/addons" rel="noopener ugc nofollow" target="_blank">插件</a>简单易用。它们让您在几分钟内就可以开始使用数据库、日志监控或十几个其他有用的服务。这是一个完美的组合，可以让事情顺利进行，或者只是消除管理外部服务的开销。问题是什么时候使用Heroku附加组件是不合适的，什么时候应该转而使用你能更好控制的服务？</p><p id="16b3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在高级别上<a class="ae ln" href="https://elements.heroku.com/addons/heroku-postgresql" rel="noopener ugc nofollow" target="_blank"> Heroku Postgres数据库</a>和<a class="ae ln" href="https://aws.amazon.com/rds/postgresql/" rel="noopener ugc nofollow" target="_blank"> Amazon RDS for PostgreSQL </a>都是可伸缩的按需PostgreSQL数据库。<br/>当我们关注控制、可扩展性和生态系统方面的细节时，差异是显而易见的。<a class="ae ln" href="https://elements.heroku.com/addons/heroku-postgresql" rel="noopener ugc nofollow" target="_blank"> Heroku Postgres附加软件</a>提供通用的“等级”,您可以根据自己的需要选择等级。借助RDS，您可以更精细地控制实例类型(内存、CPU、容量)、参数配置、冗余级别和成本。</p><p id="009d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">这里只是一些例子:</strong></p><ul class=""><li id="f0ed" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated"><strong class="kt ir">成本节约:</strong>如果您认为您将使用同一类型的数据库至少一年，RDS可以选择购买专用实例。这将立即削减你一半的成本。</li><li id="e3d3" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated"><strong class="kt ir">配置灵活性:</strong>借助RDS，您可以控制配置和数据库管理，并获得相同(如果不是更好)的正常运行时间、成本和监控保证。</li><li id="9537" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">还可以选择不同类型的复制实例类型；其中Heroku需要与主数据库的类型相同。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mc"><img src="../Images/3cbe028d919d6916fdedab60f0111a85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JxOwVluz_o_O4nSR3RDyKg.jpeg"/></div></div><p class="md me gj gh gi mf mg bd b be z dk translated">从Heroku PostgresSQL迁移到Amazon RDS PostgresSQL</p></figure></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><p id="addf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">好的。您已经在Heroku Postgres工作了一段时间，现在决定迁移到RDS。</p><p id="9da3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当您处理一个非常大的数据库(几十到几百GB)时，迁移可能是一项非常具有挑战性的任务。您在想，我如何才能以最短的停机时间执行迁移，并保持现有的安全性。为此，我将迁移计划分为3个部分:<strong class="kt ir">安全性考虑、迁移优化&amp;速度和迁移步骤</strong>。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h2 id="77d0" class="mo mp iq bd mq mr ms dn mt mu mv dp mw la mx my mz le na nb nc li nd ne nf ng bi translated">1.安全考虑</h2><p id="094f" class="pw-post-body-paragraph kr ks iq kt b ku nh jr kw kx ni ju kz la nj lc ld le nk lg lh li nl lk ll lm ij bi translated">在AWS生态系统中，您通过VPN和VPN安全组来控制访问。<br/>将Heroku应用程序连接到RDS实例时，您需要使用公共URL，可能还需要IP限制。通常，如果您在AWS中工作，您希望避免使用公共URL进行数据库连接，但是在这种情况下，这可能是唯一的选择。那么，我们如何提高安全性:</p><ul class=""><li id="465e" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated"><strong class="kt ir">将Postgresql连接限制到Heroku的私有IP<br/></strong>只有当你有Heroku私有空间或者你购买了一个专用的IP插件(那些通常是按请求/带宽付费的)时，这个选项才<strong class="kt ir">可行</strong>。这两种选择都可能变得非常昂贵，而且会抵消迁移到RDS所节省的成本。</li><li id="936a" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated"><strong class="kt ir">使用安全组</strong> <br/>限制RDS入站流量无论您是否拥有私有IP，都应该将RDS实例的入站连接限制为PostgreSQL TCP流量。<br/>一般使用<code class="fe nm nn no np b">0.0.0.0/0</code>或您的私有IP(如果适用)</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/ec69959db354a54a2d9672178b8864b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*87_yORjFcehGMcuxbMQflA.png"/></div></div><p class="md me gj gh gi mf mg bd b be z dk translated">在RDS安全组中限制入站流量</p></figure><ul class=""><li id="d603" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated"><strong class="kt ir">在AWS中:RDS实例上的强制实例SSL连接- </strong> <br/> a)更改用于强制SSL的RDS实例参数组的默认配置。你将需要改变参数<code class="fe nm nn no np b">rds.force_ssl = 1</code> <br/>我的建议是复制默认的参数组，并使用一个新的修改过的参数组。<br/> b)下载您的RDS实例所在地区的SSL证书。在写的时候，你可以从这里的下载</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/bddb086c8241015ff8995cc4a9118e81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hCwO3AJUsDTvWR4VktsswQ.png"/></div></div><p class="md me gj gh gi mf mg bd b be z dk translated">rds参数组中的rds.enforce_ssl参数</p></figure><ul class=""><li id="2c59" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated"><strong class="kt ir">在Heroku上:使用SSL证书连接到新的RDS实例- <br/> </strong> a) <strong class="kt ir"> </strong>在你的app中保存RDS SSL证书并推送到Heroku <br/> b)在<code class="fe nm nn no np b">DATABASE_URL</code>中引用证书。假设您在项目中的<code class="fe nm nn no np b">config/amazon-rds-ca-cert.pem</code>保存了证书，那么将URL查询参数<code class="fe nm nn no np b">sslca</code>作为<code class="fe nm nn no np b">DATABASE_URL=postgres://username:password@hoistname/dbname?<strong class="kt ir">sslca=config/amazon-rds-ca-cert.pem</strong></code>添加到连接URL就很简单了</li></ul><h2 id="857c" class="mo mp iq bd mq mr ms dn mt mu mv dp mw la mx my mz le na nb nc li nd ne nf ng bi translated"><strong class="ak"> 2。迁移优化&amp;速度</strong></h2><p id="300f" class="pw-post-body-paragraph kr ks iq kt b ku nh jr kw kx ni ju kz la nj lc ld le nk lg lh li nl lk ll lm ij bi translated">使用<a class="ae ln" href="https://aws.amazon.com/pm/ec2/?trk=ps_a134p000004f2ZWAAY&amp;trkCampaign=acq_paid_search_brand&amp;sc_channel=PS&amp;sc_campaign=acquisition_US&amp;sc_publisher=Google&amp;sc_category=Cloud%20Computing&amp;sc_country=US&amp;sc_geo=NAMER&amp;sc_outcome=acq&amp;sc_detail=aws%20ec2%20instance&amp;sc_content=EC2%20Instance_e&amp;sc_matchtype=e&amp;sc_segment=536392622533&amp;sc_medium=ACQ-P|PS-GO|Brand|Desktop|SU|Cloud%20Computing|EC2|US|EN|Text&amp;s_kwcid=AL!4422!3!536392622533!e!!g!!aws%20ec2%20instance&amp;ef_id=Cj0KCQjw6s2IBhCnARIsAP8RfAimhJ-kSYX2etFtadS8Eo84pceL5L4HtPK89t5IvFd6qp08IUkg2KwaAgYbEALw_wcB:G:s&amp;s_kwcid=AL!4422!3!536392622533!e!!g!!aws%20ec2%20instance" rel="noopener ugc nofollow" target="_blank"> EC2 </a>实例而不是本地机器/本地机器来执行整个迁移。在大多数情况下，您只需要一个非常低层的实例，其中只有连接的存储可能需要更大，具体取决于您的备份大小。您将在那里执行以下步骤:下载Heroku Postgres备份，并使用并行作业恢复备份(在迁移过程&amp;计划中概述)。如果你正在处理一个非常大的数据库备份，这会给你成倍增加备份和<code class="fe nm nn no np b">pg_restore</code>命令的下载速度。此外，您将在AWS VPC内工作，这将使事情更加安全。您将避免本地机器很可能出现的超时问题。</p><p id="dab7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在EC2实例中，您可能必须安装<code class="fe nm nn no np b">postgres</code>，它也会安装<code class="fe nm nn no np b">pg_restore</code>。这通常是通过<code class="fe nm nn no np b">amazon-linux-extras</code>命令完成的。更多信息<a class="ae ln" href="https://aws.amazon.com/premiumsupport/knowledge-center/ec2-install-extras-library-software/" rel="noopener ugc nofollow" target="_blank">点击此处</a>。</p><blockquote class="ns nt nu"><p id="1817" class="kr ks nv kt b ku kv jr kw kx ky ju kz nw lb lc ld nx lf lg lh ny lj lk ll lm ij bi translated">给Mac用户的EC2提示:在连接到EC2实例之前，将行<code class="fe nm nn no np b">ServerAliveInterval 20</code>添加到您的<code class="fe nm nn no np b">~/.ssh/config</code>文件中，以保持您的终端会话活动。<br/>不要使用浏览器控制台会话来连接和执行步骤。它会超时。</p></blockquote><h2 id="40d1" class="mo mp iq bd mq mr ms dn mt mu mv dp mw la mx my mz le na nb nc li nd ne nf ng bi translated">3.迁移流程和计划:</h2><p id="1dcf" class="pw-post-body-paragraph kr ks iq kt b ku nh jr kw kx ni ju kz la nj lc ld le nk lg lh li nl lk ll lm ij bi translated"><strong class="kt ir"> <em class="nv">第一阶段:</em> </strong></p><ul class=""><li id="e74b" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated">将Heroku应用程序置于维护模式<br/> <code class="fe nm nn no np b">heroku maintanance:on -a {app-name}</code></li><li id="57c9" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">缩小/关闭所有后台作业动态</li><li id="86fc" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">监控Heroku应用程序的任何活动和你可能错过的任何事情。</li><li id="2db9" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">监控你的应用程序的流量</li></ul><p id="8bd4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> <em class="nv">二期:</em> </strong></p><ol class=""><li id="4216" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm nz lu lv lw bi translated">启动Heroku数据库备份<br/> <code class="fe nm nn no np b">heroku pg:backups:capture -a {app-name}</code></li><li id="e584" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm nz lu lv lw bi translated">当最新的备份准备好了，你需要下载它。它将有一个类似<code class="fe nm nn no np b">b03</code>的名字</li></ol><ul class=""><li id="7170" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated">列出备份的公共URL<br/><code class="fe nm nn no np b">heroku pg:backups public-url {backup-name} --app {app-name}</code></li><li id="d246" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">开始下载备份到一个文件<code class="fe nm nn no np b">my-backup.dump</code>。<strong class="kt ir"> <br/>理想情况下在EC2实例上</strong>。<br/> <code class="fe nm nn no np b">curl -o my-backup.dump “{public-url}”</code> <br/> <em class="nv"> *不要忘记在</em> <code class="fe nm nn no np b"><em class="nv">public-url</em></code>两边加上双引号】</li></ul><p id="fc01" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">3.将数据库转储导入新的RDS数据库实例。<strong class="kt ir"> <br/>理想情况下使用EC2实例<br/> </strong> <code class="fe nm nn no np b">pg_restore --verbose --clean --no-acl --no-owner -h {rds-instance-url} -U {db-user} -d {db-name} --jobs={number-of-jobs} {my-backup.dump}</code></p><blockquote class="ns nt nu"><p id="5f20" class="kr ks nv kt b ku kv jr kw kx ky ju kz nw lb lc ld nx lf lg lh ny lj lk ll lm ij bi translated"><strong class="kt ir">这里的PRO提示是使用选项</strong> <code class="fe nm nn no np b"><strong class="kt ir">--jobs</strong></code> <strong class="kt ir">来表示工作数量。这将使用多个线程并行运行恢复，使恢复过程成倍加快。更多信息请点击:</strong><a class="ae ln" href="https://www.postgresql.org/docs/9.2/app-pgrestore.html" rel="noopener ugc nofollow" target="_blank">https://www.postgresql.org/docs/9.2/app-pgrestore.html</a></p></blockquote><p id="664b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">4.步骤5(可选):用GUI或命令行连接到数据库，并进行健全性检查。比较一些表的大小以及是否创建了索引。(我最喜欢的PSQL免费GUI是<a class="ae ln" href="https://www.beekeeperstudio.io/" rel="noopener ugc nofollow" target="_blank"> Beekeeper Studio </a>)</p><p id="c80c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">5.<strong class="kt ir">最后一步/不可逆</strong> —更改Heroku应用配置中的<code class="fe nm nn no np b">DAATABASE_URL</code>。这一步是不可逆的，因为您必须删除Heroku Postgresql加载项，这会终止当前数据库。这是一个不幸的过程。参见我在“最后的思考”部分的观点。<br/>将<strong class="kt ir">数据库URL </strong>更改为您的<strong class="kt ir"> AWS RDS URL </strong>。<br/> <code class="fe nm nn no np b">DATABASE_URL=postgres://username:password@hostname/dbname?sslca=config/amazon-rds-ca-cert.pem</code></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/373e2c81654c52890ab5f9c9bc47207c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*minuAS8iKUJCXaoLlBcFzQ.png"/></div></div><p class="md me gj gh gi mf mg bd b be z dk translated">删除Heroku Postgres附加组件</p></figure><p id="4de3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">6.启用所有后台作业动态</p><p id="3625" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">7.将应用从维护模式中移除。<br/> <code class="fe nm nn no np b">heroku maintanance:off -a {app-name}</code></p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="daf7" class="ob mp iq bd mq oc od oe mt of og oh mw jw oi jx mz jz oj ka nc kc ok kd nf ol bi translated">最后的想法</h1><ol class=""><li id="2028" class="lo lp iq kt b ku nh kx ni la om le on li oo lm nz lu lv lw bi translated">Heroku Postgres附加软件依赖于一个Heroku应用程序。<br/>不能单独使用。这是一个问题，因为当HEROKU Postgres附加组件处于活动状态时，无法更改<code class="fe nm nn no np b">DATABASE_URL</code>。为了更改<code class="fe nm nn no np b">DATABASE_URL</code>，需要删除附加组件。将数据库复制到另一个应用程序并不是一个正确的选择，并且/或者表现得像一个全新的<code class="fe nm nn no np b">pg_restore</code>。如果在不移除Postgres插件的情况下更改<code class="fe nm nn no np b">DATABASE_URL</code>是可能的，那么当您需要返回到之前的Heroku数据库时，这将是回溯情形的理想选择。</li><li id="6189" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm nz lu lv lw bi translated">执行几次试运行:<br/>在不改变实际<code class="fe nm nn no np b"><strong class="kt ir">DATABASE_URL</strong></code>的情况下执行整个过程<strong class="kt ir">(跳过迁移阶段II，步骤5) </strong>。通过这样做，您可以在迁移笔记中概述迁移。这也将帮助你确定几件事:</li></ol><ul class=""><li id="cdcd" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated">完成迁移所需的总时间—因此，您可以计划一个预定的维护窗口。</li><li id="497e" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">在这个过程中你错过了什么吗？</li><li id="81e7" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">监视EC2实例度量和RDS度量。<br/>在大多数情况下，CPU可用内存受到的影响最大。您在<code class="fe nm nn no np b">pg_restore</code>中使用的选项<code class="fe nm nn no np b">--jobs</code>中的作业越多，受影响的CPU就越多。尽管有一点，更多的作业不会更快地完成迁移。最有可能的情况是，一些作业(在较大的表上工作)将占用与其他所有作业一样多的时间，并且整个迁移将依赖于它们来完成。</li></ul><p id="2f7f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">3.<a class="ae ln" href="https://aws.amazon.com/server-migration-service/" rel="noopener ugc nofollow" target="_blank"> AWS服务器迁移服务</a> <br/>我做Heroku到RDS数据库迁移的第一直觉是，让我们使用<a class="ae ln" href="https://aws.amazon.com/server-migration-service/" rel="noopener ugc nofollow" target="_blank"> AWS服务器迁移服务</a>。在迁移过程中，这个工具会给我99.9%的正常运行时间，直到<code class="fe nm nn no np b">DATABASE_URL</code>发生变化。，我艰难地发现(在我设置好一切之后),服务迁移服务依赖于逻辑复制，而逻辑复制不能使用Heroku Postgres数据库作为源进行配置。有关AWS迁移服务和Postgresql迁移的更多信息—<a class="ae ln" href="https://aws.amazon.com/blogs/database/migrating-postgresql-from-on-premises-or-amazon-ec2-to-amazon-rds-using-logical-replication/" rel="noopener ugc nofollow" target="_blank">https://AWS . Amazon . com/blogs/database/migrating-Postgresql-from-on-premises-or-Amazon-ec2-to-Amazon-rds-using-logical-replication/</a></p><p id="0ec8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">4.将数据加载到PostgreSQL数据库实例的有用AWS提示<a class="ae ln" href="https://docs.amazonaws.cn/en_us/AmazonRDS/latest/UserGuide/CHAP_BestPractices.html#CHAP_BestPractices.PostgreSQL" rel="noopener ugc nofollow" target="_blank">这里是</a>。其中一些很有意义，但对于我的迁移来说，它们并没有太大的区别，而且这会增加整个迁移过程，因为您必须将这些更改应用到RDS实例，然后在完成迁移后恢复它们。在你的演习中尝试一些是理想的。</p><blockquote class="ns nt nu"><p id="8faf" class="kr ks nv kt b ku kv jr kw kx ky ju kz nw lb lc ld nx lf lg lh ny lj lk ll lm ij bi translated">最后也是非常重要的PRO提示是在与Heroku实例相同的<strong class="kt ir"/><strong class="kt ir">区域创建RDS实例。这将大大减少与数据库通信的延迟。在为heroku US主持写作的时候，那是</strong> <code class="fe nm nn no np b"><strong class="kt ir">us-east-1</strong></code> <strong class="kt ir">地区。您可以在此</strong>  <strong class="kt ir">处查看</strong> <a class="ae ln" href="https://devcenter.heroku.com/articles/regions" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">设置的准确区域。</strong></a></p></blockquote></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><p id="1690" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">希望这篇文章能给你下一次Heroku到RDS Postgres迁移带来一些好的想法。我知道有许多移动部分，但是如果您一步一步来，并执行一个模拟场景，真正的迁移将会顺利进行。如果您有任何改进流程的建议，请告诉我。</p><h1 id="5935" class="ob mp iq bd mq oc op oe mt of oq oh mw jw or jx mz jz os ka nc kc ot kd nf ol bi translated">联系人</h1><p id="6eec" class="pw-post-body-paragraph kr ks iq kt b ku nh jr kw kx ni ju kz la nj lc ld le nk lg lh li nl lk ll lm ij bi translated">我是一名软件、数据和机器学习顾问，通过了<a class="ae ln" href="https://www.credly.com/badges/58e38a3f-af0c-441c-be90-6ed99fc4a788/public_url" rel="noopener ugc nofollow" target="_blank"> AWS机器学习</a> &amp; <a class="ae ln" href="https://www.credly.com/badges/0db46f4c-3f60-413d-aa31-8d5e56982d2d/public_url" rel="noopener ugc nofollow" target="_blank"> AWS解决方案架构师认证——专业</a>。如果您的下一个机器学习项目需要帮助，请联系我们。<br/>要了解我最新的文章和项目<a class="ae ln" href="https://vel-lesikov.medium.com/subscribe" rel="noopener">，请在Medium上关注我</a>。</p><p id="ec0d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">其他联系人:</p><ul class=""><li id="a86e" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated"><a class="ae ln" href="https://www.linkedin.com/in/velimir-lesikov/" rel="noopener ugc nofollow" target="_blank">领英</a></li><li id="d600" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated"><a class="ae ln" href="https://vel-lesikov.medium.com/" rel="noopener">中等轮廓</a></li><li id="725f" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated"><a class="ae ln" href="https://github.com/velles" rel="noopener ugc nofollow" target="_blank"> GitHub </a></li></ul></div></div>    
</body>
</html>