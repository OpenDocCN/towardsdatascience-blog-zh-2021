<html>
<head>
<title>The essential guide to Sample Ratio Mismatch for your A/B tests</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">A/B测试样品比率不匹配的基本指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-essential-guide-to-sample-ratio-mismatch-for-your-a-b-tests-96a4db81d7a4?source=collection_archive---------6-----------------------#2021-07-22">https://towardsdatascience.com/the-essential-guide-to-sample-ratio-mismatch-for-your-a-b-tests-96a4db81d7a4?source=collection_archive---------6-----------------------#2021-07-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6ca3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如果你不能相信一个实验的结果，你就不能相信你基于它做出的决定；你会惊讶地发现，你常常不相信实验的结果</h2></div><p id="8606" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">缺乏数据完整性是实验中常见的问题。在处理重定向测试、单页应用程序或其他复杂设置时，它们尤其常见。你构建测试有多久并不重要；这些问题就这么发生了。</p><p id="9e1a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么，鉴于这一事实，我们能做些什么呢？首先(也是最重要的)，我们需要<strong class="kh ir">非常密切地跟踪我们实验的数据完整性</strong>。因此，如果出现问题，我们会尽早知道。</p><p id="b558" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">任何人都可以执行的一个基本(简单)检查是<strong class="kh ir">样本比率不匹配(SRM) </strong>检查。要做到这一点，您不必是分析师或数据科学家。事实上，我在测试中遇到的许多问题都是由产品所有者发现的。</p><p id="dc2a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我将向您提供什么是SRM以及检查SRM的各种方法的实用概述。有了这些知识，你就可以把它整合到你自己的实验过程中。</p><p id="a49b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们开始之前，我必须强调一点:尽管SRM可以捕获许多问题，但它并不能突出显示您的设置中的每个可能的问题。这只是你应该做的最起码的事情。</p><h2 id="7e96" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">什么是样本比率不匹配？</h2><p id="40cc" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">假设你有一个A/B测试，期望是对半分…</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/de9a1c2c238b5f2723b605813444e812.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tfGEx1jBbmKBomYfYnQ3Yg.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">图片作者。流量平均分配</p></figure><p id="0760" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是假设你实际看到的是这样的…</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi mp"><img src="../Images/ae994a82e38d8dc62d46d0dd222032f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I2eAMn0C2VRCKZ3D1Sykkg.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">图片作者。流量分配不均</p></figure><p id="8d9a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，样本大小不匹配。这就是我们所说的“样本比率不匹配”，即样本比率与我们的预期不匹配(对半分割)。像这样的偏差会使你的测试无效。</p><h1 id="f6ad" class="mq lc iq bd ld mr ms mt lg mu mv mw lj jw mx jx lm jz my ka lp kc mz kd ls na bi translated">检查SRM时的规则</h1><p id="5218" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">在我们进一步讨论之前，我们需要确定一些要遵循的规则。</p><p id="40d3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些规则的第一条是<strong class="kh ir">用“用户”而不是“访问”来区分SRM检查的优先级</strong>。那是因为分配给实验的是“用户”。相比之下，“访问”是这些用户进行的“会话”的数量。</p><p id="3c60" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果一个变化鼓励用户更频繁地返回 <strong class="kh ir">(或更少)，我们实际上可能会预期访问的偏斜。</strong></p><p id="9c89" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么，这是否意味着带有“访问”的SRM总是没问题的呢？不一定。我遇到过这样的场景，缺陷导致用户在一个版本中比另一个版本中减少更多的访问。只是有“访问”的SRM并不是有“用户”的SRM是问题的“确凿证据”。</p><p id="4020" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">无论如何，我们的第二个规则是检查样本比率不匹配。那就是:<strong class="kh ir">我们需要经常寻找问题。</strong>SRM检查不是一蹴而就的活动。我们需要在测试一启动就检查它们，然后我们应该定期检查。</p><p id="2cae" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">至少在启动的第一周，新的实验应该像重症监护病人一样对待。</p><p id="56a0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这条规则立即给我们带来了一个需要解决的问题，因为被询问的流量可能非常低。但是有一些方法可以提高我们的确定性。我们将在本文的稍后部分讨论这个问题。首先，让我们看看识别问题的最简单的方法。</p><h2 id="6d6a" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">检查明显的问题</h2><p id="0f9e" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">识别问题的第一个也是最简单的方法是查看测试作业编号。</p><p id="1a0f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有些问题是如此的突出；你可以直接发出警报，而不需要做任何计算。例如，如果您在一个组中看到1000个用户，而在另一个组中看到100个用户，您就知道有问题了。</p><p id="42b2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这似乎是显而易见的事情，但重要的是不要认为检查SRM是某种主要活动。只要能够很容易地快速看到这些数字，就能为你节省大量时间。</p><p id="9ef2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">更重要的是，一旦你养成了定期查看这类数字的习惯，你就能发现不匹配的地方——尤其是大的不匹配。</p><p id="984e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是假设更近呢？假设控制组中有10，000个用户，变体中有9，500个用户。那你会怎么做？</p><h2 id="cdba" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">样本比率公式</h2><p id="7435" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">我们可以运行一个简单的计算来找到样本比率。</p><p id="f60c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，获得分配给实验的用户总数…</p><pre class="ma mb mc md gt nb nc nd ne aw nf bi"><span id="7d91" class="lb lc iq nc b gy ng nh l ni nj"><strong class="nc ir">total_users_in_test </strong>= users_in_control + users_in_variation</span></pre><p id="91b4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">…然后计算出每组用户的百分比。</p><pre class="ma mb mc md gt nb nc nd ne aw nf bi"><span id="4357" class="lb lc iq nc b gy ng nh l ni nj">control = <strong class="nc ir">users_in_control / total_users_in_test</strong><br/>variation = <strong class="nc ir">users_variation / total_users_in_test</strong></span></pre><p id="521c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你不需要同时解决控制和变化。一个就够了。</p><p id="5a86" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于我们的例子，计算:</p><pre class="ma mb mc md gt nb nc nd ne aw nf bi"><span id="6f34" class="lb lc iq nc b gy ng nh l ni nj">control = <strong class="nc ir">10,000 / (10,000 + 9,000) = </strong>0.5263<br/>variation = <strong class="nc ir">9,500 / (10,000 + 9,000) = </strong>0.4737</span></pre><p id="300e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，<strong class="kh ir"> 52.63%的用户处于对照组，</strong>和<strong class="kh ir"> 47.37%的用户处于变异</strong>。现在，我们可能期望在实验的早期看到一定量的不匹配，但是上面的情况看起来很可疑。</p><p id="0b01" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们怎样才能提高我们确定性的水平？是时候使用一些统计数据了...</p><h1 id="63d0" class="mq lc iq bd ld mr ms mt lg mu mv mw lj jw mx jx lm jz my ka lp kc mz kd ls na bi translated">独立性卡方检验</h1><p id="24f7" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">统计学是以有用的方式描述数据的方法。</p><p id="eaac" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有两个样本:控制组和变化组的流量。知道这些数字之间的差异超出正常概率的可能性是有用的。</p><p id="a0a6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<strong class="kh ir">卡方独立性检验来做到这一点。</strong>这个测试告诉我们，给定两个样本，样本独立<strong class="kh ir">的概率</strong>。</p><p id="1008" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您实际上不需要知道计算Chi的公式(尽管我稍后会详细介绍)，因为使用python非常简单:</p><pre class="ma mb mc md gt nb nc nd ne aw nf bi"><span id="7fd7" class="lb lc iq nc b gy ng nh l ni nj">observed = [ <strong class="nc ir">170471</strong>, <strong class="nc ir">171662 </strong>]<br/>total_traffic= sum(observed)<br/>expected = [ total_traffic/2, total_traffic/2 ]</span><span id="0f03" class="lb lc iq nc b gy nk nh l ni nj">from scipy.stats import chisquare</span><span id="36ac" class="lb lc iq nc b gy nk nh l ni nj">chi = chisquare(<strong class="nc ir">observed</strong>, f_exp=<strong class="nc ir">expected</strong>)<br/>print(chi)</span></pre><p id="06c9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">“观察”变量列出了两个值:控制中的用户数和变化中的用户数。</p><p id="c502" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">“expected”变量也是两个值的列表:我们期望每个组有多少用户。我们期望的流量是每个中总流量的一半。这是总流量，除以2。</p><p id="f2f7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们需要来自<a class="ae nl" href="https://www.wikihow.com/Install-Scipy" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> scipy.stats </strong> </a>的“卡方”模块。之后，我们只需输入数字。我们得到的输出是:</p><pre class="ma mb mc md gt nb nc nd ne aw nf bi"><span id="579e" class="lb lc iq nc b gy ng nh l ni nj">Power_divergenceResult(statistic=4.145992932573005, pvalue=0.041733172643879435)</span></pre><p id="79d6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一个元组，其中第一项是<strong class="kh ir">卡方统计</strong>，第二项是<strong class="kh ir"> p值</strong>。通常，人们会寻找0.05或更小的<strong class="kh ir"> p值</strong>来确定独立性(以及，在我们的情况下，SRM的证据)<strong class="kh ir">。</strong></p><p id="0986" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">0.05的问题在于它对于我们的目的来说不够严格。使用这个可能会给我们一个错误的问题信号。迈克尔·林顿<em class="nm">(optimize ly团队的一员)</em>在下面的文章中对此进行了详细介绍。</p><p id="95f6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们需要的是对我们的独立性测试更加严格。低于0.01 的值<strong class="kh ir">应该足够了。在我们的Python示例中，我们可以编写一个条件语句，以便于阅读:</strong></p><pre class="ma mb mc md gt nb nc nd ne aw nf bi"><span id="7c22" class="lb lc iq nc b gy ng nh l ni nj">if <strong class="nc ir">chi[1]</strong> &lt; 0.01:<br/>    print('Warning. SRM may be present.')<br/>else:<br/>    print('Probably no SRM.')</span></pre><p id="e54e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">顺便说一下，chi[1]意味着我们从元组中访问p值。我们的完整脚本如下所示。</p><p id="b56f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用我们的例子，我们没有SRM的确凿证据。再补充一点，我喜欢看累积视图。我们的流量越大，两组样本的分割就越接近:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nn"><img src="../Images/9f50865019c491ea0fc7c6bb16689817.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g5-iM03tkiAoNQiB1Knrtw.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">图片作者。<a class="ae nl" href="https://abdecisions.com" rel="noopener ugc nofollow" target="_blank">abdecisions.com的屏幕</a></p></figure><p id="970c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面是一个非常典型的样本比率视图。如果在实验运行期间引入了一个缺陷，这些累积视图对于确定SRM何时开始发生是有用的。</p><h2 id="a98c" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">电子表格视图</h2><p id="fc93" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">我意识到许多阅读这篇文章的人可能不熟悉python。因此，这里有一个使用电子表格的例子(适用于Google Sheets或Excel):</p><p id="0412" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用CHITEST公式，我们可以传递两组值:观察值和期望值。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi no"><img src="../Images/97c0fc6ef9be4311dde040f7faedd9a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*HDVEmKbxn8XkdvM_I3FDBg.png"/></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">图片作者。使用电子表格进行卡方检验</p></figure><pre class="ma mb mc md gt nb nc nd ne aw nf bi"><span id="a41e" class="lb lc iq nc b gy ng nh l ni nj">=CHITEST(<strong class="nc ir">observed_cell_range</strong>,<strong class="nc ir">expected_cell_range</strong>)</span></pre><p id="28e6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一个数字范围是控制和变化的“观察”值。第二个范围是“预期”(总数除以2)。</p><p id="4fc5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">公式的输出是P值。之后，规则与我们的python示例相同:小于<strong class="kh ir"> 0.01 </strong>表示可能的SRM。</p><h2 id="a2f0" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">更深入地了解卡方(可选)</h2><p id="59a7" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">对于那些真正想深入研究卡氏检验公式的人来说，这里是:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi np"><img src="../Images/3626ce19570a4556c5d62c4e6106f362.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zcTNKJLchpSxojeVYYtL5Q.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">图片作者。χ统计=观察值与期望值的平方之和除以期望值</p></figure><p id="13aa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">卡方统计量是每个观察值的总和减去期望值的平方，再除以期望值。</p><p id="8708" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">啊？让我们用一个电子表格来分解它:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nq"><img src="../Images/61829899edce7b44405d00592693ea26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LVOASuEeRufqKC3l6yvZyg.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">图片作者。包含公式值的电子表格</p></figure><p id="980d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些列:</p><ul class=""><li id="047d" class="nr ns iq kh b ki kj kl km ko nt ks nu kw nv la nw nx ny nz bi translated"><strong class="kh ir">观测值:</strong>分别为控制交通量和变异交通量。</li><li id="fb59" class="nr ns iq kh b ki oa kl ob ko oc ks od kw oe la nw nx ny nz bi translated"><strong class="kh ir">预期:</strong>每个的预期值——即观察到的总数除以2。</li><li id="208e" class="nr ns iq kh b ki oa kl ob ko oc ks od kw oe la nw nx ny nz bi translated"><strong class="kh ir">差异:</strong>观察值减去预期值</li><li id="2a9f" class="nr ns iq kh b ki oa kl ob ko oc ks od kw oe la nw nx ny nz bi translated"><strong class="kh ir">差的平方:</strong>自身相乘的差</li><li id="27e8" class="nr ns iq kh b ki oa kl ob ko oc ks od kw oe la nw nx ny nz bi translated"><strong class="kh ir">差平方/预期:</strong>差平方除以预期。</li></ul><p id="b22f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每一行都是一个变体组。例如，控制和变更(A/B)。</p><p id="e061" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这之后，我们准备寻找Chi统计，它只是<em class="nm"> Diff的平方/预期(如上面的公式中所示)</em>的总和:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nq"><img src="../Images/8ebaa105a71439beee8116b84ace6e7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oheny0x5Dyyj_FWHk0HhSg.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">图片作者。差平方和除以期望值</p></figure><p id="12cc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们如何从中获得p值？嗯，我们首先还需要一样东西:那就是自由度，计算方法是:</p><pre class="ma mb mc md gt nb nc nd ne aw nf bi"><span id="3508" class="lb lc iq nc b gy ng nh l ni nj"><em class="nm">Degree of Freedom = (rows − 1) × (columns − 1)</em></span></pre><p id="d617" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的例子中，我们的自由度是1(两行用于测试和控制，两列用于观察和预期)。</p><p id="4172" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以使用p值表来定位我们的得分并找到相关的p值:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi of"><img src="../Images/244779dabf64395263118e16e3e47b32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XXA7Iov6dsocpUSvJXArXQ.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">图片作者。p值表</p></figure><p id="1ac0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者使用电子表格功能:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi og"><img src="../Images/3a6e64f3d7d36e55a7885cd836789411.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sL55FVRIRVxfIHogUQy4vA.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">使用CHISQ。DIST.RT来求p值</p></figure><pre class="ma mb mc md gt nb nc nd ne aw nf bi"><span id="4acc" class="lb lc iq nc b gy ng nh l ni nj">=CHISQ.DIST.RT( chi_statistic, degrees_of_freedom)</span></pre><p id="8117" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个函数给出了精确的p值。我们最终的电子表格如下所示:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oh"><img src="../Images/ac58d26e8c4121fb53df28b258427ae1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iInPdjMXSOBR0QtId0J6tg.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">图片作者。来自CHISQ的p值。DIST RT</p></figure><p id="c2d1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当然，您可以通过使用前面所示的CHITEST函数来规避所有这些问题。</p><h1 id="8f92" class="mq lc iq bd ld mr ms mt lg mu mv mw lj jw mx jx lm jz my ka lp kc mz kd ls na bi translated">摘要</h1><p id="5c27" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">使用Chi检查流量的有效性非常简单。真的没有借口不做。此外，通过做这个简单的检查，你真的可以节省很多时间。</p><p id="8bf2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦你经常这样做，你就可以通过添加更多的数据验证检查来更进一步。这才是真正的开始。但这是一个重要的开始。</p><p id="ac7e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">说了这么多，还是要警惕狼来了。这可能会像数据有效性问题本身一样损害您的实验过程。我通常对在实验启动的第一天宣布问题很谨慎，除非有一个突出的问题。</p><p id="4ac6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">经常这样做，您将成为尽早确定SRM问题的专家。</p><h1 id="44ab" class="mq lc iq bd ld mr ms mt lg mu mv mw lj jw mx jx lm jz my ka lp kc mz kd ls na bi translated">关于我</h1><p id="ce08" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">我是<strong class="kh ir"> Iqbal Ali </strong>，<a class="ae nl" href="https://iqbala.com/" rel="noopener ugc nofollow" target="_blank">漫画作家</a> <strong class="kh ir">，</strong>train line前优化主管，<a class="ae nl" href="https://abdecisions.com" rel="noopener ugc nofollow" target="_blank"> A/B决策工具</a>的创造者，也是一名自由职业的CRO专家和顾问。</p><p id="62a0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我帮助公司开展实验项目，设计、开发、培训和建立实验流程。</p><p id="4f28" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你想联系，这是我的<a class="ae nl" href="https://www.linkedin.com/in/iqbalhussainali/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> LinkedIn </strong> </a>。或者跟随我来到这里。</p></div></div>    
</body>
</html>