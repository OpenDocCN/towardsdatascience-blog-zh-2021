<html>
<head>
<title>Modelling a Game of Tennis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">模拟一场网球比赛</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-a-tennis-match-simulator-in-python-3add9af6bebe?source=collection_archive---------15-----------------------#2021-11-16">https://towardsdatascience.com/building-a-tennis-match-simulator-in-python-3add9af6bebe?source=collection_archive---------15-----------------------#2021-11-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/348deb9d4aa0ded3a61cac3b28d82c2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mXaD92ySYGZQ0x-6I9P76Q.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">照片由<a class="ae jd" href="https://unsplash.com/@arnok?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">莫伊斯·阿历克斯</a>在<a class="ae jd" href="https://unsplash.com/s/photos/tennis?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><div class=""/><div class=""><h2 id="6315" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">使用Python验证网球比赛基于点的建模背后的数学原理</h2></div><p id="8fb3" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">网球，像其他球拍类运动(和排球)一样，有一个特定的得分系统，包括将得分分为子集，这些子集是对整体比赛重要的，而不是每个单独的点。这就引出了一个自然的问题:</p><p id="6e0a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">“给定得分的胜算概率与网球比赛的胜算概率有什么关系？”</em></p><p id="f65b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">希望是积极的，否则技能不会得到奖励。以下是我关于如何使用“基于点的模型”对网球比赛进行建模的笔记，作为构建网球比赛模拟器的一部分，以便回答一些有趣的问题，这些问题围绕着改变比赛的各种规则(如取消二发或减少平手到猝死)的影响。</p><p id="9c0a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">目的是:</p><ul class=""><li id="ef9c" class="ls lt jg kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated">贯穿基于点的模型的思想</li><li id="94f2" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">推导出服务器赢得游戏的概率公式</li><li id="d2a7" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">使用模块<code class="fe mg mh mi mj b">tennisim</code>中的python模拟来测试这种推导</li></ul><h2 id="4e04" class="mk ml jg bd mm mn mo dn mp mq mr dp ms le mt mu mv li mw mx my lm mz na nb nc bi translated">只有一个变量，p</h2><p id="9ddd" class="pw-post-body-paragraph kv kw jg kx b ky nd kh la lb ne kk ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">为了简单起见，我们将假设一个点可以完全由一个变量来描述，<code class="fe mg mh mi mj b">p</code>:服务器在游戏中赢得给定点的概率。围绕这一点的假设是:</p><ul class=""><li id="7cb9" class="ls lt jg kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated">这个概率可以在玩游戏之前以合理的准确度进行估算</li><li id="1bd9" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">这个概率在整个游戏中是不变的</li><li id="1865" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">每个点都是独立的:前一个点(或前一个点的集合)的结果不会影响该点的概率</li></ul><h2 id="5bf8" class="mk ml jg bd mm mn mo dn mp mq mr dp ms le mt mu mv li mw mx my lm mz na nb nc bi translated">如何在一场网球比赛中得分</h2><p id="726e" class="pw-post-body-paragraph kv kw jg kx b ky nd kh la lb ne kk ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">网球之所以有趣，是因为并非每一点都同样重要。这场比赛不仅仅是一场150分左右的比赛，大数法则(LLN)将开始发挥作用，因此很少有冷门。</p><p id="76ba" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">取而代之的是，分数被细分为游戏，每场游戏都有一名玩家获得优势——他们可以随心所欲地通过第一枪就开始得分。</p><h2 id="f39d" class="mk ml jg bd mm mn mo dn mp mq mr dp ms le mt mu mv li mw mx my lm mz na nb nc bi translated">基于点的建模基础</h2><p id="6ecf" class="pw-post-body-paragraph kv kw jg kx b ky nd kh la lb ne kk ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">这被称为基于点的建模，因为为了得到游戏、集合和比赛的结果，我们依赖于计算所有组成点的结果。尽管这可能不是模拟比赛总体结果的最具预测性的模型(它似乎是ELO的修改版)，但它非常有用，因为它产生了大量的赛内信息，从而为制定“比赛中的赔率”提供了基础。</p><p id="e489" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">鉴于:</p><ul class=""><li id="c8e1" class="ls lt jg kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated"><code class="fe mg mh mi mj b">p</code>:发球方得分的概率</li><li id="1954" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><code class="fe mg mh mi mj b">(1-p)</code>:返回者赢得分数的概率(假设没有其他人可以赢得分数)</li></ul><p id="4d20" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，我们可以生成以下网球比赛进程的“流程图”:</p><figure class="ni nj nk nl gt is gh gi paragraph-image"><div class="ab gu cl nm"><img src="../Images/ea9ad4a18e3dcdc74fc34106c71e560e.png" data-original-src="https://miro.medium.com/v2/format:webp/1*PlVccXYG0-X3FNJB49Z0qw.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">图片由作者使用<a class="ae jd" href="https://app.diagrams.net/" rel="noopener ugc nofollow" target="_blank">https://app.diagrams.net/</a></p></figure><p id="9b8c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">所以简单描述一下上面的内容:</p><ul class=""><li id="3057" class="ls lt jg kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated">我们从0-0开始</li><li id="3373" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">以概率<code class="fe mg mh mi mj b">p</code>服务器赢得了这一点，我们在图表上“向上”移动</li><li id="a897" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">反之亦然，概率为<code class="fe mg mh mi mj b">(1-p)</code> -我们在图表中“下移”</li><li id="c8bd" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">如果我们打成平手，我们在最后会有某种循环行为，如果一名球员没有连续赢得2分，那么我们会反弹到平手(这与30-30相同，因为在这一点上，两名球员需要连续赢得2分才能结束比赛)</li></ul><p id="7f12" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以用这个图表来直观地展示如何以方程式的形式为游戏建模。比如，我们可以看到，一场比赛要想赢得爱情，只有一个办法:连赢4分。如果你是服务器，那么发生这种情况的概率是(<code class="fe mg mh mi mj b">p x p x p x p</code>)。对于回球者来说，反过来也是正确的，他用所有其他可能的路线来打破发球，以结束由图表中间的路径描述的比赛。</p><p id="9b8f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于游戏的每一个可能的最终结果，为了得到它发生的概率，我们需要:</p><ul class=""><li id="36d7" class="ls lt jg kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated">计算游戏以某个分数结束的概率，例如:爱赢了</li><li id="2859" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">用达到最终<em class="lr">分数的方式的数量乘以这个数，例如，1代表爱</em></li></ul><p id="cca7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">例如，有多种方式可以结束游戏，服务器获胜，返回者在游戏结束时有15分，因为返回者可能在整个游戏的不同情况下赢得该分。假设我们将每个点视为一个<a class="ae jd" href="https://en.wikipedia.org/wiki/Bernoulli_distribution" rel="noopener ugc nofollow" target="_blank">伯努利变量</a>，即只有两个互斥的结果，那么我们可以将一组点视为一个遵循二项式分布的<a class="ae jd" href="https://en.wikipedia.org/wiki/Binomial_distribution" rel="noopener ugc nofollow" target="_blank">二项式变量</a>。</p><p id="3891" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，我们可以写出下面的内容——如果我们玩<code class="fe mg mh mi mj b">n</code>点，服务器将赢得其中的<code class="fe mg mh mi mj b">x</code>点的概率<code class="fe mg mh mi mj b">P</code>是:</p><figure class="ni nj nk nl gt is gh gi paragraph-image"><div class="ab gu cl nm"><img src="../Images/c257e5f5639e2f820a54ba766c547762.png" data-original-src="https://miro.medium.com/v2/format:webp/1*a09P3vOtEk9gW7QmsYUWiQ.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="3c09" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里我们还定义了<a class="ae jd" href="https://en.wikipedia.org/wiki/Binomial_coefficient" rel="noopener ugc nofollow" target="_blank">‘二项式系数’</a>:</p><figure class="ni nj nk nl gt is gh gi paragraph-image"><div class="ab gu cl nm"><img src="../Images/43800f7f180ce18281435ae77f90bc1c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*5WzWtQEYdP3aaz0hBYyXfA.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><h2 id="d7bd" class="mk ml jg bd mm mn mo dn mp mq mr dp ms le mt mu mv li mw mx my lm mz na nb nc bi translated">写出给定游戏的方程式</h2><p id="8c84" class="pw-post-body-paragraph kv kw jg kx b ky nd kh la lb ne kk ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">我们需要小心的最后一件事是<strong class="kx jh">不要重复计算结果</strong>——这可以通过一个例子得到最好的说明。对于服务器来说，要赢得一场比赛，他们需要赢得4分，他们的对手赢得1分。在上面的例子中，服务器赢了<code class="fe mg mh mi mj b">x=4</code>，就可以玩<code class="fe mg mh mi mj b">n=5</code>点游戏。上面的等式(二项式系数)告诉我们有5种方式可以做到这一点。然而，这并不完全正确，因为它是在计算服务器赢得前4分，返回者赢得最后一分的结果-但这是不可能的，因为游戏已经结束了(服务器将赢得爱情)。</p><p id="2bb7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了绕过这一点，我们可以应用<a class="ae jd" href="https://en.wikipedia.org/wiki/Inclusion%E2%80%93exclusion_principle" rel="noopener ugc nofollow" target="_blank">包含-排除原则</a>——为了得到上述可能发生的方式的数量，我们需要减去服务器可以赢得爱的方式的数量。</p><p id="bea6" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，让我们写下以下作为服务器赢得一场比赛的概率:</p><figure class="ni nj nk nl gt is gh gi paragraph-image"><div class="ab gu cl nm"><img src="../Images/9be3d39b875f56a2049916f367702b87.png" data-original-src="https://miro.medium.com/v2/format:webp/1*yucl2OTZYdcLMloTxKNC2g.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="8b46" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">换句话说，服务器赢得游戏的概率是:</p><ul class=""><li id="b9b8" class="ls lt jg kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated">他们赢得爱情的概率</li><li id="2d3c" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">他们获胜的概率为15</li><li id="516f" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">他们获胜的概率为30</li><li id="7636" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">他们进入“平手”然后设法(在某个时候)连续赢得2分的概率</li></ul><p id="d7e8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在深入最后一点之前，我们可以先解决前几个问题，因为它们比较简单。</p><figure class="ni nj nk nl gt is gh gi paragraph-image"><div class="ab gu cl nm"><img src="../Images/b05cd4a1327d7f98dd4d9497681f21de.png" data-original-src="https://miro.medium.com/v2/format:webp/1*xyttMQfXV4joPu2hiiM_tg.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="0e4c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在我们可以把最后一部分分成:</p><ul class=""><li id="eaf6" class="ls lt jg kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated">当我们玩6分游戏时，每个玩家赢3分的概率(简单)</li><li id="161e" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">最终服务器将设法赢得2个连续点的概率(硬)</li></ul><p id="6cfd" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">第一位可以简单地写成:</p><figure class="ni nj nk nl gt is gh gi paragraph-image"><div class="ab gu cl nm"><img src="../Images/9672f67f8e5384d28d6c615e7938849f.png" data-original-src="https://miro.medium.com/v2/format:webp/1*9PZ7lFD-LGLoxiEayxN_lA.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="382e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里我们不需要担心重复计算，因为没有人得到4分，所以比赛不会结束。现在是棘手的部分——让我们首先计算出服务器赢得<code class="fe mg mh mi mj b">n+2</code>积分的任何<code class="fe mg mh mi mj b">n</code>的概率。我们可以认为这是以下各项的总和:</p><ul class=""><li id="9b83" class="ls lt jg kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated">发球方直接赢得2分(从平手)</li><li id="cbc4" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">发球方赢1，然后回球方赢1，然后发球方赢2</li><li id="be7a" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">返回者赢1，然后服务器赢1，然后服务器赢2获胜</li><li id="7425" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">服务器赢，返回者赢，服务器赢，返回者赢，服务器赢2胜</li><li id="e392" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">等等。等等。等等。</li></ul><p id="4bd6" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以用数学方法表示为:</p><figure class="ni nj nk nl gt is gh gi paragraph-image"><div class="ab gu cl nm"><img src="../Images/71ec96c07f1273216b28bccfba26d382.png" data-original-src="https://miro.medium.com/v2/format:webp/1*LwWzMa0d55biJWtgVV3jbA.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="8ca1" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">其中:</p><ul class=""><li id="bc72" class="ls lt jg kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated"><code class="fe mg mh mi mj b">p(1-p)</code>是发球胜分的结果，然后是回发球</li><li id="4b8c" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><code class="fe mg mh mi mj b">(1-p)p</code>是回球者赢分，然后是发球者的结果</li><li id="6132" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">然后服务器会赢得下一个2分吗</li></ul><p id="98e4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，我们可以将其简化为:</p><figure class="ni nj nk nl gt is gh gi paragraph-image"><div class="ab gu cl nm"><img src="../Images/58308309e35d1a6be612e23b0dd5fe04.png" data-original-src="https://miro.medium.com/v2/format:webp/1*poTuiSmGuHpo2THIpJDk_w.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="9742" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们把所有不依赖于<code class="fe mg mh mi mj b">j</code>的东西都去掉了。剩下的是二项式系数的<a class="ae jd" href="https://en.wikipedia.org/wiki/Binomial_coefficient#Sums_of_binomial_coefficients" rel="noopener ugc nofollow" target="_blank">和，即:</a></p><figure class="ni nj nk nl gt is gh gi paragraph-image"><div class="ab gu cl nm"><img src="../Images/88f6080c1239a0e666523294fdb21ca1.png" data-original-src="https://miro.medium.com/v2/format:webp/1*na8_Twpbd4aOsPNOaq1ibg.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="88b4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在我们把它代入原始表达式，得到:</p><figure class="ni nj nk nl gt is gh gi paragraph-image"><div class="ab gu cl nm"><img src="../Images/1bc8869ccb945b5cad91a20378490bbe.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Y-dQZolLxtwpH-2g2pR0gw.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="a143" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，把括号外的<code class="fe mg mh mi mj b">p^2</code>去掉，然后对<a class="ae jd" href="https://en.wikipedia.org/wiki/Geometric_progression#Infinite_geometric_series" rel="noopener ugc nofollow" target="_blank">无限几何级数</a>求和，我们得到了拼图的最后一块:</p><figure class="ni nj nk nl gt is gh gi paragraph-image"><div class="ab gu cl nm"><img src="../Images/ce332e04d0d4fd8188258e47a98c47e9.png" data-original-src="https://miro.medium.com/v2/format:webp/1*qZWCvfy0keXBLPQr9M-x0w.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="e157" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">将这一点与上面的结合起来，我们得到了下面的表达式，即一个发球者赢得一场比赛的概率，只是根据他们在发球时赢得一分的概率:</p><figure class="ni nj nk nl gt is gh gi paragraph-image"><div class="ab gu cl nm"><img src="../Images/ded1c64f584e5f14836dbb05f7dd2f2c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*_8Fay6SsLK1sG5q0r53dRw.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><h2 id="9c49" class="mk ml jg bd mm mn mo dn mp mq mr dp ms le mt mu mv li mw mx my lm mz na nb nc bi translated">使用模拟来检查</h2><p id="6370" class="pw-post-body-paragraph kv kw jg kx b ky nd kh la lb ne kk ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">现在我们有:</p><ul class=""><li id="4017" class="ls lt jg kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated">封闭形式的解</li><li id="70e2" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">python由我们支配</li></ul><p id="59e5" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们不妨运行一些模拟来验证我们所期望的服务器赢得游戏的概率，给定他们将赢得任何给定分数的概率，对应于我们在模拟时所看到的平均值。</p><p id="22bc" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我已经将下面的内容打包成了<code class="fe mg mh mi mj b">tennisim</code>，只需使用<code class="fe mg mh mi mj b">pip install tennisim</code>就可以在PyPI上获得，但是为了完整起见，下面是来自<code class="fe mg mh mi mj b">tennisim</code>的代码，用来模拟一个游戏以及一些用于制图的导入:</p><figure class="ni nj nk nl gt is"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="b375" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以首先看一下服务器赢得游戏的概率如何随着服务器赢得任何给定点的概率而变化:</p><figure class="ni nj nk nl gt is"><div class="bz fp l di"><div class="nn no l"/></div></figure><figure class="ni nj nk nl gt is gh gi paragraph-image"><div class="ab gu cl nm"><img src="../Images/d15b6433bda6298b8149a79cc8008f8c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*GmTswJb-90zjgXQGsoHFHA.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="d54d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在让我们检查一下，如果我们模拟网球比赛，我们的方程是否与数据相符。我们将:</p><ul class=""><li id="c5ab" class="ls lt jg kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated">模拟1000组100个游戏，服务器以不同的概率赢得给定的分数</li><li id="e467" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">将这些组的分布与使用上面推导的公式计算的预期概率进行比较</li></ul><figure class="ni nj nk nl gt is"><div class="bz fp l di"><div class="nn no l"/></div></figure><figure class="ni nj nk nl gt is gh gi paragraph-image"><div class="ab gu cl nm"><img src="../Images/001459c9db809b5c008a72a2923bc422.png" data-original-src="https://miro.medium.com/v2/format:webp/1*xyiA-3Iag4EyOay8pLZGJw.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="c04c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，看起来模拟是在支持这种推导——模拟的每个分布都围绕着理论上的获胜概率(红线)。</p><p id="a181" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有趣的是，前面的线形图显示，服务器赢得一分的概率每增加1%,赢得游戏的概率就会增加1%以上。这只在上面图表的特定范围内是正确的，但考虑到大多数职业选手坐在60-80%左右，这表明提高你的发球有多重要，因为它比线性增加了你保持发球比赛的机会。</p><h2 id="8b42" class="mk ml jg bd mm mn mo dn mp mq mr dp ms le mt mu mv li mw mx my lm mz na nb nc bi translated">结论</h2><p id="7b41" class="pw-post-body-paragraph kv kw jg kx b ky nd kh la lb ne kk ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">一旦我们假设一场网球比赛可以简化为一系列独立的点，并且发球方以固定的概率赢得每一个点，我们已经证明了发球方赢得比赛的概率可以用封闭的形式来描述。通过一系列模拟来验证这一点，表明模拟简单的概率设置是多么有用，模拟可用于以下文章:</p><ul class=""><li id="b5f8" class="ls lt jg kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated">调查改变<code class="fe mg mh mi mj b">p</code>对游戏的预期长度(以点为单位)的影响</li><li id="6dca" class="ls lt jg kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">调查改变<code class="fe mg mh mi mj b">p</code>对集合分数(6–4、7–5、6–2等)预期分布的影响</li></ul></div></div>    
</body>
</html>