<html>
<head>
<title>An Enterprise Data Stack Using TypeDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用TypeDB的企业数据堆栈</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/an-enterprise-data-stack-using-typedb-aa6df12b420b?source=collection_archive---------26-----------------------#2021-09-02">https://towardsdatascience.com/an-enterprise-data-stack-using-typedb-aa6df12b420b?source=collection_archive---------26-----------------------#2021-09-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/4c2bd7035068859c9e43501c093ae79c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SjV8glx5kt9a4g8gkjJQ1w.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated"><a class="ae jd" href="https://www.shutterstock.com/image-illustration/3d-render-abstract-database-server-stack-1737433799" rel="noopener ugc nofollow" target="_blank">https://www . shutterstock . com/image-illustration/3d-render-abstract-database-server-stack-1737433799</a></p></figure><div class=""/><div class=""><h2 id="ea38" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">拜耳医药公司用于药物研发的数据架构</h2></div><p id="5927" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在世界上最大的制药公司之一拜耳公司，深入了解生物系统对于发现新的治疗方法至关重要。这促使人们采用能够加速和自动化发现的技术，从数据库开始，跨越数据基础架构的所有组件。</p><p id="3608" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">数据和发现过程中的挑战并非拜耳独有:</p><ul class=""><li id="350a" class="lr ls jg kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">大规模加载异构数据集</li><li id="fe13" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">将异构数据集映射到一个真实的来源——给定一种疾病，我们如何在多个数据集之间协调其不同的id？</li><li id="18f5" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">模拟生物系统的复杂性——基于基因组上的位置以及基因、蛋白质、途径、细胞、组织之间的三元关系，在数据库中自然地表示基因和变异</li><li id="a2ad" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">如此复杂系统上的查询构造</li><li id="23d0" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">将ML管道连接到数据库</li></ul><p id="ce04" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">拜耳的团队——Henning kui ch、Dan Plischke和Joren Retel——着手建立一个堆栈来帮助他们解决这些挑战。</p><p id="3973" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">第一步是找到一个数据库，让他们能够模拟疾病周围生物系统的复杂性。它需要能够表示生物学中固有的相互联系，在需要时动态更新模型而不干扰过程的其余部分，并能够有效连接到知识提取管道，无论是可视化还是学习过程。他们在<a class="ae jd" href="https://github.com/vaticle/typedb" rel="noopener ugc nofollow" target="_blank"> TypeDB </a>中找到了他们的数据库，这是来自<a class="ae jd" href="https://vaticle.com" rel="noopener ugc nofollow" target="_blank"> Vaticle </a>团队的强类型数据库(社区版本完全开源)。</p><blockquote class="mf"><p id="ef9b" class="mg mh jg bd mi mj mk ml mm mn mo lq dk translated">"….我们实际上已经在内部开发了一个堆栈，以便非常认真地使用TypeDB，所以我们已经建立了一个数据迁移器来将内容放入其中，然后我们现在有两个分支来将知识取出。”— Henning Kuich，拜耳制药公司资深计算科学家</p></blockquote><figure class="mq mr ms mt mu is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mp"><img src="../Images/5d8bb16a96f267130fd228486ce10ec5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LVy7V4pvlftEuJ0WZn7QmQ.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">拜耳的生产栈，用于TypeDB的高级工作——经许可使用。</p></figure><h1 id="7ef3" class="mv mw jg bd mx my mz na nb nc nd ne nf km ng kn nh kp ni kq nj ks nk kt nl nm bi translated">用于模拟复杂性的数据库— TypeDB</h1><p id="da0b" class="pw-post-body-paragraph kv kw jg kx b ky nn kh la lb no kk ld le np lg lh li nq lk ll lm nr lo lp lq ij bi translated">生物学中的一切都是极其相关和依赖于上下文的，这使得在传统的关系数据库中表示数据非常困难。正因为如此，Henning和他的团队认为TypeDB的类型系统是一种更自然的生物学建模方式。</p><p id="d484" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">生物医学实验是高度上下文相关的，因此在构建生物医学知识图时，您希望能够快速查询使用了哪些参数。实际的化验是什么？是在体外，还是在细胞里？这需要一个能够捕捉这种复杂程度的数据库，以及一种允许我们轻松地对这些数据提出复杂问题的查询语言。有了TypeDB，Henning的团队就能做到这一点。</p><p id="9b74" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Bayer还利用了TypeDB中本机推理引擎的优势。推理可以为拥有类似复杂生物医学数据的团队做很多事情。例如，Henning和他的团队使用TypeDB的推理引擎，根据它们在染色体上的位置来推断<code class="fe ns nt nu nv b">variant</code>到<code class="fe ns nt nu nv b">gene</code>的连接。</p><p id="6181" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">基因本质上只是基因组中的序列，实际上是沿着一长串其他位置的位置。变体是这些序列的变体，也沿着相同的数字和位置延伸。使用type QL(TypeDB的查询语言)，该团队能够根据重叠位置将变异映射到基因，而不是依赖于其他需要他们导入变异和基因之间关系的数据库。重要的是，这避免了维护其他数据库的需要，因为定期更新和迁移这些数据库需要很长时间。所有这些都可以通过使用TypeDB的推理引擎来避免。</p><p id="ffaf" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">TypeDB还允许您在数据库生命周期中的任何时间点重新定义模式。例如，我们可以添加一个新的定义，根据基因的位置来定义与基因相关的变异。这很重要，尤其是当我们添加新的数据集时。所有这些都使Henning的团队能够更有效地运作，并加速他们的药物发现过程。</p><h1 id="2403" class="mv mw jg bd mx my mz na nb nc nd ne nf km ng kn nh kp ni kq nj ks nk kt nl nm bi translated">数据摄取— <em class="nw">类型数据库加载器</em></h1><p id="0bac" class="pw-post-body-paragraph kv kw jg kx b ky nn kh la lb no kk ld le np lg lh li nq lk ll lm nr lo lp lq ij bi translated"><em class="nx"> TypeDB Loader </em>是一个Java应用程序和库，使您能够将其用作CLI工具或在自己的Java项目中使用。这是一个工具来加载许多大规模的csv文件，并将数据缝合在一起，成为一个真正的图形格式的TypeDB。它可以用最少的配置文件来实现所有这些，配置文件告诉加载器使用哪些列将被加载的各种表中的数据关联在一起。使用它相对简单，只需指定正在与哪个实例对话，以及正在写入哪个TypeDB数据库。然后提供您的数据配置、处理器配置、TypeDB模式，然后确定您希望在哪里跟踪迁移状态。这可以像一个JSON文件一样简单。</p><p id="72dc" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Henning的团队决定构建自己的定制加载器，以提供一种可伸缩的方式将大量数据加载到TypeDB中。为了加载数据，最初的TypeDB文档建议构建一个读入文件(例如以表格格式)的函数，并构建一个生成插入查询的模板函数。然后，文档建议使用其中一个客户端驱动程序插入到TypeDB数据库中。然而，当大规模地这样做时，引入了TypeDB Loader试图解决的许多挑战:</p><ul class=""><li id="7355" class="lr ls jg kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">处理所需模板函数的重复逻辑</li><li id="c7d0" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">注意潜在的脏数据，防止插入过程中的错误</li><li id="f2b3" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">大规模插入查询的并行化和批处理</li><li id="1d31" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">大数据容错</li></ul><h1 id="46ca" class="mv mw jg bd mx my mz na nb nc nd ne nf km ng kn nh kp ni kq nj ks nk kt nl nm bi translated">数据探索— GraEs</h1><p id="ad9b" class="pw-post-body-paragraph kv kw jg kx b ky nn kh la lb no kk ld le np lg lh li nq lk ll lm nr lo lp lq ij bi translated">考虑到生物学的复杂性，特别是对疾病的理解，自然会期望模型(TypeDB模式)能够快速增长。</p><blockquote class="ny nz oa"><p id="5d90" class="kv kw nx kx b ky kz kh la lb lc kk ld ob lf lg lh oc lj lk ll od ln lo lp lq ij bi translated">模式是您的领域的模型，在TypeQL中作为类型(实体、属性、关系、角色)和规则来实现。插入到TypeDB中的所有数据都将实例化部分模式，确保您的数据符合您已经实现的模型。</p></blockquote><p id="4910" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这在编写查询时提出了挑战，因为用户必须记住或查找在哪个关系中允许哪些角色扮演者，对于给定的变量或事物哪些属性可用，以及查询中约束的所有可能属性值。为了解决这个问题，Bayer的团队建立了一个自动完成引擎，在你编写查询时提供基于语法和模式的建议。</p><p id="e4d0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该团队旨在解决的另一个挑战是创建一种快速可视化评估特定重要查询的方法。为了解决这个问题，GraEs提供了汇总表和单个子图可视化。此外，它将自动返回从查询中返回的概念的所有可能的属性，因此您不必手动请求它们。如今，GraEs已经拥有解决所有这些问题的基本布线:</p><ul class=""><li id="9a03" class="lr ls jg kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">查询完成</li><li id="bab9" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">查询开发</li><li id="a7f6" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">子图的标准可视化</li><li id="e3d3" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">某些实体或关系的汇总表</li><li id="c422" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">为特定查询或查询类型的更多自定义可视化铺平了道路</li></ul><h1 id="5bc2" class="mv mw jg bd mx my mz na nb nc nd ne nf km ng kn nh kp ni kq nj ks nk kt nl nm bi translated">用于链接预测和新发现管道的学习系统——type db到PyTorch连接器</h1><p id="aea9" class="pw-post-body-paragraph kv kw jg kx b ky nn kh la lb no kk ld le np lg lh li nq lk ll lm nr lo lp lq ij bi translated">今天，很明显药物发现过程在时间和金钱上都是昂贵的。正如Henning指出的，生物学最自然的表现形式是图表，团队可以利用这种相互联系的性质来识别新的潜在目标。能够利用TypeDB提供的丰富语义建模，可以预测哪些基因、蛋白质或变体是最重要的。</p><p id="9aa9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">虽然kg lib(va ticle的开源机器学习库)提供了与TensorFlow和GraphNets的连接，但拜耳的ML团队现在已经在PyTorch工作了两年。因此他们希望扩展KGLIB来连接PyTorch。</p><p id="ecd1" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">他们构建的连接器背后的概念是从他们的TypeDB数据库中提取子图，并将它们直接传递给学习者。使用子图作为训练示例允许图学习方法在规模上操作。否则，整个图形(大小可能达到万亿字节)将需要保存在内存中以供学习。</p><p id="4b25" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这为他们提供了如下管道:</p><ul class=""><li id="0036" class="lr ls jg kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">能够导出到Python内存中的NetworkX子图</li><li id="8974" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">从TypeDB超图实体/关系/属性模型编码成传统的节点-边模型</li><li id="b1bf" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">TensorFlow和PyTorch嵌入器自动将TypeDB中的类型和值数据解释为特征</li><li id="7710" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">端到端管道已经准备好与任何新的和令人兴奋的本地图形学习算法一起使用，例如py torch Geometric(GitHub的链接)内置的那些算法</li></ul><h1 id="a08d" class="mv mw jg bd mx my mz na nb nc nd ne nf km ng kn nh kp ni kq nj ks nk kt nl nm bi translated">结论</h1><p id="093d" class="pw-post-body-paragraph kv kw jg kx b ky nn kh la lb no kk ld le np lg lh li nq lk ll lm nr lo lp lq ij bi translated">希望这能让你对当今日益复杂的生物医学领域的药物发现过程有所了解。</p><p id="371e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">虽然这只是围绕TypeDB构建的企业生产堆栈的一个例子，但我们看到越来越多的社区构建工具和库继续推进其应用程序和复杂问题的解决方案。从开发自动驾驶汽车系统的混合方法，为制造和物流行业建立因果关系模型，到患者治疗和精确医疗，网络智能威胁检测和供应链分析，TypeDB使团队能够比以前更有效地工作，并更具表现力地建立领域模型。</p><p id="1f48" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要更多地了解社区正在构建什么，并为您自己的项目获得一些灵感，以下是一些方法:</p><ul class=""><li id="9c96" class="lr ls jg kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">加入<a class="ae jd" href="https://vaticle.com/discord" rel="noopener ugc nofollow" target="_blank">社区不和</a></li><li id="56ed" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">找到您的<a class="ae jd" href="https://meetup.com/topics/typedb" rel="noopener ugc nofollow" target="_blank">本地聚会</a></li><li id="95e9" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><a class="ae jd" href="https://github.com/vaticle/typedb/releases" rel="noopener ugc nofollow" target="_blank">下载</a>最新的TypeDB版本并开始构建</li></ul></div></div>    
</body>
</html>