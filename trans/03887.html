<html>
<head>
<title>A Journey Through Cleaning Animal Shelter Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">清理动物收容所数据之旅</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-journey-through-cleaning-animal-shelter-data-86c310fd0e18?source=collection_archive---------34-----------------------#2021-03-31">https://towardsdatascience.com/a-journey-through-cleaning-animal-shelter-data-86c310fd0e18?source=collection_archive---------34-----------------------#2021-03-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="8580" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/data-for-change" rel="noopener" target="_blank">变更数据</a></h2><div class=""/><div class=""><h2 id="5acc" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">用数据拯救动物的生命</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/2622b58b3932785d731165c5f9cd4f87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*D4WrDioPqx2lBHy0"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@dorographie?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">多萝西娅·奥德尼</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="e7a5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在我的上一篇文章中，有一个关于动物收容所分析的理论驱动的讨论。这篇文章重点介绍了庇护所对分析的需求、面临的挑战以及应对这些挑战的可能解决方案。在庇护所分析数据的主要挑战之一是收集的数据质量下降。在这篇文章中，我打算阐明收容所的数据质量问题以及我是如何处理这些问题的。</p><h1 id="31ec" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">数据显示“嗨！很高兴认识你！”</h1><p id="1d5a" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">收容所收集的数据大约有9-13列，我无法准确定位，因为随着收容所开始增加更重要的列，列数每年都在变化。我收到的数据是关于收容所动物的数据，收集了5年的时间，大约有15000条记录。数据记录了救援的几个细节，其中一些是</p><ul class=""><li id="833d" class="my mz iq lh b li lj ll lm lo na ls nb lw nc ma nd ne nf ng bi translated">被救动物的俗名是什么？</li><li id="a61f" class="my mz iq lh b li nh ll ni lo nj ls nk lw nl ma nd ne nf ng bi translated">获救的动物是什么物种？</li><li id="aa3d" class="my mz iq lh b li nh ll ni lo nj ls nk lw nl ma nd ne nf ng bi translated">救援是什么时候进行的？</li><li id="9f75" class="my mz iq lh b li nh ll ni lo nj ls nk lw nl ma nd ne nf ng bi translated">这只动物是从哪里被救出来的？</li><li id="2c38" class="my mz iq lh b li nh ll ni lo nj ls nk lw nl ma nd ne nf ng bi translated">谁是线人？</li></ul><p id="41ba" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在，这是一个金矿。我有15000行关于动物救助的数据。这是我第一次在<a class="ae le" rel="noopener" target="_blank" href="/data-science-in-the-real-world-e97e2534e43">现实世界挑战</a>中工作，我对这些数据的工作可以真正<em class="nm">产生影响</em>。</p><p id="4e8a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">好吧，你知道这是迟早的事。所以，让我继续吧——<em class="nm">这些数据很快就变成了邪恶的东西，并决心吸干我最后一点耐心</em>。很快，我就被一些非常现实的问题弄糊涂了！</p><h1 id="fd71" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">为数据牵线搭桥</h1><p id="b137" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">首先，数据是内部碎片。每年有5个不同的excel文件，每个文件每个月有12个单独的工作表。我从来没有处理过任何东西，除了一个美丽的组合。csv文件作为我本科课程的一部分。</p><p id="0207" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">幸运的是，我的在线学习教会了我熊猫，这似乎是一个不错的选择。但是，如何在excel文件中合并工作表呢？我不得不把60张数据结合在一起。我只好<em class="nm">为数据</em>扮演红娘。</p><p id="810f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">幸运的是，谷歌快速搜索帮助我找到了我的<a class="ae le" href="https://pbpython.com/pandas-excel-tabs.html" rel="noopener ugc nofollow" target="_blank">指南</a>。问题解决了！这很简单。我跑去参加聚会。</p><h1 id="bf53" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">接受数据并不完美</h1><p id="1c10" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">当我第二天回去工作时，我有一个简单的议程——对我的数据进行一些汇总统计，并让我的协调员介绍我的一些发现，这(很可能)会给团队留下深刻印象。我首先统计了获救最多的物种。这是收容所过去5年中获救最多的5个物种。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/e7ce2c28cdfd79cd2ef0b7a50e10a274.png" data-original-src="https://miro.medium.com/v2/resize:fit:1346/format:webp/1*IXqvFiHlAwuwptyTIIg88w.png"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ns"><img src="../Images/a443aba4e2662f5c0510873d38e9f238.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WR1pAgBYkwTCNGGZ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated"><a class="ae le" href="https://emoji.gg/assets/emoji/9109_Sad_Cat_Thumbs_Up.png" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><p id="3a8c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我问我妈家里有没有绳子。她没有。我在这里，写这篇文章。</p><p id="4d31" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">哭了几天后，我回去工作了。我打开excel文件(数据的原始来源)看了一下数据。这种人工检查可以帮助理解数据中一些最紧迫的问题，这是非常神奇的。通过检查，我发现数据中存在以下问题</p><ul class=""><li id="5057" class="my mz iq lh b li lj ll lm lo na ls nb lw nc ma nd ne nf ng bi translated">缺少值</li><li id="f783" class="my mz iq lh b li nh ll ni lo nj ls nk lw nl ma nd ne nf ng bi translated">拼写错误</li><li id="dd34" class="my mz iq lh b li nh ll ni lo nj ls nk lw nl ma nd ne nf ng bi translated">案例错误</li><li id="8e1e" class="my mz iq lh b li nh ll ni lo nj ls nk lw nl ma nd ne nf ng bi translated">学名混淆</li><li id="6348" class="my mz iq lh b li nh ll ni lo nj ls nk lw nl ma nd ne nf ng bi translated">不规则的日期格式</li></ul><p id="9c87" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在，这些之所以是“问题”而不仅仅是被忽略的现象，是因为对有问题的数据进行的<a class="ae le" href="https://www.thedailymba.com/2019/07/26/how-poor-data-quality-negatively-impact-your-business/" rel="noopener ugc nofollow" target="_blank"> <em class="nm">分析比根本没有进行的分析</em> </a>更糟糕。在动物收容所的背景下，如果我向团队提供从不一致的数据中获得的数字，从战略和决策的角度来看可能会有一些非常严重的问题。</p><p id="58b0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我现在有了清理数据的任务。快速迂回，我认识到几乎每篇“数据科学初学者”文章都谈到数据清理仅限于人们喜欢的流程图绘制的第一步。我认为不止如此。数据清理可能会融入整个过程。<a class="ae le" href="https://counting.substack.com/p/data-cleaning-is-analysis-not-grunt" rel="noopener ugc nofollow" target="_blank">数据清理不必局限于处理缺失值或数据问题</a>。它更多的是将我们拥有的数据表示成更适合手头任务的形式。</p><p id="643b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">回来，我是如何清理数据的呢？</p><h1 id="5f47" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">让数据“更好”</h1><p id="fa66" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">没有<a class="ae le" href="http://veekaybee.github.io/2021/03/26/data-ghosts/" rel="noopener ugc nofollow" target="_blank">通用的方法来清理数据</a>。但是，不同的数据清理过程有一些共同的步骤。这些步骤可以很容易地在互联网上找到。在我掌握的数据中，属于这一类别的清洁作业包括</p><ol class=""><li id="e8d6" class="my mz iq lh b li lj ll lm lo na ls nb lw nc ma nt ne nf ng bi translated"><strong class="lh ja">处理缺失值— </strong>在几种可用的<a class="ae le" href="https://en.wikipedia.org/wiki/Missing_data#Techniques_of_dealing_with_missing_data" rel="noopener ugc nofollow" target="_blank">不同策略</a>中，省略通常被认为是一种糟糕的策略，因为它会导致数据丢失。在我的情况下，省略一些记录是必要的，因为其中一些缺乏重要的细节，如救援日期。但是，这个比例很小。</li><li id="2892" class="my mz iq lh b li nh ll ni lo nj ls nk lw nl ma nt ne nf ng bi translated"><strong class="lh ja">统一的日期格式——</strong>救援日期在一些表格中被编码为<code class="fe nn no np nq b">string</code>，而在另一些表格中被编码为<code class="fe nn no np nq b">date</code>。熊猫中的<a class="ae le" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html" rel="noopener ugc nofollow" target="_blank">日期处理的快速梳理有助于纠正这些问题。</a></li></ol><h1 id="dca0" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">处理名称中的不一致</h1><p id="26a2" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">但是，这些只是冰山一角。真正的问题是命名和拼写错误。当面临这样的挑战时，我认为我们倾向于遵循两种主要方式:</p><ul class=""><li id="a779" class="my mz iq lh b li lj ll lm lo na ls nb lw nc ma nd ne nf ng bi translated">方法1或<strong class="lh ja">手动</strong>方式——想法是手动纠正问题</li><li id="9f0b" class="my mz iq lh b li nh ll ni lo nj ls nk lw nl ma nd ne nf ng bi translated">方法2或<strong class="lh ja">自动化</strong>方式——编写一些代码来诊断数据问题并清理它</li></ul><p id="8787" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在庇护所数据的上下文中，使用手册意味着<em class="nm">找到并替换</em>所有拼写错误的名字。很有趣，不是吗？自动化方法要求我编写一个超级智能程序来完成所有这些工作。好吧，我显然是力不从心了:)</p><p id="65d1" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">手动方式将确保更好地控制清洁，而自动方式将要求我以控制换取速度。</p><p id="d407" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">那么，我到底做了什么？好吧，我选择了大多数人在两个极端选项之间困惑时选择的道路——我<em class="nm">创造了一个两全其美的第三个选项</em>！我称之为<strong class="lh ja">混合</strong>变种，决定写一个脚本，在我的干预下，以半自动的方式清理数据。</p><p id="01bb" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">首先，这些名字是通过一个初步的清理管道传送进来的。图1对此进行了描述。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nu"><img src="../Images/03edc854e01af0c463ddaebeba52c3ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tk4Zj2R1vcSFAitpbJF8Cg.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图一。初步命名清洗管道(鸣谢:作者)</p></figure><p id="e81e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">混合方法的想法很简单→ <em class="nm">使用</em> <a class="ae le" rel="noopener" target="_blank" href="/overview-of-text-similarity-metrics-3397c4601f50"> <em class="nm">相似性分数</em> </a> <em class="nm">对密切相关的动物/物种名称进行聚类。将群集显示为输出，检查它并删除不属于该群集的条目。重复这个过程，直到达到某个停止标准。</em></p><p id="bcbc" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这种混合方法如图2所示。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nu"><img src="../Images/400fd4bf5b484f5c6e5e6dbbaf8892a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ogUyWhQpgMoro1V4Jb5fcg.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图二。清理不一致的名称(鸣谢:作者)</p></figure><p id="699d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为了找出一种动物的正确拼写，我在谷歌上搜索了拼写。事后看来，我本可以将这部分自动化，并进一步减少手动操作。</p><blockquote class="nv nw nx"><p id="e13b" class="lf lg nm lh b li lj ka lk ll lm kd ln ny lp lq lr nz lt lu lv oa lx ly lz ma ij bi translated">在得到过去5年的数据之前，我首先得到了收容所去年运营的数据。我使用<strong class="lh ja">手动</strong>方法清理了这些初始数据。我花了大约10个小时(中间有休息时间，这样我才不会发疯)来做这个清洁工作。构建这个有用的脚本帮助我清除了命名中的不一致，减少了很多麻烦，整个过程只花了大约2个小时！</p></blockquote><p id="6efe" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">呜哇！我终于“净化”了我的数据。但是，责任仅限于清理数据吗？</p><h1 id="f4ee" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">为未来做准备</h1><blockquote class="ob"><p id="f07a" class="oc od iq bd oe of og oh oi oj ok ma dk translated"><em class="ol">“清理一次数据，你是个好人。确保它永远不会变得混乱，你是一个英雄。”</em></p></blockquote><p id="6b78" class="pw-post-body-paragraph lf lg iq lh b li om ka lk ll on kd ln lo oo lq lr ls op lu lv lw oq ly lz ma ij bi translated">庇护所显然受益于我在数据清理操作后提供给他们的分析。然而，重要的是向庇护所传达其现有数据清理做法存在的问题。这样做将有助于利益相关者展望未来，并为在数据驱动的决策浪潮中冲浪做好准备！</p><p id="644a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">当我决定与团队交流这些数据问题时，我从与父亲的一些富有洞察力的谈话中得到了3条建议</p><ul class=""><li id="9d51" class="my mz iq lh b li lj ll lm lo na ls nb lw nc ma nd ne nf ng bi translated">说实话</li><li id="1b6f" class="my mz iq lh b li nh ll ni lo nj ls nk lw nl ma nd ne nf ng bi translated">不要表现得“无所不知”，因为你不知道数据收集有多困难</li><li id="7d8d" class="my mz iq lh b li nh ll ni lo nj ls nk lw nl ma nd ne nf ng bi translated">成为解决方案的一部分，不要只是描述问题然后离开</li></ul><p id="cdfa" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">最后，在庇护所协调员的帮助下，我提交了一份单独的报告，内容是庇护所如何更有效地利用其数据做出决策，并详细介绍了如何解决他们的一些数据收集和质量挑战。</p><p id="3b50" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">平心而论，如果不是庇护所的团队非常乐于助人且以结果为导向，这一切都不可能实现。</p><p id="4454" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果你对“动物收容所分析”感兴趣，我相信你会喜欢我之前关于这个想法的文章。</p><p id="8d7c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><a class="ae le" rel="noopener" target="_blank" href="/saving-animal-lives-with-data-d815c6e854eb">用数据拯救动物生命。《动物收容所简介》… |作者:Ramshankar Yadhunath | 2021年3月|走向数据科学</a></p></div><div class="ab cl or os hu ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="ij ik il im in"><p id="ab5b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这篇文章最初发表在我的个人博客上。</p><p id="fb64" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果你对这篇文章的内容有任何疑问，请随时联系我。你可以在<a class="ae le" href="https://www.linkedin.com/in/ramshankar-yadhunath/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>和<a class="ae le" href="https://twitter.com/thedatacrack" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上找到我。</p></div></div>    
</body>
</html>