<html>
<head>
<title>loc vs iloc in Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫中的loc与iloc</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/loc-vs-iloc-in-pandas-92fc125ed8eb?source=collection_archive---------12-----------------------#2021-06-04">https://towardsdatascience.com/loc-vs-iloc-in-pandas-92fc125ed8eb?source=collection_archive---------12-----------------------#2021-06-04</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="c2e9" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">Python和熊猫中的loc[]和iloc[]有什么区别</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/e816f12c5b63be6afc0032ef9ae5b8d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nC6lvdtsTwal3wmq-anTbQ.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@neryfabiola_?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Nery Montenegro </a>在<a class="ae kz" href="https://unsplash.com/s/photos/slice?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="834f" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">介绍</h2><p id="614f" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">索引和切片熊猫数据帧和Python有时可能很棘手。切片时最常用的两个属性是<code class="fe mp mq mr ms b">iloc</code>和<code class="fe mp mq mr ms b">loc</code>。</p><p id="bc99" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">在今天的文章中，我们将讨论这两种属性之间的区别。我们还将通过几个例子来确保您理解何时使用一个而不是另一个。</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><p id="0e7b" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">首先，让我们创建一个熊猫数据框架，作为一个例子来演示一些概念。</p><pre class="kk kl km kn gu nf ms ng nh aw ni bi"><span id="973e" class="la lb iu ms b gz nj nk l nl nm">import pandas as pd</span><span id="1262" class="la lb iu ms b gz nn nk l nl nm">df = pd.DataFrame(<br/> index=[4, 6, 2, 1], <br/> columns=['a', 'b', 'c'], <br/> data=[[1, 2, 3], [4, 5, 6], [7, 8, 9], [10, 11, 12]],<br/>)</span><span id="311a" class="la lb iu ms b gz nn nk l nl nm">print(df)</span><span id="9316" class="la lb iu ms b gz nn nk l nl nm">#     a   b   c<br/># 4   1   2   3<br/># 6   4   5   6<br/># 2   7   8   9<br/># 1  10  11  12</span></pre></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h2 id="ab53" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">使用loc[]切片</h2><p id="c6bc" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated"><code class="fe mp mq mr ms b">loc[]</code>属性用于对熊猫数据帧或系列进行切片，并通过标签访问行和列<strong class="ly iv">。这意味着输入标签将对应于应该返回的行的索引。</strong></p><p id="8b96" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">因此，如果我们将一个整数传递给<code class="fe mp mq mr ms b">loc[]</code>，它<strong class="ly iv">将被解释为索引的标签，而不是位置索引</strong>。在下面的例子中，<code class="fe mp mq mr ms b">loc</code>将返回索引标签等于<code class="fe mp mq mr ms b">1</code>的行。</p><pre class="kk kl km kn gu nf ms ng nh aw ni bi"><span id="f9be" class="la lb iu ms b gz nj nk l nl nm">&gt;&gt;&gt; df.loc[1]<br/>a    10<br/>b    11<br/>c    12<br/>Name: 1, dtype: int64</span></pre><p id="b385" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated"><code class="fe mp mq mr ms b">loc</code>也接受标签数组:</p><pre class="kk kl km kn gu nf ms ng nh aw ni bi"><span id="c6ff" class="la lb iu ms b gz nj nk l nl nm">&gt;&gt;&gt; df.loc[[6, 2]]<br/>   a  b  c<br/>6  4  5  6<br/>2  7  8  9</span></pre><p id="4da7" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">类似地，我们也可以使用slice对象来检索特定范围的标签。在下面的例子中，注意切片是如何计算的；<code class="fe mp mq mr ms b">4:2</code>不对应于索引，而是对应于标签。换句话说，它告诉pandas返回索引<code class="fe mp mq mr ms b">4</code>和<code class="fe mp mq mr ms b">2</code>之间的所有行。</p><pre class="kk kl km kn gu nf ms ng nh aw ni bi"><span id="aee4" class="la lb iu ms b gz nj nk l nl nm">&gt;&gt;&gt; df.loc[4:2]<br/>   a  b  c<br/>4  1  2  3<br/>6  4  5  6<br/>2  7  8  9</span></pre></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h2 id="1fe1" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">使用iloc[]切片</h2><p id="f70b" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">另一方面，<code class="fe mp mq mr ms b">iloc</code>属性提供了<strong class="ly iv">基于整数位置的索引</strong>，其中位置用于检索所请求的行。</p><p id="8cfe" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">因此，每当我们将一个整数传递给<code class="fe mp mq mr ms b">iloc</code>时，您应该期望检索具有相应的<strong class="ly iv">位置索引的行。</strong>在下面的例子中，<code class="fe mp mq mr ms b">iloc[1]</code>将返回位置<code class="fe mp mq mr ms b">1</code>的行(即第二行):</p><pre class="kk kl km kn gu nf ms ng nh aw ni bi"><span id="607f" class="la lb iu ms b gz nj nk l nl nm">&gt;&gt;&gt; df.iloc[1]<br/>a    4<br/>b    5<br/>c    6<br/>Name: 6, dtype: int64</span><span id="efef" class="la lb iu ms b gz nn nk l nl nm"># Recall the difference between loc[1]<br/>&gt;&gt;&gt; df.loc[1]<br/>a    10<br/>b    11<br/>c    12<br/>Name: 1, dtype: int64</span></pre><p id="1a8e" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">同样，您甚至可以传递一个位置索引数组来检索原始数据帧的子集。举个例子，</p><pre class="kk kl km kn gu nf ms ng nh aw ni bi"><span id="ac96" class="la lb iu ms b gz nj nk l nl nm">&gt;&gt;&gt; df.iloc[[0, 2]]<br/>   a  b  c<br/>4  1  2  3<br/>2  7  8  9</span></pre><p id="688c" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">或者甚至是整数的切片对象:</p><pre class="kk kl km kn gu nf ms ng nh aw ni bi"><span id="4d32" class="la lb iu ms b gz nj nk l nl nm">&gt;&gt;&gt; df.iloc[1:3]<br/>   a  b  c<br/>6  4  5  6<br/>2  7  8  9</span></pre><p id="1e3b" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated"><code class="fe mp mq mr ms b">iloc</code>也可以接受一个可调用函数，该函数接受一个类型为<code class="fe mp mq mr ms b">pd.Series</code>或<code class="fe mp mq mr ms b">pd.DataFrame</code>的参数，并返回一个对索引有效的输出。</p><p id="45f7" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">例如，为了只检索奇数索引的行，一个简单的lambda函数就可以做到:</p><pre class="kk kl km kn gu nf ms ng nh aw ni bi"><span id="1bf0" class="la lb iu ms b gz nj nk l nl nm">&gt;&gt;&gt; df.iloc[lambda x: x.index % 2 != 0]<br/>    a   b   c<br/>1  10  11  12</span></pre><p id="823b" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">最后，您还可以使用<code class="fe mp mq mr ms b">iloc</code>来索引两个轴。例如，为了获取前两条记录并丢弃最后一列，您应该调用</p><pre class="kk kl km kn gu nf ms ng nh aw ni bi"><span id="a7de" class="la lb iu ms b gz nj nk l nl nm">&gt;&gt;&gt; df.iloc[:2, :2]<br/>   a  b<br/>4  1  2<br/>6  4  5</span></pre></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h2 id="d515" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">最后的想法</h2><p id="aea9" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在本文中，我们讨论了如何使用两个最常见的属性，即<code class="fe mp mq mr ms b">loc</code>和<code class="fe mp mq mr ms b">iloc</code>，正确地索引切片熊猫数据帧(或序列)。</p><p id="ca9b" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">理解这两个属性之间的差异，并能够有效地使用它们，以便为您的特定用例创建所需的输出，这一点非常重要。<code class="fe mp mq mr ms b">loc</code>用于使用<strong class="ly iv">标签索引熊猫数据帧或系列。</strong>另一方面，<code class="fe mp mq mr ms b">iloc</code>可用于根据记录的<strong class="ly iv">位置索引</strong>检索记录。</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h2 id="8bc0" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">你可能也喜欢</h2><div class="no np gq gs nq nr"><a rel="noopener follow" target="_blank" href="/dynamic-typing-in-python-307f7c22b24e"><div class="ns ab fp"><div class="nt ab nu cl cj nv"><h2 class="bd iv gz z fq nw fs ft nx fv fx it bi translated">Python中的动态类型</h2><div class="ny l"><h3 class="bd b gz z fq nw fs ft nx fv fx dk translated">探索Python中对象引用的工作方式</h3></div><div class="nz l"><p class="bd b dl z fq nw fs ft nx fv fx dk translated">towardsdatascience.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of kt nr"/></div></div></a></div><div class="no np gq gs nq nr"><a href="https://medium.com/geekculture/how-to-refine-your-google-search-and-get-better-results-c774cde9901c" rel="noopener follow" target="_blank"><div class="ns ab fp"><div class="nt ab nu cl cj nv"><h2 class="bd iv gz z fq nw fs ft nx fv fx it bi translated">如何优化你的谷歌搜索并获得更好的结果</h2><div class="ny l"><h3 class="bd b gz z fq nw fs ft nx fv fx dk translated">更智能的谷歌搜索的12个技巧</h3></div><div class="nz l"><p class="bd b dl z fq nw fs ft nx fv fx dk translated">medium.com</p></div></div><div class="oa l"><div class="og l oc od oe oa of kt nr"/></div></div></a></div><div class="no np gq gs nq nr"><a rel="noopener follow" target="_blank" href="/easter-eggs-in-python-f32b284ef0c5"><div class="ns ab fp"><div class="nt ab nu cl cj nv"><h2 class="bd iv gz z fq nw fs ft nx fv fx it bi translated">蟒蛇皮复活节彩蛋</h2><div class="ny l"><h3 class="bd b gz z fq nw fs ft nx fv fx dk translated">探索八个用Python包装的复活节彩蛋</h3></div><div class="nz l"><p class="bd b dl z fq nw fs ft nx fv fx dk translated">towardsdatascience.com</p></div></div><div class="oa l"><div class="oh l oc od oe oa of kt nr"/></div></div></a></div></div></div>    
</body>
</html>