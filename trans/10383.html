<html>
<head>
<title>Does neighbourhood trapping work?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">邻居陷阱有效吗？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/does-neighbourhood-trapping-work-18c8d8deb92c?source=collection_archive---------19-----------------------#2021-10-03">https://towardsdatascience.com/does-neighbourhood-trapping-work-18c8d8deb92c?source=collection_archive---------19-----------------------#2021-10-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6367" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你怎么知道？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/cdad6d123a7e9cf0bd9655129fa1d01f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Y4m98xZuMwV0K6vdxvs_A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">澳大利亚瓶刷中的新西兰tui。作者照片。</p></figure><p id="1277" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">许多新西兰人每周至少一次，甚至更频繁地在他们的社区诱捕线工作。这包括参观一系列为啮齿动物、刺猬、鼬鼠或负鼠设置的陷阱，看看是否有新的猎物。他们这样做是作为一种社区服务，帮助新西兰摆脱外来的破坏本地动植物的哺乳动物掠食者。他们的努力现在包括在一项由政府资助的名为<a class="ae lr" href="https://blog.doc.govt.nz/2017/07/25/predator-free-2050-one-year-on/" rel="noopener ugc nofollow" target="_blank">Predator Free New Zealand 2050</a>的特别倡议中(参见“<a class="ae lr" rel="noopener" target="_blank" href="/improving-the-world-for-birds-3ab0ecbdbe21">改善鸟类的世界</a>”及其参考文献)。</p><p id="34d9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一个重要的问题是这些邻里诱捕努力的效果如何？尽管许多社区组织向数据库如<a class="ae lr" href="https://trap.nz/find-projects" rel="noopener ugc nofollow" target="_blank">陷阱提供公民科学数据。NZ </a>和<a class="ae lr" href="https://www.stat.auckland.ac.nz/~fewster/CatchIT/" rel="noopener ugc nofollow" target="_blank"> CatchIT </a>，似乎对公民科学数据集的科学分析相对较少。在这篇文章中，我研究了新西兰奥克兰西部Waitakere Ranges区域公园所包围的Huia社区诱捕组的数据。威塔克里有许多诱捕的努力(见<a class="ae lr" href="https://www.pfwra.org.nz" rel="noopener ugc nofollow" target="_blank">无捕食者威塔克里牧场联盟</a>)。我们的社区努力，Huia诱捕组开始于四年前，在撰写本文时提供了超过1100个捕食者的数据。</p><h2 id="8348" class="ls lt iq bd lu lv lw dn lx ly lz dp ma le mb mc md li me mf mg lm mh mi mj mk bi translated">邻域诱捕努力</h2><p id="c9c4" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">在这篇文章中，我首先从陷阱部署的数量和陷阱设置的类型方面研究了我们的邻居陷阱是如何演变的。在过去的四年里，Huia的邻居诱捕工作大大增加了(图1)。努力从2018年任何给定季度部署的2到5个陷阱增加到2021年部署的30多个陷阱。随着时间的推移，陷阱的多样性也在增加。我们最常用的捕鼠器是传统的DOC200和自动A24捕鼠器，目标是老鼠和刺猬。今年我们增加了捕鼠夹和捕鼠夹。我们还有针对负鼠的Timms、Warrior和Trapinator陷阱。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/a2db5ec415093ca2a4a6a5ea0dc6a222.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*p6MZEAE5Ox8_Or-vfgF97Q.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图1:过去四年在怀塔克里山脉的Huia的诱捕努力。图例中显示了所用的陷阱类型。A24、DOC200 D-Rat、Victor和Rat捕鼠器捕捉大白鼠和小白鼠，捕鼠器和nooski捕鼠器捕捉小白鼠，而Timms、Warrior和Trapinator捕鼠器则捕杀刷尾负鼠。在标记日期结束的3个月期间内，对部署的至少捕获一次的陷阱进行计数。在一个季度内没有捕获任何东西的陷阱不包括在内，这是陷阱的一个限制。新西兰公民科学记录。(作者配图)</p></figure><h2 id="fbcc" class="ls lt iq bd lu lv lw dn lx ly lz dp ma le mb mc md li me mf mg lm mh mi mj mk bi translated">邻域陷印的有效性</h2><p id="f889" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">随着努力的增加，将部署的陷阱数量纳入任何捕获率分析中是很重要的。我们还需要根据陷阱类型、目标动物和陷阱位置对数据进行分层。这是因为陷阱类型、动物行为和不同邻居的栖息地之间的差异可能会使分析结果产生偏差。我们缺乏关于有多少次陷阱没有捕捉到猎物，有多少次陷阱被检查后发现是空的，或者有多少次捕食者接近但没有与陷阱接触的数据。</p><p id="1553" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这些限制使得不可能从公民科学数据中计算陷阱效率或遭遇概率。虽然其他对照研究解决了这些问题，但一些公民科学陷阱数据的优势在于它们跨越了更长的时间段。</p><p id="51aa" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我按陷阱类型检查了渔获量的时间趋势，以确定渔获量是否随时间而变化。在这个分析中，我假设捕获率的变化反映了目标动物当地密度的变化。如果捕获率最初很高，然后急剧下降，我们可以推断诱捕正在减少附近捕食者的数量。</p><p id="f256" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">通过计算捕获率，我们可以确定我们的邻居诱捕努力是否有效果。两种最常见的捕鼠器(DOC200s和A24s)的捕鼠率在捕鼠活动的第一年达到峰值(图2)。2018年后，捕获率下降，并围绕更低的值波动(图2)。这表明诱捕在第一年降低了大鼠和小鼠的数量(图2)，随后随着我们诱捕努力的增加，数量仍然受到抑制(图1)。我们还可以看到，A24捕鼠器对大鼠的初始捕获率几乎比小鼠高一个数量级(图2A &amp; C)。大鼠的DOC200捕获率最初约为小鼠的四倍(图2B和D)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/8bab5a7005749fad5143e810ed28c6b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*ZAz0ad8PPzjhdcWw1gCFIw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图2:近四年来怀塔克里山脉Huia的大鼠、小鼠和刷尾负鼠的捕获率，说明在更积极的诱捕的第一年，大鼠和小鼠被击倒。A24是Goodnature A24自动捕集阱，DOC200是传统的盒装snap捕集阱。提姆是装在地上的，战士是装在树上的负鼠陷阱。(作者配图)</p></figure><p id="06a0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于负鼠，我们没有观察到同样的击倒效果(图2E和F)。负鼠的捕获率低于大白鼠或小白鼠，而且在使用捕鼠器的第一年也没有出现高峰。这可能与负鼠的地盘性有关。雄性比雌性活动范围更广，负鼠可能需要长达8周或更长时间才能重新占据先前居住者被困的栖息地。</p><h2 id="501f" class="ls lt iq bd lu lv lw dn lx ly lz dp ma le mb mc md li me mf mg lm mh mi mj mk bi translated">比较传统陷阱和自动陷阱的捕获率</h2><p id="f375" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">新技术有可能减少检查陷阱和更换诱饵的劳动。我们最常用的两种捕集阱是传统的<a class="ae lr" href="https://www.doc.govt.nz/documents/conservation/threats-and-impacts/animal-pests/doc200-predator-trap.pdf" rel="noopener ugc nofollow" target="_blank"> DOC200 </a>盒式捕捉阱和<a class="ae lr" href="https://youtu.be/zlTHmSVW94I" rel="noopener ugc nofollow" target="_blank"> Goodnature A24 </a>自动捕集阱。在一个一周检查几次陷阱的社区环境中，自动陷阱的捕获率是否高于DOC200等传统陷阱？或者，有证据表明自动陷阱不如传统陷阱有效吗？</p><p id="f207" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我使用简单的探索性数据分析比较了DOC200和A24陷阱的捕获率。图3显示了散点图、箱线图和每种诱捕器的捕获率分布图，将大鼠和小鼠的捕获情况分开。数据来自单个相邻属性，以减少空间可变性。当没有发现尸体时，拾到的渔获记录了自动A24陷阱的攻击。这通常意味着在检查捕鼠器之前，捕获物被猫或老鼠移走了。</p><p id="530a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">两种陷阱类型的捕获率非常相似(图3)。这两种陷阱类型的数据是高度倾斜的，因为在某些月份捕获率要高得多。这在老鼠身上比在老鼠身上更明显。两种陷阱类型的中值(方框图中的水平线)非常接近，DOC200和A24陷阱的四分位数范围(方框)重叠。我们没有发现自动A24捕集阱比传统DOC200捕集阱更有效或更无效的证据。这些发现表明，自动陷阱的好处可能主要来自这样一个事实，即它们不需要经常检查，减少了所涉及的劳动。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ms"><img src="../Images/15bc9894022c6acdca268cec6eb3c5c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SaDSYhbN8u9JVEkFsqxzig.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图3:两种不同类型的捕鼠器(A24为Goodnature A24自动捕鼠器，DOC200为传统的盒装snap捕鼠器)对大鼠和小鼠的捕获率的比较。(作者配图)</p></figure><p id="feb6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">人们可能不愿意采用新技术，并怀疑新方法行不通。A24捕集阱的价格也是DOC200s的三倍左右。不经常检查陷阱的代价是，猎物更有可能被另一个捕食者吃掉，比如家猫或野猫、白鼬或另一只老鼠。节省劳动力的好处在一定程度上被降低的信心所抵消，因为人们对捕获是真实的，而不仅仅是不准确的捕杀计数器的人工制品。诱捕器的成本也是一个考虑因素，特别是对于邻里诱捕来说，劳动是自愿的，因此不需要成本，而昂贵的诱捕器的成本由邻居承担。</p><h2 id="47dc" class="ls lt iq bd lu lv lw dn lx ly lz dp ma le mb mc md li me mf mg lm mh mi mj mk bi translated">结论</h2><p id="a08b" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">我们可以回答“邻居陷阱有效吗？”，至少在我们的Huia附近。第二个问题的答案；“我们怎么会知道？”对像<a class="ae lr" href="https://trap.nz" rel="noopener ugc nofollow" target="_blank"> Trap这样的数据库中的公民科学数据的分析。NZ </a>或<a class="ae lr" href="https://www.stat.auckland.ac.nz/~fewster/CatchIT/#tryitout" rel="noopener ugc nofollow" target="_blank"> CatchIT </a>可以提供证据。</p><p id="151d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从这种对单个诱捕组的有限分析中，证据表明我们的邻居诱捕对大鼠和小鼠的捕获率有影响，并由此推断对大鼠和小鼠的局部密度有影响。如果没有将数据输入数据库的捕捉器所提供的数据，这将很难检测到。另一种监测方法是使用鸟鸣监测器(见我的<a class="ae lr" rel="noopener" target="_blank" href="/dawn-chorus-morepork-owls-and-predator-control-107e5ca38fd"> TDS文章</a>)，但这也需要公民科学家的努力。</p><p id="1ccf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">邻里诱捕的另一个好处是社区为了一个共同的合作目标而参与进来。我们维护一个邮件列表，用于更新和信息传播给所有诱捕组成员。我们还有一个面向最活跃成员的WhatsApp群组，人们可以在这里提问并分享他们的经验。这是获得帮助的好方法，也有助于保持动力。你还可以了解你的邻居，加强合作。</p><h2 id="3653" class="ls lt iq bd lu lv lw dn lx ly lz dp ma le mb mc md li me mf mg lm mh mi mj mk bi translated">密码</h2><p id="98bf" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">数据从<a class="ae lr" href="https://trap.nz/node/1106292" rel="noopener ugc nofollow" target="_blank">陷阱中导出。作为ascii文件的Huia补漏白组</a>的NZ站点。使用<a class="ae lr" href="https://trap.nz/node/1106292" rel="noopener ugc nofollow" target="_blank"> R tidyverse </a>包，数据文件被导入，字符日期被转换为类日期，变量被排序、选择和重命名，随后的数据帧被转换为时间表。</p><pre class="kg kh ki kj gt mt mu mv mw aw mx bi"><span id="b5cd" class="ls lt iq mu b gy my mz l na nb">## import_trapnz_function.R<br/># Usage:  <br/># source the function<br/># trapnz &lt;- import.trapnz()</span><span id="a986" class="ls lt iq mu b gy nc mz l na nb"># Note: Data were exported from Trap.NZ using menus: Reports/ Trap reports/ Trap records for the full date range</span><span id="ae15" class="ls lt iq mu b gy nc mz l na nb">import.trapnz &lt;-<br/>  function(data.dir = "/mnt/data/dynamic_data/projects/projects2021/trapping/data/",<br/>           exported.file = "TrapNZ_export_29_Sept_2021.csv")<br/>  {<br/>   # load libraries<br/>    library(tidyverse)<br/>    library(tibbletime)<br/>    library(lubridate)<br/>    library(readr)<br/>    library(tidyr)<br/>    # load exported trap.nz data<br/>    dat &lt;- paste(data.dir, exported.file, sep = "")<br/>    trapnz &lt;- read_csv(dat)<br/>    # convert character date to a date object<br/>    trapnz &lt;- mutate (trapnz,<br/>                       Date.new = as.Date(Date, format = "%d %b %Y - %H:%M"))<br/>    # order, select and rename variables<br/>    trapnz &lt;- arrange(trapnz, Date.new, "Recorded by", Trap)<br/>    trapnz &lt;- trapnz %&gt;%<br/>      select(Date.new, "Recorded by", Trap, "Trap type", Strikes, "Species caught")<br/>    colnames(trapnz) &lt;-<br/>      list("date.new", "line", "trap", "traptype", "strikes", "species")<br/>    # convert tibble to tibble time<br/>    trapnz &lt;- as_tbl_time(trapnz, index = date.new)<br/>    # print some summary info<br/>    print("########################")<br/>    print(paste("Directory: ", data.dir))<br/>    print(paste("Exported Trap.NZ file: ", exported.file))<br/>    # print(head(trapnz))<br/>    # print(tail(trapnz))<br/>    trapnz<br/>  }</span></pre><p id="b8a1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我用下面的代码准备了数据(prepare _ TrapNZ _ catch _ and _ traptype _ data。r)。加载库之后，使用上面的函数(import_trapnz_function)加载数据。r)，在使用source()将其加载到环境中之后。根据<a class="ae lr" href="https://tidyr.tidyverse.org" rel="noopener ugc nofollow" target="_blank">整理数据</a>的原则，从物种特征变量中创建新变量。自动捕鼠器的多次捕获，通常是在一个晚上杀死两只老鼠，是通过将捕获单位类别乘以攻击次数来计算的。在连续的季度(3个月)期间，我按物种对捕获量求和，并计算每种类型的独特陷阱的数量。</p><pre class="kg kh ki kj gt mt mu mv mw aw mx bi"><span id="713b" class="ls lt iq mu b gy my mz l na nb">## prepare_TrapNZ_catch_and_traptype_data.R</span><span id="72cd" class="ls lt iq mu b gy nc mz l na nb"># load libraries #################<br/>library(tidyverse)<br/>library(tibbletime)<br/>library(lubridate)<br/>library(readr)<br/>library(tidyr)</span><span id="3e8d" class="ls lt iq mu b gy nc mz l na nb"># load data ###########<br/>### load, sort, subset trap.nz data<br/>source(<br/>  "/mnt/data/dynamic_data/projects/projects2021/trapping/r/import_trapnz_function.R"<br/>)<br/>trapnz &lt;- import.trapnz()</span><span id="7880" class="ls lt iq mu b gy nc mz l na nb"># create new variables for catches by species ################<br/>series2 &lt;- trapnz<br/>series2 &lt;- mutate (<br/>  series2,<br/>  # Date.new = as.Date(Date, format = "%d %b %Y - %H:%M"),<br/>  rat_catch = ifelse (series2$species %in% c ("Rat", "Rat - Ship", "Rat - Norway"), 1, NA),<br/>  mouse_catch = ifelse (series2$species == "Mouse", 1, 0),<br/>  possum_catch = ifelse (series2$species == "Possum", 1, 0),<br/>  hedgehog_catch = ifelse (series2$species == "Hedgehog", 1, 0),<br/>  stoat_catch = ifelse (series2$species == "Stoat", 1, 0),<br/>  scavenged_catch = ifelse (series2$species == "Unspecified", 1, 0)<br/>)<br/># adjust for multiple catches by A24 traps<br/>series2$rat_catch &lt;- series2$rat_catch * series2$strikes<br/>series2$mouse_catch &lt;-  series2$mouse_catch * series2$strikes</span><span id="fa82" class="ls lt iq mu b gy nc mz l na nb"># quarterly summation of catches by species and number of unique traps<br/>series2 &lt;- arrange(series2, date.new, line, traptype, trap)</span><span id="2986" class="ls lt iq mu b gy nc mz l na nb"># group catch data into time bins ########################<br/>quarterly_catches &lt;- collapse_by(series2, "quarter") %&gt;%<br/>  dplyr::group_by(date.new, traptype) %&gt;%<br/>  dplyr::summarise_if(is.numeric, sum, na.rm = TRUE)<br/>quarterly_catches &lt;- arrange(quarterly_catches, date.new, traptype)</span><span id="11c0" class="ls lt iq mu b gy nc mz l na nb"># group numbers of individual traps into time bins<br/>quarterly_traptype &lt;- collapse_by(series2, "quarter") %&gt;%<br/>  dplyr::group_by(date.new, traptype) %&gt;%<br/>  dplyr::summarise(trap_count = length(unique(trap)))<br/>quarterly_traptype &lt;- arrange(quarterly_traptype, date.new)</span><span id="ae6b" class="ls lt iq mu b gy nc mz l na nb"># save the data  ####################<br/>Huia_results = list(quarterly_catches,  quarterly_traptype)<br/>save(Huia_results, file = "/mnt/data/dynamic_data/projects/projects2021/trapping/data/tidy_catch_traptype_TrapNZ.dat")</span></pre><p id="3da3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用下面的代码(trapping _ effort _ over _ time _ stacked _ bar plot)将这些数据用于创建图1。r)。加载库之后，我使用了几个主题选项来改善情节。上面的代码保存的数据(prepare _ TrapNZ _ catch _ and _ traptype _ data。r)已加载。然后，我使用ggplot绘制了一个堆积条形图，为分类数据手动指定了调色板，调整显示以显示倾斜的x轴标签，并显示每个堆积条形图段中陷阱数量的计数。</p><pre class="kg kh ki kj gt mt mu mv mw aw mx bi"><span id="cfd3" class="ls lt iq mu b gy my mz l na nb">### trapping_effort_over_time_stacked_barplot.R</span><span id="0e85" class="ls lt iq mu b gy nc mz l na nb"># libraries #######<br/>library(tidyverse)<br/>library(tibbletime)<br/>library(lubridate)<br/>library(gridExtra)<br/>library(ggpubr)<br/>library(RColorBrewer)<br/>library(colorspace)<br/># custom theme settings ##########<br/>theme_smcc &lt;- function() {<br/>  # theme_bw() +<br/>  theme(<br/>    text = element_text(family = "Helvetica Light"),<br/>    axis.text = element_text(size = 14),<br/>    axis.title = element_text(size = 14),<br/>    axis.line.x = element_line(color = "black"),<br/>    axis.line.y = element_line(color = "black"),<br/>    panel.border = element_blank(),<br/>    panel.grid.major.x = element_blank(),<br/>    panel.grid.minor.x = element_blank(),<br/>    panel.grid.minor.y = element_line(colour = "grey80"),<br/>    plot.margin = unit(c(1, 1, 1, 1), units = , "cm"),<br/>    plot.title = element_text(<br/>      size = 18,<br/>      vjust = 1,<br/>      hjust = 0.5<br/>    ),<br/>    legend.text = element_text(size = 12),<br/>    legend.position = c(0.2, 0.6),<br/>    legend.key = element_blank(),<br/>    legend.background = element_rect(<br/>      color = "black",<br/>      fill = "transparent",<br/>      size = 2,<br/>      linetype = "blank"<br/>    )<br/>  )<br/>}</span><span id="c262" class="ls lt iq mu b gy nc mz l na nb">theme_angle_xaxis &lt;- function() {<br/>  theme(axis.text.x = element_text(<br/>    angle = 45,<br/>    hjust = 1,<br/>    vjust = 0.95<br/>  ))<br/>}</span><span id="4da4" class="ls lt iq mu b gy nc mz l na nb"># load data ###################<br/>load(file = "/mnt/data/dynamic_data/projects/projects2021/trapping/data/tidy_catch_traptype_TrapNZ.dat")</span><span id="c151" class="ls lt iq mu b gy nc mz l na nb">quarterly_trap_type &lt;- as.data.frame(Huia_results[2])<br/>quarterly_trap_type &lt;- arrange(traps, date.new, trap_count)</span><span id="739a" class="ls lt iq mu b gy nc mz l na nb"># plot ###############<br/>png(<br/>  "/mnt/data/dynamic_data/projects/projects2021/trapping/figures/trapping_effort_over_time_stacked_barplot.png",<br/>  width = 580,<br/>  height = 580<br/>)</span><span id="9140" class="ls lt iq mu b gy nc mz l na nb">quarterly_trap_type$date_char &lt;-<br/>  as.character(quarterly_trap_type$date.new) # to allow bar width adjustment</span><span id="d627" class="ls lt iq mu b gy nc mz l na nb">mypalette &lt;- brewer.pal(12, "Paired")<br/>legend_title = "Trap type"</span><span id="49b3" class="ls lt iq mu b gy nc mz l na nb">trapping_effort_over_time_stacked_barplot &lt;-<br/>  ggbarplot(<br/>    data = quarterly_trap_type,<br/>    x = "date_char",<br/>    xlab = "Date by quarters",<br/>    y = "trap_count",<br/>    ylab = "Trap count",<br/>    label = TRUE,<br/>    lab.pos = "in",<br/>    lab.col = "cyan1",<br/>    fill = "traptype",<br/>    title = "Huia trapping group effort"<br/>  ) +<br/>  scale_fill_manual(legend_title, values = mypalette) +<br/>  theme_smcc() +<br/>  # x-axis adjustment<br/>  theme_angle_xaxis()</span><span id="f977" class="ls lt iq mu b gy nc mz l na nb"># save the plot<br/>print(trapping_effort_over_time_stacked_barplot)<br/>dev.off()</span></pre><p id="e678" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">图2中按陷阱类型和物种分列的捕获率时间序列如下。上面的代码保存的数据(prepare _ TrapNZ _ catch _ and _ traptype _ data。r)已加载。为了节省空间，我将加载库的代码段和之前显示的自定义主题折叠起来。在按渔获量/诱捕器/天计算渔获量比率之前，按诱捕器类型过滤季度渔获量和诱捕器数量。然后，在将它们组合成面板图之前，创建了六个单独的图。</p><pre class="kg kh ki kj gt mt mu mv mw aw mx bi"><span id="de76" class="ls lt iq mu b gy my mz l na nb">## explore_multiple_catches.R</span><span id="30b9" class="ls lt iq mu b gy nc mz l na nb"># load libraries #######<br/>...</span><span id="bbed" class="ls lt iq mu b gy nc mz l na nb"># custom theme settings #############<br/>...</span><span id="f144" class="ls lt iq mu b gy nc mz l na nb"># load data ###################<br/>load(file = "/mnt/data/dynamic_data/projects/projects2021/trapping/data/tidy_catch_traptype_TrapNZ.dat")</span><span id="1c7c" class="ls lt iq mu b gy nc mz l na nb">catches &lt;- as.data.frame(Huia_results[1])<br/>catches &lt;- arrange(catches, date.new, traptype)</span><span id="133b" class="ls lt iq mu b gy nc mz l na nb">traps &lt;- as.data.frame(Huia_results[2])<br/>traps &lt;- arrange(traps, date.new, trap_count)</span><span id="bc46" class="ls lt iq mu b gy nc mz l na nb"># traps ######################<br/># filter by trap type<br/># A24<br/>catches_a24 &lt;- filter(catches, traptype == "A24")<br/>traps_a24 &lt;- filter(traps, traptype == "A24")</span><span id="b204" class="ls lt iq mu b gy nc mz l na nb">catches_and_traps_a24 &lt;-<br/>  select(catches_a24, c(date.new, traptype, rat_catch, mouse_catch))</span><span id="d829" class="ls lt iq mu b gy nc mz l na nb">interval &lt;- c(NA, diff(catches_and_traps_a24$date.new))</span><span id="9629" class="ls lt iq mu b gy nc mz l na nb">catches_and_traps_a24 &lt;- mutate(<br/>  catches_and_traps_a24,<br/>  trap_count = traps_a24$trap_count,<br/>  .after = traptype,<br/>  rat_catch_rate = rat_catch / trap_count / interval,<br/>  mouse_catch_rate = mouse_catch / trap_count / interval<br/>)<br/>head(catches_and_traps_a24)</span><span id="99d8" class="ls lt iq mu b gy nc mz l na nb"># DOC200<br/>catches_doc200 &lt;- filter(catches, traptype == "DOC 200")<br/>traps_doc200 &lt;- filter(traps, traptype == "DOC 200")</span><span id="5a55" class="ls lt iq mu b gy nc mz l na nb">catches_and_traps_doc200 &lt;-<br/>  select(catches_doc200, c(date.new, traptype, rat_catch, mouse_catch))</span><span id="cde5" class="ls lt iq mu b gy nc mz l na nb">interval &lt;- c(NA, diff(catches_and_traps_doc200$date.new))</span><span id="ce25" class="ls lt iq mu b gy nc mz l na nb">catches_and_traps_doc200 &lt;- mutate(<br/>  catches_and_traps_doc200,<br/>  trap_count = traps_doc200$trap_count,<br/>  .after = traptype,<br/>  rat_catch_rate = rat_catch / trap_count / interval,<br/>  mouse_catch_rate = mouse_catch / trap_count / interval<br/>)</span><span id="5e2c" class="ls lt iq mu b gy nc mz l na nb"># Mouse trap<br/>catches_mouse_trap &lt;- filter(catches, traptype == "Mouse trap")<br/>traps_mouse_trap &lt;- filter(traps, traptype == "Mouse trap")</span><span id="ba4a" class="ls lt iq mu b gy nc mz l na nb">catches_and_traps_mouse_trap &lt;-<br/>  select(catches_mouse_trap, c(date.new, traptype, mouse_catch))</span><span id="29e7" class="ls lt iq mu b gy nc mz l na nb">interval &lt;- c(NA, diff(catches_and_traps_mouse_trap$date.new))</span><span id="2ec0" class="ls lt iq mu b gy nc mz l na nb">catches_and_traps_mouse_trap &lt;-  mutate(<br/>  catches_and_traps_mouse_trap,<br/>  trap_count = traps_mouse_trap$trap_count,<br/>  .after = traptype,<br/>  mouse_catch_rate = mouse_catch / trap_count / interval<br/>)</span><span id="975d" class="ls lt iq mu b gy nc mz l na nb"># Timms trap<br/>catches_timms_trap &lt;- filter(catches, traptype == "Timms")<br/>traps_timms_trap &lt;- filter(traps, traptype == "Timms")</span><span id="f021" class="ls lt iq mu b gy nc mz l na nb">catches_and_traps_timms_trap &lt;-<br/>  select(catches_timms_trap, c(date.new, traptype, possum_catch))</span><span id="23e7" class="ls lt iq mu b gy nc mz l na nb">interval &lt;- c(NA, diff(catches_and_traps_timms_trap$date.new))</span><span id="f046" class="ls lt iq mu b gy nc mz l na nb">catches_and_traps_timms_trap &lt;- mutate(<br/>  catches_and_traps_timms_trap,<br/>  trap_count = traps_timms_trap$trap_count,<br/>  .after = traptype,<br/>  possum_catch_rate = possum_catch / trap_count / interval<br/>)</span><span id="fd6d" class="ls lt iq mu b gy nc mz l na nb"># Warrior trap<br/>catches_warrior_trap &lt;- filter(catches, traptype == "Warrior")<br/>traps_warrior_trap &lt;- filter(traps, traptype == "Warrior")</span><span id="fcf1" class="ls lt iq mu b gy nc mz l na nb">catches_and_traps_warrior_trap &lt;-<br/>  select(catches_warrior_trap, c(date.new, traptype, possum_catch))</span><span id="6a8f" class="ls lt iq mu b gy nc mz l na nb">interval &lt;- c(NA, diff(catches_and_traps_warrior_trap$date.new))</span><span id="232d" class="ls lt iq mu b gy nc mz l na nb">catches_and_traps_warrior_trap &lt;-<br/>  mutate(<br/>    catches_and_traps_warrior_trap,<br/>    trap_count = traps_warrior_trap$trap_count,<br/>    .after = traptype,<br/>    possum_catch_rate = possum_catch / trap_count / interval<br/>  )</span><span id="4ec6" class="ls lt iq mu b gy nc mz l na nb"># plots ############################<br/>png(<br/>  "/mnt/data/dynamic_data/projects/projects2021/trapping/figures/explore_multiple_catches.png",<br/>  width = 480,<br/>  height = 720,<br/>)</span><span id="13a4" class="ls lt iq mu b gy nc mz l na nb">a24_rats &lt;-<br/>  ggline(<br/>    catches_and_traps_a24,<br/>    x = "date.new",<br/>    y = "rat_catch_rate",<br/>    title = "A24 rats",<br/>    size = 1,<br/>    # add = "loess",<br/>    conf.int = TRUE,<br/>    xlab = "Date",<br/>    ylab = "Catch/ trap/ day"<br/>  ) +<br/>  theme_smcc() +<br/>  theme(axis.text.x = element_text(<br/>    angle = 45,<br/>    hjust = 0.5,<br/>    vjust = 0.5<br/>  ))<br/>a24_rats &lt;- ggpar(a24_rats, ylim = c(0, 0.4))</span><span id="289a" class="ls lt iq mu b gy nc mz l na nb">doc200_rats &lt;-<br/>  ggline(<br/>    catches_and_traps_doc200,<br/>    x = "date.new",<br/>    y = "rat_catch_rate",<br/>    title = "DOC200 rats",<br/>    size = 1,<br/>    # add = "loess",<br/>    conf.int = TRUE,<br/>    xlab = "Date",<br/>    ylab = "Catch/ trap/ day"<br/>  ) +<br/>  theme_smcc() +<br/>  theme(axis.text.x = element_text(<br/>    angle = 45,<br/>    hjust = 0.5,<br/>    vjust = 0.5<br/>  ))<br/>doc200_rats &lt;- ggpar(doc200_rats, ylim = c(0, 0.4))</span><span id="0cf3" class="ls lt iq mu b gy nc mz l na nb">a24_mouse &lt;-<br/>  ggline(<br/>    catches_and_traps_a24,<br/>    x = "date.new",<br/>    y = "mouse_catch_rate",<br/>    title = "A24 mice",<br/>    size = 1,<br/>    # add = "loess",<br/>    conf.int = TRUE,<br/>    xlab = "Date",<br/>    ylab = "Catch/ trap/ day"<br/>  ) +<br/>  theme_smcc() +<br/>  theme(axis.text.x = element_text(<br/>    angle = 45,<br/>    hjust = 0.5,<br/>    vjust = 0.5<br/>  ))<br/>a24_mouse &lt;- ggpar(a24_mouse, ylim = c(0, 0.1))</span><span id="9427" class="ls lt iq mu b gy nc mz l na nb">doc200_mouse &lt;-<br/>  ggline(<br/>    catches_and_traps_doc200,<br/>    x = "date.new",<br/>    y = "mouse_catch_rate",<br/>    title = "DOC200 mice",<br/>    size = 1,<br/>    # add = "loess",<br/>    conf.int = TRUE,<br/>    xlab = "Date",<br/>    ylab = "Catch/ trap/ day"<br/>  ) +<br/>  theme_smcc() +<br/>  theme(axis.text.x = element_text(<br/>    angle = 45,<br/>    hjust = 0.5,<br/>    vjust = 0.5<br/>  ))<br/>doc200_mouse &lt;- ggpar(doc200_mouse, ylim = c(0, 0.1))</span><span id="70ed" class="ls lt iq mu b gy nc mz l na nb">timms_possum &lt;-<br/>  ggline(<br/>    catches_and_traps_timms_trap,<br/>    x = "date.new",<br/>    y = "possum_catch_rate",<br/>    title = "Timms possums",<br/>    size = 1,<br/>    # add = "loess",<br/>    conf.int = TRUE,<br/>    xlab = "Date",<br/>    ylab = "Catch/ trap/ day"<br/>  ) +<br/>  theme_smcc() +<br/>  theme(axis.text.x = element_text(<br/>    angle = 45,<br/>    hjust = 0.5,<br/>    vjust = 0.5<br/>  ))<br/>timms_possum &lt;- ggpar(timms_possum, ylim = c(0, 0.05))</span><span id="0662" class="ls lt iq mu b gy nc mz l na nb">warrior_possum &lt;-<br/>  ggline(<br/>    catches_and_traps_warrior_trap,<br/>    x = "date.new",<br/>    y = "possum_catch_rate",<br/>    title = "Warrior possums",<br/>    size = 1,<br/>    # add = "loess",<br/>    conf.int = TRUE,<br/>    xlab = "Date",<br/>    ylab = "Catch/ trap/ day"<br/>  ) +<br/>  theme_smcc() +<br/>  theme(axis.text.x = element_text(<br/>    angle = 45,<br/>    hjust = 0.5,<br/>    vjust = 0.5<br/>  ))<br/>warrior_possum &lt;- ggpar(warrior_possum, ylim = c(0, 0.05))</span><span id="f86c" class="ls lt iq mu b gy nc mz l na nb"># panel plot<br/>explore_multiple_catches &lt;-<br/>  ggarrange(<br/>    a24_rats,<br/>    doc200_rats,<br/>    a24_mouse,<br/>    doc200_mouse,<br/>    timms_possum,<br/>    warrior_possum,<br/>    labels = c("A", "B", "C", "D", "E", "F"),<br/>    ncol = 2,<br/>    nrow = 3<br/>  )</span><span id="e383" class="ls lt iq mu b gy nc mz l na nb">print(explore_multiple_catches)<br/>dev.off()</span></pre><p id="d012" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于最后一个图，数据准备涉及已经包括的内容，例如加载数据，按陷阱类型子集化以选择A24和DOC200陷阱，以及在本例中按月而不是按季度对捕获量进行分组。唯一新颖的部分是为<a class="ae lr" href="https://www.cedricscherer.com/2021/06/06/visualizing-distributions-with-raincloud-plots-and-how-to-create-them-with-ggplot2/" rel="noopener ugc nofollow" target="_blank">雨云情节</a>创建阵列。</p><pre class="kg kh ki kj gt mt mu mv mw aw mx bi"><span id="b8aa" class="ls lt iq mu b gy my mz l na nb"># # prepare data format for raincloud plot (packing doc200 arrays to match A24 length)<br/>df_plot &lt;- data_2x2(<br/>  array_1 = c(gdata_doc200$rat_catch_eff, NA, NA, NA),<br/>  array_2 = gdata_a24$rat_catch_eff,<br/>  array_3 = c(gdata_doc200$rats_plus_scavenged_catch_eff, NA, NA, NA),<br/>  array_4 = gdata_a24$rats_plus_scavenged_catch_eff,<br/>  array_5 = c(gdata_doc200$mouse_catch_eff, NA, NA, NA),<br/>  array_6 = gdata_a24$mouse_catch_eff,<br/>  labels = c("DOC200", "A24"),<br/>  jit_distance = 0.075,<br/>  jit_seed = 321,<br/>  spread_x_ticks = TRUE<br/>)</span><span id="0f7c" class="ls lt iq mu b gy nc mz l na nb"># save the data for raincloud plot<br/>save(df_plot, file = "/mnt/data/dynamic_data/projects/projects2021/trapping/data/tidy_catch_raincloud.dat")</span></pre><p id="7aef" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">图3中的raincloud是使用之前保存的数据通过这段代码创建的。</p><pre class="kg kh ki kj gt mt mu mv mw aw mx bi"><span id="bff6" class="ls lt iq mu b gy my mz l na nb">## compare_catch_rates_A24_DOC200_by_raincloud.R</span><span id="50d2" class="ls lt iq mu b gy nc mz l na nb"># load libraries<br/>library(tidyverse)<br/>library(tibbletime)<br/>library(lubridate)<br/>library(gridExtra)<br/>library(ggthemes)<br/>library(ggpubr)<br/>library(ggrepel)<br/>library(readr)<br/>library(raincloudplots)</span><span id="2c45" class="ls lt iq mu b gy nc mz l na nb"># custom theme settings<br/>...</span><span id="8004" class="ls lt iq mu b gy nc mz l na nb"># load saved tidy_catch_raincloud data<br/>load(file = "/mnt/data/dynamic_data/projects/projects2021/trapping/data/tidy_catch_raincloud.dat")</span><span id="64ff" class="ls lt iq mu b gy nc mz l na nb"># raincloud plots<br/># colours<br/>col1 = "aquamarine"<br/>col2 = "darkseagreen"<br/>col3 = "darkcyan"<br/>col4 = "chartreuse3"<br/>col5 = "chartreuse"</span><span id="72f4" class="ls lt iq mu b gy nc mz l na nb">plot_catches &lt;- raincloud_2x3_repmes(<br/>  data = df_plot,<br/>  colors = (c(col1, col2, col1, col3, col4, col5)),<br/>  fills = (c(col1, col2, col1, col3, col4, col5)),<br/>  size = 2.5,<br/>  # data dot size<br/>  # line_alpha = 0, # make lines fully transparent<br/>  alpha = 0.6  # transparency<br/>  ) +<br/>  scale_x_continuous(<br/>    breaks = c(1.25, 1.4, 2.25, 2.4, 3.25, 3.4),<br/>    labels = c("D", "A", "D", "A", "D", "A"),<br/>    # labels = c("DOCC200", "A24", "DOCC200", "A24", "DOCC200", "A24"),<br/>    limits = c(1, 4.2)<br/>  ) +<br/>  # scale_y_continuous() +<br/>  scale_y_continuous(limits = c(0, 0.62)) +<br/>  xlab("Groups") +<br/>  ylab("Catch rates (catches/ trap/ day)") +<br/>  labs(title = "Compare catch rates between DOC200 (D) and A24 (A) traps") +</span><span id="7e9f" class="ls lt iq mu b gy nc mz l na nb">annotate(geom = "text", <br/>           label = "Rats", <br/>           x = 1.3, y = 0.5,<br/>           size = 6) + <br/>  <br/>  annotate(geom = "text", <br/>           label = "Rats + scavenged", <br/>           x = 2.5, y = 0.6,<br/>           size = 6) + <br/>  <br/>  annotate(geom = "text", <br/>           label = "Mice", <br/>           x = 3.5, y = 0.3,<br/>           size = 6) + <br/>  <br/>theme_smcc()</span><span id="24d9" class="ls lt iq mu b gy nc mz l na nb">plot_catches</span></pre><h2 id="dea0" class="ls lt iq bd lu lv lw dn lx ly lz dp ma le mb mc md li me mf mg lm mh mi mj mk bi translated">下载访问</h2><p id="0337" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">代码、数据和图表都可以通过这个<a class="ae lr" href="http://u.pc.cd/fAmctalK" rel="noopener ugc nofollow" target="_blank">共享链接</a>下载。</p></div></div>    
</body>
</html>