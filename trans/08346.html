<html>
<head>
<title>3 Common Techniques for Data Transformation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">3种常见的数据转换技术</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-transformation-and-feature-engineering-e3c7dfbb4899?source=collection_archive---------9-----------------------#2021-08-01">https://towardsdatascience.com/data-transformation-and-feature-engineering-e3c7dfbb4899?source=collection_archive---------9-----------------------#2021-08-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d9e8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何为您的数据选择合适的</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9441f735437e7f5ff03eb0797db8631f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tjy4bJ_YB_Lbx4fP-Tldzw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据转换概述(图片作者来自<a class="ae ky" href="http://www.visual-design.net/" rel="noopener ugc nofollow" target="_blank">www.visual-design.net</a></p></figure><p id="c3a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据转换是将原始数据转换为更适合建模和数据发现的格式或结构的过程。这是特征工程中必不可少的一步，有助于发现洞见。本文将介绍数字数据转换的技术:对数转换、裁剪方法和数据缩放。</p><p id="bf25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">为什么需要数据转换？</strong></p><ul class=""><li id="fa3e" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">当数据分布有偏差时，算法更有可能出现偏差</li><li id="d544" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">将数据转换为相同的比例允许算法更好地比较数据点之间的相对关系</li></ul><p id="b62d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">何时应用数据转换</strong></p><p id="4415" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在实现监督算法时，训练数据和测试数据需要以相同的方式进行转换。这通常是通过提供训练数据集来构建数据转换算法，然后将该算法应用于测试集来实现的。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="32ce" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">基础特征工程和EDA</h1><p id="5c5e" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在这个练习中，我使用来自Kaggle的<a class="ae ky" href="https://www.kaggle.com/jackdaoud/marketing-data" rel="noopener ugc nofollow" target="_blank">营销分析</a>数据集。</p><p id="ad23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想访问完整的代码，请访问<a class="ae ky" href="https://www.visual-design.net/projects" rel="noopener ugc nofollow" target="_blank">我的网站</a>。</p><p id="43f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我执行了一些基本的特征工程，使数据更整洁、更有洞察力。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="5935" class="ns mr it no b gy nt nu l nv nw"># 1. Transform Year_Birth into Age<br/>from datetime import date<br/>df['Age'] = date.today().year - df['Year_Birth']</span><span id="51b8" class="ns mr it no b gy nx nu l nv nw"># 2. Transform Dt_Customer into Enrollment_Length<br/>df['Year'] = pd.DatetimeIndex(df['Dt_Customer']). year<br/>df['Enrollment_Length'] = date.today().year - df['Year']</span><span id="ebd8" class="ns mr it no b gy nx nu l nv nw"># 3. Transform Currency format into numbers<br/>df['Income$'] = df[' Income '].str.replace(',', '').str.replace('$', '').str.replace('.', '').fillna(0).astype(int)<br/>df['Income_M$'] = df['Income$'].apply(lambda x: round(x/1000000, 2))<br/>print(df[['Income_M$', 'Income$']])</span></pre><p id="8fed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 1。将出生年份转换为“年龄”</strong></p><p id="a1bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从Year_Birth中减去当前年份。</p><p id="8aba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 2。将客户注册的日期(“Dt_Customer”)转换为“Enrollment _ Length”</strong></p><p id="140b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它与上面的类似，只是从日期特性中额外提取了年份部分。</p><p id="a767" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 3。将货币(“收入”)转换为数字(“收入_ M $”)</strong></p><p id="2dc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这包括四个步骤:1)通过删除字符“，$”来清除数据2)将空值替换为0；3)将字符串转换成整数；4)将数字缩小到百万美元，这有助于可视化数据分布</p><p id="b822" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们用一种简单的单变量EDA技术——直方图来直观显示当前的数据分布。不难看出，大多数变量都严重倾斜。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="e038" class="ns mr it no b gy nt nu l nv nw"># select numeric variables<br/>numeric_vars =  ['Age', 'Enrollment_Length', 'Income_M$', 'Recency', 'MntWines', 'MntFruits', 'MntMeatProducts', 'MntFishProducts', 'MntSweetProducts', 'MntGoldProds', 'NumDealsPurchases', 'NumWebPurchases', 'NumCatalogPurchases', 'NumStorePurchases', 'NumWebVisitsMonth']</span><span id="f4c2" class="ns mr it no b gy nx nu l nv nw"># create histograms for each numeric variable<br/>fig = plt.figure(figsize=(24, 15))<br/>for i in range(len(numeric_vars)):<br/>    var = numeric_vars[i]<br/>    sub = fig.add_subplot(3, 5, i + 1)<br/>    sub.set_xlabel(var)<br/>    df[var].plot(kind = 'hist')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/09450f7bed09ca61275d57bc564dc10a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dcCP5YA0ikwYEyc_swtaCQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">EDA(图片由作者提供)</p></figure><p id="e5af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想了解更多关于数据清理、特征工程和探索性数据分析(EDA)的知识，我整理了一个可能有用的列表:</p><ol class=""><li id="4650" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu nz mb mc md bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/feature-selection-and-eda-in-python-c6c4eb1058a3"> <strong class="lb iu">特征选择</strong> </a></li></ol><div class="oa ob gp gr oc od"><a rel="noopener follow" target="_blank" href="/feature-selection-and-eda-in-python-c6c4eb1058a3"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">机器学习中的特征选择和EDA</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">如何使用数据可视化来指导特征选择</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">towardsdatascience.com</p></div></div><div class="om l"><div class="on l oo op oq om or ks od"/></div></div></a></div><p id="b497" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 2。</strong> <a class="ae ky" href="https://medium.com/r?url=https%3A%2F%2Ftowardsdatascience.com%2Fsemi-automated-exploratory-data-analysis-eda-in-python-7f96042c9809" rel="noopener"> <strong class="lb iu">探索性数据分析</strong> </a></p><div class="oa ob gp gr oc od"><a rel="noopener follow" target="_blank" href="/semi-automated-exploratory-data-analysis-eda-in-python-7f96042c9809"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">Python中的半自动探索性数据分析(EDA)</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">一键式全面数据探索流程</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">towardsdatascience.com</p></div></div><div class="om l"><div class="os l oo op oq om or ks od"/></div></div></a></div><p id="3080" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 3。</strong> <a class="ae ky" rel="noopener" target="_blank" href="/which-chart-to-choose-4b21929539eb"> <strong class="lb iu">数据可视化</strong> </a></p><div class="oa ob gp gr oc od"><a rel="noopener follow" target="_blank" href="/which-chart-to-choose-4b21929539eb"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">如何选择最合适的图表？</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">折线图、条形图、饼图……它们讲述了不同的故事</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">towardsdatascience.com</p></div></div><div class="om l"><div class="ot l oo op oq om or ks od"/></div></div></a></div><p id="1fef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 4。</strong> <a class="ae ky" href="https://medium.com/analytics-vidhya/how-to-address-missing-data-531ed964e68" rel="noopener"> <strong class="lb iu">地址缺失数据</strong> </a></p><div class="oa ob gp gr oc od"><a href="https://medium.com/analytics-vidhya/how-to-address-missing-data-531ed964e68" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">如何处理丢失的数据</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">三种缺失数据的解决方法</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">medium.com</p></div></div><div class="om l"><div class="ou l oo op oq om or ks od"/></div></div></a></div></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="91c3" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">1.对数变换-右偏数据</h1><p id="3659" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">当数据样本遵循<strong class="lb iu">幂律分布</strong>时，我们可以使用对数标度将右偏分布转化为正态分布。要实现这一点，只需使用<em class="ov"> np.log() </em>函数。在这个数据集中，大多数变量都属于这个类别。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/0f38e3d7a31cab2e9afa6e0d17b628d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V4TX7zqkfkRIprGEAVbUpw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">转换前(图片由作者提供)</p></figure><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="674d" class="ns mr it no b gy nt nu l nv nw">## log transformation - power law distribution ##</span><span id="7366" class="ns mr it no b gy nx nu l nv nw">log_var = ['Income_M$', 'MntWines', 'MntFruits', 'MntMeatProducts', 'MntFishProducts', 'MntSweetProducts', 'MntGoldProds', 'NumDealsPurchases', 'NumWebPurchases', 'NumCatalogPurchases']</span><span id="ca6a" class="ns mr it no b gy nx nu l nv nw">fig = plt.figure(figsize = (24,10))</span><span id="3c0a" class="ns mr it no b gy nx nu l nv nw">for j in range(len(log_var)):<br/>    var = log_var[j]<br/>    transformed = "log_" + var<br/>    df[transformed] = np.log10(df[var]+1)</span><span id="68b8" class="ns mr it no b gy nx nu l nv nw">sub = fig.add_subplot(2, 5, j + 1)<br/>    sub.set_xlabel(var)<br/>    df[transformed].plot(kind = 'hist')</span></pre><p id="42c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">经过对数变换后，这些特征变得更加正态分布。</p><p id="6bfd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">经过对数变换后，这些特征变得更加正态分布。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/85b7ec02a29b73145ea980f1f251a6e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DK4chh5DEmcOO054RF5qCg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">转换后(图片由作者提供)</p></figure><h1 id="6e7f" class="mq mr it bd ms mt oy mv mw mx oz mz na jz pa ka nc kc pb kd ne kf pc kg ng nh bi translated">2.裁剪-处理异常值</h1><p id="b9e2" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">当数据集中有<strong class="lb iu">异常值</strong>时，这种方法更合适。Clipping方法设置了上下限，所有数据点都将包含在该范围内。</p><p id="1520" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<em class="ov"> quantile() </em>来找出大部分数据量的范围(0.05百分点到0.95百分点之间)。任何低于下限(由0.05个百分点定义)的数字都将向上舍入到下限。类似地，高于上限(由0.95%定义)的数字将向下舍入到上限。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="eac5" class="ns mr it no b gy nt nu l nv nw">## clipping methods - handle outliers ##</span><span id="57b5" class="ns mr it no b gy nx nu l nv nw">clip_var = ['Age', 'NumWebVisitsMonth']</span><span id="7fac" class="ns mr it no b gy nx nu l nv nw">for i in clip_var:<br/>    transformed = 'clipped_'+ i</span><span id="4cf8" class="ns mr it no b gy nx nu l nv nw"># upper limit - .95 quantile<br/>    upper_limit = df[i].quantile(0.95)</span><span id="d43c" class="ns mr it no b gy nx nu l nv nw"># lower limit - .05 quantile<br/>    lower_limit = df[i].quantile(0.05)</span><span id="0ac7" class="ns mr it no b gy nx nu l nv nw">df[transformed] = df[i].clip(lower_limit, upper_limit, axis = 0)<br/>    <br/>    print(df[i].describe())<br/>    print(df[transformed].describe())<br/>    <br/>    plt.figure(figsize = (5,5))<br/>    df[i].plot(kind = 'hist')<br/>    <br/>    plt.figure(figsize = (5,5))<br/>    df[transformed].plot(kind = 'hist')</span></pre><p id="6554" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从EDA过程中的直方图可以看出，变量“<em class="ov"> Age”和“numwebvisitsmooth”</em>存在异常大的异常值。所以我将只对这两列应用剪辑。</p><p id="f847" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，两个字段的最大值都显著下降:</p><ul class=""><li id="d58c" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">年龄从128岁到71岁</li><li id="5ef4" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><em class="ov"> NumWebVisitMonth </em>:从20日到8日</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/5a3ed40faa4dbe3fb6153e0b87bc93c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:594/format:webp/0*GvCaweV8DHrLwSsA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">对年龄应用剪辑方法</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/940145f57de4951df75ec3186a6e2d34.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*C428lf8BUqbk-C0U.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">对NumWebVisitsMonth应用剪辑方法</p></figure><h1 id="af34" class="mq mr it bd ms mt oy mv mw mx oz mz na jz pa ka nc kc pb kd ne kf pc kg ng nh bi translated">3.缩放变换</h1><p id="c23b" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在日志转换和处理异常值之后，我们可以通过scikit-learn预处理库将数据转换成相同的标度。这个库包含了一些有用的函数:<strong class="lb iu">最小-最大缩放器，标准缩放器和健壮缩放器</strong>。每个定标器都有不同的用途。</p><h2 id="27a0" class="ns mr it bd ms pf pg dn mw ph pi dp na li pj pk nc lm pl pm ne lq pn po ng pp bi translated">最小最大缩放器—归一化</h2><p id="0027" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated"><em class="ov"> MinMaxScaler() </em>通常在数据集没有失真时应用<strong class="lb iu">。它根据以下公式将数据标准化为0到1之间的范围:</strong></p><p id="7b98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ov">x ' =(x—min(x))/(max(x)—min(x))</em></p><h2 id="dbbe" class="ns mr it bd ms pf pg dn mw ph pi dp na li pj pk nc lm pl pm ne lq pn po ng pp bi translated">标准定标器—标准化</h2><p id="1a64" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">当数据集符合<strong class="lb iu">正态分布</strong>时，我们使用标准化。<em class="ov"> StandardScaler() </em>根据z-score公式将数字转换为标准形式<strong class="lb iu">均值= 0，方差= 1 </strong>:</p><p id="ce90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ov"> x' = (x —均值)/标准差。</em></p><h2 id="db00" class="ns mr it bd ms pf pg dn mw ph pi dp na li pj pk nc lm pl pm ne lq pn po ng pp bi translated">鲁棒定标器</h2><p id="8857" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated"><em class="ov"> RobustScaler() </em>更适用于具有<strong class="lb iu">偏斜分布和离群值</strong>的数据集，因为它根据中位数和分位数转换数据:</p><p id="f0b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ov"> x = (x —中位数)/四分位间距。</em></p><p id="2ba4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了比较这三个缩放器是如何工作的，我使用一个迭代来缩放剩余的变量和裁剪变换后的那两个变量，分别基于<em class="ov"> StandardScaler()、RobustScaler()、MinMaxScaler() </em>。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="979a" class="ns mr it no b gy nt nu l nv nw">## data scaling methods ##</span><span id="4768" class="ns mr it no b gy nx nu l nv nw">from sklearn.preprocessing import StandardScaler<br/>from sklearn.preprocessing import MinMaxScaler<br/>from sklearn.preprocessing import RobustScaler</span><span id="a30a" class="ns mr it no b gy nx nu l nv nw">scale_var = ['Enrollment_Length', 'Recency', 'NumStorePurchases', 'clipped_Age', 'clipped_NumWebVisitsMonth']<br/>scalers_list = [StandardScaler(), RobustScaler(), MinMaxScaler()]</span><span id="1be5" class="ns mr it no b gy nx nu l nv nw">for i in range(len(scalers_list)):<br/>    scaler = scalers_list[i]<br/>    fig = plt.figure(figsize = (26, 5))<br/>    plt.title(scaler, fontsize = 20)<br/>    for j in range(len(scale_var)):<br/>        var = scale_var[j]<br/>        scaled_var = "scaled_" + var<br/>        model = scaler.fit(df[var].values.reshape(-1,1))<br/>        df[scaled_var] = model.transform(df[var].values.reshape(-1, 1))</span><span id="5606" class="ns mr it no b gy nx nu l nv nw">sub = fig.add_subplot(1, 5, j + 1)<br/>        sub.set_xlabel(var)<br/>        df[scaled_var].plot(kind = 'hist')</span></pre><p id="8e5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如图所示，定标器不改变数据分布的形状，而是改变数据点的分布。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pq"><img src="../Images/c5afc0f3b5fc6b589bb6fd432abb08c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5OZlM2XOpnFzOM_nSsqqXw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">缩放器比较(图片由作者提供)</p></figure><p id="46d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以“NumStorePurchases”为例，MinMaxScaler()将值严格转换为0到1之间的值，StandardScaler()将数据集转换为mean = 0，而RobustScaler()将数据集转换为median = 0。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pr"><img src="../Images/ba83658db9a2237adb13529f4af50abe.png" data-original-src="https://miro.medium.com/v2/resize:fit:446/format:webp/1*90TNT1wCA59T8U2AFI-2WA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">NumStorePurchases</p></figure><p id="b1af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个数据集中，这五个变量既不是扭曲的，也不是正态分布的，因此在这三个标量中选择一个MinMaxScaler()就足够了。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="4923" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">既然所有的特性都已经按照它们的属性转化成了。让我们再次想象它们。我们可以看到，数据看起来更有组织，失真更少，因此更适合输入模型和生成见解。</p><p id="0ae4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">改造前</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ps"><img src="../Images/21804315e3ceb572905cd7f84e3f378f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lGmWaXfwYZHi3xZ0E1M2aw.png"/></div></div></figure><p id="c5e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">改造后</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/9fb49de77dfffb0f2c9bf2a68b1f99bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GTjM1xcCnisNjn2lkghTBA.png"/></div></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="212d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">希望你喜欢我的文章:)。如果你想阅读更多我关于媒体的文章，请使用这个附属链接(<a class="ae ky" href="https://destingong.medium.com/membership" rel="noopener">https://destingong.medium.com/membership</a>)注册媒体会员。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="1793" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">带回家的信息</h1><p id="9d18" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">本文将带您踏上转换数据的旅程，并演示如何根据数据属性选择合适的技术。</p><ol class=""><li id="a996" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu nz mb mc md bi translated">数据清理:转换数据类型并删除不必要的字符</li><li id="16b4" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu nz mb mc md bi translated">右偏斜数据的对数变换</li><li id="0762" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu nz mb mc md bi translated">处理异常值的裁剪方法</li><li id="f6e0" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu nz mb mc md bi translated">数据缩放:最小最大缩放器、标准缩放器、鲁棒缩放器</li></ol></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="fab5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ov">原载于2021年7月27日https://www.visual-design.net</em><em class="ov"/><a class="ae ky" href="https://www.visual-design.net/post/semi-automated-exploratory-data-analysis-process-in-python" rel="noopener ugc nofollow" target="_blank"><em class="ov">。</em></a></p><h2 id="ec83" class="ns mr it bd ms pf pg dn mw ph pi dp na li pj pk nc lm pl pm ne lq pn po ng pp bi translated">更多这样的文章</h2><div class="oa ob gp gr oc od"><a rel="noopener follow" target="_blank" href="/clustering-algorithm-for-customer-segmentation-e2d79e28cbc3"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">客户细分的聚类算法</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">K-均值聚类的逐步指南</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">towardsdatascience.com</p></div></div><div class="om l"><div class="pt l oo op oq om or ks od"/></div></div></a></div><div class="oa ob gp gr oc od"><a rel="noopener follow" target="_blank" href="/feature-selection-and-eda-in-python-c6c4eb1058a3"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">机器学习中的特征选择和EDA</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">如何使用数据可视化来指导特征选择</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">towardsdatascience.com</p></div></div><div class="om l"><div class="on l oo op oq om or ks od"/></div></div></a></div><div class="oa ob gp gr oc od"><a rel="noopener follow" target="_blank" href="/semi-automated-exploratory-data-analysis-eda-in-python-7f96042c9809"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">Python中的半自动探索性数据分析(EDA)</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">一键式全面数据探索流程</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">towardsdatascience.com</p></div></div><div class="om l"><div class="os l oo op oq om or ks od"/></div></div></a></div></div></div>    
</body>
</html>