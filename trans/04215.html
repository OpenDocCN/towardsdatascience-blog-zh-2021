<html>
<head>
<title>Medical NER with AWS Comprehend</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带AWS的医用NER理解</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/medical-ner-with-aws-comprehend-3f27db0a8255?source=collection_archive---------28-----------------------#2021-04-09">https://towardsdatascience.com/medical-ner-with-aws-comprehend-3f27db0a8255?source=collection_archive---------28-----------------------#2021-04-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0ef5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用AWS intensive构建用于医疗实体检测的web应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/601dc08b16e90a78b64b9171dc1b2a9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iEHMUwkd4AgnNJh-"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://unsplash.com/photos/VCtI-0qlVgA" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="43c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">命名实体识别(<strong class="lb iu"> NER </strong>)是最流行和最受欢迎的自然语言处理任务之一。随着NER的扩张，它也变得越来越有T4特色。为特定领域(如医疗保健/医疗)构建自定义NER模型可能非常困难，并且需要大量数据和计算能力。AWS领悟是一种高级服务，AWS提供自动化许多不同的NLP任务，如情感分析、主题建模和NER。“理解”分支创建了一个名为<a class="ae ky" href="https://aws.amazon.com/comprehend/medical/" rel="noopener ugc nofollow" target="_blank">理解医疗</a>的子服务，专门面向医疗NER。在本文中，我们将介绍如何使用<a class="ae ky" href="https://docs.streamlit.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>构建一个web应用程序，它可以调用intensive Medical并返回检测到的医疗实体。本文假设读者具备AWS的基础知识、浏览AWS控制台的能力以及Python基础知识。我将提供一个我们将要使用的服务列表，并在此广告之后提供更深入的定义，但是如果您已经熟悉这些服务，可以随意跳到情感分析&amp;实体提取的代码演示。</p><h1 id="38b6" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">目录</h1><ol class=""><li id="70b6" class="mn mo it lb b lc mp lf mq li mr lm ms lq mt lu mu mv mw mx bi translated">AWS服务概述</li><li id="16ec" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">体系结构</li><li id="36df" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">使用Streamlit进行前端创建</li><li id="17e6" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">创建Lambda函数和REST API</li><li id="881c" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">将Lambda功能与AWS集成理解医疗</li><li id="e301" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">连接前端和后端</li><li id="b1ee" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">代码和结论</li></ol><h1 id="9727" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">1.AWS服务</h1><p id="a183" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated"><a class="ae ky" href="https://aws.amazon.com/comprehend/medical/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> AWS领悟医疗</strong> </a>:一个<strong class="lb iu">符合HIPAA的NLP服务</strong>，为用户从文本中提取健康数据提供一个<strong class="lb iu">高级API </strong>。</p><p id="de65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://aws.amazon.com/lambda/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> AWS Lambda </strong> </a>:无服务器计算服务，允许开发者运行代码，无需管理或提供服务器。我们将使用此服务来<strong class="lb iu">访问NER的AWS理解医疗</strong>，并<strong class="lb iu">与<strong class="lb iu"> REST API </strong>通信</strong>以将结果输出到前端。</p><p id="1bfd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://boto3.amazonaws.com/v1/documentation/api/latest/index.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> Boto3 </strong> </a> : AWS软件开发工具包(<strong class="lb iu"> SDK </strong>)对于Python开发者来说，我们在我们的Lambda函数上使用这个来访问其他AWS服务，比如understand。</p><p id="ae99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://aws.amazon.com/iam/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">身份访问和管理(IAM) </strong> </a>:允许您通过权限和角色管理对AWS服务的访问。我们将为我们的<strong class="lb iu"> Lambda </strong>函数创建一个角色，以便能够<strong class="lb iu">访问</strong>AWS comprehense和API GW。</p><p id="a624" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://aws.amazon.com/api-gateway/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">【AWS API网关(API GW) </strong> </a>:允许开发者创建、发布和监控安全RESTful和Socket APIs的服务。</p><h1 id="0b6f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">2.体系结构</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/11783f59b05ffc976b5587b61bea0489.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OGgYBLEVJMSxb7fLos2iBg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">架构图(作者截图)</p></figure><p id="1430" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">架构相对简单。我们将构建一个streamlit web应用程序来访问我们将使用Amazon API Gateway创建的REST API。这个REST API将作为后端Lambda函数的接口，该函数使用Boto3 SDK来访问NER医疗的理解医疗。</p><h1 id="5e93" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">3.使用Streamlit进行前端创建</h1><p id="341b" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">对于我们的应用程序，我们将使用一个称为Streamlit的漂亮Python库创建一个简单的前端，让Python开发人员和数据科学家能够快速启动和运行web应用程序/仪表板。我们的应用程序只需要一些标题和一个用于输入文本的文本框，我们将对其进行分析，以检测任何潜在的<strong class="lb iu">医疗实体</strong>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建基本前端设置的代码</p></figure><p id="61f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">稍后将使用<a class="ae ky" href="https://pypi.org/project/requests/" rel="noopener ugc nofollow" target="_blank">请求</a>库来<strong class="lb iu">访问</strong>我们创建的<strong class="lb iu"> API </strong>，但是现在应该创建了一个基本的前端模板，如果您执行"<strong class="lb iu">streamlit run filename . py</strong>"操作，您应该会看到设置。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/c151e7083b5c5cedcad582b8b27ef8af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iI6KvnjXZHSRzTBSvXtqyw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">前端创作(作者截图)</p></figure><h1 id="71ee" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak"> 4。创建Lambda函数和REST API </strong></h1><p id="9156" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated"><strong class="lb iu">注意</strong>:这一步有点费力，有许多API创建的小细节，为了简单起见，我跳过了，如果你喜欢这一部分的<strong class="lb iu">视频演示</strong>，请继续并跟随这个<a class="ae ky" href="https://www.youtube.com/watch?v=DxpM_JN28GE&amp;feature=emb_title" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><p id="1555" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，当你登录到<strong class="lb iu"> IAM服务</strong>后，就该去AWS控制台了。在我们可以使用Lambda之前，我们需要为我们的Lambda函数创建一个<a class="ae ky" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">角色</strong> </a>，该角色赋予它<a class="ae ky" href="https://aws.amazon.com/iam/features/manage-permissions/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">权限</strong> </a>来使用领悟医疗和API网关。一旦进入IAM服务，点击页面左侧的<strong class="lb iu">角色</strong>，点击<strong class="lb iu">创建角色</strong>。现在您选择角色所服务的服务，在我们的例子中是Lambda。单击<strong class="lb iu"> next: Permissions </strong>，现在我们可以在search选项卡中查找与我们的角色相关的策略。确保<strong class="lb iu">检查AmazonComprehendFullAccess、Amazon APIGatewayFullAccess、</strong>和<strong class="lb iu">amazonapigatewaymanagement</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/834488d89d2c05029839822920ec291e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xymq-OSZWXDoqGlw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Lambda角色创建(作者截图)</p></figure><p id="ead6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">继续并点击创建角色，我们可以<strong class="lb iu">越过</strong>到达<strong class="lb iu"> Lambda服务</strong>。点击<strong class="lb iu">创建函数</strong>，命名你的Lambda函数，选择<strong class="lb iu"> Python 3.8 </strong>作为你的运行时，点击<strong class="lb iu">更改默认执行角色</strong>。现在选择<strong class="lb iu">使用现有角色</strong>并选择您为Lambda服务创建的角色。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/ef7c39c9deafffeda731b433a50cd103.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*F6FD44dx9TrfXE6t.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Lambda函数创建(作者截图)</p></figure><p id="9c10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">继续并点击创建函数，我们已经准备好了Lambda函数。我们的<strong class="lb iu">下一步</strong>是<strong class="lb iu">用<strong class="lb iu"> API GW </strong>创建</strong>一个<strong class="lb iu"> REST API </strong>，并将其与我们的Lambda函数集成。转到控制台上的API网关服务，然后单击创建API。选择<strong class="lb iu">构建REST API </strong>，命名您的API，然后点击create。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/fbef894c54e0a4f98e77607e0ead022e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b8Nm-O7rMjRvHy2k.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">REST API创建(作者截图)</p></figure><p id="42ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦你创建了你的REST API，确保创建一个<strong class="lb iu"> POST方法</strong>，这样我们就可以从我们的前端向我们的后端Lambda函数提供数据。在创建了适当的资源和方法之后，确保<strong class="lb iu">部署</strong>您的<strong class="lb iu"> API </strong>并且<strong class="lb iu">启用CORS </strong>。我们现在有了一个REST API，可以用来集成我们的前端和后端。</p><h1 id="0736" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">5.将Lambda功能与AWS集成理解医疗</h1><p id="ee01" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">既然已经建立了体系结构的一般流程，我们可以将重点放在后端工作上，以便为NER集成理解医疗服务。使用boto3库，我们对医疗NER使用API调用:<a class="ae ky" href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/comprehendmedical.html#ComprehendMedical.Client.detect_entities" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> detect_entities </strong> </a>，无论我们输入什么文本。用于理解医学的检测实体有<strong class="lb iu">五个不同的</strong> <a class="ae ky" href="https://docs.aws.amazon.com/comprehend/latest/dg/extracted-med-info.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">类别</strong> </a>它可以将术语分类为:<strong class="lb iu">解剖、医学状况、药物治疗、受保护健康信息和测试治疗程序</strong>。如需了解boto3用于理解医疗的API调用的更多文档，请点击此<a class="ae ky" href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/comprehendmedical.html" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Lambda函数访问理解医疗</p></figure><p id="b63d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，您必须在我们返回的JSON中包含一个头部分，以避免任何CORS错误。</p><h1 id="3b56" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">6.连接前端和后端</h1><p id="8808" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">现在我们已经部署了API，我们需要在前端访问这个REST API，这样我们就可以将输入文本输入Lambda函数。我们使用Python请求库来访问我们创建的REST API。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">访问实体的API &amp; Lambda的代码</p></figure><p id="d8f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该函数的第一部分接收用户输入，并将其传递给我们的REST API。在understand Medical返回其检测到的实体后，我们将数据解析为可呈现的格式，我们可以将其写回前端。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/02f728cb532a539c39eec262ac4322ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2GTQnHtEx8y6sbH2-tPWDw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">应用示例</p></figure><h1 id="a951" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">7.代码和结论</h1><div class="no np gp gr nq nr"><a href="https://github.com/RamVegiraju/MedNERComprehend" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">RamVegiraju/medner understand</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">使用AWS的Web应用程序理解医疗-RamVegiraju/medner理解</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">github.com</p></div></div></div></a></div><p id="1de6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要访问演示的所有代码，请访问上面发布的链接。AWS拥有一套不断扩展的高级人工智能服务，可以真正实现自动化，并为时间少或没有构建定制ML模型经验的人提供应用程序。</p><p id="4932" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇文章对试图使用AWS和NLP的人有用。如果您对ML、数据科学和AWS感兴趣，请随时在评论中留下任何反馈或通过<a class="ae ky" href="https://www.linkedin.com/in/ram-vegiraju-81272b162/" rel="noopener ugc nofollow" target="_blank"> Linkedln </a>与我联系。感谢您的阅读！</p></div></div>    
</body>
</html>