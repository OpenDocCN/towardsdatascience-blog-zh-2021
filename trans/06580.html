<html>
<head>
<title>Data Science Workflow — Experiment Tracking</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学工作流程—实验跟踪</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-science-workflow-experiment-tracking-609e649973a3?source=collection_archive---------22-----------------------#2021-06-13">https://towardsdatascience.com/data-science-workflow-experiment-tracking-609e649973a3?source=collection_archive---------22-----------------------#2021-06-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="de1d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Git流探索数据科学<strong class="ak">假设</strong></h2></div><p id="685c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">数据科学是一个研究驱动的领域，探索一个问题的多种解决方案是一个核心原则。当一个项目变得越来越复杂时，我们需要比较结果，看看什么方法比其他方法更有前途。在这个过程中，我们需要确保我们不会忘记项目的组成部分或错过关键信息。此外，我们需要有能力重现结果和管理过去的实验，以便不浪费时间探索相同的假设两次。为此，有必要使用结构化的工作流程来探索新的实验。</p><p id="5cb9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇博文中，我们将讨论以下主题:</p><ul class=""><li id="4773" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la lg lh li lj bi translated">数据科学项目中的主要挑战以及克服这些挑战所需的能力。</li><li id="e030" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated">来自软件开发工作流程的见解。</li><li id="f331" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated">运行新实验的推荐工作流程。</li></ul><h1 id="6799" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">数据科学工作流程中的主要挑战</h1><p id="b891" class="pw-post-body-paragraph kf kg iq kh b ki mh jr kk kl mi ju kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">为了更好地理解实验跟踪工作流程中的挑战，让我们首先定义一个典型项目中涉及的步骤:</p><ol class=""><li id="e84a" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la mm lh li lj bi translated">了解手头的业务问题。</li><li id="577c" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la mm lh li lj bi translated">收集原始数据。</li><li id="80ee" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la mm lh li lj bi translated">探索、转换、清理和准备数据。</li><li id="cb36" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la mm lh li lj bi translated">基于数据创建和选择模型。</li><li id="8746" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la mm lh li lj bi translated">训练、测试、调整和部署模型。</li><li id="9014" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la mm lh li lj bi translated">监控模型的性能。</li></ol><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi mn"><img src="../Images/13c33f341a39f1a58a27dcca49acccc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QRaPtarHTkWsJ5UJTuM6tg.jpeg"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">数据科学项目生命周期，<em class="nd">作者图片</em></p></figure><p id="5e9e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面概述的工作流提供了将机器学习模型部署到生产并监控它的路线图。正如我们所见，数据科学项目中的大部分过程都是基于试错法的。数据科学家运行测试，比较结果，重新运行测试，比较结果，等等。因此，我们必须应对三大挑战。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="1b67" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">挑战:</strong> <em class="nl">管理不同的实验/方法来解决问题。</em></p><p id="beac" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在从事数据科学项目时，我们经常需要探索不同的方法来解决问题——超参数调优、模型架构、数据处理方法等。每种方法都可能不同，甚至相互正交。此外，每种方法都有子实验，挑战研究者选择最佳结果。</p><p id="4112" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">所需功能:</strong> <em class="nl">比较工具，呈现不同的结果，并通过各种参数进行比较。</em></p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="8509" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">挑战:</strong> <em class="nl">用项目的所有组件重现之前的实验结果。</em></p><p id="fed7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在探索子实验的时候，我们说不清什么时候达到了想要的结果。可能在第一次实验，第x次，或者最后一次。因此，我们需要有能力重现代码、数据和实验模型，并得到最好的结果。</p><p id="8a9c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">期望的能力</strong> : <em class="nl">用实验的结果封装项目的所有组件。</em></p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="ae77" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">挑战: <em class="nl">并行工作，同步项目的各个组成部分。</em></p><p id="ef62" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在生产环境中工作时，最大的挑战之一是与其他数据科学家协作。在同时进行各种实验的同时，管理代码、数据和模型变成了一项痛苦的任务，而不是一种工作状态。</p><p id="db3c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">期望的功能:</strong> <em class="nl">版本项目的所有组件。</em></p><h1 id="e9b5" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">从软件开发中学习</h1><p id="3501" class="pw-post-body-paragraph kf kg iq kh b ki mh jr kk kl mi ju kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">由于软件开发和数据科学之间的相似性，并且由于团队中的软件开发有更多的时间来成熟，让我们看看如何适应和应用来自该领域的方法，并使用它们来定义数据科学领域中的高效工作流。</p><p id="1c23" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">软件开发工作流是一个广泛的学科。我想把我们的注意力放在“Git特性分支工作流”上，它定义了一个严格的分支模型。它为管理拥有大量开发人员的大型项目提供了一个健壮的框架。为了简单起见，我不会在这篇博文中讨论开发和发布分支的用法。</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/4d28145e607ab8bce03c71e91f4e7d95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*vyLpiRtu0QW9Qn4nMpUsyA.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">Git流—功能分支工作流，<em class="nd">作者图片</em></p></figure><p id="8e17" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在特性分支工作流程中，我们将在<strong class="kh ir">主</strong>分支上存储项目的生产版本，并在不同的分支上存储开发的特性。Git将为每个分支隔离工作环境，因此开发人员可以编辑、暂存和提交对功能分支的更改，而不会影响产品版本。</p><p id="03da" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果使用Git托管平台(例如GitHub、BitBucket、GitLab)，当特性准备好时，开发人员不会简单地将其合并到主分支，而是会创建一个pull请求(PR)。这时，他将把它分配给他的同事，以审查整个工作和变化。</p><p id="83be" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，当特性准备好进行部署时，开发人员会将特性的分支合并到主分支中。然后，CI/CD工具将获取新版本，构建它，并将其部署到生产环境中。</p><p id="1625" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该工作流使许多团队能够并行工作，并有效地管理他们的项目。通过一些修改，我们可以将其应用于数据科学，以克服前面描述的挑战。让我们探索一下如何做到这一点。</p><h1 id="f0b8" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">实验跟踪工作流程</h1><p id="cecf" class="pw-post-body-paragraph kf kg iq kh b ki mh jr kk kl mi ju kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">基于这篇博文中提到的挑战、期望的功能和传统的软件开发工作流程，我们建议一种新的方法。</p><p id="f373" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">核心要素</strong></p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/e35d6886cdc59bb69630cbfd34394442.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*vvkicZ3ptLCYCl7Ov7xW7w.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">实验跟踪工作流程—核心要素，<em class="nd">作者图片</em></p></figure><p id="708a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的每一个元素都建立在前一个元素的基础上，通过组合它们，它们创建了一个整体的解决方案。</p><p id="012d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个工作流的基础是<strong class="kh ir">数据和模型版本</strong>。跟踪项目的所有组成部分使得复制以前的工作更加容易。此外，当在团队中工作时，它使我们能够更有效地管理项目，并在不同的组件上并行工作。几个MLOps工具支持<a class="ae no" href="https://dagshub.com/blog/data-version-control-tools/" rel="noopener ugc nofollow" target="_blank">数据版本</a>，它们包括<a class="ae no" href="https://dagshub.com/shcheklein/example-get-started" rel="noopener ugc nofollow" target="_blank"> DVC </a>，MLflow和Pachyderm。</p><p id="4a2c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个元素是<strong class="kh ir">封装了E </strong> <a class="ae no" href="https://dagshub.com/blog/how-to-compare-ml-experiment-tracking-tools-to-fit-your-data-science-workflow/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir">实验</strong> </a> <strong class="kh ir">的组件</strong>和结果。为了重现实验结果，我们需要能够检索代码、数据的版本，并对产生它们的模型进行建模。我们将使用上述工具之一来版本化数据和模型文件，并使用Git来版本化代码文件。我们建议将实验的参数和度量记录到一个<a class="ae no" href="https://dagshub.com/docs/reference/open_data_science_formats/" rel="noopener ugc nofollow" target="_blank">开源可读文件</a>中，并使用Git跟踪它们。</p><p id="d443" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第三个要素是指<strong class="kh ir">实验的隔离</strong>。这个元素的灵感来自于软件开发工作流，其中产品代码保存在主分支上，而演进的特性存储在不同的分支上。在我们的例子中，项目最好的部分将在主分支上进行，每个实验将在另一个分支上进行。这样，管理和跟踪各种实验，回顾每个实验的结果，而不是两次收获同一个实验，就变得容易了。</p><p id="79ca" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第四个也是最后一个元素是<strong class="kh ir">数据科学投票请求(DSPR) </strong>。当创建一个软件开发项目的PR时，唯一需要评审和合并的元素是代码。然而，数据科学项目有更多的组成部分。因此，为了能够对实验的全貌进行有效的审查，DSPR将包括代码、数据、模型和实验结果。</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi np"><img src="../Images/298f1bd20e0ccadd3f2e614d024196d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FqbbIMuWQf3fZuvIY4lGRQ.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">实验跟踪工作流程，<em class="nd">图片作者</em></p></figure><p id="9fe5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">实验跟踪<em class="nl"> </em>工作流程</strong></p><ol class=""><li id="b9ed" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la mm lh li lj bi translated">为实验创建一个分支，并将其签出。</li></ol><p id="02c8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2.在分支上运行子实验，并跟踪项目组件的定性结果。</p><ul class=""><li id="ca89" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la lg lh li lj bi translated"><strong class="kh ir">并行方法</strong> —对于每个子实验，创建一个新的分支，并在其上运行实验。当有多个实验时，这种方法会变得难以管理。</li><li id="b1c4" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated"><strong class="kh ir">顺序方法</strong> —对于每个子实验，创建项目版本的新提交。这种方法允许您选择想要跟踪和过滤噪音的实验。</li></ul><p id="7bb0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">3.比较不同实验的结果，选择最好的一个。</p><p id="c2a4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">4.如果最佳实验结果优于主分支上的模型结果。</p><ul class=""><li id="042e" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la lg lh li lj bi translated"><strong class="kh ir">并行方法</strong> —检查存储实验最佳结果的分支。</li><li id="fcf9" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated"><strong class="kh ir">顺序方法</strong> —检查具有最佳结果的提交，并将其分支到新的分支。</li></ul><p id="95d6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">5.创建包含所有项目组件(代码、数据、模型和实验)的数据科学调查请求。</p><p id="33bf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">6.审查DSPR及其批准后，将文件合并到主分支。</p><p id="a31a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> Git流</strong></p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/6c0e8354e949220b8bb03af2773f65ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*NX1KOhRW_IFaqBIfmR0t3g.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">Git流程—顺序方法，<em class="nd">作者图片</em></p></figure><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/19e3b2e09fd21d1b30477a0c59cf9db2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*ajL7lwysqqMKKv9MGGwjAA.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">Git流—并行方法，<em class="nd">作者图片</em></p></figure><h1 id="edac" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated"><strong class="ak">总结</strong></h1><p id="5b05" class="pw-post-body-paragraph kf kg iq kh b ki mh jr kk kl mi ju kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">使用上面的工作流程和元素，探索一个新的假设成为一个更容易管理的任务。我们可以很容易地比较实验结果，并确定哪种方法更有效。如果你尝试过这个工作流程，并且对你有所帮助——我很乐意通过<a class="ae no" href="https://twitter.com/barazida" rel="noopener ugc nofollow" target="_blank"> Twitter </a>或<a class="ae no" href="https://www.linkedin.com/in/nir-barazida/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>了解它。如果你有优化的建议，我们可以在我们的<a class="ae no" href="https://discord.com/channels/698874030052212737/705302775784800278" rel="noopener ugc nofollow" target="_blank">不和谐频道</a>谈论。</p></div></div>    
</body>
</html>