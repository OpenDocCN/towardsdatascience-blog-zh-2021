<html>
<head>
<title>Analyzing Data in Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分析熊猫的数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/analyzing-data-in-pandas-7b7d500f6aed?source=collection_archive---------34-----------------------#2021-08-09">https://towardsdatascience.com/analyzing-data-in-pandas-7b7d500f6aed?source=collection_archive---------34-----------------------#2021-08-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="12c6" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">当熊猫脱颖而出</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e56bcf49e8466f44827f050aef646608.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*m4Zqc_gZB5Gss8SE"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@homajob?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">斯科特·格雷厄姆</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="f089" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一年前，如果你问我是否认为有比使用Excel更好的方法来分析表格数据，我可能会摇头说“没有”，我职业生涯的前8年一直在提高我的Excel技能，从初级到高级，在公司财务部门担任各种角色。会计部门是一个很好的例子，说明微软Excel或谷歌Sheets在利用Python的Pandas软件包方面表现突出，因为它对非技术人员来说更加用户友好，并且易于创建报告，如账户对账。当你开始从一个更程序化的任务转向一个更深入的分析任务时——这就是我认为熊猫脱颖而出的地方。</p><h2 id="72a2" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">探索数据</h2><p id="aefe" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">当你收到一个很大的Excel文件时，除非你有很多外部构建的<a class="ae kv" href="https://en.wikipedia.org/wiki/Visual_Basic_for_Applications" rel="noopener ugc nofollow" target="_blank"> VBA </a>宏或其他插件，否则你需要大量的跑腿工作和Excel公式来熟悉这些数据。Pandas用两行非常简单的代码解决了这个难题:<strong class="ky ir"> df.info() </strong>和<strong class="ky ir"> df.describe()。</strong></p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="26da" class="ls lt iq mr b gy mv mw l mx my"><strong class="mr ir">#importing pandas</strong><br/>import pandas as pd</span><span id="afe9" class="ls lt iq mr b gy mz mw l mx my"><strong class="mr ir">#reading in tabular data of All-NBA teams</strong><br/>df = pd.read_csv('../Data/YoY_Analysis.csv', index_col = 0)</span><span id="7a07" class="ls lt iq mr b gy mz mw l mx my"><strong class="mr ir">#selecting needed columns</strong><br/>df = df[['YEAR','All_NBA', 'PLAYER', 'TEAM', 'Age', 'PTS', 'AST', 'TRB']]</span><span id="b2cc" class="ls lt iq mr b gy mz mw l mx my"><strong class="mr ir">#showing the first 5 rows of data</strong><br/>df.head()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/597192881acf86d4730ce596479e1d6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QhxxPsZ1NptlLKp0hUbV-w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">数据帧图像</p></figure><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="5a19" class="ls lt iq mr b gy mv mw l mx my"><strong class="mr ir">#pandas code giving statistical information for all numerical columns</strong><br/>df.describe()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/ecaa603286cc9cc754752c1bb8c9ace5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wavpoH-PSnV1QipBPLIgQg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">数据框架统计信息</p></figure><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="44a5" class="ls lt iq mr b gy mv mw l mx my"><strong class="mr ir">#pandas code showing count of all columns and data types</strong><br/>df.info()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/8fcde76137f5331f4cfe3ad9a7938e5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*cu4tTCUoAis3eP9KzCpRDw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">数据帧信息</p></figure><p id="47b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如前所述，导入数据后，仅用两行简单的代码，我们现在就有了所有数字数据的统计数据，包括<strong class="ky ir"> IQR的</strong>和每列的数据类型。我们不需要编写公式来计算每一列的最小值/最大值/平均值等，并且<strong class="ky ir"> df.info </strong>还向我们显示，我们的数据集中有一些缺失的信息，如TRB的699 <strong class="ky ir">非空计数</strong>所示——总反弹。经过研究，这是由于NBA直到1951年才正式追踪篮板。</p><h2 id="7f7c" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">重塑</h2><p id="8f32" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">Excel为它提供了一个非常有用的数据透视表工具和用户友好的GUI，但是它不允许您改变数据的形状，除非您在完成数据透视表的构建后选择全部并对其进行硬编码。Pandas提供了两个内置函数来帮助重塑/聚合你的数据集:<strong class="ky ir"> Groupby &amp; Pivot_Table。</strong></p><p id="8e74" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">几乎在我最初探索数据集的任何时候，我都倾向于使用<strong class="ky ir"> groupby </strong>,因为它快速、简单，并且在你想要开始创建视觉效果时非常有用。让我们再来看看我们的数据集，但假设我们对NBA球队每年的平均数据感兴趣。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="d77f" class="ls lt iq mr b gy mv mw l mx my"><strong class="mr ir">#creating a new dataframe aggregating average stats per year</strong><br/>annual_averages = df.groupby('YEAR')['PTS', 'AST','TRB'].mean()</span><span id="1480" class="ls lt iq mr b gy mz mw l mx my">annual_averages.head()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/105e9ad1ebf631c09151eb73911a27b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*yk9-bWlv8x_q4DFmCj9Mog.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">分组数据帧</p></figure><p id="a51e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在也可以很容易地绘制这些数据，显示平均值随时间的变化。这使我们能够快速识别1999年停摆缩短赛季，导致只有50场常规赛正在进行。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="efcb" class="ls lt iq mr b gy mv mw l mx my">annual_averages.plot()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/364340a09a4815f99f5289af65ba779b.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*d0jf8Csj6YCrfatVQ-jjjA.png"/></div></figure><p id="9d6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> Groupby </strong>和<strong class="ky ir"> pivot_table </strong>在熊猫身上的表现非常相似。主要区别在于<strong class="ky ir"> pivot_table </strong>允许在行和列上进行聚合。让我们通过旋转数据，然后绘制图表，来看看所有NBA球队的统计平均值。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="8256" class="ls lt iq mr b gy mv mw l mx my">pivot = df.pivot_table(df[['AST', 'PTS', 'TRB']], <strong class="mr ir">#selecting columns</strong><br/>               index = 'All_NBA', <strong class="mr ir">#selecting index</strong><br/>               aggfunc = np.mean, <strong class="mr ir">#selecting aggregate function</strong> <br/>               margins = True ) <strong class="mr ir">#column totals<br/></strong>pivot</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/00348fdcc8e6fc43bf482965c629ccdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*eFFltLDX2WWdOzt52C2RwQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">数据框架数据透视表</p></figure><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="c7af" class="ls lt iq mr b gy mv mw l mx my">pivot.plot(kind ='bar)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/ea4d134a863491bbf13a090a70a53557.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*DemF74W5_xLZEXtQ5T1-DQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">数据透视表绘图</p></figure><h2 id="ef21" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">结论</h2><p id="7234" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">如上所示，在探索数据时，Pandas是一个令人惊叹的工具。只需几行非常简单的代码，您就可以开始理解您正在处理的数据集。这个库还可以提供更多的东西，但是我希望这个快速浏览能够在下次您收到一个大的Excel文件并被要求提供分析见解时有所帮助。</p></div></div>    
</body>
</html>