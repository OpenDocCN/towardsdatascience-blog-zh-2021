<html>
<head>
<title>Propensity score estimation and visualization</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">倾向得分估计和可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/propensity-score-estimation-and-visualization-9c41f7ce5006?source=collection_archive---------23-----------------------#2021-03-19">https://towardsdatascience.com/propensity-score-estimation-and-visualization-9c41f7ce5006?source=collection_archive---------23-----------------------#2021-03-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cdca" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用模拟数据集</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/26fc3c7d6ab14c484a2f95c8104c945e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MNJNxy_pgoj0yfoa"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@filisantillan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Filiberto Santillán </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="b1c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我的领域——流行病学——以及其他各种科学领域，基于倾向评分(PS)的方法经常被用于混杂调整。在这篇文章中，我用两个不同的治疗变量(<code class="fe ls lt lu lv b">x1</code>和<code class="fe ls lt lu lv b">x2</code>)模拟了两个小数据集(N=20，000)，患病率分别为7%和20%。然后，我继续模拟两种不同的结果(<code class="fe ls lt lu lv b">y1</code>和<code class="fe ls lt lu lv b">y2</code>)，在模拟人群中的患病率分别为6%和16%。风险暴露对结果的真实影响为零。这篇文章很大程度上是受Desai等人(2017)的论文的启发。</p><h2 id="2a38" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated"><strong class="ak">这篇文章将涵盖哪些内容？</strong></h2><ul class=""><li id="26fa" class="mp mq iq ky b kz mr lc ms lf mt lj mu ln mv lr mw mx my mz bi translated">用两个不同暴露(<code class="fe ls lt lu lv b">x1</code>和<code class="fe ls lt lu lv b">x2</code>)和每个暴露的结果<code class="fe ls lt lu lv b">y1</code>和<code class="fe ls lt lu lv b">y2</code>)之间的零关联来模拟我自己的数据集(4个暴露-结果对)</li><li id="8f32" class="mp mq iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">计算每次暴露的倾向分数(PS ),修整暴露和未暴露之间PS分布的非重叠区域</li><li id="ce49" class="mp mq iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">运行几个逻辑回归模型</li></ul><p id="62b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇文章中，我只分享一些代码片段。这篇文章的所有代码版本可以在<a class="ae kv" href="https://www.elenadudukina.com/post/ps/2021-03-08-ps-estimation/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h2 id="37da" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">数据模拟</h2><p id="c054" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">我模拟了10个混杂因素，2个治疗预测因素，2个结果预测因素。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><h2 id="1f0b" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">分析</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/6bc1c4df066d81ec88eddadd5b4e466c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mhTS0V79CJkE6Sen.png"/></div></div></figure><p id="b68c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对暴露和结果之间关联的粗略分析表明，在估计值周围有一个较宽的95%置信区间，呈弱正相关。最大偏倚约为10%(对于两者中不太常见的结果，<code class="fe ls lt lu lv b">y1</code>)，在模拟人群中的患病率约为6%。)</p><p id="425b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">倾向得分</strong></p><p id="cc7a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我使用混杂因素和结果预测因素分别计算了每次暴露的倾向得分(PS)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/dc50d049beac37e0c45a8f68481a46b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1NkrZdavzGOJVivW.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/53a6c0410a2822f22bcf7958f5fc680e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BWW-r7f5aeJ_cXyB.png"/></div></div></figure><p id="c9e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">倾向评分(PS)分布在治疗组和未治疗组之间大部分重叠，因此非重叠区域的修整不会导致许多数据点的丢失。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/cefa37525aa986d634c3e6d9186c014f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IEHy4NlzKChNwhEK.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/da099a9d6ce1310187435776685a2756.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cpu1uhNWvx5Jk0oq.png"/></div></div></figure><p id="f18c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用倾向评分，我计算了标准化死亡率(SMR)权重，并将其用于未暴露人群的重新加权，就好像他们暴露了一样；然后，我比较了暴露和结果之间的粗略关联，传统调整的逻辑回归模型，以及通过SMR加权调整的模型。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/acfe81f8c4e5fd700b92a4889b4b6070.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8GzNhwzAXu0BEF53.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/42484cf2ac625ee0dbaf1c3c361f407f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KeQC1FZtO8lZ-HiW.png"/></div></div></figure><p id="f9bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">三种不同逻辑回归模型的比较揭示了以下情况:</p><ul class=""><li id="a02a" class="mp mq iq ky b kz la lc ld lf nl lj nm ln nn lr mw mx my mz bi translated">粗略的分析是不精确的，表明暴露(` x1 '，` x2 ')和结果(` y1 '，` y2 ')之间存在关联，而没有真正的关联(粗略分析的最大偏差约为14.5%)。</li><li id="f651" class="mp mq iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">逻辑回归模型中的常规调整产生了不精确的估计值，并提示弱相关性，包括一些暴露-结果对的反向相关性(最大偏差约为11%)。</li><li id="f8f1" class="mp mq iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">SMR加权产生了不精确的结果，类似于传统的调整，表明暴露和结果之间存在一些微弱的负相关(对于“x2”-“y1”暴露-结果对，观察到的最大偏差约为7.5%)。</li><li id="cba5" class="mp mq iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">虽然不确定性在所有三个分析中都是一个问题，但SMR加权法可以说产生了最接近真实(模拟)无效效应的点估计。</li></ul><h2 id="bdac" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">参考</h2><ol class=""><li id="72f0" class="mp mq iq ky b kz mr lc ms lf mt lj mu ln mv lr no mx my mz bi translated">德赛RJ，罗斯曼KJ，贝特曼BT，埃尔南德斯-迪亚兹S，Huybrechts KF。当暴露不频繁时，基于倾向评分的混杂调整精细分层方法。流行病学。2017;28(2):249–257.doi:10.1097/ede . 50000000000001</li></ol></div></div>    
</body>
</html>