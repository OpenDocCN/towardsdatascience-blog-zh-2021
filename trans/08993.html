<html>
<head>
<title>An Easy Beginner’s Guide to Git Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Git入门指南第2部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/an-easy-beginners-guide-to-git-part-2-a35bbbc89490?source=collection_archive---------15-----------------------#2021-08-19">https://towardsdatascience.com/an-easy-beginners-guide-to-git-part-2-a35bbbc89490?source=collection_archive---------15-----------------------#2021-08-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cd67" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">审查代码和撤销更改的Git基础知识</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3cd4494bc23167e8fe9428990e44a7dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QYEBAV8t8THISLqu"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">罗曼·辛克维奇在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="422b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你已经从我的文章<a class="ae ky" rel="noopener" target="_blank" href="/an-easy-beginners-guide-to-git-2d5a99682a4c">中学习了如何使用Git的基础知识，Git第1部分</a>的简单初学者指南，让我们做更多的练习来熟悉Git的使用和导航。</p><p id="5427" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您已经看到了Git如何跟踪所做的更改，谁做了更改，他们何时做了更改，以及他们为什么做了更改。现在我们将学习如何利用这个版本控制软件来帮助我们审查不同版本的代码以及撤销更改。</p><p id="0dde" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">坚持我们之前的蔬菜水果主题，开始吧！</p><p id="2646" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">审查代码变更</strong></p><p id="0271" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">A.将当前代码与上次提交的代码进行比较</p><p id="a012" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">B.查看以前提交的文件</p><p id="3a11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">C.在提交之间检查代码</p><p id="6481" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">撤销更改</strong></p><p id="f06c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">A.撤消添加到临时区域</p><p id="4f59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">B.撤消您的上次提交</p><p id="5e64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">C.撤消当前更改并恢复到上次提交时的版本</p><p id="72d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">D.撤消提交到错误的分支</p><h1 id="2cc0" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">检查代码更改</h1><h2 id="4f91" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">A.将当前代码与上次提交的代码进行比较</h2><p id="3373" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">让我们添加一些新代码，并学习如何检查您所做的具体更改。在veggies.py文件中，复制以下代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:作者</p></figure><blockquote class="ng nh ni"><p id="5d36" class="kz la nj lb b lc ld ju le lf lg jx lh nk lj lk ll nl ln lo lp nm lr ls lt lu im bi translated">代码细节:上面名为veg_dict的字典保存了蔬菜的名称和我们收取的单位价格。我们有一个客户从我们这里订购，order1存储了我们提供给该客户的商品名称和数量(以千计)。for循环计算order1的总成本。</p></blockquote><p id="56c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">保存文件，然后用我们的新代码提交。如果您忘记了，下面是在终端中使用的命令。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="f144" class="mn lw it no b gy ns nt l nu nv">git add veggies.py<br/>git commit -m "calculate veggie order cost"</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/5ce01dda230c56e1d2f1636779ca2635.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uVYmlgLdLS6JQC8Y.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@neonbrand?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> NeONBRAND </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="f3f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的敌人通货膨胀来袭了！我们必须提高蔬菜的价格，所以让我们用上涨的价格更新我们的字典。一切都上涨了。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="d557" class="mn lw it no b gy ns nt l nu nv">veg_dict = {'cabbage': 3.57, 'carrot': 2.99, 'spinach': 4.13, 'asparagus': 3.56, 'artichoke': 4.00, 'lettuce': 3.83}</span></pre><p id="c982" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，让我们也添加水果到我们的市场。水果价格存储在变量fruit_dict中。我们最喜欢的消费者保持同样数量的蔬菜，但也在他们的订单中添加了水果。请参见下面的新代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:作者</p></figure><p id="de03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在veggies.py文件中粘贴新代码后，保存它。让我们转到命令行并键入以下内容，以比较对上次提交的更改。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="dbd8" class="mn lw it no b gy ns nt l nu nv">git diff</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/68a0b23dc514aaad58c0f6153fe69f9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gMJWfrXOkYK1vXEyK3HmWA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">git diff来源:作者</p></figure><p id="8680" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在终端输出中一行一行地看到到底做了什么更改！这不是很神奇吗？！</p><p id="017e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">红色显示的是我们上次提交时删除的代码，绿色显示的是上次提交时添加的代码。如果代码是白色的，这意味着没有对该行进行任何更改。</p><p id="6c5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在回顾了这些变化之后，我们很满意。所以让我们练习再做一次提交。如果你已经忘记了，这又是一次。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="cb4e" class="mn lw it no b gy ns nt l nu nv">git add veggies.py<br/>git commit -m "updated veggie prices and added fruits"</span></pre><h2 id="517a" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">B.查看以前提交的文件</h2><p id="bb1f" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">比方说，您想回过头来看看上一次提交的代码。通货膨胀发生前蔬菜的价格是多少？</p><p id="00da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一步是找到您想要查看的提交。您可能还记得本文的第1部分，如果您使用<code class="fe ny nz oa no b">git log --oneline</code>，您可以在左边看到黄色的惟一提交散列代码和白色的提交消息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/f0f15d55d3a5ed2845afad6af211a736.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ToqNl0ymPqZ6yiJeWNWk1A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">git日志—在线—来源:作者</p></figure><p id="c0b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">包含我们的原始蔬菜价格的提交哈希代码位于6398269，如上面的截图所示。就像我们如何使用git checkout来切换分支一样，我们可以使用git checkout来切换到以前的提交。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="a6e5" class="mn lw it no b gy ns nt l nu nv">git checkout 6398269</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/51bff9ab7ecf1c641eb5eb1ba6a73b2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3p4m_Akh_BlutOnWnbywkg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">git checkout —来源:作者</p></figure><p id="036e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能会看到这条关于“分离头”状态的消息。这是怎么回事？把头想象成一个指针。它指向您正在查看的当前提交。</p><p id="076e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">回头看看前面使用<code class="fe ny nz oa no b">git log --oneline</code>时得到的输出。注意最近一次提交旁边的单词HEAD。HEAD - &gt; master告诉我们，指针正指向我们当前所在的master分支。也就是说，它指向主分支中的最新提交。大多数时候，HEAD会指向分支名称。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/f0f15d55d3a5ed2845afad6af211a736.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ToqNl0ymPqZ6yiJeWNWk1A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">git日志来源:作者</p></figure><p id="71f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们切换到提交6398269，如果您再次键入<code class="fe ny nz oa no b">git log --oneline</code>，您会注意到单词HEAD现在就在下面截图中我们切换到的提交旁边。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/171799ed301790cfd53b942a7c06ed24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rww4P3_3fLU45-bKFnl9CA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:作者</p></figure><p id="caf9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个插图告诉你头指向哪里。在我们使用<code class="fe ny nz oa no b">git checkout 6398269</code>之前，头部是指向主分支的，如左图所示。在我们完成git检验之后，头部现在指向我们的commit 6398269。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/8a33d88bb8cb3ec90545ee65074f5e22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t2gjgKKFrYHXXG0fn3OEuw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:作者</p></figure><p id="69c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们之前得到的分离HEAD消息只是告诉我们，指针当前指向一个特定的提交，而不是当前的分支。这听起来很糟糕，但实际上这更像是一个警告信息，而不是错误信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/32f2e853f40e550e0d71d99fc8f308a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/0*MKCbqbvYyOr21ynv.jpg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">分离的头部——由<a class="ae ky" href="https://unsplash.com/@rickmontii?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">里克·蒙泰罗</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="1881" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据输出的消息，在这种分离状态下，“您可以四处查看，进行实验性的更改并提交它们，您可以通过切换回一个分支来放弃在这种状态下所做的任何提交，而不会影响任何分支。”本质上，您可以在这种状态下运行实验，然后决定是保留还是删除它们。</p><p id="8156" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于本练习，我们不做任何更改。我们只是查看包含蔬菜旧价格的代码行。打开veggies.py文件，您将看到来自6398269提交的代码。这是我们以前的价格！是不是很酷？</p><p id="9e36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好了，现在让我们回到最近的提交。就是，我们来附个头吧！本质上，我们把头指向我们的主分支。你能猜到该用什么命令吗？</p><p id="2ad3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你没有，没关系。下次你会得到它的。我们将使用<code class="fe ny nz oa no b">git checkout master</code>。头部现在应该像下面这样连接。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/13891ba161a5cf3ef508bca54a0d4b46.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*LJNb-UtjiATDO4DhbFap6A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:作者</p></figure><h2 id="882f" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">C.在提交之间检查代码</h2><p id="dcf2" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">如果您想比较不同提交的文件之间的差异，您可以很容易地做到这一点。</p><p id="2ddc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，让我们将另一组代码更改添加到veggies.py文件中，以包含第二个订单，如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="452f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">保存并再次练习提交。希望你现在已经记住了！</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="e544" class="mn lw it no b gy ns nt l nu nv">git add veggies.py<br/>git commit -m "add second order"</span></pre><p id="6949" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们想要比较提交6398269和提交d224761的代码。两者有什么区别？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/c48f749489d81463db340f28e6a1b8f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*6vUb0N_ggyBJje1XrlAySA.png"/></div></figure><p id="ffae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<code class="fe ny nz oa no b">git diff 6398269 d224761</code></p><p id="246b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与前面类似，您可以看到绿色的代码行来自我们最新的代码，红色的代码行来自之前的提交。现在你可以比较和对比。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/437364ec73165ab99ff7dc27d898a648.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5vvOFyHozVPvGeczMY3trQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">git diff来源:作者</p></figure><p id="00d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你现在是审查代码变更的专家了。让我们继续学习如何撤销更改。</p><h1 id="0c3d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">撤消更改</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/03af61d2657d7744e77d2c1ad6c858ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9m41LfQbyZ63rA98Q2Ht-A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@felipepelaquim?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">菲利佩佩拉昆</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="937c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时我们会犯错误，只希望时光能倒流。幸运的是，Git为您提供了返回并撤销错误的能力。让我们来看几个你在开始时可能会遇到的不同场景。</p><h2 id="84d3" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">A.撤消添加到临时区域</h2><p id="0913" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">如果您向临时区域添加了不想提交的文件，可以在提交之前将其取出。</p><p id="1c00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为对您在我的文章的第1部分中学到的内容的一个提醒，您首先使用<em class="nj"> git add </em>命令将变更移动到暂存区域。让我们来学习如何撤销一个<code class="fe ny nz oa no b">git add</code>！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/223dbf6beaf55e653a6179ba8bf75fb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5J3_094j4P_E5lg9unsSig.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:作者</p></figure><p id="ba4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这个例子，让我们在您的工作目录中创建一个名为my_notes.txt的新文件。然后使用以下命令将工作目录中所有已更改的项目添加到您的文件夹中。</p><p id="236d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ny nz oa no b">git add .</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/cfcdf2020cf2aac7e922bbe47214c183.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fIARD2K303obPv3oRR6E-A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:作者</p></figure><p id="c1bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设您不想将文件<em class="nj"> my_notes.txt </em>添加到暂存区，因为该文件只是您不想提交的注释。</p><p id="cfae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要撤消对临时区域的添加，可以使用以下命令。</p><p id="48c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ny nz oa no b">git reset my_notes.txt</code></p><p id="64b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将从您的暂存区中删除文件<em class="nj"> my_notes.txt </em>。</p><p id="77fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">类似于使用<code class="fe ny nz oa no b">git add .</code>添加所有文件，您可以使用<code class="fe ny nz oa no b">git reset .</code>从暂存区移除所有文件。</p><p id="e432" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">做一个<code class="fe ny nz oa no b">git status</code>就可以自己看到<em class="nj"> my_notes.txt </em>已经不在暂存区了。</p><h2 id="f531" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">B.撤消您的上次提交</h2><p id="1659" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">如果你已经完成了一个<code class="fe ny nz oa no b">git commit</code>，不要担心，有一个方法可以撤销<code class="fe ny nz oa no b">git commit</code>！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/aabe6615f8f7f4ee36eb33b6630923e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lyJlxsV7UsZ44BkdjbEzYg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:作者</p></figure><p id="18b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们快速制作一个测试提交示例。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="962c" class="mn lw it no b gy ns nt l nu nv">git add my_notes.txt<!-- --> <br/>git commit -m “added my_notes”<br/>git log</span></pre><p id="a1b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要取消提交最后一次提交，您需要做的就是</p><p id="db63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ny nz oa no b">git reset --soft HEAD^</code></p><p id="95d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在继续执行<code class="fe ny nz oa no b">git log</code>,这样你就可以看到你的最后一次提交已经被撤销了。</p><blockquote class="ng nh ni"><p id="4b8a" class="kz la nj lb b lc ld ju le lf lg jx lh nk lj lk ll nl ln lo lp nm lr ls lt lu im bi translated">记住，这只是为了撤销<code class="fe ny nz oa no b">git commit</code>功能。这意味着<em class="it"> my_notes.txt </em>现在在暂存区。如果你做<code class="fe ny nz oa no b">git status</code>，可以看到文件在暂存区等待。如果要将其从暂存区中删除，请参考上一节。</p></blockquote><p id="6498" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想撤销最后两次提交，您可以使用下面的代码。</p><p id="63af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ny nz oa no b">git reset --soft HEAD~2</code></p><p id="abc0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用您想要撤消的任意数量的提交替换2。</p><blockquote class="ng nh ni"><p id="aa3e" class="kz la nj lb b lc ld ju le lf lg jx lh nk lj lk ll nl ln lo lp nm lr ls lt lu im bi translated">另一个注意事项。<code class="fe ny nz oa no b">git reset</code>最适合在计算机上撤销本地更改时使用。</p></blockquote><h2 id="edde" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">C.撤消当前更改并恢复到上次提交时的版本</h2><p id="58a8" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">如果您一直在处理一个文件，并且不喜欢您添加的任何新代码，您可以恢复到上次提交时的版本。</p><p id="af6d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，打开veggies.py，将以下内容复制并粘贴到第1行。</p><p id="73f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ny nz oa no b">#This is a test comment.</code></p><p id="2f17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">继续保存文件。然后转到您的终端，键入以下内容:</p><p id="f1da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ny nz oa no b">git checkout veggies.py</code></p><p id="e139" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在回到veggies.py文件，您可以看到注释已经消失，代码与上次提交的代码完全相同。</p><p id="c2cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您对多个文件进行了更改，您可以使用<code class="fe ny nz oa no b">git checkout .</code>将所有文件恢复到上次提交时的版本。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/01dfc95cde5c96a085326339fb5c5e18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iuCh39oohzIC8Hiy.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">汉斯-尤尔根·马格在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure></div><div class="ab cl on oo hx op" role="separator"><span class="oq bw bk or os ot"/><span class="oq bw bk or os ot"/><span class="oq bw bk or os"/></div><div class="im in io ip iq"><p id="c42d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你通过了第1部分和第2部分，你真的做得很好。Git可能令人生畏。现在只是从这里开始练习，从错误中学习。还有很多Git命令我没有在这些文章中介绍，所以大胆地去Google上继续学习吧！</p><p id="106b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！如果你想在我有新文章发表时第一个知道，请随时点击<a class="ae ky" href="https://julia-kho.medium.com/subscribe" rel="noopener"> <strong class="lb iu">订阅这里的</strong> </a> <strong class="lb iu">。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/b9652b830651be26bf41dcd72946d322.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*k33baY-uTgCQR_SF8Y-3Ag.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:作者</p></figure></div></div>    
</body>
</html>