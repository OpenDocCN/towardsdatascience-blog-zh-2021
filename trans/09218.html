<html>
<head>
<title>Monkeying around with Alexa Routines</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">摆弄Alexa程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/monkeying-around-with-alexa-routines-3f3f95795922?source=collection_archive---------13-----------------------#2021-08-26">https://towardsdatascience.com/monkeying-around-with-alexa-routines-3f3f95795922?source=collection_archive---------13-----------------------#2021-08-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="78b4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">最后一种编程调用Alexa例程的方法</h2></div><p id="c913" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您正在寻找一种在代码中调用Alexa例程的方法，您已经找到了合适的文章。我将向你展示如何使用免费的Alexa应用程序<a class="ae le" href="https://app.voicemonkey.io/" rel="noopener ugc nofollow" target="_blank">语音猴</a>，在任何程序和你的Alexa之间架起一座桥梁。</p><p id="2676" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lf">你为什么要这么做？</em></p><p id="ab6e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可能有大量有创意的用例，但我想到了两件事:</p><ol class=""><li id="4e08" class="lg lh it kk b kl km ko kp kr li kv lj kz lk ld ll lm ln lo bi translated">在代码中与支持Alexa的智能设备进行交互</li><li id="4821" class="lg lh it kk b kl lp ko lq kr lr kv ls kz lt ld ll lm ln lo bi translated">在你的代码中使用你的Alexa作为某种语音提示系统</li></ol><p id="6458" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lf">这种方法最好的一点是它是语言不可知的。</em>一旦你设置好了，就只需要一个GET请求来调用你的Alexa程序。</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi lu"><img src="../Images/09430d4df518a1891154186a5a128326.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZhkzNhiqe2OP0lY5umnAog@2x.jpeg"/></div></div><p class="mg mh gj gh gi mi mj bd b be z dk translated">Alexa已经可以控制这台空调了…如果我能用树莓Pi或者无服务器功能之类的东西控制Alexa岂不是很酷？(图片由作者提供)</p></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h2 id="210c" class="mr ms it bd mt mu mv dn mw mx my dp mz kr na nb nc kv nd ne nf kz ng nh ni nj bi translated">我的问题背景</h2><p id="7ae2" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr nm kt ku kv nn kx ky kz no lb lc ld im bi translated">当我在寻找用Python程序控制我的Alexa空调的方法时，我遇到了语音猴子。</p><p id="0ba2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我的“智能”空调应该将房间保持在一定的温度，但根据我的经验，它要么太冷，要么太热。我可以通过简单地与Alexa交谈来打开/关闭我的空调并设置温度——这使得调整事情更容易——但我与Alexa交谈的次数有点太多了。为什么不让程序替我做呢？</p><p id="54be" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我有一个备用的Raspberry Pi来运行我的程序，连接到DHT11温度传感器来监控温度——我的计划是监控当前温度，并根据需要打开或关闭我的空调，以保持更可预测的温度。</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi lu"><img src="../Images/51a7d7e4a647f5ce800c00ae54d10f49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MC0dbv3qa1UPAJsHnK-iWA@2x.jpeg"/></div></div><p class="mg mh gj gh gi mi mj bd b be z dk translated">我值得信赖的树莓Pi 3连接到DHT11传感器。<a class="ae le" href="https://components101.com/sensors/dht11-temperature-sensor" rel="noopener ugc nofollow" target="_blank">这种便宜的小传感器可以测量精确到1摄氏度和1%湿度的温度和湿度。(图片由作者提供)</a></p></figure><p id="9ae2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">似乎可行——但有一件事让这个计划有点困难。</p><p id="30d2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">如何通过树莓Pi与我的AC进行交互？</strong></p><p id="a1c5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">是的，也许我可以用电线把我的树莓皮接到我的交流电上，但是我真的没有摆弄物理电子设备的背景。我的AC带有一个遥控器——也许我可以用一个带有红外发射器的Raspberry Pi来重放来自AC遥控器的命令？这是可行的，但是记录和定义这些按钮的工作量很大。</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi np"><img src="../Images/643caae016ab502c9cbe01e4e1e5c15f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CxMdHnh-PxVDkBZa4jDJ4g@2x.jpeg"/></div></div><p class="mg mh gj gh gi mi mj bd b be z dk translated">您可以通过带有Raspberry Pi和红外增强器的红外遥控器来控制任何可控制的设备。我以前用上图的设置做过，但是设置、记录所有按钮的红外输出以及找到一个红外发射器可以清晰地看到你想要控制的设备的地方需要很多工作——这实际上是最后的手段。(图片由作者提供)</p></figure><p id="a21c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我的结论？我的AC是一款智能设备，内置了某种智能家居接口，最好利用这一点。制造商已经为我们做了大量工作来创建Alexa界面，所以我们就用它吧。</p><p id="87c9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">但是我们如何与这款智能设备的Alexa界面互动呢？</strong>目前还没有真正官方支持的Alexa方式来做到这一点。</p><p id="552b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">浏览几年前的一些论坛，我看到一个建议，写一个程序来执行文本到语音转换，并将语音记录发送到Alexa API。它可以让你调用任何你想要的Alexa命令，但这有点不方便，因为你需要一种方法来自动刷新你的亚马逊cookies(根据我的经验，我每次都需要填写验证码)。</p><p id="1aea" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一个建议甚至更笨拙——使用两个相邻的Alexa设备，并使用这个<a class="ae le" href="https://github.com/walthowd/ha-alexa-tts" rel="noopener ugc nofollow" target="_blank">主动提供的Alexa文本到语音转换项目</a>，让第一个Alexa设备说出你给它的任何命令，第二个Alexa设备实际上执行命令。这将是可行的——但它确实需要一个额外的Alexa设备，而且让这些东西一直互相说话肯定会很烦人。更不用说它可能会有点慢，而且不可靠(在命令过程中考虑像背景聊天这样的事情可能会把事情弄糟)。</p><p id="091f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想在几年前做类似的事情，这将是你不得不忍受的地狱。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="9705" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">谢天谢地，我发现了一个更近的建议，使用<a class="ae le" href="https://app.voicemonkey.io/" rel="noopener ugc nofollow" target="_blank">语音猴子</a>作为一个API来暴露你的Alexa例程，与其他选择相比，这似乎是显而易见的。</p><p id="05d9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Alexa例程是Alexa的一个功能，让你在你的Alexa生态系统中做类似IFTTT(如果这个，那么那个)的事情。使用Alexa例程，您可以为一系列命令创建自己的快捷方式，这些命令可以链接到自定义触发器。</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi nq"><img src="../Images/96fd47da6a660e180d6a8ec14b654d96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EemDGYxKo1aPVUXAjwASkw@2x.jpeg"/></div></div><p class="mg mh gj gh gi mi mj bd b be z dk translated">Alexa例程可以让你为任何你想要的触发器串起一系列的Alexa命令。这是我从Reddit上重新创建的一个，我觉得很有趣。(图片由作者提供)</p></figure><p id="fb17" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">简单来说，它是如何工作的:语音猴子让你创造猴子，他们称之为“虚拟智能家庭门铃”</p><p id="04d4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可以把每只猴子想象成它自己独特的虚拟按钮(显示为Alexa支持的智能设备)，可以通过向分配给猴子的URL发送GET请求来按下它。通过Alexa例程，你可以使用猴子作为Alexa例程的触发器(它可以调用你的Alexa支持的几乎任何功能)。很酷吧？</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi nr"><img src="../Images/d0b164b1dc0c1bd6f46e7e121c9f83d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E1e_AY34XAwRjNYkOJrFqg.png"/></div></div><p class="mg mh gj gh gi mi mj bd b be z dk translated">你可以看到我创造的猴子。每只猴子都被分配了一个唯一的URL，我可以通过发送GET请求来触发它。Voice Monkey为您提供了一个很好的触发测试来测试您的创作，还提供了一个<a class="ae le" href="https://app.voicemonkey.io/url" rel="noopener ugc nofollow" target="_blank">游乐场</a>部分，它提供了一个UI来定制您的GET请求。(图片由作者提供)</p></figure><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi nq"><img src="../Images/0aaf069bb2122bd88f67a53a18b86749.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ieAdl_fdhC5c5ciC8v6aQ@2x.jpeg"/></div></div><p class="mg mh gj gh gi mi mj bd b be z dk translated">在你的Alexa程序中设置你的猴子为“当”触发器。这个Alexa例程现在可以通过GET请求调用。(图片由作者提供)</p></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h2 id="696f" class="mr ms it bd mt mu mv dn mw mx my dp mz kr na nb nc kv nd ne nf kz ng nh ni nj bi translated">使用语音猴进行设置</h2><p id="ef5e" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr nm kt ku kv nn kx ky kz no lb lc ld im bi translated">设置起来相当容易。下面是<a class="ae le" href="https://voicemonkey.io/docs" rel="noopener ugc nofollow" target="_blank">语音猴快速入门指南</a>提供的一些说明。</p><blockquote class="ns nt nu"><p id="112f" class="ki kj lf kk b kl km ju kn ko kp jx kq nv ks kt ku nw kw kx ky nx la lb lc ld im bi translated">1.你首先需要使用Alexa应用程序<a class="ae le" href="https://skills-store.amazon.com/deeplink/dp/B08C6Z4C3R" rel="noopener ugc nofollow" target="_blank">启用语音猴子技能</a>并链接你的亚马逊账户。</p><p id="dc98" class="ki kj lf kk b kl km ju kn ko kp jx kq nv ks kt ku nw kw kx ky nx la lb lc ld im bi translated">2.<a class="ae le" href="https://voicemonkey.io/login" rel="noopener ugc nofollow" target="_blank">使用您用于链接技能的同一个亚马逊帐户登录</a>到语音猴。</p><p id="a8b0" class="ki kj lf kk b kl km ju kn ko kp jx kq nv ks kt ku nw kw kx ky nx la lb lc ld im bi translated">3.完成设置，然后转到<a class="ae le" href="https://app.voicemonkey.io/monkeys" rel="noopener ugc nofollow" target="_blank">“管理猴子”</a>生成您的第一只猴子。</p><p id="f58a" class="ki kj lf kk b kl km ju kn ko kp jx kq nv ks kt ku nw kw kx ky nx la lb lc ld im bi translated">4.在Alexa应用中创建一个新的例程，以你的猴子为触发器(“当这发生时”&gt;“智能家居”&gt;“你的猴子名”)。</p><p id="975e" class="ki kj lf kk b kl km ju kn ko kp jx kq nv ks kt ku nw kw kx ky nx la lb lc ld im bi translated">5.访问仪表板的<a class="ae le" href="https://app.voicemonkey.io/url" rel="noopener ugc nofollow" target="_blank">游乐场</a>部分，测试你的新猴子。</p><p id="aa1c" class="ki kj lf kk b kl km ju kn ko kp jx kq nv ks kt ku nw kw kx ky nx la lb lc ld im bi translated">6.(可选)-要发布公告，您必须打开语音猴技能，作为您的例行程序中的最后一个动作。</p></blockquote><p id="d201" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦你完成了这个设置，你应该准备好启动你的猴子了！</p><h2 id="d245" class="mr ms it bd mt mu mv dn mw mx my dp mz kr na nb nc kv nd ne nf kz ng nh ni nj bi translated">尝试你的第一个请求</h2><p id="69e8" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr nm kt ku kv nn kx ky kz no lb lc ld im bi translated">使用以下URL中的自定义值替换<code class="fe ny nz oa ob b">MY_ACCESS_TOKEN</code>、<code class="fe ny nz oa ob b">MY_SECRET_TOKEN</code>和<code class="fe ny nz oa ob b">MY_MONKEY_NAME</code>，并尝试从浏览器导航到该URL。</p><p id="d1f0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe ny nz oa ob b"><a class="ae le" href="https://api.voicemonkey.io/trigger?access_token=MY_ACCESS_TOKEN&amp;secret_token=MY_SECRET_TOKEN&amp;monkey=MY_MONKEY_NAME&amp;announcement=hello%20world" rel="noopener ugc nofollow" target="_blank">https://api.voicemonkey.io/trigger?access_token=MY_ACCESS_TOKEN&amp;secret_token=MY_SECRET_TOKEN&amp;monkey=MY_MONKEY_NAME&amp;announcement=hello%20world</a></code></p><p id="5e7f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你应该看到你的猴子被触发了。如果你在你的Alexa例程中添加了语音猴子技能作为最后一个动作，你应该会听到Alexa说“你好，世界”。</p><p id="4b4c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，如果您想让您的程序向这个URL发送GET请求并进行自定义通知，您可以在URL中的<code class="fe ny nz oa ob b">announcement</code>参数中填入您喜欢的任何内容——只需确保使用编码URL中空格字符的<code class="fe ny nz oa ob b">%20</code>进行分隔。</p><p id="678f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如在Python中</p><pre class="lv lw lx ly gt oc ob od oe aw of bi"><span id="9a4d" class="mr ms it ob b gy og oh l oi oj">import requests</span><span id="fb5f" class="mr ms it ob b gy ok oh l oi oj">def format_url(s):<br/>    return s.split().join('%20')</span><span id="fce8" class="mr ms it ob b gy ok oh l oi oj">url = '<a class="ae le" href="https://api.voicemonkey.io/trigger?access_token=MY_ACCESS_TOKEN&amp;secret_token=MY_SECRET_TOKEN&amp;monkey=MY_MONKEY_NAME&amp;announcement=hello%20world" rel="noopener ugc nofollow" target="_blank">https://api.voicemonkey.io/trigger?access_token=MY_ACCESS_TOKEN&amp;secret_token=MY_SECRET_TOKEN&amp;monkey=MY_MONKEY_NAME&amp;announcement=</a>{}'</span><span id="035f" class="mr ms it ob b gy ok oh l oi oj">temp = 72 # This might change--we want to Alexa to announce it</span><span id="22f4" class="mr ms it ob b gy ok oh l oi oj">announcement = format_url(f'Temperature is {str(temp)}')<br/>requests.get(url.format(announcement))</span></pre><h2 id="0224" class="mr ms it bd mt mu mv dn mw mx my dp mz kr na nb nc kv nd ne nf kz ng nh ni nj bi translated">结论</h2><p id="06b1" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr nm kt ku kv nn kx ky kz no lb lc ld im bi translated">既然你已经听说过语音猴子，如果你想玩一些与你的定制程序挂钩的Alexa例程，就去试试吧。</p><p id="820f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在撰写本文时，Voice Monkey对多达300只猴子完全免费。这是300个独特的Alexa例程，你可以通过语音猴API暴露。</p><p id="1d28" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">提醒一句:虽然Voice Monkey现在是免费的，但它是一项需要提供商付费运营的服务。</p><p id="6378" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae le" href="https://voicemonkey.io/docs" rel="noopener ugc nofollow" target="_blank">根据文件</a></p><blockquote class="ns nt nu"><p id="b3d2" class="ki kj lf kk b kl km ju kn ko kp jx kq nv ks kt ku nw kw kx ky nx la lb lc ld im bi translated">语音猴子是免费的，而在测试阶段，我们计划让它尽可能长时间免费。</p><p id="657b" class="ki kj lf kk b kl km ju kn ko kp jx kq nv ks kt ku nw kw kx ky nx la lb lc ld im bi translated">我们很乐意永久免费提供这项服务，但幕后存在基础设施和维护成本。</p><p id="0516" class="ki kj lf kk b kl km ju kn ko kp jx kq nv ks kt ku nw kw kx ky nx la lb lc ld im bi translated">我们将尽可能保持免费，如果需求给成本带来太大压力，如果我们引入定价结构，我们会让你知道。</p></blockquote><p id="973f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不管未来的价格结构如何，现在都可以免费试用和修改！</p><p id="82fd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，我不以任何方式隶属于语音猴，不能保证任何可靠性，他们的服务正常运行时间。<strong class="kk iu">这不是一个付费广告</strong>，我只是在展示我个人使用案例中喜欢使用的一项服务。</p></div></div>    
</body>
</html>