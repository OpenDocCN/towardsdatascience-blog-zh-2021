<html>
<head>
<title>How to Create Animated Plots in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在R中创建动画情节</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-create-animated-plots-in-r-adf53a775961?source=collection_archive---------7-----------------------#2021-06-12">https://towardsdatascience.com/how-to-create-animated-plots-in-r-adf53a775961?source=collection_archive---------7-----------------------#2021-06-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/05ea7fc98f43772ba975977c63b915d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p9bV8qyiYrQwftypHXTkcg.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">使用来自<a class="ae jg" href="https://1.envato.market/c/2346717/628379/4662" rel="noopener ugc nofollow" target="_blank"> envato elements </a>的<a class="ae jg" href="https://elements.envato.com/user/alexdndz" rel="noopener ugc nofollow" target="_blank"> alexdndz </a>的图像创建(经许可)。</p></figure><h2 id="75fe" class="jh ji jj bd b dl jk jl jm jn jo jp dk jq translated" aria-label="kicker paragraph">循序渐进的教程</h2><div class=""/><div class=""><h2 id="25df" class="pw-subtitle-paragraph kp js jj bd b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dk translated">使用gganimate R包制作时间序列数据的动画</h2></div><p id="d02c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">一张图片胜过千言万语，图表和情节提供的见解也是如此。数据可视化是任何数据科学项目的重要组成部分，因为它允许以图形和图表的形式有效地讲述数据。即使是静态的情节也能传达重要的信息并提供巨大的价值，想象一下一个动画情节能做什么来突出情节的特定方面。</p><p id="82aa" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">汉斯·罗斯林在他的<a class="ae jg" href="https://www.ted.com/playlists/474/the_best_hans_rosling_talks_yo" rel="noopener ugc nofollow" target="_blank"> TED演讲</a>中关于Gapminder数据(他是该数据的创始人)的动画情节吸引了我们所有人，因为它将数据带入了生活。</p><p id="f8ee" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在本文中，您将学习如何使用<code class="fe md me mf mg b">ggplot</code>和<code class="fe md me mf mg b">gganimate</code> R包为时间序列数据集创建令人惊叹的R动画图。</p><p id="cd05" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">观看附带的YouTube视频:<a class="ae jg" href="https://youtu.be/z9J78rxhcrQ" rel="noopener ugc nofollow" target="_blank">https://youtu.be/z9J78rxhcrQ</a></p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="2ad3" class="mo mp jj bd mq mr ms mt mu mv mw mx my ky mz kz na lb nb lc nc le nd lf ne nf bi translated">1.我们今天构建的动画情节</h1><p id="96b7" class="pw-post-body-paragraph lh li jj lj b lk ng kt lm ln nh kw lp lq ni ls lt lu nj lw lx ly nk ma mb mc im bi translated">今天，我们将构建Gapminder数据集的动画散点图。特别是，你会看到这个情节是由大陆分割的(分成不同的子情节)，而不是在同一个情节中(这可能会很混乱)。</p><p id="17ee" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">动画情节将使用<code class="fe md me mf mg b">ggplot2</code>和<code class="fe md me mf mg b">gganimate</code> R软件包构建。</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nm"><img src="../Images/e080223030b91cc8387763f2da544fa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*KePgZA10Ym-GZsyhgUXO-w.png"/></div></div></figure><p id="bbde" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">下面展示的是我们今天构建的动画剧情(来源:<a class="ae jg" href="https://gganimate.com/" rel="noopener ugc nofollow" target="_blank"> gganimate </a>)。</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nr"><img src="../Images/ce6affc9d837cdf7c21698d9143fbfb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8YcgMcqPGV5nr9Vd9WLJrw.gif"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">使用ggplot和gganimate创建的Gapminder数据集的动画散点图。</p></figure><h1 id="708c" class="mo mp jj bd mq mr ns mt mu mv nt mx my ky nu kz na lb nv lc nc le nw lf ne nf bi translated">2.编码环境</h1><p id="448b" class="pw-post-body-paragraph lh li jj lj b lk ng kt lm ln nh kw lp lq ni ls lt lu nj lw lx ly nk ma mb mc im bi translated">现在，启动您选择的IDE，无论是RStudio、Kaggle笔记本还是普通的老式R终端。在这个编码环境中，你将输入后面提到的代码。</p><p id="29c5" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我个人最喜欢的R语言编码应该是使用免费开源的RStudio  IDE。</p><h1 id="7fd0" class="mo mp jj bd mq mr ns mt mu mv nt mx my ky nu kz na lb nv lc nc le nw lf ne nf bi translated">3.安装必备的R包</h1><p id="5627" class="pw-post-body-paragraph lh li jj lj b lk ng kt lm ln nh kw lp lq ni ls lt lu nj lw lx ly nk ma mb mc im bi translated">在本教程中，我们使用4 R包，包括<code class="fe md me mf mg b">gapminder</code>、<code class="fe md me mf mg b">ggplot2</code>、<code class="fe md me mf mg b">gganimate</code>和<code class="fe md me mf mg b">gifski</code>。</p><p id="b2ec" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">要安装这些R包，请在R终端中输入以下内容(无论是直接输入R终端、RStudio中的R终端还是Kaggle笔记本的代码单元。</p><pre class="nn no np nq gt nx mg ny nz aw oa bi"><span id="a9a1" class="ob mp jj mg b gy oc od l oe of">install.packages(c('gapminder','ggplot2','gganimate','gifski'))</span></pre><p id="c07b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在让我们来看看为什么我们要使用上面的R包。</p><ul class=""><li id="3a17" class="og oh jj lj b lk ll ln lo lq oi lu oj ly ok mc ol om on oo bi translated"><code class="fe md me mf mg b">gapminder</code>包含我们在本教程中使用的<a class="ae jg" href="https://www.gapminder.org/data/" rel="noopener ugc nofollow" target="_blank"> Gapminder </a>时间序列数据集的摘录。</li><li id="7ad5" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><code class="fe md me mf mg b">ggplot2</code>允许我们创建出色的数据可视化，即散点图</li><li id="1e15" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><code class="fe md me mf mg b">gganimate</code>允许我们给剧情添加动画</li><li id="0494" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><code class="fe md me mf mg b">gifski</code>允许我们将动画渲染为GIF文件格式(GIF是一种流行的动画图像格式)。</li></ul><h1 id="94ba" class="mo mp jj bd mq mr ns mt mu mv nt mx my ky nu kz na lb nv lc nc le nw lf ne nf bi translated">4.探索Gapminder数据集</h1><p id="87e9" class="pw-post-body-paragraph lh li jj lj b lk ng kt lm ln nh kw lp lq ni ls lt lu nj lw lx ly nk ma mb mc im bi translated">在我们的数据可视化之前，让我们看一下Gapminder数据集。</p><p id="77e2" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这里，我们将从加载<code class="fe md me mf mg b">gapminder</code>包开始，并返回<code class="fe md me mf mg b">gapminder</code>变量的内容。</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ou"><img src="../Images/c4f90b602242ab5db1e5c55795a51f95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nk4CADcov6a77Xy7d5FeLQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">gapminder数据集的屏幕截图。</p></figure><p id="d0ed" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这里，我们可以看到数据是一个由1704行和6列组成的<em class="nl"> tibble </em> (tidyverse对数据帧的实现)。</p><p id="5de9" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这6列包括:</p><ul class=""><li id="b5c4" class="og oh jj lj b lk ll ln lo lq oi lu oj ly ok mc ol om on oo bi translated"><code class="fe md me mf mg b">country</code> —国家名称</li><li id="413f" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><code class="fe md me mf mg b">continent</code> —各大洲的名称</li><li id="f15d" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><code class="fe md me mf mg b">year</code> —数据输入的年份</li><li id="4211" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><code class="fe md me mf mg b">lifeExp</code> —给定年份的预期寿命</li><li id="1020" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><code class="fe md me mf mg b">pop</code> —给定年份的人口数量</li><li id="2057" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><code class="fe md me mf mg b">gdpPercap</code> —给定年份的人均国内生产总值</li></ul><h1 id="e46d" class="mo mp jj bd mq mr ns mt mu mv nt mx my ky nu kz na lb nv lc nc le nw lf ne nf bi translated">5.创建静态散点图</h1><p id="e47d" class="pw-post-body-paragraph lh li jj lj b lk ng kt lm ln nh kw lp lq ni ls lt lu nj lw lx ly nk ma mb mc im bi translated">在本节中，我们将创建一个静态版本的散点图，它可以用作与动画版本进行比较的基线。</p><h2 id="2d80" class="ob mp jj bd mq ov ow dn mu ox oy dp my lq oz pa na lu pb pc nc ly pd pe ne jp bi translated">5.1.密码</h2><p id="e403" class="pw-post-body-paragraph lh li jj lj b lk ng kt lm ln nh kw lp lq ni ls lt lu nj lw lx ly nk ma mb mc im bi translated">创建散点图的代码如下所示:</p><figure class="nn no np nq gt iv"><div class="bz fp l di"><div class="pf pg l"/></div></figure><p id="d890" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我如何在RStudio中实现代码的屏幕截图:</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ph"><img src="../Images/b9e06db8e5cf8fecbeeea74befb2c9cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UFU9T-ECEdv6Oi5qI3Ze1w.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">在RStudio IDE中实现代码的屏幕截图。</p></figure><h2 id="a3f2" class="ob mp jj bd mq ov ow dn mu ox oy dp my lq oz pa na lu pb pc nc ly pd pe ne jp bi translated">5.2逐行解释</h2><ul class=""><li id="b83e" class="og oh jj lj b lk ng ln nh lq pi lu pj ly pk mc ol om on oo bi translated"><strong class="lj jt">线1</strong>—<code class="fe md me mf mg b">ggplot()</code>功能用于使用<code class="fe md me mf mg b">ggplot2</code> R包创建图形。第一个输入参数定义了存储在<code class="fe md me mf mg b">gapminder</code>变量中的输入数据。<code class="fe md me mf mg b">aes()</code>功能通过定义使用显示在X轴上的<code class="fe md me mf mg b">gdpPercap</code>同时定义显示在Y轴上的<code class="fe md me mf mg b">lifeExp</code>来实现输入变量的美学映射。每个数据点的大小现在将取决于<code class="fe md me mf mg b">pop</code>变量(值<code class="fe md me mf mg b">pop</code>越大，数据点也变得越大)。最后，数据点的颜色(特别是<code class="fe md me mf mg b">colour</code>参数)将是其所属<code class="fe md me mf mg b">country</code>的函数。</li><li id="94af" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><strong class="lj jt">第2行</strong> — <code class="fe md me mf mg b">geom_point()</code>用于定义alpha透明度(即数据点将是半透明的，如<code class="fe md me mf mg b">alpha</code>参数0.7所定义；值越低，它们变得越半透明)。顾名思义，<code class="fe md me mf mg b">show.legend=FALSE</code>将隐藏图例。</li><li id="a396" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><strong class="lj jt">第3行</strong> — <code class="fe md me mf mg b">scale_colour_manual()</code>函数定义存储在<code class="fe md me mf mg b">country_colors</code>变量中的配色方案，该方案将用于根据国家给数据点着色。</li><li id="e042" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><strong class="lj jt">第4行</strong> — <code class="fe md me mf mg b">scale_size()</code>函数定义数据点的大小范围(即，回想一下在第1行，我们在<code class="fe md me mf mg b">aes()</code>函数中定义<code class="fe md me mf mg b">size=pop</code>)在2和12的范围内(<em class="nl">即</em> 2是小数据点，而12代表最大数据点)。</li><li id="2ae2" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><strong class="lj jt">第5行</strong> — <code class="fe md me mf mg b">scale_x_log10()</code>函数通过log10对X轴上的数据进行对数转换。</li><li id="8f4e" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><strong class="lj jt">第6行</strong> — <code class="fe md me mf mg b"> facet_wrap()</code>功能使用大陆变量将图分割成多个子图(即该过程也称为<em class="nl">面</em>)。</li><li id="8f67" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><strong class="lj jt">第7行</strong> — <code class="fe md me mf mg b">labs()</code>函数定义了绘图标题、X轴标题和Y轴标题。</li></ul><h2 id="812d" class="ob mp jj bd mq ov ow dn mu ox oy dp my lq oz pa na lu pb pc nc ly pd pe ne jp bi translated">5.3.将图保存到文件</h2><p id="8563" class="pw-post-body-paragraph lh li jj lj b lk ng kt lm ln nh kw lp lq ni ls lt lu nj lw lx ly nk ma mb mc im bi translated">从上面的截图我们可以看到，该图显示在<strong class="lj jt"> <em class="nl">图</em> </strong>面板(左下面板)中，但没有保存到文件中。</p><p id="1d35" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">为了将绘图保存到文件中，我们将如下使用<code class="fe md me mf mg b">ggsave()</code>功能:</p><pre class="nn no np nq gt nx mg ny nz aw oa bi"><span id="9e4f" class="ob mp jj mg b gy oc od l oe of">ggsave('plot_gdpPercap_lifeExp_static.png', width=8, height=8)</span></pre><p id="0626" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这产生了结果图:</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pl"><img src="../Images/4fc658d4bbdb2ddccba82dd14e083c33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5HuDnTi4VIZG8SVHAOvnFQ.png"/></div></div></figure><h1 id="9425" class="mo mp jj bd mq mr ns mt mu mv nt mx my ky nu kz na lb nv lc nc le nw lf ne nf bi translated">6.创建动画散点图</h1><p id="cebd" class="pw-post-body-paragraph lh li jj lj b lk ng kt lm ln nh kw lp lq ni ls lt lu nj lw lx ly nk ma mb mc im bi translated">有趣的部分来了，现在让我们继续使用<code class="fe md me mf mg b">gganimate</code> R包创建动画散点图。</p><h2 id="411e" class="ob mp jj bd mq ov ow dn mu ox oy dp my lq oz pa na lu pb pc nc ly pd pe ne jp bi translated">6.1.密码</h2><figure class="nn no np nq gt iv"><div class="bz fp l di"><div class="pf pg l"/></div></figure><p id="0edf" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">上述代码生成以下动画情节:</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/c12f930bc377dea296f2ded66c0ede94.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*_3P7MvApl_FPxK6YuSng4g.gif"/></div></figure><h2 id="064b" class="ob mp jj bd mq ov ow dn mu ox oy dp my lq oz pa na lu pb pc nc ly pd pe ne jp bi translated">6.2.逐行解释</h2><ul class=""><li id="4cd5" class="og oh jj lj b lk ng ln nh lq pi lu pj ly pk mc ol om on oo bi translated"><strong class="lj jt">第1–6行</strong> —解释与静态图相同，因此请参考第5.2节的解释。</li><li id="c415" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><strong class="lj jt">第7行</strong> —注释文本，暗示接下来的几行与情节的动画部分有关。</li><li id="83df" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><strong class="lj jt">第8行</strong> — <code class="fe md me mf mg b">labs()</code>函数定义了绘图标题、X轴标题和Y轴标题。<code class="fe md me mf mg b">{frame_time}</code>将随着数据点在图中移动，动态显示变化的年份。</li><li id="3247" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><strong class="lj jt">第9行</strong> — <code class="fe md me mf mg b">transition_time()</code>函数将<code class="fe md me mf mg b">year</code>变量作为输入，它允许动画情节根据<code class="fe md me mf mg b">year</code>变量逐帧过渡。</li><li id="a00e" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><strong class="lj jt">第10行</strong> — <code class="fe md me mf mg b">ease_aes()</code>函数将<code class="fe md me mf mg b">linear</code>作为输入参数，它将帧的过渡定义为线性方式。</li><li id="e5c4" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated">正如我们所见，第1-10行被分配给了<code class="fe md me mf mg b">p1</code>变量</li><li id="bb10" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><strong class="lj jt">第12行</strong> — <code class="fe md me mf mg b">animate()</code>函数将<code class="fe md me mf mg b">p1</code>变量中定义的图形作为输入参数，并执行动画渲染。</li><li id="e92a" class="og oh jj lj b lk op ln oq lq or lu os ly ot mc ol om on oo bi translated"><strong class="lj jt">第13行</strong> — <code class="fe md me mf mg b">anim_save()</code>功能允许将渲染的动画图保存为. GIF文件。</li></ul><h1 id="6383" class="mo mp jj bd mq mr ns mt mu mv nt mx my ky nu kz na lb nv lc nc le nw lf ne nf bi translated">7.自定义动画情节</h1><p id="8ddb" class="pw-post-body-paragraph lh li jj lj b lk ng kt lm ln nh kw lp lq ni ls lt lu nj lw lx ly nk ma mb mc im bi translated">那么如何定制这个动画剧情呢？</p><p id="e49b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这一节中，我们将探索哪些参数可以调整，以进一步定制您的动画情节。</p><h2 id="3098" class="ob mp jj bd mq ov ow dn mu ox oy dp my lq oz pa na lu pb pc nc ly pd pe ne jp bi translated">7.1.更改输入变量</h2><p id="92fd" class="pw-post-body-paragraph lh li jj lj b lk ng kt lm ln nh kw lp lq ni ls lt lu nj lw lx ly nk ma mb mc im bi translated">因此，除了为<code class="fe md me mf mg b">gdpPercap</code>和<code class="fe md me mf mg b">lifeExp</code>(在<strong class="lj jt"> <em class="nl"> X </em> </strong>和<strong class="lj jt"> <em class="nl"> Y </em> </strong>轴中)制作散点图，我们还可以考虑<code class="fe md me mf mg b">gapminder</code>数据集中的其他列。</p><p id="627f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">假设我们想要使用这两个变量:<code class="fe md me mf mg b">pop</code>和<code class="fe md me mf mg b">lifeExp</code>，我们可以在<code class="fe md me mf mg b">ggplot()</code>函数中定义它。</p><pre class="nn no np nq gt nx mg ny nz aw oa bi"><span id="700d" class="ob mp jj mg b gy oc od l oe of">ggplot(gapminder, aes(pop, lifeExp, size = pop, colour = country))</span></pre><p id="da4b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">注意，在上面的代码中，我们使用<code class="fe md me mf mg b">pop</code>和<code class="fe md me mf mg b">lifeExp</code>作为第一个和第二个输入参数(与第一个图中使用的<code class="fe md me mf mg b">gdpPercap</code>和<code class="fe md me mf mg b">lifeExp</code>相比)。</p><p id="aff6" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">结果图如下所示:</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/7f37a7427a5a7f05681a0547af486201.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*wJyZEdqGBQ2-XLaAE52GZA.gif"/></div></figure><h2 id="8f31" class="ob mp jj bd mq ov ow dn mu ox oy dp my lq oz pa na lu pb pc nc ly pd pe ne jp bi translated">7.2.更改子图布局</h2><p id="ad69" class="pw-post-body-paragraph lh li jj lj b lk ng kt lm ln nh kw lp lq ni ls lt lu nj lw lx ly nk ma mb mc im bi translated">默认情况下，我们可以看到动画情节被安排为2行× 3列布局。</p><p id="4ba1" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">7 . 2 . 1<em class="nl">。水平布局</em> </strong></p><p id="a33c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果我们想把布局改成1行× 5列，我们该怎么做呢？</p><p id="0241" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">转到第6.1节中包含<code class="fe md me mf mg b">facet_wrap(~continent)</code>的代码行(提示:第6行)，并添加<code class="fe md me mf mg b">ncol=5</code>作为额外的输入参数，使其成为<code class="fe md me mf mg b">facet_wrap(~continent, ncol=5)</code>。</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/72c55add2899f701b38d0dd249275381.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*4KvV3-I9P0bN_jft9nkXwA.gif"/></div></figure><p id="ec77" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">请注意，布局根据需要更新为1行5列。但是一个新的问题出现了，分图的宽度看起来有点太窄。</p><p id="ad4d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">解决这个问题的方法是调整图形的宽度和高度。这可以通过向<code class="fe md me mf mg b">ggsave()</code>函数添加2个额外的输入参数来实现，如下所示:</p><pre class="nn no np nq gt nx mg ny nz aw oa bi"><span id="9972" class="ob mp jj mg b gy oc od l oe of">anim_save('plot_pop_lifeExp_wide.gif', width=1600, height=400)</span></pre><p id="209e" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在应该给出如下的图:</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nr"><img src="../Images/351c83dc59dfa5a9346ab4d2a2d50a54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*rKEPAnnaAZPE_VLvClVcFw.gif"/></div></div></figure><p id="b0ce" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">7 . 2 . 2<em class="nl">。垂直布局</em> </strong></p><p id="a049" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">同样，现在让我们创建一个垂直布局的新地块。</p><p id="d977" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们可以通过简单地改变<code class="fe md me mf mg b">facet_wrap()</code>函数的<code class="fe md me mf mg b">ncol</code>输入参数的赋值来做到这一点。</p><p id="4ab9" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">之前，水平布局有:</p><p id="a705" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe md me mf mg b">facet_wrap(~continent, ncol=5)</code>。</p><p id="7da3" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在，对于垂直布局，我们有:</p><p id="55ee" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe md me mf mg b">facet_wrap(~continent, ncol=1)</code>。</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/1d1d7e9e85e4d120610f6c0823615f28.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*ZSdjF42YBhOVenhzRPJKrw.gif"/></div></figure><h2 id="49c0" class="ob mp jj bd mq ov ow dn mu ox oy dp my lq oz pa na lu pb pc nc ly pd pe ne jp bi translated">7.3.调整字体大小</h2><p id="4947" class="pw-post-body-paragraph lh li jj lj b lk ng kt lm ln nh kw lp lq ni ls lt lu nj lw lx ly nk ma mb mc im bi translated">您可能会注意到X/Y轴和刻度标签的字体大小可能会变小，您可能希望对其进行调整。让我告诉你怎么做。</p><p id="d46f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这里有一个调整上面提到的字体属性的示例代码。</p><figure class="nn no np nq gt iv"><div class="bz fp l di"><div class="pf pg l"/></div></figure><p id="15da" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你会注意到我们添加了第7-13行，它利用<code class="fe md me mf mg b">theme()</code>功能来调整字体大小、字体和颜色。</p><p id="2cb1" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">特别是，<code class="fe md me mf mg b">plot.title</code>允许我们调整图标题的字体(在我们的例子中是图左上角显示的<code class="fe md me mf mg b">Year</code>标签。这里，我们使用的字体大小为20，字体为粗体，颜色为黑色。类似的调整也适用于X和Y轴标题(分别为<code class="fe md me mf mg b">axis.title.x</code>和<code class="fe md me mf mg b">axis.title.y</code>)、X和Y刻度标签(分别为<code class="fe md me mf mg b">axis.text.x</code>和<code class="fe md me mf mg b">axis.text.y</code>)、小平面子图标签(<code class="fe md me mf mg b">strip.text.x</code>)和图图像周围的空白区域(<code class="fe md me mf mg b">plot.margin</code>)。</p><p id="5d77" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">显示了更新后的图(上图),为了便于比较，我们将显示我们之前制作的原始图(下图)(使用默认字体大小)。更大的字体大小确实有助于提供更好的可读性。</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nr"><img src="../Images/ce6affc9d837cdf7c21698d9143fbfb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8YcgMcqPGV5nr9Vd9WLJrw.gif"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">使用更大字体的动画情节。</p></figure><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nr"><img src="../Images/351c83dc59dfa5a9346ab4d2a2d50a54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*rKEPAnnaAZPE_VLvClVcFw.gif"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">使用默认字体大小的动画图。</p></figure><h1 id="0b8a" class="mo mp jj bd mq mr ns mt mu mv nt mx my ky nu kz na lb nv lc nc le nw lf ne nf bi translated">结论</h1><p id="b7df" class="pw-post-body-paragraph lh li jj lj b lk ng kt lm ln nh kw lp lq ni ls lt lu nj lw lx ly nk ma mb mc im bi translated">在本总结中，您已经成功地为时序数据集(Gapminder)创建了一个动画散点图，并学习了如何对该图进行调整。</p><p id="d353" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">接下来呢？您还可以尝试为其他时间序列数据制作动画图，例如可视化加密货币的价格信息、空气质量指数等。请在评论中告诉我，您正在为哪些数据集创建动画图。</p><p id="d1b2" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">除了时间序列数据的动画图之外，您还可以尝试使用<code class="fe md me mf mg b">gganimate</code> R包来增加其他数据可视化的趣味，并为其添加动画，比如盒图</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h2 id="7898" class="ob mp jj bd mq ov ow dn mu ox oy dp my lq oz pa na lu pb pc nc ly pd pe ne jp bi translated"><a class="ae jg" href="http://newsletter.dataprofessor.org/" rel="noopener ugc nofollow" target="_blank">订阅我的邮件列表，获取我在数据科学方面的最佳更新(偶尔还有免费内容)!</a></h2></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="3894" class="mo mp jj bd mq mr ms mt mu mv mw mx my ky mz kz na lb nb lc nc le nd lf ne nf bi translated">关于我</h1><p id="f1d4" class="pw-post-body-paragraph lh li jj lj b lk ng kt lm ln nh kw lp lq ni ls lt lu nj lw lx ly nk ma mb mc im bi translated">我是泰国一所研究型大学的生物信息学副教授和数据挖掘和生物医学信息学负责人。在我下班后的时间里，我是一名YouTuber(又名<a class="ae jg" href="http://bit.ly/dataprofessor/" rel="noopener ugc nofollow" target="_blank">数据教授</a>)制作关于数据科学的在线视频。在我做的所有教程视频中，我也在GitHub上分享Jupyter笔记本(<a class="ae jg" href="https://github.com/dataprofessor/" rel="noopener ugc nofollow" target="_blank">数据教授GitHub page </a>)。</p><div class="is it gp gr iu po"><a href="https://www.youtube.com/dataprofessor" rel="noopener  ugc nofollow" target="_blank"><div class="pp ab fo"><div class="pq ab pr cl cj ps"><h2 class="bd jt gy z fp pt fr fs pu fu fw js bi translated">数据教授</h2><div class="pv l"><h3 class="bd b gy z fp pt fr fs pu fu fw dk translated">数据科学、机器学习、生物信息学、研究和教学是我的激情所在。数据教授YouTube…</h3></div><div class="pw l"><p class="bd b dl z fp pt fr fs pu fu fw dk translated">www.youtube.com</p></div></div><div class="px l"><div class="py l pz qa qb px qc ja po"/></div></div></a></div><h1 id="0ee5" class="mo mp jj bd mq mr ns mt mu mv nt mx my ky nu kz na lb nv lc nc le nw lf ne nf bi translated">在社交网络上与我联系</h1><p id="6f07" class="pw-post-body-paragraph lh li jj lj b lk ng kt lm ln nh kw lp lq ni ls lt lu nj lw lx ly nk ma mb mc im bi translated">YouTube:<a class="ae jg" href="http://youtube.com/dataprofessor/" rel="noopener ugc nofollow" target="_blank">【http://YouTube . com/data proper/</a><br/>网站:<a class="ae jg" href="https://www.youtube.com/redirect?redir_token=w4MajL6v6Oi_kOAZNbMprRRJrvJ8MTU5MjI5NjQzN0AxNTkyMjEwMDM3&amp;q=http%3A%2F%2Fdataprofessor.org%2F&amp;event=video_description&amp;v=ZZ4B0QUHuNc" rel="noopener ugc nofollow" target="_blank">【http://data proper . org/</a>【正在建设】<br/>LinkedIn:<a class="ae jg" href="https://www.linkedin.com/company/dataprofessor/" rel="noopener ugc nofollow" target="_blank">【https://www . LinkedIn . com/company/data proper/</a></p></div></div>    
</body>
</html>