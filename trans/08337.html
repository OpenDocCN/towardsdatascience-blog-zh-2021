<html>
<head>
<title>Understanding Flask vs FastAPI Web Framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解Flask vs FastAPI Web框架</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/understanding-flask-vs-fastapi-web-framework-fe12bb58ee75?source=collection_archive---------0-----------------------#2021-08-01">https://towardsdatascience.com/understanding-flask-vs-fastapi-web-framework-fe12bb58ee75?source=collection_archive---------0-----------------------#2021-08-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8e53" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">两种不同RestAPI框架的比较</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/15dccf0d0ab88a881b40561a177add04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7stMd7DHb_Tf2i0NH_WkwQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Daria Shevtsova 拍摄于<a class="ae ky" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><h2 id="6779" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">简介</strong></h2><p id="f482" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">作为一名数据科学家并不仅仅局限于模型构建，而是朝着下一步，模型部署，努力。模型部署对于向其他人展示您的最终结果很重要<em class="mo">(或者可能是您的客户)</em>。这群人可能不懂编码，也不会通过查看您的代码来理解；他们更喜欢查看最终的应用程序，这样可以立即查看结果。一种常见的方法是将您的代码包装在RestAPI中，并作为微服务进行部署。</p><p id="6cbe" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">在本文中，我将介绍两种不同的可以快速搭建web服务器的框架:<strong class="lx iu"> Flask </strong>和<strong class="lx iu"> FastAPI </strong>。Flask和FastAPI都是用于构建小规模网站和应用程序的框架。</p><h2 id="681c" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">砂箱框架</strong></h2><p id="6a0b" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">Flask于2010年发布，这是一个用python编写的微型web框架，以最少的代码支持web应用程序的部署。它旨在作为微服务轻松、灵活且快速地部署。Flask构建在<a class="ae ky" href="https://flask.palletsprojects.com/en/2.0.x/deploying/index.html" rel="noopener ugc nofollow" target="_blank"> WSGI (Python Web服务器网关接口)</a>之上，服务器将为每个请求绑定一个工作器。</p><p id="c22d" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">下面是一个使用Flask <em class="mo">进行部署的示例(这是一个使用“GET”方法获取用户输入并将值插入到Google Big Query中的示例——该示例部署在Google Cloud Run上)</em></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用Flask部署示例程序</p></figure><p id="8d8c" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">使用Flask完成部署后，您可以运行URL并在URL中传递输入，将会返回一条消息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mw"><img src="../Images/b10f0c2e1812e11d7ad40a55ccf0f281.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZSv75_n7ONV8qaqaiLW4nQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用Flask调用微服务部署</p></figure><h2 id="384f" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak"> FastAPI框架</strong></h2><p id="a71a" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">FastAPI比Flask更新，发布于2018年。它的工作方式类似于Flask，后者用最少的代码支持web应用程序的部署。然而，FastAPI比Flask更快，因为它建立在ASGI(异步服务器网关接口)之上，从而支持并发/异步代码。这是通过用<em class="mo">异步定义</em>语法声明端点来实现的。</p><p id="16e8" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">对于FastAPI来说，值得强调的一点是文档。在使用FastAPI框架进行部署时，它将生成文档并创建一个交互式GUI (Swagger UI ),允许开发人员更方便地测试API端点。</p><p id="8fd5" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">下面是一个使用FastAPI <em class="mo">进行部署的示例(这是一个使用“GET”方法获取用户输入并将值插入到Google Big Query中的示例—该示例部署在Google Cloud Run上)</em></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="3039" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">使用Flask完成部署后，您可以运行URL并在URL中传递输入，将会返回一条消息，其工作方式与Flask类似。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/e02cdccd414a4156afb4b67cc4e45a59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1jaYy5rplTQWWaet4jB6zA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用FastAPI调用微服务</p></figure><p id="3872" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">现在，真正让我兴奋的是FastAPI的附加功能，即<strong class="lx iu">自动生成文档(Swagger UI) </strong>。要访问Swagger UI，请输入API endpoint /docs，这就是测试API端点的交互式GUI。拥有一个大摇大摆的用户界面也更容易向他人解释你的程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/ac94b859e563884227b8f1d89d44b7b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RpbmKcnNTf4M9x-EqdsAdA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">FastAPI — Swagger UI</p></figure><p id="19ad" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">通过使用Swagger UI，您可以轻松地测试您的API端点并通过接口指定参数。例如，在下图中，您可以在提供的列中轻松指定“书名”和“作者”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/9d63b3c7e0f0cb3e679812437a98251a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ga5x8PfFS6cwBILehWHTvg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从Swagger UI测试“获取请求”</p></figure><p id="b3be" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">除了Swagger UI，FastAPI还附带了另一个文档——“ReDoc”。该文档包含列出的所有端点，如果在同一个服务中部署了许多端点，这将非常有用。要访问文档页面，请输入API端点/redoc。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/b9b01fee306a7c786967beb6e95ff5fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WPv9jZxbzmOwvwq7uJyKgA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">FastAPI — ReDoc</p></figure><h2 id="0b08" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">烧瓶和FastAPI的对比:</strong></h2><h2 id="95ad" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">HTTP方法:</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/e019eaa7d75be32943df6849737b99af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eG7Xz7J22Cvyt90RyE6C7g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">HTTP方法</p></figure><ul class=""><li id="f9eb" class="nc nd it lx b ly mp mb mq li ne lm nf lq ng mn nh ni nj nk bi translated">在Flask和FastAPI中指定“GET”或“POST”方法是不同的。</li></ul><h2 id="32df" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">传递参数&amp;数据验证:</strong></h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/f159a8a7aef731b7872c5c601d77e02e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5vpbnDfgLPKzem5yUAGLVw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用Get方法</p></figure><ul class=""><li id="33ab" class="nc nd it lx b ly mp mb mq li ne lm nf lq ng mn nh ni nj nk bi translated">Flask不提供对数据格式的验证，这意味着用户可以传递任何类型的数据，如字符串或整数等。(或者，可以将输入数据接收的验证脚本内置到脚本中，但这需要额外的工作)</li><li id="088d" class="nc nd it lx b ly nm mb nn li no lm np lq nq mn nh ni nj nk bi translated">FastAPI允许开发人员对收到的参数声明额外的标准和验证。</li></ul><h2 id="bd9b" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">错误信息显示:</strong></h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/bfdbaa7f26e6f73895db95b19d5d978c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BbV5HeMfl5E6WDj3L8C1Wg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">烧瓶&amp; FastAPI的错误消息</p></figure><ul class=""><li id="7d47" class="nc nd it lx b ly mp mb mq li ne lm nf lq ng mn nh ni nj nk bi translated">默认情况下，Flask中显示的错误消息是HTML页面，而FastAPI中显示的错误消息是JSON格式的。</li></ul><h2 id="1082" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">异步任务:</strong></h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/2a458b8f8e25755101d97657da1fc583.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-SZdSBlleUfxkvsoHu5VOQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">比较异步任务</p></figure><ul class=""><li id="2a2d" class="nc nd it lx b ly mp mb mq li ne lm nf lq ng mn nh ni nj nk bi translated">正如本文前面提到的，Flask部署在不支持异步任务的<a class="ae ky" href="https://flask.palletsprojects.com/en/2.0.x/deploying/index.html" rel="noopener ugc nofollow" target="_blank"> WSGI (Python Web服务器网关接口)</a>上，而FastAPI部署在支持异步任务的<a class="ae ky" href="https://fastapi.tiangolo.com/benchmarks/" rel="noopener ugc nofollow" target="_blank"> ASGI(异步服务器网关接口)</a>上。</li></ul><h2 id="ecf9" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">结论:</strong></h2><p id="799d" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">在研究了Flask和FastAPI之后，我会考虑将来采用FastAPI，因为它有异步功能和自动生成的非常详细和完整的文档。此外，使用FastAPI进行部署所需的工作量与Flask相同。</p><p id="6944" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">如果您一直在使用Flask，您可以考虑试用FastAPI并观察比较。</p><p id="9315" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated"><strong class="lx iu">参考文献&amp;链接:</strong></p><p id="c11b" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">[1]https://flask.palletsprojects.com/en/2.0.x/<a class="ae ky" href="https://flask.palletsprojects.com/en/2.0.x/" rel="noopener ugc nofollow" target="_blank"/></p><p id="019e" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">[2]https://fastapi.tiangolo.com/<a class="ae ky" href="https://fastapi.tiangolo.com/" rel="noopener ugc nofollow" target="_blank"/></p><p id="6790" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">[3]<a class="ae ky" href="https://analyticsindiamag.com/fastapi-vs-flask-comparison-guide-for-data-science-enthusiasts/" rel="noopener ugc nofollow" target="_blank">https://analyticsindiamag . com/fastapi-vs-flask-comparison-guide-for-data-science-发烧友/ </a></p><p id="77e4" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated"><a class="ae ky" href="https://www.programmersought.com/article/60453596349/" rel="noopener ugc nofollow" target="_blank">https://www.programmersought.com/article/60453596349/</a></p><p id="b580" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">[5]<a class="ae ky" href="https://www.analyticsvidhya.com/blog/2020/11/fastapi-the-right-replacement-for-flask/" rel="noopener ugc nofollow" target="_blank">https://www . analyticsvidhya . com/blog/2020/11/fastapi-the-right-replacement-for-flask/</a></p></div></div>    
</body>
</html>