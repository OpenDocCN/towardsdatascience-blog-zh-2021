<html>
<head>
<title>11 Dplyr Functions to Start Using Right Now in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">11 Dplyr函数，现在就开始在R</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/11-dplyr-functions-to-start-using-right-now-in-r-b3d83dd538e4?source=collection_archive---------20-----------------------#2021-06-17">https://towardsdatascience.com/11-dplyr-functions-to-start-using-right-now-in-r-b3d83dd538e4?source=collection_archive---------20-----------------------#2021-06-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7df1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">大幅提高您的数据处理效率</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7d88f1bb70c0f2a03712f53b18ca5611.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2L42UtgbolAw6ipZUv9AXg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">沃克·芬顿在Unsplash<a class="ae ky" href="https://unsplash.com/s/photos/jumping?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">拍摄的照片</a></p></figure><p id="0e61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一名大学新生，当我的人生目标仍然是成为一名炙手可热的外交官或联合国大使时，我和一个穿着我们学校颜色的技术人员一起乘坐优步回到了我的大学，他碰巧住在离我宿舍几个街区的地方。我尽可能地和他闲聊，询问了他的生活，发现他是一名刚刚从工程专业毕业的多米诺骨牌公司的数据科学家。</p><p id="464d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“哦，太酷了……你最常用的是什么，呃，包裹？”我说，我为自己记住了暗语中的“包裹”而感到自豪。</p><p id="df25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“大部分是Dplyr。”</p><p id="fb63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“听起来……很有趣。”我说，点点头，低头看着我的手。在那之后，我试图想出一些问题来问他关于比萨饼的事情，比如他是否会终身免费获得比萨饼，以及他是否相信对奶酪上瘾是可能的，但相反，他只是看着窗外，继续用手玩了三十分钟。最后，我给了他我的号码，这样他就可以问我要我的那一半，但就像那个拼车的震耳欲聋的沉默一样，我再也没有收到他的后续短信(希望他不要在工作时看TDS，哈哈)。</p><p id="c14b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以现在我在这里，仍然害怕四年前和一个不知名的陌生人一起坐车。但是也许，仅仅是也许，如果你和一个认识Dplyr的陌生人卡在一辆车里，你可以用这篇文章的内容进行对话。然后，我亲爱的读者，你将不会花四年的时间去想Dplyr是什么，实现你的旧梦想不再，自学如何编码，在全球疫情毕业，在研究生院探索一个全新的领域，最终成为一名数据科学家，并以TDS文章的形式重温最初的尴尬对话。</p><p id="eb86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好吧，但说真的，Dplyr非常酷(独一无二的<a class="ae ky" href="https://www.rstudio.com/speakers/hadley-wickham/" rel="noopener ugc nofollow" target="_blank">哈德利·威克姆</a>的又一项伟大发明)。就范围而言，Dplyr是R，就像Pandas是Python一样，但是这两种语言也与SQL有很强的相似性。如果你发现自己非常依赖base R，那么Dplyr的<code class="fe lv lw lx ly b">%&gt;%</code>可能会更有效、更直观地为你解决许多日常数据争论任务。</p><p id="3f5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我开始讨论您现在需要开始实施的顶级功能之前，我们应该先讨论一下房间里的一头大象…</p><h1 id="2e89" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated"><strong class="ak">%&gt;%</strong>操作员</h1><p id="e54d" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><em class="mw">本文的替代名称:</em> <strong class="lb iu"> <em class="mw">什么是$@ &amp; %是% &gt; %操作符？</em> </strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/adfba67060bd12ab1becd2a5737505f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_9RRp5MwfhifcbLlZzygIA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者插图</p></figure><p id="817e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">%&gt;% ( <strong class="lb iu">读作:“管道”</strong>)是R中的一个操作符，它将之前的内容输入到之后的内容中。这一点很重要，因为管道操作符可以按顺序用于将许多层命令链接在一起。因此，总是从他们希望修改的数据集开始，接着是另一个管道，然后是修改器。可以添加无限数量的修改器，但是必须用管道将它们分开才能工作。对我来说，我喜欢把Dplyr中的<code class="fe lv lw lx ly b">%&gt;%</code>想象成类似于熊猫中的<code class="fe lv lw lx ly b">.</code>。或者，如果<em class="mw"> x </em>表示基础数据集，那么一个<code class="fe lv lw lx ly b">%&gt;%</code>就好比把<em class="mw"> x </em>放入函数<em class="mw"> f(x) </em>，两层是<em class="mw"> g(f(x)) </em>，三层是<em class="mw">h(g(f(x))</em>，以此类推。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><em class="na">像食人魔和洋葱一样，管道也有层次。【GIPHY的GIF</em></p></figure><p id="d03d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是Pandas vs. Dplyr重命名两个列的例子。依我拙见，Dplyr实际上在可读性方面领先一点:</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="791f" class="nf ma it ly b gy ng nh l ni nj"># pandas<br/>df.<!-- -->rename(columns={'old_name1': 'new_name1', <br/>                   'old_name2': 'new_name2'}, inplace=True)<br/>--------------------------------------------------------------------<br/># dplyr <br/>df %&gt;%<br/>  rename(new_name1 = old_name1, <br/>         new_name2 = old_name2)</span></pre><p id="f584" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一些将多个管道链接在一起的例子，可以进行无限次:</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="dc42" class="nf ma it ly b gy ng nh l ni nj"># in order to follow along, run these: <br/>library(tidyverse) <br/>library(gapminder)</span><span id="accf" class="nf ma it ly b gy nk nh l ni nj"># one pipe <br/>gapminder %&gt;%<br/>  select(country, continent, year, pop)</span><span id="c0a0" class="nf ma it ly b gy nk nh l ni nj"># two pipes<br/>gapminder %&gt;%<br/>  select(country, continent, year, pop) %&gt;%<br/>  rename(population = pop)</span><span id="65b5" class="nf ma it ly b gy nk nh l ni nj"># three pipes<br/>gapminder %&gt;%<br/>  select(country, continent, year, pop) %&gt;%<br/>  rename(population = pop) %&gt;%<br/>  filter(year &gt; 1985)</span><span id="78e3" class="nf ma it ly b gy nk nh l ni nj"># four pipes<br/>gapminder %&gt;%<br/>  select(country, continent, year, pop) %&gt;%<br/>  rename(population = pop) %&gt;%<br/>  filter(year &gt; 1985) %&gt;%<br/>  arrange(desc(population)) </span><span id="4ad6" class="nf ma it ly b gy nk nh l ni nj"># for the last, notice that we say "arrange(desc(population))" because in step two it was renamed from "pop". </span></pre><p id="3113" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经解决了这个问题，我们可以开始深入函数本身了！</p><h1 id="8dbb" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">#1:描述数据</h1><p id="230c" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><strong class="lb iu"> glimpse(): </strong>返回1) # rows，2) # cols，3)每列的数据类型，以及4)前10个左右的条目(取决于屏幕上的空间)。相应的熊猫功能我会把它等同于<code class="fe lv lw lx ly b">df.describe()</code>。</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="0803" class="nf ma it ly b gy ng nh l ni nj">library(tidyverse) <br/>library(gapminder)</span><span id="bd90" class="nf ma it ly b gy nk nh l ni nj">gapminder %&gt;%<br/>  glimpse()</span></pre><h1 id="a836" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">#2:按一列或多列排序</h1><p id="e219" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><strong class="lb iu"> arrange(): </strong>关注数据有时会非常有益，所以我们使用<code class="fe lv lw lx ly b">arrange()</code>来按升序或降序排列各个列。这与SQL中的<code class="fe lv lw lx ly b">ORDER BY</code>子句或Pandas中的<code class="fe lv lw lx ly b">df.sort_values()</code>非常相似。</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="8e99" class="nf ma it ly b gy ng nh l ni nj"># sort ascending (default)<br/>gapminder %&gt;% <br/>  arrange(lifeExp)</span><span id="43ac" class="nf ma it ly b gy nk nh l ni nj"># sort descending <br/>gapminder %&gt;% <br/>  arrange(desc(lifeExp))</span><span id="adce" class="nf ma it ly b gy nk nh l ni nj"># sort on multiple columns<br/>gapminder %&gt;% <br/>  arrange(lifeExp, pop, country)</span></pre><h1 id="49cc" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">#3和4:数据选择</h1><p id="7618" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><strong class="lb iu"> select()，transforme():</strong><code class="fe lv lw lx ly b">select()</code>函数只对原始数据集的指定列进行快照。类似地，<code class="fe lv lw lx ly b">transmute()</code>以同样的方式工作，并具有同时创建新列的额外能力。这两个函数的工作方式与SQL中的<code class="fe lv lw lx ly b">SELECT</code>子句非常相似。</p><p id="a355" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您只是希望从数据框架中拉出未动过的列，我会坚持使用select，而如果您要进行转换，则使用transmute。在下面的例子中，我们有变量<code class="fe lv lw lx ly b">gdpPercap</code>和<code class="fe lv lw lx ly b">pop</code>，我们正在创建一个新的<code class="fe lv lw lx ly b">gdp</code>列。</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="f356" class="nf ma it ly b gy ng nh l ni nj">gapminder %&gt;%<br/>  select(country, continent, year, pop)</span><span id="d65d" class="nf ma it ly b gy nk nh l ni nj">gapminder %&gt;%<br/>  transmute(country, continent, gdp = gdpPercap * pop)</span></pre><p id="0b37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">select还有一些更高级的选项，可以帮助您准确地获得所需的列，包括一串连接的列或所有包含、开始或结束于某些字符的列:</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="4b37" class="nf ma it ly b gy ng nh l ni nj"># advanced select() tools</span><span id="a85b" class="nf ma it ly b gy nk nh l ni nj"># 1. rename variables with select() <br/>gapminder %&gt;%<br/>  select(country, continent, population = pop)</span><span id="cd71" class="nf ma it ly b gy nk nh l ni nj"># 2. Include a string of columns at once with ':'<br/>gapminder %&gt;%<br/>  select(country, year, lifeExp:gdpPercap)</span><span id="1f8e" class="nf ma it ly b gy nk nh l ni nj"># 3. Include any column with a given string <br/>gapminder %&gt;%<br/>  select(country, year, contains("gdp"))</span><span id="093f" class="nf ma it ly b gy nk nh l ni nj"># 4. Include any column starting with a given string <br/>gapminder %&gt;%<br/>  select(country, year, starts_with("co"))</span><span id="defd" class="nf ma it ly b gy nk nh l ni nj"># 5. Include any column ending with a given string<br/>gapminder %&gt;%<br/>  select(country, year, ends_with("Exp"))</span><span id="112f" class="nf ma it ly b gy nk nh l ni nj"># Keep the last column, by any name<br/>gapminder %&gt;%<br/>  select(country, year, last_col())</span></pre><h1 id="fdaa" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">#4和5:重命名/修改单个列</h1><p id="7ef1" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><strong class="lb iu"> rename()，mutate(): </strong>这些函数修改一个或多个列，并将它们保存回文件。顾名思义，<code class="fe lv lw lx ly b">rename()</code>用于重命名，而<code class="fe lv lw lx ly b">mutate()</code>则完全通过转换创建一个新函数。</p><p id="1a87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了<code class="fe lv lw lx ly b">rename()</code>和<code class="fe lv lw lx ly b">mutate()</code>，我们可以用逗号一次表示多个修改。Dplyr中的重命名类似于使用<code class="fe lv lw lx ly b">df.rename()</code>，变异类似于Python中使用的<code class="fe lv lw lx ly b">df[new_col] = df[old_col1] * df[old_col2]</code>。</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="c607" class="nf ma it ly b gy ng nh l ni nj"># rename a column to be called something else<br/>gapminder %&gt;%<br/>  rename(population = pop,       #ex. 'pop' turns into 'population'<br/>         countries  = country, <br/>         life_expectancy = lifeExp)</span><span id="73ae" class="nf ma it ly b gy nk nh l ni nj"># add a new calculated field<br/>gapminder %&gt;%<br/>  mutate(gdp = gdpPercap * pop)  #ex. 'gdp' is created as a new var</span></pre><h1 id="e8a6" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">#6:根据条件过滤数据</h1><p id="81d4" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><strong class="lb iu"> filter(): </strong>类似于SQL中的WHERE子句或者Python中的条件表达式(<code class="fe lv lw lx ly b">df[df['country'] == 'France']</code>)。与其他Dplyr函数类似，可以通过用<code class="fe lv lw lx ly b">,</code>、<code class="fe lv lw lx ly b">&amp;</code>或<code class="fe lv lw lx ly b">|</code>符号分隔每个参数来指定多个过滤器。对于字符串，建议使用<code class="fe lv lw lx ly b">%in%</code>而不是<code class="fe lv lw lx ly b">==</code>。</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="7d31" class="nf ma it ly b gy ng nh l ni nj"># filter for France<br/>gapminder %&gt;% <br/>  filter(country %in% "France")</span><span id="0e58" class="nf ma it ly b gy nk nh l ni nj"># filter for a subset of countries (c stands for 'concat')<br/>gapminder %&gt;% <br/>  select(pop, country, year) %&gt;%      <br/>  filter(country %in% c('France','Spain','Portugal'))</span><span id="fa71" class="nf ma it ly b gy nk nh l ni nj"># "or" operator function<br/>gapminder %&gt;% <br/>  select(pop, country, year) %&gt;%        <br/>  filter(pop &gt; 50000 | pop &lt; 100000)</span><span id="0214" class="nf ma it ly b gy nk nh l ni nj"># "and" operator function 1 <br/>gapminder %&gt;% <br/>  select(pop, country, year) %&gt;%        <br/>  filter(pop &gt; 50000, pop &lt; 100000)</span><span id="d3c8" class="nf ma it ly b gy nk nh l ni nj"># "and" operator function 2<br/>gapminder %&gt;% <br/>  select(pop, country, year) %&gt;%        <br/>  filter(pop &gt; 50000 &amp; pop &lt; 100000)</span></pre><h1 id="969d" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">#7-9:取最大值、最小值、平均值、计数&amp;任何中间值</h1><p id="1aac" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><strong class="lb iu"> count()、summarize()和top_n(k，)</strong></p><p id="fdb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">count()</code>函数遍历数据集，并计算一个值在给定的一列或多列中出现的次数。我经常使用它一次查看一列，例如了解我正在查看的每个洲有多少个国家，或者一个城市中有多少人开车、骑自行车或乘公交车上班。</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="ea4e" class="nf ma it ly b gy ng nh l ni nj">gapminder %&gt;%<br/>  count(continent)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/8be26e14e1a57a514aef04738b03e2a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AhQpaTuij6aZyjp-_vLAbQ.png"/></div></div></figure><p id="a0a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用summarize，我们可以查看聚合函数，如列的sum、median、mean、standard deviation、variance、min和max，并为其命名。当与类似<code class="fe lv lw lx ly b">group_by()</code>的函数混合使用时，这些函数在理解数据集中的子群体时会变得非常有用。</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="8307" class="nf ma it ly b gy ng nh l ni nj"># summarize <br/># sum(), mean(), median(), min(), max(), sd(), var()</span><span id="dcc9" class="nf ma it ly b gy nk nh l ni nj">gapminder %&gt;%<br/>  summarize(total_gdp = sum(gdpPercap))</span><span id="299a" class="nf ma it ly b gy nk nh l ni nj">gapminder %&gt;%<br/>  summarize(avg_gdp = mean(gdpPercap))</span><span id="3a3d" class="nf ma it ly b gy nk nh l ni nj">gapminder %&gt;%<br/>  summarize(gdp_standard_dev = sd(gdpPercap))</span><span id="c971" class="nf ma it ly b gy nk nh l ni nj">gapminder %&gt;%<br/>  summarize(gdp_variance = var(gdpPercap))</span><span id="2bbd" class="nf ma it ly b gy nk nh l ni nj"># we can also create many columns at once</span><span id="c5fc" class="nf ma it ly b gy nk nh l ni nj">gapminder %&gt;%<br/>  summarize(max_gdp = max(gdpPercap),<br/>            total_pop = sum(pop), <br/>            min_lifeExp = min(lifeExp))</span><span id="d272" class="nf ma it ly b gy nk nh l ni nj"># I use __ = __ in order to give a name to the new summary columns, # but it is not required.</span></pre><p id="9139" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们可以使用<code class="fe lv lw lx ly b">top_n(k, )</code>只保留数据帧或组中的前<em class="mw"> k </em>值。例如，我们可以看看下面每个大陆人均GDP最高的国家。如果我们没有首先包含<code class="fe lv lw lx ly b">group_by()</code>函数，那么结果将是世界上人均GDP最高的国家，即科威特。类似地，如果我们指定了<em class="mw"> k=4 </em>，那么它会显示出每个大洲预期寿命最高的前四个国家。</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="8081" class="nf ma it ly b gy ng nh l ni nj"># top_n(k, )</span><span id="58dd" class="nf ma it ly b gy nk nh l ni nj">gapminder %&gt;% <br/>  group_by(continent) %&gt;% <br/>  top_n(1, gdpPercap)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/4b41208a09024ad64e2af634cb4a2cd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oo2O_doHexS7DhOjAakXfQ.png"/></div></div></figure><h1 id="b4a2" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">#10和11:分组依据</h1><p id="73fc" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><strong class="lb iu">group _ by()&amp;ungroup():</strong>和所有的编程语言一样，如果没有一个好的group by函数，我们会怎样？与列出的其他函数结合使用，我们可以得出关于数据集中存在的子群体的有趣结论。该功能与Pandas <code class="fe lv lw lx ly b">df.group_by()</code>或SQL的<code class="fe lv lw lx ly b">GROUP BY</code>中的功能相同，除了这些组将保持不变，直到您再次手动断开它们与<code class="fe lv lw lx ly b">ungroup()</code>的连接。</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="9a2e" class="nf ma it ly b gy ng nh l ni nj"># Using group_by<br/>gapminder %&gt;%      <br/>  group_by(year) %&gt;%                    <br/>  mutate(year_total = sum(pop))</span><span id="7789" class="nf ma it ly b gy nk nh l ni nj"># Grouping and then ungrouping again with ungroup()<br/>gapminder %&gt;%      <br/>  group_by(year) %&gt;%                    <br/>  mutate(year_total = sum(pop)) %&gt;%      <br/>  ungroup() %&gt;%                          <br/>  mutate(fraction = pop / year_total)</span></pre><h1 id="1f4b" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">结论</h1><p id="1e22" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">总之，我希望这篇介绍能让你明白Dplyr与SQL和Pandas有很强的相似性。如果关于数据转换的某些东西让你犯了错误，Dplyr在效率和可读性方面很强——并且在互联网上有大量的<a class="ae ky" href="https://www.rstudio.com/resources/cheatsheets/" rel="noopener ugc nofollow" target="_blank">备忘单</a>和<a class="ae ky" href="https://learn.datacamp.com/courses/data-manipulation-with-dplyr" rel="noopener ugc nofollow" target="_blank">教程</a>为你提供！</p><p id="b9cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢这篇关于与Dplyr的数据争论的文章，请鼓掌或评论让我知道——如果有足够的兴趣，那么我将做第2部分，在那里我将回顾Dplyr中更复杂的命令，并可能在这个过程中发现我过去更尴尬的故事。🙃</p><p id="f595" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">敬哈雷·韦翰，万物的创造者。说真的，我们什么时候让他成为我们的最高统治者了？</p><p id="e61e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">* *编辑:基地R终究是要拿烟斗的！链接:<a class="ae ky" href="https://www.youtube.com/watch?v=wmvjxb6Gdm8" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=wmvjxb6Gdm8</a></p><h1 id="c43b" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">我喜欢的推荐信</h1><ol class=""><li id="e5c1" class="nn no it lb b lc mr lf ms li np lm nq lq nr lu ns nt nu nv bi translated"><a class="ae ky" href="https://learn.datacamp.com/courses/data-manipulation-with-dplyr" rel="noopener ugc nofollow" target="_blank">https://learn . data camp . com/courses/data-manipulation-with-dplyr</a></li><li id="5b0b" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><a class="ae ky" href="https://www.rstudio.com/resources/cheatsheets/" rel="noopener ugc nofollow" target="_blank">https://www.rstudio.com/resources/cheatsheets/</a></li><li id="3c24" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">【https://appsilon.com/pandas-vs-dplyr/】</li><li id="f4a8" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><a class="ae ky" href="https://analyticsindiamag.com/pythons-pandas-vs-rs-tidyverse-who-wins/" rel="noopener ugc nofollow" target="_blank">https://analyticsindiamag . com/python-pandas-vs-RS-tidy verse-who-wins/</a></li><li id="7574" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><a class="ae ky" href="https://www.reddit.com/r/datascience/comments/d9qom4/whats_pandas_missing_that_tidyverse_provides/" rel="noopener ugc nofollow" target="_blank">https://www . Reddit . com/r/data science/comments/d9qom 4/whats _ pandas _ missing _ that _ tidy verse _ provides/</a></li></ol></div></div>    
</body>
</html>