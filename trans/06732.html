<html>
<head>
<title>11 Dplyr Functions to Start Using Right Now in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">11 Dplyrå‡½æ•°ï¼Œç°åœ¨å°±å¼€å§‹åœ¨R</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://towardsdatascience.com/11-dplyr-functions-to-start-using-right-now-in-r-b3d83dd538e4?source=collection_archive---------20-----------------------#2021-06-17">https://towardsdatascience.com/11-dplyr-functions-to-start-using-right-now-in-r-b3d83dd538e4?source=collection_archive---------20-----------------------#2021-06-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7df1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">å¤§å¹…æé«˜æ‚¨çš„æ•°æ®å¤„ç†æ•ˆç‡</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7d88f1bb70c0f2a03712f53b18ca5611.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2L42UtgbolAw6ipZUv9AXg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">æ²ƒå…‹Â·èŠ¬é¡¿åœ¨Unsplash<a class="ae ky" href="https://unsplash.com/s/photos/jumping?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">æ‹æ‘„çš„ç…§ç‰‡</a></p></figure><p id="0e61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ä½œä¸ºä¸€åå¤§å­¦æ–°ç”Ÿï¼Œå½“æˆ‘çš„äººç”Ÿç›®æ ‡ä»ç„¶æ˜¯æˆä¸ºä¸€åç‚™æ‰‹å¯çƒ­çš„å¤–äº¤å®˜æˆ–è”åˆå›½å¤§ä½¿æ—¶ï¼Œæˆ‘å’Œä¸€ä¸ªç©¿ç€æˆ‘ä»¬å­¦æ ¡é¢œè‰²çš„æŠ€æœ¯äººå‘˜ä¸€èµ·ä¹˜åä¼˜æ­¥å›åˆ°äº†æˆ‘çš„å¤§å­¦ï¼Œä»–ç¢°å·§ä½åœ¨ç¦»æˆ‘å®¿èˆå‡ ä¸ªè¡—åŒºçš„åœ°æ–¹ã€‚æˆ‘å°½å¯èƒ½åœ°å’Œä»–é—²èŠï¼Œè¯¢é—®äº†ä»–çš„ç”Ÿæ´»ï¼Œå‘ç°ä»–æ˜¯ä¸€ååˆšåˆšä»å·¥ç¨‹ä¸“ä¸šæ¯•ä¸šçš„å¤šç±³è¯ºéª¨ç‰Œå…¬å¸çš„æ•°æ®ç§‘å­¦å®¶ã€‚</p><p id="464d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">â€œå“¦ï¼Œå¤ªé…·äº†â€¦â€¦ä½ æœ€å¸¸ç”¨çš„æ˜¯ä»€ä¹ˆï¼Œå‘ƒï¼ŒåŒ…è£¹ï¼Ÿâ€æˆ‘è¯´ï¼Œæˆ‘ä¸ºè‡ªå·±è®°ä½äº†æš—è¯­ä¸­çš„â€œåŒ…è£¹â€è€Œæ„Ÿåˆ°è‡ªè±ªã€‚</p><p id="df25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">â€œå¤§éƒ¨åˆ†æ˜¯Dplyrã€‚â€</p><p id="fb63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">â€œå¬èµ·æ¥â€¦â€¦å¾ˆæœ‰è¶£ã€‚â€æˆ‘è¯´ï¼Œç‚¹ç‚¹å¤´ï¼Œä½å¤´çœ‹ç€æˆ‘çš„æ‰‹ã€‚åœ¨é‚£ä¹‹åï¼Œæˆ‘è¯•å›¾æƒ³å‡ºä¸€äº›é—®é¢˜æ¥é—®ä»–å…³äºæ¯”è¨é¥¼çš„äº‹æƒ…ï¼Œæ¯”å¦‚ä»–æ˜¯å¦ä¼šç»ˆèº«å…è´¹è·å¾—æ¯”è¨é¥¼ï¼Œä»¥åŠä»–æ˜¯å¦ç›¸ä¿¡å¯¹å¥¶é…ªä¸Šç˜¾æ˜¯å¯èƒ½çš„ï¼Œä½†ç›¸åï¼Œä»–åªæ˜¯çœ‹ç€çª—å¤–ï¼Œç»§ç»­ç”¨æ‰‹ç©äº†ä¸‰ååˆ†é’Ÿã€‚æœ€åï¼Œæˆ‘ç»™äº†ä»–æˆ‘çš„å·ç ï¼Œè¿™æ ·ä»–å°±å¯ä»¥é—®æˆ‘è¦æˆ‘çš„é‚£ä¸€åŠï¼Œä½†å°±åƒé‚£ä¸ªæ‹¼è½¦çš„éœ‡è€³æ¬²è‹çš„æ²‰é»˜ä¸€æ ·ï¼Œæˆ‘å†ä¹Ÿæ²¡æœ‰æ”¶åˆ°ä»–çš„åç»­çŸ­ä¿¡(å¸Œæœ›ä»–ä¸è¦åœ¨å·¥ä½œæ—¶çœ‹TDSï¼Œå“ˆå“ˆ)ã€‚</p><p id="c14b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ‰€ä»¥ç°åœ¨æˆ‘åœ¨è¿™é‡Œï¼Œä»ç„¶å®³æ€•å››å¹´å‰å’Œä¸€ä¸ªä¸çŸ¥åçš„é™Œç”Ÿäººä¸€èµ·åè½¦ã€‚ä½†æ˜¯ä¹Ÿè®¸ï¼Œä»…ä»…æ˜¯ä¹Ÿè®¸ï¼Œå¦‚æœä½ å’Œä¸€ä¸ªè®¤è¯†Dplyrçš„é™Œç”Ÿäººå¡åœ¨ä¸€è¾†è½¦é‡Œï¼Œä½ å¯ä»¥ç”¨è¿™ç¯‡æ–‡ç« çš„å†…å®¹è¿›è¡Œå¯¹è¯ã€‚ç„¶åï¼Œæˆ‘äº²çˆ±çš„è¯»è€…ï¼Œä½ å°†ä¸ä¼šèŠ±å››å¹´çš„æ—¶é—´å»æƒ³Dplyræ˜¯ä»€ä¹ˆï¼Œå®ç°ä½ çš„æ—§æ¢¦æƒ³ä¸å†ï¼Œè‡ªå­¦å¦‚ä½•ç¼–ç ï¼Œåœ¨å…¨çƒç–«æƒ…æ¯•ä¸šï¼Œåœ¨ç ”ç©¶ç”Ÿé™¢æ¢ç´¢ä¸€ä¸ªå…¨æ–°çš„é¢†åŸŸï¼Œæœ€ç»ˆæˆä¸ºä¸€åæ•°æ®ç§‘å­¦å®¶ï¼Œå¹¶ä»¥TDSæ–‡ç« çš„å½¢å¼é‡æ¸©æœ€åˆçš„å°´å°¬å¯¹è¯ã€‚</p><p id="eb86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¥½å§ï¼Œä½†è¯´çœŸçš„ï¼ŒDplyréå¸¸é…·(ç‹¬ä¸€æ— äºŒçš„<a class="ae ky" href="https://www.rstudio.com/speakers/hadley-wickham/" rel="noopener ugc nofollow" target="_blank">å“ˆå¾·åˆ©Â·å¨å…‹å§†</a>çš„åˆä¸€é¡¹ä¼Ÿå¤§å‘æ˜)ã€‚å°±èŒƒå›´è€Œè¨€ï¼ŒDplyræ˜¯Rï¼Œå°±åƒPandasæ˜¯Pythonä¸€æ ·ï¼Œä½†æ˜¯è¿™ä¸¤ç§è¯­è¨€ä¹Ÿä¸SQLæœ‰å¾ˆå¼ºçš„ç›¸ä¼¼æ€§ã€‚å¦‚æœä½ å‘ç°è‡ªå·±éå¸¸ä¾èµ–base Rï¼Œé‚£ä¹ˆDplyrçš„<code class="fe lv lw lx ly b">%&gt;%</code>å¯èƒ½ä¼šæ›´æœ‰æ•ˆã€æ›´ç›´è§‚åœ°ä¸ºä½ è§£å†³è®¸å¤šæ—¥å¸¸æ•°æ®äº‰è®ºä»»åŠ¡ã€‚</p><p id="3f5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åœ¨æˆ‘å¼€å§‹è®¨è®ºæ‚¨ç°åœ¨éœ€è¦å¼€å§‹å®æ–½çš„é¡¶çº§åŠŸèƒ½ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆè®¨è®ºä¸€ä¸‹æˆ¿é—´é‡Œçš„ä¸€å¤´å¤§è±¡â€¦</p><h1 id="2e89" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated"><strong class="ak">%&gt;%</strong>æ“ä½œå‘˜</h1><p id="e54d" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><em class="mw">æœ¬æ–‡çš„æ›¿ä»£åç§°:</em> <strong class="lb iu"> <em class="mw">ä»€ä¹ˆæ˜¯$@ &amp; %æ˜¯% &gt; %æ“ä½œç¬¦ï¼Ÿ</em> </strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/adfba67060bd12ab1becd2a5737505f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_9RRp5MwfhifcbLlZzygIA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ä½œè€…æ’å›¾</p></figure><p id="817e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">%&gt;% ( <strong class="lb iu">è¯»ä½œ:â€œç®¡é“â€</strong>)æ˜¯Rä¸­çš„ä¸€ä¸ªæ“ä½œç¬¦ï¼Œå®ƒå°†ä¹‹å‰çš„å†…å®¹è¾“å…¥åˆ°ä¹‹åçš„å†…å®¹ä¸­ã€‚è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œå› ä¸ºç®¡é“æ“ä½œç¬¦å¯ä»¥æŒ‰é¡ºåºç”¨äºå°†è®¸å¤šå±‚å‘½ä»¤é“¾æ¥åœ¨ä¸€èµ·ã€‚å› æ­¤ï¼Œæ€»æ˜¯ä»ä»–ä»¬å¸Œæœ›ä¿®æ”¹çš„æ•°æ®é›†å¼€å§‹ï¼Œæ¥ç€æ˜¯å¦ä¸€ä¸ªç®¡é“ï¼Œç„¶åæ˜¯ä¿®æ”¹å™¨ã€‚å¯ä»¥æ·»åŠ æ— é™æ•°é‡çš„ä¿®æ”¹å™¨ï¼Œä½†æ˜¯å¿…é¡»ç”¨ç®¡é“å°†å®ƒä»¬åˆ†å¼€æ‰èƒ½å·¥ä½œã€‚å¯¹æˆ‘æ¥è¯´ï¼Œæˆ‘å–œæ¬¢æŠŠDplyrä¸­çš„<code class="fe lv lw lx ly b">%&gt;%</code>æƒ³è±¡æˆç±»ä¼¼äºç†ŠçŒ«ä¸­çš„<code class="fe lv lw lx ly b">.</code>ã€‚æˆ–è€…ï¼Œå¦‚æœ<em class="mw"> x </em>è¡¨ç¤ºåŸºç¡€æ•°æ®é›†ï¼Œé‚£ä¹ˆä¸€ä¸ª<code class="fe lv lw lx ly b">%&gt;%</code>å°±å¥½æ¯”æŠŠ<em class="mw"> x </em>æ”¾å…¥å‡½æ•°<em class="mw"> f(x) </em>ï¼Œä¸¤å±‚æ˜¯<em class="mw"> g(f(x)) </em>ï¼Œä¸‰å±‚æ˜¯<em class="mw">h(g(f(x))</em>ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><em class="na">åƒé£Ÿäººé­”å’Œæ´‹è‘±ä¸€æ ·ï¼Œç®¡é“ä¹Ÿæœ‰å±‚æ¬¡ã€‚ã€GIPHYçš„GIF</em></p></figure><p id="d03d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ä¸‹é¢æ˜¯Pandas vs. Dplyré‡å‘½åä¸¤ä¸ªåˆ—çš„ä¾‹å­ã€‚ä¾æˆ‘æ‹™è§ï¼ŒDplyrå®é™…ä¸Šåœ¨å¯è¯»æ€§æ–¹é¢é¢†å…ˆä¸€ç‚¹:</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="791f" class="nf ma it ly b gy ng nh l ni nj"># pandas<br/>df.<!-- -->rename(columns={'old_name1': 'new_name1', <br/>                   'old_name2': 'new_name2'}, inplace=True)<br/>--------------------------------------------------------------------<br/># dplyr <br/>df %&gt;%<br/>  rename(new_name1 = old_name1, <br/>         new_name2 = old_name2)</span></pre><p id="f584" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">è¿™é‡Œæœ‰ä¸€äº›å°†å¤šä¸ªç®¡é“é“¾æ¥åœ¨ä¸€èµ·çš„ä¾‹å­ï¼Œå¯ä»¥è¿›è¡Œæ— é™æ¬¡:</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="dc42" class="nf ma it ly b gy ng nh l ni nj"># in order to follow along, run these: <br/>library(tidyverse) <br/>library(gapminder)</span><span id="accf" class="nf ma it ly b gy nk nh l ni nj"># one pipe <br/>gapminder %&gt;%<br/>  select(country, continent, year, pop)</span><span id="c0a0" class="nf ma it ly b gy nk nh l ni nj"># two pipes<br/>gapminder %&gt;%<br/>  select(country, continent, year, pop) %&gt;%<br/>  rename(population = pop)</span><span id="65b5" class="nf ma it ly b gy nk nh l ni nj"># three pipes<br/>gapminder %&gt;%<br/>  select(country, continent, year, pop) %&gt;%<br/>  rename(population = pop) %&gt;%<br/>  filter(year &gt; 1985)</span><span id="78e3" class="nf ma it ly b gy nk nh l ni nj"># four pipes<br/>gapminder %&gt;%<br/>  select(country, continent, year, pop) %&gt;%<br/>  rename(population = pop) %&gt;%<br/>  filter(year &gt; 1985) %&gt;%<br/>  arrange(desc(population)) </span><span id="4ad6" class="nf ma it ly b gy nk nh l ni nj"># for the last, notice that we say "arrange(desc(population))" because in step two it was renamed from "pop". </span></pre><p id="3113" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹æ·±å…¥å‡½æ•°æœ¬èº«äº†ï¼</p><h1 id="8dbb" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">#1:æè¿°æ•°æ®</h1><p id="230c" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><strong class="lb iu"> glimpse(): </strong>è¿”å›1) # rowsï¼Œ2) # colsï¼Œ3)æ¯åˆ—çš„æ•°æ®ç±»å‹ï¼Œä»¥åŠ4)å‰10ä¸ªå·¦å³çš„æ¡ç›®(å–å†³äºå±å¹•ä¸Šçš„ç©ºé—´)ã€‚ç›¸åº”çš„ç†ŠçŒ«åŠŸèƒ½æˆ‘ä¼šæŠŠå®ƒç­‰åŒäº<code class="fe lv lw lx ly b">df.describe()</code>ã€‚</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="0803" class="nf ma it ly b gy ng nh l ni nj">library(tidyverse) <br/>library(gapminder)</span><span id="bd90" class="nf ma it ly b gy nk nh l ni nj">gapminder %&gt;%<br/>  glimpse()</span></pre><h1 id="a836" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">#2:æŒ‰ä¸€åˆ—æˆ–å¤šåˆ—æ’åº</h1><p id="e219" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><strong class="lb iu"> arrange(): </strong>å…³æ³¨æ•°æ®æœ‰æ—¶ä¼šéå¸¸æœ‰ç›Šï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨<code class="fe lv lw lx ly b">arrange()</code>æ¥æŒ‰å‡åºæˆ–é™åºæ’åˆ—å„ä¸ªåˆ—ã€‚è¿™ä¸SQLä¸­çš„<code class="fe lv lw lx ly b">ORDER BY</code>å­å¥æˆ–Pandasä¸­çš„<code class="fe lv lw lx ly b">df.sort_values()</code>éå¸¸ç›¸ä¼¼ã€‚</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="8e99" class="nf ma it ly b gy ng nh l ni nj"># sort ascending (default)<br/>gapminder %&gt;% <br/>  arrange(lifeExp)</span><span id="43ac" class="nf ma it ly b gy nk nh l ni nj"># sort descending <br/>gapminder %&gt;% <br/>  arrange(desc(lifeExp))</span><span id="adce" class="nf ma it ly b gy nk nh l ni nj"># sort on multiple columns<br/>gapminder %&gt;% <br/>  arrange(lifeExp, pop, country)</span></pre><h1 id="49cc" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">#3å’Œ4:æ•°æ®é€‰æ‹©</h1><p id="7618" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><strong class="lb iu"> select()ï¼Œtransforme():</strong><code class="fe lv lw lx ly b">select()</code>å‡½æ•°åªå¯¹åŸå§‹æ•°æ®é›†çš„æŒ‡å®šåˆ—è¿›è¡Œå¿«ç…§ã€‚ç±»ä¼¼åœ°ï¼Œ<code class="fe lv lw lx ly b">transmute()</code>ä»¥åŒæ ·çš„æ–¹å¼å·¥ä½œï¼Œå¹¶å…·æœ‰åŒæ—¶åˆ›å»ºæ–°åˆ—çš„é¢å¤–èƒ½åŠ›ã€‚è¿™ä¸¤ä¸ªå‡½æ•°çš„å·¥ä½œæ–¹å¼ä¸SQLä¸­çš„<code class="fe lv lw lx ly b">SELECT</code>å­å¥éå¸¸ç›¸ä¼¼ã€‚</p><p id="a355" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¦‚æœæ‚¨åªæ˜¯å¸Œæœ›ä»æ•°æ®æ¡†æ¶ä¸­æ‹‰å‡ºæœªåŠ¨è¿‡çš„åˆ—ï¼Œæˆ‘ä¼šåšæŒä½¿ç”¨selectï¼Œè€Œå¦‚æœæ‚¨è¦è¿›è¡Œè½¬æ¢ï¼Œåˆ™ä½¿ç”¨transmuteã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰å˜é‡<code class="fe lv lw lx ly b">gdpPercap</code>å’Œ<code class="fe lv lw lx ly b">pop</code>ï¼Œæˆ‘ä»¬æ­£åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„<code class="fe lv lw lx ly b">gdp</code>åˆ—ã€‚</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="f356" class="nf ma it ly b gy ng nh l ni nj">gapminder %&gt;%<br/>  select(country, continent, year, pop)</span><span id="d65d" class="nf ma it ly b gy nk nh l ni nj">gapminder %&gt;%<br/>  transmute(country, continent, gdp = gdpPercap * pop)</span></pre><p id="0b37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">selectè¿˜æœ‰ä¸€äº›æ›´é«˜çº§çš„é€‰é¡¹ï¼Œå¯ä»¥å¸®åŠ©æ‚¨å‡†ç¡®åœ°è·å¾—æ‰€éœ€çš„åˆ—ï¼ŒåŒ…æ‹¬ä¸€ä¸²è¿æ¥çš„åˆ—æˆ–æ‰€æœ‰åŒ…å«ã€å¼€å§‹æˆ–ç»“æŸäºæŸäº›å­—ç¬¦çš„åˆ—:</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="4b37" class="nf ma it ly b gy ng nh l ni nj"># advanced select() tools</span><span id="a85b" class="nf ma it ly b gy nk nh l ni nj"># 1. rename variables with select() <br/>gapminder %&gt;%<br/>  select(country, continent, population = pop)</span><span id="cd71" class="nf ma it ly b gy nk nh l ni nj"># 2. Include a string of columns at once with ':'<br/>gapminder %&gt;%<br/>  select(country, year, lifeExp:gdpPercap)</span><span id="1f8e" class="nf ma it ly b gy nk nh l ni nj"># 3. Include any column with a given string <br/>gapminder %&gt;%<br/>  select(country, year, contains("gdp"))</span><span id="093f" class="nf ma it ly b gy nk nh l ni nj"># 4. Include any column starting with a given string <br/>gapminder %&gt;%<br/>  select(country, year, starts_with("co"))</span><span id="defd" class="nf ma it ly b gy nk nh l ni nj"># 5. Include any column ending with a given string<br/>gapminder %&gt;%<br/>  select(country, year, ends_with("Exp"))</span><span id="112f" class="nf ma it ly b gy nk nh l ni nj"># Keep the last column, by any name<br/>gapminder %&gt;%<br/>  select(country, year, last_col())</span></pre><h1 id="fdaa" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">#4å’Œ5:é‡å‘½å/ä¿®æ”¹å•ä¸ªåˆ—</h1><p id="7ef1" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><strong class="lb iu"> rename()ï¼Œmutate(): </strong>è¿™äº›å‡½æ•°ä¿®æ”¹ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—ï¼Œå¹¶å°†å®ƒä»¬ä¿å­˜å›æ–‡ä»¶ã€‚é¡¾åæ€ä¹‰ï¼Œ<code class="fe lv lw lx ly b">rename()</code>ç”¨äºé‡å‘½åï¼Œè€Œ<code class="fe lv lw lx ly b">mutate()</code>åˆ™å®Œå…¨é€šè¿‡è½¬æ¢åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ã€‚</p><p id="1a87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æœ‰äº†<code class="fe lv lw lx ly b">rename()</code>å’Œ<code class="fe lv lw lx ly b">mutate()</code>ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨é€—å·ä¸€æ¬¡è¡¨ç¤ºå¤šä¸ªä¿®æ”¹ã€‚Dplyrä¸­çš„é‡å‘½åç±»ä¼¼äºä½¿ç”¨<code class="fe lv lw lx ly b">df.rename()</code>ï¼Œå˜å¼‚ç±»ä¼¼äºPythonä¸­ä½¿ç”¨çš„<code class="fe lv lw lx ly b">df[new_col] = df[old_col1] * df[old_col2]</code>ã€‚</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="c607" class="nf ma it ly b gy ng nh l ni nj"># rename a column to be called something else<br/>gapminder %&gt;%<br/>  rename(population = pop,       #ex. 'pop' turns into 'population'<br/>         countries  = country, <br/>         life_expectancy = lifeExp)</span><span id="73ae" class="nf ma it ly b gy nk nh l ni nj"># add a new calculated field<br/>gapminder %&gt;%<br/>  mutate(gdp = gdpPercap * pop)  #ex. 'gdp' is created as a new var</span></pre><h1 id="e8a6" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">#6:æ ¹æ®æ¡ä»¶è¿‡æ»¤æ•°æ®</h1><p id="81d4" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><strong class="lb iu"> filter(): </strong>ç±»ä¼¼äºSQLä¸­çš„WHEREå­å¥æˆ–è€…Pythonä¸­çš„æ¡ä»¶è¡¨è¾¾å¼(<code class="fe lv lw lx ly b">df[df['country'] == 'France']</code>)ã€‚ä¸å…¶ä»–Dplyrå‡½æ•°ç±»ä¼¼ï¼Œå¯ä»¥é€šè¿‡ç”¨<code class="fe lv lw lx ly b">,</code>ã€<code class="fe lv lw lx ly b">&amp;</code>æˆ–<code class="fe lv lw lx ly b">|</code>ç¬¦å·åˆ†éš”æ¯ä¸ªå‚æ•°æ¥æŒ‡å®šå¤šä¸ªè¿‡æ»¤å™¨ã€‚å¯¹äºå­—ç¬¦ä¸²ï¼Œå»ºè®®ä½¿ç”¨<code class="fe lv lw lx ly b">%in%</code>è€Œä¸æ˜¯<code class="fe lv lw lx ly b">==</code>ã€‚</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="7d31" class="nf ma it ly b gy ng nh l ni nj"># filter for France<br/>gapminder %&gt;% <br/>  filter(country %in% "France")</span><span id="0e58" class="nf ma it ly b gy nk nh l ni nj"># filter for a subset of countries (c stands for 'concat')<br/>gapminder %&gt;% <br/>  select(pop, country, year) %&gt;%      <br/>  filter(country %in% c('France','Spain','Portugal'))</span><span id="fa71" class="nf ma it ly b gy nk nh l ni nj"># "or" operator function<br/>gapminder %&gt;% <br/>  select(pop, country, year) %&gt;%        <br/>  filter(pop &gt; 50000 | pop &lt; 100000)</span><span id="0214" class="nf ma it ly b gy nk nh l ni nj"># "and" operator function 1 <br/>gapminder %&gt;% <br/>  select(pop, country, year) %&gt;%        <br/>  filter(pop &gt; 50000, pop &lt; 100000)</span><span id="d3c8" class="nf ma it ly b gy nk nh l ni nj"># "and" operator function 2<br/>gapminder %&gt;% <br/>  select(pop, country, year) %&gt;%        <br/>  filter(pop &gt; 50000 &amp; pop &lt; 100000)</span></pre><h1 id="969d" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">#7-9:å–æœ€å¤§å€¼ã€æœ€å°å€¼ã€å¹³å‡å€¼ã€è®¡æ•°&amp;ä»»ä½•ä¸­é—´å€¼</h1><p id="1aac" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><strong class="lb iu"> count()ã€summarize()å’Œtop_n(kï¼Œ)</strong></p><p id="fdb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">count()</code>å‡½æ•°éå†æ•°æ®é›†ï¼Œå¹¶è®¡ç®—ä¸€ä¸ªå€¼åœ¨ç»™å®šçš„ä¸€åˆ—æˆ–å¤šåˆ—ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚æˆ‘ç»å¸¸ä½¿ç”¨å®ƒä¸€æ¬¡æŸ¥çœ‹ä¸€åˆ—ï¼Œä¾‹å¦‚äº†è§£æˆ‘æ­£åœ¨æŸ¥çœ‹çš„æ¯ä¸ªæ´²æœ‰å¤šå°‘ä¸ªå›½å®¶ï¼Œæˆ–è€…ä¸€ä¸ªåŸå¸‚ä¸­æœ‰å¤šå°‘äººå¼€è½¦ã€éª‘è‡ªè¡Œè½¦æˆ–ä¹˜å…¬äº¤è½¦ä¸Šç­ã€‚</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="ea4e" class="nf ma it ly b gy ng nh l ni nj">gapminder %&gt;%<br/>  count(continent)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/8be26e14e1a57a514aef04738b03e2a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AhQpaTuij6aZyjp-_vLAbQ.png"/></div></div></figure><p id="a0a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ä½¿ç”¨summarizeï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹èšåˆå‡½æ•°ï¼Œå¦‚åˆ—çš„sumã€medianã€meanã€standard deviationã€varianceã€minå’Œmaxï¼Œå¹¶ä¸ºå…¶å‘½åã€‚å½“ä¸ç±»ä¼¼<code class="fe lv lw lx ly b">group_by()</code>çš„å‡½æ•°æ··åˆä½¿ç”¨æ—¶ï¼Œè¿™äº›å‡½æ•°åœ¨ç†è§£æ•°æ®é›†ä¸­çš„å­ç¾¤ä½“æ—¶ä¼šå˜å¾—éå¸¸æœ‰ç”¨ã€‚</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="8307" class="nf ma it ly b gy ng nh l ni nj"># summarize <br/># sum(), mean(), median(), min(), max(), sd(), var()</span><span id="dcc9" class="nf ma it ly b gy nk nh l ni nj">gapminder %&gt;%<br/>  summarize(total_gdp = sum(gdpPercap))</span><span id="299a" class="nf ma it ly b gy nk nh l ni nj">gapminder %&gt;%<br/>  summarize(avg_gdp = mean(gdpPercap))</span><span id="3a3d" class="nf ma it ly b gy nk nh l ni nj">gapminder %&gt;%<br/>  summarize(gdp_standard_dev = sd(gdpPercap))</span><span id="c971" class="nf ma it ly b gy nk nh l ni nj">gapminder %&gt;%<br/>  summarize(gdp_variance = var(gdpPercap))</span><span id="2bbd" class="nf ma it ly b gy nk nh l ni nj"># we can also create many columns at once</span><span id="c5fc" class="nf ma it ly b gy nk nh l ni nj">gapminder %&gt;%<br/>  summarize(max_gdp = max(gdpPercap),<br/>            total_pop = sum(pop), <br/>            min_lifeExp = min(lifeExp))</span><span id="d272" class="nf ma it ly b gy nk nh l ni nj"># I use __ = __ in order to give a name to the new summary columns, # but it is not required.</span></pre><p id="9139" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æœ€åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class="fe lv lw lx ly b">top_n(k, )</code>åªä¿ç•™æ•°æ®å¸§æˆ–ç»„ä¸­çš„å‰<em class="mw"> k </em>å€¼ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹ä¸‹é¢æ¯ä¸ªå¤§é™†äººå‡GDPæœ€é«˜çš„å›½å®¶ã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰é¦–å…ˆåŒ…å«<code class="fe lv lw lx ly b">group_by()</code>å‡½æ•°ï¼Œé‚£ä¹ˆç»“æœå°†æ˜¯ä¸–ç•Œä¸Šäººå‡GDPæœ€é«˜çš„å›½å®¶ï¼Œå³ç§‘å¨ç‰¹ã€‚ç±»ä¼¼åœ°ï¼Œå¦‚æœæˆ‘ä»¬æŒ‡å®šäº†<em class="mw"> k=4 </em>ï¼Œé‚£ä¹ˆå®ƒä¼šæ˜¾ç¤ºå‡ºæ¯ä¸ªå¤§æ´²é¢„æœŸå¯¿å‘½æœ€é«˜çš„å‰å››ä¸ªå›½å®¶ã€‚</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="8081" class="nf ma it ly b gy ng nh l ni nj"># top_n(k, )</span><span id="58dd" class="nf ma it ly b gy nk nh l ni nj">gapminder %&gt;% <br/>  group_by(continent) %&gt;% <br/>  top_n(1, gdpPercap)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/4b41208a09024ad64e2af634cb4a2cd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oo2O_doHexS7DhOjAakXfQ.png"/></div></div></figure><h1 id="b4a2" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">#10å’Œ11:åˆ†ç»„ä¾æ®</h1><p id="73fc" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><strong class="lb iu">group _ by()&amp;ungroup():</strong>å’Œæ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œå¦‚æœæ²¡æœ‰ä¸€ä¸ªå¥½çš„group byå‡½æ•°ï¼Œæˆ‘ä»¬ä¼šæ€æ ·ï¼Ÿä¸åˆ—å‡ºçš„å…¶ä»–å‡½æ•°ç»“åˆä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºå…³äºæ•°æ®é›†ä¸­å­˜åœ¨çš„å­ç¾¤ä½“çš„æœ‰è¶£ç»“è®ºã€‚è¯¥åŠŸèƒ½ä¸Pandas <code class="fe lv lw lx ly b">df.group_by()</code>æˆ–SQLçš„<code class="fe lv lw lx ly b">GROUP BY</code>ä¸­çš„åŠŸèƒ½ç›¸åŒï¼Œé™¤äº†è¿™äº›ç»„å°†ä¿æŒä¸å˜ï¼Œç›´åˆ°æ‚¨å†æ¬¡æ‰‹åŠ¨æ–­å¼€å®ƒä»¬ä¸<code class="fe lv lw lx ly b">ungroup()</code>çš„è¿æ¥ã€‚</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="9a2e" class="nf ma it ly b gy ng nh l ni nj"># Using group_by<br/>gapminder %&gt;%      <br/>  group_by(year) %&gt;%                    <br/>  mutate(year_total = sum(pop))</span><span id="7789" class="nf ma it ly b gy nk nh l ni nj"># Grouping and then ungrouping again with ungroup()<br/>gapminder %&gt;%      <br/>  group_by(year) %&gt;%                    <br/>  mutate(year_total = sum(pop)) %&gt;%      <br/>  ungroup() %&gt;%                          <br/>  mutate(fraction = pop / year_total)</span></pre><h1 id="1f4b" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">ç»“è®º</h1><p id="1e22" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">æ€»ä¹‹ï¼Œæˆ‘å¸Œæœ›è¿™ç¯‡ä»‹ç»èƒ½è®©ä½ æ˜ç™½Dplyrä¸SQLå’ŒPandasæœ‰å¾ˆå¼ºçš„ç›¸ä¼¼æ€§ã€‚å¦‚æœå…³äºæ•°æ®è½¬æ¢çš„æŸäº›ä¸œè¥¿è®©ä½ çŠ¯äº†é”™è¯¯ï¼ŒDplyråœ¨æ•ˆç‡å’Œå¯è¯»æ€§æ–¹é¢å¾ˆå¼ºâ€”â€”å¹¶ä¸”åœ¨äº’è”ç½‘ä¸Šæœ‰å¤§é‡çš„<a class="ae ky" href="https://www.rstudio.com/resources/cheatsheets/" rel="noopener ugc nofollow" target="_blank">å¤‡å¿˜å•</a>å’Œ<a class="ae ky" href="https://learn.datacamp.com/courses/data-manipulation-with-dplyr" rel="noopener ugc nofollow" target="_blank">æ•™ç¨‹</a>ä¸ºä½ æä¾›ï¼</p><p id="b9cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¦‚æœä½ å–œæ¬¢è¿™ç¯‡å…³äºä¸Dplyrçš„æ•°æ®äº‰è®ºçš„æ–‡ç« ï¼Œè¯·é¼“æŒæˆ–è¯„è®ºè®©æˆ‘çŸ¥é“â€”â€”å¦‚æœæœ‰è¶³å¤Ÿçš„å…´è¶£ï¼Œé‚£ä¹ˆæˆ‘å°†åšç¬¬2éƒ¨åˆ†ï¼Œåœ¨é‚£é‡Œæˆ‘å°†å›é¡¾Dplyrä¸­æ›´å¤æ‚çš„å‘½ä»¤ï¼Œå¹¶å¯èƒ½åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å‘ç°æˆ‘è¿‡å»æ›´å°´å°¬çš„æ•…äº‹ã€‚ğŸ™ƒ</p><p id="f595" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ•¬å“ˆé›·Â·éŸ¦ç¿°ï¼Œä¸‡ç‰©çš„åˆ›é€ è€…ã€‚è¯´çœŸçš„ï¼Œæˆ‘ä»¬ä»€ä¹ˆæ—¶å€™è®©ä»–æˆä¸ºæˆ‘ä»¬çš„æœ€é«˜ç»Ÿæ²»è€…äº†ï¼Ÿ</p><p id="e61e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">* *ç¼–è¾‘:åŸºåœ°Rç»ˆç©¶æ˜¯è¦æ‹¿çƒŸæ–—çš„ï¼é“¾æ¥:<a class="ae ky" href="https://www.youtube.com/watch?v=wmvjxb6Gdm8" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=wmvjxb6Gdm8</a></p><h1 id="c43b" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">æˆ‘å–œæ¬¢çš„æ¨èä¿¡</h1><ol class=""><li id="e5c1" class="nn no it lb b lc mr lf ms li np lm nq lq nr lu ns nt nu nv bi translated"><a class="ae ky" href="https://learn.datacamp.com/courses/data-manipulation-with-dplyr" rel="noopener ugc nofollow" target="_blank">https://learn . data camp . com/courses/data-manipulation-with-dplyr</a></li><li id="5b0b" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><a class="ae ky" href="https://www.rstudio.com/resources/cheatsheets/" rel="noopener ugc nofollow" target="_blank">https://www.rstudio.com/resources/cheatsheets/</a></li><li id="3c24" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">ã€https://appsilon.com/pandas-vs-dplyr/ã€‘</li><li id="f4a8" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><a class="ae ky" href="https://analyticsindiamag.com/pythons-pandas-vs-rs-tidyverse-who-wins/" rel="noopener ugc nofollow" target="_blank">https://analyticsindiamag . com/python-pandas-vs-RS-tidy verse-who-wins/</a></li><li id="7574" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><a class="ae ky" href="https://www.reddit.com/r/datascience/comments/d9qom4/whats_pandas_missing_that_tidyverse_provides/" rel="noopener ugc nofollow" target="_blank">https://www . Reddit . com/r/data science/comments/d9qom 4/whats _ pandas _ missing _ that _ tidy verse _ provides/</a></li></ol></div></div>    
</body>
</html>