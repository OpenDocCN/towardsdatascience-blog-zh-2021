<html>
<head>
<title>Understand Q-Q plot using simple python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用简单的 python 理解 Q-Q 图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/understand-q-q-plot-using-simple-python-4f83d5b89f8f?source=collection_archive---------2-----------------------#2021-11-29">https://towardsdatascience.com/understand-q-q-plot-using-simple-python-4f83d5b89f8f?source=collection_archive---------2-----------------------#2021-11-29</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="b94f" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">可视化数据的有效方法</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/99b88e42f0cfd73908eba7432727f710.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TRyIRo11NX1jeta8X448Hg.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者图片</p></figure><blockquote class="kz la lb"><p id="c25f" class="lc ld le lf b lg lh jv li lj lk jy ll lm ln lo lp lq lr ls lt lu lv lw lx ly in bi translated"><strong class="lf iv">简介</strong></p></blockquote><p id="c4ae" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">工程师和科学家处理数据。没有数据，他们无法得出任何结论。现在是每天从我们生活的各个方面创造数据的时代。有些数据是随机的，有些是有偏差的。由于数据收集过程，有些人可能会有偏见。数据的一个非常重要的方面是分布概况。收集的数据可能呈正态分布，也可能远离正态分布。它也可以向一侧倾斜，或者可以遵循多模态模式。它可以是离散的，也可以是连续的。对于连续数据，正态分布相比于它的对应物有很多优势。各种推断统计过程都假设分布是正态的。钟形曲线很容易用均值和标准差来描述。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj mc"><img src="../Images/903546adffbb8d4f254353d885f83869.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EvKHk6RTo6DHHyCfjOiwUw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">典型的正态分布数据(图片由作者提供)</p></figure><blockquote class="kz la lb"><p id="48c4" class="lc ld le lf b lg lh jv li lj lk jy ll lm ln lo lp lq lr ls lt lu lv lw lx ly in bi translated"><strong class="lf iv">为什么要阿 q 情节？</strong></p></blockquote><p id="d6ec" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">由于正态分布如此重要，我们需要检查收集的数据是否正态。在这里，我们将演示 Q-Q 图来检查数据偏态的正态性。Q 代表分位数，因此，Q-Q 图代表分位数-分位数图。为了确定正态性，也有一些统计检验，如科尔莫戈罗夫-斯米尔诺夫检验和夏皮罗-维尔克检验。本文范围仅为 Q-Q 剧情。</p><blockquote class="kz la lb"><p id="2bca" class="lc ld le lf b lg lh jv li lj lk jy ll lm ln lo lp lq lr ls lt lu lv lw lx ly in bi translated"><strong class="lf iv">简要说明</strong></p></blockquote><p id="e6b3" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">我们现在知道 Q-Q 图是分位数-分位数图，但首先分位数是什么？当对整个数据进行排序时，第 50 个分位数意味着 50%的数据低于该点，50%的数据高于该点。这是中间点。当我们说第一分位数时，只有 1%的数据低于该点，99%的数据高于该点。第 25 和第 75 分位数点也称为四分位数。数据集有三个四分位数。</p><p id="22fb" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">Q1 =第一个四分位数=第 25 个四分位数</p><p id="97ca" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">Q2 =第二个四分位数=第 50 个四分位数=中位数</p><p id="11ba" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">Q3 =第三个四分位数=第 75 个四分位数</p><p id="2365" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">分位数有时被称为百分位数。下面是一个典型的 Q-Q 图。让我们解释一下这个看起来几乎是一条直线的图。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj md"><img src="../Images/c7f11475cc90d67ed1eccaf9b43a8108.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RCHtM3kLv2G8GMxymjdBSA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Q-Q 图(图片由作者提供)</p></figure><blockquote class="kz la lb"><p id="98e5" class="lc ld le lf b lg lh jv li lj lk jy ll lm ln lo lp lq lr ls lt lu lv lw lx ly in bi translated"><strong class="lf iv">轴</strong></p></blockquote><p id="334a" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">Q-Q 图的 x 轴代表标准正态分布的分位数。假设我们有一个正常的数据，我们想标准化它。标准化意味着从每个数据点中减去平均值，然后除以标准差。结果也称为 z 分数。让我们对这些 z 值进行排序，然后再进行绘图。下图显示 x 轴现在以 0°为中心，并在每侧延伸至 3 个标准差。据统计，99.7%的数据都在这个范围之内。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj mc"><img src="../Images/f4b2e71d7c126e2d1efbd6e338867560.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LtD7hxbXhG_LxVHvqeX0uA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">标准化正态数据的分布(图片由作者提供)</p></figure><p id="09d0" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">找到 Q-Q 图的 x 轴值的第一步是确定该正态分布标准数据的分位数/百分位数。这样，我们就可以得到在所有 Q-Q 图中非常标准的分位数。当我们使用这些 z 分数时，x 轴将大致从-3 延伸到+3。</p><p id="7f1b" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">一旦我们获得了沿 x 轴绘制的值，我们就需要对感兴趣的数据应用相同的方法。因此，我们将绘制 out 数据的 z 得分与标准正态数据的 z 得分。如果我们的数据是正常的，绘图将是一条直线，因为我们正在绘制非常接近的值。如果数据不是正态分布的，线就会偏离直线轨道，发出不同情景的信号。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj me"><img src="../Images/52eaeb850cd74ebcc1b70b7ed4832a77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3qAtNc27P_qPvxI6PoUHfQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">右侧数据失真(图片由作者提供)</p></figure><p id="e08f" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">例如，如果数据偏高(如上所示)，我们将获得类似下图的 Q-Q 图。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj md"><img src="../Images/633b612666534dca54cd6eba3af544a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yyn7rT2J1sGW9nxDzddOGA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">偏斜数据的 Q-Q 图(图片由作者提供)</p></figure><p id="e02c" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">如果数据显示双峰，Q-Q 图也会显示这一点。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj mc"><img src="../Images/f0cb20caae43087bcbf14587766c27f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LUXKFAtpzxPyyT3ZjHyI0A.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">双峰数据(图片由作者提供)</p></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj mf"><img src="../Images/3b3495785b089364a24d9c984365e309.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HkUvzwuE48czRJAMR72tFw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">双峰数据的 Q-Q 图(图片由作者提供)</p></figure><p id="cd64" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">本文的教程链接是<a class="ae mg" href="https://www.youtube.com/watch?v=8KKiwyiMhqU" rel="noopener ugc nofollow" target="_blank">这里的</a>。</p><blockquote class="kz la lb"><p id="ca59" class="lc ld le lf b lg lh jv li lj lk jy ll lm ln lo lp lq lr ls lt lu lv lw lx ly in bi translated"><strong class="lf iv">用 python 实现</strong></p></blockquote><p id="720e" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">Python 有 stastsmodels 库，里面有方便的 qqplot 模块可以使用。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mh mi l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj mj"><img src="../Images/72e1bd0ef8de89181750ce045b29f684.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*nXMtt5rHrct8ldWxGZvNSA.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Statsmodels 正常数据的 Q-Q 图(图片由作者提供)</p></figure><p id="cb52" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">为了更好地理解，我还将展示代码块的分解，以便简单地实现它。一旦我们有了数据框架中的数据，我们需要将其标准化。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mh mi l"/></div></figure><p id="fafc" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">接下来，我们需要找到分位数/百分位数。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mh mi l"/></div></figure><p id="4164" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">最后，我们需要对输出和绘图进行排序。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mh mi l"/></div></figure><p id="597b" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">就是这样。我们可以使用这个 Q-Q 图快速查看数据的正态性。</p><blockquote class="kz la lb"><p id="2bc3" class="lc ld le lf b lg lh jv li lj lk jy ll lm ln lo lp lq lr ls lt lu lv lw lx ly in bi translated"><strong class="lf iv">结论</strong></p></blockquote><p id="100e" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">Q-Q 图是一个非常有用的工具，可以确定数据的正态性或数据偏离正态性的程度。此图表示沿 x 轴的标准正态分布的 z 得分以及所获得数据的相应 z 得分。有时，也可以沿 y 轴绘制样本分位数，而不是 z 得分。</p><p id="9c36" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated"><a class="ae mg" href="https://mdsohelmahmood.github.io/2021/11/28/QQplot.html" rel="noopener ugc nofollow" target="_blank"> Github 页面</a></p><p id="f7d3" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">感谢阅读。</p></div></div>    
</body>
</html>