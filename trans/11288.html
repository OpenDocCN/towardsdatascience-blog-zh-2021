<html>
<head>
<title>TensorBoard in 5 Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">五分钟后登船</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/tensorboard-in-5-minutes-71c5715a10d3?source=collection_archive---------10-----------------------#2021-11-05">https://towardsdatascience.com/tensorboard-in-5-minutes-71c5715a10d3?source=collection_archive---------10-----------------------#2021-11-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c64b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">学习如何更好地理解你的机器学习模型。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/21a56dbdc281dc57c3a15abe56fc2d12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*154a0kN699tKzkP3g_Dd_w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">TensorBoard(图片由作者提供)</p></figure><p id="3fd8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi lu translated">机器学习是复杂的。有数不清的选项可供选择，也有很多要跟踪。幸运的是，有 TensorBoard，这使得过程很容易。</p><p id="b5bc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在开发机器学习模型时，有许多因素:多少个时期用于训练，损失度量，甚至模型结构。这些决策中的每一个都可以传播，并在无效模型和成功模型之间产生差异。</p><p id="a498" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本文将讨论 TensorBoard 中的一些功能，以及如何为您的下一个机器学习项目设置 TensorBoard。特别是，重点将放在与 TensorFlow 和基于 Keras 的模型一起使用 TensorBoard。</p><p id="a864" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要确定模型的最佳配置，您需要进行实验。任何数据科学家都知道，你需要有效地跟踪和评估这些实验。</p><p id="5b8a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">幸运的是，TensorBoard 有许多内置功能，您可以利用这些功能快速了解模型中正在发生的事情。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="df8d" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">设置</h1><p id="2157" class="pw-post-body-paragraph ky kz it la b lb nc ju ld le nd jx lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">设置 TensorBoard 是一个简单的过程。只需几行代码，您就可以从您的机器学习模型中跟踪关键指标。</p><p id="073b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第一步是将扩展加载到您的笔记本中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">加载 TensorBoard 扩展(代码由作者编写)</p></figure><p id="5c2f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，您需要一些数据。这里我使用的是 TensorFlow 内置的 MNIST 数据集<a class="ae nj" href="https://www.tensorflow.org/datasets/catalog/mnist" rel="noopener ugc nofollow" target="_blank">。数据被整形以允许使用 2D 卷积层。</a></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从 TensorFlow 加载 MNIST 数据集(代码由作者编写)</p></figure><p id="3e31" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">准备好数据后，您需要构建您的模型。在这里，我做得有点过火，对每个变量都进行了参数化。</p><p id="a857" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这种选择是为了在没有太多问题的情况下快速更改模型的不同方面。这种结构也避免了不清楚值在变化的情况。</p><p id="ac63" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">结构简单。但是这个基本结构显示了各种不同的层，你可以在 TensorBoard 中进行分析。该模型包含一个 2D 卷积层，随后是汇集层、分离层、输出展平层和密集层。</p><p id="ffcc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">学习率也有调整。与设置固定的学习速率相反，调度器使学习速率变得灵活并有助于收敛。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">模型创建和参数定义(由作者编写代码)</p></figure><p id="722f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要将 TensorBoard 功能添加到您现有的基于 Keras 的 TensorBoard 模型中，您需要在培训的模型拟合阶段添加一个回调。</p><p id="d197" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">应该启用直方图计算来有效地跟踪进度，这是通过将 historgram_freq 参数设置为 1 来实现的。</p><p id="8490" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">回调函数需要一个日志目录来存储训练模型的结果。因此，在您的日志中包含一些结构化排序以供将来参考是有益的。这里使用的是当前时间。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">编译和拟合模型，设置 TensorBoard 回调(代码由作者编写)</p></figure><p id="d3df" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦模型被创建、编译和拟合，日志就应该被打包。在训练中你的模型的所有细节。准备好让你分析了。</p><p id="e4ef" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要在 TensorBoard 中查看训练过程结果，剩下的工作就是运行扩展。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">运行 TensorBoard(由作者编写代码)</p></figure></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="c241" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated"><strong class="ak">张量板的组件</strong></h1><p id="981f" class="pw-post-body-paragraph ky kz it la b lb nc ju ld le nd jx lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">TensorBoard 被分解成几个部分。这些组件允许您跟踪不同的指标，如准确性、均方根误差或对数损失。它们还允许将模型可视化为图形等等。</p><p id="1155" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这篇文章中，我将展示标量、图形、分布、直方图和时间序列标签。<strong class="la iu">但是在非活动下拉列表中可以找到其他可用视图的列表。</strong></p><p id="da5d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">TensorBoard 也有一些造型选项。我在这里的一些图片中使用了黑暗模式。</p><h2 id="8a60" class="nk ml it bd mm nl nm dn mq nn no dp mu lh np nq mw ll nr ns my lp nt nu na nv bi translated"><strong class="ak">标量</strong></h2><p id="29b6" class="pw-post-body-paragraph ky kz it la b lb nc ju ld le nd jx lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">标量是打开 TensorBoard 时看到的第一个标签。这里的重点是模型在多个时期的性能。</p><p id="0b1c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里显示了模型的损失函数和您跟踪的任何指标。</p><p id="cc17" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">该选项卡的一个重要功能是平滑功能。当处理多个时代或一个不稳定的模型时，整体趋势可能会丢失。因此，你要确保你的模型在训练中不断进步，而不是停滞不前。</p><p id="8e94" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过增加平滑度，您可以在训练过程中查看模型的总体趋势。</p><p id="9801" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">标量选项卡对于识别模型何时过度拟合至关重要。例如，当您的训练指标不断提高，但验证图没有增加时，您可能对验证集过度拟合。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/dd1fced853fb76e7853c7af88b7c4934.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IR4wZewup3AgcBW3341Rzw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">张量板标量选项卡(图片由作者提供)</p></figure><h2 id="4f29" class="nk ml it bd mm nl nm dn mq nn no dp mu lh np nq mw ll nr ns my lp nt nu na nv bi translated"><strong class="ak">图表</strong></h2><p id="4908" class="pw-post-body-paragraph ky kz it la b lb nc ju ld le nd jx lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">graphs 选项卡允许您查看您创建的模型的结构。本质上，它展示了幕后发生的事情。</p><p id="b872" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当您需要与他人共享图形结构时，这些细节很有帮助。此外，还可以上传或下载图表。</p><p id="8f14" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">除了基本模型结构，该图还揭示了如何使用不同的指标和优化器。</p><p id="c110" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这里，我选择了图中的顺序节点。一旦选中，模型的结构就会显示出来。细节可以在下图的红框中看到。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/4a8e0f1531c4173f5851280f24ed6fef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*od3foeYxIuV0jlW17TnsgQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">TensorBoard Graphs 选项卡(图片由作者提供)</p></figure><h2 id="7a6f" class="nk ml it bd mm nl nm dn mq nn no dp mu lh np nq mw ll nr ns my lp nt nu na nv bi translated"><strong class="ak">分布图&amp;直方图</strong></h2><p id="a71a" class="pw-post-body-paragraph ky kz it la b lb nc ju ld le nd jx lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">分布和直方图选项卡非常相似。但是，它们允许您通过不同的可视化方式查看相同的信息。</p><p id="cf36" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">“分布”选项卡为您提供了模型权重随时间变化的良好概览。这个视角作为一个初始的标尺，用来判断是否有什么地方出了问题。</p><p id="2d53" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">直方图视图对您的模型学习到的确切值进行了更详细的细分。</p><p id="91ec" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这两种可视化用于确定模型何时过度依赖一小组权重。或者权重是否在许多时期内收敛。</p><h2 id="95be" class="nk ml it bd mm nl nm dn mq nn no dp mu lh np nq mw ll nr ns my lp nt nu na nv bi translated">分布</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/da179e8e7d6b601c5d71833ca181bae3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TEbaItpheHWL6ULH5mb73Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">TensorBoard 分布选项卡(图片由作者提供)</p></figure><h2 id="e1ce" class="nk ml it bd mm nl nm dn mq nn no dp mu lh np nq mw ll nr ns my lp nt nu na nv bi translated"><strong class="ak">直方图</strong></h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/4c4ba056f98a44b5e6ce139e1afd31b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Gb50bhgqFxC2KdK3qM-Lw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">TensorBoard 直方图选项卡(图片由作者提供)</p></figure><h2 id="e547" class="nk ml it bd mm nl nm dn mq nn no dp mu lh np nq mw ll nr ns my lp nt nu na nv bi translated"><strong class="ak">时间序列</strong></h2><p id="d9f0" class="pw-post-body-paragraph ky kz it la b lb nc ju ld le nd jx lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">TensorBoard 中显示的最后一个选项卡是时间序列选项卡。</p><p id="966c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个视图非常类似于标量视图。然而，一个区别是您的目标度量的观察值是针对训练的每次迭代，而不是每个时期。</p><p id="faf6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以这种方式观察模型训练要细致得多。这种类型的分析最好是在模型没有收敛，并且跨时代的进展没有揭示任何答案的时候。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/2453a180c2411204064f5b754a29d85c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t77BftoxesbyGXuWRvEmng.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">TensorBoard 时间序列选项卡(图片由作者提供)</p></figure></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="6e81" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">包裹</h1><p id="a194" class="pw-post-body-paragraph ky kz it la b lb nc ju ld le nd jx lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">TensorBoard 是一个强大的工具。通过几个不同的组件和视图，你可以快速分析你的机器学习和深度学习模型。</p><p id="2394" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">该工具易于设置，并为如何更好地训练模型提供了宝贵的见解。</p><p id="f75a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里我只展示了 TensorBoard 的一个例子。您可以随意复制代码并亲自探索这个工具。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><p id="c185" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="oa">如果你有兴趣阅读关于新颖的数据科学工具和理解机器学习算法的文章，可以考虑在 medium 上关注我。我总是在我的文章中包含代码，您可以将其应用到您的工作中！</em></p><p id="2f08" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你对我的写作感兴趣，并想直接支持我，请通过以下链接订阅。这个链接确保我会收到你的会员费的一部分。</p><div class="ob oc gp gr od oe"><a href="https://zjwarnes.medium.com/membership" rel="noopener follow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">通过我的推荐链接加入 Medium-Zachary Warnes</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">阅读扎卡里·沃恩斯(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">zjwarnes.medium.com</p></div></div><div class="on l"><div class="oo l op oq or on os ks oe"/></div></div></a></div></div></div>    
</body>
</html>