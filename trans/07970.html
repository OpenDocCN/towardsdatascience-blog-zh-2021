<html>
<head>
<title>Trending Topics in Reddit during USA 2020 Elections</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">美国2020年大选期间Reddit上的热门话题</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/trending-topics-in-reddit-during-usa-2020-elections-8b25dd4fede9?source=collection_archive---------42-----------------------#2021-07-21">https://towardsdatascience.com/trending-topics-in-reddit-during-usa-2020-elections-8b25dd4fede9?source=collection_archive---------42-----------------------#2021-07-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3ecc" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用主题建模和时间序列分析在reddit数据集中发现真实事件</h2></div><p id="e203" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本帖中，我们将分享我们在主题建模和检测文本数据中真实事件方面的工作(代码和结果)。</p><h2 id="53d1" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">正在下载Reddit数据集</h2><p id="74b2" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">首先，我们使用“pushshidt”API下载Reddit数据。下面的代码使用开始日期、结束日期、子编辑名称和文本类型(可以是submission或comment)来下载速率限制下的数据。我们在2020年8月1日至2021年2月1日期间下载了阴谋、保守派和民主党子编辑。</p><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="me mf l"/></div></figure><h2 id="f835" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">数据预处理</h2><p id="d9fb" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">有了帖子和评论数据帧后，我们希望清理和预处理数据。对于每个提交，我们将“title”和“self-text”字段连接在一起，为帖子获取一个文本字段，对于评论，我们使用“body”字段获取文本。我们删除了“[已删除]”和“[已删除]”文本，并删除了没有日期的帖子和评论。</p><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="8e70" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，为了对文本进行预处理，我们去除了停用词、数字和标点符号。我们把文本分成句子，句子分成记号。为了处理数据量和使用丰富的文本，我们只取长度大于5个标记的文本。我们准备了一个所有句子的列表，作为即将到来的模型的输入。</p><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="me mf l"/></div></figure><h2 id="5918" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">主题建模</h2><p id="1d0f" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">为了找到一段时间内的趋势事件，我们首先要找到主题。为了获得每个子编辑的相关主题，我们执行了以下三个步骤。</p><ol class=""><li id="0f61" class="mg mh iq kh b ki kj kl km ko mi ks mj kw mk la ml mm mn mo bi translated">文本嵌入</li><li id="da5d" class="mg mh iq kh b ki mp kl mq ko mr ks ms kw mt la ml mm mn mo bi translated">使聚集</li><li id="f8c1" class="mg mh iq kh b ki mp kl mq ko mr ks ms kw mt la ml mm mn mo bi translated">话题指示词</li></ol><p id="e461" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">文本嵌入<br/> </strong>我们首先要使用NLP嵌入技术将每个文本转换成一个向量。我们训练了两个模型:加权word2vec和通用语句编码器(USE)。</p><ol class=""><li id="d1f5" class="mg mh iq kh b ki kj kl km ko mi ks mj kw mk la ml mm mn mo bi translated"><strong class="kh ir"> <em class="mu">加权word 2 vec-</em></strong><em class="mu">w</em>ord2 vec是一种最先进的单词级嵌入，用一个神经网络隐层进行训练，将每个单词的上下文作为输入，并尝试预测与上下文对应的单词。我们使用这个方法，窗口大小为5，嵌入大小等于128。有了词汇表中每个单词的嵌入，我们希望得到整个帖子/评论文本的嵌入。为此，我们使用单词的tf-idf分数的加权平均值。下面的代码实现了此方法。</li></ol><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="dc1c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="mu"> 2。通用句子编码器(使用)——</em></strong>word 2 vec方法的主要缺点是不考虑单词的顺序，并且单词的嵌入与它们提到的特定句子没有上下文关系。为了解决这些问题，我们使用了<a class="ae mv" href="https://amitness.com/2020/06/universal-sentence-encoder/" rel="noopener ugc nofollow" target="_blank">通用语句编码器</a>。主要思想是设计一个编码器，将任意给定的句子概括成512维的句子嵌入。USE使用这种与transformers架构的嵌入来解决多个任务，并且基于它在这些任务上所犯的错误，语句嵌入被更新。因为相同的嵌入必须在多个通用任务上工作，所以它将只捕获最有信息的特征并丢弃噪声。直觉是，这将导致通用嵌入，该通用嵌入普遍转移到各种各样的NLP任务，例如关联性、聚类、释义检测和文本分类。为了获得每个句子的使用嵌入，我们使用tensorhub获得预训练的模型，并使用数据批次应用该模型。</p><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="9381" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">聚类</strong></p><p id="9bcb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在得到每个文本的向量表示后，我们使用K-means算法得到聚类。然后，每个提交和评论被分配到一个集群或一组前5个集群，代表每个文本由几个主题组成。我们使用TSNE方法来可视化文本嵌入向量和颜色来表示文本被分配到的簇。</p><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi mw"><img src="../Images/6fc5780555bdd432a3f401a1ea44e5b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*btctcPhFSqOsDOl6qnlbAQ.png"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">TSNE可视化的128嵌入大小，颜色指示集群。使用悬停显示相关文本。</p></figure><p id="3ce3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">直方图示例显示了使用使用嵌入为Conservatives子编辑的50个分类中的每个分类分配的文本数量分布。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/20ced86e299670ac7ddbcc7a2e446ba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:558/0*8ydRpuM1B-ipXoqf"/></div></figure><p id="4807" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">话题指示词</strong></p><p id="89c8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们希望为每个聚类分配描述该聚类的相关词，为此我们尝试了两种方法:<br/> TF-IDF:我们使用每个聚类的文本中TF-IDF得分最高的词来表示主题。<br/>接近质心:使用K-means，我们得到了每个聚类的质心向量。我们计算了质心和词汇表中每个单词之间的距离。最接近的单词代表主题。</p><p id="ee63" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面的代码实现了第二种方法，这种方法的性能优于tf-idf。对于word2vec，我们使用word2vec模型来获得与质心向量最相似的单词。对于使用，我们通过对每个单词应用使用模型来计算词汇表中每个单词的嵌入，然后我们计算嵌入后单词和每个词汇表单词之间的余弦距离，以获得最接近的单词。</p><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="5358" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用上述方法的主题单词示例:</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi ni"><img src="../Images/5e7c1d157923250724fdc4559608ba00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fXrDLaS5ZVVL7yGxfIjxyw.png"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">所选集群的前10个单词</p></figure><h2 id="7d78" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">检测真实事件</h2><p id="dd83" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">我们希望观察主题随时间的出现分布。鉴于社交媒体的性质，当相关事件发生时，用户倾向于增加围绕特定主题的讨论。因此，我们希望看到一个被高度提及的主题与一个具体的现实世界事件之间的相关性。我们希望区分现实世界的事件和日常对话，现实世界的事件激发了对潜在特定主题的讨论。为此，我们绘制了主题(集群)文本量(提交和评论)随时间的变化图，以检测可能指示事件的时间峰值。</p><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="e8e5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">主题群的时间序列示例:<em class="mu"> ['暴徒'，'暴动'，'抗议者'，'抗议'，'抗议者'，'暴动'，'抗议'，'示威者'，'波特兰'，'暴动']: </em></p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi nj"><img src="../Images/f56fe9041a593e9e4acbedcac033d549.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GpyHddSbK7YGT4NTETn_rA.png"/></div></div></figure><p id="4b5e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了深入研究每个峰值，我们打印与特定日期的相关主题相关的文本:</p><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="d572" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，在上述主题的时间序列中，我们可以在7/1/21看到一个主峰，在27/8/20看到一个次峰。</p><p id="cbb8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">7月1日21日，与该主题相关的提交和评论引发了一个真实的事件，即<strong class="kh ir">暴徒在周三破坏了美国国会大厦的安全。</strong></p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi nk"><img src="../Images/182891655dfd836d122ea731cb7ae0ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tB3oz84p45fOITIfcbIJhg.png"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">与21年7月1日主题相关的课文范例。</p></figure><p id="eb4c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于小高峰，27/8/20与该主题相关的提交和评论引发了另一个真实事件— <strong class="kh ir">明尼阿波利斯虚假谣言骚乱，2020年8月26日至27日。</strong>明尼阿波利斯市中心发生骚乱，以回应38岁的非裔美国人埃迪·索罗(Eddie Sole Jr .)自杀的虚假谣言；示威者认为他是被警察射杀的。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi nl"><img src="../Images/5126fcb9bfc79f19239e6f5ae91dba08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*erVnN6j-4jnYgRg21D5NyA.png"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">与27/8/20主题相关的课文范例。</p></figure><h2 id="eea7" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">结论</h2><p id="a288" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">我们在这里提出了一个完整的管道，使用主题分析方法和时间序列分析从reddit数据集中提取真实事件。所提出的方法显示了所提到的主题与特定的真实世界事件之间的高度相关性。上面包含代码和示例的管道提供了查找主题和探索主题、检测事件和深入理解它们的能力。您也可以在其他数据集上使用此管道和可视化。</p><p id="80b7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢阅读！！！</p></div></div>    
</body>
</html>