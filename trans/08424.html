<html>
<head>
<title>Fifteen Jupyter Notebook Extensions to a Docker Image</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个Docker映像的十五个Jupyter笔记本扩展</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/fifteen-jupyter-notebook-extensions-to-a-docker-image-4dce942faadc?source=collection_archive---------17-----------------------#2021-08-03">https://towardsdatascience.com/fifteen-jupyter-notebook-extensions-to-a-docker-image-4dce942faadc?source=collection_archive---------17-----------------------#2021-08-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="5ace" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们的<strong class="js iu">Jupyter</strong><strong class="js iu">Python</strong>和<strong class="js iu"> R </strong>用户的<strong class="js iu"> Docker </strong>图像要求他们在每次启动后设置自己的<code class="fe ko kp kq kr b">Nbextensions</code>偏好。我们能够通过在<strong class="js iu"> Docker </strong>映像中设置常用的<code class="fe ko kp kq kr b">Nbextensions</code>首选项来提高<strong class="js iu"> Jupyter </strong>笔记本用户的工作效率。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ks"><img src="../Images/fc501e7da976757c6bc0d852f8628ea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*0NbSQWLRzFiNZDJMYA2YWA.gif"/></div></div><p class="le lf gj gh gi lg lh bd b be z dk translated">一个显示ggplot图的R代码Jupyter笔记本。资料来源:Giphy</p></figure><h2 id="2c06" class="li lj it bd lk ll lm dn ln lo lp dp lq kb lr ls lt kf lu lv lw kj lx ly lz ma bi translated">1.3.0版本开发人员的目录结构</h2><p id="73dd" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">我们有一个共享磁盘，任何人都可以将模板文件复制到他们的本地目录结构中。</p><pre class="kt ku kv kw gt mg kr mh mi aw mj bi"><span id="ea8e" class="li lj it kr b gy mk ml l mm mn">|-- dockerSeasons<br/>     |-- dev<br/>         |--- Dockerfile<br/>         |--- docker-compose.yml<br/>     |-- test<br/>         |--- Dockerfile<br/>         |--- docker-compose.yml</span></pre><p id="1be2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="mo">开发</em>和<em class="mo">测试</em>的每个成员将版本1.3.0 <code class="fe ko kp kq kr b">dockerSeasons </code>目录复制到他们的<code class="fe ko kp kq kr b">PROJECTS</code>目录中。</p><pre class="kt ku kv kw gt mg kr mh mi aw mj bi"><span id="b11f" class="li lj it kr b gy mk ml l mm mn">- PROJECTS<br/>.<br/>.<br/>.<br/>    |-- &lt;project-name&gt;<br/>        |-- dockerSeasons<br/>             |-- dev<br/>                 |--- Dockerfile<br/>                 |--- docker-compose.yml<br/>                 |--- README.md<br/>                 |--- &lt;ln&gt; requirements.txt             <br/>             |-- test<br/>                 |--- Dockerfile<br/>                 |--- docker-compose.yml<br/>                 |--- README.md<br/>                 |--- &lt;ln&gt; requirements.txt<br/>        |-- src<br/>        |-- test<br/>        |--- requirements.txt<br/>        |--- README.md<br/>.<br/>.</span></pre><p id="088b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">注意:<em class="mo"> Dev </em> 1.0.3可以使用0.0.3 <code class="fe ko kp kq kr b">PROJECTS</code>目录结构不变。版本3.0.1 <code class="fe ko kp kq kr b">dockerSeasons</code>会覆盖<code class="fe ko kp kq kr b">docker</code> 0.0.3目录。</p><p id="0f7e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="mo">测试</em>针对<strong class="js iu"> Python </strong>包中他们需要和不需要的差异修改<code class="fe ko kp kq kr b">&lt;project-name&gt;/requirements.txt</code>。然后<em class="mo">测试</em>象征性地将<code class="fe ko kp kq kr b">&lt;project-name&gt;/requirements.txt</code>(在<code class="fe ko kp kq kr b">&lt;project-name&gt;/dockerSeasons/test</code>目录中)与命令链接起来:</p><pre class="kt ku kv kw gt mg kr mh mi aw mj bi"><span id="43bd" class="li lj it kr b gy mk ml l mm mn"><em class="mo"># MacOS and linux variants<br/>$ ln ../../requirements.txt requirements.txt</em></span></pre><p id="4d36" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在<em class="mo">测试</em>目录中唯一不同的<em class="mo"> </em>是文件<code class="fe ko kp kq kr b">requirements.txt</code>，目录<code class="fe ko kp kq kr b">dockerSeasons/test/</code>中的文件。<em class="mo">测试</em>将此目录结构移动到<em class="mo">阶段</em>服务器和3个冗余<em class="mo">生产</em>服务器。服务器场是内部的。</p><p id="3952" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">1.0.3发布了一个<code class="fe ko kp kq kr b">dockerfile</code>模板，使<em class="mo"> Dev </em>和<em class="mo"> Test </em>能够通过<code class="fe ko kp kq kr b">requirements.txt.</code>定制每个<strong class="js iu"> Docker </strong>图像</p><h2 id="7c2e" class="li lj it bd lk ll lm dn ln lo lp dp lq kb lr ls lt kf lu lv lw kj lx ly lz ma bi translated">Docker图像的1.3.0版本</h2><p id="ed64" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">在之前的<a class="ae mp" href="https://medium.com/swlh/a-docker-solution-for-the-enterprise-7b5d2942b43a" rel="noopener">文章</a>中，我展示了用于用Jupyter notebook创建<strong class="js iu"> Docker </strong>图像的<code class="fe ko kp kq kr b">Dockerfile</code>。我们现在在DES 1 . 3 . 0(<strong class="js iu">D</strong>ocker<strong class="js iu">E</strong>enterprise<strong class="js iu">S</strong>solution)上，为Jupyter笔记本用户提供了不同规格的<code class="fe ko kp kq kr b">Dockerfile</code>。</p><p id="611e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有意义的变化是在<code class="fe ko kp kq kr b">requirements.txt.</code>之后的<code class="fe ko kp kq kr b">jupyterthemes (nbextentsions)</code>阶段，通过试验和反馈，我们发现<em class="mo"> Dev </em>和<em class="mo"> Test </em>改变<code class="fe ko kp kq kr b">requirements.txt</code>的频率比<code class="fe ko kp kq kr b">jupyterthemes</code>低。</p><p id="0452" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将分段的顺序从较不频繁的更改更改为较频繁的更改，这允许我们利用Docker缓冲。结果是比以前更快的<code class="fe ko kp kq kr b">Dockerfile</code>版本。</p><p id="a57f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">根据<code class="fe ko kp kq kr b">requirements.txt</code>中的内容，我们会经历长达10分钟的完整构建。通过将<code class="fe ko kp kq kr b">jupyterthemes</code>放在最后，我们经历了大约30秒的构建(没有<code class="fe ko kp kq kr b">requirements.txt </code>变化)。</p><p id="2b44" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可能会考虑<code class="fe ko kp kq kr b">Dockerfile</code>构建中的变更频率和构建顺序。</p><p id="329a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">部分<code class="fe ko kp kq kr b">Dockerfile</code>的DES 1.3.0版本为:</p><pre class="kt ku kv kw gt mg kr mh mi aw mj bi"><span id="76cb" class="li lj it kr b gy mk ml l mm mn"><strong class="kr iu">FROM </strong>python:3.7<br/><strong class="kr iu">FROM </strong>jupyter<strong class="kr iu">/</strong>minimal-notebook<br/><strong class="kr iu">WORKDIR </strong>$<em class="mo">HOME<br/></em><strong class="kr iu">RUN </strong>python <strong class="kr iu">-</strong>m pip install <strong class="kr iu">--</strong>upgrade pip<br/><strong class="kr iu">COPY </strong>requirements.txt .<strong class="kr iu">/</strong>requirements.txt<br/><strong class="kr iu">RUN </strong>python <strong class="kr iu">-</strong>m pip  install <strong class="kr iu">-</strong>r requirements.tx<br/><strong class="kr iu">RUN </strong>python <strong class="kr iu">-</strong>m pip install <strong class="kr iu">--</strong>upgrade <strong class="kr iu">--</strong>no-deps <strong class="kr iu">--</strong>force-reinstall notebook<br/>#<br/><strong class="kr iu">RUN </strong>python <strong class="kr iu">-</strong>m pip install jupyterthemes<br/><strong class="kr iu">RUN </strong>python <strong class="kr iu">-</strong>m pip install <strong class="kr iu">--</strong>upgrade jupyterthemes<br/><strong class="kr iu">RUN </strong>python <strong class="kr iu">-</strong>m pip install jupyter_contrib_nbextensions</span></pre><p id="985a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">注意:不要<strong class="js iu">而不是</strong>从你的终端外壳执行以下命令。如果你这样做了，你在你的本地副本<strong class="js iu"> jupyter </strong>中安装<code class="fe ko kp kq kr b">jupyterthemes</code>。<strong class="js iu"> <em class="mo">更大的</em> </strong>问题是你在<strong class="js iu"> jupyter </strong>的本地副本中重置了你的本地<code class="fe ko kp kq kr b">nbextentsions</code>设置。</p><pre class="kt ku kv kw gt mg kr mh mi aw mj bi"><span id="5d89" class="li lj it kr b gy mk ml l mm mn">pip install jupyterthemes<br/>pip install <strong class="kr iu">--</strong>upgrade jupyterthemes<br/>pip install jupyter_contrib_nbextensions</span></pre><h2 id="b72c" class="li lj it bd lk ll lm dn ln lo lp dp lq kb lr ls lt kf lu lv lw kj lx ly lz ma bi translated">有哪些<code class="fe ko kp kq kr b">Nbextensions</code>可用？</h2><p id="60c0" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">我们必须分两步构建<code class="fe ko kp kq kr b">Dockerfile</code>，因为我们需要找到可用的<code class="fe ko kp kq kr b">jupyterthemes</code>以及它们的名称。首先，我们执行了上面列出的部分<code class="fe ko kp kq kr b">Dockerfile</code>。</p><p id="168c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们使用命令<code class="fe ko kp kq kr b">updev</code>启动了<strong class="js iu"> juptyer </strong>(将在本文稍后描述)。然后，我们在<strong class="js iu"> Jupyter </strong>笔记本上运行了以下内容。</p><pre class="kt ku kv kw gt mg kr mh mi aw mj bi"><span id="28a1" class="li lj it kr b gy mk ml l mm mn">!jupyter nbextension list</span></pre><p id="851e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">输出-&gt; &gt;</p><pre class="kt ku kv kw gt mg kr mh mi aw mj bi"><span id="4da3" class="li lj it kr b gy mk ml l mm mn">Known nbextensions:<br/>  config dir: /home/jovyan/.jupyter/nbconfig<br/>    notebook section<br/>      nbextensions_configurator/config_menu/main  enabled <br/>      - Validating: problems found:<br/>        - require?  X nbextensions_configurator/config_menu/main<br/>      contrib_nbextensions_help_item/main  enabled <br/>      - Validating: OK<br/>      jupyter-js-widgets/extension  enabled <br/>      - Validating: problems found:<br/>        - require?  X jupyter-js-widgets/extension<br/>      jupyter-notebook-gist/notebook-extension  enabled <br/>      - Validating: problems found:<br/>        - require?  X jupyter-notebook-gist/notebook-extension<br/>      autosavetime/main  enabled <br/>      - Validating: OK<br/>      codefolding/main  enabled <br/>      - Validating: OK<br/>      code_font_size/code_font_size  enabled <br/>      - Validating: OK<br/>      code_prettify/code_prettify  enabled <br/>      - Validating: OK<br/>      collapsible_headings/main  enabled <br/>      - Validating: OK<br/>      comment-uncomment/main  enabled <br/>      - Validating: OK<br/>      equation-numbering/main  enabled <br/>      - Validating: OK<br/>      execute_time/ExecuteTime  enabled <br/>      - Validating: OK<br/>      gist_it/main  enabled <br/>      - Validating: OK<br/>      hide_input/main  enabled <br/>      - Validating: OK<br/>      spellchecker/main  enabled <br/>      - Validating: OK<br/>      toc2/main  enabled <br/>      - Validating: OK<br/>      toggle_all_line_numbers/main  enabled <br/>      - Validating: OK<br/>    tree section<br/>      nbextensions_configurator/tree_tab/main  enabled <br/>      - Validating: problems found:<br/>        - require?  X nbextensions_configurator/tree_tab/main<br/>  config dir: /opt/conda/etc/jupyter/nbconfig<br/>    notebook section<br/>      plotlywidget/extension  enabled <br/>      - Validating: OK</span></pre><p id="dfd1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在我们有了要添加到1.3.0版本中的<code class="fe ko kp kq kr b">Nbextensions</code>名称<code class="fe ko kp kq kr b">dockerfile</code>！</p><h2 id="94f5" class="li lj it bd lk ll lm dn ln lo lp dp lq kb lr ls lt kf lu lv lw kj lx ly lz ma bi translated">jupyter扩展的docker文件</h2><p id="ff33" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated"><em class="mo">开发</em>的<code class="fe ko kp kq kr b">dockerfile </code>启用了注释# <code class="fe ko kp kq kr b">enable the Nbextensions.</code>后显示的以下<code class="fe ko kp kq kr b">Nbextensions</code></p><pre class="kt ku kv kw gt mg kr mh mi aw mj bi"><span id="1f0e" class="li lj it kr b gy mk ml l mm mn"><strong class="kr iu">FROM </strong>python:3.7<br/><strong class="kr iu">FROM </strong>jupyter<strong class="kr iu">/</strong>minimal-notebook<br/><strong class="kr iu">WORKDIR </strong>$<em class="mo">HOME<br/></em><strong class="kr iu">RUN </strong>python <strong class="kr iu">-</strong>m pip install <strong class="kr iu">--</strong>upgrade pip<br/><strong class="kr iu">COPY </strong>requirements.txt .<strong class="kr iu">/</strong>requirements.txt<br/><strong class="kr iu">RUN </strong>python <strong class="kr iu">-</strong>m pip  install <strong class="kr iu">-</strong>r requirements.tx<br/><strong class="kr iu">RUN </strong>python <strong class="kr iu">-</strong>m pip install <strong class="kr iu">--</strong>upgrade <strong class="kr iu">--</strong>no-deps <strong class="kr iu">--</strong>force-reinstall notebook<br/>#<br/><strong class="kr iu">RUN </strong>python <strong class="kr iu">-</strong>m pip install jupyterthemes<br/><strong class="kr iu">RUN </strong>python <strong class="kr iu">-</strong>m pip install <strong class="kr iu">--</strong>upgrade jupyterthemes<br/><strong class="kr iu">RUN </strong>python <strong class="kr iu">-</strong>m pip install jupyter_contrib_nbextensions<br/><strong class="kr iu">RUN </strong>jupyter contrib nbextension install <strong class="kr iu">--</strong>user<br/># enable the <!-- -->Nbextensions<br/><strong class="kr iu">RUN </strong>jupyter nbextension enable contrib_nbextensions_help_item<strong class="kr iu">/</strong>main<br/><strong class="kr iu">RUN </strong>jupyter nbextension enable autosavetime<strong class="kr iu">/</strong>main<br/><strong class="kr iu">RUN </strong>jupyter nbextension enable codefolding<strong class="kr iu">/</strong>main<br/><strong class="kr iu">RUN </strong>jupyter nbextension enable code_font_size<strong class="kr iu">/</strong>code_font_size<br/><strong class="kr iu">RUN </strong>jupyter nbextension enable code_prettify<strong class="kr iu">/</strong>code_prettify<br/><strong class="kr iu">RUN </strong>jupyter nbextension enable collapsible_headings<strong class="kr iu">/</strong>main<br/><strong class="kr iu">RUN </strong>jupyter nbextension enable comment-uncomment<strong class="kr iu">/</strong>main<br/><strong class="kr iu">RUN </strong>jupyter nbextension enable equation-numbering<strong class="kr iu">/</strong>main<br/><strong class="kr iu">RUN </strong>jupyter nbextension enable execute_time<strong class="kr iu">/</strong>ExecuteTime <br/><strong class="kr iu">RUN </strong>jupyter nbextension enable gist_it<strong class="kr iu">/</strong>main <br/><strong class="kr iu">RUN </strong>jupyter nbextension enable hide_input<strong class="kr iu">/</strong>main <br/><strong class="kr iu">RUN </strong>jupyter nbextension enable spellchecker<strong class="kr iu">/</strong>main<br/><strong class="kr iu">RUN </strong>jupyter nbextension enable toc2<strong class="kr iu">/</strong>main<br/><strong class="kr iu">RUN </strong>jupyter nbextension enable toggle_all_line_numbers<strong class="kr iu">/</strong>main</span></pre><h2 id="9892" class="li lj it bd lk ll lm dn ln lo lp dp lq kb lr ls lt kf lu lv lw kj lx ly lz ma bi translated">Docker-Compose命令和docker-compose.yaml文件</h2><p id="702f" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated"><strong class="js iu"> Docker-Compose </strong>用于为同一个应用程序同时管理几个容器。这个工具提供了与Docker 相同的功能，但是允许你拥有更复杂的应用程序。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/d2a0729ff320e358f25093dc6ff3b168.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*onkQl6UNLaa3h0Os4TKSfA.jpeg"/></div><p class="le lf gj gh gi lg lh bd b be z dk translated">插图由<a class="ae mp" href="http://ralvearcottman@gmail.com" rel="noopener ugc nofollow" target="_blank">雷切尔·科特曼</a></p></figure><p id="4664" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> Docker-Compose </strong>可以将多个<strong class="js iu"> Docker </strong>容器合并成一个运行时映像。目前，我们只对一个<strong class="js iu"> Docker </strong>图像(<code class="fe ko kp kq kr b">dockerfile.yaml</code>)使用<strong class="js iu"> Docker-Compose </strong>。</p><pre class="kt ku kv kw gt mg kr mh mi aw mj bi"><span id="cae6" class="li lj it kr b gy mk ml l mm mn"><strong class="kr iu">version</strong>: '3'<br/><strong class="kr iu">services</strong>:<br/>  <strong class="kr iu">dev</strong>:<br/>    <strong class="kr iu">build</strong>: '.'<br/>    <strong class="kr iu">ports</strong>:<br/>        - "127.0.0.1:8889:8888"<br/><strong class="kr iu">    volumes:<br/>      - ../../../.:/docker</strong><br/>    <strong class="kr iu">working_dir</strong>: /docker</span></pre><p id="d8e3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">注意:当您使用命令<code class="fe ko kp kq kr b">updev</code>(将在本文后面描述)时，<em class="mo"> docker-compose </em>命令<code class="fe ko kp kq kr b">volume:</code> <code class="fe ko kp kq kr b"><strong class="js iu">- ./../../.</strong></code>会导致<code class="fe ko kp kq kr b">&lt;path-to-projects&gt;</code>被映射到<code class="fe ko kp kq kr b"><strong class="js iu">/docker</strong></code>，即<strong class="js iu"> docker </strong>映像的内部目录。随后推出的<strong class="js iu"> jupyter </strong>使用<code class="fe ko kp kq kr b">&lt;path-to-projects&gt; </code>作为其顶级目录。请使用上面显示的示例目录结构，或者用您自己的本地目录结构代替<code class="fe ko kp kq kr b"><strong class="js iu">- ./../../. </strong></code>。</p><h2 id="98fe" class="li lj it bd lk ll lm dn ln lo lp dp lq kb lr ls lt kf lu lv lw kj lx ly lz ma bi translated">自动化常用的docker-compose命令</h2><p id="c00b" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated"><strong class="js iu">Docker</strong>命令通过将以下命令添加到<code class="fe ko kp kq kr b">˜/.bashrc_profile </code>或<code class="fe ko kp kq kr b">˜/bashrc.txt.</code>来设置</p><pre class="kt ku kv kw gt mg kr mh mi aw mj bi"><span id="104e" class="li lj it kr b gy mk ml l mm mn">devdir='&lt;path-to-projects&gt;/photon/photonai/dockerSeasons/dev/'<br/>testdir='&lt;path-to-projects&gt;/photon/photonai/dockerSeasons/test/'</span><span id="5395" class="li lj it kr b gy mr ml l mm mn">echo $devdir<br/>echo $testdir</span><span id="573a" class="li lj it kr b gy mr ml l mm mn">export testdir<br/>export devdir</span><span id="f1a6" class="li lj it kr b gy mr ml l mm mn">#<br/>alias updev="(cd $devdir; docker-compose up) &amp;"<br/>alias downdev="(cd $devdir; docker-compose down) &amp;"<br/>alias builddev="(cd $devdir; docker-compose build) &amp;"</span><span id="a5b5" class="li lj it kr b gy mr ml l mm mn">#<br/>alias uptest="(cd $testdir; docker-compose up) &amp; "<br/>alias downtest="(cd $testdir; docker-compose down) &amp;"<br/>alias buildtest="cd $testdir; docker-compose build) &amp;"</span></pre><p id="00e2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果找不到文件<code class="fe ko kp kq kr b">˜/bashrc.txt </code>，用touch <code class="fe ko kp kq kr b">˜/bashrc.txt.</code> ( <strong class="js iu"> MacOs </strong>或各种<strong class="js iu"> Linux </strong>或<strong class="js iu"> Unix </strong>操作系统之一创建它。)</p><p id="cb14" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">注意:当你完成编辑时，记得按<code class="fe ko kp kq kr b">source</code> <code class="fe ko kp kq kr b">˜/.bashrc_profile and/</code>或<code class="fe ko kp kq kr b">˜/bashrc.txt</code>。</p><p id="ecb6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ko kp kq kr b">updev</code>命令在我的终端控制台上产生了以下消息流。(你的会有不同的时间戳和其他细微差别。)</p><pre class="kt ku kv kw gt mg kr mh mi aw mj bi"><span id="4db8" class="li lj it kr b gy mk ml l mm mn">dev_1  | [I 15:53:33.389 NotebookApp] [jupyter_nbextensions_configurator] enabled 0.4.1</span><span id="3716" class="li lj it kr b gy mr ml l mm mn">dev_1  | [I 15:53:33.817 NotebookApp] JupyterLab extension loaded from /opt/conda/lib/python3.7/site-packages/jupyterlab</span><span id="3a16" class="li lj it kr b gy mr ml l mm mn">dev_1  | [I 15:53:33.818 NotebookApp] JupyterLab application directory is /opt/conda/share/jupyter/lab</span><span id="e60d" class="li lj it kr b gy mr ml l mm mn"><strong class="kr iu">dev_1  | [I 15:53:34.196 NotebookApp] Serving notebooks from local directory: /docke</strong>r</span><span id="1de0" class="li lj it kr b gy mr ml l mm mn">dev_1  | [I 15:53:34.196 NotebookApp] The Jupyter Notebook is running at:</span><span id="457f" class="li lj it kr b gy mr ml l mm mn">dev_1  | [I 15:53:34.196 NotebookApp] <a class="ae mp" href="http://dd974d01052d:8888/?token=78824facb945e1bf386a6ead41f7b147d5ac4240dc673421" rel="noopener ugc nofollow" target="_blank">http://dd974d01052d:8888/?token=78824facb945e1bf386a6ead41f7b147d5ac4240dc673421</a></span><span id="f51a" class="li lj it kr b gy mr ml l mm mn">dev_1  | [I 15:53:34.196 NotebookApp]  or <a class="ae mp" href="http://127.0.0.1:8888/?token=78824facb945e1bf386a6ead41f7b147d5ac4240dc673421" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8888/?token=78824facb945e1bf386a6ead41f7b147d5ac4240dc673421</a></span></pre><p id="d0e2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">注意:<code class="fe ko kp kq kr b">updev</code>命令输出:</p><pre class="kt ku kv kw gt mg kr mh mi aw mj bi"><span id="8c60" class="li lj it kr b gy mk ml l mm mn">.<br/>.<br/>h<a class="ae mp" href="http://127.0.0.1:8888/?token=12377aa1c91b45e66e45eb5d5bdf2115cad2dae5b61be5c0" rel="noopener ugc nofollow" target="_blank">ttp://127.0.0.1:<strong class="kr iu">8888</strong>/?token=12377aa1c91b45e66e45eb5d5bdf2115cad2dae5b61be5c0</a></span></pre><p id="2e65" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因为我们在<code class="fe ko kp kq kr b">dockerfile.yaml</code>中将端口<code class="fe ko kp kq kr b">8888</code>映射到端口<code class="fe ko kp kq kr b">8889</code> ( <em class="mo"> Dev </em>)和端口<code class="fe ko kp kq kr b">8890</code> ( <em class="mo"> Test </em>)。DET 1.3.0版本的用户必须将以下内容剪切并粘贴到他们的web浏览器中。</p><pre class="kt ku kv kw gt mg kr mh mi aw mj bi"><span id="83f8" class="li lj it kr b gy mk ml l mm mn">h<a class="ae mp" href="http://127.0.0.1:8888/?token=12377aa1c91b45e66e45eb5d5bdf2115cad2dae5b61be5c0" rel="noopener ugc nofollow" target="_blank">ttp://127.0.0.1:<strong class="kr iu">8889</strong>/?token=12377aa1c91b45e66e45eb5d5bdf2115cad2dae5b61be5c0</a></span></pre><h2 id="99ba" class="li lj it bd lk ll lm dn ln lo lp dp lq kb lr ls lt kf lu lv lw kj lx ly lz ma bi translated">摘要</h2><p id="322a" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">对于“将Jupyter笔记本扩展添加到Docker映像”来说，这看起来是不是太详细了也许是吧。我重述一下:</p><ol class=""><li id="a448" class="ms mt it js b jt ju jx jy kb mu kf mv kj mw kn mx my mz na bi translated">在<strong class="js iu"> Jupyter </strong> user <code class="fe ko kp kq kr b">Dockerfile.</code>中添加你想要的<code class="fe ko kp kq kr b">Nbextensions</code><code class="fe ko kp kq kr b">Nbextensions</code>名称以及如何启用它们已在上面给出。</li><li id="da04" class="ms mt it js b jt nb jx nc kb nd kf ne kj nf kn mx my mz na bi translated">如有必要，编辑<code class="fe ko kp kq kr b">dockerfile.yaml volume:</code> <code class="fe ko kp kq kr b"><strong class="js iu">- ./../../.</strong></code>。随后推出的<strong class="js iu"> jupyter </strong>使用<code class="fe ko kp kq kr b">&lt;<strong class="js iu">./../../.</strong></code>作为其顶级目录。</li><li id="a2fe" class="ms mt it js b jt nb jx nc kb nd kf ne kj nf kn mx my mz na bi translated">可选地，通过将常用的docker-compose命令添加到您的<code class="fe ko kp kq kr b">˜/.bashrc_profile </code>文件中来“自动化这些命令”。</li><li id="f0aa" class="ms mt it js b jt nb jx nc kb nd kf ne kj nf kn mx my mz na bi translated">最后，启用<code class="fe ko kp kq kr b">Nbextensions</code>:</li></ol><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ng"><img src="../Images/9e8b4a357b3c2ee80e28d5313c5fad59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*uRfJdYjSBqA9qhIz_CFzQA.gif"/></div></div><p class="le lf gj gh gi lg lh bd b be z dk translated">所有的<code class="fe ko kp kq kr b">Nbextensions</code>都被禁用。您必须手动启用<strong class="bd nh">码头</strong>集装箱下水。不酷！瑞秋·科特曼的动画</p></figure><p id="3295" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">DET 1.3.0版本的发布经历了几天的曲折和错误。我希望你花更少的时间来实现你的解决方案，这篇文章对你的努力有所帮助。</p><p id="f8f4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你有建议或改进，请评论。</p><p id="e9b9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我使用的Docker实现的更多细节在:</p><div class="ni nj gp gr nk nl"><a href="https://medium.com/swlh/a-docker-solution-for-the-enterprise-7b5d2942b43a" rel="noopener follow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">面向企业的Docker解决方案</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">这是一个关于我们公司推出Docker的故事。我展示我们的Docker和Docker-Compose解决方案。被警告…</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">medium.com</p></div></div><div class="nu l"><div class="nv l nw nx ny nu nz lc nl"/></div></div></a></div><div class="ni nj gp gr nk nl"><a href="https://medium.com/@dr.bruce.cottman/a-docker-solution-for-the-test-groups-use-cases-8e8ed6c28e11" rel="noopener follow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">我们将Docker企业解决方案的速度提高了一倍</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">我们收到了大量关于Docker解决方案0.0.2版本的反馈。反馈有一个共同的主题:只有R&amp;D…</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">medium.com</p></div></div><div class="nu l"><div class="oa l nw nx ny nu nz lc nl"/></div></div></a></div><p id="33cf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">注意:你可以从可克隆的<strong class="js iu"> GitHub </strong> <a class="ae mp" href="https://github.com/bcottman/dockerSeasons" rel="noopener ugc nofollow" target="_blank"> repo </a>中改编<strong class="js iu"> Docker </strong>代码到你的项目中。</p></div></div>    
</body>
</html>