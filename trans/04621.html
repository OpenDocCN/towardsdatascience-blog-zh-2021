<html>
<head>
<title>The Data Science Trilogy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学三部曲</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-data-science-trilogy-numpy-pandas-and-matplotlib-basics-42192b89e26?source=collection_archive---------3-----------------------#2021-04-21">https://towardsdatascience.com/the-data-science-trilogy-numpy-pandas-and-matplotlib-basics-42192b89e26?source=collection_archive---------3-----------------------#2021-04-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1bb8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">NumPy，Pandas和Matplotlib基础</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/da7d3fa981979a8d73137776899c1ac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*435Q0XPyTyc4vT7z"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">img src:<a class="ae ky" href="https://www.pexels.com/photo/business-charts-commerce-computer-265087/" rel="noopener ugc nofollow" target="_blank">https://www . pexels . com/photo/business-charts-commerce-computer-265087/</a></p></figure><p id="3b0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated"><span class="l lw lx ly bm lz ma mb mc md di">那么</span>你是Python的新手。或者您可能已经熟悉了这些库，但是想快速复习一下。无论情况如何，Python毫无疑问已经成为当今最流行的编程语言之一，正如下面的<a class="ae ky" href="https://insights.stackoverflow.com/trends?tags=python%2Cjavascript%2Cjava%2Cc%23%2Cphp%2Cc%2B%2B&amp;utm_source=so-owned&amp;utm_medium=blog&amp;utm_campaign=gen-blog&amp;utm_content=blog-link&amp;utm_term=incredible-growth-python" rel="noopener ugc nofollow" target="_blank">堆栈溢出趋势</a>中的图表所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi me"><img src="../Images/91f5e566b5c1d385f289f3484b0e5903.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uK5NT6LGbB7rhGO-OcQV7w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Img src:堆栈溢出趋势</p></figure><p id="3814" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在数据科学和机器学习中使用的最流行的Python包中，我们找到了<strong class="lb iu"> Numpy、Pandas </strong>和<strong class="lb iu"> Matplotlib。</strong>在本文中，我将简要提供一个从零到英雄(双关语，wink wink) )数据科学Python入门所需的所有基础知识介绍。我们开始吧！</p><h2 id="fce1" class="mf mg it bd mh mi mj dn mk ml mm dp mn li mo mp mq lm mr ms mt lq mu mv mw mx bi translated">设置</h2><p id="dc31" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">首先，您需要安装软件包。如果你对Python完全陌生，我推荐你阅读本教程，或者任何你认为合适的教程。您可以使用以下<code class="fe nd ne nf ng b">pip</code>命令:</p><pre class="kj kk kl km gt nh ng ni nj aw nk bi"><span id="cc9d" class="mf mg it ng b gy nl nm l nn no">pip install numpy -U <br/>pip install pandas -U <br/>pip install matplotlib -U </span></pre><p id="ca66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成后，我们现在将有以下导入:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="b3b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，我们使用了每个包的通用别名。</p><h2 id="0190" class="mf mg it bd mh mi mj dn mk ml mm dp mn li mo mp mq lm mr ms mt lq mu mv mw mx bi translated">Numpy</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/0adf75e1268b113297155f0e02108822.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_Eh8BcU2YQPHb-sG.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">img src:<a class="ae ky" href="https://github.com/numpy/numpy/blob/main/branding/logo/primary/numpylogo.svg" rel="noopener ugc nofollow" target="_blank">https://github . com/numpy/numpy/blob/main/branding/logo/primary/numpylogo . SVG</a></p></figure><p id="88dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Numpy是机器学习和数据科学中使用的主要库之一:它用于各种数学计算，以优化的C代码为基础编写。</p><p id="f094" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> Numpy数组</strong></p><p id="ce10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数组只是对象的集合。一个1级数组是一个列表。2-秩数组是一个矩阵，或者一个列表的列表。一个三级数组是一系列列表的列表，等等。</p><p id="13b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以用一个常规的Python列表作为参数，用<code class="fe nd ne nf ng b">np.array()</code>构造函数创建一个numpy数组:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="127b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">np数组最常见的属性之一是它的<code class="fe nd ne nf ng b">shape</code>，它表示数组的秩:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="afed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们得到一个具有相应秩的元组，我们称之为数组的维数。在这种情况下，上面的阵列是一维的，也称为<strong class="lb iu">平面阵列。</strong>我们还可以用一个列表的列表来获得一个更清晰的类似矩阵的形状:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="847e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，这看起来更像是一个<strong class="lb iu">行向量。</strong>类似地，我们可以如下初始化一个<strong class="lb iu">列向量</strong>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="cb7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以用同样的方法初始化全矩阵:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="4c36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，这只是一个元组:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="6241" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">重塑数组</strong></p><p id="2bea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<code class="fe nd ne nf ng b">np.reshape</code>函数来改变数组的维数，只要它包含相同数量的元素并且维数有意义。例如:将<code class="fe nd ne nf ng b">M1</code>矩阵整形为行向量:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="a198" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">平面阵列到矢量</strong></p><p id="cd86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以将平面阵列转换为2D阵列(向量)，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="4b21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> Numpy数组不是列表</strong></p><p id="189c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，列表和NumPy数组之间有一个重要的区别！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="0e5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以直接看到的一点是印刷风格。我们也有非常不同的行为:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="54aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">点积</strong></p><p id="aa53" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以用<code class="fe nd ne nf ng b">np.dot(a1,a2)</code>函数“乘”匹配的相邻维度的数组，其中<code class="fe nd ne nf ng b">a1.shape[1]==a2.shape[0]</code>。《出埃及记》两个数组(通常用于机器学习)或n维向量的数学点积，由下式给出</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/fa2cdaf23a09a00b07403bb2873f6d0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*gPaVguQ9SPhvp6hF3GbnSg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者使用LaTeX)</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="85d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于循环，它看起来像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="a01b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更好的方法是:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="42f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，对于大量数据来说，速度上的差异是显而易见的，如下面的示例所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="15d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是因为它利用了<strong class="lb iu">并行化</strong>。</p><p id="c45f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">生成随机数组</strong></p><p id="0253" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一种方法是使用<code class="fe nd ne nf ng b">np.random.randn()</code>功能:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><h2 id="f7a4" class="mf mg it bd mh mi mj dn mk ml mm dp mn li mo mp mq lm mr ms mt lq mu mv mw mx bi translated">熊猫</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/53f30c5adabaab7bf05fec079f5afae9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9HZ3C2FE9cBbzHFv.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">img src:<a class="ae ky" href="https://pandas.pydata.org/about/citing.html" rel="noopener ugc nofollow" target="_blank">https://pandas.pydata.org/about/citing.html</a></p></figure><p id="a1e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas是一个用于数据操作的库。它与Numpy高度兼容，尽管它有一些微妙之处。</p><p id="71d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">初始化表格形成Numpy数组</strong></p><p id="9b0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以将rank-2 Numpy数组传递给<code class="fe nd ne nf ng b">pd.DataFrame()</code>构造函数来初始化pandas数据框对象。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/8c7f4d639e57f49e5c99f2e54a1d90e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*47pSz6dNYsE0Dj8M9d5B8Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><p id="ba12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">重命名列</strong></p><p id="1633" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<code class="fe nd ne nf ng b">.columns</code>属性访问表的列名:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="bde9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过指定具有相应名称的列表来一次性重命名所有列:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/a527b903680f8913b1da92b3aa9410d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*h_gUbryMUTUV_FuOKmQ4GA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><p id="bf4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们的数据框有了输入列名。</p><p id="5832" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">列选择</strong></p><p id="d46c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<code class="fe nd ne nf ng b">df['colname']</code>语法从pandas数据帧中选择列。结果是一个Pandas <code class="fe nd ne nf ng b">Series</code>对象，它类似于平面数组，但是集成了许多属性和方法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="7a6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有许多内置方法(参见<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html" rel="noopener ugc nofollow" target="_blank">文档</a>，但是作为一个例子，我们可以通过使用<code class="fe nd ne nf ng b">describe()</code>方法获得<strong class="lb iu">汇总统计数据</strong>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="efd0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">设置多个列的子集</strong></p><p id="5764" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用已定义列的列表对多个列进行子集化会输出一个pandas dataframe对象。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/4d4f1eb1183872a48bf93e492c90152b.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/format:webp/1*mfz_oNedP_VoYmM3k0OAnw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><p id="416d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，这些列不必按照任何特定的顺序排列；这有助于按照我们的意愿重新排列表格:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/bce476fc0065dcefa9557b92a08fb10a.png" data-original-src="https://miro.medium.com/v2/resize:fit:506/format:webp/1*zEn3sorxbiVorOjkIGJBqA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><p id="62a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">分配列</strong></p><p id="1b5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们想要获得满足特定条件的所有行。我们如何做到这一点？以下面的虚拟数据为例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/5d17ebc50c9e3220771fcf07dff6ab9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:654/format:webp/1*y9mjlZLdr-8jdAznV5QteA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><p id="5487" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们如何将一个额外的列集成到这个数据中？我们可以简单地用<code class="fe nd ne nf ng b">df['new_col'] = new_col</code>语法分配一个兼容大小(行数)的数组、列表或序列:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/c78b356066eb76510e039418c31cc1a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/format:webp/1*fKE5xqFw4D7j4NIzy-L7Bg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><p id="5ae1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在假设我们想获取满足某个条件的所有记录。这种选择可以使用以下语法来完成:</p><pre class="kj kk kl km gt nh ng ni nj aw nk bi"><span id="4911" class="mf mg it ng b gy nl nm l nn no">df[condition]</span></pre><p id="4f7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其中<code class="fe nd ne nf ng b">condition</code>是布尔值的<strong class="lb iu"> NumPy数组</strong>。感谢<strong class="lb iu"> NumPy广播</strong>，将NumPy数组/pandas系列与<strong class="lb iu">的一个</strong>值进行比较，将产生一个相同类型的数组，其中每个值都与查询进行比较。<br/>例如，将<code class="fe nd ne nf ng b">Request</code>列与值<code class="fe nd ne nf ng b">no</code>比较得出:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="2949" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它指示条件为真的所有地方。然后，我们可以使用上面提到的语法，使用这个数组只选择属于<code class="fe nd ne nf ng b">True</code>的行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/f1a9adaee51989449f89ab3e97f3219b.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*o4LiNNQv2d95RedN0nt-bA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><p id="9a66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用逻辑产生更复杂的查询。例如:取所有消耗指数为负的行<strong class="lb iu">或</strong>的影响分值大于1，<strong class="lb iu">和</strong>的服务类型为<code class="fe nd ne nf ng b">service1</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/06c4ecd33b0ac17f9f4e2f9ddd900a38.png" data-original-src="https://miro.medium.com/v2/resize:fit:886/format:webp/1*CCK731VOsp7Knb2AcHJd0w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><p id="32a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，我们可以对提取信息所需的所有三个条件进行编码</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/e5ffd73a882e60e8a1f82f6a0e3c8c9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:886/format:webp/1*AWtIDL1dSweP2nbxBtC1yw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><p id="d008" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">熊猫申请</strong></p><p id="b4fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">按照前面的示例，假设我们希望将某个函数应用于特定列的每个值，并获得一个序列，其中每个元素都是对相应元素应用的函数的输出。对于这些情况，我们可以使用熊猫<code class="fe nd ne nf ng b">Series</code>对象的<code class="fe nd ne nf ng b">apply()</code>方法。在数据帧中，它将具有以下语法:</p><pre class="kj kk kl km gt nh ng ni nj aw nk bi"><span id="a263" class="mf mg it ng b gy nl nm l nn no">df['column'].apply(func)</span></pre><p id="ab7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其中<code class="fe nd ne nf ng b">func </code>可以是返回一个<strong class="lb iu">单输出</strong>的任何函数。</p><p id="24ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">示例:</strong>将每个服务映射到某个bin，并将结果列分配给dataframe。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/8f7c10f127a7f7f9ab00b4d182affc62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*eDg4bEn_QpF_hj9H_oC-0g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><p id="0b46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">熊猫位置</strong></p><p id="21ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在假设您想要<strong class="lb iu">改变</strong>某一列中的某一行，当这些行满足指定的条件时。其语法是</p><pre class="kj kk kl km gt nh ng ni nj aw nk bi"><span id="cd17" class="mf mg it ng b gy nl nm l nn no">df.loc[condition, 'column'] = new_val</span></pre><p id="996f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">示例:</strong>将<code class="fe nd ne nf ng b">Request</code>的值设置为“否”则<code class="fe nd ne nf ng b">Factor</code>的类型为1:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/0639889d22cc05679449fdff1dc123dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*ROSSnG__tzeAc7LzHpCGTg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><p id="a9c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">对数据帧进行排序</strong></p><p id="59c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要按一定的顺序对数据帧进行排序，我们可以使用<code class="fe nd ne nf ng b">sort_values()</code>。使用<code class="fe nd ne nf ng b">inplace=True</code>参数改变原始数据帧。通过在列表中指定多个列，可以对它们进行排序。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/6a35ca5bde6477ffbe00e660eef5aa82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*r8PrRAxJVPS9qdIp9f4Zqg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><p id="bc5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到这些值已经相应地更新了。</p><p id="6fb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">重置索引</strong></p><p id="84d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对值进行排序时，索引会发生变化。我们可以重置它，以便再次获得排序的索引:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/7564be5755f7f78fe50119ac16e31653.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*HLRYAaErMpSG16Wszsyn5A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><p id="68f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">删除列</strong></p><p id="92fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重置索引时，旧索引作为一列保留。我们可以用<code class="fe nd ne nf ng b">drop()</code>方法删除任何列。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/80cb203aecf2a4bcdd362933c58da212.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*FGxEo4Pe1A0KOkRs4NcCzg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><p id="ca07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">聚合</strong></p><p id="d063" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Matplotlib的另一个有用之处是<strong class="lb iu">聚合</strong>。假设我们想要合计每个<code class="fe nd ne nf ng b">EDX</code>组的<code class="fe nd ne nf ng b">Impact</code>计数。语法如下:</p><pre class="kj kk kl km gt nh ng ni nj aw nk bi"><span id="4964" class="mf mg it ng b gy nl nm l nn no">df.groupby("column").agg_function().reset_index()</span></pre><p id="ed87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nd ne nf ng b">agg_function()</code>是一个熊猫函数，如<code class="fe nd ne nf ng b">sum()</code>或<code class="fe nd ne nf ng b">mean()</code>(见本文<a class="ae ky" href="https://cmdlinetips.com/2019/10/pandas-groupby-13-functions-to-aggregate/" rel="noopener ugc nofollow" target="_blank"/>)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/7a389a21212b95595a39058fe9a92432.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*3RDfFXd56EPSwjYQ9yoroQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><h2 id="c659" class="mf mg it bd mh mi mj dn mk ml mm dp mn li mo mp mq lm mr ms mt lq mu mv mw mx bi translated">Matplotlib</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/64f2abd8baf5225003de8130b382f2a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Q2P7piuSxFQIq60Z.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">img src:<a class="ae ky" href="https://matplotlib.org/stable/gallery/misc/logos2.html" rel="noopener ugc nofollow" target="_blank">https://matplotlib.org/stable/gallery/misc/logos2.html</a></p></figure><p id="ba77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">顾名思义，这是Python的主要绘图库。许多其他库如<code class="fe nd ne nf ng b">seaborn</code>依赖于此。</p><ul class=""><li id="95bc" class="oj ok it lb b lc ld lf lg li ol lm om lq on lu oo op oq or bi translated">文件:<a class="ae ky" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank">https://matplotlib.org/</a></li></ul><p id="8128" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">散点图</strong></p><p id="ee1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">散点图是通过指定两个长度相同的数组或列表而得到的2D图。例如，我们可以比较消费指数及其影响。</p><p id="2e99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是一些常见的Pyplot函数:</p><ul class=""><li id="e4f8" class="oj ok it lb b lc ld lf lg li ol lm om lq on lu oo op oq or bi translated"><code class="fe nd ne nf ng b">plt.figure()</code>:指定参考画布。通过<code class="fe nd ne nf ng b">figsize=(a,b)</code>改变绘图画布尺寸。</li><li id="a583" class="oj ok it lb b lc os lf ot li ou lm ov lq ow lu oo op oq or bi translated"><code class="fe nd ne nf ng b">plt.scatter(x,y,color="b", marker="")</code>:生成散点图。<code class="fe nd ne nf ng b">marker</code>指定绘制点的形状。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/8aa6c8f99a98f1d81df4d95985a368cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*APZgg32T_WbAmWdjdbERPw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用熊猫的代码输出(图片由作者提供)</p></figure><p id="9ead" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，如果有更多的数据，这将更有意义。让我们人工生成这个:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/9b26d4822ec03c3d7a5cedd7f7ab3f0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*42BcYBHgxMvOdqoCca6m8w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用熊猫的代码输出(图片由作者提供)</p></figure><p id="92b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">剧情</strong></p><p id="127c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们想以线性的方式来观察这种关系，有时最好使用<code class="fe nd ne nf ng b">plot</code>函数来代替。语法是相似的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/85de0dd77bacaa9fce837ae69057f388.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dU831uB6S-3Vo-Av239hTQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用熊猫的代码输出(图片由作者提供)</p></figure><p id="050b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意:</strong> Matplolib <code class="fe nd ne nf ng b">plot</code>方法将按照给出的顺序绘制给定点<strong class="lb iu">。</strong></p><p id="bb38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">重叠地块</strong></p><p id="a796" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过调用plot函数两次来覆盖共享相同x轴值的两个图，每次调用y轴值:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pa"><img src="../Images/95dd3e7863c1cacaeb976574baf752d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hPdxFuW_y4UcKrRojfNh6Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用熊猫的代码输出(图片由作者提供)</p></figure><p id="a18d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">柱状图</strong></p><p id="a3d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">熊猫的一个优点是，它整合了许多常见的Matlotlib情节。例如，我们可以用<code class="fe nd ne nf ng b">plot()</code>方法绘制一个柱状图。这可以与其他matplotlib函数结合使用，如<code class="fe nd ne nf ng b">title()</code>、<code class="fe nd ne nf ng b">xlabel()</code>等。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/ee6fb88e8f7dbddf5f22ec808cd708c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:632/format:webp/1*FvER51cbfMAqoYP3oCfVaw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用熊猫的代码输出(图片由作者提供)</p></figure><p id="8c5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于instnace，我们可以使用<code class="fe nd ne nf ng b">df.plot.bar()</code>方法直接从数据帧创建柱状图:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/89dcb6971e48fa230179369615b94ec4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*apVTyAd-5zX1HO8p3YkekA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用Pandas和Matplolib的代码输出(图片由作者提供)</p></figure><p id="9c25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nd ne nf ng b">figsize</code>参数与<code class="fe nd ne nf ng b">figure(figsize=())</code>相同，<code class="fe nd ne nf ng b">rot</code>表示标签的旋转。当然，你也能猜到这里的<code class="fe nd ne nf ng b">x</code>和<code class="fe nd ne nf ng b">y</code>是干什么用的。</p><p id="0a35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">组条形图也可以被覆盖。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/3723d1742cb6ea2823a2248529d92b5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1S_EuDU72Q5D3z2Vmq-8LQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用Pandas和Matplolib的代码输出(图片由作者提供)</p></figure><p id="50df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其他示例可在<a class="ae ky" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.plot.bar.html" rel="noopener ugc nofollow" target="_blank">文档</a>中找到。</p><p id="5293" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">饼状图</strong></p><p id="4bab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用相同的数据框架设计，我们可以很容易地绘制如下条形图:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/e94b222b7a2300941467b6274b56b3c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KgMIvhXXYAoVK_7tteSxTg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用Pandas和Matplolib的代码输出(图片由作者提供)</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/64c7354ef7e7758b8d9900c3352cd11e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ToqQ_kj_lXdSLpDKJNch1g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用Pandas和Matplolib的代码输出(图片由作者提供)</p></figure><p id="dd3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">启用<code class="fe nd ne nf ng b">subplots=True</code>允许为不同的计数列绘制不同的条形图。</p><h2 id="f302" class="mf mg it bd mh mi mj dn mk ml mm dp mn li mo mp mq lm mr ms mt lq mu mv mw mx bi translated"><strong class="ak">奖金:Seaborn！</strong></h2><p id="c50d" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">有时，有些情节天生就更漂亮，或者更容易用高级Matplotlib包装库Searborn 制作。</p><p id="4724" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">回归图</strong></p><p id="bd41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这个例子，我们将使用Searborn提供的<a class="ae ky" href="https://github.com/mwaskom/seaborn-data" rel="noopener ugc nofollow" target="_blank"> Tips数据集</a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/f866d10134a27f33b84aa3605cf027db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*MCBHpPaclcNb6m0iE_IfZQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由Seaborn提供的tips数据集预览(图片由作者提供)</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/6c1cf706c40913408601c58a39a2b13b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7o_6uWMklu4e8_JkfEEPVQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><p id="9fb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">传递<code class="fe nd ne nf ng b">x_bins</code>参数会将连续数据聚集到箱中，并提供额外的线条来指示箱的密度:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/3f037a18f72722908e52b1d05811fbb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XVnxYqhvlyyFiQ4tj565Xg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><p id="a010" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">箱线图</strong></p><p id="7be5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">箱线图是一种直观显示数据向量的常见分布统计信息的快速方法，如下图所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/7eecfe4c0c11b7825a1eca6d1d503291.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*RUHk4albLSXIh7ca8Yylgw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">img src:<a class="ae ky" href="https://upload.wikimedia.org/wikipedia/commons/1/1a/Boxplot_vs_PDF.svg" rel="noopener ugc nofollow" target="_blank">https://upload . wikimedia . org/Wikipedia/commons/1/1a/box plot _ vs _ pdf . SVG</a></p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/3b612dd5a6c0503e8475cd369ee1248e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SDPPD-M1z1p88jR6xfg8ZA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><p id="afca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">分布图</strong></p><p id="728e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个有趣的事情是使用displot来获得一些数据分布的完整图像。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/53be8e58be68b99363f84c46ded5db77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hQJuEr5pzURp12waGPLhfg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Seaborn代码输出(图片由作者提供)</p></figure><p id="bd29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> Pairplots </strong></p><p id="87b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pairplots允许我们同时看到out dataframe列和每个列的分布之间的相关性，以各种方式表示。我们将用seaborn的预编码数据来说明这一点。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pm"><img src="../Images/b5938aafea04dd34f235825fe4c77c8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UAdv68MOHzkm6oNnxkBOSA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(图片由作者提供)</p></figure><p id="4d31" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以简单地使用Seaborn的<code class="fe nd ne nf ng b">pairplot</code>函数来生成下面的图:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pn"><img src="../Images/b448c8cfe02e63cbd757efb80f27769e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e_bKj8Dkt3RR4EkAjQn_tg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Seaborn代码输出(图片由作者提供)</p></figure><p id="77d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe nd ne nf ng b">hue</code>参数也允许我们在图中指定组:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi po"><img src="../Images/ed605d7dd02b68c5aa36fb713559063b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1rUw-kD-_G8dR3smrqbbBA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Seaborn代码输出(图片由作者提供)</p></figure><p id="9037" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有的标签和细节都是自动完成的。您也可以通过使用<code class="fe nd ne nf ng b">diag_kind="hist"</code>作为参数来改变对角线分布图的类型。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pp"><img src="../Images/c1860dc5ce17b3d1c87d797e4fd5b413.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jjSCvvnrEwq70sVIoI6lLQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Seaborn代码输出(图片由作者提供)</p></figure><p id="b281" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了绘制<strong class="lb iu">内核密度估计值</strong>，您还可以指定<code class="fe nd ne nf ng b">kind="kde"</code>作为参数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pp"><img src="../Images/97b546464dc80d30ed4429b9486c00c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RmWPQKiKDOtgJ5KNMwJRqw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Seaborn代码输出(图片由作者提供)</p></figure><p id="8231" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">相关图</strong></p><p id="651f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过在pandas数据帧上使用<code class="fe nd ne nf ng b">corr()</code>方法生成一个相关矩阵来进行快速分析，这将生成一个数值列之间的相关值矩阵。然后，我们可以简单地用<code class="fe nd ne nf ng b">annot=True</code>参数将它包在<code class="fe nd ne nf ng b">sns.heatmap()</code>函数周围，得到下面的图:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pq"><img src="../Images/0cc5d3adcc7df6c769a4d8f6f7a4d27b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bQOWK-vaBCkrE3ksCIXF_A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Seaborn代码输出(图片由作者提供)</p></figure><p id="b015" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">线图</strong></p><p id="ca68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">线图对于可视化类似时间序列的数据很有用；即从一点组织到另一点。这里有一个取自<code class="fe nd ne nf ng b">Seaborn</code> <a class="ae ky" href="https://seaborn.pydata.org/examples/errorband_lineplots.html" rel="noopener ugc nofollow" target="_blank">文档</a>的例子:</p><p id="8233" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们加载FMRI数据集(参见<a class="ae ky" href="https://github.com/mwaskom/Waskom_CerebCortex_2017" rel="noopener ugc nofollow" target="_blank">来源</a>)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pr"><img src="../Images/c3347419894e78e9177f43d541538455.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*tBOf3cUI_Vpzsm1x9vRukQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Seaborn数据集显示(图片由作者提供)</p></figure><p id="96d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们使用<code class="fe nd ne nf ng b">lineplot</code>函数指定与时间相关的变量<code class="fe nd ne nf ng b">timepoint</code>，以及作为“响应”的<code class="fe nd ne nf ng b">signal</code>变量。因为这是一个分类变量，我们为每个变量获取多行！此外，我们还将<code class="fe nd ne nf ng b">hue</code>指定为区域，即分组。这产生了一个非常好的图表，其中有四个不同的趋势被初步分组:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ps"><img src="../Images/72842e5a8988891a3e27849ddc6d7c34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AJL9kelMQp1jxI7P9f7avA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Seaborn代码输出(图片由作者提供)</p></figure><h2 id="c37c" class="mf mg it bd mh mi mj dn mk ml mm dp mn li mo mp mq lm mr ms mt lq mu mv mw mx bi translated">接下来会发生什么？</h2><p id="d0bd" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">安:今天的介绍就到这里！当然，没有哪一篇文章会涵盖所有内容，所以这里有几篇其他的好文章，这样你就可以继续你的学习之旅:</p><div class="pt pu gp gr pv pw"><a rel="noopener follow" target="_blank" href="/a-beginners-guide-to-data-analysis-in-python-188706df5447"><div class="px ab fo"><div class="py ab pz cl cj qa"><h2 class="bd iu gy z fp qb fr fs qc fu fw is bi translated">Python数据分析初学者指南</h2><div class="qd l"><h3 class="bd b gy z fp qb fr fs qc fu fw dk translated">Python数据分析入门分步指南</h3></div><div class="qe l"><p class="bd b dl z fp qb fr fs qc fu fw dk translated">towardsdatascience.com</p></div></div><div class="qf l"><div class="qg l qh qi qj qf qk ks pw"/></div></div></a></div><div class="pt pu gp gr pv pw"><a rel="noopener follow" target="_blank" href="/introduction-to-data-visualization-in-python-89a54c97fbed"><div class="px ab fo"><div class="py ab pz cl cj qa"><h2 class="bd iu gy z fp qb fr fs qc fu fw is bi translated">Python中的数据可视化简介</h2><div class="qd l"><h3 class="bd b gy z fp qb fr fs qc fu fw dk translated">如何使用Matplotlib，Pandas和Seaborn制作图形</h3></div><div class="qe l"><p class="bd b dl z fp qb fr fs qc fu fw dk translated">towardsdatascience.com</p></div></div><div class="qf l"><div class="ql l qh qi qj qf qk ks pw"/></div></div></a></div><h2 id="f89f" class="mf mg it bd mh mi mj dn mk ml mm dp mn li mo mp mq lm mr ms mt lq mu mv mw mx bi translated">来源</h2><ul class=""><li id="7658" class="oj ok it lb b lc my lf mz li qm lm qn lq qo lu oo op oq or bi translated"><a class="ae ky" href="https://www.python.org/community/logos/" rel="noopener ugc nofollow" target="_blank"> Python标志</a></li><li id="911f" class="oj ok it lb b lc os lf ot li ou lm ov lq ow lu oo op oq or bi translated"><a class="ae ky" href="https://insights.stackoverflow.com/trends?tags=python%2Cjavascript%2Cjava%2Cc%23%2Cphp%2Cc%2B%2B&amp;utm_source=so-owned&amp;utm_medium=blog&amp;utm_campaign=gen-blog&amp;utm_content=blog-link&amp;utm_term=incredible-growth-python" rel="noopener ugc nofollow" target="_blank">趋势图</a></li><li id="ffa7" class="oj ok it lb b lc os lf ot li ou lm ov lq ow lu oo op oq or bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/File:NumPy_logo_2020.svg" rel="noopener ugc nofollow" target="_blank">数字标识</a></li><li id="20db" class="oj ok it lb b lc os lf ot li ou lm ov lq ow lu oo op oq or bi translated"><a class="ae ky" href="https://pandas.pydata.org/about/citing.html" rel="noopener ugc nofollow" target="_blank">熊猫标志</a></li><li id="11b2" class="oj ok it lb b lc os lf ot li ou lm ov lq ow lu oo op oq or bi translated"><a class="ae ky" href="https://matplotlib.org/stable/gallery/misc/logos2.html" rel="noopener ugc nofollow" target="_blank"> Matplotlib标志</a></li><li id="93d1" class="oj ok it lb b lc os lf ot li ou lm ov lq ow lu oo op oq or bi translated"><a class="ae ky" href="https://commons.wikimedia.org/wiki/File:Boxplot_vs_PDF.svg" rel="noopener ugc nofollow" target="_blank">箱线图&amp;正态分布图</a></li><li id="449f" class="oj ok it lb b lc os lf ot li ou lm ov lq ow lu oo op oq or bi translated"><a class="ae ky" href="https://github.com/mwaskom/Waskom_CerebCortex_2017" rel="noopener ugc nofollow" target="_blank"> FMRI数据集</a></li></ul><h2 id="6a57" class="mf mg it bd mh mi mj dn mk ml mm dp mn li mo mp mq lm mr ms mt lq mu mv mw mx bi translated">跟我来</h2><ol class=""><li id="9437" class="oj ok it lb b lc my lf mz li qm lm qn lq qo lu qp op oq or bi translated"><a class="ae ky" href="https://jairparraml.com/" rel="noopener ugc nofollow" target="_blank">https://jairparraml.com/</a></li><li id="1b29" class="oj ok it lb b lc os lf ot li ou lm ov lq ow lu qp op oq or bi translated"><a class="ae ky" href="https://blog.jairparraml.com/" rel="noopener ugc nofollow" target="_blank">https://blog.jairparraml.com/</a></li><li id="ef6e" class="oj ok it lb b lc os lf ot li ou lm ov lq ow lu qp op oq or bi translated"><a class="ae ky" href="https://www.linkedin.com/in/hair-parra-526ba19b/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/hair-parra-526ba19b/</a></li><li id="000c" class="oj ok it lb b lc os lf ot li ou lm ov lq ow lu qp op oq or bi translated">https://github.com/JairParra<a class="ae ky" href="https://github.com/JairParra" rel="noopener ugc nofollow" target="_blank"/></li><li id="52a9" class="oj ok it lb b lc os lf ot li ou lm ov lq ow lu qp op oq or bi translated">【https://medium.com/@hair.parra T4】</li></ol><div class="pt pu gp gr pv pw"><a href="https://www.linkedin.com/in/hair-parra-526ba19b/" rel="noopener  ugc nofollow" target="_blank"><div class="px ab fo"><div class="py ab pz cl cj qa"><h2 class="bd iu gy z fp qb fr fs qc fu fw is bi translated">Hair Parra —数据科学家/数据工程师— DevX Analytics —思科| LinkedIn</h2><div class="qd l"><h3 class="bd b gy z fp qb fr fs qc fu fw dk translated">查看Hair Parra在全球最大的职业社区LinkedIn上的个人资料。头发有8个工作列在他们的…</h3></div><div class="qe l"><p class="bd b dl z fp qb fr fs qc fu fw dk translated">www.linkedin.com</p></div></div><div class="qf l"><div class="qq l qh qi qj qf qk ks pw"/></div></div></a></div></div></div>    
</body>
</html>