<html>
<head>
<title>A Guide to Python Good Practices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python良好实践指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-guide-to-python-good-practices-90598529da35?source=collection_archive---------3-----------------------#2021-08-09">https://towardsdatascience.com/a-guide-to-python-good-practices-90598529da35?source=collection_archive---------3-----------------------#2021-08-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5c12" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">回顾Python中的一些最佳实践，从项目结构到代码格式化，再到一些优秀的旧代码管理技巧</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c9ec5c6abbb3436ec34c0f8fc26fa9e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IqJlDHaPRmiKIC9s"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">安德烈·卡斯塔哈在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><blockquote class="kw kx ky"><p id="cbb8" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这篇文章是从我正在写的关于数据科学的书<a class="ae kv" href="http://mohitmayank.com/a_lazy_data_science_guide/first_page.html" rel="noopener ugc nofollow" target="_blank">“数据科学懒惰指南”</a>中的<a class="ae kv" href="http://mohitmayank.com/a_lazy_data_science_guide/python/good_practices.html" rel="noopener ugc nofollow" target="_blank">章节</a>中摘录的。阅读类似文章，参考<a class="ae kv" href="https://mohitmayank.com/blog/" rel="noopener ugc nofollow" target="_blank">我的博客</a>或<a class="ae kv" href="https://medium.com/@mohitmayank" rel="noopener">我的媒体页面</a>。别忘了在<a class="ae kv" href="https://www.linkedin.com/in/imohitmayank/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和/或<a class="ae kv" href="https://twitter.com/imohitmayank" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上问好。<em class="iq"> 🖖 </em></p></blockquote><h1 id="8ec5" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">介绍</h1><p id="5b1b" class="pw-post-body-paragraph kz la iq lc b ld mo jr lf lg mp ju li mq mr ll lm ms mt lp lq mu mv lt lu lv ij bi translated">编写现在有效的代码很容易。编写明天能工作的代码是困难的。编写明天就能工作的代码，并且足够直观，任何人都可以理解和遵循——现在我们已经碰到了超级困难的事情😀。通过观察和我一起工作的几位ML工程师和数据科学家，我注意到他们几乎都有自己独特的编码风格。嗯，不要误解我，主观上是一件好事，我认为这是导致创新的原因。也就是说，在团队中工作，甚至是在开源协作中，同意某些规则是有帮助的。这就是这篇文章背后的想法，为python实践者提供一套精选的指南，他们可以从中挑选。至此，让我们来看看一些好的实践，它们不仅能帮助我们创建一个工作的，而且是一段漂亮的代码😄。为了涵盖这个主题，我们将讨论三个部分，</p><ol class=""><li id="a495" class="mw mx iq lc b ld le lg lh mq my ms mz mu na lv nb nc nd ne bi translated"><strong class="lc ir">项目结构化:</strong>关于如何组织代码的想法</li><li id="9b6f" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nb nc nd ne bi translated">代码格式:关于如何让你的代码易于理解的想法</li><li id="986e" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nb nc nd ne bi translated">额外提示:一些对你有长远帮助的事情</li></ol><h1 id="2836" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">项目结构</h1><p id="c51c" class="pw-post-body-paragraph kz la iq lc b ld mo jr lf lg mp ju li mq mr ll lm ms mt lp lq mu mv lt lu lv ij bi translated">在这一部分中，我们将主要讨论如何构建完整的python项目的一些良好实践。为此，我们将着眼于两种不同的可能性，任何人都可以根据他们的项目的简单或复杂程度来选择。</p><h2 id="e513" class="nk lx iq bd ly nl nm dn mc nn no dp mg mq np nq mi ms nr ns mk mu nt nu mm nv bi translated">类型1:经典</h2><ul class=""><li id="742c" class="mw mx iq lc b ld mo lg mp mq nw ms nx mu ny lv nz nc nd ne bi translated">这是最基本的格式，但也暗示了有组织的结构。当我们的项目仅由几个模块/脚本组成时，可以遵循这一点。示例项目的目录可能如下所示:</li></ul><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="ca07" class="nk lx iq ob b gy of og l oh oi">my_project             # Root directory of the project<br/>├── code               # Source codes<br/>├── input              # Input files<br/>├── output             # Output files<br/>├── config             # Configuration files<br/>├── notebooks          # Project related Jupyter notebooks (for experimental code)<br/>├── requirements.txt   # List of external package which are project dependency<br/>└── README.md          # Project README</span></pre><ul class=""><li id="f256" class="mw mx iq lc b ld le lg lh mq my ms mz mu na lv nz nc nd ne bi translated">从名字可以明显看出，<code class="fe oj ok ol ob b">code</code>文件夹包含各个模块(<code class="fe oj ok ol ob b">.py</code>文件)，<code class="fe oj ok ol ob b">input</code>和<code class="fe oj ok ol ob b">output</code>分别包含输入和输出文件，<code class="fe oj ok ol ob b">notebook</code>包含我们用于实验的<code class="fe oj ok ol ob b">.ipynb</code>笔记本文件。最后，<code class="fe oj ok ol ob b">config</code>文件夹可以包含<code class="fe oj ok ol ob b">yaml</code>或<code class="fe oj ok ol ob b">json</code>或<code class="fe oj ok ol ob b">ini</code>文件中的参数，并且可以由代码模块文件使用【config parser】(<a class="ae kv" href="https://docs.python.org/3.7/library/configparser.html" rel="noopener ugc nofollow" target="_blank">config parser—配置文件解析器— Python 3.7.11文档</a>)来访问。</li><li id="ce61" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated"><code class="fe oj ok ol ob b">requirements.txt</code>包含项目需要的所有外部python包的列表。维护该文件的一个优点是所有这些包都可以使用<code class="fe oj ok ol ob b">pip install -r requirements.txt</code>命令轻松安装。<em class="lb">(无需手动安装每个外部软件包！)</em>。一个例子<code class="fe oj ok ol ob b">requirements.txt</code>文件如下图所示<em class="lb">(同</em> <code class="fe oj ok ol ob b"><em class="lb">package_name==package_version</em></code> <em class="lb">格式)</em>，</li></ul><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="23b4" class="nk lx iq ob b gy of og l oh oi">BeautifulSoup==3.2.0<br/>Django==1.3<br/>Fabric==1.2.0<br/>Jinja2==2.5.5<br/>PyYAML==3.09<br/>Pygments==1.4</span></pre><ul class=""><li id="acb6" class="mw mx iq lc b ld le lg lh mq my ms mz mu na lv nz nc nd ne bi translated">最后，<code class="fe oj ok ol ob b">README.MD</code>包含了项目的内容、原因和方式，以及一些关于如何运行项目的伪代码和示例用例。</li></ul><h2 id="4545" class="nk lx iq bd ly nl nm dn mc nn no dp mg mq np nq mi ms nr ns mk mu nt nu mm nv bi translated">类型2:凯德罗</h2><ul class=""><li id="590f" class="mw mx iq lc b ld mo lg mp mq nw ms nx mu ny lv nz nc nd ne bi translated">Kedro不是一个项目结构化策略，它是一个由QuantumBlack Labs发布的python工具，为你做项目结构化😎。最重要的是，它们提供了大量的功能，使我们的项目组织甚至代码执行过程变得超级简单，这样我们就可以真正专注于最重要的事情——实验和实现！</li><li id="a819" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated">他们的项目结构如下所示。还有btw，我们可以通过运行<code class="fe oj ok ol ob b">kedro new</code>命令<em class="lb">创建一个空白项目(不要忘了先通过</em> <code class="fe oj ok ol ob b"><em class="lb">pip install kedro</em></code> <em class="lb"> ) </em>安装kedro)</li></ul><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="09f4" class="nk lx iq ob b gy of og l oh oi">get-started         # Parent directory of the template<br/>├── conf            # Project configuration files<br/>├── data            # Local project data (not committed to version control)<br/>├── docs            # Project documentation<br/>├── logs            # Project output logs (not committed to version control)<br/>├── notebooks       # Project related Jupyter notebooks (can be used for experimental code before moving the code to src)<br/>├── README.md       # Project README<br/>├── setup.cfg       # Configuration options for `pytest` when doing `kedro test` and for the `isort` utility when doing `kedro lint`<br/>└── src             # Project source code</span></pre><ul class=""><li id="f792" class="mw mx iq lc b ld le lg lh mq my ms mz mu na lv nz nc nd ne bi translated">虽然大多数目录与其他类型相似，但有几点需要注意。Kedro对不同模块进行分组的方式是创建不同的“管道”。这些管道存在于 <code class="fe oj ok ol ob b"><em class="lb">src</em></code> <em class="lb">文件夹中，该文件夹又包含模块文件。此外，它们对执行的单个功能进行了明确的分离——这些功能存储在</em> <code class="fe oj ok ol ob b"><em class="lb">nodes.py</em></code> <em class="lb">文件中，这些功能随后与</em> <code class="fe oj ok ol ob b"><em class="lb">pipeline.py</em></code> <em class="lb">文件*(全部在单个管道文件夹中)</em>中的输入和输出相连接。Kedro还通过将参数存储在<code class="fe oj ok ol ob b">conf</code>文件夹中来分离代码和参数。</li><li id="3cf4" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated">除了帮助组织项目之外，它们还提供了顺序或并行执行的选项。我们可以执行单独的功能<em class="lb">(在</em> <code class="fe oj ok ol ob b"><em class="lb">nodes.py</em></code> <em class="lb"> ) </em>，或者单独的管道<em class="lb">(是功能的组合)</em>，或者一次完成整个项目。我们还可以创建完整项目的doc，或者将项目编译并打包为python <code class="fe oj ok ol ob b">.whl</code>文件，只需运行一个命令。要了解更多细节，请相信我，我们只是触及了表面，请参考他们的官方文档。</li></ul><h1 id="ae99" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">代码格式</h1><ul class=""><li id="c57f" class="mw mx iq lc b ld mo lg mp mq nw ms nx mu ny lv nz nc nd ne bi translated">采用自顶向下的方法，让我们先来看看一段<em class="lb">整洁的</em>代码。我们将在后面更详细地讨论代码的各个方面。现在，假设有人让你写一些脚本，那么一段理想的代码文件应该是什么样子。</li><li id="c22e" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated">以下代码摘自<code class="fe oj ok ol ob b">csv_column_operations.py</code>模块文件。它是为提示生成的:<em class="lb">“编写一个以CSV文件为输入并返回一列之和的函数”</em>。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/ee5005544d2b9f882259caa1d35d0f6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tEbrSqKWV9cjveuuuxbYXA.png"/></div></div></figure><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="c22d" class="nk lx iq ob b gy of og l oh oi">Some might argue why do such an overkill for a simple piece of code. Note, it's a dummy example. In real life, you will develop more complex pieces of codes and hence it become quite important that we understand the gist.</span></pre><ul class=""><li id="6d60" class="mw mx iq lc b ld le lg lh mq my ms mz mu na lv nz nc nd ne bi translated">现在让我们更深入地研究上面代码的各个方面。</li></ul><h2 id="2542" class="nk lx iq bd ly nl nm dn mc nn no dp mg mq np nq mi ms nr ns mk mu nt nu mm nv bi translated">模块结构</h2><ul class=""><li id="73d7" class="mw mx iq lc b ld mo lg mp mq nw ms nx mu ny lv nz nc nd ne bi translated">模块是扩展名为<code class="fe oj ok ol ob b">.py</code>的python文件，包含可执行代码或函数或类等。</li><li id="faf5" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated">通常，我们从模块定义开始模块，这是我们提供模块的一些基本细节的区域。我们可以使用下面的模板<em class="lb">(很容易与上面显示的真实代码进行比较)</em></li></ul><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="b360" class="nk lx iq ob b gy of og l oh oi">"""&lt;Short description&gt;</span><span id="0518" class="nk lx iq ob b gy on og l oh oi">&lt;Long description&gt;</span><span id="db07" class="nk lx iq ob b gy on og l oh oi">Author: &lt;Name&gt; &lt;email&gt;</span><span id="2a0f" class="nk lx iq ob b gy on og l oh oi">Created: &lt;date&gt;<br/>"""</span></pre><ul class=""><li id="d1f2" class="mw mx iq lc b ld le lg lh mq my ms mz mu na lv nz nc nd ne bi translated">接下来，我们应该使用注释行清楚地隔离模块的各个部分，如导入、代码区等。</li><li id="8382" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated">最后，在底部，我们可以包括一些关于如何运行代码的例子。将这些脚本包含在<code class="fe oj ok ol ob b">if __name__ == '__main__':</code>中确保它们只在文件被直接执行时运行<em class="lb">(像</em> <code class="fe oj ok ol ob b"><em class="lb">python csv_column_operations.py</em></code> <em class="lb"> ) </em>。因此，当您说在另一个脚本中导入模块时，这些代码段不会运行。</li></ul><h2 id="79b7" class="nk lx iq bd ly nl nm dn mc nn no dp mg mq np nq mi ms nr ns mk mu nt nu mm nv bi translated">功能结构</h2><ul class=""><li id="9c2d" class="mw mx iq lc b ld mo lg mp mq nw ms nx mu ny lv nz nc nd ne bi translated">函数是执行特定任务的基本代码块。一个模块由几个函数组成。为了告诉用户一个特定的代码块做什么，我们用一个函数定义来开始这个函数。下面提供了一个样本模板，</li></ul><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="9ccb" class="nk lx iq ob b gy of og l oh oi">"""Description</span><span id="0611" class="nk lx iq ob b gy on og l oh oi">Paramters<br/>---------<br/>&lt;parameter_1&gt;: &lt;data_type&gt;<br/>    &lt;parameter_1_description&gt;</span><span id="b7f5" class="nk lx iq ob b gy on og l oh oi">Returns<br/>---------<br/>&lt;output_1&gt;: &lt;data_type&gt;<br/>    &lt;output_1_description&gt;<br/>"""</span></pre><ul class=""><li id="84b3" class="mw mx iq lc b ld le lg lh mq my ms mz mu na lv nz nc nd ne bi translated">在此之后，我们可以开始添加相关的代码行。确保使用注释来分隔函数中不同的逻辑代码块。</li><li id="cc09" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated">在编码部分的开始要处理的一件重要事情是检查参数和输入数据，以获得一些数据类型或数据内容相关的基本问题。大多数代码中断都是由于愚蠢的错误造成的，比如有人提供了错误的输入，在这种情况下，我们应该打印或记录警告消息，然后优雅地退出。上面相同的代码在步骤1部分包含两个这样的初步但重要的检查。</li></ul><h2 id="2b99" class="nk lx iq bd ly nl nm dn mc nn no dp mg mq np nq mi ms nr ns mk mu nt nu mm nv bi translated">命名约定</h2><p id="f3eb" class="pw-post-body-paragraph kz la iq lc b ld mo jr lf lg mp ju li mq mr ll lm ms mt lp lq mu mv lt lu lv ij bi translated">我们可以遵循几个格式约定，比如<a class="ae kv" href="https://en.wikipedia.org/wiki/Camel_case" rel="noopener ugc nofollow" target="_blank">骆驼案</a>、<a class="ae kv" href="https://en.wikipedia.org/wiki/Snake_case" rel="noopener ugc nofollow" target="_blank">蛇案</a>等。挺主观的，看开发商。下面是一些命名python代码不同实体的例子<em class="lb">(取自PIP8惯例——有一些修改)</em>😇,</p><ul class=""><li id="cc1d" class="mw mx iq lc b ld le lg lh mq my ms mz mu na lv nz nc nd ne bi translated"><strong class="lc ir">模块名:</strong>模块应该有简短的、全小写的名字(例如:<code class="fe oj ok ol ob b">csv_column_operations.py</code>)</li><li id="77ee" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated"><strong class="lc ir">函数或方法名:</strong>函数名应该是小写的，单词之间用下划线分隔，以提高可读性。另外，不要忘记添加动词！(例:<code class="fe oj ok ol ob b">perform_column_sum()</code>)</li><li id="5cb6" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated"><strong class="lc ir">变量名:</strong>类似于函数名，但没有动词！(例如:<code class="fe oj ok ol ob b">list_of_news</code>)</li><li id="222a" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated"><strong class="lc ir">类名:</strong>类名通常应该使用CapWords约定。(例:<code class="fe oj ok ol ob b">FindMax</code>)</li><li id="3f0d" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated"><strong class="lc ir">常量名称:</strong>常量通常在模块级定义，全部用大写字母书写，用下划线分隔单词。(例:<code class="fe oj ok ol ob b">MAX_OVERFLOW</code>和<code class="fe oj ok ol ob b">TOTAL</code>)。</li></ul><h2 id="32de" class="nk lx iq bd ly nl nm dn mc nn no dp mg mq np nq mi ms nr ns mk mu nt nu mm nv bi translated">添加评论</h2><p id="d98a" class="pw-post-body-paragraph kz la iq lc b ld mo jr lf lg mp ju li mq mr ll lm ms mt lp lq mu mv lt lu lv ij bi translated">PEP-8定义了三种类型的注释，</p><ul class=""><li id="3f1c" class="mw mx iq lc b ld le lg lh mq my ms mz mu na lv nz nc nd ne bi translated"><strong class="lc ir">块注释:</strong>这是为单个或一组代码行编写的。当你想解释一组代码行或者只是想分离代码时，这是可以做到的。在上面的例子中，你可以看到<code class="fe oj ok ol ob b"># Step {1, 2, 3}</code>被用作隔离注释，而<code class="fe oj ok ol ob b"># run when file is directly executed</code>被用于解释一组代码行。</li><li id="1903" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated"><strong class="lc ir">行内注释:</strong>与代码添加在同一行。例如，看看<code class="fe oj ok ol ob b"># to handle csv files</code>是如何被用来证明熊猫包装进口的。PEP-8建议谨慎使用行内注释。</li><li id="05d2" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated"><strong class="lc ir">文档字符串:</strong>用于模块、函数或类的文档。PEP-257建议对docstring <em class="lb">使用多行注释(使用" ")</em>。上面的示例代码中提供了一个模块和函数文档字符串<em class="lb">(文档字符串的缩写)</em>的示例。</li></ul><p id="a1c3" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mq lk ll lm ms lo lp lq mu ls lt lu lv ij bi translated">我们应该在评论中尽可能地描述。尝试将代码的功能部分分开，为复杂的代码行提供解释，提供关于函数输入/输出的细节，等等。你怎么知道你有足够多的评论？—如果你觉得有你一半专业知识的人不用半夜给你打电话就能理解代码！😤</p><h2 id="76f7" class="nk lx iq bd ly nl nm dn mc nn no dp mg mq np nq mi ms nr ns mk mu nt nu mm nv bi translated">缩进—制表符与空格</h2><ul class=""><li id="57c4" class="mw mx iq lc b ld mo lg mp mq nw ms nx mu ny lv nz nc nd ne bi translated">坦白地说，我只打算用一根长棍子去碰这个话题，🧹.已经有几篇<a class="ae kv" href="https://softwareengineering.stackexchange.com/questions/57/tabs-versus-spaces-what-is-the-proper-indentation-character-for-everything-in-e" rel="noopener ugc nofollow" target="_blank">文章</a>、<a class="ae kv" href="https://www.reddit.com/r/learnpython/comments/8cann8/tabs_vs_spaces_i_dont_get_it/" rel="noopener ugc nofollow" target="_blank"> reddit线程</a>甚至电视剧(硅谷📺)这个话题在哪里讨论了很多！</li><li id="4c32" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated">想要我的2美分吗？选择任何现代IDE <em class="lb">(比如VSCode，Sublime等)</em>，设置缩进为制表符，设置1个制表符= 4个空格。完成的😏</li></ul><h1 id="c09e" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">其他提示</h1><p id="c0d0" class="pw-post-body-paragraph kz la iq lc b ld mo jr lf lg mp ju li mq mr ll lm ms mt lp lq mu mv lt lu lv ij bi translated">到目前为止，我们已经讨论了如何构建项目或者格式化代码。接下来，我们将介绍一组通用的良好实践，它们将为您省去一些痛苦😬</p><h2 id="1bc2" class="nk lx iq bd ly nl nm dn mc nn no dp mg mq np nq mi ms nr ns mk mu nt nu mm nv bi translated">记录</h2><ul class=""><li id="a8b4" class="mw mx iq lc b ld mo lg mp mq nw ms nx mu ny lv nz nc nd ne bi translated">而不是在控制台中打印临时的语句(做一个<code class="fe oj ok ol ob b">cls</code>然后噗的一声就没了💨)，更好的办法是将这些语句保存在一个单独的文件中，您可以随时回去参考。这是伐木📜</li><li id="98d7" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated">Python提供了一个用于日志记录的内置函数。通过参考官方的<a class="ae kv" href="https://docs.python.org/3.7/howto/logging.html" rel="noopener ugc nofollow" target="_blank">如何</a>，记录到一个文件超级简单，</li></ul><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="f949" class="nk lx iq ob b gy of og l oh oi"><br/># import<br/>import logging<br/># config the logging behavior<br/>logging.basicConfig(filename='example.log',level=logging.DEBUG)<br/># some sample log messages<br/>logging.debug('This message should go to the log file')<br/>logging.info('So should this')<br/>logging.warning('And this, too')</span></pre><ul class=""><li id="813c" class="mw mx iq lc b ld le lg lh mq my ms mz mu na lv nz nc nd ne bi translated">请注意，日志有一个层次级别，以隔离不同严重性的日志。在上面的例子中，<code class="fe oj ok ol ob b">level</code>参数表示被跟踪并保存到文件中的最低级别。根据官方的<a class="ae kv" href="https://docs.python.org/3.7/howto/logging.html" rel="noopener ugc nofollow" target="_blank"> how to </a>，这些是不同的日志记录级别，以及关于何时使用哪个<em class="lb">(按严重性递增顺序)</em>的一些细节，</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/59ba16658f019907992284d686469220.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ld4sMLsiSdKeTGKu4KDCxg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Python中不同级别的日志记录。来源:<a class="ae kv" href="https://docs.python.org/3/howto/logging.html" rel="noopener ugc nofollow" target="_blank">链接</a></p></figure><h2 id="90eb" class="nk lx iq bd ly nl nm dn mc nn no dp mg mq np nq mi ms nr ns mk mu nt nu mm nv bi translated">证明文件</h2><ul class=""><li id="710c" class="mw mx iq lc b ld mo lg mp mq nw ms nx mu ny lv nz nc nd ne bi translated">如果您计划在可预见的将来维护代码或者将代码移交给其他人，那么代码的文档化是绝对必要的。只要问问任何一个开发人员，当他们为他们计划使用的包找到现成的、精心组织的文档时，他们会有多兴奋！另一方面，自己创建一个看起来相当困难，不是吗？我的意思是，看看<a class="ae kv" href="https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.ExtraTreesClassifier.html#sklearn.ensemble.ExtraTreesClassifier" rel="noopener ugc nofollow" target="_blank"> sklearn </a>或者<a class="ae kv" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.merge.html" rel="noopener ugc nofollow" target="_blank">熊猫</a>的美女博士。😮</li><li id="8028" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated">很抱歉吓到你了，但实际上这很简单😉。还记得我们之前遵循的所有函数和模块docstring以及格式吗？事实证明，我们可以利用许多开源工具，如<a class="ae kv" href="https://docs.python.org/3/library/pydoc.html" rel="noopener ugc nofollow" target="_blank"> pydoc </a>和<a class="ae kv" href="https://www.sphinx-doc.org/en/master/usage/quickstart.html" rel="noopener ugc nofollow" target="_blank"> sphinx </a>来创建成熟的HTML文档！讨论实际细节超出了本文的范围，但是按照这两个包的“如何”步骤并准备好文档是相当容易的。</li><li id="e4d5" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated">最后一点，如果你用的是Kedro，这个过程就更简单了。您所要做的就是运行一个命令— <code class="fe oj ok ol ob b">kedro build-docs --open</code>来创建文档并自动在您的默认浏览器中打开它！</li></ul><h2 id="be63" class="nk lx iq bd ly nl nm dn mc nn no dp mg mq np nq mi ms nr ns mk mu nt nu mm nv bi translated">虚拟环境</h2><p id="3fd5" class="pw-post-body-paragraph kz la iq lc b ld mo jr lf lg mp ju li mq mr ll lm ms mt lp lq mu mv lt lu lv ij bi translated">虚拟环境(VE)可以被认为是python环境的本地副本，是专门为一个项目创建的。这个本地副本就像一张白纸，因为任何需要的包都可以单独安装在这里。为任何新项目创建一个新的虚拟环境是极其重要的，因为，</p><ul class=""><li id="78a3" class="mw mx iq lc b ld le lg lh mq my ms mz mu na lv nz nc nd ne bi translated">每个项目都有自己的依赖树<em class="lb">(一个特定版本的包需要另一个特定版本的包才能运行)</em></li><li id="38db" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated">在开发一个项目时，我们可能需要降级或升级一个包，如果在基本python环境中进行，将会影响您的系统！</li><li id="07b2" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated">因此，一个单独的python (VE)副本，在那里你可以安装任何你想要的东西，似乎是最合理的解决方案。</li></ul><p id="8eb8" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mq lk ll lm ms lo lp lq mu ls lt lu lv ij bi translated">使用VE基本上需要两步，</p><ul class=""><li id="6352" class="mw mx iq lc b ld le lg lh mq my ms mz mu na lv nz nc nd ne bi translated"><strong class="lc ir">创建一个VE: </strong>这可以通过在项目根目录下运行命令<code class="fe oj ok ol ob b">python3 -m venv tutorial-env</code>来完成。<em class="lb">(注意，</em> <code class="fe oj ok ol ob b"><em class="lb">tutorial-env</em></code> <em class="lb">是VE的名字，你可以用重命名为任何东西)</em></li><li id="53ac" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated"><strong class="lc ir">激活VE: </strong>这可以通过在Windows上运行命令<code class="fe oj ok ol ob b">tutorial-env\Scripts\activate.bat</code>和在Unix或MacOS上运行命令<code class="fe oj ok ol ob b">source tutorial-env/bin/activate</code>来完成。</li></ul><p id="6a26" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mq lk ll lm ms lo lp lq mu ls lt lu lv ij bi translated">就是这样！安装，卸载，升级或降级任何你想要的！</p><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="80b0" class="nk lx iq ob b gy of og l oh oi">Remember to switch to another VE when you start working on another project or/and to deactivate the VE when you want to move to base VE.</span></pre><h1 id="7880" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">参考</h1><ul class=""><li id="4cdd" class="mw mx iq lc b ld mo lg mp mq nw ms nx mu ny lv nz nc nd ne bi translated"><a class="ae kv" href="https://www.python.org/dev/peps/pep-0008/" rel="noopener ugc nofollow" target="_blank">Python代码PEP8风格指南</a></li><li id="1907" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated"><a class="ae kv" href="https://kedro.readthedocs.io/en/stable/index.html" rel="noopener ugc nofollow" target="_blank">凯卓</a></li><li id="e109" class="mw mx iq lc b ld nf lg ng mq nh ms ni mu nj lv nz nc nd ne bi translated"><a class="ae kv" href="https://docs.python.org/3/" rel="noopener ugc nofollow" target="_blank"> Python 3文档</a></li></ul></div><div class="ab cl op oq hu or" role="separator"><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou"/></div><div class="ij ik il im in"><p id="b0d8" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mq lk ll lm ms lo lp lq mu ls lt lu lv ij bi translated">干杯。</p></div></div>    
</body>
</html>