<html>
<head>
<title>Kedro — A Python Framework for Reproducible Data Science Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">kedro——可再生数据科学项目的Python框架</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/kedro-a-python-framework-for-reproducible-data-science-project-4d44977d4f04?source=collection_archive---------0-----------------------#2021-09-08">https://towardsdatascience.com/kedro-a-python-framework-for-reproducible-data-science-project-4d44977d4f04?source=collection_archive---------0-----------------------#2021-09-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8c4e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Kedro创建可维护的模块化数据科学管道</h2></div><h1 id="059e" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">动机</h1><p id="c82a" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">您是否曾经将数据传递给一系列函数和类，却不知道输出是什么样的？</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi lw"><img src="../Images/9c811c6a3819b4c87becf934ae78a8f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4SmvxvzYWw3MAbIigvhvXA.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="9fa4" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">您可以尝试保存数据，然后在Jupyter笔记本中检查数据，以确保输出与您预期的一致。这种方法可行，但是很麻烦。</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="ba9d" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">另一个常见问题是，当查看包含创建和执行函数的代码的Python脚本时，很难理解函数之间的关系。</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="dcc4" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">随着项目的发展，你的代码看起来更加复杂，更加难以理解。</p><p id="8c23" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">如果您能像下面这样可视化不同函数的输入和输出是如何连接的，那不是更好吗？</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mt"><img src="../Images/5be3ce77ef08d6539a2ac8804d17b2ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*445WmOz8pllmGH8cdv6XKg.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="ebf6" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">这就是Kedro派上用场的时候。</p><h1 id="29e8" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">凯卓是什么？</h1><p id="4fb1" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">Kedro是一个开源的Python框架，用于创建可复制的、可维护的、模块化的数据科学代码。它从软件工程最佳实践中借用概念，并将它们应用于机器学习代码。</p><p id="20de" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">Kedro允许您:</p><ol class=""><li id="ff62" class="mv mw it lc b ld mm lg mn lj mx ln my lr mz lv na nb nc nd bi translated">从千篇一律的模板中创建数据科学</li><li id="db87" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv na nb nc nd bi translated">创建数据科学管道</li><li id="2c3d" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv na nb nc nd bi translated">切开管道</li><li id="d4ae" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv na nb nc nd bi translated">模块化管道</li><li id="dac1" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv na nb nc nd bi translated">通过YAML文件配置您的数据和参数</li><li id="9eb3" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv na nb nc nd bi translated">在Jupyter笔记本中轻松分析节点的输出</li><li id="84e8" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv na nb nc nd bi translated">可视化您的管道</li><li id="22fb" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv na nb nc nd bi translated">为您的项目创建文档</li></ol><p id="6e87" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">在本文中，我将逐一介绍这些特性，并解释它们如何对您的数据科学项目有所帮助。</p><p id="1ab0" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">要安装Kedro，请键入:</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="33f2" class="no kj it nk b gy np nq l nr ns">pip install kedro</span></pre><h1 id="8016" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">建立一个数据科学项目</h1><h2 id="1752" class="no kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">从千篇一律的模板中创建数据科学</h2><p id="eae8" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">您是否考虑过如何构建您的数据科学项目，使其符合逻辑并合理标准化？如果能在一行代码中创建一个定义良好的标准项目结构不是很好吗？</p><p id="ff0d" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">使用Kedro可以轻松做到这一点。安装Kedro后，您可以使用以下命令创建一个新的空项目:</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="c9d2" class="no kj it nk b gy np nq l nr ns">$ kedro new</span></pre><p id="3118" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">在完成一系列问题后，将创建一个新项目，其结构如下:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/5149fa3fb843b35bbb0dbff4c9dc7e93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*hLNorY8__XlNphR_7pXXQA.png"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="a5ec" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">如果我们从更高的层次来看项目结构，我们可以看到有5个主要目录:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi of"><img src="../Images/b2f51f242766f0d47c0793434785c456.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*PB54dLrrYdNArniexf9VkQ.png"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><ul class=""><li id="f945" class="mv mw it lc b ld mm lg mn lj mx ln my lr mz lv og nb nc nd bi translated"><code class="fe oh oi oj nk b">conf</code>:存储配置文件</li><li id="0332" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv og nb nc nd bi translated"><code class="fe oh oi oj nk b">data</code>:存储数据</li><li id="8264" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv og nb nc nd bi translated"><code class="fe oh oi oj nk b">docs</code>:存储项目文档</li><li id="c1b4" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv og nb nc nd bi translated"><code class="fe oh oi oj nk b">logs</code>:存储日志文件</li><li id="2b59" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv og nb nc nd bi translated"><code class="fe oh oi oj nk b">notebooks</code>:储存Jupyter笔记本</li><li id="26d3" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv og nb nc nd bi translated"><code class="fe oh oi oj nk b">src</code>:存储主代码</li></ul><h2 id="2515" class="no kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">安装依赖项</h2><p id="d950" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">Kedro在使用之前需要一些基本的依赖项。这些依赖关系在<code class="fe oh oi oj nk b">src/requirements.txt</code>中指定。要安装这些依赖项，请键入:</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="3203" class="no kj it nk b gy np nq l nr ns">$ kedro install</span></pre><p id="1127" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">运行管道所需的所有依赖项都将安装在您的环境中。</p><p id="795d" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">既然我们学习了如何建立一个数据科学项目，那么让我们来理解如何用Kedro创建一个管道。</p><h1 id="173e" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">创建管道</h1><p id="a281" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">要创建新管道，请键入:</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="531b" class="no kj it nk b gy np nq l nr ns">$ kedro pipeline create &lt;NAME&gt;</span></pre><p id="52fc" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">由于数据科学项目通常有两个步骤:数据处理和模型训练，我们将创建一个名为<code class="fe oh oi oj nk b">data_engineer</code>的管道和一个名为<code class="fe oh oi oj nk b">data_science</code>的管道:</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="0985" class="no kj it nk b gy np nq l nr ns">$ kedro pipeline create data_engineering<br/>$ kedro pipeline create data_science</span></pre><p id="4367" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">这两个管道目录将被创建在<code class="fe oh oi oj nk b">src/project_name</code>下:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi of"><img src="../Images/7f19e352688056b882dbc972cb2e26c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*Hy5h5JGpyqdHQ-DXiIL3Ig.png"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="7d82" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">每个管道由4个文件组成:</p><ul class=""><li id="746b" class="mv mw it lc b ld mm lg mn lj mx ln my lr mz lv og nb nc nd bi translated"><code class="fe oh oi oj nk b">__init__.py</code></li><li id="5de2" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv og nb nc nd bi translated"><code class="fe oh oi oj nk b">README.md</code>:指定管道信息</li><li id="85ef" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv og nb nc nd bi translated"><code class="fe oh oi oj nk b">node.py</code>:包含节点</li><li id="3697" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv og nb nc nd bi translated"><code class="fe oh oi oj nk b">pipeline.py</code>:包含管道</li></ul><h2 id="9d37" class="no kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">结节</h2><p id="6ebb" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">管道由多个节点组成。每个节点都是一个Python函数。</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="dc17" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">对于每个节点，都有输入和输出:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="ecc9" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">节点<code class="fe oh oi oj nk b">get_classes</code>的可视化:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/89843303028d5912c533e8e54328a257.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*S4ijcTYNObqdOsq-ZRSJkg.png"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="46c2" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">可以使用<code class="fe oh oi oj nk b">None</code>、字符串、字符串列表或字典来指定每个节点的输入和输出。注意，这些字符串是<strong class="lc iu">抽象名称，而不是真实值</strong>。</p><p id="b887" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">名字为什么有用？如果我们知道每个函数的输入和输出的名称，我们可以通过调用它的名称来轻松地获取特定的输入或输出。因此，在你的代码中有更少的模糊性。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ol"><img src="../Images/14a658d3e948ee684466040f0f2c72d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I5xHyUZqh0UvlEFp74lQjA.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="0bdc" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">你可以在这里找到所有节点定义语法<a class="ae mu" href="https://kedro.readthedocs.io/en/stable/06_nodes_and_pipelines/01_nodes.html#node-definition-syntax" rel="noopener ugc nofollow" target="_blank"/>。</p><h2 id="42e9" class="no kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">管道</h2><p id="ba55" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">管道由一系列节点组成。它将一个节点的输出连接到另一个节点的输入。</p><p id="2c35" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">例如，在下面的代码中，<code class="fe oh oi oj nk b">'classes'</code>(函数<code class="fe oh oi oj nk b">get_classes</code>的输出)和<code class="fe oh oi oj nk b">'encoded_data'</code>(函数<code class="fe oh oi oj nk b">encode_categorical_columns</code>的输出)被用作函数<code class="fe oh oi oj nk b">split_data</code>的输入。</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mr ms l"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">数据目录位于<code class="fe oh oi oj nk b">conf/base/catalog.yml</code>下。</p></figure><p id="907b" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">上方管道的可视化:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi om"><img src="../Images/2fed57ca76a82441a317b47f139e5d19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*5dtZTbWmSI5oAH53KbPijg.png"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><h1 id="ede4" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">注册并运行管道</h1><p id="beca" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">现在我们有了节点和管道，让我们在文件<code class="fe oh oi oj nk b">src/project_name/pipeline_registry.py</code>中注册这些管道:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="9f35" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">注册管道后，我们可以使用以下命令运行这些管道:</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="3621" class="no kj it nk b gy np nq l nr ns">$ kedro run</span></pre><p id="c01a" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">如果您只想运行一个特定的管道，将<code class="fe oh oi oj nk b">--pipeline=&lt;NAME&gt;</code>添加到命令<code class="fe oh oi oj nk b">kedro run</code>中:</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="b994" class="no kj it nk b gy np nq l nr ns">$ kedro run --pipeline=de</span></pre><p id="4b36" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">酷！</p><h2 id="ff29" class="no kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">切开管道</h2><p id="5120" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果您希望只运行管道的一部分，可以对管道进行切片。切割管线的四个选项是:</p><ul class=""><li id="516a" class="mv mw it lc b ld mm lg mn lj mx ln my lr mz lv og nb nc nd bi translated"><code class="fe oh oi oj nk b">--from-nodes</code>:从某些节点开始运行管道</li><li id="4fe0" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv og nb nc nd bi translated"><code class="fe oh oi oj nk b">--to-nodes</code>:运行管道，直到到达某些节点</li><li id="f8dd" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv og nb nc nd bi translated"><code class="fe oh oi oj nk b">--from-inputs</code>:从产生特定输入的节点开始运行管道</li><li id="799c" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv og nb nc nd bi translated"><code class="fe oh oi oj nk b">--to-outputs</code>:运行流水线，直到到达产生一定输出的节点</li></ul><p id="4bc2" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">举个例子，</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="6031" class="no kj it nk b gy np nq l nr ns">$ kedro run --to-nodes=encode_categorical_columns</span></pre><p id="d541" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">…允许您运行管道，直到到达节点<code class="fe oh oi oj nk b">encode_categorical_columns</code>。</p><h2 id="8efd" class="no kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">模块化管道</h2><p id="32cc" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">有时，您可能希望<strong class="lc iu">为不同的目的重用同一个管道</strong>。Kedro允许您创建模块化管道，这些管道是隔离的，可以重用。</p><p id="9257" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">例如，您可以编写一个名为“烹饪管道”的管道，而不是编写两个单独的管道“烹饪午餐管道”和“烹饪晚餐管道”。</p><p id="965e" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">然后，通过用新值切换“烹饪管道”的输入和输出，将“烹饪管道”转换为“烹饪肉类管道”和“烹饪蔬菜管道”。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi on"><img src="../Images/20706d4ae7d419cdc540402cc2512a0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DZlTGQ4vGWyvfirqixx4cA.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="ea96" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">模块化管道很好，因为它们是可移植的，更容易开发、测试和维护。在这里找到关于如何模块化你的Kedro管道<a class="ae mu" href="https://kedro.readthedocs.io/en/stable/06_nodes_and_pipelines/03_modular_pipelines.html" rel="noopener ugc nofollow" target="_blank">的说明。</a></p><h1 id="b616" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">通过YAML文件配置您的参数和数据</h1><h2 id="2e0d" class="no kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">因素</h2><p id="b2e4" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">Kedro还允许您使用YAML文件指定函数的参数。这非常好，因为您可以从一个文件中查看所有参数，而无需深入源代码。</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="3066" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">要用配置文件配置您的项目，首先将用于<code class="fe oh oi oj nk b">data_engineering</code>管道的参数放入<code class="fe oh oi oj nk b">conf/base/parameters/data_engineering.yml</code>文件中。</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mr ms l"/></div></figure><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="a27b" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">现在，从管道访问参数很简单。我们所需要做的就是在我们想要访问的参数名称前添加<code class="fe oh oi oj nk b">params:</code>。</p><p id="cd91" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">在下面的例子中，我们使用<code class="fe oh oi oj nk b">params:test_data_ratio</code>从配置文件中访问参数<code class="fe oh oi oj nk b">test_data_ratio</code>。</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mr ms l"/></div></figure><h2 id="8ce6" class="no kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">数据目录</h2><p id="e75e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">现在你可能想知道:我们如何从管道中访问数据？</p><p id="edfb" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">Kedro允许你用数据目录加载和保存数据。数据目录位于<code class="fe oh oi oj nk b">conf/base/catalog.yml</code>下。</p><p id="2811" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">数据目录是一个配置文件，允许您<strong class="lc iu">指定数据类型，以及数据保存的位置</strong>。</p><p id="4df4" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">例如，为了保存来自<code class="fe oh oi oj nk b">encode_categorical_columns</code>节点的<code class="fe oh oi oj nk b">encoded_data</code>输出，</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="a1da" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">…我们可以将名称<code class="fe oh oi oj nk b">encoded_data</code>插入到<code class="fe oh oi oj nk b">conf/base/catalog.yml</code>文件中。在<code class="fe oh oi oj nk b">encoded_data</code>下，我们指定数据集的类型及其位置。</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="de12" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated"><code class="fe oh oi oj nk b">pandas.CSVDataSet</code>告诉Kedro我们想将<code class="fe oh oi oj nk b">encoded_data</code>保存为CSV格式，并用熊猫加载。Kedro还支持其他数据集类型，如pickle、parquet、excel、plot、Spark、SQL等。在这里找到Kedro支持<a class="ae mu" href="https://kedro.readthedocs.io/en/stable/05_data/01_data_catalog.html" rel="noopener ugc nofollow" target="_blank">的所有数据集。</a></p><p id="785a" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">使用数据目录来管理数据的加载和保存非常好，因为您可以指定:</p><ul class=""><li id="a192" class="mv mw it lc b ld mm lg mn lj mx ln my lr mz lv og nb nc nd bi translated">每个文件的位置</li><li id="5911" class="mv mw it lc b ld ne lg nf lj ng ln nh lr ni lv og nb nc nd bi translated">数据是如何保存和加载的</li></ul><p id="839c" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">…只编辑一个文件。下次当您忘记数据集的位置时，可以查看这个配置文件来查找它们的信息。</p><h1 id="a920" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">从Jupyter笔记本中加载数据目录和参数</h1><h2 id="9a4c" class="no kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">加载数据目录</h2><p id="2669" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">你是否曾经想要快速检查Jupyter笔记本上某个函数的输出？通常，您需要首先保存数据:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="cc98" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">…然后将其载入Jupyter笔记本:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi oo"><img src="../Images/6b24f929cb2ba36a1ebe0e4264d4560f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wbfLlHIBIekB2UkcJmCpcg.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="6bec" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">使用Kedro，保存和加载数据不需要额外的代码。要启动Kedro的Jupyter会话，请键入:</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="1d9d" class="no kj it nk b gy np nq l nr ns">$ kedro jupyter notebook</span></pre><p id="b037" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">在运行产生在<code class="fe oh oi oj nk b">catalog.yml</code>文件中指定的输出<code class="fe oh oi oj nk b">encoded_data</code>的流水线之后，</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="2e88" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">…我们可以使用<code class="fe oh oi oj nk b">catalog.load</code>轻松地将数据加载到笔记本电脑中:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="bd0f" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">如果要指定如何保存和加载输出<code class="fe oh oi oj nk b">encoded_data</code>，在<code class="fe oh oi oj nk b">encoded_data</code>下添加<code class="fe oh oi oj nk b">load_args</code>和<code class="fe oh oi oj nk b">save_args</code>。</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="6609" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">请注意，上述配置相当于:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mr ms l"/></div></figure><h2 id="8c26" class="no kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">负载参数</h2><p id="cf51" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><code class="fe oh oi oj nk b">src/base</code>内的所有参数也可以通过<code class="fe oh oi oj nk b">context.params</code>轻松加载。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi op"><img src="../Images/ae35d810d1b03aebca10fa4904843b51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*ttmTCv0MGHA1t0kEPPd8lg.png"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><h2 id="af40" class="no kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">运行管道</h2><p id="e81e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">有时，您可能想要试验新的Python函数，并在笔记本中观察它们的输出。幸运的是，Kedro允许您在笔记本内部运行一个管道:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="7617" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">为了快速测试，您还可以将Jupyter笔记本中的功能转换成Kedro节点。</p><h1 id="1bbb" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">可视化您的管道</h1><p id="76c1" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果您对管道的结构感到困惑，可以使用kedro-viz可视化整个管道。从安装kedro-viz开始:</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="7b0f" class="no kj it nk b gy np nq l nr ns">pip install kedro-viz</span></pre><p id="690f" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">然后键入:</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="f6f0" class="no kj it nk b gy np nq l nr ns">$ kedro viz</span></pre><p id="0203" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">…可视化您的管道。一个网站将在您的浏览器中自动打开。您应该会看到类似下面的内容:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi oq"><img src="../Images/6712ec360e1569ce8575f4d79ef8159c.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/format:webp/1*di9IgvovdIvOBLEXRYI0bA.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><p id="9dee" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">可视化捕捉数据集和节点之间的关系。单击一个节点将为您提供关于该节点的更多信息，如其参数、输入、输出、文件路径和代码。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi or"><img src="../Images/0ff04bb55ff7e3eef4cb31ab8fb8d60e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*tVtcT29B6jmRDu9UQITe8A.gif"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者GIF</p></figure><h1 id="a23b" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">为项目创建文档</h1><p id="eea2" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">记录您的项目使您的团队更容易理解您的项目以及如何使用您的代码。Kedro使您可以轻松地基于项目的代码结构创建文档，并包含代码中定义的任何文档字符串。</p><p id="fcdc" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">要为您的项目创建文档，请键入:</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="74e5" class="no kj it nk b gy np nq l nr ns">$ kedro build-docs</span></pre><p id="e38a" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">并且您的项目的文档将会在<code class="fe oh oi oj nk b">docs/build/html</code>下自动创建！您可以通过打开<code class="fe oh oi oj nk b">docs/build/html/index.html</code>或运行以下命令来浏览文档:</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="2276" class="no kj it nk b gy np nq l nr ns">$ kedro build-docs --open</span></pre><p id="30a4" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">…在构建后自动打开文档。</p><p id="bdb3" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">您的文档应该类似于下图:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi os"><img src="../Images/17f48a8f1947b299a41b646bdeb6fda3.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*gLi9bYhry1PdhNylXzFwDw.png"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi gj"><img src="../Images/71ca4cd8d0cab4aa71d5070b282ef757.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pUD92LdBy9ArMEMmgmMxOw.png"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">作者图片</p></figure><h1 id="a1f2" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">结论</h1><p id="61eb" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">恭喜你！您刚刚学习了如何使用Kedro创建可重复和可维护的数据科学项目。学习Kedro可能需要一点时间，但是一旦用Kedro建立了数据科学，您会发现维护和更新您的项目不再那么困难。</p><p id="a3d4" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">我希望这篇文章能给你在现有或未来的数据科学项目中使用Kedro的动力。</p><p id="ebe7" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">本文中演示项目的源代码可以在这里找到:</p><div class="ot ou gp gr ov ow"><a href="https://github.com/khuyentran1401/kedro_demo" rel="noopener  ugc nofollow" target="_blank"><div class="ox ab fo"><div class="oy ab oz cl cj pa"><h2 class="bd iu gy z fp pb fr fs pc fu fw is bi translated">GitHub-khuyentran 1401/kedro _ demo:一个使用ked ro的数据科学项目</h2><div class="pd l"><h3 class="bd b gy z fp pb fr fs pc fu fw dk translated">这是您的新Kedro项目，它是使用Kedro 0.17.4生成的。看一下Kedro文档以获得…</h3></div><div class="pe l"><p class="bd b dl z fp pb fr fs pc fu fw dk translated">github.com</p></div></div><div class="pf l"><div class="pg l ph pi pj pf pk mg ow"/></div></div></a></div></div><div class="ab cl pl pm hx pn" role="separator"><span class="po bw bk pp pq pr"/><span class="po bw bk pp pq pr"/><span class="po bw bk pp pq"/></div><div class="im in io ip iq"><p id="4096" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的算法和数据科学工具。你可以通过<a class="ae mu" href="https://www.linkedin.com/in/khuyen-tran-1ab926151/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae mu" href="https://twitter.com/KhuyenTran16" rel="noopener ugc nofollow" target="_blank"> Twitter </a>与我联系。</p><p id="3465" class="pw-post-body-paragraph la lb it lc b ld mm ju lf lg mn jx li lj mo ll lm ln mp lp lq lr mq lt lu lv im bi translated">如果你想查看我写的所有文章的代码，请点击这里。在Medium上关注我，了解我的最新数据科学文章，例如:</p><div class="ot ou gp gr ov ow"><a rel="noopener follow" target="_blank" href="/introduction-to-schema-a-python-libary-to-validate-your-data-c6d99e06d56a"><div class="ox ab fo"><div class="oy ab oz cl cj pa"><h2 class="bd iu gy z fp pb fr fs pc fu fw is bi translated">模式介绍:验证数据的Python库</h2><div class="pd l"><h3 class="bd b gy z fp pb fr fs pc fu fw dk translated">验证您的数据变得更加复杂！</h3></div><div class="pe l"><p class="bd b dl z fp pb fr fs pc fu fw dk translated">towardsdatascience.com</p></div></div><div class="pf l"><div class="ps l ph pi pj pf pk mg ow"/></div></div></a></div><div class="ot ou gp gr ov ow"><a rel="noopener follow" target="_blank" href="/introduction-to-dvc-data-version-control-tool-for-machine-learning-projects-7cb49c229fe0"><div class="ox ab fo"><div class="oy ab oz cl cj pa"><h2 class="bd iu gy z fp pb fr fs pc fu fw is bi translated">DVC介绍:机器学习项目的数据版本控制工具</h2><div class="pd l"><h3 class="bd b gy z fp pb fr fs pc fu fw dk translated">就像Git一样，但是有数据！</h3></div><div class="pe l"><p class="bd b dl z fp pb fr fs pc fu fw dk translated">towardsdatascience.com</p></div></div><div class="pf l"><div class="pt l ph pi pj pf pk mg ow"/></div></div></a></div><div class="ot ou gp gr ov ow"><a rel="noopener follow" target="_blank" href="/pytest-for-data-scientists-2990319e55e6"><div class="ox ab fo"><div class="oy ab oz cl cj pa"><h2 class="bd iu gy z fp pb fr fs pc fu fw is bi translated">数据科学家Pytest</h2><div class="pd l"><h3 class="bd b gy z fp pb fr fs pc fu fw dk translated">适用于您的数据科学项目的Pytest综合指南</h3></div><div class="pe l"><p class="bd b dl z fp pb fr fs pc fu fw dk translated">towardsdatascience.com</p></div></div><div class="pf l"><div class="pu l ph pi pj pf pk mg ow"/></div></div></a></div><div class="ot ou gp gr ov ow"><a rel="noopener follow" target="_blank" href="/introduction-to-weight-biases-track-and-visualize-your-machine-learning-experiments-in-3-lines-9c9553b0f99d"><div class="ox ab fo"><div class="oy ab oz cl cj pa"><h2 class="bd iu gy z fp pb fr fs pc fu fw is bi translated">权重和偏差介绍:用3条线跟踪和可视化你的机器学习实验…</h2><div class="pd l"><h3 class="bd b gy z fp pb fr fs pc fu fw dk translated">无缝比较不同的实验，并使用Python重现您的机器学习实验</h3></div><div class="pe l"><p class="bd b dl z fp pb fr fs pc fu fw dk translated">towardsdatascience.com</p></div></div><div class="pf l"><div class="pv l ph pi pj pf pk mg ow"/></div></div></a></div></div></div>    
</body>
</html>