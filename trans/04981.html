<html>
<head>
<title>A DAX drama in 3 acts with two time dimensions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一部有两个时间维度的三幕达克斯戏剧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-dax-drama-in-3-acts-with-two-time-dimensions-aa65abbf5f41?source=collection_archive---------12-----------------------#2021-05-01">https://towardsdatascience.com/a-dax-drama-in-3-acts-with-two-time-dimensions-aa65abbf5f41?source=collection_archive---------12-----------------------#2021-05-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="25c8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我的一个客户提出了一个看起来相对容易的请求，但我花了三天时间和很多精力去解决。我重新学习了一些关于达克斯的课程，我邀请你跟随我的三幕剧来解决问题。</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/73679e2c44aa0d0b8154be9b7304118a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EUtUc9XkbvjI3oRM"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae kz" href="https://unsplash.com/@enginakyurt?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> engin akyurt </a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="f7d2" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">搭建舞台</h1><p id="165b" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">我的客户每天将销售文档的所有元数据加载到他的数据仓库数据库的快照表中。从每月的第一天到最后一天，每天都会覆盖快照数据。随着新月份的开始，新的月度快照开始，上个月不再更改。每个快照都有过去十年中创建的文档的元数据。这个表非常大，有超过2 . 2亿行，需要将近11 GB的RAM，并且还在增长。</p><p id="b5c3" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">因为他们使用SQL Server Analysis Services (SSAS)将数据存储在表格模型中，所以我可以在Vertipaq Analyzer中向您展示该表的大小:</p><p id="f2de" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">有些数据是引用的。这些报价是企业要求的报告中有趣的部分。</p><p id="0097" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">他们需要查看一段时间内的报价计数和报价销售额，并且希望将这两个数字与12个月前的结果进行比较。</p><p id="fb57" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">最大的问题是，需要从12个月前的快照中检索12个月前创建的报价数据。</p><p id="da96" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">用户应该能够用Power BI中的限幅器定义任意时间窗口。该报告必须使用相应的快照，自动调整12个月前相同时间窗口的检索。</p><p id="a633" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">很简单，不是吗？</p><p id="a770" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">还有一点复杂的是，他们想要区分公开报价、成功报价和失败报价。他们使用“提供状态”维度来区分每种状态。</p><p id="2acf" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">现在，让我们拉开帷幕。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi mt"><img src="../Images/090095138708dbce846681bb040b00f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jENs5qcNG0W8H-bQ"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@gwenking?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">格温·金</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="faa1" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">第一个动作—检索当前期间</h1><p id="b772" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">您可能已经注意到，我需要处理两个日期维度:</p><ul class=""><li id="35e4" class="mu mv it lu b lv mo ly mp mb mw mf mx mj my mn mz na nb nc bi translated">在SSAS模型中，快照日期被命名为“时间”</li><li id="70aa" class="mu mv it lu b lv nd ly ne mb nf mf ng mj nh mn mz na nb nc bi translated">文档创建日期在SSAS模型中命名为“创建时间”<br/>我在这个表的日期列上使用了一个切片器，允许用户过滤报告中报价的创建日期</li></ul><p id="0d2a" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我现在不想透露多个日期维度的利弊。这是我需要面对的事实，我无法改变。</p><p id="e014" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">第一步是找到实际时间窗口的正确快照:</p><pre class="kk kl km kn gt ni nj nk nl aw nm bi"><span id="098a" class="nn lb it nj b gy no np l nq nr">Last Snapshot by Creation Date =</span><span id="10c5" class="nn lb it nj b gy ns np l nq nr">    VAR LastCreationDate =<br/>        MAX(‘Time Creation’[Date])</span><span id="1506" class="nn lb it nj b gy ns np l nq nr">    VAR GetSnapshot =<br/>        CALCULATE(<br/>            LASTNONBLANK(<br/>                ‘Document’[Snapshot Date]<br/>                ,SUM ( Document[SalesAmountNet] ) )<br/>            ,’Document’[Snapshot Date] &lt;= LastCreationDate<br/>        )</span><span id="a3e4" class="nn lb it nj b gy ns np l nq nr">RETURN<br/>    GetSnapshot</span></pre><p id="ba4b" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我将这个公式存储在Power BI文件的一个中间度量中，因为我在其他度量中需要这个值。</p><p id="17f3" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">哦，我忘了说，所有需要的度量都是独一无二的，所以我直接在PowerBI文件中创建它们，它使用一个到SSAS模型的活动连接。</p><p id="bb92" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">获取韩元报价的方法如下:</p><pre class="kk kl km kn gt ni nj nk nl aw nm bi"><span id="7a85" class="nn lb it nj b gy no np l nq nr">Quotes won =</span><span id="bae9" class="nn lb it nj b gy ns np l nq nr">CALCULATE (<br/>    SUM ( Document[SalesAmountNet] )<br/>    ,FILTER ( ‘Offer Status’, ‘Offer Status’[Offer Status Number] IN {“2”, “11”, “13” } )<br/>    ,FILTER(<br/>        VALUES(‘Document’[Snapshot Date]),<br/>        ‘Document’[Snapshot Date] = [Last Snapshot by Creation Date]<br/>    )<br/>)</span></pre><p id="6379" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我需要两个进一步的措施来获得开放和丢失的报价。这三种衡量标准的区别仅在于用于过滤数据的报价状态编号列表不同。我还需要另外三个度量来计算引用的数量。所以，我总共需要六个基本度量。</p><p id="4199" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">在这个测量中有一个小故障，这是我在验证结果时发现的。稍后我将向您展示这一点，在看到我如何解决其他问题后，这将更有意义。</p><h1 id="6bc1" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">第二步——找到12个月前的快照</h1><p id="5568" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">计算所选创建日期的前一期是非常简单的。您需要使用<a class="ae kz" href="https://dax.guide/parallelperiod/" rel="noopener ugc nofollow" target="_blank"> PARALLELPERIOD() </a>函数来回溯12个月:</p><pre class="kk kl km kn gt ni nj nk nl aw nm bi"><span id="51d8" class="nn lb it nj b gy no np l nq nr">VAR LastCreationDatePY =<br/>    PARALLELPERIOD(‘Time Creation’[Date], -12, MONTH)</span></pre><p id="251c" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我可以使用这种机制来获取匹配的快照。</p><p id="1ac8" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">现在戏剧开始了。</p><p id="1eed" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我的第一次尝试是这样的:</p><pre class="kk kl km kn gt ni nj nk nl aw nm bi"><span id="e2c7" class="nn lb it nj b gy no np l nq nr">Last Snapshot by Creation Date (PY) =</span><span id="0013" class="nn lb it nj b gy ns np l nq nr">    VAR MaxLastCreationDatePY = EOMONTH(<br/>                                LASTDATE(‘Time Creation’[Date]), -6)</span><span id="3b8a" class="nn lb it nj b gy ns np l nq nr">    VAR GetSnapshot =<br/>        CALCULATE(<br/>            MAX(<br/>                ‘Document’[Snapshot Date])<br/>                ,’Document’[Snapshot Date] &lt;= MaxLastCreationDatePY<br/>                ,ALL(‘Document’[Snapshot Date])<br/>            )</span><span id="e948" class="nn lb it nj b gy ns np l nq nr">RETURN<br/>    GetSnapshot</span></pre><p id="60c8" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我的理由是:我喜欢过滤文档表上的快照日期。因此，我从这个列中移除过滤器并更换过滤器。</p><p id="7c04" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">令人惊讶的是我总是得到一个空的结果。为什么？</p><p id="ae09" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我花了一些时间，在一位同事的帮助下，才意识到在切片器的“时间创建”表上有一个过滤器。我需要用ALL(时间创建)从那里移除过滤器来操作过滤器。</p><p id="ace8" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">工作DAX公式如下:</p><pre class="kk kl km kn gt ni nj nk nl aw nm bi"><span id="1207" class="nn lb it nj b gy no np l nq nr">Last Snapshot by Creation Date (PY) =</span><span id="297d" class="nn lb it nj b gy ns np l nq nr">    VAR MaxLastCreationDatePY = EOMONTH(<br/>                               LASTDATE(‘Time Creation’[Date]), -12)</span><span id="cde8" class="nn lb it nj b gy ns np l nq nr">    VAR GetSnapshot =<br/>        CALCULATE(<br/>            MAX(<br/>               ‘Document’[Snapshot Date])<br/>            ,’Document’[Snapshot Date] &lt;= MaxLastCreationDatePY<br/>            ,ALL(‘Time’)<br/>            ,ALL(‘Time Creation’)<br/>        )</span><span id="99ec" class="nn lb it nj b gy ns np l nq nr">RETURN<br/>    GetSnapshot</span></pre><p id="7d33" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我需要全部(“时间”)，因为报告中的“时间”表也有一些外部影响。</p><p id="f6f6" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated"><strong class="lu iu">第一课:</strong>不要忘记查看整张图片，并在正确的表格和列上操作过滤器。</p><h1 id="2f96" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">第三步—使用正确的时间窗口计算正确快照上的数量</h1><p id="d411" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">现在，我需要将正确的快照与文档创建日期的前一时期的时间窗口结合起来。</p><p id="2573" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我一步一步地创建度量，直到得到有意义的结果。</p><p id="3ca3" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">这是我的第一个工作措施:</p><pre class="kk kl km kn gt ni nj nk nl aw nm bi"><span id="e1c0" class="nn lb it nj b gy no np l nq nr">Quotes won (PY) =</span><span id="b7cc" class="nn lb it nj b gy ns np l nq nr">    VAR LastCreationDatesPY =<br/>        PARALLELPERIOD(‘Time Creation’[Date], -12, MONTH)</span><span id="ce37" class="nn lb it nj b gy ns np l nq nr">    VAR Result =<br/>        CALCULATE (<br/>            SUM ( Document[SalesAmountNet] )<br/>            ,FILTER(‘Offer Status’,<br/>            ‘Offer Status’[Offer Status Number] IN {“2”, “11”, “13” }<br/>            )<br/>            ,ALL ( ‘Time Creation’)<br/>            ,LastCreationDatesPY<br/>        )</span><span id="4f30" class="nn lb it nj b gy ns np l nq nr">RETURN<br/>    CALCULATE(<br/>        Result<br/>        ,FILTER(<br/>            VALUES(‘Document’[Snapshot Date])<br/>            ,’Document’[Snapshot Date] = [Last Snapshot by Creation Date (PY)]<br/>        )<br/>    )</span></pre><p id="c413" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我从这个措施中得到了一些有意义的结果，我认为我满足了要求。</p><p id="420c" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">但是，当我开始用来自源数据库的数据验证结果时，我注意到了显著的差异。有些事情还不太对劲。</p><p id="7444" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我回到了绘图板。</p><p id="94c2" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">经过几个小时的尝试和失败，我停下来休息了一会儿。</p><p id="4fc4" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated"><strong class="lu iu">第二课:</strong>如果你陷入困境，走开，做些不同的事情</p><p id="290c" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">休息过后，我重新开始，尝试了一种完全不同的方法。</p><p id="a8d7" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我使用<a class="ae kz" href="https://daxstudio.org/" rel="noopener ugc nofollow" target="_blank"> DAX Studio </a>编写了一个DAX查询并获得中间结果，我可以用源数据库验证这些结果。</p><p id="acae" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated"><strong class="lu iu">第三课:</strong>走一步算一步。不要试图做一个巨大的飞跃，并期望一切都会顺利。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nt"><img src="../Images/252dbcf320b7f27f2bf4f73009c3ebc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OHFb0kv-TM2tht7d"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@historyhd?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上高清拍摄的历史</a></p></figure><p id="3128" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">然后我意识到这个查询产生了正确的结果，我可以在DAX度量中使用这个查询。</p><p id="427c" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">这种方法是正确的选择，最终措施如下:</p><pre class="kk kl km kn gt ni nj nk nl aw nm bi"><span id="bbac" class="nn lb it nj b gy no np l nq nr">Quotes won (PY) =</span><span id="822f" class="nn lb it nj b gy ns np l nq nr">    VAR LastCreationDatesPY =<br/>        PARALLELPERIOD(‘Time Creation’[Date], -12, MONTH)</span><span id="d361" class="nn lb it nj b gy ns np l nq nr">RETURN<br/>    SUMMARIZE(<br/>        CALCULATETABLE(<br/>            Document<br/>            ,ALL(‘Time’)<br/>            ,FILTER(<br/>                VALUES(‘Time’[Date])<br/>            ,’Time’[Date] = [Last Snapshot by Creation Date (PY)]<br/>        )<br/>        ,FILTER(‘Offer Status’,<br/>            ‘Offer Status’[Offer Status Number] IN {“2”, “11”, “13” }<br/>            )<br/>        ,ALL(‘Time Creation’)<br/>        ,LastCreationDatesPY<br/>        )<br/>    ,”Sum sales”, SUM ( Document[SalesAmountNet] )<br/>    )</span></pre><p id="9f3d" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">这项措施中有一些有趣的部分:</p><ul class=""><li id="6eb9" class="mu mv it lu b lv mo ly mp mb mw mf mx mj my mn mz na nb nc bi translated">按“时间”[日期]过滤:我需要过滤时间维度表上的数据，以获得正确的快照。如前所述，第一幕的小节出现了小故障。这里的诀窍是过滤“时间”[日期]，而不是“文件”[快照日期]。<br/>过滤维度表总是比事实表更好的方法。它给了你更多的使用度量的灵活性，在我的例子中，它产生了正确的结果。</li><li id="956e" class="mu mv it lu b lv nd ly ne mb nf mf ng mj nh mn mz na nb nc bi translated">对报价状态和时间创建的过滤也是如此。我只过滤维度表。</li><li id="50f9" class="mu mv it lu b lv nd ly ne mb nf mf ng mj nh mn mz na nb nc bi translated">不使用变量。<br/>这种方法是最大的游戏规则改变者。<br/>使用变量时应用过滤器是有区别的。简单地说，但不完全准确，过滤器不是“向后”应用于变量。当您需要在DAX度量中应用多个筛选器时，必须仔细测试筛选器是否按预期应用。你可以在这里阅读更多关于这个问题的内容:<a class="ae kz" href="https://www.sqlbi.com/articles/variables-in-dax/" rel="noopener ugc nofollow" target="_blank">DAX(SQLBI)中的变量</a></li></ul><p id="b3a0" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">第四课:记住基础知识。它们仍然适用，不管你认为你知道多少。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nu"><img src="../Images/a4b5d0c3e8bff480a34bbbd5db69e715.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jybYrwAVEH0ct4tt"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@jeshoots?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">JESHOOTS.COM</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="18df" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">顺便说一句。第一幕的正确步骤如下:</p><pre class="kk kl km kn gt ni nj nk nl aw nm bi"><span id="85c9" class="nn lb it nj b gy no np l nq nr">Quotes won =</span><span id="d552" class="nn lb it nj b gy ns np l nq nr">    CALCULATE (<br/>        [Sales (Document)]<br/>        ,FILTER ( ‘Offer Status’, ‘Offer Status’[Offer Status Number] IN {“2”, “11”, “13” } )<br/>        ,FILTER(<br/>            VALUES(‘Time’[Date]),<br/>            ‘Time’[Date] = [Last Snapshot by Creation Date]<br/>            )<br/>        )</span></pre><h1 id="05a6" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">收场白</h1><p id="11c6" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">除了第一课，我不再重复上面提到的四课。</p><p id="8b8b" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">如果您尽可能过滤维度表，那将是最好的。如果你不知道下面的维度建模是如何工作的，你可以找到一些有用的链接。</p><p id="80a2" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">通常，我更喜欢只有一个日期表；正如我的文章中所讨论的，用扩展的日期表改进你的报告的3种方法。</p><p id="4a82" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我怀疑这个特定的案例可能更难用一个中央日期表来解决。我没有用另一个型号试过。所以，我可能错了。</p><p id="d375" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">但是只要想想一个度量中需要的<a class="ae kz" href="https://dax.guide/userelationship/" rel="noopener ugc nofollow" target="_blank">user relationship()</a>调用以及我在变量方面遇到的问题——如果没有必要，我不想尝试一下。</p><p id="9e2e" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">最后但同样重要的是:<br/> <strong class="lu iu">第五课:</strong>对照源数据测试和验证你的结果，直到你知道一切都是正确的。</p><p id="186b" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">了解维度建模的链接:</p><p id="27cc" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated"><a class="ae kz" href="https://www.youtube.com/watch?v=kiVXI7zjSzY" rel="noopener ugc nofollow" target="_blank">数据建模最佳实践—第1部分Power BI和分析服务(YouTube) </a></p><p id="87a4" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated"><a class="ae kz" href="https://dwgeek.com/guide-dimensional-modeling.html/" rel="noopener ugc nofollow" target="_blank">维度数据建模逐步指南</a></p><p id="9ee6" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated"><a class="ae kz" href="http://www.databaseanswers.org/downloads/Dimensional_Modelling_by_Example.pdf" rel="noopener ugc nofollow" target="_blank">尺寸建模示例(PDF) </a></p><p id="776a" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated"><a class="ae kz" href="https://www.kimballgroup.com/data-warehouse-business-intelligence-resources/kimball-techniques/dimensional-modeling-techniques/" rel="noopener ugc nofollow" target="_blank">维度建模技术(金博尔集团)</a></p></div></div>    
</body>
</html>