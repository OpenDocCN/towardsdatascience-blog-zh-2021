<html>
<head>
<title>From igraph to visNetwork</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从igraph到visNetwork</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/from-igraph-to-visnetwork-7bc5a76fdeec?source=collection_archive---------31-----------------------#2021-05-25">https://towardsdatascience.com/from-igraph-to-visnetwork-7bc5a76fdeec?source=collection_archive---------31-----------------------#2021-05-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6d90" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让您的网络焕然一新</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a949e792a963291755b8aeea5bb94f27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wKqXbOLqISoFSnYNkrwiOA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由克里斯蒂安·休姆在Unsplash上拍摄</p></figure><p id="92fd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">说到网络分析，<strong class="kx ir"> igraph </strong>是一个拥有大量<a class="ae lr" href="https://igraph.org/r/#docs" rel="noopener ugc nofollow" target="_blank">文档</a>的包中之兽。如果你在R语言中做网络分析，你可能至少听说过它。使用<strong class="kx ir"> igraph </strong>，你可以创建和比较确定性或随机网络，计算中心性度量，并在网络中找到社区。你甚至可以在一个有<em class="ls">百万</em>个节点和边的网络上实现图形算法！</p><p id="087e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">甚至在可视化方面，igraph也有丰富的选项。首先，有您期望的绘图的基本功能:改变网络的大小、形状、标签和布局。但是，您甚至可以通过使用tkplot()创建交互式图形来超越基础——尽管不建议将它们用于大型图形。最后，使用<strong class="kx ir"> rgl </strong>包，您可以用OpenGL构建和可视化3D网络。</p><p id="cc05" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然而，即使拥有所有网络可视化功能<strong class="kx ir"> igraph </strong>所能提供的，我仍然发现自己被<strong class="kx ir"> visNetwork </strong>所吸引，即使是最基本的绘图。默认情况下，<strong class="kx ir"> visNetwork </strong>创建与RStudio Viewer、R Notebooks和<strong class="kx ir"> shiny </strong>兼容的漂亮的交互式网络。毫无疑问，这是我进行网络分析的首选网络可视化软件包。只需很少的代码，您就可以快速创建一个能够突出显示所选节点及其邻居的完美网络。这对于网络分析非常有用，但对于制作用于发布的干净、专业外观的网络也非常有用。</p><p id="8803" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本文中，我们将看看如何用<strong class="kx ir"> visNetwork </strong>绘制一个<strong class="kx ir"> igraph </strong>对象。在添加高亮显示功能之前，我们将从默认绘图开始。最后，我们将看看如何改变节点的颜色以及如何使用不同的布局算法。</p><h1 id="4d0e" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">快速演示</h1><p id="f394" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">为了说明将<strong class="kx ir"> visNetwork </strong>与<strong class="kx ir"> igraph </strong>对象一起使用的便利性，我们将从<strong class="kx ir"> igraph </strong>包中加载非线性图形。它由9个子图组成，有50个节点和12条边。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="95de" class="mv lu iq mr b gy mw mx l my mz"># Load packages. <br/>library(igraph) <br/>library(visNetwork) </span><span id="5f3e" class="mv lu iq mr b gy na mx l my mz"># Load the nonline graph. <br/>ig &lt;- graph.famous("Nonline") </span><span id="2d4f" class="mv lu iq mr b gy na mx l my mz"># Plot with igraph. <br/>plot(ig)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/398f920bf9518e5f73acc8ed83690300.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*q3i-4HPEhCQiYPo5.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片由作者提供；r输出</p></figure><p id="8124" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如你所看到的，来自<strong class="kx ir"> igraph </strong>的默认图清楚地显示了9个子图。然而，很难看到每个子图之间的关系。让我们将它与使用<strong class="kx ir"> visNetwork </strong>的默认绘图进行比较。我们将使用visIgraph()函数显示带有<strong class="kx ir"> visNetwork </strong>的<strong class="kx ir"> igraph </strong>对象。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="c891" class="mv lu iq mr b gy mw mx l my mz"># Plot igraph object with visNetwork. <br/>visIgraph(ig)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/a06c5ee95f3b64632ef16a7260175482.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*u_I1ytWOk0YL69l1.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片由作者提供；r输出</p></figure><p id="264e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">啊，是的！现在清楚多了！我们不仅可以看到不同的子图，还可以看到每个子图中的关系。现在，如果我们想要选择一个特定的节点并突出显示它的邻居，会怎么样呢？幸运的是，这相当简单！</p><h1 id="0226" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">用户友好的节点选择</h1><p id="a467" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">当您对特定节点或一小组节点感兴趣时，能够通过id选择特定节点非常有用。或者，您可能希望通过单击网络来快速识别似乎是中心节点的节点。不管怎样，<strong class="kx ir"> visNetwork </strong>让用户友好的节点选择变得轻松。</p><p id="c6d2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，我们将使用管道操作符(%&gt;%)来组合其他的<strong class="kx ir"> visNetwork </strong>函数，这些函数允许我们为网络指定额外的修改。对于一般的网络选项，我们将使用visOptions()函数。为了通过id突出显示特定的节点，我们将设置nodesIdSelection = TRUE。为了突出显示所选节点的邻居，我们将设置highlightNearest = TRUE。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="bdab" class="mv lu iq mr b gy mw mx l my mz"># Highlight selected node and its neighbors. <br/>visIgraph(ig) %&gt;% visOptions(nodesIdSelection = TRUE,  highlightNearest = TRUE)</span></pre><p id="8c54" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">完整交互体验，下载R笔记本:</strong> <a class="ae lr" href="https://github.com/thatdarndata/BlogPosts/blob/main/igraph2visNetwork/igraph2visNetwork.Rmd" rel="noopener ugc nofollow" target="_blank"> igraph2visNetwork。Rmd </a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/5f5ff5537e750f8ebaae40ed07b91b03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XGCiTEKPXabpJB9y.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片由作者提供；r输出</p></figure><h1 id="130b" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">新刷的一层油漆</h1><p id="187f" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">就我个人而言，我觉得visNetwork的默认配色方案相当令人满意。尽管如此，使用visNodes()函数可以很容易地改变网络的颜色。我们将为color参数指定一个十六进制字符串，但是您也可以使用内置的颜色名称或软件包中的调色板。最后，为了更有趣，我们将设置shadow = TRUE来增加节点的深度。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="4ddc" class="mv lu iq mr b gy mw mx l my mz"># Change the color and add a shadow. <br/>visIgraph(ig) %&gt;% <br/>visOptions(nodesIdSelection = TRUE, highlightNearest = TRUE) %&gt;% <br/>visNodes(color = "#6CAE97", shadow = TRUE)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/fc75d6c0bc83114e45149df6653c9466.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ajzfTKyEYSaCSvWR.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片由作者提供；r输出</p></figure><h1 id="43e5" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">使用igraph布局算法</h1><p id="9822" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">理想情况下，网络应该既美观又易于理解。不幸的是，根据节点的位置和分布情况，完全相同的网络可能看起来非常不同。一些布局会使解释更容易，而另一些，尤其是那些边缘交叉的布局，会更难。最佳布局取决于网络的结构。在某些情况下，例如分层网络，最佳布局是预先知道的。在其他情况下，最佳布局是未知的，您可能想尝试不同的布局算法，看看哪一个是最好的。</p><p id="873a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了了解我们如何比较不同的布局算法，让我们看看如何使用来自<strong class="kx ir"> igraph </strong>和<strong class="kx ir"> visNetwork </strong>的图形布局选项。对于这个例子，我们将使用graph.famous()函数中的“Krackhardt kite”图。为了使用<strong class="kx ir"> igraph </strong>布局选项，我们将使用来自<strong class="kx ir"> visNetwork </strong>的visIgraphLayout()函数，并为布局参数提供来自<strong class="kx ir"> igraph </strong>的布局选项。我们从“布局_好看”开始。来自<strong class="kx ir"> igraph </strong>的layout_nicely()函数将尝试为给定网络找到最佳布局算法。要查看其他可用的布局选项，可以使用？布局_好看。其他布局选项可以在文档的底部找到。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="f84e" class="mv lu iq mr b gy mw mx l my mz"># Load a fully connected graph. <br/>ig2 &lt;- graph.famous("Krackhardt kite") </span><span id="83a0" class="mv lu iq mr b gy na mx l my mz"># Plot graph with layout_nicely. <br/>visIgraph(ig2) %&gt;% visIgraphLayout(layout = "layout_nicely")</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/ab77b2ea63983488104f42fc36c45061.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KCMOpNbaAYEXHJRZ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片由作者提供；r输出</p></figure><p id="6c35" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在我们来看看如果用“layout_as_star”的话网络是什么样子的。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="0c46" class="mv lu iq mr b gy mw mx l my mz"># Plot graph with layout_as_star. <br/>visIgraph(ig2) %&gt;% visIgraphLayout(layout = "layout_as_star")</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/25d97809569a86b82702d5c98ad30126.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5y3wxVPPwh9QAHVF.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片由作者提供；r输出</p></figure><p id="a001" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">哇！可能需要一段时间才能从上面识别出该网络是同一个网络。网络的布局会极大地影响网络解释的速度和准确性。这就是为什么有几个布局算法可用于<strong class="kx ir"> visNetwork </strong>的原因。</p><h1 id="c86b" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">超越基础</h1><p id="a6c0" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">希望这足以让你开始使用<strong class="kx ir"> visNetwork </strong>和<strong class="kx ir"> igraph </strong>。然而，要将igraph的精华与vis network(T21)的精华融合在一起，还有很多事情可以做。例如，我们可以突出显示具有高中心性分数的节点，标记最短路径，或者按集团或社区给网络着色。如果你对涵盖这些主题的教程感兴趣，请留下评论！</p></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><h2 id="f353" class="mv lu iq bd lv no np dn lz nq nr dp md le ns nt mf li nu nv mh lm nw nx mj ny bi translated">引文</h2><p id="a3f6" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">阿德勒博士、默多克博士等人(2021年)。使用OpenGL的rgl: 3D <br/>可视化。r包版本0.105.13。<br/><a class="ae lr" href="https://CRAN.R-project.org/package=rgl" rel="noopener ugc nofollow" target="_blank">https://CRAN.R-project.org/package=rgl</a></p><p id="cf2c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Almende B.V .，Benoit Thieurmel和Titouan Robert (2019)。<br/> visNetwork:使用‘vis . js’库的网络可视化。r包<br/>版本2.0.9。<a class="ae lr" href="https://CRAN.R-project.org/package=visNetwork" rel="noopener ugc nofollow" target="_blank">https://CRAN.R-project.org/package=visNetwork</a></p><p id="2016" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Csardi G，Nepusz T:用于复杂网络研究的igraph软件包，国际期刊，复杂系统1695。2006.<br/><a class="ae lr" href="https://igraph.org" rel="noopener ugc nofollow" target="_blank">https://igraph.org</a></p><p id="beba" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">r核心团队(2020)。r:用于统计计算的语言和环境。奥地利维也纳统计计算基金会。网址<br/><a class="ae lr" href="https://www.R-project.org/" rel="noopener ugc nofollow" target="_blank">https://www.R-project.org/</a>。</p><p id="a114" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">r版本4 . 0 . 2(2020–06–22)<br/>平台:x86_64-apple-darwin17.0 (64位)<br/>运行于:macOS Catalina 10.15.7</p></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><p id="c318" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="ls">原载于2021年5月25日https://thatdarndata.com</em><em class="ls">的</em> <a class="ae lr" href="https://thatdarndata.com/from-igraph-to-visnetwork-makeover/" rel="noopener ugc nofollow" target="_blank"> <em class="ls">。</em></a></p></div></div>    
</body>
</html>