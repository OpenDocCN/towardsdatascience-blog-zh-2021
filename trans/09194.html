<html>
<head>
<title>Simulating Brewing Operations with SimPy in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python中的SimPy模拟酿造操作</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/simulating-brewing-operations-with-simpy-in-python-5b67da3783aa?source=collection_archive---------13-----------------------#2021-08-25">https://towardsdatascience.com/simulating-brewing-operations-with-simpy-in-python-5b67da3783aa?source=collection_archive---------13-----------------------#2021-08-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="67de" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">python中的离散事件模拟教程</h2></div></div><div class="ab cl ki kj hx kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="im in io ip iq"><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/52ff1785ed4675d66adf0af36207a339.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hWDQJzrDXdzgvhR5"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">罗伯特·北原惠子·桑塔纳在<a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl ki kj hx kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="im in io ip iq"><p id="12a2" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">工业工程师使用离散事件模拟来评估生产车间的替代方案，但模拟还有更多用途。有了Python的<a class="ae lf" href="https://simpy.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> SimPy </a>包——也有其他语言版本——我们可以模拟个人项目，而无需昂贵的软件许可。SimPy的<em class="mc"> ReadtheDocs </em>文档很好；我建议从头到尾多看一遍。但是这篇文章是为那些喜欢额外的学习例子的人准备的。</p></div><div class="ab cl ki kj hx kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="im in io ip iq"><h1 id="85e2" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">SimPy简介及示例</h1><p id="266d" class="pw-post-body-paragraph lg lh it li b lj mv ju ll lm mw jx lo lp mx lr ls lt my lv lw lx mz lz ma mb im bi translated">SimPy使用带有yield而不是return的生成器函数，以便存储模拟中的最新步骤。关于生成器函数的介绍，我推荐<a class="ae lf" href="https://www.youtube.com/watch?v=0osGrraoCX0" rel="noopener ugc nofollow" target="_blank">凯文·康拉德的youtube教程</a>。</p><p id="effc" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">这个初始模型利用SimPy框架来启动酿造过程，然后清洗酿造罐。后续的模型会更复杂。</p><p id="0deb" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">在导入simpy之前，如果您还没有安装SimPy，您可能需要安装它。<a class="ae lf" href="https://simpy.readthedocs.io/en/latest/simpy_intro/installation.html" rel="noopener ugc nofollow" target="_blank">要安装SimPy，您可以使用pip或SimPy文档中编写的替代方法。</a></p><pre class="kq kr ks kt gt na nb nc nd aw ne bi"><span id="8504" class="nf me it nb b gy ng nh l ni nj">pip install simpy</span></pre><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="aa71" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">输出:</p><pre class="kq kr ks kt gt na nb nc nd aw ne bi"><span id="ca61" class="nf me it nb b gy ng nh l ni nj">Starting to brew a lager at time 0<br/>Finished brewing the lager at time 30<br/>Starting to brew a lager at time 35<br/>Finished brewing the lager at time 65<br/>Starting to brew a lager at time 70<br/>Finished brewing the lager at time 100</span></pre><p id="8773" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">在这种情况下，模型在时间单位达到101时终止。一旦处理所有酿造过程的循环终止，下一个模型将终止。</p></div><div class="ab cl ki kj hx kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="im in io ip iq"><h1 id="bbcb" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">在SimPy中使用资源和建模流程</h1><p id="17db" class="pw-post-body-paragraph lg lh it li b lj mv ju ll lm mw jx lo lp mx lr ls lt my lv lw lx mz lz ma mb im bi translated">现在我有3个同样大小的啤酒缸。我仍然在酿造淡啤酒，但是我想在第0、5、11和20天开始一个新罐，如果这些天有可用的罐的话。我在第12-18天休假，所以我不想在那几天开始酝酿过程。</p><p id="d9da" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">在这个模型中，贮藏啤酒的酿造过程时间仍然假定为30天，尽管我意识到酿造过程时间实际上是可变的。我们将在下一个模型中添加处理时间的概率分布。</p><p id="aca6" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">目前，这个模型的焦点是资源的<a class="ae lf" href="https://simpy.readthedocs.io/en/latest/topical_guides/resources.html" rel="noopener ugc nofollow" target="_blank">类型，称为资源(而不是容器资源或商店资源)。</a></p><ul class=""><li id="db2d" class="nm nn it li b lj lk lm ln lp no lt np lx nq mb nr ns nt nu bi translated">这个<em class="mc"> brewery_tanks </em>资源将作为这个模型中的流程。</li><li id="e17f" class="nm nn it li b lj nv lm nw lp nx lt ny lx nz mb nr ns nt nu bi translated">资源被<em class="mc">请求</em>，然后<em class="mc">在它们不再被使用后释放</em>。</li><li id="c193" class="nm nn it li b lj nv lm nw lp nx lt ny lx nz mb nr ns nt nu bi translated">在使用中，资源的<em class="mc">计数</em>将显示有多少资源的容量单位在使用中。</li></ul><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="bd96" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">输出:</p><pre class="kq kr ks kt gt na nb nc nd aw ne bi"><span id="dfa9" class="nf me it nb b gy ng nh l ni nj">Decide to start brewing a lager at time 0<br/>	Number of tanks available: 3<br/>	Started brewing at time 0<br/>	Number of tanks now in use: 1<br/>Decide to start brewing a lager at time 5<br/>	Number of tanks available: 2<br/>	Started brewing at time 5<br/>	Number of tanks now in use: 2<br/>Decide to start brewing a lager at time 11<br/>	Number of tanks available: 1<br/>	Started brewing at time 11<br/>	Number of tanks now in use: 3<br/>Decide to start brewing a lager at time 20<br/>	Number of tanks available: 0<br/>Finished brewing a lager at time 30<br/>Finished brewing a lager at time 35<br/>There are 1 tanks available at time 35<br/>	Started brewing at time 35<br/>	Number of tanks now in use: 3<br/>There are 1 tanks available at time 40<br/>Finished brewing a lager at time 41<br/>There are 2 tanks available at time 46<br/>Finished brewing a lager at time 65<br/>There are 3 tanks available at time 70</span></pre><p id="b52a" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我选择了一个很好的时间去度假，因为当时没有任何可用的坦克。事实上，直到时间35都没有可用的坦克。</p><p id="d416" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">如您所见，仿真模型的输出值得思考。文档中的一个章节叫做<a class="ae lf" href="https://simpy.readthedocs.io/en/latest/topical_guides/monitoring.html" rel="noopener ugc nofollow" target="_blank"> monitoring </a>讨论了保存和监控模型输出的更高级的方法。但是对于这个介绍和许多其他场景，print语句就足够了。</p></div><div class="ab cl ki kj hx kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="im in io ip iq"><h1 id="2075" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">随机模拟</h1><p id="9507" class="pw-post-body-paragraph lg lh it li b lj mv ju ll lm mw jx lo lp mx lr ls lt my lv lw lx mz lz ma mb im bi translated">虽然可以用数学方法计算确定性模拟结果，而不是利用模拟模型，但模拟对于讲述故事和自动化数据处理非常有用。随机模型将为更接近真实情况的建模场景提供更多的见解。</p><p id="ad14" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我阅读了多种描述酿造啤酒的资源，并分享了典型的酿造时间表是4-8周。酵母会做酵母做的事情，但不总是按照你的计划。让我们假设一个均值=6周，标准差=1周的正态分布。一旦啤酒冷却(我们假设这是过程的一部分)，然后我们将<em class="mc">罐</em>或<em class="mc">瓶</em>啤酒并储存在库存中，比率为每个啤酒厂罐100箱。</p><p id="585e" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">为了跟踪库存，这个模型中引入了另一种称为容器的资源。虽然容器类似于资源，因为它们都具有容量参数，但是容器也具有初始的<em class="mc">级别</em>参数，并且容器在给定时间的<em class="mc">级别</em>将揭示容器存储的量。</p><p id="89b5" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">容器的级别可以随着一个<em class="mc"> put </em>而增加，或者随着一个<em class="mc"> get </em>而减少，这实现了与资源不同的建模能力。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="b737" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">输出:</p><pre class="kq kr ks kt gt na nb nc nd aw ne bi"><span id="bce4" class="nf me it nb b gy ng nh l ni nj">Number of tanks available at time 0: 3<br/>Started brewing at time 0 and 1 tanks now in use<br/>Number of tanks available at time 5: 2<br/>Started brewing at time 5 and 2 tanks now in use<br/>Number of tanks available at time 11: 1<br/>Started brewing at time 11 and 3 tanks now in use<br/>Number of tanks available at time 20: 0<br/>Finished brewing a lager at time 38.30356066389249<br/>At time 43.30356066389249 there are now:<br/>	1 tanks available<br/>	100 cases of cans available for sale<br/>Started brewing at time 43.30356066389249 and 3 tanks now in use<br/>Finished brewing a lager at time 44.85515309121678<br/>At time 49.85515309121678 there are now:<br/>	1 tanks available<br/>	200 cases of cans available for sale<br/>Finished brewing a lager at time 53.146254345432425<br/>At time 58.146254345432425 there are now:<br/>	2 tanks available<br/>	300 cases of cans available for sale<br/>Finished brewing a lager at time 85.11565243779629<br/>At time 90.11565243779629 there are now:<br/>	3 tanks available<br/>	400 cases of cans available for sale</span></pre><h1 id="838e" class="md me it bd mf mg oa mi mj mk ob mm mn jz oc ka mp kc od kd mr kf oe kg mt mu bi translated">处理订单</h1><p id="d93c" class="pw-post-body-paragraph lg lh it li b lj mv ju ll lm mw jx lo lp mx lr ls lt my lv lw lx mz lz ma mb im bi translated">现在您已经了解了如何使用两种类型的资源，即资源和容器，下一个模型将分享一种处理订单和销售库存的方法。虽然这是一个处理订单的简单方法，但是更复杂的方法可能需要使用任何简单事件的AllOf。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="2675" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">输出:</p><pre class="kq kr ks kt gt na nb nc nd aw ne bi"><span id="ba3d" class="nf me it nb b gy ng nh l ni nj">Before order processing, cases available: 100<br/>After order of 1, cases available: 99<br/>After order of 10, cases available: 89<br/>After order of 5, cases available: 84<br/>After order processing, cases available: 84</span></pre><p id="56b0" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我希望本教程对你有所帮助。如果你对第二部分啤酒厂模拟有什么建议，或者想在下一个SimPy模型上合作，我很乐意阅读你的想法！</p></div></div>    
</body>
</html>