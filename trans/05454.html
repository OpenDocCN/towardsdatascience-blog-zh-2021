<html>
<head>
<title>Get going with Neo4j and Jupyter Lab through Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Docker了解Neo4j和Jupyter实验室</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/get-going-with-neo4j-and-jupyter-lab-through-docker-a1994e0e95c6?source=collection_archive---------14-----------------------#2021-05-14">https://towardsdatascience.com/get-going-with-neo4j-and-jupyter-lab-through-docker-a1994e0e95c6?source=collection_archive---------14-----------------------#2021-05-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="936d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">当你可以两个都做的时候，为什么每次只做一个呢？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/877e7d8868d08b873eabb667a2e94e3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eNYg2THLMU6-8TAm"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">安托万·佩蒂特维尔在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="4951" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Docker为数据科学家(实际上是软件中的每个人)提供了以可复制的方式共享代码的能力。我记得几年前我第一次接触它的时候。我曾经是一个使用老式虚拟桌面的人，这些虚拟桌面很笨重，仅仅凭借其架构就占用了大量内存。我第一次了解Docker的那一天，我是如此兴奋，以至于晚上大部分时间都醒着想着它！像一个过圣诞节的孩子一样，我收集了一大堆不同的容器，因为我可以这样做，也因为这让我对我可以在其中开发(玩耍)的所有这些伟大的新环境感到眩晕。</p><p id="a305" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这让我想到了今天。当然，我可以在虚拟环境中做事，但是如果我搞砸了一些重大的事情怎么办？(想想:和CUDA驱动之类的乱搞。)我能够搞砸我的本地系统以及下一个人。在一个容器中完成我所有的开发可以防止我造成任何永久性的伤害。(因为你需要多长时间才能把你的linux环境设置好<em class="lw">就像你喜欢的那样</em>？？？)此外，我可以轻松地与其他人共享该环境，而不必担心系统和软件包的差异。它只是工作。这对数据科学家来说非常好，因为我们倾向于对Python包之类的东西有很多软件依赖。</p><p id="dcbf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这篇博客文章将是在<a class="ae kv" href="http://neo4j.com" rel="noopener ugc nofollow" target="_blank"> Neo4j </a>做数据科学系列文章的第一篇。用图形数据进行数据科学真的很有趣，但是我将在以后的博客文章中深入探讨这个问题。作为开始，任何可能跟进这些未来帖子的人都能够拥有和我一样的环境，这真的很有帮助。为此，您可以在GitHub repo 中找到Docker容器的代码。</p><h1 id="9e1a" class="lx ly iq bd lz ma mb mc md me mf mg mh jw mi jx mj jz mk ka ml kc mm kd mn mo bi translated">代码遍历</h1><p id="ad03" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">作为一名图形数据科学家，我需要能够与Neo4j数据库以及许多常见的数据科学工具和软件包进行交互，比如Jupyter笔记本。理想情况下，我希望Jupyter与Neo4j交谈时不要太大惊小怪。这就是<code class="fe ls lt lu lv b">docker-compose</code>的用武之地。</p><p id="d8f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们来看看回购中的一些文件，我们将使用这些文件来完成这项工作。</p><p id="365f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先是一个明显的<code class="fe ls lt lu lv b">requirements.txt</code>文件，它详细说明了基本容器之外的任何附加需求:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="e00f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，我有两个不同的python包，用于与我们将要创建的Neo4j数据库进行交互。第一个是官方驱动，第二个是社区写的驱动。挑你最喜欢的。</p><p id="e79c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我有<code class="fe ls lt lu lv b">Dockerfile</code>，这只是我们在Jupyter的朋友推出的标准。它里面有很多很好的公共数据科学包，但是你可以随时通过<code class="fe ls lt lu lv b">pip3 list</code>检查安装的包。你需要的任何不在列表中的东西都应该放到<code class="fe ls lt lu lv b">requirements.txt</code>中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="5eaf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们需要获得一个Neo4j实例，并在容器的Neo4j和Jupyter部分之间建立某种网络。所以这里我们要用<code class="fe ls lt lu lv b">docker-compose</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="1e22" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关于这个设置的一些事情。首先，我使用的是Neo4j 4.2.3，但显然版本号会发生变化，所以你应该考虑使用最新版本(尽管我注意到<code class="fe ls lt lu lv b">:latest</code>并不总是获得绝对的最新版本)。接下来，我们将打开和转发几个端口。Neo4j浏览器使用7474，而7687是bolt连接器，将用于数据库的python连接。在第15行，我们用密码<code class="fe ls lt lu lv b">1234</code>创建用户<code class="fe ls lt lu lv b">neo4j</code>(比这更有创意！)使用第16行中的内容，我们将两个重要的库导入Neo4j，即Cypher  (APOC)上的<a class="ae kv" href="https://neo4j.com/labs/apoc/" rel="noopener ugc nofollow" target="_blank"> Awesome程序和</a><a class="ae kv" href="https://neo4j.com/product/graph-data-science-library/" rel="noopener ugc nofollow" target="_blank">图形数据科学(GDS)库</a>。这两者在我们解决数据科学问题时都非常有用。接下来，注意第18–20行被注释掉了。GDS是记忆密集型的。除了默认配置之外，您还需要添加内存。这些值的确切值取决于您的本地系统，因此相应地调整它们，然后取消注释这些行。最后，我们看到我们正在端口8888上运行Jupyter容器。两个容器都通过<code class="fe ls lt lu lv b">neo_net</code>网络连接在一起，这样它们就可以互相对话。</p><h1 id="5a76" class="lx ly iq bd lz ma mb mc md me mf mg mh jw mi jx mj jz mk ka ml kc mm kd mn mo bi translated">运行容器</h1><p id="a132" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">与任何Docker容器一样，第一步是构建它。为此，我们从命令行发出通常的命令:</p><pre class="kg kh ki kj gt mw lv mx my aw mz bi"><span id="680e" class="na ly iq lv b gy nb nc l nd ne">docker-compose build</span></pre><p id="9b5a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将通过和组装整个事情。接下来，我们通过</p><pre class="kg kh ki kj gt mw lv mx my aw mz bi"><span id="c99a" class="na ly iq lv b gy nb nc l nd ne">docker-compose up</span></pre><p id="adcc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将点燃容器的Neo4j和Jupyter部分。你会看到许多东西滚动而过，但其中之一将是Jupyter的链接，其中包含打开它所需的令牌。点击那个链接应该会在你的浏览器中打开Jupyter。接下来，我们可以导航到<code class="fe ls lt lu lv b">localhost:7474</code>以进入Neo4j浏览器。</p><p id="72ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们应该让Jupyter和Neo4j能够相互通信。为了测试这一点，您可以在<code class="fe ls lt lu lv b">notebooks/test_db_connection.ipynb</code>中运行笔记本。如果运行时没有错误，就可以开始了！现在，您可以在Jupyter笔记本中与Neo4j进行交互，也可以直接从Neo4j网络浏览器中进行交互。</p><p id="6fbd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，一旦你完成了，你发出命令</p><pre class="kg kh ki kj gt mw lv mx my aw mz bi"><span id="a140" class="na ly iq lv b gy nb nc l nd ne">docker-compose down</span></pre><p id="f1b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">干净利落地关闭容器。不过最棒的是，因为我们已经链接了一些像<code class="fe ls lt lu lv b">notebooks/</code>这样的卷，我们的工作被保存在我们的本地计算机上，并且可以在任何时候再次使用。</p><p id="2d3c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="lw">敬请关注下一篇博客文章，通过图表了解数据科学之旅！感谢您的阅读！</em></p></div></div>    
</body>
</html>