<html>
<head>
<title>Data Science for the Heart</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">心脏数据科学</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-science-for-the-heart-c654135ceee5?source=collection_archive---------19-----------------------#2021-05-17">https://towardsdatascience.com/data-science-for-the-heart-c654135ceee5?source=collection_archive---------19-----------------------#2021-05-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cefb" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">心血管疾病数据分析和预测建模</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ed70545aa209cd0e56795c63085dce5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0dvQ_lMd_zi7SzrY"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@alexleegdp?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">李东旻</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h1 id="4a9b" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">简介</strong></h1><p id="e9c5" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">这种数据探索和预测分析的目的是为了更好地了解哪些健康因素影响患者的心脏病风险。为此，将对数据进行介绍，并对数据集中的健康因素进行图形分析。将介绍预测建模过程，给出逻辑回归预测模型评估的背景。该评估将包括审查混淆矩阵中的性能指标。最后，将通过一个具体的例子来解释模型的计算，以说明这些因素是如何推动预测的。</p><h1 id="bd53" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">数据集解释</strong></h1><p id="ccdb" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">为该项目选择的心脏病数据集来自<a class="ae kv" href="https://archive.ics.uci.edu/ml/datasets/heart+disease" rel="noopener ugc nofollow" target="_blank"> UCI机器学习库</a>。该数据集由461名患者的数据组成，描述了个体的健康因素和心脏病的诊断。本项目中使用的数据集中的12个健康因素概述如下。</p><p id="6ea6" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">1 <strong class="lq ir">。年龄</strong> —以年为单位的患者年龄</p><p id="3c28" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">2.<strong class="lq ir">性别</strong> —患者的性别</p><ul class=""><li id="6185" class="mp mq iq lq b lr mk lu ml lx mr mb ms mf mt mj mu mv mw mx bi translated"><em class="my"> 0表示母</em></li><li id="fde0" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj mu mv mw mx bi translated"><em class="my"> 1表示公</em></li></ul><p id="f04f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">3.<strong class="lq ir"> CP </strong> —患者胸痛类型</p><ul class=""><li id="e7ff" class="mp mq iq lq b lr mk lu ml lx mr mb ms mf mt mj mu mv mw mx bi translated"><em class="my"> 1表示典型心绞痛</em></li><li id="2ade" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj mu mv mw mx bi translated"><em class="my"> 2表示非典型心绞痛</em></li><li id="0761" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj mu mv mw mx bi translated"><em class="my"> 3表示非心绞痛性疼痛</em></li><li id="5fd3" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj mu mv mw mx bi translated"><em class="my"> 4表示无症状患者</em></li></ul><p id="9889" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">4.<strong class="lq ir">trest bps</strong>——以毫米汞柱为单位的静息血压</p><p id="d805" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">5.<strong class="lq ir">胆固醇</strong>——血清胆固醇，单位为毫克/分升</p><p id="485f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">6.<strong class="lq ir">空腹血糖</strong> —空腹血糖</p><p id="c02e" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">7.<strong class="lq ir">静息心电图</strong> —静息心电图结果</p><ul class=""><li id="f124" class="mp mq iq lq b lr mk lu ml lx mr mb ms mf mt mj mu mv mw mx bi translated"><em class="my"> 0表示正常</em></li><li id="77a1" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj mu mv mw mx bi translated"><em class="my"> 1表示有ST-T波异常</em></li><li id="0356" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj mu mv mw mx bi translated"><em class="my"> 2表示可能或明确的左心室肥大</em></li></ul><p id="a0a7" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">8.<strong class="lq ir"> Thalach </strong> —达到最大心率</p><p id="e81f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">9.<strong class="lq ir">Exang</strong>——运动诱发心绞痛</p><ul class=""><li id="04e2" class="mp mq iq lq b lr mk lu ml lx mr mb ms mf mt mj mu mv mw mx bi translated"><em class="my"> 0表示无</em></li><li id="6935" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj mu mv mw mx bi translated"><em class="my"> 1表示是</em></li></ul><p id="f28d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">10.<strong class="lq ir"> Oldpeak </strong> —运动相对于休息诱发的ST段压低</p><p id="b7a6" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">11.<strong class="lq ir">斜率</strong>——运动ST段峰值的斜率</p><ul class=""><li id="b94e" class="mp mq iq lq b lr mk lu ml lx mr mb ms mf mt mj mu mv mw mx bi translated"><em class="my"> 1表示上坡</em></li><li id="30f5" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj mu mv mw mx bi translated"><em class="my"> 2指示平面</em></li><li id="6c97" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj mu mv mw mx bi translated"><em class="my"> 3表示下坡</em></li></ul><p id="29f8" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">12.<strong class="lq ir">心脏</strong> —心脏病的诊断</p><ul class=""><li id="a419" class="mp mq iq lq b lr mk lu ml lx mr mb ms mf mt mj mu mv mw mx bi translated"><em class="my"> 0表示缺席</em></li><li id="dd2c" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj mu mv mw mx bi translated"><em class="my"> 1表示存在</em></li></ul><p id="4e02" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">为了进行分析和预测建模，对数据进行处理，以便对年龄、静息血压和血清胆固醇因素进行分组。</p><h1 id="6743" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">数据分析</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/6c3bf139948e269a980fe626bc8ba406.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iyszmAd8VrsLRYN6"/></div></div></figure><p id="a633" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">图1中的上表为理解数据集中的健康因素如何相互关联提供了基础。在年龄栏中，trestbps(静息血压)和thalach(达到的最大心率)是与年龄最相关的因素。随着患者年龄的增加，他们的静息血压趋于增加，而他们达到的最大心率趋于降低。年龄和有氧运动之间的相关性是正相关的，但是这种相关性不是很强，其值为0.176。</p><p id="3733" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">特别感兴趣的是表格中关于心脏疾病诊断的那一行。这一行显示了有氧运动和其他健康因素之间的相互关系。与有氧运动相关性最强的一些因素是cp、thalach、exang、oldpeak和slope，它们在数据集说明部分有定义。虽然年龄和性别与心脏因素没有很强的相关性，但这并不是说不能从这些因素中得出结论。通过观察年龄和性别分组之间的趋势，分析这些因素如何与心脏因素相互作用，揭示了患者的年龄和性别如何在统计上影响心血管疾病的总体风险的额外信息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/97ae397e0f3ff12c1b998914cf31847b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/0*EdbmmYOhwlbm8nDX"/></div></figure><p id="448d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">数据样本包括总共461名患者，其中124名为女性，337名为男性。在分析数据时，考虑患者性别之间的样本大小差异是很重要的，因为整个人群的趋势将向更大群体的方向转变。数据集中患者的年龄范围从30岁到79岁。上图2显示了按性别和年龄分列的患者人数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/5ea6dcb734424335aee7b79ca88a0c18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/0*yFN2tzI0ErdauH_8"/></div></figure><p id="a39c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">按年龄分组在上面的图3中，数据显示心血管疾病的百分比通常随着患者年龄的增加而增加。一个异常值是在70-79岁的人群中，心血管疾病患者的比例从60多岁的69.2%下降到70多岁的58.8%。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/f76f3341e9583291bba8794637355a2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1348/0*079FCC8IcTaatJ7Z"/></div></div></figure><p id="b0c2" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如上图4所示，男性和女性之间的心血管疾病比例存在很大的不平衡。在该数据集中，男性患者患心血管疾病的可能性是两倍多，66.5%的男性患有该疾病，而女性只有29.8%。</p><p id="8b4b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">使用从分别按性别和年龄查看数据中获得的知识，下面的图5结合了这两个因素，给出了一个更详细的视角。数据显示，男性患者和老年患者更有可能患有心血管疾病，图3和图4也显示了这一点。图5进一步详细说明了年龄和心血管疾病之间的关系，这种关系在男性和女性中都是成立的，并且不仅仅在作为一个整体的样本人群中观察到。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/b7c0256ef0efa3934a669082155d8a14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ggvb7IEvZaUV6ljX"/></div></div></figure><p id="5bcd" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">一个异常值是70多岁的女性，60多岁女性的患病率从41.7%下降到0%。在图3中，这是导致60多岁到70多岁的男女患者之间疾病百分比显著下降的因素。应该注意的是，对于男性来说，年龄和更高的心血管疾病百分比之间的相关性适用于数据集中的所有年龄组。</p><p id="b5a6" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">对于一个边远的女性年龄组，应该注意的是该组的样本量是所有组中最小的。图2显示只有1%的数据样本，461名患者中的5名是70多岁的女性。与所有其他年龄和性别群体相比，这一比例非常低，30多岁的女性除外。</p><p id="8b7b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">虽然年龄和性别是数据集中最容易获得的健康因素，但它们不是本次数据探索中使用的唯一测量方法。例如，血压是患者患心血管疾病风险的一个重要因素。下图6是按性别和血压分组的。血压分类是基于哈佛健康出版社的指南。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/640fecb62b904220bd425e2d0ed91327.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PJWvm81XXSxE0rPF"/></div></div></figure><p id="67fd" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">对于女性和男性来说，较高的收缩压测量值与较高的心血管疾病风险相关。一个异常值是[130，139]收缩压分组中的男性，患有该疾病的患者百分比下降了0.3%，从之前的[120，129]分组的61.7%降至61.4%。</p><p id="cac1" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">对于女性来说，各组之间心血管疾病风险的变化相当稳定，而对于男性来说，这种变化随着血压分组的增加而增加。女性和男性群体之间疾病风险的平均变化分别为12.73%和10.85%。</p><p id="323b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">图6继续显示了数据集中女性和男性心血管疾病发病率的差异。收缩压读数在[90，119]之间(被认为是正常测量值)的男性患心血管疾病的可能性仅比最高血压分组[180，200]中的女性低3.4%，最高血压分组被认为是高血压危象患者的测量值。</p><h1 id="05d9" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">数据集资源</strong></h1><p id="9a67" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">可以在下面的<a class="ae kv" href="https://github.com/SulemanBazai/Cardiovascular-Disease-Data-Analysis-and-Predictive-Modeling" rel="noopener ugc nofollow" target="_blank"> GitHub存储库</a>中找到清理后的数据集，以及用于创建上述图表的数据透视表。请随意下载该文件，以进一步将数据分割成不同的可视化效果。还有许多额外的列代表健康因素，这些因素在本次讨论中没有具体深入地可视化，但在逻辑回归预测模型中使用。</p><h1 id="3367" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">预测模型流程</strong></h1><p id="e4c7" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">本研究中使用的预测模型是逻辑回归模型。在这种情况下，逻辑回归是一种有效的模型，因为被预测的因变量要么为真，要么为假，要么为0。预测值为真或1表示预测患者患有心血管疾病。false值或0表示预测患者不会患病。对心脏数据点的预测基于给定的输入，即数据集中的11个其他健康因素。</p><p id="bcc0" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">用于构建、训练和测试逻辑回归模型的软件是<a class="ae kv" href="https://orangedatamining.com" rel="noopener ugc nofollow" target="_blank"> Orange </a>，这是一个开源的机器学习和数据可视化工具包。图7显示了详细描述模型设置和模型性能评估执行的可视化。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/af620cada4d53e2764afe0b6cd68c101.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zTZx1559Qn4R9wWP"/></div></div></figure><p id="6a5e" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">简单总结一下这种可视化</p><ol class=""><li id="f4f9" class="mp mq iq lq b lr mk lu ml lx mr mb ms mf mt mj nl mv mw mx bi translated">数据集被加载到工作空间中，由<strong class="lq ir">数据文件</strong>小部件表示</li><li id="47f9" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj nl mv mw mx bi translated">数据被送入<strong class="lq ir">数据采样器</strong>，采样器将数据分成两组</li><li id="b8ca" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj nl mv mw mx bi translated">集合1是<strong class="lq ir">训练数据</strong>，包括大约85%的总数据</li><li id="05c4" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj nl mv mw mx bi translated">第二组是<strong class="lq ir">测试数据</strong>，约占总数据的15%</li><li id="b3a5" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj nl mv mw mx bi translated">训练数据被输入到<strong class="lq ir">逻辑回归</strong>模型小部件中以构建模型</li><li id="9ff9" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj nl mv mw mx bi translated">逻辑回归模型和测试数据被映射到<strong class="lq ir">预测</strong>小部件，在那里根据测试数据评估模型</li><li id="98cb" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj nl mv mw mx bi translated">生成<strong class="lq ir">混淆矩阵</strong>以进一步分解模型的性能</li><li id="82eb" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj nl mv mw mx bi translated"><strong class="lq ir">解释预测</strong>小部件映射逻辑回归模型，以及训练和测试数据，以解释哪些特性对单个实例的预测贡献最大，以及它们是如何贡献的</li></ol><h1 id="64c6" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">使用混淆矩阵的模型评估</strong></h1><p id="217e" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">用于描述模型性能的评估度量是混淆矩阵。混淆矩阵中的两个可能类别是0和1，或者假和真。预测值为0或假，表示模型预测患者没有心血管疾病。预测值为1或true表示模型预测患者患有心血管疾病。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/b57c26f3d08e9847af1a629d17df854f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CKxxZGwbZokBIO3c"/></div></div></figure><p id="35d0" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">有了这些知识，可以定义以下术语</p><ol class=""><li id="85da" class="mp mq iq lq b lr mk lu ml lx mr mb ms mf mt mj nl mv mw mx bi translated"><strong class="lq ir">真阴性</strong>(TN)——模型预测为0的情况，即患者没有心血管疾病，并且患者没有该疾病</li><li id="d7ee" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj nl mv mw mx bi translated"><strong class="lq ir">真阳性</strong>(TP)——模型预测1、患者患有心血管疾病且患者确实患有该疾病的情况</li><li id="6a06" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj nl mv mw mx bi translated"><strong class="lq ir">假阴性</strong>(FN)——模型预测值为0的病例，即患者没有心血管疾病，而患者确实患有该疾病</li><li id="1eac" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj nl mv mw mx bi translated"><strong class="lq ir">假阳性</strong>(FP)——模型预测1，患者确实患有心血管疾病，而患者并未患病的情况</li></ol><p id="53bb" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">根据这些定义，一个完美的模型将使每个案例都属于真阴性或真阳性类别，而没有案例属于假阴性或假阳性类别。因此，构建模型时的目标应该是减少FN和FP案例。</p><p id="e5df" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">对于预测心血管疾病的特定情况，降低FN等级是至关重要的，因为在这些情况下，患者被预测没有患病，但确实患病。如果根据这种预测做出治疗决定，这些患者可能无法接受心血管疾病的适当治疗或药物治疗。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/1b02b34bfe453d8bc536d3fc9b2fc87e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yuwl4m0nXlNmEoAm"/></div></div></figure><p id="1a67" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">上面的混淆矩阵显示了对测试数据进行评估时逻辑回归模型的TN、TP、FN和FP值。总共有77名患者包含测试数据，约占总数据集的16.7%。为了评估模型的性能，将定义一些额外的术语及其相应的值。</p><p id="7150" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">1.<strong class="lq ir">准确性</strong> —模型总体正确的频率</p><ul class=""><li id="23f7" class="mp mq iq lq b lr mk lu ml lx mr mb ms mf mt mj mu mv mw mx bi translated"><em class="my">(TN+TP)/总计= (37 + 26)/77 = .818 </em></li></ul><p id="aa96" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">2.<strong class="lq ir">回忆</strong> —当实际值为1时，模型预测为1的频率</p><ul class=""><li id="e901" class="mp mq iq lq b lr mk lu ml lx mr mb ms mf mt mj mu mv mw mx bi translated"><em class="my">TP/(TP+FN)= 26/(26+6)= . 813</em></li></ul><p id="9f75" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">3.<strong class="lq ir">精度</strong> —当预测值为1时，模型正确的频率是多少</p><ul class=""><li id="af31" class="mp mq iq lq b lr mk lu ml lx mr mb ms mf mt mj mu mv mw mx bi translated"><em class="my">TP/(TP+FP)= 26/(26+8)= . 765</em></li></ul><p id="2bad" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">4.<strong class="lq ir"> F1得分</strong> —召回率和准确率的加权调和平均值</p><ul class=""><li id="8306" class="mp mq iq lq b lr mk lu ml lx mr mb ms mf mt mj mu mv mw mx bi translated"><em class="my">这个分数往往比单独的准确度更有用，因为它同时考虑了FP和FN</em></li><li id="62a1" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj mu mv mw mx bi translated"><em class="my"> 2*(召回*精度)/(召回+精度)= 2 *(0.813 * . 765)/(. 813+. 765)= . 788</em></li></ul><p id="4166" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">5.<strong class="lq ir">零错误率</strong> —如果模型总是预测为0，那么模型出错的频率</p><ul class=""><li id="eb90" class="mp mq iq lq b lr mk lu ml lx mr mb ms mf mt mj mu mv mw mx bi translated"><em class="my"> 0是上述</em>混淆矩阵测试数据中的多数类</li><li id="608f" class="mp mq iq lq b lr mz lu na lx nb mb nc mf nd mj mu mv mw mx bi translated"><em class="my">(实际1)/合计=(FN+TP)/合计= (6 + 26)/77 = .416 </em></li></ul><p id="31cb" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这些度量通过对混淆矩阵的评估，总结了逻辑回归模型的性能。从召回可以看出，该模型正确地捕获了81.3%的患有心血管疾病的患者。从精度可以看出，当模型预测患者患有心血管疾病时，该预测在76.5%的情况下是正确的。</p><p id="c666" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">零错误率为41.6%，一个总是预测0的模型，即患者没有心血管疾病，在58.4%的时间里是正确的。这可以用作比较实际逻辑回归模型的基线指标。由于准确率为81.8%，召回率为81.3%，精确度为76.5%，F1值为78.8%，很明显，逻辑回归模型在统计上优于总是预测患者没有疾病的基本模型。</p><h1 id="85fa" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">预测解释</strong></h1><p id="9b7a" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">图10是一个预测解释视图，它基于模型解释了特性对单个实例的预测的贡献程度。解释中的目标类别是1，意味着模型正在评估患者是否被预测患有心血管疾病。如果特征贡献总计超过0 . 5，则心血管疾病的预测将是1。类似地，如果特征贡献总计低于. 5，则对于没有心血管疾病的患者，预测将是0。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/37c08b154fb52ad2df22bbd9220f5e44.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/0*bh1SR2BcOYG09w14"/></div></figure><p id="7ef7" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">从图中可以看出，灰框中的. 35是模型计算出的概率，表示患者没有被预测到患有该疾病。对于预测，贡献最大的特征是患者的性别、运动诱发的心绞痛类别、胸痛类别和胆固醇组类别。本例中的患者是女性，由性别=0 = 1指定。在这些类型的情况下，分类要素以格式feature-name=feature-value = 0/1(假/真)标注。</p><p id="d728" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">与患者为女性相关的蓝条中的0.29表明该因素将患该疾病的计算概率降低了29%。类似地，exang=0 = 1表明患者没有运动诱发的心绞痛，将计算出的患病概率降低了12%。</p><p id="cf3d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">红色条中的0.06与胆固醇组3有关。这表明，处于这一胆固醇分组中的患者患心血管疾病的计算概率增加了6%。胆固醇分类是基于梅奥诊所的指南。</p><h1 id="97b1" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">结论</strong></h1><p id="c70e" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">这种对心脏病的数据探索和预测分析已经确定了哪些健康因素在统计上影响患者的疾病风险，以及这些因素对风险的影响程度。图形分析和预测解释都表明，即使是来自患者的有限数量的健康数据也可以提供一个模板来了解他们的疾病风险。</p><p id="96f7" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">混淆矩阵中的评估支持了这种理解，其导致了81.8%的总体模型准确性。该模型的召回率为81.3%，即当患者确实患有疾病时，该模型预测患者患有该疾病的频率。模型的精确度，即当预测值为患者患有疾病时，模型正确的频率为76.5%。从这种表现可以得出结论，导致心脏病的健康因素可以被识别并用于更好地了解患者的疾病风险。</p></div></div>    
</body>
</html>