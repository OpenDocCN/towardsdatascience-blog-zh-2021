<html>
<head>
<title>Apply Matching Method in Causal Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">匹配法在因果分析中的应用</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/apply-matching-method-in-causal-analysis-19e032144e93?source=collection_archive---------27-----------------------#2021-06-24">https://towardsdatascience.com/apply-matching-method-in-causal-analysis-19e032144e93?source=collection_archive---------27-----------------------#2021-06-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b0e0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用Python写了一个真实的例子</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/492d91826f76cb6841bc0a90569fd912.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QR9W_E7Qjdecq0Za5BhKVw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">扬·瓦莱卡在<a class="ae ky" href="https://unsplash.com/@sharon_sy_wei/likes?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="5498" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">动机</h1><p id="82e7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">随机实验是检验因果关系的金标准。然而，由于各种各样的实际原因，我们常常不能进行实验，而必须依靠观察数据。匹配是一种用于近似实验结果以从观察数据中恢复因果效应的方法。</p><blockquote class="mn mo mp"><p id="e583" class="lr ls mq lt b lu mr ju lw lx ms jx lz mt mu mc md mv mw mg mh mx my mk ml mm im bi translated">当使用观察数据估计因果效应时，通过获得具有相似协变量分布的治疗组和对照组，尽可能接近地重复随机实验是可取的。</p><p id="f647" class="lr ls mq lt b lu mr ju lw lx ms jx lz mt mu mc md mv mw mg mh mx my mk ml mm im bi translated">—英国斯图尔特，2010年。"因果推理的匹配方法:回顾与展望."<em class="it">统计。Sci。</em></p></blockquote></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="2732" class="kz la it bd lb lc ng le lf lg nh li lj jz ni ka ll kc nj kd ln kf nk kg lp lq bi translated">条件独立性假设</h1><p id="4a3d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">假设我们有两个潜在的结果和一个治疗变量<em class="mq"> Dᵢ </em>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/fbf0f96f0f96ce443f94bec89bf217cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:336/format:webp/0*9nCIja_pcamn9WF9.png"/></div></figure><p id="3c37" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mu mc md me mw mg mh mi my mk ml mm im bi translated">我们把治疗效果写成:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/40d492bfc2d14123b5102398cc2483bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/0*Y1K5BQ2JsD7HhWJB.png"/></div></figure><p id="0ff6" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mu mc md me mw mg mh mi my mk ml mm im bi translated">随机实验解决了选择问题，因为随机分配消除了选择偏差。关键的假设是<em class="mq"> Dᵢ </em>独立于潜在的结果(<em class="mq"> y₁ᵢ，y₀ᵢ </em>):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/8266c106123b94970939d7e84d743205.png" data-original-src="https://miro.medium.com/v2/resize:fit:298/format:webp/1*Fu5-L9rUja2PC256Icaosw.png"/></div></figure><p id="8241" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mu mc md me mw mg mh mi my mk ml mm im bi translated">如果你需要一个潜在结果模型的回顾，你可以阅读下面链接的我以前的文章:</p><div class="no np gp gr nq nr"><a href="https://medium.com/geekculture/an-introduction-of-randomized-experiment-aka-a-b-testing-and-potential-outcome-model-f2c93f73d426" rel="noopener follow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">随机实验和潜在结果模型</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">深入探究随机化的重要性</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">medium.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of ks nr"/></div></div></a></div><p id="295d" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mu mc md me mw mg mh mi my mk ml mm im bi translated"><strong class="lt iu">中情局称，根据一组观察到的特征X <em class="mq"> ᵢ </em>，选择偏差被消除:</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/a1967580bf9174bfc7a2af8a9514c1e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:366/format:webp/1*DrVks49FSSYWfufTwGiJ5Q.png"/></div></div></figure><p id="a0ae" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mu mc md me mw mg mh mi my mk ml mm im bi translated">考虑到CIA，以协变量X <em class="mq"> ᵢ为条件，</em>治疗组和对照组的结果变量的比较有一个因果解释:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/3d352b79f194ce7e297c6967b7da7a30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*cDVYVgT7Z3Cls_7xjX9vVg.png"/></div></figure><p id="b82e" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mu mc md me mw mg mh mi my mk ml mm im bi translated">在另一种格式中:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/fd17f4d24772d0f47c19f97feacc3943.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7qYj5P5mX1BWuTI99FHZLQ.png"/></div></div></figure><p id="f337" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mu mc md me mw mg mh mi my mk ml mm im bi translated">应用CIA的一个例子是田纳西之星实验，在这个实验中，学生被分配到不同的班级。</p><p id="a1d9" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mu mc md me mw mg mh mi my mk ml mm im bi translated">CIA的另一个经验应用是匹配估计:在治疗组和对照组之间比较具有相同协变量(以协变量为条件)的单位。以某种方式计算并平均这些差异。</p></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="d103" class="kz la it bd lb lc ng le lf lg nh li lj jz ni ka ll kc nj kd ln kf nk kg lp lq bi translated">例子</h1><p id="5e60" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为了演示匹配是如何工作的，我使用了Arceneaux，Kevin，Alan S. Gerber和Donald P. Green (2010)的论文“使用大规模选民动员实验比较实验和匹配方法”的复制材料中的数据和方法。ISPS数据档案。您可以通过该链接下载数据。dta或者。csv格式和Stata代码。</p><p id="0944" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mu mc md me mw mg mh mi my mk ml mm im bi translated">在本文中，我按照附录中阐述的精确匹配过程，用Python再现了表6中的OLS和精确匹配结果。</p><h2 id="de44" class="oj la it bd lb ok ol dn lf om on dp lj ma oo op ll me oq or ln mi os ot lp ou bi translated">数据</h2><p id="d48f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Arceneaux、Kevin、Alan S. Gerber和Donald P. Green (2010)使用的数据来自一项大规模现场实验，在2002年中期选举之前，将个人随机分配到爱荷华州和密歇根州的治疗组和对照组。</p><p id="0ae5" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mu mc md me mw mg mh mi my mk ml mm im bi translated">处理方法是:动员投票(GOTV)电话(数据中的变量“联系”)。治疗组接到了电话，而对照组没有。结果变量是2002年的投票率。匹配分析中使用的协变量包括:<em class="mq">、【年龄】、【人员】、【新记录】、【竞争对手】、【投票00】、【投票98】、【县】、【st_sen】、【st_hse】、【女性】、【州】、</em>，这些变量包括年龄、家庭规模、新登记选民、竞争阶层、2000年投票、1998年投票、县、州参议院选区、州众议院选区、性别和州。</p><h2 id="779a" class="oj la it bd lb ok ol dn lf om on dp lj ma oo op ll me oq or ln mi os ot lp ou bi translated">匹配分析</h2><p id="bb62" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">分析的目的是估计2002年GOTV投票电话对投票率的因果关系。我们假设实验数据是观察性的，并将治疗组的个体与对照组的个体进行比较。匹配程序识别未处理的个体，与每个具有相同特征的处理过的个体相匹配。根据CIA，希望在协变量匹配后，组间的任何剩余差异可以归因于治疗的效果。</p><p id="ef51" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mu mc md me mw mg mh mi my mk ml mm im bi translated">我进行了精确的匹配程序，其中每个治疗受试者与协变量上的一个或多个未治疗受试者匹配，并丢弃未找到匹配的治疗观察。</p><p id="29d4" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mu mc md me mw mg mh mi my mk ml mm im bi translated">如本文附录所述，为了计算受治疗者的平均治疗效果，使用Abadie和Imbens (2004年)提出的方法计算了与每个治疗观察相匹配的对照组观察的权重。我总结了治疗观察结果和比较观察加权结果之间的差异，然后对治疗组的许多观察结果进行平均。我还根据Abadie和Imbens (2004)提出的算法计算了标准误差。</p><p id="3b23" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mu mc md me mw mg mh mi my mk ml mm im bi translated">此外，按照论文中的表6，我运行了OLS回归</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/de707fa331bf9b076011f5664415d2c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*CVADyEUUb-pu8QNdASb5vQ.png"/></div></figure><p id="8b70" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mu mc md me mw mg mh mi my mk ml mm im bi translated">精确匹配产生2.8个百分点的估计治疗效果。这意味着竞选电话每36个电话就增加一个选民。OLS结果的处理效果是接触变量的系数，等于2.7，标准误差为0.3。</p><p id="b7e7" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mu mc md me mw mg mh mi my mk ml mm im bi translated">以下是我用Python编写的用于匹配分析的完整代码(摘自Arceneaux、Kevin、Alan S. Gerber和Donald P. Green (2010)使用的Stata代码) :</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ow ox l"/></div></figure></div></div>    
</body>
</html>