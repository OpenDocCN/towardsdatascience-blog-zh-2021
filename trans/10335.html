<html>
<head>
<title>Find Trending Products Each Month Using Tableau</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Tableau每月查找热门产品</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/find-trending-products-each-month-using-tableau-85c1d9a76314?source=collection_archive---------28-----------------------#2021-10-01">https://towardsdatascience.com/find-trending-products-each-month-using-tableau-85c1d9a76314?source=collection_archive---------28-----------------------#2021-10-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8113" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何使用详细程度计算来选择和显示每月增加最多的销售额</h2></div><p id="7ed7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设您销售大量产品，并希望了解哪些产品的销售额增长最快。在Tableau中使用快速表格计算很容易做到这一点:计算差额，按大小排序，去掉除最大数字以外的所有内容。但是，如果您想要一个每月自动完成这项工作的仪表板，该怎么办呢？</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/1e9e95d445faa9cda5b2200ff280b449.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ELT3-_C0hgnUFNnfDAAfBw.jpeg"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">作者使用照片提供图片(左)安娜·邦达伦科在<a class="ae lr" href="https://www.pexels.com/photo/colorful-plastic-toy-8148534/" rel="noopener ugc nofollow" target="_blank">像素上的照片</a> |(右)卢卡斯在<a class="ae lr" href="https://www.pexels.com/photo/person-holding-pen-pointing-at-graph-590020/" rel="noopener ugc nofollow" target="_blank">像素上的照片</a></p></figure><p id="23c6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最近有人要求我这么做，但我找不到任何讨论类似问题的文章，所以想分享我用来创造观想的解决方案。在本文中，我将创建一个图表，自动选择上个月销售额增长最大的五种产品，并可视化这种变化。这是写给以前做过Tableau的人的，定位在初级/中级水平。</p><p id="a918" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我不会分享我的完整玩具数据集，但我已经包括了下面的前几行给你一个想法。它包括每个销售的一行，带有日期/日期时间和产品字段。自然，真实的销售数据集将包含更多的信息，但这对我们的目的来说已经足够了。</p><pre class="lc ld le lf gt ls lt lu lv aw lw bi"><span id="d58d" class="lx ly iq lt b gy lz ma l mb mc">+---------+---------------+<br/>| Product | Purchase Date |<br/>+---------+---------------+<br/>| Glass   | 23/08/21      |<br/>| Mug     | 02/07/21      |<br/>| Plants  | 31/08/21      |<br/>| Rug     | 04/09/21      |<br/>+---------+---------------+</span></pre><p id="cedb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦将Tableau连接到数据，就可以开始将正在使用的日期字段拖放到列中，将产品字段拖放到行中，将记录数拖放到文本标记中。您可能需要编辑列中的日期药丸以显示连续的月份。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi md"><img src="../Images/fe46bebda9e7230b23ad3b8b11960e7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*P8eXEmFAUbVsy6Wa1VsV-w.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">(<em class="me">图片作者</em>)</p></figure><p id="399c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这种数据的表格视图可能有助于向用户展示其本身，但也有助于验证您的计算。虽然我使用的是平面文件，但我模拟了一个包含九月份部分数据的实时数据连接。本文假设，因为这只是部分数据，所以还不感兴趣，并着眼于7月和8月之间的变化。</p><p id="8646" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建一个新的工作表来计算和显示每月的变化。为了计算上一个整月与其前一个整月之间的差异，我们需要创建一个计算字段。特别是详细程度的计算。Tableau对它们有很好的解释<a class="ae lr" href="https://help.tableau.com/current/pro/desktop/en-us/calculations_calculatedfields_lod.htm" rel="noopener ugc nofollow" target="_blank">这里是</a>，但是本质上它们允许你在不同的细节层次上计算值。在这种情况下，我们希望了解每个产品的变化，因此我们希望在产品级别进行计算。如下所示创建计算字段。</p><pre class="lc ld le lf gt ls lt lu lv aw lw bi"><span id="bd31" class="lx ly iq lt b gy lz ma l mb mc">//calculates change in sales per product between last two months<br/>{fixed [Product]:<br/>    COUNT(IIF(DATEDIFF('month',[Purchase Date],TODAY())=1,<br/>        [Product],NULL)) - <br/>    COUNT(IIF(DATEDIFF('month',[Purchase Date],TODAY())=2,<br/>        [Product],NULL))</span></pre><p id="5a2d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意这个函数中注释的使用；对于像这样的长时间计算，这些总是可取的。此计算将计算上个月和上个月购买日期的行数之间的差异，所有这些都是按产品计算的。通过要求Datediff函数等于1，可以从当前月份中筛选出任何值。</p><p id="3835" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建该字段并将其命名为“销售额变化”之后，您可以创建一个如下图所示的图表。在这个阶段，您可以根据表1中的表格验证LOD计算的变化值。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/7bebd8d5d936c2dd1e4a3646a0689bcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*A2qDp3UxkUoaJId6tTIDtw.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">(<em class="me">图片作者</em>)</p></figure><p id="5741" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下一步是让Tableau选择销售变化最大的产品。在维中，右键单击产品字段，然后选择创建&gt;设置。在弹出窗口中，选择顶部选项卡，选择“按字段”并使用您创建的LOD计算作为选择依据的变量，确保聚合设置为Sum。在本例中，我们选择了查看前5名。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/7ed8cf286d80c84e4bd7505e42b70cd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*UERGfYc5k-tzfSie9tZbVA.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">(<em class="me">图片作者</em>)</p></figure><p id="e41b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦您创建了这个集合，进入过滤器并选择。这应该会过滤掉前两个月中销售额变化最大的五种产品。因为用于创建动态集的LOD计算是用来查找与今天的日期相比最近的月份的，所以这前5个将每月更新一次。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/d9b2d4a5fea724783d290a73e1bcbba5.png" data-original-src="https://miro.medium.com/v2/resize:fit:474/format:webp/1*PS-5Iui1gnrtx4CSTjsIeQ.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">(<em class="me">图片作者</em>)</p></figure><p id="ca51" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当然，这是一个非常简单的例子和一个非常简单的图表，但它展示了这些销售趋势计算的能力。这方面的一些细微变化包括希望看到销售额下降最多的产品(使用上面的方法实现，但在创建集合时在“按字段”选项中选择底部而不是顶部)，或者希望看到总体变化最大的产品(在用于创建集合的LOD计算周围添加ABS()函数，但在显示值时使用与上面相同的计算)。</p><p id="dcab" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了给图表添加一些更加用户友好的功能，我们可以为用户提供他们想要看到多少趋势产品的选项。为此，在创建集合时，单击下拉菜单5，选择“创建新参数”并创建一个名为“产品数量”的参数。确保参数设置为显示参数控制。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/514d66101422b2816c8c02c870ca91a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:736/format:webp/1*10nwnmq5O9ErkoEzAC1Cyg.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">(<em class="me">图片作者</em>)</p></figure><p id="bceb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以使用参数的力量来允许用户选择他们是看到表现最好的产品还是表现最差的产品。为此，首先创建两个集合，一个选择排名靠前的产品(例如“排名靠前的产品”)，另一个选择排名靠后的产品(排名靠后的产品)。然后，我们创建一个数据类型为String的参数，并赋予它两个可能的值“Trending”和“Decreasing”。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/a144358f10675854e4c97c49db952ba5.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/format:webp/1*R1uHKoGB8WSsOlON-E1c0w.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">(<em class="me">图片作者</em>)</p></figure><p id="6157" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后创建一个使用CASE()的计算字段，以允许参数选择来确定使用哪个集合。按照下面的代码块创建该字段，将该字段转换为维度，将其作为唯一的筛选器添加到工作表中，并在出现提示时选择1。</p><pre class="lc ld le lf gt ls lt lu lv aw lw bi"><span id="f6bf" class="lx ly iq lt b gy lz ma l mb mc">//toggles which set to apply based on parameter selection<br/>CASE [Trending or Decreasing Toggle]<br/>    WHEN 'Trending' THEN INT([Top Trending Products])<br/>    WHEN 'Decreasing' THEN INT([Top Decreasing Products])<br/>END</span></pre><p id="da54" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可能需要编辑视觉效果的标题，以包含正在使用的参数。特别是如果你允许用户选择他们看到的是增加还是减少的销售，有一个非反应性的标题可能会令人困惑。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/a83d12d736a65b6c85fcf793ea573721.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*cO8a7nhDYqy8bE19U_PR6A.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">(<em class="me">图片作者</em>)</p></figure><p id="bd8b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">显然，你可以利用这些计算来创建更复杂的视觉效果，但是我们可以将上面创建的所有东西结合起来，创建一个如下图所示的仪表板。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/24b655f077b42b0192dbf4431209024f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*aa04J4F1BTm8LOvzmINu9w.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">(<em class="me">图片作者</em>)</p></figure><p id="4e63" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我以销售为例，这并不是我最初的图表所要表达的，但这是讨论我所做工作的一种简单方式。这方面的一些其他用例可能希望看到动物行为、员工表现甚至股票价格的变化。</p><p id="582a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最终，当用户面对迅速变得普遍的大规模数据时，仪表板和报告需要能够只提取最重要的趋势。通过减少甚至消除分析师做这件事所花费的时间，我们可以专注于发现事情背后的原因。</p></div></div>    
</body>
</html>