<html>
<head>
<title>An Easy Way to Replace Values in a Pandas DataFrame</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一种简单的方法来替换熊猫数据帧中的值</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/an-easy-way-to-replace-values-in-a-pandas-dataframe-2826bd34e59a?source=collection_archive---------2-----------------------#2021-07-25">https://towardsdatascience.com/an-easy-way-to-replace-values-in-a-pandas-dataframe-2826bd34e59a?source=collection_archive---------2-----------------------#2021-07-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="4d4c" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">大蟒</h2><div class=""/><div class=""><h2 id="0bbd" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用内置的Pandas方法进行高级数据处理和字符串操作</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/0c59fa4e07426cea874ea10001200afe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5J2qGo1deya2X1tRA0HjPQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">我天才姐姐的封面艺术</p></figure><p id="eee1" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">Pandas库被广泛用作数据处理和分析工具，用于从数据中清理和提取洞察力。</p><p id="398c" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在处理数据时，作为预处理步骤的一部分，您通常需要编辑或移除某些数据。这可能涉及从现有的列创建新的列，或者修改现有的列，使它们适合更容易使用的框架。为此，Pandas提供了多种方法，您可以使用这些方法来处理数据帧中所有数据类型的列。</p><p id="be96" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这一部分中，让我们具体看一下在数据帧中替换列中的值和子字符串。当您想要替换列中的每个值或者只想编辑值的一部分时，这将非常方便。</p><p id="78ae" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果你想继续，在这里下载数据集<a class="ae md" href="https://www.kaggle.com/mokosan/lord-of-the-rings-character-data?select=WordsByCharacter.csv" rel="noopener ugc nofollow" target="_blank">并加载下面的代码。</a></p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="c437" class="mj mk it mf b gy ml mm l mn mo">import pandas as pd<br/>df = pd.read_csv('WordsByCharacter.csv')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/9c040c21506aa9816fc02f7be08e719a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*f2_1hSoZX7xvZ3BxtILq2w.png"/></div></figure><p id="1d65" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们开始吧！</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="da8a" class="mx mk it bd my mz na nb nc nd ne nf ng ki nh kj ni kl nj km nk ko nl kp nm nn bi translated">使用“替换”来编辑熊猫数据帧系列(列)中的字符串</h1><p id="379c" class="pw-post-body-paragraph lh li it lj b lk no kd lm ln np kg lp lq nq ls lt lu nr lw lx ly ns ma mb mc im bi translated">Pandas中的replace方法允许您在数据帧中的指定系列中搜索值，以找到可以更改的值或子字符串。首先，让我们快速地看一下如何对表中的“Film”列进行简单的更改，将“Of Of Of”改为“Of Of”。</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="43cb" class="mj mk it mf b gy ml mm l mn mo"># change "Of The" to "of the" - simple regex<br/>df["Film"].replace("Of The", "of the")  # won't work if you do this<br/>df["Film"].replace("Of The", "of the", regex=True)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/d841690b7ea9b90dca4bfe3a7970b182.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*WkZ10czY54UzlkymVuVxwA.png"/></div></figure><p id="af6f" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">上面，我们所做的只是将我们正在寻找的子字符串作为第一个参数传递给<code class="fe nu nv nw mf b">replace</code>方法，然后将我们想要替换的值作为第二个参数传递给它。您将会看到，我们还必须通过<code class="fe nu nv nw mf b">regex=True</code>才能让操作运行。否则，<code class="fe nu nv nw mf b">replace</code>方法只会改变“属于”的列值，因为它只会匹配整个值。</p><p id="4a5f" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">通过匹配精确的字符串并提供您想要更改的整个值，您可以完成与上面相同的事情，如下所示。</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="d0a2" class="mj mk it mf b gy ml mm l mn mo">df["Film"].replace("The Fellowship Of The Ring", "The Fellowship of the Ring")</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/0b3d73b1dab727a3b9ed20132350cdfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:886/format:webp/1*58ZBYUtT8v6LFMw_2GFb0A.png"/></div></figure><p id="e23a" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这种方法的问题是，您必须逐个匹配值。也就是说，您需要传递您想要更改的每个值，以及您想要将其更改为什么值。在某些情况下，使用查找和替换匹配您定义的正则表达式的所有内容可能更容易。</p><p id="f333" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">然而，在您想要将不同的值更改为不同的替换值的情况下，您不必多次调用<code class="fe nu nv nw mf b">replace</code>方法。相反，您可以简单地传递一个字典，其中键是您想要搜索的列值，值是您想要用来替换原始值的值。下面可以看到一个简单的例子。</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="8097" class="mj mk it mf b gy ml mm l mn mo"># you can do multiple replacements in within one call of the replace method by creating a mapping dictionary<br/># very scalable woo<br/>replacement_mapping_dict = {<br/>    "The Fellowship Of The Ring": "The Fellowship of the Ring",<br/>    "The Return Of The King": "The Return of the King"<br/>}<br/>df["Film"].replace(replacement_mapping_dict)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/1aa09e352adc691dbdc1eac3e15dbf29.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*V904li7tpj9H4DqIPrPXNA.png"/></div></figure></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><p id="204c" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">之前，我们只是简单地传递了<code class="fe nu nv nw mf b">regex=True</code>,这样我们就可以在子字符串上进行匹配。让我们更进一步，写一些正则表达式来匹配。您会在“章节”栏中看到，章节名称前面有章节号和冒号。让我们做一点数据清理，并在<code class="fe nu nv nw mf b">replace</code>方法中使用regex删除这些数据。</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="db0d" class="mj mk it mf b gy ml mm l mn mo"># remove number number colon from "Chapter" - bit more complex regex example<br/># regex is just &lt;= 3 repetitions of any numeric character (0-9) immediately followed by a colon and a space<br/>df["Chapter"].replace(r"\d{,3}: ", "", regex=True)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/a0e4d3e1d4090a2fea2e99c89a3080c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*dRs76fOUyWAs92W7BYGEdw.png"/></div></figure><p id="0e5a" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们所做的就是传递<code class="fe nu nv nw mf b">r"\d{,3}: "</code>来匹配一个重复三次或更少的数字字符，后跟一个冒号和一个空格(这将捕获“01:“”、“02:“”、…、“100:”等等)。每当在列值中发现这一点时，它就会从字符串中删除，因为我们传递的第二个参数是一个空字符串。</p><p id="450f" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">或者，如果您不想在每次调用<code class="fe nu nv nw mf b">replace</code>方法时都传递<code class="fe nu nv nw mf b">regex=True</code>，那么您可以通过下面的方法实现相同的结果:</p><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="3b6b" class="mj mk it mf b gy ml mm l mn mo"># alternate way of doing the same thing (instead of having to pass regex=True at the end)<br/># if you had multiple things you want to replace you can put them all in a list<br/>regex_list = [r"\d{,3}: ", r"The "]<br/>df["Chapter"].replace(regex=regex_list, value="")</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/aefcf6ca6d178f24e2ac6c91b6fc6196.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/1*6HN9cAqZj1GnrzfiHzomEQ.png"/></div></figure><p id="b874" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">结果和之前的一样，只是有一些不同，使得这个方法更加清晰。首先，如果您想要匹配多个正则表达式，您可以在一个列表中定义它们，并在<code class="fe nu nv nw mf b">replace</code>方法中将其作为关键字参数传递。然后，您需要显式地传递另一个关键字参数<code class="fe nu nv nw mf b">value</code>来定义您想要的替换值。有人(包括你未来的自己)看着你的代码可能会很容易理解它做了什么，并对它进行扩展。</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ob"><img src="../Images/6fe5bc04f6449a3523c92bcd0cb9d100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v1NZQb2H6-5Ix7cGKZZd7g.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">我才华横溢的哥哥的页脚艺术</p></figure><p id="a0b8" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">仅此而已！</p><p id="9833" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">对于清理数据来说，这是一个相当常见的过程，所以我希望这个对Pandas <code class="fe nu nv nw mf b">replace</code>方法的快速介绍对您自己的工作有用。熊猫能提供的还有很多，所以请随意查看我在上面的一些其他作品，以获得更多关于你可以轻松利用熊猫做什么的实际例子。</p><p id="7be1" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">祝您的数据之旅好运！</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><pre class="ks kt ku kv gt me mf mg mh aw mi bi"><span id="ae74" class="mj mk it mf b gy ml mm l mn mo"><strong class="mf jd">More by me:<br/></strong>- <a class="ae md" rel="noopener" target="_blank" href="/check-for-a-substring-in-a-pandas-dataframe-column-4b949f64852?sk=bfb5bbab11ae45c47bfb316d931c3b56">Check for a Substring in a Pandas DataFrame</a><br/>- C<a class="ae md" rel="noopener" target="_blank" href="/conditional-selection-and-assignment-with-loc-in-pandas-2a5d17c7765b?sk=e5672d859a3964c1453a1c09edca22cf">onditional Selection and Assignment With .loc in Pandas</a><br/>- <a class="ae md" rel="noopener" target="_blank" href="/2-easy-ways-to-get-tables-from-a-website-with-pandas-b92fc835e741?sk=9981ddaf0785a79be893b5a1dd3e03dd">2 Easy Ways to Get Tables From a Website With Pandas</a><br/>- <a class="ae md" rel="noopener" target="_blank" href="/5-and-a-half-lines-of-code-for-understanding-your-data-with-pandas-aedd3bec4c89?sk=7007a1ae248cf7ea4ef5fcd4af7ae72b">5 (and a half) Lines of Code for Understanding Your Data with Pandas</a><br/>- <a class="ae md" rel="noopener" target="_blank" href="/top-4-repositories-on-github-to-learn-pandas-1008cb769f77?source=friends_link&amp;sk=d3acc38062490a86ecb46875342224e6">Top 4 Repositories on GitHub to Learn Pandas</a></span></pre></div></div>    
</body>
</html>