<html>
<head>
<title>Creating a Simple Map with Folium and Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用leav和Python创建一个简单的地图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/creating-a-simple-map-with-folium-and-python-4c083abfff94?source=collection_archive---------1-----------------------#2021-06-15">https://towardsdatascience.com/creating-a-simple-map-with-folium-and-python-4c083abfff94?source=collection_archive---------1-----------------------#2021-06-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0ae4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何获得自行车租赁位置数据，创建一个简单的地图，并在Python中使用Folium为每个位置添加点。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/32043af45492e604ff0f719d92d7dd2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YxXo_LYj83Chp8C1"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@calvinhanson?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卡尔文·汉森</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="af7c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通常，在处理数据时，您可以访问地理空间要素，如纬度和经度坐标。绘制这些图会很有趣，可以了解数据集的实例是如何分布在不同位置的。</p><p id="aeab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇短文中，我介绍了获取自行车租赁位置数据并在地图上显示这些位置的步骤。我使用Dublin Bikes数据(<a class="ae kv" href="https://data.smartdublin.ie/dataset/dublinbikes-api" rel="noopener ugc nofollow" target="_blank">https://data.smartdublin.ie/dataset/dublinbikes-api</a>)和叶库(<a class="ae kv" href="https://python-visualization.github.io/folium/" rel="noopener ugc nofollow" target="_blank">https://python-visualization.github.io/folium/</a>)，正如文档所说，“建立在Python生态系统的数据角力优势和<code class="fe ls lt lu lv b">leaflet.js</code>库的映射优势之上”。有关传单的更多信息，请参见此处的<a class="ae kv" href="https://leafletjs.com" rel="noopener ugc nofollow" target="_blank">文档。</a></p><h2 id="bd5f" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">要求</h2><p id="6726" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">我用的是Python 3.7，叶子0.12.1，熊猫1.2.4。我也在<a class="ae kv" href="https://anaconda.org/anaconda/anaconda-navigator" rel="noopener ugc nofollow" target="_blank"> Anaconda Navigator中使用Jupyter笔记本。</a></p><h2 id="3c5c" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">数据</h2><p id="8c32" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">我正在处理的数据来自<a class="ae kv" href="https://data.smartdublin.ie/dataset/dublinbikes-api" rel="noopener ugc nofollow" target="_blank">都柏林自行车应用编程接口</a>，特别是自行车租赁站的位置:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="ebc4" class="lw lx iq lv b gy my mz l na nb"><a class="ae kv" href="https://data.smartdublin.ie/dataset/33ec9fe2-4957-4e9a-ab55-c5e917c7a9ab/resource/2dec86ed-76ed-47a3-ae28-646db5c5b965/download/dublin.csv" rel="noopener ugc nofollow" target="_blank">https://data.smartdublin.ie/dataset/33ec9fe2-4957-4e9a-ab55-c5e917c7a9ab/resource/2dec86ed-76ed-47a3-ae28-646db5c5b965/download/dublin.csv</a></span></pre><h1 id="3a06" class="nc lx iq bd ly nd ne nf mb ng nh ni me jw nj jx mh jz nk ka mk kc nl kd mn nm bi translated">步骤1-进口熊猫和叶子</h1><p id="a7bd" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">和往常一样，第一步是导入库:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="9340" class="lw lx iq lv b gy my mz l na nb">import pandas as pd<br/>import folium</span></pre><h1 id="a26f" class="nc lx iq bd ly nd ne nf mb ng nh ni me jw nj jx mh jz nk ka mk kc nl kd mn nm bi translated">步骤2-获取自行车站点位置并保存到熊猫数据框</h1><p id="f00c" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">使用Pandas，我可以直接找到我想要的CSV文件的位置:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="b4a4" class="lw lx iq lv b gy my mz l na nb">location = "<a class="ae kv" href="https://data.smartdublin.ie/dataset/33ec9fe2-4957-4e9a-ab55-c5e917c7a9ab/resource/2dec86ed-76ed-47a3-ae28-646db5c5b965/download/dublin.csv" rel="noopener ugc nofollow" target="_blank">https://data.smartdublin.ie/dataset/33ec9fe2-4957-4e9a-ab55-c5e917c7a9ab/resource/2dec86ed-76ed-47a3-ae28-646db5c5b965/download/dublin.csv</a>"</span><span id="1dab" class="lw lx iq lv b gy nn mz l na nb">bike_station_locations = pd.read_csv(location)</span></pre><p id="f066" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我有了自行车_车站_位置数据框架:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/b4274d40f19db9864d20a4428de20a97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_U4hMsfcdWlcKYbF7ahVkA.png"/></div></div></figure><h1 id="838c" class="nc lx iq bd ly nd ne nf mb ng nh ni me jw nj jx mh jz nk ka mk kc nl kd mn nm bi translated">步骤3 —仅保留我需要的列</h1><p id="fb0e" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">我想保留位置的<em class="np">纬度</em>、<em class="np">经度</em>和<em class="np">名称</em>。前两列将允许我映射位置，后一列将用于为每个位置引脚命名:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="351f" class="lw lx iq lv b gy my mz l na nb">bike_station_locations = bike_station_locations[["Latitude", "Longitude", "Name"]]</span></pre><h1 id="36f8" class="nc lx iq bd ly nd ne nf mb ng nh ni me jw nj jx mh jz nk ka mk kc nl kd mn nm bi translated">步骤4-创建地图</h1><p id="2026" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">对于地图，第一步是创建一个我想要的位置的地图。使用位置参数，我传入纬度和经度坐标的平均值，我必须将地图放在那里。</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="269d" class="lw lx iq lv b gy my mz l na nb">map = folium.Map(location=[bike_station_locations.Latitude.mean(), bike_station_locations.Longitude.mean()], zoom_start=14, control_scale=True</span></pre><p id="e437" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将给出一张空白地图，以先前给出的位置为中心，缩放至14。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/2320b87c59bb46dc47d25802c7d090f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wIjwmaFKG0Kz9p-y9YP39Q.png"/></div></div></figure><h1 id="ce71" class="nc lx iq bd ly nd ne nf mb ng nh ni me jw nj jx mh jz nk ka mk kc nl kd mn nm bi translated">步骤5-向地图添加点</h1><p id="013c" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">现在，我将每个自行车站位置的点添加到地图上。遍历数据帧的每一行，我将位置纬度和经度传递给叶子。标记为列表，并将名称传递给popup参数。对于我添加到地图上的每个位置:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="7ae2" class="lw lx iq lv b gy my mz l na nb">for index, location_info in bike_station_locations.iterrows():<br/>    folium.Marker([location_info["Latitude"], location_info["Longitude"]], popup=location_info["Name"]).add_to(map)</span></pre><p id="93ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我显示地图:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/6293a3492dae62823957e1b028a773a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qGzFfghRKgE-_Zay2aCXcA.png"/></div></div></figure><p id="d265" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意:默认情况下，地图使用OpenStreetMap切片，尽管在创建地图时可以通过添加参数<em class="np">切片</em>参数和值来使用其他选项。这里的<a class="ae kv" href="https://python-visualization.github.io/folium/modules.html" rel="noopener ugc nofollow" target="_blank">文档里有例子。</a></p><p id="a8ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">更多关于OpenStreetMap的信息，可以在这里找到<a class="ae kv" href="https://www.openstreetmap.org/#map=3/71.34/-96.82" rel="noopener ugc nofollow" target="_blank"/>。</p><h1 id="0f1b" class="nc lx iq bd ly nd ne nf mb ng nh ni me jw nj jx mh jz nk ka mk kc nl kd mn nm bi translated">结论</h1><p id="fd03" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">将flour与Python结合使用是开始绘制地理空间数据的一个很好的方式。只需几行代码，就可以组合出基本的地图。还有许多其他选项可用，文档也非常值得研究。</p><p id="47ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Jupyter笔记本可用<a class="ae kv" href="https://github.com/LiamConnors/Medium-articles/blob/6234dc87107ea87e6629422d0a815d139f580558/Creating%20a%20Simple%20Map%20with%20Folium%20and%20Python/Day%2027%20-Plotting%20Dublin%20Bikes%20rental%20stations.ipynb" rel="noopener ugc nofollow" target="_blank">此处</a>。</p></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><p id="be44" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所有截图均为作者拍摄。由<a class="ae kv" href="https://unsplash.com/@calvinhanson?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Calvin Hanson </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上制作的介绍性图片。</p></div></div>    
</body>
</html>