<html>
<head>
<title>Power BI Modelling —tips and tricks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">功率 BI 建模——技巧和窍门</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/power-bi-modelling-tips-and-tricks-9726e1d9085b?source=collection_archive---------26-----------------------#2021-12-21">https://towardsdatascience.com/power-bi-modelling-tips-and-tricks-9726e1d9085b?source=collection_archive---------26-----------------------#2021-12-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9bc6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一些有用的提示和功能，我希望我能早点知道</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0bc140b270099ec47a99101ad09a8adb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2E1QgvAfo7ehSoMr"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">托德·迪默在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="1616" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">拥有一个简单的数据模型是很棒的。你知道为什么吗？因为有一个简单的模型会让生活变得容易得多！就像下雨天有把伞。</p><p id="bdb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你的模型简单了就好解释了。最重要的是，它更容易解决问题。</p><p id="e01d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将介绍一个经过简化的模型，以及一些可以帮助您进行故障排除的工具。</p><p id="e18c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我遇到的一个模特。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/c79dffda91371d529fe46e5ef2ca1473.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gv11cC7R6ODbiOMoXxHBpg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="6bad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">位置 A、B、C 和 D 是包含销售日期、销售数量和销售人员的表格。</p><p id="53f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有一个很棒的日期表。</p><p id="410b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">侧面还有两个维度表，用于区分高绩效者和其他人。</p><p id="83b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，你仍然可以像这样进行一些分析。但是请注意每个事实表(位置 A、B、C 和 D)是如何分开的？</p><p id="8164" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是问题所在——您必须创建 4 个不同的度量来计算一个指标。(您必须创建销售位置 A、位置 B 等的总和的度量)。这不是有效的，而且很容易出错。</p><p id="2afb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有维度表的问题，如果这些表是为了通过表现来区分个人，那么可以将它们合并成一个主题或维度表。</p><p id="35c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们该如何简化这一点？</p><p id="9f86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过组合事实表和维度表来简化这一点，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lw"><img src="../Images/a673e34022980a089264a07cce06e29f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D8Lx7yUHRMFdpAi7u-0kmA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="5809" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看到这个模型有多简单了吗？</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="a399" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">两种合并表格的方法。</h1><p id="f175" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">让我们来谈谈合并数据表的两个选项。</p><p id="81c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有两个选项，DAX 和 Power Query。</p><h2 id="e15a" class="nb mf it bd mg nc nd dn mk ne nf dp mo li ng nh mq lm ni nj ms lq nk nl mu nm bi translated">使用 DAX 将表追加到一起。</h2><p id="bb42" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">不建议这样做，但不管怎样我们还是要穿过去，因为这样最快；您不必将任何数据重新加载到模型中。</p><p id="d4cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要在 DAX 中做到这一点，您可以使用 UNION 函数并将表追加到一起。将它与前面的维度表连接起来。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="b17a" class="nb mf it no b gy ns nt l nu nv">Combined_Sale_Tables = UNION(Table_A,Table_B,Table_C,Table_D)</span></pre><p id="ce30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你不需要 4 种不同的方法来衡量销售了！只有一个。</p><p id="5fcf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是模型现在的样子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/633575852795a43a620a67860b922bbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rdLiQrJ4MGcVinRckNS9GQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="e641" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有一个小问题。</p><p id="9c3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">组合事实表没有位置名称，因为它们本来就不在那里。</p><p id="29ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过使用 SUMMARIZECOLUMNS 来解决这个问题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/2908c68650416eb1d5042e1c3c00d308.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*5yPiDhelafUOGvOfR6aX1g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="a0e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">缺点是您的模型中会有多个表。</p><p id="361a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，你可以隐藏它们，但它仍然杂乱。另外，除非特别说明，否则其他用户可能不知道您为什么决定将它们附加在一起。</p><p id="b53b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最大的缺点是，如果列名和列号不同，您可能需要做一些工作。</p><h2 id="979a" class="nb mf it bd mg nc nd dn mk ne nf dp mo li ng nh mq lm ni nj ms lq nk nl mu nm bi translated">使用 Power Query 将表追加到一起</h2><p id="e09a" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">现在让我们使用下面的 append 方法来尝试 Power Query。</p><p id="2edf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">电力查询&gt;首页&gt;追加查询</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/d29f34036117a9e9b3da4dcbdf9eec7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X_5aCe3SGXCwx4G51As_Pg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="1db8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种方法的优点是适应性更强；无论您是否有列标题困难、额外的列或数据格式问题，Power Query 都可以很好地处理它们。</p><p id="7a6b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">缺点是速度，您需要将这些数据重新加载到模型中。如果你有一个大模型，这可能是一个令人头痛的问题。</p><p id="ef23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">DAX 和 Power Query 都是简化事实表的好选择，但是如果您手头拮据，可以尝试 DAX，但是如果您有一点时间，可以使用 Power Query。</p><p id="5aaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用这两种方法中的任何一种，您都会得到相同的模型。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/633575852795a43a620a67860b922bbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rdLiQrJ4MGcVinRckNS9GQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="fee7" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">让我们让生活变得更简单。</h1><p id="01d1" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">现在，让我们来看看两个非常有用的功能，它们会让你的生活更轻松。</p><p id="6322" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些是 INTERSECT，EXCEPT 和 VALUES 函数。</p><h2 id="c7a7" class="nb mf it bd mg nc nd dn mk ne nf dp mo li ng nh mq lm ni nj ms lq nk nl mu nm bi translated">使用带有值的 EXCEPT 函数来标识异常。</h2><p id="3aea" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">假设 HR 找到你说:“我这里有一份销售员工的名单，你能看看他们是否都做了销售吗？”</p><p id="7528" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是发给你的表格。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/f881305031b0241e6c674c8294c8ce03.png" data-original-src="https://miro.medium.com/v2/resize:fit:312/format:webp/1*6VFZ6latYUZIHoyc5_W41A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="aa5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们用除和值☺</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="c1ea" class="nb mf it no b gy ns nt l nu nv">Table_EXCEPTIONS = EXCEPT(Sale_Person_All,VALUES(Combined_Sale_Tables[Sales Person]))<br/></span></pre><p id="c72c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">VALUES 在 Combined_Sales_Tables 中创建一列唯一值(销售人员姓名), EXCEPT 针对发送给我们的表创建一个左反联接。</p><p id="b46f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/b1d1ba421a6279394984e184e0b2fd71.png" data-original-src="https://miro.medium.com/v2/resize:fit:356/format:webp/1*zCAHadunDtUpA1_QXaASeg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="a23a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用此功能，可以识别三个名称。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h2 id="d732" class="nb mf it bd mg nc nd dn mk ne nf dp mo li ng nh mq lm ni nj ms lq nk nl mu nm bi translated">使用带值的 INTERSECT 函数来标识交点。</h2><p id="701b" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">类似地，如果你与 INTERSECT 交换代码，你将能够在 HR 发送的表格中看到每一个成交的人。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="2521" class="nb mf it no b gy ns nt l nu nv">Table_INTERSECT = INTERSECT(Sale_Person_All,VALUES(Combined_Sale_Tables[Sales Person]))</span></pre><p id="8e6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是结果</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/4bf7afde37ce392ce5ca3f5d02bf0574.png" data-original-src="https://miro.medium.com/v2/resize:fit:288/format:webp/1*Y_ZJUMLbzYPTLw3jC2Lkgw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="3230" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">概括一下，</p><p id="2522" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">建模</strong> —如果您看到多个事实表或维度表四处浮动，请尝试合并它们。</p><p id="bb26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">表格检查</strong> —使用 EXCEPT 和 INTERSECT with 值查找表格之间的差异。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="43eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据建模很有趣！</p><p id="fff2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽可能保持简单。结果会让你大吃一惊！</p><p id="ea19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">暂时就这样了。在您的数据之旅中保持安全并祝好运。</p></div></div>    
</body>
</html>