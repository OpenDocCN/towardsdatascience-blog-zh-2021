<html>
<head>
<title>Jenkins for CI Is Dead: Why Do People Hate It and What’s the Alternative?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">詹金斯为CI死了:为什么人们讨厌它，有什么替代方案？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/jenkins-for-ci-is-dead-why-do-people-hate-it-and-whats-the-alternative-8d8b6b88fdba?source=collection_archive---------2-----------------------#2021-06-24">https://towardsdatascience.com/jenkins-for-ci-is-dead-why-do-people-hate-it-and-whats-the-alternative-8d8b6b88fdba?source=collection_archive---------2-----------------------#2021-06-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a405" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何自动建立你的Docker图像；案例研究。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d3942d2f96c7a0fdc88129a47e2877b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C254V2h8BfjR6S7DIsSonA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">艾米莉·法里斯在<a class="ae ky" href="https://unsplash.com/s/photos/chef?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="c56f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Jenkins是一个独立的、开源的自动化服务器，提供了用于Windows、Mac OS X和其他类似Unix的操作系统的软件包。</p><p id="c878" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你访问该项目的<a class="ae ky" href="https://www.jenkins.io/" rel="noopener ugc nofollow" target="_blank">登陆页面</a>，它会告诉你Jenkins是领先的开源自动化服务器，拥有数百个插件来支持任何项目的构建、部署和自动化。</p><p id="5d6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种说法可能是对的，但这并不意味着Jenkins提供了一种简单直接的方法来实现这一切。相反，它提供了数百个插件，如果你想完成任何事情，你都需要设置这些插件，这使得这个项目既通用又复杂。</p><p id="821b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个故事中，我们看到了为什么如果你想在2021年建立一个持续集成(CI)管道，Jenkins不是合适的选择，以及有什么替代方案。如果你有任何疑问，可以在评论区开始讨论！</p><blockquote class="lv lw lx"><p id="4eb3" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated"><a class="ae ky" href="https://www.dimpo.me/newsletter?utm_source=medium&amp;utm_medium=article&amp;utm_campaign=jenkins" rel="noopener ugc nofollow" target="_blank"> Learning Rate </a>是为那些对AI和MLOps的世界感到好奇的人准备的时事通讯。你会在每周五收到我关于最新人工智能新闻和文章的更新和想法。订阅<a class="ae ky" href="https://www.dimpo.me/newsletter?utm_source=medium&amp;utm_medium=article&amp;utm_campaign=jenkins" rel="noopener ugc nofollow" target="_blank">这里</a>！</p></blockquote></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><h1 id="c4c4" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">自动构建您的Docker图像</h1><p id="47a6" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">我相信很多阅读这篇文章的人都喜欢詹金斯。我相信你们中的很多人现在都很愤怒。也许你已经花了几个月的时间来学习Jenkins，并真正深入到了它的内部。如果你处在类似的位置，我可以理解你为什么还不准备放弃。</p><p id="c711" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了试图说服你，我将用一个简单的例子。今天我将介绍最流行的CI用例:如何自动化构建和推送Docker映像的过程。</p><p id="c2ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，这不是一个关于如何用Jenkins构建和推送Docker映像的教程。相反，我将只提供一个高层次的观点。因此，假设您已经有了一个将代码推送到Github的存储库，下面是实现最终目标所需的步骤:</p><ol class=""><li id="9cb4" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated">安装Jenkins: Jenkins通常作为一个独立的应用程序在它自己的进程中运行，带有内置的Java servlet容器/应用服务器(Jetty)。但是，您也可以使用官方Docker映像在容器中运行Jenkins。</li><li id="e961" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">与GitHub集成:你可以通过浏览器(通常在<code class="fe nu nv nw nx b">localhost:8080</code>上)访问Jenkins并创建一个新项目。您应该指定GitHub存储库URL地址，何时触发构建，以及目标命令。</li><li id="0ddd" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">安装Docker插件:要构建图像并将其推送到存储库(例如Dockerhub)，您需要安装一个新的插件。例如，您可以安装Docker插件、Docker构建步骤和CloudBees Docker构建和推送插件。</li><li id="bc7a" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">配置Docker插件:您应该在Jenkins UI中指定一个新的构建步骤，利用新安装的插件。此外，您应该指定您想要将图像推入的注册表、图像名称和标记以及您的凭证。</li></ol><h1 id="edc4" class="mj mk it bd ml mm ny mo mp mq nz ms mt jz oa ka mv kc ob kd mx kf oc kg mz na bi translated">为什么这样不好？</h1><p id="8050" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">现在我们已经看到了这个过程，你可能会说这还不算太糟。只需四步。然而，有些步骤并不容易跨越:</p><ul class=""><li id="1b9d" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu od nm nn no bi translated">Jenkins实例通常太复杂。这意味着组织需要一名Jenkins专家来安装、维护和保护实例。</li><li id="1f7b" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu od nm nn no bi translated">专家成为瓶颈。作为开发人员，您依赖Jenkins专家或管理员来创建新项目、构建、发布等。这很快成为一个漫长的过程。</li><li id="ff0f" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu od nm nn no bi translated">自助服务寻求者将创建新的、不安全的Jenkins实例来解决专家瓶颈问题。此外，他们还会不经测试就安装新插件，引入漏洞。</li><li id="0b70" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu od nm nn no bi translated">通常，在开始使用Jenkins之前，你需要安装大量的插件。不幸的是，这使得实例过于复杂，难以导航，而且Jenkins控制器的速度也慢了下来。</li><li id="a915" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu od nm nn no bi translated">您可能不希望在自动化工具上做这么多手工工作。Jenkins很难有效地扩展。并不是所有的插件都受<code class="fe nu nv nw nx b">Jenkinsfile</code>支持，所以一个Jenkins实例很难在没有手工操作的情况下备份。此外，数据库只是磁盘上的XML文件，这使得纵向扩展或横向扩展或执行高可用性升级成为一场噩梦。</li><li id="5bfd" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu od nm nn no bi translated">Jenkins需要一台专用服务器(或几台服务器)来运行。这导致了额外的费用。通常情况下，一个组织需要有一个DevOps团队专门负责Jenkins。</li></ul><h1 id="41fc" class="mj mk it bd ml mm ny mo mp mq nz ms mt jz oa ka mv kc ob kd mx kf oc kg mz na bi translated">有什么选择？</h1><p id="2010" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">对于CI，也许不仅仅是CI，我更喜欢使用GitHub动作。那么，如何用GitHub动作构建和推送Docker图片呢？让我们看看步骤:</p><ol class=""><li id="f447" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated">设置:在项目的根文件夹中创建一个新文件夹。把它命名为<code class="fe nu nv nw nx b">.github/workflows</code>。</li><li id="35e8" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">配置:在您创建的<code class="fe nu nv nw nx b">workflows</code>文件夹中添加一个新的YAML配置文件。这个文件看起来有点像<a class="ae ky" href="https://raw.githubusercontent.com/dpoulopoulos/techtrends/master/.github/workflows/techtrends-dockerhub.yaml" rel="noopener ugc nofollow" target="_blank">这个</a>。一系列步骤，每一步都做一件简单的事情。</li><li id="2f0c" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">认证:将你的注册中心(例如Dockerhub)的证书作为一个<a class="ae ky" href="https://docs.github.com/en/actions/reference/encrypted-secrets" rel="noopener ugc nofollow" target="_blank">加密的秘密</a>添加到你的项目中。</li><li id="ea4c" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">Run:开始这个过程所需要的只是将新的代码提交到GitHub。</li></ol><p id="d835" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最重要的事？无需安装、配置、维护、升级或修补。一切都运行在GitHub服务器上，你不必在意。此外，有了<a class="ae ky" href="https://github.com/marketplace" rel="noopener ugc nofollow" target="_blank"> GitHub marketplace </a>(把它当成Jenkins插件的替代品)，你几乎可以做任何事情。</p><h1 id="6397" class="mj mk it bd ml mm ny mo mp mq nz ms mt jz oa ka mv kc ob kd mx kf oc kg mz na bi translated">结论</h1><p id="6098" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">Jenkins是领先的开源自动化服务器，拥有数百个插件来支持任何项目的构建、部署和自动化。</p><p id="aeb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，Jenkins的方法并不是建立CI渠道的简单直接的方法。安装、维护、插件、安全，等等，使得过程变得缓慢，制造瓶颈，并引入漏洞。</p><p id="86ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个故事展示了使用Jenkins和GitHub操作自动构建和推送Docker图像所需的步骤。在我看来，使用像GitHub Actions这样的工具就像用Jenkins的方式一样。你有什么看法？</p><h1 id="5325" class="mj mk it bd ml mm ny mo mp mq nz ms mt jz oa ka mv kc ob kd mx kf oc kg mz na bi translated">关于作者</h1><p id="4c22" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">我叫<a class="ae ky" href="https://www.dimpo.me/?utm_source=medium&amp;utm_medium=article&amp;utm_campaign=jenkins" rel="noopener ugc nofollow" target="_blank"> Dimitris Poulopoulos </a>，是一名为<a class="ae ky" href="https://www.arrikto.com/" rel="noopener ugc nofollow" target="_blank"> Arrikto </a>工作的机器学习工程师。我曾为欧洲委员会、欧盟统计局、国际货币基金组织、欧洲央行、经合组织和宜家等主要客户设计和实施过人工智能和软件解决方案。</p><p id="fb9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有兴趣阅读更多关于机器学习、深度学习、数据科学和数据操作的帖子，请关注我的<a class="ae ky" href="https://towardsdatascience.com/medium.com/@dpoulopoulos/follow" rel="noopener" target="_blank"> Medium </a>、<a class="ae ky" href="https://www.linkedin.com/in/dpoulopoulos/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>或Twitter上的<a class="ae ky" href="https://twitter.com/james2pl" rel="noopener ugc nofollow" target="_blank"> @james2pl </a>。</p><p id="291d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所表达的观点仅代表我个人，并不代表我的雇主的观点或意见。</p></div></div>    
</body>
</html>