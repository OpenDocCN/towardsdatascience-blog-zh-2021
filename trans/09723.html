<html>
<head>
<title>Empowering Docker using Tkinter GUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Tkinter GUI增强Docker的能力</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/empowering-docker-using-tkinter-gui-bf076d9e4974?source=collection_archive---------5-----------------------#2021-09-11">https://towardsdatascience.com/empowering-docker-using-tkinter-gui-bf076d9e4974?source=collection_archive---------5-----------------------#2021-09-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="48ce" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过Docker的GUI对于许多应用程序来说是至关重要的。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9752bc268953d213f43f35f03318a384.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BIZihqfnhsar9OZzM1Njng.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">边境摄影师在<a class="ae kv" href="https://unsplash.com" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片。</p></figure><p id="e603" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi ls translated"><span class="l lt lu lv bm lw lx ly lz ma di">在</span>几种情况下，创建一个可以在Docker中访问的图形用户界面(GUI)会很有用，例如在开发需要可视化图像和视频的机器学习应用程序时。但是，需要几个步骤才能在主机上查看GUI。在本文中，我们将使用Tkinter在Python中创建一个简单的GUI，可以通过Docker访问它。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h2 id="486c" class="mi mj iq bd mk ml mm dn mn mo mp dp mq lf mr ms mt lj mu mv mw ln mx my mz na bi translated">目录</h2><p id="209f" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">在本文中，我们将涵盖几个步骤。前两步是在Docker中运行Tkinter GUI应用程序所必需的。其他步骤是可选的，用于获得如何使用Tkinter和Docker增强开发阶段的额外信息。这些步骤是:</p><ol class=""><li id="2dc3" class="ng nh iq ky b kz la lc ld lf ni lj nj ln nk lr nl nm nn no bi translated">使用Tkinter创建非常简单的应用程序。</li><li id="d198" class="ng nh iq ky b kz np lc nq lf nr lj ns ln nt lr nl nm nn no bi translated">创建一个简单的Docker映像，并在Docker容器中运行Tkinter应用程序。</li><li id="b7fe" class="ng nh iq ky b kz np lc nq lf nr lj ns ln nt lr nl nm nn no bi translated">使用shell脚本简化Docker运行命令。(可选)</li><li id="a382" class="ng nh iq ky b kz np lc nq lf nr lj ns ln nt lr nl nm nn no bi translated">允许GUI的持续开发。(可选)</li></ol><h2 id="1d54" class="mi mj iq bd mk ml mm dn mn mo mp dp mq lf mr ms mt lj mu mv mw ln mx my mz na bi translated">先决条件</h2><p id="8f08" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">本文只在Linux上测试过，可能不适用于其他操作系统。你也应该已经安装了Docker。</p><h2 id="8af7" class="mi mj iq bd mk ml mm dn mn mo mp dp mq lf mr ms mt lj mu mv mw ln mx my mz na bi translated">目录结构</h2><p id="f091" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">下面是目录结构的概述。这些文件将用于本文，因此您可以预先创建它们。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="c77a" class="mi mj iq nv b gy nz oa l ob oc">app/<br/>├─ tkinter_app.py<br/>Dockerfile<br/>run.sh (optional)</span></pre></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="4a2b" class="od mj iq bd mk oe of og mn oh oi oj mq jw ok jx mt jz ol ka mw kc om kd mz on bi translated">Tkinter</h1><p id="9792" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">因为本文的目标是演示如何通过Docker访问GUI，所以创建了一个如下所示的简单窗口。这个GUI包含文本和一个退出应用程序的按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/6a2ece67dc87f8f610493254f23a3583.png" data-original-src="https://miro.medium.com/v2/resize:fit:590/format:webp/1*U_5RndSMc8kklaYBGpy8zw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">简单的Tkinter应用程序。</p></figure><p id="0484" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了创建这个简单的应用程序，使用了下面的代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">创建简单Tkinter应用程序的代码。</p></figure></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="2dd3" class="od mj iq bd mk oe of og mn oh oi oj mq jw ok jx mt jz ol ka mw kc om kd mz on bi translated">码头工人</h1><p id="a8d0" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">然后，应该创建一个docker文件，其中包含以下代码。在这个Docker文件中，我们将Docker映像的基础设置为Python 3.8.12的精简版本。之后，我们更新包信息并安装Tkinter。最后两行用Python运行命令<em class="or"> /app/tkinter_app.py </em>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">创建docker文件的代码。</p></figure><h2 id="e5ab" class="mi mj iq bd mk ml mm dn mn mo mp dp mq lf mr ms mt lj mu mv mw ln mx my mz na bi translated">构建Docker映像</h2><p id="def6" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">在Docker文件所在的目录中，应该执行以下命令来构建Docker映像:</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="cc40" class="mi mj iq nv b gy nz oa l ob oc">docker build -t tkinter_in_docker .</span></pre><p id="2332" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的命令构建了一个名为<em class="or"> tkinter_in_docker </em>的Docker映像。</p><h2 id="251c" class="mi mj iq bd mk ml mm dn mn mo mp dp mq lf mr ms mt lj mu mv mw ln mx my mz na bi translated">运行Docker容器</h2><p id="68de" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">既然已经构建了Docker映像，我们可以运行Docker映像的Docker容器。要做到这一点，需要获得许可，这可能会有一些安全问题。在本文中，我们将采用一种安全的方法。然而，还有其他更安全的方法，在<a class="ae kv" href="http://wiki.ros.org/docker/Tutorials/GUI#The_simple_way" rel="noopener ugc nofollow" target="_blank">这里</a>有所涉及。在本文中，我们将使用以下命令输入我们自己的用户凭证:</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="d2d3" class="mi mj iq nv b gy nz oa l ob oc"># Read the above before pasting<br/>docker run -u=$(id -u $USER):$(id -g $USER) \<br/>           -e DISPLAY=$DISPLAY \<br/>           -v /tmp/.X11-unix:/tmp/.X11-unix:rw \<br/>           -v $(pwd)/app:/app \<br/>           --rm \<br/>           tkinter_in_docker</span></pre><p id="1883" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的代码中，- <em class="or"> u </em>用于设置用户名，- <em class="or"> e </em>用于设置显示，第一个<em class="or"> -v </em>在X11-unix中创建了一个卷来提供显示，第二个<em class="or"> -v </em>创建了另一个卷，Docker容器可以在其中访问我们的Tkinter应用程序，最后我们使用- rm来在使用后自动删除容器。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="db8e" class="od mj iq bd mk oe of og mn oh oi oj mq jw ok jx mt jz ol ka mw kc om kd mz on bi translated">使用Shell脚本简化Docker运行(可选)</h1><p id="4490" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">上面介绍的复杂的Docker run命令可以通过创建一个简单的bash文件来简化，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">简化Docker运行命令的Shell脚本。</p></figure><p id="8896" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要使shell脚本可执行，您可以运行以下命令:</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="128b" class="mi mj iq nv b gy nz oa l ob oc">chmod +x ./run.sh</span></pre><p id="6f9a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您只需使用以下命令即可运行它:</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="1c3a" class="mi mj iq nv b gy nz oa l ob oc">./run.sh</span></pre></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="8098" class="od mj iq bd mk oe of og mn oh oi oj mq jw ok jx mt jz ol ka mw kc om kd mz on bi translated">GUI的持续开发(可选)</h1><p id="e2d0" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">在我们的场景中，我们为应用程序<em class="or"> tkinter_app.py </em>和<em class="or"> </em>准备了一个文件，因此几乎没有理由使用Python在Docker容器中手动运行它。然而，对于较大的应用程序，可能希望在Docker环境中运行单独的脚本，而不是每次都运行同一个脚本。</p><p id="80bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要允许持续开发，请遵循以下步骤:</p><ul class=""><li id="a91c" class="ng nh iq ky b kz la lc ld lf ni lj nj ln nk lr os nm nn no bi translated">注释Docker文件中的第11行和第12行，防止Docker自动运行<em class="or"> tkinter_app.py </em>。</li><li id="72df" class="ng nh iq ky b kz np lc nq lf nr lj ns ln nt lr os nm nn no bi translated">使用以下Docker build命令用新的更改来重建映像:</li></ul><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="02f6" class="mi mj iq nv b gy nz oa l ob oc">docker build -t tkinter_in_docker .</span></pre><ul class=""><li id="ae47" class="ng nh iq ky b kz la lc ld lf ni lj nj ln nk lr os nm nn no bi translated">要运行Docker容器并与之交互，请使用以下命令:</li></ul><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="a9f2" class="mi mj iq nv b gy nz oa l ob oc"># Read "Running Docker Container" before running this command<br/>docker run -u=$(id -u $USER):$(id -g $USER) \<br/>           -e DISPLAY=$DISPLAY \<br/>           -v /tmp/.X11-unix:/tmp/.X11-unix:rw \<br/>           -v $(pwd)/app:/app \<br/>           --rm \<br/>           -it \<br/>           tkinter_in_docker \<br/>           /bin/bash</span></pre><p id="fb4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的命令基于前面的Docker run命令。<em class="or">-添加it </em>是为了在Docker环境中获得一个交互终端，添加<em class="or"> /bin/bash </em>是为了使用bash运行它。如果需要，您可以用shell脚本中的命令替换上面的命令，这在前面已经介绍过了。</p><ul class=""><li id="830f" class="ng nh iq ky b kz la lc ld lf ni lj nj ln nk lr os nm nn no bi translated">导航到位于/app/中的应用程序目录。</li><li id="2c9d" class="ng nh iq ky b kz np lc nq lf nr lj ns ln nt lr os nm nn no bi translated">使用命令运行应用程序:</li></ul><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="38fc" class="mi mj iq nv b gy nz oa l ob oc">python tkinter_app.py</span></pre><p id="50bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为我们已经通过Docker run命令设置了一个共享卷，所以我们现在能够在本地使用一个IDE并不断地改变我们的应用程序，而不需要重新启动Docker容器。</p><p id="d23e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="or">注意</em> </strong> <em class="or">:要分离docker容器(退出Docker容器)，按Ctrl+d。</em></p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="4114" class="od mj iq bd mk oe of og mn oh oi oj mq jw ok jx mt jz ol ka mw kc om kd mz on bi translated">结论</h1><p id="a1ed" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">在本文中，您使用Tkinter开发了一个简单的GUI应用程序，您可以通过Docker运行它。这是一项需要掌握的强大技能，尤其是在数据科学领域，因为运行交互式隔离GUI环境的可能性很大。现在，您应该能够进一步开发自己的应用程序了。</p><h1 id="5288" class="od mj iq bd mk oe ot og mn oh ou oj mq jw ov jx mt jz ow ka mw kc ox kd mz on bi translated">感谢阅读</h1><p id="a5e0" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">这是我第一篇关于媒体的文章，因此非常感谢反馈。</p></div></div>    
</body>
</html>