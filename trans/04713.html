<html>
<head>
<title>Get Interactive plots directly with pandas.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">直接和熊猫获取互动剧情。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/get-interactive-plots-directly-with-pandas-13a311ebf426?source=collection_archive---------1-----------------------#2021-04-24">https://towardsdatascience.com/get-interactive-plots-directly-with-pandas-13a311ebf426?source=collection_archive---------1-----------------------#2021-04-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="a28a" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a></h2><div class=""/><div class=""><h2 id="05e8" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用Pandas绘图语法直接创建Plotly和Bokeh绘图的教程</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/293ca0d63c25b94fa530fe9d8f4ce9de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ud-bR4tZNZevyMg_EUc0IQ.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">【www.freepik.com宏矢量制作的T2信息图矢量</p></figure><p id="dc87" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">到目前为止，数据探索是任何数据分析任务中最重要的方面之一。我们使用大量可视化工具执行的初始探测和初步检查，为我们提供了对数据本质的可操作的见解。然而，可视化工具的选择有时比任务本身更复杂。一方面，我们有更容易使用的库，但在显示数据中的复杂关系时却不是很有帮助。此外，还有一些提供交互性，但需要相当长的学习曲线。幸运的是，已经创建了一些开源库，试图有效地解决这一难题。</p><p id="2acf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在本文中，我们将研究两个这样的库，即pandas_bokeh和cufflinks。我们将学习如何用基本的熊猫绘图语法创建plotly和bokeh图表，我们都很熟悉。由于本文的重点是语法而不是图表类型，我们将把自己限制在五种基本图表上，即折线图、条形图、直方图、散点图和饼图。我们将首先用pandas绘图库创建这些图表，然后用plotly和bokeh重新创建它们，尽管有些扭曲。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="edbb" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">目录</h1><ul class=""><li id="8d22" class="nd ne it lk b ll nf lo ng lr nh lv ni lz nj md nk nl nm nn bi translated">导入数据集</li><li id="68fa" class="nd ne it lk b ll no lo np lr nq lv nr lz ns md nk nl nm nn bi translated">直接和熊猫密谋</li><li id="4f2d" class="nd ne it lk b ll no lo np lr nq lv nr lz ns md nk nl nm nn bi translated">熊猫的后端——和<strong class="lk jd">一起策划。</strong></li><li id="c0c8" class="nd ne it lk b ll no lo np lr nq lv nr lz ns md nk nl nm nn bi translated">为熊猫绘制后端——用<strong class="lk jd">袖扣绘制</strong></li><li id="1b22" class="nd ne it lk b ll no lo np lr nq lv nr lz ns md nk nl nm nn bi translated">结论</li></ul></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="82b9" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">资料组</h1><p id="49dc" class="pw-post-body-paragraph li lj it lk b ll nf kd ln lo ng kg lq lr nt lt lu lv nu lx ly lz nv mb mc md im bi translated">我们将使用<strong class="lk jd"> NIFTY-50数据集</strong>。NIFTY 50指数是印度股票市场的基准。数据集在<a class="ae lh" href="https://www.kaggle.com/sudalairajkumar/nifty-indices-dataset" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>上公开提供，但我们将使用仅包含四个行业股票价值的数据子集，即银行、制药、IT和快速消费品。</p><blockquote class="nw nx ny"><p id="270c" class="li lj nz lk b ll lm kd ln lo lp kg lq oa ls lt lu ob lw lx ly oc ma mb mc md im bi translated">你可以从<a class="ae lh" href="https://github.com/parulnith/Data-Science-Articles/tree/main/Get%20Interactive%20plots%20directly%20with%C2%A0pandas." rel="noopener ugc nofollow" target="_blank">这里</a>下载样本数据集。</p></blockquote><p id="439c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们导入可视化所需的必要库和数据集:</p><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="4139" class="oi mm it oe b gy oj ok l ol om"># Importing required modules<br/>import pandas as pd<br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/>%matplotlib inline</span><span id="6d0e" class="oi mm it oe b gy on ok l ol om"># Reading in the data<br/>nifty_data = pd.read_csv('NIFTY_data_2020.csv',parse_dates=["Date"],index_col='Date')<br/>nifty_data.head()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oo"><img src="../Images/9bbbc56e598ab69167bbee19edaac29a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9_9_KMUKM6n8I2_bfXvAUA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">由银行、制药、IT和快速消费品行业的漂亮指数组成的组合数据框架</p></figure><p id="e441" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们还可以在月底之前对数据进行重新取样/汇总。熊猫图书馆有一个<code class="fe op oq or oe b"><a class="ae lh" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.resample.html" rel="noopener ugc nofollow" target="_blank">resample()</a></code>功能，可以对时间序列数据进行重新采样。</p><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="7685" class="oi mm it oe b gy oj ok l ol om">nifty_data_resample = nifty_data.resample(rule = 'M').mean()<br/>nifty_data_resample</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi os"><img src="../Images/097e692b9b8baf695fdf193af6d014ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3SbQiX5_hz0g38aQaX99hA.png"/></div></div></figure><p id="aa60" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在我们已经准备好了数据框架，是时候通过不同的图来可视化它们了。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="a9aa" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">直接和熊猫密谋</h1><p id="0203" class="pw-post-body-paragraph li lj it lk b ll nf kd ln lo ng kg lq lr nt lt lu lv nu lx ly lz nv mb mc md im bi translated">让我们从最简单的绘图技术开始——熊猫的<a class="ae lh" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/visualization.html#plotting-tools" rel="noopener ugc nofollow" target="_blank">绘图功能</a>。为了使用pandas绘制一个图形，我们将在dataframe上调用<code class="fe op oq or oe b">.plot()</code>方法。</p><p id="a88d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">语法</strong> : <code class="fe op oq or oe b">dataframe.plot()</code></p><p id="ecbe" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe op oq or oe b">plot</code>方法只是matplotlib的<code class="fe op oq or oe b"><a class="ae lh" href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.plot.html#matplotlib.axes.Axes.plot" rel="noopener ugc nofollow" target="_blank"><strong class="lk jd">plt.plot()</strong></a><strong class="lk jd">. </strong></code>的简单包装，我们还可以指定一些附加参数，如下所述:</p><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="85f0" class="oi mm it oe b gy oj ok l ol om">Some of the important Parameters<br/>--------------------------------<br/><br/><strong class="oe jd">x</strong> : label or position, default None<br/>    Only used if data is a DataFrame.<br/><strong class="oe jd">y</strong> : label, position or list of label, positions, default None</span><span id="4e32" class="oi mm it oe b gy on ok l ol om"><strong class="oe jd">title</strong>: title to be used for the plot</span><span id="353a" class="oi mm it oe b gy on ok l ol om"><strong class="oe jd">X and y label:</strong> Name to use for the label on the x-axis and y-axis.</span><span id="43f6" class="oi mm it oe b gy on ok l ol om"><strong class="oe jd">figsize</strong> : specifies the size of the figure object.    <br/><strong class="oe jd">kind</strong> : str<br/>    The kind of plot to produce:<br/><br/>    - 'line' : line plot (default)<br/>    - 'bar' : vertical bar plot<br/>    - 'barh' : horizontal bar plot<br/>    - 'hist' : histogram<br/>    - 'box' : boxplot<br/>    - 'kde' : Kernel Density Estimation plot<br/>    - 'density' : same as 'kde'<br/>    - 'area' : area plot<br/>    - 'pie' : pie plot<br/>    - 'scatter' : scatter plot<br/>    - 'hexbin' : hexbin plot.</span></pre><p id="f266" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">有关参数及其用法的完整列表，请参考<a class="ae lh" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/visualization.html#basic-plotting-plot" rel="noopener ugc nofollow" target="_blank">文档</a>。现在让我们看看创造不同情节的方法。在本文中，我们不会详细解释每个情节。我们将只关注语法，如果你有一些熊猫的经验，这是不言自明的。要详细了解熊猫的故事情节，下面的文章将会很有帮助:</p><div class="ot ou gp gr ov ow"><a href="https://neptune.ai/blog/pandas-plot-deep-dive-into-plotting-directly-with-pandas" rel="noopener  ugc nofollow" target="_blank"><div class="ox ab fo"><div class="oy ab oz cl cj pa"><h2 class="bd jd gy z fp pb fr fs pc fu fw jc bi translated">熊猫情节:深入到直接与熊猫密谋</h2><div class="pd l"><p class="bd b dl z fp pb fr fs pc fu fw dk translated">在本文中，我们将了解如何使用pandas来探索和可视化您的数据，然后我们将更深入地研究pandas的一些高级可视化功能。</p></div></div><div class="pe l"><div class="pf l pg ph pi pe pj lb ow"/></div></div></a></div><h2 id="4a1a" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">1.线形图</h2><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="0356" class="oi mm it oe b gy oj ok l ol om">nifty_data.plot(title='Nifty Index values in 2020', <br/>                xlabel = 'Values',<br/>                figsize=(10,6);</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pu"><img src="../Images/d7c789ccb92183ab7fe5067bac8502b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2U8aDYsc0er0VvMX_gcHyw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">熊猫绘图的线图</p></figure><h2 id="d79f" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">2.散点图</h2><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="d0fb" class="oi mm it oe b gy oj ok l ol om">nifty_data.plot(kind='scatter',<br/>        x='NIFTY FMCG index', <br/>        y='NIFTY Bank index',<br/>        title = 'Scatter Plot for NIFTY Index values in 2020',<br/>        figsize=(10,6));</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pv"><img src="../Images/7fa7f49611d38c09b58762804c5bba9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e_AnlwQyY3PIl0bztHeOxw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">熊猫散点图</p></figure><h2 id="fd37" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">3.直方图</h2><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="d36b" class="oi mm it oe b gy oj ok l ol om">nifty_data[['NIFTY FMCG index','NIFTY Bank index']].plot(kind='hist',figsize=(9,6), bins=30);</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pw"><img src="../Images/b16ce631d75cdd31089ed10d1939b9bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A-ble7r8wh1eR0a7EcQChw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">熊猫柱状图</p></figure><h2 id="cbc2" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">4.条形图</h2><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="ebbf" class="oi mm it oe b gy oj ok l ol om">nifty_data_resample.plot(kind='bar',figsize=(10,6));<br/></span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi px"><img src="../Images/0b199a261d9d793630ce3e2242ecd995.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*_5hayOFgYRn5eBtfZn2G0g.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带熊猫图案的条形图</p></figure><ul class=""><li id="6036" class="nd ne it lk b ll lm lo lp lr py lv pz lz qa md nk nl nm nn bi translated"><strong class="lk jd"> 4.1堆积条形图</strong></li></ul><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="4e47" class="oi mm it oe b gy oj ok l ol om">nifty_data_resample.plot(kind='barh',figsize=(10,6));</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qb"><img src="../Images/aa6f74712e38acfa74ac2efb4e834c91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*yEtlWDpSEWodWy9b5N7ZmA.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带熊猫图的堆积条形图</p></figure><h2 id="7992" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">5.饼图</h2><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="ad22" class="oi mm it oe b gy oj ok l ol om">nifty_data_resample.index=['Jan','Feb','March','Apr','May','June','July']<br/>nifty_data_resample['NIFTY Bank index'].plot.pie(legend=False, figsize=(10,6),autopct='%.1f');</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qc"><img src="../Images/d1700ca713445d6778f1cf18fee12cb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:894/format:webp/1*NBgkv8XIt68ZsQkDwZJnpw.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带有熊猫图案的饼图</p></figure><p id="f286" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这些是一些可以用熊猫的数据框直接创建的图表。然而，这些图表缺乏交互性和缩放、平移等功能。现在，让我们将这些现有图表的语法更改为完全交互式的图表，只需在语法上稍作修改。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="2d2d" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">熊猫后端-用熊猫绘图。</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qd"><img src="../Images/b16aa4dd5004f7be04b45cc54dcb1727.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Od87aq3PzK8yO3bV7QkyqQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="0de9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在数据可视化方面，<a class="ae lh" href="https://docs.bokeh.org/en/latest/" rel="noopener ugc nofollow" target="_blank">散景</a>库显然脱颖而出<em class="nz">。</em><em class="nz"/><a class="ae lh" href="https://github.com/PatrikHlobil/Pandas-Bokeh" rel="noopener ugc nofollow" target="_blank">Pandas-Bokeh</a>为<a class="ae lh" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Pandas </a>、<a class="ae lh" href="http://geopandas.org/" rel="noopener ugc nofollow" target="_blank"> GeoPandas </a>和<a class="ae lh" href="https://spark.apache.org/docs/latest/api/python/index.html" rel="noopener ugc nofollow" target="_blank"> Pyspark </a> DataFrames提供了一个Bokeh绘图后端。这个后端向数据帧和系列添加了一个<code class="fe op oq or oe b">plot_bokeh()</code>方法。</p><h2 id="ac51" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">装置</h2><p id="8cb1" class="pw-post-body-paragraph li lj it lk b ll nf kd ln lo ng kg lq lr nt lt lu lv nu lx ly lz nv mb mc md im bi translated">Pandas-Bokeh可以通过<em class="nz"> pip或conda </em>从<a class="ae lh" href="https://pypi.org/project/pandas-bokeh/" rel="noopener ugc nofollow" target="_blank"> PyPI </a>安装</p><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="7eba" class="oi mm it oe b gy oj ok l ol om">pip install pandas-bokeh</span><span id="9699" class="oi mm it oe b gy on ok l ol om">or</span><span id="80b9" class="oi mm it oe b gy on ok l ol om">conda install -c patrikhlobil pandas-bokeh</span></pre><h2 id="b062" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">使用</h2><p id="6a16" class="pw-post-body-paragraph li lj it lk b ll nf kd ln lo ng kg lq lr nt lt lu lv nu lx ly lz nv mb mc md im bi translated">Pandas-Bokeh库应该在Pandas、GeoPandas和/或Pyspark之后导入。</p><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="8c64" class="oi mm it oe b gy oj ok l ol om">import pandas as pd<br/>import pandas_bokeh</span></pre><p id="573e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然后需要定义绘图输出，它可以是以下两者之一:</p><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="1188" class="oi mm it oe b gy oj ok l ol om"><strong class="oe jd">pandas_bokeh.output_notebook()</strong>: for embedding plots in Jupyter Notebooks.</span><span id="1b6e" class="oi mm it oe b gy on ok l ol om"><strong class="oe jd">pandas_bokeh.output_file(filename):</strong> for exporting plots as HTML.</span></pre><p id="eb93" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">语法</strong></p><p id="8867" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，熊猫数据框架可以通过<code class="fe op oq or oe b">dataframe.plot_bokeh()</code>访问绘图API。</p><p id="c090" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">有关绘图输出的更多详细信息，请参见此处的参考或散景文档。现在让我们画出上一节中画出的所有五种图。我们将使用与上面相同的数据集。</p><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="48e4" class="oi mm it oe b gy oj ok l ol om">import pandas as pd<br/>import pandas_bokeh<br/><strong class="oe jd">pandas_bokeh.output_notebook()</strong></span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qe"><img src="../Images/6c7b6bcba1b47992dde8914589c5f549.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*Ro3EXH0Zw9p0I6GXSm8NMw.png"/></div></figure><h2 id="6ad5" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">1.线形图</h2><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="789c" class="oi mm it oe b gy oj ok l ol om">nifty_data.plot_bokeh(kind='line') #equivalent to nifty_data.plot_bokeh.line()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qf"><img src="../Images/c93adac4906c4fb115ff327c3e8798f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/1*xq9HCxX1Pudnw15eMZYPsA.gif"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">熊猫线条图_散景</p></figure><h2 id="70ba" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">2.散点图</h2><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="f38c" class="oi mm it oe b gy oj ok l ol om">nifty_data.plot_bokeh.scatter(x='NIFTY FMCG index', y='NIFTY Bank index');</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qf"><img src="../Images/75c6e420c55a997306e775a559d29063.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/1*7_9_Psy3ZxMmD_rEKfy1KQ.gif"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">熊猫散点图_散景</p></figure><h2 id="040a" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">3.直方图</h2><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="e3c4" class="oi mm it oe b gy oj ok l ol om">nifty_data[['NIFTY FMCG index','NIFTY Bank index']].plot_bokeh(kind='hist', bins=30);</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qg"><img src="../Images/1f78736be7c0f00f42532c0a245098e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/1*O_Ui5aIQJe9q-nLpcXVR1A.gif"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">熊猫直方图_散景</p></figure><h2 id="c66b" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">4.条形图</h2><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="524e" class="oi mm it oe b gy oj ok l ol om">nifty_data_resample.plot_bokeh(kind='bar',figsize=(10,6));</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qg"><img src="../Images/398303128ba3d4ac83307ec32de77fc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/1*SHMDYroerHPDC2_BfM79Mw.gif"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">有熊猫的条形图_散景</p></figure><ul class=""><li id="0c5d" class="nd ne it lk b ll lm lo lp lr py lv pz lz qa md nk nl nm nn bi translated"><strong class="lk jd"> 4.1堆积条形图</strong></li></ul><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="97f3" class="oi mm it oe b gy oj ok l ol om">nifty_data_resample.plot_bokeh(kind='barh',stacked=True);</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qh"><img src="../Images/d41a22b7e574d5c0ca7be61d6db10053.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/1*gPYVU2oONB4db0bKC-wMuQ.gif"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带熊猫的堆积条形图_散景</p></figure><h2 id="7e79" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">5.饼图</h2><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="c546" class="oi mm it oe b gy oj ok l ol om">nifty_data_resample.index=['Jan','Feb','March','Apr','May','June','July']<br/>nifty_data_resample.plot_bokeh.pie(y ='NIFTY Bank index')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qi"><img src="../Images/13d787b85206a56e2fd6d25db95ee345.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/1*NwFRmTmphZ5dgOtk5EXxPQ.gif"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">熊猫饼图_散景</p></figure><p id="7f64" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">此外，您还可以在同一个图中创建多个嵌套饼图:</p><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="c9cb" class="oi mm it oe b gy oj ok l ol om">nifty_data_resample.plot_bokeh.pie()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qj"><img src="../Images/498d1a885077085703b3308671e19bba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/1*310V2S3DB1l3xC9j4s1Cxw.gif"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带有熊猫_散景的嵌套饼图</p></figure><p id="b395" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">本节讲述了我们如何无缝地创建散景图，而无需对pandas绘图语法进行任何重大更改。现在我们可以两全其美，而不必学习任何新的格式。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="f682" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">熊猫的神秘后台——用袖扣来描绘。</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qd"><img src="../Images/20faea876b8df7b8e68cd795502a64db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xXvqRkqru2r4GeTdD741pQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="0569" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">另一个常用的数据可视化库是<a class="ae lh" href="https://plotly.com/graphing-libraries/" rel="noopener ugc nofollow" target="_blank"> Plotly </a>。使用plotly，您可以用Python、R和JavaScript制作交互式图表。从4.8版本开始，plotly为熊猫绘图提供了一个<a class="ae lh" href="https://plotly.com/python/plotly-express/" rel="noopener ugc nofollow" target="_blank"> Plotly Express驱动的</a>后端，这意味着人们甚至不需要导入Plotly来创建Plotly般的可视化。</p><p id="db44" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">不过这里我要提到的库并不是plotly express，而是围绕plotly的一个独立的第三方包装库，叫做<a class="ae lh" href="https://github.com/santosjorge/cufflinks" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd">袖扣</strong> </a> <strong class="lk jd">。</strong>袖扣的妙处在于更百搭，功能更多，有类似熊猫绘图的API。这意味着你只需要添加一个<code class="fe op oq or oe b">.iplot()</code>方法到Pandas数据帧来绘制图表。</p><h2 id="a786" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">装置</h2><p id="6fda" class="pw-post-body-paragraph li lj it lk b ll nf kd ln lo ng kg lq lr nt lt lu lv nu lx ly lz nv mb mc md im bi translated">在安装袖扣之前，请确保您已经安装了plotly。阅读<a class="ae lh" href="https://plotly.com/python/getting-started/" rel="noopener ugc nofollow" target="_blank">本</a>指南获取说明。</p><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="4ac2" class="oi mm it oe b gy oj ok l ol om">pip install cufflinks</span></pre><h2 id="697a" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">使用</h2><p id="4edb" class="pw-post-body-paragraph li lj it lk b ll nf kd ln lo ng kg lq lr nt lt lu lv nu lx ly lz nv mb mc md im bi translated"><a class="ae lh" href="https://nbviewer.jupyter.org/gist/santosjorge/aba934a0d20023a136c2" rel="noopener ugc nofollow" target="_blank">库</a>有很多有用的例子和笔记本可以开始使用。</p><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="7b6c" class="oi mm it oe b gy oj ok l ol om">import pandas as pd<br/>import cufflinks as cf<br/>from IPython.display import display,HTML</span><span id="85ca" class="oi mm it oe b gy on ok l ol om">#making all charts public and setting a global theme<br/>cf.set_config_file(sharing='public',theme='white',offline=True)</span></pre><p id="b3cd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">仅此而已。我们现在可以用plotly的能力和熊猫的轻松来创建可视化。语法上唯一的变化是<code class="fe op oq or oe b">dataframe.iplot()</code>。</p><h2 id="31b3" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">1.线形图</h2><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="8ea1" class="oi mm it oe b gy oj ok l ol om">nifty_data.iplot(kind='line')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qk"><img src="../Images/b12db7fa901fab5fe53adade3d9fe868.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*mqlUhL12p4P5JCZLfezMJA.gif"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带袖扣的线图</p></figure><h2 id="9aac" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">2.散点图</h2><p id="debf" class="pw-post-body-paragraph li lj it lk b ll nf kd ln lo ng kg lq lr nt lt lu lv nu lx ly lz nv mb mc md im bi translated">创建散点图时，需要提到散点图的<strong class="lk jd">模式</strong>。模式可以是线条、标记、文本或它们的组合。</p><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="0105" class="oi mm it oe b gy oj ok l ol om">nifty_data.iplot(kind='scatter',x='NIFTY FMCG index', y='NIFTY Bank index',<strong class="oe jd">mode='markers'</strong>);</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ql"><img src="../Images/caaa0267f6d7f5f9c75f867384c64a44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ze78LxMhamZumciF9c7Xow.gif"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带袖扣的散点图</p></figure><h2 id="6186" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">3.直方图</h2><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="2e4a" class="oi mm it oe b gy oj ok l ol om">nifty_data[['NIFTY FMCG index','NIFTY Bank index']].iplot(kind='hist', bins=30);</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ql"><img src="../Images/051c49f2b0a1fa5704deda3252de8d7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*66OV0Fi3MqJK7VrkrdlPPA.gif"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带袖扣的直方图</p></figure><h2 id="9513" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">4.条形图</h2><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="13cb" class="oi mm it oe b gy oj ok l ol om">nifty_data_resample.iplot(kind='bar');</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ql"><img src="../Images/82e8f734fc8af9a96a0d0a76a3f94dce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*PCDr5fU2kJMdBg8uUaXE9A.gif"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带袖扣的条形图</p></figure><ul class=""><li id="53b5" class="nd ne it lk b ll lm lo lp lr py lv pz lz qa md nk nl nm nn bi translated"><strong class="lk jd"> 4.1堆积条形图</strong></li></ul><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="68cf" class="oi mm it oe b gy oj ok l ol om">nifty_data_resample.iplot(kind='barh',barmode = 'stack');</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ql"><img src="../Images/927489bdce7b47443eea0fc30c8f5472.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*nKQZhR49_g0_ILCfYVp1Ew.gif"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带袖扣的堆积条形图</p></figure><h2 id="4bb9" class="oi mm it bd mn pk pl dn mr pm pn dp mv lr po pp mx lv pq pr mz lz ps pt nb iz bi translated">5.饼图</h2><pre class="ks kt ku kv gt od oe of og aw oh bi"><span id="9c35" class="oi mm it oe b gy oj ok l ol om">nifty_data_resample.index=['Jan','Feb','March','Apr','May','June','July']<br/>nifty_data_resample.reset_index().iplot(kind='pie',labels='index',values='NIFTY Bank index')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ql"><img src="../Images/26bf2c43da1322968b6a5cc5fc649ab2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*-0j6SsStGMBSDDdw6yfKlg.gif"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带袖扣的饼图</p></figure><p id="d854" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">袖扣库提供了一种在plotly中获得plotly力量的简单方法。语法上的相似是另一个优势。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="eaba" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">结论</h1><p id="99c0" class="pw-post-body-paragraph li lj it lk b ll nf kd ln lo ng kg lq lr nt lt lu lv nu lx ly lz nv mb mc md im bi translated">散景或情节在传达整个信息方面是自给自足的。基于你的选择和偏好，你可以两者都选，也可以两者都选；主要目的是使可视化更直观，同时更具交互性。阅读完本文后，您应该能够将静态的可视化转换成它们的交互式副本，并使您的分析更上一层楼。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><p id="0278" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="nz">👉有兴趣自己看其他文章。这个</em> <a class="ae lh" href="https://github.com/parulnith/Data-Science-Articles/blob/main/README.md" rel="noopener ugc nofollow" target="_blank"> <em class="nz">回购</em> </a> <em class="nz">包含了我分类写的所有文章。</em></p></div></div>    
</body>
</html>