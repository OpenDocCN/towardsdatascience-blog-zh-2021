<html>
<head>
<title>Data Science. Measures</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学。措施</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-science-measures-213521b6a878?source=collection_archive---------24-----------------------#2021-07-30">https://towardsdatascience.com/data-science-measures-213521b6a878?source=collection_archive---------24-----------------------#2021-07-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f3b8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用描述性统计来查看数据显示的内容</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/34f0c9a9a77c06cd272e31970f71b43d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1y2PaNpElLVE7HFB.jpg"/></div></div></figure><p id="2c67" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有很多工程师从未涉足统计学或数据科学领域。但是，为了构建数据科学管道或者将数据科学家产生的代码重写为适当的、易于维护的代码，工程方面会出现许多细微差别和误解。对于那些数据/ML工程师和数据科学家新手，我做这个系列的帖子。我将尝试用简单的英语解释一些基本方法，并在此基础上解释一些数据科学的基本概念。</p><p id="a5d5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在统计学中，我们在我们的数据中看到的东西不是我们自己感兴趣的，而是评估它来自哪里(人口)。为了评估和描述特征，我们需要知道一些事情。首先是这些特性的值，这些值对于所研究的分布来说是典型的。其次，只要这些值是不同的(分散的)，<strong class="kw iu">它们有多少是典型的</strong>这样的分布。</p><p id="14a3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第一个任务是通过集中趋势的措施来解决的。第二个任务是通过测量变化来解决的。</p><h1 id="88e2" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">集中趋势测量</h1><p id="c0b6" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">为了研究集中趋势的各种措施，我们将创建数据，让它们以故事的形式出现。</p><p id="79fc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">想象一个场景，5个人坐在一个酒吧里，收入4万。坐在酒吧里的人平均收入4万。</p><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="7cd5" class="ms lr it mo b gy mt mu l mv mw">data = [40, 40, 40, 40, 40]</span></pre><p id="6d01" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">利用这些数据，我们现在将转向理论。</p><h1 id="f589" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">平均</h1><p id="bd22" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">概率论与随机变量的研究有关。为此，计算描述其行为的各种特征。随机变量的主要特征之一是均值(其他人也称之为数学期望或平均值)，这是可用数据的一种<strong class="kw iu">平均值。</strong></p><p id="54ce" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">平均值给我们一个概括的估计，可以帮助我们做决定。例如，一家公司的平均收入给我们一个大概的估计，我们可以雇用多少新员工，一家餐馆的平均支票帮助我们决定是否去那里。</p><p id="ac68" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">平均值是一个简单的度量，其公式如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/997a89124a33b77b87de532d64ef3992.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*cMtAN6_gDWtE8gPvYuE14Q.png"/></div></figure><p id="57cc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">其中Xi——随机变量，pi——它们的概率</p><p id="c9bb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从公式中可以看出，随机变量的平均值是权重等于相应概率的值的加权和。</p><p id="9a68" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">例如，如果您计算投掷两个骰子时点数之和的平均值，则得到数字7。但是在这里，我们确切地知道所有可能的可接受值及其概率。如果没有这些信息呢？只有一些观察的结果。该怎么办呢？答案来自统计学，它允许我们得到一个平均值的近似值，从可用的数据中进行估计。</p><p id="3e8c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">数理统计为估计平均值提供了几种选择。主要的一个是<strong class="kw iu">算术平均值</strong>，有一些有用的属性。例如，算术平均值是一个无偏估计，即平均期望等于估计期望。</p><p id="8438" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，算术平均数是由任何学生都知道的公式计算出来的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi my"><img src="../Images/080bdf5c6743681b6ab1da27563aaa28.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*_9p1csGW6VMekPZIVf_I3g.png"/></div></figure><p id="a499" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">其中Xi——随机变量，<em class="mz">n</em>——数值个数。</p><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="ba6b" class="ms lr it mo b gy mt mu l mv mw">def mean(x):<br/>    return sum(x) / len(x)</span><span id="361e" class="ms lr it mo b gy na mu l mv mw">mean(data)  # 40</span></pre><p id="20c3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这种方法的缺点是对样本中不同的偏差和异常值敏感，即容易受到严重偏离分布中心的异常值的显著扭曲。</p><p id="982c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果任何其他人带着4万美元的收入来到我们想象的酒吧，酒吧里人们的平均收入将保持不变。</p><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="176f" class="ms lr it mo b gy mt mu l mv mw">data1 = data + [40] <br/>mean(data1) # 40</span></pre><p id="3923" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果杰夫·贝索斯走进一家收入为100亿美元的酒吧，酒吧的平均收入会上升到<code class="fe nb nc nd mo b">1700</code>，尽管前4个人的收入没有变化。</p><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="1f8b" class="ms lr it mo b gy mt mu l mv mw">data2 = data + [10000] <br/>mean(data2) # 1700</span></pre><p id="e420" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了处理这个问题，还有其他集中趋势的度量:<a class="ae ne" href="https://en.wikipedia.org/wiki/Truncated_mean" rel="noopener ugc nofollow" target="_blank">截尾均值</a>，众数，中位数。</p><h1 id="6a8d" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">方式</h1><p id="8ac4" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">另一个简单的方法。模式只是数据集中最常见的值。</p><p id="034c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">可能有几种模式。而多模态的存在也是待观察数据的某种特征。这表明数据有一些内部结构，可能有一些子组在性质上彼此不同。也许不把这种分布作为一个整体来看是有意义的，而是把它分成小组，分别来看。</p><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="1782" class="ms lr it mo b gy mt mu l mv mw">def mode(x):<br/>    """returns a list, might be more than one mode"""<br/>    counts = Counter(x)<br/>    max_count = max(counts.values())<br/>    return [x_i for x_i, count in counts.iteritems() if count == max_count]</span><span id="c1e0" class="ms lr it mo b gy na mu l mv mw">mode(data)  # [40]</span></pre><p id="a4e3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Mode对于<a class="ae ne" href="https://luminousmen.com/post/data-types-in-ds" rel="noopener ugc nofollow" target="_blank">定性变量</a>是必不可少的，对于定量变量用处不大。它还帮助我们估计数据样本的最典型的值。</p><h1 id="270e" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">中位数</h1><p id="efc9" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">中心趋势不仅可以被认为是具有零总偏差(算术平均值)或最大频率(模式)的值，还可以被认为是将有序数据分成两个相等部分的某个标记(分析特征的某个水平)。也就是说，它的值中有一半的初始数据小于这个标志，另一半大于这个标志。这是<strong class="kw iu">中值</strong>。</p><p id="4791" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">众数和中位数是重要的衡量指标，它们反映了数据结构，有时用来代替算术平均值。</p><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="eea2" class="ms lr it mo b gy mt mu l mv mw">def median(v):<br/>    """finds the 'middle-most' value of v"""<br/>    n = len(v)<br/>    sorted_v = sorted(v)<br/>    midpoint = n // 2<br/>    if n % 2 == 1:<br/>        # if odd, return the middle value<br/>        return sorted_v[midpoint]<br/>    else:<br/>        # if even, return the average of the middle values<br/>        lo = midpoint - 1<br/>        hi = midpoint<br/>        return (sorted_v[lo] + sorted_v[hi]) / 2<br/>    <br/>median(data)  # 40<br/>median(data2)  # 40</span></pre><p id="4026" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">显然，在对称分布中，将样本分成两半的中间点就在正中心，与均值和众数在同一位置。可以说，当众数、中位数和均值重合时，这是一种理想的情况。然而，生活并不像正态分布那样对称。</p><p id="b14a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要了解数据采样特征是如何表现的，光知道均值是不够的，光知道这些特征的典型值是不够的，还需要知道它们的<strong class="kw iu">可变性</strong>。也就是说，我们不仅要知道什么是典型的，还要知道与平均值有多大的不同，与平均值不相似的值有多大的不同。为此，我们有变异的度量。</p><p id="7ffa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们回到我们想象的情况。假设我们现在有两个小节:</p><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="5f94" class="ms lr it mo b gy mt mu l mv mw">data1 = [40, 40, 40, 40, 40]<br/>data2 = [80, 40, 15, 25, 40]</span><span id="9879" class="ms lr it mo b gy na mu l mv mw">mean(data1)  # 40<br/>mean(data2)  # 40<br/>median(data1)  # 40<br/>median(data2)  # 40<br/>mode(data1)  # [40]<br/>mode(data2)  # [40]</span></pre><p id="eddd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">他们看起来在我们所观察的特征上是相似的，但是数据实际上是不同的。</p><h1 id="ce36" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">范围</h1><p id="8022" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">最简单和最直接的可变性测量是范围。该范围是最小和最大特征值之间的距离。</p><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="2bb7" class="ms lr it mo b gy mt mu l mv mw">def data_range(x):<br/>    return max(x) - min(x)</span><span id="7cbd" class="ms lr it mo b gy na mu l mv mw">data_range(data1)  # 0<br/>data_range(data2)  # 65</span></pre><p id="23ea" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一方面，产品系列可以提供丰富的信息，非常有用。比如一个城市一套公寓的最高价和最低价之差，一个地区的最高工资和最低工资之差等等。另一方面，范围可以很大，没有实际意义。</p><p id="0ab6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这个度量显示了样本中的值有多大的变化，但是它并没有告诉我们关于分布本身的任何事情。</p><h1 id="2c89" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">差异</h1><p id="b047" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">如果平均值反映了随机值的中心，方差给出了<strong class="kw iu">的特征，数据围绕中心展开</strong>，并考虑了所有对象值的影响。</p><p id="7d01" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">方差的公式如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/50fd4832a65dcf39c859c69f0095b819.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*HXPGs7QJt1hd-PhdyyVLsg.png"/></div></figure><p id="5c3d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">其中<em class="mz"> x </em> —随机variables,^x —平均值，<em class="mz"> n </em> —数值个数。</p><p id="7bde" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于每个值，我们将从平均值中提取一个偏差，将它们竖立在一个正方形中，然后除以样本中值的数量。</p><p id="cc22" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们为什么要把它做成方形？</p><p id="0716" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">负变化和正变化之和为零，因为负变化和正变化相互抵消。为了避免这种相互抵消，使用分子中这种测度的平方。至于分母，我们用<code class="fe nb nc nd mo b">n</code>除。然而，使用不同于n的值以不同的方式改进了估计。分母的总值消除了偏差。</p><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="65a3" class="ms lr it mo b gy mt mu l mv mw">def de_mean(x):<br/>    """translate x by subtracting its mean (so the result has mean 0)"""<br/>    x_bar = mean(x)<br/>    return [x_i - x_bar for x_i in x]</span><span id="ebe1" class="ms lr it mo b gy na mu l mv mw">def sum_of_squares(y):<br/>    """the total squared variation of y_i's from their mean"""<br/>    return sum(v ** 2 for v in de_mean(y))</span><span id="c89b" class="ms lr it mo b gy na mu l mv mw">def variance(x):<br/>    """assumes x has at least two elements"""<br/>    n = len(x)<br/>    deviations = de_mean(x)<br/>    return sum_of_squares(deviations) / (n - 1)</span><span id="3b34" class="ms lr it mo b gy na mu l mv mw">variance(data1)  # 0<br/>variance(data1)  # 612</span></pre><p id="1d85" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，我们考虑了每一个偏差，总和除以对象的数量给出了可变性的估计。</p><p id="8706" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="mz">这里有什么问题？</em></p><p id="369c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们平方的事实给了我们测量的倍数增加。也就是说，如果在第一种情况下，我们的工资是以美元，以千美元为单位，那么当我们平方它时，我们就开始以百万甚至数十亿美元为单位进行操作。这使得<strong class="kw iu">关于组织中的人获得的具体工资的信息变得更少。</strong></p><h1 id="50ed" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">标准偏差</h1><p id="419d" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">把方差回归现实，也就是把它用在更实际的用途上，从中提取平方根。就是所谓的<strong class="kw iu">标准差</strong>。</p><p id="ed83" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就是公式:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/c5c1504c3d1ccd59c5a5365124531e3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*6l43SqD1Vz-PrjqpvSz4rw.png"/></div></figure><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="7686" class="ms lr it mo b gy mt mu l mv mw">def standard_deviation(x):<br/>    return math.sqrt(variance(x))</span><span id="02a5" class="ms lr it mo b gy na mu l mv mw">standard_deviation(data1)  # 0<br/>standard_deviation(data2)  # 24.7</span></pre><p id="af10" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">标准差也是可变性测量的特征，但现在(与方差相反)它可以与原始数据进行比较，因为它们具有相同的测量单位(这从计算公式中可以清楚地看出)。</p><p id="879e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">例如，<a class="ae ne" href="https://en.wikipedia.org/wiki/68%E2%80%9395%E2%80%9399.7_rule" rel="noopener ugc nofollow" target="_blank">的三西格马规则</a>指出，正态分布的数据在平均值的3个标准偏差内有997个值。标准差作为一种不确定性的度量，也涉及到许多统计计算。它可以用来确定各种估计和预测的准确性。如果偏差非常大，那么标准差也会很大，因此预测也会不准确，这将表现为，例如，非常宽的置信区间。</p><h1 id="5954" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">结论</h1><p id="b419" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">这些是数据工程师应该知道的基本度量，但不是全部。它们将在本系列的下一部分中使用，其中将引入一些新的度量。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><p id="ed04" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">感谢您的阅读！</strong></p><p id="89c6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有什么问题吗？请在下面留下您的评论，开始精彩的讨论！</p><p id="7d55" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">查看我的博客或者来打个招呼👋在<a class="ae ne" href="https://twitter.com/luminousmen" rel="noopener ugc nofollow" target="_blank"> Twitter </a>或订阅<a class="ae ne" href="https://t.me/iamluminousmen" rel="noopener ugc nofollow" target="_blank">我的电报频道</a>。规划好自己！</p></div></div>    
</body>
</html>