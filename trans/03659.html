<html>
<head>
<title>Stochastic Volatility Pricing in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的随机波动率定价</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/stochastic-volatility-pricing-in-python-931f4b03d793?source=collection_archive---------13-----------------------#2021-03-25">https://towardsdatascience.com/stochastic-volatility-pricing-in-python-931f4b03d793?source=collection_archive---------13-----------------------#2021-03-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c30e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">蒙特卡罗模拟高级证券定价</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d9ba17d15fb552f6cf897a039ed1d7ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ek8pqaB-WCjq5Qvty_0ulg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">瑟奎拉在<a class="ae ky" href="https://unsplash.com/s/photos/space?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的<a class="ae ky" href="https://unsplash.com/@shotbycerqueira?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">照片</a></p></figure><h1 id="cc63" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">证券定价</h1><p id="3df7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">证券定价有多种方法。我认为这个话题既是一门科学，也是一门艺术。本文讨论了使用模拟(主要以随机输入的形式)为金融工具定价的优势。如果你对证券定价不熟悉，我建议你阅读以下文章……</p><p id="f833" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://medium.com/swlh/martingales-and-markov-processes-724de97dab1c" rel="noopener">鞅和马尔可夫过程</a></p><ul class=""><li id="cd7b" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">随机过程的简明介绍</li></ul><p id="548a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/geometric-brownian-motion-559e25382a55">几何布朗运动</a></p><ul class=""><li id="b27b" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">Black-Scholes模型中使用的主要随机过程</li></ul><p id="5180" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://medium.com/swlh/stochastic-integrals-fe46b3753871" rel="noopener">随机积分</a></p><ul class=""><li id="0f0a" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">推导Black-Scholes模型的随机积分的计算</li></ul><p id="1a65" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://medium.com/swlh/deriving-the-black-scholes-model-5e518c65d0bc" rel="noopener">推导布莱克-斯科尔斯模型</a></p><ul class=""><li id="5e1a" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">逐步推导出臭名昭著的欧式期权定价模型</li></ul><p id="5534" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这些文章将为使用封闭式解决方案对特定证券进行定价提供坚实的基础。之后，为了掌握基本的模拟定价，请查看以下文章…</p><p id="32e4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/monte-carlo-pricing-in-python-eafc29e3b6c9">Python中的蒙特卡洛定价</a></p><ul class=""><li id="8365" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">模拟资产价格路径为金融工具定价</li></ul><p id="31b6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://medium.com/swlh/python-for-pricing-exotics-3a2bfab5ff66" rel="noopener">为外来物种定价的Python</a></p><ul class=""><li id="8352" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">专门针对特殊工具的高级模拟定价</li></ul><p id="da86" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对这些不同定价方法的深刻理解将反映出这门科学的上述<em class="nb">艺术</em>方面。每种定价方法都是不同的——从最初的假设到得出证券价格的实际方法(数值或分析)。这并不意味着任何特定的方法更正确或不正确；这就是为什么理解每种价格是如何得出的如此重要。了解布莱克-斯科尔斯价格(对数正态分布的股票价格和无交易成本，仅举两个例子)与蒙特卡洛价格(可能包括交易成本)的假设将有助于指导您的定价需求。理论解析解和数值解(往往会收敛到一些理论解)都有美。事实上，我以前的一些研究着眼于修正布莱克-斯科尔斯模型，以更好地反映一般市场条件…</p><div class="nc nd gp gr ne nf"><a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3745703" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd iu gy z fp nk fr fs nl fu fw is bi translated">一般市场条件下的期权定价</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">共7页发布时间:2021年1月29日撰写日期:2020年12月1日Black-Scholes复制战略，持续…</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">papers.ssrn.com</p></div></div></div></a></div><p id="b9fb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我现在假设你有很好的证券定价知识基础。事不宜迟，让我们看看为什么模拟定价通过允许模型输入的变化而如此强大。</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="68cc" class="kz la it bd lb lc nv le lf lg nw li lj jz nx ka ll kc ny kd ln kf nz kg lp lq bi translated">随机波动过程</h1><p id="4271" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">经验观察到的股票价格的异方差在几何布朗运动中并不保留，因为波动率保持不变。<a class="ae ky" href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.139.3204&amp;rep=rep1&amp;type=pdf" rel="noopener ugc nofollow" target="_blank">赫斯顿(1993) </a>找到了一个类似于Black-Scholes坚持随机波动率概念的准封闭解。然而，他的解的推导要比Black-Scholes模型的推导复杂得多，超出了本文的范围。然而，他用来推导模型的基本过程可以很容易地应用到定价模拟中，从本质上讲，捕捉到了相同的结果:随机波动性。</p><p id="0361" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">基本上有两个过程:</strong></p><p id="12b5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> I. </strong> <em class="nb">用于生成新方差值的随机过程</em></p><p id="b497" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">二。</strong> <em class="nb">用于生成新股票价格值的随机过程</em></p><p id="4fa5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">首先，让我们先了解一下我们正在使用的参数…</p><ul class=""><li id="b84d" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated"><strong class="lt iu"> S </strong> —初始股票价格</li><li id="0ac6" class="ms mt it lt b lu oa lx ob ma oc me od mi oe mm mx my mz na bi translated"><strong class="lt iu"> r </strong> —无风险利率</li><li id="59f3" class="ms mt it lt b lu oa lx ob ma oc me od mi oe mm mx my mz na bi translated"><strong class="lt iu"> v_t </strong> —瞬时方差</li><li id="a9ec" class="ms mt it lt b lu oa lx ob ma oc me od mi oe mm mx my mz na bi translated"><strong class="lt iu"> α，β </strong> —平均回复参数</li><li id="7b0d" class="ms mt it lt b lu oa lx ob ma oc me od mi oe mm mx my mz na bi translated"><strong class="lt iu"> σ_v </strong> —方差的波动率</li><li id="7c8f" class="ms mt it lt b lu oa lx ob ma oc me od mi oe mm mx my mz na bi translated"><strong class="lt iu">ε</strong>—生成错误</li><li id="2635" class="ms mt it lt b lu oa lx ob ma oc me od mi oe mm mx my mz na bi translated"><strong class="lt iu"> ρ </strong> —误差相关性</li><li id="4e13" class="ms mt it lt b lu oa lx ob ma oc me od mi oe mm mx my mz na bi translated"><strong class="lt iu">δt</strong>—随时间变化</li></ul><p id="f422" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在让我们来看看流程本身…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/9cca03df2a0d9ceba3f9ca7360533e0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*ydrB1eMwgxdYEqSQYxUliQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">误差分布</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/fc6f618245d5fc0384ae9fa2bdaf5eaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZmcQaFwYIetuHbdyQAi2xg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">产生方差的随机过程</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/d85947ca0e8406865e219ce82d2f9358.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Eo6AUZSCrwQo1hw8iE-Rkw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">产生股票价格的随机过程</p></figure><p id="48bb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">从根本上说，这些过程没有什么特别令人惊讶的。每个过程本质上都可以分解为第一项中的期望和第二项中对该期望的冲击。</p><p id="cd6b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">特别敏锐的读者会注意到，通过为波动性创建一个独立的随机过程，我们再次修正了波动性。也就是说，我们修正了方差的波动性。这可能成为一个循环论证。方差的波动性是否应该有一个独立的随机过程，它现在是一个独立的随机过程？这方面有研究，值得注意，但为了这篇文章，我跑题了。</p><p id="2ffc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在让我们看看Python如何实现这些过程来给证券定价。</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="a1e9" class="kz la it bd lb lc nv le lf lg nw li lj jz nx ka ll kc ny kd ln kf nz kg lp lq bi translated">Python中的随机方差定价</h1><p id="2da2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">首先，让我们导入numpy并定义随机方差过程的参数，以及一些为标准欧式期权定价的参数…</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="5848" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">接下来，我们需要创建负责运行模拟<em class="nb"> n </em>次的外部循环…</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="dcb5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在此循环中设置了一些参数，这些参数将在下一个循环中变得更加清晰。首先，在系列仿真中的每个新仿真开始时，我们需要重置基本参数:<em class="nb"> St </em>、<em class="nb"> inst_var_now </em>、<em class="nb"> prev_inst_var </em>和<em class="nb"> step </em>。这些与本文第一部分中定义的输入参数同义。请注意，瞬时方差被分解为两个变量，这是为了让我们在生成新方差的随机过程中，对每一步使用适当的误差。让我们创建一个内循环来遍历一条具有随机方差的股票价格路径…</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="ada1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在这个while循环的每一次迭代之后，我们将得到最终的股票价格值。这个最终的股票价格值可以在外循环中再次使用，以根据我们正在定价的证券产生收益。在这个例子中，我正在为一个欧式期权定价，所以根据这些参数，我计算出适当的收益…</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="2832" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">请注意，当将<em class="nb">收益</em>附加到<em class="nb">收益</em>列表时，收益会按照时间t内的无风险利率进行贴现。如果货币的时间价值是一个外来概念，请参见Python中的<a class="ae ky" rel="noopener" target="_blank" href="/quantitative-finance-in-python-e8d48e6b9c23">量化金融</a>。</p><p id="4187" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了计算这种欧式期权的模拟价格，我们简单地将附加到<em class="nb">收益列表</em>中的值进行平均…</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><pre class="kj kk kl km gt ok ol om on aw oo bi"><span id="bcb5" class="op la it ol b gy oq or l os ot">14.648492872411381</span></pre><p id="5f68" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们做到了！我们通过一个随机方差过程得出了模拟价格。</p><h1 id="c63d" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="59f4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">本文展示了如何使用随机方差过程来模拟证券的价格。同样，与其他定价方法相比，不要认为这个价格或多或少是正确的。相反，要理解最终价格差异的原因。这个概念可以扩展到影响金融工具的每个参数，使它们都成为随机过程。</p><p id="38dd" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">随机方差模拟定价脚本:</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure></div></div>    
</body>
</html>