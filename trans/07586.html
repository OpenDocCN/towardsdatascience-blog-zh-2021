<html>
<head>
<title>Interval Estimation: An Overview, and a How-to Guide for Practitioners</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">区间估计:概述和实践者指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/interval-estimation-an-overview-and-a-how-to-guide-for-practitioners-e2a0c4bcf108?source=collection_archive---------21-----------------------#2021-07-11">https://towardsdatascience.com/interval-estimation-an-overview-and-a-how-to-guide-for-practitioners-e2a0c4bcf108?source=collection_archive---------21-----------------------#2021-07-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/f000cd3566b4003876cd4a56667e5976.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EAR_mEWNI_nbJnF60tIs4g.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">米德兰海滩(来源:<a class="ae jd" href="https://digitalcollections.nypl.org/items/510d47d9-c04b-a3d9-e040-e00a18064a99" rel="noopener ugc nofollow" target="_blank">纽约公共图书馆数字馆藏——无限制免费使用</a></p></figure><div class=""/><div class=""><h2 id="1921" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">以及Python中关于如何估计总体均值区间的教程</h2></div><p id="e801" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">假设你知道一个样本的平均值，你想用这个样本的平均值来估计总体平均值所在的<em class="lr">区间</em>。区间估计技术可用于在某个特定的置信水平下得出这一估计值。这种方法可以很容易地扩展到估计其他总体水平统计量(如方差)的区间。</p><p id="f9d0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">举例来说，假设你在马萨诸塞州的波士顿随机调查了100户家庭，你发现他们的平均年收入为65，713美元。你能使用这个单一的数字，用一些可量化的信心衡量标准，比如90%，来估计一下<em class="lr">波士顿所有</em>30万个家庭的平均年收入范围吗？原来，你可以做到这一点！</p><p id="789e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下图说明了这种情况:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ls"><img src="../Images/4a348dc00d2480e88c5e53ce0e475e5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bGhANv03DMRlx-o7E5uzVA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">波士顿地区平均家庭收入(2021年美元)的90%置信区间[63863，675902](图片由作者提供)</p></figure><p id="f71c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在上图中，你可能会注意到，我们对波士顿所有30万家庭的年收入假设了某种概率分布(正态分布)。虽然对这种分布有所了解会有所帮助，但这并不是一个严格的要求。即使你完全不知道总体服从什么分布，你也可以得到未知总体均值的合理区间估计！</p><p id="083c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在现实生活决策中，区间估计比依赖点估计更有用。例如，下一次你听到一个新闻故事，说某种药物在治疗一些威胁文明的疾病时显示出70%的疗效，你可能想检查一下药物制造商报告的95%的置信区间。如果这个区间很宽，比如说25%-90%，那么疗效的70%点估计可能不能很好地反映药物的真实疗效。</p><h1 id="4799" class="lx ly jg bd lz ma mb mc md me mf mg mh km mi kn mj kp mk kq ml ks mm kt mn mo bi translated">估计总体均值的区间</h1><p id="fca2" class="pw-post-body-paragraph kv kw jg kx b ky mp kh la lb mq kk ld le mr lg lh li ms lk ll lm mt lo lp lq ij bi translated">让我们用一个真实的数据集来说明区间估计的过程。</p><p id="b001" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将使用以下23.7K水样的数据集，这些水样取自2005年至2021年纽约市都会区的各个海滩。但是我们不使用整个数据集，我们将只使用纽约斯塔滕岛米德兰海滩的水样数据。</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mu"><img src="../Images/1cfcc949057d9cc971594a8bbb605d4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dh48txu_9bBVwNqebnpnLg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">2005年至2021年间从纽约市海滩采集的水质数据样本(来源:<a class="ae jd" href="https://data.cityofnewyork.us/Health/DOHMH-Beach-Water-Quality-Data/2xir-kwzz" rel="noopener ugc nofollow" target="_blank"> NYC OpenData </a>根据<a class="ae jd" href="https://www1.nyc.gov/home/terms-of-use.page" rel="noopener ugc nofollow" target="_blank">使用条款</a>)(图片由作者提供)</p></figure><p id="1061" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你可以直接从<a class="ae jd" href="https://data.cityofnewyork.us/Health/DOHMH-Beach-Water-Quality-Data/2xir-kwzz" rel="noopener ugc nofollow" target="_blank"> <strong class="kx jh"> NYC OpenData网站</strong> </a>下载数据，或者(最好)从<a class="ae jd" href="https://gist.github.com/sachinsdate/42a4c2c4b125de55b6385db1c08d814b" rel="noopener ugc nofollow" target="_blank"> <strong class="kx jh">这里</strong> </a>下载数据集的策划版本。</p><p id="f0da" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将使用Pandas库将数据集加载到内存中。我们将从导入我们需要的所有Python包开始:</p><pre class="lt lu lv lw gt mv mw mx my aw mz bi"><span id="3970" class="na ly jg mw b gy nb nc l nd ne"><strong class="mw jh">import </strong>math<strong class="mw jh"><br/>import </strong>pandas <strong class="mw jh">as </strong>pd<br/><strong class="mw jh">import </strong>numpy <strong class="mw jh">as </strong>np<br/><strong class="mw jh">from </strong>matplotlib <strong class="mw jh">import </strong>pyplot <strong class="mw jh">as </strong>plt<br/><strong class="mw jh">from </strong>scipy.stats <strong class="mw jh">import </strong>norm</span><span id="ff80" class="na ly jg mw b gy nf nc l nd ne"><strong class="mw jh">#Load the data file</strong><br/>df = pd.<strong class="mw jh">read_csv</strong>(<strong class="mw jh">'DOHMH_Beach_Water_Quality_Data.csv'</strong>, <strong class="mw jh">header</strong>=0, <strong class="mw jh">infer_datetime_format</strong>=True, <strong class="mw jh">parse_dates</strong>=[<strong class="mw jh">'</strong>Sample_Date<strong class="mw jh">'</strong>])</span></pre><p id="a847" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将重点关注为米德兰海滩收集的水质数据:</p><pre class="lt lu lv lw gt mv mw mx my aw mz bi"><span id="8867" class="na ly jg mw b gy nb nc l nd ne">df_midland = df[df['Beach_Name']=='MIDLAND BEACH']</span><span id="d181" class="na ly jg mw b gy nf nc l nd ne"><strong class="mw jh">#print the data frame<br/>print</strong>(df_midland)</span></pre><p id="9ee1" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们看到以下输出:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ng"><img src="../Images/7f65ce18c8f726c4a70a41bac5473353.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LLSa7u7CT_7sMkp5l8F9Kg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">斯塔滕岛米德兰海滩的水质数据(图片由作者提供)</p></figure><p id="83da" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是我们的样品。在我们继续下一步之前，请注意，数据框中包含微生物值的行中的nan太小，测量仪器无法检测。我们将用0替换所有这些nan。</p><pre class="lt lu lv lw gt mv mw mx my aw mz bi"><span id="c80f" class="na ly jg mw b gy nb nc l nd ne">df_midland.<strong class="mw jh">fillna</strong>(<strong class="mw jh"><em class="lr">value=</em></strong>0,<strong class="mw jh">inplace</strong>=True)</span></pre><p id="cdec" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们打印出样本的汇总统计数据:</p><pre class="lt lu lv lw gt mv mw mx my aw mz bi"><span id="416e" class="na ly jg mw b gy nb nc l nd ne">df_midland['Enterococci_Results'].<strong class="mw jh">describe</strong>()</span></pre><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/c104fa8fb715e9c99bea6353323d9c4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*1cOscBPGj_lqNxZGyIsf0Q.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">米德兰海滩样本的统计摘要(图片由作者提供)</p></figure><p id="1e27" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将打印出另一个统计数据，这是最常出现的值，也称为模式:</p><pre class="lt lu lv lw gt mv mw mx my aw mz bi"><span id="5fef" class="na ly jg mw b gy nb nc l nd ne"><strong class="mw jh">print</strong>(df_midland['Enterococci_Results'].<strong class="mw jh">mode</strong>())</span></pre><p id="7c14" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们得到该模式的值为0，这意味着从米德兰海滩采集的大多数样品不含(或检测不到)肠球菌。</p><p id="388e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下图显示了样本值的频率分布:</p><pre class="lt lu lv lw gt mv mw mx my aw mz bi"><span id="0122" class="na ly jg mw b gy nb nc l nd ne">plt.<strong class="mw jh">hist</strong>(df_midland['Enterococci_Results'], <strong class="mw jh">bins</strong>=100)<br/>plt.<strong class="mw jh">xlabel</strong>('Number of Enterococci detected in the sample')<br/>plt.<strong class="mw jh">ylabel</strong>('Number of samples')<br/>plt.<strong class="mw jh">show</strong>()</span></pre><figure class="lt lu lv lw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ni"><img src="../Images/71ae3377d305e676e0708b39e84807bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fzh0jy38Mqwg8V8imxfj7g.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">米德兰海滩样本值的频率分布(图片由作者提供)</p></figure><p id="bc56" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们看到米德兰海滩的样本有很大的差异。</p><p id="8fa6" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们回顾一下到目前为止我们所了解的数据:</p><ul class=""><li id="1c0e" class="nj nk jg kx b ky kz lb lc le nl li nm lm nn lq no np nq nr bi translated">我们的<strong class="kx jh">样本量<em class="lr">n</em>T15】是969</strong></li><li id="0f9e" class="nj nk jg kx b ky ns lb nt le nu li nv lm nw lq no np nq nr bi translated"><strong class="kx jh">样本均值<em class="lr">Y _ bar</em>T19】为25.311042</strong></li><li id="905b" class="nj nk jg kx b ky ns lb nt le nu li nv lm nw lq no np nq nr bi translated"><strong class="kx jh">样本标准差<em class="lr">S</em>T23】为149.939190</strong></li><li id="088c" class="nj nk jg kx b ky ns lb nt le nu li nv lm nw lq no np nq nr bi translated"><strong class="kx jh">样本是高度倾斜的</strong>有利于零值(事实上它应该为任何维护良好的公共海滩！)</li><li id="6625" class="nj nk jg kx b ky ns lb nt le nu li nv lm nw lq no np nq nr bi translated">样本有一条长尾巴。</li></ul><p id="26ad" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们<strong class="kx jh">不知道</strong>的是:</p><ul class=""><li id="33c1" class="nj nk jg kx b ky kz lb lc le nl li nm lm nn lq no np nq nr bi translated"><strong class="kx jh">人口的意思是，<em class="lr"> </em> </strong>。<em class="lr">群体平均值</em>是从2005年到2021年在米德兰海滩收集的理论上无限数量的样本中肠球菌计数的平均值。</li><li id="b36e" class="nj nk jg kx b ky ns lb nt le nu li nv lm nw lq no np nq nr bi translated">肠球菌计数的<strong class="kx jh">群体标准差<em class="lr"> σ </em></strong></li><li id="f4e2" class="nj nk jg kx b ky ns lb nt le nu li nv lm nw lq no np nq nr bi translated">人口的<strong class="kx jh">频率分布</strong>。</li></ul><p id="ad25" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们想知道的是:</p><p id="ce0a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">我们能否对总体均值</em> <strong class="kx jh"> <em class="lr"> </em> </strong> <em class="lr">可能所在的区间做一个概率估计？具体来说，我们是否可以确定一个区间[ _low，，high]，使得总体均值以某种概率比如95%位于[ _low，，high]内？</em></p><p id="e483" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们来看看如何估计这个区间。</p><p id="c506" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将定义一个随机变量<strong class="kx jh"> <em class="lr"> Y </em> </strong>来表示我们要测量的量，即水样中的肠球菌数。</p><p id="3915" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们知道<strong class="kx jh"> <em class="lr"> Y </em> </strong>取值为<em class="lr"> 0、10、100、4、8等。</em>其单位为每100毫升MPN(单位无关紧要，只要它们都采用相同的单位)。</p><p id="a90a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">给定一个给定的概率ρ，我们希望找出两个数<em class="lr"> _low </em>和<em class="lr">，high </em>，使得随机变量Y位于<em class="lr"> _low </em>和<em class="lr"> _high </em>之间的概率是某个实数<em class="lr"> ρ </em>，其中0 ≤ <em class="lr"> ρ </em> ≤1。</p><p id="0e58" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在符号方面，我们将这一要求表述如下:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/b0a4be3d2d21d5b2b035e72b67297c6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:742/format:webp/1*ocZ0c8vj1CRwF4_a6ZCVFg.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">随机变量<strong class="bd ny"> Y </strong>的区间估计(图片由作者提供)</p></figure><p id="b8a2" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">习惯上用符号<em class="lr"> (1-α) </em>代替<em class="lr"> ρ </em>。</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/4823160819ccce25672c06d162da3746.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*7oWxwi0SoI064e4Cr_txNg.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">随机变量<strong class="bd ny"> Y </strong>的区间估计(图片由作者提供)</p></figure><p id="3f67" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们在这里说的是，我们想从<strong class="kx jh"> P </strong>概率<strong class="kx jh"> D </strong>分布<strong class="kx jh"> F </strong>功能<strong class="kx jh">Y</strong><em class="lr">，</em>中划出一个区域，这样:</p><ol class=""><li id="a396" class="nj nk jg kx b ky kz lb lc le nl li nm lm nn lq oa np nq nr bi translated">该区域的面积为<em class="lr"> (1-α) </em>，</li><li id="66af" class="nj nk jg kx b ky ns lb nt le nu li nv lm nw lq oa np nq nr bi translated">该区域从X轴<em class="lr">上的<em class="lr">低</em>和<em class="lr">高</em>开始延伸。</em></li></ol><p id="3c1f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下图以随机变量<strong class="kx jh"> <em class="lr"> Y </em> </strong>的纯假设分布为背景说明了这种情况。记住，我们不知道人口的实际分布<strong class="kx jh"> <em class="lr"> Y </em> </strong>！请注意，我们在下图中使用习惯符号<em class="lr"> x </em>和<em class="lr"> f(x) </em>，因为在<em class="lr"> X轴</em>上显示一个名为<strong class="kx jh"> <em class="lr"> Y </em> </strong>的变量可能会让人晕头转向！所以看到这个图中的<em class="lr"> x </em>时，只要想到<strong class="kx jh"> <em class="lr"> Y </em> </strong>。</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ob"><img src="../Images/2bd0f5fc5f32bf4767c864f9fe46e806.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rHtLi6cK6hy73njxPLxaUQ.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">随机变量<strong class="bd ny"> x </strong>的区间估计图(图片由作者提供)</p></figure><p id="e072" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们再来看看下面这个表情:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/4823160819ccce25672c06d162da3746.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*7oWxwi0SoI064e4Cr_txNg.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">随机变量<strong class="bd ny"> Y </strong>的区间估计(图片由作者提供)</p></figure><p id="4aef" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们知道概率密度函数曲线下的总面积是1.0。所以无阴影区域等于<em class="lr"> α </em>。我们可以将上述等式重新表述如下:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/31eaa6716ac7797851e221acb8038cbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*P-fjVGOWSvi1Id0V59q7kA.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">总体平均值的置信区间(图片由作者提供)</p></figure><p id="4c08" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以沿着PDF曲线的X轴<em class="lr">来回滑动<em class="lr"> _low </em>和<em class="lr"> _high </em>，直到每个<em class="lr">无阴影</em>区域都有面积<em class="lr"> α/2 </em>。下图说明了这一点:</em></p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/bc99246da84f456f59c44d3134949b4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FJ6gSbjWXHkRi91f_SLBoA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">随机变量<strong class="bd ny"> x </strong>的区间估计的重构(图片由作者提供)</p></figure><p id="6af1" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，我们有:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/a92857918ed82e3ad4cfec336188de10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*k6v3iAiw7fIhOKM2A-eQfw.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated"><strong class="bd ny"> <em class="of"> Y </em> </strong>的区间估计用尾部概率<em class="of"> α/2【作者图片】</em></p></figure><p id="0fa8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">P(</em><strong class="kx jh"><em class="lr">Y</em></strong><em class="lr">≤_低)和P(</em><strong class="kx jh"><em class="lr">Y</em></strong><em class="lr">≤_高)</em>都是简单的累积概率，分别用<em class="lr"/><strong class="kx jh"><em class="lr">C</em></strong><em class="lr">汇总</em> <strong class="kx jh"> <em class="lr"> D </em> </strong> <em class="lr">分配</em> <strong class="kx jh"> <em class="lr"> Y </em> </strong> <em class="lr">。</em>例如<em class="lr">P(</em><strong class="kx jh"><em class="lr">Y</em></strong><em class="lr">≤_ low)=</em>F(<em class="lr">_ low)=α/2。</em>由此，我们有:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi og"><img src="../Images/5f4b92f7901d0b2113b2f384b7be2e30.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/format:webp/1*VvQScCWb34hE7tu-zBX25A.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">表示为反向CDFs的区间界限_low和_high</p></figure><p id="0757" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们现在(暂时)假设<strong class="kx jh"> <em class="lr"> Y </em> </strong>遵循标准正态分布<em class="lr"> N(0，1) </em>，即正态分布有一个零均值和一个单位标准差。</p><p id="1184" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你可能会感到惊讶，我们假设<strong class="kx jh"> <em class="lr"> Y </em> </strong>是<em class="lr"> N(0，1) </em>分布，因为我们已经看到<strong class="kx jh"> <em class="lr"> Y </em> </strong>远非正态分布，更不用说<em class="lr"> N(0，1) </em>分布了！这里提醒一下样本<strong class="kx jh"><em class="lr">【Y】</em></strong>的分布如何看起来像<strong class="kx jh"> <em class="lr"> : </em> </strong></p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ni"><img src="../Images/71ae3377d305e676e0708b39e84807bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fzh0jy38Mqwg8V8imxfj7g.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">米德兰海滩样本值<strong class="bd ny"> <em class="of"> Y </em> </strong>的频率分布(图片由作者提供)</p></figure><p id="e128" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是不用担心。</p><p id="0432" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你会看到，我们将冒这个相当大胆的风险，我们仍然会逃脱！</p><p id="9fae" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，假设<strong class="kx jh"> <em class="lr"> Y </em> </strong> <em class="lr"> ~ N(0，1) </em>的一个重要结果就是 <strong class="kx jh"> <em class="lr"> Y </em> </strong> <em class="lr">的<em class="lr"> CDF，即F(。)成为φ表示的标准正态分布的CDF(读作Phi) </em> <strong class="kx jh">。</strong>由此，<em class="lr">F(x)=φ</em><strong class="kx jh"><em class="lr">(</em></strong><em class="lr">【x】)</em>，因而我们有:</em></p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/1a50d659a9a1b935e644e0e23ebcdca8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*lKem_n2hrITIxDgTSr_KVw.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">根据N(0，1)分布的逆CDF的高低区间估计(图片由作者提供)</p></figure><p id="1900" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们再跳一小步，定义一个实数p如下:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/a1fb3e1dc151da7a0904ace375451442.png" data-original-src="https://miro.medium.com/v2/resize:fit:258/format:webp/1*0gJhPJTDj0eBNbtXqWVygw.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">介绍p和α的关系(图片由作者提供)</p></figure><p id="8664" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">由于<em class="lr"> 0≤ α ≤ 1 </em>，我们有:<em class="lr"> 0 ≤ p ≤ 1 </em></p><p id="7229" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，我们定义一个量<em class="lr"> z_p </em>如下:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oj"><img src="../Images/b28166ff7621b4bc14681ec35cebb5bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*VT-8CKS_dVXO9hgSna6PtA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">使用CDFφ(x)定义标准正态分布的z值(图片由作者提供)</p></figure><p id="60f5" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在上面的定义中，<em class="lr"> (1-p) </em>解释为累积概率。例如:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ok"><img src="../Images/bd1f72fb4727a19ba03b1139b892a0d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cDiPKqj7Jox3n3YDuPvTEw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">p=0.95时的z值(图片由作者提供)</p></figure><p id="efea" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这在下面的<em class="lr"> N(0，1) </em>分布的PDF中有所说明:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ol"><img src="../Images/f8dd3727d0be9dd031c146ba535ab2e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e3a4XEVNbhgAj_coIHcwvQ.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">p=0.95时的z值(图片由作者提供)</p></figure><p id="8b61" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">类似地:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi om"><img src="../Images/0967fd66aab2a90f0f19304d3201049e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VQO3tBsVWRrkn1M5BUCQDA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">p=0.05时的z值(图片由作者提供)</p></figure><p id="4fc0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如下图所示:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ol"><img src="../Images/356ea288bfa9f2792bd995209fc22cd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9-daTbUQy2ysRCWY7Pl3UA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">p=0.05时的z值(图片由作者提供)</p></figure><p id="f0f2" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，我们看到:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi on"><img src="../Images/6e47d60acbce749d507aabfdd2aefc29.png" data-original-src="https://miro.medium.com/v2/resize:fit:426/format:webp/1*O4NVStCahZ5TG2CSmDhBWw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">z值的对称性(图片由作者提供)</p></figure><p id="b8c2" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">或者，一般来说，由于围绕<em class="lr"> 0 </em>的<em class="lr"> N(0，1) </em>分布的对称性，我们有:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/696b22a3c5d90571c50a18e8441ecf35.png" data-original-src="https://miro.medium.com/v2/resize:fit:380/format:webp/1*yIGQ9SlFXqC-IxONhsuikg.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">对于给定的p，两个相应的z值围绕0对称(图片由作者提供)</p></figure><p id="926c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，回想一下:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/1a50d659a9a1b935e644e0e23ebcdca8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*lKem_n2hrITIxDgTSr_KVw.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">根据N(0，1)分布的逆CDF的高低区间估计(图片由作者提供)</p></figure><p id="0266" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因为:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi op"><img src="../Images/8163071a21e2b7b7a33cd8f86d9cb097.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*xsYNdtXNef2_O9wAoeQRZw.png"/></div></figure><p id="0205" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在结合上述等式后，我们得到以下结果:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/82ec058221593963686613b8bb1c2bf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/format:webp/1*dexykgWVnhfYxNvKHFv0Nw.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">用z值表示的<em class="of">随机变量</em> <strong class="bd ny"> <em class="of"> Y </em> </strong>的高低区间值(图片由作者提供)</p></figure><p id="0792" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们现在可以用z值表示肠球菌计数<strong class="kx jh"> <em class="lr"> Y </em> </strong>的<em class="lr"> (1-α)*100% </em>置信区间如下:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi or"><img src="../Images/cd73203e9fc56f811fb64a2388994fa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*D5MRnbWKOay4fZsZsbTj0Q.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">用z值表示的<em class="of">随机变量</em> <strong class="bd ny"> <em class="of"> Y </em> </strong>的(1- <em class="of"> α) </em>置信区间(图片由作者提供)</p></figure><p id="7fcf" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下图显示了标准正态分布零均值附近90%置信区间的两个z值:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ol"><img src="../Images/97bc395af4c1ed943ea96a7d325ce33b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gpSFwTkeJuf9pWs5MhXKgw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">对应于N(0，1)分布90%置信区间的z值(图片由作者提供)</p></figure><p id="718e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们记住，以上所有假设肠球菌计数<strong class="kx jh"> <em class="lr"> Y </em> </strong>具有标准正态分布，尽管我们非常清楚它不是。我们必须找到解决这个致命弱点的方法。</p><p id="8382" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">冒着混淆一些隐喻的风险，我们现在将使用我们的黑桃a并通过以下两步“治愈”我们的致命弱点:</p><ul class=""><li id="5224" class="nj nk jg kx b ky kz lb lc le nl li nm lm nn lq no np nq nr bi translated">我们将把<strong class="kx jh"> <em class="lr"> Y </em> </strong>重新定义为在<em class="lr"> n </em>个样本中发现的肠球菌的<strong class="kx jh">平均计数。回想之前，<strong class="kx jh"> <em class="lr"> Y </em> </strong>只是点估计，单个计数。现在，我们将<strong class="kx jh"> <em class="lr"> Y </em> </strong>重新定义为平均值，如下所示:</strong></li></ul><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi os"><img src="../Images/051c4588872e2d93c3675f6da046b6dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*xwkhMFJr93Bpcsp98I1BiQ.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">n个样本的平均肠球菌计数(图片由作者提供)</p></figure><p id="5819" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里，<strong class="kx jh"> <em class="lr"> Y_1，Y_2，…Y_n </em> </strong>为样品<em class="lr"> 1，2，3，…n </em>中测定的肠球菌数。注意<strong class="kx jh"> <em class="lr"> Y_1，Y_2，…Y_n </em> </strong>本身是独立的，同分布的随机变量。也因此，重新定义的<strong class="kx jh"> <em class="lr"> Y </em> </strong>为<strong class="kx jh"> <em class="lr"> Y_1，Y_2，…Y_n </em> </strong>的均值，也是一个随机变量。为了理解为什么平均计数也是一个随机变量，想象一下从米德兰海滩收集另一个大小为<em class="lr"> n </em>的样本。它将产生不同的平均值。现在收集大小为<em class="lr"> n </em>的第三个样本，你将得到第三个，可能是平均值<strong class="kx jh"><em class="lr"/></strong>的不同值，以此类推。因此，<strong class="kx jh"> <em class="lr">的肠球菌平均计数Y本身就是一个随机变量</em> </strong>。因此，到目前为止我们得到的关于<strong class="kx jh"> <em class="lr"> Y </em> </strong>的置信区间的一切仍然成立。</p><ul class=""><li id="e07c" class="nj nk jg kx b ky kz lb lc le nl li nm lm nn lq no np nq nr bi translated">现在，让我们定义另一个随机变量<strong class="kx jh"> <em class="lr"> Z </em> </strong>使得:</li></ul><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/ca8457ddc92536c00785362114769f90.png" data-original-src="https://miro.medium.com/v2/resize:fit:486/format:webp/1*ahg_7ST9gVl_kPuxx2VY-w.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated"><strong class="bd ny"> Z </strong>作为<strong class="bd ny"> Y </strong>的函数(图片由作者提供)</p></figure><p id="0f10" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在上面的公式中:</p><ul class=""><li id="ff93" class="nj nk jg kx b ky kz lb lc le nl li nm lm nn lq no np nq nr bi translated"><em class="lr"> n </em>是样本量(在我们的数据集中，<em class="lr"> n=969 </em>)</li><li id="e221" class="nj nk jg kx b ky ns lb nt le nu li nv lm nw lq no np nq nr bi translated"><em class="lr"> </em>和<em class="lr"> σ </em>分别是总体均值和总体标准差。</li></ul><p id="6404" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">可以看出，如果<em class="lr"> n </em>是‘足够大’，那么由中心极限定理可知，<strong class="kx jh"> <em class="lr"> Z </em> </strong> <em class="lr">近似为N(0，1)分布。</em></p><p id="c249" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">还可以看出，<strong class="kx jh">对于大的<em class="lr"> n </em>，样本标准差<em class="lr"> S </em>提供了一个总体标准差<em class="lr"/></strong><em class="lr">的 <a class="ae jd" rel="noopener" target="_blank" href="/understanding-estimation-bias-and-the-bias-variance-tradeoff-79ba42ab79c"> <strong class="kx jh">无偏估计值</strong> </a> <strong class="kx jh">。</strong></em>简单来说，对于<strong class="kx jh"> <em class="lr"> Z </em> </strong>，我们可以将上面公式中的<em class="lr"> σ </em>替换为<em class="lr"> S </em>。</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/bc2de85a622296003d29a14cc63f4107.png" data-original-src="https://miro.medium.com/v2/resize:fit:478/format:webp/1*wR6hc1Q68bRUyglPatAEXw.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated"><strong class="bd ny"> Z </strong> ~ N(0，1)(图片由作者提供)</p></figure><p id="0911" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">就像<strong class="kx jh"> <em class="lr"> Y </em> </strong>一样，变量<strong class="kx jh"> <em class="lr"> Z </em> </strong>也是随机变量，但这一次，<strong class="kx jh"> <em class="lr"> Z </em> </strong>有一个近似标准的正态分布。因此，我们可以将<strong class="kx jh"><em class="lr"/></strong>的<em class="lr"> (1-α) </em>置信区间估计公式如下:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/a9c6e987648393625cb5501a42075911.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*oAffVJ3j-BKH-SwjC800QQ.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated"> <strong class="bd ny"> <em class="of"> Z </em> </strong> <em class="of">用Z值表示的(1- <em class="of"> α)置信区间估计值(图片由作者提供)</em></em></p></figure><p id="0e8b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">用公式代替上式中的<strong class="kx jh"> <em class="lr"> Z </em> </strong>:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/02a28c4d67a7d6539db5482f3ca0dd21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/format:webp/1*W3V15zUDomTc6Si2a4kaVA.png"/></div></figure><p id="da4a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">重新排列，我们有以下结果:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ox"><img src="../Images/6d7fda099cbd8c2dbea32a06878d5681.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MqUnpFpC5bnRaiGdm-MDZw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">(1- <em class="of"> α)总体均值的置信区间估计(图片由作者提供)</em></p></figure><p id="e4c0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们所完成的是在<em class="lr"> (1-α) </em>置信水平下，得出总体均值<em class="lr"> </em>的区间估计<em class="lr"> [ _low，_high] </em>。</p><p id="8ac6" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们使用上述公式计算在米德兰海滩收集的样本在95% 置信水平下<em class="lr">的区间估计值:</em></p><pre class="lt lu lv lw gt mv mw mx my aw mz bi"><span id="e71b" class="na ly jg mw b gy nb nc l nd ne"><strong class="mw jh"><em class="lr">#sample size n</em></strong><em class="lr"><br/></em>n = <strong class="mw jh">len</strong>(df_midland[<strong class="mw jh">'Enterococci_Results'</strong>])</span><span id="6faa" class="na ly jg mw b gy nf nc l nd ne"><strong class="mw jh"><em class="lr">#sample mean Y<br/></em>Y</strong> = df_midland[<strong class="mw jh">'Enterococci_Results'</strong>].<strong class="mw jh">mean</strong>()</span><span id="1811" class="na ly jg mw b gy nf nc l nd ne"><strong class="mw jh"><em class="lr">#sample standard deviation<br/></em></strong>S = df_midland[<strong class="mw jh">'Enterococci_Results'</strong>].<strong class="mw jh">std</strong>()</span><span id="7599" class="na ly jg mw b gy nf nc l nd ne"><strong class="mw jh"><em class="lr">#significance alpha (1-alpha)*100 = 95%<br/></em></strong>alpha = 0.05</span><span id="fd4a" class="na ly jg mw b gy nf nc l nd ne"><strong class="mw jh"><em class="lr">#p-value for required alpha<br/></em></strong>p = alpha / 2</span><span id="f46d" class="na ly jg mw b gy nf nc l nd ne"><strong class="mw jh"><em class="lr">#z value for the specified p-value<br/></em></strong>z_p=norm.<strong class="mw jh">ppf</strong>(1-p)</span><span id="c9a6" class="na ly jg mw b gy nf nc l nd ne"><strong class="mw jh"><em class="lr">#mu_low<br/></em></strong>mu_low = <strong class="mw jh">Y</strong> - z_p*S/math.<strong class="mw jh">sqrt</strong>(n)</span><span id="e903" class="na ly jg mw b gy nf nc l nd ne"><strong class="mw jh"><em class="lr">#mu_high<br/></em></strong>mu_high = <strong class="mw jh">Y</strong> + z_p*S/math.<strong class="mw jh">sqrt</strong>(n)</span><span id="1926" class="na ly jg mw b gy nf nc l nd ne"><strong class="mw jh">print</strong>(<strong class="mw jh">'95% Confidence intervals for the population mean (mu)='</strong>+str((mu_low, mu_high)))</span></pre><p id="4ca2" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们看到以下输出:</p><pre class="lt lu lv lw gt mv mw mx my aw mz bi"><span id="e602" class="na ly jg mw b gy nb nc l nd ne">95% Confidence intervals for the population mean (mu)=(<strong class="mw jh">15.870403932430401</strong>, <strong class="mw jh">34.751680690892634</strong>)</span></pre><p id="a724" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">相当宽的置信区间是由于样本值的高度偏斜分布，这反过来导致了较大的样本标准差<em class="lr"> S=149.94 </em>。</p></div><div class="ab cl oy oz hu pa" role="separator"><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd"/></div><div class="ij ik il im in"><h1 id="6601" class="lx ly jg bd lz ma pf mc md me pg mg mh km ph kn mj kp pi kq ml ks pj kt mn mo bi translated">区间估计在回归建模中的适用性</h1><p id="8e73" class="pw-post-body-paragraph kv kw jg kx b ky mp kh la lb mq kk ld le mr lg lh li ms lk ll lm mt lo lp lq ij bi translated">当您训练一个回归模型时，回归变量的系数会获得它们的“拟合”值，如下所示:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/9e871e0a9a9ea2f04452b364dd2178a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*powb3Q_b-FKh_DQ1-Wk_kw.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">观察值<strong class="bd ny"> Y_obs </strong>是回归矩阵<strong class="bd ny"> X </strong>的某个函数，拟合系数向量<strong class="bd ny"> β_cap </strong>和回归残差<strong class="bd ny"> ε </strong>(图片由作者提供)</p></figure><p id="2eca" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">粗体符号表示这些值是矩阵。</p><p id="e56d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">例如，<strong class="kx jh">训练的线性回归模型</strong>的方程可以表示如下:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pl"><img src="../Images/b62feef7902c6addbbc5f0d3cd2286de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*Y7AFr7Dx-66qsg2TyY4TKw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">拟合线性回归模型的方程(图片由作者提供)</p></figure><p id="9db9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">每个拟合系数<strong class="kx jh"> <em class="lr"> β_cap </em> </strong>都是随机变量。要了解原因，请想象该模型在另一个大小为<em class="lr"> n </em>的训练样本上进行训练。在第二个样本上，拟合的系数可能呈现不同的向量值。在大小为<em class="lr"> n </em>，<strong class="kx jh"> <em class="lr"> β_cap </em> </strong>的第三个训练样本上，将呈现另一个值向量，如此这般。因此，β_cap  中的每个<em class="lr"> β_cap_j </em> <strong class="kx jh"> <em class="lr">都是具有某种未知分布的随机变量。</em></strong></p><p id="7d03" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，每当您在训练数据集上训练您的回归模型时，您得到的仅仅是对<strong class="kx jh"> <em class="lr"> β_cap的真实总体值的点估计。</em>T3】</strong></p><p id="864c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这种情况下，在某种置信水平下，知道<strong class="kx jh"> <em class="lr">中每个<em class="lr"> β_cap_j </em>的“真实”群体值位于哪个区间将是有用的。换句话说，在某个置信水平<em class="lr"> (1-α)*100% </em>下，知道<strong class="kx jh"><em class="lr">β_ cap</em></strong><em class="lr"/>的区间估计是有用的。</em></strong></p><p id="4606" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">每当您训练回归模型时，您的建模软件通常会报告所有回归系数的这些置信区间。</p><p id="8a70" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们通过在肠球菌计数数据集上建立回归模型来快速演示区间估计的应用。</p><p id="4319" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们的变量如下:<br/><strong class="kx jh"><em class="lr">Y</em></strong><em class="lr">=肠球菌_结果<br/></em><strong class="kx jh"><em class="lr">X</em></strong><em class="lr">=【样品_位置，测量_星期_日，测量_月】，即3个回归变量。</em></p><p id="f524" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从导入所有必需的包开始:</p><pre class="lt lu lv lw gt mv mw mx my aw mz bi"><span id="a432" class="na ly jg mw b gy nb nc l nd ne"><strong class="mw jh">import</strong> pandas <strong class="mw jh">as</strong> pd<strong class="mw jh"><br/>from </strong>patsy <strong class="mw jh">import </strong>dmatrices<br/><strong class="mw jh">import </strong>statsmodels.api <strong class="mw jh">as </strong>sm</span></pre><p id="6a90" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用Pandas将数据集载入内存:</p><pre class="lt lu lv lw gt mv mw mx my aw mz bi"><span id="b9cd" class="na ly jg mw b gy nb nc l nd ne">df = pd.read_csv(<strong class="mw jh">'DOHMH_Beach_Water_Quality_Data.csv'</strong>, header=0, infer_datetime_format=<strong class="mw jh">True</strong>, parse_dates=[<strong class="mw jh">'Sample_Date'</strong>])</span></pre><p id="8e16" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为米德兰海滩开拓数据:</p><pre class="lt lu lv lw gt mv mw mx my aw mz bi"><span id="6fa5" class="na ly jg mw b gy nb nc l nd ne">df_midland = df[df[<strong class="mw jh">'Beach_Name'</strong>]==<strong class="mw jh">'MIDLAND BEACH'</strong>]</span></pre><p id="c466" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">添加虚拟变量:<em class="lr">测量_星期_日，测量_月</em></p><pre class="lt lu lv lw gt mv mw mx my aw mz bi"><span id="9768" class="na ly jg mw b gy nb nc l nd ne">df_midland['<strong class="mw jh">MEASUREMENT_DAY_OF_WEEK</strong>'] = df['<strong class="mw jh">Sample_Date</strong>'].dt.<strong class="mw jh">dayofweek</strong><br/>df_midland['<strong class="mw jh">MEASUREMENT_MONTH</strong>'] = df['<strong class="mw jh">Sample_Date</strong>'].dt.<strong class="mw jh">month</strong></span></pre><p id="200b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">形成回归表达式:</p><pre class="lt lu lv lw gt mv mw mx my aw mz bi"><span id="3b0f" class="na ly jg mw b gy nb nc l nd ne"><em class="lr">expr = 'Enterococci_Results ~ Sample_Location + MEASUREMENT_DAY_OF_WEEK + MEASUREMENT_MONTH'</em></span></pre><p id="4ce1" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用<a class="ae jd" href="https://patsy.readthedocs.io/en/latest/quickstart.html" rel="noopener ugc nofollow" target="_blank"> Patsy </a>雕刻出<strong class="kx jh"> <em class="lr"> X </em> </strong>和<strong class="kx jh"> <em class="lr"> y </em> </strong>矩阵:</p><pre class="lt lu lv lw gt mv mw mx my aw mz bi"><span id="1d85" class="na ly jg mw b gy nb nc l nd ne">y_train, X_train = <strong class="mw jh">dmatrices</strong>(expr, df_midland, <strong class="mw jh">return_type</strong>=<strong class="mw jh">'</strong>dataframe<strong class="mw jh">'</strong>)</span></pre><p id="7751" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用<a class="ae jd" rel="noopener" target="_blank" href="/an-illustrated-guide-to-the-poisson-regression-model-50cccba15958">泊松</a>链接函数建立并训练<a class="ae jd" rel="noopener" target="_blank" href="/generalized-linear-models-9ec4dfe3dc3f">广义线性模型</a>:</p><pre class="lt lu lv lw gt mv mw mx my aw mz bi"><span id="8a42" class="na ly jg mw b gy nb nc l nd ne">poisson_training_results = sm.<strong class="mw jh">GLM</strong>(y_train, X_train, <strong class="mw jh">family</strong>=sm.families.Poisson()).<strong class="mw jh">fit</strong>()</span></pre><p id="5bf7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">打印适合的模型摘要:</p><pre class="lt lu lv lw gt mv mw mx my aw mz bi"><span id="dfae" class="na ly jg mw b gy nb nc l nd ne"><strong class="mw jh">print</strong>(poisson_training_results.<strong class="mw jh">summary</strong>())</span></pre><p id="301f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们看到以下输出。我已经强调了模型的拟合系数。还要注意的是<a class="ae jd" href="https://www.statsmodels.org/stable/index.html" rel="noopener ugc nofollow" target="_blank"> statsmodels </a>已经打印出95%置信水平下系数的真实总体水平值的<strong class="kx jh">区间估计值</strong>:</p><figure class="lt lu lv lw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pm"><img src="../Images/c70e7d1859265a81e68f7ef448555683.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DEjIkVXbGmS0PGg-r3PeJg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">GLM泊松回归模型的训练输出显示了拟合系数和95%置信水平下的相应区间估计值(图片由作者提供)</p></figure></div><div class="ab cl oy oz hu pa" role="separator"><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd"/></div><div class="ij ik il im in"><p id="62de" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以下是本文中使用的完整源代码:</p><figure class="lt lu lv lw gt is"><div class="bz fp l di"><div class="pn po l"/></div></figure></div><div class="ab cl oy oz hu pa" role="separator"><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd"/></div><div class="ij ik il im in"><h1 id="b375" class="lx ly jg bd lz ma pf mc md me pg mg mh km ph kn mj kp pi kq ml ks pj kt mn mo bi translated">参考文献和版权</h1><h2 id="686a" class="na ly jg bd lz pp pq dn md pr ps dp mh le pt pu mj li pv pw ml lm px py mn pz bi translated">数据集</h2><p id="6f16" class="pw-post-body-paragraph kv kw jg kx b ky mp kh la lb mq kk ld le mr lg lh li ms lk ll lm mt lo lp lq ij bi translated"><a class="ae jd" href="https://data.cityofnewyork.us/Health/DOHMH-Beach-Water-Quality-Data/2xir-kwzz" rel="noopener ugc nofollow" target="_blank"> DOHMH海滩水质数据</a>取自<a class="ae jd" href="https://opendata.cityofnewyork.us/" rel="noopener ugc nofollow" target="_blank"> NYC OpenData </a>根据其<a class="ae jd" href="https://www1.nyc.gov/home/terms-of-use.page" rel="noopener ugc nofollow" target="_blank">使用条款</a></p><h2 id="64a8" class="na ly jg bd lz pp pq dn md pr ps dp mh le pt pu mj li pv pw ml lm px py mn pz bi translated">形象</h2><p id="1ebd" class="pw-post-body-paragraph kv kw jg kx b ky mp kh la lb mq kk ld le mr lg lh li ms lk ll lm mt lo lp lq ij bi translated"><strong class="kx jh">横幅图片:</strong>纽约公共图书馆美国历史、地方历史和家谱部的伊尔玛和保罗·米尔斯坦。“阳光和海水浴，米德兰海滩，斯塔滕岛，纽约[海滩上的人，远处的建筑和摩天轮。]" <em class="lr">纽约公共图书馆数字馆藏</em>。<a class="ae jd" href="https://digitalcollections.nypl.org/items/510d47d9-c04b-a3d9-e040-e00a18064a99" rel="noopener ugc nofollow" target="_blank">https://digital collections . nypl . org/items/510 d47 d9-c04b-a3d 9-e040-e00a 18064 a99</a>。<em class="lr">自由使用，不受限制。</em></p><p id="8796" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">本文中所有其他图片的版权归<a class="ae jd" href="https://www.linkedin.com/in/sachindate/" rel="noopener ugc nofollow" target="_blank"> Sachin Date </a>所有，版权归<a class="ae jd" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener ugc nofollow" target="_blank"> CC-BY-NC-SA </a>所有，除非图片下方提到了不同的来源和版权。</p></div><div class="ab cl oy oz hu pa" role="separator"><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd"/></div><div class="ij ik il im in"><p id="77db" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">感谢阅读！如果你喜欢这篇文章，请</em> <a class="ae jd" href="https://timeseriesreasoning.medium.com/" rel="noopener"> <strong class="kx jh"> <em class="lr">关注我</em> </strong> </a> <em class="lr">获取关于回归和时间序列分析的技巧、操作和编程建议。</em></p></div></div>    
</body>
</html>