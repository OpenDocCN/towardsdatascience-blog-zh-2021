<html>
<head>
<title>Different Ways To Count Unique Values In R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">计算R中唯一值的不同方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/different-ways-to-count-unique-values-in-r-ec9fe521f4d5?source=collection_archive---------7-----------------------#2021-09-09">https://towardsdatascience.com/different-ways-to-count-unique-values-in-r-ec9fe521f4d5?source=collection_archive---------7-----------------------#2021-09-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9cd4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">r通过各种方法使困难的问题变得更容易，尽管有时它也会使简单的问题变得复杂。这里有一个简单的例子来说明</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/84aa440dff93a5e652a9d182ca8ad819.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8f5yKHng8qPenzMC"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@cinusek?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马尔辛·西蒙尼德斯</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="b3d5" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">介绍</h1><p id="7435" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">我最初是Python用户。我在日常工作中使用Python来探索、可视化和分析数据。然而，目前，由于我正在攻读统计学硕士学位，所以需要学习R。由于R是一个开源程序，由不同的开发人员和统计人员提供了大约10，000个库和软件包，因此它缺乏针对特定问题开发算法的一致性。因此，起初，我发现很难熟悉R语法及其解决各种问题的方法。在本文中，我将向您展示一个简单的例子，说明R中不同的库是如何聚合值的</p><h1 id="293d" class="lg lh it bd li lj mu ll lm ln mv lp lq jz mw ka ls kc mx kd lu kf my kg lw lx bi translated">安装软件包</h1><p id="da31" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">我们将需要几个包，其中包括<strong class="ma iu"> <em class="mz"> dplyr </em> </strong>和<strong class="ma iu"> <em class="mz"> data.table. </em> </strong></p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="8b83" class="nf lh it nb b gy ng nh l ni nj">#Installing Packages</span><span id="cfae" class="nf lh it nb b gy nk nh l ni nj">install.packages("dplyr")<br/>install.packages("data.table")</span><span id="f238" class="nf lh it nb b gy nk nh l ni nj">#Loading Packages<br/>library('dplyr')<br/>library("data.table")</span></pre><h1 id="e265" class="lg lh it bd li lj mu ll lm ln mv lp lq jz mw ka ls kc mx kd lu kf my kg lw lx bi translated">资料组</h1><p id="bfc0" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">我将使用从Kaggle下载的杂货店数据集。作为参考，您可以从以下链接下载数据:</p><div class="nl nm gp gr nn no"><a href="https://www.kaggle.com/heeraldedhia/groceries-dataset" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd iu gy z fp nt fr fs nu fu fw is bi translated">杂货数据集</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">用于购物篮分析的38765行数据集</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">www.kaggle.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc ks no"/></div></div></a></div><p id="84c2" class="pw-post-body-paragraph ly lz it ma b mb od ju md me oe jx mg mh of mj mk ml og mn mo mp oh mr ms mt im bi translated">让我展示一些数据信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/1a811d2d2b4fb27cc7bbbb55a27ebddf.png" data-original-src="https://miro.medium.com/v2/resize:fit:692/format:webp/1*GY2zVA4pr9wBuSn7ncDxbg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图1:数据表概述</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/0e0ede2b83b54d4a6260343ef8c6208c.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*7_7E0Yqol7MR8ZumeXNrUg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图2:数据描述</p></figure><p id="936e" class="pw-post-body-paragraph ly lz it ma b mb od ju md me oe jx mg mh of mj mk ml og mn mo mp oh mr ms mt im bi translated">我将把数据表的日期转换成新的格式YYYY-MM，并将日期格式的新列存储为<strong class="ma iu"> <em class="mz"> month_year </em> </strong></p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="4cd2" class="nf lh it nb b gy ng nh l ni nj">DF1 &lt;- DATA <br/>DF1$month_year &lt;- format(as.Date(DF1$Date, format = "%d-%m-%Y"), "%Y-%m")</span></pre><h1 id="082c" class="lg lh it bd li lj mu ll lm ln mv lp lq jz mw ka ls kc mx kd lu kf my kg lw lx bi translated">按组计算单个变量</h1><h2 id="0a84" class="nf lh it bd li ok ol dn lm om on dp lq mh oo op ls ml oq or lu mp os ot lw ou bi translated">计算每个月-年中唯一客户的数量</h2><p id="51e7" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">这个计算有几种解决方案，我将向大家展示一些。</p><ol class=""><li id="251e" class="ov ow it ma b mb od me oe mh ox ml oy mp oz mt pa pb pc pd bi translated"><strong class="ma iu">使用基数R的aggregate()函数计算唯一值</strong></li></ol><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="a88b" class="nf lh it nb b gy ng nh l ni nj">group_by_month &lt;-<br/>aggregate(x = DF1$Member_number,          # Specify data column<br/>          by = list(DF1$month_year),      # Specify group indicator<br/>          FUN = function(x) length(unique(x))) #Desired function</span></pre><p id="4da2" class="pw-post-body-paragraph ly lz it ma b mb od ju md me oe jx mg mh of mj mk ml og mn mo mp oh mr ms mt im bi translated"><strong class="ma iu">或</strong></p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="7dd8" class="nf lh it nb b gy ng nh l ni nj">group_by_month1 &lt;- <br/>aggregate(Member_number ~ month_year, #Data column group by period<br/>          data = DF1, <br/>          FUN = function(x) length(unique(x)))</span></pre><p id="1982" class="pw-post-body-paragraph ly lz it ma b mb od ju md me oe jx mg mh of mj mk ml og mn mo mp oh mr ms mt im bi translated"><strong class="ma iu"> 2 </strong>。<strong class="ma iu">使用group_by()计算唯一值&amp;总结dplyr包的函数</strong></p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="72b7" class="nf lh it nb b gy ng nh l ni nj">group_by_month_2 &lt;- <br/>DF1 %&gt;%                             #Applying group_by &amp;summarise<br/>group_by(month_year) %&gt;%<br/>summarise(unique_customer = n_distinct(Member_number))</span></pre><p id="5e31" class="pw-post-body-paragraph ly lz it ma b mb od ju md me oe jx mg mh of mj mk ml og mn mo mp oh mr ms mt im bi translated"><strong class="ma iu"> 3。使用length() &amp; unique()函数&amp; data.table包</strong>计算唯一值</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="059d" class="nf lh it nb b gy ng nh l ni nj">group_by_month_3 &lt;- <br/>data.table(DF1)[ , .(unique_cus = length(unique(Member_number))), <br/>by = month_year]</span></pre><p id="789b" class="pw-post-body-paragraph ly lz it ma b mb od ju md me oe jx mg mh of mj mk ml og mn mo mp oh mr ms mt im bi translated">3种不同方式的结果与下图中前5行的结果相同:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/60f8a172f6598a4113d3a4da497b05d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/format:webp/1*qPJrPZwmOl2VtePQdpTPEA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图3:不同时期的不同客户</p></figure><h1 id="e9cd" class="lg lh it bd li lj mu ll lm ln mv lp lq jz mw ka ls kc mx kd lu kf my kg lw lx bi translated">按组计算多个变量</h1><h2 id="0748" class="nf lh it bd li ok ol dn lm om on dp lq mh oo op ls ml oq or lu mp os ot lw ou bi translated">计算每个月-年商店的条目数、独特顾客数和购买的独特产品数</h2><ol class=""><li id="0d06" class="ov ow it ma b mb mc me mf mh pf ml pg mp ph mt pa pb pc pd bi translated"><strong class="ma iu">使用group_by() &amp;总结dplyr包的功能</strong></li></ol><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="eed1" class="nf lh it nb b gy ng nh l ni nj">group_by_month_2a &lt;- <br/>DF1%&gt;%<br/>group_by(month_year) %&gt;%<br/>summarise(unique_customer = n_distinct(Member_number),<br/>          number_of_entries = n(),<br/>          unique_product = n_distinct(itemDescription))</span></pre><p id="9a64" class="pw-post-body-paragraph ly lz it ma b mb od ju md me oe jx mg mh of mj mk ml og mn mo mp oh mr ms mt im bi translated"><strong class="ma iu"> 2。使用length() &amp; unique()函数&amp;包data . table</strong></p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="dc0d" class="nf lh it nb b gy ng nh l ni nj">group_by_month_3a &lt;-<br/>data.table(DF1)[,  list(unique_customer = n_distinct(Member_number),<br/>number_of_entries = .N,unique_product = n_distinct(itemDescription)), by=month_year]</span></pre><p id="5f87" class="pw-post-body-paragraph ly lz it ma b mb od ju md me oe jx mg mh of mj mk ml og mn mo mp oh mr ms mt im bi translated">最终，两者都会产生相同的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/b1f533dd73e34c9f6b820a2cd663c944.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*ntt014d40qinpwizDci_Lg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图4:生成结果的前5行</p></figure><h1 id="f722" class="lg lh it bd li lj mu ll lm ln mv lp lq jz mw ka ls kc mx kd lu kf my kg lw lx bi translated">结论</h1><p id="9ccc" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">由于支持许多不同的包，R为用户开发不同的算法和模块来解决问题提供了优势。r通过各种方法使困难的问题变得更容易，尽管有时它也会使简单的问题变得复杂。作为一个R初学者，我发现这些不同的包和语法很难掌握。</p><p id="c8f1" class="pw-post-body-paragraph ly lz it ma b mb od ju md me oe jx mg mh of mj mk ml og mn mo mp oh mr ms mt im bi translated">尽管有这种困惑，我仍将努力学习R，因为它是一种有效的统计工具，当然它将有利于我在:D研究生院的成绩</p></div></div>    
</body>
</html>