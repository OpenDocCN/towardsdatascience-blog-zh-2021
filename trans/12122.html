<html>
<head>
<title>Molecular visualization in Streamlit using RDKit and Py3DMol</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 RDKit 和 Py3DMol 在 Streamlit 中进行分子可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/molecular-visualization-in-streamlit-using-rdkit-and-py3dmol-4e8e63488eb8?source=collection_archive---------11-----------------------#2021-12-07">https://towardsdatascience.com/molecular-visualization-in-streamlit-using-rdkit-and-py3dmol-4e8e63488eb8?source=collection_archive---------11-----------------------#2021-12-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2838" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">第 1 部分:RDKit</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/24da5cc60f6df5a09ee1b3b1108f77bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*Gpu_eeUpI_dDtuOpk9o0kA.gif"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">Streamlit 中的 RDKit 和 Py3DMol。图片作者。</p></figure><h2 id="d8e9" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">1.介绍</h2><p id="35a4" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">在我知道<a class="ae mj" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank">Streamlit</a>【1】后不久，我的<a class="ae mj" href="https://jnapoles.medium.com/is-it-possible-to-use-streamlit-to-visualize-molecules-b4e29700f61c" rel="noopener">第一个问题</a>【2】是，如何可能部署分子结构？在这篇文章和下一篇文章中，我将把我所学到的贡献出来，希望这对其他人有所帮助。</p><p id="e5a0" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">在这个由两部分组成的系列中，我将重点介绍两个流行的库，RDKit 和 Py3Dmol。第一种广泛用于分析化合物，并在 2D 用图形表示分子。第二个是渲染 3D 结构的极好选择，从分子到像蛋白质或病毒这样的大分子，还有电子密度的 3D 网格。</p><p id="84a7" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">第一篇文章应该简短明了，我不打算深入探讨 Streamlit 更复杂的用法。为此，我建议访问<a class="ae mj" href="https://discuss.streamlit.io/" rel="noopener ugc nofollow" target="_blank">论坛</a>【3】并查看<a class="ae mj" href="https://docs.streamlit.io/" rel="noopener ugc nofollow" target="_blank">文档</a>【4】。如果您不了解 Streamlit，它是一个很好的框架，可以从 python 脚本快速开发令人印象深刻的 web 应用程序。</p><h2 id="2acd" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">2.安装必备库。</h2><p id="c913" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">所以，让我们从安装库开始。我假设您已经安装了 Streamlit 如果没有，请执行以下操作:</p><pre class="kj kk kl km gt mp mq mr ms aw mt bi"><span id="53aa" class="ku kv it mq b gy mu mv l mw mx">pip install streamlit</span></pre><p id="e60c" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">这里我们将使用 RDkit 的 pip 可安装版本，我们可以这样安装它:</p><pre class="kj kk kl km gt mp mq mr ms aw mt bi"><span id="9d7f" class="ku kv it mq b gy mu mv l mw mx">pip install rdkit-pypi</span></pre><p id="78bf" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">顺便提一下，在 google Colab 上安装<em class="my"> rdkit-pypi </em>也能很好地工作，这对于原型开发来说非常好。您可能还希望以 RDKit 处理 PIL 对象的相同方式安装 Pillow，尽管这不是强制性的。</p><h2 id="29cf" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">3.构建应用程序。</h2><p id="5064" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">使用 Streamlit 的最大优势是，只需几行 python 代码，您就可以拥有一个工作的 web 应用程序。下面是快速开始使用 RDKit 的最少代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="93c9" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">对于不熟悉 RDKit 的，我简单解释一下。在第 6 行中，我们定义了一个<a class="ae mj" href="https://www.daylight.com/smiles/" rel="noopener ugc nofollow" target="_blank">微笑字符串</a>，其中原子和键由 ASCII 字符表示。在这个例子中，分子是阿司匹林。其他例子有:</p><ul class=""><li id="2da1" class="nb nc it ls b lt mk lw ml ld nd lh ne ll nf mi ng nh ni nj bi translated">乙醇 CCO</li><li id="d9a9" class="nb nc it ls b lt nk lw nl ld nm lh nn ll no mi ng nh ni nj bi translated">乙酸 CC(=O)O</li><li id="7d18" class="nb nc it ls b lt nk lw nl ld nm lh nn ll no mi ng nh ni nj bi translated">环己烷 C1CCCCC1</li><li id="fb6e" class="nb nc it ls b lt nk lw nl ld nm lh nn ll no mi ng nh ni nj bi translated">吡啶 c1cnccc1</li></ul><p id="8358" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">第 7 行从微笑构建了一个 mol 对象，第 8 行创建了一个 PIL 对象，最后在第 10 行由 Streamlit 用<em class="my"> st.image() </em>显示。生成的最小 web 应用程序如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/8f4d652761b1e01db6615af400455ca7.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*W1IBtDIoMFwsYEzWE4CgBQ.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">在 Streamlit 中使用 RDKit 的简单示例的屏幕截图。图片由作者提供。</p></figure><p id="fba9" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">或者，您可以将第 8 行替换为:</p><pre class="kj kk kl km gt mp mq mr ms aw mt bi"><span id="eb4f" class="ku kv it mq b gy mu mv l mw mx">Draw.MolToFile(m,’mol.png’)</span></pre><p id="b2b7" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">这将把 mol 对象写成 png 图像，您可以使用</p><pre class="kj kk kl km gt mp mq mr ms aw mt bi"><span id="619b" class="ku kv it mq b gy mu mv l mw mx">st.image('mol.png')</span></pre><p id="a2c7" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">当然，您可能希望通过使用 Streamlit 小部件在 web 应用程序中包含更多的交互性。尝试添加一个文本字段来输入微笑字符串，或者使用滑块来查看多个分子！！您还希望看到哪些其他用例？？</p><h2 id="8bce" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">4.在 Streamlit 云上托管它！</h2><p id="9cfe" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">如果您使用的是<a class="ae mj" href="https://streamlit.io/cloud" rel="noopener ugc nofollow" target="_blank"> Streamlit Cloud </a> [5】，那么在 github repo 中需要一个 packages.txt 文件，只有一行“libxrender1”。这是从经验中学到的东西，没有记录下来，但是最终人们会发现在日志文件中需要它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="2be7" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">此外，您可以使用 rdkit-pypi 和 Pillow 添加一个“requirements.txt”文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="cea7" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">仅此而已。你可以在这里看到这个小项目<a class="ae mj" href="https://github.com/napoles-uach/Medium_Mol" rel="noopener ugc nofollow" target="_blank">的回购。这是共享应用程序的最佳方式。</a><a class="ae mj" href="https://streamlit.io/cloud" rel="noopener ugc nofollow" target="_blank"> Streamlit Cloud </a>提供社区层(免费！！)来托管您的 web 应用程序。因此，如果您打算使用 Streamlit，您将会爱上这项服务。请点击此处查看示例应用的发布版本:</p><p id="6653" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated"><a class="ae mj" href="https://share.streamlit.io/napoles-uach/medium_mol/main/app1.py" rel="noopener ugc nofollow" target="_blank">https://share . streamlit . io/napoles-uach/medium _ mol/main/app 1 . py</a></p><h2 id="153f" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">5.结论。</h2><p id="5d2e" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">这样，你就可以建立更复杂的分子可视化了。在本系列的第二部分，我将向您展示我在 Streamlit 中使用 Py3DMol 时学到的一些技巧。</p><p id="17e8" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">最后，我邀请你来参加<a class="ae mj" href="https://discuss.streamlit.io/" rel="noopener ugc nofollow" target="_blank">论坛</a>，打个招呼，并使用 Streamlit 和 RDKit 向我们展示你的创作！！第二部见！！</p><h2 id="c05e" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">6.致谢。</h2><p id="bd6e" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">我要感谢伟大的<a class="ae mj" href="https://www.youtube.com/dataprofessor" rel="noopener ugc nofollow" target="_blank">数据教授</a>Chanin Nantasenamat，感谢他在撰写这篇文章时的善意建议。</p><p id="9478" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">如果你喜欢这篇文章，可以考虑订阅邮件列表:</p><div class="ns nt gp gr nu nv"><a href="https://jnapoles.medium.com/subscribe" rel="noopener follow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd iu gy z fp oa fr fs ob fu fw is bi translated">每当 joséMANUEL náPOLES du arte 发表文章时都会收到电子邮件。</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">每当 joséMANUEL náPOLES du arte 发表文章时都会收到电子邮件。通过注册，您将创建一个中型帐户，如果您…</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">jnapoles.medium.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj ko nv"/></div></div></a></div><h2 id="c49a" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">参考资料:</h2><p id="a2d7" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">[1]<a class="ae mj" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank">https://streamlit.io/</a></p><p id="1493" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">[2]<a class="ae mj" href="https://jnapoles.medium.com/is-it-possible-to-use-streamlit-to-visualize-molecules-b4e29700f61c" rel="noopener">https://jna poles . medium . com/is-it-possible-to-use-streamlit-visualize-molecules-b4e 29700 f61c</a></p><p id="fb9b" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">[3]<a class="ae mj" href="https://discuss.streamlit.io/" rel="noopener ugc nofollow" target="_blank">https://discuss.streamlit.io/</a></p><p id="5f80" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">[4]https://docs.streamlit.io/<a class="ae mj" href="https://docs.streamlit.io/" rel="noopener ugc nofollow" target="_blank"/></p><p id="8802" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">[5]https://streamlit.io/cloud<a class="ae mj" href="https://streamlit.io/cloud" rel="noopener ugc nofollow" target="_blank"/></p><p id="7d6c" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">[6]<a class="ae mj" href="https://github.com/napoles-uach/Medium_Mol" rel="noopener ugc nofollow" target="_blank">https://github.com/napoles-uach/Medium_Mol</a></p></div></div>    
</body>
</html>