<html>
<head>
<title>How To Get All Orders From Shopify</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从Shopify获得所有订单</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-get-all-orders-from-shopify-69db163c7a2d?source=collection_archive---------13-----------------------#2021-05-04">https://towardsdatascience.com/how-to-get-all-orders-from-shopify-69db163c7a2d?source=collection_archive---------13-----------------------#2021-05-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a828" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Shopify API调用入门</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a92e30df8df88308d0bd02fb61fab575.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hkHNHWZtO8Vb0uo06hykzw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com/s/photos/shopping?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae ky" href="https://unsplash.com/@camorin13?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Cam Morin </a>拍摄的照片</p></figure><p id="95ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Shopify是最著名的建立网上商店的平台之一。作为一名数据科学家，我多次被要求构建一些集成到Shopify中的东西，如订单的自动描述性分析、ERP连接器等。我们要做的第一件事是从Shopify获取我们想要的所有信息，即订单及其信息。在本帖中，我们将向您展示如何设置一个私有应用程序，并使用它来获取python中超过250行限制的所有订单。</p><h1 id="0b30" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">在Shopify中创建私人应用程序</h1><p id="4f91" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">首先，我们需要创建一个私有应用程序来获取API URL。</p><p id="42c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一步:导航到左边，点击<strong class="lb iu">应用</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/17757c31c405f26d44bcd088bbacac98.png" data-original-src="https://miro.medium.com/v2/resize:fit:478/format:webp/0*jiiPsGRyBoDTKbsA.jpg"/></div></figure><p id="faff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二步:向下滚动，点击<strong class="lb iu">管理私人应用</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/8131a67a3728c8d9dc58eddd4af11f32.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/format:webp/0*8jwlSavfNwgSg8Nk.jpg"/></div></figure><p id="0a14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第三步<strong class="lb iu">:创建一个新的私人应用</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/764d3ec5e396dfdf75c8e7f3a919d08c.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/0*8j77rSU9khRzHt9F.jpg"/></div></figure><p id="7cc8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建应用程序后，您可以获得我们将在示例url占位符中使用的URL。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/df2d434325833764707f672aa2054fc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/0*Jlb0ZccgAttetNbl.jpg"/></div></figure><h1 id="0a48" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">获取所有订单</h1><p id="9803" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在，您应该有一个以下格式的URL:</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="6e87" class="nb lw it mx b gy nc nd l ne nf"><a class="ae ky" href="https://{apikey}:{password}@{hostname}/admin/api/{version}/{resource}.json" rel="noopener ugc nofollow" target="_blank">https://{apikey}:{password}@{hostname}/admin/api/{version}/{resource}.json</a></span></pre><p id="473e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们希望获得所有订单，所以我们需要在URL中添加一些变量。</p><ul class=""><li id="de3f" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><strong class="lb iu"> limit=250 </strong>，这是我们能拿到的最大订单数。</li><li id="e971" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><strong class="lb iu">fulfillment _ status = unfully</strong>，我们将获得所有未履行的订单，因此我们将使用未履行状态。您可以删除它，并获得已履行的订单。</li><li id="ed80" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><strong class="lb iu">因为_id= </strong>，这意味着我们想要从我们将提供的订单id开始的所有订单。我们将用它来超过250个订单的限制。</li></ul><p id="31d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里的技巧是在每次API调用后获取最旧的订单ID，并在下一次调用since_id变量时使用它。然后，当API将返回少于我们的限制(250)时，我们停止循环并返回<strong class="lb iu">订单</strong>数据帧。</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="f1e5" class="nb lw it mx b gy nc nd l ne nf">import pandas as pd<br/>import numpy as np<br/>import re<br/>import requests<br/></span><span id="764d" class="nb lw it mx b gy nu nd l ne nf">def get_all_orders():<br/>    last=0<br/>    orders=pd.DataFrame()<br/>    while True:<br/>        url = f"https://{apikey}:{password}@{hostname}/admin/api/{version}/{resource}.json?limit=250&amp;fulfillment_status=unfulfilled&amp;since_id={last}"<br/>        response = requests.request("GET", url)<br/>        <br/>        df=pd.DataFrame(response.json()['orders'])<br/>        orders=pd.concat([orders,df])<br/>        last=df['id'].iloc[-1]<br/>        if len(df)&lt;250:<br/>            break<br/>    return(orders)</span><span id="1067" class="nb lw it mx b gy nu nd l ne nf">df=get_all_orders()<br/>df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/f556cf8144de642e22855dbeb7e55f1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lUpCms0cEXqR6b52.jpg"/></div></div></figure><h1 id="05df" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">最后的想法</h1><p id="5b4e" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">个人认为Shopify有很多自由职业者数据科学家的机会。需要定制应用程序、API或仅仅是分析，在大多数情况下，除了订单，你不需要任何其他信息。</p></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><p id="b986" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以后我会写更多初学者友好的帖子。<a class="ae ky" href="https://medium.com/@billybonaros" rel="noopener">在媒体上关注我</a>或<a class="ae ky" href="https://predictivehacks.com/" rel="noopener ugc nofollow" target="_blank">访问我的博客</a>了解他们。</p><p id="2f70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我欢迎提问、反馈和建设性的批评，你可以通过推特(Twitter)或社交网站(Instagram)联系我。</p><p id="d9ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="od">原载于</em><a class="ae ky" href="https://predictivehacks.com/how-to-get-all-orders-from-shopify-in-python/" rel="noopener ugc nofollow" target="_blank"><em class="od">https://predictivehacks.com</em></a></p></div></div>    
</body>
</html>