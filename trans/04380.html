<html>
<head>
<title>A Crash Course in R Plot Customization</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R剧情定制速成班</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-crash-course-in-r-plot-customization-38473262184c?source=collection_archive---------39-----------------------#2021-04-13">https://towardsdatascience.com/a-crash-course-in-r-plot-customization-38473262184c?source=collection_archive---------39-----------------------#2021-04-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b7c8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">把剧情从布拉到哇</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/684b1444af6c61c50c6aeca375f79cb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8ktoSiwM423kRlRg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@steinart?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Steinar Engeland </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="bc9e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用RStudio时，您首先要学习的函数之一是<code class="fe ls lt lu lv b">plot() </code>函数，它可以制作简单的X-Y图来帮助您可视化数据。在本文中，我们将向您展示如何通过以下方式改进您的绘图:</p><ul class=""><li id="4787" class="lw lx iq ky b kz la lc ld lf ly lj lz ln ma lr mb mc md me bi translated">叠加多个图</li><li id="fbef" class="lw lx iq ky b kz mf lc mg lf mh lj mi ln mj lr mb mc md me bi translated">改变颜色和尺寸</li><li id="2171" class="lw lx iq ky b kz mf lc mg lf mh lj mi ln mj lr mb mc md me bi translated">覆盖趋势线</li><li id="d527" class="lw lx iq ky b kz mf lc mg lf mh lj mi ln mj lr mb mc md me bi translated">添加地块网格</li><li id="2adb" class="lw lx iq ky b kz mf lc mg lf mh lj mi ln mj lr mb mc md me bi translated">与<code class="fe ls lt lu lv b">plot()</code>的各层合作，让一切都恰到好处</li></ul><p id="a94e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本帖中，我们将向您展示如何对一个简单的散点图进行这些调整，但是这里介绍的技巧和工具也可以直接应用于其他类型的图——条形图、折线图等等。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><p id="2de6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们从创建一个简单的数据框和一个基本的绘图开始:</p><pre class="kg kh ki kj gt mr lv ms mt aw mu bi"><span id="f51b" class="mv mw iq lv b gy mx my l mz na">df &lt;- data.frame (A = c(1,2,3,4,5,6,7),<br/>                  B = c(1.2, 2.2, 2.9, 3.9, 5.2, 6, 7.1),<br/>                  C = c(0.55, 1.1, 1.56, 1.96, 2.45, 3.11, 3.55))<br/># plot(x,y)<br/>plot(df$A, df$B)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/71755f68208ea893c9ac7e25987c3866.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*z9fWCnnVKoxN97e7aY3OTg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">极其乏味的散点图</p></figure><p id="6864" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将创建最基本的绘图，具有自动缩放的轴和默认轴标签。首先，我们来提高一些基本的审美。自动缩放可能不是首选-在这种情况下，可以用<code class="fe ls lt lu lv b">xlim</code>和<code class="fe ls lt lu lv b">ylim</code>手动设置。</p><p id="ac83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们来加点颜色！<code class="fe ls lt lu lv b">col</code>是一种简单的方法，可以通过数百个直观的颜色名称来改变数据点的颜色。完整列表可通过<code class="fe ls lt lu lv b">colors()</code>找到。</p><p id="677b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们这样做的时候——默认的开放圆很好，但是我们的点形状有更多的选择。这些有26个选项(<a class="ae kv" href="http://www.endmemo.com/r/pchsymbols.php" rel="noopener ugc nofollow" target="_blank">见这里的</a>)，通过设置从0到25的值来调用。其中最有趣的是允许我们通过使用<code class="fe ls lt lu lv b">bg</code>属性来指定一个形状和填充该形状的颜色。</p><p id="7fae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">再来一个——让我们用<code class="fe ls lt lu lv b">cex</code>来调整数据点的大小。为了调整尺寸，我们指定一个数字比例因子——例如，我们应用<code class="fe ls lt lu lv b">cex = 1.2</code>使它们为原始尺寸的120%。<code class="fe ls lt lu lv b">cex</code>是一个强大的工具，它可以让我们调整几乎任何东西的大小——但稍后会有更多的介绍。让我们来看看当我们把它们放在一起时是什么样子:</p><pre class="kg kh ki kj gt mr lv ms mt aw mu bi"><span id="48fa" class="mv mw iq lv b gy mx my l mz na">plot(df$A, df$B, col="blue", xlim=c(0,8), ylim=c(0,8), <br/>     pch=25, bg="lightblue", cex=1.5)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/250d80bbcd46bb4004b4c736bb1db3a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*OrHn09d7C1x49JJppsinKQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">一些基本的颜色和形状升级</p></figure></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="8097" class="nd mw iq bd ne nf ng nh ni nj nk nl nm jw nn jx no jz np ka nq kc nr kd ns nt bi translated">层层叠叠</h1><p id="ef71" class="pw-post-body-paragraph kw kx iq ky b kz nu jr lb lc nv ju le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">想到<code class="fe ls lt lu lv b">plot()</code>命令的一个很好的方法是，它设置绘图空间，并且每个后续命令粘贴到它上面。这对我们来说意味着我们可以分段构建一个图，在我们遍历单独的代码行时添加。</p><p id="0c44" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于绘图功能，覆盖我们的数据帧的附加元素进行比较将是有用的。我们可以用<code class="fe ls lt lu lv b">points</code>命令在同一个绘图上覆盖另一列数据，这里，像绘图一样，我们设置X，Y，颜色，符号(pch)等。</p><p id="9fac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">手动向我们的绘图添加线条也可以帮助可视化，无论是对于趋势线这样的东西，还是对于设置一个简单的网格。我们用<code class="fe ls lt lu lv b">abline</code>添加这些，它们有一些简单的预置</p><ul class=""><li id="9a89" class="lw lx iq ky b kz la lc ld lf ly lj lz ln ma lr mb mc md me bi translated"><code class="fe ls lt lu lv b">h</code>为水平线</li><li id="229e" class="lw lx iq ky b kz mf lc mg lf mh lj mi ln mj lr mb mc md me bi translated"><code class="fe ls lt lu lv b">v</code>对于垂直线</li><li id="d2b1" class="lw lx iq ky b kz mf lc mg lf mh lj mi ln mj lr mb mc md me bi translated"><code class="fe ls lt lu lv b">a</code>为y轴截距，<code class="fe ls lt lu lv b">b</code>为斜率</li></ul><p id="885f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以用<code class="fe ls lt lu lv b">lwd</code>设置线条的线宽，这也可以用来调整我们的点符号轮廓的线宽。线型也可以用<code class="fe ls lt lu lv b">lty</code>通过六个名称中的一个来控制(虚线等)，如<code class="fe ls lt lu lv b">"dashed"</code>或<code class="fe ls lt lu lv b">"dotted"</code> ( <a class="ae kv" href="http://www.sthda.com/english/wiki/line-types-in-r-lty" rel="noopener ugc nofollow" target="_blank">这里是完整列表</a>)。</p><pre class="kg kh ki kj gt mr lv ms mt aw mu bi"><span id="986d" class="mv mw iq lv b gy mx my l mz na">plot(df$A, df$B, col="blue", xlim=c(0,8), ylim=c(0,8), <br/>     pch=25, bg="lightblue", cex=1.2, lwd=2)</span><span id="cae3" class="mv mw iq lv b gy nz my l mz na"># the second set of points<br/>points(df$A, df$C, col="darkgreen", pch=17, cex=1.6)</span><span id="6e54" class="mv mw iq lv b gy nz my l mz na"># horizontal grid lines<br/>abline(h=0:8, col="gray")</span><span id="0628" class="mv mw iq lv b gy nz my l mz na"># vertical grid lines<br/>abline(v=0:8, col="gray")</span><span id="ffa0" class="mv mw iq lv b gy nz my l mz na"># trendline- a: intercept, b: slope<br/>abline(a=0, b=1, lty="dashed", lwd=2, col="blue")</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/487e06c169d40028308231f2b98cfc4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*mWLnuMAYVWmyvrmQxltxHw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">但是为什么那些点隐藏在网格线后面呢？</p></figure><p id="8c99" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">细心的人会发现，我们的网格线现在位于我们的点上方——这又回到了<code class="fe ls lt lu lv b">plot()</code>的层层叠加方法，每个操作都叠加在前一个之上。为了克服这一点，我们将首先创建一个空白画布，然后按顺序添加我们的层。为此，我们使用<code class="fe ls lt lu lv b">NULL</code>来代替<code class="fe ls lt lu lv b">plot()</code>中的x，y变量。值得注意的是，我们仍然需要在这一步设置我们的自定义<code class="fe ls lt lu lv b">xlim</code>和<code class="fe ls lt lu lv b">ylim</code>，因为我们以后没有机会了。</p><pre class="kg kh ki kj gt mr lv ms mt aw mu bi"><span id="2177" class="mv mw iq lv b gy mx my l mz na"># blank canvas<br/>plot(NULL, xlim=c(0,8), ylim=c(0,8))</span><span id="ef46" class="mv mw iq lv b gy nz my l mz na"># line overlays<br/>abline(h=0:8, col="gray")<br/>abline(v=0:8, col="gray")<br/>abline(a=0, b=1, lty="dashed", lwd=2, col="blue")</span><span id="1680" class="mv mw iq lv b gy nz my l mz na">#points:<br/>points(df$A, df$B, col="blue", pch=25, bg="lightblue", <br/>       cex=1.2, lwd=2)<br/>points(df$A, df$C, col="darkgreen", pch=17, cex=1.6)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/8567b61b71dee7e68aba139cfbbe4109.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*T7By6KPVHPDwqeGPP6PW8g.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">这才像话！</p></figure></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><p id="346a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们就要到了，但是现在我们的轴标题并不完全是描述性的，不是吗？在我的下一篇文章中，我将展示如何编辑它们，添加标题、副标题和图例。现在，这里显示的代码可以在我的github <a class="ae kv" href="https://github.com/bamattis/Blog/tree/main/R/PLOT%20in%20R/Crash%20Course" rel="noopener ugc nofollow" target="_blank">这里</a>找到。我鼓励你尝试所有的设定，并从定制剧情中获得一些乐趣，让它按照你喜欢的方式进行。</p><p id="e6ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">觉得这篇文章有用？在Medium上关注我(<a class="ae kv" href="https://brian-mattis.medium.com/" rel="noopener">布莱恩·马蒂斯</a>)，以获得我最新帖子的通知！</p></div></div>    
</body>
</html>