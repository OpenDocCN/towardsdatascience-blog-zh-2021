<html>
<head>
<title>The Second Seven Primary Concepts and Code Examples For Using Kubernetes Productively</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">高效使用Kubernetes的第二个七个主要概念和代码示例</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-second-seven-primary-concepts-and-code-examples-for-using-kubernetes-productively-7170642c4094?source=collection_archive---------23-----------------------#2021-08-25">https://towardsdatascience.com/the-second-seven-primary-concepts-and-code-examples-for-using-kubernetes-productively-7170642c4094?source=collection_archive---------23-----------------------#2021-08-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6775" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">这篇博客文章是第二篇解释Kubernetes的博客文章，没有深入研究其内部架构。我将通过Minikube代码示例讨论接下来的七个Kubernetes基本概念。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e0f9cc516befa72a8dd6e7e174cc60c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2fOEjuJ0FZoRA3zUt5XwVQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Kubernetes协调了所有通过网络连接的虚拟机和应用程序的分布。照片由S <a class="ae ky" href="https://unsplash.com/@samthewam24?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> amuel Sianipar </a>在<a class="ae ky" href="https://unsplash.com/s/photos/orchestra?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="6e7e" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">安装kubectl</h1><p id="6b05" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在这篇博客文章中，我经常提到<code class="fe mn mo mp mq b">kubectl</code>。</p><p id="d765" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><code class="fe mn mo mp mq b">kubectl</code>是您的本地命令行界面(CLI ),用于与单个Kubernetes集群交换声明性或命令性指令。Kubernetes群集位于您的本地沙盒中；我们使用Minikube或通过网络远程操作。</p><p id="781f" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">你需要<a class="ae ky" href="https://kubernetes.io/docs/tasks/tools/" rel="noopener ugc nofollow" target="_blank">安装</a>T2才能继续。</p><p id="d93b" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">大多数<code class="fe mn mo mp mq b"><a class="ae ky" href="https://kubernetes.io/docs/tasks/tools/" rel="noopener ugc nofollow" target="_blank">kubectl</a></code>命令的总结如下:</p><div class="mw mx gp gr my mz"><a href="https://kubernetes.io/docs/reference/kubectl/cheatsheet/" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd iu gy z fp ne fr fs nf fu fw is bi translated">kubectl备忘单</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">这个页面包含一个常用kubectl命令和标志的列表。Kubectl自动完成BASH源代码&gt; ~/。bashrc #…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">kubernetes.io</p></div></div><div class="ni l"><div class="nj l nk nl nm ni nn ks mz"/></div></div></a></div></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="f4fc" class="kz la it bd lb lc nv le lf lg nw li lj jz nx ka ll kc ny kd ln kf nz kg lp lq bi translated">安装minikube</h1><p id="e127" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">除了在这篇博客文章中使用<code class="fe mn mo mp mq b">kubectl</code>，我还使用了<code class="fe mn mo mp mq b">minikube.</code></p><p id="24d0" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><a class="ae ky" href="https://kubernetes.io/docs/setup/learning-environment/minikube/" rel="noopener ugc nofollow" target="_blank"> Minikube </a>是一款流行的工具，可以在您的本地工作站上使用Kubernetes进行培训或测试。</p><p id="15fc" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">Minikube是您在本地计算机上运行Kubernetes的方式。</p><p id="73c4" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我认为Minikube是我安装在本地机器上的一个程序，用来训练或测试Kubernetes。</p><p id="a6f0" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">下面这篇博客文章将更详细地介绍如何设置和更改哪个<code class="fe mn mo mp mq b"><a class="ae ky" href="https://kubernetes.io/docs/tasks/tools/" rel="noopener ugc nofollow" target="_blank">minikube</a></code>集群<code class="fe mn mo mp mq b">kubectl</code>正在指向哪个集群。</p><div class="mw mx gp gr my mz"><a href="https://itnext.io/is-minikubes-profile-a-kubernetes-cluster-c0f134c5e684" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd iu gy z fp ne fr fs nf fu fw is bi translated">Minikube的配置文件是Kubernetes集群吗？</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">我讨论了导致Minikube表现得像Kubernetes的稀疏记录的桥接概念。</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">itnext.io</p></div></div><div class="ni l"><div class="oa l nk nl nm ni nn ks mz"/></div></div></a></div><p id="299d" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">在继续之前，您需要<a class="ae ky" href="https://kubernetes.io/docs/tasks/tools/" rel="noopener ugc nofollow" target="_blank">安装</a> <code class="fe mn mo mp mq b"><a class="ae ky" href="https://kubernetes.io/docs/tasks/tools/" rel="noopener ugc nofollow" target="_blank">minikube,</a></code>。</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="8d1b" class="kz la it bd lb lc nv le lf lg nw li lj jz nx ka ll kc ny kd ln kf nz kg lp lq bi translated">前一篇博客文章的摘要</h1><p id="48e7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在第一篇博客文章中，我介绍了Kubernetes是分布式计算资源云的操作系统这一前提。</p><div class="mw mx gp gr my mz"><a rel="noopener follow" target="_blank" href="/the-first-nine-primary-concepts-and-code-examples-for-using-kubernetes-productively-d2aabccc0380"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd iu gy z fp ne fr fs nf fu fw is bi translated">高效使用Kubernetes的前九个主要概念和代码示例</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">Kubernetes的解释和使用不应该讨论内部架构组件。相反，我讨论…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">towardsdatascience.com</p></div></div><div class="ni l"><div class="ob l nk nl nm ni nn ks mz"/></div></div></a></div><p id="9a92" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我详细介绍了高效使用Kubernetes所需的前九个基本概念，同时避免了Kubernetes内部架构的复杂性。</p><p id="2550" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">前一篇博客文章的要点是Kubernetes编排了两个抽象维度。第一个维度是节点——计算资源。第二个维度是容器图像—应用程序。</p><p id="1163" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">在这篇博客文章中。我涵盖了节点、节点池、容器映像、pod、集群、入口和端点对象。</p><p id="3b03" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">Kubernetes与云无关，因为:</p><ol class=""><li id="36f9" class="oc od it lt b lu mr lx ms ma oe me of mi og mm oh oi oj ok bi translated">将物理机引擎转变为虚拟机。然后将虚拟机映射到Kubernetes抽象<em class="ol">节点。</em></li><li id="926f" class="oc od it lt b lu om lx on ma oo me op mi oq mm oh oi oj ok bi translated">通过将应用程序放入<a class="ae ky" href="https://www.cio.com/article/2924995/what-are-containers-and-why-do-you-need-them.html" rel="noopener ugc nofollow" target="_blank">容器</a>映像中，将应用程序转换为一组虚拟应用程序。容器被映射到Kubernetes抽象<em class="ol">pod。</em></li></ol><p id="c3b9" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">Kubernetes协调pods，在<em class="ol">节点</em>上启动并初始化<em class="ol"> pods </em>，如果无法到达，则在不同的<em class="ol">节点</em>上重新启动<em class="ol"> pods </em>(容错、复制(扩展)pods)，并在pods上执行其他分布式操作系统操作。</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="586a" class="kz la it bd lb lc nv le lf lg nw li lj jz nx ka ll kc ny kd ln kf nz kg lp lq bi translated">10.Kubernetes节点和节点池抽象了计算引擎</h1><p id="cbc3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我详述了Kubernetes节点的第一维主干——计算资源。</p><p id="e60b" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">Kubernetes的一个重要概念是独立于计算硬件的类型。Kubernetes将计算引擎(硬件和操作)规范抽象为一个<em class="ol">节点</em>。</p><p id="104a" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">一个<em class="ol">节点</em>是主要云供应商的一组有限的虚拟机(VM)产品。每种服务类型都指定了计算资源和单位时间的租赁价格。</p><p id="3ec8" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">虚拟机类型描述了CPU、GPU和xPU的混合；记忆的数量和类型(快速记忆)；磁盘的数量和类型(慢速内存)；以及免费的Linux变种操作系统(OS)。</p><p id="e444" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">从现在开始，我使用术语虚拟机(VM)来指代计算引擎。</p><p id="0a35" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">每个云供应商都允许您使用其他想要添加或替换的资源来构建定制的虚拟机类型。</p><p id="8f79" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu"> <em class="ol">注</em> </strong> <em class="ol">:云厂商提供MS Windows NT等其他OS变种。</em></p><p id="b6b6" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">您将一个VM类型分配给Kubernetes外部的一个节点。因此，Kubernetes配置是云独立的，因为它只知道哪些<em class="ol">节点</em>被分配给<em class="ol">集群</em>，并且独立于该节点的实际计算类型。</p><p id="5f0d" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">由于Kubernetes编排服务的异构性(如故障转移和复制)造成的限制，云实施只允许将同构节点(相同虚拟机类型)的节点池添加到Kubernetes集群中。</p><p id="f0d4" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">在云上部署Kubernetes时，我们需要将一个Kubernetes节点映射到云中的一个VM。</p><p id="c22b" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">因为Kubernetes与VM类型无关，所以Kubernetes与云类型无关。</p><p id="8901" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">云计算硬件如何映射到Kubernetes节点在特定云供应商的文档中。它不在Kubernetes文档中。</p><p id="6b87" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">下面引用的博客文章向您展示了如何为四种不同的云类型指定Kubernetes节点的计算资源:</p><div class="mw mx gp gr my mz"><a rel="noopener follow" target="_blank" href="/how-to-assign-computing-resources-for-four-different-cloud-kubernetes-services-aks-eks-gke-and-b3f4deb722bc"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd iu gy z fp ne fr fs nf fu fw is bi translated">如何为四种不同的云Kubernetes服务分配计算资源:AKS、EKS、GKE和…</h2><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">towardsdatascience.com</p></div></div><div class="ni l"><div class="or l nk nl nm ni nn ks mz"/></div></div></a></div><p id="7da0" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu"> <em class="ol">注</em> </strong> <em class="ol">:您可以用</em> <code class="fe mn mo mp mq b"><a class="ae ky" href="https://kubernetes.io/docs/tasks/tools/" rel="noopener ugc nofollow" target="_blank"><em class="ol">kubectl</em></a></code> <em class="ol">指定虚拟机类型，或者让云厂商根据负载分配虚拟机类型。我建议您从云供应商自动分配开始，然后优化您的体验或当成本失控时。</em></p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="3a94" class="kz la it bd lb lc nv le lf lg nw li lj jz nx ka ll kc ny kd ln kf nz kg lp lq bi translated">11.什么是Kubernetes集群，它有什么作用？</h1><p id="b421" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Kubernetes是一个用于通过网络连接的节点(VM)的分布式操作系统。一个特定的节点网络就是Kubernetes <em class="ol">集群</em>。</p><p id="343b" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">一个或多个节点池被分配给Kubernetes集群(节点)。节点池被分配给一个群集，不能在其他群集之间共享。</p><p id="1ebb" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">Kubernetes在一个集群中协调您分配的多个节点池。</p><p id="38de" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu"> <em class="ol">注</em> </strong> <em class="ol">:一个集群最多可以有5000个节点的限制，每个节点最多可以有110个pod。在一个集群中，容器映像的数量最多可达300，000个。文档陈述了这些数字。对于任何给定的云供应商？我不知道。我不知道有谁曾经接近过这些数字。</em></p><p id="162f" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">Kubernetes可以命名和管理云上的许多集群。Kubernetes的基础是虚拟机。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/c855a0f3796f984161b181433a30ed53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*uRB0Li2J2B_ssSHCe0m_uQ.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图一。物理硬件被描述为云中的虚拟机(VM)。每个虚拟机都映射到一个节点。相同虚拟机类型的节点被分组到一个节点池中。一个或多个节点池被分配给一个群集。群集不能共享池，节点池也不能共享节点。结果是虚拟机被分配到一个集群。此图显示了分配给节点池0的16台虚拟机，分配给节点池1的两台不同类型的虚拟机，以及分配给节点池2的一台虚拟机。作者的动画。</p></figure><p id="5146" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu"> <em class="ol">注</em> </strong> <em class="ol">:如果您熟悉DAG(有向无环图)，那么一条直线型DAG将虚拟机连接到节点，节点池连接到命名集群。</em></p><p id="128c" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu"> <em class="ol">注意</em> </strong> <em class="ol">:因为是在一台本地计算机上，所以一个Minkube实例代表该计算机上的一个集群。</em></p><h2 id="061a" class="ot la it bd lb ou ov dn lf ow ox dp lj ma oy oz ll me pa pb ln mi pc pd lp pe bi translated"><strong class="ak">描述集群的kubectl命令。</strong></h2><p id="1118" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">您可以执行以下命令来打印活动上下文(集群)的集群信息:</p><pre class="kj kk kl km gt pf mq pg ph aw pi bi"><span id="4fb5" class="ot la it mq b gy pj pk l pl pm">kubectl cluster-info</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pn"><img src="../Images/1951cdb67daf77fe97fc3508d54b2c15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QgihD9WxU9827gKLJFpjgg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“kubectl cluster-info”的输出</p></figure><p id="138a" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">执行以下命令，打印出kubeconfig文件中所有集群上下文的一些详细信息:</p><pre class="kj kk kl km gt pf mq pg ph aw pi bi"><span id="9820" class="ot la it mq b gy pj pk l pl pm">minikube start sanbox --cpus "10" <!-- -->--memory<!-- --> "3260m" <!-- -->--nodes 5<br/>kubectl config get-contexts</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi po"><img src="../Images/3abf82a4a5a26cc5e4b7a0d6d9aff6f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hov7d83Oa0flyzFP5a2iuw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“kubectl config get-contexts”的输出</p></figure><p id="c9e5" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu"> <em class="ol">注</em> </strong> <em class="ol">:命令</em> <code class="fe mn mo mp mq b"><em class="ol">minikube start</em></code> <em class="ol">只加载刀具minikube的默认簇</em> <code class="fe mn mo mp mq b"><em class="ol">minikube</em></code> <em class="ol">。</em></p><p id="c133" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu"> <em class="ol">注</em> </strong> <em class="ol">:输出显示错字。提示:集群名称。</em></p><p id="d650" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">记住，<code class="fe mn mo mp mq b">kubectl</code>它被映射到一个特定的集群:</p><pre class="kj kk kl km gt pf mq pg ph aw pi bi"><span id="e4e4" class="ot la it mq b gy pj pk l pl pm">kubectl config use-context &lt;cluster-name&gt;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pp"><img src="../Images/64abbf64c8c1edff0edbfa9cbe782111.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zZ4LP6INI-Mlvep77BwG7A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“kubectl配置使用上下文minikube”的输出</p></figure><p id="34af" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">最后，停止<code class="fe mn mo mp mq b">sanbox:</code></p><pre class="kj kk kl km gt pf mq pg ph aw pi bi"><span id="ba1b" class="ot la it mq b gy pj pk l pl pm">minikube stop sanbox</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pq"><img src="../Images/1ac63be7222168e3ba791e5c2875391f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HPJ7njqicbubM2Wh-bxpuA.png"/></div></div></figure></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="0cb1" class="kz la it bd lb lc nv le lf lg nw li lj jz nx ka ll kc ny kd ln kf nz kg lp lq bi translated">12.什么是Kubernetes容器，它有什么用？</h1><p id="b988" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">记住，作为一个分布式操作系统，Kubernetes的一个主要目标是应用程序独立性。</p><p id="d506" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">Kubernetes以与计算引擎独立相同的方式实现应用程序独立。一个应用程序及其所有依赖项被封装成一个容器映像，也可以称为虚拟应用程序(VA)。</p><p id="7df2" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu"> <em class="ol">注</em></strong><em class="ol">:Kubernetes的不同实现支持不同的VM和VA技术提供者。例如，Kubernetes支持几种容器运行时:</em> <a class="ae ky" href="https://docs.docker.com/engine/" rel="noopener ugc nofollow" target="_blank"> <em class="ol"> Docker </em> </a> <em class="ol">，</em><a class="ae ky" href="https://containerd.io/docs/" rel="noopener ugc nofollow" target="_blank"><em class="ol">Container d</em></a><em class="ol">，</em><a class="ae ky" href="https://cri-o.io/#what-is-cri-o" rel="noopener ugc nofollow" target="_blank"><em class="ol">CRI-O</em></a><em class="ol">，以及任意实现的</em> <a class="ae ky" href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-node/container-runtime-interface.md" rel="noopener ugc nofollow" target="_blank"> <em class="ol"> Kubernetes CRI(容器运行时接口)</em> </a> <em class="ol">。</em></p><blockquote class="pr ps pt"><p id="09bf" class="lr ls ol lt b lu mr ju lw lx ms jx lz pu mt mc md pv mu mg mh pw mv mk ml mm im bi translated">容器是一个小型虚拟机，没有独立的操作系统、驱动程序和常规虚拟机的其他组件。相反，容器打包了所有必需的依赖项，以便在不同的计算环境上分发和运行相同的代码，同时与相同硬件上的其他容器共享相同的操作系统。</p></blockquote><blockquote class="px"><p id="af1c" class="py pz it bd qa qb qc qd qe qf qg mm dk translated">容器映像表示封装了应用程序及其所有软件依赖项的二进制数据。容器映像是可执行的软件包，可以独立运行，并对其运行时环境做出非常明确的假设。—<a class="ae ky" href="https://kubernetes.io/docs/concepts/containers/images/" rel="noopener ugc nofollow" target="_blank">https://kubernetes.io/docs/concepts/containers/images/</a></p></blockquote><p id="c6e7" class="pw-post-body-paragraph lr ls it lt b lu qh ju lw lx qi jx lz ma qj mc md me qk mg mh mi ql mk ml mm im bi translated">我用来制作Kubernetes容器图像的工具是Docker。</p><p id="1c71" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu"> <em class="ol">注</em> </strong> <em class="ol"> : Docker对图像和容器的定义是分开的但几乎相同，这可能会造成混淆。Docker映像由应用程序及其所有软件依赖项的二进制数据封装组成。Docker容器是一个可执行映像，Kubernetes也称为K8s，称之为容器映像。然而，根据文档作者的不同，有时Kubernetes将容器图像称为容器。</em></p><p id="44ad" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我从Docker注册表中获取容器映像，或者创建应用程序的容器映像，并将其推送到注册表中。一旦进入docker注册表，我就会将车开进一个<a class="ae ky" href="https://kubernetes.io/docs/concepts/containers/images/" rel="noopener ugc nofollow" target="_blank"> K8s Po </a> d。</p><pre class="kj kk kl km gt pf mq pg ph aw pi bi"><span id="75bb" class="ot la it mq b gy pj pk l pl pm">minikube start sanbox --cpus "10" <!-- -->--memory<!-- --> "3260m" <!-- -->--nodes 5<br/><em class="ol"># start the pod running ubuntu application, freeware Debian linux<br/></em>#  NOTICE create depolyment (of pod)<br/>kubectl create deployment --image=ubuntu ubuntu-pod<br/>kubectl get po<br/>kubectl get pod</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qm"><img src="../Images/9f9caf731ccd5fc9b3a02aab9dd0fda6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j4zhrZ3qD1ZfV-Lbo8A24A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">kubectl接受明确的对象类型名。kubectl没有受到影响，因为对象类型不到40种。记住古老的编码口头禅——“如果你认为它很聪明，就删掉它。</p></figure><p id="9dee" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">现在，我打扫卫生:</p><pre class="kj kk kl km gt pf mq pg ph aw pi bi"><span id="b068" class="ot la it mq b gy pj pk l pl pm"># Again, deployment not pod object type.<br/>kubectl delete deployment ubuntu-pod</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qn"><img src="../Images/1c8b6df2e6729aa86183a45f8f5e54c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dxaCfOQmnfwebxbGaHnoTQ.png"/></div></div></figure><p id="5b5d" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu"> <em class="ol">重要说明:</em> </strong> <em class="ol"> Kubernetes默认的图片注册表是</em> <a class="ae ky" href="https://hub.docker.com/_/registry" rel="noopener ugc nofollow" target="_blank"> <em class="ol"> Docker公共注册表。</em>T9】</a></p><blockquote class="px"><p id="cbc7" class="py pz it bd qa qb qo qp qq qr qs mm dk translated">虽然Kubernetes支持的<a class="ae ky" href="https://kubernetes.io/docs/setup/production-environment/container-runtimes" rel="noopener ugc nofollow" target="_blank">容器运行时</a>不仅仅是Docker，<a class="ae ky" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>是最常见的运行时，它有助于使用Docker中的一些术语来描述Pods。—<a class="ae ky" href="https://kubernetes.io/docs/concepts/workloads/pods/" rel="noopener ugc nofollow" target="_blank">https://kubernetes.io/docs/concepts/workloads/pods/</a></p></blockquote><blockquote class="pr ps pt"><p id="b9bd" class="lr ls ol lt b lu qh ju lw lx qi jx lz pu qj mc md pv qk mg mh pw ql mk ml mm im bi translated">Kubernetes使您能够将容器化的应用程序分组到逻辑单元中，跟踪它们并自动伸缩它们。也就是说，当容器不在使用时，它会自动关闭它们，当应用程序需要它们来满足按需需求时，它会启动新的容器。</p></blockquote><p id="2c84" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">做完这些之后，我们准备好展示如何将应用程序转换成Kubernetes容器映像了吗？抱歉，不在这里。</p><p id="d655" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">不幸或幸运的是，从应用程序创建容器映像的过程超出了本文的范围，这取决于您如何看待它。</p><p id="b8fe" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我和其他人充分报道了Docker，并描述了我们与Docker的冒险经历:</p><div class="mw mx gp gr my mz"><a href="https://levelup.gitconnected.com/our-enterprise-docker-solution-for-migration-to-the-cloud-d7bb9d1a796b" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd iu gy z fp ne fr fs nf fu fw is bi translated">我们面向云迁移的企业Docker解决方案</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">这是一个关于我们第一次推出Docker的故事，它发生在我以前作为承包商工作过的一家公司。代码，作为…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="ni l"><div class="qt l nk nl nm ni nn ks mz"/></div></div></a></div><div class="mw mx gp gr my mz"><a href="https://dr-bruce-cottman.medium.com/a-docker-solution-for-the-test-groups-use-cases-8e8ed6c28e11" rel="noopener follow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd iu gy z fp ne fr fs nf fu fw is bi translated">我们将Docker企业解决方案的速度提高了一倍</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">我们收到了大量关于Docker解决方案0.0.2版本的反馈。反馈有一个共同的主题:只有R&amp;D…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">dr-bruce-cottman.medium.com</p></div></div><div class="ni l"><div class="qu l nk nl nm ni nn ks mz"/></div></div></a></div><div class="mw mx gp gr my mz"><a href="https://levelup.gitconnected.com/a-tutorial-on-the-behavior-of-linux-environment-variables-and-docker-containers-environment-29218a982220" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd iu gy z fp ne fr fs nf fu fw is bi translated">改变Linux环境变量和Docker容器环境的十七种方法…</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">Docker容器从它们的主机继承环境变量，在启动时在外部设置，或者在…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="ni l"><div class="qv l nk nl nm ni nn ks mz"/></div></div></a></div><div class="mw mx gp gr my mz"><a href="https://itnext.io/is-minikubes-profile-a-kubernetes-cluster-c0f134c5e684" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd iu gy z fp ne fr fs nf fu fw is bi translated">Minikube的配置文件是Kubernetes集群吗？</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">我讨论了导致Minikube表现得像Kubernetes的稀疏记录的桥接概念。</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">itnext.io</p></div></div><div class="ni l"><div class="oa l nk nl nm ni nn ks mz"/></div></div></a></div><div class="mw mx gp gr my mz"><a rel="noopener follow" target="_blank" href="/fifteen-jupyter-notebook-extensions-to-a-docker-image-4dce942faadc"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd iu gy z fp ne fr fs nf fu fw is bi translated">一个Docker映像的十五个Jupyter笔记本扩展</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">我们的Jupyter Python和R用户的Docker映像要求他们在每隔…之后设置他们的Nbextensions首选项</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">towardsdatascience.com</p></div></div><div class="ni l"><div class="qw l nk nl nm ni nn ks mz"/></div></div></a></div><div class="mw mx gp gr my mz"><a href="https://betterprogramming.pub/what-goes-into-a-dockerfile-ff0ace591060" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd iu gy z fp ne fr fs nf fu fw is bi translated">docker文件包含哪些内容？</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">从头开始构建Dockerfile文件，不需要任何经验</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">better编程. pub</p></div></div><div class="ni l"><div class="qx l nk nl nm ni nn ks mz"/></div></div></a></div><p id="ff3b" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我们将虚拟机映射到Kubernetes节点以实现计算资源独立性，并且我们需要将容器映像映射到Kubernetes <em class="ol"> pods </em>中。</p><p id="29cd" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我们现在有了作为Kubernetes pod执行的计算资源和应用程序的基础。</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="72b9" class="kz la it bd lb lc nv le lf lg nw li lj jz nx ka ll kc ny kd ln kf nz kg lp lq bi translated">13.Kubernetes Pod对象是什么？</h1><p id="c64e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Kubernetes pod对象是集群中正在运行的进程的一个实例。pod包含一个或多个容器图像，通常是<a class="ae ky" href="https://kubernetes.io/docs/concepts/containers/" rel="noopener ugc nofollow" target="_blank"> Docker容器</a>。当Pod运行多个容器映像时，容器映像作为单个实体进行管理，并共享Pod的资源。</p><p id="b58e" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu"> <em class="ol">注意</em></strong><em class="ol">:Kubernetes</em><a class="ae ky" href="https://kubernetes.io/docs/concepts/containers/" rel="noopener ugc nofollow" target="_blank"><em class="ol">支持其他容器创建工具，</em> </a> <em class="ol">不仅仅是Docker。</em></p><p id="e53d" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">Pod共享资源包括:</p><ul class=""><li id="7360" class="oc od it lt b lu mr lx ms ma oe me of mi og mm qy oi oj ok bi translated">共享存储，如卷；</li><li id="dcaf" class="oc od it lt b lu om lx on ma oo me op mi oq mm qy oi oj ok bi translated">联网，作为唯一的集群IP地址；</li><li id="0af2" class="oc od it lt b lu om lx on ma oo me op mi oq mm qy oi oj ok bi translated">关于运行每个容器的信息，例如容器映像版本或要使用的特定端口。</li></ul><p id="fc37" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">例如，一个Pod可能包括</p><ol class=""><li id="4ad0" class="oc od it lt b lu mr lx ms ma oe me of mi og mm oh oi oj ok bi translated">NGINX web服务器容器，</li><li id="f639" class="oc od it lt b lu om lx on ma oo me op mi oq mm oh oi oj ok bi translated">向NGINX容器提供页面模板的MySQL关系数据库服务器(RDBMS)容器，以及</li><li id="c2ae" class="oc od it lt b lu om lx on ma oo me op mi oq mm oh oi oj ok bi translated">提供内存(参数)键值缓存的Redis容器。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qz"><img src="../Images/77df7b007712c8398cacbde5fc67bf50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eaEAP6nEuSThcbsfLRvEgA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图二。有三个容器的吊舱；NGINX，Redis，MySQL。图片由作者提供。</p></figure><p id="a43c" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">该群集使用云内部互联网协议(IP)地址形成虚拟专用网络(VPN)。</p><p id="475e" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">Pod中的容器共享云内部IP地址，并在同一节点上的共享上下文中运行。</p><p id="4918" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">一个Pod模拟一个特定于应用程序的<em class="ol">“逻辑主机”</em>，并且可以包含由VPN的内部IP地址连接的不同应用程序容器。</p><p id="82cc" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">VPN IP地址位于云内部，不能通过云外部的互联网进行外部访问。</p><p id="4f4f" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我们需要一个服务来在VPN云内部IP和互联网外部IP之间进行转换(或映射)。</p><p id="3176" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">在Kubernetes中，地址转换是由Ingress对象处理的，我将在后面详细介绍。</p><p id="cb43" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">在下一篇博客文章中，我将讨论Kubernetes部署对象，其中我使用了一个YAML文件来详细描述声明性的pod、服务和工作负载。图2显示了一个包含三个pod的集群。</p><h2 id="73d0" class="ot la it bd lb ou ov dn lf ow ox dp lj ma oy oz ll me pa pb ln mi pc pd lp pe bi translated">Redis，NGINX和MySQL的一个旁注。</h2><p id="cf5c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在这篇博客文章中，到目前为止，我已经讨论了Kubernetes的关键构建块概念:集群、节点、节点池、容器和pod。</p><p id="7f7c" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我先简单介绍一下我们在博客文章项目中使用的容器——在Kubernetes上部署web服务。</p><h2 id="2892" class="ot la it bd lb ou ov dn lf ow ox dp lj ma oy oz ll me pa pb ln mi pc pd lp pe bi translated">Redis和Kubernetes有什么关系？</h2><p id="232a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Redis是一个流行的开源内存参数(密钥对)存储和缓存。如果你熟悉Python，是不是一个快速的字典存储服务。Redis与Kubernetes没有关系。</p><p id="60b0" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我们将Redis容器化，放在需要缓存参数数据存储的Kubernetes pods中。</p><p id="fbc1" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">在Kubernetes中使用Redis的详细清单如下:</p><div class="mw mx gp gr my mz"><a href="https://medium.com/swlh/production-checklist-for-redis-on-kubernetes-60173d5a5325" rel="noopener follow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd iu gy z fp ne fr fs nf fu fw is bi translated">Kubernetes上Redis的生产清单</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">Redis是一个流行的开源内存数据存储和缓存，已经成为构建可伸缩的…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">medium.com</p></div></div><div class="ni l"><div class="ra l nk nl nm ni nn ks mz"/></div></div></a></div><p id="077d" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">Redis不是Kubernetes发行版的一部分，也不是Kubernetes托管云服务的一部分。然而，所有主要的云提供商都将Redis作为软件即服务(s as)提供。比如说。Redis是由<a class="ae ky" href="https://aws.amazon.com/elasticache/" rel="noopener ugc nofollow" target="_blank">亚马逊elastic Cache</a>、<a class="ae ky" href="https://azure.microsoft.com/en-us/services/cache/" rel="noopener ugc nofollow" target="_blank"> Azure Cache for Redis </a>、<a class="ae ky" href="https://cloud.google.com/memorystore" rel="noopener ugc nofollow" target="_blank"> GCP Memorystore </a>提供的SaS。您可能需要一个Redis容器，用于不同于Kubernetes SaaS版本所提供的配置和控制。</p><h2 id="bf79" class="ot la it bd lb ou ov dn lf ow ox dp lj ma oy oz ll me pa pb ln mi pc pd lp pe bi translated">NGINX和Kubernetes有什么关系？</h2><p id="5e2c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">NGINX是一个流行的开源web服务器。</p><p id="c359" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我们将NGINX容器化，放在需要web服务的Kubernetes容器中。</p><p id="1ca1" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">NGINX与Kubernetes没有关联，尽管Kubernetes的实现者使用NGINX作为Kubernetes入口对象的核心。</p><p id="bbc0" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">不要担心；我还没有详细说明入口物体。</p><h2 id="4bfd" class="ot la it bd lb ou ov dn lf ow ox dp lj ma oy oz ll me pa pb ln mi pc pd lp pe bi translated">MySQL和Kubernetes有什么关系？</h2><p id="b095" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">MySQL是一种流行的开源RDBMS，与Kubernetes无关。</p><p id="0a4f" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">MySQL不是Kubernetes发行版的一部分，也不是Kubernetes托管云服务的一部分。所有主要的云提供商都提供MySQL作为软件即服务(SaaS)。您可能想要一个MySQL容器，用于不同的版本、配置和控制，而不是云供应商提供的。</p><p id="dd58" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu"> <em class="ol">注意</em> </strong> <em class="ol"> : MySQL是一个复杂的Kubernetes容器镜像，因为它也是一个Volume对象。另一篇博客文章的主题。</em></p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="3c75" class="kz la it bd lb lc nv le lf lg nw li lj jz nx ka ll kc ny kd ln kf nz kg lp lq bi translated">14.什么是Kubernetes入口控制器和入口对象？</h1><p id="9396" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">当人们在云之外时，他们如何访问云托管的服务？</p><p id="51d0" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">您可以通过一个Ingress对象进入Kubernetes云，该对象将HTTP和HTTPS路由从云外部公开给集群中的<a class="ae ky" href="https://kubernetes.io/docs/concepts/services-networking/service/" rel="noopener ugc nofollow" target="_blank">服务</a>。</p><p id="d9e4" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">使用入口控制器和入口规则，单个IP地址将流量路由到<a class="ae ky" href="https://kubernetes.io/" rel="noopener ugc nofollow" target="_blank"> Kubernetes云集群中的多个服务。</a></p><blockquote class="px"><p id="0b9b" class="py pz it bd qa qb qo qp qq qr qs mm dk translated">进入:进入或进入的行为或事实。<a class="ae ky" href="https://languages.oup.com/google-dictionary-en/" rel="noopener ugc nofollow" target="_blank">牛津词典</a></p></blockquote><p id="22d5" class="pw-post-body-paragraph lr ls it lt b lu qh ju lw lx qi jx lz ma qj mc md me qk mg mh mi ql mk ml mm im bi translated">入口控制器为位于云服务和外部世界访问之间的入口对象提供不同的功能。</p><p id="2003" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">可配置的流量路由始终是入口的基本功能。流量路由由入口资源(路由表)上定义的规则控制。</p><p id="b34f" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">在路由之上，最流行的入口功能是负载平衡。</p><p id="726a" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">你可以使用任何软件作为入口控制器，但我总是看到部署了<a class="ae ky" href="https://kubernetes.github.io/ingress-nginx/" rel="noopener ugc nofollow" target="_blank"> NGINX </a> web服务器。</p><p id="a1a3" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">NGINX web服务器提供了入口控制器所需的一切。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi rb"><img src="../Images/506e23af22ba2ebabc9f7c451b038b59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SneRvVNXgJV2PqMcN0t64Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图9。Kubernetes的入口对象。图片来源:<a class="ae ky" href="https://kubernetes.io/docs/concepts/services-networking/ingress/" rel="noopener ugc nofollow" target="_blank"> Kubernetes文档</a>中人物的作者桌面截图</p></figure></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="aaa2" class="kz la it bd lb lc nv le lf lg nw li lj jz nx ka ll kc ny kd ln kf nz kg lp lq bi translated">15.什么是Kubernetes端点对象？</h1><p id="8bf7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Kubernetes <em class="ol">端点</em>源自网络协议术语。端点通常是IP(互联网协议)地址。</p><p id="f0a6" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">在Kubernetes的情况下，端点是Kubernetes Pod的IP地址。它是网络连接的终点(点)，也是Kubernetes Pod的起点。</p><p id="8edc" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu"> <em class="ol">注意</em> </strong> <em class="ol">:你可能会看到一个引用</em><strong class="lt iu"><em class="ol">&lt;&gt;</em></strong><em class="ol">的端点。例如，HTTP端点。在我所知道的所有情况下，引用实际上是指IP地址。</em></p><p id="cbb8" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我定义端点这个术语是因为在Kubernetes文档中经常会遇到它。</p><p id="4424" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">在Kubernetes中，您可以使用pod集群，而不需要知道端点是什么或做什么。</p><p id="5c82" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">例如:</p><blockquote class="pr ps pt"><p id="9397" class="lr ls ol lt b lu mr ju lw lx ms jx lz pu mt mc md pv mu mg mh pw mv mk ml mm im bi translated">当一个<strong class="lt iu">服务</strong>选择器匹配一个pod标签时，该IP地址被添加到您的<strong class="lt iu">端点。</strong></p></blockquote><p id="86f9" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">可以表述为:</p><blockquote class="pr ps pt"><p id="e5f0" class="lr ls ol lt b lu mr ju lw lx ms jx lz pu mt mc md pv mu mg mh pw mv mk ml mm im bi translated">当pod标签与服务选择器匹配时，一个<strong class="lt iu">服务</strong>由pod组成。</p></blockquote><p id="4436" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我认为Kubernetes的一点点实现正在渗透进来。也许在未来的Kubernetes文档中，端点会被删除。</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="8342" class="kz la it bd lb lc nv le lf lg nw li lj jz nx ka ll kc ny kd ln kf nz kg lp lq bi translated">16.用于调试的晦涩但有用的kubectl命令。</h1><p id="64cd" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这些kubectl命令中的许多都像docker作用于容器一样作用于Kubernetes pods。我们使用下面的kubectl命令来调试我们的Kubernetes pods的行为。</p><p id="0bcb" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">首先，我启动一个名为<code class="fe mn mo mp mq b">ngnix-pod</code>的Kubernetes pod，图片来自Docker注册表，名为<code class="fe mn mo mp mq b">ngnix:</code></p><pre class="kj kk kl km gt pf mq pg ph aw pi bi"><span id="1abc" class="ot la it mq b gy pj pk l pl pm">minikube start sanbox --vm-driver=docker --apiserver-ips 127.0.0.1 --apiserver-name localhost --cpus "10" <!-- -->--memory<!-- --> "3260m" <!-- -->--nodes <br/>kubectl create deployment --image=nginx nginx-pod<br/>kubectl get pods --show-labels</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi rc"><img src="../Images/b16c54f2e0c6c95aad93462aa99cc2ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RoQ66f3Aq9ocbxzye3dK7A.png"/></div></div></figure><p id="25f3" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">下面的kubectl命令运行一个交互式bash会话，该会话只能在带有一个容器的pods上运行。</p><pre class="kj kk kl km gt pf mq pg ph aw pi bi"><span id="bfaf" class="ot la it mq b gy pj pk l pl pm">kubectl exec -it <!-- --> nginx-pod-796c9b5fdb-jjxgx<!-- --> -- sh</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi rd"><img src="../Images/6c8afb4429e09fa1117ec05abd83fd20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PP-YQOxJugC-70y5wo3t1Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><code class="fe mn mo mp mq b">kubectl exec -it </code>nginx-pod-796 c 9 b5 FD b-jjxgx<code class="fe mn mo mp mq b"> -- sh"</code>输出</p></figure><p id="7f96" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">哇哦。这是一个错误。有一个解决方法。在这篇博客文章中，我把它作为一个练习。在下一期文章中，将给出一个变通解决方案。</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="933c" class="kz la it bd lb lc nv le lf lg nw li lj jz nx ka ll kc ny kd ln kf nz kg lp lq bi translated">摘要</h1><p id="12c4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这篇文章过去的版本有8000字，并且还在增加。我觉得它太长了，不适合在媒体上发表。</p><p id="53ca" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">然而，作为参考，它需要留在一起。</p><p id="893c" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我通过反向链接以前发表的文章解决了“在一起”<em class="ol"/>。也可以单独阅读。</p><ol class=""><li id="597c" class="oc od it lt b lu mr lx ms ma oe me of mi og mm oh oi oj ok bi translated">前面的博客文章是第一部分；</li></ol><div class="mw mx gp gr my mz"><a rel="noopener follow" target="_blank" href="/the-first-nine-primary-concepts-and-code-examples-for-using-kubernetes-productively-d2aabccc0380"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd iu gy z fp ne fr fs nf fu fw is bi translated">高效使用Kubernetes的前九个主要概念和代码示例</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">Kubernetes的解释和使用不应该讨论内部架构组件。相反，我讨论…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">towardsdatascience.com</p></div></div><div class="ni l"><div class="ob l nk nl nm ni nn ks mz"/></div></div></a></div><p id="b342" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">2.这篇博客文章涵盖了Kubernetes集群、节点、pod、容器映像、端点和入口对象的七个概念。我使用了对象类型部署。不幸的是，我将在以后的博客中详细介绍部署。</p><p id="c4e9" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">3.第三篇博客文章涵盖了Kubernetes的种类、部署、服务和其他六个概念。</p><p id="8e28" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">4.在第三篇博客之后，也许在这之前，我会展示如何在阿里巴巴、AWS、Azure、GCP和甲骨文上获得免费但有限的账户。</p><p id="e883" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">4.我计划写一篇博客文章，详细介绍我们使用的丰富的工具生态系统。</p><p id="bd9e" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">在上一篇博客文章中，我注意到Kubernetes的安全性很低。嗯，我刚刚看到了一篇名为“<a class="ae ky" href="https://www.nsa.gov/News-Features/Feature-Stories/Article-View/Article/2716980/nsa-cisa-release-kubernetes-hardening-guidance/utm_medium/email/utm_campaign/awareness/mkt_tok/MTA3LUZNUy0wNzAAAAF_FAjAkUgx3M3_YdLsZ38y6jmapbz2KZ658-fPVhfKazo6icV9Xq04W-lb4kz22bbBOnLDjtohgLdCDHqmlcs8S02aGUo888Xd6ORp4Sxfu0YXpw/?utm_source=topic+optin&amp;utm_content=20210823+infraops+nl" rel="noopener ugc nofollow" target="_blank"> Kubernetes强化指南:网络安全技术报告</a>”的技术文章我打算今晚读它(也许开始读)。只有五十页。</p><p id="cc43" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">每个博客都有你可以使用的代码。</p><p id="cb0d" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">快乐高效地编码！</p></div></div>    
</body>
</html>