<html>
<head>
<title>How to Clean Text Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何清理文本数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-clean-text-data-639375414a2f?source=collection_archive---------18-----------------------#2021-07-01">https://towardsdatascience.com/how-to-clean-text-data-639375414a2f?source=collection_archive---------18-----------------------#2021-07-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b95d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">…删除数据科学应用的停用词</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/50c059bcd588d318673b7244a59c38b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pH-fpBLHo9bmhBvmvWMpaw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@jeshoots?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">JESHOOTS.COM</a>在<a class="ae ky" href="https://unsplash.com/s/photos/cleaning?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片【1】。</p></figure><h1 id="36bf" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">目录</h1><ol class=""><li id="1b02" class="lr ls it lt b lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">介绍</li><li id="a357" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me mf mg mh mi bi translated">清理文本数据</li><li id="ca56" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me mf mg mh mi bi translated">摘要</li><li id="76d6" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me mf mg mh mi bi translated">参考</li></ol><h1 id="a4dd" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="c1b8" class="pw-post-body-paragraph mo mp it lt b lu lv ju mq lw lx jx mr ly ms mt mu ma mv mw mx mc my mz na me im bi translated">数据大部分时间都是杂乱的、无组织的、难以处理的，这应该不足为奇。当您从教育实践进入数据科学时，您会发现大多数数据是从多个来源、多个查询获得的，这可能会导致一些不干净的数据。在某些或大多数情况下，您必须提供最终用于训练模型的数据集。有一些文章关注数字数据，但是我希望这篇文章主要关注文本数据，这与自然语言处理相一致。也就是说，这里有一个在Python中清理文本数据的简单方法，以及它什么时候有用。我将使用来自<a class="ae ky" href="https://www.kaggle.com/tmdb/tmdb-movie-metadata" rel="noopener ugc nofollow" target="_blank"> TMBDF 5000电影数据集</a>【2】的流行数据集，这样你就可以跟上了。</p><h1 id="9f5e" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">清理文本数据</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/c149f0886d78c89c131bf927151d4bab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wwf9gdz3oWUKknsjGUHdjw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Marylou Fortier 在<a class="ae ky" href="https://unsplash.com/s/photos/text?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a>【3】上的照片。</p></figure><blockquote class="nc nd ne"><p id="dcf3" class="mo mp nf lt b lu ng ju mq lw nh jx mr ni nj mt mu nk nl mw mx nm nn mz na me im bi translated"><strong class="lt iu">删除停止字</strong></p></blockquote><p id="57bf" class="pw-post-body-paragraph mo mp it lt b lu ng ju mq lw nh jx mr ly nj mt mu ma nl mw mx mc nn mz na me im bi translated">另一种解释“停用词”的方法是删除不必要的文本。但是，需要注意的是，当您使用常用停用词库时，您可能会删除实际上想要保留的单词。这就是为什么你应该先考虑你想删除的单词列表。常用的停用词有<code class="fe no np nq nr b">‘the’</code>、<code class="fe no np nq nr b">‘of’</code>等。你想要删除这些词的原因是如果你想保留这些词、短语、句子等的主题。一个例子是<em class="nf">‘有一次他们在七月去商店参加节日聚会’</em>。如果你去掉停止词和一些不必要的词，你只会得到剩余的<code class="fe no np nq nr b">time, July, holiday, party</code>。</p><blockquote class="nc nd ne"><p id="9d03" class="mo mp nf lt b lu ng ju mq lw nh jx mr ni nj mt mu nk nl mw mx nm nn mz na me im bi translated">话虽如此，让我们看看如何从电影片名中删除一些停用词:</p></blockquote><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="17a1" class="nw la it nr b gy nx ny l nz oa">import pandas as pd</span><span id="a451" class="nw la it nr b gy ob ny l nz oa">import nltk.corpus<br/>nltk.download(‘stopwords’)<br/>from nltk.corpus import stopwords</span><span id="a6bd" class="nw la it nr b gy ob ny l nz oa">df = pd.read_csv('...path/tmdb_5000_movies.csv')</span><span id="dd83" class="nw la it nr b gy ob ny l nz oa">stop_words = stopwords.words('english')<br/>df['clean_title'] = df['title'].apply(lambda x: ' '.join([word for word in x.split() if word not in (stop_words)]))</span></pre><p id="e825" class="pw-post-body-paragraph mo mp it lt b lu ng ju mq lw nh jx mr ly nj mt mu ma nl mw mx mc nn mz na me im bi translated">在上面的代码中，我们导入必要的库，然后将我们的数据读入pandas数据帧。从那里，我们分配我们将从<code class="fe no np nq nr b">‘title’</code>列的文本中删除的停用词，这将在<code class="fe no np nq nr b">‘clean_title’</code>列中显示它们各自的效果。输出如下所示。在第1、3和8行中，是停用词被删除的地方，正如您可以并排看到的before和after。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/ff4937f95365e20e80ab982b4fda5eac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*luRVTZ-VXr_5ay2604CJug.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截图[4]</p></figure><p id="9e91" class="pw-post-body-paragraph mo mp it lt b lu ng ju mq lw nh jx mr ly nj mt mu ma nl mw mx mc nn mz na me im bi translated">除了nltk的停用词库，您还可以“手动”添加其他停用词。为了实现这个功能，你可以简单地给<code class="fe no np nq nr b">stop_words</code>添加一个字符串列表。例如，如果我们想要删除文本“3”，因为在这种情况下它不是一个数字，我们可以将它以及单词“at”和字母“v”添加到列表中。它的工作方式如下:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="0b5c" class="nw la it nr b gy nx ny l nz oa">stop_words = stopwords.words(‘english’) + [‘At’, ‘v’, ‘3’]</span><span id="6e5f" class="nw la it nr b gy ob ny l nz oa"># apply the same code as above but assign<br/># a new column to see the differences</span><span id="35b0" class="nw la it nr b gy ob ny l nz oa">df['clean_title_v2'] = df['title'].apply(lambda x: ' '.join([word for word in x.split() if word not in (stop_words)]))</span></pre><p id="ff13" class="pw-post-body-paragraph mo mp it lt b lu ng ju mq lw nh jx mr ly nj mt mu ma nl mw mx mc nn mz na me im bi translated">在下面的屏幕截图中，您可以看到lambda函数是如何移除添加的字符串列表中的值的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/4bc5ba692a8bad1fe415a05b645ade87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DbW9tIJTlx3JMinTV6dc3A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截图[5]。</p></figure><blockquote class="nc nd ne"><p id="b97d" class="mo mp nf lt b lu ng ju mq lw nh jx mr ni nj mt mu nk nl mw mx nm nn mz na me im bi translated">现在我们已经展示了一种清理文本数据的方法，让我们讨论一下这个过程对数据科学家有用的可能应用:</p></blockquote><ul class=""><li id="16ab" class="lr ls it lt b lu ng lw nh ly oe ma of mc og me oh mg mh mi bi translated">删除不必要的单词，以便您可以执行词干分析，在词干分析中，您可以隔离删除后留下的单词的词根</li><li id="348e" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me oh mg mh mi bi translated">与上面类似，你可以只分离出单词的词条</li><li id="8e23" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me oh mg mh mi bi translated">只有保留必要的单词才能让您更容易地标记数据中的词性，例如，如果您只标记形容词，并在您的模型数据中使用该文本，如“美丽”、“惊人”、“响亮”将用于预测电影评论的目标变量。一个模型将能够更容易地从形容词中识别情感，以辨别电影评论是好是坏，或者电影需要改进什么</li><li id="719e" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me oh mg mh mi bi translated">从更新文本的主要词创建一个摘要仪表板，例如，去掉“蜘蛛侠1”、“蜘蛛侠2”和“蜘蛛侠3”中的数字，将允许对所有蜘蛛侠电影进行分析，如赚钱，或这些电影的平均评论评级</li><li id="3b4b" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me oh mg mh mi bi translated">更容易进行主题建模——在大量文本之间找到共同的主题</li><li id="f0f4" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me oh mg mh mi bi translated">创建更少量的文本，以便您的建模在训练和预测时变得更快、更便宜</li><li id="ef55" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me oh mg mh mi bi translated">可用于删除错误的文本，例如，如果人们正在手动键入响应，您可以清理他们的响应，如果他们的输入是从语音到文本的，您可以自动删除通常被语音错误解释的单词</li></ul><p id="dbd8" class="pw-post-body-paragraph mo mp it lt b lu ng ju mq lw nh jx mr ly nj mt mu ma nl mw mx mc nn mz na me im bi translated">当然有更多的理由删除停用词，并清理你的文本数据。同样重要的是要记住，有一些新兴的算法可以很好地处理文本数据，比如CatBoost。</p><h1 id="1c95" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">摘要</h1><p id="a17f" class="pw-post-body-paragraph mo mp it lt b lu lv ju mq lw lx jx mr ly ms mt mu ma mv mw mx mc my mz na me im bi translated">正如你所看到的，仅仅清理数据的一部分就可以为进一步清理和处理数据打下基础。希望数据的这种变化最终会使您的模型更加健壮和准确。我给出的例子很小，但你可以看到如何将它应用到包含数百个句子的数据中会更有用。</p><blockquote class="nc nd ne"><p id="5156" class="mo mp nf lt b lu ng ju mq lw nh jx mr ni nj mt mu nk nl mw mx nm nn mz na me im bi translated">总而言之，以下是如何从文本数据中删除停用词:</p></blockquote><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="d1c4" class="nw la it nr b gy nx ny l nz oa">* import libraris</span><span id="33d2" class="nw la it nr b gy ob ny l nz oa">* import your dataset</span><span id="f3ac" class="nw la it nr b gy ob ny l nz oa">* remove stop words from the main library</span><span id="2e6d" class="nw la it nr b gy ob ny l nz oa">* add individual stop words that are unique to your use case</span></pre><p id="8d0d" class="pw-post-body-paragraph mo mp it lt b lu ng ju mq lw nh jx mr ly nj mt mu ma nl mw mx mc nn mz na me im bi translated"><strong class="lt iu">更新:</strong> <em class="nf">单词</em> <code class="fe no np nq nr b"><em class="nf">The</em></code> <em class="nf">没有被删除，因为它是大写的，所以在清理它之前，请确保将所有文本都小写。感谢您的标注，</em> <a class="oi oj ep" href="https://medium.com/u/6758dbf768b8?source=post_page-----639375414a2f--------------------------------" rel="noopener" target="_blank"> <em class="nf">米亚罗姆</em> </a>！</p><p id="fdcd" class="pw-post-body-paragraph mo mp it lt b lu ng ju mq lw nh jx mr ly nj mt mu ma nl mw mx mc nn mz na me im bi translated">我希望你觉得我的文章既有趣又有用。如果你同意这种删除停用词的方法，请在下面随意评论——为什么或为什么不？你喜欢不同的图书馆吗？如果你有，请随意评论你喜欢其中一个的原因。这个图书馆有什么缺点？你知道一个更新的库可以在效率、易用性和速度方面击败nltk吗？还有哪些清理文本数据的方法？你是否碰巧根本不使用库，而只是删除了你管理的一个特定列表？谢谢你看我的文章！</p><p id="9d5e" class="pw-post-body-paragraph mo mp it lt b lu ng ju mq lw nh jx mr ly nj mt mu ma nl mw mx mc nn mz na me im bi translated"><em class="nf">请随时查看我的个人资料和其他文章，</em> <a class="oi oj ep" href="https://medium.com/u/abe5272eafd9?source=post_page-----639375414a2f--------------------------------" rel="noopener" target="_blank"> Matt Przybyla </a>，<em class="nf">也可以在LinkedIn上联系我。</em></p><h1 id="d4fc" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">参考</h1><p id="04b8" class="pw-post-body-paragraph mo mp it lt b lu lv ju mq lw lx jx mr ly ms mt mu ma mv mw mx mc my mz na me im bi translated">[1]照片由<a class="ae ky" href="https://unsplash.com/@jeshoots?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">JESHOOTS.COM</a>在<a class="ae ky" href="https://unsplash.com/s/photos/cleaning?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a>(2019)上拍摄</p><p id="bbdb" class="pw-post-body-paragraph mo mp it lt b lu ng ju mq lw nh jx mr ly nj mt mu ma nl mw mx mc nn mz na me im bi translated">[2] Kaggle，<a class="ae ky" href="https://www.kaggle.com/tmdb/tmdb-movie-metadata" rel="noopener ugc nofollow" target="_blank"> TMBDF 5000电影数据集</a>，(2021 —已访问)</p><p id="ddaf" class="pw-post-body-paragraph mo mp it lt b lu ng ju mq lw nh jx mr ly nj mt mu ma nl mw mx mc nn mz na me im bi translated">[3]Marylou Fortier在<a class="ae ky" href="https://unsplash.com/s/photos/text?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片，(2020)</p><p id="4204" class="pw-post-body-paragraph mo mp it lt b lu ng ju mq lw nh jx mr ly nj mt mu ma nl mw mx mc nn mz na me im bi translated">[4] M.Przybyla，清洁文本示例，(2021年)</p><p id="9466" class="pw-post-body-paragraph mo mp it lt b lu ng ju mq lw nh jx mr ly nj mt mu ma nl mw mx mc nn mz na me im bi translated">[5] M.Przybyla，清理文本示例并添加个别停用词，(2021年)</p></div></div>    
</body>
</html>