<html>
<head>
<title>Advanced Time Series Analysis in Python: Seasonality and Trend Analysis (Decomposition), Autocorrelation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的高级时间序列分析:季节性和趋势分析(分解)，自相关</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/advanced-time-series-analysis-in-python-decomposition-autocorrelation-115aa64f475e?source=collection_archive---------0-----------------------#2021-07-13">https://towardsdatascience.com/advanced-time-series-analysis-in-python-decomposition-autocorrelation-115aa64f475e?source=collection_archive---------0-----------------------#2021-07-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="173f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">和其他技术来发现多个时间序列之间的关系</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f35d793f0b686141882e6ec5cf153b6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vkes2H7Soxgdngi969oAEQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd ky">照片由</strong> <a class="ae kz" href="https://www.pexels.com/@bentonphotocinema?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> <strong class="bd ky">乔丹本顿</strong> </a> <strong class="bd ky">上</strong> <a class="ae kz" href="https://www.pexels.com/photo/shallow-focus-photography-of-hourglass-1095602/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> <strong class="bd ky">像素</strong> </a></p></figure><h1 id="1434" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">介绍</h1><p id="df80" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">继我的<a class="ae kz" rel="noopener" target="_blank" href="/every-pandas-function-you-can-should-use-to-manipulate-time-series-711cb0c5c749?source=your_stories_page-------------------------------------">非常受欢迎的帖子</a>和<a class="ae kz" href="https://www.kaggle.com/bextuychiev/every-pandas-function-to-manipulate-time-series/comments" rel="noopener ugc nofollow" target="_blank"> Kaggle notebook </a>之后，现在是时候将这个TS项目的轨迹可视化了。</p><p id="e686" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">这篇文章是关于构成深度时间序列分析的核心过程。具体来说，我们将讨论:</p><ul class=""><li id="f424" class="mt mu it lu b lv mo ly mp mb mv mf mw mj mx mn my mz na nb bi translated">时间序列的分解——季节性和趋势分析</li><li id="4422" class="mt mu it lu b lv nc ly nd mb ne mf nf mj ng mn my mz na nb bi translated">同时分析和比较多个时间序列</li><li id="4c5c" class="mt mu it lu b lv nc ly nd mb ne mf nf mj ng mn my mz na nb bi translated">计算自相关和偏自相关以及它们代表什么</li></ul><p id="cb81" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">以及多个系列之间的季节性或趋势是否相互影响。</p><p id="70de" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">最重要的是，我们将建立一些非常酷的可视化，这个图像应该是你将要学习的东西的预览。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/8688be987959d7cdea3731d3a569cd60.png" data-original-src="https://miro.medium.com/v2/format:webp/1*ToUsutofdinrqAann6druA.png"/></div></figure><p id="fd2b" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我希望在写这篇文章的时候，你和我一样对学习这些东西感到兴奋。我们开始吧。</p><blockquote class="ni nj nk"><p id="8f66" class="ls lt nl lu b lv mo ju lx ly mp jx ma nm mq md me nn mr mh mi no ms ml mm mn im bi translated">在这里阅读文章<a class="ae kz" href="https://www.kaggle.com/bextuychiev/advanced-time-series-analysis-decomposition" rel="noopener ugc nofollow" target="_blank">的笔记本</a>。</p></blockquote><div class="np nq gp gr nr ns"><a href="https://ibexorigin.medium.com/membership" rel="noopener follow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd iu gy z fp nx fr fs ny fu fw is bi translated">通过我的推荐链接加入Medium-BEXGBoost</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">获得独家访问我的所有⚡premium⚡内容和所有媒体没有限制。支持我的工作，给我买一个…</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">ibexorigin.medium.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og ks ns"/></div></div></a></div><p id="5e5a" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">获得由强大的AI-Alpha信号选择和总结的最佳和最新的ML和AI论文:</p><div class="np nq gp gr nr ns"><a href="https://alphasignal.ai/?referrer=Bex" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd iu gy z fp nx fr fs ny fu fw is bi translated">阿尔法信号|机器学习的极品。艾总结的。</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">留在循环中，不用花无数时间浏览下一个突破；我们的算法识别…</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">alphasignal.ai</p></div></div><div class="ob l"><div class="oh l od oe of ob og ks ns"/></div></div></a></div></div><div class="ab cl oi oj hx ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="im in io ip iq"><h1 id="6cfe" class="la lb it bd lc ld op lf lg lh oq lj lk jz or ka lm kc os kd lo kf ot kg lq lr bi translated">1.时间序列分解</h1><p id="3e48" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">任何时间序列分布都有3个核心部分:</p><ol class=""><li id="8b6d" class="mt mu it lu b lv mo ly mp mb mv mf mw mj mx mn ou mz na nb bi translated"><strong class="lu iu">季节性</strong> —数据是否有明确的循环/周期性模式？</li><li id="c7f2" class="mt mu it lu b lv nc ly nd mb ne mf nf mj ng mn ou mz na nb bi translated">趋势——数据代表了总体的上升还是下降趋势？</li><li id="13e0" class="mt mu it lu b lv nc ly nd mb ne mf nf mj ng mn ou mz na nb bi translated"><strong class="lu iu">噪声</strong> —有哪些与其余数据不一致的异常值或缺失值？</li></ol><p id="cd02" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">将一个时间序列分解成这些部分称为<strong class="lu iu">分解，</strong>我们将详细探讨每一个部分。</p></div><div class="ab cl oi oj hx ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="im in io ip iq"><h2 id="4495" class="ov lb it bd lc ow ox dn lg oy oz dp lk mb pa pb lm mf pc pd lo mj pe pf lq pg bi translated">1.1季节性分析</h2><p id="128f" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">考虑一下TPS月Kaggle游乐场数据集:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ph pi l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/1cdfb7b1e3c1cada310c890c22b7b5f5.png" data-original-src="https://miro.medium.com/v2/format:webp/1*kaiDBpv6a8poa3f4AoJzbg.png"/></div></figure><p id="8504" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">显然，夏季气温较高，我们预计这种现象每年都会重复。然而，人眼及其检测图案的能力只能到此为止。</p><p id="6326" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">例如，可能更难从如下图中找到季节模式:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ph pi l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/2b35cac5120148edd98fb858a2200e33.png" data-original-src="https://miro.medium.com/v2/format:webp/1*VA5VjWR6l_nsPvGSZzoY9A.png"/></div></figure><p id="d6c3" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">为了从上面的时间序列中找到隐藏的季节模式，我们将使用<code class="fe pj pk pl pm b">statsmodels</code>中的<code class="fe pj pk pl pm b">seasonal_decompose</code>函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ph pi l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/ed196cb8231393b770636b0e2bc7816f.png" data-original-src="https://miro.medium.com/v2/format:webp/1*HvH4JrVhogx6RezQA65NEQ.png"/></div></figure><p id="cb96" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">对“牛肉”时间序列使用<code class="fe pj pk pl pm b">sm.tsa.seasonal_decompose</code>会返回一个<code class="fe pj pk pl pm b">DecomposeResult</code>对象，该对象具有类似于<code class="fe pj pk pl pm b">seasonal</code>、<code class="fe pj pk pl pm b">trend</code>和<code class="fe pj pk pl pm b">resid</code>的属性(后面会详细介绍后两个属性)。</p><p id="9186" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">上面，我们在绘制季节性，但是这个图没有用，因为它有太多的噪音。让我们选择一个间隔，给这条线一些喘息的空间:</p><pre class="kj kk kl km gt pn pm po pp aw pq bi"><span id="b903" class="ov lb it pm b gy pr ps l pt pu">decomposition.seasonal["1999":"2005"].plot();</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/6553d703c9759e853bb2f2457103a3db.png" data-original-src="https://miro.medium.com/v2/format:webp/1*cMBtcSkChFom8e21hNyinA.png"/></div></figure><p id="db7c" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">这张图显示，牛肉产量在每年年初确实下降，但在接近年底时达到顶峰。</p><blockquote class="ni nj nk"><p id="84ad" class="ls lt nl lu b lv mo ju lx ly mp jx ma nm mq md me nn mr mh mi no ms ml mm mn im bi translated">关于<code class="fe pj pk pl pm b">seasonal_decompose</code>功能的说明:默认情况下，它产生小数字。你必须自己控制它的各个方面，而且<code class="fe pj pk pl pm b">plot</code>函数不接受大多数常规的Matplotlib参数。</p></blockquote><p id="f344" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">现在，让我们绘制5年间所有肉类的季节性变化图:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ph pi l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/c21074ede78eb11de2f1f9aaa291e866.png" data-original-src="https://miro.medium.com/v2/format:webp/1*eweidAVuxvUECWoa6UW91Q.png"/></div></figure><p id="4691" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">如你所见，每种肉类都有不同的季节性模式。现在，我们来探讨一下趋势。</p></div><div class="ab cl oi oj hx ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="im in io ip iq"><h2 id="2894" class="ov lb it bd lc ow ox dn lg oy oz dp lk mb pa pb lm mf pc pd lo mj pe pf lq pg bi translated">1.2趋势分析</h2><p id="edb2" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">同样，时间序列的总体趋势显示了它在一段时间内是增加、减少还是保持不变(持平)。上面的<code class="fe pj pk pl pm b">DecomposeResult</code>对象包含的值显示了<code class="fe pj pk pl pm b">trend</code>属性下时间序列的总体斜率。</p><p id="232c" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">让我们为肉类生产数据集绘制它们:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ph pi l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/b9d1f9ef7b9025e328870c172a52a011.png" data-original-src="https://miro.medium.com/v2/format:webp/1*ByjR6-jMhjGonogQ1UFTBQ.png"/></div></figure><p id="f8db" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">与我们一开始看到的简单线图相比，这个图非常有洞察力。事实上，我们现在看到，自20世纪40年代以来，羔羊肉和小牛肉产量急剧下降。</p><p id="e1a7" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">这可能部分是由于牛肉、肉鸡和火鸡的产量增加了两倍或三倍。我们现在正在进行有根据的猜测，但是我们将在后面的部分探索一些强有力的方法来验证它们。</p></div><div class="ab cl oi oj hx ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="im in io ip iq"><h2 id="6c0a" class="ov lb it bd lc ow ox dn lg oy oz dp lk mb pa pb lm mf pc pd lo mj pe pf lq pg bi translated">1.3噪音</h2><p id="49c9" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">时间序列的第三个组成部分是噪音。它不像其他两个组件那样花哨。它只显示随机和不规则的数据点，这些数据点不能归因于季节性或噪音。</p><p id="c404" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">您可以使用来自<code class="fe pj pk pl pm b">DecomposeResult</code>对象的<code class="fe pj pk pl pm b">resid</code>属性来绘制它们:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ph pi l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/8848870530828e704e3cf0f070f67ba5.png" data-original-src="https://miro.medium.com/v2/format:webp/1*LYXUyJRTYTqioVjRx9lBaA.png"/></div></figure><blockquote class="ni nj nk"><p id="cae7" class="ls lt nl lu b lv mo ju lx ly mp jx ma nm mq md me nn mr mh mi no ms ml mm mn im bi translated">在整个<code class="fe pj pk pl pm b">DecomposeResult</code>对象上调用<code class="fe pj pk pl pm b">plot</code>将产生一个所有组件都显示在同一轴上的图。</p></blockquote><p id="bc8f" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">分解你的时间序列有助于你以一种结构化的方式思考它们。不要把一个序列想象成一个随时间变化的值，你可以把它想象成一个具有特定季节性信号的分布或者一个具有特定斜率的特征。在特征工程和建模过程中，这种数据理解水平可能是一个关键因素。</p></div><div class="ab cl oi oj hx ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="im in io ip iq"><h1 id="58c2" class="la lb it bd lc ld op lf lg lh oq lj lk jz or ka lm kc os kd lo kf ot kg lq lr bi translated">2.使用多个时间序列</h1><h2 id="506e" class="ov lb it bd lc ow ox dn lg oy oz dp lk mb pa pb lm mf pc pd lo mj pe pf lq pg bi translated">2.1将军</h2><p id="beed" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">处理多个时间序列存在一定的挑战。如我们所见，一个例子是每个分布的不同规模:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ph pi l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/1f14b42e0c33eb57c6adb590e1afe59b.png" data-original-src="https://miro.medium.com/v2/format:webp/1*AUJbO8ba16LCy852LEYOxA.png"/></div></figure><p id="7e2f" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">当具有较大鳞片的特征将其他特征挤压成一条直线(羔羊肉和小牛肉)时，不可能比较它们的生长。一种解决方案是使用标准化。</p><p id="5482" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">归一化时间序列时，将分布中的每个数据点除以第一个样本。这具有将每个数据点表示为相对于第一个样本的百分比增加的效果:</p><pre class="kj kk kl km gt pn pm po pp aw pq bi"><span id="4b19" class="ov lb it pm b gy pr ps l pt pu">meat.div(meat.iloc[0]).head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/1e6f34df145b8c844cc39dadaa884899.png" data-original-src="https://miro.medium.com/v2/format:webp/1*i9Ax-_Uql4IHrKoox0ecPg.png"/></div></figure><p id="150f" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">最棒的是，现在每个发行版都有相同的规模。让我们通过执行标准化来绘制肉类生产数据:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ph pi l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/f5494fd2410e85fc3f85f74c15be52bf.png" data-original-src="https://miro.medium.com/v2/format:webp/1*XZJrR-RnZjF-6cQekpSjkg.png"/></div></figure><p id="e3d0" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">牛肉和猪肉的增长百分比最高，而小牛肉和羊肉的产量在特定时期内直线下降。</p></div><div class="ab cl oi oj hx ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="im in io ip iq"><h2 id="f4a1" class="ov lb it bd lc ow ox dn lg oy oz dp lk mb pa pb lm mf pc pd lo mj pe pf lq pg bi translated">2.1具有相关性的时间序列之间的关系</h2><p id="e89e" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">我知道你在说什么:“相关性？真的吗？有什么新内容…“</p><p id="2b03" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">但是请原谅我。一个简单的关联热图确实能告诉我们很多变量之间的线性关系:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ph pi l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/761a7d874d529dd37054298f5c6c1857.png" data-original-src="https://miro.medium.com/v2/format:webp/1*62zbsUly_vWANjpGvfcCKQ.png"/></div></figure><p id="9b97" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我们更感兴趣的是时间序列的基本组成部分如何相互影响。例如，让我们看看每个时间序列的季节性如何影响其他时间序列:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ph pi l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/d8976e0f6a73bd982dbf96129102ff41.png" data-original-src="https://miro.medium.com/v2/format:webp/1*ymLVfntxkrgIGIlB2RoH1w.png"/></div></figure><p id="14a4" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">这一次，我们使用聚类图而不是热图，在树状图的帮助下立即查看密切相关的组。</p><p id="4d08" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">该图告诉我们，牛肉、肉鸡和其他鸡肉的季节性密切相关。猪肉和羊肉也是如此。这种正相关可以表示接近的季节性匹配。</p><p id="af0b" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">例如，牛肉、肉鸡和其他鸡肉的增加/减少模式可能在给定时期内经常匹配。</p><p id="0c9e" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">让我们对趋势也这样做，我认为这应该更有趣:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ph pi l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/34ede096de8d513083ca07ef0ca61e28.png" data-original-src="https://miro.medium.com/v2/format:webp/1*8DY7DW4NvD1qB6LfdR4TBA.png"/></div></figure><p id="74e5" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">上面的图很棒，因为它帮助我们验证了趋势分析部分的假设。让我们再来看看肉类生产的标准化图:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ph pi l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/f5494fd2410e85fc3f85f74c15be52bf.png" data-original-src="https://miro.medium.com/v2/format:webp/1*XZJrR-RnZjF-6cQekpSjkg.png"/></div></figure><p id="ba67" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">你能把聚类图中的模式和线图匹配起来吗？例如，牛肉与羔羊肉/羊肉和小牛肉具有很强的负相关性。与此相匹配的事实是，牛肉产量增加了两倍，而其他两种产品的产量下降了约75%(从线图中可以看出)。</p><p id="43da" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">在猪肉和小牛肉、羔羊肉和羊肉之间也可以观察到同样的现象。</p></div><div class="ab cl oi oj hx ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="im in io ip iq"><h2 id="af64" class="ov lb it bd lc ow ox dn lg oy oz dp lk mb pa pb lm mf pc pd lo mj pe pf lq pg bi translated">2.2相关性并不意味着因果关系</h2><p id="9557" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">我希望你在对相关特征做出假设时小心行事。永远记住，相关性并不意味着因果关系。当两个特征高度相关时，这并不意味着一个特征的增加会导致另一个特征的增加。</p><p id="b589" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我喜欢用的一个例子是，即使一个城镇中鹳的数量可以与新生婴儿的数量相关联，但这并不意味着鹳接生了婴儿。</p><p id="9d67" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">可能需要一段时间来清楚地划分相关性和因果关系，所以你为什么不看看我的<a class="ae kz" href="https://towardsdev.com/how-to-not-misunderstand-correlation-75ce9b0289e?source=your_stories_page-------------------------------------" rel="noopener ugc nofollow" target="_blank">关于这个话题的另一篇文章</a>。</p></div><div class="ab cl oi oj hx ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="im in io ip iq"><h1 id="a31b" class="la lb it bd lc ld op lf lg lh oq lj lk jz or ka lm kc os kd lo kf ot kg lq lr bi translated">3.自相关和偏自相关</h1><h2 id="4ba3" class="ov lb it bd lc ow ox dn lg oy oz dp lk mb pa pb lm mf pc pd lo mj pe pf lq pg bi translated">3.1自相关</h2><p id="691a" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">自相关是时间序列数据建模的强大分析工具。顾名思义，它涉及到计算相关系数。但是在这里，不是在两个特征之间进行计算，而是用一个滞后版本的时间序列来发现时间序列的相关性。</p><p id="6156" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">让我们先看一个示例图，并进一步解释:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ph pi l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/596a0cbf62dce660afb3446eb5cf376f.png" data-original-src="https://miro.medium.com/v2/format:webp/1*2teAf7hshCQcC9fWHT7cuA.png"/></div></figure><p id="298c" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">自相关函数图(ACF)的x轴是滞后数<em class="nl"> k </em>。例如，当k=1时，通过将序列移动1来找到相关性。这和使用熊猫的<code class="fe pj pk pl pm b">shift</code>功能是一样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ph pi l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/9e92c7826391c30131e46092b5317c53.png" data-original-src="https://miro.medium.com/v2/format:webp/1*o3yHHjdGH84g2kOmYwHifg.png"/></div></figure><p id="f044" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">YAXis是每个滞后<em class="nl"> k </em>处的相关量。红色阴影区域是一个置信区间——如果条形的高度在该区域之外，则意味着相关性在统计上<em class="nl">显著</em>。</p><p id="06ef" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">请停下来想一想，你能从ACF图中学到什么。</p><p id="728f" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">它们提供了另一种检测模式和季节性的方法。例如，以摄氏度为单位的温度的ACF图显示，每15个滞后的相关性降低，或者每25个滞后的相关性增加。</p><p id="f77a" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">当时间序列中存在明显的趋势时，自相关性在小滞后(如1或2)时往往较高。当季节性存在时，自相关以较大的滞后周期性上升。</p><p id="68ba" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">让我们看另一个例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ph pi l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/7a8e44e8e292812b79e88c1bef5cbd17.png" data-original-src="https://miro.medium.com/v2/format:webp/1*8OTxCpP99p6oGI1TiGTyGw.png"/></div></figure><p id="5156" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">一氧化碳的ACF证实了小滞后往往具有高相关性。它还显示，每25个滞后，相关性显著增加，但很快下降到负值。但是大多数向下的柱线都在阴影区域内，表明它们<em class="nl">在统计上不显著</em>。</p><p id="6983" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">这种比较过去和现在数据点之间关系的能力具有独特的优势。如果您可以将现值与k个周期之前的点相关联，这也意味着您可以找到k个周期之后的值的链接。</p><p id="665f" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">此外，理解自相关是用ARIMA模型建模时间序列的关键(另一篇文章的主题)。</p></div><div class="ab cl oi oj hx ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="im in io ip iq"><h2 id="9225" class="ov lb it bd lc ow ox dn lg oy oz dp lk mb pa pb lm mf pc pd lo mj pe pf lq pg bi translated">3.2部分自相关</h2><p id="339b" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">尽管讨论偏相关意味着我们走在了事情的前面，我还是会给你要点。</p><p id="c5da" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">它类似于自相关——使用序列及其在<em class="nl"> k </em>的滞后版本进行计算:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ph pi l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/781034c63d4a329f6f50fea4a19ad9c5.png" data-original-src="https://miro.medium.com/v2/format:webp/1*7PMAoNy8H6OwvrhosU1VUQ.png"/></div></figure><p id="1d63" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">唯一的区别是，这种方法试图说明干预滞后的影响。例如，在滞后3处，部分自相关消除了滞后1和滞后2对计算相关性的影响。</p><p id="bf24" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">虽然自相关对于分析时间序列的属性和选择使用哪种类型的ARIMA模型很有用，但偏相关可以告诉我们自回归模型的拟合阶数。</p><p id="aae1" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">同样，当我们谈论预测时，将深入讨论这个主题。所以，<a class="ae kz" href="https://ibexorigin.medium.com/" rel="noopener">敬请期待</a>！</p></div><div class="ab cl oi oj hx ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="im in io ip iq"><h2 id="4660" class="ov lb it bd lc ow ox dn lg oy oz dp lk mb pa pb lm mf pc pd lo mj pe pf lq pg bi translated">摘要</h2><p id="f996" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">恭喜你！</p><p id="698c" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">通过阅读这篇文章，你学会了剖析任何时间序列并获得有意义的见解的强大技术。最重要的是，您现在有能力将这些技术应用于多个时间序列，并批判性地评估它们之间的关系。</p><p id="f6fc" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">感谢您的阅读，下一期再见！</p></div><div class="ab cl oi oj hx ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="im in io ip iq"><h2 id="fc79" class="ov lb it bd lc ow ox dn lg oy oz dp lk mb pa pb lm mf pc pd lo mj pe pf lq pg bi translated">您可能也会感兴趣…</h2><ul class=""><li id="7133" class="mt mu it lu b lv lw ly lz mb pv mf pw mj px mn my mz na nb bi translated"><a class="ae kz" rel="noopener" target="_blank" href="/every-pandas-function-you-can-should-use-to-manipulate-time-series-711cb0c5c749?source=your_stories_page-------------------------------------">每一个你可以(应该)用来操纵时间序列的熊猫函数</a></li><li id="fba5" class="mt mu it lu b lv nc ly nd mb ne mf nf mj ng mn my mz na nb bi translated"><a class="ae kz" rel="noopener" target="_blank" href="/comprehensive-guide-on-multiclass-classification-metrics-af94cfb83fbd?source=your_stories_page-------------------------------------">多类分类指标综合指南</a></li><li id="6410" class="mt mu it lu b lv nc ly nd mb ne mf nf mj ng mn my mz na nb bi translated"><a class="ae kz" rel="noopener" target="_blank" href="/4-part-practical-study-guide-to-sklearn-feature-selection-b959a28d9ef7?source=your_stories_page-------------------------------------">三阶段实用Sklearn功能选择</a></li></ul></div></div>    
</body>
</html>