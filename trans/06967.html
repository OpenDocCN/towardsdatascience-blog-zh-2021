<html>
<head>
<title>Network Analysis with R | Manipulating Network Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">操作网络数据的网络分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/network-analysis-in-r-manipulating-network-data-ee388fba7215?source=collection_archive---------16-----------------------#2021-06-24">https://towardsdatascience.com/network-analysis-in-r-manipulating-network-data-ee388fba7215?source=collection_archive---------16-----------------------#2021-06-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ed9e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在r中使用igraph执行网络分析和操作网络数据。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a5319c3468fd6b1549a760a8b3f43332.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D4CpftemW68Vf-1hJj9AGg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><h1 id="cb7f" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">介绍</h1><p id="233f" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi mj translated"><span class="l mk ml mm bm mn mo mp mq mr di"> N </span>网络分析是一种使用图论来研究复杂现实世界问题的技术，例如计算生物学、工程、金融、市场营销、神经科学、政治学和公共卫生(Kolaczyk等人，2014)。在我之前的工作中，我用NetworkX和node2vec在python环境中做了相当多的网络分析。不过最近偶然看到了Eric D. Kolaczyk和Gábor Csárdi写的书——《<a class="ae ms" href="https://link.springer.com/book/10.1007/978-1-4939-0983-4" rel="noopener ugc nofollow" target="_blank"><em class="mt">用R </em> </a>对网络数据进行统计分析》(这是第1版，第2版于2020年出版)，这本书向我展示了R中许多很酷的软件包(如igraph)，它们在操纵图形、数学建模、统计建模等方面提供了高质量的网络分析。</p><p id="c156" class="pw-post-body-paragraph ln lo iq lp b lq mu jr ls lt mv ju lv lw mw ly lz ma mx mc md me my mg mh mi ij bi translated">这本书附有一份代码演示列表，可以在这里找到:<a class="ae ms" href="https://github.com/kolaczyk/sand" rel="noopener ugc nofollow" target="_blank">https://github.com/kolaczyk/sand</a>。</p><p id="b1e0" class="pw-post-body-paragraph ln lo iq lp b lq mu jr ls lt mv ju lv lw mw ly lz ma mx mc md me my mg mh mi ij bi translated">这个博客是建立在本书的第二章:处理网络数据的基础上的，假设你已经理解了网络分析的基本概念，如节点、边等。然而，如果你需要一个全面的解释，我鼓励你读这本书。</p><h1 id="54c7" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">您需要什么:</h1><p id="7eef" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">RStudio(或类似的ide)和“igraph”(一个R包，可从CRAN获得)</p><p id="60b4" class="pw-post-body-paragraph ln lo iq lp b lq mu jr ls lt mv ju lv lw mw ly lz ma mx mc md me my mg mh mi ij bi translated">如果您没有安装“igraph ”:</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="25d1" class="ne kw iq na b gy nf ng l nh ni"><em class="mt">## Download and install the package</em> <br/>install.packages("igraph") </span><span id="f6ca" class="ne kw iq na b gy nj ng l nh ni"><em class="mt">## Load package</em> <br/>library(igraph)</span></pre><h1 id="f856" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">密码</h1><h2 id="096e" class="ne kw iq bd kx nk nl dn lb nm nn dp lf lw no np lh ma nq nr lj me ns nt ll nu bi translated">创建无向图和有向图</h2><p id="b956" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">要手动创建图表，可使用“graph.formula”功能。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="0bcc" class="pw-post-body-paragraph ln lo iq lp b lq mu jr ls lt mv ju lv lw mw ly lz ma mx mc md me my mg mh mi ij bi translated">为了使创建有向图更容易理解，我提出了一个由三个机场组成的机场网络:JFK(纽约机场)、PEK(北京机场)和CDG(巴黎机场)。因此，我创建的有向图可以理解为:我们只有从JFK到北京和CDG的单程航班(假设应用了一些旅行限制)；北京和CDG是相互连接的，你可以双向飞行。</p><h2 id="f668" class="ne kw iq bd kx nk nl dn lb nm nn dp lf lw no np lh ma nq nr lj me ns nt ll nu bi translated">获取图表的基本信息</h2><p id="817c" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">为了使博客简洁，演示的其余部分将只关注无向图。更多参考，请访问该书的GitHub知识库。</p><p id="d2a1" class="pw-post-body-paragraph ln lo iq lp b lq mu jr ls lt mv ju lv lw mw ly lz ma mx mc md me my mg mh mi ij bi translated">一个图，用G = (V，E)表示，是由一组V个顶点和一组E条边组成的数学结构。图中的顶点数和边数有时称为图G的<em class="mt">阶</em>和<em class="mt">大小</em>(Kolaczyk等人，2014)。</p><p id="80e9" class="pw-post-body-paragraph ln lo iq lp b lq mu jr ls lt mv ju lv lw mw ly lz ma mx mc md me my mg mh mi ij bi translated">您可以使用<strong class="lp ir"><em class="mt">【V】</em></strong>和<strong class="lp ir"><em class="mt">【E】</em></strong>来检查顶点和边；使用<strong class="lp ir"><em class="mt">【vcount(graph)</em></strong>和<strong class="lp ir"><em class="mt">ecount(graph)</em></strong>检查图形的顺序和大小；使用<strong class="lp ir"><em class="mt">print _ all(graph)</em></strong>来显示图形的摘要。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h2 id="321f" class="ne kw iq bd kx nk nl dn lb nm nn dp lf lw no np lh ma nq nr lj me ns nt ll nu bi translated">形象化图表</h2><p id="a4de" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">您可以使用<strong class="lp ir"> <em class="mt">命令绘制</em> </strong>图形:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/51a04722c684fba4e5be6cf0cd0c7b18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DKWEpyuxY48TwvhG-Benbw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图一。图(g)</p></figure><h2 id="e4fa" class="ne kw iq bd kx nk nl dn lb nm nn dp lf lw no np lh ma nq nr lj me ns nt ll nu bi translated">标记顶点</h2><p id="cb01" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">我制作了这个图，它的顶点用数字1到n标记。实际上，你可能已经有了自然的标签，比如名字。这里是你如何标注你的顶点，以及它看起来会是什么样子:</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="94bb" class="ne kw iq na b gy nf ng l nh ni">V(g)$name &lt;-c("Adam","Judy","Bobby","Sam","Frank","Jay","Tom","Jerry")</span><span id="e53e" class="ne kw iq na b gy nj ng l nh ni">plot(g)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/b6078f6955681536a4c3dd10bfb84066.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A_E3JuANHSeMs-dw2HSCjw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图2:带标签的图表</p></figure><h2 id="6e81" class="ne kw iq bd kx nk nl dn lb nm nn dp lf lw no np lh ma nq nr lj me ns nt ll nu bi translated">图形的表示</h2><p id="3ff2" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">通常，图将以三种基本格式存储:邻接表、边表和邻接矩阵(Kolaczyk等人，2014)。</p><p id="3d92" class="pw-post-body-paragraph ln lo iq lp b lq mu jr ls lt mv ju lv lw mw ly lz ma mx mc md me my mg mh mi ij bi translated">邻接表是无序列表的集合。每个无序列表描述了邻接表中图的特定顶点的邻居的集合。这种格式就是igraph在图形摘要函数中使用的格式。</p><p id="6620" class="pw-post-body-paragraph ln lo iq lp b lq mu jr ls lt mv ju lv lw mw ly lz ma mx mc md me my mg mh mi ij bi translated">边列表是一个两列表格，列出了图中的所有节点对。这种格式是NetworkX(python中)的首选格式。</p><p id="51f6" class="pw-post-body-paragraph ln lo iq lp b lq mu jr ls lt mv ju lv lw mw ly lz ma mx mc md me my mg mh mi ij bi translated">邻接矩阵的条目显示了图中的两个顶点是否相连。如果两个节点“I和j”之间有链接，则行列索引(I，j)将被标记为1，否则为0。因此，对于无向图，邻接矩阵将是对称的。统计模型通常喜欢用这种格式编码图形，比如node2vec，它需要邻接矩阵作为输入。</p><p id="45e5" class="pw-post-body-paragraph ln lo iq lp b lq mu jr ls lt mv ju lv lw mw ly lz ma mx mc md me my mg mh mi ij bi translated">可以使用<strong class="lp ir"><em class="mt">get . adj list(graph)</em></strong>、<strong class="lp ir"><em class="mt">get . edge list(graph)</em></strong>、<strong class="lp ir"><em class="mt">get . adjacency(graph)</em></strong>的函数分别得到三种不同的格式。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h2 id="6c7d" class="ne kw iq bd kx nk nl dn lb nm nn dp lf lw no np lh ma nq nr lj me ns nt ll nu bi translated">图的运算</h2><p id="62d8" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在实践中，我们可能想要移除某些边或连接图来得到子图。在这种情况下，数学运算符可以帮助您实现目标。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/25569edb8f20fee4384a578a2f9d8a3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LWOPiEB-EJNqwUnoXCuLjg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图3。图的运算</p></figure><p id="3b4d" class="pw-post-body-paragraph ln lo iq lp b lq mu jr ls lt mv ju lv lw mw ly lz ma mx mc md me my mg mh mi ij bi translated">(1，1)中的图是原图。(1，1)中的图从原始图中删除了两个顶点。(2，1)中的图由某些边组成(由于顶点的移除，这些边从原始图中移除)。(2，2)中的图是(1，1)和(2，1)的联图，并且它具有与(1，1)相同的结构。</p><h2 id="2577" class="ne kw iq bd kx nk nl dn lb nm nn dp lf lw no np lh ma nq nr lj me ns nt ll nu bi translated">使用数据框</h2><p id="8a57" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在现实问题中，我们很少手动制作图表。相反，我们必须导入数据。对于操作图表的最佳实践，我们通常需要准备两个数据文件/数据框。其中一个文件需要包含图中每个顶点的所有属性。另一个文件需要包含网络中的边(通常是边列表)。</p><p id="bc8c" class="pw-post-body-paragraph ln lo iq lp b lq mu jr ls lt mv ju lv lw mw ly lz ma mx mc md me my mg mh mi ij bi translated">在书中，作者举了一个Lazega的律师数据集的例子。信息存储在两个不同的文件中:<strong class="lp ir"> <em class="mt"> elist.lazega </em> </strong>和<strong class="lp ir"> <em class="mt"> v.attr.lazega </em> </strong>。原始数据可在sand(网络数据统计分析)库中获得。因此，下面是您如何读取自己的数据:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/cce40cbdd15e6844919147773bd9df75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zKUrKoXBNsbwuqxWR4tibg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图4。阅读你自己的数据</p></figure><h1 id="ff53" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">结论</h1><p id="273f" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在这篇博客中，我讲述了创建有向和无向图、可视化图、从图中获取统计数据、标记顶点、生成不同格式的表示、子集化和连接图以及使用<strong class="lp ir"> igraph </strong>读取您自己的网络数据的代码。</p><p id="b338" class="pw-post-body-paragraph ln lo iq lp b lq mu jr ls lt mv ju lv lw mw ly lz ma mx mc md me my mg mh mi ij bi translated"><strong class="lp ir"> <em class="mt">请随时与我联系</em></strong><a class="ae ms" href="https://www.linkedin.com/in/jinhangjiang/" rel="noopener ugc nofollow" target="_blank"><strong class="lp ir"><em class="mt">LinkedIn</em></strong></a><strong class="lp ir"><em class="mt">。</em> </strong></p><h1 id="2f08" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">相关阅读</h1><p id="efad" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><a class="ae ms" rel="noopener" target="_blank" href="/networkx-code-demo-for-manipulating-subgraphs-e45320581d13"> NetworkX:操纵子图的代码演示</a></p><p id="d6be" class="pw-post-body-paragraph ln lo iq lp b lq mu jr ls lt mv ju lv lw mw ly lz ma mx mc md me my mg mh mi ij bi translated"><a class="ae ms" href="https://medium.com/analytics-vidhya/analyzing-disease-co-occurrence-using-networkx-gephi-and-node2vec-53941da35a0f" rel="noopener">使用NetworkX、Gephi和Node2Vec分析疾病共现</a></p><h1 id="63e3" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">参考</h1><p id="2d68" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><em class="mt">带R </em>的网络数据统计分析，作者Eric D. Kolaczyk和Csá rdi Gá bor，Springer，2014年，第13–28页。</p></div></div>    
</body>
</html>