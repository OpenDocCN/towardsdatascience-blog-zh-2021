<html>
<head>
<title>How to Analyze Football Event Data Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python分析足球赛事数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-analyze-football-event-data-using-python-2f4070d551ff?source=collection_archive---------4-----------------------#2021-10-28">https://towardsdatascience.com/how-to-analyze-football-event-data-using-python-2f4070d551ff?source=collection_archive---------4-----------------------#2021-10-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fb6f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我们来分析一下2018年FIFA世界杯韩国和德国的比赛</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fdc8543cafe19f542881a6912abcc0df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kIVUnN1HgO1-WqbJ7k-4-w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@fznsr_?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">福赞·萨里</a>在<a class="ae ky" href="https://unsplash.com/s/photos/world-cup?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="7cfd" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="aff8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">数据科学是从数据中获取洞察力的一种方式。数据科学正在影响许多领域，包括足球。</p><p id="fff8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">足球包含了太多的数据，从个人到团队。有了数据，我们可以用更有意义的方式去理解游戏。</p><p id="1356" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">此外，对于团队来说，这些数据可以产生有助于决策的洞察力。因此，团队可以找到赢得比赛的策略。</p><p id="c4cf" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在本文中，我将带您了解如何使用Python分析足球赛事数据。既然如此，我们就来分析一下2018年FIFA世界杯德国和韩国的比赛。没有进一步，让我们开始吧！</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="53e9" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">履行</h1><h2 id="d28d" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">获取数据</h2><p id="49d4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">对于数据，我们将使用来自StatsBomb的数据。StatsBomb是一家专门研究足球领域的分析公司。他们提供了大量的足球数据，尤其是赛事数据。</p><p id="40d9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于那些想学习足球分析的人来说，谢天谢地，StatsBomb已经公布了公开数据。数据由已经结束的足球联赛组成。您可以在这里 访问数据<a class="ae ky" href="https://github.com/statsbomb/open-data" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">。</strong></a></p><blockquote class="nq nr ns"><p id="5518" class="lr ls nt lt b lu mn ju lw lx mo jx lz nu mp mc md nv mq mg mh nw mr mk ml mm im bi translated">注意:在获取数据时，请保持耐心，因为数据量非常大。</p></blockquote><h2 id="ad2d" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">探索数据</h2><p id="ebb5" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">下载完数据后，下一步是探索它。数据的文件夹结构如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="080b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">还有像事件、阵容和比赛这样的文件夹。</p><ul class=""><li id="3013" class="nz oa it lt b lu mn lx mo ma ob me oc mi od mm oe of og oh bi translated">events文件夹包含以JSON格式概括比赛的文件。</li><li id="87a8" class="nz oa it lt b lu oi lx oj ma ok me ol mi om mm oe of og oh bi translated">“阵容”文件夹包含每场比赛中每支球队的阵容。</li><li id="35a4" class="nz oa it lt b lu oi lx oj ma ok me ol mi om mm oe of og oh bi translated">matches文件夹包含每个比赛的匹配项。它也被分成几个比赛的不同季节。</li></ul><p id="0177" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">那么，当数据中有很多文件时，我们如何检索特定的匹配呢？正如我之前提到的，我们将分析德国和韩国之间的世界杯比赛。在下一节中，我将向您展示如何检索数据。</p><h2 id="e450" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">检索事件数据</h2><p id="9706" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">可以通过这些步骤检索事件数据。首先，我们打开competitions.json文件。该文件是访问StatsBomb数据的第一道关口。这样做的原因是因为我们需要比赛和赛季ID来访问比赛列表。</p><p id="df63" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了处理JSON文件，pandas库提供了使用read_json函数将JSON文件作为数据帧读取的功能。下面是实现这一点的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on ny l"/></div></figure><p id="d0fb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在您可以看到包含StatsBomb提供的所有比赛信息的行。</p><p id="5342" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">综上所述，纳入该数据的比赛有西甲(西班牙联赛)、欧锦赛、世界杯(男女)和欧冠。</p><p id="8d96" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在，我们希望将包含FIFA世界杯信息的行放入其中。让我们使用这行代码过滤数据集:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on ny l"/></div></figure><p id="233b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">从上面可以看到，FIFA世界杯的比赛和赛季ID分别是43和3。现在让我们访问包含ID的文件夹。</p><p id="d1a5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于每个竞赛，文件夹都以竞赛ID命名。每个文件夹都包含JSON文件。每个文件都附有季节ID作为名称。</p><p id="d9b8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在，让我们使用以下几行代码来访问该文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on ny l"/></div></figure><p id="25ea" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">哇，数据太多了，读起来很混乱。先用循环整理一下吧。在每次迭代中，我们获取比赛ID、球队名称和分数。让我们写这几行代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on ny l"/></div></figure><p id="b385" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在比以前整洁多了。让我们来看看德国对韩国的比赛。最终比分是2比0，韩国队获胜。你可能不知道，德国和韩国的比赛非常精彩。</p><p id="92f1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这一结果也使得德国队在小组赛中被淘汰出局。这是德国自1938年以来首次在首轮被淘汰。</p><p id="0fe8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">回到正题，德国对韩国的比赛ID是7567。让我们使用下面几行代码来访问该文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on ny l"/></div></figure><p id="22ee" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这比上一个多得多。为了简化我们的分析，pandas库提供了json_normalize函数。这个函数如此强大是因为它可以处理嵌套的JSON。现在让我们写这几行代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on ny l"/></div></figure><p id="3a9c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">给你。比以前更易读。现在让我们从数据中创建一些可视化。</p><h2 id="cabd" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">创建拍摄地图</h2><p id="c1fd" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们可以创建的可视化之一是拍摄地图。在这张地图上，我们想看看每个队投了多少球。同时，我们想知道进球的机会有多大。我们称这个机会为预期目标。</p><p id="86bc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了创建可视化，我们需要首先获取事件数据。然后，根据事件名称过滤数据。在这种情况下，我们需要记录镜头的数据。让我们写下这行代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on ny l"/></div></figure><p id="9b9c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">获得数据后，现在让我们编写这些代码行来生成镜头图:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on ny l"/></div></figure><p id="223b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我先解释一下代码。基本上，我们想首先创建一个足球场。然后，我们还创建了一个与已拍摄的镜头相对应的点的集合。为了创建这个音高，我们可以使用FCPython文件中的createPitch函数。</p><p id="0935" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于FCPython文件，可以查看我的GitHub库<a class="ae ky" href="https://github.com/Friends-of-Tracking-Data-FoTD/SoccermaticsForPython/blob/master/FCPython.py" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">这里</strong> </a>。感谢创造代码的追踪团队之友。</p><p id="e3e9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了生成点，我们设置了循环来迭代数据帧中的行。对于每次迭代:</p><ul class=""><li id="03f6" class="nz oa it lt b lu mn lx mo ma ob me oc mi od mm oe of og oh bi translated">我们带着坐标和预期目标(xG)值。</li><li id="87d0" class="nz oa it lt b lu oi lx oj ma ok me ol mi om mm oe of og oh bi translated">然后，我们根据前面的参数生成一个圆。xG值将用作圆大小的值。我们也为不是目标的镜头设置透明度。</li></ul><p id="a455" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果您正确编写代码，它应该会生成如下所示的可视化效果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/455f54e19692f44236259c228e5b71f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tnWyAvWtAKsyCCfYcHho8g.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">该图由作者生成。</p></figure><p id="70d3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在我们可以从数据中获得洞察力。正如我们从上面看到的，我们知道德国抓住了很多机会。但是他们不能从中得分。</p><p id="01c5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">此外，他们有几个镜头有很大的xG值。xG值越大，进球几率越大。但遗憾的是，德国人无法将其转换为目标。</p><p id="ecd7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在韩国方面，我们可以看到他们没有太多的机会。他们不像德国人那样对每次投篮都有很高的预期目标。</p><p id="3b29" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">但是，在比赛结束时，德国队犯了一些错误，导致了尴尬的结果。孙兴民和金英权是韩国的英雄。</p><p id="dd3e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">但遗憾的是，韩国和德国不得不退出竞争。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="3721" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">结论</h1><p id="b7aa" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这是你可以创造的形象之一。我们可以做很多数据可视化。</p><p id="ddf0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我的建议是为每个球员创建一个传球热图，一个通往进球的控球链，或者一个传球图。</p><p id="4548" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">正如我之前说过的，足球赛事数据中有很多真知灼见。因此，这有助于球队和足球爱好者更好地理解这项运动。</p><p id="60c9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">干得好！现在，您已经学习了如何使用Python分析来自StatsBomb的足球赛事数据。我希望它能启发你开始使用Python分析体育数据，尤其是足球。</p><p id="3894" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果你喜欢我的文章，想看更多，可以关注我，订阅我的媒介账号。如果你想在LinkedIn上和我联系，你也可以这样做。您可以在这里  <strong class="lt iu">访问我的LinkedIn个人资料<a class="ae ky" href="https://www.linkedin.com/in/alghaniirfan/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">。</strong></a></strong></p><p id="4854" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">谢谢你看我的文章！</p><blockquote class="nq nr ns"><p id="4075" class="lr ls nt lt b lu mn ju lw lx mo jx lz nu mp mc md nv mq mg mh nw mr mk ml mm im bi translated">如果你需要jupyter笔记本和FCPython文件，可以在这里  <strong class="lt iu">访问我的GitHub库<a class="ae ky" href="https://github.com/khalidmeister/football_analytics" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">。</strong></a></strong></p><p id="bef9" class="lr ls nt lt b lu mn ju lw lx mo jx lz nu mp mc md nv mq mg mh nw mr mk ml mm im bi translated"><strong class="lt iu">免责声明:</strong> <br/> StatsBomb已给予使用和分析数据的权利。你可以在这里 阅读关于数据<a class="ae ky" href="https://github.com/statsbomb/open-data/blob/master/LICENSE.pdf" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">使用权的许可。</strong></a></p></blockquote><h2 id="6b76" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated"><strong class="ak">参考文献</strong></h2><p id="894e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">[1]德国在输给韩国后退出了比赛。BBC。<a class="ae ky" href="https://www.bbc.com/sport/football/44439270" rel="noopener ugc nofollow" target="_blank">https://www.bbc.com/sport/football/44439270</a><br/>【2】stats bomb:公开数据。<a class="ae ky" href="https://github.com/statsbomb/open-data" rel="noopener ugc nofollow" target="_blank">https://github.com/statsbomb/open-data</a></p></div></div>    
</body>
</html>