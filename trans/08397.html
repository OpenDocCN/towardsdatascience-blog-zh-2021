<html>
<head>
<title>Debugging Dbt: When Your Table Name is a Reserved Keyword</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">调试Dbt:当表名是保留关键字时</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/debugging-dbt-when-your-table-name-is-a-reserved-keyword-faf81ab6376b?source=collection_archive---------22-----------------------#2021-08-02">https://towardsdatascience.com/debugging-dbt-when-your-table-name-is-a-reserved-keyword-faf81ab6376b?source=collection_archive---------22-----------------------#2021-08-02</a></blockquote><div><div class="fc ij ik il im in"/><div class="io ip iq ir is"><div class=""/><div class=""><h2 id="ecdf" class="pw-subtitle-paragraph js iu iv bd b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj dk translated">如何配置dbt来使用名称类似order和group的表</h2></div><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi kk"><img src="../Images/331f6a6ae835e1898aa079de10be351d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NCng9qrEJUy4F8sh2YpkDg.jpeg"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">罗曼·博日科在<a class="ae la" href="https://unsplash.com/s/photos/table?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="c3fe" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">欢迎来到我的最新系列-调试dbt。作为一名分析工程师，我每天都在工作中使用dbt来编写健壮的数据模型。它是简化和容器化数据模型运行方式的一个很好的工具。虽然它使事情变得更容易，但我仍在不断地学习关于这个工具的一些东西。我想用我的奋斗和学习作为一种方式来教导社区中可能遇到同样问题的其他人。</p><p id="ab6f" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">今天，我将解决一个问题，我曾使用雪花表与保留关键字同名。如果您正在使用Fivetran接收您的数据，那么您可能会遇到类似的问题。</p><p id="725f" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">我们使用Fivetran获取的两个数据源是Zendesk和Shopify。这两个源都包含名为<em class="lx">订单</em>和<em class="lx">组</em>的表。因为这些词在许多数据库中被认为是保留关键字，在我的例子中是雪花，那么我们将会遇到一些用dbt运行它们的问题。</p><p id="ed44" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">这可能会以如下所示的错误形式出现:</p><pre class="kl km kn ko gt ly lz ma mb aw mc bi"><span id="1e6b" class="md me iv lz b gy mf mg l mh mi">SQL compilation error: syntax error line 1 at position 26 unexpected 'group'. syntax error line 1 at position 31 unexpected '&lt;EOF&gt;'.</span></pre><p id="8f02" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">如何解决这个问题:</p><ol class=""><li id="9b9f" class="mj mk iv ld b le lf lh li lk ml lo mm ls mn lw mo mp mq mr bi translated">转到src.yml文件，该文件包含相应源表的数据库/模式信息。</li><li id="c3e3" class="mj mk iv ld b le ms lh mt lk mu lo mv ls mw lw mo mp mq mr bi translated">在你的表名下添加<a class="ae la" href="https://docs.getdbt.com/reference/resource-properties/identifier" rel="noopener ugc nofollow" target="_blank"> <em class="lx">标识符</em> </a>和表名。</li></ol><pre class="kl km kn ko gt ly lz ma mb aw mc bi"><span id="f30c" class="md me iv lz b gy mf mg l mh mi">identifier: ORDER<br/># or <br/>identifier: GROUP</span></pre><p id="15bc" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">3.还要添加另一行，说明<em class="lx">引用</em>，并将嵌套的<em class="lx">标识符</em>设置为真。</p><pre class="kl km kn ko gt ly lz ma mb aw mc bi"><span id="7df1" class="md me iv lz b gy mf mg l mh mi">quoting:<br/>  identifier: true</span></pre><p id="5562" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">将这些内容添加到这些源代码的src.yml文件中，改变了在dbt中编译SQL的方式。而不是将源表作为</p><pre class="kl km kn ko gt ly lz ma mb aw mc bi"><span id="e0ee" class="md me iv lz b gy mf mg l mh mi">select * from raw.zendesk.group</span></pre><p id="4515" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">现在它将被读作</p><pre class="kl km kn ko gt ly lz ma mb aw mc bi"><span id="3858" class="md me iv lz b gy mf mg l mh mi">select * from raw.zendesk."GROUP"</span></pre><p id="6cf9" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">更改只是在表名中添加引号，让SQL知道这实际上是表名，而不是保留关键字。</p><p id="6e6d" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">诸如此类的问题通常表现在许多不同类型的错误消息中。可能很难确切地知道是什么导致了某个问题，但它通常以相当简单的方式结束。请务必关注我的调试Dbt系列的其余部分。接下来是增量模型！</p></div></div>    
</body>
</html>