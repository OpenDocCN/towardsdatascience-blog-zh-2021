<html>
<head>
<title>Why Matplotlib can’t be installed in Visual Studio Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么 Matplotlib 不能安装在 Visual Studio 代码中</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/why-matplotlib-cant-be-installed-in-visual-studio-code-cb1261c822ad?source=collection_archive---------4-----------------------#2021-11-25">https://towardsdatascience.com/why-matplotlib-cant-be-installed-in-visual-studio-code-cb1261c822ad?source=collection_archive---------4-----------------------#2021-11-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e897" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">因为有了 MVC++构建工具</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8e33114a31369ddd217232cffddd5c0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XBLGzpWAJZxBPu5dWLPptg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者制作的图片</p></figure><p id="aef1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们知道“Matplotlib 是一个用于在 Python 中创建静态、动画和交互式可视化的综合库”。如果允许安装 Anaconda，通常使用 Matplotlib 没有问题。但是最近 Anaconda 为商业用户更新了服务条款。详细信息解释如下:</p><blockquote class="lu lv lw"><p id="78a9" class="ky kz lx la b lb lc ju ld le lf jx lg ly li lj lk lz lm ln lo ma lq lr ls lt im bi translated">“为了应对过去几年商业用户对 Python 和 Anaconda 的使用和采用的急剧增加，我们更新了我们的<a class="ae mb" href="https://www.anaconda.com/terms-of-service" rel="noopener ugc nofollow" target="_blank">服务条款</a>。展望未来，我们要求依赖我们的包装&amp;分销工作<strong class="la iu"> </strong>到<strong class="la iu">的<strong class="la iu">商业用户</strong>购买</strong>我们的商业产品之一。”—<a class="ae mb" href="https://www.anaconda.com/blog/anaconda-commercial-edition-faq" rel="noopener ugc nofollow" target="_blank">https://www . anaconda . com/blog/anaconda-commercial-edition-FAQ</a></p></blockquote><p id="1d01" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果公司还没有准备好为 Anaconda 付费，一些工程师可能会转向 VS Code。</p><p id="3233" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在 python 可以在 VSC 正常运行之前，有一些设置会困扰用户。大部分都是要求你安装库的错误，像“导入错误:没有名为 numpy 的模块”，可以通过“pip”或“pip3”或“python pip”或“python3 -m pip”等命令解决。来解决。</p><p id="d52a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是今天，我想把重点放在 Matplotlib 问题上，这个问题可能不能仅仅通过 pip 命令来解决。</p><p id="7a88" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">万一:</p><ol class=""><li id="ac23" class="mc md it la b lb lc le lf lh me ll mf lp mg lt mh mi mj mk bi translated">你有一个视窗系统</li><li id="465a" class="mc md it la b lb ml le mm lh mn ll mo lp mp lt mh mi mj mk bi translated">您的电脑上没有安装 Anaconda</li><li id="438c" class="mc md it la b lb ml le mm lh mn ll mo lp mp lt mh mi mj mk bi translated">Python 扩展已在 VSC 安装</li><li id="3662" class="mc md it la b lb ml le mm lh mn ll mo lp mp lt mh mi mj mk bi translated">解释器(在 VSC 的左下角)选择正确</li><li id="f6bb" class="mc md it la b lb ml le mm lh mn ll mo lp mp lt mh mi mj mk bi translated"><strong class="la iu">没有安装 visual studio 构建工具</strong>(你可能也不知道为什么你需要它，直到问题发生，一个工程师(比如机械工程师)写 python 代码。</li></ol><p id="d233" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在我们来举个例子。</p><p id="6d16" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">尝试测试以下 py 文件:standardplot.py:</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="b696" class="mv mw it mr b gy mx my l mz na">import numpy as np<br/>import matplotlib.pyplot as plt</span><span id="4440" class="mv mw it mr b gy nb my l mz na">x = np.linspace(0, 20, 100)  # Create a list of evenly-spaced numbers over the range</span><span id="ad92" class="mv mw it mr b gy nb my l mz na">plt.plot(x, np.sin(x))       # Plot the sine of each x point</span><span id="4e75" class="mv mw it mr b gy nb my l mz na">plt.show()                   # Display the plot</span></pre><p id="354e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">你是否得到了下图的美丽身材:</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nc"><img src="../Images/890db5195510c3149ae387ceb9e4129a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*cKka_e8cPdx2uHw1bRwycQ.png"/></div></figure><p id="4c66" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">还是你得到了错误？像下面:</strong></p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="ba39" class="mv mw it mr b gy mx my l mz na">Import Error: No module named numpy</span></pre><p id="b577" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">谷歌一下，解决方案可能是:</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="7b44" class="mv mw it mr b gy mx my l mz na">pip install numpy<br/>or <br/>pip3 install numpy<br/>or<br/>python3 -m pip install numpy<br/>or<br/>python3 -m pip install numpy</span></pre><p id="2ac0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">类似的问题如“没有 sklean 的模块”可以用类似的解决方案来解决。</p><p id="99b6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">再次运行它，现在 NumPy，<strong class="la iu">没有问题，但是可能会有一个错误，如</strong>:</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="434c" class="mv mw it mr b gy mx my l mz na">ERROR: Command errored out with exit status 1:<br/>......<br/></span><span id="13f1" class="mv mw it mr b gy nb my l mz na">error: Microsoft Visual C++ 14.0 or greater is required. Get it with "Microsoft C++ Build Tools": <a class="ae mb" href="https://visualstudio.microsoft.com/visual-cpp-build-tools/" rel="noopener ugc nofollow" target="_blank">https://visualstudio.microsoft.com/visual-cpp-build-tools/</a></span></pre><p id="6bae" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是因为您的计算机上没有安装 Microsoft C++Build Tools。为了在 Microsoft for Python 中运行 matplotlib 或类似的交互式界面，需要构建工具，而不仅仅是 Microsoft C++可再发行版。</p><p id="df2e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">如何:</strong></p><p id="05d8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">单击链接，它会将您带到下面的窗口:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/4d9c9546ba768290634d947a5bcfd929.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jfGGp7DLWGMhxXUd6v8eAw.png"/></div></div></figure><p id="df44" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下载构建工具，运行。exe 文件，在安装过程中使用如下的 C++编译工具。一定要选择正确的物品。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/999a2bcc64dccbb218384e9ca298ba75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IgS9MjG_SpcduE6Ue4PEwQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae mb" href="https://docs.microsoft.com/en-us/answers/questions/136595/error-microsoft-visual-c-140-or-greater-is-require.html" rel="noopener ugc nofollow" target="_blank">这个网站</a></p></figure><p id="ef86" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这需要一点时间，在这个过程中喝水或走动。:-)</p><p id="2a4b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果构建工具安装正确，现在以正常方式安装 Matplotlib。</p><p id="2f9b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">运行 py 文件，你会得到如上的美丽图形。</p><p id="15d9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">外卖:</strong></p><ol class=""><li id="08cb" class="mc md it la b lb lc le lf lh me ll mf lp mg lt mh mi mj mk bi translated">我写这个故事是因为当我搜索解决方案时，大多数人提到安装它，但很少有人提到这个案例。是的，这可能是一种罕见的情况(想想 Anaconda 无法安装…)，但当它发生时，可能需要您花时间来解决它。希望这能让你想起这个案子。</li><li id="b53d" class="mc md it la b lb ml le mm lh mn ll mo lp mp lt mh mi mj mk bi translated">Microsoft Visual C++ build tool 是在 VSC 用 python 运行 Matplotlib 的先决条件的可能原因，我在下面找到了一个解释，但如果我错了，请随时纠正我。</li></ol><blockquote class="lu lv lw"><p id="57d0" class="ky kz lx la b lb lc ju ld le lf jx lg ly li lj lk lz lm ln lo ma lq lr ls lt im bi translated">Windows Python 需要通过 SDK 安装 Visual C++库来构建代码，比如通过<code class="fe nf ng nh mr b">setuptools.extension.Extension</code>或<code class="fe nf ng nh mr b">numpy.distutils.core.Extension</code>。例如，使用 Python 在 Windows 中构建<code class="fe nf ng nh mr b"><a class="ae mb" href="https://www.scivision.dev/tags/f2py" rel="noopener ugc nofollow" target="_blank">f2py</a></code>模块需要安装如上所述的 Visual C++ SDK。在 Linux 和 Mac 上，C++库随编译器一起安装。-<a class="ae mb" href="https://www.scivision.dev/python-windows-visual-c-14-required/" rel="noopener ugc nofollow" target="_blank">https://www . scivision . dev/python-windows-visual-c-14-required/</a></p></blockquote><p id="f645" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">谢谢你的时间。希望有助于解决你在 VSC 的 Matplotlib 问题。</p></div></div>    
</body>
</html>