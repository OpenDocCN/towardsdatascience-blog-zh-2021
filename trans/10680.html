<html>
<head>
<title>Beyond the Numbers with Python Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">蟒蛇熊猫的数量之外</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/beyond-the-numbers-with-python-pandas-38395e5cb87?source=collection_archive---------21-----------------------#2021-10-13">https://towardsdatascience.com/beyond-the-numbers-with-python-pandas-38395e5cb87?source=collection_archive---------21-----------------------#2021-10-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="708c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何处理文本数据？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/eb6339383028b4f2e8815f020986a137.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5ipY1hFf1aPrBK2f06V9Sw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">萨曼莎·加德斯在<a class="ae ky" href="https://unsplash.com/s/photos/simple?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="3550" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas是使用最广泛的Python库之一。它提供了许多功能和方法来执行有效的数据分析和操作。</p><p id="397b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们倾向于将表格数据与数字联系起来。然而，大量的原始数据是以文本形式出现的。幸运的是，Pandas有几种方法来处理文本数据。</p><p id="66c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">操作字符串的方法可以通过str访问器来访问。在本文中，我们将通过例子来探讨这些方法。</p><p id="4ccf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从用模拟数据创建一个样本数据框开始。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="1483" class="ma mb it lw b gy mc md l me mf">import pandas as pd</span><span id="1a10" class="ma mb it lw b gy mg md l me mf">df = pd.DataFrame({</span><span id="58e7" class="ma mb it lw b gy mg md l me mf">   "FirstName": ["Jane","john","Ashley", "MATT", "Alex"],<br/>   "LastName": ["Doe", "Smitt", "Adams", "Tull", "Morgan"],<br/>   "Address": ["Houston, TX", "Dallas, TX", "San Antonio, TX", <br/>            "Palo Alto, CA", "San Diego, CA"]</span><span id="ad0f" class="ma mb it lw b gy mg md l me mf">})</span><span id="5b71" class="ma mb it lw b gy mg md l me mf">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/0554f9a1375c53a5b8b1ab9999567b23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zojV3Zxx0ZKl1UnzP47pBw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><p id="0b4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们注意到的第一件事是名字中的字母不兼容。有大写字母也有小写字母。最好是标准格式的。</p><p id="a39b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以将它们全部转换成大写或小写。熊猫有两种操作方法。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="5f1d" class="ma mb it lw b gy mc md l me mf">df["FirstName"] = df["FirstName"].str.lower()</span><span id="d064" class="ma mb it lw b gy mg md l me mf">df["LastName"] = df["LastName"].str.lower()</span><span id="8d19" class="ma mb it lw b gy mg md l me mf">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/f2520f552fb8d4c59bc280a55dc7acc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eJOMhnoYlPEoNchs40OJgQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="7e00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过组合名字和姓氏来创建姓名列。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="e4b1" class="ma mb it lw b gy mc md l me mf">df.insert(2, <br/>          "Name", <br/>          df["FirstName"].str.cat(df["LastName"], sep=" "))</span><span id="ccec" class="ma mb it lw b gy mg md l me mf">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/646000347f1390ff3a5c1efa715bad7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8_cl5_L7xr72tTgyoqyq4w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="abd5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我使用了insert函数，能够在姓氏之后创建新的列。默认情况下，新列添加在末尾，但是插入允许在特定位置创建新列。</p><p id="9f9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">str访问器下的cat方法组合字符串。它用在insert函数的第三个参数中，我们在这里定义新列的值。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><p id="e613" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">字符串的另一个常见操作是拆分。在某些情况下，文本数据包含多条信息。例如,“地址”列包括城市和州名。我们可以通过拆分该列来提取城市或州的信息。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="8b99" class="ma mb it lw b gy mc md l me mf">df["State"] = df["Address"].str.split(",", expand=True)[1]</span><span id="5095" class="ma mb it lw b gy mg md l me mf">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mq"><img src="../Images/59b72c72ecd7cc44028dc7870a84bcb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W0aCglmckr8I2FbXG0cRNg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><p id="66e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在某些情况下，我们需要根据字符串过滤数据点(即行)。例如，我们可能对以字母j开头的名称或包含“TX”的地址感兴趣。</p><p id="63dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">startswith和endswith方法允许分别基于字符串的第一个或最后一个字母进行过滤。如果我们在一个字符串中搜索一个字符序列，那么可以使用contain方法。所有这些方法都可以在str访问器下使用。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="f0db" class="ma mb it lw b gy mc md l me mf">df[df["Name"].str.startswith("j")]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mq"><img src="../Images/b246076b36b0216f0f8957e287a8e98a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hw8Pq-04P4vVh8UUa66MdQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="82e1" class="ma mb it lw b gy mc md l me mf">df[df["Address"].str.contains("TX")]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mq"><img src="../Images/a5cbbf776f2f54309cf3640cc97e3013.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mPAzLpfz07b6mILdpv9aCA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="4c79" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">值得注意的是，startswith和endswith方法接受多个字符。因此，我们可以使用它们来过滤以字符序列开头或结尾的字符串。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><p id="3051" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">replace方法可用于替换字符串中的字符序列。让我们做一个例子来演示它是如何使用的。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3c5e" class="ma mb it lw b gy mc md l me mf">df["Address"] = df["Address"].str.replace("TX", "Texas")</span><span id="6188" class="ma mb it lw b gy mg md l me mf">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/1927b9763b7f2f771e25a0b55fbe40b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7g90VopF0U-x20sGOWJoQA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><p id="32ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">str访问器还可以用于对字符串进行索引。例如，我们可以用“str[:2]”表达式选择前两个字符，用“str[-2:]”表达式选择后两个字符。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/ff8ca72edc6227c4d5492142e1140cf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PKLeYyUn5SIEmDRed6z_Ew.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h2 id="96fa" class="ma mb it bd mt mu mv dn mw mx my dp mz li na nb nc lm nd ne nf lq ng nh ni nj bi translated">结论</h2><p id="b230" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">Pandas字符串方法组合在str访问器下。我们已经介绍了您可能会更经常使用的工具。</p><p id="9ca0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">文本数据拥有非常有价值的信息，将永远存在于我们的生活中。因此，学会如何操纵和处理它是非常重要的。</p><p id="1191" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>