<html>
<head>
<title>Discover the power of FILTER() in DAX</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">发现DAX中FILTER()的强大功能</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/discover-the-power-of-filter-in-dax-4bfeac3dd786?source=collection_archive---------3-----------------------#2021-11-22">https://towardsdatascience.com/discover-the-power-of-filter-in-dax-4bfeac3dd786?source=collection_archive---------3-----------------------#2021-11-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ab29" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">DAX中的FILTER()函数是强大的，但是它有一些复杂性。让我们深入研究这些细节，以便更好地理解FILTER()函数。</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/95233c66d8d5f1f029a5a678e58e4495.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JoGsNynVwYzAm-JT"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@nate_dumlao?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">内森·杜姆劳</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="fafb" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">介绍</h1><p id="52fa" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">大多数人都知道DAX中的FILTER()函数。</p><p id="fd47" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">但是，有可能你误用它或者没有使用这个功能的全部力量。</p><p id="932c" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">例如，前段时间，我看到一个类似这样的查询:</p><pre class="kk kl km kn gt mt mu mv mw aw mx bi"><span id="95d7" class="my lb it mu b gy mz na l nb nc">EVALUATE<br/>    SUMMARIZECOLUMNS(<br/>        ‘Product’[BrandName]<br/>        ,”Sales”, CALCULATE([Sum Online Sales]<br/>            ,FILTER(‘Product’<br/>            ,’Product’[ProductCategoryName] = “Computers”<br/>            )<br/>        )<br/>    )</span></pre><p id="3d27" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">虽然这个查询在语法上是正确的，但它不是最佳的。</p><p id="d5a0" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">在下图中，您可以看到来自DAX Studio的计时信息:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nd"><img src="../Images/844dc3fde97d621e55a4cf2d3218a5e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yLR_Qg3NsJySeiyibhvbNQ.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">图1 —使用过滤器的查询时间(按作者分类)</p></figure><p id="2091" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">一个更好的版本是这个:</p><pre class="kk kl km kn gt mt mu mv mw aw mx bi"><span id="81c7" class="my lb it mu b gy mz na l nb nc">EVALUATE<br/>    SUMMARIZECOLUMNS(<br/>        ‘Product’[BrandName]<br/>        ,”Sales”, CALCULATE([Sum Online Sales]<br/>            ,’Product’[ProductCategoryName] = “Computers”<br/>            )<br/>        )</span></pre><p id="46c5" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">这是DAX Studio中不带滤波器的服务器计时:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ne"><img src="../Images/a8a8d29fa18b24053016bfaf9b103211.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hc73kyrpJr5ue8VPv5Xweg.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">图2 —不使用过滤器的查询计时()(图由作者提供)</p></figure><p id="1747" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">当您查看SE CPU时间时，可以看到第二个查询在没有过滤的情况下几乎需要一半的处理时间。</p><p id="9475" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">而且，虽然第一个查询需要三个存储引擎操作才能完成，但第二个查询只需一个SE操作就可以处理。</p><p id="0e90" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">让我们看看为什么会发生这种情况，以及我们可以用FILTER()函数做些什么。</p><h1 id="48f7" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">到底什么是过滤器()</h1><p id="2adf" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">过滤函数是一个迭代器，就像SUMX和其他X函数一样。</p><p id="7df8" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">因此，您可以使用行上下文和上下文转换来释放FILTER()的全部功能。</p><p id="2866" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">如果您不熟悉DAX中的上下文转换，可以看看我关于这个主题的文章:</p><p id="0ddb" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated"><a class="ae kz" rel="noopener" target="_blank" href="/whats-fancy-about-context-transition-in-dax-efb5d5bc4c01">https://towards data science . com/whats-fancy-about-context-transition-in-DAX-efb 5d BC 4c 01</a></p><p id="7670" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">FILTER()是一个迭代器的事实解释了为什么当它与CALCULATE()或CALCULATETABLE()一起使用时，它比添加一个“普通”过滤器要慢，如上所示。</p><p id="30a8" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">但是，当您需要使用基于行的表达式或基于度量过滤数据时，您需要使用filter()。</p><p id="e770" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">另一个事实是FILTER()返回一个表。因此，您可以使用FILTER()生成过滤表，并在您的数据模型或度量中使用它们。</p><h1 id="4610" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">使用过滤器()创建DAX表</h1><p id="a1a8" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">因为FILTER()返回一个表，所以您可以使用它在Power BI中创建一个计算表或查询您的模型。或者，您可以使用函数在模型中创建一个计算表。</p><p id="fa9d" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">以下查询显示了一个使用FILTER查询表并筛选结果的示例:</p><pre class="kk kl km kn gt mt mu mv mw aw mx bi"><span id="9342" class="my lb it mu b gy mz na l nb nc">EVALUATE<br/> FILTER(Store<br/>        ,Store[StoreType] &lt;&gt; “Store”<br/>        )</span></pre><p id="5404" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">作为迭代器，您可以使用行上下文来过滤结果:</p><pre class="kk kl km kn gt mt mu mv mw aw mx bi"><span id="04d6" class="my lb it mu b gy mz na l nb nc">EVALUATE<br/> FILTER(‘Online Sales’<br/>   ,’Online Sales’[UnitPrice] * ‘Online Sales’[SalesQuantity] &gt; 1000<br/>   )</span></pre><p id="cf26" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">当然，这是一个非常昂贵的查询，因为必须对在线销售表中的每一行执行两列的乘法。但是它可以完全由存储引擎运行，因此可以使用所有可用的CPU内核，这使得这种方法非常高效。</p><p id="df0e" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">虽然存储引擎(SE)可以在多个CPU核心上处理数据，但公式引擎(FE)每次查询只能使用一个CPU核心。因此，无论什么可以由SE处理，都比用FE处理更有效。</p><p id="6610" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">接下来，我们可以使用上下文转换来查找销售额超过1，000，000的商店:</p><pre class="kk kl km kn gt mt mu mv mw aw mx bi"><span id="d19a" class="my lb it mu b gy mz na l nb nc">EVALUATE<br/> FILTER(Store<br/>        ,[Sum Retail Sales] &gt; 1000000<br/>        )</span></pre><p id="7676" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">正如我们将在下一节中看到的那样，使用度量来过滤表的可能性对于计算结果是很方便的。</p><p id="f0e8" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">但是，这些查询总是返回筛选表中的所有列。如果我只想检索列的子集，该怎么办？</p><p id="bc3b" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">在这种情况下，我可以使用表函数只获取我感兴趣的列。</p><p id="2265" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">例如:</p><pre class="kk kl km kn gt mt mu mv mw aw mx bi"><span id="98da" class="my lb it mu b gy mz na l nb nc">EVALUATE<br/>    FILTER(SUMMARIZECOLUMNS(Store[StoreType]<br/>                            ,Store[StoreName]<br/>                            ,Store[StoreManager])<br/>             ,[Sum Retail Sales] &gt; 1000000<br/>             )</span></pre><p id="66ac" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">下面是上面查询的结果:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nf"><img src="../Images/64feb21dbb565a38f22de75778bbd134.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hXDOqq54r3OaE-dEzohUIw.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">图3 —带列选择的查询(作者提供的图)</p></figure><p id="24d8" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">FILTER()接受所有表函数作为第一个参数。</p><h1 id="6990" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">在CALCULATE()和CALCULATETABLE()中使用</h1><p id="1734" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">CALCULATE()和CALCULATETABLE()接受表作为筛选参数。</p><p id="0a83" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">由于这个事实，您可以使用FILTER()生成一个表，并使用这种机制修改测量的结果。</p><p id="f072" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">查看以下带有度量值[大型商店]的查询:</p><pre class="kk kl km kn gt mt mu mv mw aw mx bi"><span id="ffed" class="my lb it mu b gy mz na l nb nc">DEFINE<br/> MEASURE ‘All Measures’[Large Stores] =<br/>          CALCULATE([Sum Retail Sales]<br/>                     ,FILTER(Store<br/>                             ,[Sum Retail Sales] &gt; 100000000<br/>                             )<br/>                     )<br/> <br/> EVALUATE<br/> CALCULATETABLE(<br/>                SUMMARIZECOLUMNS(Store[StoreName]<br/>                      ,”Sales”, [Sum Retail Sales]<br/>                      ,”Is large Store”, IF([Large Stores]&gt;0<br/>                                              ,TRUE(), FALSE())<br/>                      )<br/>                      ,’Date’[Year] = 2020<br/>                )<br/> ORDER BY [Is large Store] DESC, [Sum Retail Sales] DESC</span></pre><p id="ab25" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">该查询旨在查找2020年销售额超过100，000，000美元(美元、€或其他金额)的所有商店。</p><p id="37d3" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">查询结果见下图:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/0a53c22da8e19e5764011ac85ce9a0f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*9FmiuLAQ9XeJMyf-SKKeuw.png"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">图4 —使用过滤器()的测量结果(由作者提供)</p></figure><p id="b9fb" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">让我们分析一下这里发生了什么:</p><ol class=""><li id="5981" class="nh ni it lu b lv mo ly mp mb nj mf nk mj nl mn nm nn no np bi translated">该查询使用SUMMARIZECOLUMNS()生成所有商店的列表</li><li id="900b" class="nh ni it lu b lv nq ly nr mb ns mf nt mj nu mn nm nn no np bi translated">CALCULATETABLE()用于添加2020年的过滤器</li><li id="7491" class="nh ni it lu b lv nq ly nr mb ns mf nt mj nu mn nm nn no np bi translated">我调用[零售总额]度量来获得2020年每家商店的销售额</li><li id="73ec" class="nh ni it lu b lv nq ly nr mb ns mf nt mj nu mn nm nn no np bi translated">我调用度量[大型商店]并检查结果是否大于0 <br/> a。如果是，我返回TRUE() <br/> b。如果不是，我返回FALSE()</li></ol><p id="6ee3" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">该度量使用现有的筛选器上下文来计算结果。过滤器上下文包含2020年的过滤器。</p><p id="70db" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">FILTER()函数在评估销售额超过100，000，000的商店列表时会考虑此筛选器。<br/> FILTER()返回高于阈值的商店列表。</p><p id="d5d8" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">CALCULATE()仅对这些商店执行[零售总额]的计算，因为FILTER()的结果用作度量值中的筛选修饰符。<br/>因此我们可以在查询中使用一个check，像IF(【大型商店】&gt; 0，TRUE()，FALSE())，来生成期望的输出。</p><h1 id="0279" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">注意上下文转换</h1><p id="6c51" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">当您使用FILTER()时，上下文转换是一个重要的主题。</p><p id="cb38" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">假设我们想要过滤我们的销售交易，以便只获得值为1000或更大的行。</p><p id="f151" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">您可能想使用FILTER()来构造一个表，并将这个表用作SUMX()的源:</p><pre class="kk kl km kn gt mt mu mv mw aw mx bi"><span id="f8e1" class="my lb it mu b gy mz na l nb nc">Large Sales Amount =</span><span id="2bf6" class="my lb it mu b gy nv na l nb nc">SUMX(<br/>    FILTER(<br/>           ‘Retail Sales’<br/>  ,’Retail Sales’[SalesQuantity] * ‘Retail Sales’[UnitPrice] &gt;= 1000<br/>  )<br/>  ,[Sum Retail Sales]<br/> )</span></pre><p id="7737" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">这里，我使用FILTER()生成一个高于上述阈值的事务列表。</p><p id="b0ac" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">虽然结果可能是正确的，但我通过调用SUMX中的[零售总额]度量来触发上下文转换。</p><p id="0799" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">更好更快的方法是以下措施:</p><pre class="kk kl km kn gt mt mu mv mw aw mx bi"><span id="ca7f" class="my lb it mu b gy mz na l nb nc">Large Sales Amount =</span><span id="6481" class="my lb it mu b gy nv na l nb nc">CALCULATE (<br/> [Sum Retail Sales],<br/>   FILTER (<br/>           ALL ( ‘Retail Sales’[SalesQuantity]<br/>                 ,‘Retail Sales’[UnitPrice] ),<br/>   ‘Retail Sales’[SalesQuantity] * ‘Retail Sales’[UnitPrice] &gt;= 1000<br/>   )<br/> )</span></pre><p id="b03b" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">在这里，我使用CALCULATE()中的度量，并使用FILTER()在“OnlineSales”表上应用一个过滤器来计算所需的结果。</p><p id="346c" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">性能上的差异非常明显，如下图所示:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nw"><img src="../Images/a6399f3925a46d7c2bde6efaf6f082ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hb6FITWHMtohvAwTYz2wsw.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">图5 —好的与坏的过滤器()使用的比较(作者提供的图表)</p></figure><p id="396b" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">第一个度量显示了第一个度量的计时和查询计划，使用SUMX()和FILTER()。在下面，您可以看到第二个测量的计时使用了CALCULATE()和FILTER()。</p><p id="0f1d" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">原因在查询计划中是显而易见的，您可以看到查询处理了1'451'337行两次。此外，还执行了两个CallbackDataID步骤，在公式和存储引擎之间推送数据。这些操作非常昂贵。</p><h1 id="0a3c" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">结论</h1><p id="6144" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">FILTER()函数对于DAX工具箱来说是必不可少的。</p><p id="ce45" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">您需要了解他的能力以及使用该功能时的潜在问题。</p><p id="c70e" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">但是，它给了你很多增强DAX表达的机会。</p><p id="1ef9" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">总结一下:</p><ul class=""><li id="3fef" class="nh ni it lu b lv mo ly mp mb nj mf nk mj nl mn nx nn no np bi translated">FILTER()是迭代器</li><li id="00f5" class="nh ni it lu b lv nq ly nr mb ns mf nt mj nu mn nx nn no np bi translated">FILTER()返回一个表格</li><li id="1e34" class="nh ni it lu b lv nq ly nr mb ns mf nt mj nu mn nx nn no np bi translated">可以在CALCULATE()中使用FILTER()来设置过滤器上下文</li><li id="41ad" class="nh ni it lu b lv nq ly nr mb ns mf nt mj nu mn nx nn no np bi translated">您可以在FILTER()中使用上下文转换</li><li id="d03b" class="nh ni it lu b lv nq ly nr mb ns mf nt mj nu mn nx nn no np bi translated">如果使用不当，可能会降低DAX表达式的速度</li></ul><p id="c249" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">一旦您正确理解了这个函数，您就可以开始在正确的地方使用它，并释放FILTER()的全部威力。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ny"><img src="../Images/63aac2482eb26cfd0f509568fa9b40d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-p3cvM3c-Bosb4Rj"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae kz" href="https://unsplash.com/@davidprspctive?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">大卫·苏亚雷斯</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h1 id="0841" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">参考</h1><p id="6ae1" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">FILTER()函数在本页描述:<a class="ae kz" href="https://dax.guide/filter/" rel="noopener ugc nofollow" target="_blank">过滤器— DAX指南</a></p><p id="dccc" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">这个页面有一个嵌入的视频，有更多的信息和例子。</p><p id="73fa" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">关于在CALCULATE()中使用FILTER()时应避免的信息，可在此处找到:<a class="ae kz" href="https://docs.microsoft.com/en-us/dax/best-practices/dax-avoid-avoid-filter-as-filter-argument" rel="noopener ugc nofollow" target="_blank">避免在DAX中使用FILTER作为筛选参数— DAX | Microsoft Docs </a></p><p id="0985" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我使用Contoso样本数据集，就像我以前的文章一样。你可以从微软<a class="ae kz" href="https://www.microsoft.com/en-us/download/details.aspx?id=18279" rel="noopener ugc nofollow" target="_blank">这里</a>免费下载ContosoRetailDW数据集。</p><p id="b261" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">Contoso数据可以在MIT许可下自由使用，如这里的<a class="ae kz" href="https://github.com/microsoft/Power-BI-Embedded-Contoso-Sales-Demo" rel="noopener ugc nofollow" target="_blank">所述</a>。</p><p id="ef39" class="pw-post-body-paragraph ls lt it lu b lv mo ju lx ly mp jx ma mb mq md me mf mr mh mi mj ms ml mm mn im bi translated">我扩大了数据集，使DAX引擎工作更努力。<br/>在线销售表包含6300万行(而不是1260万行)，零售表包含1550万行(而不是340万行)。</p><div class="nz oa gp gr ob oc"><a href="https://medium.com/@salvatorecagliari/membership" rel="noopener follow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">通过我的推荐链接加入Medium-Salvatore Cagliari</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">medium.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq kt oc"/></div></div></a></div></div></div>    
</body>
</html>