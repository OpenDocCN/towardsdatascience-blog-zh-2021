<html>
<head>
<title>12 Essential Docker Commands You Should Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你应该知道的12个基本Docker命令</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/12-essential-docker-commands-you-should-know-c2d5a7751bb5?source=collection_archive---------1-----------------------#2021-07-25">https://towardsdatascience.com/12-essential-docker-commands-you-should-know-c2d5a7751bb5?source=collection_archive---------1-----------------------#2021-07-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="514e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">简化您的软件开发</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/96bc66f918d4025b0677d40587a67921.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BUKlXfwpbbgQQhYK"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@aronyigin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Aron Yigin </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="fb8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">ocker已经成为软件工程不可或缺的一部分。我们使用Docker进行开发、测试和部署，因为它易于管理环境。由于它的可移植性，它在软件行业变得流行起来。这意味着如果你的代码在开发中有效，它将在生产中有效。此外，开发人员可以更快地协作，而不必担心他们需要安装哪个软件依赖项。</p><p id="7b48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将介绍12个基本的docker命令，它们将帮助你在Docker的神奇世界中导航。你可以从Docker的<a class="ae ky" href="https://docs.docker.com/engine/reference/commandline/docker/" rel="noopener ugc nofollow" target="_blank">文档</a>页面找到这些命令的官方文档。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="396d" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">1.docker搜索</h1><p id="1640" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">我们可以使用命令<code class="fe ni nj nk nl b">docker search</code>在Docker hub上搜索公共图像。它将返回有关图像名称，描述，明星，官方和自动化的信息。</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="72b4" class="nq mm it nl b be nr ns l nt nu">docker search MySQL</span></pre><p id="7708" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢基于图形用户界面的搜索选项，使用Docker Hub <a class="ae ky" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank">网站</a>。</p><h1 id="906e" class="ml mm it bd mn mo nv mq mr ms nw mu mv jz nx ka mx kc ny kd mz kf nz kg nb nc bi translated">2.码头工人拉动</h1><p id="5227" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">现在我们知道了图像的名称，我们可以使用命令<code class="fe ni nj nk nl b">docker pull</code>从Docker hub中提取它。这里，我们还设置了平台选项。</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="2418" class="nq mm it nl b be nr ns l nt nu">docker pull --platform linux/x86_64 mysql</span></pre><p id="8ed0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">标签用于识别存储库中的图像。如果我们不指定标签，Docker引擎默认使用<code class="fe ni nj nk nl b">:latest</code>标签。所以，在前面的例子中，Docker提取了<code class="fe ni nj nk nl b">mysql:latest</code>图像。</p><p id="bebe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们的应用程序依赖于图像的特定版本，我们可以使用标记名来指定。</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="2c81" class="nq mm it nl b be nr ns l nt nu">docker pull --platform linux/arm64/v8 mysql:5.6</span></pre><p id="42de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们可以在一个存储库中有多个图像，所以我们可以使用<code class="fe ni nj nk nl b">--all-tags</code>选项提取所有的图像。以下命令将从mysql存储库中提取所有图像。</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="4de1" class="nq mm it nl b be nr ns l nt nu">docker pull --all-tags mysql</span></pre><h1 id="ce0d" class="ml mm it bd mn mo nv mq mr ms nw mu mv jz nx ka mx kc ny kd mz kf nz kg nb nc bi translated">3.docker图像</h1><p id="1c28" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">太棒了，现在我们的本地机器上应该有一些图像了，为了确认，让我们运行下面的命令来列出所有的本地图像。</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="ea00" class="nq mm it nl b be nr ns l nt nu">docker images</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/138ef15c9883d963d3b44cdda91cf921.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k2Msd7uF9xVv7KwSyo5TPg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">docker图像</p></figure><p id="fad5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我的例子中，我有两个在上一步中下载的图像。</p><h1 id="564f" class="ml mm it bd mn mo nv mq mr ms nw mu mv jz nx ka mx kc ny kd mz kf nz kg nb nc bi translated">4.码头运行</h1><p id="dea7" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">好了，现在我们有了一些图像，我们可以试着创建一个容器。这里我们使用了<code class="fe ni nj nk nl b">--env</code>选项来设置一个强制的环境变量，使用<code class="fe ni nj nk nl b">--detach</code>选项来在后台运行容器。</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="84c4" class="nq mm it nl b be nr ns l nt nu">docker run --env MYSQL_ROOT_PASSWORD=my-secret-pw --detach mysql</span></pre><p id="e3fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，我们可以使用<code class="fe ni nj nk nl b">--name</code>选项为容器指定一个名称。如果我们不提供名称，Docker会随机分配一个名称。</p><h1 id="00c8" class="ml mm it bd mn mo nv mq mr ms nw mu mv jz nx ka mx kc ny kd mz kf nz kg nb nc bi translated">5.docker ps</h1><p id="49a0" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">我们可以使用以下命令列出所有正在运行的容器。</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="9c7e" class="nq mm it nl b be nr ns l nt nu">docker ps</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/bb51a79ca5bd95306e1ff88a57e5c615.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*59bf_TESay2CtgyVe3PD2g.png"/></div></div></figure><p id="ce22" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">把所有的集装箱都列出来，包括停止的，怎么样？我们可以通过添加<code class="fe ni nj nk nl b">--all</code>选项来实现。</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="47f3" class="nq mm it nl b be nr ns l nt nu">docker ps --all</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/4e14ab10ae586c165f75fbdb4264cf4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mdHKPk0EAbh6OiJD12jH_g.png"/></div></div></figure><h1 id="c5b2" class="ml mm it bd mn mo nv mq mr ms nw mu mv jz nx ka mx kc ny kd mz kf nz kg nb nc bi translated">6.码头停车</h1><p id="905e" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">要停止一个容器，使用带有容器id或容器名称的<code class="fe ni nj nk nl b">docker stop</code>命令。如果我们想改变docker运行命令，我们可以停止一个容器。</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="e9de" class="nq mm it nl b be nr ns l nt nu">docker stop f8c52bedeecc</span></pre><h1 id="35db" class="ml mm it bd mn mo nv mq mr ms nw mu mv jz nx ka mx kc ny kd mz kf nz kg nb nc bi translated">7.docker重启</h1><p id="9898" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">让我们使用下面的命令重新启动停止的容器。我们可能需要在重启机器后使用它。</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="3eb9" class="nq mm it nl b be nr ns l nt nu">docker restart f8c52bedeecc</span></pre><h1 id="eb6d" class="ml mm it bd mn mo nv mq mr ms nw mu mv jz nx ka mx kc ny kd mz kf nz kg nb nc bi translated">8.docker重命名</h1><p id="75aa" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">现在，让我们将集装箱名称从<code class="fe ni nj nk nl b">compassionate_fermi</code>改为<code class="fe ni nj nk nl b">test_db</code>。我们可能希望更改名称，以便更容易地跟踪我们的容器。</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="2412" class="nq mm it nl b be nr ns l nt nu">docker rename compassionate_fermi test_db</span></pre><h1 id="9994" class="ml mm it bd mn mo nv mq mr ms nw mu mv jz nx ka mx kc ny kd mz kf nz kg nb nc bi translated">9.码头经理</h1><p id="7b7e" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">通过运行以下命令来访问正在运行的容器<code class="fe ni nj nk nl b">test_db</code>。如果我们想访问MySQL命令行并执行MySQL查询，这很有帮助。</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="fe22" class="nq mm it nl b be nr ns l nt nu">docker exec -it test_db bash<br/>mysql -uroot -pmy-secret-pw<br/>SHOW DATABASES;</span></pre><p id="b776" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ni nj nk nl b">-i and -t</code>选项用于在交互模式下访问容器。然后我们提供想要访问的容器的名称，在本例中是<code class="fe ni nj nk nl b">test_db</code>。最后，<code class="fe ni nj nk nl b">bash</code>命令用于获取容器内部的bash shell。</p><h1 id="8440" class="ml mm it bd mn mo nv mq mr ms nw mu mv jz nx ka mx kc ny kd mz kf nz kg nb nc bi translated">10.码头日志</h1><p id="5743" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">这个命令有助于调试我们的Docker容器。它将从指定的容器中获取日志。</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="9883" class="nq mm it nl b be nr ns l nt nu">docker logs test_db</span></pre><p id="63ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们想继续流式传输新的输出，我们可以使用选项<code class="fe ni nj nk nl b">-follow</code>。</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="bd33" class="nq mm it nl b be nr ns l nt nu">docker logs -follow test_db</span></pre><h1 id="e877" class="ml mm it bd mn mo nv mq mr ms nw mu mv jz nx ka mx kc ny kd mz kf nz kg nb nc bi translated">11.码头工人室</h1><p id="f34d" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">如果我们想删除一个容器，我们可以使用下面的命令。</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="f681" class="nq mm it nl b be nr ns l nt nu">docker rm test_db</span></pre><p id="3c95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能会遇到类似这样的错误</p><blockquote class="od oe of"><p id="df86" class="kz la og lb b lc ld ju le lf lg jx lh oh lj lk ll oi ln lo lp oj lr ls lt lu im bi translated">来自守护程序的错误响应:您无法删除正在运行的容器……在尝试删除或强制删除之前停止该容器</p></blockquote><p id="f52e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如它所建议的，我们可以先停止容器，然后移除它，或者使用选项<code class="fe ni nj nk nl b">-f</code>来强制移除正在运行的容器。</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="55ac" class="nq mm it nl b be nr ns l nt nu">docker stop test_db<br/>docker rm test_db<br/># or<br/>docker rm -f test_db</span></pre><h1 id="7984" class="ml mm it bd mn mo nv mq mr ms nw mu mv jz nx ka mx kc ny kd mz kf nz kg nb nc bi translated">12.码头工人rmi</h1><p id="e20f" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">最后，如果我们想释放一些磁盘空间，我们可以使用带有映像id的<code class="fe ni nj nk nl b">docker rmi</code>命令来删除一个映像。</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="fe21" class="nq mm it nl b be nr ns l nt nu">docker rmi eb0e825dc3cf</span></pre></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><p id="a2a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些命令带有大量有用的选项。如果您想了解其他可用选项，运行<code class="fe ni nj nk nl b">docker command_name --help</code>命令。例如:</p><pre class="kj kk kl km gt nm nl nn bn no np bi"><span id="75d5" class="nq mm it nl b be nr ns l nt nu">docker logs --help</span></pre><p id="52ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我几乎每天都用Docker进行开源开发。它允许其他人轻松地为项目做贡献，而不用担心如何运行项目。希望这12个Docker命令能帮助你入门Docker。如果你想了解更多关于Docker的知识，那么看看下面的文章。编码快乐！</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="23e6" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">相关职位</h1><div class="ok ol gp gr om on"><a rel="noopener follow" target="_blank" href="/how-to-mount-a-directory-inside-a-docker-container-4cee379c298b"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">如何在Docker容器中挂载目录</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">专注于编写代码，无需担心环境管理</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">towardsdatascience.com</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb ks on"/></div></div></a></div><div class="ok ol gp gr om on"><a rel="noopener follow" target="_blank" href="/the-complete-guide-to-docker-volumes-1a06051d2cce"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">Docker卷完全指南</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">了解docker卷的基础知识</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">towardsdatascience.com</p></div></div><div class="ow l"><div class="pc l oy oz pa ow pb ks on"/></div></div></a></div></div></div>    
</body>
</html>