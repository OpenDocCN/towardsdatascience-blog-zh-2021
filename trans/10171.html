<html>
<head>
<title>The Quick Guide To Making Your Own Dataset With Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python制作自己的数据集的快速指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-quick-guide-to-making-your-own-dataset-with-python-a28ae9f7f488?source=collection_archive---------15-----------------------#2021-09-26">https://towardsdatascience.com/the-quick-guide-to-making-your-own-dataset-with-python-a28ae9f7f488?source=collection_archive---------15-----------------------#2021-09-26</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="a32b" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">使用Google Sheets API和Streamlit从您的用户那里收集和存储数据</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/90c0fde88f162db99631c8f5b495f202.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ChBViySXhW0AQ37T"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@marcusloke?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马库斯·洛克</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h2 id="c176" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">你有没有想过从你的用户那里收集数据并试图建立你自己的数据集有多难？</h2><p id="3df4" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在本文中，我介绍了一个简单的数据收集过程，您可以将它应用到您自己的用例中，并轻松地收集和存储数据，所有这些都在一个小时之内完成。</p><p id="e5ea" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">我们使用<a class="ae kz" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ly iv"> Streamlit </strong> </a>构建网页来托管我们的数据收集用户界面，然后使用<a class="ae kz" href="https://developers.google.com/sheets/api/reference/rest?apix=true" rel="noopener ugc nofollow" target="_blank"><strong class="ly iv">Google Sheets API</strong></a>以及一个很酷的Python包来存储用户输入的数据。</p><p id="f9dc" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">我们开始吧👇</p><h1 id="7bba" class="mu lb iu bd lc mv mw mx lf my mz na li ka nb kb lm kd nc ke lq kg nd kh lu ne bi translated">第一步—构建用户界面</h1><p id="562f" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">Streamlit是一个简洁的Python工具，可以轻松启动交互式、美观大方的web应用程序。您可以用一行代码安装:</p><pre class="kk kl km kn gu nf ng nh ni aw nj bi"><span id="2020" class="la lb iu ng b gz nk nl l nm nn">pip install streamlit</span></pre><p id="393e" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">现在，我们可以开始制作一个脚本，在我们的网页中包含一些文本和其他数据收集部件！</p><blockquote class="no np nq"><p id="1606" class="lw lx nr ly b lz mp jv mb mc mq jy me ns mr mg mh nt ms mj mk nu mt mm mn mo in bi translated">如果你是Streamlit的新手，我有一个简单的入门指南，可以帮助你快速上手。文章在这里。你可以在读完那篇文章后再来看这篇文章，或者你也可以跟着这里，因为它不会太高级。</p></blockquote><p id="7bf4" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">在创建一个新文件<code class="fe nv nw nx ng b">app.py</code>之后，让我们开始为我们的页面添加一个标题:</p><pre class="kk kl km kn gu nf ng nh ni aw nj bi"><span id="3bd5" class="la lb iu ng b gz nk nl l nm nn">st.title(‘My Wholesome Data Capture Project’)</span></pre><p id="c302" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">然后，你可以包括一些你想为你的用户做的事情的描述:</p><pre class="kk kl km kn gu nf ng nh ni aw nj bi"><span id="eadd" class="la lb iu ng b gz nk nl l nm nn">st.write("My app wants to collect data from you about...")</span></pre><p id="795b" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">接下来，您可以开始使用简单的小部件收集用户输入，例如:</p><pre class="kk kl km kn gu nf ng nh ni aw nj bi"><span id="027f" class="la lb iu ng b gz nk nl l nm nn">st.subheader('Add a new item') <br/>name = st.text_input('Enter the item name') # to collect text input</span></pre><p id="929c" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated"><em class="nr">你有各种各样的小部件可以选择，比如选择框、文本区、滑块、文件选择器等等，我在我的文章</em> <a class="ae kz" rel="noopener" target="_blank" href="/a-guide-to-streamlit-frontend-for-data-science-made-simpler-c6dda54e3183"> <em class="nr">中已经提到了其中的大部分。</em></a></p><p id="339c" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">一旦您满意地构建了它们，就可以开始启动您的streamlit服务器了:</p><pre class="kk kl km kn gu nf ng nh ni aw nj bi"><span id="4601" class="la lb iu ng b gz nk nl l nm nn">streamlit run app.py</span></pre><p id="c9cd" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">现在，您应该能够通过导航到<code class="fe nv nw nx ng b">localhost:8000</code>在浏览器中看到输出！</p><h1 id="1948" class="mu lb iu bd lc mv mw mx lf my mz na li ka nb kb lm kd nc ke lq kg nd kh lu ne bi translated">将Google Sheets API连接到我们的应用程序</h1><p id="15a1" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">将应用程序连接到Google Sheets以收集数据有两个步骤。</p><ol class=""><li id="8255" class="ny nz iu ly b lz mp mc mq lj oa ln ob lr oc mo od oe of og bi translated">从您的Google Cloud控制台启用API:<a class="ae kz" href="https://console.cloud.google.com/marketplace/product/google/sheets.googleapis.com" rel="noopener ugc nofollow" target="_blank">转到此链接</a>并选择启用Google Sheets API。</li></ol><p id="15e3" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">窗口应该如下所示:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oh"><img src="../Images/f4f179dc2f16ca85f115adb3f0bdf88f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6LSCvn2k-qFm_o8u5UtnQQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">启用工作表API</p></figure><ol class=""><li id="c88b" class="ny nz iu ly b lz mp mc mq lj oa ln ob lr oc mo od oe of og bi translated">点击<strong class="ly iv">启用</strong>。如果你还没有在谷歌云控制台中创建新项目，现在就开始吧。</li><li id="3d1b" class="ny nz iu ly b lz oi mc oj lj ok ln ol lr om mo od oe of og bi translated">接下来，点击<strong class="ly iv">凭证</strong>，然后<strong class="ly iv">创建一个API密钥</strong>。</li><li id="af43" class="ny nz iu ly b lz oi mc oj lj ok ln ol lr om mo od oe of og bi translated">按下服务账户上方的<strong class="ly iv">管理服务账户</strong>。</li><li id="ee62" class="ny nz iu ly b lz oi mc oj lj ok ln ol lr om mo od oe of og bi translated">点击最近创建的服务账户旁边的<strong class="ly iv"> ⋮ </strong>按钮，选择<strong class="ly iv">管理密钥</strong>，然后点击<strong class="ly iv">添加密钥</strong> → <strong class="ly iv">创建新密钥</strong>。</li><li id="2362" class="ny nz iu ly b lz oi mc oj lj ok ln ol lr om mo od oe of og bi translated">选择<strong class="ly iv"> JSON </strong>键类型，点击<strong class="ly iv">创建</strong>。</li></ol><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj on"><img src="../Images/17ae6fcdd649d7a0f2d11f642adcd119.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LN6sSUBVKAbMaPtAKZyAJg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">为您的服务帐户创建JSON密钥</p></figure><p id="1ad2" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">您现在可以下载一个json文档，其中包含您连接到Streamlit Python应用程序到Google Sheets应用程序的所有服务帐户凭据。</p><p id="a0f7" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">暂时将其保存在您的项目文件夹中。</p><h1 id="3429" class="mu lb iu bd lc mv mw mx lf my mz na li ka nb kb lm kd nc ke lq kg nd kh lu ne bi translated">最后一步—安装gspread</h1><p id="6aab" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated"><a class="ae kz" href="https://docs.gspread.org/en/v4.0.1/index.html" rel="noopener ugc nofollow" target="_blank">这个很酷的python库</a>使得Google Sheets更容易集成到我们的Python应用程序中。安装简单:</p><pre class="kk kl km kn gu nf ng nh ni aw nj bi"><span id="1aa5" class="la lb iu ng b gz nk nl l nm nn">pip install gspread</span></pre><p id="f62a" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">你可以在浏览器中打开一个新的谷歌表单，并启用链接共享。这很重要，因为它允许sheets API将数据写入电子表格。</p><p id="8a86" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">现在，我们可以将电子表格与我们的streamlit应用程序连接起来。</p><p id="f482" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">进入<strong class="ly iv"> app.py </strong>，写一个名为'<code class="fe nv nw nx ng b"><strong class="ly iv">save_into_csv</strong></code>'的新函数！</p><pre class="kk kl km kn gu nf ng nh ni aw nj bi"><span id="9edd" class="la lb iu ng b gz nk nl l nm nn">import gspread</span><span id="25f8" class="la lb iu ng b gz oo nl l nm nn">def save_into_csv(name, author, link, pair, summ):    <br/>    gc = gspread.service_account(filename='credentials.json')     <br/>    sh = gc.open_by_url('your google sheet url')    <br/>    worksheet = sh.get_worksheet(0)</span></pre><p id="4e3f" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">在这里，确保您的来自Sheets API的<strong class="ly iv"> credentials.json </strong>与您的<strong class="ly iv"> app.p </strong> y文件在同一个目录中。</p><p id="87c9" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">现在，您可以开始将用户捕获的输入数据写入电子表格:</p><pre class="kk kl km kn gu nf ng nh ni aw nj bi"><span id="0911" class="la lb iu ng b gz nk nl l nm nn">worksheet.append_row([your user input items])</span></pre><blockquote class="no np nq"><p id="f6be" class="lw lx nr ly b lz mp jv mb mc mq jy me ns mr mg mh nt ms mj mk nu mt mm mn mo in bi translated">如果你愿意，在使用这个应用程序之前，确保先在你的电子表格中设置列标题！这样，所有捕获的用户数据都将保存到您定义的列标题下的相应列中。</p></blockquote><p id="8698" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">另外，向用户显示提交的信息可能也是一个好主意。您可以使用Streamlit键入一条消息，如下所示:</p><pre class="kk kl km kn gu nf ng nh ni aw nj bi"><span id="d0a0" class="la lb iu ng b gz nk nl l nm nn">st.write('Submitted to database!')</span></pre><h1 id="035d" class="mu lb iu bd lc mv mw mx lf my mz na li ka nb kb lm kd nc ke lq kg nd kh lu ne bi translated">结束…</h1><p id="318a" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">这就是全部的代价！您已经准备好收集您的用户数据并创建自己的数据集了！:D</p><p id="6433" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">我希望这篇教程是有用的，并且你现在能够更深入地研究Sheets API和gspread库的一些细微差别。如果你想探索的话，还有很多，在这个初学者项目之后，你应该准备好去做了！</p></div><div class="ab cl op oq hy or" role="separator"><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou"/></div><div class="in io ip iq ir"><p id="d699" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">喜欢我的文章吗？成为 <a class="ae kz" href="https://ipom.medium.com/membership" rel="noopener"> <em class="nr">中等会员</em> </a> <em class="nr">继续无限制学习。如果你使用那个链接，我会收取你一部分会员费，不需要你额外付费。这将帮助我支持我的写作努力:)</em></p><p id="4ad3" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">如果你喜欢读我的书，也可以考虑跟着我读。</p><p id="60ec" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">在这个库中还有我从我的文章<a class="ae kz" href="https://github.com/yashprakash13/data-another-day" rel="noopener ugc nofollow" target="_blank">中收集的令人惊叹的数据科学资源。去看看！</a></p></div><div class="ab cl op oq hy or" role="separator"><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou"/></div><div class="in io ip iq ir"><p id="94cb" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">我的几篇文章你可能也想看看:</p><div class="ow ox gq gs oy oz"><a rel="noopener follow" target="_blank" href="/the-reusable-python-logging-template-for-all-your-data-science-apps-551697c8540"><div class="pa ab fp"><div class="pb ab pc cl cj pd"><h2 class="bd iv gz z fq pe fs ft pf fv fx it bi translated">适用于所有数据科学应用的可重复使用的Python日志模板</h2><div class="pg l"><p class="bd b dl z fq pe fs ft pf fv fx dk translated">towardsdatascience.com</p></div></div><div class="ph l"><div class="pi l pj pk pl ph pm kt oz"/></div></div></a></div><div class="ow ox gq gs oy oz"><a rel="noopener follow" target="_blank" href="/the-nice-way-to-use-docker-with-vscode-f475c49aab1b"><div class="pa ab fp"><div class="pb ab pc cl cj pd"><h2 class="bd iv gz z fq pe fs ft pf fv fx it bi translated">将Docker与VSCode结合使用的好方法</h2><div class="pg l"><p class="bd b dl z fq pe fs ft pf fv fx dk translated">towardsdatascience.com</p></div></div><div class="ph l"><div class="pn l pj pk pl ph pm kt oz"/></div></div></a></div></div></div>    
</body>
</html>