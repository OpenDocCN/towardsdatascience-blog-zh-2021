<html>
<head>
<title>Survival Analysis: Force of Mortality in Bathtub-Shaped Lifetimes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">生存分析:浴盆形寿命中死亡率的力量</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/force-of-mortality-in-bathtub-shaped-lifetimes-b0425cb66925?source=collection_archive---------22-----------------------#2021-11-08">https://towardsdatascience.com/force-of-mortality-in-bathtub-shaped-lifetimes-b0425cb66925?source=collection_archive---------22-----------------------#2021-11-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2e18" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Python 中的参数生存分析简介</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/fd75d914fc0ad809db5fccdd05fe235e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*uce8x7XnAf86ciDrDY8IkQ.jpeg"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">墨西哥万圣节亡灵节 Pixabay 上的免费照片</p></figure><p id="452f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">本教程将介绍<strong class="kx iu">生存分析</strong>及其广泛的范围。生存分析适用于处理时间相关数据的所有领域:医学、生物学、工程学、市场营销、金融和许多其他领域。数据科学家作为生存分析师的角色，会涉及到与临床试验、客户流失、罗马皇帝暴死前的时间、产品或系统的故障率以及无数其他情况相关的问题:“什么时候会发生，失败的风险或成功的机会有多大？”在第一章的介绍之后，我们将在第二章探索一些例子——然后用浴缸形状的寿命来完成教程。</p><ul class=""><li id="bcbd" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">什么是生存分析？</li><li id="dc8c" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">死亡率和危险率的力量</li><li id="0ecd" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">—系统故障</li><li id="f32b" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">通过实例进行参数生存分析</li><li id="0ef1" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">—示例:指数寿命模型</li><li id="75af" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">—示例:威布尔寿命模型</li><li id="e207" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">—浴缸形状的寿命</li></ul><h1 id="b139" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">1.什么是生存分析？</h1><h2 id="4c33" class="mx mg it bd mh my mz dn ml na nb dp mp le nc nd mr li ne nf mt lm ng nh mv ni bi translated">1.1 事件时间分析——概念</h2><p id="2ae8" class="pw-post-body-paragraph kv kw it kx b ky nj ju la lb nk jx ld le nl lg lh li nm lk ll lm nn lo lp lq im bi translated">首先:什么是<em class="no">死亡之力</em>？它是生存到某一时刻后，在该时刻死亡的条件概率。在精算学中也称为<em class="no">死亡强度</em>或<em class="no">瞬时死亡率</em>。在不太关心预测向来世过渡的领域，它更好地被称为<strong class="kx iu">风险率</strong> <em class="no">。</em></p><p id="3fc7" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这听起来好像我们将要讨论的数据科学方法只涉及一种类型的问题:从保险公司的角度看，生物退出的时间。</p><p id="52d2" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">远非如此。我们希望从中提取分析洞见的事件类别出现在不同的领域，如医学治疗和临床试验、社会学、产品开发、人寿保险、生物学和生态学、工程学、刑事累犯、信用风险、政治学(例如:独裁统治的生存时间)和历史(例如，罗马皇帝暴力死亡的平均时间是多项研究的主题:“<a class="ae ku" href="https://www.nature.com/articles/s41599-019-0366-y" rel="noopener ugc nofollow" target="_blank">最危险的职业”</a>；以及<a class="ae ku" href="https://royalsocietypublishing.org/doi/10.1098/rsos.210850" rel="noopener ugc nofollow" target="_blank">罗马帝国:生存分析|皇家学会</a>)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/f1a0eec1534e910dca91e01cfa392000.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*NOFuWx_MqTm6v6QR-n1euA.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://pixabay.com/vectors/julius-caesar-assassination-painting-4877717/" rel="noopener ugc nofollow" target="_blank">朱利叶斯·凯撒遇刺，戈登·约翰逊 Pixabay 上的免费矢量图</a>作者 GDJ</p></figure><p id="35da" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">换句话说，生存分析的方法可以处理任何可以想象的情况。生存分析是对时间序列分析的补充。</p><p id="f410" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">生存分析的重点是关注目标事件发生前的<strong class="kx iu">时间——故障时间、生存时间或事件时间<em class="no"> — </em>及其相关风险。</strong></p><p id="0767" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">它超越了死亡或系统故障的预测，也可以指不太确定的事件类型。感兴趣的事件可以是沿时间轴的任何现象:</p><ul class=""><li id="7aad" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">第一次和第二次分娩的时间间隔<a class="ae ku" href="https://www.ojshostng.com/index.php/ajmms/article/view/679" rel="noopener ugc nofollow" target="_blank"/></li><li id="4c88" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">离婚前的时间:结婚和离婚的生存分析<a class="ae ku" href="https://www.researchgate.net/publication/316648517_SURVIVAL_ANALYSIS_ON_MARRIAGE_AND_DIVORCE_IN_THE_KUMASI_METROPOLIS" rel="noopener ugc nofollow" target="_blank"> (researchgate) </a></li><li id="aa05" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">再次犯罪的时间:<a class="ae ku" href="https://journals.sagepub.com/doi/10.3818/JRP.8.2.2006.57" rel="noopener ugc nofollow" target="_blank">返回监狱的人</a></li><li id="9842" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">故障前时间:设备在其目标使用寿命或保修期内发生故障的风险</li><li id="f8f6" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">药物治疗或临床试验:药物的代谢吸收率；癌症治疗或移植后的 5 年存活率；任何疾病痊愈前的时间；接种疫苗后达到最大抗体计数的时间；抗体计数降至阈值以下的时间</li><li id="dcd2" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">输水管道的生存分析(awa.asn.au) </li><li id="b175" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">生物或生态事件发生的时间:<a class="ae ku" href="https://www.nature.com/articles/s41598-021-87264-1" rel="noopener ugc nofollow" target="_blank">昆虫种群发展的统一生存分析方法(nature.com)</a>；猎物的隐藏时间；捕食者的等待时间</li><li id="ad1d" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">客户流失或员工流失率:一定比例的客户或员工将离开企业或不再续订的时间</li><li id="34e3" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">公司债务违约的时间</li><li id="8901" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">直到一半的单身女性候选人没有收到玫瑰，必须回家</li></ul><p id="d2be" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在工程中，生存分析通常被称为<em class="no">可靠性</em>分析。在经济学中，<em class="no">久期建模</em>。在社会学中，<em class="no">事件历史</em>分析。</p><p id="2e3c" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">表达生存分析通用范围的更全面的同义词是<strong class="kx iu">时间-事件分析。</strong>感兴趣的事件可以是任何依赖于时间的事件。</p><p id="82ee" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">生存分析的方法有三种基本类型:</p><ul class=""><li id="6a45" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">非参数:例如，Kaplan-Meier 估计量——它不假设风险函数的形状，也不假设协变量或外生回归变量的影响</li><li id="cd99" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">半参数:例如，Cox 模型——它对风险函数的形状没有任何假设；但它确实对协变量以及它们如何影响风险函数做出了假设</li><li id="3198" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">参数:关于风险函数的假设由概率分布表示，如指数、威布尔、对数逻辑、Gompertz、极值、瑞利或对数正态模型</li></ul><p id="ddaf" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在今天的教程中，我们将重点放在参数生存分析上。从概率分布的其他应用中，我们已经知道了它的相当多的工具。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/73d9d7df4a8a753fe8c7456d202d12f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*viBYCxVLdKAFC3PnlsssFw.jpeg"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://pixabay.com/photos/pocket-watch-time-sand-clock-3156771/" rel="noopener ugc nofollow" target="_blank">安卡皮克斯公司的怀表时光之沙 Pixabay 上的免费照片</a></p></figure><h2 id="789a" class="mx mg it bd mh my mz dn ml na nb dp mp le nc nd mr li ne nf mt lm ng nh mv ni bi translated">1.2 参数生存分析的要素</h2><p id="ed0d" class="pw-post-body-paragraph kv kw it kx b ky nj ju la lb nk jx ld le nl lg lh li nm lk ll lm nn lo lp lq im bi translated">在我们计算具体的例子之前，我们需要学习一些将成为我们焦点的技术术语:我们希望从数据中提取的分析描述符。</p><p id="bd11" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">以下一些术语是由可靠性分析和精算学创造的。请记住，这两个字段所称的<em class="no">故障</em>也可以表示其他字段中任何感兴趣的中立<em class="no">事件</em>。对于精算师和可靠性工程师来说，感兴趣的事件恰好是系统的故障:机械的、电子的或生物的。你可能需要调整你的思维过程，将这些传统词汇翻译成更适合你要研究的事件的词汇。但是功能工具将适用于所有类型的时间相关事件。</p><ul class=""><li id="0177" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><strong class="kx iu"> CDF(t):累积分布函数</strong> =寿命分布函数=表示到时间 t 将失效的所有单元的分数；相反，表示一个随机抽取的单元在时间 t 前失败的概率。我们也可以读为“事件”，而不是“失败”:在时间 t 前将受到感兴趣的事件影响的单元。</li><li id="9ce4" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx iu"> pdf(t):概率密度函数</strong> =事件密度=单位时间内的故障率</li><li id="2d98" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx iu"> SF(t)或 R(t):生存、幸存或可靠性函数</strong>= CDF = 1 的简单补数— CDF(t) =所有幸存机组的分数(保持运行；或者不受感兴趣的事件影响)至少 t 小时=事件将在时间 t 之后发生的概率</li><li id="719d" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx iu">直到时间 t 的故障或事件</strong>:</li><li id="f3fb" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">—如果 N 是样本数，则 CDF(t) * N 是直到时间 t 的故障(事件)数；</li><li id="14cb" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">—而 SF(t) * N 是幸存者的数量:在时间 t 时仍在运行的单位。</li><li id="d4f5" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx iu"> AFR </strong> (t1，t2):时间间隔【T1，t2】内的<strong class="kx iu">平均故障率</strong>，简单来说就是间隔内统计的故障次数除以以月或天为单位测量的时间跨度</li><li id="a43a" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx iu"> h(t):风险函数，</strong>瞬时失效率，或死亡率。这是我们将要研究的生命周期模型的核心因素。</li><li id="37e7" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">—也简称为危险率或<strong class="kx iu">故障率。</strong>我们需要意识到，风险函数不一定是像平均故障率 AFR 那样的常数。危险函数是一条曲线，可以根据其潜在“危险过程”的行为随时变化，因此其瞬时故障率绰号。</li><li id="27b1" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">—它测量在时间 t 之前仍然存在，但在下一个时刻 t*将失效的单元的故障率</li><li id="08ea" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">—危险率表示系统达到一定年龄时发生故障的倾向。它是一个条件故障率:在 t 时刻的故障，假设一个单元已经存活到 t</li><li id="8931" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">—注意，危险函数不能解释为概率——它在区间[0；∞)是无限的。h(t)是故障分布的概率密度函数。</li><li id="6041" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">—它可以计算为概率密度函数 pdf(t)和生存函数 SF(t)的商:</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/0dfc44b4245ea6fa81c1b0ae9f8e4bbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/format:webp/1*zwFbkIjXARRhbcC47_60oA.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><ul class=""><li id="e737" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><strong class="kx iu"> H(t):累积危险函数</strong>。类似于概率密度函数和累积概率函数之间的关系，可以对危险率 h(t)进行积分以获得 H(t)。</li><li id="bb0d" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">在可靠性分析中，故障率通常用特定的技术术语来表示:</li><li id="5d80" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">—1.0%/K = %每“千小时”的故障率= 1000 小时内 1%的故障率</li><li id="5728" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">— 1.0 PPM/K =每千小时每百万的部件数(故障数)= 1000 小时内一百万个部件中有一个故障</li><li id="b434" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">— 1.0 拟合=故障时间=每 10 亿小时 1 次故障</li><li id="d8c3" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx iu">平均无故障时间 MTTF </strong>:整个群体无故障前所有时间跨度的平均值</li><li id="990e" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx iu">一个单元存活 t 小时后的平均剩余寿命</strong></li></ul><h1 id="4ee7" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">2.通过实例进行参数生存分析</h1><p id="59c0" class="pw-post-body-paragraph kv kw it kx b ky nj ju la lb nk jx ld le nl lg lh li nm lk ll lm nn lo lp lq im bi translated">在这一章中，我们将通过几个例子，提取我们在第一章中讨论过的描述符，并解释它们。</p><h2 id="555a" class="mx mg it bd mh my mz dn ml na nb dp mp le nc nd mr li ne nf mt lm ng nh mv ni bi translated">2.1 故障率的形状</h2><p id="6484" class="pw-post-body-paragraph kv kw it kx b ky nj ju la lb nk jx ld le nl lg lh li nm lk ll lm nn lo lp lq im bi translated">一个生存模型区别于其他模型的核心属性是其失败率的形状。我们区分:</p><ul class=""><li id="029f" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">恒定故障率</li><li id="c0f1" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">单调递增速率</li><li id="4768" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">单调递减率</li><li id="4c43" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">不稳定的故障率，其中包括所谓的浴缸形状</li></ul><p id="102f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们将计算每种情况的例子。</p><h2 id="57f4" class="mx mg it bd mh my mz dn ml na nb dp mp le nc nd mr li ne nf mt lm ng nh mv ni bi translated">2.2 系统故障:乘法法则</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/d88cc609b9a35407a416eac20566c89b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*PJ3OcfTRbQ_4kYHkLN5J3g.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://pixabay.com/photos/gear-gear-wheels-steampunk-rusty-1127518/" rel="noopener ugc nofollow" target="_blank">齿轮蒸汽朋克，苏珊·米尔克 Pixabay 上的免费照片</a></p></figure><p id="c7dd" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">让我们以一个由 N 个组成元素组成的系统为例，例如控制第一艘前往火星的宇宙飞船中的火箭发动机的 12 个电子电路。每个电路在不同的升压阶段执行不同的任务。但是如果 12 个<em class="no">中的任何一个</em>失灵，整个推进系统将会失灵。</p><p id="6a53" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">假设任何电路在其操作使用的目标时间窗口内具有 0.999 的生存概率。他们最终的失败是不相关的，他们会独立地失败。单个组件的生存函数返回 SF(t) = 0.999。推进系统发生灾难的概率有多大？独立事件的乘法法则告诉我们，整个系统到时间 t 的生存概率是 S(t) = (0.999) = 98.8%。如果系统依赖于 100 而不是 12 个组件，其生存函数值将减少到(0.999) ⁰⁰ = 90.4%。</p><p id="b571" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">一艘宇宙飞船依赖成千上万的关键任务部件。因此，冗余成为一个不可避免的防护栏:我们的简化示例意味着，一个只有 100 个关键组件的系统将需要至少 9.6%的备份，前提是它们是独立的。但是，如果第一个组件的缺陷会触发相邻组件的级联，那么冗余储备就必须更高。</p><h2 id="9530" class="mx mg it bd mh my mz dn ml na nb dp mp le nc nd mr li ne nf mt lm ng nh mv ni bi translated">2.2 指数分布</h2><p id="1bb9" class="pw-post-body-paragraph kv kw it kx b ky nj ju la lb nk jx ld le nl lg lh li nm lk ll lm nn lo lp lq im bi translated">指数分布是参数失效时间模型中最基本的变量。它假设一个<strong class="kx iu">常数</strong>失效率，λ&gt;0。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/4b4726d1e1b4887e6644d4563663c6bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*E3aLFMRRfg1JgGGIgBF9ZQ.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://en.wikipedia.org/wiki/Exponential_distribution" rel="noopener ugc nofollow" target="_blank">指数分布—维基百科</a></p></figure><p id="4b93" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">为了在 SciPy 中实例化指数分布，我们需要将 SciPy 的<em class="no">标度</em>参数定义为故障率<em class="no">λ的<em class="no">倒数</em>。</em> SciPy 对其所有分布使用比例参数；指数分布也不例外。然而，一个更典型的指数分布的定义，如维基百科所示，会用失败率<em class="no">和</em>来参数化它(也称为<em class="no">的倒数</em>)。</p><ul class=""><li id="4e15" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">SciPy: expon(loc，scale)，其中 scale = (1 /故障率λ)</li></ul><p id="fd61" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">比例参数代表<em class="no">平均故障间隔时间</em>。</p><p id="e849" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">为了获得危险函数 h(t ),我们应用我们在第 1.2 章中看到的定义:</p><ul class=""><li id="75c5" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">h(t) = pdf(t) / (1 — CDF(t))</li></ul><p id="c13b" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">如果你看一下上面显示公式的截图，你会看到这个商将简化为 h(t) = lambda。</p><p id="54cd" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">指数分布是具有非时变失效率的寿命分布的唯一情况。这种恒定性就是指数随机过程的定义。在任何时间 t，新的缺陷出现在相同的水平λ。指数分布是无记忆的。</p><p id="2d72" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这当然是一个大胆的假设。但是，如果分析集中在一个足够窄的时间窗口，以排除磨损效应，它可以与现实相一致；也排除了所谓的婴儿死亡阶段——一个新过程启动后，但在通过消除其早期缺陷而稳定下来之前的时间窗口。因此，指数分布可以应用于我们将在下面进一步讨论的所谓浴盆曲线模型的中心部分。</p><p id="ce1d" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们飞往火星的宇宙飞船的一种电路板将在发射后几个小时打开。它们将在升空过程中免受机械应力的影响。这次旅行，包括返回地球，将需要 36 个月。制造商知道这段时间太短，不会因化学或机械老化而导致磨损。但在航行过程中，宇宙辐射会随机击中一些电路。实验室中的辐射测试让我们预计电路将以 0.06%/K 的速率烧毁。该速率将是恒定的，因为在第一天之后，当宇宙飞船离开距离地球 58，000 公里的范艾伦辐射带时，辐射暴露量将仅发生最小量的变化。</p><p id="6b55" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">翻译:每“千小时”0.06% = 0.06/(100 * 1000)。这是我们可以插入到模型中的故障率λ。在 SciPy 的符号中，我们使用它的倒数 1/lambda 作为比例参数:1，666，667。同样的 1.67 米小时也代表任何电路的平均无故障时间。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="b2db" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在第 6 行，我们将我们想要分析的时间范围制成表格。</p><p id="8c20" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">第 7 行实例化了 SciPy 的指数分布。位置参数被设置为零:电路可以在它们被接通时立即烧断，在时间零之后没有等待期。比例参数设置为速率λ的倒数。</p><p id="98e6" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在第 8 行中，我们通过在累积分布函数中插入时间 T 的范围来评估累积分布函数。我们在第 9 行的字典中收集时间 T 和 cdf 结果。然后，第 10 行中的列表“理解”打印词典。</p><p id="86fd" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">第 15 行根据指数分布计算平均失效时间，并确认它等于 1/λ。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nu nv di nw bf nx"><div class="gh gi nt"><img src="../Images/0b93347e310fc3a777ea3da7d51c25b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*2MtUIkxerXZIZvl0HjUoVA.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="ac12" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在运行 20，000 小时后，即航行 833 天后，1.19%的电路将遭受高能粒子的击倒。这表明，低于 2%的储备将能够抵消辐射风险。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/28ed07637fd84fe65bff4cf9659dfcdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*3KFNZ9Jz4bmrHYBc7XjaJg.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="44ad" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">不出所料，我们观察到 cdf 曲线中的累积故障呈线性上升；和恒定危险函数。</p><p id="7d59" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这证实了指数分布以恒定的失效率运行。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/54a1a47a2578c3e88c6983a6139dbd69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*7vqHlWL-Gusa_Xr9aFZ15w.jpeg"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://pixabay.com/photos/background-green-board-business-219809/" rel="noopener ugc nofollow" target="_blank">背景绿板，公共域图片 Pixabay 上的免费照片</a></p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="b71d" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们的下一个评估计算分位数。多少小时后，1.0%的电路会显示蓝屏错误？在第 2 行到第 5 行，我们准备了一个概率范围，我们将把它提供给第 6 行的百分点函数。第 6 到 8 行收集字典中的分位数和相关概率，第 9 行的 list comprehension 逐行打印。</p><p id="d35f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">该表报告了 16，751 小时的 1%分位数。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/46a63e567ced5334c2acbfd2f5f98e3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/format:webp/1*YN24q95Hb5CJO5orVehVvw.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="eb9e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><strong class="kx iu">系统故障</strong></p><p id="489c" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在第 2.2 章中，我提到了乘法法则:如果一个系统的 N 个组件中只有一个失效，那么这个系统的生存概率等于特定组件生存函数的乘积。如果 N 个组件在时间 T 时仍以概率 S 起作用，那么系统在时间 T 时的生存概率 S 将是个体生存概率的乘积。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/49fcbfa1ee50d2c7abe598f3bf69de63.png" data-original-src="https://miro.medium.com/v2/resize:fit:342/format:webp/1*PNqe0udsFYopFP2bqG3q6Q.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="3f3d" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">而系统的<em class="no">失效率</em>是各个失效率的<em class="no">之和</em>。如果所有 N 个部件的故障率都相同，那么系统(我们的宇宙飞船)的故障率将为 N *λ，也遵循指数分布。其平均无故障时间 MTTF 将是 1/(N *λ)的倒数。这被称为<em class="no">指数闭包性质。</em></p><p id="0267" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">让我们把这转化为我们的例子。如果宇宙飞船运行 100 个独立的、相同的电路板，每个电路板的 lambda 比率报告为 0.06%/K，并且当第一个到期时系统将会崩溃，那么飞船在运行 T 小时内在太空中倾覆的风险会有多大？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/cee4a726c330761f702a0fa2e645a48b.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*dX-pUVFXq53aYwnvASgFaQ.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="a251" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">系统的故障率 LL 仅仅是单个故障率 l 的 N 倍。在运行 5000 小时后，飞行 7 个月后，太空沉船的风险已经达到近 26%——除非备份电路可以在第一个火花开始飞起来时立即启动。</p><p id="15af" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><strong class="kx iu">分配拟合</strong></p><p id="858a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在演习开始时，我们报告说，实验室的辐射测试提供了一个失败率。具有单一参数的指数分布是从观测数据中最容易得到的模型。我们通过将失败次数除以观察小时数来获得参数估计值。</p><p id="bdea" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><strong class="kx iu">审查</strong></p><p id="ab32" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">当我们考虑<em class="no">截尾</em>时，失效率的计算变得更加复杂。</p><p id="9f96" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">当电路被测试 T 个小时后，其中一些电路将被记录下它们失效的准确时间 T。幸存者将在稍后的某个时间耗尽精力。但我们无法确定它们何时到期。这种源数据问题被称为类型 I 的<em class="no">右删失:</em>测试时间 T 是固定的，但是一些单元将存活超过 T 的未知时间。</p><p id="2655" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">另一个不同的测试——一个在时间上开放的测试，但是当第 k 个缺陷被观察到时就会结束，无论它何时出现——报告<em class="no">II 型截尾</em>结果。</p><p id="a2e4" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在这两种情况下，我们都必须调整估计的故障率，以获得对所有电路总数的更准确的估计。审查是我将在下一篇文章中讨论的一个方面。</p><h2 id="b94f" class="mx mg it bd mh my mz dn ml na nb dp mp le nc nd mr li ne nf mt lm ng nh mv ni bi translated">2.3 威布尔分布</h2><p id="6556" class="pw-post-body-paragraph kv kw it kx b ky nj ju la lb nk jx ld le nl lg lh li nm lk ll lm nn lo lp lq im bi translated">指数模型基于这样的假设，即没有磨损机制会随着时间的推移而提高故障率。这是一个应该仔细推敲的假设。在我们的宇宙飞船例子中，我们有理由假设这将是一个碰运气的游戏:一个电路可能会也可能不会被单个高能粒子的碰撞所破坏。</p><p id="d586" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">但是，较小的辐射损伤的积累可能会成为一个磨损过程，需要我们的生命周期模型中不断增加的终止率。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/e0a2b368a856abb8da98986c1c7c1fc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*stGYgfU1Qq3_5ICjotXjZQ.jpeg"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://pixabay.com/photos/mars-red-planet-planet-space-11012/" rel="noopener ugc nofollow" target="_blank">火星红色星球，由 WikiImages 拍摄 Pixabay 上的免费照片</a></p></figure><p id="a12a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">到达火星后，我们的设备将暴露在沙尘暴和陡峭的温差中。这些肯定会导致缺陷的增加。</p><p id="99f9" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">1951 年，瑞典工程师恩斯特·威布尔发展了现在以他的名字命名的分布。这是对各行各业需要一个能够描述真实世界流程的模型的响应，而真实世界的流程通常不会表现出恒定的故障率。威布尔分布可以反映</p><ul class=""><li id="f0a5" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">剔除有缺陷的部件时，加工速度降低(形状参数&lt; 1);</li><li id="e9f1" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">and also wear-out or aging processes with increasing rates (shape parameter &gt; 1)。</li><li id="fbec" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">如果威布尔形状参数设置为 1，则分布简化为一种特殊情况:指数分布。</li><li id="ffe2" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">如果形状设置为 2，它还包括瑞利分布作为另一种特殊情况，这将产生线性增加的危险率。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/79a146093217eb0fa6b2a1bbc21e59fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*HfzHmm-MoJ-sr9f0fD6tUw.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.weibull_min.html" rel="noopener ugc nofollow" target="_blank">SciPy . stats . Weibull _ min—SciPy v 1 . 7 . 1 手册</a></p></figure><p id="5b17" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">SciPy 提供名为<em class="no"> weibull_min 的 Weibull 模型。</em>维基百科用形状和比例参数来定义它。在 SciPy 中，您可以通过在形状和比例之间插入一个位置参数，将其转换为一个三参数威布尔分布。形状和比例必须是正数。</p><ul class=""><li id="932d" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">该位置设置 x 轴上观测开始的最小时间。</li><li id="141c" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">标度是最大值和最小值之差；换句话说，最大时间<em class="no"> tmax </em> =位置+规模。标度参数也被称为<em class="no">特征寿命</em>:最小和最大时间之间的跨度。</li></ul><p id="9293" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">与指数情况下的λ不同，威布尔风险函数不能从单个参数中读出。它依赖于时间，并受形状和比例的影响:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/f306f9154a675a4f6d10713a5dfb78ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:452/format:webp/1*DqumU_ys_0zrRSHaW6LV6w.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="dce3" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">最初，我们将假设我们已经确定我们将在火星表面上使用的电路板的寿命将遵循威布尔分布。寿命显示出增加的故障率。稍后，我们将研究分布拟合来证实最初的假设。</p><p id="8456" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">估计特征寿命为 50，000 小时。形状参数为 1.5。我们将位置参数设置为 0——没有等待时间:一旦电路所在的设备暴露在恶劣环境中，电路就可能停止工作。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/1d5ed4d095dc885fff36d142737af5a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*NTjQG8BC0831rMx2RUXtMg.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/1655590abd262b3e7c5f7cbe32b70640.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*dyt7KmYLhcUyssoW_Pge6Q.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="2abb" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在磨损阶段，危险函数的斜率变得更陡。</p><p id="0eb0" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><strong class="kx iu">形状</strong></p><p id="493a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">威布尔<strong class="kx iu">形状</strong>参数控制曲线的上升或下降。</p><ul class=""><li id="9f83" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">0 &lt; shape &lt; 1 : decreasing hazard rate</li><li id="7bef" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">shape = 1 : constant failure rate</li><li id="5ec4" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">shape &gt; 1:增加危险率</li><li id="db25" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">形状= 2:瑞利分布:风险率线性增加</li><li id="b5a2" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">3 ≤形状≤4:CDF 曲线开始类似于正态分布的钟形曲线，尽管具有不同的偏斜度和峰度</li></ul><p id="7262" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><strong class="kx iu">特征寿命</strong></p><p id="1855" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">缩放参数充当一种锚点:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nu nv di nw bf nx"><div class="gh gi og"><img src="../Images/cd3787b64b8844ce0cbe81af07b379e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tPygztFNd2SfMQjszuubxA.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="433b" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们知道，68%遵循正态分布的观察值位于其平均值的 1 个标准差以内。在任何威布尔分布的情况下，不管形状参数如何，63.2%的观测值低于其特征寿命。</p><p id="b1e9" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><strong class="kx iu">系统故障</strong></p><p id="c5d2" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">如果一个系统由 N 个可以用相同的威布尔形状参数建模的独立元件组成，并且当第一个元件损坏时系统将崩溃，那么系统的危险率也遵循具有该形状参数的威布尔分布。</p><p id="7f61" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">系统的特征寿命是一个更复杂的表达式:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/8076a36616bcf90b46df8d3470f5ef59.png" data-original-src="https://miro.medium.com/v2/resize:fit:692/format:webp/1*NNGub9O2OxKN8nhcl7tT0g.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="b77b" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们的任务如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/30b0f915f5d11bd1d955dff2ea68218a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*aBxrGfLKNLnVIjQDiRpBsw.jpeg"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://pixabay.com/photos/mars-mars-rover-space-travel-rover-67522/" rel="noopener ugc nofollow" target="_blank">wiki images 拍摄的火星漫游太空旅行 Pixabay 上的免费照片</a></p></figure><p id="d1f3" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们的火星探测器依靠四块电路板来控制仪器。它们的寿命曲线可以用威布尔形状参数来建模，制造商在测试期间将所有四块板的威布尔形状参数固定为 1.5。这些主板都有不同的典型寿命，有 8，000、10，000、11，000 和 14，000 小时，因为它们包含不同数量的处理器。数字越大，棋盘越早到达临界点。</p><p id="56d0" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们可以期待火星车具有哪些耐力？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/4d54f15f557974904a651c970b3051a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*o3JPDnOckiZbWu8cNAu67w.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="0e4e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">列表 comprehension Chars 通过实现上面所示的公式来计算漫游者的特征寿命:4058 小时。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="1667" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">描述火星车的威布尔模型告诉我们，它预测的平均到期时间只有 3664 小时。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/2ecfbb8e1d5b4328719af9aa930e8ef9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*fob1urPbELeZmClL2R4Fvg.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="b839" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><strong class="kx iu">拟合威布尔分布</strong></p><p id="f958" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在本章开始时，我们假设制造商已经为我们确定了形状和特征寿命。现在让我们快速了解一下分布拟合。制造商的工程团队已经向我们提供了他们测试的原始数据，将由我们来确定与他们的数据相匹配的寿命分布。</p><p id="9e48" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在这个练习中，我创建了一个由 100 个观察值组成的合成集合:威布尔分布的变量，夹杂着一些随机抖动。然后我会演示 SciPy 的分布钳工法。</p><p id="acea" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我之前的一篇文章(<a class="ae ku" rel="noopener" target="_blank" href="/probability-distributions-with-pythons-scipy-3da89bf60565">概率分布和用 Python 的 SciPy |走向数据科学的分布拟合</a>)讨论了一个自动拟合脚本，它针对源数据测试了 60 种不同的候选分布。今天，我们把任务限制在寻找一个分布的参数，威布尔模型。</p><p id="6e7a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">观察数据的数组在脚本中被称为 randWW。</p><ul class=""><li id="7b4d" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">在应用 SciPy 的拟合函数之前，我计算了概率为 0.632 的分位数。记住，这个分位数对应于威布尔分布的特征寿命。我将把它作为初步猜测提供给装配工。</li><li id="8b85" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">在拟合函数中，我们将位置参数设置为零。<em class="no"> floc </em>中的前缀 f 告诉装配工保持用户定义值不变。根据经验，我建议尽可能修正位置值。你可能已经预先知道，失效过程将从零开始，就像我们的例子一样。如果不是，将<em class="no">观察值</em>的最小值设置为位置参数。否则，装配工可能很难得出一个合理的结果。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nu nv di nw bf nx"><div class="gh gi ok"><img src="../Images/79189a5b0c17156ef687bf298f83dccb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*edtOP8doCR5zJlLr6XFbmA.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="c4d9" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">拟合函数将返回最小化预测误差的参数元组。在这种情况下，形状为 1.45 小时，特征寿命为 48，578 小时。</p><p id="18b9" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们称之为 SciPy 的 Kolmogorov-Smirnov 拟合优度测试。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nu nv di nw bf nx"><div class="gh gi ol"><img src="../Images/788555513d5baf37cb072d17aed4b453.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HLT5ZkzNPkikHYsVfjpZAw.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="8c2e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">其结果，0.401 的高 p 值，证实了观测数据与装配员发现的威布尔参数化密切相关。拟合是中等质量的(尽管它远远超过通常的 0.05 的显著性水平)，而不是完美的，因为 100 的样本量很小，因此容易出现异常值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi om"><img src="../Images/da2a196df5b4afab17d9ca8370b74fe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/format:webp/1*CtVKYLxQPZxwKdrAZXLO-w.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="4c63" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><strong class="kx iu">从单调到浴缸</strong></p><p id="5006" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">威布尔过程模拟单调增加、减少或恒定的失效率。在其通常的参数化中，它没有反映最典型的失效过程:所谓的浴盆曲线。让我们试试看。</p><h2 id="8e4a" class="mx mg it bd mh my mz dn ml na nb dp mp le nc nd mr li ne nf mt lm ng nh mv ni bi translated">2.4 浴盆形寿命</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/29dc1f377295ae291357984391d7fb30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*BzHQu-Lv66NmVZApToxK_w.jpeg"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://pixabay.com/illustrations/pokemon-pokemon-go-game-smartphone-1597290/" rel="noopener ugc nofollow" target="_blank"> Go Game，Alexas _ Fotos—pix abay 上的免费图片</a></p></figure><p id="5c50" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">许多过程和系统呈现出类似浴缸轮廓的寿命曲线。</p><ul class=""><li id="b5e8" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">它们早期的特点是废弃和浪费率下降。新产品或新生产流程在其初始阶段会经历一个高报废率的磨合或学习阶段。</li><li id="b4a5" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">随着时间的推移，质量控制措施会剔除薄弱环节或易出故障的流程步骤。更坚固的部件将决定下一阶段更低的故障率。</li><li id="2c50" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">随后，末期将呈现出递增的终止率，该终止率沿浴缸形状的右壁上升。这是磨合期。组件或系统——机械的、电子的或生物的——在老化过程中会继续加速退化。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/6d98a5a4c5e6dead84e9097066623a68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*LHyAuW_TqiUL0K5w6bUIsg.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">by tubath _ curve . jpg:wyatts 衍生作品:MC sush(talk)—tubath _ curve . jpg，公共领域，【https://commons.wikimedia.org/w/index.php?curid=7458336 T2】</p></figure><ul class=""><li id="e95d" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">中心阶段的特点是相对平坦的故障率。磨损导致的退化和系统初期解决的初始结构问题都不会对所谓的稳定故障期产生太大影响。失败确实会发生，但却是随机的。</li></ul><h2 id="5dbf" class="mx mg it bd mh my mz dn ml na nb dp mp le nc nd mr li ne nf mt lm ng nh mv ni bi translated">2.4.1 指数化威布尔分布</h2><p id="16cf" class="pw-post-body-paragraph kv kw it kx b ky nj ju la lb nk jx ld le nl lg lh li nm lk ll lm nn lo lp lq im bi translated">指数化威布尔分布是少数几种足够灵活的分布之一，可以画出浴缸形状的风险函数。它将第二个形状参数，即指数因子，添加到威布尔-最小分布中。附加参数扩展了 is 曲线的灵活性，可以模拟恒定、递增、递减或浴缸形状。</p><p id="bf1e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">方便的是，SciPy 通过它的子类<em class="no"> exponweib </em>使它可用。如果它的指数参数设置为 1，那么指数化威布尔就简化为它的特殊情况，威布尔最小分布。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/fb928b3bdf7f49734206abae62689960.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*4Q7AvH5eYS5vciLIf_Cnng.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.exponweib.html" rel="noopener ugc nofollow" target="_blank">SciPy . stats . expon weib—SciPy v 1 . 7 . 1 手册</a></p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/461fbd95274f0a416cb77dd97d54a024.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*OeJBp-txpmOi6GYSNwXROw.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="4dc6" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">然而，出于实际目的，我发现很难找到一个参数组合，使蓝色危险函数的尖肘进一步向右移动。开始时故障率的急剧下降很难通过调整参数来克服，并且不太适合下降阶段持续更长时间的许多现实情况。</p><h2 id="80e9" class="mx mg it bd mh my mz dn ml na nb dp mp le nc nd mr li ne nf mt lm ng nh mv ni bi translated">2.4.3 霍尔特分布</h2><p id="e32d" class="pw-post-body-paragraph kv kw it kx b ky nj ju la lb nk jx ld le nl lg lh li nm lk ll lm nn lo lp lq im bi translated">Hjorth 分布提供了一个适应性更强的浴缸曲线。</p><p id="d8b1" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">由于它在 SciPy 的目录中不可用，我们将其实现为一个新的发行版子类，该子类继承自 SciPy 的<em class="no"> rv_continuous </em>类。我们需要六行代码来完成它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="dee3" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">第 1 行显示的继承提供了很大的便利:我们只需要定义概率密度函数 pdf 或者累积分布函数 cdf(第 7 到 11 行)。然后，SciPy 的父类可以接管并通过数值积分或微分计算所有其他属性，如矩、百分点函数和生存函数。</p><p id="8caa" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">Hjorth 分布取位置参数 m &gt; 0，尺度 s &gt; 0，形状参数 f ≥ 0。</p><p id="507e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">如果形状参数被设置为零，则 Hjorth 分布被简化为 Rayleigh 分布。如果威布尔形状设置为 2，瑞利分布是威布尔分布的特殊情况。因此，Weibull 和 Hjorth 分布是一种表兄弟，两次删除。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/872aa866a1de0f36b302189ef3882568.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*JKCclj736JP_QkzNxeo4ww.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="22cd" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们的重点是危险函数，为此我们正在寻找一个产生浴缸形状的设置。我们从位置 m = 20，比例 s = 1，形状 f = 0.1 开始</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/4479604959bb319899484b92524a2048.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*uMV20Chbimjjkjo9NC8X-Q.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="cdcf" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在第 11 行代码中，我们将风险函数计算为概率密度函数和生存函数的商，这两个函数都来自我们的新子类<em class="no"> hjorth_gen </em>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/39ea33fe27b6b4fcabe356fb3a97f993.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*LuiDK-onlc3kh2ERzQirpQ.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="457f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们有浴缸了。参数元组(m，s，f) = (20，1，0.1)为我们提供了风险率的蓝色曲线。</p><p id="3e51" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">类似地，参数 tuple (3，1，3)会产生一个形状，它的右尾部有一个更适度的增加(左边是红色)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/74f4b60792a1feb5d0f2ed4e19ad07c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*Zujnvb3ID08yV9EnC7scwQ.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="ddc7" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">元组(2，47，0.33)将描绘浴盆曲线的更陡峭的增加。</p><p id="57de" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">现在我们可以开始评估 Hjorth 分布，其方式与我们评估其他具有恒定或单调失效率特征的分布的方式相同。</p><h1 id="f0de" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">3.结论</h1><p id="2be9" class="pw-post-body-paragraph kv kw it kx b ky nj ju la lb nk jx ld le nl lg lh li nm lk ll lm nn lo lp lq im bi translated">我们已经知道，我们现有的概率分布知识可以转移到我们在参数生存分析中遇到的任务。</p><p id="4272" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们还没有触及可能影响我们的源数据的复杂性:删截和截断，这是生存分析中的两个核心问题，但我们在其他数据科学领域不太经常遇到。这将是未来文章中的一个主题。</p><p id="47ef" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">Jupyter 笔记本可以在 GitHub 上下载:<a class="ae ku" href="https://github.com/h3ik0th/paramsurvival" rel="noopener ugc nofollow" target="_blank">h3ik0th/param survival:SciPy 参数生存分析教程(github.com)</a></p></div></div>    
</body>
</html>