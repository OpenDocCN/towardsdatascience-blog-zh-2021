<html>
<head>
<title>Top 3 Pandas Functions You Didn’t Know Existed</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你不知道的熊猫的三大功能</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/top-3-pandas-functions-you-didnt-know-existed-9789863cde25?source=collection_archive---------10-----------------------#2021-08-16">https://towardsdatascience.com/top-3-pandas-functions-you-didnt-know-existed-9789863cde25?source=collection_archive---------10-----------------------#2021-08-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="76fb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你不会偶然发现这些——我保证！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b5d0c4df9daf9b32a133235fc615ea74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aem5AjpLglZ6jWRrDVtH1w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@_tommytexter?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">史蒂夫丁</a>在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="79fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">熊猫无需介绍。多年来，它一直是Python生态系统中的首选库，并将一直存在下去。库中有数百个可用的函数，即使对于最有经验的用户来说，知道所有这些函数也是不可行的。</p><p id="3757" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天你将学习三个不太受关注的有价值的函数。几乎在任何数据科学指南中都找不到它们，尽管它们在日常分析工作流中很有帮助。</p><p id="a638" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你需要安装Numpy和熊猫来跟随。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3400" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">eval()</h1><p id="83ae" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">您可以使用<code class="fe mz na nb nc b">eval()</code>函数将Python表达式作为字符串进行求值。以下是您应该了解的参数:</p><ul class=""><li id="0232" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated"><code class="fe mz na nb nc b">expr: str</code>-要计算的表达式必须仅包含Python表达式。</li><li id="9cd8" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe mz na nb nc b">target: object</code> —赋值的目标对象—数据帧。</li><li id="9780" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe mz na nb nc b">inplace: bool</code> —指示是否应该修改<code class="fe mz na nb nc b">target</code>。<code class="fe mz na nb nc b">False</code>默认，所以返回一个副本。</li></ul><p id="7021" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看它在实践中是如何工作的。以下代码片段创建了一个虚拟数据帧，显示虚构的机器学习模型性能:</p><pre class="kj kk kl km gt nr nc ns nt aw nu bi"><span id="99eb" class="nv md it nc b gy nw nx l ny nz">df = pd.DataFrame({<br/>    'Algorithm': ['XGBoost', 'DNN'],<br/>    'MSE': [63.3234, 51.8182]<br/>})</span></pre><p id="926b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它看起来是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/f16127aae541bb12931e49b089345f73.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*JU6frsnc9Ufmn-XHmmM5UQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片1 — eval() (1)(图片由作者提供)</p></figure><p id="8cdc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您将使用<code class="fe mz na nb nc b">eval()</code>函数来计算基于MSE的RMSE:</p><pre class="kj kk kl km gt nr nc ns nt aw nu bi"><span id="2cb5" class="nv md it nc b gy nw nx l ny nz">pd.eval('RMSE = df.MSE ** 0.5', target=df)</span></pre><p id="f433" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是新数据帧的外观:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/6d0491af715c834156047204efec540f.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*Fj2u8L13rW_bkzzvSw4znw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片2 — eval() (2)(图片由作者提供)</p></figure><p id="ab7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">函数提供了创建新属性或更改现有属性的替代方法。它没有提供任何突破性的功能。</p><p id="b055" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里了解更多关于<a class="ae ky" href="https://pandas.pydata.org/docs/reference/api/pandas.eval.html#pandas.eval" rel="noopener ugc nofollow" target="_blank">的功能。</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a10b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">插值()</h1><p id="78bd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><code class="fe mz na nb nc b">interpolate()</code>函数使用指定的插值方法填充缺失值。以下是您应该了解的参数:</p><ul class=""><li id="12d0" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated"><code class="fe mz na nb nc b">method: str</code> —插值法。<code class="fe mz na nb nc b">linear</code>默认。它可以有许多值，因此检查<a class="ae ky" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.interpolate.html#" rel="noopener ugc nofollow" target="_blank">文档</a>以找到合适的值。</li><li id="fc60" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe mz na nb nc b">axis: int or str</code>-要沿其进行插值的轴。</li><li id="0e3e" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe mz na nb nc b">limit: int</code> —可选参数，用于指定要填充的连续缺失值的最大数量。</li><li id="db1e" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe mz na nb nc b">inplace: bool</code> —指示是否应修改原始数据帧。<code class="fe mz na nb nc b">False</code>默认。</li></ul><p id="c046" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看如何使用这个函数。下面的代码片段创建了一个熊猫序列，其中包含前五个整数，第四个整数缺失。<code class="fe mz na nb nc b">interpolate()</code>功能应自动确定<code class="fe mz na nb nc b">4</code>是正确的插值值:</p><pre class="kj kk kl km gt nr nc ns nt aw nu bi"><span id="b609" class="nv md it nc b gy nw nx l ny nz">s1 = pd.Series([1, 2, 3, np.nan, 5])<br/>s1.interpolate()</span></pre><p id="c1c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/fdf945dacfb3b5764979b32d978c3815.png" data-original-src="https://miro.medium.com/v2/resize:fit:496/format:webp/1*OVii9aBkHhye2UgyKewKSw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片3-interpolate()(1)(图片由作者提供)</p></figure><p id="f17d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是如果这种关系不是线性的呢？下面是列表值之间的二次关系示例:</p><pre class="kj kk kl km gt nr nc ns nt aw nu bi"><span id="49d4" class="nv md it nc b gy nw nx l ny nz">s2 = pd.Series([1, 4, 9, np.nan, 25])<br/>s2.interpolate(method='polynomial', order=2)</span></pre><p id="5de8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/4c7595f753155bf3cfb0c99d32685cc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:504/format:webp/1*7bCi6wyHjxvicSAwpAxaPA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片4-interpolate()(2)(图片由作者提供)</p></figure><p id="8632" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">非常管用！默认情况下，在上面的例子中调用<code class="fe mz na nb nc b">interpolate()</code>会用<code class="fe mz na nb nc b">17.0</code>填充丢失的值，因为这是周围元素的平均值。这不是你想要的。</p><p id="d058" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里了解更多关于<a class="ae ky" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.interpolate.html#" rel="noopener ugc nofollow" target="_blank">的功能。</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d5ed" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">因式分解()</h1><p id="ff61" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">您可以使用<code class="fe mz na nb nc b">factorize()</code>函数将对象编码为枚举类型或分类变量。以下是您应该了解的参数:</p><ul class=""><li id="713a" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated"><code class="fe mz na nb nc b">values: sequence</code> —要编码的一维值序列。</li><li id="0141" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe mz na nb nc b">sort: bool</code> —指示是否应对<code class="fe mz na nb nc b">values</code>进行分类。<code class="fe mz na nb nc b">False</code>默认情况下。</li><li id="4efa" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe mz na nb nc b">na_sentinel: int</code> —标记缺失值的值。如果<code class="fe mz na nb nc b">None</code>，丢失的值将被删除。</li></ul><p id="9531" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看它在实践中是如何工作的。以下代码片段分解了美国各州的虚拟列表，但没有进行排序:</p><pre class="kj kk kl km gt nr nc ns nt aw nu bi"><span id="f8a5" class="nv md it nc b gy nw nx l ny nz">codes, uniques = pd.factorize(<br/>    values=['NY', 'CA', 'AL', 'AL', 'AR', 'CA']<br/>)</span><span id="2268" class="nv md it nc b gy of nx l ny nz">print(codes)<br/>print(uniques)</span></pre><p id="d217" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/9871556e208f0816d1c779ce04480fe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/format:webp/1*OaErLmfXKgglWShAlRtYyg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片5 —因式分解()(1)(图片由作者提供)</p></figure><p id="30e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">factorize()</code>函数返回一个元组，因此将结果存储到两个变量中是一个好的做法。</p><p id="5ae7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果排序很重要，您可以指定<code class="fe mz na nb nc b">sort=True</code>:</p><pre class="kj kk kl km gt nr nc ns nt aw nu bi"><span id="29ce" class="nv md it nc b gy nw nx l ny nz">codes, uniques = pd.factorize(<br/>    values=['NY', 'CA', 'AL', 'AL', 'AR', 'CA'], <br/>    sort=True<br/>)</span><span id="b6be" class="nv md it nc b gy of nx l ny nz">print(codes)<br/>print(uniques)</span></pre><p id="9115" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/75d686b473c90c5c638ef4adec491030.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*CPAw6jUlbn3iEd-edLTqsQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片6 —因式分解()(2)(图片由作者提供)</p></figure><p id="a515" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas自动计算出它应该按字母顺序排列这些值。干净利落。</p><p id="be72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里了解更多关于<a class="ae ky" href="https://pandas.pydata.org/docs/reference/api/pandas.factorize.html#pandas.factorize" rel="noopener ugc nofollow" target="_blank">的功能。</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="fecf" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">最后的想法</h1><p id="72b2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">似乎没有熊猫不能做的事情。每个版本都添加了越来越多的功能，因此不时查看文档是值得的。谁知道呢，也许你花几个小时手工实现的东西已经内置到库中了。检查一下也无妨。</p><p id="6a0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你有喜欢的鲜为人知的熊猫功能吗？请在下面的评论区告诉我。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="850f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">喜欢这篇文章吗？成为 <a class="ae ky" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="od">中等会员</em> </a> <em class="od">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="oi oj gp gr ok ol"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd iu gy z fp oq fr fs or fu fw is bi translated">通过我的推荐链接加入Medium-Dario rade ci</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">medium.com</p></div></div><div class="ou l"><div class="ov l ow ox oy ou oz ks ol"/></div></div></a></div></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4843" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">保持联系</h1><ul class=""><li id="8c2d" class="nd ne it lb b lc mu lf mv li pa lm pb lq pc lu ni nj nk nl bi translated">在<a class="ae ky" href="https://medium.com/@radecicdario" rel="noopener">媒体</a>上关注我，了解更多类似的故事</li><li id="0f78" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">注册我的<a class="ae ky" href="https://mailchi.mp/46a3d2989d9b/bdssubscribe" rel="noopener ugc nofollow" target="_blank">简讯</a></li><li id="4af4" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">在<a class="ae ky" href="https://www.linkedin.com/in/darioradecic/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上连接</li></ul></div></div>    
</body>
</html>