<html>
<head>
<title>GPS trajectory clustering with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于Python的GPS轨迹聚类</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/gps-trajectory-clustering-with-python-9b0d35660156?source=collection_archive---------8-----------------------#2021-04-11">https://towardsdatascience.com/gps-trajectory-clustering-with-python-9b0d35660156?source=collection_archive---------8-----------------------#2021-04-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1ab2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何解决这个领域遇到的常见问题</h2></div><p id="8013" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">移动设备的快速增长导致基于位置的服务、地理社交网络、交通或拼车应用程序收集了大量的GPS轨迹。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/20c8bdcdf73aa88be10fd649a3ba97b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GJlR27a3VDPNUmCd"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">GPS轨迹聚类(Trips)(图片由作者提供)</p></figure><p id="f7bb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">GPS轨迹聚类越来越多地用于许多应用中。例如，它可以帮助识别经常的路线或行程。轨迹相似度可以用来发现轨迹是否遵循某一路线。然后，它可以用于跟踪运输服务，例如城市中的公共汽车。</p><p id="a569" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我将简要介绍快速GPS轨迹聚类。这个解决方案中使用了Python开源库。通常，在聚类轨迹期间可能会遇到几个问题。</p><ul class=""><li id="d2ff" class="lr ls iq kh b ki kj kl km ko lt ks lu kw lv la lw lx ly lz bi translated">GPS轨迹通常包含许多数据点。聚类可能需要很长时间。</li><li id="0cc5" class="lr ls iq kh b ki ma kl mb ko mc ks md kw me la lw lx ly lz bi translated">需要合适的相似性度量来比较不同的轨迹。</li><li id="d3ff" class="lr ls iq kh b ki ma kl mb ko mc ks md kw me la lw lx ly lz bi translated">聚类方法和配置</li><li id="651a" class="lr ls iq kh b ki ma kl mb ko mc ks md kw me la lw lx ly lz bi translated">可视化轨迹及其聚类</li></ul><p id="7fb9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关于这个主题有很多有趣的文章[1，2]。然而，并非所有上述问题都得到解决。在本文中，我将展示一个涵盖所有这些领域的Python解决方案。这里使用的数据最初来自车辆能量数据集[3]。首先对原始数据应用聚类所有GPS点的过程。然后，我选择了几个起始端组的轨迹。为简单起见，本文提供的数据是针对这些轨迹组的，如下所示:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mf"><img src="../Images/a632b45a1a399397068e2a4365c3e218.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SvUGx2l6-XdoVIfb"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">聚类前的GPS轨迹</p></figure><p id="1100" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本文的代码和教程可以在<a class="ae mg" href="https://github.com/steveyx/gps-trajectories-clustering" rel="noopener ugc nofollow" target="_blank"> my GitHub here </a>中找到。</p><h2 id="aee1" class="mh mi iq bd mj mk ml dn mm mn mo dp mp ko mq mr ms ks mt mu mv kw mw mx my mz bi translated">轨迹数据点减少</h2><p id="d08a" class="pw-post-body-paragraph kf kg iq kh b ki na jr kk kl nb ju kn ko nc kq kr ks nd ku kv kw ne ky kz la ij bi translated">Ramer-Douglas-Peucker (RDP)算法是减少折线点数的最常用方法之一。这个算法的目的是找到一个子集的点来代表整个折线。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">RDP函数返回子集点和点索引</p></figure><p id="7fa5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里参数<em class="nh">ε</em>设置为10(米)。在RDP之后，与原始数据点相比，轨迹中的数据点的数量显著减少。</p><pre class="lc ld le lf gt ni nj nk nl aw nm bi"><span id="2141" class="mh mi iq nj b gy nn no l np nq">traj #    data points original       after RDP<br/>0         266                        21<br/>1         276                        36<br/>2         239                        34<br/>...</span></pre><p id="f204" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这有助于大幅减少距离矩阵的计算时间。</p><pre class="lc ld le lf gt ni nj nk nl aw nm bi"><span id="4e2c" class="mh mi iq nj b gy nn no l np nq">distance matrix without RDP: 	 61.0960 seconds<br/>distance matrix with RDP: 	 0.4899 seconds</span></pre><h2 id="6406" class="mh mi iq bd mj mk ml dn mm mn mo dp mp ko mq mr ms ks mt mu mv kw mw mx my mz bi translated">轨迹相似性度量和距离矩阵</h2><p id="98df" class="pw-post-body-paragraph kf kg iq kh b ki na jr kk kl nb ju kn ko nc kq kr ks nd ku kv kw ne ky kz la ij bi translated">有多种方法可以测量两个轨迹的相似性，例如弗雷歇距离、面积法，如下图所示。它们可以使用<a class="ae mg" href="https://pypi.org/project/similaritymeasures/" rel="noopener ugc nofollow" target="_blank"> <em class="nh">相似性度量</em> </a> <em class="nh"> </em>包<em class="nh">来计算。</em></p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nr"><img src="../Images/ce9e3ced49ce9c76ac167306dc6b5ec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*s3_1r-PmIueECWet"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">轨迹相似性度量:弗雷歇距离和面积</p></figure><p id="ce06" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于本文中的示例，弗雷歇距离用于计算距离矩阵，如下所示。还支持区域相似性度量。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h2 id="79c8" class="mh mi iq bd mj mk ml dn mm mn mo dp mp ko mq mr ms ks mt mu mv kw mw mx my mz bi translated">DBSCAN聚类</h2><p id="8c7a" class="pw-post-body-paragraph kf kg iq kh b ki na jr kk kl nb ju kn ko nc kq kr ks nd ku kv kw ne ky kz la ij bi translated"><em class="nh"> Scikit-learn </em>提供了几种聚类方法。在本文中，我将介绍带有预先计算好的矩阵的DBSCAN。参数设置如下:</p><ul class=""><li id="105f" class="lr ls iq kh b ki kj kl km ko lt ks lu kw lv la lw lx ly lz bi translated"><em class="nh"> eps </em>:弗雷歇距离1000(米)，面积测量30万(米)。</li><li id="3738" class="lr ls iq kh b ki ma kl mb ko mc ks md kw me la lw lx ly lz bi translated"><em class="nh"> min_samples: </em> 1、确保所有轨迹都将被聚类成一个簇。</li></ul><p id="384b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">代码如下。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h2 id="06fc" class="mh mi iq bd mj mk ml dn mm mn mo dp mp ko mq mr ms ks mt mu mv kw mw mx my mz bi translated">结果和轨迹可视化</h2><p id="f67a" class="pw-post-body-paragraph kf kg iq kh b ki na jr kk kl nb ju kn ko nc kq kr ks nd ku kv kw ne ky kz la ij bi translated">Matplotlib是一个全面的Python可视化库。它为静态和动态可视化提供了灵活的解决方案。</p><p id="5b97" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用<em class="nh"> Matplotlib </em>中的子图可视化六个组的聚类结果。如下所示，大多数轨迹组都有几个簇。只有最后两组具有一个聚类，因为这些轨迹的相似性高(弗雷歇距离小于<em class="nh"> eps </em>，即1000)。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi ns"><img src="../Images/6122fbc52b6cf4a42b38b08204850e71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_W4oR0u4eYv5dhXy"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">聚类GPS轨迹</p></figure><h2 id="4580" class="mh mi iq bd mj mk ml dn mm mn mo dp mp ko mq mr ms ks mt mu mv kw mw mx my mz bi translated">结论</h2><p id="5741" class="pw-post-body-paragraph kf kg iq kh b ki na jr kk kl nb ju kn ko nc kq kr ks nd ku kv kw ne ky kz la ij bi translated">随着当今许多支持GPS的设备的使用，GPS轨迹聚类变得越来越流行。本文向您介绍了这一领域的常见问题。然后探索Python工具来解决这些问题。如需进一步阅读，您可以查看这些关于<a class="ae mg" href="https://martinfleischmann.net/line-simplification-algorithms/" rel="noopener ugc nofollow" target="_blank">折线简化</a>、<a class="ae mg" rel="noopener" target="_blank" href="/fast-discrete-fréchet-distance-d6b422a8fb77">距离矩阵计算</a>和<a class="ae mg" rel="noopener" target="_blank" href="/data-101s-spatial-visualizations-and-analysis-in-python-with-folium-39730da2adf">基于网络的空间可视化</a>的文章。</p><h2 id="083c" class="mh mi iq bd mj mk ml dn mm mn mo dp mp ko mq mr ms ks mt mu mv kw mw mx my mz bi translated">参考</h2><ol class=""><li id="f724" class="lr ls iq kh b ki na kl nb ko nt ks nu kw nv la nw lx ly lz bi translated">joo Paulo Figueira，<a class="ae mg" rel="noopener" target="_blank" href="/clustering-moving-object-trajectories-216c372d37e2">聚类移动物体轨迹</a>，</li><li id="9205" class="lr ls iq kh b ki ma kl mb ko mc ks md kw me la nw lx ly lz bi translated">William Yee，<a class="ae mg" rel="noopener" target="_blank" href="/a-gentle-introduction-to-iot-gps-trajectory-clustering-and-geospatial-clustering-daba8da8c41e">物联网/GPS轨迹聚类和地理空间聚类简介</a></li><li id="c2bd" class="lr ls iq kh b ki ma kl mb ko mc ks md kw me la nw lx ly lz bi translated">车辆能源数据集(VED，<a class="ae mg" href="https://arxiv.org/abs/1905.02081" rel="noopener ugc nofollow" target="_blank">用于车辆能源消耗研究的大规模数据集</a></li></ol></div></div>    
</body>
</html>