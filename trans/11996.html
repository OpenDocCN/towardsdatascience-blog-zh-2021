<html>
<head>
<title>Zooming In and Zooming Out in Matplotlib to Better Understand the Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Matplotlib 中放大和缩小以更好地理解数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/zooming-in-and-zooming-out-in-matplotlib-to-better-understand-the-data-b4a5f5b4107d?source=collection_archive---------17-----------------------#2021-12-02">https://towardsdatascience.com/zooming-in-and-zooming-out-in-matplotlib-to-better-understand-the-data-b4a5f5b4107d?source=collection_archive---------17-----------------------#2021-12-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/48f7e4a4c8589aec97bd05252be84d2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NiHUIjAU04ES0JDI"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">钱德勒·克鲁登登在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><div class=""/><div class=""><h2 id="2ba8" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">为每个地块提供完整的代码</h2></div><p id="d6c9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Matplotlib 可以说是 Python 中最流行的可视化库。还有，其他一些更高端的库也是基于 Matplotlib 构建的。我有几篇关于 Matplotlib 可视化技术的文章。请随意查看。我在这一页的底部有链接。</p><p id="29e9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本文将重点介绍一些缩放技术。有时，当我们制作散点图或线图时，我们可能会发现许多数据杂乱地放在一个地方。在这种情况下，放大那些杂乱的地方会有助于真正清楚地理解数据点。同样，如果数据点过于分散，就很难看出是否有趋势。缩小有助于查看数据中的任何趋势。</p><p id="bedb" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">幸运的是，Matplotlib 库有一些非常酷的技巧可以帮助我们，我们也可以使用一些简单的技术来放大和缩小。</p><p id="d522" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们来看一些例子。</p><p id="6b3f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们先导入并读取数据集。我用的是 Kaggle 的自动数据集。以下是数据集的链接:</p><div class="is it gp gr iu lu"><a href="https://github.com/rashida048/Data-visualization-in-python/blob/main/auto_clean.csv" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd jk gy z fp lz fr fs ma fu fw ji bi translated">main rashida 048/Data-visualization-in-python/auto _ clean . CSV</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">github.com</p></div></div><div class="md l"><div class="me l mf mg mh md mi ja lu"/></div></div></a></div><p id="c1b7" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是一个开放的数据集，这里提到的<a class="ae jg" href="https://www.kaggle.com/fazilbtopal/auto85/metadata" rel="noopener ugc nofollow" target="_blank"/>。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="4a9f" class="ms mt jj mo b gy mu mv l mw mx">import pandas as pd<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns</span><span id="ffe0" class="ms mt jj mo b gy my mv l mw mx">d = pd.read_csv("auto_clean.csv")</span></pre><p id="8aac" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个数据集相当大。所以我不能在这里分享任何截图。这些是列:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="e73c" class="ms mt jj mo b gy mu mv l mw mx">d.columns</span></pre><p id="3ae1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="6c99" class="ms mt jj mo b gy mu mv l mw mx">Index(['symboling', 'normalized-losses', 'make', 'aspiration', 'num-of-doors', 'body-style', 'drive-wheels', 'engine-location', 'wheel-base', 'length', 'width', 'height', 'curb-weight', 'engine-type', 'num-of-cylinders', 'engine-size', 'fuel-system', 'bore', 'stroke', 'compression-ratio', 'horsepower', 'peak-rpm', 'city-mpg', 'highway-mpg', 'price', 'city-L/100km', 'horsepower-binned', 'diesel', 'gas'], dtype='object')</span></pre><p id="1e6e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，我想在缩小技术上下功夫。</p><p id="9613" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为此，我将绘制一个长度与宽度的散点图。这是完整的代码，我会在情节之后解释一下:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="2b54" class="ms mt jj mo b gy mu mv l mw mx">fig = plt.figure(figsize = (8, 6))</span><span id="2de6" class="ms mt jj mo b gy my mv l mw mx">x = d['length']<br/>y = d['width']<br/>c = d['price']</span><span id="8fc1" class="ms mt jj mo b gy my mv l mw mx">ax = plt.scatter(x, y, s = 25, c = c)</span><span id="93f0" class="ms mt jj mo b gy my mv l mw mx">plt.xlabel('Length', labelpad = 8)<br/>plt.ylabel('Width', labelpad = 8)<br/>plt.title("Length vs Width and Color Represents the Changes of Price")</span><span id="2025" class="ms mt jj mo b gy my mv l mw mx">ax_new = fig.add_axes([0.2, 0.7, 0.2, 0.2])<br/>plt.scatter(x, y, s=5, c = c)</span></pre><figure class="mj mk ml mm gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mz"><img src="../Images/0cc7dbacfc75577d41ab93dcd247ed21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*OERqBIXZTE66pUE-eqnfEQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="d06e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">看，小区里面一个小的缩小窗口。我假设你已经知道如何做散点图了。我不想看那些代码。缩放窗口来自 fig.add_axes()函数，其中有一个参数。这是四个元素的列表[0.2，0.7，0.2，0.2]。这里最后两个元素 0.2 和 0.2 表示缩放窗口的高度和宽度。前两个元素 0.2 和 0.7 定义了缩放窗口的位置。请随意更改这些数字，看看会发生什么。</p><p id="0774" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们来看一些放大的技巧。这次我将使用长度与价格的关系图。我们需要先导入 mark_inset 和 inset_axes 函数。inset_axes 函数将定义缩放窗口的大小和缩放窗口的位置。另一方面，mark_inset 函数将绘制从原始点到缩放窗口的线。请查看下面代码中的注释，以获得一些清晰的理解。以下是完整的代码:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="3881" class="ms mt jj mo b gy mu mv l mw mx">from mpl_toolkits.axes_grid1.inset_locator import mark_inset, inset_axes</span><span id="3f06" class="ms mt jj mo b gy my mv l mw mx">plt.figure(figsize = (8, 5))<br/>x = d['length']<br/>y = d['price']</span><span id="64a2" class="ms mt jj mo b gy my mv l mw mx">ax = plt.subplot(1, 1, 1)<br/>ax.scatter(x, y)<br/>ax.set_xlabel("Length")<br/>ax.set_ylabel("Price")</span><span id="91a3" class="ms mt jj mo b gy my mv l mw mx">#Defines the size of the zoom window and the positioning<br/>axins = inset_axes(ax, 1, 1, loc = 1, bbox_to_anchor=(0.3, 0.7),<br/>                   bbox_transform = ax.figure.transFigure)</span><span id="a0aa" class="ms mt jj mo b gy my mv l mw mx">axins.scatter(x, y)</span><span id="a8ff" class="ms mt jj mo b gy my mv l mw mx">x1, x2 = 0.822, 0.838<br/>y1, y2 = 6400, 12000</span><span id="7665" class="ms mt jj mo b gy my mv l mw mx">#Setting the limit of x and y direction to define which portion to #zoom<br/>axins.set_xlim(x1, x2)<br/>axins.set_ylim(y1, y2)</span><span id="1573" class="ms mt jj mo b gy my mv l mw mx">#Draw the lines from the portion to zoom and the zoom window<br/>mark_inset(ax, axins, loc1=1, loc2=3, fc="none", ec = "0.4")<br/>plt.show()</span></pre><figure class="mj mk ml mm gt iv gh gi paragraph-image"><div class="gh gi na"><img src="../Images/ded7c7ab3eb3c6c4e150cd57bfd4a1c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*0ud5nidMkymJHNVZdECSwg.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="da8f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是最后一个放大的例子。这次我将使用支线剧情来呈现 zoom_in 窗口。上面会有两个小的放大窗口，下面是原来的大图。要缩放的部分将用颜色突出显示，连接线将清晰显示。请仔细检查代码中的注释，以便更清楚地了解代码。以下是完整的代码:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="bc67" class="ms mt jj mo b gy mu mv l mw mx">from matplotlib.patches import ConnectionPatch</span><span id="7018" class="ms mt jj mo b gy my mv l mw mx">fig = plt.figure(figsize=(8, 5))<br/></span><span id="b407" class="ms mt jj mo b gy my mv l mw mx">#the plot with red dots<br/>plot1 = fig.add_subplot(2,2,1) # two rows, two columns, fist cell<br/>plot1.scatter(d['city-mpg'], d['highway-mpg'], color = 'red')<br/>plot1.set_xlim(15, 20)<br/>plot1.set_ylim(17, 25)<br/>plot1.set_ylabel('highway-mpg', labelpad = 5)</span><span id="9593" class="ms mt jj mo b gy my mv l mw mx">#the plot with blue dots<br/>plot2 = fig.add_subplot(2, 2, 2)<br/>plot2.scatter(d['city-mpg'], d['highway-mpg'], color = 'blue')<br/>plot2.set_xlim(25, 30)<br/>plot2.set_ylim(25, 35)</span><span id="8a26" class="ms mt jj mo b gy my mv l mw mx">#the original plot<br/>plot3 = fig.add_subplot(2,2,(3,4)) # two rows, two colums, combined third and fourth cell<br/>plot3.scatter(d['city-mpg'], d['highway-mpg'], color = 'darkorchid', alpha = .7)<br/>plot3.set_xlabel('city-mpg', labelpad = 5)<br/>plot3.set_ylabel('highway-mpg', labelpad = 5)</span><span id="28db" class="ms mt jj mo b gy my mv l mw mx">#highlighting the portion of original plot to zoon in <br/>plot3.fill_between((15, 20), 10, 60, facecolor= "red", alpha = 0.2)<br/>plot3.fill_between((25, 30), 10, 60, facecolor= "blue", alpha = 0.2)</span><span id="2a9f" class="ms mt jj mo b gy my mv l mw mx">#connecting line between the left corner of plot1 and the left #corner of the red hightlight<br/>conn1 = ConnectionPatch(xyA = (15, 17), coordsA=plot1.transData,<br/>                       xyB=(15, 20), coordsB=plot3.transData, color = 'red')<br/>fig.add_artist(conn1)</span><span id="52be" class="ms mt jj mo b gy my mv l mw mx">#connecting line between the rightcorner of plot1 and the right #corner of the red hightlight<br/>conn2 = ConnectionPatch(xyA = (20, 17), coordsA=plot1.transData,<br/>                       xyB=(20, 20), coordsB=plot3.transData, color = 'red')<br/>fig.add_artist(conn2)</span><span id="be91" class="ms mt jj mo b gy my mv l mw mx">#connecting line between the left corner of plot2 and the left #corner of the blue hightlight<br/>conn3 = ConnectionPatch(xyA = (25, 25), coordsA=plot2.transData,<br/>                       xyB=(25, 30), coordsB=plot3.transData, color = 'blue')<br/>fig.add_artist(conn3)</span><span id="e95a" class="ms mt jj mo b gy my mv l mw mx">#connecting line between the right corner of plot2 and the right #corner of the blue hightlight<br/>conn4 = ConnectionPatch(xyA = (30, 25), coordsA=plot2.transData,<br/>                       xyB=(30, 30), coordsB=plot3.transData, color = 'blue')<br/>fig.add_artist(conn4)</span></pre><figure class="mj mk ml mm gt iv gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/96a47e46e4e741f598fd5def6f192cb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/1*KBro8dI2DR39cfRMdg8EnQ.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="d2b1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您对本文中的任何代码有任何疑问，请在评论部分提问。</p><h2 id="a965" class="ms mt jj bd nc nd ne dn nf ng nh dp ni lh nj nk nl ll nm nn no lp np nq nr ns bi translated">结论</h2><p id="e1a1" class="pw-post-body-paragraph ky kz jj la b lb nt kk ld le nu kn lg lh nv lj lk ll nw ln lo lp nx lr ls lt im bi translated">对于这个数据集，放大或缩小可能不太重要。但在现实生活中，有很多数据集实际上需要放大或缩小才能更好地理解数据。我希望你能在现实生活的项目中使用这些技术，做一些很酷的工作。</p><p id="22a8" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">欢迎随时关注我的推特(Twitter)和我的新 T2 YouTube 频道(T3)。</p><h2 id="84ea" class="ms mt jj bd nc nd ne dn nf ng nh dp ni lh nj nk nl ll nm nn no lp np nq nr ns bi translated">更多阅读</h2><div class="is it gp gr iu lu"><a rel="noopener follow" target="_blank" href="/your-everyday-cheatsheet-for-pythons-matplotlib-c03345ca390d"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd jk gy z fp lz fr fs ma fu fw ji bi translated">Python Matplotlib 的日常备忘单</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">完整的可视化课程</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">towardsdatascience.com</p></div></div><div class="md l"><div class="ny l mf mg mh md mi ja lu"/></div></div></a></div><div class="is it gp gr iu lu"><a rel="noopener follow" target="_blank" href="/five-advanced-plots-in-python-matplotlib-134bfdaeeb86"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd jk gy z fp lz fr fs ma fu fw ji bi translated">Python 中的五个高级绘图— Matplotlib</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">带示例的交互式 3d 绘图</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">towardsdatascience.com</p></div></div><div class="md l"><div class="nz l mf mg mh md mi ja lu"/></div></div></a></div><div class="is it gp gr iu lu"><a rel="noopener follow" target="_blank" href="/a-collection-of-advanced-visualization-in-matplotlib-and-seaborn-with-examples-2150e6c3f323"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd jk gy z fp lz fr fs ma fu fw ji bi translated">Matplotlib 和 Seaborn 中的高级可视化集合，带有示例</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">丰富可视化技术和技能</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">towardsdatascience.com</p></div></div><div class="md l"><div class="oa l mf mg mh md mi ja lu"/></div></div></a></div><div class="is it gp gr iu lu"><a rel="noopener follow" target="_blank" href="/a-collection-of-advanced-data-visualization-in-matplotlib-and-seaborn-f08136172e14"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd jk gy z fp lz fr fs ma fu fw ji bi translated">Matplotlib 和 Seaborn 中的高级数据可视化集合</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">让你的故事更有趣</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">towardsdatascience.com</p></div></div><div class="md l"><div class="ob l mf mg mh md mi ja lu"/></div></div></a></div><div class="is it gp gr iu lu"><a rel="noopener follow" target="_blank" href="/an-ultimate-cheatsheet-of-data-visualization-in-seaborn-be8ed13a3697"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd jk gy z fp lz fr fs ma fu fw ji bi translated">用 Python 的 Seaborn 库实现数据可视化的终极指南</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">对学习者来说也是一个很好的资源</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">towardsdatascience.com</p></div></div><div class="md l"><div class="oc l mf mg mh md mi ja lu"/></div></div></a></div><div class="is it gp gr iu lu"><a rel="noopener follow" target="_blank" href="/an-ultimate-cheat-sheet-for-data-visualization-in-pandas-f7bc239c9937"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd jk gy z fp lz fr fs ma fu fw ji bi translated">熊猫数据可视化的终极备忘单</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">熊猫的所有基本视觉类型和一些非常高级的视觉…</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">towardsdatascience.com</p></div></div><div class="md l"><div class="od l mf mg mh md mi ja lu"/></div></div></a></div></div></div>    
</body>
</html>