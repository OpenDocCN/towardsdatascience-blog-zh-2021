<html>
<head>
<title>How to Analyze Blood Glucose Data with Python Data Science Packages</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python数据科学包分析血糖数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-analyze-blood-glucose-data-with-python-data-science-packages-4f160f9564be?source=collection_archive---------8-----------------------#2021-09-01">https://towardsdatascience.com/how-to-analyze-blood-glucose-data-with-python-data-science-packages-4f160f9564be?source=collection_archive---------8-----------------------#2021-09-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1e65" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Pandas、NumPy、Matplotlib、Seaborn、Plotly等工具从血糖监测仪数据中提取信息。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/68771fe8eb300ac9e5743c63045017f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wyUrNWsd9YYKsROx9_h4gg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞内卡之死，曼努埃尔·多明格斯·桑切斯，1871年。</p></figure><p id="37b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">1型糖尿病糟透了。将血糖水平始终保持在目标范围内对于预防和/或延迟严重健康问题的发生非常重要，如心脏病、视力丧失、肾病、神经损伤以及其他一系列不好的事情<a class="ae kv" href="https://www.hopkinsallchildrens.org/Patients-Families/Health-Library/HealthDocNew/Diabetes-Control-Why-It-s-Important" rel="noopener ugc nofollow" target="_blank">。不过，我不是来这里哀叹这有多糟糕的。我在这里演示如何分析血糖数据，以改善您和/或您所爱的人的整体血糖控制。</a></p><p id="2b4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">这篇文章的目标是:</strong></p><ul class=""><li id="27ad" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><strong class="ky ir">为了深入分析我的血糖(BG)随时间的变化情况，</strong></li><li id="b763" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">根据这些数据确定可行的措施来改善我的血糖控制，以及</strong></li><li id="aebd" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">为希望这样做的人提供一个教育模板和工具包。</strong></li></ul><p id="7082" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的可视化和分析对那些与T1糖尿病作斗争的人来说非常有价值。我希望这篇文章能给那些人必要的知识和技能来进行他们自己的分析，并最终改善他们的生活。这里讨论的所有代码都是我写的，是免费的，可以在本文末尾下载。</p><blockquote class="mg mh mi"><p id="4769" class="kw kx mj ky b kz la jr lb lc ld ju le mk lg lh li ml lk ll lm mm lo lp lq lr ij bi translated">“最重要的不是你承受了什么，而是你如何承受。”——塞内加，罗马斯多葛派哲学家，论普罗维登斯</p></blockquote></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><p id="18dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我使用了发表在<em class="mj">糖尿病技术&amp;治疗学</em>杂志上的<a class="ae kv" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2903980/" rel="noopener ugc nofollow" target="_blank">论文</a>来确定哪些统计方法和图形表示是相关的，并为希望分析血糖监测器数据的人提供最大价值。以下是这类分析最重要的统计工具:</p><ul class=""><li id="6936" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><strong class="ky ir">平均血糖值</strong> (mg/dL)，总体血糖控制的通用描述符。</li><li id="584e" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">血糖值的四分位数范围</strong>，适用于非对称分布。</li><li id="5673" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">BG变化率的标准偏差，</strong>代表葡萄糖转换的扩散和范围，或葡萄糖波动稳定性的度量。</li><li id="9524" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">花费在预定值之内、之下和之上的时间百分比。</strong>由<a class="ae kv" href="https://pubmed.ncbi.nlm.nih.gov/8366922/" rel="noopener ugc nofollow" target="_blank">糖尿病控制和并发症试验</a>建议的三个临床上明显不同的血糖区域是:<strong class="ky ir">低血糖</strong> (BG &lt; 70 mg/dL)、<strong class="ky ir">目标范围</strong> ( 70 &lt; BG &lt; 180)、以及<strong class="ky ir">高血糖</strong> (BG &gt; 180)。</li><li id="04db" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">叠加总葡萄糖轨迹的葡萄糖轨迹，</strong>直观展示血糖值高于或低于相关阈值的时间。</li><li id="5972" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">庞加莱图(滞后图)，</strong>方便直观显示总体血糖控制和快速血糖波动。</li><li id="0d8b" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">控制可变性网格分析</strong>，一种用于确定血糖控制趋势的可视化工具。</li></ul><p id="81e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下部分将演示如何计算或创建相关的价值或可视化，解释它为什么重要，并举例分析我自己的数据。</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="b4b9" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">数据预处理</h1><p id="400a" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">第一步是拉数据。在我的情况下，我使用Dexcom连续血糖监测仪(CGM)。通过Dexcom Clarity可以轻松访问您的数据，这些数据可以作为CSV文件下载。我将提取30天的数据。输出如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/19aff872dc511710b86edbd9e607dd4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2AdzIqUyr39_cKCav5UI1Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd ns">图一。</strong>将Dexcom Clarity数据截图为CSV文件。(图片由作者提供)</p></figure><p id="ccdd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们要查看的重要数据是<em class="mj">时间戳</em>和<em class="mj">葡萄糖值(mg/dL) </em>列。每5分钟，CGM获取一个数据点，存储它，并显示给用户。</p><p id="df48" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们需要导入所有相关的库。今天我们将使用Pandas、NumPy、Matplotlib、Seaborn和Plotly。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/ea071385d5aa207ac20fe67cb5871852.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S0rUscONKW9E7QLo4xII3A.png"/></div></div></figure><p id="7bc0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们需要的唯一相关列是<em class="mj">时间戳</em>和<em class="mj">葡萄糖值(mg/dL)。</em>我们还可以删除数据帧的前几行，重置索引，并清除列名:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/62b1e727db01cdab655d54f43ce27a1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5-2kosW_zuej14HRkRTyhw.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/8bded606ab2318f362982bdb69456588.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*WUtmQnNQVxhv9hSPWzOaeA.png"/></div></figure><p id="e5bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，有了一个清晰的数据框架，我们就可以开始分析了。</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="4f18" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">平均葡萄糖值</h1><p id="c954" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">给定期间的平均葡萄糖值是总体血糖控制的简单描述<strong class="ky ir"/>。糖尿病患者的目标范围在70和180 mg/dL之间，正常(非糖尿病)平均葡萄糖在90和110 mg/dL之间。</p><p id="b08d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">熊猫们。describe()(描述)函数为我们提供了值的总数和一些描述性统计数据，包括平均值:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/e00b683f4448a2fd2fdf2832d3ddcb5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9-M3jISJ-ic-4i3ty_W4yw.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/f22fcafbfb0ad2c03c48ea729e1eb6ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*KsmwsuLLVg1zAqD21Hc4SQ.png"/></div></figure><p id="2dbb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">我在这30天内的平均葡萄糖值为117毫克/分升</strong>，相当不错。我应该指出，我没有胰岛素泵，而是每天至少注射4次胰岛素来维持目标水平，每次注射的量主要取决于碳水化合物的消耗量(以及许多其他因素)。</p><blockquote class="mg mh mi"><p id="40b1" class="kw kx mj ky b kz la jr lb lc ld ju le mk lg lh li ml lk ll lm mm lo lp lq lr ij bi translated"><strong class="ky ir">注意</strong> : <strong class="ky ir">上面显示的标准差(STD)值可能会产生误导</strong>，因为血糖测量范围高度不对称——低血糖范围(40–70mg/dL)在数值上比高血糖范围(180–400+mg/dL)窄。因此，葡萄糖值的分布高度倾斜，STD主要受高血糖波动的影响，而对低血糖不敏感[1]。出于这个原因，四分位距(IQR)是一个更适合非对称分布的衡量标准。</p></blockquote></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="e4d5" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">血糖值的四分位数范围</h1><p id="0b6f" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">可以使用Seaborn创建一个盒须图来演示我们在上一节中计算的IQR:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/fdd99a468116c647cb85cd90e1ac5dc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KDyKWseiuRCijMGX8mmVcw.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/056038d74a04c75d1d88812e195b9e90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0OPwVFbtg8e_-TlFE6SErA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd ns">图二。</strong>血糖四分位距。(图片由作者提供)</p></figure><p id="b309" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的图是我的IQR的视觉表现。值的范围从~ 40(CGM可检测的最小值)到200，超过200的点被归类为异常值，由IQR确定。</p><p id="fc09" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以根据一周中的某一天来划分图表，以尝试识别任何趋势:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/a3295298a80452dc04540115edf1bc0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*26KGEH10VOA75UKLBBPs6g.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/8154bda04f7cbf9e62365918b11bb9b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L8mw8XRMgzqqzZpR_txsjA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd ns">图三。</strong>用Plotly生成的盒须图在一周中的某一天拆分。(图片由作者提供)</p></figure><p id="c5ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">上面的图3 </strong>揭示了一些有趣的见解。让我们特别来看看星期六。注意位于顶部“须状物”之外的点——这些是异常值，或者在数值上远离其余数据的观察值。虽然周六的IQR(盒子)相当小，但看起来我有一次不寻常的高血糖水平之旅。由于周末通常对我来说在饮食和锻炼习惯方面不太结构化，这是有意义的。饮酒、非正常饮食(例如在餐馆就餐)以及潜在的缺乏锻炼都是我在周六更频繁发生的事情，都可能导致血糖控制较差。</p><p id="c653" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从这个分析中可以得出一个可行的见解，那就是我需要更加注意我的周末习惯，并且在这些时间里更加重视血糖控制。</p><p id="1ef5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是同样的GIF格式的图表，展示了Plotly的一个有趣的好处:它是交互式的！将鼠标悬停在图形的不同区域上可以很容易地比较数值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/43779c6ec15b2fd1b354013e921c6fe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*blcI10JSmQEm7E9st70Jcg.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd ns">图4。</strong>盒须图GIF，展示Plotly的交互性。(图片由作者提供)</p></figure></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="3d00" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">血糖变化率的标准偏差</h1><p id="73de" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">如平均葡萄糖值一节所述，不建议<em class="mj">而非</em>计算简单葡萄糖值随时间变化的标准差(SD)。重申原因:</p><ol class=""><li id="5207" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr od ly lz ma bi translated">“血糖测量范围高度不对称，</li><li id="d939" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr od ly lz ma bi translated">低血糖范围在数值上比高血糖范围窄，并且</li><li id="7e4f" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr od ly lz ma bi translated">个体的葡萄糖值的分布通常是相当偏斜的。"[1]</li></ol><p id="1317" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">相反，我们可以计算血糖值随时间的<em class="mj">变化率</em>，这通常是对称的，并计算其标准偏差。所得值在统计上是准确的，并可作为血糖稳定性的指标。<strong class="ky ir">较高的血糖变化率标准差表明血糖变异性增加，因此控制较差。</strong></p><p id="23b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了计算变化率，我们使用以下公式:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/c357c5067a8c663a01114d0449619502.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*XsgAPt8sNG9H0c4MOu2e-g.png"/></div></figure><p id="e3c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其中变化率以(毫克/分升)/分钟为单位。因为我们的读数是每5分钟读取一次，所以分母就是5。在Python中，它看起来像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/756039d3eb8352806ae3c05b824baa88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vOZdBA4IULlA2FUIqG0cdg.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/de3bc59b81b779eb219ab93638856c5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*k43Cu4r03e591EhJqAE0fg.png"/></div></figure><p id="ba32" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了对此进行可视化，我们将使用Seaborn直方图和一些有趣的f字符串格式，用变化率的平均值和标准偏差值自动填充标题:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/c5b7024ec9c001d0f9bb6e8b70e7013c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ze4n1JOK2_TTGE6oDa1mUw.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/6c24bb6d2745288de037f19332b5a85f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*fOc5NPYPQHibrK5eu3cKIw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd ns">图五。</strong>血糖变化率图。(图片由作者提供)</p></figure><p id="9d5c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">价值本身并不十分直观。我的血糖值的标准差是0.99，这意味着我的大部分时间(~68%)是在血糖变化率在-1和+1之间的情况下度过的。如果标准差是5，这意味着我的血糖水平波动更大更快，这不是一个理想的状况。</p><p id="4aa5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了使该分析最具影响力，它将被用作治疗变化之间的<strong class="ky ir">比较工具</strong>。你可以计算一个30天的标准偏差，然后实施一些改变(胰岛素与碳水化合物的比率，日常锻炼，不同类型的锻炼，饮食的改变，等等。)并在接下来的30天内再次计算。希望第二个数据集的标准差更小，您可以量化这种变化对您整体血糖控制的影响。</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="2a1f" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">在范围内的时间百分比(TIR)</h1><p id="a5fd" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">了解各种范围内的时间百分比作为CGM变化的一般行为的指示是有用的。如本研究前面所述，相关范围如下:</p><ul class=""><li id="7b7b" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><strong class="ky ir">低血糖</strong>(血糖&lt; 70毫克/分升)</li><li id="a1cd" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">目标范围</strong> ( 70毫克/分升&lt;血糖&lt; 180毫克/分升)</li><li id="b064" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">高血糖</strong>(血糖&gt; 180毫克/分升)</li></ul><p id="f0b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个值的计算对我来说有点棘手，涉及到Pandas方法，如<strong class="ky ir"> <em class="mj">。grouper()，。解散堆叠()和。菲尔娜()。</em> </strong>参见下面的代码和相应的输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/430cc5016ba2c5b3238583dfcfd3eb92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4NiRnobHByPCZWl1g0JBSQ.png"/></div></div></figure><p id="53e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以通过计算每个离散时间段的简单百分比来总结这些结果。在本例中，我使用f-string格式创建了一个间距很小的表格输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/1b8ea12a0b50c71fdb6e4f4fe5561b9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7-E0KDp5fBjX_3XMVjNUzg.png"/></div></div></figure><p id="5327" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这30天的时间里，<strong class="ky ir">我的BG值在大约90%的时间范围内</strong>。我希望这个数字更高，但它永远不会是完美的。<strong class="ky ir">最终，较高的TIR与较低的微血管并发症风险相关</strong><strong class="ky ir">【2】</strong>。TIR应与实验室得出的A1C值结合起来考虑，以准确评估您自己的日常血糖变化。</p><p id="f7c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我只能找到一些TIR目标的例子。Diabetes.org规定的目标是至少70%的TIR，但我个人认为这太低了。可以说，TIR越高越好。</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="7c72" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">葡萄糖痕迹</h1><p id="8e61" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">葡萄糖轨迹图仅仅是BG值的时间序列。可视化血糖水平随时间的波动很有用，可以确定一天中是否有任何趋势。</p><p id="9405" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我编写了下面的代码来创建一个有按钮来改变显示区域的交互式图形。例如，单击“1d”会将窗口更改为仅显示一天的数据。类似地，“1m”会将视图更改为包含一个月的数据。从那里，您可以来回拖动以查看血糖值如何随时间波动:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/05b4751c165188dc0f84a217c6559a21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dOrMlk309SAhstniFixOgQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/8ab280dae101132aad20b3040e4c9279.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3-9k03r2-ie-MPGjjucB0w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd ns">图六。</strong>葡萄糖值对时间，叠加总葡萄糖值。(图片由作者提供)</p></figure><p id="0733" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">上图6 </strong>是我2021年7月25日的BG。10点30分左右，我的血糖超过高血糖阈值，直到12点。红线清楚显示了偏移的持续时间，这被称为<em class="mj">聚集葡萄糖轨迹</em>。没有这条线，很难快速知道血糖值是否在可接受的范围内。例如，从1500年到1900年，血糖水平明显上升，随后下降。虽然直观上这可能表明在此期间缺乏控制，但叠加的聚集葡萄糖迹线(红线)显示BG值从未越过高血糖或低血糖阈值，表明血糖控制令人满意。</p><p id="303e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了计算总的葡萄糖轨迹，我使用简单的if/else逻辑在DataFrame中创建了一个新列:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/01ada2676e4e643caa652ee7f43e66ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l_nQorBLRPjR0Og7MOC2zQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/3e58e522f46af5e3a85a8551fb4b9ee2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QGeN5Dpzgp152yyIL5jHHg.png"/></div></div></figure></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="ea1d" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated"><strong class="ak">庞加莱图</strong></h1><p id="18bb" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">庞加莱图传统上在物理学中用于可视化系统的动态行为。在这个用例中，“<em class="mj">一个更小、更集中的图表示系统(患者)的稳定性，而一个更分散的庞加莱图表示系统(患者)的不规则性，在我们的情况下反映出较差的葡萄糖控制和快速的葡萄糖偏移</em>。”[1]</p><p id="09d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">图中每个点的坐标BG(t-1)在x轴上，BG(t)在y轴上。每个点的坐标(y-x)之差代表血糖变化率。为了计算这个，我简单地在DataFrame中创建了一个名为“Lag”的新列，并使用了熊猫<em class="mj">。shift() </em>函数获取(t-1):</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/be65b7d18ed4894b5a7e3cf0b9ba32d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5diE0H4kTdx8bjoC2Db9PA.png"/></div></div></figure><p id="80e5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该图是可视化治疗变化的<strong class="ky ir">效果的理想对比工具。</strong>例如，可以收集30天期间的血糖“控制”数据，对治疗进行一些改变(例如，调整碳水化合物比率、调整基础剂量、定期锻炼、改变饮食等。)30天，并收集血糖数据，然后将这两个时间段相邻绘制，并比较其分布。更集中的第二个30天时期将指示有益的治疗。</p><p id="3d4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于我没有任何可以比较的治疗变化，我决定用3个独立的时间框架展示庞加莱图——一个“好的一天”,一个“坏的一天”,以及总共30天的时间段:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/52172a5bdef68af960aa993ce4d44952.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YkWcNyXRYYtsngshIitDWA.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/0b3fe556c1325112999b718950743f57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1QcuPhbTEJ7drMUZTqs1Tw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd ns">图七。</strong>比较三个不同时期血糖控制的庞加莱图。(图片由作者提供)</p></figure><p id="9691" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从上面的<strong class="ky ir">图7 </strong>可以清楚地看到，最左边的图确实是“糟糕”的一天，点数分布越大，表明血糖变化越大。</p><p id="0e00" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">“30天总计”图表上有一个异常点，这是我的CGM在两个小时内无法获取数据的结果。在此期间，我的血糖变化了108 mg/dL，导致两个相邻时间戳之间存在显著差异。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/b5d27fefaff6aa16d493e098e5f6a847.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7XQOWFS4iE7-5UPb6QVzGg.png"/></div></div></figure></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="9745" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">控制可变性网格分析(CVGA)</h1><p id="b60e" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">把最好的留到最后，对我来说，CVGA是整个项目中最具洞察力的一幅图。CVGA是另一个可视化整体血糖控制的工具。在我们看了图表之后，我会解释它是什么:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/2bf6c9d27e4b30a6fa27582daf8e50d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IBflijRDwu8hY3Z8jj3ChQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/340bedb76b02bf5d8239a5dfe333a9dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SAmYv4h11gwUzZctC3kQYw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd ns">图8。</strong>控制可变性网格分析。(图片由作者提供)</p></figure><p id="1f6e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">图8<strong class="ky ir">上的每个点</strong>代表这30天期间的一天<strong class="ky ir">。每个点的x坐标是该24小时内的最小<em class="mj">血糖值</em>，y坐标是该24小时内的最大<em class="mj">血糖值</em>。(注意x轴的反方向。)我通过创建一个按天聚合的新数据框架并使用NumPy的min和max聚合函数来计算这些值:</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/701ed90c5a1b2a628188be1c2bf80ff2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tzlsBsHGSPnU43WLZqX2nA.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ow"><img src="../Images/d8ce92c8c39c4f5f28ee3a27fc53e62f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*suXMgUUHjwZ5CXQCmvlcZw.png"/></div></div></figure><p id="498b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了解释该图，让我们来看一个例子点，图8 中的红色“X”，其坐标为(56，181)。从我们之前显示每日最小值和最大值的DataFrame输出中，我们可以看到该坐标对应于2021年7月19日。这一天，我的最低血糖值为56，最高血糖值为181，这一数据点位于图表的“较低C”部分。理想的一天会落在图表的绿色区域，完美的一天在“A”部分。“A”天的最低温度在90度到110度之间，最高温度低于180度。各区域[1]的定义见下面的<strong class="ky ir">表1 </strong>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ox"><img src="../Images/cb15ed4fe8a46bfbf180505023000e89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LTo9XhdQsUhoVmk06936Mw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd ns">表1</strong> CVGA区定义。<a class="ae kv" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2903980/" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><p id="3ac8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">CVGA表明我的血糖趋势低于正常水平。具体来说，它表明<strong class="ky ir">我倾向于对高点</strong>进行过度修正。我显然需要重新评估我的高血糖校正率，并更加重视减少我经历的低血糖次数。</p><p id="2f97" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我在CVGA的结果看起来相当差，但我们必须记住，他们没有考虑低或高的持续时间，只是绝对的最小值和最大值。我很快纠正了低血糖(基于“在范围内的时间百分比”一节中讨论的结果)，但这些低血糖症仍然对整体健康有害，必须加以解决。将这些分析结合起来考虑，对你自己的血糖控制有一个整体的了解是很重要的。</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="ed62" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">结论——自己试试！</h1><p id="7d51" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">非常感谢你的阅读。如果你或你认识的人是T1糖尿病患者，希望你在这篇文章中发现了价值。你可以用你自己的数据创建我在这里展示的所有相同的图表——只需从<a class="ae kv" href="https://github.com/walkerpayne/Glucose-Analysis" rel="noopener ugc nofollow" target="_blank">我的GitHub repo </a>下载Jupyter笔记本。如果你有任何问题，我很乐意帮忙。欢迎在下面或GitHub上发表评论。</p><blockquote class="mg mh mi"><p id="c3ff" class="kw kx mj ky b kz la jr lb lc ld ju le mk lg lh li ml lk ll lm mm lo lp lq lr ij bi translated">医疗建议免责声明:本文中包含的信息，包括但不限于文本、图形、图像和其他材料，仅供参考。本文中的任何材料都不能替代专业的医疗建议、诊断或治疗。在开始新的医疗保健方案之前，如果您对医疗状况或治疗有任何疑问，请务必向您的医生或合格的医疗保健提供者寻求建议，切勿因为您在此阅读或了解的内容而忽视专业医疗建议或延迟寻求建议。</p></blockquote><p id="4a02" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">参考资料:</p><p id="64d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[1]https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2903980/<a class="ae kv" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2903980/" rel="noopener ugc nofollow" target="_blank"/></p><p id="d764" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[2]<a class="ae kv" href="https://clinical.diabetesjournals.org/content/38/5/439" rel="noopener ugc nofollow" target="_blank">https://clinical.diabetesjournals.org/content/38/5/439</a></p></div></div>    
</body>
</html>