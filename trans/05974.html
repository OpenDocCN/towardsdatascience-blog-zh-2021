<html>
<head>
<title>Easily plot earthquakes data on top of the topographic map in a few steps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">只需几个步骤，即可在地形图上轻松绘制地震数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/easily-plot-earthquakes-data-on-top-of-the-topographic-map-in-a-few-steps-c165673035b4?source=collection_archive---------30-----------------------#2021-05-28">https://towardsdatascience.com/easily-plot-earthquakes-data-on-top-of-the-topographic-map-in-a-few-steps-c165673035b4?source=collection_archive---------30-----------------------#2021-05-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d9a4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我们从CSV文件中读取地震数据，并使用PyGMT将其绘制在地图上</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/05a5447126618ef30a185f45b1ee938e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5hOplOY1cWaiESxF.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">地图上的地震数据(图片作者提供)</p></figure><p id="6f65" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本帖中，我们将首先读取一个包含地震位置(纬度和经度)、震级和深度的CSV文件，然后将其叠加在地形图上。使用PyGMT API自动下载地形数据。</p><h1 id="4b7d" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">读取事件数据的CSV文件</h1><p id="9fe1" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">我有一个包含地震事件数据的CSV文件。数据来自PyGMT示例数据集。它可以在本地获得和保存:</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="27a2" class="mt ls iq mp b gy mu mv l mw mx">data = pygmt.datasets.load_japan_quakes()<br/>data.to_csv('my_events_data.csv', index=False)</span></pre><p id="79bf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">数据是表格形式的，所以我们可以使用pandas的<code class="fe my mz na mp b">read_csv</code>方法来读取它。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="a73a" class="mt ls iq mp b gy mu mv l mw mx">import pandas as pd</span><span id="eab3" class="mt ls iq mp b gy nb mv l mw mx"># this file is retrieved from the pygmt dataset<br/>data = pd.read_csv('my_events_data.csv')</span></pre><h1 id="9194" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">在地形图上绘制数据</h1><p id="ca88" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">首先，我们根据数据定义区域。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="a7b8" class="mt ls iq mp b gy mu mv l mw mx"># Set the region<br/>region = [<br/>    data.longitude.min() - 1,<br/>    data.longitude.max() + 1,<br/>    data.latitude.min() - 1,<br/>    data.latitude.max() + 1,<br/>]</span></pre><p id="498e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后我们初始化PyGMT“Figure”对象:</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="c31f" class="mt ls iq mp b gy mu mv l mw mx">fig = pygmt.Figure()</span></pre><p id="63f5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，我们获得高分辨率的地形数据，并使用标准化的<code class="fe my mz na mp b">etopo1</code>色图绘制它。我们设定最低海拔为-8000米，最高海拔为5000米。如果在此范围之外有任何地形区域，则用白色标出。我们选择宽度为4英寸的“墨卡托”投影进行绘图。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="5191" class="mt ls iq mp b gy mu mv l mw mx"># make color pallets<br/>pygmt.makecpt(<br/>    cmap='etopo1',<br/>    series='-8000/5000/1000', #min elevation of -8000m and max of 5000m<br/>    continuous=True<br/>)</span><span id="cfe9" class="mt ls iq mp b gy nb mv l mw mx"># define etopo data file<br/>topo_data = "<a class="ae nc" href="http://twitter.com/earth_relief_30s" rel="noopener ugc nofollow" target="_blank">@earth_relief_30s</a>"<br/># plot high res topography<br/>fig.grdimage(<br/>    grid=topo_data,<br/>    region=region,<br/>    projection='M4i',<br/>    shading=True,<br/>    frame=True<br/>)</span></pre><p id="05a6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，我们用海岸线绘制海岸线，并在地图上添加了一个框架。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="260d" class="mt ls iq mp b gy mu mv l mw mx">fig.coast(shorelines=True, frame=True)</span></pre><p id="9fde" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，我们绘制数据:</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="8f43" class="mt ls iq mp b gy mu mv l mw mx"># colorbar colormap<br/>pygmt.makecpt(cmap="jet", series=[<br/>              data.depth_km.min(), data.depth_km.max()])<br/>fig.plot(<br/>    x=data.longitude,<br/>    y=data.latitude,<br/>    sizes=0.1*data.magnitude,<br/>    color=data.depth_km,<br/>    cmap=True,<br/>    style="cc",<br/>    pen="black",<br/>)<br/>fig.colorbar(frame='af+l"Depth (km)"')<br/>fig.savefig('my_earthquakes.png')</span></pre><p id="b7f8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们用代表地震深度的颜色和代表地震震级的圆圈的大小来绘制数据。我们在底部添加了水平色条。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f5c52a55c613fa46db95a9549a87cda7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lFvAOQOwyMcuVLhncfAgig.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">地图上的地震数据(图片作者提供)</p></figure><h1 id="e375" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">完整脚本</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><p id="c4a8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="nm">原载于2021年5月28日http://www.earthinversion.com</em><em class="nm">的</em> <a class="ae nc" href="https://www.earthinversion.com/utilities/how-to-plot-the-earthquake-data-on-a-topographic-map/" rel="noopener ugc nofollow" target="_blank"> <em class="nm">。</em></a></p></div></div>    
</body>
</html>