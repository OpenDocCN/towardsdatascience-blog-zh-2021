<html>
<head>
<title>Install Hugging Face Transformers on Apple M1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在苹果 M1 上安装拥抱脸变形金刚</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/hugging-face-transformers-on-apple-m1-26f0705874d7?source=collection_archive---------4-----------------------#2021-10-27">https://towardsdatascience.com/hugging-face-transformers-on-apple-m1-26f0705874d7?source=collection_archive---------4-----------------------#2021-10-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="892b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">以及 Tensorflow 和 Tokenizers 包</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1b02cbd596b2e5f3986b7958c4ba7c49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vKIJctt3OTQA2Etw"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@latorware?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">大卫·拉托雷·罗梅罗</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="e2ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不是所有的事情都来得容易。向苹果 M1 公司的过渡也有类似的故事要讲。尽管我喜欢这种速度，但我讨厌不得不寻找非传统的方法来安装传统的库，否则在命令提示符下只有一行代码。</p><p id="0fb9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你是苹果 M1 用户，并与 NLP 密切合作，有可能你以前遇到过这种情况，甚至找到了解决方案，但如果没有，或者你最近加入了 M1 党，这篇文章提供了一种方法，你可以在你的 MacBook 上安装 M1 芯片拥抱脸变压器。而且不，不是<code class="fe ls lt lu lv b">pip install transformers</code>。</p><p id="2caa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">启动和运行变压器有三个步骤。</p><ol class=""><li id="88c4" class="lw lx iq ky b kz la lc ld lf ly lj lz ln ma lr mb mc md me bi translated">安装 Tensorflow</li><li id="b1a4" class="lw lx iq ky b kz mf lc mg lf mh lj mi ln mj lr mb mc md me bi translated">安装 Tokenizers 包(带 Rust 编译器)</li><li id="df44" class="lw lx iq ky b kz mf lc mg lf mh lj mi ln mj lr mb mc md me bi translated">安装变压器包</li></ol><p id="75a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然它的工作，请考虑研究更可靠的方法来安装变压器-写于 2021.10.25</p><h2 id="7353" class="mk ml iq bd mm mn mo dn mp mq mr dp ms lf mt mu mv lj mw mx my ln mz na nb nc bi translated">1.张量流</h2><p id="98df" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">安装 tensorflow 很容易，你只需指向你现有的虚拟 env，或者你可以创建一个新的来玩，或者如果你不想创建一个新的，它会为你创建一个。</p><ol class=""><li id="1a79" class="lw lx iq ky b kz la lc ld lf ly lj lz ln ma lr mb mc md me bi translated"><em class="ni">创建并启用</em> <em class="ni">虚拟环境</em></li></ol><p id="d3c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您还没有 virtualenv 软件包，请安装它</p><pre class="kg kh ki kj gt nj lv nk nl aw nm bi"><span id="e5f9" class="mk ml iq lv b gy nn no l np nq">pip install virtualenv</span></pre><p id="0e03" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过键入以下命令创建 virtualenv</p><pre class="kg kh ki kj gt nj lv nk nl aw nm bi"><span id="af1e" class="mk ml iq lv b gy nn no l np nq">python virtualenv venv --python=python3</span></pre><p id="db24" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要启用虚拟环境</p><pre class="kg kh ki kj gt nj lv nk nl aw nm bi"><span id="e70f" class="mk ml iq lv b gy nn no l np nq">source venv/bin/activate</span></pre><p id="510e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">2.<em class="ni">下载</em></p><p id="f6ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击从<a class="ae kv" href="https://github.com/apple/tensorflow_macos/releases" rel="noopener ugc nofollow" target="_blank">下载最新版本。确保下载包含安装脚本的<strong class="ky ir">tar.gz</strong>文件。在撰写本文时，最新的版本是 tensorflow-macos 0.1 alpha 3。没错，是<em class="ni"> tensorflow-macos，</em>而不是 tensorflow。</a></p><p id="bdb0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">3.<em class="ni">安装</em></p><p id="ed0a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦有了脚本，转到下载目录并运行下面的命令<code class="fe ls lt lu lv b">./install_venv.sh --prompt</code>。它会询问您虚拟环境文件夹的路径，请提供我们创建的路径。您也可以让它创建另一个，但在我看来，创建我们打算使用的或我们已经拥有的总是更好。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/c81111310029e089cce9fc008a3160e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fLHt4BZe3EH60WZul7J3Sg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">输入虚拟环境的路径</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/9f3b87eb7049913b8718b70dbad1c63d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*67zDAtVd98yRYSGC5C3FtQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">已成功安装 tensorflow-macos</p></figure><p id="5b8d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ni">注意</em>——你可以通过<a class="ae kv" href="https://developer.apple.com/metal/tensorflow-plugin/" rel="noopener ugc nofollow" target="_blank"> tensorflow-metal </a>利用 M1 加速训练你的机器学习模型。如果你是这种情况，请点击了解更多信息<a class="ae kv" href="https://makeoptim.com/en/deep-learning/tensorflow-metal" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="6400" class="mk ml iq bd mm mn mo dn mp mq mr dp ms lf mt mu mv lj mw mx my ln mz na nb nc bi translated">2.标记化者</h2><p id="ab50" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">我们将从源代码中构建标记化器以避免任何中断，我确信如果我们决定不这样做，它将会出现。这里有几个步骤，所以当你跟着做的时候要精确。</p><p id="b6e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ni"> 2.1 安装防锈语言</em></p><p id="89f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们需要安装 Rust 来从源代码安装令牌化器。您可以通过键入以下命令来做到这一点</p><pre class="kg kh ki kj gt nj lv nk nl aw nm bi"><span id="8fcf" class="mk ml iq lv b gy nn no l np nq">curl --proto '=https' --tlsv1.2 -sSf <a class="ae kv" href="https://sh.rustup.rs" rel="noopener ugc nofollow" target="_blank">https://sh.rustup.rs</a> | sh</span></pre><p id="b102" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以在安装后按照命令提示符下的说明配置当前的 shell，或者您可以打开另一个会话来查看它的效果。</p><p id="9c93" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ni"> 2.2 安装令牌化器</em></p><p id="a4cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦我们有了 Rust，我们就可以下载令牌化器的源代码</p><pre class="kg kh ki kj gt nj lv nk nl aw nm bi"><span id="0e11" class="mk ml iq lv b gy nn no l np nq">git clone <a class="ae kv" href="https://github.com/huggingface/tokenizers" rel="noopener ugc nofollow" target="_blank">https://github.com/huggingface/tokenizers</a></span></pre><p id="f91a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">转到 python 绑定文件夹<code class="fe ls lt lu lv b">cd tokenizers/bindings/python</code></p><p id="3a60" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">确保您已经安装并激活了虚拟环境，然后键入以下命令来编译令牌化器</p><pre class="kg kh ki kj gt nj lv nk nl aw nm bi"><span id="f40c" class="mk ml iq lv b gy nn no l np nq">pip install setuptools_rust</span></pre><p id="759b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，安装令牌化器</p><pre class="kg kh ki kj gt nj lv nk nl aw nm bi"><span id="f5ab" class="mk ml iq lv b gy nn no l np nq">python setup.py install</span></pre><h2 id="02e0" class="mk ml iq bd mm mn mo dn mp mq mr dp ms lf mt mu mv lj mw mx my ln mz na nb nc bi translated">3.变形金刚(电影名)</h2><p id="fb9d" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">现在终于，你可以安装变压器了</p><pre class="kg kh ki kj gt nj lv nk nl aw nm bi"><span id="efea" class="mk ml iq lv b gy nn no l np nq">pip install git+https://github.com/huggingface/transformers</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/e86093d5a58480361567198e583bb1a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pjb41OJh8q7uDdiLRS-o0g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">瞧，变压器安装成功</p></figure><h2 id="a5ac" class="mk ml iq bd mm mn mo dn mp mq mr dp ms lf mt mu mv lj mw mx my ln mz na nb nc bi translated">结束注释</h2><p id="5455" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">最近我一直在试图弄清楚如何在苹果 M1 上安装许多东西，当我弄清楚的时候，我试图记下它，以方便其他可能有同样问题的人。希望这对你有所帮助，如果你有任何反馈或正在为任何其他安装而挣扎，请随时联系<a class="ae kv" href="https://twitter.com/dhrumilcse" rel="noopener ugc nofollow" target="_blank">联系</a>，也许我有一个解决方案，但没有机会写下来。快乐学习。</p></div></div>    
</body>
</html>