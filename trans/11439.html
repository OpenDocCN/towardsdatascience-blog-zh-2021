<html>
<head>
<title>Create a similarity graph from node properties with Neo4j</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Neo4j从节点属性创建相似性图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/create-a-similarity-graph-from-node-properties-with-neo4j-2d26bb9d829e?source=collection_archive---------12-----------------------#2021-11-10">https://towardsdatascience.com/create-a-similarity-graph-from-node-properties-with-neo4j-2d26bb9d829e?source=collection_archive---------12-----------------------#2021-11-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="36a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">本文的原始版本和附带的视频使用的Neo4j沙盒版本已经过时。我已经更新了代码，以使用GDS 2.0.1和Neo4j沙盒的版本，该版本是2022年7月的版本。</em></p><p id="cd24" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae km" href="https://en.wikipedia.org/wiki/Cluster_analysis" rel="noopener ugc nofollow" target="_blank">聚类分析</a>帮助我们发现隐藏在数据中的结构。我们可以使用无监督的机器学习算法将数据项分组到聚类中，以便项与其聚类内的其他项比与其聚类外的项有更多的共同点。</p><p id="aa05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我们将数据集组织成相似项目的子集时，诸如<a class="ae km" rel="noopener" target="_blank" href="/working-with-neo4j-rfm-analysis-using-e-commerce-data-721f5bd5c851">客户细分</a>、<a class="ae km" rel="noopener" target="_blank" href="/building-a-photo-based-personalized-recommendations-application-27029418d65e">推荐</a>和<a class="ae km" href="https://neo4j.com/blog/financial-fraud-detection-graph-data-science-analytics-feature-engineering/" rel="noopener ugc nofollow" target="_blank">异常检测</a>等任务变得更加容易。</p><p id="ec2b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="kl">相似度</em> </strong>的概念是聚类分析的核心。Neo4j Graph数据科学库为我们提供了工具，用于根据节点的属性<strong class="jp ir"> <em class="kl">发现数据集中节点之间的相似性，即使我们的数据</em> </strong>中不存在预先存在的关系。</p><p id="bc05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后<a class="ae km" href="https://neo4j.com/product/bloom" rel="noopener ugc nofollow" target="_blank">布鲁姆图可视化应用</a>允许用户以一种可访问的、可解释的方式交互地探索相似性。这可以帮助无监督的机器学习<em class="kl">远离黑盒魔法</em>的领域，成为商业用户使用的直观工具。<a class="ae km" href="https://neo4j.com/product/graph-data-science/" rel="noopener ugc nofollow" target="_blank">图形数据科学库</a>随后允许我们基于相似性关系找到密切相关的节点集群。</p><p id="1177" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于这个例子，我使用了美国人口普查局提供的<a class="ae km" href="https://www.census.gov/data/developers/data-sets/acs-5year.html" rel="noopener ugc nofollow" target="_blank"> 2019年美国社区调查五年估计值</a>中关于大都市统计区域  (MSAs)的<strong class="jp ir"> <em class="kl">数据。</em></strong></p><p id="152b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我选择了<strong class="jp ir">四个</strong>人口统计特征来描述每个MSA:</p><ul class=""><li id="444c" class="kn ko iq jp b jq jr ju jv jy kp kc kq kg kr kk ks kt ku kv bi translated">人口，</li><li id="0519" class="kn ko iq jp b jq kw ju kx jy ky kc kz kg la kk ks kt ku kv bi translated">中等家庭收入，</li><li id="3e7a" class="kn ko iq jp b jq kw ju kx jy ky kc kz kg la kk ks kt ku kv bi translated">房价中位数，以及</li><li id="bd83" class="kn ko iq jp b jq kw ju kx jy ky kc kz kg la kk ks kt ku kv bi translated">25岁以上拥有学士学位的人口比例。</li></ul><p id="7761" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本教程中，我们将使用相似性算法根据四个人口统计特征来识别相似的MSA对。然后，我们将使用相似性关系来识别MSA的聚类。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/79c99d9a8db9c12a1e283ffb9f1cbe2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xsBWRX3pcB_rCmva"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">麦肯齐·韦伯在<a class="ae km" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="b7f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以和我一起创建一个<a class="ae km" href="https://neo4j.com/sandbox/" rel="noopener ugc nofollow" target="_blank">免费的Neo4j沙箱</a>。选择创建“空白沙盒—图形数据科学”，因为我们会加载自己的数据。然后点击“打开”按钮，启动Neo4j浏览器开始使用。</p><p id="8202" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在加载数据之前，我们将为MSA的名称创建一个唯一的约束。</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="96db" class="lw lx iq ls b gy ly lz l ma mb">CREATE CONSTRAINT msa_name ON (m:MSA) ASSERT m.name IS UNIQUE</span></pre><p id="54cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用此命令从GitHub上的CSV文件加载MSA数据。</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="a783" class="lw lx iq ls b gy ly lz l ma mb">LOAD CSV WITH HEADERS FROM "<a class="ae km" href="https://raw.githubusercontent.com/smithna/datasets/main/CensusDemographicsByMetroArea.csv" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/smithna/datasets/main/CensusDemographicsByMetroArea.csv</a>" AS row</span><span id="d4c4" class="lw lx iq ls b gy mc lz l ma mb">WITH row WHERE row.name CONTAINS 'Metro'</span><span id="0a31" class="lw lx iq ls b gy mc lz l ma mb">MERGE (m:MSA {name:row.name})<br/>SET m.population = toInteger(row.population),<br/>m.medianHouseholdIncome = toInteger(row.medianHouseholdIncome),<br/>m.medianHomePrice = toInteger(row.medianHomePrice),<br/>m.percentOver25WithBachelors = toFloat(row.percentOver25WithBachelors)<br/>RETURN m</span></pre><p id="af9d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意，<code class="fe md me mf ls b">LOAD CSV</code>实用程序将每个字段视为一个字符串，所以我们使用<code class="fe md me mf ls b">toInteger()</code>和<code class="fe md me mf ls b">toFloat()</code>函数将数值转换为适当的数据类型。运行该命令后，您应该看到已经创建了MSA节点。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mg"><img src="../Images/9fd72c37d4d8ed84e7b75fd93b68e7bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Te23gum9iVqu8yOjT1G9w.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">代表大都市地区的节点。图片作者。</p></figure><p id="7a51" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">与大多数Neo4j项目不同，<em class="kl">我们在开始时没有任何关系</em>要加载。相反，我们将使用图形数据科学库来发现相似的节点，并在它们之间创建关系。</p><p id="b56a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将根据<strong class="jp ir"> <em class="kl">欧氏距离</em> </strong>来定义相似度。欧几里德距离公式是勾股定理的延伸，勾股定理说的是直角三角形斜边长度的平方等于其他两条边的平方之和。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/68f0c6840b84b58130e8b56a0618b697.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*RliLrVrpiSkeNZjwBuNtBQ.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">勾股定理。图片作者。</p></figure><p id="e37a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们的例子中，我们是沿着四个维度而不是两个维度比较MSA，但是概念是相似的。两个MSA之间的欧几里德距离是每个人口统计指标的平方差总和的平方根。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/615e77d2dd882bc9488c997cc5b04b77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*QpISipJM6gkSgX2zzMhCdA.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">欧几里德距离公式</p></figure><p id="3fe3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在计算距离之前，我们希望四个属性从最小值到最大值的范围大致相同。如果范围差异大，则范围大的属性将主导距离计算；范围较小的属性几乎不会影响距离计算。所以我们需要把它们都归一化到相同的范围。</p><p id="97f3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行这个查询来查看我们加载的四个属性的值的范围。</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="fe5b" class="lw lx iq ls b gy ly lz l ma mb">MATCH (n)<br/>WITH n, <br/>["population", "medianHouseholdIncome", "medianHomePrice", "percentOver25WithBachelors" ] AS metrics<br/>UNWIND metrics as metric<br/>WITH metric, n[metric] AS value<br/>RETURN metric, min(value) AS minValue,<br/>percentileCont(value, 0.25) AS percentile25, <br/>percentileCont(value, 0.50) AS percentile50, <br/>percentileCont(value, 0.75) AS percentile75, <br/>max(value) AS maxValue</span></pre><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mj"><img src="../Images/4fa8548c22d9422f08573af2e7ff7afd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mVERmWgiPJDzDIQYFht74w.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">显示每个属性的值范围的表。图片作者。</p></figure><p id="d1cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">人口范围从54，773人到19，294，236人。这与25岁以上拥有大学学位的人的百分比范围(从12.9%到67.4%)有着巨大的差异。</p><p id="d547" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还可以看到，第50和第75百分位人口(336，612名公民)之间的差异要比第25和第50百分位人口(94，771.25名公民)之间的差异大得多。我下载了数据，并用标准刻度和对数刻度绘制了直方图，以检查分布情况。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mk"><img src="../Images/5a1a38943278d92a782fc6e126921637.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YC5gZhRu0blTWBhiCi1Xig.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">单位和对数标度的度量直方图。图片作者。</p></figure><p id="fe1e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们应用对数变换，我们所有的指标看起来更接近正态分布。当我考虑到在一个拥有60，000人口的MSA中增加10，000名居民会对都会区的特征产生很大的改变，但是在一个拥有1，900万人口的MSA中增加10，000名居民产生的影响要小得多时，这在直觉层面上对我来说是有意义的。另一方面，在任何规模的MSA中，10%的人口变化都是显而易见的。</p><p id="0a25" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行以下命令，将对数变换应用于人口、中值房价和25岁以上拥有学士学位的人口百分比。</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="ac14" class="lw lx iq ls b gy ly lz l ma mb">MATCH (m:MSA)<br/>SET <br/>m.logPopulation = log(m.population),<br/>m.logMedianHouseholdIncome = log(m.medianHouseholdIncome),<br/>m.logMedianHomePrice = log(m.medianHomePrice),<br/>m.logPercentOver25WithBachelors = log(m.percentOver25WithBachelors)</span></pre><p id="dfc9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">t <a class="ae km" href="https://neo4j.com/docs/graph-data-science/current/alpha-algorithms/scale-properties/#algorithms-scale-properties-minmax" rel="noopener ugc nofollow" target="_blank"> he图形数据科学库</a>中的<code class="fe md me mf ls b">MinMax</code>缩放器将应用下面的公式来<strong class="jp ir"> <em class="kl">重新缩放每个属性值</em> </strong>。最小值设置为0，最大值设置为1，所有其他值根据它们在原始数据集中的位置成比例地落在0和1之间。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/95a10fb8e0ccdb26c06b26c545455633.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/format:webp/1*nGiG3VHQpHJ7FREqOzVJVQ.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">最小最大标量公式</p></figure><p id="af54" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将创建一个名为“metro-graph”的<strong class="jp ir"> <em class="kl">内存图</em> </strong>来一次有效地在所有节点上执行缩放计算。我们将把标签为<code class="fe md me mf ls b">MSA</code>的所有节点加载到内存图中。由于我们的图中还没有任何关系，我们将使用一个<code class="fe md me mf ls b">*</code>通配符作为占位符。</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="73bf" class="lw lx iq ls b gy ly lz l ma mb">CALL gds.graph.project('msa-graph', <br/>'MSA', <br/>'*', <br/>{nodeProperties:["logPopulation", "logMedianHouseholdIncome", "logMedianHomePrice", "logPercentOver25WithBachelors"]})</span></pre><p id="54f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行下面的命令，在内存图中创建一个名为<code class="fe md me mf ls b">scaledProperties</code>的新属性。新的属性将是一个由四个值组成的<strong class="jp ir"> <em class="kl"> vector </em> </strong>(有序列表):population、medianHouseholdIncome、medianHomePrice、percentOver25WithBachelors。在将属性添加到vector之前，将对每个属性应用<code class="fe md me mf ls b">MinMax</code>缩放器，以便所有值都在范围[0，1]内。</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="a33c" class="lw lx iq ls b gy ly lz l ma mb">CALL gds.alpha.scaleProperties.mutate('msa-graph', <br/>{nodeProperties: ["logPopulation", "logMedianHouseholdIncome", "logMedianHomePrice", "logPercentOver25WithBachelors"], <br/>scaler:"MinMax",<br/>mutateProperty: "scaledProperties"}) <br/>YIELD nodePropertiesWritten</span></pre><p id="1344" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以使用刚刚创建的<code class="fe md me mf ls b">scaledProperties</code>来计算节点之间的距离。欧几里德距离公式告诉我们<em class="kl">在四维空间中</em>MSA相距多远。<em class="kl">距离值越高，两个MSA越不相似</em>。我们对MSA之间的相似性感兴趣，所以我们将使用一种将距离转换为相似性的算法。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/12cb0afa83c786efa3b53e0f8b10ac66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*PSD_St_2emO2G0GO5DjtvQ.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">欧几里德相似公式</p></figure><p id="dbdc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">属性<code class="fe md me mf ls b">similarity</code>的值</em>越高，<em class="kl">两个MSA越相似</em>。</p><p id="dcc7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae km" href="https://neo4j.com/docs/graph-data-science/current/algorithms/knn/" rel="noopener ugc nofollow" target="_blank"> K-Nearest Neighbors算法</a>将根据欧几里德相似性公式在我们的图中创建从每个节点到其最近邻居的关系。<code class="fe md me mf ls b">topK</code>参数告诉算法创建从每个节点到其最近的15个邻居<strong class="jp ir"><em class="kl"/></strong>的关系<code class="fe md me mf ls b">IS_SIMILAR</code>。在write模式下运行算法之前，让我们在stats模式下运行它，并检查相似性得分的分布。</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="cc35" class="lw lx iq ls b gy ly lz l ma mb">CALL gds.knn.stats("msa-graph",<br/>   {<br/>      nodeProperties:{scaledProperties:"EUCLIDEAN"},<br/>      topK:15,<br/>      sampleRate:1,<br/>      randomSeed:42,<br/>      concurrency:1<br/>   }<br/>) YIELD similarityDistribution <br/>RETURN similarityDistribution</span><span id="6cfa" class="lw lx iq ls b gy mc lz l ma mb">-----------------------------------</span><span id="40be" class="lw lx iq ls b gy mc lz l ma mb">{<br/>  "p1": 0.8350143432617188,<br/>  "max": 0.9999847412109375,<br/>  "p5": 0.9390525817871094,<br/>  "p90": 0.996307373046875,<br/>  "p50": 0.9895782470703125,<br/>  "p95": 0.9975738525390625,<br/>  "p10": 0.9621849060058594,<br/>  "p75": 0.9938201904296875,<br/>  "p99": 0.998992919921875,<br/>  "p25": 0.9813117980957031,<br/>  "p100": 0.9999847412109375,<br/>  "min": 0.77587890625,<br/>  "mean": 0.9814872709261316,<br/>  "stdDev": 0.027092271447973864<br/>}</span></pre><p id="2b6a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以看到，99%的关系相似度得分在0.835以上，最小相似度在0.776左右。当我们用相似性关系更新内存中的图时，我们将使用<code class="fe md me mf ls b">similarityThreshold </code>参数来排除相似性分数在倒数1%的关系。</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="7daa" class="lw lx iq ls b gy ly lz l ma mb">CALL gds.knn.mutate("msa-graph",<br/>               {nodeProperties: {scaledProperties: "EUCLIDEAN"},<br/>               topK: 15,<br/>               mutateRelationshipType: "IS_SIMILAR",<br/>               mutateProperty: "similarity",<br/>               similarityCutoff: 0.8350143432617188,<br/>               sampleRate:1,<br/>               randomSeed:42,<br/>               concurrency:1}<br/>              )</span></pre><p id="4af4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在mutate模式下运行KNN在内存图形投影中创建了<code class="fe md me mf ls b">IS_SIMILAR</code>关系。现在<a class="ae km" href="https://neo4j.com/docs/graph-data-science/current/graph-catalog-relationship-ops/#_syntax" rel="noopener ugc nofollow" target="_blank">将它们写到Neo4j图</a>中，这样就可以用Cypher查询它们，并在Bloom中可视化。</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="cd0b" class="lw lx iq ls b gy ly lz l ma mb">CALL gds.graph.writeRelationship(<br/>    "msa-graph",<br/>    "IS_SIMILAR",<br/>    "similarity"<br/>)</span></pre><p id="a3c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们给<code class="fe md me mf ls b">IS_SIMILAR</code>关系添加一个<code class="fe md me mf ls b">rank</code>属性，这样我们就可以过滤每个节点排名靠前的关系。</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="4337" class="lw lx iq ls b gy ly lz l ma mb">MATCH (m:MSA)-[s:IS_SIMILAR]-&gt;()<br/>WITH m, s ORDER BY s.similarity DESC<br/>WITH m, collect(s) as similarities, range(0, 11) AS ranks<br/>UNWIND ranks AS rank<br/>WITH rank, similarities[rank] AS rel<br/>SET rel.rank = rank + 1</span></pre><p id="32b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们看看Bloom graph可视化应用程序中的图表。返回Neo4j沙盒主页，选择“打开Bloom”</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mn"><img src="../Images/76efb80281225c7fcac0d25dcd7b48d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jDVrqWo742FQF0okdHhuwQ.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">启动Bloom。图片作者。</p></figure><p id="f5ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用您的沙盒凭据登录。因为这是我们第一次使用Bloom处理这个数据集，所以点击“创建透视图”然后，单击“生成透视图”让Bloom为您设置一个透视图。最后，点击你新生成的视角进入绽放场景。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/a290d329804d133a4ccac4bd08b222e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*3MjenNL1Bnxp7gB2mt_wNA.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">单击“使用视角”以使用您的新Bloom视角。图片作者。</p></figure><p id="358f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们配置“IS_SIMILAR”关系的显示，以便线宽对应于节点的相似性。单击屏幕右侧面板上的“关系”,然后单击“IS_SIMILAR”关系旁边的线条。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/fb67f3306fcc28e68ec06c0834e3bc6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*Xdo763Y4myFeED8dYjngJw.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">单击IS_SIMILAR旁边的行。图片作者。</p></figure><p id="6038" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在出现的弹出菜单中，选取“基于规则”然后，单击加号添加新的基于规则的样式。</p><p id="ebc8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从属性键下拉列表中选择“相似性”。选择“范围”的单选按钮单击“大小”按钮创建一条控制线宽的规则。切换按钮以应用大小规则。</p><p id="3438" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在最小点框中，输入0.83并将最小大小设置为0.25倍。在最大点框中，输入1并将最大大小设置为4倍。您的配置应该如下图所示。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mq"><img src="../Images/197790721d4c559dc169c5866183f69c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QvvTj1MqHREOMBA1omXAEA.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">基于规则的样式配置。作者图片</p></figure><p id="3c4b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们使用Bloom来搜索MSA及其最接近的对等体。如果你开始在Bloom搜索框中键入“纽约”，Bloom的自动完成应该会建议“纽约-纽瓦克-泽西城，NY-NJ-PA都会区。”按tab键接受建议。一旦你有了纽约MSA的一个节点，Bloom会自动建议涉及该节点的模式。选择从具有IS_SIMILAR关系的纽约节点扩展的模式，然后按enter键。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mr"><img src="../Images/7e6264ea5c4795bf3085a1143a5ffc77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rDudtPUifCGCqzf8xIONww.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">Bloom搜索框。图片作者。</p></figure><p id="cc06" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Bloom将返回一个可视化结果，显示纽约MSA及其15个最相似的MSA，基于我们使用的四个人口统计指标。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi ms"><img src="../Images/49c06987a1da1b25ba6f37ecff05e41c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UYL09Lj4JWxKEu_PitJjmQ.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">与纽约最相似的管理服务协议。图片作者。</p></figure><p id="2e94" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">基于出站箭头的粗细，我们可以看到洛杉矶是与纽约最相似的MSA。</p><p id="b52b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可能会惊讶地发现，有往来于纽约和洛杉矶、圣地亚哥、波士顿、华盛顿和西雅图的关系，但没有可视化中的其他城市。我们告诉欧几里德距离算法为每个节点的前15个最近的MSA<em class="kl">创建关系。如果我列出离纽约最近的15个MSA，亚特兰大包括在内。然而，如果我列出离亚特兰大最近的12个MSA，纽约没有入选。这就是为什么有从纽约到亚特兰大的关系，但没有从亚特兰大到纽约的关系。</em></p><p id="ce42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们过滤显示内容，查看与纽约最相似的前5个城市。单击Bloom屏幕左侧的漏斗图标以展开过滤器面板。在下拉列表中选择IS_SIMILAR。选择“等级”属性。选择“小于或等于”条件，并将值设置为5。切换“应用过滤器”以突出显示纽约的前5个最强相似性关系。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mt"><img src="../Images/82186a1a0a9aa22f6b7f0776197c5919.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kr0MQbo--imKmmQ6aV88hA.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">过滤关系。作者图片</p></figure><p id="b337" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们研究了单个MSA的邻居。现在让我们来看一下全局。右键单击Bloom画布并从上下文菜单中选择“清除场景”。在搜索框中，输入“MSA”并按tab键。选择(MSA)-IS_SIMILAR-()模式，然后按enter键。我们会看到完整的MSA图。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mu"><img src="../Images/0bd22cc2aab376df7e5add269be0da0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E-tPbUGFMpYVUlShoRnPlg.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">完整的MSA相似图。图片作者。</p></figure><p id="6c0b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">再次打开过滤器面板。为大于或等于0.96的“相似性”在IS_SIMILAR关系上创建新过滤器。切换“应用过滤器”，然后单击面板底部的“消除过滤的元素”按钮。我们开始看到一些岛屿和半岛从主节点群中分化出来。有三个离群节点，其中它们的15个最相似的邻居没有一个具有大于0.96的相似性。我们将使用社区检测算法进一步探索图的结构。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mv"><img src="../Images/cb282e3ef27c977f86184e179cefe896.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zTkqOFVb1nZ_Otf4DoDCPw.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">过滤MSA相似图。作者图片</p></figure><p id="a89e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">返回Neo4j浏览器，运行以下命令进行社区检测。我们将针对内存中的图形执行<a class="ae km" href="https://neo4j.com/docs/graph-data-science/current/algorithms/louvain/" rel="noopener ugc nofollow" target="_blank"> Louvain社区检测算法</a>，并将社区id写回到主Neo4j图形中。我们告诉算法使用<code class="fe md me mf ls b">similarity</code>属性来加权节点之间的关系。通过将<code class="fe md me mf ls b">consecutiveIds</code>参数设置为true，我们告诉算法我们希望生成的<code class="fe md me mf ls b">communityId</code>属性的值是连续的整数。</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="eca9" class="lw lx iq ls b gy ly lz l ma mb">CALL gds.louvain.write('msa-graph',</span><span id="a7f7" class="lw lx iq ls b gy mc lz l ma mb">{relationshipTypes: ["IS_SIMILAR"],<br/>relationshipWeightProperty:"similarity",<br/> writeProperty:"communityId"})</span><span id="c61a" class="lw lx iq ls b gy mc lz l ma mb">YIELD communityCount, modularities<br/>RETURN communityCount, modularities</span></pre><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/5c391262e68b67700469ba22bba6bf2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*TItLx4Nnd1W2VjFHdwst9w.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">社区检测结果。图片作者。</p></figure><p id="abcf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">输出显示我们检测到了6个社区。算法的连续迭代将社区分区的模块性从0.625增加到0.667。</p><p id="8b1f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行下面的查询来收集关于我们定义的社区的汇总统计信息。除了统计数据之外，我们还通过列出每个社区中与同一社区中的其他MSA具有最高相似性的三个MSA来添加上下文。这些管理服务协议应该是其社区的典型范例，而其他管理服务协议的社区内关系可能更少或更弱。</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="422b" class="lw lx iq ls b gy ly lz l ma mb">MATCH (m:MSA)<br/>WITH m <br/>ORDER BY apoc.coll.sum([(m)-[s:IS_SIMILAR]-&gt;(m2) <br/>WHERE m.communityId = m2.communityId | s.similarity]) desc<br/>RETURN m.communityId as communityId,<br/>count(m) as msaCount, <br/>avg(m.population) as avgPopulation,<br/>avg(m.medianHomePrice) as avgHomePrice,<br/>avg(m.medianHouseholdIncome) as avgIncome,<br/>avg(m.percentOver25WithBachelors) as avgPctBachelors,<br/>collect(m.name)[..3] as exampleMSAs<br/>ORDER BY avgPopulation DESC</span></pre><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mx"><img src="../Images/1a74e2fd4423c16fc39ef16284804660.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OmN7mO_Ityb4Hyvc-SrmDg.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">汇总社区功能的表格。图片作者。</p></figure><p id="574c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">knn和Louvain算法是id 81社区中MSAs人口最多的社区，平均人口接近200万。社区54也有很高的MSA人口，但是收入和房价低于社区81。社区234和330非常相似，但234人口更多，330房价更高。与人口规模相似的社区相比，社区75拥有受过高等教育的公民。社区264有少量的MSA。385社区有低收入管理事务协议。</p><p id="24c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们给社区起一个比自动生成的id更人性化的名字。</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="e20a" class="lw lx iq ls b gy ly lz l ma mb">MATCH (m:MSA) <br/>  SET m.communityName = CASE m.communityId <br/>  WHEN 54 THEN "Large mid-cost metros"<br/>  WHEN 75 THEN "College towns"<br/>  WHEN 81 THEN "Large high-cost metros"<br/>  WHEN 234 THEN "Mid-size metros"<br/>  WHEN 264 THEN "Small metros"<br/>  WHEN 330 THEN "Mid-price metros"<br/>  WHEN 385 THEN "Low-income metros"<br/>  END<br/>return m.communityName, m.communityId, count(*)</span></pre><p id="932f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要使communityName属性在Bloom中可搜索，请在该属性上创建一个索引。</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="2e9c" class="lw lx iq ls b gy ly lz l ma mb">CREATE INDEX msa_community_name IF NOT EXISTS<br/>FOR (m:MSA)<br/>ON (m.communityName)</span></pre><p id="d68c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们来看看Bloom中的结果。我们将配置透视图以反映我们添加的新社区。单击屏幕左上角的图标打开透视图面板。然后，单击数据库图标来刷新透视图，以包含我们添加到数据库中的新的<code class="fe md me mf ls b">communityName</code>属性。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi my"><img src="../Images/c187406ffb5dda455b42095d4014a712.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3zD-bCecF6Mzv0wMlgMEJA.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">刷新Bloom透视图以在数据库中包含新属性。图片作者。</p></figure><p id="de62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在屏幕右侧的面板中，单击MSA旁边的圆圈来设置MSA节点的样式。在出现的弹出菜单中，选取“基于规则”然后，单击加号添加新的基于规则的样式。从属性键下拉列表中选择“communityName”。选择“唯一值”的单选按钮切换按钮以应用颜色规则。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mz"><img src="../Images/f555a8830d3e02c787e267e8a092ff5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n2aFTmOc0NseVDlA8-gxmQ.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">communityName的基于规则的样式配置。图片作者。</p></figure><p id="4d90" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们添加第二个条件样式来根据人口设置节点的大小。单击加号添加新的基于规则的样式规则。</p><p id="66f6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从属性键下拉列表中选择“人口”。选择“范围”的单选按钮单击“大小”按钮创建控制节点大小的规则。切换按钮以应用大小规则。</p><p id="25d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在“最小点”框中，输入55000并将最小大小设置为1x。在Maxpoint框中，输入19000000，并将最大大小设置为4x。您的配置应该如下图所示。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi na"><img src="../Images/ed6674e73ad0a486d6ddd7a86ee3ec85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xnixp0pW7MeWMageQVlr8A.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">基于规则的群体样式。图片作者。</p></figure><p id="9d69" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在右键单击并从上下文菜单中选择“清除场景”。在搜索框中，键入“大学城”，然后按enter键。返回的结果包括州立大学、PA Metro、Ithaca、NY Metro、Champaign-Urbana、IL Metro和Charlottesville、VA Metro。这些大都市区是宾夕法尼亚州立大学、康奈尔大学、伊利诺伊大学和弗吉尼亚大学的所在地。根据我们对这些大都市地区的了解，该算法似乎已经发现了一些明显的共性。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/5d672c64cff4ddb018e0b60bfaee6ab2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A5z8MIorqBqzX77LUJhNEw.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">一些MSA通过搜索“大学城”返回。图片作者。</p></figure><p id="6805" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们来看看还有哪些大都市和大学城最相似。点按Command-A以选择所有节点。然后右键单击其中一个节点，并从上下文菜单中选择Expand: </p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nc"><img src="../Images/5fdb9fbff8e2a1e0f1d6b33100e68a33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IWdUEhE_bYdGmwEJGS6uzw.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">最像大学城的城市。图片作者。</p></figure><p id="128f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我缩小时，我可以看到我们添加了几个大型地铁区域(紫色)、中型地铁区域(橙色)、小型中等收入区域(青色)和一个中型高成本地铁区域(红色)。双击节点或放大以查看节点详细信息。我们增加的几个MSA，如麦迪逊、威斯康星大都会区和北卡罗莱纳州的达勒姆-查佩尔山恰好是主要大学的所在地。</p><p id="12ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用该数据集进行实验，以进一步探索相似性图表。运行<code class="fe md me mf ls b">gds.alpha.similarity.euclidean</code>时，通过减少<code class="fe md me mf ls b">topK</code>参数或设置<code class="fe md me mf ls b">similarityThreshold</code>参数来减少相似性关系的数量，将会在运行<code class="fe md me mf ls b">gds.louvain</code>时产生更多的社区。运行<code class="fe md me mf ls b">gds.alpha.scaleProperties</code>时，尝试除<code class="fe md me mf ls b">MinMax</code>之外的缩放器。</p><p id="8d67" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">图形数据科学库支持其他几种<a class="ae km" href="https://neo4j.com/docs/graph-data-science/current/algorithms/similarity/" rel="noopener ugc nofollow" target="_blank">相似度算法</a>。<a class="ae km" href="https://neo4j.com/docs/graph-data-science/current/algorithms/knn/" rel="noopener ugc nofollow" target="_blank">K-最近邻</a>算法提供了一种基于<a class="ae km" href="https://en.wikipedia.org/wiki/Cosine_similarity" rel="noopener ugc nofollow" target="_blank">余弦相似度</a>生成链接的有效方法。</p><p id="a288" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Louvain社区检测是几个<a class="ae km" href="https://neo4j.com/docs/graph-data-science/current/algorithms/community/" rel="noopener ugc nofollow" target="_blank">社区检测算法</a>中的一个选项。通过运行<a class="ae km" href="https://neo4j.com/docs/graph-data-science/current/algorithms/label-propagation/" rel="noopener ugc nofollow" target="_blank">标签传播</a>算法，查看您的结果有何不同。</p><p id="b1b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">GitHub上的数据CSV除了大都市统计区域外，还包括小城市统计区域。从<code class="fe md me mf ls b">LOAD CSV</code>脚本中移除<code class="fe md me mf ls b">WHERE row.name INCLUDES 'Metro'</code>来加载这些节点并探索它们的属性。</p><p id="2ef3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您会发现<em class="kl">图实际上无处不在</em>，即使一开始关系在数据模型中并不明显。</p></div></div>    
</body>
</html>