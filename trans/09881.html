<html>
<head>
<title>The Confusing Matrix</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">令人困惑的矩阵</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-confusing-matrix-71a43778b56a?source=collection_archive---------21-----------------------#2021-09-16">https://towardsdatascience.com/the-confusing-matrix-71a43778b56a?source=collection_archive---------21-----------------------#2021-09-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b769" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">当直觉让我们犯错时</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/92b9234f6913da7e006a0a46067e16fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1tGG4idttSJE7LZ7YW1sIA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/photos/pkKRdpurSPw" rel="noopener ugc nofollow" target="_blank">来源</a>:【https://unsplash.com/photos/pkKRdpurSPw】T2</p></figure><h1 id="4d26" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">你应该读这篇文章吗？</h1><p id="1288" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">如果你能回答下面的问题，并充分解释原因(不只是提供一个有根据的猜测)，那么这篇文章可能对你没有什么价值。</p><ol class=""><li id="0c76" class="mk ml iq lq b lr mm lu mn lx mo mb mp mf mq mj mr ms mt mu bi translated">测试的精确度是95%,我们被告知测试总是发现10%的受试者是阳性的。我们对一个随机的受试者进行测试。测试返回真阳性的概率是多少？</li><li id="4f73" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">测试的特异性为95%,精确度为90%。<br/>我们对一个健康的受试者进行测试。测试返回阳性结果的概率是多少？</li><li id="4bd5" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">测试的灵敏度(召回率)为90%，特异性为90%。假设我们将测试应用于患病率为1%的数据集。假设测试返回阳性结果，受试者患病的概率是多少？</li><li id="3fbe" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">一家公司试图向你推销他们的新测试，这种测试在检测某种疾病时(据说)非常准确。他们声称，它的灵敏度(回忆)为95%，特异性为95%，精确度为95%。有没有可能这不是某种营销伎俩，这种测试确实存在？</li><li id="8386" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">假设某项测试的灵敏度(召回率)为95%，特异性为95%。我们也知道患病率是10%。我们对1000名受试者进行了测试。测试会发现多少阳性结果？</li><li id="8800" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">假设某项测试的灵敏度(召回率)为95%，特异性为95%。我们也知道患病率是10%。有没有可能检测的阴性预测值是50%？</li><li id="1eea" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">假设在某个数据集上评估了一个测试，发现其精度为95%。我们现在在不同的数据集上运行这个测试，其中50%的受试者患有该疾病。测试会返回任何阳性结果吗？</li></ol></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="0a71" class="kw kx iq bd ky kz nh lb lc ld ni lf lg jw nj jx li jz nk ka lk kc nl kd lm ln bi translated">介绍</h1><p id="4cad" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">通常的做法是通过从混淆矩阵容易获得的性能度量来评估返回二进制结果的测试(或模型)的性能，例如，给定混淆矩阵，我们可以容易地计算精度、召回、f1分数等。</p><p id="97e9" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">无论计算多么简单，一旦我们不仅仅考虑一个指标，或者当我们需要揭示一个口头调查的概率意义时，它就会变得相当棘手。<br/>例如，“对于患有该疾病的受试者，检测结果呈阳性的概率是多少？”可以重新表述为“P的估计值是多少(阳性测试结果|真条件为阳性)”，这可以使用估计值<em class="np"># {真阳性}/# {真阳性+假阴性} </em>来实现，即，我们希望对测试的灵敏度(召回)进行估计。</p><p id="f378" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">这篇文章的目的是提供一些问题的例子和可能的解决方案，它们可以帮助我们加深理解和直觉，让我们更容易地在一个测试的性能指标和每个指标所暗示的各种含义之间流动。</p><p id="d04d" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">这篇文章并没有涵盖所有关于从困惑矩阵中得出的性能指标的问题。它确实(希望)涵盖了一些基础知识，可以帮助我们解决更复杂的问题，并更好地理解度量标准如何相互关联以及它们在实践中的意义。</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="3369" class="kw kx iq bd ky kz nh lb lc ld ni lf lg jw nj jx li jz nk ka lk kc nl kd lm ln bi translated">符号及更多</h1><p id="882c" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">当我们考虑一个检测疾病存在的测试时，我们将从回顾我们将在这篇文章中使用的符号开始。</p><p id="954c" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">将<strong class="lq ir"><em class="np">【P(D)</em></strong>表示为受试者<strong class="lq ir">患病的概率</strong>(即疾病的患病率)。<br/> <strong class="lq ir"> <em class="np"> P(不是D) </em> </strong>或<strong class="lq ir"> <em class="np"> P( D) </em> </strong>是一个受试者<strong class="lq ir">没有患病</strong>的概率。<br/> <strong class="lq ir"> <em class="np"> P(+) </em> </strong>是测试返回一个<strong class="lq ir">阳性</strong>结果的概率。<br/><strong class="lq ir"><em class="np">P(–)</em></strong>是测试返回一个<strong class="lq ir">阴性</strong>结果的概率。</p><p id="ec84" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">根据以上我们得到:<br/> <strong class="lq ir"> <em class="np"> P(+|D) </em> </strong>这是假设受试者<strong class="lq ir">患有疾病</strong>，测试将返回<strong class="lq ir">阳性</strong>结果的概率。<br/><strong class="lq ir"><em class="np">P(–| not D)</em></strong>这是假设受试者<strong class="lq ir"/><strong class="lq ir">没有疾病</strong>的情况下，测试返回<strong class="lq ir">阴性</strong>结果的概率。<br/>同样我们有<strong class="lq ir"> <em class="np"> P(不是D|+) </em> </strong>、<strong class="lq ir"><em class="np">P(D |–)</em></strong>等条件概率。</p><p id="0b67" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">我们将互换使用回忆和敏感性这两个术语，阳性率/患病率和精确度/阳性预测值也是如此。下表可能有助于解决本文中的问题:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/65e318f9762dc0233af57171b2bf1bbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uVkMHcuCnljNpJr9uRKsFA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="05ce" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">我们也可以在<a class="ae kv" href="https://en.wikipedia.org/wiki/Precision_and_recall" rel="noopener ugc nofollow" target="_blank">这个维基百科页面</a>中找到表格中的信息。</p><h2 id="4f39" class="nr kx iq bd ky ns nt dn lc nu nv dp lg lx nw nx li mb ny nz lk mf oa ob lm oc bi translated">一些概率定律的简要回顾</h2><p id="f370" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">回忆几个可能对我们有用的基本概率定律:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/61b1a4900d65661a40aa9edf68bcc6c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fNqEzhgHWYaohlBGVSwFkQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="f9fd" class="kw kx iq bd ky kz nh lb lc ld ni lf lg jw nj jx li jz nk ka lk kc nl kd lm ln bi translated">关于完整性的几点说明</h1><h2 id="c01b" class="nr kx iq bd ky ns nt dn lc nu nv dp lg lx nw nx li mb ny nz lk mf oa ob lm oc bi translated">评估者和估计</h2><p id="91b1" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在这篇文章中，我完全忽略了一个事实，即我们基于经验混淆矩阵计算的指标，是运行一些实验、测试、模型等的结果。实际上是估计。</p><p id="00eb" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">换句话说，如果以精度的估计量为例，TP/(TP + FP)只是检验(或模型)的真实(未知)精度的估计量。我们根据在数据集上运行模型/测试得到的混淆矩阵计算的任何度量值都是测试的真实(未知)度量的<strong class="lq ir">估计</strong>。</p><h2 id="2276" class="nr kx iq bd ky ns nt dn lc nu nv dp lg lx nw nx li mb ny nz lk mf oa ob lm oc bi translated">贝叶斯或频率主义方法</h2><p id="b74c" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我也避免讨论度量标准，这正是我们试图估计的，是某个未知的常数还是实际上是一个随机变量。对于这篇特定的文章来说，讨论是不太相关的，尽管在实践中它是非常有趣的。</p><h2 id="89c3" class="nr kx iq bd ky ns nt dn lc nu nv dp lg lx nw nx li mb ny nz lk mf oa ob lm oc bi translated">不适当的评分规则</h2><p id="43a6" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在考虑分类性能指标时，存在使用正确的评分规则还是不正确的评分规则的问题。</p><p id="a6d0" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">这里就不赘述了，不过你可以在这里和<a class="ae kv" href="https://www.fharrell.com/post/classification/" rel="noopener ugc nofollow" target="_blank">这里</a>了解更多。</p><p id="138d" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">关于这个主题的全面综述可以在<a class="ae kv" href="https://sites.stat.washington.edu/raftery/Research/PDF/Gneiting2007jasa.pdf" rel="noopener ugc nofollow" target="_blank">gne iting&amp;raftey(2007)</a>中找到。</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="b351" class="kw kx iq bd ky kz nh lb lc ld ni lf lg jw nj jx li jz nk ka lk kc nl kd lm ln bi translated">题型</h1><p id="f853" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">关于各种性能指标，我们可以问许多类型的问题。在这里，我们将只涵盖几种类型的问题，你可以在这些问题的基础上提出更多的变化。</p><h2 id="593d" class="nr kx iq bd ky ns nt dn lc nu nv dp lg lx nw nx li mb ny nz lk mf oa ob lm oc bi translated">型个性</h2><p id="2dc1" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">该问题中仅提供了一个指标，我们以受试者的真实状况(患病/健康)为条件。</p><p id="dcc6" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">答案可能是度量值，1减去度量值，或者使用现有信息无法回答问题。</p><p id="79d3" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated"><strong class="lq ir">问题格式:<br/> </strong>某测试的<strong class="lq ir"> &lt;度量<em class="np"> &gt; </em> </strong>为<strong class="lq ir"> X% </strong>。<br/>我们对一名&lt; <strong class="lq ir">健康/患病</strong> &gt;的受试者进行测试。测试返回一个<strong class="lq ir"> &lt;阳性/阴性&gt; </strong>结果的概率是多少？</p><p id="9ccb" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated"><strong class="lq ir">例</strong> : <br/>一项检测的特异性是95%。我们对一名健康的受试者进行测试。测试返回阳性结果的概率是多少？</p><p id="df65" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">问题求假阳性率，<code class="fe oe of og oh b">P(+|not D)</code> <em class="np">。</em> <br/>给定特殊性，应用规则<code class="fe oe of og oh b">P(A|B) = 1 — P(not A|B)</code>我们知道<code class="fe oe of og oh b">P(+|not D) = 1 — P(-|not D) = 1 — specificity</code>，所以答案是<code class="fe oe of og oh b">1 — specificity = 1 — 0.95 = 0.05</code>。</p><h2 id="bae9" class="nr kx iq bd ky ns nt dn lc nu nv dp lg lx nw nx li mb ny nz lk mf oa ob lm oc bi translated">型个性</h2><p id="9d8e" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">与上一个问题类型相同，只是添加了不相关的信息。</p><p id="454a" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated"><strong class="lq ir">问题格式:<br/> </strong>某项测试的<strong class="lq ir"> &lt;指标<em class="np"> &gt; </em> </strong>为<strong class="lq ir"> X% </strong>其<strong class="lq ir"> &lt;其他指标&gt; </strong>为<strong class="lq ir"> Y% </strong>。<br/>我们对一名&lt; <strong class="lq ir">健康/患病</strong> &gt;受试者进行测试。测试返回一个<strong class="lq ir"> &lt;阳性/阴性&gt; </strong>结果的概率是多少？</p><p id="8287" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated"><strong class="lq ir">例</strong> : <br/>一项检测的特异性为95%，精确度为90%。我们对一名健康的受试者进行测试。测试返回阳性结果的概率是多少？</p><p id="1562" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">我们不需要精确来回答这个问题；特异性就足够了。这个问题的答案和上一个题型的答案一样:<code class="fe oe of og oh b">1 - specificity</code>。</p><h2 id="247c" class="nr kx iq bd ky ns nt dn lc nu nv dp lg lx nw nx li mb ny nz lk mf oa ob lm oc bi translated">C型</h2><p id="21a5" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在问题中，只有一个指标与阳性/阴性检测结果的流行率或比例一起出现。注意，在这种情况下，问题不会要求我们找到一个条件概率。</p><p id="4524" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated"><strong class="lq ir">问题格式:<br/></strong><strong class="lq ir">&lt;某项测试的度量<em class="np"> &gt; </em> </strong>为<strong class="lq ir"> X% </strong>，我们被告知<strong class="lq ir"> &lt;患病率/阳性测试结果比例&gt; </strong>为<strong class="lq ir"> Y% </strong>。我们对一个随机的对象进行测试。测试返回一个<strong class="lq ir"> &lt;真/假&gt; - &lt;正/负&gt; </strong>的概率是多少？</p><p id="2360" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated"><strong class="lq ir">示例</strong> : <br/>测试的精确度是95%，我们被告知测试总是发现10%的受试者是阳性。我们对一个随机的对象进行测试。测试返回真阳性的概率是多少？</p><p id="90d9" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">这些问题要求我们找到<code class="fe oe of og oh b">P(+ and D)</code>。<br/>我们知道<code class="fe oe of og oh b">P(A and B) = P(B|A)P(A)</code>所以<br/> <code class="fe oe of og oh b">P(+ and D) = P(D|+)P(+) = (precision) * (proportion positive results)</code> <br/>所以我们得到<code class="fe oe of og oh b">0.95*0.1 = 0.095</code>。</p><h2 id="148c" class="nr kx iq bd ky ns nt dn lc nu nv dp lg lx nw nx li mb ny nz lk mf oa ob lm oc bi translated">D型</h2><p id="bf8b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">类似于前一种类型，但增加了冗余信息，这一次我们可能会问一个条件概率。</p><p id="d29f" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated"><strong class="lq ir">问题格式:</strong> <br/>某测试的&lt; <strong class="lq ir">度量</strong> &gt;为<strong class="lq ir"> X% </strong>。我们还知道测试的&lt; <strong class="lq ir">其他指标</strong> &gt;是<strong class="lq ir"> Y% </strong>，并且这些指标是在患病率为<strong class="lq ir"> Z% </strong>的数据集上评估测试时获得的。<br/>我们对单个对象执行测试，它返回一个&lt; <strong class="lq ir">阴性/阳性</strong> &gt;结果。是一个&lt; <strong class="lq ir">假/真</strong> &gt; - &lt; <strong class="lq ir">负/正</strong> &gt;的概率有多大？</p><p id="6f4c" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated"><strong class="lq ir">举例:<br/> </strong>某测试的误发现率为5%。我们还知道，该测试的阴性预测值为95%，并且这些指标是在患病率为10%的数据集上评估该测试时获得的。我们对单个受试者进行测试，结果是否定的。它是假阴性的概率是多少？</p><p id="ba43" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">问题要求<code class="fe oe of og oh b">P(D|-)</code>我们知道<br/>T1】</p><p id="e895" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">除了测试的阴性预测值之外的所有信息都不是回答问题所必需的，它们只是噪音。</p><h2 id="b0d1" class="nr kx iq bd ky ns nt dn lc nu nv dp lg lx nw nx li mb ny nz lk mf oa ob lm oc bi translated">E型</h2><p id="a41f" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">该问题包括两个指标和测试给出的阳性测试结果的流行率或比例。</p><p id="1b8a" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated"><strong class="lq ir">问题格式:<br/> </strong>测试的&lt; <strong class="lq ir">度量</strong> &gt;为<strong class="lq ir"> X% </strong>其&lt; <strong class="lq ir">其他度量</strong> &gt;为<strong class="lq ir"> Y% </strong>。假设我们将测试应用于一个数据集，其中&lt; <strong class="lq ir">阳性结果的患病率/比例</strong> &gt;为<strong class="lq ir"> Z% </strong>。假设测试返回一个&lt; <strong class="lq ir">阳性/阴性</strong> &gt;结果，受试者健康/患病 &gt;的概率是多少？</p><p id="f76b" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated"><strong class="lq ir">例:<br/> </strong>某项检测的灵敏度为90%，特异性为90%。假设我们将测试应用于患病率为1%的数据集。假设测试返回阳性结果，受试者患病的概率是多少？</p><p id="726f" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">这个问题要求我们找出测试的精确度，<code class="fe oe of og oh b">P(D|+)</code>。<br/>为了找到<code class="fe oe of og oh b">P(D|+)</code>，我们可以应用贝叶斯法则，在明确写出这些术语后，我们看到只需插入灵敏度、特异性和患病率的值，就可以得到精确度的值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/a31f2377186519fac6f8312f5c27aead.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yAZs6zgcx-yS3LRxoiUS4A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><h2 id="9ae4" class="nr kx iq bd ky ns nt dn lc nu nv dp lg lx nw nx li mb ny nz lk mf oa ob lm oc bi translated"><strong class="ak">F型</strong></h2><p id="3bbd" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">与上一个问题类型相同，只是更糟糕—问题包含看似相关的信息，但问题无法回答。</p><p id="7ad5" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">例:<br/>用前面题型例中的阴性预测值替换特异性。当我们用贝叶斯法则重写它时，算出精度的形式，你会看到我们最终得到的项的值在问题中没有给出，所以它无法求解。</p><h1 id="a3c6" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">再举几个例子</h1><ol class=""><li id="b45b" class="mk ml iq lq b lr ls lu lv lx oj mb ok mf ol mj mr ms mt mu bi translated">假设某项测试的特异性为95%。我们在没有受试者患病的数据集上运行这个测试。测试会返回任何阳性结果吗？<br/> <strong class="lq ir">回答:</strong>是的，该测试会将数据集的5%标记为阳性，即使它们实际上都是该疾病的阴性。这是因为假阳性率也可以表示为<code class="fe oe of og oh b">1 — specificity</code>，所以我们有<code class="fe oe of og oh b">1 — 0.95 = 0.05</code>。</li><li id="28be" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">假设某项测试的灵敏度为60%。数据集中的患病率为70%，我们还知道测试返回的结果中有80%是阳性的。测试的精确度是多少？<br/> <strong class="lq ir">回答</strong> : <br/>问题让我们去找<code class="fe oe of og oh b">P(D|+)</code>。<br/>我们可以用贝叶斯法则来解决:<br/> <code class="fe oe of og oh b">P(D|+) = P(+|D)P(D) / P(+) </code> <br/> <code class="fe oe of og oh b">= sensitivity * prevalence / proportion positive results</code> <br/> <code class="fe oe of og oh b">= 0.6 * 0.7 / 0.8 = 0.525</code></li><li id="708d" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">假设在某个数据集上评估了一个测试，发现其精度为95%。我们现在在不同的数据集上运行这个测试，其中50%的受试者患有该疾病。测试会返回任何阳性结果吗？<br/> <strong class="lq ir">回答:</strong>根据问题中给出的信息，我们无法回答。考虑到我们现有的信息，我们知道<code class="fe oe of og oh b">P(D|+) = 0.95</code>和<code class="fe oe of og oh b">P(D) = 0.5</code>。<br/>问题问的是<code class="fe oe of og oh b">P(+)</code>，或者更确切的说是问<code class="fe oe of og oh b">P(+) &gt; 0</code>是否。<br/> <code class="fe oe of og oh b">P(+)</code>也可以写成<br/> <code class="fe oe of og oh b">P(+) = P(D)P(+|D) + P(not D)P(+|not D)</code> <em class="np">。<br/> </em>由于我们不知道<code class="fe oe of og oh b">P(+|D)</code>(灵敏度)的值，也不知道<code class="fe oe of og oh b">P(+|not D)</code> <em class="np"> </em>(假阳性率)的值，所以我们无法回答这个问题。<br/>只是为了说明，我们确实知道<code class="fe oe of og oh b">P(not D)</code> <em class="np">、</em>的值，因为<code class="fe oe of og oh b">1−P(D) = P(not D)</code>。</li><li id="5d31" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">假设某项测试的灵敏度为95%，特异性为95%。我们也知道患病率是10%。我们对1000名受试者进行了测试。测试会发现多少阳性结果？<br/> <strong class="lq ir">回答:</strong>我们之前展示了如何使用贝叶斯法则解决一个非常相似的问题。我们现在将展示另一种方法。<br/>我们知道该疾病的患病率，因此我们知道1000名受试者中有10%患有该疾病，因此有100名实际阳性。<br/>测试灵敏度为95%,因此100个实际阳性中的95个将通过测试发现，并且它们是真阳性。<br/>测试特异性为95%,因此900个实际阴性中的855个将通过测试发现，并且它们是真阴性。剩余的45个实际阴性将被测试错误地检测为阳性，并且将是假阳性。这与注意到我们的假阳性率是5%是一样的，因为假阳性率等于1-特异性。<br/>我们最终得到95个真阳性+ 45个假阳性，总共140个阳性，这是我们被要求找到的数量。<br/>顺便说一下，我们现在也知道测试精度是<code class="fe oe of og oh b">95/(95+45)=67.9%</code></li><li id="88a5" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">假设某项测试的灵敏度为95%，特异性为95%。我们也知道患病率是10%。有没有可能检测的阴性预测值是50%？<br/> <strong class="lq ir">答案:</strong>否<br/>根据与上一个问题非常相似的计算，为了简单起见，假设我们对1000名受试者进行了测试:<br/>患病率为10%，因此我们有100名实际阳性者和900名实际阴性者。<br/> 95%的灵敏度为我们提供了95个真阳性和5个假阴性。95%的特异性产生855个真阴性和45个假阳性。<br/>阴性预测值为<br/>T1</li><li id="1a3f" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">一家公司试图向你推销他们的新测试，这种测试在检测某种疾病时(据说)非常准确。他们声称，它的灵敏度为95%，特异性为95%，精确度为95%。有没有可能这不是某种营销伎俩，这种测试确实存在？<br/> <strong class="lq ir">回答:</strong>正如我们看到的，我们可以把精确度写成患病率、敏感性和特异性的函数。让我们再看一遍:</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/a31f2377186519fac6f8312f5c27aead.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yAZs6zgcx-yS3LRxoiUS4A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="2ecb" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">我们注意到，我们可以重新排列上述内容，以便将患病率表示为敏感性、特异性和准确性的函数。然后，我们插入公司报告的指标，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/394ec99bbe45094fff33439880686071.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xtxKk6Qw3Gz1NSbiXWIk7Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="b114" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">事实证明，根据该公司提供的指标，他们在患病率为50%的数据集上评估了他们的测试，这是非常高的，可能与我们希望在我们打算使用该测试的人群中看到的真实患病率完全无关。换句话说，将相同的测试应用于患病率为2%的一组受试者将导致不同的表现指标，并且不是所有的指标都可以达到95%。</p><h2 id="1e28" class="nr kx iq bd ky ns nt dn lc nu nv dp lg lx nw nx li mb ny nz lk mf oa ob lm oc bi translated">使用贝叶斯因子</h2><p id="784e" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">回答问题4的另一种方法是使用<a class="ae kv" href="https://en.wikipedia.org/wiki/Bayes_factor" rel="noopener ugc nofollow" target="_blank">贝叶斯因子</a>，该方法在本视频中有详细介绍:“<a class="ae kv" href="https://www.youtube.com/watch?v=lG4VkPoG3ko" rel="noopener ugc nofollow" target="_blank">医学测试悖论，重新设计贝叶斯法则</a>”。我不会在这里介绍这个方法，因为我认为这个视频解释得非常好，我强烈推荐观看。</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="58da" class="kw kx iq bd ky kz nh lb lc ld ni lf lg jw nj jx li jz nk ka lk kc nl kd lm ln bi translated">这玩意在现实生活中真的有用吗？</h1><p id="5f8d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">最近由科斯托拉斯等人(2021) 发表在《美国流行病学杂志》上的一项<a class="ae kv" href="https://academic.oup.com/aje/article/190/8/1689/6206818" rel="noopener ugc nofollow" target="_blank">研究报告了一项荟萃分析的结果，该分析评估了RT-聚合酶链式反应测试对新冠肺炎的诊断准确性。</a></p><p id="c93f" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">在我们的案例中，研究的两个结果是令人感兴趣的，这两个结果是RT-聚合酶链式反应测试的灵敏度估计值0.68和测试的特异性估计值0.99。</p><p id="ef1f" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">正如我们之前看到的，给定敏感性和特异性，我们现在可以将精确度固定在某个值并获得患病率，或者反之，将患病率设置为某个值并获得精确度。</p><p id="ad0a" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">假设我们将疾病患病率固定在1.5%。使用在<a class="ae kv" href="https://academic.oup.com/aje/article/190/8/1689/6206818" rel="noopener ugc nofollow" target="_blank">研究</a>中估计的敏感性和特异性值以及这个流行率值，我们最终得到50.9%的精确度。在这种情况下，由RT-聚合酶链式反应测试提供的大约49%的阳性结果是假阳性。注意:49%是误发现率，不要和误报率混淆(这是两个不同的指标)。</p><p id="86dc" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">另一方面，假设我们将精确度设置为95%，同时仍然使用研究中发现的68%灵敏度和99%特异性的值。在这种情况下，我们发现这种疾病的患病率约为12%，这有点高。</p><p id="1674" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">因此，我们看到了精确性和普遍性之间的权衡，假设敏感性和特异性是固定的。我们可以画出这种权衡:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi on"><img src="../Images/9cc088850fcc195bb43a3a3e82b9d1cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*TVDw17Zs6_ahC4NUYc_hEQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="8dbf" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">我们现在可以问更多的问题，关于我们在做各种公共卫生决策时使用RT-PCR检测结果的方式。</p><p id="09c3" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">在Andrew Gelman的帖子中可以找到另一个很好的度量标准及其含义的例子:“<a class="ae kv" href="https://statmodeling.stat.columbia.edu/2020/04/19/fatal-flaws-in-stanford-study-of-coronavirus-prevalence/" rel="noopener ugc nofollow" target="_blank">对斯坦福冠状病毒流行研究</a>的关注”。</p><h1 id="586c" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">练习练习练习</h1><p id="180b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们在这篇文章中讨论的问题有许多不同的风格。</p><p id="bcf9" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">我能想到的提高我们对主题的掌握的最好的方法是练习这些问题，并弥补我们在理解中发现的任何差距。</p><p id="20df" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">在以下链接中，您可以找到1000个这样的问题- <a class="ae kv" href="https://gist.github.com/roncho12/6a32187b093d1c0f200e942d5d171fd8" rel="noopener ugc nofollow" target="_blank">绩效指标问题</a>。这些问题是自动生成的，其中一些无法回答，也就是说，问题中提供的信息不足以回答它，我们可能缺少指标或其他一些数据。我们可以把这些看做是难题，这取决于我们去理解到底缺少了什么，以及为什么这个问题不能被回答。</p><h2 id="25fe" class="nr kx iq bd ky ns nt dn lc nu nv dp lg lx nw nx li mb ny nz lk mf oa ob lm oc bi translated">一些解决方案</h2><p id="c58b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">这些是一些问题的解决方案，可以在<a class="ae kv" href="https://gist.github.com/roncho12/6a32187b093d1c0f200e942d5d171fd8" rel="noopener ugc nofollow" target="_blank">的链接</a>中找到。</p><p id="e96c" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated"><strong class="lq ir">第一个例子:</strong></p><blockquote class="oo op oq"><p id="45e1" class="lo lp np lq b lr mm jr lt lu mn ju lw or nm lz ma os nn md me ot no mh mi mj ij bi translated">测试的错误发现率为95%,其阴性预测值为85%。<br/>这些指标是在数据集上评估测试时获得的，其中阳性测试结果的比例为1%。我们对一个生病的受试者进行测试。测试返回否定结果的概率是多少？</p></blockquote><p id="4247" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">先把问题中给出的信息写成概率:<br/> <code class="fe oe of og oh b">FDR = P(not D|+) = 0.95; NPV = P(not D|–) = 0.85</code> <em class="np"> <br/> </em> <code class="fe oe of og oh b">proportion of positive test results (prop+) = P(+) = 0.01</code></p><p id="f31c" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">这个问题要求我们找到<code class="fe oe of og oh b">P(–|D)</code>，即假阴性率(FNR):</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/6df9381114cb62ada9bb73c2c1f36f77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ifVB6nYXOmTILROffKmGSw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="8650" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">我们现在可以代入FDR，NPV，prop+的值，找到答案。</p><p id="306f" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated"><strong class="lq ir">第二个例子:</strong></p><blockquote class="oo op oq"><p id="daf3" class="lo lp np lq b lr mm jr lt lu mn ju lw or nm lz ma os nn md me ot no mh mi mj ij bi translated">测试的精确度为95%,假阳性率为90%。我们对一个生病的受试者进行测试。测试返回否定结果的概率是多少？</p></blockquote><p id="20a1" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">和往常一样，我们先把问题中的信息表示成概率:<br/> <code class="fe oe of og oh b">precision = P(D|+) = 0.95; FPR = P(+|not D) = 0.9</code></p><p id="dbcd" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">问题要求我们求<code class="fe oe of og oh b">P(–|D)</code>，即假阴性率(FNR): <br/> <code class="fe oe of og oh b">P(–|D) = P(D|-)P(-) / P(D)</code> <em class="np"> <br/> </em>我们知道可以把<code class="fe oe of og oh b">P(D)</code>写成<em class="np"><br/></em><code class="fe oe of og oh b">P(D) = P(+)P(D|+) + P(-)P(D|–) = P(+)P(D|+) + (1 — P(+))P(D|–)</code><em class="np"><br/></em>但是，求<code class="fe oe of og oh b">P(D)</code>的值需要我们知道<code class="fe oe of og oh b">P(+)</code>的值，以及<code class="fe oe of og oh b">P(D|+)</code>(在问题中作为精度给出)和<code class="fe oe of og oh b">P(D|–)</code>(即没有给我们的假漏报率(FOR)。因此，我们无法回答这个问题，因为我们缺少一些必需的信息。</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="1dff" class="kw kx iq bd ky kz nh lb lc ld ni lf lg jw nj jx li jz nk ka lk kc nl kd lm ln bi translated">面试问题——注意事项</h1><p id="0d3d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">如果你打算在求职面试中问这类问题，要记住的一点是，回答一个问题有不止一种方式，你应该能够跟随候选人沿着概率计算的道路走下去，直到当他正确回答时，你会对他露出放心的微笑。</p><p id="1456" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">你应该对你提出的问题非常熟悉。仅仅知道“5%是正确答案”是不够的，因为关键是要理解候选人是如何得出这个数字的，而不仅仅是让他凭直觉猜测。</p><p id="c07c" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">如果你对材料不够熟悉，候选人将无法从你那里得到任何暗示和指导，以防他结结巴巴，或者更糟的是，如果答案变得有点复杂，他会意识到你无法理解他的答案，这绝不是一件好事。</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="a2fc" class="kw kx iq bd ky kz nh lb lc ld ni lf lg jw nj jx li jz nk ka lk kc nl kd lm ln bi translated">摘要</h1><p id="126f" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">基于混淆矩阵中可用计数数据的性能度量被广泛用于评估预测性能。尽管它们很容易计算，但是一旦我们用语言描述它们，并试图解释它们的含义以及它们如何相互作用，这些指标就不总是直观的了。</p><p id="9e49" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">仅仅因为一些指标只涉及简单的计算，并不意味着它也很容易掌握。</p><p id="c35f" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">希望这篇文章能鼓励你花些时间深入研究这些常用的度量标准，并更好地理解当度量标准X取值y时的真正含义。</p><p id="e7d6" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">我希望你觉得这篇文章有用，而不是完全无聊:)</p><p id="0781" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">欢迎评论和反馈！</p><p id="7ad1" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">我们一直在寻找有才华的人加入我们的团队！</p></div></div>    
</body>
</html>