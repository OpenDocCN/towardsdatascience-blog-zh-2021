<html>
<head>
<title>Intelligently Cropping Page Marginalia</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">智能裁剪页面旁注</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/intelligently-cropping-page-marginalia-ab04744a1111?source=collection_archive---------21-----------------------#2021-12-01">https://towardsdatascience.com/intelligently-cropping-page-marginalia-ab04744a1111?source=collection_archive---------21-----------------------#2021-12-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="341c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我将向您展示如何编写代码来自动裁剪文档的页面旁注，以处理用于光学字符识别(OCR)的图像。</p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="87bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ks">更新:帖子的第二部分是</em> <a class="ae kt" rel="noopener" target="_blank" href="/a-better-way-to-process-images-for-ocr-aa634b94d573"> <em class="ks">这里是</em> </a>！</p><p id="2b51" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">编辑:我错误地将这个过程称为“预处理”,而它应该被称为“后处理”或者仅仅是“处理”。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi ku"><img src="../Images/c7f6384eb451aef41a4e517c37476000.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5gRZnUdBGnsCfqK6MV7hXQ.png"/></div></div><p class="lg lh gj gh gi li lj bd b be z dk translated">OCR前的图像处理方法。【图文由作者提供；第三版。(波哥大:奥利韦里奥·佩里&amp;中央情报局。, 1961)]</p></figure><p id="d421" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有几种方法可以在将图像输入到AWS Textract或Tesseract等OCR软件之前对其进行处理，使页面上的文字成为计算机可读的文本。你使用的方法很大程度上取决于你所拥有的图像质量。下面是一个不完整的列表:</p><ul class=""><li id="8aab" class="ll lm iq jp b jq jr ju jv jy ln kc lo kg lp kk lq lr ls lt bi translated">二值化—将图像转换为黑白像素，以增加文本和背景之间的对比度</li><li id="52ca" class="ll lm iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">倾斜校正—旋转图像，使文本以整齐的水平行显示</li><li id="c9e1" class="ll lm iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">透视扭曲—修复实际图像和捕获图像之间的扭曲</li><li id="a8b3" class="ll lm iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">裁剪—删除图像中我们不想阅读的部分，并简化图像，以便OCR软件“阅读”</li></ul><p id="b528" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于这些问题，已经有几种解决方案，但是裁剪页面旁注(页眉和页脚)是很困难的。并非所有页面都以相同的方式扫描，从而导致不同的页面方向和清晰度。页面旁注也不总是在同一个位置或具有一致的文本，这使得在OCR后很难删除。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi lz"><img src="../Images/b3364a95b52cbff6a7f95e6fcaca2b83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TjHorO6OM7tDnYNwzR-5xA.png"/></div></div><p class="lg lh gj gh gi li lj bd b be z dk translated">一个例子，我们希望如何理想地裁剪一页。【图文由作者提供；第三版。(波哥大:奥利韦里奥·佩里&amp;中央情报局。, 1961)]</p></figure><p id="d3c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上面的照片是你理想的裁剪扫描图像的方式。本质上，我们定位页眉或页脚和正文之间的空间，以及每列文本之间的空间，并说“我要在这里裁剪它”。但是我们不希望手动处理成百上千或上百万的文档。这需要很长时间，如果有自动化的流程，为什么还要自己做呢？</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi ku"><img src="../Images/5453338ca7d0416476bc9ff2b3363c8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2zUFTuxkg2rrH5Yey0Nl4A.png"/></div></div><p class="lg lh gj gh gi li lj bd b be z dk translated">用于OCR的图像处理方法。【图文由作者提供；第三版。(波哥大:奥利韦里奥·佩里&amp;中央情报局。, 1961)]</p></figure><p id="227e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我的方法是教计算机“看”图像，就像我在上图中所做的那样。将图像二值化后，图像的每个像素变成黑色或白色，分别用数字255和0表示。当我们看图片时，我们在寻找一条水平的白色像素带，它代表了页眉和文本之间的空间。</p><p id="f4f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面的代码片段从图像顶部开始查看30%的水平像素行。它计算每行像素之间的百分比差异，并允许来自低质量图像或随机斑点的少量噪声。然后，它识别最长的连续白带，并在中心裁剪它。这个过程依赖于已经被倾斜校正和二进制化的图像，所以请查看链接的解决方案。</p><figure class="kv kw kx ky gt kz"><div class="bz fp l di"><div class="ma mb l"/></div></figure><h1 id="c5c2" class="mc md iq bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">故障排除——啊哦，这种作物偏离太远了</h1><p id="bcf4" class="pw-post-body-paragraph jn jo iq jp b jq na js jt ju nb jw jx jy nc ka kb kc nd ke kf kg ne ki kj kk ij bi translated">一旦您有机会在一些图像上测试该代码(我强烈建议在浏览所有图像之前)，如果图像裁剪不如您想象的那样好，请确保:</p><ul class=""><li id="6c41" class="ll lm iq jp b jq jr ju jv jy ln kc lo kg lp kk lq lr ls lt bi translated">所有图像中的文本都是水平的</li><li id="ad9b" class="ll lm iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">你已经选择了正确的像素窗口来查看</li></ul></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="3fb0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望这个解决方案已经节省了你的时间，并教你如何处理图像！</p></div></div>    
</body>
</html>