<html>
<head>
<title>Data Science Driven UX Research to Improve NFT Auction Experience</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学推动UX研究，改善NFT拍卖体验</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-science-driven-ux-research-to-improve-nft-auction-experience-e9dde1fb3d1d?source=collection_archive---------35-----------------------#2021-08-23">https://towardsdatascience.com/data-science-driven-ux-research-to-improve-nft-auction-experience-e9dde1fb3d1d?source=collection_archive---------35-----------------------#2021-08-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6443" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">当我在artblocks.io平台上参与NFT拍卖时，我利用mempool来获得用户行为和情绪的更好代理</h2></div><p id="5834" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">用户体验(UX)描述了人们在与系统或服务交互时的感受，包括可用性、设计、营销、可访问性、性能、舒适性和实用性。唐·诺曼曾经说过，</p><blockquote class="le lf lg"><p id="d270" class="ki kj lh kk b kl km ju kn ko kp jx kq li ks kt ku lj kw kx ky lk la lb lc ld im bi translated"><em class="it">“万物皆有个性；一切都发出情感信号。即使这不是设计者的意图，浏览网站的人也会推断个性和体验情感。糟糕的网站有着可怕的个性，并向用户灌输可怕的情绪状态，通常是在不知不觉中。我们需要设计一些东西——产品、网站、服务——来传达我们想要的个性和情感。”</em></p></blockquote><p id="17b6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以太坊的性格是极其高深莫测，容易被误解的人。更糟糕的是，大多数用户在使用你的界面或钱包时，甚至不认为这是与以太坊的互动。如果你曾经参加过艺术街区拍卖的实时聊天，你会注意到，拍卖一结束，至少有十几个人抱怨说，他们没有得到一个薄荷糖是Metamask的错。我认为在过去的一年中，以太坊上的许多dapps的UX在产品交互和交易的可解释性方面都有了很大的提高。在很大程度上，dapps不会在你签署交易后就给你留下一个loading spinner。</p><p id="f74a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">即使dapps的设计在不断改进，我也不确定UX的研究已经深入到什么程度了。当我看到关于各种协议的数据分析或研究时，用户大多被视为同质的。随着我看到的Uniswap V3流动性提供商和Rabbithole Questers的一些分析，这种情况有所改变，但即使是这些人也仍然非常关注刚刚确认的链上交易。从我自己的经验来看，大多数的情绪和行为怪癖都发生在我提交、等待、加速或取消交易的时候。对于某些应用程序，用户可能会在提交交易后离开，去做其他事情。但对于像art block auctions这样的产品，他们会留在附近，直到确认发生，可能会检查任何他们可以更新的东西，并伴有复合焦虑。</p><p id="9635" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我认为，通过开始更多地利用内存池，我们可以更好地理解用户行为和摩擦。<a class="ae ll" href="https://compassmining.io/education/what-is-a-mempool/" rel="noopener ugc nofollow" target="_blank">内存池</a>是节点临时存储未确认事务的地方。这意味着如果您提交、加速或取消交易，那么这些操作将首先显示在mempool中。需要注意的是，来自mempool的数据并不存储在节点中，所以不能像查询已确认的事务那样查询历史数据。从这里，您可以看到他们提交了几笔交易，交易速度加快了很多倍，但远没有达到所需的油价，最终在20个街区后看到了确认。我相信这是用户体验和他们在整个过程中可能感受到的情绪的一个很好的代理。如果我们了解不同的用户群体在这个周期中的行为，我们就可以找出如何补充他们的决策或缓解他们的焦虑。据我所知，几乎只有以太坊基金会、所有核心开发人员和一些钱包团队出于UX的原因利用mempool数据。</p><p id="ba1d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> UX研究论文:</strong>通过观察一段时间以来用户通过拍卖的行为以及他们的钱包历史，我们可以开始为不同的用户群体提供行为特征。从这里，我们可以确定要尝试和缓解的主要问题。我们将使用<a class="ae ll" href="https://www.blocknative.com/" rel="noopener ugc nofollow" target="_blank"> Blocknative </a>获取一个月的Artblocks拍卖数据，并使用<a class="ae ll" href="https://dune.xyz/" rel="noopener ugc nofollow" target="_blank"> Dune查询</a>对这些地址的历史进行分层。</p><p id="90da" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这篇文章将比我以前的一些文章更具技术性，因为我相信这项工作可以而且应该相当容易地推广。<em class="lh">我想强调的是，我的背景不是UX研究，我纯粹是在试验我认为隐秘的UX研究可能会是什么样子。</em></p><h1 id="b596" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">数据来源和预处理所有拍卖数据</h1><p id="16e5" class="pw-post-body-paragraph ki kj it kk b kl me ju kn ko mf jx kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated"><em class="lh">如果您对技术方面不感兴趣，请跳到下一节特性工程</em></p><h1 id="49dd" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">Blocknative和Mempool数据流</h1><p id="5c0d" class="pw-post-body-paragraph ki kj it kk b kl me ju kn ko mf jx kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">使用Blocknative的Mempool explorer，您可以过滤提交给特定合同或来自特定钱包的交易。在我的例子中，我想听Artblock的NFT合同的白名单中的minter合同。你可以在这里找到我使用的<a class="ae ll" href="https://tinyurl.com/yftus9h2" rel="noopener ugc nofollow" target="_blank">流，如果你想使用完全相同的设置，可以把它保存下来。</a></p><p id="ba95" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以使用下面的查询<a class="ae ll" href="https://thegraph.com/legacy-explorer/subgraph/artblocks/art-blocks" rel="noopener ugc nofollow" target="_blank">在其子图</a>中找到白名单中的minter地址:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="4f75" class="ms ln it mo b gy mt mu l mv mw">{<br/>  contracts(first: 2) {<br/>    id<br/>    mintWhitelisted<br/>  }<br/>}</span></pre><p id="e9f6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">获得所有购买的订阅过滤器有三个步骤:</p><ol class=""><li id="6af5" class="mx my it kk b kl km ko kp kr mz kv na kz nb ld nc nd ne nf bi translated">使用“创建新订阅”按钮添加新地址</li><li id="2388" class="mx my it kk b kl ng ko nh kr ni kv nj kz nk ld nc nd ne nf bi translated">点击地址旁边的“ABI”按钮添加ABI。在我的例子中，我只需要“购买”功能。</li></ol><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="cfab" class="ms ln it mo b gy mt mu l mv mw">{<br/>    "inputs": [<br/>      {<br/>        "internalType": "uint256",<br/>        "name": "_projectId",<br/>        "type": "uint256"<br/>      }<br/>    ],<br/>    "name": "purchase",<br/>    "outputs": [<br/>      {<br/>        "internalType": "uint256",<br/>        "name": "_tokenId",<br/>        "type": "uint256"<br/>      }<br/>    ],<br/>    "stateMutability": "payable",<br/>    "type": "function"<br/>  }</span></pre><ol class=""><li id="c023" class="mx my it kk b kl km ko kp kr mz kv na kz nb ld nc nd ne nf bi translated">为<code class="fe nl nm nn mo b">methodName</code>匹配<code class="fe nl nm nn mo b">purchase</code>添加过滤器(确保不要使用全局过滤器)</li></ol><p id="7a3d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，您的设置应该如下所示:</p><figure class="mj mk ml mm gt np gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi no"><img src="../Images/7389448333f16a1f633a3e537fcbc969.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xGaUYznZTohMIjM4"/></div></div></figure><p id="06e4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了存储这些数据，我创建了一个ngrok/express端点来存储在本地运行的SQLite数据库中。我已经创建了一个<a class="ae ll" href="https://github.com/andrewhong5297/blocknative_stream_to_sql" rel="noopener ugc nofollow" target="_blank"> GitHub模板，包含复制这个设置的步骤</a>。这里要记住的最重要的一点可能是，在Blocknative account页面中将POST端点作为webhook添加时，您需要将它作为ngrok URL的一部分。</p><h1 id="f720" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">关键预处理功能</h1><p id="4965" class="pw-post-body-paragraph ki kj it kk b kl me ju kn ko mf jx kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated"><strong class="kk iu">多个交易哈希</strong></p><p id="d1b7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当您加速或取消一个事务时，原始的事务散列将被新的事务替换。这意味着，如果您想在整个生命周期中跟踪用户的事务，您需要将新的事务散列与原始事务散列进行协调。假设您将一个事务加速了五倍，您将总共有六个散列(原始散列+五个新散列)。我通过获得一个从<code class="fe nl nm nn mo b">tx_hash</code>到新的<code class="fe nl nm nn mo b">replaceHash</code>的字典映射来解决这个问题，然后递归替换。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="0519" class="ms ln it mo b gy mt mu l mv mw">replaceHashKeys = dict(zip(auctions["replaceHash"],auctions["tx_hash"])) #assign tx_hash based on replacements, just to keep consistency. <br/>replaceHashKeys.pop("none") #remove none key</span><span id="d2cf" class="ms ln it mo b gy nw mu l mv mw">def recursive_tx_search(key):<br/>    if key in replaceHashKeys:<br/>        return recursive_tx_search(replaceHashKeys[key])<br/>    else:<br/>        return key</span><span id="35fb" class="ms ln it mo b gy nw mu l mv mw">auctions["tx_hash"] = auctions["tx_hash"].apply(lambda x: recursive_tx_search(x))</span></pre><p id="9d34" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">区块编号问题</strong></p><p id="2d2b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">被丢弃的事务的<code class="fe nl nm nn mo b">blocknumber</code>为0，所以为了处理这个问题，我用<code class="fe nl nm nn mo b">timestamp</code>按升序对我的数据帧进行了排序，然后做了一个反向填充，这样0将被它被丢弃的正确的<code class="fe nl nm nn mo b">blocknumber</code>所替换。这是对特征工程的重要修正。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="a0a4" class="ms ln it mo b gy mt mu l mv mw">auctions = auctions.sort_values(by="timestamp",ascending=True)<br/>auctions["blocknumber"] = auctions["blocknumber"].replace(to_replace=0, method='bfill') #deal with dropped txs that show as blocknumber 0</span></pre><p id="a340" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">在主要拍卖期之外处理薄荷糖</strong></p><p id="97bc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于大多数项目，艺术家会在拍卖向公众开放之前铸造一些作品。有些项目不会马上销售一空，所以在拍卖开始几天后，你还会得到薄荷糖。我的分析集中在关键的拍卖时段，主要是前30分钟。为了去掉上面的两个薄荷案例，我基于<code class="fe nl nm nn mo b">blocknumber</code>去除了异常值。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="3f05" class="ms ln it mo b gy mt mu l mv mw">to_remove_indicies = []<br/>for project in list(set(auctions["projectId"])):<br/>    auction_spec = auctions[auctions["projectId"]==project]<br/>    all_times = pd.Series(list(set(auction_spec.blocknumber)))<br/>    to_remove_blocktimes = all_times[(np.abs(stats.zscore(all_times)) &gt; 2.5)]<br/>    if len(to_remove_blocktimes)==0:<br/>        break<br/>    to_remove_indicies.extend(auction_spec.index[auction_spec['blocknumber'].isin(to_remove_blocktimes)].tolist())<br/>auctions.drop(index=to_remove_indicies, inplace=True)</span></pre><p id="4fd3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">增加荷兰拍卖价格</strong></p><p id="6b95" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于数据集中除项目118之外的所有项目，使用了荷兰拍卖价格格式。我使用一个<a class="ae ll" href="https://dune.xyz/queries/113834" rel="noopener ugc nofollow" target="_blank"> dune查询</a>获取薄荷价格数据，然后将它合并到数据集上。在拍卖期间，我必须对有mempool操作但没有确认的块使用向前和向后填充。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="38d2" class="ms ln it mo b gy mt mu l mv mw">auction_prices = pd.read_csv(r'artblock_auctions_analytics/datasets/dune_auction_prices.csv', index_col=0)<br/>auctions = pd.merge(auctions,auction_prices, how="left", left_on=["projectId","blocknumber"],right_on=["projectId","blocknumber"])<br/>auctions.sort_values(by=["projectId","blocknumber"], ascending=True, inplace=True)<br/>auctions["price_eth"].fillna(method="ffill", inplace=True)<br/>auctions["price_eth"].fillna(method="bfill", inplace=True)</span></pre><h1 id="036b" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">每次拍卖的特征工程</h1><p id="3edd" class="pw-post-body-paragraph ki kj it kk b kl me ju kn ko mf jx kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">如果你对技术方面的内容不感兴趣，只需阅读粗体部分，跳过其余部分。</p><p id="ee2a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在数据科学中，要素是从更大的数据集中计算出来的变量，用作某种模型或算法的输入。所有特征在<code class="fe nl nm nn mo b">preprocess_auction</code>函数中计算，并在每个拍卖中计算<em class="lh">,而不是将所有拍卖组合成一个特征集。</em></p><p id="e060" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">第一组特性是交易状态的总和</strong>，是一个简单的<code class="fe nl nm nn mo b">pivot_table</code>函数:</p><ul class=""><li id="4117" class="mx my it kk b kl km ko kp kr mz kv na kz nb ld nx nd ne nf bi translated"><code class="fe nl nm nn mo b">number_submitted</code>:提交交易总数</li><li id="d061" class="mx my it kk b kl ng ko nh kr ni kv nj kz nk ld nx nd ne nf bi translated"><code class="fe nl nm nn mo b">cancel</code>:以取消结束的交易数</li><li id="bf45" class="mx my it kk b kl ng ko nh kr ni kv nj kz nk ld nx nd ne nf bi translated"><code class="fe nl nm nn mo b">failed</code>:以失败告终的交易计数</li><li id="0e0b" class="mx my it kk b kl ng ko nh kr ni kv nj kz nk ld nx nd ne nf bi translated"><code class="fe nl nm nn mo b">dropped</code>:以丢弃结束的交易数</li><li id="d4ec" class="mx my it kk b kl ng ko nh kr ni kv nj kz nk ld nx nd ne nf bi translated"><code class="fe nl nm nn mo b">confirmed</code>:已确认结束的交易数</li></ul><p id="5197" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我前面提到，由于各种问题，一些数据没有被捕获用于拍卖，这些交易从数据集中删除。</p><p id="16d0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">下一组特征包括它们的气体行为。</strong>这里的关键概念是捕捉他们的交易天然气与每区块平均确认天然气的距离(移动1个区块)。然后，我们可以为整个拍卖中汽油价格距离的平均值、中值和标准差创建特征。有一堆转置和索引重置来使<code class="fe nl nm nn mo b">blocknumber</code>列按正确的顺序排列，但重要的函数是<code class="fe nl nm nn mo b">fill_pending_values_gas</code>，它向前填充捕获的动作之间的汽油价格。这意味着，如果我在<code class="fe nl nm nn mo b">blocknumber</code> 1000使用0.05 ETH的gas放入一个事务，并且我的下一个操作直到<code class="fe nl nm nn mo b">blocknumber</code> 1005才加速到0.1 ETH gas，那么这个函数将用0.05 ETH填充1000-1005之间的块。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="230c" class="ms ln it mo b gy mt mu l mv mw">def fill_pending_values_gas(x):<br/>    first = x.first_valid_index()<br/>    last = x.last_valid_index()<br/>    x.loc[first:last] = x.loc[first:last].fillna(method="ffill")<br/>    return x</span></pre><p id="e4f8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">第三组功能是计算拍卖中采取行动的总数和频率。</strong>这里，我们从每个块的总操作(加速)的枢纽开始，通过一些特殊的计算来获得每个事务的第一个挂起实例:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="27b6" class="ms ln it mo b gy mt mu l mv mw">get_first_pending = df[df["status"]=="pending"] #first submitted <br/>get_first_pending = get_first_pending.drop_duplicates(subset=["tx_hash","status"], keep="first")<br/>auctions_time_data = pd.concat([get_first_pending,df[df["status"]=="speedup"]], axis=0)<br/>time_action = auctions_time_data.pivot_table(index=["sender","tx_hash"], columns="blocknumber",values="status",aggfunc="count") \<br/>                    .reindex(set(df["blocknumber"]), axis=1, fill_value=np.nan)</span></pre><p id="554f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从这里开始，我们分三步到达<code class="fe nl nm nn mo b">average_action_delay</code>:</p><ol class=""><li id="b37f" class="mx my it kk b kl km ko kp kr mz kv na kz nb ld nc nd ne nf bi translated">我们计算每个块的动作数量(是的，有些人在同一个块中多次加速事务)</li><li id="1aaf" class="mx my it kk b kl ng ko nh kr ni kv nj kz nk ld nc nd ne nf bi translated">我们丢弃没有动作的块，然后取剩余块号之间的差。我们为每个块采取的每个额外动作加0。</li><li id="1f56" class="mx my it kk b kl ng ko nh kr ni kv nj kz nk ld nc nd ne nf bi translated">取差值和加零的平均值，得到<code class="fe nl nm nn mo b">average_action_delay</code></li></ol><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="8632" class="ms ln it mo b gy mt mu l mv mw">def get_actions_diff(row):<br/>    row = row.dropna().reset_index()<br/>    actions_diff_nominal =list(row["blocknumber"].diff(1).fillna(0))<br/> <br/>    #take the blocks with muliple actions and subtract one, then sum up. <br/>    zeros_to_add = sum([ actions - 1 if actions &gt; 1 else 0 for actions in row[row.columns[1]]])<br/>    actions_diff_nominal.extend(list(np.zeros(int(zeros_to_add))))<br/>    actions_diff = np.mean(actions_diff_nominal)<br/>    if (actions_diff==0) and (zeros_to_add==0):<br/>        return 2000 #meaning they never took another action<br/>    else:<br/>        return actions_diff</span></pre><p id="320e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe nl nm nn mo b">total_actions</code>要简单得多，因为它只是整个枢轴上的动作的总和。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="168b" class="ms ln it mo b gy mt mu l mv mw">time_action["total_actions"] = time_action.iloc[:,:-1].sum(axis=1)</span></pre><p id="1d51" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">最后一个与时间相关的特征是</strong> <code class="fe nl nm nn mo b">block_entry</code>，这是一个重要的特征，因为引入了荷兰式拍卖。从本质上来说，这跟踪了从一开始事务是在哪个块上提交的。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="24e1" class="ms ln it mo b gy mt mu l mv mw">get_first_pending["block_entry"] =   get_first_pending["blocknumber"] - get_first_pending["blocknumber"].min()</span><span id="7e13" class="ms ln it mo b gy nw mu l mv mw">entry_pivot = get_first_pending.pivot_table(index="sender",values="block_entry",aggfunc="min")</span></pre><p id="838a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe nl nm nn mo b">price_eth</code>也被添加为一个特性，它与<code class="fe nl nm nn mo b">block_entry</code>点相关联。</p><p id="020d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">最后一组特征基于Dune查询，特别是自第一次交易以来的天数、交易中使用的总气体量以及交易总数。</strong>为了获得正确格式的地址数组，在读入SQL数据后，我使用了下面一行代码:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="d633" class="ms ln it mo b gy mt mu l mv mw">all_users = list(set(auctions["sender"].apply(lambda x: x.replace('0x','\\x'))))<br/>all_users_string = "('" + "'),('".join(all_users) + "')"</span></pre><p id="f51e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对此的dune查询相当简单。我把地址串粘贴在<code class="fe nl nm nn mo b">VALUES</code>下，做了一些cte得到我想要的特性。在最后的<code class="fe nl nm nn mo b">SELECT</code>中，我还试图添加每个地址的en。你可以在这里找到查询:<a class="ae ll" href="https://dune.xyz/queries/96523" rel="noopener ugc nofollow" target="_blank">https://dune.xyz/queries/96523</a></p><p id="010b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，我们只合并每个钱包的活动天数、总用气量和交易总数数据。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="80ba" class="ms ln it mo b gy mt mu l mv mw">auctions_all_df = pd.merge(auctions_all_df,wh,on="sender",how="left")<br/>auctions_all_df.set_index(["sender","ens"],inplace=True)</span></pre><p id="56e1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lh">完成所有这些后，我们终于准备好运行一些有趣的无监督学习算法，并尝试验证我们对用户组的假设。</em></p><h1 id="ca82" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">聚类和可视化用户组</h1><p id="04ac" class="pw-post-body-paragraph ki kj it kk b kl me ju kn ko mf jx kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">在我开始这个项目之前，我期望看到以下用户组出现在数据中:</p><ul class=""><li id="b1d8" class="mx my it kk b kl km ko kp kr mz kv na kz nb ld nx nd ne nf bi translated"><strong class="kk iu">定了就忘:</strong>这里应该有两类人，一类人定了一个很高气的交易，一类人定了一个一般/低气的交易，然后剩下的拍卖都不碰。</li><li id="690a" class="mx my it kk b kl ng ko nh kr ni kv nj kz nk ld nx nd ne nf bi translated"><strong class="kk iu">加速:</strong>这里也应该有两类人，一类是经常加速并直接将交易更新为气价因素的人，另一类是经常加速但气价基本不变的人。</li></ul><p id="b827" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我对验证这些组非常感兴趣，看看每个组有多大，看看在许多拍卖过程中是否有用户在组之间移动。最简单的方法是使用无监督的机器学习，根据所有特征的可变性来识别用户组的聚类。从本质上讲，这就像观察一个州的收入分布，然后根据不同的收入集中程度、地理坐标和年龄将其分割成子分布。请注意，这不是宁滨，在那里分布被分割成相等的范围-而是基于整个范围内的观测密度来计算的。我们将采取的方法被称为“无监督的”，因为我们的数据集没有任何现有的标签，而不是像回归那样有一个预测值，可以被验证为正确或错误。</p><p id="0dc1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我决定使用的算法叫做<a class="ae ll" href="https://stanford.edu/~cpiech/cs221/handouts/kmeans.html" rel="noopener ugc nofollow" target="_blank"> k-means </a>，其中k代表你期望识别的聚类数。每个集群都有一个“质心”，就像一个圆心。有多种方法可以计算出多少个聚类是最优的，我使用的两种方法是肘点和轮廓分数。这两种提问方式都很奇特，</p><blockquote class="le lf lg"><p id="186b" class="ki kj lh kk b kl km ju kn ko kp jx kq li ks kt ku lj kw kx ky lk la lb lc ld im bi translated"><em class="it">“每个额外的聚类是否有助于增加聚类的密度(计算为聚类中各点到质心的平均距离)并保持聚类之间足够的间隔(两个聚类之间没有重叠)？”</em></p></blockquote><p id="7c2d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我发现，在保持高轮廓分数(大约0.55)的同时，3个集群在大多数惯性改进方面是最佳的。</p><figure class="mj mk ml mm gt np gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/67e744941b036029a4d57f4e53c709ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/0*gmPTApKpcE_CnqGM"/></div><p class="nz oa gj gh gi ob oc bd b be z dk translated">本次分析使用了6次拍卖</p></figure><p id="6216" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">选择了集群之后，我们希望能够可视化并验证它们的存在。有超过15个变量，所以我们需要减少维数来绘制它。降维通常依赖于主成分分析或t-SNE算法，在我们的例子中，我选择了t-SNE算法。不要太担心理解这一部分，这些算法本质上捕捉所有特征的方差，以给我们X和Y分量，最大化点彼此之间的传播。</p><p id="d94e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">让我们看看8月4日的项目118，LeWitt发电机发电机:</strong></p><figure class="mj mk ml mm gt np gh gi paragraph-image"><div class="gh gi od"><img src="../Images/0097fa728bfd0fe8d59941ba51eeff8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/0*uxxucQ_AbzQ0J8a_"/></div></figure><figure class="mj mk ml mm gt np gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi oe"><img src="../Images/5a2bb2578fa6450d44a408ffa59c7526.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*djD6dgxsCU5UojuZ"/></div></div><p class="nz oa gj gh gi ob oc bd b be z dk translated">这些是使用KDE计算的每个变量的聚类子分布。这些颜色与上面集群中的颜色相匹配。</p></figure><p id="183d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在查看了每个变量的子分布和一些数据示例之后，我能够对集群进行分类。橙色集群是速度最快的一组，同时平均提交的天然气交易量也略低。蓝色和绿色簇表现出彼此相似的行为，但是蓝色簇中的地址通常比绿色簇中的地址具有更少的历史。</p><p id="fa46" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">纵观全局，似乎最初关于“加速”和“设置高和设置低”分别产生两组的假设是错误的。相反，我们有一个“加速”组(橙色)和一个“一劳永逸”组(蓝色和绿色在行为上是一样的)。我认为“一劳永逸”组中的新钱包(蓝色)和旧钱包(绿色)可能在实际用户中有很多重叠，用户只是创建了新钱包来竞标更多的薄荷糖。基于他们的不耐烦和低于平均水平的油价,“加速”群体在我看来要么是缺乏经验，要么是比其他用户更贪婪。<em class="lh">令我惊讶的是，提速组在所有投标人中所占的比例更小，因为我原本预计提速组将占投标人的60-70 %,而不是30%。</em></p><p id="462e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">现在，这项用户行为研究真正有趣的地方是将项目118(设定价格为0.75 ETH)与项目140(荷兰拍卖，价格从1.559 ETH降至159 ETH)进行比较。</strong></p><p id="af2a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">这是项目140的分组，8月21日的良好振动:</strong></p><figure class="mj mk ml mm gt np gh gi paragraph-image"><div class="gh gi od"><img src="../Images/c39af091c6243b83fbd0f41916b71770.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/0*w3J5O_6KzHXzysVw"/></div></figure><figure class="mj mk ml mm gt np gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi of"><img src="../Images/e64e4bed3b119a4a7d322a394544237e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6DG_s4tgL9ybghWr"/></div></div></figure><p id="acbe" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以看到，现在大多数聚类可变性来自于<code class="fe nl nm nn mo b">block_entry</code>、<code class="fe nl nm nn mo b">price_eth</code>和所有的<code class="fe nl nm nn mo b">gas_behavior</code>特征。这与项目118的主要变量有很大的不同。在118中，设定价格意味着人们以相当均匀的分布进入拍卖(剩下的数量似乎并不重要)，而“加速”组则无休止地采取行动——可能非常焦虑。</p><p id="1b96" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在项目140中，我们在<code class="fe nl nm nn mo b">average_action_delay</code>或<code class="fe nl nm nn mo b">total_actions</code>中没有看到相同的行动差异，相反，我们看到可能是同一个“加速”组在很晚的阶段进入区块，并设定远低于平均水平的天然气价格，如在<code class="fe nl nm nn mo b">average_gas_behavior</code>中所见。绿色集群可能代表比橙色集群更有经验的用户，但是他们的行为仍然在橙色和蓝色之间转换。如果我试着将这一点映射到118中的集群，我相信“加速”组现在是“贪婪”组(橙色),它进入较晚，出价较低。“一劳永逸”的群体很好地映射到“早抢”群体(绿色和蓝色)，他们都表现出很好的耐心和足够的天然气投标安全网。</p><p id="3244" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我称Orange group为“贪婪”不仅仅是因为他们的行为，还因为他们的交易失败率。</p><p id="69c3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于项目118，失败率属于“加速”组，而“一劳永逸”组的失败率在10-15%以内。</p><figure class="mj mk ml mm gt np gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi og"><img src="../Images/a1ef99ed645ccea5338889aef0edb16a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7TEa7y_Z-y0v2m6r"/></div></div><p class="nz oa gj gh gi ob oc bd b be z dk translated">percent_lost takes(取消+放弃+失败)/ number_submitted</p></figure><p id="0ed8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于项目140,“贪婪”集群的失败率约为69%,而“早期抢占”集群的失败率约为5-15%。</p><figure class="mj mk ml mm gt np gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi oh"><img src="../Images/08d293811b2f14848aeda5393f55a176.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gA_2zCGkU1uBidI0"/></div></div></figure><p id="cd25" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">总的来说，我对此的理解是，这个群体的坏习惯被放大了——在我看来，我们在焦虑→贪婪之间做了权衡。这可能使拍卖压力较小，但最终导致更多用户感到不安(由于失败的薄荷糖)。</p><p id="97d8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lh">我确信可以进行更细致的分析，根据工厂/策划/游乐场或艺术家本身进一步细分拍卖。随着社区的不断发展，这只会变得更加有趣和复杂，情绪在单次拍卖和未来的拍卖中都会发挥更大的作用。</em></p><p id="3f1f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lh">这项对多个拍卖的研究帮助我们验证了我们的假设，了解了用户群的比例，并了解了用户的好或坏行为是如何随着时间(和其他参数)而变化的。现在我们需要将它插入到产品周期流程的其余部分。</em></p><h1 id="c361" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">我们将何去何从:</h1><p id="1646" class="pw-post-body-paragraph ki kj it kk b kl me ju kn ko mf jx kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">我选择Artblocks拍卖而不是混合平台的原因是因为我想寻找一个界面和项目类型的可变性最受控制的地方。这应该给了我们相当一致的用户和行为类型。</p><p id="5443" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这只是UX研究周期的开始，所以理想情况下，我们可以继续以下步骤:</p><ol class=""><li id="8232" class="mx my it kk b kl km ko kp kr mz kv na kz nb ld nc nd ne nf bi translated">使用无监督的机器学习算法来识别用户群(集群)，并查看有多少人在进入拍卖时犯了“错误”。<em class="lh">这是我们今天讨论的步骤。</em></li><li id="fac2" class="mx my it kk b kl ng ko nh kr ni kv nj kz nk ld nc nd ne nf bi translated">创建一个新的用户界面，例如竞价屏幕上的<a class="ae ll" href="https://twitter.com/andrewhong5297/status/1423020670825504768" rel="noopener ugc nofollow" target="_blank">直方图视图，或者显示大多数人通常何时进入/拥挤拍卖以及价格的历史数据。向用户提供当前和历史背景的任何东西，尤其是那些来自速度集群的用户。</a></li><li id="e99f" class="mx my it kk b kl ng ko nh kr ni kv nj kz nk ld nc nd ne nf bi translated">对于每次拍卖，通过创建的算法运行内存池/钱包数据，以查看用户组是否发生了变化，以及特定用户是否“学会”以不同的方式参与拍卖(即，他们是否在用户组之间移动)。<em class="lh">我认为，如果做得好，这一步可以发现最大的价值。使用ENS或其他标识符来帮助补充这一分组也将有极大的帮助</em></li><li id="2599" class="mx my it kk b kl ng ko nh kr ni kv nj kz nk ld nc nd ne nf bi translated">根据结果，继续迭代用户界面和设计。您还可以运行更明智的A/B测试，因为您甚至可以根据用户的最后一个集群(或者对新用户使用标签传播)做出有根据的猜测，从而确定要显示哪些屏幕。</li></ol><p id="2714" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">荷兰拍卖式的变化也是第二步的一个例子，我们能够看到用户行为的明显转变。</strong>虽然这种A/B测试通常侧重于提高参与度或转化率，但我们在这里针对用户的学习和改进能力进行了优化。如果在多平台环境中迭代，这可能会变得更加健壮，这样我们就可以在生态系统级别上研究某人是如何学习的(甚至可以用兔子数据和用户简档进行补充)。由于我的Artblocks用户研究都是基于公开来源的数据，它可以被任何其他拍卖/销售平台复制和补充。<strong class="kk iu"> Crypto可能是第一个拥有同步透明的用户组和UX研究的行业，应用于产品和学术界。</strong> Nansen wallet标签已经向这一目标迈进了一步，但当来自不同产品的团队从不同方面和方法建立这一目标时，情况就不同了。</p><p id="4e18" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我最终的设想是使用数据建立以下用户角色(其中包含子组/级别):</p><ul class=""><li id="7a10" class="mx my it kk b kl km ko kp kr mz kv na kz nb ld nx nd ne nf bi translated">我想买一辆Fidenza，所以我可以通过私人销售购买，自己在拍卖会上出价，在prtyDAO竞价拍卖中出价，或者用<a class="ae ll" href="https://fractional.art/" rel="noopener ugc nofollow" target="_blank"> fractional.art </a>购买其中的一小部分</li><li id="c273" class="mx my it kk b kl ng ko nh kr ni kv nj kz nk ld nx nd ne nf bi translated">总的来说，我喜欢Fidenza，所以我会买NFTX Fidenza索引令牌或在<a class="ae ll" href="https://fractional.art/" rel="noopener ugc nofollow" target="_blank"> fractional.art </a>策划的一篮子NFT艺术作品</li><li id="d5ee" class="mx my it kk b kl ng ko nh kr ni kv nj kz nk ld nx nd ne nf bi translated">我已经是一名收藏家了，所以我想用我已经拥有的一套精选的NFT和ERC20s交换或竞标Fidenza(使用genie-xyz交换)。</li><li id="31e4" class="mx my it kk b kl ng ko nh kr ni kv nj kz nk ld nx nd ne nf bi translated">我喜欢通过最初的造币厂和二级市场购买的热潮，并大量参与像Artblocks live mints这样的拍卖。</li></ul><p id="c267" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我希望你觉得这个项目有趣和/或有帮助，我从中获得了很多乐趣。感谢Blocknative的人们为我牵线搭桥，感谢Artblocks的社区回答了我的许多拍卖问题。和往常一样，如果你有任何问题或想法，请随时联系我们！</p><p id="e0b4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可以在这里找到包含所有数据和脚本的GitHub repo<a class="ae ll" href="https://github.com/andrewhong5297/artblock_auctions_analysis" rel="noopener ugc nofollow" target="_blank"/>。这个脚本可能有点难读，因为我还在重构和清理它。当我分析八月的最后几次拍卖的新模式时，这里的脚本和一些分析可能会更新。</p><p id="9320" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lh">本帖首次发表于</em><a class="ae ll" href="https://ath.mirror.xyz/l_-4fQ08cpxUZpn9V9S5R27wfKvNgdnrXlZAWZWvdlg" rel="noopener ugc nofollow" target="_blank"><em class="lh">ath . mirror . XYZ</em></a><em class="lh">，请务必订阅并关注我的</em><a class="ae ll" href="https://twitter.com/andrewhong5297" rel="noopener ugc nofollow" target="_blank"><em class="lh">Twitter</em></a><em class="lh">以获取我的最新加密和数据科学内容。</em></p></div></div>    
</body>
</html>