<html>
<head>
<title>Tutorial on Building a Professional Bar Graph in Plotly Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Plotly Python构建专业条形图的教程</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/tutorial-on-building-a-professional-bar-graph-in-plotly-python-ba8e63fda048?source=collection_archive---------9-----------------------#2021-07-05">https://towardsdatascience.com/tutorial-on-building-a-professional-bar-graph-in-plotly-python-ba8e63fda048?source=collection_archive---------9-----------------------#2021-07-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="1448" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a></h2><div class=""/><div class=""><h2 id="12b0" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">创建高质量条形图的分步指南</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/61e471705b272127d06c92a0a240c8d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pmDiRFPojGu4zF51ZqapHQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">本教程的最终图形迭代|作者图片</p></figure><p id="e43a" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">作为我上一篇文章“关于用Plotly Python 构建专业散点图的<a class="ae ma" rel="noopener" target="_blank" href="/tutorial-on-building-professional-scatter-graphs-in-plotly-python-abe33923f557">教程”的续篇，我已经用Python编写了另一个Plotly教程，介绍如何构建一个视觉上令人惊叹的条形图。</a></p><p id="31f1" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">本文旨在将Python中的Plotly图形提升到一个新的水平，假设您已经对这种语言有所熟悉。我将应用一种逐步迭代的方法来帮助简化这个过程。如果你想提高视觉效果，请继续阅读。</p><p id="9bf1" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我将使用的数据集是巴基斯坦的电子商务销售额。您可以从<a class="ae ma" href="https://www.kaggle.com/zusmani/pakistans-largest-ecommerce-dataset" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>或我的<a class="ae ma" href="https://github.com/tomgprice90/Medium_Article_Tutorial_Bar_Plotly_Python" rel="noopener ugc nofollow" target="_blank"> Git </a>库下载数据，以及本教程的其余代码。注意:从Kaggle版本中删除了缺少值的行，以便上传到Github。</p><p id="ce12" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们将逐步完成同一图表的六个不同版本。从Plotly提供的最基本的图表开始，到最后完全定制和注释的图表。我将解释每一步的基本变化。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="c884" class="mi mj iq bd mk ml mm mn mo mp mq mr ms kf mt kg mu ki mv kj mw kl mx km my mz bi translated">在我们开始编码之前</h1><p id="2adc" class="pw-post-body-paragraph le lf iq lg b lh na ka lj lk nb kd lm ln nc lp lq lr nd lt lu lv ne lx ly lz ij bi translated">值得一提的是Plotly是如何组成它的图形对象的。一种简单的思考方式是描绘由四层构成的图表。</p><ul class=""><li id="4d5c" class="nf ng iq lg b lh li lk ll ln nh lr ni lv nj lz nk nl nm nn bi translated">层1-创建一个空白图形对象。</li><li id="6296" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">第2层-添加并自定义您的数据点。</li><li id="fe0f" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">第3层—定制您的视觉效果。</li><li id="da0b" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">第4层—注释您的视觉效果。</li></ul><p id="e660" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">当可视化数据时，理解我们想对数据提出什么问题总是至关重要的(假设我们正在进行解释性分析而不是探索性分析)。</p><p id="bbb4" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们想从数据集中找出的问题是:</p><p id="7bf0" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">2018年第三季度，哪个品类同比增长最大，是什么推动了这一增长？</strong></p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="03cb" class="mi mj iq bd mk ml mm mn mo mp mq mr ms kf mt kg mu ki mv kj mw kl mx km my mz bi translated">索引</h1><ol class=""><li id="3bc9" class="nf ng iq lg b lh na lk nb ln nt lr nu lv nv lz nw nl nm nn bi translated"><a class="ae ma" href="#495f" rel="noopener ugc nofollow"> <strong class="lg ja">第一步:数据操作</strong> </a></li><li id="fc5c" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nw nl nm nn bi translated"><a class="ae ma" href="#5a78" rel="noopener ugc nofollow"> <strong class="lg ja">第二步:创建标准条形图</strong> </a></li><li id="7d0c" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nw nl nm nn bi translated"><a class="ae ma" href="#c813" rel="noopener ugc nofollow"> <strong class="lg ja">第三步:造型变化</strong> </a></li><li id="c750" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nw nl nm nn bi translated"><a class="ae ma" href="#f2d6" rel="noopener ugc nofollow"> <strong class="lg ja">第四步:展示多个指标</strong> </a></li><li id="b427" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nw nl nm nn bi translated"><a class="ae ma" href="#948e" rel="noopener ugc nofollow"> <strong class="lg ja">第五步:减少杂乱</strong> </a></li><li id="b8aa" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nw nl nm nn bi translated"><a class="ae ma" href="#9c8d" rel="noopener ugc nofollow"> <strong class="lg ja">第六步:引导读者的注意力</strong> </a></li><li id="43ae" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nw nl nm nn bi translated"><a class="ae ma" href="#0317" rel="noopener ugc nofollow"> <strong class="lg ja">第七步:添加解说词</strong> </a></li><li id="c52f" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nw nl nm nn bi translated"><a class="ae ma" href="#c84c" rel="noopener ugc nofollow"> <strong class="lg ja">结论</strong> </a></li></ol></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="495f" class="mi mj iq bd mk ml mm mn mo mp mq mr ms kf mt kg mu ki mv kj mw kl mx km my mz bi translated">步骤1:数据操作</h1><p id="ea60" class="pw-post-body-paragraph le lf iq lg b lh na ka lj lk nb kd lm ln nc lp lq lr nd lt lu lv ne lx ly lz ij bi translated">我们想要操作我们正在使用的数据集，这样我们就可以创建我们的初始图表。我们需要制作几个我们想要显示的变量，并过滤掉不必要的数据。***说出我要添加的变量***我决定去掉大量的NA，这可能不总是最好的决定，但对于本文来说是可以接受的。</p><p id="ed6b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我不会解释数据操作过程，因为这本身就是一个教程，而本文主要关注在Plotly中创建一个条形图。然而，我在下面的代码中注释了每一步。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nx ny l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">第1步:数据操作—代码|作者图片</p></figure></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="5a78" class="mi mj iq bd mk ml mm mn mo mp mq mr ms kf mt kg mu ki mv kj mw kl mx km my mz bi translated">步骤2:创建标准条形图</h1><p id="c145" class="pw-post-body-paragraph le lf iq lg b lh na ka lj lk nb kd lm ln nc lp lq lr nd lt lu lv ne lx ly lz ij bi translated">对于第1层，用<code class="fe nz oa ob oc b">go.Figure()</code>创建一个空白图形对象。</p><p id="cc80" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对于第2层，使用<code class="fe nz oa ob oc b">add_trace(...)</code>添加一层数据点到你的空白画布上。这个命令是我们执行所有数据定制的地方，比如颜色、大小、透明度。</p><p id="03c7" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">为了研究增长，我选择显示销售的绝对差异，而不是百分比。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nx ny l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">步骤2:创建一个标准的条形图—代码|作者图片</p></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="od ny l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">第二步:创建一个标准的条形图——图表|作者图片</p></figure><p id="bc61" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在上面的图形中，您会注意到图形标题和轴标题丢失了。默认情况下，Plotly Graph对象不会生成这些，因此必须显式定义它们。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="c813" class="mi mj iq bd mk ml mm mn mo mp mq mr ms kf mt kg mu ki mv kj mw kl mx km my mz bi translated">第三步:改变造型</h1><p id="6e53" class="pw-post-body-paragraph le lf iq lg b lh na ka lj lk nb kd lm ln nc lp lq lr nd lt lu lv ne lx ly lz ij bi translated">可视化数据的一个最重要的概念是突出显示您想要显示的数据点，并减少来自不太重要的元素的干扰。尽管如此，还是要清楚地标注图表中的所有特征，这样读者就不会去猜测如何解读图表。</p><p id="dd4b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对于这个迭代，我们将把第3层添加到我们的图中。我们将使用<code class="fe nz oa ob oc b">update_layout(...)</code>自定义我们的图形框架的外观。这将是您更新除数据点之外的所有内容的地方，如标题、轴、刻度格式、网格线等。我们将使用颜色将不太重要的特征推到后面，例如轴线、轴标记标签、轴标题和绘图背景。</p><p id="bfa5" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对于此迭代，我们将进行以下更改:</p><ul class=""><li id="f8db" class="nf ng iq lg b lh li lk ll ln nh lr ni lv nj lz nk nl nm nn bi translated">添加标题</li><li id="80e8" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">添加轴标题</li><li id="1417" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">对类别排序</li><li id="166a" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">将轴的线条颜色从白色更改为浅灰色</li><li id="7082" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">将背景颜色改为白色</li><li id="c604" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">将图表上所有文本的颜色改为浅灰色</li><li id="2201" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">向x轴刻度添加货币前缀</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nx ny l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">步骤3:样式更改—代码|作者图片</p></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="od ny l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">步骤3:样式更改—图表|作者图片</p></figure><p id="9373" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们已经按照我们想要的顺序创建了一个类别列表，从最大正方差到最大负方差，然后将它传递给类别数组参数。这可能看起来很冗长，但是我们将在下一步中引入关于补充图的其他度量。类别顺序将在每个地块中保持不变。</p><p id="94cf" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在上图中，您现在可以清楚地看到哪个品类同比增长最为显著。接下来，我们将找出导致这种增长的原因。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="f2d6" class="mi mj iq bd mk ml mm mn mo mp mq mr ms kf mt kg mu ki mv kj mw kl mx km my mz bi translated">步骤4:展示多个指标</h1><p id="0513" class="pw-post-body-paragraph le lf iq lg b lh na ka lj lk nb kd lm ln nc lp lq lr nd lt lu lv ne lx ly lz ij bi translated">将尽可能多的信息压缩到可视化中并不总是一个好主意。只包括额外的细节，如果它支持你想要讲述的故事。你还要考虑话题的复杂程度，受众是谁；有时候，把故事分成几个画面可能更容易。</p><p id="c578" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在这种情况下，我们将通过子图在图表上显示额外的指标。这是因为它需要回答我们最初的问题，并且消息不会过于复杂。在后面的步骤中，我们将使用技巧将读者的注意力集中在重要的事情上。</p><p id="c794" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在这一步，我们使用<code class="fe nz oa ob oc b">make_subplots(...)</code>而不是<code class="fe nz oa ob oc b">go.Figure()</code>来创建空白图。由于我们正在处理子图，我们将在数据框中创建两列来保存每个指标在每个子图中的行和列位置。然后我们使用循环<code class="fe nz oa ob oc b">for metric in df2["metric"].unique():</code>在给定的行和列坐标为子情节中的每个指标生成一个图形。</p><p id="be4a" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">当在Plotly中处理支线剧情时，我们可以选择用<code class="fe nz oa ob oc b">xaxis = dict(...)</code>、<code class="fe nz oa ob oc b">xaxis2 = dict(...)</code>等更新单个x轴。，或者用<code class="fe nz oa ob oc b">fig.update_xaxes(...)</code>更新所有x轴。我们将使用前一个代码进行特定于轴的格式化，后一个代码进行所有轴通用的格式化。对于y轴也可以这样做。</p><p id="81a4" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对于此次迭代，我们将进行以下更改:</p><ul class=""><li id="a0bd" class="nf ng iq lg b lh li lk ll ln nh lr ni lv nj lz nk nl nm nn bi translated">向图形中添加子图以显示其他指标</li><li id="35cc" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">给每个支线剧情添加标题</li><li id="9165" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">将y轴移动到x = 0</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nx ny l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">第4步:呈现多个指标—代码|作者图片</p></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="od ny l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">步骤4:呈现多个指标—图表|按作者分类的图像</p></figure><p id="4839" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">默认情况下，支线剧情的引入使得图表更加繁忙。有几个重要的问题凸显出来。</p><p id="2da9" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">太多杂物</strong></p><p id="60e6" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">上面的图太重了，包含了重复的信息，比如第二和第三个支线剧情的图例和y轴。为了创建一个专业的图表，我们希望对我们纳入的元素非常有选择性。包括尽可能少的信息，这使得图表能够被理解并且仍然回答问题。</p><p id="14c1" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">支线剧情之间断开</strong></p><p id="af11" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">“物品Ord差异”和“平均RSP差异”支线剧情的加入使这个视觉信息变得复杂。这是因为与“销售差异”子情节相比，它们的规模完全不同。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="948e" class="mi mj iq bd mk ml mm mn mo mp mq mr ms kf mt kg mu ki mv kj mw kl mx km my mz bi translated">减少杂乱</h1><p id="3066" class="pw-post-body-paragraph le lf iq lg b lh na ka lj lk nb kd lm ln nc lp lq lr nd lt lu lv ne lx ly lz ij bi translated">减少杂乱会降低读者的认知负荷，使信息更容易消化。为了帮助减少混乱，我们将在<code class="fe nz oa ob oc b">make_subplots(...)</code>命令中设置<code class="fe nz oa ob oc b">shared_yaxes = True</code>。</p><p id="d921" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们将通过删除“物品Ord差异”和“平均RSP差异”支线剧情来解决支线剧情之间不同比例的问题，并添加销售差异(%)指标。</p><p id="2ddb" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们还将把x轴移到图表的顶部，这样子情节标题也可以作为轴标题。这更务实，因为重点是在顶级类别。由于移动了x轴，我们将不得不移除支线剧情标题，这样它们就不会重叠，并使用<code class="fe nz oa ob oc b">fig.add_annotation(...)</code>手动添加支线剧情标题。</p><p id="3b0d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">为了用最少的代码为每个子情节添加标题，我们将创建一个数据框<code class="fe nz oa ob oc b">df_subplot_titles</code>来保存标题、子情节x轴列和最小x轴范围。然后我们可以循环这个数据框中的每个标题，将它们添加到子情节中。</p><p id="c2b9" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对于此次迭代，我们将进行以下更改:</p><ul class=""><li id="bdd6" class="nf ng iq lg b lh li lk ll ln nh lr ni lv nj lz nk nl nm nn bi translated">将x轴移动到图表顶部</li><li id="6172" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">对于附加图，使用百分比变化而不是绝对差异</li><li id="0ace" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">移除图例</li><li id="3d91" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">移除重复的y轴</li><li id="6c67" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">手动添加支线剧情标题</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nx ny l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">第五步:减少混乱——代码|作者图片</p></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="od ny l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">第五步:减少混乱——图表|作者图片</p></figure><p id="a514" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们已经达到了这样一种状态，图表回答了我们最初的问题，“什么类别同比增长最大，是什么推动了这一增长？”。上面的条形图显示，手机和平板电脑的增长最为可观，这是由于平均RSP的增长。但是仍然有一些明显的缺陷。</p><p id="1862" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">支线剧情之间断开</strong></p><p id="0003" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">与上一步相比，这张图中的支线剧情更加一致。但是，右侧的三个图和绝对销售差异图之间仍然存在脱节，因为它们保持在不同的比例上。</p><p id="c962" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">没有焦点</strong></p><p id="e627" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">目前，图表中没有真正吸引读者注意力的元素。我们需要突出视觉传达的信息，这样读者就能立即知道去哪里看。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="9c8d" class="mi mj iq bd mk ml mm mn mo mp mq mr ms kf mt kg mu ki mv kj mw kl mx km my mz bi translated">第六步:引导读者的注意力</h1><p id="4f72" class="pw-post-body-paragraph le lf iq lg b lh na ka lj lk nb kd lm ln nc lp lq lr nd lt lu lv ne lx ly lz ij bi translated">正如“<a class="ae ma" href="https://www.amazon.co.uk/Storytelling-Data-Visualization-Business-Professionals/dp/1119002257" rel="noopener ugc nofollow" target="_blank"> <em class="oe">用数据讲故事:商业人士数据可视化指南</em> </a>，<em class="oe">”</em><strong class="lg ja"><em class="oe"/></strong>中所讨论的，在读者决定是否继续阅读之前，我们有大约3-8秒的时间与他们交流。这意味着我们的视觉信息需要尽可能清晰。</p><p id="e64d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">引导读者注意力的两种简单方法是通过颜色和尺寸。我们将使用这些来解决上一步结束时讨论的两个问题。颜色将被用来突出手机和平板电脑的重要性，这是绝对销售增长最可观的类别，同时将所有其他群体推到背景。使用大小，我们可以通过使后面的条形变细来区分绝对和百分比刻度上的图。</p><p id="7c38" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在Plotly Graph对象中，没有一种简单的方法来给条形图中的各个条形着色。相反，我们需要创建两个独立的数据框。一个由蓝色的手机和平板电脑数据组成，另一个由灰色的所有剩余数据组成。在循环<code class="fe nz oa ob oc b">for metric in df3["metric"].unique():</code>中，我们将用<code class="fe nz oa ob oc b">fig.add_trace(go.Bar(...))</code>创建两条轨迹。对于每个指标，这段代码现在基本上将两个图形重叠在一起。</p><p id="065e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们将使用<code class="fe nz oa ob oc b">make_subplots(...)</code>中的<code class="fe nz oa ob oc b">column_widths = [...]</code>命令来设置每个图的宽度，突出‘销售差异(Abs)’图。</p><p id="a5a4" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对于此次迭代，我们将进行以下更改:</p><ul class=""><li id="b04f" class="nf ng iq lg b lh li lk ll ln nh lr ni lv nj lz nk nl nm nn bi translated">突出显示“手机和平板电脑”类别为蓝色，其他类别为灰色</li><li id="ace3" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">拓宽“销售差异(Abs)”图</li><li id="6e98" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">使百分比方差图上的条形变细</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nx ny l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">第六步:引导读者的注意力——代码|作者图片</p></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="od ny l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">第六步:引导读者的注意力——图表|作者图片</p></figure><p id="5cd0" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在这张图表中，我们通过使用颜色成功地将读者的注意力吸引到了手机和平板电脑类别的表现上。右边的三个支线剧情与最左边的支线剧情的比例不同。这很好，因为条形大小不同，表明它们显示不同的信息。</p><p id="fe84" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们可以做一些小的改进来进一步改善这种视觉效果，但两个明显的增强将使图形更上一层楼。</p><p id="f120" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">解说</strong></p><p id="eb42" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们使用了几种技巧来引导读者关注手机和平板电脑类别的表现。为了使我们的信息尽可能简单明了，我们还应该包括注释，以准确描述我们的图表所显示的内容。这也将让我们对avg RSP支线剧情有更多的了解。356%的增长看起来很可疑，在商业环境中几乎肯定会受到质疑。</p><p id="6fed" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">真知灼见标题</strong></p><p id="88ea" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">图表标题是图表中最有价值的不动产之一。不管读者先看哪里，他们都会在某个时候阅读标题来理解图表。如果视频中有一个突出的明确信息，那么我倾向于用标题来描述它。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="0317" class="mi mj iq bd mk ml mm mn mo mp mq mr ms kf mt kg mu ki mv kj mw kl mx km my mz bi translated">第七步:添加评论</h1><p id="35e3" class="pw-post-body-paragraph le lf iq lg b lh na ka lj lk nb kd lm ln nc lp lq lr nd lt lu lv ne lx ly lz ij bi translated">为了使你的视觉效果看起来专业，你应该在你的图表上提供评论和见解。这是第4层的添加，可以用<code class="fe nz oa ob oc b">add_annotation(...)</code>来实现。</p><p id="33a1" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我倾向于将评论放在图表上，而不是放在图表的下面或旁边。这使得页面上有更多的空间用于你的视觉，同时，文本也更接近数据。</p><p id="e842" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们将在评论中使用颜色，新改进的标题将我们在视觉上讨论的内容联系在一起。文本和图表中的任何指标都被赋予相同的颜色，蓝色。</p><p id="f9e4" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对于此次迭代，我们将进行以下更改:</p><ul class=""><li id="2aa2" class="nf ng iq lg b lh li lk ll ln nh lr ni lv nj lz nk nl nm nn bi translated">更改标题，使其更具洞察力</li><li id="6c35" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">为情节添加副标题</li><li id="503a" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">为视觉效果添加评论</li><li id="c737" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">更改子图/x轴标题的文本颜色</li><li id="d0dd" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">更改手机和平板电脑类别标签的颜色</li><li id="98cf" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">添加数据源和作者</li><li id="132c" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">修复所有文本的对齐方式</li><li id="1db7" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">更改坐标轴标题和标签的大小</li><li id="6ab4" class="nf ng iq lg b lh no lk np ln nq lr nr lv ns lz nk nl nm nn bi translated">改进悬停标签的外观</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nx ny l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">第7步:添加注释—代码|作者图片</p></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="od ny l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">第7步:添加评论—图表|作者图片</p></figure><p id="d064" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在这个图表中，我尝试了一些新的标题，将它作为一个见解，同时也作为评论的开始，使用省略号(…)来连接标题和评论。</p><p id="dd67" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在这次迭代中，所有的文本大小和对齐方式的改变都让图形看起来更加整洁。添加评论和改变标题，使之更有洞察力，使这种视觉效果看起来更专业。</p><p id="5dca" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对我来说，这张图表完整地向读者传达了一个清晰的信息，并附有支持这一信息的评论，并围绕这一发现提供了进一步的解释。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="c84c" class="mi mj iq bd mk ml mm mn mo mp mq mr ms kf mt kg mu ki mv kj mw kl mx km my mz bi translated">结论</h1><p id="f581" class="pw-post-body-paragraph le lf iq lg b lh na ka lj lk nb kd lm ln nc lp lq lr nd lt lu lv ne lx ly lz ij bi translated">Plotly图形对象的灵活性非常突出；到目前为止，我已经能够以我想要的方式定制任何图形。当您试图创建令人惊叹的视觉效果时，灵活性越大越好，使Plotly成为理想的软件包。</p><p id="ad48" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我发现用<code class="fe nz oa ob oc b">add_annotation(...)</code>定制文本可能是一个费力的过程。尤其是在对齐和定位方面，但这只是一个小小的代价。</p><p id="cfb4" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">希望这篇关于用Python中的Plotly构建专业条形图的教程对你有所帮助。</p></div></div>    
</body>
</html>