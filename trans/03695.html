<html>
<head>
<title>Interactive Weather Data Visualizations with Plotly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Plotly实现交互式气象数据可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/interactive-weather-data-visualizations-with-plotly-d304fe87b57f?source=collection_archive---------6-----------------------#2021-03-26">https://towardsdatascience.com/interactive-weather-data-visualizations-with-plotly-d304fe87b57f?source=collection_archive---------6-----------------------#2021-03-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="000b" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/making-sense-of-big-data" rel="noopener" target="_blank">理解大数据</a></h2><div class=""/><div class=""><h2 id="4b8d" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用Python探索NOAA全球地表概要</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/a245f4998d1d0caaaa6f485e6f846e05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1nhNKuWKWtZ-7-6UEaO8HA.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@alienaperture?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">迈克尔D </a>在<a class="ae lh" href="/s/photos/storm?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="ea01" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">全球地表日摘要(GSOD)是从1929年开始的9000多个气象站的天气数据集。它由美国国家海洋和大气管理局(NOAA)创建和维护，生成18个气候变量(如平均露点、平均风速和最小/最大温度)的每小时地表测量的每日摘要。</p><p id="498b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这是一个用于实践可视化空间数据的很好的数据集，因为它在全球范围内有许多站点，具有相对较大的时间序列。它还每天更新，这使它成为使用仪表板练习的一个很好的候选。</p><p id="550a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">虽然Python可能不是人们想到的第一种可视化空间数据的语言或工具，但有几个库能够创建奇妙的地理可视化。Plotly已经成为一个非常全面的Python交互式绘图库，它的地理绘图功能在过去几年里已经有了长足的进步。因为它出色的文档和受欢迎的程度，在这篇文章中我将只关注Plotly，但是请记住，还有其他可用的库。</p><p id="ad3f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这个数据集有点大，只有4.2 GB，所以将它加载到Python需要一点努力；无论如何，它都不是一个海量数据集，但它比我们遇到的平均“实践”数据集要大。我们将从如何访问数据开始，然后探索如何使用Plotly在交互式地图上可视化处理后的数据。泡一杯咖啡，舒服一下，让我们处理更大的天气数据集，用Plotly可视化我们的发现。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="273a" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">文件结构</h1><p id="4959" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">有多种方法可以获得这个数据集。从<a class="ae lh" href="https://www.kaggle.com/noaa/noaa-global-surface-summary-of-the-day" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>可以获得一个易于下载的版本，但它不像<a class="ae lh" href="https://www.ncei.noaa.gov/metadata/geoportal/rest/metadata/item/gov.noaa.ncdc%3AC00516/html#" rel="noopener ugc nofollow" target="_blank"> NOAA仓库</a>那样每天更新，而且Kaggle版本更难以用Python格式化。这是NOAA知识库的结构:</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="c907" class="nn mm it nj b gy no np l nq nr">1929.tar.gz/<br/>1930.tar.gz/<br/>    03005099999.csv<br/>    03026099999.csv<br/>    ...<br/>...</span></pre><p id="0774" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">数据存储在每年压缩的tarballs中，其中包含。当年每个电台的csv文件。每一个。csv文件根据其站点ID命名，站点ID由站点的WMO和WBAN编号组成。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ns"><img src="../Images/6b61ced75e9114fdd38bf11e443d6758.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DbZFAVoayzh5_-oGsFP-tg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">NOAA CSV文件结构(由作者创建)</p></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nt"><img src="../Images/b1bcc94425cff52ea2644091cf265ec1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TqhS7sxuvSrh7tYDwHldNA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">Kaggle Gzip文件结构(由作者创建)</p></figure><h2 id="74c2" class="nn mm it bd mn nu nv dn mr nw nx dp mv lr ny nz mx lv oa ob mz lz oc od nb iz bi translated">WMO编号</h2><p id="a252" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">世界气象组织(WMO)是联合国负责天气、气候和水资源的机构。前两位数字是国家代码，接下来的三位数字由国家气象局(NMS)设定。如果最后一个数字是零，这意味着世界气象组织的数字是官方的，或者过去是官方的。</p><h2 id="248a" class="nn mm it bd mn nu nv dn mr nw nx dp mv lr ny nz mx lv oa ob mz lz oc od nb iz bi translated">WBAN数</h2><p id="7f35" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">WBAN代表天气-天气-陆军-海军。WBAN号是数字数据存储的标识符，最初是美国气象局、加拿大交通部和三大军事部门相互共享数据的一种方式。后来它扩展到包括一些德国和韩国的电台。</p><p id="1cc6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">注</strong>:需要记住的重要一点是，世界气象组织和WBAN的编号创建了一个唯一的气象站ID，一旦加载到pandas中，这就是我们引用每个气象站的主要方式。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="ce00" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">下载我们的数据</h1><p id="2540" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">获取这些数据的最佳方式是直接从NOAA下载，你可以下载每年的tarball，其中包含当年每个站点的csv文件。我包含了一个简单的Python模块，用于下载和处理所有数据，您可以在最后的文档部分找到这些数据。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="oe of l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">用Python下载GSOD数据(由作者创建)</p></figure><p id="e64b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了下载NOAA数据，我决定使用请求创建一个简单的抓取功能。它从数据集的主目录开始，使用regex从基本URL页面的文本中查找所有可用的年份。在列表中的每一年，很容易构建最终的URL并下载每个tarball。请记住，所有这些代码都可以在Github 上<a class="ae lh" href="https://github.com/wino6687/gsodpy" rel="noopener ugc nofollow" target="_blank">获得，并且可以作为Python中的本地模块导入。</a></p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="dc68" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">数据处理</h1><p id="756c" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">在加载大型数据集时，最重要的问题是，一旦将数据加载到数据帧中，您希望访问哪些数据。2020年有超过11，000个站点，这意味着大约10年的每日数据将是相当多的信息。相反，您可能希望进行一些聚合。对于本文，我决定按月汇总数据，并且只保存每年一天的每日数据。按月汇总数据将极大地减少我们最终数据框架的大小，同时还能让我们发现相当长时间序列的趋势。</p><p id="8eb5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">保持某一天不聚合看起来很奇怪，事实也的确如此！我们想要保存一天的数据的真正原因是，我们可以在未来的帖子中使用Dash将最近一天的数据加载到实时仪表板中。就目前而言，它对于创建与我们稍后将使用Dash探索的内容相似的情节仍然有用。</p><h2 id="e783" class="nn mm it bd mn nu nv dn mr nw nx dp mv lr ny nz mx lv oa ob mz lz oc od nb iz bi translated">步骤0:导入</h2><p id="70d2" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">由于处理这些数据比大多数实践数据集要复杂一些，所以我包含了一个GitHub存储库，其中有一个本地模块，可以本地导入到您的Python环境中。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="d823" class="nn mm it nj b gy no np l nq nr">import gsodpy.gsodProcess as gsod<br/>import gsodpy.gsodDownloader as gsodDown<br/>import datetime</span></pre><p id="4541" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了像这样在本地导入模块，“gsodpy”目录必须在您的项目目录中。</p><h2 id="4139" class="nn mm it bd mn nu nv dn mr nw nx dp mv lr ny nz mx lv oa ob mz lz oc od nb iz bi translated">步骤1:定义时间序列</h2><p id="cf36" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">我们需要做的第一件事是决定包括多少年，以及哪一天我们将存储未聚合的数据。然后我们可以使用regex来创建我们想要的文件列表。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="79ad" class="nn mm it nj b gy no np l nq nr">num_years = 10<br/>target_day = datetime.datetime(2020,3,20)<br/>years, files = get_years_files(num_years)</span></pre><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="oe of l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">为我们的时间系列寻找tarballs(由作者创建)</p></figure><h2 id="bded" class="nn mm it bd mn nu nv dn mr nw nx dp mv lr ny nz mx lv oa ob mz lz oc od nb iz bi translated">步骤2:在时间范围内处理文件</h2><p id="2575" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">一旦我们定义了时间序列，我们就可以开始破解tarballs并进行处理了。csv文件！以下是我编写的解包数据的函数。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="oe of l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">将GSOD数据处理成Python(由作者创建)</p></figure><p id="12c1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了节省您的时间，以下是该工作流的基本伪代码:</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="1aea" class="nn mm it nj b gy no np l nq nr">- Loop through each tarball (years)<br/>    - Loop through each csv file stored in tarball (stations)<br/>        - Open .csv file for current station/year with pandas <br/>        - Call process_df() to clean the dataframe<br/>        - Append all data for this station on target_day to df_day<br/>        - Aggregate data by month<br/>        - Append monthly aggregate to df<br/>- Call add_meta() to create metadata column on df and df_day<br/>- Return completed df and df_day </span></pre><p id="f853" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">总的来说，这个过程并不复杂，如果给我更多的时间，我相信我可以让它更简洁。请记住，由于每年有大量的站点，加载所有这些数据需要相当长的时间。</p><p id="182a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们可以继续调用处理函数来获取数据帧:</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="845f" class="nn mm it nj b gy no np l nq nr">df, df_day = gsod.process_all_years(files, target_day)</span></pre><blockquote class="og oh oi"><p id="c6d5" class="li lj oj lk b ll lm kd ln lo lp kg lq ok ls lt lu ol lw lx ly om ma mb mc md im bi translated"><strong class="lk jd">注意</strong>:如果你注意到你的机器正在努力处理所有的数据，试着从一个短的时间序列(2-3年)开始。如果您想要更长的时间序列，您也可以在tarball中选择一个随机的电台样本，以减少您需要处理的电台文件的数量。</p></blockquote><h2 id="2b7b" class="nn mm it bd mn nu nv dn mr nw nx dp mv lr ny nz mx lv oa ob mz lz oc od nb iz bi translated">步骤3:保存处理过的数据</h2><p id="6f23" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">我强烈推荐酸洗你完成的数据帧，这样你以后可以更快地加载它们。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="1e49" class="nn mm it nj b gy no np l nq nr">import pandas as pd</span><span id="bfba" class="nn mm it nj b gy on np l nq nr"># Save DataFrames to pickle in current directory<br/>df.to_pickle("df_monthly.pkl")<br/>df_day.to_pickle("df_daily.pkl")</span><span id="89a2" class="nn mm it nj b gy on np l nq nr"># Read them back in later:<br/>df = pd.read_pickle("df_monthly.pkl")<br/>df_day = pd.read_pickle("df_daily.pkl")</span></pre></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="8d4a" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">形象化</h1><p id="5005" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">现在我们已经将一些有意义的数据加载到Python中，我们可以开始有趣的部分，开始用Plotly制作可视化效果了！</p><p id="23e2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果你使用免费版的Plotly，你只能上传512kb。如果你在本地制作你的地块，这不是一个问题。然而，对于我来说，在这里分享互动的情节，我需要使用Plotly的图表工作室上传到他们的云。这意味着我只能使用这个功能随机选择大约300个气象站:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="oe of l"/></div></figure><h2 id="d766" class="nn mm it bd mn nu nv dn mr nw nx dp mv lr ny nz mx lv oa ob mz lz oc od nb iz bi translated">基本地图</h2><p id="588a" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">首先，让我们看一下时间序列中的一个月，看看我们的一些站点在地图上的位置。这是我们可以用Plotly和这些数据创建的基本地图；考虑到它的配置如此之少，我认为它看起来相当不错。</p><p id="41eb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Plotly的主要数据结构是<code class="fe oo op oq nj b">figure</code>，它是<code class="fe oo op oq nj b">plotly.graph_objects.Figure</code>类的一个实例。<code class="fe oo op oq nj b">figure</code>是使用JavaScript通过Plotly.js渲染的，这就是为什么我们能够用Python访问高质量的地图。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="oe of l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">用Plotly创建基本的散点图(由作者创建)</p></figure><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="or of l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带Plotly的基本散点图(由作者创建)</p></figure><p id="3ccf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我喜欢用Plotly绘制空间数据，因为它的界面简洁、响应迅速，几乎可以嵌入到任何地方。我一直很难在Python包中找到高质量的底图，但Plotly的很棒。</p><p id="c801" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">虽然这个情节可能很好，但我绝对会对它进行一些风格上的改变。海岸线很突出，颜色比例需要调整。总的来说，它可以被改变，使我们的数据点更加突出。幸运的是，所有这些事情都很容易用Plotly完成！</p><h2 id="fdd0" class="nn mm it bd mn nu nv dn mr nw nx dp mv lr ny nz mx lv oa ob mz lz oc od nb iz bi translated">风格图:给定日期的极端温度</h2><p id="8c4a" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">我选择保留某一天的数据而不是只记录每月的汇总数据的一个原因是，这样我们可以看到某一天最暖和最冷的地方。</p><p id="bb3d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">首先我们需要找到我们的极端温度:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="oe of l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">从df_day中查找极端温度(由作者创建)</p></figure><p id="68b3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这个图使用了与第一个图相同的结构，但是我花了更多的时间来定制标记和图形属性。您会注意到，我能够将一个字典传递给某些参数，如<code class="fe oo op oq nj b">marker</code>，以便进一步定制它们。在大多数情况下，这些参数是由字典中的信息初始化的对象。例如，<code class="fe oo op oq nj b">marker</code>参数初始化一个<code class="fe oo op oq nj b">plotly.graph_objects.scattergeo.Marker</code>对象。虽然这增加了复杂性，但你可以从<a class="ae lh" href="https://plotly.github.io/plotly.py-docs/generated/plotly.graph_objects.scattergeo.html#plotly.graph_objects.scattergeo.Marker" rel="noopener ugc nofollow" target="_blank">散射图中看到。标记</a>文档这给了我们对图上标记的控制。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="oe of l"/></div></figure><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="or of l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">使用Plotly的散点图(由作者创建)</p></figure><h2 id="8dad" class="nn mm it bd mn nu nv dn mr nw nx dp mv lr ny nz mx lv oa ob mz lz oc od nb iz bi translated">地图框集成</h2><p id="2893" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">我一直很喜欢地图盒子。它有很棒的基本地图，而且反应超级快。Plotly有限的地图框集成可以增强您的地理地块。特别是当放大时，你会注意到与基本绘图版本相比，基本地图中的细节数量令人满意。Mapbox对Plotly地图的渲染方式有很多影响，所以我将在整个帖子中讨论Mapbox的集成。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="oe of l"/></div></figure><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="or of l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带有Plotly的散点图框(由作者创建)</p></figure><h2 id="083c" class="nn mm it bd mn nu nv dn mr nw nx dp mv lr ny nz mx lv oa ob mz lz oc od nb iz bi translated">添加滑块:2012年各月的平均温度</h2><p id="0f2d" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">我非常喜欢Plotly的一个特性是，添加一个滑块来查看数据随时间的变化是多么容易。例如，让我们看看2012年的月平均气温。</p><p id="b8d0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你会注意到我使用了一个稍微不同的语法来格式化这个图。从技术上讲，这是用Plotly绘图的“旧”方法。但是对于像这样更复杂的图，能够单独格式化数据是很好的。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="oe of l"/></div></figure><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="or of l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">使用Plotly在Geo Plot上滑动(由作者创建)</p></figure><p id="c39e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">创造这个情节看起来比其他的更复杂。但实际上，大部分代码只是简单地将数据按月分组，以便Plotly轻松地发送到它的JavaScript库。如果您曾经处理过json数据，您可能会看到字典列表是如何轻松地转换成json的。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="204c" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">包扎</h1><p id="c0ef" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">在Python中，空间数据从来都不是最容易处理的。它是多维的，通常非常大，普通的2d绘图空间不太适合绘制地理坐标。Plotly通过提供易于使用的高质量底图功能，消除了许多令人头痛的问题，几年前我通常不得不使用javascript来访问这些底图。说到用Python进行空间绘图，Ploty一般是我的首选。</p><p id="405c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用Plotly绘制空间数据需要学习的东西太多了，所以不要害怕浏览在线文档和示例。同样的开发人员还开发了Dash，这是构建实时仪表板的一个很好的工具。</p><h1 id="8483" class="ml mm it bd mn mo os mq mr ms ot mu mv ki ou kj mx kl ov km mz ko ow kp nb nc bi translated">证明文件</h1><ul class=""><li id="9094" class="ox oy it lk b ll nd lo ne lr oz lv pa lz pb md pc pd pe pf bi translated"><a class="ae lh" href="https://github.com/wino6687/gsodpy" rel="noopener ugc nofollow" target="_blank">用于处理GSOD数据的Github Repo】</a></li><li id="c119" class="ox oy it lk b ll pg lo ph lr pi lv pj lz pk md pc pd pe pf bi translated"><a class="ae lh" href="https://www.ncei.noaa.gov/metadata/geoportal/rest/metadata/item/gov.noaa.ncdc%3AC00516/html#" rel="noopener ugc nofollow" target="_blank"> GSOD数据储存库(NOAA) </a></li><li id="dbb9" class="ox oy it lk b ll pg lo ph lr pi lv pj lz pk md pc pd pe pf bi translated"><a class="ae lh" href="https://www.kaggle.com/noaa/noaa-global-surface-summary-of-the-day" rel="noopener ugc nofollow" target="_blank"> Kaggle GSOD数据</a></li><li id="dba7" class="ox oy it lk b ll pg lo ph lr pi lv pj lz pk md pc pd pe pf bi translated"><a class="ae lh" href="https://plotly.com/" rel="noopener ugc nofollow" target="_blank">阴谋地</a></li><li id="8d95" class="ox oy it lk b ll pg lo ph lr pi lv pj lz pk md pc pd pe pf bi translated"><a class="ae lh" href="https://www.mapbox.com/" rel="noopener ugc nofollow" target="_blank">地图框</a></li></ul></div></div>    
</body>
</html>