<html>
<head>
<title>The Nice Way To Use Docker With VSCode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Docker与VSCode结合使用的好方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-nice-way-to-use-docker-with-vscode-f475c49aab1b?source=collection_archive---------3-----------------------#2021-05-30">https://towardsdatascience.com/the-nice-way-to-use-docker-with-vscode-f475c49aab1b?source=collection_archive---------3-----------------------#2021-05-30</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="2380" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">在VSCode框架下使用Docker设置数据科学项目的快速指南。</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/66877cd2937878e822d3864793a04c1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*14FknMCm2H7ajE7N"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@curology?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Curology </a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="9cb4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您的下一个项目可能包含许多复杂的机器学习代码，其中包含许多不同的库，它们的版本可能会对您的机器造成严重破坏。接下来是确保您的同事也可以运行安装了正确依赖项的应用程序的过程。这带来了新一轮的头痛。</p><p id="ad7b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv"> <em class="lw">不一定非要这样。</em> </strong></p><p id="f18b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">在docker容器内开发</strong>可以节省你很多时间，<em class="lw">和</em>有助于从长远来看平滑你的应用程序的部署过程。在另一篇文章中，我讨论了为您的项目手动构建和运行docker映像的完整步骤。这里可以找到<a class="ae kz" href="https://pub.towardsai.net/how-to-dockerize-your-data-science-project-a-quick-guide-b6fa2d6a8ba1" rel="noopener ugc nofollow" target="_blank">。</a></p><blockquote class="lx ly lz"><p id="3d37" class="la lb lw lc b ld le jv lf lg lh jy li ma lk ll lm mb lo lp lq mc ls lt lu lv in bi translated">但是有一个更简单的方法来为你的下一个项目自动设置Docker，它内置在VSCode中。</p></blockquote><p id="58fd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这个故事中，让我向您展示我是如何通过几个简单的步骤在一个容器中开始一个新的开发环境的。</p><p id="942f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们开始吧👇</p><h1 id="38f3" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">获取有用的扩展！</h1><p id="4150" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">VSCode Docker扩展是所有Docker工作流的主干。确保你已经通过访问扩展市场安装了它，或者直接访问这个URL: <a class="ae kz" href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker" rel="noopener ugc nofollow" target="_blank"> Docker扩展</a>。</p><p id="9ae9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，在你的机器上启动<strong class="lc iv"> Docker桌面</strong>。</p><p id="f3dd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这个扩展使得构建、运行和部署容器化的应用程序变得很简单，所有这些都不需要离开代码编辑器！</p><p id="55e7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在进入下一步之前，请确保Docker Desktop正在运行。</p><h1 id="3bf6" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">写一个简单的应用程序</h1><p id="4027" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">本教程的目的是展示以dockerised方式开发一个应用程序是多么容易。记住这一点，我将展示一个使用<strong class="lc iv"> FastApi </strong>构建HelloWorld应用程序的简单示例。</p><p id="34e7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">首先，创建一个名为<code class="fe na nb nc nd b"><strong class="lc iv">helloworld.py</strong></code>的新文件，并将这段代码粘贴到其中:</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="9c5d" class="ni me iu nd b gz nj nk l nl nm"><em class="lw">from</em> fastapi <em class="lw">import</em> FastAPI</span><span id="3294" class="ni me iu nd b gz nn nk l nl nm">app = FastAPI()</span><span id="25f1" class="ni me iu nd b gz nn nk l nl nm">@app.get("/")</span><span id="753e" class="ni me iu nd b gz nn nk l nl nm">async def root():</span><span id="6a96" class="ni me iu nd b gz nn nk l nl nm"><em class="lw">    return</em> {"message": "Hello World"}</span></pre><p id="5032" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这将确保我们有一个简单的API，在暴露的URL显示“Hello World”消息。</p><p id="eb3f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在到了我们和Docker一起玩的部分。</p><h1 id="1206" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">塑造新的码头工人形象</h1><p id="65f8" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">首先，您需要创建一个<code class="fe na nb nc nd b"><strong class="lc iv">requirements.txt</strong></code>文件，其中包含我们正在构建的应用程序的所有依赖项。</p><p id="aba6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">由于这个测试应用程序的简单性，我们现在只有这两个:</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="e9f4" class="ni me iu nd b gz nj nk l nl nm">fastapi[all]==0.63.0</span><span id="e7c0" class="ni me iu nd b gz nn nk l nl nm">uvicorn[standard]==0.13.4</span></pre><p id="00fc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后按CMD + Shift + P或者CTRL + Shift + P打开VSCode的命令pallete。输入并选择<strong class="lc iv">“添加Docker文件…”</strong></p><p id="7710" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">将弹出下面的窗口，选择FastApi选项。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj no"><img src="../Images/fea6f1bf5a7655062ee6b556d5112f84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u3kueREEW0i9OISozO0srw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">从dockerfile选项中选择fastapi</p></figure><p id="2798" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这一流程大大简化了我们的工作流程。</p><p id="9aaa" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">因此，即使我们没有将FastApi依赖项放在</strong> <code class="fe na nb nc nd b"><strong class="lc iv">requirements.txt</strong></code> <strong class="lc iv">文件中，它也会添加它。那不是很整洁吗？</strong></p><p id="1bd6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，继续选择<strong class="lc iv">端口</strong>选项，如下图所示。默认设置应该就可以了。如果您愿意，可以根据您的要求进行更改。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj np"><img src="../Images/e3491d4b42fdf65d0c0e678b54c603e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PSB3x6I6Z_3G7jAvIvs8RQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">码头工人的港口选择</p></figure><p id="cdd0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后，建立你的Docker形象的步骤到了。在生成的<strong class="lc iv"> Dockerfile </strong>上点击右键，选择<code class="fe na nb nc nd b"><strong class="lc iv">Build Image</strong></code> <strong class="lc iv">。</strong></p><p id="0811" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，您应该在编辑器中获得以下文件:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nq"><img src="../Images/4e26d74769ca69ebf0940b58cceac192.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*WlGg7f54fvO0LSc24N-K-A.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">生成Docker文件后的文件夹结构</p></figure><p id="357e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">太棒了。为了测试我们的API，我们现在可以进入最后一步了！</p><h1 id="056a" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">运行Docker容器</h1><p id="8fae" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">现在我们已经准备好了图像，您可以切换到VSCode侧边栏左侧的Docker选项卡。</p><p id="8661" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这里，您将看到系统中已有的图像列表。我们刚刚构建的新图像也将在这里显示如下:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nr"><img src="../Images/fb6fc885bc65573c736c25a1a58dce01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*C7GhFktknxCl_pBX_RpU3Q.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">形象已经建好了！</p></figure><p id="33e7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这太棒了。现在你只需要右击你的图像名称下的<code class="fe na nb nc nd b"><strong class="lc iv">latest</strong></code>，选择<strong class="lc iv">运行</strong>选项。</p><p id="a6fe" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您可以通过右键单击构建的容器并单击“查看日志”选项来查看启动日志。这将产生如下输出:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ns"><img src="../Images/fb884d59cac10055e3e7e9aa6d9e4659.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eH-JIteGT9NDccISM3NHXA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">你的api是活的！</p></figure><p id="d8aa" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这意味着我们的API正在运行。</p><h1 id="f978" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">最后几句话…</h1><p id="4dc9" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">打开你的网络浏览器，导航到上面的网址或者简单地:<strong class="lc iv"> 0.0.0.0:8000。</strong>您现在应该看到Hello World消息了！</p><p id="e132" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">太好了！现在，您应该能够围绕这个过程构建自己的项目了。</p><p id="a678" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我希望这篇文章能够作为一个很好的起点，让您快速了解使用Docker开发Python应用程序的便捷方式。我建议你通过阅读官方文档来体验VSCode中Docker的其他特性。我知道我会的。😃</p></div><div class="ab cl nt nu hy nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="in io ip iq ir"><p id="e9b6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你觉得这篇文章有帮助，<a class="ae kz" href="https://medium.com/@ipom" rel="noopener">跟随我这里</a>因为我每周都写，确保你永远不会错过另一篇文章。</p><p id="7ce0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此外，我所有数据科学文章的代码库和资源都在这里的<a class="ae kz" href="https://github.com/yashprakash13/data-another-day/blob/main/README.md#about-those-code-editorshmmm" rel="noopener ugc nofollow" target="_blank">中。</a>快乐学习！</p></div><div class="ab cl nt nu hy nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="in io ip iq ir"><p id="5a0a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我还有几个故事，你可能会感兴趣:</p><div class="oa ob gq gs oc od"><a rel="noopener follow" target="_blank" href="/deploying-an-ml-model-with-fastapi-a-succinct-guide-69eceda27b21"><div class="oe ab fp"><div class="of ab og cl cj oh"><h2 class="bd iv gz z fq oi fs ft oj fv fx it bi translated">使用FastAPI部署ML模型——简明指南</h2><div class="ok l"><h3 class="bd b gz z fq oi fs ft oj fv fx dk translated">如何使用NLP模型作为API——智能的、生产就绪的方式。</h3></div><div class="ol l"><p class="bd b dl z fq oi fs ft oj fv fx dk translated">towardsdatascience.com</p></div></div><div class="om l"><div class="on l oo op oq om or kt od"/></div></div></a></div><div class="oa ob gq gs oc od"><a rel="noopener follow" target="_blank" href="/how-to-use-bash-to-automate-the-boring-stuff-for-data-science-d447cd23fffe"><div class="oe ab fp"><div class="of ab og cl cj oh"><h2 class="bd iv gz z fq oi fs ft oj fv fx it bi translated">如何使用Bash来自动化数据科学的枯燥工作</h2><div class="ok l"><h3 class="bd b gz z fq oi fs ft oj fv fx dk translated">使用命令行为您的数据科学项目编写一些可重用代码的指南</h3></div><div class="ol l"><p class="bd b dl z fq oi fs ft oj fv fx dk translated">towardsdatascience.com</p></div></div><div class="om l"><div class="os l oo op oq om or kt od"/></div></div></a></div></div></div>    
</body>
</html>