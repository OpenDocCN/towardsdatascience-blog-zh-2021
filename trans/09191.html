<html>
<head>
<title>The NFL Simulation: Monte Carlo Methods</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NFL模拟:蒙特卡罗方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-nfl-simulation-monte-carlo-methods-2f110424b1dd?source=collection_archive---------10-----------------------#2021-08-25">https://towardsdatascience.com/the-nfl-simulation-monte-carlo-methods-2f110424b1dd?source=collection_archive---------10-----------------------#2021-08-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d42b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">MATLAB中蒙特卡罗方法在2021年NFL赛季中的应用</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/85f8f2886dcc312513dd48b1310d3ed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JH9KavaVB1GZEDS367jVIg.jpeg"/></div></figure><h2 id="ea8f" class="kq kr it bd ks kt ku dn kv kw kx dp ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">简介:</h2><p id="5369" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu kz lv lw lx ld ly lz ma lh mb mc md me im bi translated">随着2021年NFL赛季的开始，我认为没有比现在更好的时间来设计一个模拟2021赛季的程序了。</p><p id="8c79" class="pw-post-body-paragraph lm ln it lo b lp mf ju lr ls mg jx lu kz mh lw lx ld mi lz ma lh mj mc md me im bi translated">我选择使用蒙特卡罗方法，以允许在模拟过程中游戏之间的一些变化。如果球队的排名在一个赛季中保持不变，它不会让球队在几场大胜中获得动力。它也不允许收视率根据淡季因素进行调整，因为淡季因素无法在两季之间量化。也就是说，接下来是我如何制作程序，以及模拟的结果。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h2 id="bd8e" class="kq kr it bd ks kt ku dn kv kw kx dp ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">工作原理:</h2><p id="1508" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu kz lv lw lx ld ly lz ma lh mb mc md me im bi translated">每个队都有上个赛季的评分，这些评分可以用来确定一个队在某场比赛中获胜、失败或打平的机会。下面的代码是如何确定这些概率的，只使用两个队的评分，还有一个额外的主场优势。</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="a8af" class="kq kr it ms b gy mw mx l my mz">Ha = 1/(1+10^((team_data(home_schedule(i),1) - team_data(away_schedule(i),1) + 2.5) * -1/400)); % approx home team chance of winning</span><span id="4353" class="kq kr it ms b gy na mx l my mz">Aa = 1/(1+10^((-1 * team_data(home_schedule(i),1) + team_data(away_schedule(i),1)) * -1/400)); % approx away team chance of winning</span><span id="ec86" class="kq kr it ms b gy na mx l my mz">T = Ha + Aa - 1; % chance of a tie</span><span id="5cbc" class="kq kr it ms b gy na mx l my mz">H = Ha - T; % adjusted home team winning chances</span><span id="cd1c" class="kq kr it ms b gy na mx l my mz">A = Aa - T; % adjusted away team winning chances</span></pre><p id="36f0" class="pw-post-body-paragraph lm ln it lo b lp mf ju lr ls mg jx lu kz mh lw lx ld mi lz ma lh mj mc md me im bi translated">在每一场比赛后，球队的评级会根据他们获胜的几率和实际结果进行调整。如果一个胜算大的队伍输了，那么他们的评分会比胜算小的队伍降的多。下面是实现这一点的代码:</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="40db" class="kq kr it ms b gy mw mx l my mz">team_data(home_schedule(i),1) = team_data(home_schedule(i),1) + 20 * (HW - H); % adjusts home team's ranking based on result</span><span id="4335" class="kq kr it ms b gy na mx l my mz">team_data(away_schedule(i),1) = team_data(away_schedule(i),1) + 20 * (AW - A); % adjusts away team's ranking based on result</span></pre><p id="99de" class="pw-post-body-paragraph lm ln it lo b lp mf ju lr ls mg jx lu kz mh lw lx ld mi lz ma lh mj mc md me im bi translated">赛季中的每场比赛都是模拟的，所有32支球队的记录都被跟踪。在272场比赛之后(每队17场)，季后赛必须开始了。NFL季后赛从每个联盟中抽取7支球队，头号种子在第一轮比赛中胜出。每个会议中所有4个组别的获胜者由最高获胜百分比决定，然后最后3个是由接下来3个最高获胜百分比决定的通配符。从那里开始，每轮比赛结束后，进行补种。头号种子在超级碗之前获得主场优势，因为那场比赛是在中立地点进行的。下面是让季后赛发生的一部分代码:</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="82c8" class="kq kr it ms b gy mw mx l my mz">index = 0; % used to jump between divisions (index = 0,4,8,12)</span><span id="ecdb" class="kq kr it ms b gy na mx l my mz">nfc_leaders = zeros(1,4); % initializes nfc division leaders array</span><span id="2515" class="kq kr it ms b gy na mx l my mz">nfc_scores = zeros(1,4); % initializes nfc division leader ratings array</span><span id="7e5e" class="kq kr it ms b gy na mx l my mz">for i = 1:4 % for all 4 needed division winners</span><span id="94b4" class="kq kr it ms b gy na mx l my mz">for j = 1:4 % for all 4 teams in each division</span><span id="4944" class="kq kr it ms b gy na mx l my mz">if max(team_data(1 + index:4 + index, 5)) == team_data(j + index,5) % if that team has the max win percentage in the division</span><span id="44ec" class="kq kr it ms b gy na mx l my mz">team_data(j + index, 6) = 2; % set the indicator equal to "2"</span><span id="b4ba" class="kq kr it ms b gy na mx l my mz">nfc_leaders(i) = j + index; % add team to nfc_leader array</span><span id="a13d" class="kq kr it ms b gy na mx l my mz">nfc_scores(i) = team_data(j + index,5); % add it's rating into this array</span><span id="f720" class="kq kr it ms b gy na mx l my mz">index = index + 4; % jumps to next set of 4 teams in next division</span><span id="06ae" class="kq kr it ms b gy na mx l my mz">break</span><span id="e8ac" class="kq kr it ms b gy na mx l my mz">end</span><span id="62b8" class="kq kr it ms b gy na mx l my mz">end</span><span id="eb22" class="kq kr it ms b gy na mx l my mz">end</span></pre><p id="b22d" class="pw-post-body-paragraph lm ln it lo b lp mf ju lr ls mg jx lu kz mh lw lx ld mi lz ma lh mj mc md me im bi translated">进入季后赛、赢得分区赛、赢得联盟半决赛、赢得联盟冠军或赢得超级碗的球队在重复赛季的过程中被跟踪，以找到每个球队进入季后赛一定长度的几率。下面是实现这一部分的部分代码:</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="5bde" class="kq kr it ms b gy mw mx l my mz">for i = 1:7 % for all 7 conference teams in the playoffs</span><span id="bebf" class="kq kr it ms b gy na mx l my mz">for j = 1:32 % check all 32 teams</span><span id="b163" class="kq kr it ms b gy na mx l my mz">if nfc_playoffs(i) == j % if that team made the playoffs</span><span id="311a" class="kq kr it ms b gy na mx l my mz">success_data(j,1) = success_data(j,1) + 1; % add 1 to that data point in team matrix</span><span id="0ba4" class="kq kr it ms b gy na mx l my mz">end</span><span id="f647" class="kq kr it ms b gy na mx l my mz">if afc_playoffs(i) == j % same for afc</span><span id="6db4" class="kq kr it ms b gy na mx l my mz">success_data(j,1) = success_data(j,1) + 1; % same for afc</span><span id="f149" class="kq kr it ms b gy na mx l my mz">end</span><span id="1ad6" class="kq kr it ms b gy na mx l my mz">end</span><span id="59ed" class="kq kr it ms b gy na mx l my mz">end</span></pre></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h2 id="515c" class="kq kr it bd ks kt ku dn kv kw kx dp ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">结果:</h2><p id="d0f0" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu kz lv lw lx ld ly lz ma lh mb mc md me im bi translated">在模拟了2021年NFL赛季100，000次后，我发现了每个球队进入季后赛、赢得分区冠军、赢得季后赛第一轮、赢得联盟半决赛、赢得联盟冠军和赢得超级碗的比率。队伍按当前评分从高到低的顺序排列在左侧。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nb"><img src="../Images/a134a21ceb3e8df2133acff5217ce05d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KwXpAj9QBY3gE854wg5xTg.png"/></div></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">图片由作者提供</p></figure><p id="cb94" class="pw-post-body-paragraph lm ln it lo b lp mf ju lr ls mg jx lu kz mh lw lx ld mi lz ma lh mj mc md me im bi translated">当想知道一支球队赢得了多少次超级碗时，使用一个像100，000这样的好整数来表示模拟量会有所帮助。海盗队赢得了所有100，000场超级碗的19.898%，或100，000场模拟中的19，898次。另一方面，底特律雄狮队在10万场超级碗比赛中只赢了3场(0.003%)。</p><p id="bfd3" class="pw-post-body-paragraph lm ln it lo b lp mf ju lr ls mg jx lu kz mh lw lx ld mi lz ma lh mj mc md me im bi translated">在“赢得部门”一栏中，有趣的是，除了4个主要异常值之外，较低的评级意味着赢得部门的机会较低。NFC东区的这4支球队都有接近的评级，这意味着他们都有很好的机会赢得该部门。说到部门，下面是每个部门的分类。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nk"><img src="../Images/b52b48fcbd137ba2d009952990a6ce64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TekZ3cTJl5LIltwpde4pTw.png"/></div></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">图片由作者提供</p></figure><p id="a4e3" class="pw-post-body-paragraph lm ln it lo b lp mf ju lr ls mg jx lu kz mh lw lx ld mi lz ma lh mj mc md me im bi translated">绿色突出显示的团队最有可能赢得该部门，而蓝色突出显示的团队最有可能是通配符。总的来说，NFC西区和AFC北区似乎是最强的赛区，每个赛区都有3个通配符中的2个。</p><p id="fd5d" class="pw-post-body-paragraph lm ln it lo b lp mf ju lr ls mg jx lu kz mh lw lx ld mi lz ma lh mj mc md me im bi translated">我当时对一个球队的胜率如何影响他们在季后赛中的表现很感兴趣，所以下面显示了3个不同的散点图。蓝点是NFC中的球队，红点是AFC中的球队。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/85f8f2886dcc312513dd48b1310d3ed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JH9KavaVB1GZEDS367jVIg.jpeg"/></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">图片由作者提供</p></figure><p id="44b6" class="pw-post-body-paragraph lm ln it lo b lp mf ju lr ls mg jx lu kz mh lw lx ld mi lz ma lh mj mc md me im bi translated">图的右上角显示了NFC和AFC之间的微小差异。在那个区域，胜率大致相同的蓝点比红点有更高的季后赛机会，这表明NFC比AFC更容易进入季后赛。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/0091b9b473fee895e95db2b93ccb2a83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1IHdVuXLy2jEmR2eVAMoJQ.jpeg"/></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">图片由作者提供</p></figure><p id="4cf1" class="pw-post-body-paragraph lm ln it lo b lp mf ju lr ls mg jx lu kz mh lw lx ld mi lz ma lh mj mc md me im bi translated">这张图显示了每支队伍赢得分组的机会。在图的左下角有4个蓝点属于NFC东部团队。这些球队可以有更低的胜率，但仍然有很大的机会赢得分区冠军，因为所有4支球队的排名都很接近。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/71867565b7bf638c0d044756ada9c42e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tq2jvzXDL1UVaqc6c0WAAQ.jpeg"/></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">图片由作者提供</p></figure><p id="7665" class="pw-post-body-paragraph lm ln it lo b lp mf ju lr ls mg jx lu kz mh lw lx ld mi lz ma lh mj mc md me im bi translated">对于这最后的情节，每个队赢得超级碗的机会被显示。它表明，常规赛胜率在0.700以上的球队在看待超级碗胜率时具有显著优势。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h2 id="7201" class="kq kr it bd ks kt ku dn kv kw kx dp ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">结论:</h2><p id="4d5f" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu kz lv lw lx ld ly lz ma lh mb mc md me im bi translated">2021年NFL赛季模拟发现了一些有趣的结果。它揭示了本赛季的分区最爱，也提供了一些关于哪些球队更容易进入超级碗的见解。这种模拟可以在每周更新，以积极反映每支球队新的季后赛机会，所以我接下来可能会采取的一些措施是每周查看个人比赛，以找到最大的冷门，或者可能哪些比赛对改变季后赛席位机会最重要。</p></div></div>    
</body>
</html>