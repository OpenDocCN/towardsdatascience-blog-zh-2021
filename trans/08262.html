<html>
<head>
<title>Getting familiar with Rmarkdown PDF</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熟悉Rmarkdown PDF</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/getting-familiar-with-rmarkdown-pdf-19fed1864952?source=collection_archive---------26-----------------------#2021-07-29">https://towardsdatascience.com/getting-familiar-with-rmarkdown-pdf-19fed1864952?source=collection_archive---------26-----------------------#2021-07-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="95dd" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">元数据和引用</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3a21f58963eeecc852a8f5255422326a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*deGjA0dW2aJXgwbS"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">塞萨尔·阿布纳·马丁内斯·阿吉拉尔在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><blockquote class="kw kx ky"><p id="f626" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">如果你把一本书掉进马桶里，你可以把它捞出来，擦干，然后读那本书。但是如果你把你的Kindle掉到马桶里，你已经做得很好了。~斯蒂芬·金</p><p id="d429" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">一个作家的大部分时间花在阅读上，为了写作:一个人会为了写一本书而翻遍半个图书馆。~塞缪尔·约翰逊</p></blockquote><p id="0da7" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated"><strong class="lc ir">简介</strong></p><p id="c1d4" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">为分析表示创建PDF报告是学者、业务分析师或现代数据科学家的长期传统。自从PowerPoint动画问世以来，最近又引入了PowerPoint变形转换或幻灯片缩放功能，作者们一直致力于寻找更有效、更强大的方式来传达信息并获得更好的观众接受度。R Markdown没有涉足动画领域。然而，在分析领域，复制科学期刊的格式，尤其是美国心理学协会(APA)的格式，对于提交重大项目工作供同行评审并不奇怪。此外，分析师或商业顾问总是希望能够以书籍的形式进行写作，以传达具有强大背景的分析，具有精确的目标，正确的证据碎片和强制性的结论。R Markdown PDF允许作者将报告和叙述性文本结合起来，并将其放入PDF或书籍格式中，这对于在组织的分析功能中工作的非学者来说，确实比漫游癖更强烈。在阿拉伯，他们说“当狮子打喷嚏时，猫就诞生了”。如果假设商业分析师是一只在院士打喷嚏时创造出来的猫，那么对一只坐在牛奶旁边而不舔牛奶的猫的期望就太高了。对于一个分析从业者来说，写降价报告就像喝牛奶一样难，哪怕只有一次。</p><div class="lz ma gp gr mb mc"><a rel="noopener follow" target="_blank" href="/getting-familiar-with-rmarkdown-html-f5b3bc4ec210"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd ir gy z fp mh fr fs mi fu fw ip bi translated">熟悉Rmarkdown HTML</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">使用R降价</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">towardsdatascience.com</p></div></div><div class="ml l"><div class="mm l mn mo mp ml mq kp mc"/></div></div></a></div><p id="3ff4" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">在上面的<em class="lb">文章中，我们打算强调使用R Markdown HTML时的几个关键元素。在当前的文章中，我们将关注R Markdown PDF，首先，我们将在查看PDF的主体之前关注元数据和引用。原因是元数据不仅定义了文档的结构，还定义了报告的开始部分。引用出现在文件的末尾，对于任何涉及一些研究工作的科学期刊来说都是强制性的。</em></p><blockquote class="kw kx ky"><p id="403f" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ir">注意</strong>:如果读者有过一些学术论文的经历，那么这篇文章并不打算<a class="ae kv" href="https://www.alancward.co.uk/the-flow-of-dunning-kruger-a-blend-of-challenge-skill-and-perception/" rel="noopener ugc nofollow" target="_blank">区分</a>作者的感知能力和实际能力。随时欢迎您的建议和经验。</p></blockquote><p id="52a7" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated"><strong class="lc ir">议程</strong></p><p id="5eb2" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated"><strong class="lc ir">目标是分享一些可用于生成PDF输出格式</strong>的基本和扩展元素。我的目标不是出版一本有效的手册或食谱给读者，而是分享我在过去几周收集的快乐和挑战。不过在RStudio编辑器中使用install.packages()函数预装这些包就好了；<em class="lb">“rmarkdown”、“tinytex”、“gridExtra”、“kableExtra”、“stargazer”</em>。首先，无论如何，我们都将依赖这些实用程序来完成本文。</p><p id="826b" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated"><strong class="lc ir"> R降价元数据</strong></p><p id="4541" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">LaTex是学者、研究人员或大学生常用的工具。对于那些不知道的人来说，LaTex是一个文档编写工具，可以用来编写复杂的数学方程、统计符号和假设。"<em class="lb"> LaTeX是科学文献交流和出版的事实标准."(来源:乳胶</em> <a class="ae kv" href="https://www.latex-project.org/" rel="noopener ugc nofollow" target="_blank"> <em class="lb">网站</em> </a> <em class="lb">)。R Markdown可以通过<em class="lb">“tiny tex”</em>包和<em class="lb"> pandoc </em>与LaTex工具通信。要了解更多关于pandoc的信息，你也可以访问他们的官方网站。如果一个人熟悉LaTex语法，那么R Markdown可以作为一个极好的平台来利用研究人员的统计计算、可视化和文档编写能力。然而，即使一个人与研究工作无关，并且处理任何领域的分析工作空间，R Markdown PDF或HTML也可以作为一个很好的附加工具来升级现有的技能组合，以编写格式良好的报告。</em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mt"><img src="../Images/f82fd9cc1b84c78d374bd38900892a2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pwpioVU8MmIluNuJUbv6JQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图pdf输出的上半部分。(图片来源) :图片来自作者</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mu"><img src="../Images/47b2ee6b6bf116648a3ac1deca032c18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NnWAiAfiY8lTSBfYno-KAg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图pdf输出的中下部。(图片来源) :图片来自作者</p></figure><p id="e22d" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">图1和图2显示了pdf输出的第一页。每个编号的框都是第一个代码片段中显示的元数据参数的结果。</p><h2 id="1848" class="mv mw iq bd mx my mz dn na nb nc dp nd lw ne nf ng lx nh ni nj ly nk nl nm nn bi translated">第1个框是标题(<em class="no">标题:</em>)。</h2><h2 id="a703" class="mv mw iq bd mx my mz dn na nb nc dp nd lw ne nf ng lx nh ni nj ly nk nl nm nn bi translated">第2个框是副标题(<em class="no">副标题:</em>)。</h2><h2 id="4668" class="mv mw iq bd mx my mz dn na nb nc dp nd lw ne nf ng lx nh ni nj ly nk nl nm nn bi translated">第三个框是作者信息(<em class="no">作者:</em>)。</h2><h2 id="c1c1" class="mv mw iq bd mx my mz dn na nb nc dp nd lw ne nf ng lx nh ni nj ly nk nl nm nn bi translated">第四个框是日期(<em class="no">日期:</em>)。</h2><h2 id="978e" class="mv mw iq bd mx my mz dn na nb nc dp nd lw ne nf ng lx nh ni nj ly nk nl nm nn bi translated">第五个框由分析的摘要(<em class="no">摘要:</em>)和关键字(\\ <em class="no"> textbf{Keywords:} </em>)组成。</h2><h2 id="ccb9" class="mv mw iq bd mx my mz dn na nb nc dp nd lw ne nf ng lx nh ni nj ly nk nl nm nn bi translated">第六个盒子将保存目录(<em class="no"> toc </em>)。</h2><h2 id="3c77" class="mv mw iq bd mx my mz dn na nb nc dp nd lw ne nf ng lx nh ni nj ly nk nl nm nn bi translated">第7个框保存确认(<em class="no">感谢</em>)消息，最后，我们在第一页的右下角看到页码(<em class="no">编号_部分:</em>)。</h2><p id="2351" class="pw-post-body-paragraph kz la iq lc b ld np jr lf lg nq ju li lw nr ll lm lx ns lp lq ly nt lt lu lv ij bi translated">管道(“|”)允许在同一参数中键入新的一行。</p><p id="7a0e" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated"><em class="lb"> geometry </em>参数允许页边距宽度，以便在打印pdf时，作者不会因硬装订而丢失任何文本。</p><p id="80eb" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">当<em class="lb">为真时</em>的<em class="lb"> keep_tex </em>参数指示pandoc在输出文件中保留LaTex转换。</p><p id="2696" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated"><em class="lb"> latex_engine </em>参数指示pandoc使用特定的latex引擎进行文档转换。像“<em class="lb">pdflatex”</em>和“<em class="lb">xelatex”</em>这样的引擎是最常用的。使用非英语语言或系统字体的作者更喜欢“<em class="lb"> xelatex”。</em></p><p id="e9e1" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated"><em class="lb"> fig_caption </em>参数指示latex引擎对pdf文档中的表格和图像/图表进行自动编号。例如，当插入第一个表格时，标题将从表-1开始，因此第一个图或图像的标题为图-1。<em class="lb"> fontfamily </em>参数选择文档的字体。</p><p id="6444" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated"><em class="lb"> header-includes </em>下的<em class="lb"> \usepackage{} </em>参数指示tinytex确保安装特定的LaTex包，用于编写数学方程和放置图形或表格。基本上，以上三个包大部分时间用于基本的pdf输出创建。还有一个程序创建一个<strong class="lc ir"> <em class="lb">。工作目录中的sty文件</em> </strong>用于给出显式LaTex指令，这些指令可以在<em class="lb">下的元数据中使用，包括_header </em>参数中的和<em class="lb">。</em></p><p id="f781" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated"><strong class="lc ir">引文</strong></p><p id="c61a" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">重要的是要提及其作品启发了分析表示的想法和作者。在创建期刊或发表研究论文时，通常会特别注意在同行评审的输出中包含所有必要和正确的引用。事实上，这是审查机构打击剽窃的最重要的评估标准之一。APA格式的最常见的引用指南和最新版本很容易在公开论坛上通过谷歌搜索获得。R Markdown可以与BibTex格式无缝交互。每一份研究出版物都会附上一个DOI ( <em class="lb">数字对象标识符</em>)，同时在他们的出版物库中发布作者的作品。这个标识符包含一些关于作者和作品种类的独特信息。</p><div class="lz ma gp gr mb mc"><a href="https://www.doi2bib.org/" rel="noopener  ugc nofollow" target="_blank"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd ir gy z fp mh fr fs mi fu fw ip bi translated">doi2bib</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">从数字对象标识符(DOIs)中轻松生成BibTeX格式的引文。</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">www.doi2bib.org</p></div></div></div></a></div><p id="eabc" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">上面的网站可以将任何doi转换成一个等价的BibTex标识符，R Markdown可以使用<em class="lb"> citation_package </em>参数对其进行翻译和呈现。因此，如果你试图找到一个你已经有的doi的相应BibTex，那么这是一个救命稻草。或者，如果你想获取某个谷歌学术期刊/书籍的BibTex，你可以点击“<em class="lb">双引号</em>符号，然后点击BibTex链接。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/c218aa42064fc338b418a8a859360bc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0b3zEwDnrgVv8dd-Wd6OfA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图3如何从谷歌学术获得BibTex。(图片来源) :图片来自作者</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/f996a5ed359f4bb7dd1aa6dec038cdeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dz8Qowr1IfOOznrvwM7kHw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图4这是第二个片段的目录。(图片来源) :图片来自作者</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/fdb8edc556f1a69708971e164002c76e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1348/format:webp/1*7b-C1Bt0_C-k2bHMyzBAqg.jpeg"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图5这是第二个代码片段的第二页输出。(图片来源) :图片来自作者</p></figure><p id="1396" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">本文所附的第一段和第二段代码的不同之处在于添加了<em class="lb">书目:</em>、<em class="lb">书目样式:</em>、<em class="lb">链接引用:</em>和<em class="lb"> natbiboptions: </em>参数。<em class="lb">的例子。当前工作目录中的bib </em>文件包含了作者在文档中可能引用或不引用的所有引文。<em class="lb">\ n site { * }</em>参数通过pandoc明确指示latex引擎在references部分包含所有引用，而不管它是否在主体中被引用。[@ &lt; id &gt; ]语法允许作者在文档的叙述性文本中明确引用作品。文献目录文件中未明确引用的那些id(即bib文件)将按照<em class="lb">\ n site { * }显示在参考部分。</em>如果不需要此功能，那么作者可以简单地删除<em class="lb">\ n site { * }参数。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/96d9cd4a5b36c96c79db6a9db84307aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*gNd_Iax57Kpi_Z7njUA2Cg.jpeg"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图6这是example.bib文件在<strong class="bd ny">记事本++ </strong>中编辑时的样子。(图片来源) :图片来自作者</p></figure><p id="1c16" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">函数<em class="lb"> write_bib() </em>在R控制台中打印机器中已安装软件包的BibTex。文档链接在这里是<a class="ae kv" href="https://www.rdocumentation.org/packages/knitr/versions/1.33/topics/write_bib" rel="noopener ugc nofollow" target="_blank"/>。<em class="lb"> wirte_bib()无法从出版网站获取学术文章或期刊的BibTex</em>。这仅用于获取安装在机器中的R包的BibTex。</p><p id="980a" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">最简单的方法是从与分析相关的所有可能来源中逐一收集所有BibTex引用，将它们附加到一个单独的Notepad++文件中，保存该文件，并将该文件及其扩展名重命名为<em class="lb"> example.bib. R Markdown无法识别。txt文件，除非将其重命名为. bib. </em></p><p id="d37c" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated"><strong class="lc ir">结论</strong></p><p id="71a8" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">渲染HTML和PDF文档是两个不同的球赛。呈现HTML很简单，相对来说不那么费力，而且有其自身的局限性。另一方面，呈现PDF很费力，需要多次迭代才能看到文档是否放在作者想要的地方。在渲染PDF输出时，<em class="lb">分页符</em>和<em class="lb">乳胶浮动对象</em>的概念对初学者来说有很大的作用。然而，正如股市所说的“<em class="lb">风险越大，收益越高</em>”，一旦最初的几个项目结束，这种技能组合给分析师带来了很多快乐和满足。不推荐在没有LaTex广泛知识的情况下渲染PDF输出，但是，R Markdown并不要求LaTex基础的先决条件。R Markdown的强大功能和它的扩展包使得这种技术对于非学术界人士来说也是触手可及的，而不管它在日常演示中的大规模使用。渲染PDF的旅程相对较长，因为它涉及到更多的元素来管理最终输出。我同意，有时搜索数百个Stackoverflow问题来学习单个论点及其功能变得很单调。然而，我们的目标不是成为一名LaTex开发者，甚至不是R Markdown开发者。更大的目的是多花一点功夫来管理这个husky工具，以便能够在发送给同行评审时，从常规Excel或PowerPoint中脱颖而出，释放出一个封装良好的分析流。</p><p id="d093" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">在R Markdown中有多种方法来构造元数据以呈现PDF，学习一些的最好方法是迭代不同的版本。虽然这对于学者来说可能不一样，但对于基础从业者来说，熟悉这个大力士的最好方法是熟悉HTML过程，然后谨慎地使用PDF。像“rticles”这样的软件包已经提供了许多不同的模板来呈现PDF，但是它并不能保证“一个尺寸适合所有人”的目的。我想分享一个来自Pat Schloss的视频，这可能会激励更多人。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz ms l"/></div></figure><p id="01a1" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">谢谢你。</p></div></div>    
</body>
</html>