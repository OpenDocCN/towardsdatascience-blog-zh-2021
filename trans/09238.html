<html>
<head>
<title>Downloading Kaggle dataset to Deepnote</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Kaggle数据集下载到Deepnote</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/downloading-kaggle-dataset-to-deepnote-edc938df1b0?source=collection_archive---------33-----------------------#2021-08-26">https://towardsdatascience.com/downloading-kaggle-dataset-to-deepnote-edc938df1b0?source=collection_archive---------33-----------------------#2021-08-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dacc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我如何使用自己创建的bash脚本来实现自动化</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d0ba7c0d7788013420bc79dc39a81040.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EsIAFtgbr1o0oEv_3w6ZsQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自<a class="ae ky" href="https://unsplash.com/@zanardi" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="9eb9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你像我一样，你通过创建宠物项目来学习。<a class="ae ky" href="https://www.kaggle.com/" rel="noopener ugc nofollow" target="_blank">Kaggle.com</a>是一个优秀的pet项目数据来源(以及其他)。</p><p id="4601" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我还使用deep not e作为工作空间来构建我喜欢的项目。同样，这是因为它拥有我在一个环境中想要的一切，比如文件目录，轻松访问GitHub，一个终端，无缝删除和创建python环境的能力。另外，所有的魔法和实验都发生在我的本地系统之外。</p><p id="a7d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想抱怨一些在Deepnote上不工作的事情，他们在每个新的项目环境中都有聊天支持。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lw lx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Gif来自Giphy.com</p></figure><p id="385b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我经常创建宠物项目和使用Kaggle数据集，我需要自动化至少80%的下载过程，以减少摩擦和节省时间。</p><p id="e8bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我创建了一个bash脚本来完成这个任务。这是它看起来的样子</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ly lx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自作者的代码</p></figure><h2 id="a3d9" class="lz ma it bd mb mc md dn me mf mg dp mh li mi mj mk lm ml mm mn lq mo mp mq mr bi translated">它是做什么的？</h2><ul class=""><li id="b476" class="ms mt it lb b lc mu lf mv li mw lm mx lq my lu mz na nb nc bi translated">第一段代码从当前工作目录切换到直接父目录，在Deepnote: <code class="fe nd ne nf ng b">work</code>目录中切换到<code class="fe nd ne nf ng b">root</code>目录</li><li id="107e" class="ms mt it lb b lc nh lf ni li nj lm nk lq nl lu mz na nb nc bi translated">设置Kaggle CLI包括<code class="fe nd ne nf ng b">pip</code>安装Kaggle库，创建一个名为<code class="fe nd ne nf ng b">.kaggle</code> <em class="lv">(命名是固定的，应该位于根目录下)</em>的目录，将你的Kaggle <code class="fe nd ne nf ng b">API Token</code>移动到创建的目录下。</li><li id="c297" class="ms mt it lb b lc nh lf ni li nj lm nk lq nl lu mz na nb nc bi translated">您将需要Kaggle数据集的<strong class="lb iu"> API来下载首选数据集。第<strong class="lb iu">行第14 </strong>行提示请求该API。<strong class="lb iu">第15 -16行</strong>读取API输入并运行。</strong></li><li id="9385" class="ms mt it lb b lc nh lf ni li nj lm nk lq nl lu mz na nb nc bi translated">扩展名为<code class="fe nd ne nf ng b">.zip</code>的Kaggle数据集API返回文件。<strong class="lb iu">第20行</strong>解压该文件，并将输出移动到<code class="fe nd ne nf ng b">work</code>目录。</li><li id="f05a" class="ms mt it lb b lc nh lf ni li nj lm nk lq nl lu mz na nb nc bi translated">剩下的代码集中在清理环境上，即卸载<code class="fe nd ne nf ng b">kaggle</code>库，将<code class="fe nd ne nf ng b">kaggle.json</code>文件移回原来的存储库文件夹等等。</li></ul><p id="5a1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">注意，这个脚本是专门为Deepnote项目环境构建的。因此，您应该熟悉Deepnote项目环境中的目录，如</em> <code class="fe nd ne nf ng b"><em class="lv">work</em></code> <em class="lv">目录。</em></p><h2 id="7a83" class="lz ma it bd mb mc md dn me mf mg dp mh li mi mj mk lm ml mm mn lq mo mp mq mr bi translated">如何运行脚本</h2><p id="ee6e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">在运行脚本之前，请确保以下事项。</p><ul class=""><li id="12b0" class="ms mt it lb b lc ld lf lg li np lm nq lq nr lu mz na nb nc bi translated">您已经将这个存储库克隆或者分支<a class="ae ky" href="https://github.com/anitaokoh/Automating_kaggle_dataset_download" rel="noopener ugc nofollow" target="_blank">到您的远程存储库。<strong class="lb iu">要利用和运行bash脚本，脚本文件应该在您的远程Github repo中。</strong></a></li><li id="8be4" class="ms mt it lb b lc nh lf ni li nj lm nk lq nl lu mz na nb nc bi translated">您拥有一个Deepnote帐户，并创建了一个新的项目工作环境。一个新的项目环境看起来像这样。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/cb83721c86f5f0d77c1750c87afcb646.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WqGDzDyyYj3gW8TqGnZmSQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自作者的截图</p></figure><p id="f390" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你还没有一个Deepnote帐户，你可以在这里注册。</p><ul class=""><li id="5256" class="ms mt it lb b lc ld lf lg li np lm nq lq nr lu mz na nb nc bi translated">您已经将bash脚本存储库链接到您的Deepnote项目环境。<strong class="lb iu">这里是</strong><a class="ae ky" href="https://docs.deepnote.com/integrations/github" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"/></a><strong class="lb iu">文档，用于将存储库链接到您的项目。</strong>一旦它被链接，您会注意到存储库文件夹如下所示。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/c5bed53004654dc7a9dd7954a8fe2b17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*VFMuOiIIiimdPiv1IcfCww.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截图</p></figure><ul class=""><li id="bd83" class="ms mt it lb b lc ld lf lg li np lm nq lq nr lu mz na nb nc bi translated">您有一个Kaggle API令牌。<strong class="lb iu">你可以在你的Kaggle个人资料中找到并下载这个文件，如下图</strong>。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/4a9338e00f4dc4edc5ff1e7256235ef5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_6hrSx4tojjX9d93SYpi_g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自作者的截图</p></figure><ul class=""><li id="fd31" class="ms mt it lb b lc ld lf lg li np lm nq lq nr lu mz na nb nc bi translated">API令牌将被下载到一个名为<code class="fe nd ne nf ng b">kaggle.json</code>的文件中。<strong class="lb iu">上传文件并将其移动到Deepnote项目环境中的存储库文件夹中。</strong> <a class="ae ky" href="https://docs.deepnote.com/importing-and-exporing/importing-data-to-deepnote" rel="noopener ugc nofollow" target="_blank">这里的</a>是如何在你的项目环境中上传一个文件。这是它应该看起来像什么的一个例子</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/613de4078b2aac334b8047fc790ab7b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*DxCmnXletnZ4a4t08BKTGw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自作者的截图</p></figure><p id="2708" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">只有在将存储库链接到您的项目环境之后，才上传ka ggle . JSON</em></p><ul class=""><li id="4078" class="ms mt it lb b lc ld lf lg li np lm nq lq nr lu mz na nb nc bi translated">您已经复制了想要下载的数据集的API命令。当您运行脚本时，您将需要它。<strong class="lb iu">您可以在选择</strong>的Kaggle数据集页面的右侧找到该命令。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/243535a4d6c998b16c5a5f8cf540ec80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V5JIX4oR4tNnojf9zagVew.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自作者的截图</p></figure><p id="0089" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你已经设置好了，…</p><ul class=""><li id="998c" class="ms mt it lb b lc ld lf lg li np lm nq lq nr lu mz na nb nc bi translated">前往终端图标，并创建一个新的终端。<a class="ae ky" href="https://docs.deepnote.com/features/terminal" rel="noopener ugc nofollow" target="_blank">这里的</a>是一个关于如何的文档。</li><li id="cba7" class="ms mt it lb b lc nh lf ni li nj lm nk lq nl lu mz na nb nc bi translated">在终端的当前工作目录下，运行下面的命令。</li></ul><pre class="kj kk kl km gt nw ng nx ny aw nz bi"><span id="9dd5" class="lz ma it ng b gy oa ob l oc od">sh Automating_kaggle_dataset_download/download_kaggle_dataset.sh</span></pre><p id="3f5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">就这些，真的。说真的。</strong></p><p id="8430" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是这个过程的视频演示</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe lx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者录音</p></figure><p id="b5da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果返回到文件图标，您会看到数据集文件和存储库文件夹。</p><p id="aa2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过运行以下命令删除存储库文件夹</p><pre class="kj kk kl km gt nw ng nx ny aw nz bi"><span id="ac3f" class="lz ma it ng b gy oa ob l oc od">rm -r Automating_kaggle_dataset_download/</span></pre><p id="8920" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">请注意，Deepnote GitHub集成一次只链接一个repo，因此如果您想要将另一个重新定位链接到您的项目工作区，您需要通过删除粘贴的链接来取消前一个重新定位的链接。</em></p><blockquote class="of og oh"><p id="baf7" class="kz la lv lb b lc ld ju le lf lg jx lh oi lj lk ll oj ln lo lp ok lr ls lt lu im bi translated"><strong class="lb iu">使用Deepnote时，这种方法将节省我下载Kaggle数据集的时间。虽然它不是100%自动化的，因为每次您想要使用脚本时都需要在运行它之前上传kaggle.json，但它仍然胜过每次您在Deepnote或本地新的虚拟环境中创建新的项目环境时都必须手动执行</strong> <code class="fe nd ne nf ng b"><strong class="lb iu">pip install kaggle</strong></code> <strong class="lb iu">和其他设置程序。</strong></p></blockquote><p id="37d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这也是一个简单的脚本创建和简单的任何人都可以适应/改善如果需要。</p><h2 id="8646" class="lz ma it bd mb mc md dn me mf mg dp mh li mi mj mk lm ml mm mn lq mo mp mq mr bi translated">参考</h2><ul class=""><li id="1b17" class="ms mt it lb b lc mu lf mv li mw lm mx lq my lu mz na nb nc bi translated"><a class="ae ky" href="https://medium.com/@jeff.daniel77/accessing-the-kaggle-com-api-with-jupyter-notebook-on-windows-d6f330bc6953" rel="noopener">在Windows上使用Jupyter笔记本访问Kaggle.com API</a></li></ul></div></div>    
</body>
</html>