<html>
<head>
<title>Read and Edit Image Metadata with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python读取和编辑图像元数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/read-and-edit-image-metadata-with-python-f635398cd991?source=collection_archive---------4-----------------------#2021-11-23">https://towardsdatascience.com/read-and-edit-image-metadata-with-python-f635398cd991?source=collection_archive---------4-----------------------#2021-11-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cc4f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Python的exif库提取和修改数字图像文件的元数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/955127f1d15ef305bf1336566d49d506.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QgLM9n41xC4AxXUM"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@jeshoots?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">JESHOOTS.COM</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="10c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于每张照片，都有比看上去更多的东西。数码相机和智能手机拍摄的图像包含丰富的信息(被称为<strong class="lb iu">元数据</strong>)，超出了可见像素。</p><p id="12ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种元数据在许多商业案例中很有帮助。例如，<strong class="lb iu">保险</strong>索赔的<strong class="lb iu">欺诈检测</strong>系统分析提交的照片的元数据，以检查索赔人是否在事故之前<strong class="lb iu">拍摄了这些照片。</strong></p><p id="c3fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们探索如何使用<em class="lv"> exif </em>库来读取和编辑数字图像的元数据。</p><h2 id="66e2" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">内容</h2><blockquote class="mp mq mr"><p id="851b" class="kz la lv lb b lc ld ju le lf lg jx lh ms lj lk ll mt ln lo lp mu lr ls lt lu im bi translated"><strong class="lb iu"><em class="it">(1)</em></strong><a class="ae ky" href="#5657" rel="noopener ugc nofollow"><em class="it">什么是元数据和Exif？</em></a><em class="it"><br/></em><strong class="lb iu"><em class="it">(2)</em></strong><a class="ae ky" href="#cac0" rel="noopener ugc nofollow"><em class="it">读取图像元数据</em></a><br/><strong class="lb iu"><em class="it">【3】</em></strong><a class="ae ky" href="#9cfd" rel="noopener ugc nofollow"><em class="it">修改图像元数据</em></a><em class="it"><br/></em><strong class="lb iu"><em class="it">(4)</em></strong><a class="ae ky" href="#44e8" rel="noopener ugc nofollow"><em class="it">保存修改后的图像元数据</em></a></p></blockquote><p id="cded" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请随意查看随附的<a class="ae ky" href="https://github.com/kennethleungty/Image-Metadata-Exif" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> GitHub repo </strong> </a>中的所有代码。</p></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><h1 id="5657" class="nc lx it bd ly nd ne nf mb ng nh ni me jz nj ka mh kc nk kd mk kf nl kg mn nm bi translated">什么是元数据和Exif？</h1><p id="2a1c" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">元数据是指描述数据的数据集，你可以把它想象成关于数据的<strong class="lb iu">数据。照片的元数据由相机型号和拍摄日期等信息组成。</strong></p><p id="67a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些元数据存储在<strong class="lb iu"> Exif(可交换图像文件格式)</strong>中，这是一种针对数码相机和智能手机等设备拍摄的各种类型媒体(例如图像、视频、音频)的格式<strong class="lb iu">标准</strong>。</p><p id="33d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本项目使用的Python库是<a class="ae ky" href="https://pypi.org/project/exif/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="lv">exif</em></strong></a>，恰好是Exif格式的同名。</p></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><h1 id="cac0" class="nc lx it bd ly nd ne nf mb ng nh ni me jz nj ka mh kc nk kd mk kf nl kg mn nm bi translated">读取图像元数据</h1><p id="c453" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">我们首先用这个命令安装<em class="lv"> exif </em>:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="a6e9" class="lw lx it nt b gy nx ny l nz oa">pip install exif</span></pre><p id="195f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于本次演示，这是我们将要处理的照片:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/c2b6dcb66519d0e77d42908ecab79d23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DVtNRYJrhTF2vw_5xzqD9g.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="cd75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们通过在检查图像是否包含任何元数据之前读取二进制格式的图像来实例化一个<em class="lv"> exif </em> <code class="fe oc od oe nt b">Image</code>类。如果是这样，<code class="fe oc od oe nt b">has_exif</code>方法将返回<em class="lv">真值</em>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="fae9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不同的照片有不同的元数据属性(又名Exif <strong class="lb iu">标签</strong>),这是由于用于捕捉它们的设备不同。我们可以用<code class="fe oc od oe nt b">list_all()</code>方法查看图像的现有属性。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/a3a291cee0c27eac527cf223660c5a9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dKgAk9BnpV48js2AbDst4g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按作者列出的属性列表|图像的子集</p></figure><p id="eddc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要读取特定属性的值，我们可以使用<code class="fe oc od oe nt b">get()</code>方法。虽然还有其他方法，但我更喜欢<code class="fe oc od oe nt b">get()</code>，因为它通过返回<em class="lv"> None </em>(而不是<em class="lv"> </em>抛出错误)来优雅地处理属性不存在的情况。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/4fb038059f9a164065b9e4505778350f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1CkTOh0fmfu92yfw3Yzi1w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">get()方法的输出|作者的图像</p></figure><p id="38a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">附:查看</em><a class="ae ky" href="https://github.com/kennethleungty/Image-Metadata-Exif/blob/main/Image_Metadata_Extraction_EXIF.ipynb" rel="noopener ugc nofollow" target="_blank"><em class="lv">Image _ Metadata _ Extraction _ EXIF . ipynb</em></a><em class="lv">笔记本，了解将一张图片的所有元数据提取到熊猫数据帧中的功能。</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/029ca0781e32e27e2c2c71c7e4f4d922.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*omDKiA9YkTjeBIaj"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@mylene1708?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">米琳·特雷莫耶</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><h1 id="9cfd" class="nc lx it bd ly nd ne nf mb ng nh ni me jz nj ka mh kc nk kd mk kf nl kg mn nm bi translated">修改图像元数据</h1><p id="73b9" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">除了读取元数据，我们还可以执行一系列的修改，比如添加、更新和删除属性。</p><h2 id="2e2b" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">㈠添加元数据</h2><p id="8db7" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">可以添加当前不存在的新属性来进一步丰富元数据。</p><p id="2798" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">需要注意的一点是，添加的属性<strong class="lb iu">必须是</strong>一个可识别的EXIF标签。否则，添加将不会发生。您可以在此 找到已识别图像属性<a class="ae ky" href="https://exif.readthedocs.io/en/latest/api_reference.html#image-attributes" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">的完整列表。</strong></a></p><p id="a84f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比如我们可以添加公认的<strong class="lb iu">版权</strong>属性。在给<strong class="lb iu">版权</strong>属性赋值(<em class="lv"> Kenneth Leung 2021 </em>)后，<code class="fe oc od oe nt b">get()</code>方法会给我们这个新值，而不是<em class="lv"> None。</em></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><div class="ok ol gp gr om on"><a href="https://kennethleungty.medium.com/membership" rel="noopener follow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">通过我的推荐链接加入媒体-梁建华</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">以一杯咖啡的价格访问我所有的内容(和所有的媒体文章)!</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">kennethleungty.medium.com</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb ks on"/></div></div></a></div></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><h2 id="e469" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">㈡更新元数据</h2><p id="6680" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">我们还可以更新图像元数据属性的现有值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/056eb00910a2e854a677290d56dc26c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M67MXL16HXWtDo01Ijac1Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">元数据更新后的输出|按作者排序的图像</p></figure></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><h2 id="e048" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">㈢删除元数据</h2><p id="aa0b" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">如果我们想删除特定的属性而不是更新它们，我们可以用<code class="fe oc od oe nt b">.delete()</code>来完成。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/a8bce7350e3c4f7c2d391463649b8462.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xkYb57os5MGO92CEKUKZYA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">元数据删除后的输出|按作者排序的图像</p></figure></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><h1 id="44e8" class="nc lx it bd ly nd ne nf mb ng nh ni me jz nj ka mh kc nk kd mk kf nl kg mn nm bi translated"><em class="pd">保存修改后的图像元数据</em></h1><p id="bc46" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">在所有的修改之后，最后一步是将带有修改后的元数据的图像保存为一个新文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="9e1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上所述，我们使用前缀为'<em class="lv"> modified_' </em>的文件名保存了修改后的图像，这样原始图像就不会被覆盖。</p></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><h1 id="3af6" class="nc lx it bd ly nd ne nf mb ng nh ni me jz nj ka mh kc nk kd mk kf nl kg mn nm bi translated">包装它</h1><ul class=""><li id="3001" class="pe pf it lb b lc nn lf no li pg lm ph lq pi lu pj pk pl pm bi translated">还有许多其他有趣的属性需要探索，您可以在<a class="ae ky" href="https://exif.readthedocs.io/en/latest/api_reference.html" rel="noopener ugc nofollow" target="_blank"> <em class="lv"> exif </em>文档</a>页面上找到更多细节。</li><li id="878a" class="pe pf it lb b lc pn lf po li pp lm pq lq pr lu pj pk pl pm bi translated">到目前为止，我们所做的是处理一个单一的图像。<em class="lv"> exif </em>包的值是通过<strong class="lb iu">批处理</strong>实现的，其中元数据的提取和修改是在一组<strong class="lb iu">大的</strong>图像上完成的。要查看批处理的运行情况，请看一下<a class="ae ky" href="https://github.com/kennethleungty/Image-Metadata-Exif" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> GitHub repo </strong> </a>中的<code class="fe oc od oe nt b">batch_process_metadata.py</code>脚本。</li><li id="aff0" class="pe pf it lb b lc pn lf po li pp lm pq lq pr lu pj pk pl pm bi translated">请记住，在使用此图库之前，请备份您的照片，以防止任何意外的数据丢失。</li></ul><h1 id="3fdd" class="nc lx it bd ly nd ps nf mb ng pt ni me jz pu ka mh kc pv kd mk kf pw kg mn nm bi translated">在你走之前</h1><p id="d9bc" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">欢迎您加入<strong class="lb iu">我的数据科学学习之旅！</strong>点击这个<a class="ae ky" href="https://kennethleungty.medium.com/" rel="noopener">媒体</a>页面，查看我的<a class="ae ky" href="https://github.com/kennethleungty" rel="noopener ugc nofollow" target="_blank"> GitHub </a>，了解更多令人兴奋的数据科学内容。同时，享受阅读和修改图像元数据的乐趣！</p><div class="ok ol gp gr om on"><a rel="noopener follow" target="_blank" href="/top-python-libraries-for-image-augmentation-in-computer-vision-2566bed0533e"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">用于计算机视觉中图像增强的顶级Python库</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">为您的下一个计算机视觉项目提供最好的增强库(以及示例代码)</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">towardsdatascience.com</p></div></div><div class="ow l"><div class="px l oy oz pa ow pb ks on"/></div></div></a></div><div class="ok ol gp gr om on"><a rel="noopener follow" target="_blank" href="/russian-car-plate-detection-with-opencv-and-tesseractocr-dce3d3f9ff5c"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">使用OpenCV和TesseractOCR进行俄罗斯车牌检测</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">利用计算机视觉检测、识别和提取汽车牌照号码</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">towardsdatascience.com</p></div></div><div class="ow l"><div class="py l oy oz pa ow pb ks on"/></div></div></a></div><div class="ok ol gp gr om on"><a rel="noopener follow" target="_blank" href="/key-learning-points-from-mlops-specialization-course-2-13af51e22d90"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">MLOps专业化认证的关键学习点—课程2</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">面向生产的机器学习工程(MLOps)课程的见解摘要(含课堂讲稿)</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">towardsdatascience.com</p></div></div><div class="ow l"><div class="pz l oy oz pa ow pb ks on"/></div></div></a></div></div></div>    
</body>
</html>