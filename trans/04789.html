<html>
<head>
<title>Terraform 101</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">地形101</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/terraform-101-d51437a3170?source=collection_archive---------14-----------------------#2021-04-26">https://towardsdatascience.com/terraform-101-d51437a3170?source=collection_archive---------14-----------------------#2021-04-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="522b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">地形基本概念的简单指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/bb22ba63a24ec9c34ff94c0804765d8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*hYO3r4xNlREayKH4VsG4Xg.jpeg"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">阿迪·戈尔茨坦在<a class="ae kr" href="https://unsplash.com/s/photos/code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="6485" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果您是一名DevOps工程师或在日常工作中必须处理DevOps相关工作的人，我相信您一定听说过基础设施即代码(IaC)的概念。简单地说，IaC是从天上掉下来的东西，用来帮助每天都在奋斗的DevOps工程师。IaC是一种使用机器可读的定义文件来管理和配置整个IT基础架构的方法。使用编程脚本，有助于整个IT基础设施的自动化。IaC有很多好处。它允许在配置基础设施时更快地执行，有助于降低与实施基础设施相关的成本和风险，具有对变更的完全可追溯性，等等。</p><p id="d35f" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">目前市场上有几种IaC工具。今天我要解释一下Terraform，它引起了许多IT工程师的注意。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><p id="9199" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">根据官方的地形文件，</p><blockquote class="lv lw lx"><p id="0b8b" class="ks kt ly ku b kv kw jr kx ky kz ju la lz lc ld le ma lg lh li mb lk ll lm ln ij bi translated">Terraform是一个安全有效地构建、更改和版本控制基础设施的工具。Terraform可以管理现有的和受欢迎的服务提供商以及定制的内部解决方案。</p></blockquote><p id="cddc" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">它是由<a class="ae kr" href="https://www.terraform.io/" rel="noopener ugc nofollow" target="_blank">哈希公司</a>开发的开源IaC工具。它看起来很像CloudFormation，用于自动化AWS基础设施。你也可以在其他云服务上使用Terraform。Terraform创建一个执行计划，解释它将如何达到所需的状态，然后实施它来构建指定的基础架构。Terraform可以决定随着配置的变化而改变的内容，并建立可以实施的逐步执行计划。</p><h1 id="d5f0" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">基本原则</h1><h2 id="167b" class="mu md iq bd me mv mw dn mi mx my dp mm lb mz na mo lf nb nc mq lj nd ne ms nf bi translated">语言</h2><ul class=""><li id="a98e" class="ng nh iq ku b kv ni ky nj lb nk lf nl lj nm ln nn no np nq bi translated"><em class="ly">输入变量</em> —用作Terraform模块的参数，因此用户可以自定义行为而无需编辑源代码</li><li id="519f" class="ng nh iq ku b kv nr ky ns lb nt lf nu lj nv ln nn no np nq bi translated"><em class="ly">模块</em> —充当一起使用的多个资源的容器。这是一种打包和重用资源配置的方法。</li><li id="5eb0" class="ng nh iq ku b kv nr ky ns lb nt lf nu lj nv ln nn no np nq bi translated"><em class="ly">资源</em> —记录声明资源的语法</li><li id="3245" class="ng nh iq ku b kv nr ky ns lb nt lf nu lj nv ln nn no np nq bi translated"><em class="ly">数据源</em> —允许提取或计算数据，用于地形配置中的其他地方</li><li id="d6cf" class="ng nh iq ku b kv nr ky ns lb nt lf nu lj nv ln nn no np nq bi translated"><em class="ly">输出值</em> —地形模块的返回值</li><li id="ee77" class="ng nh iq ku b kv nr ky ns lb nt lf nu lj nv ln nn no np nq bi translated"><em class="ly">局部值</em>——为表达式指定一个简称的便利特性</li></ul><h2 id="e195" class="mu md iq bd me mv mw dn mi mx my dp mm lb mz na mo lf nb nc mq lj nd ne ms nf bi translated">命令</h2><ul class=""><li id="d6a4" class="ng nh iq ku b kv ni ky nj lb nk lf nl lj nm ln nn no np nq bi translated"><strong class="ku ir"> terraform init </strong> —初始化包含所有配置文件的工作目录</li><li id="a6e1" class="ng nh iq ku b kv nr ky ns lb nt lf nu lj nv ln nn no np nq bi translated"><strong class="ku ir"> terraform validate </strong> —验证目录中的配置文件</li><li id="f6b3" class="ng nh iq ku b kv nr ky ns lb nt lf nu lj nv ln nn no np nq bi translated"><strong class="ku ir">地形计划</strong> —创建执行计划，以达到基础设施的预期状态</li><li id="02bd" class="ng nh iq ku b kv nr ky ns lb nt lf nu lj nv ln nn no np nq bi translated"><strong class="ku ir"> terraform apply </strong> —按照计划中的定义对基础设施进行更改</li><li id="928a" class="ng nh iq ku b kv nr ky ns lb nt lf nu lj nv ln nn no np nq bi translated"><strong class="ku ir">地形破坏</strong> —删除所有旧的基础设施资源</li></ul><h1 id="db23" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">我们开始吧！</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/86daa18d38663c6f77968017a6877715.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*4OGQCbPqXZll6rwyYrO8FQ.jpeg"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">照片由<a class="ae kr" href="https://unsplash.com/@tateisimikito?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Jukan Tateisi </a>在<a class="ae kr" href="https://unsplash.com/s/photos/start?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="cae3" class="mu md iq bd me mv mw dn mi mx my dp mm lb mz na mo lf nb nc mq lj nd ne ms nf bi translated">1.设置AWS凭据</h2><p id="441f" class="pw-post-body-paragraph ks kt iq ku b kv ni jr kx ky nj ju la lb nw ld le lf nx lh li lj ny ll lm ln ij bi translated">对于本教程，我将使用AWS平台。为了连接我们的AWS帐户和Terraform代码，我们需要设置AWS用户凭证。确保您使用的用户凭据能够访问您要调配的资源。获得具有适当权限的IAM用户的AWS访问密钥和秘密访问密钥，并将其保存在安全的地方。我们将在教程的后面需要它。</p><h2 id="2081" class="mu md iq bd me mv mw dn mi mx my dp mm lb mz na mo lf nb nc mq lj nd ne ms nf bi translated">2.安装地形</h2><p id="1a03" class="pw-post-body-paragraph ks kt iq ku b kv ni jr kx ky nj ju la lb nw ld le lf nx lh li lj ny ll lm ln ij bi translated">由于我使用的是Linux，我将在本教程中提供在Linux发行版中安装Terraform的必要命令。对于其他操作系统，请访问<a class="ae kr" href="https://learn.hashicorp.com/terraform/getting-started/install.html" rel="noopener ugc nofollow" target="_blank">此网页</a>安装Terraform。</p><p id="77dd" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">添加哈希公司<a class="ae kr" href="https://apt.releases.hashicorp.com/gpg" rel="noopener ugc nofollow" target="_blank"> GPG键</a> —</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="dfe8" class="mu md iq oa b gy oe of l og oh">curl -fsSL https://apt.releases.hashicorp.com/gpg | sudo apt-key add -</span></pre><p id="2852" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">添加官方的HashiCorp Linux库—</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="a7ba" class="mu md iq oa b gy oe of l og oh">sudo apt-add-repository “deb [arch=amd64] https://apt.releases.hashicorp.com $(lsb_release -cs) main”</span></pre><p id="acf0" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">更新和安装—</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="d69b" class="mu md iq oa b gy oe of l og oh">sudo apt-get update &amp;&amp; sudo apt-get install terraform</span></pre><p id="2b0c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">验证安装—</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="0ea2" class="mu md iq oa b gy oe of l og oh">terraform -help</span></pre><h2 id="4a07" class="mu md iq bd me mv mw dn mi mx my dp mm lb mz na mo lf nb nc mq lj nd ne ms nf bi translated">3.编写您的第一个地形脚本</h2><p id="2166" class="pw-post-body-paragraph ks kt iq ku b kv ni jr kx ky nj ju la lb nw ld le lf nx lh li lj ny ll lm ln ij bi translated">因为我们正在处理AWS，所以我们需要提供之前检索的凭证来连接我们各自的AWS资源。要在命令行工作区中设置AWS凭证，</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="c31d" class="mu md iq oa b gy oe of l og oh">export AWS_ACCESS_KEY_ID=(access key)<br/>export AWS_SECRET_ACCESS_KEY=(secret access key)</span></pre><p id="f525" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">Terraform可以在多个平台或提供商上构建基础设施，如AWS、Azure、Google Cloud、DigitalOcean等。通常，使用Terraform的第一步是设置您想要使用的提供者。创建一个名为aws.tf的文件，并将下面的代码插入其中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="a180" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">作为第一步，我们将学习如何在AWS中部署一个简单的EC2实例。Terraform有关于他们的语言、语法、资源等的详细说明文件。下面提到的是部署t2.micro实例所需的代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="a26a" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">注意，这只是创建ec2实例的简单代码片段。您可以指定许多属性，例如可用性区域、安全组、EBS信息、私钥值等。这些属性可以在各个hashicorp文档的官方资源页面上找到。</p><p id="4a80" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">**(请注意，我对每个资源使用单独的文件，因为这样便于管理和理解。您可以将aws.tf文件和ec2.tf文件内容复制并粘贴到一个名为main.tf的文件中，并获得相同的输出。)**</p><p id="6be7" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">在终端中，转到您创建ec2.tf和aws.tf的文件夹，运行<strong class="ku ir"> terraform init </strong>命令。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="ol om di on bf oo"><div class="gh gi ok"><img src="../Images/396e921916fc9934677d66defc8e09c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3hjQIeRsueHiTkyAla_pwQ.png"/></div></div></figure><p id="5765" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir"> terraform init </strong>命令创建一个工作目录，其中可以找到terraform配置文件。在创建新的Terraform配置或从版本控制中克隆现有配置后，您必须首先运行此命令。多次使用该命令是合适的。</p><p id="4ddf" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">你可以运行<strong class="ku ir"> terraform validate </strong>来确保你的代码是有效的。如果语法中有任何错误或缺少数据，将会显示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi op"><img src="../Images/fffe05bcca07e9d122cf47f6db1032ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*NkFenwOIc3SobDiBpWB3Tw.png"/></div></figure><p id="6b8f" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">我们的代码被初始化和验证。我们可以运行<strong class="ku ir">地形计划</strong>来查看执行计划。这是在执行更改之前仔细检查它们的一个极好的方法。如果不指定任何VPC、子网id，此配置将在默认VPC中创建具有各自默认值的资源。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/cdd6900b22db32b45ec448c8973a3c2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*gWx0-JhZuT1MnmykDFqCww.png"/></div></figure><p id="90c4" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">要实际创建资源，运行<strong class="ku ir"> terraform apply </strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi or"><img src="../Images/be20c6fc0cb611e3003efb27ce1dddbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iO8WqlQZQrkvZOSPaMGlBw.png"/></div></figure><p id="37bf" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如您所见，在Terraform的帮助下，我们已经成功创建了第一个ec2实例。如果您导航到您的AWS控制台，您会看到类似这样的内容。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="ol om di on bf oo"><div class="gh gi os"><img src="../Images/20a826ff450717d718368cca3bdf80db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EG4_1GW7s4b0ugDATnxKlw.png"/></div></div></figure><p id="2503" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">假设您需要更改实例中的某些内容。您可以编辑ec2.tf文件并再次运行<strong class="ku ir">地形计划</strong>。它将向您显示将要创建、修改或删除的内容。如果我想添加一个新的Env标签，这就是执行计划的样子。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="ol om di on bf oo"><div class="gh gi ot"><img src="../Images/1f0261dd51255decfae1de60902999d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*esnQ9BiwrjG_m75KOo46hw.png"/></div></div></figure><h2 id="7815" class="mu md iq bd me mv mw dn mi mx my dp mm lb mz na mo lf nb nc mq lj nd ne ms nf bi translated">4.如何编写模块</h2><p id="b080" class="pw-post-body-paragraph ks kt iq ku b kv ni jr kx ky nj ju la lb nw ld le lf nx lh li lj ny ll lm ln ij bi translated">现在你对Terraform的工作原理有了一点了解，在这一节中，我将解释如何编写和使用Terraform模块。</p><p id="9697" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">假设您在一家处理多个AWS资源的公司工作。例如，开发环境有5个实例，QA环境有另外5个实例，等等。我们可以创建模块并重用作为模板的代码，而不是编写相同的terraform资源块。</p><p id="f96f" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">在当前工作目录中，创建一个名为“模块”的文件夹。在其中创建两个名为“开发实例”和“质量保证实例”的文件夹。我将在教程的最后留下这个项目的GitHub链接。您可以在该存储库中找到文件结构和所有这些文件。</p><p id="6d31" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">为了将模块彼此分开，我在dev-instance模块中指定了一个名为“Dev”的标记，在qa-instance模块中指定了一个名为“QA”的标记。因此，当我们使用这些模块时，这些标签将被添加到各自的资源中。我还在两个模块中更改了根ebs卷的大小。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/823dec1410000739776be07fa0aadb5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*ClZX2K6V1qH3id2XV2SLNA.png"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">dev-实例模块main.tf文件</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/f312eaa0d0b8bcbfba92760e34d1ee9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*H6eN5xrm31r0IEozztWkCA.png"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">QA-实例模块main.tf文件</p></figure><p id="85d2" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">当我们使用模块时，ec2.tf文件应该这样改变。与上一节不同，现在我们使用模块块来创建资源。如果你使用一个模块块，必须提供该模块的源代码。在我们的例子中，它是我们先前在本地定义的模块。可以提供Github、Bitbucket、HTTP URLs、Terraform Registry等不同的源码类型。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/c7be150e9b86e694fdd5182e33517e49.png" data-original-src="https://miro.medium.com/v2/resize:fit:894/format:webp/1*_5fEKvSI8yQ2FTzOGBxK1g.png"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">ec2.tf文件</p></figure><p id="1c8d" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如您所见，我在这个脚本中使用了变量。变量在一个名为variables.tf的单独文件中定义。您可以使用自己提供的唯一名称在脚本中的任何地方使用它们。Eg- var.ami_id，var.instance_type。您可以在模块定义中提供一个默认的AMI ID，在variables.tf文件中作为一个变量，或者像我在这里所做的那样手动应用一个ID。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/98f6c5de063875a1a5345c47b2708025.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/1*MVNWX_G4aC6Wk6QkcsNYLQ.png"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">variables.tf文件</p></figure><p id="c5d0" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">outputs.tf文件如下所示。模块导出的每个输出值都必须使用output块声明。如果您转到模块输出文件，我已经在每个模块中声明了两个输出，它们将返回实例ID和实例的公共IP。现在我们正在使用模块，我们可以通过各自的模块名调用输出值，如下所示。</p><p id="88ee" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">语法- <strong class="ku ir">模块</strong>。&lt;模块名称&gt;。&lt;模块中提到的输出名称&gt;</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/bde514c8dd8128c880c722c6e8cba9bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*wzQNi0cyGW3ue4X266NEHQ.png"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">outputs.tf文件</p></figure><p id="e1fc" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">是时候创造这些资源了。你必须运行<strong class="ku ir"> terraform init </strong>来初始化新创建的模块。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="ol om di on bf oo"><div class="gh gi oz"><img src="../Images/369f62f72ebae1e9be39dc0fbbe68511.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JurbAY87T5oPQHwiMuv4qw.png"/></div></div></figure><p id="58df" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">运行<strong class="ku ir"> terraform validate </strong>来检查我们的脚本配置是否有效。如果有效，运行<strong class="ku ir">地形计划</strong>查看执行计划。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/c91fd6f180b0f7189be50640f5f0a1f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1162/format:webp/1*IcdDOxlAHSCelaJ5PJUmCA.png"/></div></figure><p id="fb0b" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">module.dev_server的环境标记为“dev ”,而module.qa_server的环境标记为“qa ”,这是我们在模块中单独指定的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/7dd241917b53fea532646b22bf74fb0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*lXwbhLgJGu6_Ch6OMfq8Uw.png"/></div></figure><p id="23e1" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">当您有一个outputs.tf文件时，您将在terraform计划中看到返回值，如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/dfa9b3fedb98528554b53234f26f96b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*urvQeE6XT8p9TnD_x01oHA.png"/></div></figure><p id="b401" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">当您完成Terraform的实验后，请确保清理环境，以防止不必要的成本。只需运行<strong class="ku ir"> terraform destroy </strong>，它也会显示你要销毁的资源。如果你确定，输入<strong class="ku ir"> yes </strong>指定的资源将被销毁。</p><p id="e790" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">Github链接—<a class="ae kr" href="https://github.com/Shani1116/terraform-101" rel="noopener ugc nofollow" target="_blank">https://github.com/Shani1116/terraform-101</a></p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><p id="d2f0" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">恭喜😻最后，你现在对使用Terraform有了一个基本的了解。但是我们才刚刚开始触及表面。以后我会发表更多与Terraform相关的博文。我错过了什么？请在评论中告诉我，我会添加进去的。保持联系，获取更多精彩内容！</p></div></div>    
</body>
</html>