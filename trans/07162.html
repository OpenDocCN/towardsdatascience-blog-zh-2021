<html>
<head>
<title>Dashboard using Streamlit with data from SQL database</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">仪表板使用Streamlit和来自SQL数据库的数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/dashboard-using-streamlit-with-data-from-sql-database-f5c1ee36b51?source=collection_archive---------7-----------------------#2021-06-29">https://towardsdatascience.com/dashboard-using-streamlit-with-data-from-sql-database-f5c1ee36b51?source=collection_archive---------7-----------------------#2021-06-29</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="b228" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">来自客户和销售数据的交互式仪表板</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/d203b3cf1ed2b5bbaef9617d73d34aae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wMlmLSORnDwBTGPrYJbCQA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者图片</p></figure><blockquote class="kz la lb"><p id="de81" class="lc ld le lf b lg lh jv li lj lk jy ll lm ln lo lp lq lr ls lt lu lv lw lx ly in bi translated"><strong class="lf iv">简介</strong></p></blockquote><p id="7be3" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">Streamlit是用于创建强大仪表板的最新python库之一，也是用于机器学习和数据科学团队的开源框架。它可以用非常简单的编码生成符合行业标准且具有视觉吸引力的仪表板。我使用streamlit创建了一个销售仪表板，其中包含交互式视觉效果和来自SQL数据库的数据。在本文中，我将通过使用SQL获取数据来完成仪表板的创建。</p><blockquote class="kz la lb"><p id="82eb" class="lc ld le lf b lg lh jv li lj lk jy ll lm ln lo lp lq lr ls lt lu lv lw lx ly in bi translated"><strong class="lf iv">连接数据库</strong></p></blockquote><p id="ec2d" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">本文中的演示使用了一个名为“sqlda”的包含客户和销售数据的SQL数据库。这是一个postgres数据库。Sqlalchemy用于创建连接和获取表。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mc md l"/></div></figure><p id="0b7d" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">从python接口调用常规的SQL查询来获取数据。首先，我们需要知道数据库中所有表的名称。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj me"><img src="../Images/892208b042194ec9b518feacf8ee6a93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JqOSjSrsuSJazsr8uCObtQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者图片</p></figure><p id="d145" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">似乎有几个表，但我们只对客户和销售数据感兴趣。使用常规SQL查询调用以下两个表来获取数据。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mc md l"/></div></figure><p id="4453" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">仪表板的界面可以被分割成我们想要的列数。例如，假设我们希望将顶行分成两列。左栏将显示仪表板的标题，右栏将显示当前日期和时间。</p><blockquote class="kz la lb"><p id="e3fa" class="lc ld le lf b lg lh jv li lj lk jy ll lm ln lo lp lq lr ls lt lu lv lw lx ly in bi translated"><strong class="lf iv">仪表盘配置</strong></p></blockquote><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mc md l"/></div></figure><p id="cef9" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">我们还可以在两个streamlit占位符中显示客户总数和销售额。侧边栏可以用来过滤数据。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mc md l"/></div></figure><p id="6944" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">为自定义绘图定义了条形图、饼图和其他必要的时间序列图。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mc md l"/></div></figure><p id="3a5e" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">为了绘制一个互动的情节，我使用了plotly express。当用户将光标悬停在绘图上时，它可以显示相关数据。出于演示的目的，我使用了美国州地图，然后使用由彩色多边形组成的cloropleth地图将州数据与地图关联起来。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mc md l"/></div></figure><p id="140c" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">然后，我们向仪表板添加更多的行，以可视化的形式显示更多的数据。有一点可以注意到，我们可以在python的这个接口内部执行SQL查询。我已经执行了两个SQL表的内部连接，并提取了要绘制的数据。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mc md l"/></div></figure><blockquote class="kz la lb"><p id="9753" class="lc ld le lf b lg lh jv li lj lk jy ll lm ln lo lp lq lr ls lt lu lv lw lx ly in bi translated"><strong class="lf iv">最终仪表板</strong></p></blockquote><p id="9c5b" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">整个代码块用。py扩展名。在anaconda promt中，默认目录被更改为。py文件并执行以下命令，其中<em class="le"> Streamlit-01.py </em>是文件名。</p><blockquote class="mf"><p id="2b39" class="mg mh iu bd mi mj mk ml mm mn mo ly dk translated">细流运行细流-01.py</p></blockquote><p id="4bed" class="pw-post-body-paragraph lc ld iu lf b lg mp jv li lj mq jy ll lz mr lo lp ma ms ls lt mb mt lw lx ly in bi translated">它将提供应用程序运行的主机地址。当到达主机地址时，将创建以下仪表板。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj mu"><img src="../Images/baf9904915ee3e5edea7f2259f892b2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LPbIKTQtONKXWCs6KJtxsQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者图片</p></figure><p id="0452" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">该地图由plotly express生成，当光标位于任何状态时，都会显示与之相关的数据。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj mv"><img src="../Images/3f5efb5bd72dd15818a5ba173300b446.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DJYzJ7afCODVogfz19CJsA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者图片</p></figure><p id="81af" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">此处显示了仪表板的其余部分。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj mw"><img src="../Images/4dbcc67af9e84ae0447de27d641e2f47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sUB41NsZD2sCG5r-RPyxVw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者图片</p></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj mx"><img src="../Images/181196ac2a112f5403e9b2c5919f6570.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x2TcuRVVupA2xFdafsyQ0Q.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者图片</p></figure><p id="d4be" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">侧边栏可以用来过滤数据。选中后，相关数据将显示在仪表板中。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj mu"><img src="../Images/d2fdb378b64ffa5c1a7c1b8aa2aaa6b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JhMlA7BjQW9TSXw5zycODQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者图片</p></figure><blockquote class="kz la lb"><p id="ba1f" class="lc ld le lf b lg lh jv li lj lk jy ll lm ln lo lp lq lr ls lt lu lv lw lx ly in bi translated"><strong class="lf iv">结论</strong></p></blockquote><p id="2f20" class="pw-post-body-paragraph lc ld iu lf b lg lh jv li lj lk jy ll lz ln lo lp ma lr ls lt mb lv lw lx ly in bi translated">在本文中，我演示了使用streamlit创建交互式仪表板。从SQL数据库获取数据，并执行SQL查询以获得感兴趣的数据。Plotly express是一种动态可视化数据的好方法。streamlit与sql和plotly express的结合确实可以增强仪表板的健壮性。</p></div></div>    
</body>
</html>