<html>
<head>
<title>The simplest way to Build REST API with Falcon and Python 3.10: Application in Spatial Geometry</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Falcon和Python 3.10构建REST API最简单的方法:在空间几何中的应用</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-simplest-way-to-build-a-rest-api-with-falcon-and-python-3-10-application-in-spatial-geometry-c1ee305aed75?source=collection_archive---------22-----------------------#2021-08-12">https://towardsdatascience.com/the-simplest-way-to-build-a-rest-api-with-falcon-and-python-3-10-application-in-spatial-geometry-c1ee305aed75?source=collection_archive---------22-----------------------#2021-08-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="3fc3" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a></h2><div class=""/><div class=""><h2 id="d036" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">通过对机器人学的应用理解Python 3中的数据操作和编程接口:计算带有猎鹰、Gunicorn和失眠的三维系统中两点之间的欧几里德距离。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/e68b42d0cbb49095350d3d0ad1de6fb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y72N2ldDY4XhWu4Y"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">由<a class="ae le" href="https://unsplash.com/@tvick?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">泰勒维克</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="c910" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在远程服务器上用Python部署REST API可能是制作功能性应用程序的一个困难步骤。本文的目的是提出一个极其简化的Falcon模块配置代码，特别是对于希望使用远程计算工具的web编程初学者。尽管您对Python 3有基本的了解，但在10分钟内，您的第一台服务器就可以运行了。为了让这篇文章更有吸引力，让我们来看一个真实的问题，在空间中定位并计算三维参照系中两点之间的距离。在建模或机器人项目的环境中很有用，下面的程序将允许在远程机器上应用数学定理后，接收JSON请求，并以相同的格式发送响应，该机器配备有Python 3.10环境和更新的库。</p><p id="9464" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">建议</strong></p><p id="b334" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">与Python 3.10的兼容性测试，在MacOS 11.5.1和Linux Ubuntu Server 20.04 LTS环境下执行。</p><p id="d898" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">使用的库:Falcon，Gunicorn，Math，Json。</p><pre class="kp kq kr ks gt mb mc md me aw mf bi"><span id="fb1b" class="mg mh iq mc b gy mi mj l mk ml">pip3 install falcon gunicorn</span></pre><p id="ab3e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">源代码将首先观察其执行所必需的库的存在，然后在不存在的情况下下载它们，以便自动更新执行环境的软件配置。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="0570" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为了使程序在最少人工干预的情况下可执行，并优化其在服务器上的部署，已经实现了升级、数据下载和异常处理的自治，特别是在server_SMTP类中。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="65d5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">首先，有必要在系统未使用的监听端口上初始化我们的Gunicorn服务器，在我们的例子中，端口5000似乎是一个完美的候选端口，应该不会造成任何不便。为此，请在终端窗口中输入以下命令:</p><pre class="kp kq kr ks gt mb mc md me aw mf bi"><span id="fc92" class="mg mh iq mc b gy mi mj l mk ml">gunicorn -b 0.0.0:5000 main — reload</span></pre><blockquote class="mo mp mq"><p id="a459" class="lf lg mr lh b li lj ka lk ll lm kd ln ms lp lq lr mt lt lu lv mu lx ly lz ma ij bi translated">注:为执行Gunicorn，将文件命名为main.py是很重要的，不同的名称将导致异常，并且将无法到达服务器启动。</p></blockquote><p id="881a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">然后，您必须在main.py文件中配置应用程序，使用一组指向Falcon库的变量。</p><pre class="kp kq kr ks gt mb mc md me aw mf bi"><span id="5da7" class="mg mh iq mc b gy mi mj l mk ml">api = app = application = falcon.API()</span></pre><p id="42b5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">从这一点开始，您依赖于Falcon的语法，特别是在处理。有关猎鹰的更多信息，请访问图书馆网站(<a class="ae le" href="https://falcon.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank">https://Falcon . readthedocs . io</a>)。例如，要解释JSON格式的请求，必须使用“stream”类:</p><pre class="kp kq kr ks gt mb mc md me aw mf bi"><span id="5bff" class="mg mh iq mc b gy mi mj l mk ml">request = json.loads(req.stream.read())</span></pre><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="ebb9" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为了测试我们的服务器的响应和程序的正确执行，我们将使用一个开源API客户端失眠症。</p><div class="mv mw gp gr mx my"><a href="https://insomnia.rest" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab fo"><div class="na ab nb cl cj nc"><h2 class="bd ja gy z fp nd fr fs ne fu fw iz bi translated">API设计平台和API客户端</h2><div class="nf l"><h3 class="bd b gy z fp nd fr fs ne fu fw dk translated">如果你还在用postman进行手动REST/GraphQL API测试，我可以强烈推荐改用@GetInsomnia…</h3></div><div class="ng l"><p class="bd b dl z fp nd fr fs ne fu fw dk translated">失眠。休息</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm ky my"/></div></div></a></div><p id="59eb" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">软件启动后，在左侧窗格的下拉菜单中将方法设置为“POST ”,然后插入服务器的目标URL。在我们的案例中:</p><pre class="kp kq kr ks gt mb mc md me aw mf bi"><span id="e5d2" class="mg mh iq mc b gy mi mj l mk ml"><a class="ae le" href="http://0.0.0.0:5000/DistanceProcessing" rel="noopener ugc nofollow" target="_blank">http://0.0.0.0:5000/DistanceProcessing</a></span></pre><p id="e4fb" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">最后一步是制定我们的JSON查询。对于我们的例子，我们将在“body”中发送一个列表列表，包含一个三维框架中的两个点的坐标。同时:【B点x位置，B点y位置，B点z位置】和【A点x位置，A点y位置，A点z位置】。</p><pre class="kp kq kr ks gt mb mc md me aw mf bi"><span id="6c6b" class="mg mh iq mc b gy mi mj l mk ml">{<br/> “body”: [[0, 0, 1], [1.5, 2.5, 1.20]]<br/>}</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nn"><img src="../Images/c8075c4e7d0ffad2486c3c8c7c600175.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C9PIUKp5wvVyjrpKOqSJiw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">关于失眠的JSON请求和响应的编写示例。</p></figure><p id="92ae" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们考虑机器人学中的一个应用，其中物体在空间中的定位可能是一个基本功能。如果我们允许要定位的物体具有接近三维参考系的坐标，则要应用的公式保持简单:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi no"><img src="../Images/2325736111c294bca1184dabaa2f476b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KAf-8HYQK7opdePhSCBKFg.png"/></div></div></figure><p id="f0e1" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在编程层面上，可以编写一个简单的函数，允许应用上述公式:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="f199" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">对于POST方法返回的响应，我们将使用标准状态200和Json库的“dumps”函数。</p><blockquote class="mo mp mq"><p id="ec33" class="lf lg mr lh b li lj ka lk ll lm kd ln ms lp lq lr mt lt lu lv mu lx ly lz ma ij bi translated">API的构造可用于许多应用程序，您现在已经了解了其开发的基础，这一介绍允许您构建您的第一个架构，尤其是在创建专用于机器学习或远程计算的编程接口方面。</p></blockquote><p id="ea38" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">Louis Brulé Naudet拥有巴黎萨克莱大学的法律和经济学/管理学双学位。</p><div class="mv mw gp gr mx my"><a href="https://louisbrulenaudet.com" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab fo"><div class="na ab nb cl cj nc"><h2 class="bd ja gy z fp nd fr fs ne fu fw iz bi translated">路易·布鲁莱·诺代</h2><div class="nf l"><h3 class="bd b gy z fp nd fr fs ne fu fw dk translated">Clover和Lemone共同基金会，商务和财政法专业，程序设计界面概念…</h3></div><div class="ng l"><p class="bd b dl z fp nd fr fs ne fu fw dk translated">louisbrulenaudet.com</p></div></div><div class="nh l"><div class="np l nj nk nl nh nm ky my"/></div></div></a></div></div></div>    
</body>
</html>