<html>
<head>
<title>Why ETL Needs Open Source to Address the Long Tail of Integrations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么ETL需要开源来解决集成的长尾问题</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/why-etl-needs-open-source-to-address-the-long-tail-of-integrations-5394c058c326?source=collection_archive---------23-----------------------#2021-07-02">https://towardsdatascience.com/why-etl-needs-open-source-to-address-the-long-tail-of-integrations-5394c058c326?source=collection_archive---------23-----------------------#2021-07-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="29f2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">去年，我们的团队采访了200多家公司，了解他们的数据集成用例。我们发现的是，2021年的数据整合还是一塌糊涂。</h2></div><h1 id="c7c4" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">不可逾越的现状</h1><p id="ebb5" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在200次采访中，至少有80次采访了现有ETL技术的用户，如Fivetran、StitchData和Matillion。我们发现他们每个人都在构建和维护他们自己的连接器，即使他们使用的是ETL解决方案(或者ELT解决方案——为了简单起见，我只使用术语ETL)。为什么？</p><p id="7072" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">我们发现了两个原因:</p><ol class=""><li id="2f8a" class="ly lz iq kz b la lt ld lu lg ma lk mb lo mc ls md me mf mg bi translated">连接器的不完全覆盖</li><li id="7918" class="ly lz iq kz b la mh ld mi lg mj lk mk lo ml ls md me mf mg bi translated">围绕数据库复制的重大摩擦</li></ol><h2 id="1c5a" class="mm kg iq bd kh mn mo dn kl mp mq dp kp lg mr ms kr lk mt mu kt lo mv mw kv mx bi translated">无法满足所有连接器需求</h2><p id="c3ad" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">许多用户的ETL解决方案不支持他们想要的连接器，或者支持但不是以他们需要的方式。</p><p id="3aee" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">举个例子:Fivetran已经存在了八年，支持150个连接器。然而，仅在martech和adtech这两个领域，就有超过10，000种潜在连接器。</p><p id="88f8" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">ETL最难的部分不是构建连接器，而是维护它们。这是昂贵的，并且任何闭源解决方案都受到ROI(投资回报)考虑的限制。因此，ETL供应商关注最流行的集成，然而公司每个月使用越来越多的工具，连接器的长尾被忽略了。</p><p id="3c71" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">因此，即使使用ETL工具，数据团队仍然要投入大量的金钱和时间来构建和维护内部连接器。</p><h2 id="985d" class="mm kg iq bd kh mn mo dn kl mp mq dp kp lg mr ms kr lk mt mu kt lo mv mw kv mx bi translated">无法解决数据库复制用例</h2><p id="8e26" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">大多数公司将数据存储在数据库中。我们的采访揭示了现有ETL提供的数据库连接器的两个重要问题。</p><ol class=""><li id="e656" class="ly lz iq kz b la lt ld lu lg ma lk mb lo mc ls md me mf mg bi translated"><strong class="kz ir">基于容量的定价:</strong>数据库非常庞大，并且服务于不断增长的数据量。拥有数百万行的数据库，目标是服务于数亿行，这是常见的情况。当前ETL解决方案的问题是基于数量的定价。员工只需点击一下鼠标，就可以轻松复制一个数百万行的数据库。而这个简单的点击可能要花费几千美元！</li><li id="e1fe" class="ly lz iq kz b la mh ld mi lg mj lk mk lo ml ls md me mf mg bi translated"><strong class="kz ir">数据隐私:</strong>随着当今对隐私和安全的关注，公司越来越重视对数据的控制。现有ETL解决方案的架构通常会将数据从公司的私有云中提取出来。闭源产品阻止公司仔细检查底层ETL代码/系统。能见度降低意味着信任度降低。</li></ol><p id="6534" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">这两点解释了为什么公司最终要建立额外的内部数据库复制管道。</p><h2 id="1b43" class="mm kg iq bd kh mn mo dn kl mp mq dp kp lg mr ms kr lk mt mu kt lo mv mw kv mx bi translated">无法随数据扩展</h2><p id="cf47" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">上面提到的关于基于数量的定价和数据隐私的两点也适用于公司规模。对于公司来说，拥有一个内部的数据工程师团队来构建ETL解决方案中维护的完全相同的管道变得更加便宜。</p><h1 id="38a9" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">为什么开源是唯一的出路</h1><p id="e7c2" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">开源解决了上面提到的许多问题。这就是开源带给我们的。</p><ul class=""><li id="e9b2" class="ly lz iq kz b la lt ld lu lg ma lk mb lo mc ls my me mf mg bi translated"><strong class="kz ir">定制的权利:</strong>访问并能够根据自己的需要编辑代码是开源软件带来的一项特权。例如，如果Salesforce连接器缺少您需要的一些数据，该怎么办？有了开源，这样的改变就像提交代码改变一样简单。支持票上不再有长线程！</li><li id="523f" class="ly lz iq kz b la mh ld mi lg mj lk mk lo ml ls my me mf mg bi translated"><strong class="kz ir">解决连接器的长尾问题:</strong>您不再需要说服一个专有的ETL提供者您需要的连接器是值得构建的。如果您需要一个比平台开发速度更快的连接器，您可以自己构建它，并在大型用户社区的帮助下维护它。</li><li id="90c9" class="ly lz iq kz b la mh ld mi lg mj lk mk lo ml ls my me mf mg bi translated"><strong class="kz ir">与数据工具和工作流更广泛的集成:</strong>因为开源产品必须支持各种各样的堆栈和工作流，用于编排、部署、托管等。，您更有可能找到对您的数据堆栈和工作流的现成支持(基于UI、基于API、基于CLI等。)和一个开源社区。其中一些，如Airbyte的开源气流运营商，是由社区贡献的。公平地说，理论上你可以用闭源方法做到这一点，但是你可能需要从头开始构建很多工具。</li><li id="13a1" class="ly lz iq kz b la mh ld mi lg mj lk mk lo ml ls my me mf mg bi translated"><strong class="kz ir">调试自治:</strong>如果您遇到任何连接器问题，您不需要等待客户支持团队回复您，也不需要等待第三方公司优先考虑您的修复。您可以自己解决问题。</li><li id="9b22" class="ly lz iq kz b la mh ld mi lg mj lk mk lo ml ls my me mf mg bi translated"><strong class="kz ir">现成的安全性和隐私合规性</strong>。如果开源项目足够开放(MIT，Apache 2.0等。)，任何团队都可以通过在其基础设施中部署开源代码来直接解决他们的集成需求。</li></ul><h1 id="c6f8" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">连接器开发套件的必要性</h1><p id="5399" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">但是，开源本身不足以解决数据集成问题。这是因为创建一个强大且功能齐全的连接器的门槛太高了。</p><p id="3bbe" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">例如，考虑一个从REST API提取数据的脚本。</p><p id="a48e" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">从概念上讲，这是对数据库中的一些数据进行简单的“SELECT * FROM entity”查询，可能带有“WHERE”子句，以便根据某些标准进行过滤。但是任何编写过脚本或连接器来持续可靠地执行这项任务的人都知道这要复杂得多。</p><p id="659b" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">首先是身份验证，它可以像用户名/密码一样简单，也可以像实现整个OAuth流程一样复杂(并安全地存储和管理这些凭证)。</p><p id="c08e" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">我们还需要维护脚本运行之间的状态，这样我们就不会一遍又一遍地重读相同的数据。</p><p id="8ed5" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">之后，我们需要处理速率限制并重试间歇性错误，确保不要将它们与无法重试的真正的<em class="mz">错误混淆。</em></p><p id="42bd" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">然后，我们希望将数据转换成适合下游消费者的格式，同时执行足够的日志记录，以便在事情不可避免地出错时修复问题。</p><p id="707b" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">哦，所有这些都需要经过良好的测试，易于部署…当然，昨天就完成了。</p><p id="0cc2" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">总而言之，目前构建一个新的REST API源连接器需要几天的时间。这种进入壁垒不仅意味着社区创建的连接器更少，而且通常意味着连接器质量更低。</p><p id="2dd1" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">然而，我们认为80%的困难是偶然的，并且大部分可以自动消除。缩短实现时间将极大地帮助社区做出贡献，并解决连接器的长尾问题。如果这种自动化以一种聪明的方式完成，我们也可能能够提高标准化，从而对所有连接器的维护做出贡献。</p><h1 id="4bf7" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">连接器开发工具包是什么样子的</h1><p id="f8b5" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">让我们从一个不同的角度再次看看构建连接器所涉及的工作。</p><p id="3fc0" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">附带复杂性:</p><ul class=""><li id="2949" class="ly lz iq kz b la lt ld lu lg ma lk mb lo mc ls my me mf mg bi translated">设置包装结构</li><li id="1fd2" class="ly lz iq kz b la mh ld mi lg mj lk mk lo ml ls my me mf mg bi translated">将连接器封装在Docker容器中并建立释放管道</li></ul><p id="273b" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">大量重复的逻辑:</p><ul class=""><li id="2177" class="ly lz iq kz b la lt ld lu lg ma lk mb lo mc ls my me mf mg bi translated">为每种连接器类型(REST APIs、数据库、仓库、Lakes等)重新设计相同的设计模式和代码结构。)</li><li id="0887" class="ly lz iq kz b la mh ld mi lg mj lk mk lo ml ls my me mf mg bi translated">编写相同的帮助器，用于将数据转换为标准格式、实现增量同步、日志记录、输入验证等。</li><li id="2beb" class="ly lz iq kz b la mh ld mi lg mj lk mk lo ml ls my me mf mg bi translated">测试连接器是否正确遵守协议。</li></ul><p id="331b" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">测试<a class="ae na" href="https://en.wikipedia.org/wiki/Happy_path" rel="noopener ugc nofollow" target="_blank">快乐流</a>和边缘案例。</p><p id="14b7" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">你可以看到很多都可以自动化，并且你会很高兴知道Airbyte已经提供了一个开源连接器开发工具包(CDK)来完成所有这些。</p><p id="4731" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">我们相信，最终，<a class="ae na" href="https://airbyte.io/articles/data-engineering-thoughts/how-to-build-thousands-of-connectors/" rel="noopener ugc nofollow" target="_blank">打造数以千计高质量连接器的方法是在洋葱层中思考。</a>为了与devo PS/基础设施中众所周知的<a class="ae na" href="https://www.hava.io/blog/cattle-vs-pets-devops-explained" rel="noopener ugc nofollow" target="_blank">宠物/牛</a>概念进行比较，连接器是牛代码，您希望在它上面花费尽可能少的时间。这将极大地提高生产率。</p><h1 id="3946" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">抽象为洋葱层</h1><p id="ed32" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">最大限度地利用高杠杆工作会引导您构建具有洋葱式结构的架构:</p><figure class="nc nd ne nf gt ng gh gi paragraph-image"><div role="button" tabindex="0" class="nh ni di nj bf nk"><div class="gh gi nb"><img src="../Images/bcaf34ddeb9605a4cda5a8f03c70c990.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RC4To8ZIDr-DHKQU.png"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated"><em class="nr">来源:作者</em></p></figure><p id="90da" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">该中心定义了API的最低级别。在那个级别实现一个连接器需要大量的工程时间。但它是非常复杂的连接器的逃生出口，需要大量的控制。</p><p id="1ac1" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">然后，构建新的抽象层，帮助快速处理连接器系列。例如，源具有特定的接口，而目的地具有不同种类的接口。</p><ol class=""><li id="9d9d" class="ly lz iq kz b la lt ld lu lg ma lk mb lo mc ls md me mf mg bi translated">用于编写源连接器的Python框架</li><li id="bc51" class="ly lz iq kz b la mh ld mi lg mj lk mk lo ml ls md me mf mg bi translated">快速开发HTTP APIs连接器的通用实现</li><li id="5f1c" class="ly lz iq kz b la mh ld mi lg mj lk mk lo ml ls md me mf mg bi translated">一个测试套件，用于测试是否符合Airbyte协议和happy代码路径</li><li id="bc64" class="ly lz iq kz b la mh ld mi lg mj lk mk lo ml ls md me mf mg bi translated">用于引导开发和打包连接器的代码生成器</li></ol><p id="78a7" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">然后，对于源，您有不同的种类，如基于HTTP-API的连接器和数据库。HTTP连接器可以分为REST、GraphQL和SOAP，而数据库可以分为关系数据库、NoSQL数据库和图形数据库。目的地可以分成仓库、数据湖和API(用于反向ELT)。</p><p id="447a" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">CDK是这些抽象的框架！</p><h1 id="4c80" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">什么是已经可用的</h1><p id="b47b" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">Airbyte的CDK仍处于早期阶段，因此预计随着时间的推移会有很多改进。如今，该框架具有以下特性:</p><p id="2cfc" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">最终，CDK能够在两个小时内构建强大的全功能连接器<strong class="kz ir">,而以前需要两天。</strong></p><p id="84eb" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">Airbyte团队一直在内部使用该框架开发连接器，这是我们开发70多个连接器的经验的顶峰(我们的目标是在用户社区的帮助下，到今年年底开发200个连接器！).我们从自身经验和用户社区中学到的一切都将用于改进CDK。</p><h1 id="4e4c" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">结论——未来</h1><p id="eed2" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">将构建一个新连接器所需的时间缩短到10分钟，并扩展到越来越多的可能集成系列，这不是很好吗？这是怎样的一个登月计划！</p><p id="6815" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">如果我们能够和我们的用户社区一起做到这一点，那么最终集成的长尾问题将会很快得到解决！更不用说数据集成管道将通过开源被商品化</p><p id="89fc" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">如果你想参与进来，我们希望你加入我们的<a class="ae na" href="https://slack.airbyte.io" rel="noopener ugc nofollow" target="_blank"> Slack社区</a>——围绕数据集成最活跃的社区——因为我们为了所有人的利益连接到开源的未来！</p></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><p id="36c5" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated"><em class="mz">最初发布于</em><a class="ae na" href="https://airbyte.io/blog/why-etl-needs-open-source-to-address-the-long-tail-of-integrations" rel="noopener ugc nofollow" target="_blank"><em class="mz">https://airbyte . io</em></a><em class="mz">。</em></p></div></div>    
</body>
</html>