<html>
<head>
<title>Compute cost and environmental impact of Deep Learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">深度学习的计算成本和环境影响</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/compute-and-environmental-costs-of-deep-learning-83255fcabe3c?source=collection_archive---------13-----------------------#2021-03-21">https://towardsdatascience.com/compute-and-environmental-costs-of-deep-learning-83255fcabe3c?source=collection_archive---------13-----------------------#2021-03-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="546f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一个衡量成本(美元)和二氧化碳排放量(磅)的框架</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/776c5dd016debc98a9055dff81f5e1ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jdb4EgjoMEH-b-1BwLleow.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Holyoke大坝为马萨诸塞州绿色高性能计算中心提供水力发电。美国公共电力协会在<a class="ae kv" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="fc30" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用于训练最先进的深度学习模型的计算继续呈指数增长，远远超过了摩尔定律的速度。但是它的成本是多少，对环境有什么影响？我将在这篇文章中描述一种近似的方法，这篇文章是文献[1]和[2]的总结。</p><h1 id="fae0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">目标</h1><ul class=""><li id="2ef9" class="mk ml iq ky b kz mm lc mn lf mo lj mp ln mq lr mr ms mt mu bi translated">估算<strong class="ky ir">培训</strong>众所周知的NLP模型的云计算成本和碳排放。</li><li id="b15f" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">估计新的最先进的DL模型所需的云计算成本和碳排放。</li><li id="a166" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">将碳排放与普通基准进行比较，如人类平均寿命1年或汽车寿命。</li></ul><h1 id="095c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">非目标</h1><ul class=""><li id="62cb" class="mk ml iq ky b kz mm lc mn lf mo lj mp ln mq lr mr ms mt mu bi translated">我们不包括向用户提供DL型号的服务成本。除了交通之外，它们还取决于所服务的地理区域。此外，我们不包括网络和数据存储成本，以及研究人员的工资。</li><li id="0b7f" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">功率和计算效率取决于GPU的类型。更高效的硬件开发(如Google Cloud上提供的TPU)是一个活跃的研究领域。</li></ul><h1 id="f567" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">能源使用估算</strong></h1><p id="377e" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">总功耗可以估计为CPU、内存和GPU功耗之和。[1]的作者通过使用他们的开源代码训练每个模型，使用nvidia-smi和英特尔电源管理接口等常用工具对CPU、内存和GPU功耗进行采样和平均来测量。g是使用的GPU数量。</p><p id="8942" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">训练模型所需的时间取自原始论文。</p><p id="3eae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">1.58是电力使用效率系数(1.58是2018年全球数据中心报告的平均值)。这个乘数因子包括运行模型所需的所有其他能量，主要是冷却。这是可以优化的，例如，谷歌报告其数据中心的PUE 1.1。</p><p id="93a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将瓦特小时除以1000得到千瓦时。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/56553e8a3f9d759bcc2f28536618ea4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TDM3UN4hKRiSJUd47MnfRg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">等式计算训练期间的功耗。图片来自[2]</p></figure><h1 id="9f3a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">二氧化碳估算</h1><p id="48ac" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">美国环境保护署(EPA)报告称，美国电力消耗产生的平均二氧化碳(单位:磅/千瓦时)(EPA 2018)为:0.954。由于主要的云提供商在可再生能源领域拥有更高的份额，我们将把这个数字减半。在谷歌的案例中，它将接近0，因为它是一个大量使用可再生能源的用户，并且通过购买绿色能源来抵消碳排放。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/f3d3b162254849844c8e55bb536c960c.png" data-original-src="https://miro.medium.com/v2/resize:fit:468/format:webp/1*rXljXQc__AQRmSMV1T1nEw.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/176711a530f27c1b3fbd916862a17c1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*r2HuRK1n4G4MAEG6MZvaqQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">各国的可再生能源消耗与云提供商</p></figure><h1 id="aa36" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">估价</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/58f4ee98b7f935c478b606b574b4bf6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W9jn3RQBuac453cy_qVMLg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">先发制人和按需成本的GPU和TPU使用她从谷歌小时。TPU每小时的成本更高，但对于适合该硬件的工作负载来说，其成本和能效更高。</p></figure><h1 id="d5dc" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结果</h1><p id="09cd" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">[1]的作者选择了众所周知的深度学习模型:Transformer、ELMo、BERT和GPT-2，以及使用神经架构搜索思想训练多个模型以找到最佳配置的Evolved Transformer。NAS可以估算整个研发周期的计算成本，以找到一种新的先进模式。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/1b2e31a362e53cdf4e4ee722fd54c4e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eMZDmIRvi6G57AnHkuI1jQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">本研究中使用的5种模型。提供的是高级架构、使用的硬件、模型方面和培训时间。图片来自[2]</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/d2eb4e5ae42b5daa57b5e925ebcc6001.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bS8dLw9IhkGFGXgxjYy0Iw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">二氧化碳排放和一些众所周知的深度学习模型的训练的货币成本。TPU的成本效率要高得多(就NAS而言，从4.4万美元到14.6万美元，而不是几百万美元)，而且可能更节能。</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/b05671f198d229a96fb71626ac558629.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3EqEOAHmtr-hY2wnknjQ4Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">模拟训练二氧化碳消耗量与通用基准。图片来自[2]</p></figure><h1 id="78d3" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">离别的思绪</h1><p id="1f5b" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">现代ML训练(和推论，不在本文讨论范围内)导致大量的碳排放和金钱成本。ARK Invest等金融分析师预测，深度学习的市值将从2020年的2万亿美元增长到2037年的30万亿美元[3]。</p><p id="0957" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇文章中，我想提供一些量化排放和成本的框架。当特雷弗·诺亚问格里塔·图恩伯格人们可以做些什么来应对气候变化时，她建议最重要的事情是通知自己，了解情况，并最终推动一场政治运动。</p><p id="7568" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就个人而言，我致力于将模型做得更小以适应移动设备(这对于减少延迟有额外的好处！)、训练多任务模型、多语言模型、报告记忆模型大小和失败(这可以很容易地在Tensorflow [7]中进行分析)以及密切关注在训练的早期阶段没有显示出有希望的结果的工作。</p><h1 id="e28a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">参考</h1><p id="c13a" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">[1]斯特鲁贝尔，e .，甘内什，a .，&amp;麦卡勒姆，A. (2020)。现代深度学习研究的能源和政策考虑。AAAI人工智能会议论文集，<em class="nk"> 34 </em> (09)，13693–13696。【https://doi.org/10.1609/aaai.v34i09.7123 T4】</p><p id="03eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[2]斯特鲁贝尔，e .，加内什，a .，&amp;麦卡勒姆，A. (2019)。自然语言处理中深度学习的能源和政策考虑。<a class="ae kv" href="https://arxiv.org/abs/1906.02243" rel="noopener ugc nofollow" target="_blank">https://arxiv.org/abs/1906.02243</a></p><p id="17f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[3]<a class="ae kv" href="https://research.ark-invest.com/hubfs/1_Download_Files_ARK-Invest/White_Papers/ARK%E2%80%93Invest_BigIdeas_2021.pdf" rel="noopener ugc nofollow" target="_blank">https://research . ARK-Invest . com/hub fs/1 _ Download _ Files _ ARK-Invest/White _ Papers/ARK % E2 % 80% 93 Invest _ big ideas _ 2021 . pdf</a></p><p id="7be8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[4]<a class="ae kv" href="https://youtu.be/rhQVustYV24?t=303" rel="noopener ugc nofollow" target="_blank">https://youtu.be/rhQVustYV24?t=303</a></p><p id="69c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[5]<a class="ae kv" href="http://www.cis.upenn.edu/~bcpierce/papers/carbon-offsets.pdf" rel="noopener ugc nofollow" target="_blank">http://www . cis . upenn . edu/~ BC pierce/papers/carbon-offsets . pdf</a></p><p id="3f4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[6]<a class="ae kv" href="https://cloud.google.com/blog/topics/sustainability/sharing-carbon-free-energy-percentage-for-google-cloud-regions" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/blog/topics/sustainability/sharing-carbon-free-energy-percentage-for-Google-cloud-regions</a></p><p id="b7d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[7]<a class="ae kv" href="https://www.tensorflow.org/api_docs/python/tf/compat/v1/profiler/ProfileOptionBuilder" rel="noopener ugc nofollow" target="_blank">https://www . tensor flow . org/API _ docs/python/TF/compat/v1/profiler/profile option builder</a></p></div></div>    
</body>
</html>