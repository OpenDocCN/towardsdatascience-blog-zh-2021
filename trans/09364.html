<html>
<head>
<title>What Is Currying in Programming?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编程中的Currying是什么？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/what-is-currying-in-programming-56fd57103431?source=collection_archive---------4-----------------------#2021-08-31">https://towardsdatascience.com/what-is-currying-in-programming-56fd57103431?source=collection_archive---------4-----------------------#2021-08-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bbff" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用奉承给你的代码增添情趣</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9024491ea1b3d00a0f884215e6d07018.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VhHfDwn-BVIAsBve"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@smagbrelle?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">凌敏</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="febb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在学习函数式编程时，我发现了许多新概念，比如纯函数、高阶函数和currying。奉承真的引起了我的注意，我很惊讶我从来没有听说过它。</p><p id="ef50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将尝试解释currying的概念、它的用例，以及如何用JavaScript和Python实现它。</p><h1 id="b298" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">什么是Currying？</h1><p id="9c23" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">首先，让我澄清一些事情。<strong class="lb iu"> <em class="ms">库里</em></strong><em class="ms"/>这个词来源于数学家<strong class="lb iu">哈斯克尔<em class="ms">库里</em> </strong>的名字，而不是香料。很好。</p><p id="5d84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Currying是将具有多个参数的函数转换成一系列单参数函数。这意味着将一个像这样的函数转换成一个像这样的函数。</p><p id="1e27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你知道Python的<code class="fe mt mu mv mw b">functools.partial</code>，那么这个和它很像。这等同于对所有参数连续应用偏导数。</p><h2 id="9ba1" class="mx lw it bd lx my mz dn mb na nb dp mf li nc nd mh lm ne nf mj lq ng nh ml ni bi translated">例子</h2><p id="8901" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果我们考虑以下函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="6aed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过给它传递两个参数来调用它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="a15a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个函数的“简化”版本是这样调用的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="6920" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以这样从头定义它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="b049" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们甚至可以做一个很棒的一句俏皮话:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="d159" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这相当于:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="ecd6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者我们可以使用函数包装器:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h1 id="6be4" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">但是我们为什么要这么做呢？</h1><p id="fccf" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">奉承在许多情况下都很方便。它可以帮助代码更加易读和简洁。</p><h2 id="a7fa" class="mx lw it bd lx my mz dn mb na nb dp mf li nc nd mh lm ne nf mj lq ng nh ml ni bi translated">示例1:频繁的函数调用</h2><p id="51ed" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">当你需要频繁调用一个带有固定参数的函数时，Currying是很有用的。</p><p id="3a42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，考虑下面的函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="8e48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们想要定义函数<code class="fe mt mu mv mw b">error</code>、<code class="fe mt mu mv mw b">warn</code>和<code class="fe mt mu mv mw b">info</code>，对于每种类型，我们有两个选项。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="c90b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Currying提供了一个更短、更简洁、可读性更强的解决方案。</p><h2 id="a6b0" class="mx lw it bd lx my mz dn mb na nb dp mf li nc nd mh lm ne nf mj lq ng nh ml ni bi translated">示例#2:累积和</h2><p id="c4ae" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">假设我们想得到一个数组的累加和。</p><pre class="kj kk kl km gt nl mw nm nn aw no bi"><span id="bc83" class="mx lw it mw b gy np nq l nr ns"><strong class="mw iu">input:</strong>  [5, 23, 6, 8, 34]<br/><strong class="mw iu">output:</strong> [5, 28, 34, 42, 76]</span></pre><p id="15a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用curry，我们可以使用带有curry函数的<code class="fe mt mu mv mw b">map</code>方法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="3299" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mt mu mv mw b">cumSum(sum)</code>将<code class="fe mt mu mv mw b">value</code>加到<code class="fe mt mu mv mw b">sum</code>上并返回。为了更好地理解这是如何工作的，让我们将它分解到每一个呼叫。在<code class="fe mt mu mv mw b">cumSum(0)</code>调用之后，<code class="fe mt mu mv mw b">sum</code>的值(为0)被更改为<code class="fe mt mu mv mw b">5</code>。在调用数组中的第二项时，使用<code class="fe mt mu mv mw b">cumSum(5)</code>，依此类推。</p><p id="54d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个例子中，cumSum是一个可定制的函数。</p><h1 id="8975" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">如何实现任何功能</h1><h2 id="a917" class="mx lw it bd lx my mz dn mb na nb dp mf li nc nd mh lm ne nf mj lq ng nh ml ni bi translated">涂抹包装纸</h2><p id="6c16" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这是一个curry包装器，它将<code class="fe mt mu mv mw b">func</code>转换成一个<em class="ms">curred</em>函数<em class="ms">。</em></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="b4e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个包装器的工作方式很简单。<code class="fe mt mu mv mw b">curried</code>功能有两种情况。</p><ol class=""><li id="f037" class="nt nu it lb b lc ld lf lg li nv lm nw lq nx lu ny nz oa ob bi translated">如果<code class="fe mt mu mv mw b">args.length &gt;= func.length</code>:传递的参数个数大于或等于<code class="fe mt mu mv mw b">func</code>的参数个数。在这种情况下，我们只调用带有参数的<code class="fe mt mu mv mw b">func</code>。</li><li id="8789" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">否则，递归地返回一个调用<code class="fe mt mu mv mw b">curried</code>函数的新函数，同时连接传递的参数和它的参数。</li></ol><p id="3d18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个定义的一个副作用是可以不依赖或部分依赖地使用函数。以下调用都是有效的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="bddb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是类固醇上的<em class="ms">偏激</em>。</p><h2 id="9375" class="mx lw it bd lx my mz dn mb na nb dp mf li nc nd mh lm ne nf mj lq ng nh ml ni bi translated">Lodash和下划线</h2><p id="0a01" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果你用<code class="fe mt mu mv mw b">lodash</code>或<code class="fe mt mu mv mw b">underscore</code>工作，那么涂抹很容易使用。简单用<code class="fe mt mu mv mw b">_.curry(func)</code>。仅此而已。它们也支持上面例子中的部分currying。</p><h2 id="ad96" class="mx lw it bd lx my mz dn mb na nb dp mf li nc nd mh lm ne nf mj lq ng nh ml ni bi translated">Python中的Currying</h2><p id="1a39" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们可以用Python定义一个<code class="fe mt mu mv mw b">curry</code>包装器。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="7b0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并把它作为一个装饰。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure></div><div class="ab cl oh oi hx oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="im in io ip iq"><p id="5574" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然奉承在很多情况下是有帮助的，但是注意它的局限性是很重要的。在上面的实现中，currying要求函数有固定数量的参数。这在某些情况下可能是个问题。</p><p id="cf38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Currying只是函数式编程的一个概念。你可能会对其他概念感兴趣，比如纯函数和高阶函数(包括currying)。</p><p id="ed8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大多数机器学习和数据科学库大量使用面向对象编程，我认为数据科学家尝试函数式编程会很有趣。函数式编程有助于代码的可维护性和组织，并使并行化成为世界上最容易的事情。</p></div></div>    
</body>
</html>