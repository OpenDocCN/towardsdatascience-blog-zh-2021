<html>
<head>
<title>Social Media Sentiment Analysis with VADER</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">VADER的社交媒体情感分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/social-media-sentiment-analysis-with-vader-c29d0c96fa90?source=collection_archive---------8-----------------------#2021-05-01">https://towardsdatascience.com/social-media-sentiment-analysis-with-vader-c29d0c96fa90?source=collection_archive---------8-----------------------#2021-05-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d5ee" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">测量细微文本数据的情感。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/bbc3bf37dc0f3452c38c3525b35d58e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i0AIvWAJ1Xfq0qkjBLIyLQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@prateekkatyal" rel="noopener ugc nofollow" target="_blank">普拉蒂克卡蒂亚尔</a>上<a class="ae kv" href="https://unsplash.com/photos/xv7-GlvBLFw" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="b7a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于数据科学，我们需要不同的工具来处理各种各样的数据集。在我们深入研究<strong class="ky ir">情感分析</strong>的不同方法之前，重要的是要注意它是<strong class="ky ir">自然语言处理</strong>中的一种技术。通常被称为<strong class="ky ir"> NLP </strong>，是研究计算机如何理解<strong class="ky ir">人类</strong>语言<strong class="ky ir">的研究。虽然这是一个在数据科学家中很受欢迎的专业，但它并不是行业的专属。</strong></p><p id="f7cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用<strong class="ky ir">文本数据</strong>会带来一组<strong class="ky ir">独特的问题</strong>和其他类型的数据集所没有的解决方案。通常，文本数据比其他数据类型需要更多的<strong class="ky ir">清理</strong>和<strong class="ky ir">预处理</strong>。然而，也有独特的<strong class="ky ir">探索性数据分析</strong>技术，我们可以应用于文本数据，如单词云、可视化最常见的单词等等。在这篇博客中，我们将关注<strong class="ky ir">情感分析。</strong></p><h1 id="9568" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">情绪分析</strong></h1><p id="a99d" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">情感分析是对文本文档有多少积极、消极和固执己见的分析。例如，这种技术通常用于评论数据，以了解顾客对公司产品的感受。</p><p id="debb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">文本数据的问题在于它反映了人类的语言。它是<strong class="ky ir">多样的</strong>并且不断<strong class="ky ir">进化</strong>，因此，机器学习必须不断约束基于新<strong class="ky ir">词汇</strong>的模型。例如，<strong class="ky ir">社交媒体文本</strong>极其微妙，众所周知，机器学习算法很难“理解”。</p><p id="ddeb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有许多不同的库可以帮助我们进行情感分析，但我们将关注一个对肮脏的社交媒体数据特别有效的库，<strong class="ky ir"> VADER </strong>。</p><p id="e087" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">VADER代表用于情感推理的Valance Aware字典，它是一种情感分析工具，对人类文本中情感的极性和强度都很敏感。这个词典是一个<strong class="ky ir">基于规则的系统</strong>，专门针对社交媒体数据进行训练。你可以在这里查看工具<a class="ae kv" href="https://github.com/cjhutto/vaderSentiment" rel="noopener ugc nofollow" target="_blank">的GitHub库。</a></p><h1 id="4fb7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak"> TextBlob </strong></h1><p id="8a27" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了理解这个工具的有效性，我们可以先看看TextBlob在Twitter数据上的表现。出于这个博客的目的，我将展示我最近的项目<a class="ae kv" href="https://github.com/sidneykung/twitter_hate_speech_detection" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Twitter仇恨言论检测</strong> </a>中的例子，其中的<strong class="ky ir">文本数据已经被清理</strong>。</p><blockquote class="mp mq mr"><p id="ef1d" class="kw kx ms ky b kz la jr lb lc ld ju le mt lg lh li mu lk ll lm mv lo lp lq lr ij bi translated">请注意，由于该项目的性质，本博客中的以下可视化内容包含未经审查的、露骨的和冒犯性的语言。</p></blockquote><p id="d129" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于大多数具有“<strong class="ky ir">普通</strong>”文本的自然语言处理项目，如书籍、新闻文章、电影评论等。我们通常可以使用TextBlob 。<strong class="ky ir"> TextBlob </strong>是一个库，它提供了一个简单的API来处理文本数据，包括词性数据、名词短语提取、标记化、分类等任务。</p><p id="10e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于情感分析，TextBlob是唯一的，因为除了<strong class="ky ir">极性</strong> <strong class="ky ir">得分</strong>，它还生成<strong class="ky ir">主观性得分</strong>。如果我们从单独一行中的每条tweet的数据帧开始，我们可以创建一个简单的lambda函数来将这些方法应用到tweet。</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="c1bd" class="nb lt iq mx b gy nc nd l ne nf">pol = <strong class="mx ir">lambda</strong> x: TextBlob(x).sentiment.polarity</span><span id="a2e0" class="nb lt iq mx b gy ng nd l ne nf">sub = <strong class="mx ir">lambda</strong> x: TextBlob(x).sentiment.subjectivity</span></pre><p id="9bba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">之后，我们可以使用一个<code class="fe nh ni nj mx b">groupby</code>函数来查看每个标签、<code class="fe nh ni nj mx b">Hate Speech</code>或<code class="fe nh ni nj mx b">Not Hate Speech</code>的平均极性和主观性得分。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/46af66002710d547546c0d5d3e1d9750.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*dCUwa4kuKjB28OLr54yzag.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">TextBlob情感得分</p></figure><p id="2656" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">TextBlob的极性得分在从- <strong class="ky ir"> 1 </strong>(最负)到<strong class="ky ir"> 1 </strong>(最正)的范围内测量。非仇恨言论文本(标签0)似乎相对<strong class="ky ir">中性</strong>，平均得分为0.006，而仇恨言论文本(标签1)也可以被视为<strong class="ky ir">中性</strong>，得分为-0.071。从他们的主观性来看，这两个标签似乎都有<strong class="ky ir">相似的意见水平</strong>。为了更深入的了解，请随意查看GitHub上的这个分析的<a class="ae kv" href="https://github.com/sidneykung/twitter_hate_speech_detection/blob/master/preprocessing/TextBlob_sentiment.ipynb" rel="noopener ugc nofollow" target="_blank"> Jupyter笔记本</a>。</p><p id="b8b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最终，这些分数<strong class="ky ir">看起来</strong>是<strong class="ky ir">而不是代表这个数据集中的</strong>推文，其中的文本范围从仇恨言论到攻击性语言。因此，我们可以看到TextBlob很难分析Twitter数据。让我们看看VADER能对这种肮脏、无意义的社交媒体数据做些什么。</p><h1 id="662f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">应用VADER </strong></h1><p id="fbfb" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在，我们终于可以去VADER了。VADER的独特之处在于它分解了每个文档的极性分数，给出了一个<strong class="ky ir">正</strong>、<strong class="ky ir">中性</strong>、<strong class="ky ir">负</strong>和<strong class="ky ir">复合</strong>的分数。与TextBlob类似，我们可以使用简单的lambda函数将该方法应用于整个数据帧，以生成这些极性得分。</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="98d3" class="nb lt iq mx b gy nc nd l ne nf">pol = <strong class="mx ir">lambda</strong> x: analyser.polarity_scores(x)</span></pre><p id="d332" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该函数将<strong class="ky ir">分数作为字典</strong>返回，因此在其他几行代码之后，我们可以创建一个dataframe，其中包含<strong class="ky ir">单独列</strong>中的每个分数。同样，你可以在<a class="ae kv" href="https://github.com/sidneykung/twitter_hate_speech_detection/blob/master/preprocessing/VADER_sentiment.ipynb" rel="noopener ugc nofollow" target="_blank"> Jupyter笔记本</a>上查看完整的代码。这是我们最后得到的结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/4214c7fd26a576969077c4e6da9fcdf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*Ni82FEo4-qLrhDJh5OTzVQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">VADER情绪得分</p></figure><p id="8137" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于一些<code class="fe nh ni nj mx b">groupby</code>函数，这里是整个数据集的平均分数，由标签分隔。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/27bc4fa8568c6a32ae858d330be06b1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*O_8k14_jxYEZRJ8h"/></div></div></figure><h1 id="49fd" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">解读VADER的极性得分</strong></h1><p id="d6a7" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">正、负和中性分数代表属于这些类别的文本的<strong class="ky ir">比例。因此，仇恨言论推文平均有8%是正面的，61%是中性的，30%是负面的。另一方面，没有仇恨言论的推文平均有10%是正面的，65%是中性的，25%是负面的。这种分类对于理解数据集中情绪的T21范围更有帮助。这表明两个语料库是相似的，但仇恨言论标签的负面推文<strong class="ky ir">略多，平均</strong>。有趣的是，这两个类别中的大多数推文都被认为是非常中立的，但至少我们有一个清晰的分类。</strong></p><h1 id="9cd8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">复合极性得分</strong></h1><p id="92b1" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">最值得注意的是，该库提供了一个<strong class="ky ir">复合极性得分</strong>，这是一个计算所有词典评级总和的度量，并且<strong class="ky ir">将它们在-1和1之间归一化</strong>。其中-1表示非常负，1表示非常正。这个评分似乎更可靠，因为它包含了这个语料库的<strong class="ky ir">整体情绪。这两个类别都包含负面的、攻击性的语言。但是我们可以从上面的分数中看到，已经被归类为<strong class="ky ir">仇恨言论的推文尤其负面</strong>。</strong></p><p id="7770" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一步将是可视化所有这些分数的分布！你可以查看笔记本，了解正面、中性和负面分数的分布情况。但这里是复合极性分数的<strong class="ky ir">分布。</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/a851a95e3b24b4a94e51bbdc144856c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*vHfES2DuRyN8LP3ZqOMyXw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">VADER化合物极性得分分布，按标签</p></figure><p id="01fa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从这张图表中，我们可以看到被归类为仇恨言论的推文特别负面，正如我们已经怀疑的那样。它进一步强调了这些标签之间的边际差异。</p><p id="631b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在所有这些之后，很明显<strong class="ky ir"> VADER </strong>是<strong class="ky ir">在社交媒体数据</strong>上执行情感分析的高级库。总的来说，自然语言处理是机器学习中一个高度<strong class="ky ir">实验性的</strong>领域，它完全是关于<strong class="ky ir">找到能够适应你的数据集</strong>的正确包。在这种情况下，对于Twitter仇恨言论数据，我们需要一个针对肮脏、细微差别的文本数据进行训练的词典。下次当你处理社交媒体数据时，请随意尝试VADER！</p></div></div>    
</body>
</html>