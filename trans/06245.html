<html>
<head>
<title>How to Reveal Impressive Data Stories with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python揭示令人印象深刻的数据故事</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-reveal-impressive-data-stories-with-python-848a2611bfb3?source=collection_archive---------23-----------------------#2021-06-04">https://towardsdatascience.com/how-to-reveal-impressive-data-stories-with-python-848a2611bfb3?source=collection_archive---------23-----------------------#2021-06-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4984" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过数据驱动的故事讲述为交互式DataViz创造数字化思维</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e6da5ec3b9d76cc7a7ac8ec026706602.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8wsGj10zOKyqBGDTXwqXcg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">伊斯坦布尔的标志之一，作者照片</p></figure><h2 id="36b4" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">我要告诉你什么？</h2><p id="8f96" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">正如我在<a class="ae mk" href="https://engineering.teknasyon.com/an-end-to-end-unsupervised-anomaly-detection-c402facffee2" rel="noopener ugc nofollow" target="_blank">上一篇文章</a>中提到的，<strong class="lt ir">可视化</strong>是数据科学领域的一个关键点。任何数据科学项目的首要目标都是创造价值。无论在哪个领域，数据科学团队都在某种程度上触及了业务的核心，并在做出的每个决策中发挥着重要作用。如果你不能将项目的结果形象化，你就不能以正确的方式传达项目的价值。数据科学家负责项目内容中的哪些技术与哪些结构一起安装。作为一名数据科学家，在与利益相关者或其他部门的会议中，您需要引导项目的结果，而不是技术细节。来自数据的见解将有助于引导会议。本文将通过使用现成的数据集来提供关于您的可视化项目应该如何的信息。</p><p id="9975" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">这篇文章是为基于分析需求的可视化项目而写的，而不是为将要投入生产的项目的可视化机制而写的。我将解释基本图表类型的可视化，但不会涉及太多细节。制作复杂的数据视觉效果并不意味着创造一个好的故事。用尽可能简单的情节揭示数据中需要解释的模式将有助于项目的流畅性。</p><h2 id="4a1a" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">共同的方法</h2><p id="3f21" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">最基本的方法是保存Jupyter笔记本中的代码，这是数据爱好者的主要选择。Jupyter采用笔记本形式并逐单元运行被认为是有利的。代码都在那里，并且很难在你不规则编写的代码中找到你将呈现的可视化。由于“时间不够”或其他原因，通常不可能清洁正在使用的Jupyter笔记本。如果您在会议期间向任何利益相关者或任何其他部门展示可视化的数据，这将是不友好的。使通用方法可持续的唯一解决方案是从Jupyter笔记本中获取要呈现的可视化效果，并通过任何呈现工具进行叙述。其实这是一个变通的程序，已经开始了你的懒惰。我只<strong class="lt ir">建议</strong>在紧急情况下这样做。举一个现实生活中的例子，在我之前的公司，我们的地图系统出现了一些问题。这些问题与快速做出的新业务决策有关。在后端，许可的制图服务在一周内被一个名为OSRM的开源路由服务所取代，并被要求提供一些关于两种服务比较的统计数据。如果您处于这种情况，并且只有几个小时的时间，在Jupyter中完成可视化后，您可以在任何演示工具(或同一笔记本)中演示您的结果。</p><p id="f576" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">使第一种方法快速的另一个重要特征是创建的可视化通常是静态的。造成这种情况的主要原因是可视化时首选熊猫、matplotlib、seaborn等非常易用的包下的函数。</p><p id="ec22" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">下面我举例说明了一些用我提到的通用方法绘制的图表类型。前两个图是静态的，而最后两个地图可视化是交互式传单地图。您可以从回购中名为<a class="ae mk" href="https://github.com/oguzhanyediel/imm_dataviz/blob/main/imm_free_wifi_locs.py" rel="noopener ugc nofollow" target="_blank"><em class="mq">IMM _ free _ wifi _ locs</em></a>的python文件中访问交互的代码。在下面的可视化中，我使用了来自<strong class="lt ir"> IMM数据门户</strong>的一个数据集，我将在文章中对此进行大量讨论。以下数据集包含伊斯坦布尔某些地区免费WiFi服务的新注册用户数量。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/85011dcad0a6c8ba2361bea7f61df056.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0EJxo3BBlmJXYebIyWu-Kg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">折线图上每月订阅数的变化</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ms"><img src="../Images/fa12ac02f5c3b4a84e8fbef2dcac5dc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5C1A9Yq722S-TjrOpes4_w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">条形图上基于县的订阅计数的指示</p></figure><p id="6c3e" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">除了以点的形式显示IMM的免费wifi位置外，它们还以<a class="ae mk" href="https://github.com/uber/h3-py" rel="noopener ugc nofollow" target="_blank">六边形</a>的形式显示，下面是它们的订阅数量。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="b0f0" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">顺便说一下，我们来谈谈'<strong class="lt ir">数据面板</strong>'。<a class="ae mk" href="https://datapane.com/" rel="noopener ugc nofollow" target="_blank"> Datapane </a>是一个应用程序编程接口，在分析数据后，可以很容易地与他人分享数据结果。这是世界上最受欢迎的分享Python数据科学见解的方式。通过使用这个非常易于使用的<a class="ae mk" rel="noopener" target="_blank" href="/introduction-to-datapane-a-python-library-to-build-interactive-reports-4593fd3cb9c8"> Python库</a>，您可以制作出色的报告和仪表板。</p><h2 id="1270" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">整体方法</h2><p id="e93b" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">第二种方法是对代码进行项目设计。为此我用了Jetbrains的<a class="ae mk" href="https://www.jetbrains.com/pycharm/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt ir"> PyCharm </strong> </a>产品。在designed data visualization study中，除了保持代码有组织之外，您还可以通过在本地使用不同的库(如Streamlit)呈现项目的输出来提供更好的会议体验。这种系统方法的下一步是通过确定的日期计划将结果实时呈现给相关团队。在这篇文章中，我将通过给出第二种方式的细节来给出关于项目应该如何结束的信息。我还将展示一些我使用'<a class="ae mk" href="https://plotly.com/python/" rel="noopener ugc nofollow" target="_blank"> plotly </a>'库在<a class="ae mk" href="https://data.ibb.gov.tr/en/" rel="noopener ugc nofollow" target="_blank">伊斯坦堡市</a> (IMM)数据集上制作的基本可视化输出的例子。</p><p id="ba6a" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">区别第二种方式和第一种方式的最重要的特征之一是可视化通常是动态的和交互式的。您可以使用自动出现在代码生成的图中的工具栏来处理图或将图保存为图像。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/d93875748b0821f65d9762fb1f4c806b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*5TT4jNaIp1Ze9QZpndIo7w.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Plotly工具栏</p></figure><h2 id="16a7" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">IMM开放数据门户</h2><p id="0bb2" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">伊斯坦布尔政府两年前开始的积极变革提高了向该市人民提供的服务质量。在朝着正确方向采取透明步骤的框架内，人们决定，作为世界上最美丽的城市之一，伊斯坦布尔应该有一个开放的数据平台。2020年1月发布的IMM开放数据提供了对IMM及其子公司提供的数据的访问。不管你的意图是什么，这些数据都是可以自由访问的。在<strong class="lt ir"> 10 </strong>个不同的类别下有<strong class="lt ir"> 171 </strong>个数据集。门户中数据集的数量与日俱增。同时，你可以根据你的学习领域、兴趣或任何需要提出数据集请求。对于任何对数据可视化感兴趣的人来说，IMM开放数据门户是一个很好的资源。我建议你通过从门户中选择一些数据集来进行数据可视化工作。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/b95a089021509cd7cf411fb8c0787497.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g66rPGmR05yuPKYQldEzow.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae mk" href="https://data.ibb.gov.tr/en/group" rel="noopener ugc nofollow" target="_blank">拥有数据集的类别</a></p></figure><p id="eca1" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">在本文中，我使用了来自治理、人员、环境和移动性的各种数据集。您可以从下图中看到类别下有多少个<a class="ae mk" href="https://data.ibb.gov.tr/en/dataset" rel="noopener ugc nofollow" target="_blank">数据集</a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/afbe184d42c4ee465289f90e9930a460.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*r8_VHr7enyhwc70S4IC_AQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae mk" href="https://www.linkedin.com/posts/erol-%C3%B6zg%C3%BCner-78893a22_ibb-acikveri-opendata-activity-6787679720134742016-I03y" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><h2 id="27cf" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">勒克斯</h2><p id="3552" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">在图形之前，我想谈谈莱克丝。<a class="ae mk" href="https://github.com/lux-org/lux" rel="noopener ugc nofollow" target="_blank"> <strong class="lt ir"> Lux </strong> </a>是一个应用程序编程接口(API ),您可以在其中用一行代码检查任何数据的一般可视化，以及一个Python库，它通过自动化数据探索过程来简化数据科学的初步步骤。在开始工作之前，只需导入库。使用Lux创建的可视化效果，您可以创建数据集的整体视图，规划数据的预处理步骤，并通过将可视化效果保存为“html”与其他人共享。关于Lux-API的详细信息，可以查看<a class="my mz ep" href="https://medium.com/u/6b00d9d9f8df?source=post_page-----848a2611bfb3--------------------------------" rel="noopener" target="_blank"> Ismael Araujo </a>的<a class="ae mk" rel="noopener" target="_blank" href="/how-to-create-data-visualizations-on-python-with-one-click-f6bafbd8de54">文章</a>。</p><p id="1c23" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">下面你可以看到<a class="ae mk" href="https://data.ibb.gov.tr/en/dataset/gunluk-ibb-wifi-yeni-kullanici-verisi" rel="noopener ugc nofollow" target="_blank">日IMM wifi新用户数据</a>的Lux输出。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/c2e7c93396f692748c25d09dfac1094f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0LBjL7989b7tKkBp8wvwrQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">相关图</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/001e9eb396093e315a4fc5e05cde0d77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iT6v_35Mjvzkl6ZQBStuPQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">分类列的出现频率图</p></figure></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h2 id="17a5" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">使用的数据集</h2><ul class=""><li id="eadc" class="nj nk iq lt b lu lv lx ly le nl li nm lm nn mj no np nq nr bi translated"><em class="mq">每日IMM WiFi新用户数据</em></li><li id="6f63" class="nj nk iq lt b lu ns lx nt le nu li nv lm nw mj no np nq nr bi translated"><em class="mq">伊斯坦堡大坝占用率</em></li><li id="04e0" class="nj nk iq lt b lu ns lx nt le nu li nv lm nw mj no np nq nr bi translated"><em class="mq">每小时公共交通数据集</em></li><li id="bbf5" class="nj nk iq lt b lu ns lx nt le nu li nv lm nw mj no np nq nr bi translated"><em class="mq">每小时交通密度数据集</em></li><li id="ab6c" class="nj nk iq lt b lu ns lx nt le nu li nv lm nw mj no np nq nr bi translated"><em class="mq">运输管理中心交通公告数据</em></li></ul><h2 id="edc1" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">每日IMM WiFi新用户数据</h2><p id="97a9" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">第一个<a class="ae mk" href="https://data.ibb.gov.tr/en/dataset/gunluk-ibb-wifi-yeni-kullanici-verisi" rel="noopener ugc nofollow" target="_blank">数据集</a>，其<a class="ae mk" href="https://github.com/oguzhanyediel/imm_dataviz/blob/main/wifi_new_user_daily.py" rel="noopener ugc nofollow" target="_blank">图表</a>我们将对其进行检查，包括受益于伊斯坦布尔市政当局提供的Wi-Fi服务的国内外用户的数据。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="0db6" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">该折线图显示了注册免费无线互联网服务的用户总数的月度分布。订阅数量在2020年11月达到最高。注册用户数已超过1.8万。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="7ca9" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">在柱状图中，可以看到各区的订阅数量。图表数据包含哪些地区有多少订阅。根据图表，Fatih是注册人数最多的地区。原因之一可能是许多旅游建筑位于该地区。从下面的堆积条形图可以看出，外国用户的数量在该地区也占了最高的百分比。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h2 id="5c59" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">伊斯坦布尔大坝占用率</h2><p id="65c8" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated"><a class="ae mk" href="https://github.com/oguzhanyediel/imm_dataviz/blob/main/dam_occupancy_rates_daily.py" rel="noopener ugc nofollow" target="_blank">下一个数据</a>是<a class="ae mk" href="https://data.ibb.gov.tr/en/dataset/istanbul-dam-occupany-rates-data" rel="noopener ugc nofollow" target="_blank">数据集</a>，包括伊斯坦布尔大坝占用率的每日变化。除了大坝占用率，还有一个包含大坝预留水量的列。如果包括大坝崩溃，这将是一个很好的数据集。7年后的2007年、2008年、2014年，2021年入住率再次跌破<strong class="lt ir"> 20% </strong>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="3da1" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">自然与大坝占用率呈正相关的备用水量月线图如下。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="a6d7" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">我从秋、冬、夏三季中随机选择几个月，画了一个条形图。值得注意的是，除了上面我们检测到的干旱年份，七月份的平均入住率很高。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="7a2e" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">过去15年每月的平均条形图如下。春季的高失业率是意料之中的现象。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h2 id="cd09" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">每小时公共交通数据集</h2><p id="254b" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated"><a class="ae mk" href="https://github.com/oguzhanyediel/imm_dataviz/blob/main/public_transport_hourly.py" rel="noopener ugc nofollow" target="_blank">我们的第三个数据集</a>是公交数据，这是我在门户上最喜欢的数据集。这个<a class="ae mk" href="https://data.ibb.gov.tr/en/dataset/saatlik-toplu-ulasim-veri-seti" rel="noopener ugc nofollow" target="_blank">数据集</a>包含了伊斯坦布尔公共交通每小时的乘客和旅程数据。在项目内部，我一般会比较2020年和2021年1月和2月的统计数据。通过这种方式，我们将能够了解并比较疫情疫情爆发前和2021年新冠肺炎时期的公共交通统计数据。作为一个脚注，一些交通工具，如铁路系统，晚上不工作。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="0a7c" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">上图和下图包括每天的平均乘客人数和通票数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="5cc0" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">在下面的柱状图中，给出了公路、铁路和水路旅客总数的比例。当然，疫情的爆发是导致2021年下降的有效原因。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="7e65" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">下面的条形图包含上面的图表在一条线上的细分。2020年1月，超过1亿的乘客中约有<strong class="lt ir"> 60% </strong>更喜欢使用公私合营的公交车。如果我们看看铁路细节，伊斯坦布尔最常用的4条线路没有变化；Aksaray-Airport、kaba tas-BAC lar、Marmaray和tak sim-4 . levent。2月份早高峰期间选择这四条线路的乘客平均人数如下图所示。在海上，可以看到摩托艇比城市航线更受欢迎。然而，2021年1月使用这两条线路的乘客数量相互接近。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="b578" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">从下面的折线图中可以看出，最明显的是，在疫情期间，绝大多数白领员工都是在家工作的。原因是Taksim-4的变化。莱文特线。这条线路通常由Mecidiyekö、Gayrettepe和Levent区的白领员工使用。总体而言，由于疫情，2021年特定线路的平均乘客人数已降至2万以下。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/44f9dd4623e784c2ec895e4e8fde784d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5a4kLoza66Xo2CLy_3-zqg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd ny">i̇tü-阿亚扎阿站，Taksim-4。Levent Line，2014年7月，作者照片</strong></p></figure><p id="1e73" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">在这一部分下面的最后一个图表中，伊斯坦布尔最受欢迎的交通工具<em class="mq">(开玩笑)</em>的每小时平均乘客人数是一月份的。在疫情之前的一个月，大约有8万人在晚上高峰时间选择这种交通方式。你可以在下面的照片中看到人群的一部分。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/f230a3cfaacfc8bbcd5dc034bae665b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VtYTlhhIlsBoufgBeYh3ug.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Zincirlikuyu地铁站，2020年1月，作者拍摄</p></figure></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h2 id="ff6f" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">每小时交通密度数据集</h2><p id="aed9" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">下一个 <a class="ae mk" href="https://data.ibb.gov.tr/en/dataset/saatlik-trafik-yogunluk-veri-seti" rel="noopener ugc nofollow" target="_blank">数据集</a>包含每小时的伊斯坦布尔位置密度和交通信息。下面的热图显示了每天和每小时的平均车辆数量。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="f6c0" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">您可以在下面的可视化图中详细查看晚间高峰时间的热图。由于疫情的条件，开车外出的人并没有大幅度减少。可以推断，人们更喜欢使用他们的私人车辆，而不是公共交通工具。只是由于夜间和周末宵禁，这些日子和时间有所减少。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="01d4" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">在伊斯坦布尔地图上，密度地图可视化如下。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h2 id="83a9" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">运输管理中心交通公告数据</h2><p id="6009" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">我们的<a class="ae mk" href="https://github.com/oguzhanyediel/imm_dataviz/blob/main/traffic_announcements_instant.py" rel="noopener ugc nofollow" target="_blank">最新数据集</a>是<a class="ae mk" href="https://data.ibb.gov.tr/en/dataset/ulasim-yonetim-merkezi-trafik-duyuru-verisi" rel="noopener ugc nofollow" target="_blank">数据集</a>，包含运输管理中心(TMC)自2018年以来基于位置发布的即时公告。我为公告制作图表，而不是基于位置的可视化图。在我们的第一张图中，您可以找到显示公告总数分布的交互图。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="80c7" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">从下面的柱状图可以查看2019年和2020年伊斯坦布尔事故公告的月度分布。2020年事故数量增加，2020年10月达到5500起。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="87d0" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">下一张图以条形图的形式展示了两年半时间内3月、7月和10月的车辆故障平均数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="d782" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">文章的最后一个图在散点图上显示了在公告的开始和结束时间之间平均经过了多少分钟。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h2 id="c533" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">关于项目和图表</h2><p id="7e43" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">在本文中，为了确保交互性，只有项目的某些图表被选中并通过Datapane呈现。在这个项目中，所有图表的代码都是尽可能参数化地编写的，通过选择所需的变量和时间选项，可以很容易地复制所需的图表。你可以在我的Github页面找到<a class="ae mk" href="https://github.com/oguzhanyediel/imm_dataviz" rel="noopener ugc nofollow" target="_blank">所有代码</a>，包括文章中的图表。</p><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="b859" class="kv kw iq ob b gy of og l oh oi">imm_dataviz/<br/>|-- <!-- -->config.py<br/>|-- <!-- -->dam_occupancy_rates_daily.py<br/>|-- Dockerfile<br/>|-- environment.yml<br/>|-- <!-- -->LICENSE<br/>|-- <!-- -->public_transport_hourly.py<br/>|-- <!-- -->README.md<br/>|-- <!-- -->requirements.txt<br/>|-- <!-- -->traffic_announcements_instant.py<br/>|-- <!-- -->traffic_density_hourly.py<br/>|-- <!-- -->utils.py<br/>|-- <!-- -->wifi_new_user_daily.py</span></pre><p id="67d6" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">每个python文件都基于以下三个基本函数。</p><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="e9dd" class="kv kw iq ob b gy of og l oh oi">if __name__ == "__main__":<br/>    # main()<br/>    putting_into_streamlit()<br/>    # putting_into_datapane()</span></pre><p id="736d" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated"><em class="mq"> main </em>功能允许您在本地逐个查看所有图表。<em class="mq">另一方面，put _ into _ streamlit</em>函数使用Streamlit库来帮助您在一个地方收集所有图像，并使比较可视化更加容易。同时，如果你要做什么可视化工作或者项目，我强烈推荐你使用<a class="ae mk" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt ir"> Streamlit </strong> </a>。<em class="mq">put _ into _ datapane</em>函数使用了我更喜欢在文章中交互呈现图像的data pane库。</p><h2 id="22ba" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">项目说明&amp;下一步是什么？</h2><ul class=""><li id="b378" class="nj nk iq lt b lu lv lx ly le nl li nm lm nn mj no np nq nr bi translated">门户下的数据落后45天，每天更新。</li><li id="1e22" class="nj nk iq lt b lu ns lx nt le nu li nv lm nw mj no np nq nr bi translated">Streamlit将自动选择您的操作系统主题(亮或暗)并随操作系统改变颜色。运行代码后，从右上角选择灯光主题。</li><li id="8e2b" class="nj nk iq lt b lu ns lx nt le nu li nv lm nw mj no np nq nr bi translated">我故意避免编写公共(util)函数，以便可以很容易地将每个py文件作为一个单独的单元。</li><li id="dc9c" class="nj nk iq lt b lu ns lx nt le nu li nv lm nw mj no np nq nr bi translated">因为这个项目是尽可能模块化地编写的，所以可以通过更改配置文件中的参数来绘制不同的图表。</li><li id="3adc" class="nj nk iq lt b lu ns lx nt le nu li nv lm nw mj no np nq nr bi translated">该项目在日志记录和例外尝试机制方面比较薄弱。可以通过使用logger库来添加日志，异常和错误处理机制可以放在代码中。</li><li id="1fbd" class="nj nk iq lt b lu ns lx nt le nu li nv lm nw mj no np nq nr bi translated">对于内容端；</li></ul><p id="d229" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">—通过将气象数据与大坝占用率或每小时公共交通数据相结合，可以生成新的图表。</p><p id="df94" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">—可以通过组合公共交通登机牌的数量和<a class="ae mk" href="https://data.ibb.gov.tr/en/dataset/toplu-tasima-bilet-fiyatlari" rel="noopener ugc nofollow" target="_blank">票价</a>来产生新的可视化。</p><p id="9fa7" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">—可以在交通公告数据中实现基于位置的可视化。</p><ul class=""><li id="954c" class="nj nk iq lt b lu ml lx mm le oj li ok lm ol mj no np nq nr bi translated"><strong class="lt ir">不要犹豫</strong>贡献自己的力量，因为可视化项目是完全开源的。</li></ul><h2 id="7954" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">结论</h2><p id="4339" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">我展示了一个小规模的样本可视化引擎，在我从IMM开放数据门户选择的一些数据集上使用了Plotly、Streamlit和Datapane等库，该门户于2020年1月提供服务。多亏了我用Python创建的交互式数据可视化，我们对伊斯坦布尔的数据有了更深入的了解。我试图向您展示如何用简单而有效的代码展示数据科学领域的任何可视化项目。我告诉基于分析的可视化项目应该用什么技术呈现给利益相关者或其他部门，并且我通过<a class="ae mk" href="https://github.com/oguzhanyediel/imm_dataviz" rel="noopener ugc nofollow" target="_blank"> <em class="mq"> IMM DataViz </em> </a>项目提供了关于使用最新库的详细信息。</p><h2 id="2b31" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">我以前的文章</h2><ul class=""><li id="4c8b" class="nj nk iq lt b lu lv lx ly le nl li nm lm nn mj no np nq nr bi translated"><a class="ae mk" href="https://medium.com/bitaksi-tech/how-did-bitaksi-become-the-best-taxi-service-by-using-the-power-of-data-2f6cca9fcdc" rel="noopener"><em class="mq">BiTaksi是如何利用数据的力量成为最好的打车服务的？</em>T3】</a></li><li id="9f9d" class="nj nk iq lt b lu ns lx nt le nu li nv lm nw mj no np nq nr bi translated"><a class="ae mk" href="https://engineering.teknasyon.com/an-end-to-end-unsupervised-anomaly-detection-c402facffee2" rel="noopener ugc nofollow" target="_blank"> <em class="mq">一种端到端无监督的异常检测</em> </a></li></ul><h2 id="8d90" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">链接</h2><ul class=""><li id="d506" class="nj nk iq lt b lu lv lx ly le nl li nm lm nn mj no np nq nr bi translated"><a class="ae mk" href="https://www.linkedin.com/in/oguzhanyediel/" rel="noopener ugc nofollow" target="_blank">我的LinkedIn个人资料</a></li><li id="1b3f" class="nj nk iq lt b lu ns lx nt le nu li nv lm nw mj no np nq nr bi translated"><a class="ae mk" href="https://github.com/oguzhanyediel" rel="noopener ugc nofollow" target="_blank">我的Github页面</a></li><li id="50d5" class="nj nk iq lt b lu ns lx nt le nu li nv lm nw mj no np nq nr bi translated"><a class="ae mk" href="https://datapane.com/u/oguzhanyediel/" rel="noopener ugc nofollow" target="_blank">我的数据面板配置文件</a></li></ul><h2 id="d6d3" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">参考资料和有用的资源</h2><ul class=""><li id="5a6c" class="nj nk iq lt b lu lv lx ly le nl li nm lm nn mj no np nq nr bi translated">我强烈推荐你阅读<a class="ae mk" href="https://plotly.com/python/" rel="noopener ugc nofollow" target="_blank"> Plotly文档</a></li><li id="19e2" class="nj nk iq lt b lu ns lx nt le nu li nv lm nw mj no np nq nr bi translated"><a class="ae mk" href="https://www.shanelynn.ie/bar-plots-in-python-using-pandas-dataframes/" rel="noopener ugc nofollow" target="_blank">https://www . shanelynn . ie/bar-plots-in-python-using-pandas-data frames/</a></li><li id="c65d" class="nj nk iq lt b lu ns lx nt le nu li nv lm nw mj no np nq nr bi translated"><a class="ae mk" rel="noopener" target="_blank" href="/step-by-step-bar-charts-using-plotly-express-bb13a1264a8b">https://towards data science . com/step-by-step-step-bar-charts-using-plotly-express-bb13a 1264 a8b</a></li><li id="766b" class="nj nk iq lt b lu ns lx nt le nu li nv lm nw mj no np nq nr bi translated"><a class="ae mk" rel="noopener" target="_blank" href="/stacked-bar-charts-with-plotly-express-85885e91874f">https://towards data science . com/stacked-bar-charts-with-plotly-express-85885 e 91874 f</a></li><li id="3696" class="nj nk iq lt b lu ns lx nt le nu li nv lm nw mj no np nq nr bi translated"><a class="ae mk" rel="noopener" target="_blank" href="/introduction-to-datapane-a-python-library-to-build-interactive-reports-4593fd3cb9c8">https://towards data science . com/introduction-to-data pane-a-python-library-to-build-interactive-reports-4593 FD 3c B9 c8</a></li><li id="7a59" class="nj nk iq lt b lu ns lx nt le nu li nv lm nw mj no np nq nr bi translated"><a class="ae mk" rel="noopener" target="_blank" href="/data-visualization-101-7-steps-for-effective-visualizations-491a17d974de">https://towards data science . com/data-visualization-101-7-steps-for-effective-visualizations-491 a17d 974 de</a></li><li id="6cb1" class="nj nk iq lt b lu ns lx nt le nu li nv lm nw mj no np nq nr bi translated"><a class="ae mk" rel="noopener" target="_blank" href="/nine-emerging-python-libraries-you-should-add-to-your-data-science-toolkit-in-2021-85ce3d239846">https://towards data science . com/nine-emerging-python-libraries-you-should-add-to-your-data-science-toolkit-in-2021-85ce 3d 239846</a></li></ul></div></div>    
</body>
</html>