<html>
<head>
<title>Kubernetes 101: Cluster Architecture</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes 101:集群架构</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/kubernetes-101-cluster-architecture-d79995785563?source=collection_archive---------19-----------------------#2021-05-24">https://towardsdatascience.com/kubernetes-101-cluster-architecture-d79995785563?source=collection_archive---------19-----------------------#2021-05-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6521" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">他们说一张照片胜过一千(或一百万)个字</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b64bbedcc4d763b0e69cac76a2bd21e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MFe9LgpKoxkefjphsLla7g.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Marc-Olivier Jodoin 在<a class="ae ky" href="https://unsplash.com/s/photos/architecture?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="c024" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上一篇文章中，我们将Kubernetes定义为一个容器编排引擎，它有助于确保每个容器都在它应该在的地方，并且容器之间可以相互通信。</p><div class="lv lw gp gr lx ly"><a rel="noopener follow" target="_blank" href="/kubernetes-101-why-should-you-care-6793a09a096a"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">Kubernetes 101:你为什么要关心？</h2><div class="mf l"><p class="bd b dl z fp md fr fs me fu fw dk translated">towardsdatascience.com</p></div></div><div class="mg l"><div class="mh l mi mj mk mg ml ks ly"/></div></div></a></div><p id="7edb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">合乎逻辑的下一步是看到一个高层次的概念视图，看看系统由哪些组件组成，以及它们是如何相互连接的。这个故事展示了Kubernetes集群的每个组件和概念架构的整体情况。</p><blockquote class="mm mn mo"><p id="7a28" class="kz la mp lb b lc ld ju le lf lg jx lh mq lj lk ll mr ln lo lp ms lr ls lt lu im bi translated"><a class="ae ky" href="https://www.dimpo.me/newsletter?utm_source=medium&amp;utm_medium=article&amp;utm_campaign=kubernetes_architecture" rel="noopener ugc nofollow" target="_blank">学习率</a>是我每周给那些对AI和MLOps世界好奇的人发的简讯。你会在每周五收到我关于最新人工智能新闻、研究、回购和书籍的更新和想法。订阅<a class="ae ky" href="https://www.dimpo.me/newsletter?utm_source=medium&amp;utm_medium=article&amp;utm_campaign=kubernetes_architecture" rel="noopener ugc nofollow" target="_blank">这里</a>！</p></blockquote><h1 id="ba53" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">库伯内特建筑</h1><p id="bbea" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">Kubernetes集群由一组工作机组成。我们称这些机器为<a class="ae ky" href="https://kubernetes.io/docs/concepts/architecture/nodes/" rel="noopener ugc nofollow" target="_blank">节点</a>。每个集群至少有一个worker节点，我们在那里托管封装应用程序工作负载组件的<a class="ae ky" href="https://kubernetes.io/docs/concepts/workloads/pods/" rel="noopener ugc nofollow" target="_blank"> Pods </a>。</p><p id="e796" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，我们有<a class="ae ky" href="https://kubernetes.io/docs/reference/glossary/?all=true#term-control-plane" rel="noopener ugc nofollow" target="_blank">控制平面</a>。把它想象成我们集群中的主节点。控制平面管理集群中的工作节点和单元。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/a213256d41217d1c0cc57e88c3e1bd5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*m3Mj6yDxfN0nz1VK.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Kubernetes的概念建筑——作者图片</p></figure><h2 id="377d" class="nr mu it bd mv ns nt dn mz nu nv dp nd li nw nx nf lm ny nz nh lq oa ob nj oc bi translated">节点</h2><p id="8219" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">让我们从下往上开始；什么是节点？节点是我们运行工作负载的物理或虚拟机。在Kubernetes中，我们在集群上操作，集群是由一个或多个工作节点组成的组。然而，这些节点不仅仅是简单的设备。</p><p id="ad54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个节点都包含运行pod和容器所需的服务:</p><ul class=""><li id="61c3" class="od oe it lb b lc ld lf lg li of lm og lq oh lu oi oj ok ol bi translated"><strong class="lb iu">一个容器运行时</strong>，如<code class="fe om on oo op b">containerd</code>或<code class="fe om on oo op b">CRI-O</code>，用于管理其主机系统的完整容器生命周期，从映像传输到容器执行和监控，从低级存储到网络附件等等。</li><li id="d843" class="od oe it lb b lc oq lf or li os lm ot lq ou lu oi oj ok ol bi translated"><strong class="lb iu">一个</strong> <code class="fe om on oo op b"><strong class="lb iu">kubelet</strong></code>，运行在每个节点上的主节点代理确保Kubernetes调度的容器在该节点上运行并保持健康。</li><li id="c383" class="od oe it lb b lc oq lf or li os lm ot lq ou lu oi oj ok ol bi translated"><strong class="lb iu">一个</strong> <code class="fe om on oo op b"><strong class="lb iu">kube-proxy</strong></code>，运行在各个节点上的网络代理，维护网络规则。这些规则允许传入的请求从集群内部或外部的网络会话到达pod。</li></ul><h2 id="c655" class="nr mu it bd mv ns nt dn mz nu nv dp nd li nw nx nf lm ny nz nh lq oa ob nj oc bi translated">制导机</h2><p id="7bf9" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">节点是我们的应用程序发生奇迹的地方。然而，手动管理所有的容器是不可能的；这就是Kubernetes控制平面发挥作用的地方。</p><p id="244a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Kubernetes控制平面负责管理pod的生命周期并处理所有细节。让我们来看看它的组成部分:</p><ul class=""><li id="e48b" class="od oe it lb b lc ld lf lg li of lm og lq oh lu oi oj ok ol bi translated"><strong class="lb iu">API服务器</strong>是Kubernetes的联系点。它处理每个对象的数据验证和配置。它是Kubernetes的核心和灵魂，所有其他组件都通过它进行通信。</li><li id="8fe7" class="od oe it lb b lc oq lf or li os lm ot lq ou lu oi oj ok ol bi translated"><strong class="lb iu">“etcd”</strong>是一个键值存储，记录集群的所有重要信息:环境配置、应用程序应该如何运行等等。</li><li id="7d52" class="od oe it lb b lc oq lf or li os lm ot lq ou lu oi oj ok ol bi translated"><strong class="lb iu">调度器</strong>监控节点并跟踪所有可用资源，以确保pod到达能够处理它的节点。</li><li id="4599" class="od oe it lb b lc oq lf or li os lm ot lq ou lu oi oj ok ol bi translated"><strong class="lb iu">控制器管理器</strong>封装了核心Kubernetes逻辑。CM确保所有部分都正常工作。如果没有，它将采取措施使系统达到期望的状态。</li><li id="537b" class="od oe it lb b lc oq lf or li os lm ot lq ou lu oi oj ok ol bi translated"><strong class="lb iu">云控制管理器</strong>与云提供商(如GCP、AWS、Azure等)对话。)并传达集群的需求。如果您在自己的场所运行Kubernetes，那么集群没有云控制器管理器。</li></ul><h1 id="2ddc" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">序</h1><p id="a7f5" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">Kubernetes集群的设计基于三个原则。Kubernetes集群应该是安全的、易于使用的和可扩展的。这个故事演示了我们如何将Kubernetes集群可视化为两个部分:控制平面和节点。</p><p id="ab87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们更深入地探讨了什么去哪里，控制平面如何编排一切，以及工作节点如何负责执行应用程序。</p><p id="3be0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在已经准备好在下一篇文章中动手运行我们的第一个工作负载。</p><h1 id="f573" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">关于作者</h1><p id="39a7" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">我叫<a class="ae ky" href="https://www.dimpo.me/?utm_source=medium&amp;utm_medium=article&amp;utm_campaign=kubernetes_architecture" rel="noopener ugc nofollow" target="_blank">迪米特里斯·波罗普洛斯</a>，我是一名为<a class="ae ky" href="https://www.arrikto.com/" rel="noopener ugc nofollow" target="_blank">阿里克托</a>工作的机器学习工程师。我曾为欧洲委员会、欧盟统计局、国际货币基金组织、欧洲央行、经合组织和宜家等主要客户设计和实施过人工智能和软件解决方案。</p><p id="fa45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有兴趣阅读更多关于机器学习、深度学习、数据科学和数据运算的帖子，请关注我的<a class="ae ky" href="https://towardsdatascience.com/medium.com/@dpoulopoulos/follow" rel="noopener" target="_blank"> Medium </a>、<a class="ae ky" href="https://www.linkedin.com/in/dpoulopoulos/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>或Twitter上的<a class="ae ky" href="https://twitter.com/james2pl" rel="noopener ugc nofollow" target="_blank"> @james2pl </a>。</p><p id="4bfa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所表达的观点仅代表我个人，并不代表我的雇主的观点或意见。</p></div></div>    
</body>
</html>