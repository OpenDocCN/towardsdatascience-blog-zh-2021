<html>
<head>
<title>Bar Plots: Alternatives &amp; Specific Types</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">条形图:备选方案和特定类型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/bar-plots-alternatives-specific-types-9d10ef250e5?source=collection_archive---------15-----------------------#2021-03-28">https://towardsdatascience.com/bar-plots-alternatives-specific-types-9d10ef250e5?source=collection_archive---------15-----------------------#2021-03-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3c70" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">何时以及是否使用它们</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ae87c8d2173397b1ef638c2dd7ac2606.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*45vI2NBWdH3pkU7i9a7r3w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/photos/OGTEP0LyYNk" rel="noopener ugc nofollow" target="_blank">来自Unsplash </a></p></figure><p id="cccd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当显示整体中不同元素的比例时，条形图似乎是最佳选择。有没有其他功能与他们相似的图表？让我们使用Kaggle的一个与酒吧相关的数据集来探究这个问题— <a class="ae ky" href="https://www.kaggle.com/codebreaker619/alcohol-comsumption-around-the-world" rel="noopener ugc nofollow" target="_blank">世界各地的酒精消费量</a>🤩🍷特别是，我们将关注饮料消费量排名前十的国家。此外，我们将快速了解还有哪些其他类型的条形图，以及何时可以使用它们。</p><p id="7c9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看熊猫的数据:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b607" class="ma mb it lw b gy mc md l me mf">import pandas as pd<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns</span><span id="4168" class="ma mb it lw b gy mg md l me mf">df = pd.read_csv('drinks.csv')<br/>print(df.head(3))</span><span id="fd6c" class="ma mb it lw b gy mg md l me mf"><strong class="lw iu">Output:</strong></span><span id="69c2" class="ma mb it lw b gy mg md l me mf">   country  beer_servings  spirit_servings  wine_servings  \<br/>0  Albania             89              132             54   <br/>1  Algeria             25                0             14   <br/>2  Andorra            245              138            312   <br/><br/>   total_litres_of_pure_alcohol  <br/>0                           4.9  <br/>1                           0.7  <br/>2                          12.4   </span></pre><p id="0848" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并提取必要的信息:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="641a" class="ma mb it lw b gy mc md l me mf">top10_spirit = df.sort_values('spirit_servings', <br/>                              ascending=False)[:10]\<br/>                 .reset_index(drop=True)\<br/>                 [['country', 'spirit_servings']]</span></pre><h1 id="3536" class="mh mb it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">圆形分格统计图表</h1><p id="dcad" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">饼图或其版本的环形图(中心区域被切掉)是条形图最常见的替代方案。然而，如果要在它们和条形地块之间做出选择，第二个似乎是更安全的选择。事实上，饼状图是基于角度而不是长度，通常更难阅读和从中提取见解。如果我们在一个饼图中有许多类别和/或几乎相等比例的类别，即使试图找到最大/最小的类别也是相当复杂的，更不用说按值排序了:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="f69c" class="ma mb it lw b gy mc md l me mf">fig, ax = plt.subplots(figsize=(16,8))<br/>fig.tight_layout(pad=4)</span><span id="4e78" class="ma mb it lw b gy mg md l me mf"># Creating a case-specific function to avoid code repetition<br/># (will be used for comparing with 2 more plot types)<br/>def plot_hor_bar_2():<br/>    ax = sns.barplot(x='spirit_servings', y='country',<br/>                     data=top10_spirit, color='slateblue')<br/>    plt.title('TOP10 countries by spirit consumption', fontsize=28)<br/>    plt.xlabel('Servings per person', fontsize=23)<br/>    plt.xticks(fontsize=20)<br/>    plt.ylabel(None)<br/>    plt.yticks(fontsize=20)<br/>    sns.despine(left=True)<br/>    ax.grid(False)<br/>    ax.tick_params(bottom=True, left=False)<br/>    return None</span><span id="6a0e" class="ma mb it lw b gy mg md l me mf">plt.subplot(1,2,1)<br/>plot_hor_bar_2()</span><span id="1493" class="ma mb it lw b gy mg md l me mf">plt.subplot(1,2,2)<br/>plt.pie(top10_spirit['spirit_servings'],<br/>        labels=top10_spirit['country'],<br/>        startangle=90, autopct='%1.1f%%')<br/>plt.title('TOP10 countries by spirit consumption', fontsize=28)<br/>matplotlib.rcParams['font.size']=18<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/8515561d7762809fac0e0c5c690dd9de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WAqB9rhfj3UwU-LOoBQouw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="fccd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">即使我们只有10个国家出现在这两张图表上(2010年饮酒量排名前10的国家)，我们也无法从饼状图中获得太多信息。事实上，这些扇区看起来彼此非常相似，即使将<code class="fe ne nf ng lw b">startangle</code>参数赋值为0并添加%标签也没有真正提高第二个图表的可读性。</p><p id="8b32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些图表的另一个缺点是，我们必须为每个类别使用不同的颜色，而正如我们前面所讨论的，在条形图上，对所有的条形图使用相同的颜色就足够了(如果我们不想特别强调什么)。这意味着在饼图上，每个类别都有两个特征:颜色和角度，这会产生冗余的视觉信息。如果我们有很多类别，因此有很多颜色，那么我们的饼状图就会变得铺天盖地。同样，上图只有10个元素，看起来已经严重超载了。</p><p id="781c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，在几个饼图的情况下，每个饼图代表一个以不同比例细分为相同元素的类别(类似于分组条形图)，几乎不可能跟踪所有元素的趋势或找出数据中任何有意义的模式。</p><p id="e419" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基于以上所述，条形图应优先于饼图。</p><h1 id="ab0e" class="mh mb it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">树形图</h1><p id="48b1" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">像条形图和饼图一样，树状图显示了所有数据的组成。它将分层数据显示为一组嵌套的矩形，每个矩形的面积与相应数据的值成比例。为了定制一个树形图，我们可以为矩形分配一个颜色列表，为标签分配颜色和字体大小，以及其他一些参数。</p><p id="7243" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们复制上面的条形图，这次将它与相应的树形图进行比较:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="a064" class="ma mb it lw b gy mc md l me mf">import squarify</span><span id="c0a0" class="ma mb it lw b gy mg md l me mf"># Renaming Russian Federation into Russia to avoid too long lables<br/>top10_spirit.at[3, 'country'] = 'Russia'</span><span id="d086" class="ma mb it lw b gy mg md l me mf">fig, ax = plt.subplots(figsize=(16,8))<br/>fig.tight_layout(pad=4)</span><span id="7f17" class="ma mb it lw b gy mg md l me mf">plt.subplot(1,2,1)<br/>plot_hor_bar_2()</span><span id="72fa" class="ma mb it lw b gy mg md l me mf">plt.subplot(1,2,2)<br/>cmap = matplotlib.cm.tab20<br/>colors = []<br/>for i in range(len(top10_spirit.index)):<br/>    colors.append(cmap(i))    <br/>squarify.plot(sizes=top10_spirit['spirit_servings'],<br/>              label=top10_spirit['country'],<br/>              color=colors,<br/>              text_kwargs={'fontsize': 16})<br/>plt.title('TOP10 countries by spirit consumption', fontsize=28)<br/>plt.axis('off')<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/367f9346526997d0e36184d12e220f4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-H8WhBHIQ5rIDA8ctS-zaA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="3801" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以确认，树形图看起来比之前创建的饼图更有洞察力:感知区域肯定比感知角度容易得多。我们没有在树形图中添加值或百分比；然而，仍然有可能从定性的角度来估计前10名中饮酒最多和最少的国家(我的国家和海地并列第三😔).不过，在一个可视化中使用大量颜色的问题也存在于树形图中。</p><h1 id="921f" class="mh mb it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">茎图</h1><p id="9b2b" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">stem图是一个很好的替代条形图的方法，它有许多条，或者有相似长度的条。它最大化了图表的数据-油墨比率，使其更具可读性。要创建一个水平茎图，我们可以使用<code class="fe ne nf ng lw b">stem()</code>或<code class="fe ne nf ng lw b">vlines()</code>功能，创建一个垂直茎图，只有<code class="fe ne nf ng lw b">hlines()</code>与<code class="fe ne nf ng lw b">plot()</code>结合使用。这些函数有许多参数需要调整，以改善结果图的外观。在<a class="ae ky" rel="noopener" target="_blank" href="/spaceborn-visualizations-69058ad6c2df">这篇文章</a>中，你可以找到更多关于如何定制茎图和树状图的信息。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b3ab" class="ma mb it lw b gy mc md l me mf">fig, ax = plt.subplots(figsize=(16,8))<br/>fig.tight_layout(pad=4)</span><span id="b081" class="ma mb it lw b gy mg md l me mf">plt.subplot(1,2,1)<br/>plot_hor_bar_2()</span><span id="5e2c" class="ma mb it lw b gy mg md l me mf">top_sorted = top10_spirit.sort_values('spirit_servings',<br/>                                      ascending=True)\<br/>                         .set_index('country')</span><span id="66c6" class="ma mb it lw b gy mg md l me mf">plt.subplot(1,2,2)<br/>plt.hlines(y=top_sorted.index, xmin=0, xmax=top_sorted,<br/>           color='slateblue')<br/>plt.plot(top_sorted, top_sorted.index,<br/>         'o', color='slateblue')<br/>plt.title('TOP10 countries by spirit consumption', fontsize=28)<br/>plt.xlabel('Servings per person', fontsize=23)<br/>plt.xticks(fontsize=20)<br/>plt.xlim(0, None)<br/>plt.ylabel(None)<br/>plt.yticks(fontsize=20)<br/>sns.despine(left=True)<br/>ax.grid(False)<br/>ax.tick_params(bottom=True, left=False)<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/243a8ee495d39cf8e606b7b4363c22f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7473SjEXE-_qY9ce2nTljg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="e347" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二个图看起来不那么杂乱，更优雅，这种效果在有许多类别的情况下变得更加明显。另外，我们可以注意到俄罗斯和海地交换了位置，有相同的值。</p><h1 id="ca45" class="mh mb it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">条形图的特定类型</h1><p id="d28b" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">有一些特殊类型的条形图，它们在某些相当有限的情况下很有用:</p><ul class=""><li id="bb0b" class="ni nj it lb b lc ld lf lg li nk lm nl lq nm lu nn no np nq bi translated"><strong class="lb iu">径向条形图</strong>看起来像渐开线条形图，不是用笛卡尔坐标而是用极坐标绘制的。每个条从不同的径向点开始，并且具有圆形形状而不是直线。尽管这些可视化看起来相当有效，但几乎总是应该避免，因为它们严重扭曲了对背后数据的感知，并且难以分析:条形具有不同的周长(而不是长度，如常见的条形图)，内部的条形应该是最小的，看起来甚至更小，外部的条形看起来更大，即使它们中的一些可能具有相同的长度。在这样的图上没有y轴会造成额外的混乱。有时径向条形图被误称为圆形，这实际上是另一种类型的图表，我们很快就会看到。你可以查看<a class="ae ky" href="https://stackoverflow.com/questions/49729748/create-a-circular-barplot-in-python" rel="noopener ugc nofollow" target="_blank">这篇StackOverflow </a>关于如何用Python创建径向条形图的帖子。</li><li id="fc8c" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated"><strong class="lb iu">圆形和极坐标条形图</strong>以不同长度的线段形式显示条形图，从圆形(圆形版本)或点(极坐标版本)开始，而不是传统条形图中的直线。这种图形最适合大量具有明显循环模式的类别(条形)。但是，在所有其他情况下，圆形和极坐标条形图并不是一个好的选择，因为存在一些问题:缺少y轴，难以直观地解释线段之间的长度差异，较小条形(靠近基圆或基点的条形)的视错觉甚至更小。这里的演示了如何在matplotlib中创建一个极坐标条形图。</li><li id="3acc" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Gantt_chart" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">甘特图</strong> </a>。说明项目进度、不同活动之间的关系以及当前进度状态。</li><li id="faae" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Waterfall_chart" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">瀑布图</strong> </a>。显示在数据序列中连续应用正或负变化后，起始值如何被修改(增加或减少)到最终值。</li></ul><h1 id="e7fc" class="mh mb it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><p id="a251" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">简而言之，即使条形图仍然是最流行的可视化类型来说明整体由什么组成，为了更有效地讲故事，我们总是可以考虑一些特定情况的替代方案，或者在特定类型的条形图之间进行选择。为了进一步阅读，你可以找到有用的<a class="ae ky" rel="noopener" target="_blank" href="/bar-plots-best-practices-and-issues-30f1ad32c68f">这篇文章</a>，讨论了如何创建有意义的条形图的最佳实践和问题。</p><p id="46c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="53ef" class="ma mb it lw b gy mc md l me mf">   /.---.\<br/>   |`````|<br/>   \     /<br/>    `-.-'           ____<br/>      |    /\     .'   /\<br/>    __|__  |K----;    |  |<br/>   `-----` \/     '.___\/</span></pre><p id="0396" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢这篇文章，你也可以发现下面这些有趣的:</p><div class="nw nx gp gr ny nz"><a rel="noopener follow" target="_blank" href="/bar-plots-best-practices-and-issues-30f1ad32c68f"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd iu gy z fp oe fr fs of fu fw is bi translated">条形图:最佳实践和问题</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">如何创建一个有洞察力的图表</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">towardsdatascience.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on ks nz"/></div></div></a></div><div class="nw nx gp gr ny nz"><a href="https://medium.com/geekculture/creating-a-waterfall-chart-in-python-dc7bcddecb45" rel="noopener follow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd iu gy z fp oe fr fs of fu fw is bi translated">用Python创建瀑布图</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">做这件事最简单的方法</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">medium.com</p></div></div><div class="oi l"><div class="oo l ok ol om oi on ks nz"/></div></div></a></div><div class="nw nx gp gr ny nz"><a rel="noopener follow" target="_blank" href="/testing-birthday-paradox-in-faker-library-python-54907d724414"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd iu gy z fp oe fr fs of fu fw is bi translated">在Faker库中测试生日悖论(Python)</h2><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">towardsdatascience.com</p></div></div><div class="oi l"><div class="op l ok ol om oi on ks nz"/></div></div></a></div></div></div>    
</body>
</html>