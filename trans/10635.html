<html>
<head>
<title>Industrializing an ML platform with Amazon SageMaker Studio</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用Amazon SageMaker Studio实现ML平台的工业化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/industrializing-an-ml-platform-with-amazon-sagemaker-studio-91b597802afe?source=collection_archive---------6-----------------------#2021-10-12">https://towardsdatascience.com/industrializing-an-ml-platform-with-amazon-sagemaker-studio-91b597802afe?source=collection_archive---------6-----------------------#2021-10-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d1f1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在企业中推广Studio的步骤和注意事项</h2></div><p id="b2bb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通常在大型企业中，ML平台管理员需要平衡治理和合规性要求与ML团队快速访问工作环境的需求，以及实施其解决方案的脚手架。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/62ce3dd83352b02606fa0040106a0d6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mhSxYflSp_wjBS2gcB0cmQ.jpeg"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">由<a class="ae lr" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae lr" href="https://unsplash.com/@chuttersnap?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> CHUTTERSNAP </a>拍摄</p></figure><p id="27dd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用SageMaker的话来说，这就是用<a class="ae lr" href="https://aws.amazon.com/sagemaker/studio/" rel="noopener ugc nofollow" target="_blank">工作室</a>访问安全、治理良好的工作环境，用<a class="ae lr" href="https://aws.amazon.com/sagemaker/pipelines/" rel="noopener ugc nofollow" target="_blank">管道</a>提供模板化的MLOps项目。</p><p id="2860" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">SageMaker提供了现成的，在这篇文章中，我将分享ML平台团队如何组织、标准化和加速他们的供应。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi ls"><img src="../Images/3a76e57cb61f56df781d7d1a2112f2a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rknmJ5kVVJyhUE_gsOLzBg.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated"><em class="lt">包含相关人物角色的ML工作流示例(</em>作者图片)</p></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="1105" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">演练概述</h1><p id="fe12" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">我们将分三步解决这个问题:</p><ul class=""><li id="dc9f" class="my mz iq kh b ki kj kl km ko na ks nb kw nc la nd ne nf ng bi translated">我们将首先建立多帐户基础和自助服务供应，以便ML团队可以在几分钟内访问批准的工作室环境。</li><li id="eb7a" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated">然后，我们将了解如何管理Studio的日常工作。</li><li id="7a03" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated">最后，我将展示如何使用SageMaker管道来启用模板化的MLOps项目。</li></ul></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="6fbe" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">先决条件</h1><p id="c1b7" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">要关注这篇文章，请确保您:</p><ol class=""><li id="5657" class="my mz iq kh b ki kj kl km ko na ks nb kw nc la nm ne nf ng bi translated">像DevOps一样，MLOps是文化、实践和工具的结合，而不仅仅是工具。确保您的企业拥有明确定义的ML运营模式和治理流程。MLOps项目模板应该只是这些的技术实现。</li><li id="f4c2" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nm ne nf ng bi translated">熟悉<a class="ae lr" href="https://aws.amazon.com/blogs/machine-learning/dive-deep-into-amazon-sagemaker-studio-notebook-architecture/" rel="noopener ugc nofollow" target="_blank"> SageMaker工作室的架构</a>。</li><li id="7407" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nm ne nf ng bi translated"><a class="ae lr" href="https://docs.aws.amazon.com/whitepapers/latest/organizing-your-aws-environment/benefits-of-using-multiple-aws-accounts.html" rel="noopener ugc nofollow" target="_blank">采用多账户战略</a>将在如何满足您的ML平台的治理、安全和运营要求方面发挥最重要的作用。确保您已经阅读了<a class="ae lr" href="https://aws.amazon.com/blogs/mt/setting-up-machine-learning-environments-aws/" rel="noopener ugc nofollow" target="_blank">在AWS上建立安全的、治理良好的机器学习环境</a>。</li><li id="2f11" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nm ne nf ng bi translated">熟悉<a class="ae lr" href="https://www.youtube.com/watch?v=Hvz2GGU3Z8g" rel="noopener ugc nofollow" target="_blank"> SageMaker管道</a>和<a class="ae lr" href="https://aws.amazon.com/blogs/machine-learning/building-automating-managing-and-scaling-ml-workflows-using-amazon-sagemaker-pipelines/" rel="noopener ugc nofollow" target="_blank"> MLOps项目模板</a>。</li></ol></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="e9f1" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">步骤1:允许最终用户访问Studio</h1><p id="ae5a" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">首先，我们希望ML团队能够自行供应工作室笔记本电脑，这样，在几分钟内，他们就可以在批准的环境中开始工作。</p><p id="f852" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将是你的ML平台的V1，一个你的团队可以努力的sprint 1。</p><h2 id="af91" class="nn mc iq bd md no np dn mh nq nr dp ml ko ns nt mn ks nu nv mp kw nw nx mr ny bi translated">在项目开发帐户中设置工作室域</h2><p id="0f6a" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">在<a class="ae lr" href="https://aws.amazon.com/blogs/mt/setting-up-machine-learning-environments-aws/" rel="noopener ugc nofollow" target="_blank">这篇文章</a>中，我分享了一些例子场景和相应的账户模式，你可以采用它们来实现ML项目。</p><p id="297f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当一个新的ML项目出现时，您可以创建一组专用于它的帐户，并在Project Dev帐户中找到project team Studio域。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nz"><img src="../Images/f4a93f2edf1702bf99b579021ed1a5c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jS5aYjaSa_XFoiQQQ6iuVg.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">使用公司数据进行项目试验的示例帐户模式。<em class="lt"> ( </em>图片<a class="ae lr" href="https://aws.amazon.com/blogs/mt/setting-up-machine-learning-environments-aws/" rel="noopener ugc nofollow" target="_blank">来自博文</a>)</p></figure><p id="bd97" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从项目开发帐户中的Studio域，团队可以连接到团队共享服务帐户中的团队范围的存储库，并共享诸如代码、容器和ML模型之类的资产。由于工作负载OU中的帐户实现了公司防护栏，ML项目团队可以通过安全网关安全地访问数据湖帐户中的数据。在此项目期间开发的工程特征可以提升到数据帐户中的特征存储中以供以后使用。</p><h2 id="e43a" class="nn mc iq bd md no np dn mh nq nr dp ml ko ns nt mn ks nu nv mp kw nw nx mr ny bi translated">启用经批准的工作室资源的自助供应</h2><p id="e238" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">您可以使用AWS服务目录启用已批准的Studio域和用户配置文件的自助供应。项目团队可以从团队共享服务帐户或项目开发帐户访问服务目录组合。</p><p id="1e66" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">参见<a class="ae lr" rel="noopener" target="_blank" href="/enabling-self-service-provisioning-of-amazon-sagemaker-studio-resources-7ac017925016">启用Amazon SageMaker Studio资源的自助供应</a>并了解如何为Studio创建服务目录组合。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oa"><img src="../Images/fa2c2fe782a8cc70b5bf4f312d067703.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A9zftm81gAo7V7Ju63sZ0g.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">作者图片</p></figure><h2 id="cac2" class="nn mc iq bd md no np dn mh nq nr dp ml ko ns nt mn ks nu nv mp kw nw nx mr ny bi translated">工作室设置的主要注意事项</h2><p id="5a9c" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">在<a class="ae lr" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-sagemaker-domain.html" rel="noopener ugc nofollow" target="_blank">域</a>级别:</p><ul class=""><li id="eed0" class="my mz iq kh b ki kj kl km ko na ks nb kw nc la nd ne nf ng bi translated"><strong class="kh ir">用户笔记本电脑的网络</strong>在Studio域级别进行管理。参见<a class="ae lr" href="https://aws.amazon.com/blogs/machine-learning/securing-amazon-sagemaker-studio-connectivity-using-a-private-vpc/" rel="noopener ugc nofollow" target="_blank">使用私有VPC保护亚马逊SageMaker Studio连接</a>了解更多详情。</li><li id="9c63" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated"><strong class="kh ir">需要为域分配一个默认的IAM执行角色</strong>。您可以选择对其所有用户简档使用此默认角色。</li><li id="f015" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated"><strong class="kh ir"> MLOps项目模板</strong>是Studio通过<a class="ae lr" href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/sagemaker.html#SageMaker.Client.enable_sagemaker_servicecatalog_portfolio" rel="noopener ugc nofollow" target="_blank"> boto3 </a>访问的服务目录产品，在<a class="ae lr" href="https://docs.aws.amazon.com/sagemaker/latest/dg/sagemaker-projects-studio-updates.html" rel="noopener ugc nofollow" target="_blank">启用权限</a>后在AWS服务目录控制台可见。您可以运行一个Lambda函数来启用它们，如本例中的<a class="ae lr" href="https://github.com/SofianHamiti/aws-service-catalog-sagemaker-studio/blob/master/domain/templates/studio_template.yaml" rel="noopener ugc nofollow" target="_blank">和</a>所示。</li></ul><p id="5bbd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<a class="ae lr" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-sagemaker-userprofile.html" rel="noopener ugc nofollow" target="_blank">用户简档</a>级别:</p><ul class=""><li id="3ff5" class="my mz iq kh b ki kj kl km ko na ks nb kw nc la nd ne nf ng bi translated"><strong class="kh ir">Studio中的认证</strong>可以通过SSO和基于IAM的方法来完成。企业可能有一个现有的身份提供者，它在用户访问AWS控制台时联合用户。如果是这种情况，您可以使用IAM为每个联合身份分配一个Studio用户配置文件。请参见<a class="ae lr" href="https://aws.amazon.com/blogs/machine-learning/configuring-amazon-sagemaker-studio-for-teams-and-groups-with-complete-resource-isolation/" rel="noopener ugc nofollow" target="_blank">为团队和组配置Amazon SageMaker Studio完全资源隔离</a>中的<em class="ob">将策略分配给Studio用户</em>部分，了解更多详细信息。</li></ul><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oc"><img src="../Images/749acb4186b4b68903a376a14086c661.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QaCQIb5f0w9s6KWcdKWcsg.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated"><em class="lt">用户使用IAM登录SageMaker Studio的认证流程(</em>图片由作者提供)</p></figure><ul class=""><li id="2cc2" class="my mz iq kh b ki kj kl km ko na ks nb kw nc la nd ne nf ng bi translated"><strong class="kh ir"> IAM执行角色</strong>也可以分配给每个使用配置文件。使用Studio时，用户承担映射到其用户配置文件的角色，这将覆盖域默认执行角色。这可以用于ML项目团队中的细粒度访问控制。例如:把数据科学家和ML工程师在项目中能做的事情分开。</li><li id="e5c9" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated"><strong class="kh ir">成本跟踪</strong>可以在账户层面进行，因为每个项目都有专门的账户。AWS具有内置支持，可在ML平台中整合和报告您的整套账户的成本。如果您需要在用户级别跟踪成本，您可以将成本分配标签应用于用户配置文件。例如:标签可以由用户ID和项目ID/成本中心组成。</li></ul><p id="5ffa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，在您的ML平台中，您应该拥有多帐户基础和经批准的工作室环境的自助供应。您的ML团队现在可以访问批准的工作室环境，并使用<a class="ae lr" href="https://docs.aws.amazon.com/sagemaker/latest/dg/notebooks-available-kernels.html" rel="noopener ugc nofollow" target="_blank">预建图像</a>在笔记本上工作。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="3060" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">第二步:日常管理工作室</h1><p id="4980" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">在这里，我们深入探讨ML平台团队可能应用于其工作室环境的常见定制。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi od"><img src="../Images/083c1f9001d09e134d35d39caf78b132.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0S6s-WyZkk06Jx62.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">来源:<a class="ae lr" href="https://docs.aws.amazon.com/sagemaker/latest/dg/studio-ui.html" rel="noopener ugc nofollow" target="_blank"> SageMaker文档</a></p></figure><p id="cffb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这可能是一个sprint 2，但是请记住，定制可能代表您的平台团队的持续努力，因为项目团队的需求会随着时间的推移而发展。</p><h2 id="4e86" class="nn mc iq bd md no np dn mh nq nr dp ml ko ns nt mn ks nu nv mp kw nw nx mr ny bi translated">使用IAM策略管理用户权限</h2><p id="4f17" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">当用户打开Studio时，他们承担与其用户配置文件相关联的执行角色，因此需要控制该角色的权限。</p><p id="bab9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以简化权限管理，并对参与项目的所有用户配置文件使用相同的IAM角色。这是可行的，因为项目已经在帐户级别被隔离。或者，如果ML团队有需要不同权限的角色，您可以使用多个IAM角色。</p><p id="64f0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">SageMaker提供了<a class="ae lr" href="https://docs.aws.amazon.com/service-authorization/latest/reference/list_amazonsagemaker.html" rel="noopener ugc nofollow" target="_blank">特定于服务的资源、动作和条件上下文键</a>，以便与IAM一起使用。另请参见<a class="ae lr" href="https://docs.aws.amazon.com/service-authorization/latest/reference/reference_policies_actions-resources-contextkeys.html#actions_table" rel="noopener ugc nofollow" target="_blank">本页，了解对其他AWS服务的管理权限</a>。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oe"><img src="../Images/3857d116199e5168308012ba62927081.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P9ZHw2TyrDa94DH8dXu3mQ.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">项目工作流程示例。用户访问他们的Studio环境，并在SageMaker中手动启动作业，以准备数据、训练和托管模型。(图片由作者提供)</p></figure><p id="8a3e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">至少，你的ML团队想要:</p><ul class=""><li id="3a70" class="my mz iq kh b ki kj kl km ko na ks nb kw nc la nd ne nf ng bi translated">能够启动SageMaker处理、培训、超参数调整和自动驾驶作业。</li><li id="7816" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated">对SageMaker控制台页面具有读取权限，以监控作业状态。</li><li id="bafb" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated">他们的容器发送给<em class="ob"> stdout </em>或<em class="ob"> stderr </em>的任何东西都会被发送到Amazon CloudWatch日志。因此，他们将需要对CloudWatch日志的读取权限来调试作业和端点。</li></ul><p id="e395" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">规模化管理IAM权限</strong></p><p id="228b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在某种程度上，您可能会让数百个ML团队在您的平台上工作，并且需要一种方法来扩展权限管理。通过CI/CD管道实现流程自动化会有所帮助。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi of"><img src="../Images/0afcabdcb98b68cbdc29d04323316778.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/0*xNn9OVEwJbnqIS9w.jpg"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">在CI/CD管道中嵌入cfn-policy-validator工具。(图片<a class="ae lr" href="https://aws.amazon.com/blogs/security/validate-iam-policies-in-cloudformation-templates-using-iam-access-analyzer/" rel="noopener ugc nofollow" target="_blank">来自博文</a></p></figure><p id="e9e4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">更多详细信息，请参见<a class="ae lr" href="https://aws.amazon.com/blogs/security/validate-iam-policies-in-cloudformation-templates-using-iam-access-analyzer/" rel="noopener ugc nofollow" target="_blank">使用IAM访问分析器</a>验证云信息模板中的IAM策略。</p><h2 id="f301" class="nn mc iq bd md no np dn mh nq nr dp ml ko ns nt mn ks nu nv mp kw nw nx mr ny bi translated">在Studio中限制实例类型</h2><p id="bbf7" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">您可能希望限制ML团队在Studio中可以使用的实例类型，以控制成本。例如:默认情况下只允许某些CPU实例，需要时允许GPU实例。</p><p id="789f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，您可以调整用户配置文件的IAM权限。特别是，您需要对执行角色限制的是<code class="fe og oh oi oj b">sagemaker:CreateApp</code>权限，而<code class="fe og oh oi oj b">sagemaker:InstanceTypes</code>是要使用的条件键。</p><p id="b04d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下是拒绝除t3实例之外的所有SageMaker实例类型的策略示例:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="ok ol l"/></div></figure><h2 id="4c65" class="nn mc iq bd md no np dn mh nq nr dp ml ko ns nt mn ks nu nv mp kw nw nx mr ny bi translated">使用生命周期配置定制工作室环境</h2><p id="e9d1" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">Studio支持生命周期配置。它们提供了一种自动地、可重复地将定制应用于Studio环境的方法，包括:</p><ul class=""><li id="81f3" class="my mz iq kh b ki kj kl km ko na ks nb kw nc la nd ne nf ng bi translated">安装自定义软件包</li><li id="ee51" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated">配置非活动笔记本应用程序的自动关闭</li><li id="6d95" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated">设置Git配置</li></ul><p id="acaf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">参见<a class="ae lr" href="https://aws.amazon.com/blogs/machine-learning/customize-amazon-sagemaker-studio-using-lifecycle-configurations/" rel="noopener ugc nofollow" target="_blank">使用生命周期配置定制Amazon SageMaker Studio</a>了解更多详情。</p><h2 id="0e35" class="nn mc iq bd md no np dn mh nq nr dp ml ko ns nt mn ks nu nv mp kw nw nx mr ny bi translated">自动化SageMaker Studio自定义图像的设置</h2><p id="b9ae" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">除了在<a class="ae lr" href="https://docs.aws.amazon.com/sagemaker/latest/dg/notebooks-available-kernels.html" rel="noopener ugc nofollow" target="_blank">预构建映像</a>中提供的库之外，您的ML团队还可以使用库来运行他们的笔记本。Studio允许您创建包含他们最喜欢的库的容器，并将它们作为自定义图像<em class="ob"> </em>附加到他们的域中。</p><p id="062f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以为自定义映像实现简单的连续交付，以自动化该过程。参见<a class="ae lr" rel="noopener" target="_blank" href="/automating-the-setup-of-sagemaker-studio-custom-images-4a3433fd7148">自动化SageMaker Studio定制图像的设置</a>了解更多详情。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oc"><img src="../Images/7dd885cb53d2d73573788cb4e16bb068.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZCtHjqAYcjOcug5y5uYM5g.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">作者图片</p></figure><p id="62c0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您甚至可以将其打包为<a class="ae lr" href="https://github.com/SofianHamiti/aws-service-catalog-sagemaker-studio/tree/master/custom-image" rel="noopener ugc nofollow" target="_blank">服务目录产品</a>，以便按需访问。</p><h2 id="a460" class="nn mc iq bd md no np dn mh nq nr dp ml ko ns nt mn ks nu nv mp kw nw nx mr ny bi translated">在您的服务目录组合中添加更多产品</h2><p id="6fb1" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">随着时间的推移，您可以在服务目录中添加更多产品，并使ML团队能够在其项目中做更多工作。</p><p id="36d4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下是您的团队可能需要的产品示例:</p><ul class=""><li id="04eb" class="my mz iq kh b ki kj kl km ko na ks nb kw nc la nd ne nf ng bi translated">亚马逊云9环境。除了朱庇特之外。</li><li id="3007" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated">容器映像构建器管道。用于构建SageMaker作业中使用的docker容器的代码repo + CI管道。流水线可以<a class="ae lr" href="https://container-devsecops.awssecworkshops.com/" rel="noopener ugc nofollow" target="_blank">对图像</a>进行林挺和安全扫描。</li><li id="b934" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated"><a class="ae lr" href="https://www.youtube.com/watch?v=mHEUlPFT6xg" rel="noopener ugc nofollow" target="_blank"> SageMaker特征店</a>中的特征组。</li><li id="3575" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated">亚马逊EMR集群<a class="ae lr" href="https://aws.amazon.com/blogs/machine-learning/perform-interactive-data-engineering-and-data-science-workflows-from-amazon-sagemaker-studio-notebooks/" rel="noopener ugc nofollow" target="_blank">用Studio </a>的Spark处理数据。</li><li id="d91f" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated">亚马逊EKS集群</li><li id="9c07" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated">任何通过基础设施即代码定义的东西:)</li></ul></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="b30f" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">步骤3:使用SageMaker管道启用MLOps项目</h1><p id="3fc9" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">ML团队可能需要工作流程编排、模型注册和CI/CD的脚手架，以减少运行端到端MLOps项目的工作量。<a class="ae lr" href="https://www.youtube.com/watch?v=Hvz2GGU3Z8g" rel="noopener ugc nofollow" target="_blank"> SageMaker Pipelines </a>满足了这一需求。</p><p id="5a67" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在sprint 3中，您可以打包MLOps项目模板，并允许ML团队通过服务目录自行配置它们。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi om"><img src="../Images/0c1a5525b647ef6eae664cb7485559a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KmslKiF-0Gf1hsr5eV5Isg.jpeg"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">用于构建、培训和部署模型的MLOps项目模板示例。(图片<a class="ae lr" href="https://aws.amazon.com/blogs/machine-learning/building-automating-managing-and-scaling-ml-workflows-using-amazon-sagemaker-pipelines/" rel="noopener ugc nofollow" target="_blank">来自博文</a>)</p></figure><h2 id="396e" class="nn mc iq bd md no np dn mh nq nr dp ml ko ns nt mn ks nu nv mp kw nw nx mr ny bi translated">为跨客户部署构建MLOps项目模板</h2><p id="c0a9" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">对于MLOps，除了ML团队可以访问的项目开发帐户之外，您还可以创建项目预编程和项目生产帐户。这将在部署的操作阶段之间提供高级别的资源和安全隔离。参见<a class="ae lr" href="https://aws.amazon.com/blogs/mt/setting-up-machine-learning-environments-aws/" rel="noopener ugc nofollow" target="_blank">账户模式3此处</a>，以及<a class="ae lr" href="https://docs.aws.amazon.com/whitepapers/latest/build-secure-enterprise-ml-platform/automation-pipelines.html" rel="noopener ugc nofollow" target="_blank">在AWS上构建安全的企业机器学习平台</a>了解更多详情。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi on"><img src="../Images/5c94d8ac35a326cd56c4997590e1b619.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CZPXGkFAqNFLry2W.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">您可以用来生产ML项目的客户布局示例。(图片由作者提供)</p></figure><p id="3a42" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以从头开始创建<a class="ae lr" href="https://docs.aws.amazon.com/sagemaker/latest/dg/sagemaker-projects-templates.html" rel="noopener ugc nofollow" target="_blank">自定义项目模板，或者修改SageMaker提供的</a>模板。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oo"><img src="../Images/4e395bbccd2af73f9c8b49c38d0bb3fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lK1jcZnOVCD0-3SzgFv-pw.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">如果您不确定从哪里开始，您可以在导入的服务目录产品组合中找到预构建的MLOps模板。你可以把它们作为自己制作的基础。(图片由作者提供)</p></figure><p id="a651" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您的MLOps项目模板需要位于与团队共享服务/自动化帐户共享的服务目录组合中。启动后，它将在该帐户中创建代码仓库、<a class="ae lr" href="https://aws.amazon.com/blogs/devops/aws-building-a-secure-cross-account-continuous-delivery-pipeline/" rel="noopener ugc nofollow" target="_blank">跨帐户CI/CD管道</a>和工件存储。ML团队可以使用跨帐户IAM权限从项目开发帐户访问这些内容。</p><h2 id="f14b" class="nn mc iq bd md no np dn mh nq nr dp ml ko ns nt mn ks nu nv mp kw nw nx mr ny bi translated">在您的MLOps模板中使用第三方工具</h2><p id="c50c" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">您的企业可能有标准化的代码仓库和CI/CD工具。</p><p id="ded7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下是您可以在MLOps项目模板中完成的集成示例:</p><ul class=""><li id="6571" class="my mz iq kh b ki kj kl km ko na ks nb kw nc la nd ne nf ng bi translated">对于CodeCommit、CodeBuild和CodePipeline，您可以简单地重用鲍鱼示例的<a class="ae lr" href="https://www.youtube.com/watch?v=Hvz2GGU3Z8g" rel="noopener ugc nofollow" target="_blank">，并使其跨帐户工作。</a></li><li id="eac5" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated"><a class="ae lr" href="https://aws.amazon.com/blogs/machine-learning/create-amazon-sagemaker-projects-using-third-party-source-control-and-jenkins/" rel="noopener ugc nofollow" target="_blank">使用GitHub和Jenkins的第三方源代码控制</a>。</li><li id="9d39" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated"><a class="ae lr" href="https://github.com/aws-samples/sagemaker-custom-project-templates/tree/main/mlops-template-gitlab" rel="noopener ugc nofollow" target="_blank"> GitLab和GitLab管道</a>。</li><li id="bef9" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated">SageMaker有一个<a class="ae lr" href="https://docs.aws.amazon.com/sagemaker/latest/dg/model-registry.html" rel="noopener ugc nofollow" target="_blank">原生模型注册表</a>，但是如果需要的话，你也可以使用MLflow。请参见<a class="ae lr" rel="noopener" target="_blank" href="/mlops-with-mlflow-and-amazon-sagemaker-pipelines-33e13d43f238">使用MLFlow和Amazon SageMaker管道的MLOps】。</a></li></ul><p id="0593" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您甚至可以构建模板来解决重复出现的ML用例。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="de84" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">结论</h1><p id="1b07" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">在这篇文章中，我分享了ML平台团队如何让分布式ML团队使用SageMaker Studio交付他们的项目，以及这样做的关键考虑。</p><p id="662e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该方法基于多帐户基础和AWS服务目录，允许自助供应经批准的Studio环境和MLOps项目模板。</p><p id="e194" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">更进一步，了解阿斯利康如何在AWS上构建了一个工业化的ML平台，为数百名科学家简化药物研发、临床试验和患者安全。</p></div></div>    
</body>
</html>