<html>
<head>
<title>Comparing the Speed and Filesize of to_csv(), np.save(), to_hdf(), and to_pickle() Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">比较to_csv()、np.save()、to_hdf()和to_pickle()函数的速度和文件大小</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/comparing-the-speed-and-filesize-of-to-csv-np-save-to-hdf-to-pickle-functions-6c53a6a3fc82?source=collection_archive---------15-----------------------#2021-06-04">https://towardsdatascience.com/comparing-the-speed-and-filesize-of-to-csv-np-save-to-hdf-to-pickle-functions-6c53a6a3fc82?source=collection_archive---------15-----------------------#2021-06-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7e33" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在日常I/O操作中，读取时间加速66倍，写入时间加速25倍，文件大小加速0.39倍。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/02d763c3c9efcd20ce5f300b6cdf9a71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2t_Pf0aU-U4K14FzjmYpAg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@redzeppelin" rel="noopener ugc nofollow" target="_blank">红色齐柏林飞艇</a>在<a class="ae ky" href="https://unsplash.com/photos/pfiRyJvpyrE" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="8cff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用Pandas和NumPy读写文件是数据科学家和工程师的日常任务。</p><p id="915b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们比较一下这些库提供的最常见的写/读表格数据的函数。</p><p id="92a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这些I/O操作中，我们可以让我们的代码快得多<strong class="lb iu">节省时间，让我们的老板和我们自己都高兴。</strong></p><p id="2daf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以通过选择适当的保存功能来节省大量的磁盘空间。</p><p id="a7b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，让我们创建一个10，000，000行2列的数据框架。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><h1 id="42e4" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">to_csv() / pd.read_csv()</h1><p id="f271" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">保存熊猫数据帧最常见的方法。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/aed48a231429227bc8994beac91ade36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mn6HhrLYx2X-amq9Wd-BLw.png"/></div></div></figure><h1 id="88ad" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">np.save() / np.load()到。神经肽y</h1><p id="b043" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">我们可以将DataFrame转换为NumPy数组，然后使用np.save()将其保存为. npy文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/4541060e0a117ac5fb636d06193dd74c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RKaOKqkpqZ1fA3MdfvWBUQ.png"/></div></div></figure><p id="5771" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">np.save()比to_csv() <br/>快× 2.43倍，np.load()比pd.read_csv() <br/>慢× 3.47倍。npy文件的大小为× 0.86。csv文件</p><p id="3013" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们读取它时，它将是一个NumPy数组，如果我们想把它用作熊猫数据帧，我们需要转换它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/d856126e9cc43d88d7bc8dd4b1fb08b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zc4Bp3KRWV2izAGHEi8m7A.png"/></div></div></figure><p id="4954" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从np.load()到DataFrame的转换需要+2.06秒</p><h1 id="6772" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">np.savez_compressed() / np.load()到。npz</h1><p id="9e4c" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">np.save()的压缩版本。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/21b883116dd320782946f7213923d886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HFgrQTf8z_NGrjr7bXUEjw.png"/></div></div></figure><p id="694d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">阅读时。npz文件需要195 μs，但是为了访问其中的NumPy数组，我们必须使用<code class="fe mv mw mx my b">a['data']</code>，这需要32.8 s。</p><p id="c594" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">np.savez_compressed()比to_csv() <br/>快× 1.1倍，np.load()比pd.read_csv() <br/>快× 1.37倍。npy文件的大小为× 0.44。csv文件</p><p id="5708" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们读取它时，它将是一个NumPy数组，如果我们想把它用作熊猫数据帧，我们需要转换它。正如我们之前看到的，这又需要2.06秒。</p><h1 id="59ca" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">to_hdf() / pd.read_hdf()</h1><p id="7295" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">使用HDFStore将包含的数据写入HDF5文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/930f2d03443db54cbb19232462d498e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uNN0mF7-wkWKxCpTvmeLiA.png"/></div></div></figure><p id="a4a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">to_hdf()比to_csv() <br/>快× 19.4倍pd.read_hdf()比pd.read_csv() <br/>快× 15倍. h5文件是× 0.59的大小。csv文件</p><h1 id="7c74" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">to_pickle() / pd.read_pickle()</h1><p id="81cb" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">将对象序列化到文件</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/760fea0ba9febd08945a863d29b41710.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uIOvGWvidBxNYwHJE2RUow.png"/></div></div></figure><p id="b857" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">to_pickle()比to_csv() <br/>快× 25.8倍，pd.read_pickle()比pd.read_csv() <br/>快× 66倍。pkl文件的大小为× 0.39。csv文件</p><h1 id="4962" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">摘要</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/0c58179e4b4968d8f734f7cacf6e1f17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y85X_uWLKpcMNoDBJdjINQ.png"/></div></div></figure><p id="b250" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们只对在Python程序中使用文件感兴趣时，我们可以有效地使用pickles，因为它们在读写操作和磁盘空间方面都要快得多。</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h2 id="a877" class="nh ly it bd lz ni nj dn md nk nl dp mh li nm nn mj lm no np ml lq nq nr mn ns bi translated">不确定接下来要读什么？这里有两个选择:</h2><div class="nt nu gp gr nv nw"><a rel="noopener follow" target="_blank" href="/time-series-analysis-with-theory-plots-and-code-part-1-dd3ea417d8c4"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd iu gy z fp ob fr fs oc fu fw is bi translated">时间序列分析与理论、图表和代码第1部分</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">什么是时间序列，预测任务的步骤是什么？如何绘制趋势和季节性？如何…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">towardsdatascience.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok ks nw"/></div></div></a></div><div class="nt nu gp gr nv nw"><a href="https://medium.com/analytics-vidhya/topic-modeling-on-my-watched-movies-1d17491803b4" rel="noopener follow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd iu gy z fp ob fr fs oc fu fw is bi translated">对我观看的电影进行主题建模</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">将IMDb与维基百科电影数据合并，使用LDA构建、评估和可视化主题。</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">medium.com</p></div></div><div class="of l"><div class="ol l oh oi oj of ok ks nw"/></div></div></a></div><h2 id="f06a" class="nh ly it bd lz ni nj dn md nk nl dp mh li nm nn mj lm no np ml lq nq nr mn ns bi translated">保持联络</h2><p id="53e8" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">关注我的<a class="ae ky" href="https://medium.com/@dimitris.effrosynidis" rel="noopener"> Medium </a>了解更多类似内容。<br/>让我们在<a class="ae ky" href="https://www.linkedin.com/in/dimitrios-effrosynidis/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上连线。<br/>检查我的<a class="ae ky" href="https://github.com/Deffro" rel="noopener ugc nofollow" target="_blank"> GitHub </a>。</p></div></div>    
</body>
</html>