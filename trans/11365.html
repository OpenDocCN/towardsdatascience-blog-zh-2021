<html>
<head>
<title>apply() vs map() vs applymap() in Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫中的apply() vs map() vs applymap()</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/apply-vs-map-vs-applymap-pandas-529acdf6d744?source=collection_archive---------10-----------------------#2021-11-08">https://towardsdatascience.com/apply-vs-map-vs-applymap-pandas-529acdf6d744?source=collection_archive---------10-----------------------#2021-11-08</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="33f8" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">讨论Python和Pandas中apply()、map()和applymap()的区别</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/27d45edb1e5cdcaf75a9680baef3ddd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YiTpUozE6iZpmI9Pudzztg.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://unsplash.com/@wudan3551?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">木丹</a>在<a class="ae kz" href="https://unsplash.com/s/photos/pandas?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h2 id="36bf" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">介绍</h2><p id="395e" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">通常，我们需要对DataFrame的列或行应用某些函数，以便更新值或者甚至创建新的列。熊猫最常用的手术是<code class="fe mp mq mr ms b">apply</code>、<code class="fe mp mq mr ms b">map</code>和<code class="fe mp mq mr ms b">applymap</code>方法。</p><p id="7818" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">在今天的指南中，我们将探索所有三种方法，并了解它们各自的工作原理。此外，我们将讨论何时使用其中一个。</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><p id="26a7" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">首先，让我们创建一个示例数据框架，我们将在本文中使用它来演示一些概念，这些概念将有助于我们强调<code class="fe mp mq mr ms b">apply()</code>、<code class="fe mp mq mr ms b">map()</code>和<code class="fe mp mq mr ms b">applymap()</code>之间的区别。</p><pre class="kk kl km kn gu nf ms ng nh aw ni bi"><span id="07ee" class="la lb iu ms b gz nj nk l nl nm">import pandas as pd</span><span id="0de2" class="la lb iu ms b gz nn nk l nl nm"><br/>df = pd.DataFrame(<br/>    [<br/>        (1, 521, True, 10.1, 'Hello'),<br/>        (2, 723, False, 54.2, 'Hey'),<br/>        (3, 123, False, 33.2, 'Howdy'),<br/>        (4, 641, True, 48.6, 'Hi'),<br/>        (5, 467, False, 98.1, 'Hey'),<br/>    ],<br/>    columns=['colA', 'colB', 'colC', 'colD', 'colE']<br/>)</span><span id="3d2d" class="la lb iu ms b gz nn nk l nl nm">print(df)<br/><em class="no">   colA  colB   colC  colD   colE<br/>0     1   521   True  10.1  Hello<br/>1     2   723  False  54.2    Hey<br/>2     3   123  False  33.2  Howdy<br/>3     4   641   True  48.6     Hi<br/>4     5   467  False  98.1    Hey</em></span></pre></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h2 id="15a0" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">apply()方法</h2><p id="3c25" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated"><code class="fe mp mq mr ms b"><a class="ae kz" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.apply.html" rel="noopener ugc nofollow" target="_blank">pandas.DataFrame.apply</a></code>方法用于沿着pandas数据帧的指定轴应用一个函数。<code class="fe mp mq mr ms b">apply()</code>方法一次对整行或整列进行操作，最适用于<strong class="ly iv">应用</strong> <strong class="ly iv">函数</strong>而<strong class="ly iv">无法矢量化的情况。</strong>注意方法的输入必须是一个<em class="no">可调用的</em>。</p><pre class="kk kl km kn gu nf ms ng nh aw ni bi"><span id="4c6b" class="la lb iu ms b gz nj nk l nl nm">import numpy as np</span><span id="046d" class="la lb iu ms b gz nn nk l nl nm"><strong class="ms iv">df[['colA', 'colB']] = df[['colA', 'colB']].apply(np.sqrt)</strong></span><span id="7da1" class="la lb iu ms b gz nn nk l nl nm">print(df)<br/><em class="no">       colA       colB   colC  colD   colE<br/>0  1.000000  22.825424   True  10.1  Hello<br/>1  1.414214  26.888659  False  54.2    Hey<br/>2  1.732051  11.090537  False  33.2  Howdy<br/>3  2.000000  25.317978   True  48.6     Hi<br/>4  2.236068  21.610183  False  98.1    Hey</em></span></pre><p id="275c" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">此外，该方法也适用于熊猫系列(见<code class="fe mp mq mr ms b"><a class="ae kz" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.apply.html" rel="noopener ugc nofollow" target="_blank">pandas.Series.apply</a></code>)。</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h2 id="5de3" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">map()方法</h2><p id="8ee1" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated"><code class="fe mp mq mr ms b"><a class="ae kz" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.map.html" rel="noopener ugc nofollow" target="_blank">pandas.Series.map</a></code>方法只能应用于pandas系列对象，用于根据输入映射系列的值，该输入用于将每个值替换为从字典、函数甚至另一个<code class="fe mp mq mr ms b">Series</code>对象中导出的指定值。</p><p id="4a35" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">注意，该方法一次对一个元素进行操作，丢失的值将在输出中表示为<code class="fe mp mq mr ms b">NaN</code>。</p><pre class="kk kl km kn gu nf ms ng nh aw ni bi"><span id="223c" class="la lb iu ms b gz nj nk l nl nm"><strong class="ms iv">df['colE'] = df['colE'].map({'Hello': 'Good Bye', 'Hey': 'Bye'})</strong></span><span id="ff75" class="la lb iu ms b gz nn nk l nl nm">print(df)<br/><em class="no">   colA  colB   colC  colD      colE<br/>0     1   521   True  10.1  Good Bye<br/>1     2   723  False  54.2       Bye<br/>2     3   123  False  33.2       NaN<br/>3     4   641   True  48.6       NaN<br/>4     5   467  False  98.1       Bye</em></span></pre></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h2 id="e115" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">applymap()方法</h2><p id="cb21" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">最后，<code class="fe mp mq mr ms b"><a class="ae kz" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.applymap.html" rel="noopener ugc nofollow" target="_blank">pandas.DataFrame.applymap</a></code>方法只能应用于pandas DataFrame对象，并用于在元素方面应用指定的函数<strong class="ly iv"/>。该方法只接受<em class="no">调用</em>，最适合转换多行或多列中的值。</p><pre class="kk kl km kn gu nf ms ng nh aw ni bi"><span id="d640" class="la lb iu ms b gz nj nk l nl nm"><strong class="ms iv">df[['colA', 'colD']] = df[['colA', 'colD']].applymap(lambda x: x**2)</strong></span><span id="1d16" class="la lb iu ms b gz nn nk l nl nm">print(df)<br/><em class="no">   colA  colB   colC     colD   colE<br/>0     1   521   True   102.01  Hello<br/>1     4   723  False  2937.64    Hey<br/>2     9   123  False  1102.24  Howdy<br/>3    16   641   True  2361.96     Hi<br/>4    25   467  False  9623.61    Hey</em></span></pre></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h2 id="78f3" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">最后的想法</h2><p id="f311" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在今天的简短指南中，我们讨论了<code class="fe mp mq mr ms b">apply()</code>、<code class="fe mp mq mr ms b">map()</code>和<code class="fe mp mq mr ms b">applymap()</code>方法在熊猫身上的作用。此外，我们展示了如何使用这些方法，并探讨了它们的主要区别。</p><p id="3ed9" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated">有时，可能不清楚您是否需要使用<code class="fe mp mq mr ms b">apply()</code>或<code class="fe mp mq mr ms b">applymap()</code>方法，因此，最好的方法是简单地测试两种方法，然后选择更有效/更快的方法。</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><p id="1b77" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated"><a class="ae kz" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="ly iv">成为会员</strong> </a> <strong class="ly iv">阅读介质上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="np nq gq gs nr ns"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">通过我的推荐链接加入Medium-Giorgos Myrianthous</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph lw lx iu ly b lz mt jv mb mc mu jy me lj mv mg mh ln mw mj mk lr mx mm mn mo in bi translated"><strong class="ly iv">你可能也会喜欢</strong></p><div class="np nq gq gs nr ns"><a rel="noopener follow" target="_blank" href="/whats-the-difference-between-static-and-class-methods-in-python-1ef581de4351"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">Python中静态方法和类方法有什么区别？</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">关于classmethod和staticmethod，您只需要知道</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oh l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu ns"><a rel="noopener follow" target="_blank" href="/automating-python-workflows-with-pre-commit-hooks-e5ef8e8d50bb"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">使用预提交挂钩自动化Python工作流</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">什么是预提交钩子，它们如何给你的Python项目带来好处</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oi l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu ns"><a rel="noopener follow" target="_blank" href="/mastering-indexing-and-slicing-in-python-443e23457125"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">掌握Python中的索引和切片</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">深入研究有序集合的索引和切片</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oj l od oe of ob og kt ns"/></div></div></a></div></div></div>    
</body>
</html>