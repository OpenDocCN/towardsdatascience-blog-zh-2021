<html>
<head>
<title>How to Extract Labelled Topics from Natural Language Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从自然语言数据中提取标注主题</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-extract-labelled-topics-from-natural-language-data-8af121491bfd?source=collection_archive---------28-----------------------#2021-04-27">https://towardsdatascience.com/how-to-extract-labelled-topics-from-natural-language-data-8af121491bfd?source=collection_archive---------28-----------------------#2021-04-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/166796c0274f2dae93ac0aad0d3e3bcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QKqZsMgvHCNbPFQl5a8m5Q.jpeg"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@sigmund?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">西格蒙德</a>在<a class="ae kc" href="https://unsplash.com/s/photos/extraction?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="6a4e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设您的项目中有大量难以处理的自然语言数据。也许你刮了它，做了101个API调用，或者其他人把它送给了你。</p><p id="01d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很自然，你想看看里面是什么。但是真的很大吗？因此，这就是主题建模的用武之地，它可以帮助从自然语言数据集中提取排名前<em class="lb"> n </em>的主题。</p><p id="0cc2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是你知道主题实际上是什么是非常重要的，对吗？你不只是想让他们成为话题1、话题2等等。另外，如果你完成后能把这个转换成一些时髦的视觉效果就更好了。</p><p id="1727" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，嘿，不是已经有很多关于主题建模的教程了吗？有，有！但是根据我的经验，他们很少关注让输出更加用户友好和易于理解。虽然像<a class="ae kc" href="https://pyldavis.readthedocs.io/en/latest/readme.html" rel="noopener ugc nofollow" target="_blank"> PyLDAvis </a>这样的库对于在Jupyter笔记本中详细探索自然语言主题来说是非常棒的，但它们不太能与非技术同事或利益相关者共享。</p><p id="9ac6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这就是我这篇文章想要解决的问题。我将讨论主题建模一个混乱的自然语言数据集，你可能会在一个网络抓取项目中得到这种数据集。到我们完成的时候，希望我的python函数会有意义，你可以复制、粘贴和调整它们到你自己的项目中。</p><h2 id="4c2b" class="lc ld iq bd le lf lg dn lh li lj dp lk ko ll lm ln ks lo lp lq kw lr ls lt lu bi translated">数据准备</h2><p id="2ab0" class="pw-post-body-paragraph kd ke iq kf b kg lv ki kj kk lw km kn ko lx kq kr ks ly ku kv kw lz ky kz la ij bi translated">在整篇文章中，我将使用来自Kaggle的数据。这是Twitter上关于客户支持问题的推文集合，所以这是一个非常混乱的自然语言数据集，其中有许多不同的主题。</p><p id="feac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先要做的是读入数据并清理它。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="f7fa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在检查了没有丢失数据的行之后，我使用了一个非常有用的tweets预处理库，您可以在用语法<code class="fe mg mh mi mj b">import preprocessor as p</code>导入之前用<code class="fe mg mh mi mj b">pip install tweet-preprocessor</code>安装它。这有助于快速删除表情符号、网址和其他噪音；然而，我避免删除标签，因为我想保留文本数据。所以我只是保持简单，在清理文本的函数中调用<code class="fe mg mh mi mj b">text.replace("#", "")</code>。</p><h2 id="2ed2" class="lc ld iq bd le lf lg dn lh li lj dp lk ko ll lm ln ks lo lp lq kw lr ls lt lu bi translated">为主题建模</h2><p id="d264" class="pw-post-body-paragraph kd ke iq kf b kg lv ki kj kk lw km kn ko lx kq kr ks ly ku kv kw lz ky kz la ij bi translated">现在转到主题建模，我已经用一种非常简单的方式完成了，因为这是一个很大的领域，并不是本文的重点！</p><p id="1c00" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">简而言之，我使用了一个简单的计数矢量器来生成一个令牌计数矩阵，即不同的重要单词在我们正在分析的文本中出现了多少次。我还明确表示，我感兴趣的是两到三个单词的配对，而不仅仅是单个单词。</p><p id="7237" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着在“快速棕色狐狸跳过懒狗”这句话中,“棕色”不能算作象征，但“快速棕色”或“狐狸跳过”可以。我这样做是因为我认为这将有助于理解客户支持中的主题；例如,“电子邮件支持”而不仅仅是“支持”是否经常与特定的公司或软件搭配使用？</p><p id="d56f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我将使用LDA模型来尝试查看正文中的主题。这里有一篇非常好的文章和一些相应的论文，关于这是如何工作的<a class="ae kc" href="https://scikit-learn.org/stable/modules/decomposition.html#latentdirichletallocation" rel="noopener ugc nofollow" target="_blank">，</a>，如果你打算使用这个模型，我鼓励你去读一读！但是在一个非常简单的层面上，这实质上是将单词——或者在我们的例子中是成对的单词——分组到主题中，基于它们是那些主题的成员的概率。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="f864" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在已经完成了，是时候解释输出了！</p><h2 id="8c11" class="lc ld iq bd le lf lg dn lh li lj dp lk ko ll lm ln ks lo lp lq kw lr ls lt lu bi translated">创建主题关键词</h2><p id="1d77" class="pw-post-body-paragraph kd ke iq kf b kg lv ki kj kk lw km kn ko lx kq kr ks ly ku kv kw lz ky kz la ij bi translated">这就是代码变得更加繁重和复杂的地方。下一个Jupyter笔记本片段将完成以下步骤:</p><ol class=""><li id="f899" class="mk ml iq kf b kg kh kk kl ko mm ks mn kw mo la mp mq mr ms bi translated">创建一个通用的工具函数来展平列表。这有助于从LDA模型对象中获取数据。</li><li id="8e20" class="mk ml iq kf b kg mt kk mu ko mv ks mw kw mx la mp mq mr ms bi translated">一个<code class="fe mg mh mi mj b">write_data</code>函数，它从我之前使用的CountVecotrizer中获取清晰可读的数据，将大量文本转换为感兴趣的令牌矩阵，并从LDA模型中获取。我也把这个信息写到文件里了。</li><li id="a026" class="mk ml iq kf b kg mt kk mu ko mv ks mw kw mx la mp mq mr ms bi translated">一旦完成，我们就可以读入数据并使用groupby来查看哪些主题与哪些词对相关联。这通常比看起来要简单得多——主题并不总是出现在你面前，可能需要对矢量器和建模参数进行一些调整才能做到这一点。虽然这看起来很烦人，但我认为这实际上是一件非常好的事情——您可以手动检查输出，以确保模型挑选出真正有意义的主题。</li><li id="8213" class="mk ml iq kf b kg mt kk mu ko mv ks mw kw mx la mp mq mr ms bi translated">完成后，我为主题创建了一些更容易理解的名称，并将它们写入数据框架。请注意，scikitlearn的输出只是任意编号的主题，即主题1、主题2、主题3等等。这就是我们要替换的。</li><li id="6cfa" class="mk ml iq kf b kg mt kk mu ko mv ks mw kw mx la mp mq mr ms bi translated">然后，我用Seaborn制作了一个非常简单的条形图来说明到目前为止所做的工作。但是你可以制作更具视觉吸引力的图表——见下文。</li></ol><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><h2 id="47da" class="lc ld iq bd le lf lg dn lh li lj dp lk ko ll lm ln ks lo lp lq kw lr ls lt lu bi translated">用图表表示出来</h2><p id="4403" class="pw-post-body-paragraph kd ke iq kf b kg lv ki kj kk lw km kn ko lx kq kr ks ly ku kv kw lz ky kz la ij bi translated">为了可视化你的结果，我强烈推荐<a class="ae kc" href="http://rawgraphs.io" rel="noopener ugc nofollow" target="_blank">原始图表</a>。它非常易于使用，可定制性强，非常漂亮。</p><p id="435c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">举例来说，你可以使用与制作上面非常技术性的Seaborn图完全相同的数据，来制作这个冲积图。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi my"><img src="../Images/de84ae555d79c4fabe85cc04e34b2d00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YtY3599mCf44od6aAF45sA.png"/></div></div></figure><h2 id="4b14" class="lc ld iq bd le lf lg dn lh li lj dp lk ko ll lm ln ks lo lp lq kw lr ls lt lu bi translated">结论</h2><p id="b3d9" class="pw-post-body-paragraph kd ke iq kf b kg lv ki kj kk lw km kn ko lx kq kr ks ly ku kv kw lz ky kz la ij bi translated">总结一下，一旦你完成了建模，手动提取主题实际上并不难。这有点复杂，但在我看来这不是坏事，因为它迫使你详细解释建模的结果，而不是过度依赖计算机。</p><p id="1664" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦你把数据也拿出来了，你就可以用任何你喜欢的方式来绘制它。以我的经验来看，如果你要向利益相关者做演示，并且想要完全控制演示的效果，这就大不一样了。</p><p id="444b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">希望这将有助于向他人展示你的作品，让他们更容易理解，反过来也让你更欣赏！</p></div></div>    
</body>
</html>