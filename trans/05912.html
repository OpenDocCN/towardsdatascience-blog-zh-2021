<html>
<head>
<title>8 Bash Script Tips for Automation Projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动化项目的8个Bash脚本技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/8-bash-script-tips-for-automation-projects-2c63d8716f9a?source=collection_archive---------2-----------------------#2021-05-27">https://towardsdatascience.com/8-bash-script-tips-for-automation-projects-2c63d8716f9a?source=collection_archive---------2-----------------------#2021-05-27</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="8169" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">Bash脚本初学者的实用示例</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/7e5bc134ac6166df9605b8167f24a925.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UYq7DfbHSPo0Y5TebQJ41w.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Bash脚本repo backpack_intall。图片作者。</p></figure><p id="504d" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">使用Bash脚本，我有了用于安装/卸载Laravel 模块的<a class="ae lv" href="https://codeburst.io/installing-backpack-for-laravel-modules-with-a-line-of-command-eda01d72639f" rel="noopener" target="_blank">自动化</a> <a class="ae lv" href="https://backpackforlaravel.com/" rel="noopener ugc nofollow" target="_blank">背包。从这个项目中，我选择了八个实用技巧，您可以将它们应用于任何Bash脚本项目。</a></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj lw"><img src="../Images/52deff586fd6ada5f4f26bb1dcbfd18e.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*yRCAh9A8Y88Ph-7lxnPXOw.gif"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">backpack_install Bash脚本的运行。图片作者。</p></figure><h2 id="4323" class="lx ly iu bd lz ma mb dn mc md me dp mf li mg mh mi lm mj mk ml lq mm mn mo mp bi translated">背景资料</h2><p id="b21e" class="pw-post-body-paragraph kz la iu lb b lc mq jv le lf mr jy lh li ms lk ll lm mt lo lp lq mu ls lt lu in bi translated"><a class="ae lv" href="https://laravel.com/" rel="noopener ugc nofollow" target="_blank"> Laravel </a>是最流行的PHP框架。Laravel的Backpack是一个Laravel包的集合，可以帮助你构建定制的管理面板。它有八个模块<a class="ae lv" href="https://github.com/Laravel-Backpack" rel="noopener ugc nofollow" target="_blank">包括内核、权限管理器、页面管理器、菜单和文件管理器。</a></p><p id="7317" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">下面是我的<a class="ae lv" href="https://github.com/shinokada/backpack_install" rel="noopener ugc nofollow" target="_blank">背包_在Github上安装回购</a>。</p><h1 id="c165" class="mv ly iu bd lz mw mx my mc mz na nb mf ka nc kb mi kd nd ke ml kg ne kh mo nf bi translated">要求</h1><p id="4ae9" class="pw-post-body-paragraph kz la iu lb b lc mq jv le lf mr jy lh li ms lk ll lm mt lo lp lq mu ls lt lu in bi translated">您需要了解Bash脚本基础知识，并且有一些编写基本Bash脚本的经验。</p><p id="67d7" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这些文章也有助于您开始:</p><div class="ng nh gq gs ni nj"><a href="https://betterprogramming.pub/the-ultimate-programmers-guide-to-bash-scripting-2d11d4e6e978" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fp"><div class="nl ab nm cl cj nn"><h2 class="bd iv gz z fq no fs ft np fv fx it bi translated">Bash脚本编程的终极程序员指南</h2><div class="nq l"><h3 class="bd b gz z fq no fs ft np fv fx dk translated">深入探究Bash脚本，帮助您自动化任务</h3></div><div class="nr l"><p class="bd b dl z fq no fs ft np fv fx dk translated">better编程. pub</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx kt nj"/></div></div></a></div><div class="ng nh gq gs ni nj"><a href="https://betterprogramming.pub/27-simple-bash-scripting-tips-for-beginners-d6764c977546" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fp"><div class="nl ab nm cl cj nn"><h2 class="bd iv gz z fq no fs ft np fv fx it bi translated">初学者的27个简单Bash脚本技巧</h2><div class="nq l"><h3 class="bd b gz z fq no fs ft np fv fx dk translated">不要害怕Bash脚本。看完这些提示会更容易</h3></div><div class="nr l"><p class="bd b dl z fq no fs ft np fv fx dk translated">better编程. pub</p></div></div><div class="ns l"><div class="ny l nu nv nw ns nx kt nj"/></div></div></a></div><h1 id="0369" class="mv ly iu bd lz mw mx my mc mz na nb mf ka nc kb mi kd nd ke ml kg ne kh mo nf bi translated">1.在函数之前设置变量和参数</h1><p id="a809" class="pw-post-body-paragraph kz la iu lb b lc mq jv le lf mr jy lh li ms lk ll lm mt lo lp lq mu ls lt lu in bi translated"><a class="ae lv" href="https://github.com/yousefvand/shellman" rel="noopener ugc nofollow" target="_blank"> Shellman </a>不仅是VS代码的shell脚本代码片段扩展，而且它还为<a class="ae lv" href="https://github.com/yousefvand/shellman-ebook" rel="noopener ugc nofollow" target="_blank">提供了免费电子书</a>，其中包含大量有用的Bash脚本代码片段和技巧。</p><p id="e5e4" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated"><a class="ae lv" href="https://github.com/yousefvand/shellman" rel="noopener ugc nofollow" target="_blank">书</a>建议如下结构。</p><pre class="kk kl km kn gu nz oa ob oc aw od bi"><span id="78b4" class="lx ly iu oa b gz oe of l og oh">1. shebang<br/>2. summary<br/>3. handler functions<br/>4. event handers<br/>5. functions<br/>6. argument parsing<br/>7. setting default variable values<br/>8. rest of code (main body)</span></pre><p id="e865" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">通常你需要在使用变量和函数之前声明它们。我想出了一个适合我的结构。在函数之后进行参数解析和设置默认变量值不是选项。</p><p id="f377" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这是我最后得到的结构:</p><pre class="kk kl km kn gu nz oa ob oc aw od bi"><span id="0d96" class="lx ly iu oa b gz oe of l og oh">1. shebang<br/>2. summary<br/>3. default variable values<br/>4. arguments parsing (including usage function which uses variables from 3.)<br/>5. importing files (otherwise the file becomes too long.)<br/>6. functions (using variables and functions from 3, 4 &amp; 5.)<br/>7. event functions (Ctrl+C event using a function from 5 &amp; 6.)<br/>8. check-command function (checking if the system has commands.)<br/>9. read standard input<br/>10. main body (using functions from 5 &amp; 6.)</span></pre><p id="9815" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">我在函数之前声明默认变量值、解析参数并导入文件<strong class="lb iv">，这样我就可以使用变量作为函数参数。</strong></p><h1 id="a777" class="mv ly iu bd lz mw mx my mc mz na nb mf ka nc kb mi kd nd ke ml kg ne kh mo nf bi translated">2.采购/导入文件</h1><p id="6948" class="pw-post-body-paragraph kz la iu lb b lc mq jv le lf mr jy lh li ms lk ll lm mt lo lp lq mu ls lt lu in bi translated">该脚本需要安装八个模块，所以我将每个安装分成单独的文件。</p><p id="a762" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">我可以使用<code class="fe oi oj ok oa b">source ./lib/file_name</code>或<code class="fe oi oj ok oa b">. ./lib/file_name</code>将文件导入主脚本，但是Shellman提供了另一个<code class="fe oi oj ok oa b">import</code>函数。</p><p id="3a63" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">我创建了一个lib目录，并将所有要导入的文件存储在这个目录中。在主脚本中添加Shellman的导入函数:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ol om l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">使用谢尔曼的导入功能。</p></figure><p id="e1eb" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">第二行:如果你的文件有扩展名，你可以在<code class="fe oi oj ok oa b">${1}</code>后面加上<code class="fe oi oj ok oa b">.sh</code>。</p><p id="31aa" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">第0行:不需要在文件开头添加<code class="fe oi oj ok oa b">#!/usr/bin/env bash</code>，也不需要使文件可执行。如果这样做，让文本编辑器使用格式和语法突出显示。</p><h2 id="338c" class="lx ly iu bd lz ma mb dn mc md me dp mf li mg mh mi lm mj mk ml lq mm mn mo mp bi translated">使用源</h2><p id="845d" class="pw-post-body-paragraph kz la iu lb b lc mq jv le lf mr jy lh li ms lk ll lm mt lo lp lq mu ls lt lu in bi translated">如果要使用函数参数，lib目录中的文件必须有函数。例如，<code class="fe oi oj ok oa b">lib/banners</code>文件中的函数使用三个参数。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ol om l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><code class="fe oi oj ok oa b">lib/banners file.</code></p></figure><p id="be0a" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated"><code class="fe oi oj ok oa b">lib/bp_pagemanager</code>文件使用<code class="fe oi oj ok oa b">source</code>命令读取文件和其中一个函数:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ol om l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><code class="fe oi oj ok oa b">lib/bp_pagemanager file.</code></p></figure><p id="2424" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">第5行:获取横幅文件。</p><p id="2982" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">第14行:使用带有三个参数的<code class="fe oi oj ok oa b">bannerColor</code>函数。</p><h1 id="768c" class="mv ly iu bd lz mw mx my mc mz na nb mf ka nc kb mi kd nd ke ml kg ne kh mo nf bi translated">3.使用横幅</h1><p id="1685" class="pw-post-body-paragraph kz la iu lb b lc mq jv le lf mr jy lh li ms lk ll lm mt lo lp lq mu ls lt lu in bi translated">横幅是告诉用户你的脚本在做什么的一种有用的方式。如果你使用纯文本，用户不会注意到它。</p><p id="e7b8" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">导入<code class="fe oi oj ok oa b">lib/banners</code>文件并使用<code class="fe oi oj ok oa b">bannerColor</code>功能，如下例所示。</p><p id="aabc" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">它需要三个参数，横幅内容、颜色和符号。</p><p id="1866" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated"><strong class="lb iv">例子</strong>:</p><pre class="kk kl km kn gu nz oa ob oc aw od bi"><span id="1783" class="lx ly iu oa b gz oe of l og oh">bannerColor 'Installing CRUD.' "blue" "*"</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj on"><img src="../Images/5ef7611b424cbada33dff87ab1a5715b.png" data-original-src="https://miro.medium.com/v2/resize:fit:506/format:webp/1*-ntfn3-t6s0rQuAPDX5c4w.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">bannerColor的输出“安装CRUD”“蓝色”“*”。图片作者。</p></figure><pre class="kk kl km kn gu nz oa ob oc aw od bi"><span id="74bf" class="lx ly iu oa b gz oe of l og oh">bannerColor "Happy Coding!" "magenta" "*"</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj oo"><img src="../Images/ea50dbc09e9d4086ef3491c324eadec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:426/format:webp/1*j8gO8w_uAD85gSSCFiP2Tg.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">bannerColor的输出“快乐编码！”洋红色" " * "图片作者。</p></figure><pre class="kk kl km kn gu nz oa ob oc aw od bi"><span id="cedd" class="lx ly iu oa b gz oe of l og oh">bannerColor "Uninstalling ..." "red" "*"</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj op"><img src="../Images/83fc0dba782bb086b756d18580fb4700.png" data-original-src="https://miro.medium.com/v2/resize:fit:496/format:webp/1*zNzTtNJNXRQwLdmNa9GyRQ.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">bannerColor "卸载red " " * "的输出。图片作者。</p></figure><pre class="kk kl km kn gu nz oa ob oc aw od bi"><span id="aa1c" class="lx ly iu oa b gz oe of l og oh">bannerColor 'Running php artisan optimize:clear' "yellow" "*"</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj oq"><img src="../Images/8a0b64f5ca067507022db86e19a91eef.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*OSidemlQ-WInZB3TXG7D2Q.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">bannerColor运行php artisan optimize的输出:clear " " yellow " " *。图片作者。</p></figure><p id="e04c" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">从黑色、红色、绿色、黄色、蓝色、洋红色、青色和白色中选择一种颜色。</p><p id="78e9" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">使用任何符号，如<code class="fe oi oj ok oa b">***</code>、<code class="fe oi oj ok oa b">&gt;&gt;</code>、<code class="fe oi oj ok oa b">^^^</code>。</p><h1 id="7f6a" class="mv ly iu bd lz mw mx my mc mz na nb mf ka nc kb mi kd nd ke ml kg ne kh mo nf bi translated">4.使用陷阱终止的事件处理程序</h1><p id="420a" class="pw-post-body-paragraph kz la iu lb b lc mq jv le lf mr jy lh li ms lk ll lm mt lo lp lq mu ls lt lu in bi translated">当外壳接收到信号时，例如<code class="fe oi oj ok oa b">Ctrl-C</code>终止，<code class="fe oi oj ok oa b">trap</code>命令捕获信号并执行命令。</p><p id="4e0d" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">陷阱命令具有<code class="fe oi oj ok oa b">trap func signal(s)</code>的结构。</p><p id="4c3c" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">您可以根据需要定义一个<code class="fe oi oj ok oa b">func</code>,并使用该功能响应的信号名称。在我们的例子中，我使用了<code class="fe oi oj ok oa b">SIGINT</code>，它代表<code class="fe oi oj ok oa b">Ctrl-C</code>中断。</p><p id="d306" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated"><strong class="lb iv">示例</strong>:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ol om l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Shellman代码片段中的on_ctrl_c函数。</p></figure><p id="7011" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">要在Linux中查找信号名，运行<code class="fe oi oj ok oa b">trap -l</code>。</p><p id="cd61" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">macOS使用ZSH作为默认shell，所以您需要将shell改为bash。使用<code class="fe oi oj ok oa b">bash</code>命令，然后使用<code class="fe oi oj ok oa b">trap -l</code>，或者运行<code class="fe oi oj ok oa b">chsh -s /bin/bash</code>来改变外壳，打开一个新标签，然后运行<code class="fe oi oj ok oa b">trap -l</code>:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj or"><img src="../Images/a63bb8c7210a8bd2ddf5d23a2a64e6b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jgZBdyQW2CGa64yCnUHnCg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Ubuntu信号。使用<code class="fe oi oj ok oa b">trap -l</code>命令。图片作者。</p></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj os"><img src="../Images/fefbd033ce8d541d5f302157aa0fe876.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BZsf5szQWzMiV_Hm8F9nwg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">macOS信号。图片作者。</p></figure><h1 id="9e48" class="mv ly iu bd lz mw mx my mc mz na nb mf ka nc kb mi kd nd ke ml kg ne kh mo nf bi translated">5.卸载</h1><p id="97c1" class="pw-post-body-paragraph kz la iu lb b lc mq jv le lf mr jy lh li ms lk ll lm mt lo lp lq mu ls lt lu in bi translated">您需要运行一堆<code class="fe oi oj ok oa b">composer remove</code>命令来卸载包，<code class="fe oi oj ok oa b">find --delete</code>命令来删除迁移文件，<code class="fe oi oj ok oa b">php artisan optimize:clear</code>和<code class="fe oi oj ok oa b">composer dump-autoload</code>来清除所有缓存。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ol om l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">卸载功能。</p></figure><p id="bb43" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">第22行:使用<code class="fe oi oj ok oa b">git rev-parse --git-dir</code>检测目录是否是Git目录。如果是，使用脚本重置并清理git repo。</p><h1 id="b2d2" class="mv ly iu bd lz mw mx my mc mz na nb mf ka nc kb mi kd nd ke ml kg ne kh mo nf bi translated">6.检查功能</h1><p id="3c6d" class="pw-post-body-paragraph kz la iu lb b lc mq jv le lf mr jy lh li ms lk ll lm mt lo lp lq mu ls lt lu in bi translated">使用<code class="fe oi oj ok oa b">check_cmd</code>功能检查用户系统是否有所需的命令。我将<code class="fe oi oj ok oa b">check_cmd</code>函数保存在<code class="fe oi oj ok oa b">lib/utils</code>文件中。</p><p id="5d27" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated"><strong class="lb iv">示例</strong>:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ol om l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">check_cmd函数。</p></figure><p id="e918" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">第2行:使用<code class="fe oi oj ok oa b">$(command -v "$1")</code>检查用户的系统是否有所需的命令。如果没有，用退出代码1退出。</p><h1 id="3fbb" class="mv ly iu bd lz mw mx my mc mz na nb mf ka nc kb mi kd nd ke ml kg ne kh mo nf bi translated">7.读取标准输入</h1><p id="1256" class="pw-post-body-paragraph kz la iu lb b lc mq jv le lf mr jy lh li ms lk ll lm mt lo lp lq mu ls lt lu in bi translated">当您阅读用户的标准输入时，您可以选择第一个字母<code class="fe oi oj ok oa b">cut -c 1-1</code>，并将其转换为大写字母<code class="fe oi oj ok oa b">tr "[:lower:]" "[:upper:]"</code>。</p><p id="6abe" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated"><strong class="lb iv">例子</strong>:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ol om l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">读取标准输入。</p></figure><p id="6fb4" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">如果输入不是y，使用if-statement并退出。</p><h1 id="f49d" class="mv ly iu bd lz mw mx my mc mz na nb mf ka nc kb mi kd nd ke ml kg ne kh mo nf bi translated">8.选择</h1><p id="dbd1" class="pw-post-body-paragraph kz la iu lb b lc mq jv le lf mr jy lh li ms lk ll lm mt lo lp lq mu ls lt lu in bi translated"><a class="ae lv" href="https://gist.github.com/shinokada/c427e808ae89b68869fb65f736199d39" rel="noopener ugc nofollow" target="_blank">谢尔曼的选项功能</a>是读取功能的替代功能。用户使用上/下键选择一个选项。我将<code class="fe oi oj ok oa b">inputChoice</code>函数保存在<code class="fe oi oj ok oa b">lib/utils</code>文件中。</p><p id="b7f4" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">使用它时，首先定义options变量:</p><pre class="kk kl km kn gu nz oa ob oc aw od bi"><span id="5fba" class="lx ly iu oa b gz oe of l og oh">options=("one" "two" "three");<br/>inputChoice "Choose:" 0 "${options[@]}";<br/>choice=$?; <br/>echo "${options[$choice]}"</span></pre><p id="d93f" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated"><code class="fe oi oj ok oa b">inputChoice</code>功能的第一个参数是您想要显示的文本。第二个参数是默认选择。0选择第一个选项。第三个参数需要选项，<code class="fe oi oj ok oa b">${options[@]}</code>。</p><p id="17c0" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated"><strong class="lb iv">示例</strong>:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ol om l"/></div></figure><p id="241d" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">在上面的代码中，如果给出了<code class="fe oi oj ok oa b">-u</code>标志，使用options函数重新确认用户的意图。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ot"><img src="../Images/b917fd8ea57babb282c66741515f4ec8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pDG6zpbJucrbUkIhcunHyg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">inputChoice函数的输出。图片作者。</p></figure><h1 id="8a01" class="mv ly iu bd lz mw mx my mc mz na nb mf ka nc kb mi kd nd ke ml kg ne kh mo nf bi translated">结论</h1><p id="3b8f" class="pw-post-body-paragraph kz la iu lb b lc mq jv le lf mr jy lh li ms lk ll lm mt lo lp lq mu ls lt lu in bi translated">当你学习新方法时，我建议在你现有的项目中实现它们。我希望你能在你的项目中使用这些技巧。</p><p id="0841" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">如果您正在重复代码行，是时候自动化它们了。Bash脚本是最好的选择之一。</p><p id="da92" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">快乐编码。</p><p id="98ee" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated"><strong class="lb iv"> <em class="ou">如果您喜欢我的文章并希望收到简讯，请</em> </strong> <a class="ae lv" href="http://newsletter.codewithshin.com" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iv"> <em class="ou">注册</em> </strong> </a> <strong class="lb iv"> <em class="ou">。</em>T13】</strong></p><p id="7c1a" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated"><strong class="lb iv">通过</strong> <a class="ae lv" href="https://blog.codewithshin.com/membership" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iv">成为</strong> </a> <strong class="lb iv">会员，获得媒体上所有故事的访问权限。</strong></p></div></div>    
</body>
</html>