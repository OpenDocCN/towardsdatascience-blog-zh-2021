<html>
<head>
<title>How to Easily Run Python Scripts on Website Inputs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在网站输入上轻松运行Python脚本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-easily-run-python-scripts-on-website-inputs-d5167bd4eb4b?source=collection_archive---------4-----------------------#2021-08-16">https://towardsdatascience.com/how-to-easily-run-python-scripts-on-website-inputs-d5167bd4eb4b?source=collection_archive---------4-----------------------#2021-08-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8730" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">这是我建立的一个网站的演示，它将动态分析文本情感</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/384d22fc5949e283c37d41b8460a27ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2XqUTGmxsXjqqp5RpVTo3Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">蒂莫西·戴克斯在<a class="ae ky" href="https://unsplash.com/s/photos/python?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="6f6c" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">所有数据科学家都知道计算机在分析文本方面有多好，但大多数其他人不知道。所以作为一个普通人，我想我会给他们他们不知道他们需要的东西——一个<a class="ae ky" href="http://www.ebookanalyzer.com" rel="noopener ugc nofollow" target="_blank">网站</a>，在那里他们可以分析他们自己的电子书。</p><p id="db56" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">你可以在这里阅读网站<a class="ae ky" href="https://jamesasher4994.medium.com/this-free-website-uses-algorithms-to-analyse-the-sentiment-of-your-writing-26ca9164ab0e" rel="noopener">的用处</a>。但是这篇文章更多的是针对你们这些技术人员，集中在如何在用户输入上运行python脚本并产生输出——而不是将输入保存在任何地方。</p><p id="90f2" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">这是非常有用的，因为它是完全自动化的，只要服务器不崩溃(他们可能会——我不知道),那么它应该会自己运行。没有任何维护。</p><h2 id="dc72" class="mc md it bd me mf mg dn mh mi mj dp mk lp ml mm mn lt mo mp mq lx mr ms mt mu bi translated">背景</h2><p id="e3a1" class="pw-post-body-paragraph lg lh it li b lj mv ju ll lm mw jx lo lp mx lr ls lt my lv lw lx mz lz ma mb im bi translated">所以游戏的目的是制作一个<a class="ae ky" href="http://www.ebookanalyzer.com" rel="noopener ugc nofollow" target="_blank">网站</a>，它接受用户输入，在上面运行python脚本，然后以一种可用的方式返回给用户。事实证明，在线运行Python脚本并不容易，我在网上也没有找到太多的帮助，但下面是我找到的全部内容。</p><p id="0a92" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我发现最好的方法是使用<a class="ae ky" href="https://flask.palletsprojects.com/en/2.0.x/" rel="noopener ugc nofollow" target="_blank">Flask</a>——一个用Python编写的微型web框架。Flask和Django一起，通常用于web开发。因为它们是用Python编写的，所以很容易将Python脚本集成到您的路由中。</p><p id="dfb9" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我以前写过一篇非常受欢迎的关于如何显示Matplotlib图和Panda的数据帧的<a class="ae ky" rel="noopener" target="_blank" href="/how-to-easily-show-your-matplotlib-plots-and-pandas-dataframes-dynamically-on-your-website-a9613eff7ae3">文章——如果听起来有用，那么请检查一下。</a></p><blockquote class="na nb nc"><p id="7f9b" class="lg lh nd li b lj lk ju ll lm ln jx lo ne lq lr ls nf lu lv lw ng ly lz ma mb im bi translated">提醒一下，这里的目标是从HTML表单中获取用户输入，在其上运行python脚本，并在全自动过程中输出结果。</p></blockquote><h2 id="658f" class="mc md it bd me mf mg dn mh mi mj dp mk lp ml mm mn lt mo mp mq lx mr ms mt mu bi translated">建立</h2><p id="7a85" class="pw-post-body-paragraph lg lh it li b lj mv ju ll lm mw jx lo lp mx lr ls lt my lv lw lx mz lz ma mb im bi translated">这个项目的设置非常简单。我们首先必须从Flask导入所有需要的包，如下所示(<strong class="li iu"> Line 2 </strong>)。然后我们初始化应用程序(<strong class="li iu">第5行</strong>)——你可以随便叫它什么，但习惯上使用邓德的“名字”。只是不要叫它Flask，因为这将与Flask本身相冲突。最后，我们使用route decorator告诉Flask哪个URL应该调用我们的函数。在这种情况下，它只是'/' —所以我们的初始页面。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">保持debug = True打开，以便开发时自动重新加载。但是不要忘记在部署时删除它。</p></figure><p id="12ca" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">可以看到，我们已经返回了“render_template”函数，这是任何Flask应用程序都必须的。它从templates文件夹(Flask需要一个特定的templates文件夹)返回一个HTML文件，并将其呈现在指定的页面上。这是我们需要的HTML。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="d908" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">可以看出，这是一个非常简单的HTML页面，您可能已经看过一百次了。<strong class="li iu">然而，第11–15行</strong>是我们感兴趣的。在第11行，我们指定了表单的开始，并在第15行关闭它。在表单中，我们有三个div标签(<strong class="li iu">第12、13行，&amp; 14 </strong>)。<strong class="li iu">第12行</strong>仅仅是表单标题，只不过是文本，<strong class="li iu">第13行</strong>是文件选择，<strong class="li iu">第14行</strong>是提交按钮。正如您在这里看到的，我们已经将输入类型指定为“file ”,并特别声明。txt文件。</p><p id="e073" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">这里声明“enctype= 'multipart/form-data”很重要，因此Flask知道如何对输入进行编码。更重要的是，不要忘记声明method = "POST ",这样Flask就知道请求存储在表单中的信息。</p><h2 id="2468" class="mc md it bd me mf mg dn mh mi mj dp mk lp ml mm mn lt mo mp mq lx mr ms mt mu bi translated">对输入运行Python脚本。</h2><p id="23bd" class="pw-post-body-paragraph lg lh it li b lj mv ju ll lm mw jx lo lp mx lr ls lt my lv lw lx mz lz ma mb im bi translated">现在我们已经有了网站的基本框架，我们如何在输入上运行python脚本，然后向用户显示结果呢？</p><p id="0515" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我们需要做的是，创建另一个仅在接收post请求时运行的装饰器。</p><p id="e87c" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">这正是下面要做的。您可以将它直接放在原始的route decorator下面。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="4db8" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">因此，在这里，当用户单击提交按钮时，这个函数被触发，因为它在使用POST方法时被激活。<strong class="li iu">第5行</strong>然后使用请求库选择输入的文件。然后，您可以像在python中一样，简单地在这个变量上运行Python脚本。一旦你完成了操作，你就可以以多种方式之一将变量返回给用户。您可以像我上面一样使用Response方法，或者您可以将它传递给一个变量，并再次使用render_template()在另一个HTML模板中直接输出它。可能性是无限的。</p><p id="b071" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">你可以用多种方式托管你的网站，但我更喜欢PythonAnywhere。如何做到这一点的指导可以在我的文章<a class="ae ky" rel="noopener" target="_blank" href="/how-to-easily-show-your-matplotlib-plots-and-pandas-dataframes-dynamically-on-your-website-a9613eff7ae3">的结尾这里</a>看到。</p><p id="9b75" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">如上所述，你可以在www.ebookanalyzer.com的<a class="ae ky" href="http://www.ebookanalyzer.com" rel="noopener ugc nofollow" target="_blank">看到一个工作实例。</a></p><p id="3659" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我当然不是网络开发人员，所以请原谅我的丑陋。</p><p id="44c1" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">也请让我知道是否有任何错误，或者你可以看到任何改进或更优雅的解决方案。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="320c" class="mc md it nk b gy no np l nq nr">If I’ve inspired you to join medium I would be really grateful if you did it through this <a class="ae ky" href="https://jamesasher4994.medium.com/membership" rel="noopener">link</a> — it will help to support me to write better content in the future.</span><span id="c588" class="mc md it nk b gy ns np l nq nr">If you want to learn more about data science, become a certified data scientist, or land a job in data science, then checkout <a class="ae ky" href="https://365datascience.pxf.io/c/3458822/791349/11148" rel="noopener ugc nofollow" target="_blank">365 data science</a> through my <a class="ae ky" href="https://365datascience.pxf.io/c/3458822/791349/11148" rel="noopener ugc nofollow" target="_blank">affiliate link.</a></span></pre><p id="a511" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">如果你喜欢这篇文章，下面是我写的一些类似的文章:</p><div class="nt nu gp gr nv nw"><a rel="noopener follow" target="_blank" href="/how-to-easily-show-your-matplotlib-plots-and-pandas-dataframes-dynamically-on-your-website-a9613eff7ae3"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd iu gy z fp ob fr fs oc fu fw is bi translated">如何轻松地在你的网站上动态显示你的Matplotlib图和Pandas数据框。</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">这是一种令人惊讶的简单方法，可以在线向全世界展示您的图表和数据框架，而且不到…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">towardsdatascience.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok ks nw"/></div></div></a></div><div class="nt nu gp gr nv nw"><a rel="noopener follow" target="_blank" href="/how-to-analyze-survey-data-in-python-c131764ea02e"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd iu gy z fp ob fr fs oc fu fw is bi translated">如何用Python分析调查数据</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">以下是一些使用Python清理、分析和可视化调查数据的技巧和代码。</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">towardsdatascience.com</p></div></div><div class="of l"><div class="ol l oh oi oj of ok ks nw"/></div></div></a></div><div class="nt nu gp gr nv nw"><a rel="noopener follow" target="_blank" href="/how-to-predict-something-with-no-data-and-bonsai-trees-b6ebc6471da3"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd iu gy z fp ob fr fs oc fu fw is bi translated">如何预测没有数据的事物——还有盆景树</h2><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">towardsdatascience.com</p></div></div><div class="of l"><div class="om l oh oi oj of ok ks nw"/></div></div></a></div><p id="2b5f" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">干杯，</p><p id="a6a9" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">詹姆斯</p></div></div>    
</body>
</html>