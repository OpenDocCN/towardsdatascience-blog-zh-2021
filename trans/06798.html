<html>
<head>
<title>How to Publish a Python Package to PyPI using Poetry</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用诗歌将Python包发布到PyPI</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-publish-a-python-package-to-pypi-using-poetry-aa804533fc6f?source=collection_archive---------12-----------------------#2021-06-19">https://towardsdatascience.com/how-to-publish-a-python-package-to-pypi-using-poetry-aa804533fc6f?source=collection_archive---------12-----------------------#2021-06-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dcb7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">公开部署Python包的简单方法</h2></div><p id="8aeb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">作者:<a class="ae le" href="https://www.linkedin.com/in/edkrueger/" rel="noopener ugc nofollow" target="_blank">爱德华·克鲁格</a>和<a class="ae le" href="https://www.linkedin.com/in/dylan-rossi/" rel="noopener ugc nofollow" target="_blank">迪伦·罗西</a></p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/84081b16853d6b3dd13e7bd23f92732c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YltTx58KCg97GqG7en1YZg.jpeg"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated"><a class="ae le" href="https://unsplash.com/@wickedmonday?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">摄</a>邪恶星期一<a class="ae le" href="https://unsplash.com/s/photos/package?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="e2e9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你是否曾想创建一个python包供全世界使用，但又觉得太难发布？诗歌可以减轻你的忧虑，因为它让这个过程变得如此简单。</p><p id="d9a7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦你创建了你的包，诗歌将会为你做出版工作。</p><p id="b8b5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">注意:本文假设您已经构建了一个包含诗歌的python包，可以发布了。如果您还没有已经创建的包，请</strong> <a class="ae le" href="https://github.com/edkrueger/poetry-package-template-pypi" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">下载我们的示例</strong> </a> <strong class="kk iu">并跟着做。</strong></p><h1 id="2ef2" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">创建一个PyPI帐户</h1><p id="7586" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">要将python包发布到PyPI，您必须首先拥有一个PyPI帐户。</p><p id="aba9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您还没有创建，请访问PyPI并点击注册链接。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi ms"><img src="../Images/4eee4a75dc3fe582457f7ca31c60b2ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7EHSbspFuYADHK3D"/></div></div></figure><p id="cadf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">他们会询问您的一般信息(电子邮件、用户名、密码)并注册您的帐户。</p><p id="f6b9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您应该还会收到他们的电子邮件，要求您确认您的帐户注册。</p><p id="c238" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦您完全注册，登录并前往您的帐户页面。</p><h1 id="9541" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">创建API令牌</h1><p id="743c" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">现在您需要创建一个API令牌来连接诗歌。这个令牌将允许poems知道在哪里发布您的包，并允许它发布到您的帐户。</p><p id="5a5e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在您的帐户页面中，单击左侧的“帐户设置”链接。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/90deefc46cfaa9317b5f6b55a1f08a9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/0*9Janz1-Ij8mbDA1c"/></div></figure><p id="200d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">向下滚动，直到看到“API令牌”部分，然后单击“添加API令牌”按钮。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi mu"><img src="../Images/8b74c3677c3494310f6eb356751aa4fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qFMhQ2PxrDEECDAq"/></div></div></figure><p id="494c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，您将为您的令牌指定一个名称和范围。</p><p id="8588" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于本例，我们将标记命名为“poetrypackagetemplate”</p><p id="4f78" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您还将设置范围为“整个帐户(所有项目)”，但是在实践中，最好为每个项目选择一个令牌(这就是为什么它会用警告消息通知您)。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi mv"><img src="../Images/d1efb9b02d342dad6cd61d462ceae3ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tVcDca7LLJi8Jmdk"/></div></div></figure><p id="2290" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">填写完毕后，单击“Add Token”按钮创建API令牌。</p><p id="4eb7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">PyPI将生成您的API令牌并显示在您的屏幕上，但只是现在，所以请务必复制它或让这个页面打开，直到我们将其连接到诗歌。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi mw"><img src="../Images/f8c50f3fc5e730704030854571692b04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DgL_r0eKe5SRUqfB"/></div></div></figure><h1 id="1bbe" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">为您的PyPI凭证创建环境变量</h1><p id="ff7c" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">现在您已经有了一个连接到PyPI帐户的API令牌，我们可以将这个令牌交给poems，这样它就知道在哪里发布您的包了。我们可以通过创建保存您的凭证的环境变量来做到这一点，然后我们可以将凭证传递给poems的publish命令。</p><p id="3e05" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">继续打开终端(Windows上的git-bash ),确保您在python包或我们的示例包的目录中。</p><p id="c8b2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后在macOS或Linux上运行这些命令:</p><pre class="lg lh li lj gt mx my mz na aw nb bi"><span id="ec0b" class="nc lw it my b gy nd ne l nf ng">export PYPI_USERNAME=__token__</span><span id="060e" class="nc lw it my b gy nh ne l nf ng">export PYPI_PASSWORD=&lt;Your API Token&gt;</span></pre><p id="6177" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">运行这些命令(在Windows上):</p><pre class="lg lh li lj gt mx my mz na aw nb bi"><span id="2f6b" class="nc lw it my b gy nd ne l nf ng">set PYPI_USERNAME=__token__</span><span id="2e73" class="nc lw it my b gy nh ne l nf ng">set PYPI_PASSWORD=&lt;Your API Token&gt;</span></pre><p id="40b5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就是这样！poem现在准备将您的python包发布到PyPI。</p><h1 id="ed12" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">用诗歌出版包裹</h1><p id="60f6" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">要完成出版物，您需要再运行一个命令。</p><pre class="lg lh li lj gt mx my mz na aw nb bi"><span id="13d0" class="nc lw it my b gy nd ne l nf ng">poetry publish --build --username $PYPI_USERNAME --password $PYPI_PASSWORD</span></pre><p id="601c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，poems将开始构建您的python包并将其发布到PyPI。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi ms"><img src="../Images/73c5abb904e0ced9474d7427daa29b9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OQ1vXH1-_75qpPXi"/></div></div></figure><p id="c30e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦完成，您的软件包将会在您的PyPI帐户上，并且可以通过pip安装！</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi ms"><img src="../Images/ca2850dd20a5f5e438f980881556e848.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ArCJcYRWkdGzE_8T"/></div></div></figure><h1 id="3691" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="15ce" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">从这篇简短的文章中可以看出，将python包发布到PyPI是轻而易举的事情。</p><p id="52d6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您愿意，您可以通过简单地运行</p><pre class="lg lh li lj gt mx my mz na aw nb bi"><span id="5baa" class="nc lw it my b gy nd ne l nf ng">pip install &lt;Your Package Name&gt;</span></pre><p id="7262" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">祝贺您发布python包！</p><p id="7d70" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想了解更多关于诗歌的信息，请查阅克里斯托弗·西德博特姆的这篇文章:</p><div class="nk nl gp gr nm nn"><a rel="noopener follow" target="_blank" href="/solving-dependency-management-in-python-with-poetry-165b92069e9d"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">用诗歌解决Python中的依赖管理</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">为我们的Python工作流带来简单性和一致性</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">towardsdatascience.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob lp nn"/></div></div></a></div></div></div>    
</body>
</html>