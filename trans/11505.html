<html>
<head>
<title>How to Make your Computer Talk with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何让你的电脑与Python对话</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-make-your-computer-talk-with-python-63f6c6eb534a?source=collection_archive---------4-----------------------#2021-11-13">https://towardsdatascience.com/how-to-make-your-computer-talk-with-python-63f6c6eb534a?source=collection_archive---------4-----------------------#2021-11-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bf4c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你成为亿万富翁花花公子的第一步</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8227d89592769eba5d3653bf1f7142d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FIjfRYp-TFYGpPaSMbjy0Q.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">你的机器人管家。图片由<a class="ae kv" href="https://www.flickr.com/photos/aloha75/10046436574" rel="noopener ugc nofollow" target="_blank">史蒂芬·米勒</a></p></figure><p id="57eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你是《钢铁侠》等电影的粉丝，你可能会幻想拥有自己的贾维斯。在这篇文章中，我将向你展示如何开始制作你自己的电脑助手。我们将通过一点编程和一些智能python包在引擎盖下做数据科学来做到这一点。</p><p id="3478" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，制作像超级智能人工智能这样复杂的东西是很难的，对我来说太难了，以至于我无法在一篇帖子中完成，甚至很可能是在一般情况下。然而，我们能做的是把这个问题分解成更小的部分，使问题看起来更简单。这是你应该在你的每一个项目中做的事情，这样才不会一下子陷入所有复杂的事情中。</p><p id="27d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从我对这个主题的简短思考中，我相信我们可以将一个超级智能的人工智能助手分成四个主要部分:</p><ol class=""><li id="329f" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">文本到语音转换(获得响应)</li><li id="51bb" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">语音转文字(要东西)</li><li id="75ab" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">一些计算来理解我们的问题并做出回应</li><li id="e3fe" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">将反应转化为现实世界中的行动</li></ol><p id="3188" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在今天的帖子中，我将重点介绍我们的计算机助手的文本到语音方面，它允许我们的计算机与我们交谈。如果一切顺利，我将在未来继续撰写这篇文章，让我们的助手变得更加复杂和有用。</p><h1 id="46dd" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">查找文本到语音库</h1><p id="4d31" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">现在，用python做这样的事情的一个巨大的好处是，我们有大量的库可以用来快速完成工作。毕竟，如果我们从头开始开发每一点，我们会在这里呆很长时间，以至于我们永远也做不了任何事情。让我们站在巨人的肩膀上，使用python包。</p><p id="92b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于文本到语音转换，有几个python包脱颖而出:</p><ul class=""><li id="4aa5" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr nd ly lz ma bi translated">谷歌文本到语音(gTTs)，以及</li><li id="4045" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nd ly lz ma bi translated">pyttsx3(我不知道那到底代表什么)。</li></ul><p id="c9c0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Google Text To Speech是一个Python库，用于与Google Translate的text to speech API接口。它具有谷歌自己的文本到语音应用程序的性能，但需要使用互联网连接。</p><p id="9a7b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://github.com/nateshmbhat/pyttsx3" rel="noopener ugc nofollow" target="_blank"> pyttsx3 </a>，另一方面，是一个文本到语音转换库，它寻找预装在你的平台上的文本到语音引擎并使用它们。因此，它离线工作。</p><p id="2bc7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是它在主要操作系统上使用的文本到语音转换引擎:</p><ol class=""><li id="e770" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">Windows上的<a class="ae kv" href="https://en.wikipedia.org/wiki/Microsoft_Speech_API" rel="noopener ugc nofollow" target="_blank"> SAPI5 </a></li></ol><p id="748b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">2.MacOSX上的NSSpeechSynthesizer </p><p id="3bb4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">3.在每隔一个平台上讲话</p><p id="cc64" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看着这两者，我不希望我的助手依赖于谷歌或在线连接来工作。我更愿意使用pyttsx3，让所有东西都在我自己的机器上运行。</p><h1 id="1c31" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">设置项目</h1><p id="d959" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">现在，在我们开始运行一切之前，让我们设置我们的项目。</p><p id="dfb5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将通过文本编辑器和终端做所有的事情。如果你不知道这是什么意思，那么我向入门者推荐的文本编辑器是<a class="ae kv" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> vscode </a>，终端通常内置在你的文本编辑器中(就像在vscode中一样),或者是你计算机上的一个叫做“终端”或“cmd”的程序。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="703d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我希望您打开终端，将目录更改为保存项目的位置，例如</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="f116" class="nq mh iq nm b gy nr ns l nt nu">cd ~/projects</span></pre><p id="11ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们需要创建一个目录来存储我们的项目。这完全由你决定，但我希望我的助手叫罗伯特。因此，我正在创建一个名为“robert”的新目录，然后用</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="fcaf" class="nq mh iq nm b gy nr ns l nt nu">mkdir robert</span><span id="1081" class="nq mh iq nm b gy nv ns l nt nu">cd robert</span></pre><p id="2187" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以把名字改成你喜欢的任何名字，比如Brandy或者Kumar什么的。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="ce42" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们需要让python开始运行。为此，我们需要安装python 3。如果您没有安装，请参见<a class="ae kv" href="https://www.python.org/" rel="noopener ugc nofollow" target="_blank">https://www.python.org/</a>获取安装说明。我们还需要创建一个python虚拟环境。如果你想了解更多，请看这里的<a class="ae kv" rel="noopener" target="_blank" href="/getting-started-with-python-virtual-environments-252a6bd2240">我最近的一篇文章</a>。</p><p id="4721" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设您安装了python，您可以在终端中用</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="49fa" class="nq mh iq nm b gy nr ns l nt nu">python3 --version</span></pre><p id="5650" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您应该能够使用以下命令在robert目录中创建python虚拟环境:</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="f3f1" class="nq mh iq nm b gy nr ns l nt nu">python3 -m venv venv</span></pre><p id="64c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nw">注意，如果你安装的python版本叫</em> <code class="fe nx ny nz nm b">python</code> <em class="nw">、</em> <code class="fe nx ny nz nm b">python3.7</code> <em class="nw">或者</em> <code class="fe nx ny nz nm b">python3.9</code> <em class="nw">或者别的什么，那就用那个</em></p><p id="5e6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，您应该能够通过以下方式激活您的虚拟环境:</p><p id="57ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(在MacOS和Linux上)</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="e587" class="nq mh iq nm b gy nr ns l nt nu">source venv/bin/activate</span></pre><p id="bcc6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或(Windows)</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="1901" class="nq mh iq nm b gy nr ns l nt nu">venv\Scripts\activate</span></pre></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="6a52" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在需要安装我们需要的软件包。为此，我们将创建一个requirements.txt文件。打开你最喜欢的文本编辑器，例如vscode，或者，如果你喜欢冒险，打开你的“robert”文件夹，现在就创建这个文件。</p><p id="f69a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于我们的项目，到目前为止，我们只需要pyttsx3。简单。现在让我们将它添加到requirements.txt文件中，如下所示</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="7494" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，让我们使用pip安装我们的需求</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="874e" class="nq mh iq nm b gy nr ns l nt nu">pip install -r requirements.txt</span></pre><h1 id="dbcb" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">使用pyttsx3</h1><p id="f477" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">现在一切都安装好了，让我们开始使用pyttsx3。为了了解该怎么做，我查阅了这里的文件<a class="ae kv" href="https://pyttsx3.readthedocs.io/en/latest/index.html" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="c482" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，您可以通过创建一个名为<code class="fe nx ny nz nm b">speech.py</code>的文件并添加以下代码来制作一个很好的示例:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="8059" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们首先导入pyttsx3来加载它的所有类和变量。然后我们初始化语音引擎，设置我们想要的声音，然后是我们想要说的文字。我们终于用<code class="fe nx ny nz nm b">engine.runAndWait()</code>说话了。</p><p id="9e32" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们可以在终端中使用以下命令运行该文件:</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="93a4" class="nq mh iq nm b gy nr ns l nt nu">python speech.py</span></pre><p id="8971" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">摆弄这个，改变<code class="fe nx ny nz nm b">text_to_say</code>变量。你应该想说什么就说什么。</p><h1 id="dd1d" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">很酷的调整</h1><p id="a501" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">现在我们有了一些工作，让我们给我们的助手一些调整。Pyttsx3可以让我们调整声音和速度。</p><p id="aa5e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的例子中，您可以将voice_num更改为一个不同的数字来获得一个新的语音。根据我的测试，这似乎是平台相关的(可能取决于你的平台是否有<a class="ae kv" href="https://en.wikipedia.org/wiki/Microsoft_Speech_API" rel="noopener ugc nofollow" target="_blank"> SAPI5 </a>、<a class="ae kv" href="https://developer.apple.com/documentation/appkit/nsspeechsynthesizer" rel="noopener ugc nofollow" target="_blank"> NSSpeechSynthesizer </a>或<a class="ae kv" href="http://espeak.sourceforge.net/" rel="noopener ugc nofollow" target="_blank"> espeak </a>)。</p><p id="3b44" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我创建了这个巨大的文件(当很多机器人用奇怪的口音跟你说话时，你会明白为什么)来帮助你决定什么声音最适合你。一旦你找到你喜欢的声音号码，就用在<code class="fe nx ny nz nm b">voice_num</code>变量中找到的号码替换掉。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><h1 id="09bc" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">后续步骤</h1><p id="5734" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">祝贺你到达终点。如果你有任何问题或者只是想打个招呼，请在下面发表。</p><p id="00db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想进一步阅读，并对即将发布的帖子有所了解，我建议你查看下面的链接。</p><ul class=""><li id="88b4" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr nd ly lz ma bi translated"><a class="ae kv" href="https://www.geeksforgeeks.org/python-text-to-speech-by-using-pyttsx3/" rel="noopener ugc nofollow" target="_blank">https://www . geeks forgeeks . org/python-text-to-speech-by-using-pyttsx 3/</a></li><li id="76ec" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nd ly lz ma bi translated"><a class="ae kv" href="https://realpython.com/python-speech-recognition/" rel="noopener ugc nofollow" target="_blank">https://realpython.com/python-speech-recognition/</a></li></ul><p id="aea5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我的下一篇文章中，我将关注语音转文本，这样我们的助手就可以响应我们的命令了🤖。给我一个关注，以确保你不会错过它。</p></div></div>    
</body>
</html>