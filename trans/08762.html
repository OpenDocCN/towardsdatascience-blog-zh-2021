<html>
<head>
<title>Develop a Slack-bot using Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Go开发一个松弛机器人</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/develop-a-slack-bot-using-golang-1025b3e606bc?source=collection_archive---------3-----------------------#2021-08-13">https://towardsdatascience.com/develop-a-slack-bot-using-golang-1025b3e606bc?source=collection_archive---------3-----------------------#2021-08-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1a7b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过这个循序渐进的教程，学习如何在Go中构建一个Slack bot</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5940daaa9447272f2fcc0f63499f544a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lpcLyNQUN6g2DkFC_CVzvg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">安德里亚·德·森蒂斯峰在<a class="ae ky" href="https://unsplash.com/s/photos/technology?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="123c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://slack.com/intl/en-se/" rel="noopener ugc nofollow" target="_blank"> Slack </a>是开发者和公司用来分享信息和沟通的沟通工具。近年来它变得非常受欢迎。</p><p id="fb62" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将介绍如何设置和构建一个能够与Slack工作空间和通道交互的bot。我们将研究如何创建斜杠命令和可视化请求，如按钮。bot应用程序将通过Websocket向Go后端发送请求，这在slack世界中称为Socket-Mode。</p><h2 id="0414" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">创建时差工作区</h2><p id="15ae" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">如果你还没有一个工作空间可以使用，确保通过访问<a class="ae ky" href="https://slack.com" rel="noopener ugc nofollow" target="_blank"> slack </a>并按<code class="fe mt mu mv mw b">Create a new Workspace</code>来创建一个新的工作空间。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/dade009d65559c427b10c8eb939b2467.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zof3e1ZqFOzJRi0ozXM29g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">松弛时间-创建新的工作空间按钮</p></figure><p id="ff87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">继续填写所有表格，您需要提供团队或公司的名称、新的渠道名称，并最终邀请其他队友。</p><h2 id="9432" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">创建松弛应用程序</h2><p id="a7e5" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们需要做的第一件事是创建Slack应用程序。访问<a class="ae ky" href="https://api.slack.com/apps/new" rel="noopener ugc nofollow" target="_blank"> slack网站</a>创建应用程序。选择<code class="fe mt mu mv mw b">From scratch </code>选项。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/41fe341fed305c99bc66e8d76a33eea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QkNKsgRM_lFUvlOo6f7LYg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">slack——为我们的机器人创建一个新的应用程序</p></figure><p id="9fd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将看到向应用程序和工作空间添加名称的选项，以允许使用该应用程序。您应该能够看到您连接到的所有工作区。选择适当的工作空间。</p><p id="865b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个应用程序有许多不同的用例。您将被要求选择添加什么功能，我们将创建一个机器人，所以选择机器人选项。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/027c14b7bdbc727d7f9eace25b1e9b18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DwudexxFOihUUHEvAeJe6A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Slack —添加到应用程序中的特性/功能</p></figure><p id="552e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">单击机器人后，您将被重定向到帮助信息页面，选择添加范围的选项。我们需要添加到应用程序中的第一件事是执行任何操作的实际权限。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/8ca77305070de16ec2bc0d590e1f4364.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZmex0YY_6dvQtdGjgIaiA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Slack添加范围以允许Bot执行操作</p></figure><p id="df8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">按下<code class="fe mt mu mv mw b">Review Scopes to Add</code>后，向下滚动到机器人范围，开始添加我已经添加的4个范围。图像中显示了范围的说明。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/bc4c61450645b7bc021286a1e55fde08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3nxJErGsgy_XeipZoKrkGA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Slack —添加bot权限以扫描频道和发布消息</p></figure><p id="8309" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加范围后，我们就可以安装应用程序了。如果你是应用程序的所有者，你可以简单地安装它，否则，就像我一样，我必须请求管理员的许可。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/57f3b62a6853a26fa84d0e996c91ef5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kj2CysvJbOyC-0FMSAEROQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Slack —向工作区请求或安装应用程序</p></figure><p id="83ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你可以安装或被允许安装，你会看到另一个屏幕上的信息，选择适当的渠道，机器人可以用来张贴作为一个应用程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/7d6e7ec8afb0b872b9b15744dfcf88e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fhKn2pc5QbB2Dcj45uqpxA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SlackBot —将Bot安装到工作区</p></figure><p id="7b46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦你点击<code class="fe mt mu mv mw b">Allow</code>，你会看到一个长字符串、一个OAuth令牌和一个Webhook URL。记住它们的位置，或者把它们保存在另一个安全的地方。</p><p id="aa6b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">打开您的slack客户端并登录到工作区。我们需要将应用程序邀请到一个我们希望他可用的频道中。我使用了一个名为percybot的频道。<br/>转到那里，开始输入命令信息，通过用<code class="fe mt mu mv mw b">/</code>开始信息来完成。我们可以通过输入<code class="fe mt mu mv mw b">/invite @NameOfYourbot</code>来邀请机器人。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/2145303a66c1623b8e5fe4e9886eeb4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ABsnPTE33kMGh4Wp11l9oQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Slack —邀请bot进入可以使用它的频道。</p></figure><h2 id="0988" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">从Golang连接到Slack</h2><p id="b068" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">既然我们已经启动了Slack应用程序和身份验证令牌，我们就可以开始与Slack通道通信了。</p><p id="8013" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用<code class="fe mt mu mv mw b"><a class="ae ky" href="http://go get -u github.com/slack-go/slack" rel="noopener ugc nofollow" target="_blank">go-slack</a></code>，它是一个支持常规REST API、WebSockets、RTM和事件的库。我们还将使用<code class="fe mt mu mv mw b"><a class="ae ky" href="https://github.com/joho/godotenv" rel="noopener ugc nofollow" target="_blank">godotenv</a></code>来读取环境变量。</p><p id="2672" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们创建一个新的golang包并下载它。</p><pre class="kj kk kl km gt nf mw ng nh aw ni bi"><span id="36d1" class="lv lw it mw b gy nj nk l nl nm">mkdir slack-bot<br/>cd slack-bot<br/>go mod init programmingpercy/slack-bot<br/>go get -u github.com/slack-go/slack<br/>go get -u github.com/joho/godotenv</span></pre><p id="89b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们将创建一个<code class="fe mt mu mv mw b">.env</code>文件，用于存储您的秘密令牌。我们还将在这里存储一个频道ID。您可以在创建应用程序的web UI中找到令牌，如果您选择频道并按胡萝卜箭头转到<code class="fe mt mu mv mw b">Get channel details</code>，则可以在UI中找到频道。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/dc419fbb297c8eccc322241665547163.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eyDNQBX3UsBLm1E8drL-Gw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">松弛—按黄色圆圈项目查找频道ID。</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">。env——我们将在机器人中使用的秘密</p></figure><p id="29e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建<code class="fe mt mu mv mw b">main.go</code>，这样我们就可以开始编码了。我们将从简单地连接到工作区并发布一条简单的消息来确保一切正常开始。</p><p id="d75e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用<code class="fe mt mu mv mw b">godotenv</code>来读入<code class="fe mt mu mv mw b">.env</code>文件。然后创建一个松弛附件，这是一个发送到通道的消息。需要理解的重要一点是，Slack包利用了一种模式，在这种模式下，大多数功能都采用一个配置片。这意味着可以在每个请求中添加<code class="fe mt mu mv mw b">Option</code>个函数，并且数量可变。</p><p id="c935" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还将在消息中添加一些字段，用于发送额外的上下文数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">main.go —在松弛信道上发送简单消息</p></figure><p id="3c87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过运行main函数来执行程序，您应该会在slack通道中看到一条新消息。</p><pre class="kj kk kl km gt nf mw ng nh aw ni bi"><span id="96b9" class="lv lw it mw b gy nj nk l nl nm">go run main.go</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/c27791e6932a4d272c56fd756b7835be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A2ucnhPaWE2Y1nBKXDqkKw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Slack —我们发送的第一条机器人消息</p></figure><h2 id="a63c" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">使用时差事件API</h2><p id="ef3f" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">松弛事件API是处理松弛通道中发生的事件的一种方式。有许多事件，但对于我们的机器人，我们想听提及事件。这意味着每当有人提到这个机器人，它就会收到一个触发事件。事件通过WebSocket传递。</p><p id="3c59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在<a class="ae ky" href="https://api.slack.com/events" rel="noopener ugc nofollow" target="_blank">文档</a>中找到所有可用的事件类型。</p><p id="7183" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您需要做的第一件事是在<a class="ae ky" href="https://api.slack.com/apps/" rel="noopener ugc nofollow" target="_blank"> web UI </a>中访问您的应用程序。</p><p id="8f95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将激活名为<code class="fe mt mu mv mw b">Socket Mode</code>的东西，这允许机器人通过WebSocket连接。另一种方法是让bot托管一个公共端点，但是您需要一个域来托管它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/5666ed571dd401ec449ad19e284292e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5KRzjyIpA5UqvtVY2glw-w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Slack —启用套接字模式以允许Websocket而不是HTTP</p></figure><p id="b8bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么我们还需要加上<code class="fe mt mu mv mw b">Event Subscriptions</code>。您可以在“功能”选项卡中找到它，输入并激活它。然后将<code class="fe mt mu mv mw b">app_mentions</code>范围添加到事件订阅中。这将使提及触发应用程序的新事件</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/41739d3c338105baea2b36062cd2a80a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6vkjNtlsJb2NPH5BjfCE_w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Slack —为应用程序启用事件订阅</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/5d02e1c88e016f9b2e8e326d9db22d35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hXoC7huiWM0SDJgTWTg6gQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Slack —确保订阅正确的事件，app_mentions</p></figure><p id="0944" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要做的最后一件事是生成一个应用程序令牌。现在我们只有一个Bot令牌，但是对于事件，我们需要一个应用程序令牌。</p><p id="5443" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">进入<code class="fe mt mu mv mw b">Settings-&gt;Basic Information</code>，向下滚动到名为应用级令牌的章节，按下<code class="fe mt mu mv mw b">Generate Tokens and Scope</code>，为您的令牌填写一个名称。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/754fe9af6e9482469802ca306a59a67d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yJeG3uR7ehU7z8QBnExTzQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Slack —创建应用程序级令牌</p></figure><p id="c466" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我已经将<code class="fe mt mu mv mw b">connections:write</code>作用域添加到该令牌中，确保您也保存了该令牌，将其作为<code class="fe mt mu mv mw b">SLACK_APP_TOKEN</code>添加到<code class="fe mt mu mv mw b">.env</code>文件中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">。env —将所有必需的字段添加到。包封/包围（动词envelop的简写）</p></figure><p id="dd63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要使用套接字模式，我们还需要得到一个叫做套接字模式的<code class="fe mt mu mv mw b">slack-go</code>的子包。</p><pre class="kj kk kl km gt nf mw ng nh aw ni bi"><span id="e100" class="lv lw it mw b gy nj nk l nl nm">go get github.com/slack-go/slack/socketmode</span></pre><p id="cfd0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">slack包需要为套接字模式创建一个新的客户机，所以我们将有两个客户机。一个使用常规API，另一个用于websocket事件。让我们从连接开始，以确保所有权限都是正确的。注意Websocket客户机是如何通过调用<code class="fe mt mu mv mw b">socketmode.New</code>创建的，并把常规客户机作为输入。我还在普通客户端的创建中添加了一个<code class="fe mt mu mv mw b">OptionAppLevelToken</code>,因为现在需要它来连接到套接字。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">main.go —创建一个通过Socketmode连接到EventsAPI的Bot</p></figure><p id="8a48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确保运行该程序并验证连接的输出，将会有一个ping hello发送。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">main.go —运行程序的输出</p></figure><p id="a7cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是时候开始选择要监听的所有事件了。在程序的最后，我们调用<code class="fe mt mu mv mw b">socketClient.Run()</code>，它将在<code class="fe mt mu mv mw b">socketClient.Events</code>阻塞和接收通道上的新Websocket消息。因此，我们可以使用for循环来持续等待新事件，slack-go库也附带了预定义的事件类型，因此我们可以使用类型开关来轻松处理不同类型的事件。所有事件都可以在<a class="ae ky" href="https://api.slack.com/events?filter=Events" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="6df6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于<code class="fe mt mu mv mw b">socketClient.Run()</code>正在阻塞，我们将生成一个goroutine在后台处理传入的消息。</p><p id="cf42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将从每当Slack中触发EventAPI上的事件时简单地登录开始。因为我们首先需要在websocket上键入switch消息，如果它是一个<code class="fe mt mu mv mw b">EventsAPI</code>类型，然后根据实际发生的事件再次切换，我们将把事件处理分解到一个单独的函数中，以避免深度嵌套的切换。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">main.go —我们现在监听任何事件并将其打印出来</p></figure><p id="f90a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果要测试，运行程序然后用<code class="fe mt mu mv mw b">@yourbotname</code>输入Slack和由bot提及。</p><pre class="kj kk kl km gt nf mw ng nh aw ni bi"><span id="0cb7" class="lv lw it mw b gy nj nk l nl nm">go run main.go</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/b254e720b8c92f9aa018d25f8512dd78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vmCwAGqC2VxSpH5WWjbbFg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">slack——提到机器人</p></figure><p id="cb57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该能够在运行bot的命令行中看到记录的事件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">main.go —事件日志的输出</p></figure><p id="372f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看看打印的事件，你就会明白为什么我们需要使用多种类型的开关。我们得到的事件属于类型<code class="fe mt mu mv mw b">event_callback</code>，该事件包含一个<code class="fe mt mu mv mw b">payload</code>，其中包含实际执行的事件。</p><p id="691f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以首先我们需要测试它是否是一个回调事件，然后测试它是否是一个<code class="fe mt mu mv mw b">app_mention</code>有效负载事件。</p><p id="bad7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们实现将继续类型切换的<code class="fe mt mu mv mw b">handleEventMessage</code>。我们可以使用<code class="fe mt mu mv mw b">type</code>字段来知道如何处理该事件。然后我们可以通过使用<code class="fe mt mu mv mw b">InnerEvent</code>字段到达有效载荷事件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">handleEventMessagev1 —用于处理回调事件并查看它是否为AppMentionEvent的函数</p></figure><p id="f240" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用新的<code class="fe mt mu mv mw b">handleEventMessage</code>函数替换主函数中打印事件的先前日志。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Main.go使用handleEventMessage而不是嵌套类型开关</p></figure><p id="4bba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在记录事件并不能成为一个有趣的机器人。我们应该让机器人回应提到他的用户，如果他们说你好，它也应该问候他们。</p><p id="a978" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先登录到<a class="ae ky" href="https://api.slack.com/apps/" rel="noopener ugc nofollow" target="_blank">应用程序</a>并将<code class="fe mt mu mv mw b">users:read</code>范围添加到bot令牌。我相信你现在不用指导就能做到，或者回去看看我们以前是怎么做的。</p><p id="94b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦完成，我们将创建<code class="fe mt mu mv mw b">handleAppMentionEvent</code>函数。这个函数将把一个<code class="fe mt mu mv mw b">*slackevents.AppMentionEvent</code>和一个<code class="fe mt mu mv mw b">slack.Client</code>作为输入，这样它就可以响应。<br/>事件在<code class="fe mt mu mv mw b">event.User</code>中包含用户ID，因此我们可以使用该ID来获取用户信息。在<code class="fe mt mu mv mw b">event.Channel</code>中也提供了要响应的通道。我们需要的最后一条信息是用户在提及时发送的实际信息，可以在<code class="fe mt mu mv mw b">event.Text</code>中找到。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">handleAppMentionEvent—bot中提及的处理程序</p></figure><p id="c3c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要开始使用这个函数，我们还需要添加客户机作为输入参数。所以我们要更新<code class="fe mt mu mv mw b">handleEventMessage</code>才能接受。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">handleEventMessage —现在接受客户端作为输入参数</p></figure><p id="5839" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重新启动程序，试着打个招呼，并说些别的话，看看它是否如预期的那样工作。如果您得到一个“missing_scope”错误，那么您已经错过了一些范围。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/c79361aa3222bd5820a808b039a68fb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S3v01CkKLJhElSG0vPMKzg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">bot运行当前需要的所有作用域</p></figure><p id="af0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我当前运行的机器人的输出</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/4865f47010024f26acb04a030f8c7d13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3vFmzZzn694ngG0-0GmtbQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Slack —机器人按照预期做出响应</p></figure><p id="d1dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是时候向前看，看看如何添加斜杠命令了。</p><h2 id="7b85" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">向Slack bot添加斜杠命令</h2><p id="3bca" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我经常看到Slack机器人使用slash命令。这意味着你可以输入/发送一个特殊的命令。有许多内置命令，如<code class="fe mt mu mv mw b">/call</code>允许您开始通话等。</p><p id="2867" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将添加一个自定义命令<code class="fe mt mu mv mw b">/hello</code>。当这个命令被触发时，我们将让机器人发送一条问候消息。</p><p id="8b26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，您需要在<a class="ae ky" href="https://api.slack.com/apps/" rel="noopener ugc nofollow" target="_blank"> web UI </a>中添加命令。访问网站并在功能选项卡中选择<code class="fe mt mu mv mw b">Slash Command</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/4fce12c981eb22db05e966e8d1543801.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oii0Zi0CYiDLTH4bEAOEOA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">松弛—在UI中添加新的斜线命令。</p></figure><p id="efae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将创建一个接受单一参数的命令，该参数是要问候的用户名。</p><p id="5357" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">填写要求的字段，注意我们使用套接字模式，因此不需要提供请求URL。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/db1df1c34b805323238bf98f058154ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z08Y6qCETjgY2-SbW8qAsg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Slack —向hello用户名添加新的斜杠命令</p></figure><p id="c17a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加完命令后，不要忘记重新安装应用程序。这是必要的，因为我们已经改变了应用程序。如果您忘记了如何安装，那么请重新访问本文前面安装应用程序的部分。</p><p id="7b32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过打开slack和应用程序被邀请的通道并键入<code class="fe mt mu mv mw b">/hello</code>命令来验证所有东西都已安装。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/fd3ad283d7cd8d5115f6f595281e1821.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NGXe1uQGj2sz5_ltGcni5A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">键入/hello时出现Percy-Bot</p></figure><p id="0ef3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这很简单，让我们重做我们对EventsAPI所做的，但是这次我们将为<code class="fe mt mu mv mw b">EventTypeSlashCommand</code>添加一个类型开关。</p><p id="80f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将在<code class="fe mt mu mv mw b">SlashCommand.Command</code>中找到调用的命令，在<code class="fe mt mu mv mw b">SlashCommand.Text</code>中找到输入文本。因此，我们将首先根据命令的输入路由命令，然后将问候语返回到文本字段。</p><p id="1498" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先更新<code class="fe mt mu mv mw b">main.go</code>文件，以包含websocket上新类型消息事件的监听器。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Main.go添加了EventTypeSlashCommand消息的案例。</p></figure><p id="f45c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要忘记发送确认，否则您将在slack中看到一条错误消息，指出该消息未被正确发送。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/d9c28586aa3c95578c48bc10a5a4d9fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RE05QjsxDuJ0oqy5-brSXg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Slack —如果您忘记确认websocket消息的检索</p></figure><p id="f711" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将有一个名为<code class="fe mt mu mv mw b">handleSlashCommand</code>的路由器函数，它将简单地重定向到另一个函数。现在这看起来有点大材小用，但是如果你打算添加更多的功能，那么创建多个小功能会更容易。尤其是当你使用单元测试的时候。</p><p id="3a91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">实际的响应将来自<code class="fe mt mu mv mw b">handleHelloCommand</code>，它将简单地获取在<code class="fe mt mu mv mw b">/hello</code>命令之后设置的用户名，并在通道中发送一个问候。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">handleSlashCommand —将/hello重新路由到正确功能的路由器功能</p></figure><p id="5c07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重启程序并尝试从slack客户端发送命令。当我输入<code class="fe mt mu mv mw b">/hello reader</code>时，我看到下面的输出。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/28d9cabe5a7c7319089f82823dcf442d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j0CRU780ORI1AW00c2uEwA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">slack——来自/hello命令的输出</p></figure><h2 id="57fb" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">前进斜线命令和交互</h2><p id="5cb3" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们将看看如何实现一个斜杠命令来触发机器人问一个问题，我们可以用是或否按钮来回答。</p><p id="5b55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先在Slack web UI中添加新命令，这样我们就可以触发它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/48f4758190d02bfe2fce47c8dbbc17c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z6mQiDoYSphgbFOsgbIprA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">松弛时间—添加新命令</p></figure><p id="d243" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将首先对main函数做一个小的修改，在接受斜杠命令事件的类型开关中，我们目前在处理消息之前进行确认。我们将改变这一点，并在确认中返回响应，因为这是可能的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">main.go —更新我们接受斜杠命令的类型开关</p></figure><p id="2af1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你会看到我们可以多么容易地添加新命令，我们需要做的就是在<code class="fe mt mu mv mw b">handleSlashCommand</code>中添加一个新的case选项来检查。当然，我们也需要处理实际的命令，但是这种结构很容易扩展。我们将更新<code class="fe mt mu mv mw b">handleSlashCommand</code>,以便它也返回一个<code class="fe mt mu mv mw b">interface{}</code>。这是将包含在确认中的有效负载响应。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">handleSlashCommand —我们现在将两个斜杠命令路由到它们相应的处理程序</p></figure><p id="712a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将路由到一个名为<code class="fe mt mu mv mw b">handleIsArticleGood</code>的函数，该函数将使用名为<a class="ae ky" href="https://api.slack.com/block-kit" rel="noopener ugc nofollow" target="_blank"> Block-Kit </a>的东西向用户触发一个双按钮问卷。这是一个松散的实现，允许我们发送HTML组件。有大量的选项和组件要发送，但现在让我们坚持按钮。</p><p id="7abe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些块被添加到我们之前用来发送简单消息的<code class="fe mt mu mv mw b">slack.Attachment</code>中。它有一个名为<code class="fe mt mu mv mw b">Blocks</code>的字段，接受要发送的块的数组。每个块都是要发送的可视组件。</p><p id="2d57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用一个Section块，Slack库帮助我们使用接受几个参数的<code class="fe mt mu mv mw b">NewSectionBlock()</code>创建一个。</p><p id="8a34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一个参数是一个<code class="fe mt mu mv mw b">slack.TextBlockObject</code>，这是发送文本的标准方式，包含要使用的类型，其中我们将使用markdown。它还包含要在文本块中显示的值。</p><p id="10b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二个参数是要添加的字段，比如我们之前用来添加上下文数据的字段，让它保持为nil。</p><p id="1478" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第三个参数是一个<code class="fe mt mu mv mw b">slack.Accessory</code>，它是一个block元素的容器，你可以在slack <a class="ae ky" href="https://api.slack.com/messaging/composing/layouts" rel="noopener ugc nofollow" target="_blank">文档</a>中找到JSON布局。我们将向附件添加一个复选框元素，它包含两个选项，[是，否]。请记住，我们只是返回响应，在这种情况下，我们不像在hello处理程序中那样发送它。注意CheckBoxGroupsBlockElement中的<code class="fe mt mu mv mw b">answer</code>，这是用于识别执行了哪种交互的动作。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">handleIsArticleGood —构建我们在确认中发送的可视响应的处理程序</p></figure><p id="e8d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重启你的机器人，尝试在slack中执行命令。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/c3354f9491af13ddc3c66e967fa20ad8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rJM5XLU_iCcS20Qc4NsvzQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Slack —来自/was-this-article-used命令的响应</p></figure><p id="8122" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你选择某样东西时，什么也不会发生，因为我们还不接受后端的响应。这个响应将触发一个<code class="fe mt mu mv mw b">Interaction</code>事件，所以如果我们想要接受这个响应，我们需要在main函数中监听这个事件。</p><p id="c22c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">过程和以前一样，转换成正确的消息类型。在这种情况下，它是一个<code class="fe mt mu mv mw b">InteractionCallback</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">main.go —添加对交互的支持</p></figure><p id="b895" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将添加一个<code class="fe mt mu mv mw b">handleInteractionEvent</code>，它将简单地打印关于交互和所选选项的信息。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">handleInteractionEvent —打印交互的信息</p></figure><p id="c99d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尝试执行命令，并选择一个选项。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按“是/否”时交互的输出</p></figure><h2 id="e2ea" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">结论</h2><p id="1153" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们已经介绍了开始构建您的机器人所需的大部分项目。</p><p id="6a19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经讨论了这些主题</p><ul class=""><li id="6980" class="of og it lb b lc ld lf lg li oh lm oi lq oj lu ok ol om on bi translated">如何设置Slack-Bot应用程序</li><li id="4b44" class="of og it lb b lc oo lf op li oq lm or lq os lu ok ol om on bi translated">从Golang服务连接到应用程序</li><li id="4c9b" class="of og it lb b lc oo lf op li oq lm or lq os lu ok ol om on bi translated">收听频道中的机器人提及</li><li id="9d2b" class="of og it lb b lc oo lf op li oq lm or lq os lu ok ol om on bi translated">向bot添加斜杠命令</li><li id="3bc3" class="of og it lb b lc oo lf op li oq lm or lq os lu ok ol om on bi translated">使用时差事件API</li><li id="019a" class="of og it lb b lc oo lf op li oq lm or lq os lu ok ol om on bi translated">将可视化的块发送到Slack</li><li id="7f15" class="of og it lb b lc oo lf op li oq lm or lq os lu ok ol om on bi translated">监听用户交互</li></ul><p id="5ac2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是这一次，希望你喜欢这篇文章。一如既往，请随时联系我，给我反馈或问题。</p><p id="5b18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在出去建造一些机器人吧！</p></div></div>    
</body>
</html>