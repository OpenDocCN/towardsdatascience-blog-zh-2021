<html>
<head>
<title>Integrating PyPlot and PySimpleGUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">集成PyPlot和PySimpleGUI</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/integrating-pyplot-and-pysimplegui-b68be606b960?source=collection_archive---------4-----------------------#2021-05-04">https://towardsdatascience.com/integrating-pyplot-and-pysimplegui-b68be606b960?source=collection_archive---------4-----------------------#2021-05-04</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><figure class="it iu gq gs iv iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj is"><img src="../Images/83e7239b361393d99487979a9f90cc31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SmqAOUKpZA4oFjvCnRVNsw.png"/></div></div><p class="jd je gk gi gj jf jg bd b be z dk translated">所有图片由作者提供</p></figure><div class=""/><div class=""><h2 id="12ec" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">一个实用的数据即解决方案。</h2></div><h2 id="885f" class="ky kz jj bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">这是给谁的？</h2><p id="9871" class="pw-post-body-paragraph lu lv jj lw b lx ly kk lz ma mb kn mc lh md me mf ll mg mh mi lp mj mk ml mm in bi translated">如果你是一名数据科学家或者有一些python中的数据可视化需求，你可能正在使用<a class="ae mn" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.html" rel="noopener ugc nofollow" target="_blank"><strong class="lw jk"/></a>PyPlot，如果你需要与你的绘图交互或者制作一个独立的程序，你将需要将py plot与GUI库集成。我之所以使用<a class="ae mn" href="https://pysimplegui.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> <strong class="lw jk"> PySimpleGUI </strong> </a>是因为当我想快速地将东西放在一起并演示一个工作程序时，我会使用它。</p><pre class="mo mp mq mr gu ms mt mu mv aw mw bi"><span id="33d1" class="ky kz jj mt b gz mx my l mz na">⚠️ <strong class="mt jk">Caveat Emptor:</strong> There are other patterns and ways to code the same functionality, this is what makes sense to me, if you want to learn more check these related posts: <a class="ae mn" href="https://k3no.medium.com/organizing-your-python-code-ca5445843368" rel="noopener"><strong class="mt jk">Organizing your python code</strong></a> and <a class="ae mn" href="https://betterprogramming.pub/alternatives-to-using-globals-in-python-a3b2a7d5411b" rel="noopener ugc nofollow" target="_blank"><strong class="mt jk">Alternatives to using globals Python</strong></a>. There are also other GUI Libraries you might want to check via the following introductory posts, in addition to <a class="ae mn" href="https://levelup.gitconnected.com/uis-in-python-with-pysimplegui-e5cd8ea275e8" rel="noopener ugc nofollow" target="_blank"><strong class="mt jk">PySimpleGUI</strong></a> I currently like <a class="ae mn" href="https://k3no.medium.com/kivy-menagerie-af6a53e74695" rel="noopener"><strong class="mt jk">KIVY</strong></a> and <a class="ae mn" href="https://medium.com/swlh/python-gui-with-pyqt-pyside2-5cca38d739fa" rel="noopener"><strong class="mt jk">PyQT/PySide</strong></a><strong class="mt jk">.</strong></span></pre></div><div class="ab cl nb nc hy nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="in io ip iq ir"><h2 id="a9b8" class="ky kz jj bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">投机</h2><p id="038e" class="pw-post-body-paragraph lu lv jj lw b lx ly kk lz ma mb kn mc lh md me mf ll mg mh mi lp mj mk ml mm in bi translated">我们想要的是一个交互式的绘图，我的意思是你在UI中有一些影响绘图的控件，它可以从不同的数据系列或其他数据中选择，出于演示的目的，我们的规范将只有几个基本的调用来进行交互，但希望你能适应你的项目…</p><figure class="mo mp mq mr gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj ni"><img src="../Images/aa500fe1645631980f463e1005856470.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jBsvwS6TaF1XmZEuXbcqKg.png"/></div></div><p class="jd je gk gi gj jf jg bd b be z dk translated">imho规范是建议性的，而不是决定性的，我的意思是，最终结果可能不会像上面那样，但会做所代表的一切，甚至可能看起来更好。</p></figure></div><div class="ab cl nb nc hy nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="in io ip iq ir"><h2 id="9130" class="ky kz jj bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">婴儿学步</h2><p id="4535" class="pw-post-body-paragraph lu lv jj lw b lx ly kk lz ma mb kn mc lh md me mf ll mg mh mi lp mj mk ml mm in bi translated">在将Pyplot(或任何其他库)与GUI集成之前，我发现拥有一个可工作的最小化脚本是一个好主意，这样您可以稍后将它插入GUI:</p><figure class="mo mp mq mr gu iw"><div class="bz fq l di"><div class="nj nk l"/></div></figure><figure class="mo mp mq mr gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj nl"><img src="../Images/2be5260e207fcc6fdb222271d07d6bee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AwrYM5frpkLhLJ78aatzjA.png"/></div></div></figure></div><div class="ab cl nb nc hy nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="in io ip iq ir"><pre class="mo mp mq mr gu ms mt mu mv aw mw bi"><span id="6e45" class="ky kz jj mt b gz mx my l mz na">👋👋 Hi there 👋👋 all my content is free for Medium subscribers, if you are already a subscriber I wanted to say thank you ! 🎉 If not and you are considering subscribing, you can use my membership referral link, you will be supporting this and other high quality content, Thank you !</span><span id="cb7e" class="ky kz jj mt b gz nm my l mz na"><strong class="mt jk">⭐️⭐ </strong><a class="ae mn" href="https://k3no.medium.com/membership" rel="noopener"><strong class="mt jk">Subscribe to Medium !</strong></a><strong class="mt jk"> ⭐️⭐️</strong></span></pre></div><div class="ab cl nb nc hy nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="in io ip iq ir"><h2 id="ded2" class="ky kz jj bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">最小PySimpleGUI Pyplot集成</h2><p id="3f40" class="pw-post-body-paragraph lu lv jj lw b lx ly kk lz ma mb kn mc lh md me mf ll mg mh mi lp mj mk ml mm in bi translated">下一步是抓住这个最小的例子，并把它添加到PySimpleGUI中，UI集成的关键是，有时你必须有一个各种各样的桥梁，帮助器方法，或者下降到两个库可以相互对话的水平，在这个例子中是tkinter canvas。</p><figure class="mo mp mq mr gu iw"><div class="bz fq l di"><div class="nj nk l"/></div></figure><figure class="mo mp mq mr gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj nn"><img src="../Images/f9420d7b3a2dacc0a54ae29e55a0904c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9nuRfZACGtIlXve6QjXdtQ.png"/></div></div></figure><pre class="mo mp mq mr gu ms mt mu mv aw mw bi"><span id="6cbe" class="ky kz jj mt b gz mx my l mz na">Note that we lost the toolbars from PyPlot, mostly to keep things simple and use the GUI to interact with the plot, if you still need the toolbar check this demo program:</span><span id="408c" class="ky kz jj mt b gz nm my l mz na"><a class="ae mn" href="https://github.com/PySimpleGUI/PySimpleGUI/blob/master/DemoPrograms/Demo_Matplotlib_Embedded_Toolbar.py" rel="noopener ugc nofollow" target="_blank">https://github.com/PySimpleGUI/PySimpleGUI/blob/master/DemoPrograms/Demo_Matplotlib_Embedded_Toolbar.py</a></span></pre></div><div class="ab cl nb nc hy nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="in io ip iq ir"><h2 id="a2fa" class="ky kz jj bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">更新图表</h2><p id="4c2a" class="pw-post-body-paragraph lu lv jj lw b lx ly kk lz ma mb kn mc lh md me mf ll mg mh mi lp mj mk ml mm in bi translated">要更新图表，我们需要重新绘制它，这意味着我们需要删除它，修改它，然后在画布上再次绘制它…</p><figure class="mo mp mq mr gu iw"><div class="bz fq l di"><div class="nj nk l"/></div></figure><pre class="mo mp mq mr gu ms mt mu mv aw mw bi"><span id="e4e5" class="ky kz jj mt b gz mx my l mz na">⚠️ <strong class="mt jk">A few new things in this script:</strong> We have new methods to deal with the plot update ( I am calling it chart in the methods to differentiate the methods, the plot and the figures ), there are also new "global" variables for the figure and plot so we can reference them after creating them, a new button and event catcher for the UI part and a new method to update the chart/plot/figure where we actually do the updating, one last upgrade is the makeSynthData method (always be refactoring). </span></pre><figure class="mo mp mq mr gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj no"><img src="../Images/394a77324397ab53f9f98fd6f52aa085.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2ZeLJucoTlNxsctk4uQkWA.gif"/></div></div><p class="jd je gk gi gj jf jg bd b be z dk translated">还改变了主题，以突出闪烁的更新。</p></figure><p id="6592" class="pw-post-body-paragraph lu lv jj lw b lx np kk lz ma nq kn mc lh nr me mf ll ns mh mi lp nt mk ml mm in bi translated">好消息是，它的工作，我们现在有一个可更新的情节，它似乎工作得很好，唯一的问题是，更新似乎有点不和谐，这是由于画布重绘，并证明是一个不那么微不足道的问题…</p><pre class="mo mp mq mr gu ms mt mu mv aw mw bi"><span id="66c6" class="ky kz jj mt b gz mx my l mz na">💁 Like many things in life, getting rid of bugs in programs seems to follow the <a class="ae mn" href="https://en.wikipedia.org/wiki/Pareto_distribution" rel="noopener ugc nofollow" target="_blank">Pareto Principle</a>, that is 20% of the final improvements can take 80% of your time and add considerable complexity ( <em class="nu">I guess</em> t<em class="nu">he flip side might be that 20% of your time will give you 80% of the program</em> ). In this case getting a smooth update would perhaps entail integrating PyPlot at a lower level, introducing threads and on and on, read here if you want to go this route : <a class="ae mn" href="https://stackoverflow.com/questions/4098131/how-to-update-a-plot-in-matplotlib" rel="noopener ugc nofollow" target="_blank">How to update a plot in matplotlib?</a></span></pre><h2 id="d4e4" class="ky kz jj bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">折衷解决方案。</h2><p id="786a" class="pw-post-body-paragraph lu lv jj lw b lx ly kk lz ma mb kn mc lh md me mf ll mg mh mi lp mj mk ml mm in bi translated">解决这种困境的一个简单的方法是简单地使用你所拥有的东西，找到简单的替代方法，这里我只是简单地将Pyplot风格与PysimpleGUI主题相匹配，这样会有更好的体验:</p><figure class="mo mp mq mr gu iw"><div class="bz fq l di"><div class="nj nk l"/></div></figure><p id="2e44" class="pw-post-body-paragraph lu lv jj lw b lx np kk lz ma nq kn mc lh nr me mf ll ns mh mi lp nt mk ml mm in bi translated">应该给你:</p><figure class="mo mp mq mr gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj no"><img src="../Images/2dcb1bc3645d39962114a0b939b0c4a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*RC2yzQs4MPtx_Jy9XWgaZQ.gif"/></div></div></figure><pre class="mo mp mq mr gu ms mt mu mv aw mw bi"><span id="eb3d" class="ky kz jj mt b gz mx my l mz na">⚠️ Matching themes across libraries can be time consuming, getting the exact colors for an element might require you to dig through the documentation, my quick alternative is to simply use a color picker, so here I first changed the theme to <strong class="mt jk">Solarize_Light</strong>, and then got the colors for PySimpleGUI with a color picker (I like <a class="ae mn" href="https://colorslurp.com" rel="noopener ugc nofollow" target="_blank">colorslurp</a> ). </span></pre></div><div class="ab cl nb nc hy nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="in io ip iq ir"><h2 id="f957" class="ky kz jj bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">发展</h2><p id="b357" class="pw-post-body-paragraph lu lv jj lw b lx ly kk lz ma mb kn mc lh md me mf ll mg mh mi lp mj mk ml mm in bi translated">经过这个小小的迂回之后，剩下要做的就是添加更多的按钮和调用来修改你的情节，例如，让我们用一个滑块来改变<code class="fe nv nw nx mt b"><strong class="lw jk">dataSize</strong></code> <strong class="lw jk"> </strong>变量…</p><figure class="mo mp mq mr gu iw"><div class="bz fq l di"><div class="nj nk l"/></div></figure><p id="b737" class="pw-post-body-paragraph lu lv jj lw b lx np kk lz ma nq kn mc lh nr me mf ll ns mh mi lp nt mk ml mm in bi translated">应该给你:</p><figure class="mo mp mq mr gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj ny"><img src="../Images/35533b5d8d5f8c8cf5b19459ddc2fd01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*m9QU9-ivtqunY9A9ruwoWg.gif"/></div></div><p class="jd je gk gi gj jf jg bd b be z dk translated">看在我当初的spec上，叶不可一世，<strong class="bd nz">绝望</strong>！但是说真的，它做了规范中说的所有事情。</p></figure><pre class="mo mp mq mr gu ms mt mu mv aw mw bi"><span id="9aea" class="ky kz jj mt b gz mx my l mz na"><strong class="mt jk">Some Final Changes: </strong>I've added a <a class="ae mn" href="https://pysimplegui.readthedocs.io/en/latest/call%20reference/#slider-element" rel="noopener ugc nofollow" target="_blank"><strong class="mt jk">slider</strong></a> element to take care of the sample size ( also renamed everything so it makes some Data Science sense ) this slider simply changes the now global dataSize variable and calls the <strong class="mt jk">updateChart</strong> method we've been using, I left the update button but renamed it to resample. The rest of the changes are visual ones( check the <strong class="mt jk">layout</strong> definition) note that most of the alignment is done via padding.</span></pre><p id="7eb2" class="pw-post-body-paragraph lu lv jj lw b lx np kk lz ma nq kn mc lh nr me mf ll ns mh mi lp nt mk ml mm in bi translated">总而言之，我可以演示这一点，我希望它能作为你制作自己的快速数据即仪表板实验的起点。</p><p id="1e21" class="pw-post-body-paragraph lu lv jj lw b lx np kk lz ma nq kn mc lh nr me mf ll ns mh mi lp nt mk ml mm in bi translated">感谢阅读！</p></div></div>    
</body>
</html>