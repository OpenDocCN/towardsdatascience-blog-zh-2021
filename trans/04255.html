<html>
<head>
<title>Another Apriori Article but With a Small Twist…</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">另一篇先验的文章，但有一点小小的变化…</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/another-apriori-article-but-with-a-small-twist-ebfac2d639b?source=collection_archive---------30-----------------------#2021-04-10">https://towardsdatascience.com/another-apriori-article-but-with-a-small-twist-ebfac2d639b?source=collection_archive---------30-----------------------#2021-04-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1aa4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你的老板想知道做一次产品推广的估计财务影响，给了你一大堆交易数据。<em class="kf">现在怎么办？</em></h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/256d9d8e3efa443a0d83456ddda46c6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eOL4km9a3fWkC_cE"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">由<a class="ae kw" href="https://unsplash.com/@srd844?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">斯蒂芬·道森</a>在<a class="ae kw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="3a74" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">已经有很多关于先验细节的好文章了。我将主要关注一个现实的商业场景，它可能围绕着先验和市场篮分析的应用出现。</p><p id="e140" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">但是对Apriori算法做一个快速和高水平的复习是没有坏处的。</p><h1 id="5215" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><em class="kf">买了</em> X <em class="kf">的也买了Y. </em></h1><p id="a67d" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">Apriori是一种关联规则挖掘算法，它发现哪些项目倾向于与哪些其他项目相匹配。想象一个超市，薯条和蘸酱通常在过道上相邻放置(甚至穿过商店，让你走得更远，可能会冲动购买更多)。</p><p id="2622" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在进行<em class="mq">购物篮分析时，Apriori算法的输出中有三个关键指标需要查看，即</em>支持度、信心度和提升度。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/b5aac693ee67b8a104cf121a81e88523.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*WjKrRYFU1GHIZxcU6G0T1g.png"/></div></figure><p id="3925" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">支持</strong> - &gt;既有A又有b的部分交易</p><p id="fec3" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">置信度</strong> - &gt;给定A出现的次数，A &amp; B一起买入的频率。</p><p id="bb57" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">解除</strong> - &gt;表示统治随机几率的强弱。例如，3.2的提升意味着如果客户购买A，他们购买b的可能性会增加3.2倍。</p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><h1 id="3fde" class="lt lu iq bd lv lw mz ly lz ma na mc md jw nb jx mf jz nc ka mh kc nd kd mj mk bi translated">回到你老板要求的场景…</h1><p id="75c0" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">在这个场景中，您有一个包含零售业务交易数据的大文件。你的老板说市场部想通过赠送糖果棒来促销贺卡。您的任务是验证假设并估计财务影响。</p><p id="7969" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我觉得贺卡利润丰厚，我也喜欢糖果。不管怎样，回到场景… </p><p id="1d8d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">取一个峰值，我们可以看到有459，258条记录，最终代表200，000笔交易。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/da36fbad0acc662c61a0dbaf5039998c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*7hs2NVV2qd4RCi1xCxw-Cw.png"/></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">项目频率图(来自R中的arulesViz库)(图片由作者提供)</p></figure><p id="020c" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><em class="mq">我这里主要关注的是</em> <strong class="kz ir"> <em class="mq">有什么影响？</em> </strong> <em class="mq">“在真实的商业场景中。在这一点上，我将忽略EDA，以及很多先验部分本身，因为它在其他文章中已经讨论过了，但不是我的主要关注点。</em></p><p id="bd45" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">浏览完数据后，你会发现这并不是一个太糟糕的想法。我们看到，几乎30%的情况下，购买糖果棒的同时还会购买贺卡(<strong class="kz ir">信心</strong>)。我们还发现，购买贺卡的人购买糖果棒的可能性是其他人的1.74倍(<strong class="kz ir">举</strong>)。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/15a79d0f14391b6f52d446346c13ba31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*iQnmruHHG3CCzV3hyYA53w.png"/></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">LHS和RHS分别是“左手侧”和“右手侧”。LHS是倾向于导致购买RHS产品的产品。(图片由作者提供)</p></figure><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/e5a75c954de9c31a52308c7bb2192430.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*k_q3W-LSU1wqZtrOTePnuQ.png"/></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">按事务数据集中的项目汇总统计信息。(图片由作者提供)</p></figure><p id="a934" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">给定按产品的汇总统计数据并浏览原始数据，可以有把握地说这里可能发生两种情况中的一种(可能是组合)。</p><ol class=""><li id="42ed" class="nh ni iq kz b la lb ld le lg nj lk nk lo nl ls nm nn no np bi translated">这家公司的交易中有相当一部分是大宗销售。</li><li id="4050" class="nh ni iq kz b la nq ld nr lg ns lk nt lo nu ls nm nn no np bi translated">来自杂项事务的数据中有噪声。<br/> -例如，一家商店的系统停机了一天，他们输入了一个汇总交易来平衡库存。</li></ol><p id="1608" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这个数据集对于一个简单的例子来说已经足够好了，所以让我们看看糖果和贺卡。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi nv"><img src="../Images/86445f7ce2914557d5cc3f236952c362.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0XM2H89ftrVJ0qKOcEiq-A.png"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">项目摘要表的子集，查看我们感兴趣的内容。(图片由作者提供)</p></figure><h2 id="bdba" class="nw lu iq bd lv nx ny dn lz nz oa dp md lg ob oc mf lk od oe mh lo of og mj oh bi translated">假设</h2><p id="d300" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">让我们假设:</p><ul class=""><li id="ad74" class="nh ni iq kz b la lb ld le lg nj lk nk lo nl ls oi nn no np bi translated">贺卡的利润非常可观，1美元买5美元卖。</li><li id="a779" class="nh ni iq kz b la nq ld nr lg ns lk nt lo nu ls oi nn no np bi translated">糖果有不错的利润，0.67美元买进，1美元卖出。</li><li id="4e07" class="nh ni iq kz b la nq ld nr lg ns lk nt lo nu ls oi nn no np bi translated">该数据代表1年的交易量。</li></ul><p id="6447" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">可以肯定地说，以这样的速度，我们想推动贺卡的销售，可以用糖果棒的销售作为激励。</p><p id="069d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们在汇总表中看到，平均贺卡交易有2.53张贺卡。</p><h1 id="f898" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">现在最大的问题是:</h1><p id="cd12" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">如果我们能通过“至少购买3张贺卡，可获得一个免费糖果棒”的促销活动，将平均贺卡数量从2.53张提高到3张… <strong class="kz ir"> <em class="mq">会有什么影响？</em> </strong></p><p id="2fc7" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">平均数3.0减去目前的平均数2.531，得出每笔交易贺卡平均净增加0.469张。</p><p id="52a2" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们可以用这个增量，或者说净平均增长，乘以利润来估算贺卡业务的毛利增长。很简单，每张卡0.469 * 4美元的利润等于1.876美元。</p><p id="cbd1" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">现在我们有进展了。如果我们将平均值提高到3，我们可以预期每笔交易会再增加1.876美元。但是等等，糖果不是免费的(记住，它们的价格是0.67英镑)，所以我们需要把它考虑进去。这使我们每笔交易的净利润增加了1.206美元。</p><p id="9da5" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">因此，如果我们将其应用于贺卡交易总数(40，292)，我们会看到<strong class="kz ir"> <em class="mq">预计的</em> </strong>净利润增长为<strong class="kz ir"> $48，608！</strong></p><h2 id="66d2" class="nw lu iq bd lv nx ny dn lz nz oa dp md lg ob oc mf lk od oe mh lo of og mj oh bi translated">旁注:</h2><p id="9c97" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">当进行这类分析时，如果企业中有人在寻找<em class="mq">一个数字</em>，设定期望值很重要。任何时候我被要求计算出<em class="mq">一些</em>变化的影响，我总是把它框定为一个估计，并列出导致那个估计的我的假设。大多数时候都明白没有水晶球，但也有可能有人认为有。或者更有可能的是，他们知道这是一个估计，但他们不知道你可能做的任何假设。</p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><p id="3671" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">因此，起初，这个场景可能看起来令人生畏，尤其是对于初级分析师(没关系！).但是，如果我们把问题分解成更小的块，就会变得容易得多。</p><h1 id="dcf0" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">结论</h1><p id="6d15" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">感谢您花时间阅读本文。我希望您从中获得了一些有用的东西，可以应用到现实世界的场景中。如果您有任何问题或反馈，请随时发表评论。</p><p id="7fd4" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">如果你喜欢这篇文章，你可能也会喜欢我关于使用PuLP解决一个简单优化问题的文章。</p><div class="oj ok gp gr ol om"><a href="https://python.plainenglish.io/python-pulp-optimization-a-simple-logistics-example-4a8f713ba807" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd ir gy z fp or fr fs os fu fw ip bi translated">Python + Pulp优化:一个简单的物流例子</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">Python的纸浆是一个优化工具，像Excel求解器(硬币或纸浆)。我有一个不太适合的用例…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">python .平原英语. io</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa kq om"/></div></div></a></div><p id="518b" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">继续学习！</p></div></div>    
</body>
</html>