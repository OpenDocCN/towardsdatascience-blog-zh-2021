<html>
<head>
<title>Bring your Telegram Chatbot to the next level</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">è®©ä½ çš„ç”µæŠ¥èŠå¤©æœºå™¨äººæ›´ä¸Šä¸€å±‚æ¥¼</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://towardsdatascience.com/bring-your-telegram-chatbot-to-the-next-level-c771ec7d31e4?source=collection_archive---------3-----------------------#2021-03-19">https://towardsdatascience.com/bring-your-telegram-chatbot-to-the-next-level-c771ec7d31e4?source=collection_archive---------3-----------------------#2021-03-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7bac" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">å‘ç°å¯ä»¥æ”¹å˜ç°çŠ¶çš„é«˜çº§åŠŸèƒ½</h2></div><p id="5242" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Telegramæ˜¯ä¸€ä¸ªæµè¡Œçš„å¼€å‘èŠå¤©æœºå™¨äººçš„å¹³å°:ä¼˜ç§€çš„æ–‡æ¡£ï¼Œæ´»è·ƒçš„ç¤¾åŒºï¼Œå„ç§å„æ ·çš„åº“å’Œå¤§é‡çš„ä¾‹å­ã€‚</p><p id="f928" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">å¦‚æœä½ æ˜¯åˆšå…¥é—¨çš„è¯ï¼Œè¿™é‡Œæœ‰å¾ˆå¤šæ•™ç¨‹ï¼Œå°¤å…¶æ˜¯å…³äºT2åª’ä½“çš„ã€‚å¹¶ä¸”<a class="ae le" href="https://stackoverflow.com/questions/tagged/telegram-bot" rel="noopener ugc nofollow" target="_blank"> Stackoverflow </a>ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å›ç­”é—®é¢˜å’Œç†è§£é—®é¢˜çš„èµ„æº(ä½ çš„ä½œè€…ç»å¸¸è¢«å‘ç°åœ¨é‚£é‡Œè¯•å›¾å¸®åŠ©å…¶ä»–å¼€å‘è€…ğŸ¤“).</p><p id="6a4a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ç›¸åï¼Œæœ¬æ–‡å…³æ³¨äºä¸ä½¿ç”¨<a class="ae le" href="https://python-telegram-bot.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> Pythonç”µæŠ¥æœºå™¨äºº</a>å®ç°ç”µæŠ¥æœºå™¨äººç›¸å…³çš„<strong class="kk iu">æ›´é«˜çº§çš„æ–¹é¢:</strong></p><ul class=""><li id="08bb" class="lf lg it kk b kl km ko kp kr lh kv li kz lj ld lk ll lm ln bi translated">Pull vs Webhook</li><li id="db76" class="lf lg it kk b kl lo ko lp kr lq kv lr kz ls ld lk ll lm ln bi translated">è·å–èŠå¤©ID</li><li id="7b40" class="lf lg it kk b kl lo ko lp kr lq kv lr kz ls ld lk ll lm ln bi translated">æ˜¾ç¤ºâ€œæ­£åœ¨è¾“å…¥â€¦â€å¹¶å»ºè®®ç­”æ¡ˆ</li><li id="d95e" class="lf lg it kk b kl lo ko lp kr lq kv lr kz ls ld lk ll lm ln bi translated">æ·±å±‚é“¾æ¥</li><li id="4a56" class="lf lg it kk b kl lo ko lp kr lq kv lr kz ls ld lk ll lm ln bi translated">å‘é€åª’ä½“å’Œæ–‡ä»¶</li></ul><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/5520791f232acd5b87754a1bcdb932e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TJMlSskm4YqOhY2WDz5UkA.jpeg"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">Christian Wiediger åœ¨<a class="ae le" href="/s/photos/telegram?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„çš„ç…§ç‰‡</p></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="8fb2" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">æœ¬åœ°å·¥ä½œçš„è½®è¯¢æ¨¡å¼</h1><p id="fc57" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">ç”µæŠ¥æœºå™¨äººå¯ä»¥é€šè¿‡<strong class="kk iu">æ‹‰</strong>æˆ–<strong class="kk iu">æ¨</strong>æœºåˆ¶å·¥ä½œ(å‚è§æ›´å¤šç½‘é¡µæŒ‚é’©)ã€‚â€œæ‹‰â€æœºåˆ¶æ˜¯bot(æ‚¨çš„ä»£ç )å®šæœŸæ£€æŸ¥æœåŠ¡å™¨ä¸Šæ–°çš„å¯ç”¨æ¶ˆæ¯çš„åœ°æ–¹ã€‚</p><p id="2082" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æ¯ä¸ªäººéƒ½åŒæ„è¿™ä¸æ˜¯ä¸€ä¸ªç†æƒ³çš„æ–¹æ³•(ä¸å¿…è¦çš„èµ„æºæµªè´¹ï¼Œæ¶ˆæ¯åœ¨24å°æ—¶åè¢«ä¸¢å¼ƒ)ï¼Œä½†æ˜¯åœ¨æœ¬åœ°å¼€å‘æ—¶å®ƒæ˜¯æ–¹ä¾¿çš„ã€‚(ä¸éœ€è¦ngrokä¹‹ç±»çš„éš§é“è½¯ä»¶)ã€‚</p><pre class="lu lv lw lx gt nn no np nq aw nr bi"><span id="537f" class="ns mr it no b gy nt nu l nv nw"><strong class="no iu">def </strong>main():<br/>    updater = Updater('myTelegramToken')<br/><br/>    dp = updater.dispatcher</span><span id="5b08" class="ns mr it no b gy nx nu l nv nw">    <em class="ny"># define command handler<br/>    </em>dp.add_handler(CommandHandler(<strong class="no iu">"</strong>help<strong class="no iu">"</strong>, help_command_handler))<br/>    <em class="ny"># define message handler<br/>    </em>dp.add_handler(MessageHandler(Filters.text, main_handler))</span><span id="30c3" class="ns mr it no b gy nx nu l nv nw">    updater.<strong class="no iu">start_polling</strong>()</span></pre><h1 id="38c1" class="mq mr it bd ms mt nz mv mw mx oa mz na jz ob ka nc kc oc kd ne kf od kg ng nh bi translated">ç”Ÿäº§ä¸Šçš„ç½‘ç»œæŒ‚é’©</h1><p id="2de0" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">ä¸€æ—¦botä¸ºéƒ¨ç½²åšå¥½å‡†å¤‡ï¼Œå°±è¯¥å¯ç”¨Webhookäº†:è¿™æ ·åšTelegramä¼šå°†æ›´æ–°æ¨é€åˆ°æ³¨å†Œçš„webhookç«¯ç‚¹ï¼Œåªæœ‰å½“æœ‰æ–°çš„æ¶ˆæ¯ä¼ å…¥æ—¶ï¼Œæ‚¨çš„æœåŠ¡æ‰ä¼šå˜å¾—ç¹å¿™ã€‚</p><pre class="lu lv lw lx gt nn no np nq aw nr bi"><span id="f116" class="ns mr it no b gy nt nu l nv nw">updater.start_webhook(listen=<strong class="no iu">"0.0.0.0"</strong>,<br/>                      port=3978,<br/>                      url_path='myTelegramToken')<br/>updater.bot.setWebhook('https://example.com/svc/myTelegramToken')</span></pre><p id="d062" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">æ³¨æ„</strong> : webhookä¸æ— æœåŠ¡å™¨æ¶æ„æˆ–â€œæŒ‰éœ€â€èŠ‚ç‚¹é…åˆè‰¯å¥½ã€‚æˆ‘å·²ç»åœ¨Herokuè‡ªç”±å±‚ä¸Šéƒ¨ç½²äº†Telegram webhooksï¼Œå®ƒä¼šåœ¨30åˆ†é’Ÿä¸æ´»åŠ¨åè¿›å…¥ç¡çœ çŠ¶æ€ï¼Œä½†å¦‚æœæ¨é€æ–°æ¶ˆæ¯ï¼ŒHeroky Dynoä¼šå¯åŠ¨ï¼Œæ¶ˆæ¯ä¼šåœ¨å‡ ç§’é’Ÿå†…æ¶ˆè€—æ‰ã€‚</p><p id="6369" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">æ³¨2 </strong>:æ ¹æ®botéƒ¨ç½²çš„ä½ç½®ï¼Œéœ€è¦é…ç½®ç«¯å£å·ã€‚ä¾‹å¦‚ï¼Œåœ¨Herokuä¸Šï¼Œç«¯å£é€šå¸¸ç”±portç¯å¢ƒå˜é‡å®šä¹‰ï¼Œä¸åº”è¯¥ç¡¬ç¼–ç ã€‚</p><p id="0f89" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">å¦‚ä½•æ³¨å†Œwebhook </strong></p><p id="5ec1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ä½ å¯ä»¥è°ƒç”¨ä¸€ä¸ª<code class="fe oe of og no b">setWebhook </code> URL:ä½¿ç”¨ä½ çš„ç§æœ‰ä»¤ç‰Œå¹¶ä¼ é€’webhookçš„URL(å¿…é¡»æ˜¯HTTPS)ã€‚</p><pre class="lu lv lw lx gt nn no np nq aw nr bi"><span id="8434" class="ns mr it no b gy nt nu l nv nw"><a class="ae le" href="https://api.telegram.org/bot(mytoken)/setWebhook?url=https://mywebpagetorespondtobot/mymethod" rel="noopener ugc nofollow" target="_blank">https://api.telegram.org/bot{</a>myTelegramToken}/setWebhook?url=https://example.com/svc</span></pre><p id="e9f1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">åœ¨æ‹‰å’Œæ¨æ¨¡å¼ä¹‹é—´åˆ‡æ¢</strong></p><p id="b625" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æˆ‘å‘ç°ä½¿ç”¨ç¯å¢ƒå˜é‡ä»¥ç¼–ç¨‹æ–¹å¼åœ¨è½®è¯¢å’Œwebhookä¹‹é—´åˆ‡æ¢éå¸¸æ–¹ä¾¿:é»˜è®¤è®¾ç½®æ˜¯<code class="fe oe of og no b">polling</code>åœ¨æœ¬åœ°å·¥ä½œï¼Œä½†æ˜¯ï¼Œå½“éƒ¨ç½²åœ¨å®æ—¶ç³»ç»Ÿä¸Šæ—¶ï¼Œå®ƒå¯ä»¥è¢«è¦†ç›–(åˆ°<code class="fe oe of og no b">webhook</code>)ã€‚</p><pre class="lu lv lw lx gt nn no np nq aw nr bi"><span id="e708" class="ns mr it no b gy nt nu l nv nw"># read MODE env variable, fall back to 'polling' when undefined<br/>mode = os.environ.get(<strong class="no iu">"MODE"</strong>, <strong class="no iu">"polling")</strong></span><span id="f6e5" class="ns mr it no b gy nx nu l nv nw"><strong class="no iu">if </strong>DefaultConfig.MODE == <strong class="no iu">'webhook'</strong>:<br/>  # enable webhook<br/>  updater.start_webhook(listen=<strong class="no iu">"0.0.0.0"</strong>,<br/>                      port=3978,<br/>                      url_path='myTelegramToken')<br/>  updater.bot.setWebhook('https://example.com/svc/myTelegramToken')</span><span id="a7fb" class="ns mr it no b gy nx nu l nv nw"><strong class="no iu">else</strong>:<br/>    # enable polling<br/>    updater.start_polling()</span></pre><h1 id="95b6" class="mq mr it bd ms mt nz mv mw mx oa mz na jz ob ka nc kc oc kd ne kf od kg ng nh bi translated">è·å–èŠå¤©Id</h1><p id="265b" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">å›å¤æ”¶åˆ°çš„ä¿¡æ¯éå¸¸ç®€å•ã€‚</p><pre class="lu lv lw lx gt nn no np nq aw nr bi"><span id="9719" class="ns mr it no b gy nt nu l nv nw">update.message.reply_text("Hi there!")</span></pre><p id="e76a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ç„¶è€Œï¼Œæœ‰æ—¶æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿåœ¨ç”¨æˆ·æ²¡æœ‰è¯¢é—®ä»»ä½•äº‹æƒ…çš„æƒ…å†µä¸‹å‘èµ·æ¶ˆæ¯(ä¾‹å¦‚ï¼Œå‡ å¤©åçš„é€šçŸ¥ï¼Œä»¥é‡æ–°å¸å¼•æˆ‘ä»¬çš„ç”¨æˆ·)ã€‚</p><p id="f18d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æ£€ç´¢(å¹¶ä¿å­˜)åœ¨ç”¨æˆ·å‘é€çš„æ¶ˆæ¯çš„JSONæœ‰æ•ˆè´Ÿè½½ä¸­æ‰¾åˆ°çš„<code class="fe oe of og no b">chat_id</code>(æ˜¯çš„ï¼Œæ‚¨è‡³å°‘éœ€è¦ä¸€æ¡æ¶ˆæ¯)</p><pre class="lu lv lw lx gt nn no np nq aw nr bi"><span id="3e72" class="ns mr it no b gy nt nu l nv nw">{'update_id': 527095032, <br/> 'message': {<br/>     'message_id': 412, <br/>     'date': 1615991013, <br/>     'chat': {<br/>        'id': 931365322, <br/>        'type': 'private', <br/>        'username': 'gcatanese', <br/>        ....</span></pre><p id="9b97" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">å½“è§£ææœ‰æ•ˆè´Ÿè½½Pythonæ—¶ï¼Œä¸è¦å¿˜è®°ä¸åŒçš„æ¶ˆæ¯æœ‰ç¨å¾®ä¸åŒçš„JSONã€‚</p><pre class="lu lv lw lx gt nn no np nq aw nr bi"><span id="96e3" class="ns mr it no b gy nt nu l nv nw"><strong class="no iu">def </strong>get_chat_id(update, context):<br/>    chat_id = -1<br/><br/>    <strong class="no iu">if </strong>update.message <strong class="no iu">is not None</strong>:<br/>        # text message<br/>        chat_id = update.message.chat.id<br/>    <strong class="no iu">elif </strong>update.callback_query <strong class="no iu">is not None</strong>:<br/>        # callback message<br/>        chat_id = update.callback_query.message.chat.id<br/>    <strong class="no iu">elif </strong>update.poll <strong class="no iu">is not None</strong>:<br/>        # answer in Poll<br/>        chat_id = context.bot_data[update.poll.id]<br/><br/>    <strong class="no iu">return </strong>chat_id</span></pre><h1 id="717b" class="mq mr it bd ms mt nz mv mw mx oa mz na jz ob ka nc kc oc kd ne kf od kg ng nh bi translated">å»ºè®®çš„è¡ŒåŠ¨</h1><p id="2923" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">å¼•å¯¼å¯¹è¯ï¼Œä¸ºç”¨æˆ·æä¾›é¢„å®šä¹‰çš„é€‰é¡¹ä»¥ä¾›é€‰æ‹©ã€‚è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨<code class="fe oe of og no b">InlineKeyboardMarkup</code>æ¥å®ç°ï¼Œè¿™æ˜¯ä¸€ä¸ªå‡ºç°åœ¨ä¿¡æ¯æ—è¾¹çš„é”®ç›˜(åƒä¸€ä¸ªé—®é¢˜)ã€‚</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi oh"><img src="../Images/e9c0eb9565bb37ffddc6db1bdc1f543f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*csaW5wmFbYxZQ_nHof16VA.png"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">ä½œè€…å›¾ç‰‡</p></figure><p id="edfa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ä¸‹é¢æ˜¯åˆ›å»ºé€‰é¡¹çš„Pythonç‰‡æ®µ:</p><pre class="lu lv lw lx gt nn no np nq aw nr bi"><span id="566e" class="ns mr it no b gy nt nu l nv nw">options = []<br/>options.append(InlineKeyboardButton(text='Text', callback_data='1'))<br/>options.append(InlineKeyboardButton(text='File', callback_data='2'))<br/>options.append(InlineKeyboardButton(text='GoogleDoc', callback_data='3'))<br/>options.append(InlineKeyboardButton(text='Gallery', callback_data='4'))</span><span id="43e7" class="ns mr it no b gy nx nu l nv nw">reply_markup = InlineKeyboardMarkup([options])</span><span id="e05f" class="ns mr it no b gy nx nu l nv nw">context.bot.send_message(chat_id=get_chat_id(update, context), text='What would you like to receive?', reply_markup=reply_markup)</span></pre><p id="36de" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">é‡è¦çš„æ˜¯è¦ç†è§£å“åº”å°†ç”±ä¸€ä¸ª<code class="fe oe of og no b">CallbackQueryHandler</code>æ¥å¤„ç†ï¼Œå¹¶ä¸”ä¼ å…¥çš„JSONæœ‰æ•ˆè´Ÿè½½ä¸åŒäºçº¯æ–‡æœ¬æ¶ˆæ¯ã€‚</p><pre class="lu lv lw lx gt nn no np nq aw nr bi"><span id="a911" class="ns mr it no b gy nt nu l nv nw"># input from text message<br/>text = update.message.text<br/># selection from callback<br/>choice = update.callback_query.data</span></pre><p id="bd63" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">æ³¨æ„</strong>:ä¸€æ—¦åšå‡ºé€‰æ‹©ï¼Œé€‰é¡¹å°±ä¼šä»èŠå¤©ä¸­æ¶ˆå¤±ã€‚</p><p id="9aab" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">æ³¨2 </strong>:ä½¿ç”¨å¸¸æ•°å€¼å®šä¹‰<code class="fe oe of og no b">callback_data</code>ï¼Œè¯¥å¸¸æ•°å€¼å°†ç”¨äºå†³å®šè¦åšä»€ä¹ˆã€‚ä¸æŒ‰é’®ä¸Šçš„<code class="fe oe of og no b">text</code>ä¸åŒï¼Œè¯¥å€¼ä¸åº”æ”¹å˜ï¼Œå› ä¸ºå®ƒå¯¹ç”¨æˆ·ä¸å¯è§ã€‚</p><pre class="lu lv lw lx gt nn no np nq aw nr bi"><span id="bff5" class="ns mr it no b gy nt nu l nv nw">choice = update.callback_query.data</span><span id="41e7" class="ns mr it no b gy nx nu l nv nw"><strong class="no iu">if </strong>choice == <strong class="no iu">'1'</strong>:<br/>  # Choice 1: Text<br/>  update.callback_query.message.edit_text('You have chosen Text')</span></pre><h1 id="d3b5" class="mq mr it bd ms mt nz mv mw mx oa mz na jz ob ka nc kc oc kd ne kf od kg ng nh bi translated">æ˜¾ç¤ºâ€œæ­£åœ¨é”®å…¥â€¦â€</h1><p id="2772" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">æ˜¾ç¤ºè¾“å…¥æŒ‡ç¤ºå™¨æ˜¯èŠå¤©æœºå™¨äººçš„ä¸€ä¸ªå¸¸è§åŠŸèƒ½:ç”¨æˆ·è¢«å‘ŠçŸ¥æ¶ˆæ¯å³å°†åˆ°è¾¾ï¼Œå³ä½¿æœ‰ä¸€ç‚¹å»¶è¿Ÿã€‚</p><pre class="lu lv lw lx gt nn no np nq aw nr bi"><span id="605b" class="ns mr it no b gy nt nu l nv nw">context.bot.send_chat_action(chat_id=get_chat_id(update, context), action=telegram.ChatAction.TYPING, timeout=1)<br/>time.sleep(1)</span></pre><p id="ad02" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">æ³¨</strong>:åœ¨æ˜¾ç¤ºæ‰“å­—æŒ‡ç¤ºå™¨æ—¶ï¼Œæˆ‘é€šå¸¸ä¼šå¼•å…¥ä¸€ä¸ªçŸ­æš‚çš„å»¶è¿Ÿï¼Œä»¥è¥é€ ä¸€ç§çœŸå®å¯¹è¯çš„æ„Ÿè§‰ã€‚</p><h1 id="36b5" class="mq mr it bd ms mt nz mv mw mx oa mz na jz ob ka nc kc oc kd ne kf od kg ng nh bi translated">å¸¦æœ‰é™„åŠ å‚æ•°çš„æ·±åº¦é“¾æ¥</h1><p id="36b9" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">æ·±åº¦é“¾æ¥æ˜¯ä¸€ç§å…è®¸æ‰“å¼€ä¸ç»™å®šæœºå™¨äººå¯¹è¯çš„æœºåˆ¶ã€‚è¿™æœ‰åŠ©äºåœ¨ç½‘ç«™ã€ç”µå­é‚®ä»¶æˆ–ç¤¾äº¤åª’ä½“ä¸Šåˆ†äº«æœºå™¨äººçš„é“¾æ¥ã€‚</p><p id="7d45" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">å®šä¹‰æ·±å±‚é“¾æ¥æ—¶ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªé™„åŠ å‚æ•°:</p><pre class="lu lv lw lx gt nn no np nq aw nr bi"><span id="4597" class="ns mr it no b gy nt nu l nv nw"><a class="ae le" href="https://t.me/username_bot?start=signup" rel="noopener ugc nofollow" target="_blank">https://t.me/username_bot?start=signup</a></span></pre><p id="a47d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">è¯¥é“¾æ¥æ‰“å¼€ç”µæŠ¥åº”ç”¨ç¨‹åºï¼Œæç¤ºä¸æœºå™¨äººè¿›è¡Œå¯¹è¯ã€‚é™„åŠ å‚æ•°è¢«ä¼ é€’ç»™å¤„ç†<code class="fe oe of og no b">/start</code>å‘½ä»¤çš„<code class="fe oe of og no b">CommandHandler</code>ã€‚</p><pre class="lu lv lw lx gt nn no np nq aw nr bi"><span id="9dcb" class="ns mr it no b gy nt nu l nv nw"><strong class="no iu">def </strong>start_command_handler(update, context):<br/>    param_value = context.args[0]<br/>    update.message.reply_text(<strong class="no iu">'</strong>Value is ' + param_value)</span></pre><h1 id="abca" class="mq mr it bd ms mt nz mv mw mx oa mz na jz ob ka nc kc oc kd ne kf od kg ng nh bi translated">å‘é€æ–‡ä»¶</h1><p id="ae36" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">èŠå¤©æœºå™¨äººå¯ä»¥é€šè¿‡ä¸åŒçš„æ–¹å¼å‘é€æ–‡ä»¶(å¦‚pdfã€Office)ã€‚</p><p id="1995" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ä½¿ç”¨<code class="fe oe of og no b">send_document</code>å’Œæ–‡ä»¶çš„å®Œæ•´URL:</p><pre class="lu lv lw lx gt nn no np nq aw nr bi"><span id="d3d4" class="ns mr it no b gy nt nu l nv nw">url='https://github.com/gc/TelegramBotDemo/raw/main/test.pdf'<br/>context.bot.send_document(chat_id=get_chat_id(update, context), document=url)</span></pre><p id="b2b3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">æ³¨æ„</strong>:è¿™ç§æ–¹æ³•éœ€è¦ä¸€ä¸ªç›´æ¥æŒ‡å‘æ–‡ä»¶çš„URLã€‚</p><p id="6a75" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">å¦ä¸€ç§æ–¹æ³•æ˜¯é¦–å…ˆåœ¨æœ¬åœ°ä¸‹è½½æ–‡ä»¶ï¼Œç„¶åç”¨åŒæ ·çš„æ–¹æ³•å‘é€å®ƒ<code class="fe oe of og no b">send_document</code>ã€‚</p><pre class="lu lv lw lx gt nn no np nq aw nr bi"><span id="a14a" class="ns mr it no b gy nt nu l nv nw"># fetch from Google Drive<br/>url = 'https://drive.google.com/file/d/0BZ3dWQ2ZXVOdE1V/view'<br/>r = requests.get(url, allow_redirects=True)<br/># save local copy<br/>open(<strong class="no iu">'file.ppt', 'wb'</strong>).write(r.content)</span><span id="eecd" class="ns mr it no b gy nx nu l nv nw"># send file to user<br/>context.bot.send_document(chat_id=get_chat_id(update, context), document=open(<strong class="no iu">'file.ppt'</strong>, <strong class="no iu">'rb'</strong>), filename="Presentation.pptx")</span></pre><p id="5572" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">æ³¨æ„</strong>:å½“URLä¸ç›´æ¥æŒ‡å‘ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œè¿™ç§æ–¹æ³•é€šå¸¸æ˜¯å¿…è¦çš„ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªæŒ‰éœ€è¾“å‡ºå†…å®¹çš„ç«¯ç‚¹ã€‚</p><h1 id="9a25" class="mq mr it bd ms mt nz mv mw mx oa mz na jz ob ka nc kc oc kd ne kf od kg ng nh bi translated">åˆ›å»ºåª’ä½“é›†</h1><p id="490d" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">ä¸€ä¸ªå¾ˆé…·çš„åŠŸèƒ½æ˜¯å‘é€ä¸€ç»„åª’ä½“ï¼Œå¦‚ç…§ç‰‡ï¼Œè§†é¢‘å’ŒéŸ³é¢‘ã€‚</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi oh"><img src="../Images/a5e51a6aee935326f94bfc17db735316.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pPN6nAwstDCOctYVwrbNrg.png"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">ä½œè€…å›¾ç‰‡</p></figure><pre class="lu lv lw lx gt nn no np nq aw nr bi"><span id="3d8c" class="ns mr it no b gy nt nu l nv nw">list = []</span><span id="3191" class="ns mr it no b gy nx nu l nv nw"># define list of files<br/>list.append(InputMediaPhoto(media='https://../mintie.jpg', caption='Mint'))<br/>list.append(InputMediaPhoto(media='https://../pinkie.png', caption='Pink'))<br/>list.append(InputMediaPhoto(media='https://../orangie.png', caption='Orange'))<br/><br/>context.bot.send_media_group(chat_id=get_chat_id(update, context), media=list)</span></pre><p id="7ac3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">æ³¨æ„</strong>:æœºå™¨äººæœ€å¤šå¯ä»¥åŒæ—¶å‘é€10ä¸ªåª’ä½“æ–‡ä»¶ã€‚</p><p id="d288" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">æ³¨2 </strong>:æ¯æ¡æ¶ˆæ¯åœ¨ç”µæŠ¥é€Ÿç‡é™åˆ¶å†…è®¡æ•°(æ¯ç§’30æ¡æ¶ˆæ¯)ï¼Œå› æ­¤æ‚¨æœ€å¤šå¯ä»¥å‘é€3æ¡æ¶ˆæ¯ï¼Œæ¯æ¡æ¶ˆæ¯åŒ…å«10ä¸ªåª’ä½“(æ€»å…±30ä¸ª)ï¼Œä½†åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨ä¸èƒ½åœ¨åŒä¸€äº‹åŠ¡ä¸­æ·»åŠ ä»»ä½•å…¶ä»–å†…å®¹(ç”šè‡³ä¸èƒ½æ˜¯ä¸€æ¡ç®€å•çš„æ–‡æœ¬æ¶ˆæ¯)ã€‚</p><h1 id="5e1c" class="mq mr it bd ms mt nz mv mw mx oa mz na jz ob ka nc kc oc kd ne kf od kg ng nh bi translated">ç»“è®º</h1><p id="25d7" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« æœ‰åŠ©äºç†è§£ä¸€äº›æ›´é«˜çº§çš„åœºæ™¯ï¼Œå¹¶å‘ç°å¯ä»¥è®©æ‚¨çš„TelegramèŠå¤©æœºå™¨äººå˜å¾—æ›´ç‰¹åˆ«çš„åŠŸèƒ½ã€‚æˆ‘çš„å»ºè®®æ˜¯æ€»æ˜¯é¦–å…ˆè€ƒè™‘ç”¨æˆ·åœ¨å¯»æ‰¾ä»€ä¹ˆ(ä»–ä»¬ä¸ºä»€ä¹ˆè¦èŠå¤©ï¼Ÿ)ç„¶åä»¥ä¸€ç§è®©ä»–ä»¬çš„è°ˆè¯æ²¡æœ‰æ‘©æ“¦ã€æ„‰å¿«çš„æ–¹å¼æ¥è®¾è®¡:å–å¾—è‰¯å¥½çš„å¹³è¡¡å†³å®šäº†ä½ çš„èŠå¤©æœºå™¨äººçš„æˆåŠŸã€‚</p><p id="346f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æŸ¥çœ‹ä¸€ä¸‹Github repo ,åœ¨é‚£é‡Œä½ å¯ä»¥è·å¾—ä¸Šé¢æ˜¾ç¤ºçš„ä»£ç ç‰‡æ®µã€‚</p><p id="592f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">å¦‚æœ‰é—®é¢˜å’Œå»ºè®®ï¼Œè¯·åœ¨Twitter<a class="ae le" href="https://twitter.com/beppecatanese" rel="noopener ugc nofollow" target="_blank">ä¸Šæ‰¾åˆ°æˆ‘ã€‚</a></p><p id="f1a4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">èŠå¤©æ„‰å¿«ï¼</p></div></div>    
</body>
</html>