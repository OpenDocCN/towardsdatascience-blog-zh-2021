<html>
<head>
<title>Feature engineering A-Z</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">特征工程A-Z</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/feature-engineering-a-z-aa8ce9639632?source=collection_archive---------25-----------------------#2021-08-31">https://towardsdatascience.com/feature-engineering-a-z-aa8ce9639632?source=collection_archive---------25-----------------------#2021-08-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/c102968ff31852b7ed5b0be084c661c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FC-jCfHV7_rP1aOI"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae jg" href="https://unsplash.com/@grimstad?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">hkon grim stad</a>拍摄的照片</p></figure><div class=""/><div class=""><h2 id="53d7" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">转换特征以提高模型性能的清单</h2></div></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><p id="357e" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">特征工程是转换数据以提取有价值信息的过程。事实上，如果适当转换，特征工程甚至可以在模型性能中发挥比超参数调整更大的作用。</p><p id="c900" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">尽管功能工程有着巨大的作用，但初学者和有经验的数据科学家通常不太理解，有时甚至会误解。最近我问了几个人，他们所说的特征工程是什么意思。有趣的是，他们无法超越缺失值、特征缩放或对数变换。但是当然，这是一个包括各种工具、技术和应用的主题。</p><p id="04f9" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">在这篇文章中，我把通过特征转换和工程来提高模型性能的许多不同方法放在一起并加以综合。</p></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><p id="edd3" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">在进入特征工程之前，我们先来区分一下数据清理。重命名列、更改数据类型(例如，从“对象”更改为“类别”)、将数据分成训练集和测试集—这些都是数据科学项目的重要组成部分，但它们不是功能工程。你可以称之为数据清理。</p><p id="d513" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">那特征工程到底是什么？</p><p id="1b6b" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">我将特征工程分为6大类:</p><ul class=""><li id="b26f" class="mb mc jj lh b li lj ll lm lo md ls me lw mf ma mg mh mi mj bi translated">特征抽出</li><li id="0a2f" class="mb mc jj lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">特征合成</li><li id="f5d7" class="mb mc jj lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">特征转换</li><li id="661b" class="mb mc jj lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">异常值处理</li><li id="b5cc" class="mb mc jj lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">缺失值处理</li><li id="91ba" class="mb mc jj lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">其他(例如多项式变换)</li></ul><p id="1bba" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">让我们一个一个地了解一下。</p></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h2 id="08bb" class="mp mq jj bd mr ms mt dn mu mv mw dp mx lo my mz na ls nb nc nd lw ne nf ng nh bi translated">特征抽出</h2><p id="c5e4" class="pw-post-body-paragraph lf lg jj lh b li ni kk lk ll nj kn ln lo nk lq lr ls nl lu lv lw nm ly lz ma im bi translated">假设我们有某种关于<a class="ae jg" href="https://raw.githubusercontent.com/jenfly/opsd/master/opsd_germany_daily.csv" rel="noopener ugc nofollow" target="_blank">消费统计</a>的数据，上面有一个时间戳:</p><figure class="no np nq nr gt iv gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/5dec6d6cc632b64bde6e443bff56a4fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*mzobEK4F_eo7eSy1t1jQ5w.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">带有时间戳的数据</p></figure><p id="6ecd" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">在本例中,“日期”列可以轻松地用于提取附加特征并生成强大的洞察力，例如工作日、周末或一年中特定时间的消费变化(参见下面的黄色突出显示)。</p><figure class="no np nq nr gt iv gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/a36b1d6c1c507d239b5db9e97c23a1e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*__kv_-y0QN5b07cfIniabA.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">数据与特征工程</p></figure><h2 id="d878" class="mp mq jj bd mr ms mt dn mu mv mw dp mx lo my mz na ls nb nc nd lw ne nf ng nh bi translated">特征合成</h2><p id="da96" class="pw-post-body-paragraph lf lg jj lh b li ni kk lk ll nj kn ln lo nk lq lr ls nl lu lv lw nm ly lz ma im bi translated">特征合成与特征提取相反。在这种情况下，将一个或多个要素组合起来创建新要素，这些新要素比单独创建的要素信息量更大。</p><p id="b67c" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">比方说，在一个房价数据集中，你有两列:<em class="nt">楼层空间</em>(平方英尺)和<em class="nt">总房价</em>(美元)。您可以在分析中单独使用它们，但也可以创建一个名为<em class="nt">price _ per _ sqft</em>(US $/sqft)的新计算要素。</p><h2 id="0ffe" class="mp mq jj bd mr ms mt dn mu mv mw dp mx lo my mz na ls nb nc nd lw ne nf ng nh bi translated">特征缩放</h2><p id="685c" class="pw-post-body-paragraph lf lg jj lh b li ni kk lk ll nj kn ln lo nk lq lr ls nl lu lv lw nm ly lz ma im bi translated">特征缩放/变换是指在数据预处理中应用的各种方法，用于将数据重新缩放或归一化到不同的范围。缩放的目的是以这样一种方式转换数据，即<a class="ae jg" rel="noopener" target="_blank" href="/data-normalization-in-machine-learning-395fdec69d02">它们或者是无量纲的和/或具有相似的分布</a>。三种流行的缩放方法是:</p><p id="a1f1" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated"><strong class="lh jk"> a)重新调整:</strong>也称为“最小-最大归一化”，这是所有方法中最简单的方法，计算如下:</p><figure class="no np nq nr gt iv gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/3e594d1e2c0d3f8c343637ba522c80b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:546/format:webp/0*l2FCi2DxkbAW6N2M.png"/></div></figure><p id="63e0" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated"><strong class="lh jk"> b)均值归一化:</strong>该方法在转换过程中使用观察值的均值:</p><figure class="no np nq nr gt iv gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/1fe653f16051279822f50c123b75f397.png" data-original-src="https://miro.medium.com/v2/resize:fit:590/format:webp/0*XkA_Nbjr1I6C-BAD.png"/></div></figure><p id="6467" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated"><strong class="lh jk"> c)标准化:</strong>也称为Z分数标准化，这种技术使用Z分数或“标准分数”进行特征缩放。它广泛用于机器学习算法，如SVM和逻辑回归:</p><figure class="no np nq nr gt iv gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/4ed71e8d90a6fdddcc39a6500143fbe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:272/format:webp/0*f1d-sKilC6ME_QYA.png"/></div></figure><p id="6866" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated"><strong class="lh jk"> d) Log变换:</strong>在对数变换中，一个特征的每个值都是从<em class="nt"> x </em>变换到<em class="nt"> log(x)的。</em>对数变换的一个常见应用是构建线性回归模型，其中连续变量的分布被更改为高斯形式，以满足建模假设。</p><p id="baa1" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">对数转换受欢迎的另一个原因是因为增加了视觉可解释性和外观，尤其是高方差数据(见下图)。</p><figure class="no np nq nr gt iv gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/3b190af7bf97c02a70cd35eb797967c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/0*uJyvPg3VMayq-dAL.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">显示使用和不使用对数变换时面积和人口之间关系的散点图。<a class="ae jg" href="https://en.wikipedia.org/wiki/Data_transformation_(statistics)" rel="noopener ugc nofollow" target="_blank">来源:维基百科</a>。</p></figure><h2 id="9aee" class="mp mq jj bd mr ms mt dn mu mv mw dp mx lo my mz na ls nb nc nd lw ne nf ng nh bi translated">特征编码</h2><p id="afb8" class="pw-post-body-paragraph lf lg jj lh b li ni kk lk ll nj kn ln lo nk lq lr ls nl lu lv lw nm ly lz ma im bi translated">特征编码是指将特征的分类字符串值转换为数字值。</p><p id="f984" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">例如，如果您的数据集中有一个“性别”列，并且值表示为<em class="nt">女性</em>和<em class="nt">男性</em>，您可以将这些字符串转换为数字表示，例如男性= 1，女性= 2。这种编码特征的方式被称为<strong class="lh jk">标签编码</strong>。</p><p id="95b8" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">当然，进行标签编码意味着算法可能会对女性(= 2)值赋予比男性(= 1)值更高的权重。为了克服这种情况，人们转而使用<strong class="lh jk"> One Hot Encoding </strong>来创建<strong class="lh jk">虚拟变量，其中</strong>每个类别变成一个虚拟列，值变成1或0。</p><p id="8d1f" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">下面是一个示例，其中一键编码应用于具有分类要素的数据集:</p><pre class="no np nq nr gt ny nz oa ob aw oc bi"><span id="a03e" class="mp mq jj nz b gy od oe l of og">import seaborn as sns<br/>df = sns.load_dataset('tips')<br/>df.head()</span></pre><figure class="no np nq nr gt iv gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/c3f263a7661148320f1c1d56a0961dfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*HCXUvdTC3KMV7FXh35CZ4w.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">没有假人的分类特征</p></figure><p id="2e6a" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">现在在<code class="fe oi oj ok nz b">pandas</code>中创建假人:</p><pre class="no np nq nr gt ny nz oa ob aw oc bi"><span id="f48d" class="mp mq jj nz b gy od oe l of og">import pandas<br/>pd.get_dummies(df)</span></pre><figure class="no np nq nr gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ol"><img src="../Images/83d228bc15b3eb93270212777225c4ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HOaet9aontzZnSz_YXNC0Q.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">转换成虚拟变量的分类特征</p></figure><h2 id="94b2" class="mp mq jj bd mr ms mt dn mu mv mw dp mx lo my mz na ls nb nc nd lw ne nf ng nh bi translated">异常值处理</h2><p id="fb85" class="pw-post-body-paragraph lf lg jj lh b li ni kk lk ll nj kn ln lo nk lq lr ls nl lu lv lw nm ly lz ma im bi translated">每个数据科学家都不得不面对他们项目中的异常问题，没有多少例外。离群值是特定于领域和上下文的。如果您正在构建一个模型来预测一个平均价格为30万美元的社区的房价，而您的数据集却有一所售价为1000万美元的房子，那么这一定是一个异常值。同样，如果一栋房子卖了3万美元，你也不希望它出现在模型中。</p><p id="05e1" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">那么你有什么选择来改变这些离群值呢？以下是您的选择:</p><ul class=""><li id="f490" class="mb mc jj lh b li lj ll lm lo md ls me lw mf ma mg mh mi mj bi translated">如果它们仅仅在可接受的范围之外，您可以将它们留在数据集中</li><li id="79c0" class="mb mc jj lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">如果负担得起，您可以删除观察值(例如，您的数据集相当大)</li><li id="75e4" class="mb mc jj lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated">封顶/剪裁异常值，将异常值剪裁到某个范围(例如，四分位间距、IQR)。</li></ul><h2 id="aafe" class="mp mq jj bd mr ms mt dn mu mv mw dp mx lo my mz na ls nb nc nd lw ne nf ng nh bi translated">缺失值处理</h2><p id="8898" class="pw-post-body-paragraph lf lg jj lh b li ni kk lk ll nj kn ln lo nk lq lr ls nl lu lv lw nm ly lz ma im bi translated">缺失值在大多数数据集中很常见，它们被记录为<code class="fe oi oj ok nz b">NA</code>或<code class="fe oi oj ok nz b">NaN</code>。处理缺失数据没有单一的标准方法，人们根据数据集采取不同的方法。这里有3种最受欢迎的方法:</p><ul class=""><li id="0b9f" class="mb mc jj lh b li lj ll lm lo md ls me lw mf ma mg mh mi mj bi translated"><strong class="lh jk">删除:</strong>如果数据集很大，并且缺失发生的次数相对较少，则删除带有缺失值的完整记录。</li><li id="9e23" class="mb mc jj lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated"><strong class="lh jk">替代/插补:</strong>缺失值通常由适当的替代值替代，如列平均值、中位数、最近邻平均值、移动平均值等。</li><li id="7077" class="mb mc jj lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated"><strong class="lh jk">统计插补:</strong>这是一种复杂的插补方法，使用线性回归作为数据集中其他列的函数来预测缺失值。</li></ul><h2 id="e5df" class="mp mq jj bd mr ms mt dn mu mv mw dp mx lo my mz na ls nb nc nd lw ne nf ng nh bi translated">其他类型的特征工程</h2><p id="8aa5" class="pw-post-body-paragraph lf lg jj lh b li ni kk lk ll nj kn ln lo nk lq lr ls nl lu lv lw nm ly lz ma im bi translated">除了我刚刚描述的，在特征工程领域还有一些其他的工作，包括:</p><ul class=""><li id="78a0" class="mb mc jj lh b li lj ll lm lo md ls me lw mf ma mg mh mi mj bi translated"><strong class="lh jk">减少类别数量</strong>:对类别特征进行重新分类，即减少类别数量。例如，如果一列中有6个教育水平类别，您可能希望将它们分成3个类别。</li><li id="7b1c" class="mb mc jj lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated"><strong class="lh jk">宁滨</strong>:为数字变量创建区间，例如，“年龄”可以分为&lt; 20、20–30、30–40等。而不是让它们变成1，2，3，4 ……40等。</li><li id="548d" class="mb mc jj lh b li mk ll ml lo mm ls mn lw mo ma mg mh mi mj bi translated"><strong class="lh jk">多项式拟合</strong>:在回归分析中，除了采用<code class="fe oi oj ok nz b"><em class="nt">y = b0+ b1x</em></code>形式的线性模型，还可以采用<code class="fe oi oj ok nz b"><em class="nt">y = b0 + b1x + b2x²</em></code> <em class="nt">形式的多项式函数进行拟合，以找到更好的拟合。</em></li></ul></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h2 id="c284" class="mp mq jj bd mr ms mt dn mu mv mw dp mx lo my mz na ls nb nc nd lw ne nf ng nh bi translated">摘要</h2><p id="9a7f" class="pw-post-body-paragraph lf lg jj lh b li ni kk lk ll nj kn ln lo nk lq lr ls nl lu lv lw nm ly lz ma im bi translated">总之，特征工程的主要目的是提取额外的数据/信息以获得更好的模型性能。进行特征工程有许多不同的方法，但最常用的方法是特征提取、特征合成、缩放、异常值处理、缺失值处理、宁滨、多项式变换等。</p><p id="8a94" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">在这篇文章中，我总结了它们，但是当然，每一个都有很多深入的内容。但是希望我在这里描述的内容可以作为一个有用的参考。如果我错过了什么，你觉得其他的也应该包括进来，请在评论区写下来。</p><p id="0004" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">感谢阅读。请随意<a class="ae jg" href="https://mab-datasc.medium.com/subscribe" rel="noopener">订阅</a>以获得我即将发布的文章的通知，或者通过<a class="ae jg" href="https://twitter.com/DataEnthus" rel="noopener ugc nofollow" target="_blank"> Twitter </a>或<a class="ae jg" href="https://www.linkedin.com/in/mab-alam/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>与我联系。</p></div></div>    
</body>
</html>