<html>
<head>
<title>The Battle of Interactive Geographic Visualization Part 2- Interactive Geoplot Using One Line of Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">交互式地理可视化之战第2部分——使用一行代码的交互式Geoplot</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-battle-of-interactive-geographic-visualization-part-2-interactive-geoplot-using-one-line-of-2118af59a77c?source=collection_archive---------25-----------------------#2021-11-25">https://towardsdatascience.com/the-battle-of-interactive-geographic-visualization-part-2-interactive-geoplot-using-one-line-of-2118af59a77c?source=collection_archive---------25-----------------------#2021-11-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="60c1" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">PYTHON。数据科学。地理可视化</h2><div class=""/><div class=""><h2 id="589e" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用Plotly Express和Python进行地理可视化，并提供地理编码方面的额外提示</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/7492f24e194df2b6e048467f2e1838b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pPi7OkO6FzYoxKe_"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">蒂莫·维林克在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="6c1f" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">我们离开的地方</h1><p id="8f12" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">在上一篇文章中:<a class="ae lh" rel="noopener" target="_blank" href="/the-battle-of-interactive-geographic-visualization-part-1-interactive-geoplot-using-one-line-of-8214e9ed1bb4">交互式地理可视化之战第1部分—使用一行代码的交互式geo plot</a>，我们讨论了为数据探索制作geo plot/geo Visualization的重要性，因为它可能揭示数据的有趣见解和模式，从而将您的数据科学项目提升到一个全新的水平。</p><p id="3184" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">此外，我们使用交互式Python包Holoviews生成了数据集的地理散点图，作为奖励，我们将它部署为用于演示目的的网页。</p><p id="3bfa" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">在本文中，我们将使用相同的数据集来生成类似的交互式地理图，但使用的是Plotly Express包。</p><h1 id="1ff8" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">PLOTLY EXPRESS</h1><p id="7469" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">在我们开始学习Plotly express之前，有必要讨论一下Plotly是如何成为Python、R和其他编程语言的领先且最受欢迎的交互式绘图库之一的。</p><p id="d2d5" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">Plotly Express是Plotly库的高级包装器，这意味着它调用Plotly库的功能，但语法更简单。</p><p id="f41e" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">有了这样的介绍，让我们只用一行代码就能画出我们的图。</p><h1 id="4251" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">编码</h1><h2 id="346a" class="nb lj it bd lk nc nd dn lo ne nf dp ls mj ng nh lu mn ni nj lw mr nk nl ly iz bi translated">预赛</h2><pre class="ks kt ku kv gt nm nn no np aw nq bi"><span id="e170" class="nb lj it nn b gy nr ns l nt nu">import pandas as pd<br/># For Geovisualization<br/>import plotly.express as px</span></pre><h2 id="38cd" class="nb lj it bd lk nc nd dn lo ne nf dp ls mj ng nh lu mn ni nj lw mr nk nl ly iz bi translated">加载数据集</h2><pre class="ks kt ku kv gt nm nn no np aw nq bi"><span id="9c45" class="nb lj it nn b gy nr ns l nt nu">df = pd.read_csv('data/Coffee Brands Footprint.csv',<br/>                index_col=0)<br/>df.head()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nv"><img src="../Images/69a6fb0de39a90e24814b2bb5925b5d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5RZww7IDw3LnGnGV_kiKug.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片:我们数据集的前五次观察。</p></figure><h2 id="8ade" class="nb lj it bd lk nc nd dn lo ne nf dp ls mj ng nh lu mn ni nj lw mr nk nl ly iz bi translated">PLOTLY EXPRESS的一行代码</h2><pre class="ks kt ku kv gt nm nn no np aw nq bi"><span id="8a2c" class="nb lj it nn b gy nr ns l nt nu">px.scatter_geo(df,<br/>               lat = df['lat'],<br/>               lon = df['lng'],<br/>               color = df['brand'],<br/>               hover_name = df["name"],<br/>                     width=1600,<br/>                    height=800,<br/>                    )</span></pre><p id="3476" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我们有我们的输出:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nw"><img src="../Images/e599c476555fb8288f0bca7ad9e82015.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*yLUXUpKk5CxDtGKEqnZgtg.gif"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="5e76" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">正如我们所看到的，我们已经制作了一个交互式geoplot，但我们可以对其进行定制和进一步改进。</p><p id="23ba" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我们将进行以下改进:</p><ol class=""><li id="0138" class="nx ny it mc b md mw mg mx mj nz mn oa mr ob mv oc od oe of bi translated">剧情以菲律宾为中心。</li><li id="4094" class="nx ny it mc b md og mg oh mj oi mn oj mr ok mv oc od oe of bi translated">让画面的焦点只在亚洲。</li><li id="256d" class="nx ny it mc b md og mg oh mj oi mn oj mr ok mv oc od oe of bi translated">更改了分散点的不透明度或透明度。</li></ol><p id="18f8" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">要完成这三(3)件事很简单:我们只需提供与这些所需更改相对应的参数，但首先，这是一个非常有用的提示:</p><h2 id="8861" class="nb lj it bd lk nc nd dn lo ne nf dp ls mj ng nh lu mn ni nj lw mr nk nl ly iz bi translated">提示:自动对一个国家进行地理编码</h2><p id="37e5" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">要自动提取国家/地区的地理编码，请导入姓名，然后继续执行以下操作:</p><pre class="ks kt ku kv gt nm nn no np aw nq bi"><span id="4354" class="nb lj it nn b gy nr ns l nt nu">from geopy.geocoders import Nominatim<br/>geolocator = Nominatim(user_agent="geocoder") #Do not forget to put in the user_agent argument (and should be a customized one)<br/>location = geolocator.geocode("Philippines")<br/>print((location.latitude, location.longitude))</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/eddeba3c43bcd5459104701860f846a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*G9vuUolw7ecab5zdAqTK_Q.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供:Nominatim自动生成PH的地理编码</p></figure><p id="233f" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">现在，我们可以使用这些坐标来填充需要字典输入的<code class="fe om on oo nn b">center</code>。<code class="fe om on oo nn b">scope</code>参数可用于改变任何大陆上的帧焦点。探索<code class="fe om on oo nn b">projection</code>参数，看看你的情节如何随着每一个选择而变化。</p><p id="47bc" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">最后，我们可以使用<code class="fe om on oo nn b">opacity</code>参数改变点的透明度:</p><pre class="ks kt ku kv gt nm nn no np aw nq bi"><span id="3e26" class="nb lj it nn b gy nr ns l nt nu">px.scatter_geo(df,<br/>               lat = df['lat'],<br/>               lon = df['lng'],<br/>               color = df['brand'],<br/>               hover_name = df["name"],<br/>               scope='asia',<br/>               projection='natural earth',<br/>               width=1600,<br/>               height=800,<br/>               center={<br/>                    'lat': location.latitude,<br/>                    'lon': location.longitude<br/>                },<br/>                opacity=0.5<br/>                    )</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi op"><img src="../Images/a9e5872ce310eb0449d3183cc6bfb7a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_Qa-VB4aLz5LgzxLD6GTIQ.gif"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供；定制后的Plotly Express Geoplot</p></figure><h1 id="511e" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">优点和缺点</h1><p id="c712" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">与其他库相比，易于使用本身是一个很大的优点，但也有缺点。</p><p id="fea2" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">与其他库相比，plotly express的另一个优势是它可以支持动画(<em class="oq">这是另一篇文章</em>)，并且将是我们已经令人印象深刻的可视化的一个愉快的补充。</p><p id="48bd" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">然而，缺点是，与其他库(如更容易部署的follow甚至Holoviews)相比，定制是有限的。</p><h1 id="ddb9" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">结束语</h1><p id="4325" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">对于希望了解什么是以及如何进行交互式地理可视化的初学者，plotly express提供了完美的培训场所和学习库。</p><p id="eb78" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">然而，随着我们的需求变得更加复杂，我们可能需要执行更多的计算并使用更多的低级库来完成这些，但是我们将在后续文章中讨论这些。</p><p id="6483" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我的<a class="ae lh" href="https://github.com/francisadrianviernes/GeoVisualization/blob/master/The%20Battle%20of%20Interactive%20Geographic%20Visualization%20Part%202-%E2%80%8AInteractive%20Geoplot%20Using%20One%20Line%20of%C2%A0Code.ipynb" rel="noopener ugc nofollow" target="_blank"> Github </a>页面上的全部代码。</p><p id="9a74" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">查看我的其他文章:</p><p id="7281" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/the-battle-of-interactive-geographic-visualization-part-1-interactive-geoplot-using-one-line-of-8214e9ed1bb4">交互式地理可视化之战第1部分—使用一行代码的交互式地理地图</a></p><p id="4456" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/calculating-the-distance-between-two-locations-using-geocodes-1136d810e517?source=your_stories_page----------------------------------------">使用地理编码计算两个位置之间的距离</a></p><p id="bdf7" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/generating-geocodes-using-google-maps-api-eb56028821a6?source=your_stories_page----------------------------------------">使用谷歌地图API生成地理编码</a></p><p id="f840" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/mapping-your-favorite-coffee-shop-in-the-philippines-using-google-places-api-and-folium-2f9d5ad697bf?source=your_stories_page----------------------------------------">使用Google Places API和leavy绘制您在菲律宾最喜欢的咖啡店地图</a></p></div></div>    
</body>
</html>