<html>
<head>
<title>Feature Store: Data Platform for Machine Learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">特征存储:机器学习的数据平台</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/feature-store-data-platform-for-machine-learning-455122c48229?source=collection_archive---------10-----------------------#2021-03-26">https://towardsdatascience.com/feature-store-data-platform-for-machine-learning-455122c48229?source=collection_archive---------10-----------------------#2021-03-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="09c6" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">最先进的开源和自主开发的功能商店，可大规模生成、管理和提供功能</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2eb3adcddfbf8685a7f64373e24d8622.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I9JhYb4nvzLJPzZHW7OFMA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/photos/2xEQDxB0ss4" rel="noopener ugc nofollow" target="_blank">图片</a>提供:<a class="ae kv" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> unsplash </a>上的<a class="ae kv" href="https://unsplash.com/@dlanor_s" rel="noopener ugc nofollow" target="_blank"> dlanor_s </a></p></figure><p id="f1bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">特征数据</strong>(或简称为<strong class="ky ir">特征</strong>)对于<strong class="ky ir">机器学习</strong> (ML)模型做出的准确预测至关重要。<strong class="ky ir">特征存储</strong>最近<strong class="ky ir"> </strong>成为ML堆栈的重要组成部分，它通常支持以下任务作为ML工作流的一部分:</p><ol class=""><li id="7319" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">自动化特征计算，例如回填、UDF</li><li id="ca9e" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">管理功能元数据，例如沿袭、版本</li><li id="6bb9" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">跨不同团队共享和重用功能</li><li id="5afc" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">离线、实时或按需提供或提取功能</li><li id="0f86" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">监控功能从生成到服务的整个生命周期</li></ol><p id="2731" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于“最先进的”特征商店的调查，<a class="ae kv" href="https://www.featurestore.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"/></a>https://www.featurestore.org/整合并比较了主要的类似“特征商店”的系统。如上所述，许多科技公司由于其独特的数据架构和业务需求，已经在内部建立了自己的功能商店。例如，优步的业务是为用户提供低延迟服务。对于Airbnb来说，个性化推荐是让旅行者在他们的平台上预订住宿的关键。</p><p id="693a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这样的组织中，跨不同业务单位的多个ML数据团队可能独立地操作相同的ML工作流，因此有必要整合工作并提供一个功能存储来标准化和管理功能的整个生命周期并为所有团队服务。</p><p id="0f66" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将上述想法反馈到ML社区，为一般ML用例建立一个标准的、开箱即用的特性库听起来很有希望，可能从小规模的简单用例开始。</p><p id="ee9b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面，我将简要介绍两家科技公司的主要特色商店:<strong class="ky ir">优步和Airbnb </strong>，以及一家开源特色商店:<a class="ae kv" href="https://feast.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">盛宴</strong> </a> <strong class="ky ir">。</strong>最后分享一下我个人对通用ML平台的想法。</p><h2 id="ec75" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">Airbnb: Zipline</h2><p id="45a0" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">Airbnb至少在4年前建立了他们的特色商店，名为Ziplin。最近的一次演讲来自于<a class="ae kv" href="https://www.youtube.com/watch?v=LjcKCm0G_OY" rel="noopener ugc nofollow" target="_blank"> Spark AI 2020 </a>，以下是我的心得:</p><p id="ba09" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(Airbnb的许多功能都是从“滑动窗口”操作中产生的。请参阅以下示例功能(过去30天内对一家餐厅的平均评分)。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="fbc2" class="mg mh iq nf b gy nj nk l nl nm">rating_features = GroupBy(<br/>    sources=EventSource(<br/>        event_stream="restaurant_check_in_stream",<br/>        event_log_table="core_data.restaurant_check_ins",<br/>        query=Query(<br/>            select=Select(<br/>                restaurant="id_restaurant",<br/>                rating="CAST(rating as Double) - 2.5",<br/>            )<br/>        )<br/>    )<br/>    keys=["restaurant"],<br/>    aggregations=Aggregations(<br/>        avg_rating=Aggregation(<br/>            documentation="Avg rating for this restaurant",<br/>            operation=AVG,<br/>            inputColumn="rating",<br/>            <strong class="nf ir">windows=[Window(length=30, timeUnit=TimeUnit.DAYS)]</strong><br/>        )<br/>    )<br/>)</span></pre><p id="07ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(2)为了有效地支持滑动窗口操作，他们提出了一个算子的性质，称为“可逆性”。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="da8e" class="mg mh iq nf b gy nj nk l nl nm">Reversible: (a + b) - a = b</span></pre><p id="026a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有些运算符具有上述性质，例如，<em class="nn">和</em>，<em class="nn">平均</em>，【AVG】，，<em class="nn">计数</em>。当在滑动窗口中计算时，他们不需要为整个窗口进行计算，相反，由于“可逆性”属性，他们只是丢弃窗口之外的内容，并向窗口添加新的内容。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/29838c61c583a83e1614f59a05732b68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*5oog-L6_jn8DLIS3I6HVrw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">滑动窗口示例</p></figure><p id="25f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有些运算符不具有“可逆性”属性，如<em class="nn"> Min </em>，<em class="nn"> Max </em>。当在滑动窗口中计算这种算子时，在滑动窗口内的数据上建立一个二叉树，这样当旧数据滑出和新数据进入时，二叉树被调整，并且它的根总是<em class="nn"> Min </em>、<em class="nn"> Max等的答案。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/e77a79681742f54471bbdcf7c0e9d756.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*095CFqGSPSfu2sRDAT1NyQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来源:https://www.youtube.com/watch?v=LjcKCm0G_OY<a class="ae kv" href="https://www.youtube.com/watch?v=LjcKCm0G_OY" rel="noopener ugc nofollow" target="_blank">的滑索演示</a></p></figure><p id="676f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，4曾经是窗口中的最大值。当4滑出时，将从1中选择根，3，2和3将是新的根。</p><p id="b2f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过利用树结构，时间复杂度从O(N)降低到O(NlogN ),空间复杂度从2N降低到N</p><h2 id="6034" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">优步:米开朗基罗调色板</h2><p id="c41b" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">早期，优步开始建立他们的特色商店，叫做米开朗基罗调色板。最近的演讲是<a class="ae kv" href="https://vimeo.com/477753622" rel="noopener ugc nofollow" target="_blank">在这里</a>，我的收获是:</p><p id="36ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(1) 80%的ML工作负荷是特征工程，例如，发现好的特征、大规模地提供特征、特征对等性(训练/服务偏斜)、实时特征、特征可观察性。</p><p id="c163" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(2)以下抽象使得特征有组织、可重用、高效:</p><ul class=""><li id="f318" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr nq ly lz ma bi translated"><em class="nn">实体</em>:优步的一个业务单位，如顺风车、司机、优步Eats</li><li id="132a" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nq ly lz ma bi translated"><em class="nn">特性组</em>:一组常用的特性</li><li id="daa9" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nq ly lz ma bi translated"><em class="nn">特征</em> : ML就绪数据点</li><li id="13a7" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nq ly lz ma bi translated"><em class="nn">连接键</em>:用于连接用户标识、餐厅标识等功能的键。这允许在现有特征的基础上创建新特征。</li></ul><p id="9e14" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(3)三大类特征</p><ul class=""><li id="b6a7" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr nq ly lz ma bi translated">批量特征(通过<a class="ae kv" href="https://spark.apache.org/" rel="noopener ugc nofollow" target="_blank">火花</a>):例如<em class="nn"> sum_orders_1week，avg_order_size_30day </em></li><li id="6b3e" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nq ly lz ma bi translated">近实时特征(通过<a class="ae kv" href="https://kafka.apache.org/" rel="noopener ugc nofollow" target="_blank">卡夫卡</a>、<a class="ae kv" href="https://flink.apache.org/" rel="noopener ugc nofollow" target="_blank">弗林克</a>):例如<em class="nn">眼球_印象_ 5 _分钟</em></li><li id="9de2" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nq ly lz ma bi translated">RPC特征(来自外部API、第三方的信号):例如<em class="nn"> geohash </em></li></ul><p id="8865" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(4)特征质量监控:特征管道断裂、特征数据缺失、漂移和不一致是常见的。已经实施了以下方法来解决这些问题:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/efc325a57794241d1b0daa3265545d97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6DprviiV7B2x5s6pxgKxVw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来源:https://vimeo.com/477753622<a class="ae kv" href="https://vimeo.com/477753622" rel="noopener ugc nofollow" target="_blank">的优步特色工程展示</a></p></figure><h2 id="c583" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">盛宴:开源特性商店</h2><p id="cd23" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">GoJek/Google在2019年初发布了<a class="ae kv" href="https://feast.dev/" rel="noopener ugc nofollow" target="_blank">盛宴</a>，它是围绕Google云服务而构建的:<a class="ae kv" href="https://cloud.google.com/bigquery" rel="noopener ugc nofollow" target="_blank">大查询</a>(离线)和<a class="ae kv" href="https://cloud.google.com/bigtable" rel="noopener ugc nofollow" target="_blank">大表</a>(在线)和<a class="ae kv" href="https://redis.io/" rel="noopener ugc nofollow" target="_blank"> Redis </a>(低延迟)，使用<a class="ae kv" href="https://beam.apache.org/" rel="noopener ugc nofollow" target="_blank"> Beam </a>进行特征工程。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/a89a628fbff24c3e63b9e7ace8e4fe92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9PrOtT-a-a6ctPmwHqCwag.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来源:盛宴建筑<a class="ae kv" href="https://feast.dev/post/a-state-of-feast/" rel="noopener ugc nofollow" target="_blank">https://feast.dev/post/a-state-of-feast/</a></p></figure><p id="b88d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从目前的Feast架构来看，它的重点是特性存储、服务和注册。<a class="ae kv" href="https://feast.dev/post/a-state-of-feast/" rel="noopener ugc nofollow" target="_blank">这里</a>是一篇很棒的文章，介绍什么是盛宴，当前的挑战是什么，下一个是什么。</p><h2 id="258a" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">我的想法</h2><p id="6d2a" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">对于通用ML数据平台，以下是我的3点个人想法:</p><p id="4037" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(1)最有价值和最具挑战性的问题之一是从原始数据到高质量、ML友好特性的数据转换。解决这个问题高度依赖于ML工程师的领域知识，并由业务用例驱动。换句话说，一个独立的ML数据平台如果不服务于特定的业务场景、用例，不与优秀的ML工程师团队无缝协作，那么它就是无效的。</p><p id="ff7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(2)在<strong class="ky ir">技术</strong>方面，ML数据平台需要支持下面的各种主流基础设施，无论它们是开源的还是商业的，是在内部运行还是在云上运行。关于平台API，它必须支持流行的编程语言，比如Python。出于安全考虑，it必须提供企业级授权和身份认证，以便为北美和欧洲等监管严格的地区的客户提供服务。对于数据隐私，it部门必须完全遵守当地政策，绝不妥协。</p><p id="6db8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(3)在<strong class="ky ir">规模</strong>方面，随着ML数据平台外部产品用户和内部用户的快速增长，在业务用例和技术栈上应该高度规模化。仅举几个例子，</p><ul class=""><li id="db1b" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr nq ly lz ma bi translated">提供一个通用和灵活的接口，让ML工程师能够容易和准确地描述任何类型的特征</li><li id="c0ca" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nq ly lz ma bi translated">每天优化数千个新功能的上线</li><li id="7523" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nq ly lz ma bi translated">跨不同的领域有效且高效地应用不断变化的隐私策略</li><li id="8709" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nq ly lz ma bi translated">管理异构基础架构，将新出现的基础架构添加到设备群中，并顺利淘汰旧的基础架构。</li></ul></div></div>    
</body>
</html>