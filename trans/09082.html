<html>
<head>
<title>5 Must-Know SQL Functions For Manipulating Dates</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">操纵日期的5个必备SQL函数</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/5-must-know-sql-functions-for-manipulating-dates-e3f46d737b26?source=collection_archive---------12-----------------------#2021-08-22">https://towardsdatascience.com/5-must-know-sql-functions-for-manipulating-dates-e3f46d737b26?source=collection_archive---------12-----------------------#2021-08-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bf23" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">SQL实践教程。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e578d0f7d722f9b665e4366a40e6834b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rproQdENpkYMKGXHDd-GSw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com/s/photos/calendar?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@esteejanssens?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">埃斯特·扬森斯</a>拍摄的照片</p></figure><p id="be6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你在我找到第一份工作之前问我数据科学家最重要的技能是什么，我的答案肯定是Python。毫无疑问！</p><p id="552b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我现在是一名数据科学家，如果你问我同样的问题，我的答案仍然是Python。然而，我有第二个想法。让我三思的是SQL。</p><p id="ff31" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">SQL是数据科学家的必备技能。它主要用于查询关系数据库，但它能够执行更多。SQL配备了如此多的功能，使其成为高效的数据分析和操作工具。</p><p id="9245" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将介绍5个用于操作日期的SQL函数。当处理涉及基于日期或时间的信息的数据时，它们会派上用场。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="22ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意:</strong> SQL被很多关系数据库管理系统使用，比如MySQL、SQL Server、PostgreSQL等等。尽管它们大多采用相同的SQL语法，但可能会有一些细微的差别。在本文中，我们将使用SQL Server。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="65d6" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">1.获取日期</h2><p id="eeb8" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">顾名思义，getdate函数给出今天的日期。我们来做一个例子。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="0f91" class="mc md it nb b gy nf ng l nh ni">DECLARE @mydate Date<br/>SET @mydate = GETDATE()</span><span id="b597" class="mc md it nb b gy nj ng l nh ni">print @mydate<br/>'2021-08-22'</span></pre><p id="1ee0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们创建一个名为“mydate”的变量，并将其值指定为今天的日期。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="49bd" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">2.Dateadd</h2><p id="8deb" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">这个函数的名字甚至比前一个函数更容易理解。dateadd函数用于向日期添加时间或日期间隔。</p><p id="4b36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">和往常一样，语法通过例子更容易理解。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="e3c6" class="mc md it nb b gy nf ng l nh ni">DECLARE @mydate Date<br/>SET @mydate = GETDATE()</span><span id="5b48" class="mc md it nb b gy nj ng l nh ni">SELECT DATEADD(MONTH, 1, @mydate) AS NextMonth</span><span id="185b" class="mc md it nb b gy nj ng l nh ni">NextMonth<br/>2021-09-22</span></pre><p id="6719" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一个参数表示间隔，第二个参数是间隔的数量。第三个参数是基值。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="dab3" class="mc md it nb b gy nf ng l nh ni">DATEADD(interval, number of intervals, date)</span></pre><p id="8013" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以使用其他间隔。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="b80d" class="mc md it nb b gy nf ng l nh ni">DECLARE @mydate Date<br/>SET @mydate = GETDATE()</span><span id="d036" class="mc md it nb b gy nj ng l nh ni">SELECT DATEADD(WEEK, -2, @mydate) AS TwoWeeksBefore</span><span id="8563" class="mc md it nb b gy nj ng l nh ni">TwoWeeksBefore<br/>2021-08-08</span></pre><p id="2042" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果在间隔数前加一个减号，它会从给定的日期中减去指定的间隔。</p><p id="391c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以添加基于时间的间隔，但我们需要使用日期时间变量。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="ef56" class="mc md it nb b gy nf ng l nh ni">DECLARE @mydate DateTime<br/>SET @mydate = GETDATE()</span><span id="734c" class="mc md it nb b gy nj ng l nh ni">SELECT DATEADD(HOUR, 10, @mydate)<br/>'2021-08-23 00:10:17.287'</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="d7cc" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">3.Datediff</h2><p id="87f3" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">datediff函数用于根据给定的时间间隔计算两个日期之间的差异。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="f4ad" class="mc md it nb b gy nf ng l nh ni">DECLARE @mydate Date<br/>SET @mydate = '2018-08-08'</span><span id="6874" class="mc md it nb b gy nj ng l nh ni">SELECT DATEDIFF(MONTH, @mydate, GETDATE())<br/>36</span></pre><p id="9e4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">mydate变量保存值“2018–08–08”。在select语句中，我们计算这个变量和当前日期之间的差值。</p><p id="af21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就像dateadd函数一样，datediff函数也接受其他间隔。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="79f3" class="mc md it nb b gy nf ng l nh ni">DECLARE @mydate Date<br/>SET @mydate = '2021-10-08'</span><span id="cc36" class="mc md it nb b gy nj ng l nh ni">SELECT DATEDIFF(DAY, @mydate, GETDATE()) AS DayDifference</span><span id="0022" class="mc md it nb b gy nj ng l nh ni">DayDifference<br/>47</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="a39f" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">4.日期名称</h2><p id="cf6c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">datename函数可用于提取日期的各个部分。例如，我们可以从日期中获取月和日的名称，如下所示:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="5d3e" class="mc md it nb b gy nf ng l nh ni">DECLARE @mydate Date<br/>SET @mydate = '2021-10-08'</span><span id="bfba" class="mc md it nb b gy nj ng l nh ni">SELECT DATENAME(MONTH, @mydate)<br/>October</span><span id="7fd8" class="mc md it nb b gy nj ng l nh ni">SELECT DATENAME(WEEKDAY, @mydate)<br/>Friday</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="3d32" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">5.年、月、日</h2><p id="e95b" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">年、月和日是独立的函数，但我认为最好将它们放在一起。</p><p id="9c6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经介绍了datename函数，它给出了月份和日期的名称。在某些情况下，我们需要数字形式的信息。年、月和日函数允许分解日期。</p><p id="c1d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们做一个例子来演示如何使用它们。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="e39d" class="mc md it nb b gy nf ng l nh ni">DECLARE @mydate Date<br/>SET @mydate = '2021-10-08'</span><span id="c6f8" class="mc md it nb b gy nj ng l nh ni">SELECT<br/>   Date = @mydate,<br/>   Year = YEAR(@mydate),<br/>   Month = MONTH(@mydate),<br/>   Day = DAY(@mydate)</span><span id="3168" class="mc md it nb b gy nj ng l nh ni">Date        Year  Month  Day<br/>2021-10-08  2021  10     8</span></pre><p id="4690" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在可以访问给定日期的每个部分。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="28c3" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">结论</h2><p id="aeb4" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">操作日期对于数据分析非常重要，尤其是在处理时间序列数据时。SQL提供了几个函数来使这个过程简单而高效。</p><p id="e90f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文中的函数涵盖了您需要对日期进行的大量操作。</p><p id="047f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>