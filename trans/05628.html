<html>
<head>
<title>Text Data Wrangling with Pandas in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中与熊猫争论的文本数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/text-data-wrangling-with-pandas-in-python-a52ffccee24e?source=collection_archive---------20-----------------------#2021-05-19">https://towardsdatascience.com/text-data-wrangling-with-pandas-in-python-a52ffccee24e?source=collection_archive---------20-----------------------#2021-05-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="79c4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用熊猫从文本中提取信息</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/df329c7a2914881c68d2e85a0f0e139a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lYdQdBJaT6gN2dz4uC6aTw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.pexels.com/photo/brown-rope-tangled-and-formed-into-heart-shape-on-brown-wooden-rail-113737/" rel="noopener ugc nofollow" target="_blank">像素</a>上的<a class="ae ky" href="https://www.pexels.com/@pixabay" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>拍摄</p></figure><p id="434c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">原始文本数据通常以难以直接用于分析的形式出现，并且通常需要文本处理方法。文本处理是自动生成和操作文本的实践。它可以用于许多数据操作任务，包括文本的特征工程、数据争论、网页抓取、搜索引擎等等。在本教程中，我们将看看如何使用Pandas库来执行一些重要的数据处理任务。</p><p id="6eb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据争论是收集和转换数据以解决分析问题的过程。这通常也是整个数据科学流程中最重要、最耗时的一步。因此，掌握基本的Pandas工具和技能对于生成清晰、可解释的文本数据非常重要。</p><p id="5665" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">文本数据争论的应用包括移除、提取、替换和转换。例如，您可以从文本中删除不必要的重复字符、单词或短语，或者提取对文本意义至关重要的重要单词或短语。您还可以使用熊猫来替换单词或短语，以获得更多信息或有用的文本。最后，Pandas可以将表示时间戳的字符转换成可用于分析的datetime对象。今天，我们将看看如何从文本中提取以及将字符串值转换成时间戳。</p><p id="5659" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些方法的一个有趣应用是在探索与特定领域或主题相关的研究出版物的上下文中。在这里，我们将使用Pandas library来分析和提取信息，例如来自各种期刊的冠状病毒研究论文的标题和摘要。</p><p id="dc89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦有了这些数据，我们就可以利用这些数据执行几项分析任务，包括找到最常被问到的研究问题，并对论文的结果和结论进行情感分析。然后，这些类型的分析可以作为产生尚未解决的新研究问题的跳板。</p><p id="e5a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">出于我们的目的，我们将使用新冠肺炎开放研究数据集(CORD-19)，它可以在<a class="ae ky" href="https://www.kaggle.com/allen-institute-for-ai/CORD-19-research-challenge" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="de7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，让我们导入Pandas库，将文件metadata.csv读入Pandas数据帧，并显示前五行数据:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="ac71" class="ma mb it lw b gy mc md l me mf">import pandas as pd</span><span id="a8f7" class="ma mb it lw b gy mg md l me mf">df = pd.read_csv(“metadata.csv”)</span><span id="404b" class="ma mb it lw b gy mg md l me mf">print(df.head())</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/878a172996e533b2cf8ead745d792c5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tf5f-na8Vm-JnaCi"/></div></div></figure><p id="758c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用“标题”、“摘要”、“期刊”和“出版时间”列让我们过滤我们的数据框架，只包括这四列:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0924" class="ma mb it lw b gy mc md l me mf">df = df[[‘title’, ‘abstract’, ‘journal’, ‘published_time’]].copy()</span><span id="10a6" class="ma mb it lw b gy mg md l me mf">print(df.head())</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mi"><img src="../Images/6080f8d2df6226e4aef7ff1f058ae4f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ycsnZkYCjbJz75FI"/></div></div></figure><p id="f9e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们将数据整理为50000条记录，并写入一个名为covid.csv的新文件:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="62ed" class="ma mb it lw b gy mc md l me mf">df_new = df.sample(50000)</span><span id="9bdb" class="ma mb it lw b gy mg md l me mf">df_new.to_csv(“covid.csv”)</span></pre><p id="f1cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们显示前五行数据:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3d49" class="ma mb it lw b gy mc md l me mf">print(df_new.head())</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/e9b7dfdc6e226f9ded2f362c88258a3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eWaZgBZXY1Khr1Jo"/></div></div></figure><p id="d21e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">使用str访问器方法从文本中检索信息</strong></p><p id="e65e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将讨论的第一个操作是使用Pandas进行基于文本的信息提取。我们可以做的第一件事是分析哪些期刊最频繁地出现在CORD-19数据中。这可以让我们深入了解哪种期刊在COVID研究领域影响最大。</p><p id="9109" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们将collections模块中的counter方法应用于journal列。这里，我们展示了100种最常出现的研究期刊:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="080f" class="ma mb it lw b gy mc md l me mf">print(Counter(df_new[‘journal’]).most_common(100))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/c0fe26881c6fa40a43b12391484f2e74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DAab2tvHcByqVNA5"/></div></div></figure><p id="2867" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到最常见的值实际上是“nan”(不是一个数字)，我们可以从数据中删除它:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="249a" class="ma mb it lw b gy mc md l me mf">df_new[‘journal’].dropna(inplace=True)</span><span id="fb5e" class="ma mb it lw b gy mg md l me mf">print(Counter(df_new[‘journal’]).most_common(100))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/eaabd2d8985d930ea75b1ec94561b663.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mqXmTFnr_nfEHLey"/></div></div></figure><p id="40e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以看到出现频率最高的期刊是<em class="ml"> PLoS One、bioRxiv、BMJ、Sci Rep、Lancet </em>和<em class="ml"> Nature </em>。</p><p id="045c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们只想查看特定期刊的摘要和标题。我们可以使用Pandas轻松过滤期刊名称上的数据。让我们过滤我们的数据框，只包含来自出版物<em class="ml"> PLoS One </em>的记录:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="6ef7" class="ma mb it lw b gy mc md l me mf">df_plos = df_new[df_new[‘journal’] == ‘PLoS One’]</span><span id="49db" class="ma mb it lw b gy mg md l me mf">print(df_plos.head())</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/2d9b1e45037df37648579647ee848144.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6lKCTDoXrqAKv53j"/></div></div></figure><p id="43ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个有趣的观察是，在我们的原始数据框架中，许多期刊包含“感染”或“传染”这两个词。假设我们对专门从事传染病研究的期刊感兴趣。这种过滤将排除在数据中发现的我们可能不感兴趣的其他研究领域，如肠道微生物组、化疗、麻醉等。我们可以提取与包含传染病子字符串“Infect Dis”的日志对应的所有记录。我们可以使用Pandas字符串访问器中的contains方法来实现这一点:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="fdbc" class="ma mb it lw b gy mc md l me mf">df_infect = df_new[df_new[‘journal’].str.contains(‘Infect Dis’, regex=False)]</span><span id="bde7" class="ma mb it lw b gy mg md l me mf">print(df_infect.head())</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mn"><img src="../Images/be44567d0a8c65fc2019e1d9c54d279c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ls7xOH4pzFIQ9C1k"/></div></div></figure><p id="64fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到我们的数据帧df_infect的日志名称带有子字符串“Infect Dis”在df_infect中，我们看到了包含单词“微生物”的两个日志这可能会激起我们对现有微生物研究的兴趣。我们可以对原始数据框进行过滤，仅包含名称中带有“微生物”的期刊:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="355b" class="ma mb it lw b gy mc md l me mf">df_microbial = df_new[df_new[‘journal’].str.contains(‘Microbial’, regex=False)].copy()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mo"><img src="../Images/d22a36a57ce503bb0fea454cf666c3b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Z6p3pUdyiBmJPn3x"/></div></div></figure><p id="7b23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以从几个不同的方向进行分析。也许我们对专注于微生物组的研究感兴趣。如果是这样，我们可以在“抽象”列中进一步使用contains方法:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="31be" class="ma mb it lw b gy mc md l me mf">df_abstract_microbiome = df_new[df_new[‘abstract’].str.contains(‘microbiome’, regex=False)].copy()</span><span id="3362" class="ma mb it lw b gy mg md l me mf">print(“Number of Microbiome Studies: “, len(df_abstract_microbiome))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/6fc448ed80214589bcecb358be3436fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ngc_sfzeRAPHQ1kq"/></div></div></figure><p id="13a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这一行动产生了一个90行的数据框，其中包含侧重于肠道微生物组研究的出版物。对标题和摘要的进一步文本分析使我们能够解决一些更有趣的问题，如:</p><ul class=""><li id="4528" class="mq mr it lb b lc ld lf lg li ms lm mt lq mu lu mv mw mx my bi translated">研究人员对新冠肺炎和肠道微生物组研究提出了什么样的问题？</li><li id="4c42" class="mq mr it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">是否有频繁出现的词或短语可以洞察研究方向？</li><li id="9966" class="mq mr it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">例如，在过去几年中，许多关于传染病的研究已经转向了解肠道健康和饮食如何影响免疫系统功能。一个有趣的分析将是观察与肠道微生物组相关的关键词的频率如何随着时间的推移而变化。</li><li id="fe19" class="mq mr it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">频繁出现的单词或短语是否有时间依赖性趋势？</li><li id="1639" class="mq mr it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">确定研究问题中是否存在与时间相关的趋势有助于发现空间中哪些问题尚未得到回答。例如，如果您发现在过去5年中，肠道微生物组研究显著增加，那么您可以过滤您的数据，只包括与肠道微生物组研究相关的论文。然后，您可以对摘要执行进一步的分析，以查看在空间中提出了什么类型的问题，以及发现了什么类型的关系。这有助于新的研究问题的形成。</li></ul><p id="7a38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我们将重点讨论最后一个问题。为此，我们需要将字符串值时间戳转换成可用于分析的值。</p><p id="e16e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">将字符串值转换成时间戳</strong></p><p id="bafc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将字符串时间值转换成用于定量分析的时间戳是文本数据处理的重要部分。如果你想分析文本数据中任何依赖于时间的趋势，这是一个重要的步骤。这是因为为了从时间值(如月、日或年)中提取任何有用的信息，我们需要将它们从字符串转换为日期时间值。我们现在需要这样做来回答上面关于频繁出现的单词和短语的问题。</p><p id="c44e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们需要将“publish_time”列转换成Pandas datetime对象。让我们继续使用df_abstract_microbiome数据框架:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b3d8" class="ma mb it lw b gy mc md l me mf">df_abstract_microbiome[‘publish_time’] = pd.to_datetime(df_abstract_microbiome[‘publish_time’], format=’%Y/%m/%d’)</span></pre><p id="111b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以创建一个提取出版年份的新列:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b6f4" class="ma mb it lw b gy mc md l me mf">df_abstract_microbiome[‘year’] = df_abstract_microbiome[‘publish_time’].dt.year</span><span id="a935" class="ma mb it lw b gy mg md l me mf">print(df_abstract_microbiome.head())</span></pre><p id="078e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，让我们打印一组年份:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="276d" class="ma mb it lw b gy mc md l me mf">print(set(df_abstract_microbiome[‘year’]))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/6d951ac166a975c9103337dcaba30a1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TBL3bJQOqfOrPXTo"/></div></div></figure><p id="aeb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们有2011-2021年的数据。我们错过了2012年和2018年。这种缺失可能是由于我们的数据过滤以及我们之前执行的下采样造成的。这不会对我们的结果产生太大影响，也仍然能够检测任何时间相关的趋势。此外，通过将样本量从50000增加到一个更大的数字，可以很容易地解决这个问题。</p><p id="36ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们使用Python库TextBlob从论文摘要中生成情感分数。<a class="ae ky" href="https://builtin.com/data-science/covid-vaccine-sentiment" rel="noopener ugc nofollow" target="_blank">情感分析</a>是一种自然语言处理方法，用于理解文本中表达的情感。</p><p id="5ca1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以做的一个粗略假设是，带有负面情绪的摘要对应于发现负面关系的大型研究，反之亦然。</p><p id="4315" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，下面的摘要有一种积极的情绪:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/8447385138f3077ea404c4dd6aec1b0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0NUx0y465WliklzO"/></div></div></figure><p id="c2e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像“丰富”和“有益”这样的词表示积极的情绪。现在让我们为我们的抽象专栏生成情感分数:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="e19b" class="ma mb it lw b gy mc md l me mf">df_abstract_microbiome[‘abstract_sentiment’] = df_abstract_microbiome[‘abstract’].apply(lambda abstract: TextBlob(abstract).sentiment.polarity)</span><span id="0c0f" class="ma mb it lw b gy mg md l me mf">print(df_abstract_microbiome.head())</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/0edc5fa12f91b624a8a654ba957b5720.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-j5FzAsYtrpjvEMY"/></div></div></figure><p id="15a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来我们需要做的是计算每年的平均情绪。我们可以使用Pandas groupby方法来实现这一点。然后我们可以<a class="ae ky" href="https://builtin.com/data-science/data-visualization-tutorial" rel="noopener ugc nofollow" target="_blank">使用Matplotlib </a>中的线形图来可视化时间序列数据。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="8b98" class="ma mb it lw b gy mc md l me mf">df_group = df_abstract_microbiome.groupby([‘year’])[‘abstract_sentiment’].mean()</span><span id="569f" class="ma mb it lw b gy mg md l me mf">import matplotlib.pyplot as plt</span><span id="f22a" class="ma mb it lw b gy mg md l me mf">import seaborn as sns</span><span id="5771" class="ma mb it lw b gy mg md l me mf">sns.set()</span><span id="06c2" class="ma mb it lw b gy mg md l me mf">plt.xlabel(‘Year’)</span><span id="8aca" class="ma mb it lw b gy mg md l me mf">plt.ylabel(‘Sentiment’)</span><span id="1db5" class="ma mb it lw b gy mg md l me mf">plt.title(‘Research Sentiment in Gut Microbiome Studies’)</span><span id="ec0e" class="ma mb it lw b gy mg md l me mf">plt.plot(df_group.index, df_group.values)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/3e63215c2dcb0d24680727ca88f9976b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*J69w0MN-1OpqjuRc"/></div></div></figure><p id="4dbf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到，从2011年到2021年，情绪有小幅上升的趋势。不过，这只包含90条记录，这并不是很多数据。让我们考虑对《公共科学图书馆·综合》杂志的出版物进行情感分析，看看我们是否能获得更多信息:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="5a2a" class="ma mb it lw b gy mc md l me mf">df_plos[‘publish_time’] = pd.to_datetime(df_plos[‘publish_time’], format=’%Y/%m/%d’)</span><span id="c500" class="ma mb it lw b gy mg md l me mf">df_plos[‘year’] = df_plos[‘publish_time’].dt.year</span><span id="b2af" class="ma mb it lw b gy mg md l me mf">df_plos[‘abstract_sentiment’] = df_plos[‘abstract’].apply(lambda abstract: TextBlob(abstract).sentiment.polarity)</span><span id="f902" class="ma mb it lw b gy mg md l me mf">df_plos_group = df_pl</span><span id="8313" class="ma mb it lw b gy mg md l me mf">os.groupby([‘year’])[‘abstract_sentiment’].mean()</span><span id="c703" class="ma mb it lw b gy mg md l me mf">import matplotlib.pyplot as plt</span><span id="3787" class="ma mb it lw b gy mg md l me mf">import seaborn as sns</span><span id="c3dd" class="ma mb it lw b gy mg md l me mf">sns.set()</span><span id="0210" class="ma mb it lw b gy mg md l me mf">plt.xlabel(‘Year’)</span><span id="1703" class="ma mb it lw b gy mg md l me mf">plt.ylabel(‘Sentiment’)</span><span id="882c" class="ma mb it lw b gy mg md l me mf">plt.title(‘Research Sentiment in PLoS One Publications’)</span><span id="c1a2" class="ma mb it lw b gy mg md l me mf">plt.plot(df_plos_group.index, df_plos_group.values)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/2035160a74bb30aa0a390e46534c218b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Q1be0C5p3e51VOq0"/></div></div></figure><p id="c66b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到，对于《公共科学图书馆·综合》杂志的记录，我们有2006年到2021年的数据，这给了我们更多的工作。在这一批中，我们可以看到情绪有小幅上升的趋势，但在过去15年中相当稳定。</p><p id="a765" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，让我们考虑一下出版物<em class="ml"> Nature </em>，它在我们的样本中拥有最长的数据历史:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="806c" class="ma mb it lw b gy mc md l me mf">df_nature = df_new[df_new[‘journal’] == ‘Nature’].copy()</span><span id="5c12" class="ma mb it lw b gy mg md l me mf">df_nature[‘publish_time’] = pd.to_datetime(df_nature[‘publish_time’], format=’%Y/%m/%d’)</span><span id="bc1d" class="ma mb it lw b gy mg md l me mf">df_nature[‘year’] = df_nature[‘publish_time’].dt.year</span><span id="205c" class="ma mb it lw b gy mg md l me mf">df_nature[‘abstract_sentiment’] = df_nature[‘abstract’].apply(lambda abstract: TextBlob(abstract).sentiment.polarity)</span><span id="00b5" class="ma mb it lw b gy mg md l me mf">df_nature = df_nature.groupby([‘year’])[‘abstract_sentiment’].mean()</span><span id="8d32" class="ma mb it lw b gy mg md l me mf">import matplotlib.pyplot as plt</span><span id="46ed" class="ma mb it lw b gy mg md l me mf">import seaborn as sns</span><span id="7a0a" class="ma mb it lw b gy mg md l me mf">sns.set()</span><span id="acff" class="ma mb it lw b gy mg md l me mf">plt.xlabel(‘Year’)</span><span id="34d0" class="ma mb it lw b gy mg md l me mf">plt.ylabel(‘Sentiment’)</span><span id="0f1e" class="ma mb it lw b gy mg md l me mf">plt.title(‘Research Sentiment in Nature Publications’)</span><span id="7189" class="ma mb it lw b gy mg md l me mf">plt.plot(df_nature.index, df_nature.values)</span><span id="ee9d" class="ma mb it lw b gy mg md l me mf">plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/f65ee3b47b855f008152aadb531b77a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3YV_iKafuffkA_Zh"/></div></div></figure><p id="c2d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是三个重叠的图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/f10e8c7e28744aede3547816803b0b4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LvlBuhavzluD8Lyc"/></div></div></figure><p id="b785" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与《公共科学图书馆》杂志的<em class="ml">相比，《自然》杂志的</em>似乎总体上更倾向于正面评价。如果我们的假设，即情绪是一项研究中发现的关系的指示是正确的，这将意味着<em class="ml"> PLoS One </em>可能有相对更多的研究报告了积极的关系。例如，正相关关系可能是:“药物X增加CD4 T细胞”。</p><p id="137d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您有兴趣访问这里使用的代码，可以在<a class="ae ky" href="https://github.com/spierre91/builtiin/blob/main/research_sentiment.py" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。</p><h1 id="4c60" class="nj mb it bd nk nl nm nn no np nq nr ns jz nt ka nu kc nv kd nw kf nx kg ny nz bi translated"><strong class="ak">结论</strong></h1><p id="232e" class="pw-post-body-paragraph kz la it lb b lc oa ju le lf ob jx lh li oc lk ll lm od lo lp lq oe ls lt lu im bi translated">这一分析仅仅触及了你能从文本中获得的洞察力类型的表面。你可以很容易地使用这些技巧来进一步分析。</p><p id="809e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">具体来说，Pandas contains方法允许您快速、轻松地在数据中搜索文本模式。如果你是一名领域专家，你可以搜索与你想问的问题相关的特定术语。</p><p id="fd4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，与由COVID引起的细胞因子风暴相关的通常研究的蛋白质靶标是Janus激酶(JAK)家族蛋白质。可以使用contains方法搜索所有涉及JAK家族蛋白质的出版物。此外，这种类型的数据探索可能会让你发现你以前可能没有考虑过的新问题。</p><p id="74f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对研究摘要的情感分析有可能作为在大量出版物中快速鉴定研究结果的代理。例如，如果我们的负面情绪等于结果中的负面关系的假设是合理的，你可以用它来帮助你的研究。负相关的例子是“药物X抑制JAK”和“药物Y抑制sars-Cov-2”如果有合适的领域专业知识，Pandas和TextBlob可以用来构建高质量的研究搜索引擎，以加快研究过程。</p><p id="f7d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas用于基于文本的数据辩论，TextBlob用于情感分析，这两者的结合确实非常强大。研究人员经常面临手动执行文献搜索的任务，这可能非常耗时。这些工具有助于加速问题的形成和研究目的的信息检索过程。</p><p id="4727" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有兴趣学习python编程的基础知识、Pandas的数据操作以及python中的机器学习，请查看<a class="ae ky" href="https://www.amazon.com/dp/B08N38XW2Q/ref=sr_1_1?dchild=1&amp;keywords=sadrach+python&amp;qid=1604966500&amp;s=books&amp;sr=1-1" rel="noopener ugc nofollow" target="_blank"><em class="ml">Python for Data Science and Machine Learning:Python编程、Pandas和sci kit-初学者学习教程</em> </a> <em class="ml">。我希望你觉得这篇文章有用/有趣。</em></p><p id="da2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="ml">本帖原载于</em> </strong> <a class="ae ky" href="https://builtin.com/machine-learning" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> <em class="ml">内置博客</em> </strong> </a> <strong class="lb iu"> <em class="ml">。原片可以在这里找到</em></strong><a class="ae ky" href="https://builtin.com/data-science/data-wrangling-pandas" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="ml"/></strong></a><strong class="lb iu"><em class="ml">。</em>T29】</strong></p></div></div>    
</body>
</html>