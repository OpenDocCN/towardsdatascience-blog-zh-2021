<html>
<head>
<title>How I Made My First R Function</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何创建我的第一个R函数</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-i-made-my-first-r-function-776f57e2ec7b?source=collection_archive---------27-----------------------#2021-05-22">https://towardsdatascience.com/how-i-made-my-first-r-function-776f57e2ec7b?source=collection_archive---------27-----------------------#2021-05-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6df6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以及如何也能做到:一个真实世界的例子。</h2></div><p id="b6d0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">学习R是一件非常痛苦的事情——学习曲线很陡，可能会让人不知所措。让我回到这个令人谦卑的旅程的是这样一种能力:只需要为某件事做一次，然后根据需要重复做多次。我热爱效率，所以我坚持不懈。今天我遇到了一个乏味的烦恼，通过创建一个函数，我可以在几分钟内解决它。</p><h1 id="cf88" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated"><strong class="ak">形势</strong></h1><p id="4527" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">我正在寻找一个新的公寓，并试图比较价格。幸运的是(谢谢，COVID)，一些单位正在提供一两个月的免费(！)的租金。这是一个极好的消息，但是很难比较价格。</p><h1 id="fadb" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated"><strong class="ak">我在做什么</strong></h1><p id="7b9c" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">当我看到有打折租金的房源时，我会打开我的计算器应用程序，然后:</p><ol class=""><li id="542e" class="mb mc it kk b kl km ko kp kr md kv me kz mf ld mg mh mi mj bi translated">免费月数(折扣)*月租金(基本租金)</li><li id="ba61" class="mb mc it kk b kl mk ko ml kr mm kv mn kz mo ld mg mh mi mj bi translated">最短租赁期限(通常为12个月)*月租金(基本租金)</li><li id="dff2" class="mb mc it kk b kl mk ko ml kr mm kv mn kz mo ld mg mh mi mj bi translated">从#2中减去我从#1中得到的，然后除以最短租期要求</li></ol><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi mp"><img src="../Images/1c3ecd48dcb294fb82b25facc9b082ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FJSAYYQZNAKP-ygr"/></div></div><p class="nb nc gj gh gi nd ne bd b be z dk translated">由<a class="ae nf" href="https://unsplash.com/@kellysikkema?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">凯利·西克玛</a>在<a class="ae nf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="9b83" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我这样做一次，甚至两次，也不会那么糟糕。但是当我第三次尝试时，我开始感到沮丧。我知道我每次想要执行的确切步骤，但是我不得不手动执行每一个步骤——讨厌！</p><p id="e453" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">救援功能！</p><h1 id="7e46" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">r函数基础</h1><p id="6e4f" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">第一次用R写函数时，我真的很害怕，但这有助于一点一点地分解它。请记住，函数会很快变得复杂，但我们会尽可能保持简单。</p><p id="8fb0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在最基本的情况下，R中的函数具有这样的结构:</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi ng"><img src="../Images/17c5e203faa8d153215abb0532fcb71c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lck48UuArT9DICAUXeS2nw.png"/></div></div><p class="nb nc gj gh gi nd ne bd b be z dk translated">创造于<a class="ae nf" href="https://carbon.now.sh/" rel="noopener ugc nofollow" target="_blank">碳</a>。</p></figure><p id="bd44" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不太吓人吧？功能实际上只是:</p><ol class=""><li id="00a8" class="mb mc it kk b kl km ko kp kr md kv me kz mf ld mg mh mi mj bi translated">您的函数(myfunction)的<strong class="kk iu">名称</strong></li><li id="36b0" class="mb mc it kk b kl mk ko ml kr mm kv mn kz mo ld mg mh mi mj bi translated"><strong class="kk iu">输入</strong>或执行您的功能所需的数据(输入)</li><li id="8c90" class="mb mc it kk b kl mk ko ml kr mm kv mn kz mo ld mg mh mi mj bi translated">您希望完成的<strong class="kk iu">步骤</strong></li></ol><p id="0fc1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">函数的一个例子是mean()。当你想计算平均值时，R知道把所有的数字相加，然后除以有多少个数字。我们可以直接使用均值函数，而不必自己将数字相加，然后进行除法运算。因为我也有每次都想重复的固定步骤，所以函数是一个很好的解决方案。</p><h1 id="8fdc" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">我的R函数</h1><p id="6422" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">让我们回到我的租赁示例，确定输入和要完成的步骤。</p><p id="30bc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我需要计算我的有效租金的输入是基本租金、折扣(提供的免费月数)和期限(通常为12个月)。</p><p id="d1c7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我希望完成的步骤是:将基本金额乘以期限长度减去基本金额乘以折扣。然后我想用它除以期限，看看在应用折扣后，每个月我将有效支付多少。</p><p id="4cbb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我将调用这个函数myrent，并告诉它我们需要三个输入:基本租金(base)、免费月数(discount)和租赁期限(term)。</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi nh"><img src="../Images/5a791dcb8f157cb41910c5cc39b3185a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Km_hU1SympkwGesDK9yjDQ.png"/></div></div></figure><p id="7d7a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还没有告诉R这些输入(基数、折扣和期限)是什么意思。我们也可以使用x，y，z，我们现在所做的就是告诉它，我们将需要这三条信息，然后我们将对它们做些什么。</p><p id="5d36" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在是步骤。我们将友好地告诉我们的朋友(我笑了)我们想要完成的步骤，并把它们放在{}内。</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi ni"><img src="../Images/3ecfb0167ea69008dbe29235295f276e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3ETlOZRYi4G6MXTrgPFznA.png"/></div></div></figure><p id="97cc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">事情进展顺利！最后一步，我们需要让R告诉我们，在完成我们指定的步骤后，它计算了什么。所以我们要让R打印(base*term-base*discount)/term的答案“result”。</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi ni"><img src="../Images/b55f6c38f625704b109a8d4d59e1b7c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lYuGxeHqZIXEcDrCl8C0vA.png"/></div></div></figure><p id="0519" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">瞧，我们已经准备好使用我们的功能了！！！比方说，我看到了一套月租2000美元的公寓(是的，我也很难过，DC房产真是个混蛋)，他们提供12个月的免费租赁。</p><p id="eb26" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">既然我们已经创建了函数，我们要做的就是使用“myrent”调用它，并输入每个输入(基本、折扣和期限)。</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi nj"><img src="../Images/8cf4b913e45df41459d661bf073d9fba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XgKanLsQkR5c3Ov11E_GcQ.png"/></div></div></figure><p id="f79b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就这样，我们信任的伙伴给了我们<code class="fe nk nl nm nn b">[1] 1833.333.</code></p><p id="4c8e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这意味着，如果固定租金是每月2000美元，并且有两个免费月的折扣，我将在12个月内每月支付1833.33美元。我现在可以很容易地将它与每月1920美元的公寓进行比较，该公寓提供一个月的免费折扣。神奇！</p><p id="be69" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">继续用你的头撞墙，这样会好很多！</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><p id="08d3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">作者:<a class="ae nf" href="https://medium.com/@jeagleson" rel="noopener"> <strong class="kk iu"> <em class="nv">詹娜·伊格尔森</em></strong></a><strong class="kk iu"><em class="nv"><br/></em></strong><em class="nv">我的背景是工业组织心理学，我在人物分析中找到了自己的家。数据使我的作品变得生动。我主要使用Power BI，但我也喜欢涉足其他工具。我很想听到更多关于你的旅程！在此评论或在推特上评论联系我。</em></p></div></div>    
</body>
</html>