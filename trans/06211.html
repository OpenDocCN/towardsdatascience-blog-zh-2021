<html>
<head>
<title>Analysis of Coffee Shops in Montreal — Neighbourhood Segmentation and Clustering</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">蒙特利尔咖啡店分析——街区分割和聚类</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/analysis-of-coffee-shops-in-montreal-neighbourhood-segmentation-and-clustering-4e4f020c30d7?source=collection_archive---------25-----------------------#2021-06-03">https://towardsdatascience.com/analysis-of-coffee-shops-in-montreal-neighbourhood-segmentation-and-clustering-4e4f020c30d7?source=collection_archive---------25-----------------------#2021-06-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="af28" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a></h2><div class=""/><div class=""><h2 id="5d73" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated"><em class="ko">如何使用four square API k-means聚类对蒙特利尔市的社区进行分类和聚类</em></h2></div><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/c3c734b2d590cce1ed752be18e8363d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R2eI8MwHRfLyi0zAISV0ZQ.jpeg"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">图1——由<a class="ae lf" href="https://pixabay.com/photos/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=983955" rel="noopener ugc nofollow" target="_blank">拍摄的自由照片</a>在<a class="ae lf" href="https://pixabay.com/pt/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=983955" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上</p></figure><h2 id="a1c2" class="lg lh iq bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma iw bi translated">介绍</h2><p id="cbe8" class="pw-post-body-paragraph mb mc iq md b me mf ka mg mh mi kd mj lp mk ml mm lt mn mo mp lx mq mr ms mt ij bi translated">蒙特利尔是加拿大人口第二多的城市，也是加拿大魁北克省人口最多的城市。</p><p id="e2c0" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">这座城市是一个旅游胜地，有几个娱乐区、历史古迹、众多的酒吧、餐馆和咖啡馆。一项既是游客也是居民的活动是喝咖啡。这项活动可以单独进行，也可以在朋友的陪同下，在这个城市的任何时间进行。</p><p id="31e4" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">在世界上人均饮用咖啡量较高的20个国家中，加拿大人的人均消费量约为6.5公斤/年，高于美国和英国。</p><p id="0d94" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">平均而言，72%的18至79岁的加拿大人每天都喝咖啡，但在经常喝咖啡的人中，平均消费量是每天2.8杯(加拿大咖啡协会)。</p><h2 id="985c" class="lg lh iq bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma iw bi translated">商业问题</h2><p id="c632" class="pw-post-body-paragraph mb mc iq md b me mf ka mg mh mi kd mj lp mk ml mm lt mn mo mp lx mq mr ms mt ij bi translated">这个项目的目标是分析和探索一个咖啡店的最佳位置。这份报告将针对那些想从零开始，购买现有企业的利益相关者，或者任何对加拿大蒙特利尔的好咖啡感兴趣的人。</p><p id="b687" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">由于蒙特利尔有很多咖啡店，我们将尝试检测那些还没有挤满咖啡店的位置。我们还对附近没有咖啡店的地区特别感兴趣。假设前两个条件都满足，我们也希望位置尽可能靠近市中心(麦吉尔大学附近)。</p><h2 id="25fe" class="lg lh iq bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma iw bi translated">数据</h2><p id="f2ed" class="pw-post-body-paragraph mb mc iq md b me mf ka mg mh mi kd mj lp mk ml mm lt mn mo mp lx mq mr ms mt ij bi translated">对于蒙特利尔居民区的数据，维基百科上有一个页面，里面有我们探索和聚集城市居民区所需的所有信息。</p><p id="5dbb" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">为了获得蒙特利尔居民区和邮政编码的数据，维基百科页面被废弃了。用于此任务的库是BeautifulSoup。通过刮擦，从124个邮政编码、地区和区域获得了数据。仍然需要添加每个邮政编码的纬度和经度，为此，我使用了<a class="ae lf" href="https://pypi.org/project/pgeocode/" rel="noopener ugc nofollow" target="_blank"> <strong class="md ja"> pgeocode </strong> </a>库。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="9b5f" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">在验证了一个邮政编码(HOP)没有关于它的邻居、地区的信息，因此既没有纬度也没有经度之后，执行了数据清理。我研究了蒙特娄的邮政编码，发现H0的前缀很奇怪。零表示交付农村地区，因此实际上是空的。(<a class="ae lf" href="https://en.wikipedia.org/wiki/Postal_codes_in_Canada" rel="noopener ugc nofollow" target="_blank">加拿大的邮政编码</a>)。这样，那个邮政编码就被删除了。</p><p id="5701" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">通过邮政编码的<em class="nb">箱线图</em>图，观察到经纬度的异常值。该坐标不属于加拿大，因此已从数据集中移除。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nc"><img src="../Images/165503998d496f299690cdb30fed537f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WirSiRbyBHsSMuw9lpJSqg.png"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">图2—按作者分类的图像—纬度箱线图中的异常值</p></figure><p id="ce78" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">之后，该数据框总共有122个邻域，并且它的存储方式可以读取到pandas数据框中，因此它是一种类似于魁北克蒙特利尔数据集的结构化格式。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nd"><img src="../Images/812ecf1bfc21896bbf3a60d203addd3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*CewK0A38hCUY5fbDE_732Q.png"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">图3——作者的图片——蒙特利尔街区</p></figure><h2 id="acf7" class="lg lh iq bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma iw bi translated">方法学</h2><p id="a661" class="pw-post-body-paragraph mb mc iq md b me mf ka mg mh mi kd mj lp mk ml mm lt mn mo mp lx mq mr ms mt ij bi translated">在这一节中，将展示用于项目分析的方法。</p><p id="e4ce" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">首先，我们检查了候选社区。这是创造了经纬度坐标的质心，麦吉尔大学附近。</p><p id="1e45" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">可视化库<a class="ae lf" href="https://python-visualization.github.io/folium/quickstart.html" rel="noopener ugc nofollow" target="_blank"> <strong class="md ja">叶子</strong> </a>被用来创建一个蒙特利尔的地图，上面叠加了街区，以及一个覆盖感兴趣区域的网格。20x20公里，以麦吉尔大学附近为中心。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="mz na l"/></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ne"><img src="../Images/84b7007fc8bb6884ab72a9dbadf806ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*945xd2VSG0MVTilm-Ji8ng.png"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">图4—按作者分类的图像—候选人社区</p></figure><p id="29a8" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">为了探索蒙特利尔市的街区，使用了<a class="ae lf" href="https://developer.foursquare.com" rel="noopener ugc nofollow" target="_blank"><strong class="md ja">four square</strong></a>API。该界面用于获取每个街区中最常见的位置类别(咖啡馆、餐馆、冰淇淋店、艺术画廊等)，然后使用该功能对街区进行分组。必须在应用程序中创建一个帐户来获取您的客户端凭据。</p><p id="cfc0" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">首先，API被用来获取半径为2.5公里的麦吉尔大学附近的前100个场馆。</p><p id="12fd" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">第二，分析验证了蒙特利尔地区上空280个类别的频率，并且在咖啡店类别被过滤之后。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nf"><img src="../Images/fcb963af722d64517fb455e02f6e1d55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1gDa9MFvZHk7IiQs_HmWuw.png"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">图5——按作者分类的图片——每个类别的出现频率</p></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/47da5d2dc53ec48a68bb11ffb3c10a31.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*J7RvNhQky2EDExtXG8CHKA.png"/></div><p class="lb lc gj gh gi ld le bd b be z dk translated">图6—按作者分类的图片—咖啡店类别频率</p></figure><p id="7c25" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">然后，执行k-means聚类算法以将邻域聚类成4个聚类。再次，叶图书馆被用来可视化城市的集群分布。根据咖啡店在每个区域的出现频率，按照本项目的要求(附近很少或没有咖啡店的区域),对每个集群进行检查和区分。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="mz na l"/></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nh"><img src="../Images/c6ec61a04eecf34871f9baedd3c59450.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IlV8b9ptYBYDmJT1p4rCrQ.png"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">图7—作者提供的图片— <strong class="bd ni">群集</strong></p></figure><p id="79bb" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">最后，计算出咖啡店很少或没有的街区到麦吉尔大学街区的距离，并将其添加到分析中。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nj"><img src="../Images/4600976b27c7c01cf046dd976b174eb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iYIqxlVz5rvx9R3X_Ugk7A.png"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">图8—作者提供的图片— <strong class="bd ni">距离市中心最近的前5个街区，咖啡馆的出现频率很低</strong></p></figure><h2 id="ab0f" class="lg lh iq bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma iw bi translated">结果</h2><p id="4f84" class="pw-post-body-paragraph mb mc iq md b me mf ka mg mh mi kd mj lp mk ml mm lt mn mo mp lx mq mr ms mt ij bi translated">这项工作分析了蒙特利尔的122个街区，目的是发现不再充满咖啡店的地方。</p><p id="f1a0" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">蒙特利尔自助餐厅密度最低的区域集中在分析区域的外围区域。这个区域与群集0(地图上的红点)相关。在这个组群中，有25个居民区密度较低。</p><p id="3d0b" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">凡尔登南部是离麦吉尔大学最近的街区，咖啡店密度很低。距离中心坐标1.97公里。</p><p id="e2e9" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">还有更近的地方，没有拥挤的咖啡店:Plateau Mont-royal southeast(0.75公里)，Verdun North(1.36公里)，Place Desjardins，蒙特利尔市中心东北(都是1.38公里)。</p><h2 id="cfa3" class="lg lh iq bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma iw bi translated">结论和建议</h2><p id="d925" class="pw-post-body-paragraph mb mc iq md b me mf ka mg mh mi kd mj lp mk ml mm lt mn mo mp lx mq mr ms mt ij bi translated">项目要求包括检测尚未挤满咖啡馆的地方，或附近咖啡店密度较低的区域，并尽可能靠近市中心(麦吉尔大学)。建议以下五个方案满足项目要求:<em class="nb">凡尔登南</em>，距离<em class="nb">麦吉尔大学</em>最近的街区，咖啡店密度最低，距离中心坐标1.97公里；<em class="nb">Plateau Mont-royal东南</em>(0.75公里)<em class="nb">Verdun North</em>(1.36公里)<em class="nb">Place Desjardins</em>(1.38公里)<em class="nb">蒙特利尔市区东北</em>(1.38公里)。</p><p id="0bd8" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">这个项目只考虑了附近咖啡店的频率。其他因素对最终决定自助餐厅的位置也很重要，如附近的其他企业(将是补充自助餐厅的其他相关类别)、附近的生活费用、安全区等。此外，所有分析都是使用免费API或其开放访问选项进行的。可以使用付费资源进行分析，以便获得更多的结果选项</p><p id="8780" class="pw-post-body-paragraph mb mc iq md b me mu ka mg mh mv kd mj lp mw ml mm lt mx mo mp lx my mr ms mt ij bi translated">这个分析的笔记本可以看<a class="ae lf" href="https://github.com/ssilvacris/Coursera_Capstone/blob/main/capstone_project_final/Notebook_coffee.ipynb" rel="noopener ugc nofollow" target="_blank">这里</a>。</p></div></div>    
</body>
</html>