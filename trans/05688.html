<html>
<head>
<title>Why You Need a Python Virtual Environment and How to Set It Up</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么需要Python虚拟环境以及如何设置它</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/why-you-need-a-python-virtual-environment-and-how-to-set-it-up-35019841697d?source=collection_archive---------5-----------------------#2021-05-21">https://towardsdatascience.com/why-you-need-a-python-virtual-environment-and-how-to-set-it-up-35019841697d?source=collection_archive---------5-----------------------#2021-05-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1f77" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">这样做是为了避免将来在Python中处理不同项目时出现问题</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ce9806ee78d8d92c64b78be26ca3fef0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*49qm5OdB_H_wX_5-"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@jeshoots?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">JESHOOTS.COM</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="eba3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你刚刚开始学习Python或者已经写了好几个月的Python代码，大概你已经在电脑上安装了几十个库了。尽管每个库都可能是获得新Python技能的证明，但是如果所有这些库都安装在同一个环境中，它们可能会破坏系统工具或以前的项目，这些项目有自己的依赖关系。</p><p id="2b74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个项目可能都需要自己独特的第三方Python包。这就是为什么每次我们开始一个新项目时，我们都应该用一个特定的Python版本和项目的所有依赖项来建立一个新的虚拟环境。如果您以前从未这样做过，请不要担心，在本指南中，我将带您完成Python虚拟环境的设置，以便您在使用Python处理不同项目时避免将来的问题。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b6cb" class="ma mb it lw b gy mc md l me mf"><strong class="lw iu">Table of Contents<br/></strong>1. <a class="ae ky" href="#db7f" rel="noopener ugc nofollow">What’s a Virtual Environment?</a><br/>2. <a class="ae ky" href="#cdd0" rel="noopener ugc nofollow">How to Create a Virtual Environment with venv</a><br/>3. <a class="ae ky" href="#1bb9" rel="noopener ugc nofollow">Sharing Python Projects</a><br/>4. <a class="ae ky" href="#87af" rel="noopener ugc nofollow">Alternative to venv</a></span></pre><h1 id="db7f" class="mg mb it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">什么是虚拟环境？</h1><p id="0284" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">虚拟环境是一种工具，有助于保持所需的依赖关系和项目隔离。如果你想安装一个新的库并在终端上写<code class="fe nc nd ne lw b">pip install name_of_library </code>而不激活一个环境，所有的包将被全局安装，如果你在你的计算机上处理不同的项目，这不是一个好的做法。</p><p id="3015" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果这听起来有点复杂，不要太担心，因为虚拟环境只是一个目录，其中包含我们的项目运行所需的所有文件。</p><h1 id="cdd0" class="mg mb it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">如何用venv创建虚拟环境</h1><p id="d156" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">假设我们想在Python中处理两个不同的项目。一个是数据科学项目，其中有一些科学库(NumPy、Pandas、Matplotlib等)，而第二个是web开发项目，其中我们将主要使用Django。</p><p id="affb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设数据科学项目的目录树是这样的。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b131" class="ma mb it lw b gy mc md l me mf">data-science-project/<br/>├── dataset1        <br/>├── dataset2<br/>└── dataset3</span></pre><p id="073b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们将所有这些库安装在同一个默认环境中，不仅会出现一些错误，而且默认环境也会变得有点乱，所以我们将使用Python 3附带的<code class="fe nc nd ne lw b">venv</code>安装一个新环境(还要确保安装了pip)。</p><p id="fc20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要创建一个新的环境，打开一个新的终端，并找到您希望存储项目的文件夹。在该目录中运行命令<code class="fe nc nd ne lw b">python3 -m venv name_of_the_environment</code></p><p id="e59b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于我们的例子，我将通过终端转到<code class="fe nc nd ne lw b">data-science-project</code>目录，然后运行前面提到的命令来创建一个名为<code class="fe nc nd ne lw b">data_science_env</code>的虚拟环境</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="1c4d" class="ma mb it lw b gy mc md l me mf">cd data-science-project/             # change directory<br/>python3 -m venv data_science_env     # creates the environment</span></pre><p id="3007" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们刚刚创建了一个文件夹，其中包含运行最新版本Python的虚拟环境。现在我们的项目目录树看起来像这样。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="d735" class="ma mb it lw b gy mc md l me mf">data-science-project/<br/>├── dataset1        <br/>├── dataset2<br/>├── dataset3                  <br/>└── data_science_env                  # our new environment</span></pre><p id="da78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在是时候激活创建的环境了。为此，我们在终端中运行以下代码。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c148" class="ma mb it lw b gy mc md l me mf"># mac<br/>source data_science_env/bin/activate<br/># windows<br/>data_science_env\scripts\activate.bat</span></pre><p id="1673" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这之后，您将会看到如下图所示的括号中的环境名称(这次是Django环境<code class="fe nc nd ne lw b">django_env</code>)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/92e8c25c190b5a98dd9ac44bb1e0659a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LMVkIp6MOmDPeKVYELl7CA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="f0c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">既然环境已经激活，那么就可以为我们的项目安装特定的库了。比如我要装熊猫。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="07d3" class="ma mb it lw b gy mc md l me mf">(data_science_env) pip install pandas</span></pre><p id="cb69" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果您运行<code class="fe nc nd ne lw b">pip list </code>，您应该会看到已安装软件包的列表。由于我们刚刚创建了环境，我们将只找到熊猫。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="db18" class="ma mb it lw b gy mc md l me mf">(data_science_env) pip list</span><span id="b3b1" class="ma mb it lw b gy ng md l me mf">Package    Version<br/>---------- -------<br/>pandas      1.2.4<br/>pip        19.0.3<br/>setuptools 40.8.0</span></pre><p id="0939" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想要停用当前环境，请运行以下代码</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3e8c" class="ma mb it lw b gy mc md l me mf">(data_science_env) deactivate</span></pre><p id="4878" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行代码后，您应该不会再看到括号内的环境名称。</p><p id="dc1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想要删除创建的环境，请编写以下内容。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="19c2" class="ma mb it lw b gy mc md l me mf"># mac<br/>rm -rf data_science_env<br/># windows<br/>rmdir data_science_env /s</span></pre><div class="nh ni gp gr nj nk"><a href="https://betterprogramming.pub/4-books-i-read-as-a-self-taught-data-scientist-380d13d8bb0c" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd iu gy z fp np fr fs nq fu fw is bi translated">作为一名自学成才的数据科学家，我读了4本书</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">涵盖成为数据科学家所需的大部分内容的书籍</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">better编程. pub</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny ks nk"/></div></div></a></div><h1 id="1bb9" class="mg mb it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">共享Python项目</h1><p id="0d89" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">创建的环境不仅有助于组织我们的项目，还能让我们轻松地与任何人共享项目。有了虚拟环境，就有可能保留我们项目中的所有信息，比如依赖关系，这样任何人都可以复制我们正在使用的相同环境。</p><p id="27e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，请运行以下命令。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c7d0" class="ma mb it lw b gy mc md l me mf">(data_science_env) pip freeze &gt; requirements.txt</span></pre><p id="da56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nc nd ne lw b">pip freeze</code>命令列出了环境中安装的第三方包和版本。输出存储在一个名为<code class="fe nc nd ne lw b">requirements.txt</code>的文件中</p><p id="f357" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以与任何希望重建特定项目运行环境的人共享该文件。一旦其他人收到该文件，他/她所要做的就是在他们的机器上按照本指南中说明的步骤创建一个新环境，然后激活该环境并运行以下代码。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="ee83" class="ma mb it lw b gy mc md l me mf">pip install -r requirements.txt</span></pre><p id="5b2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样，环境就在第二台机器上被复制了。要确保所有库都安装了您想要的版本，请编写以下代码。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="1a69" class="ma mb it lw b gy mc md l me mf">pip list</span></pre><h1 id="87af" class="mg mb it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">venv的替代品</h1><p id="966c" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">在本文中，我们使用venv，因为它预装了Python然而，还有其他值得一试的选择。</p><h2 id="5116" class="ma mb it bd mh nz oa dn ml ob oc dp mp li od oe mr lm of og mt lq oh oi mv oj bi translated">pipenv</h2><p id="0eea" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">这是一个将包和环境管理支持合并到一个工具中的工具，因此它使用<code class="fe nc nd ne lw b">pip</code>、<code class="fe nc nd ne lw b">venv</code>和<code class="fe nc nd ne lw b">requirementes.txt</code>简化了典型的工作流</p><p id="10ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不幸的是，它没有预装在Python中，所以您必须通过pip单独安装它。只需在您的终端上运行以下命令。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="9943" class="ma mb it lw b gy mc md l me mf">$ pip install --user pipenv</span></pre><p id="9fb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有关该工具的更多信息和设置指南，请查看此处的可用文档<a class="ae ky" href="https://pipenv.pypa.io/en/latest/" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl ok ol hx om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="im in io ip iq"><p id="ef04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="or">就是这样！现在您已经准备好开始一个新的Python项目了！下面你可以找到一些我做的关于数据科学中使用的库的指南(Matplotlib/Seaborn，Pandas和Scikit-Learn)。</em></p><ul class=""><li id="5712" class="os ot it lb b lc ld lf lg li ou lm ov lq ow lu ox oy oz pa bi translated">【Excel用户熊猫指南</li><li id="a615" class="os ot it lb b lc pb lf pc li pd lm pe lq pf lu ox oy oz pa bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/a-simple-guide-to-beautiful-visualizations-in-python-f564e6b9d392">如何用Matplotlib和Seaborn制作漂亮的可视化效果</a></li><li id="1e9f" class="os ot it lb b lc pb lf pc li pd lm pe lq pf lu ox oy oz pa bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/a-beginners-guide-to-text-classification-with-scikit-learn-632357e16f3a">sci kit-Learn的简单指南—用Python构建您的第一个机器学习模型</a></li></ul><p id="2c80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://frankandrade.ck.page/bd063ff2d3" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">与3k以上的人一起加入我的电子邮件列表，获取我在所有教程中使用的Python for Data Science备忘单(免费PDF) </strong> </a></p></div></div>    
</body>
</html>