<html>
<head>
<title>Easy, Breezy, EDA — An Update to My Latest Function</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简单，轻松，EDA —我最新功能的更新</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/easy-breezy-eda-updated-function-using-seaborn-ffe2ccc9f56a?source=collection_archive---------22-----------------------#2021-08-25">https://towardsdatascience.com/easy-breezy-eda-updated-function-using-seaborn-ffe2ccc9f56a?source=collection_archive---------22-----------------------#2021-08-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a096" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">简化您的探索性数据分析流程，以便您可以更快地获得洞察力</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b00646c0d1a39853dc01b0906d0956d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zPaH0mdVs6TJH-D4wtyx4g.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@dillonjshook?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">狄龙在<a class="ae kv" href="https://unsplash.com/s/photos/work-smart-not-hard?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上摇</a></p></figure><p id="56ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<a class="ae kv" rel="noopener" target="_blank" href="/a-function-that-makes-your-initial-eda-a-breeze-8e9549d69fb3">我最新的博客文章</a>中，我写了一个我在从事最新项目时创建的函数，以在EDA过程中简化代码和节省时间。对于那些不熟悉这篇文章的人来说，这是我创建的函数:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="3735" class="lx ly iq lt b gy lz ma l mb mc">def initial_eda(df):<br/>    # List of categorical columns<br/>    cat_cols = df.select_dtypes('object').columns<br/>    <br/>    for col in cat_cols:<br/>        # Formatting<br/>        column_name = col.title().replace('_', ' ')<br/>        title= 'Distribution of ' + column_name<br/>        <br/>        # Unique values &lt;= 12 to avoid overcrowding<br/>        if len(df[col].value_counts())&lt;=12: <br/>            plt.figure(figsize = (8, 6))        <br/>            sns.countplot(x=df[col], <br/>                          data=df, <br/>                          palette="Paired",<br/>                          order = df[col].value_counts().index)<br/>            plt.title(title, fontsize = 18, pad = 12)<br/>            plt.xlabel(column_name, fontsize = 15)<br/>            plt.xticks(rotation=20)<br/>            plt.ylabel("Frequency",fontsize = 15)<br/>            plt.show();<br/>        else:<br/>            print(f'{column_name} has {len(df[col].value_counts())} unique values. Alternative EDA should be considered.')<br/>    returnSome examples of the visuals created from this code:</span></pre><p id="ccfa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过该函数运行奥斯汀动物中心数据集后，产生了以下一些视觉效果:</p><div class="kg kh ki kj gt ab cb"><figure class="md kk me mf mg mh mi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/8d4c1e6707151039a2179f0901632bc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*0weEIkYdGAWTTRltD8b5_g.png"/></div></figure><figure class="md kk mj mf mg mh mi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/c7e61fc42e7f670d38481805c48bd70b.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*CgmPt2ucsFK5TMB3Sj_Izw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk mk di ml mm translated">作者提供的图片</p></figure></div><p id="d015" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如我在上一篇文章中提到的，虽然这在最初的EDA中运行良好，但仍有很大的改进空间。例如，上面的函数只为具有12个或更少唯一值的列提供可视化效果。具有更多唯一值的用户提供了以下打印语句:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mn"><img src="../Images/47935307a2f3e3470bf1b5d8dbe04e5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*07J2QaGXQFaRnA-RegY3lQ.png"/></div></div></figure><p id="d5f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然这确实提供了关于这些列中每一列的一些信息，但是错过了提取关于可能有价值的数据的洞察力的机会。下面是该函数的一个新的更新版本:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="b195" class="lx ly iq lt b gy lz ma l mb mc">def initial_eda(df):<br/>    # List of categorical columns<br/>    cat_cols = df.select_dtypes(['object','category']).columns<br/>    <br/>    for col in cat_cols:<br/>        # Formatting<br/>        column_name = col.title().replace('_', ' ')<br/>        title = 'Distribution of ' + column_name<br/>        unique_values = len(df[col].value_counts())<br/>        <br/>        # unique_values &lt;=12 to avoid overcrowding<br/>        if unique_values&lt;=12: <br/>            plt.figure(figsize = (10, 6))<br/>            sns.countplot(x=df[col], <br/>                          data=df, <br/>                          palette="Paired",<br/>                          order = df[col].value_counts().index)<br/>            plt.title(title, fontsize = 18, pad = 12)<br/>            plt.xlabel(column_name, fontsize = 15)<br/>            plt.xticks(rotation=20)<br/>            plt.ylabel("Frequency",fontsize = 15)<br/>            plt.show();<br/>        else:<br/>            print(f'{column_name} has {len(df[col].value_counts())} unique values. Here are the top 10:')<br/>            print()<br/>            col_count  = df[col].value_counts()<br/>            col_count = col_count[:10,]<br/>            plt.figure(figsize = (12, 6))<br/>            sns.barplot(x = col_count.index, <br/>                        y = col_count.values, <br/>                        palette="Paired")<br/>            plt.title(f'Top 10 {column_name}s', fontsize = 18, pad = 12)<br/>            plt.ylabel('Frequency', fontsize=15)<br/>            plt.xticks(rotation=20)<br/>            plt.xlabel(column_name, fontsize=15)<br/>            plt.show()<br/>            <br/>    return</span></pre><p id="3fab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果列有超过12个唯一值，这个函数的更新版本现在将创建一个包含10个最常见的唯一值的条形图，而不是返回一个print语句。一些例子:</p><div class="kg kh ki kj gt ab cb"><figure class="md kk mo mf mg mh mi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/2aa268db5237f605ce54c8911db70a89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*0nGZUkJv90GTMfkoEcOCXQ.png"/></div></figure><figure class="md kk mp mf mg mh mi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/a6c4540891a003d69989b8f26e8bda4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*FKiVB-X83CnK82p67qqjnA.png"/></div></figure></div><div class="ab cb"><figure class="md kk mq mf mg mh mi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/62a95bc6997e15575064a1a619cf7526.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*NyXv92ZR-taREKfUHlvPSw.png"/></div></figure><figure class="md kk mr mf mg mh mi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/8b9748bb49910d83a233b2dce4bfa062.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*LoK5m67sM99uaQMqyxnL_w.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk ms di mt mm translated">作者提供的图片</p></figure></div><p id="65d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这一功能的增加为我们提供了更多的信息，并提出了我们可能选择进一步研究的问题。例如，从这些图片中我们可以看到，编号为A721033的动物已经进入庇护所超过三十次。<em class="mu">为什么会这样？是什么动物类型？这只动物是流浪狗吗？这种动物以前被领养过吗？</em>这些额外的视觉效果可以提供有价值的见解，并在建模过程之前引导项目的方向。</p><p id="ac5c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该功能的最后一个附加功能是确保生成的视觉效果在美学上令人愉悦。虽然函数本身为我们提供了有意义的信息，但“一刀切”的方法可能会创建视觉上不吸引人的条形图。例如:</p><div class="kg kh ki kj gt ab cb"><figure class="md kk mv mf mg mh mi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/77e0f03558dd36552d39d02fe635e100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*tcA0asbUQDc01nB-bhzPew.png"/></div></figure><figure class="md kk mw mf mg mh mi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/73a20f99d64006292495b8183010aa72.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/format:webp/1*C4dB2TF2j-_HJoeGDzNQYg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk mx di my mm translated">作者提供的图片</p></figure></div><p id="0174" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">也许这是我在吹毛求疵，但我看着这些图表，知道它们可以改进。在我看来，具有两个唯一值的列不应该与具有十二个唯一值的列具有相同的图形大小。下面是最后一个更新的函数，它根据唯一值的数量来配置图形大小:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="63ab" class="lx ly iq lt b gy lz ma l mb mc">def initial_eda(df):<br/>    # List of categorical columns<br/>    cat_cols = df.select_dtypes(['object','category']).columns<br/>    <br/>    for col in cat_cols:<br/>        # Formatting<br/>        column_name = col.title().replace('_', ' ')<br/>        title = 'Distribution of ' + column_name<br/>        unique_values = len(df[col].value_counts())<br/>        <br/>        # If statements for figsize<br/>        if 2&lt;=unique_values&lt;3: <br/>            plt.figure(figsize = (4, 6))<br/>            sns.countplot(x=df[col], <br/>                          data=df, <br/>                          palette="Paired",<br/>                          order = df[col].value_counts().index)<br/>            plt.title(title, fontsize = 18, pad = 12)<br/>            plt.xlabel(column_name, fontsize = 15)<br/>            plt.xticks(rotation=20)<br/>            plt.ylabel("Frequency",fontsize = 15)<br/>            plt.show();<br/>        elif 3&lt;=unique_values&lt;8:<br/>            plt.figure(figsize = (8, 6))<br/>            sns.countplot(x=df[col], <br/>                          data=df, <br/>                          palette="Paired",<br/>                          order = df[col].value_counts().index)<br/>            plt.title(title, fontsize = 18, pad = 12)<br/>            plt.xlabel(column_name, fontsize = 15)<br/>            plt.xticks(rotation=20)<br/>            plt.ylabel("Frequency",fontsize = 15)<br/>            plt.show();<br/>        elif 8&lt;=unique_values&lt;=12:<br/>            plt.figure(figsize = (10, 6))<br/>            sns.countplot(x=df[col], <br/>                          data=df, <br/>                          palette="Paired",<br/>                          order = df[col].value_counts().index)<br/>            plt.title(title, fontsize = 18, pad = 12)<br/>            plt.xlabel(column_name, fontsize = 15)<br/>            plt.xticks(rotation=20)<br/>            plt.ylabel("Frequency",fontsize = 15)<br/>            plt.show();<br/>        else:<br/>            print(f'{column_name} has {len(df[col].value_counts())} unique values. Here are the top 10:')<br/>            print()<br/>            col_count  = df[col].value_counts()<br/>            col_count = col_count[:10,]<br/>            plt.figure(figsize = (12, 6))<br/>            sns.barplot(x = col_count.index, <br/>                        y = col_count.values, <br/>                        palette="Paired")<br/>            plt.title(f'Top 10 {column_name}s', fontsize = 18, pad = 12)<br/>            plt.ylabel('Frequency', fontsize=15)<br/>            plt.xticks(rotation=20)<br/>            plt.xlabel(column_name, fontsize=15)<br/>            plt.show()<br/>            <br/>    return</span></pre><p id="7357" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，这个函数将呈现这些视觉效果:</p><div class="kg kh ki kj gt ab cb"><figure class="md kk mz mf mg mh mi paragraph-image"><img src="../Images/7ec3e1cca9ee116e00c1313e688a00f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:606/format:webp/1*pnc8QRUGnYoVHmhAJ_8CUA.png"/></figure><figure class="md kk na mf mg mh mi paragraph-image"><img src="../Images/442063fad4d9e18ff1803c01e7863f44.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*Mn33sn6Q33GOfoWPwMA3Fw.png"/><p class="kr ks gj gh gi kt ku bd b be z dk nb di nc mm translated">作者提供的图片</p></figure></div><p id="78c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我看来，这些看起来更有吸引力。</p></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><p id="9acd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">探索性数据分析(EDA)可以塑造项目的方向。这是我在数据科学过程中最喜欢的阶段之一，因为在这一阶段可以充分探索一个人的好奇心。虽然数据科学的“魔力”在建模阶段显现出来，但是确定和优化模型以充分发挥其潜力要从正确的数据探索开始。</p><p id="e7ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望我自己和其他人不仅可以利用这个功能节省时间，更重要的是利用节省下来的时间来拓展我们的好奇心。</p><blockquote class="nk nl nm"><p id="3bb3" class="kw kx mu ky b kz la jr lb lc ld ju le nn lg lh li no lk ll lm np lo lp lq lr ij bi translated">重要的是不要停止质疑。好奇心有它存在的理由。当一个人思考永恒、生命和现实的奇妙结构的奥秘时，他不禁感到敬畏。如果一个人每天仅仅试图理解这种神秘的一点点，这就足够了。永远不要失去神圣的好奇心。—阿尔伯特·爱因斯坦，<em class="iq">《生活》杂志</em>(1955年5月2日)</p></blockquote><p id="6dde" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要了解更多关于奥斯汀动物成果项目的信息，你可以在我的个人GitHub <a class="ae kv" href="https://github.com/ksylvia16/Animal-Outcomes-Austin-TX" rel="noopener ugc nofollow" target="_blank">这里</a>查看。</p></div></div>    
</body>
</html>