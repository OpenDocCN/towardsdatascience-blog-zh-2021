<html>
<head>
<title>Observe The Friend Paradox in Facebook Data Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python观察脸书数据中的朋友悖论</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/observe-the-friend-paradox-in-facebook-data-using-python-314c23fd49e4?source=collection_archive---------13-----------------------#2021-08-28">https://towardsdatascience.com/observe-the-friend-paradox-in-facebook-data-using-python-314c23fd49e4?source=collection_archive---------13-----------------------#2021-08-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="de5c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">平均来说，你的朋友比你的朋友多吗？</h2></div><h1 id="46ad" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">动机</h1><p id="b1b0" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">平均来说，你的朋友比你的朋友多吗？如果你是一个普通人，很有可能你的T4朋友比你的朋友少。</p><p id="cc48" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">这就是所谓的友谊悖论。这种现象表明，平均来说，大多数人的朋友比他们的朋友少。</p><p id="50f9" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">在这篇文章中，我将展示为什么这样一个悖论存在，以及我们是否能在脸书数据中找到这个悖论。</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mb"><img src="../Images/48ceb320375050e5a9653f612afdcf9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aTaNnOvrhKPnBr3MIpgEGg.gif"/></div></div><p class="mn mo gj gh gi mp mq bd b be z dk translated">GIF by Author —在这里与图形<a class="ae mr" href="https://khuyentran1401.github.io/pages/all_people_with_edges.html" rel="noopener ugc nofollow" target="_blank">互动。</a></p></figure><h1 id="0bf7" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">最小示例</h1><p id="3187" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">为了理解朋友悖论为什么存在，让我们从一个最小的例子开始。我们将创建一个人际网络。两个人如果列在同一个Python元组里就是朋友。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ms mt l"/></div></figure><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mu mt l"/></div></figure><p id="450a" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">现在我们将使用Pyvis来可视化网络。</p><pre class="mc md me mf gt mv mw mx my aw mz bi"><span id="547d" class="na kj it mw b gy nb nc l nd ne">pip install pyvis</span></pre><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ms mt l"/></div></figure><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mu mt l"/></div></figure><p id="412d" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">如果你四处移动节点，你可以看到本是朋友圈的中心。</p><p id="8800" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我们感兴趣的是发现这个网络中有多少人的朋友比他们的朋友平均少。我们将创建多个函数来帮助我们回答这个问题。这些功能是:</p><ul class=""><li id="fcc7" class="nf ng it lc b ld lw lg lx lj nh ln ni lr nj lv nk nl nm nn bi translated">获取特定人的朋友:</li></ul><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="6b04" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">例如，劳伦的朋友是:</p><pre class="mc md me mf gt mv mw mx my aw mz bi"><span id="5079" class="na kj it mw b gy nb nc l nd ne">&gt;&gt;&gt; get_friends(friends, "Lauren")<br/>['Khuyen', 'Ben']</span></pre><ul class=""><li id="9d30" class="nf ng it lc b ld lw lg lx lj nh ln ni lr nj lv nk nl nm nn bi translated">获取特定人的朋友数量:</li></ul><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ms mt l"/></div></figure><pre class="mc md me mf gt mv mw mx my aw mz bi"><span id="55db" class="na kj it mw b gy nb nc l nd ne">&gt;&gt;&gt; get_friends(friends, "Lauren")<br/>2</span></pre><ul class=""><li id="1a3e" class="nf ng it lc b ld lw lg lx lj nh ln ni lr nj lv nk nl nm nn bi translated">获取某人朋友的好友数量:</li></ul><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ms mt l"/></div></figure><pre class="mc md me mf gt mv mw mx my aw mz bi"><span id="8030" class="na kj it mw b gy nb nc l nd ne">&gt;&gt;&gt; num_friends_map = get_num_friends_map(friends)<br/>&gt;&gt;&gt; get_num_friends_of_a_person_friends(friends, "Lauren",<br/>...                                     num_friends_map)</span><span id="c0be" class="na kj it mw b gy no nc l nd ne">[3, 5]</span></pre><p id="e62a" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">结果显示Khuyen有3个朋友，Ben有5个朋友。</p><ul class=""><li id="83f8" class="nf ng it lc b ld lw lg lx lj nh ln ni lr nj lv nk nl nm nn bi translated">获取一个人的朋友平均拥有的朋友数量:</li></ul><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ms mt l"/></div></figure><pre class="mc md me mf gt mv mw mx my aw mz bi"><span id="8f07" class="na kj it mw b gy nb nc l nd ne">&gt;&gt;&gt; get_average_friends_of_a_person_friends(friends, "Lauren")<br/>4.0</span></pre><p id="56f5" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">输出显示Lauren的朋友平均有4个朋友，比她拥有的朋友数量多。</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi np"><img src="../Images/d49a30e1e9702d796fbd3c945c3234ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T07PFhZKzfHTxIuabLY4sA.png"/></div></div><p class="mn mo gj gh gi mp mq bd b be z dk translated">作者图片</p></figure><p id="596a" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">如果我们仔细观察上面的图片，我们可以看到本的朋友数量增加了劳伦朋友的平均数量。</p><p id="d4f0" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">由于本有很多朋友，他的很多朋友也会和劳伦有类似的情况。换句话说，他们朋友的朋友数量平均高于他们的朋友数量，因为他们的一两个朋友是有影响力的人。</p><ul class=""><li id="d36d" class="nf ng it lc b ld lw lg lx lj nh ln ni lr nj lv nk nl nm nn bi translated">获取网络中所有人的朋友数量</li></ul><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ms mt l"/></div></figure><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ms mt l"/></div></figure><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mu mt l"/></div></figure><p id="db5e" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">在上表中，</p><ul class=""><li id="edf5" class="nf ng it lc b ld lw lg lx lj nh ln ni lr nj lv nk nl nm nn bi translated">列<code class="fe nq nr ns mw b">num_friends</code>显示一个人有多少朋友。</li><li id="b3b9" class="nf ng it lc b ld nt lg nu lj nv ln nw lr nx lv nk nl nm nn bi translated">列<code class="fe nq nr ns mw b">avg_friends_of_friends</code>显示了一个人的朋友平均拥有的朋友数量。</li><li id="07f1" class="nf ng it lc b ld nt lg nu lj nv ln nw lr nx lv nk nl nm nn bi translated"><code class="fe nq nr ns mw b">friends_have_more_friends</code>一栏表示一个人的朋友是否平均比他/她自己有更多的朋友。</li></ul><p id="7634" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">让我们找出网络中的朋友比他们的朋友平均少的人的百分比。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ms mt l"/></div></figure><pre class="mc md me mf gt mv mw mx my aw mz bi"><span id="57e4" class="na kj it mw b gy nb nc l nd ne">0.8333333333333334</span></pre><p id="b795" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">从上表中我们可以看出，只有本的朋友比他的朋友平均多。是因为他是群体中的影响者。</p><h1 id="75e4" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">分析脸书网络</h1><p id="f30b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><a class="ae mr" href="https://snap.stanford.edu/data/ego-Facebook.html" rel="noopener ugc nofollow" target="_blank">脸书数据</a>由来自脸书的朋友列表组成。脸书的数据是从调查参与者那里收集的，这些数据中的用户已经匿名。</p><p id="578a" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">你可以从<a class="ae mr" href="https://snap.stanford.edu/data/facebook_combined.txt.gz" rel="noopener ugc nofollow" target="_blank">这里</a>下载数据。下载完数据后，解压保存为<code class="fe nq nr ns mw b">facebook_combined.txt</code>。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ms mt l"/></div></figure><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mu mt l"/></div></figure><p id="3604" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我们将使用前面的函数来获取人们在网络中拥有的朋友数量。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mu mt l"/></div></figure><p id="5eb2" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">让我们找出网络中的朋友比他们的朋友平均少的人的百分比。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ms mt l"/></div></figure><pre class="mc md me mf gt mv mw mx my aw mz bi"><span id="542a" class="na kj it mw b gy nb nc l nd ne">0.874721465709334</span></pre><p id="17ad" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">网络中87%的人的朋友比他们的朋友平均少！</p><h2 id="1c94" class="na kj it bd kk ny nz dn ko oa ob dp ks lj oc od ku ln oe of kw lr og oh ky oi bi translated">可视化影响者</h2><p id="bdc2" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">网络中的影响者是哪些节点？让我们用Pyvis将它们可视化。</p><p id="6d15" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">从向网络添加节点开始。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="7c2e" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我们将影响者定义为那些比他们的朋友平均拥有更多朋友的人。我们将用红色标记被定义为影响者的节点。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="0f7c" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">添加边并显示网络图:</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ms mt l"/></div></figure><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mb"><img src="../Images/48ceb320375050e5a9653f612afdcf9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aTaNnOvrhKPnBr3MIpgEGg.gif"/></div></div><p class="mn mo gj gh gi mp mq bd b be z dk translated">GIF by Author —在这里与图形<a class="ae mr" href="https://khuyentran1401.github.io/pages/all_people_with_edges.html" rel="noopener ugc nofollow" target="_blank">互动。</a></p></figure><p id="edc7" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">正如我们所看到的，红色节点(比他们的朋友平均拥有更多朋友的人)往往位于图表的中心。如果我们移动一个红色节点，许多蓝色节点也会跟着移动。这表明这些红色节点是网络中一个或两个子群的影响者。</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi oj"><img src="../Images/f4b222849a4d400339d3acd1deff4056.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zWUPcMqSngJ7n1HLLgb1aA.gif"/></div></div><p class="mn mo gj gh gi mp mq bd b be z dk translated">GIF by Author —在这里与图表<a class="ae mr" href="https://khuyentran1401.github.io/pages/all_people_with_edges.html" rel="noopener ugc nofollow" target="_blank">互动</a>。</p></figure><h1 id="aafc" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated"><strong class="ak">结论</strong></h1><p id="8392" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">恭喜你！您刚刚学习了什么是朋友悖论，以及如何使用Python来观察脸书数据中的这种悖论。我希望这篇文章能给你动力，让你使用可视化和数据科学技术来观察你周围的其他悖论。</p><p id="0f6c" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">在这个回购中，您可以随意使用这篇文章的代码:</p><div class="ok ol gp gr om on"><a href="https://github.com/khuyentran1401/Data-science/blob/master/visualization/friend_paradox/facebook_network.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">数据科学/Facebook _ network . ipynb at master khuyentran 1401/数据科学</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">收集有用的数据科学主题以及代码和文章-Data-science/Facebook _ network . ipynb at master…</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">github.com</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb ml on"/></div></div></a></div></div><div class="ab cl pc pd hx pe" role="separator"><span class="pf bw bk pg ph pi"/><span class="pf bw bk pg ph pi"/><span class="pf bw bk pg ph"/></div><div class="im in io ip iq"><p id="b152" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的算法和数据科学工具。你可以在LinkedIn和Twitter上与我联系。</p><p id="6426" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">如果你想查看我写的所有文章的代码，请点击这里。在Medium上关注我，了解我的最新数据科学文章，例如:</p><div class="ok ol gp gr om on"><a rel="noopener follow" target="_blank" href="/pyvis-visualize-interactive-network-graphs-in-python-77e059791f01"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">Pyvis:用Python可视化交互式网络图</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">只需要几行代码</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">towardsdatascience.com</p></div></div><div class="ow l"><div class="pj l oy oz pa ow pb ml on"/></div></div></a></div><div class="ok ol gp gr om on"><a rel="noopener follow" target="_blank" href="/build-and-analyze-knowledge-graphs-with-diffbot-2af83065ade0"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">用Diffbot构建和分析知识图</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">如何用知识图谱回答疑难问题</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">towardsdatascience.com</p></div></div><div class="ow l"><div class="pk l oy oz pa ow pb ml on"/></div></div></a></div><div class="ok ol gp gr om on"><a rel="noopener follow" target="_blank" href="/i-scraped-more-than-1k-top-machine-learning-github-profiles-and-this-is-what-i-found-1ab4fb0c0474"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">我收集了超过1k的顶级机器学习Github配置文件，这就是我的发现</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">从Github上的顶级机器学习档案中获得见解</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">towardsdatascience.com</p></div></div><div class="ow l"><div class="pl l oy oz pa ow pb ml on"/></div></div></a></div><div class="ok ol gp gr om on"><a rel="noopener follow" target="_blank" href="/how-to-sketch-your-data-science-ideas-with-excalidraw-a993d049f55c"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">如何用Excalidraw勾画您的数据科学想法</h2><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">towardsdatascience.com</p></div></div><div class="ow l"><div class="pm l oy oz pa ow pb ml on"/></div></div></a></div><h1 id="49d1" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">参考</h1><pre class="mc md me mf gt mv mw mx my aw mz bi"><span id="d54a" class="na kj it mw b gy nb nc l nd ne">@misc{snapnets,<br/>  author       = {Jure Leskovec and Andrej Krevl},<br/>  title        = {{SNAP Datasets}: {Stanford} Large Network Dataset Collection},<br/>  howpublished = {\url{http://snap.stanford.edu/data}},<br/>  month        = jun,<br/>  year         = 2014<br/>}</span></pre></div></div>    
</body>
</html>