<html>
<head>
<title>Efficient Frontier in Python — Detailed Tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的有效前沿—详细教程</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/efficient-frontier-in-python-detailed-tutorial-84a304f03e79?source=collection_archive---------3-----------------------#2021-07-18">https://towardsdatascience.com/efficient-frontier-in-python-detailed-tutorial-84a304f03e79?source=collection_archive---------3-----------------------#2021-07-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0ac3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">不用包在Python中实现现代投资组合理论</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2e96046c20549b37115cbcaa356e4ff6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jHDVVPzOkFZHy8p3HDhzIg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">包含在本文中的<a class="ae ky" href="https://nbviewer.jupyter.org/github/rian-dolphin/Efficient-Frontier-Python/blob/main/Markowitz.ipynb" rel="noopener ugc nofollow" target="_blank">代码</a>的输出</p></figure><h2 id="3a97" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">介绍</h2><p id="6df3" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">Harry Markowitz在他1952年题为<a class="ae ky" href="https://www.math.ust.hk/~maykwok/courses/ma362/07F/markowitz_JF.pdf" rel="noopener ugc nofollow" target="_blank"> <em class="mo">投资组合选择</em> </a>的论文中介绍了现代投资组合理论。他首先概述了投资组合选择是一个两步过程；首先，投资者必须考虑可用资产的未来表现(就风险和回报而言)，随后，可以决定如何构建投资组合(即给每项资产分配多少资金)。</p><p id="d59f" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">Markowitz专注于投资组合构建方面，将预测未来表现的更具投机性的任务留给了读者。事实上，在整篇论文中，收益率都被假设为服从简单的高斯(正态)分布。这一假设是整个现代投资组合理论的基础，但也是许多批评的原因，因为股票价格回报已被证明不符合正态分布。</p><p id="2e5f" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">然而，让我们把批评放在一边，写一些Python代码来绘制马科维茨子弹，并更好地理解为马科维茨赢得诺贝尔奖的数学理论。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="bbcd" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">数据</h2><p id="dc95" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">我们的数据由六只股票的每日收益组成，如下所示。回报范围从2000年初到2018年末。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/9069707b0686c1dc843fe090d4396a81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KodkSHicpsV319xOJGNWLA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">返回数据</p></figure><p id="1f7c" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">我们可以使用两行代码从这些数据中立即得到<em class="mo">预期</em>年化回报、方差和协方差矩阵。我们注意到，通过像这样使用过去的数据，我们假设未来将遵循过去的趋势。在金融市场上，这是一个极具争议的假设，但就目前而言，这是可行的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">获得年度回报和协方差矩阵</p></figure></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><p id="c8f6" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">我还制作了一个YouTube教程，使用了与本文相同的代码，如果视频是你首选的学习媒介的话！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nd l"/></div></figure></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="7f7e" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">获得投资组合——简单的版本</h2><p id="9f15" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">除了numpy之外，不需要使用任何包，我们可以使用下面的代码快速轻松地创建一个均值-方差图。均值-方差图让我们看到每个投资组合的风险和回报之间的权衡。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创造</p></figure><p id="b7db" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">关于这段代码，需要注意一些事情:</p><ul class=""><li id="3b64" class="nf ng it lx b ly mp mb mq li nh lm ni lq nj mn nk nl nm nn bi translated">我们使用以下公式计算预期收益</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/fec43cfe9ce5bf0af042963fe140f830.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JLgLepSSVEaFz8xYgTKb2A@2x.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">更多信息请见<a class="ae ky" href="https://en.wikipedia.org/wiki/Modern_portfolio_theory" rel="noopener ugc nofollow" target="_blank">此处</a></p></figure><ul class=""><li id="abd3" class="nf ng it lx b ly mp mb mq li nh lm ni lq nj mn nk nl nm nn bi translated">下面的投资组合方差公式(包括协方差和个体方差)</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/b648a8996967ebca787230c63e88d036.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hxOexYvIVTejBEm4HZsSwg@2x.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">更多信息请参见<a class="ae ky" href="https://en.wikipedia.org/wiki/Modern_portfolio_theory" rel="noopener ugc nofollow" target="_blank">此处</a></p></figure><ul class=""><li id="0767" class="nf ng it lx b ly mp mb mq li nh lm ni lq nj mn nk nl nm nn bi translated">您可以调整每个投资组合中要考虑的资产数量。</li></ul><p id="bacb" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">使用我们生成的均值-方差对列表，我们现在可以绘制这些投资组合🎉</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/f411e6b85fc4628467832a1811b4dd4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j_tt69T3jsUAHyETemh4Xw.png"/></div></div></figure><p id="797a" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">在这个图中，每个点代表一个投资组合。这里需要注意的是，这里显示的大多数投资组合都在<em class="mo">有效边界</em>上<strong class="lx iu">而不是</strong>。我们将在这篇文章的下一部分解决这个问题。</p><p id="8317" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">我在这里使用图形库Plotly如果你还没有尝试过，我强烈建议给它一个机会！在Jupyter Notebook中剧情是完全交互的，对于数据探索有很大的帮助。此处见<a class="ae ky" href="https://nbviewer.jupyter.org/github/rian-dolphin/Efficient-Frontier-Python/blob/main/Markowitz.ipynb" rel="noopener ugc nofollow" target="_blank">剧情互动版。</a></p><h2 id="38c3" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">更复杂的版本</h2><p id="e23c" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">以前我们随机抽样投资组合权重；让我们努力提高效率<em class="mo">(一语双关)</em>。我们可以引入<em class="mo">支配</em>的概念，这样我们就不会不必要地抽样“坏”投资组合。</p><p id="cbe8" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">作为一个(有点)理性的投资者，如果有两个回报相等的投资组合，我们会选择风险较低的一个，而给定两个风险相等的投资组合，我们会选择回报较高的一个。什么事？🤞就上面的情节而言，这意味着什么？左上角是最好的位置，任何在左上角有另一个投资组合的投资组合都是受<em class="mo">支配的</em>，任何理性的投资者都不会选择它。</p><p id="d4ab" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">因此，让我们确保我们的代码不包括任何由我们已经取样的投资组合支配的投资组合。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="1075" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">在这个版本中，我们还存储了每个投资组合的资产名称和权重。使用Plotly的交互功能，我们可以将鼠标悬停在图上的每个点上，它会告诉我们每个点的资产和权重。您可以在下面的截图中静态地看到这一点，但请单击此处的<a class="ae ky" href="https://nbviewer.jupyter.org/github/rian-dolphin/Efficient-Frontier-Python/blob/main/Markowitz.ipynb" rel="noopener ugc nofollow" target="_blank">查看互动情节</a>！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/cf5b04df1ade94c323e4b3338dcc294e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SMpQuFC37A86iQphZS4u6g.png"/></div></div></figure><p id="210f" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">使用这种抽样技术，我们可以很快地沿着有效边界对投资组合进行抽样。一些早期的投资组合样本在有效边界以下清晰可见；然而，这可以很容易地通过在某次迭代后增加投资组合来补救(类似于MCMC中的“磨合期”的想法)。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><div class="kj kk kl km gt ns"><a href="https://medium.com/@riandolphin/membership" rel="noopener follow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd iu gy z fp nx fr fs ny fu fw is bi translated">通过我的推荐链接加入灵媒-海豚</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">medium.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og ks ns"/></div></div></a></div><p id="0537" class="pw-post-body-paragraph lv lw it lx b ly mp ju ma mb mq jx md li mr mf mg lm ms mi mj lq mt ml mm mn im bi translated">对于那些走到这一步的人，感谢你的阅读！请随时在下面的评论中提出任何<em class="mo">问题。Jupyter笔记本形式的<strong class="lx iu">全部代码</strong>可以在这里查看<a class="ae ky" href="https://nbviewer.jupyter.org/github/rian-dolphin/Efficient-Frontier-Python/blob/main/Markowitz.ipynb" rel="noopener ugc nofollow" target="_blank">。也可以从我的</a><a class="ae ky" href="https://github.com/rian-dolphin/Efficient-Frontier-Python" rel="noopener ugc nofollow" target="_blank"> Github </a>下载使用的数据和笔记本。</em></p></div></div>    
</body>
</html>