<html>
<head>
<title>Causal Inference — To Control or not to Control</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">因果推理——控制还是不控制</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/causal-inference-to-control-or-not-to-control-417e2721e22e?source=collection_archive---------23-----------------------#2021-04-05">https://towardsdatascience.com/causal-inference-to-control-or-not-to-control-417e2721e22e?source=collection_archive---------23-----------------------#2021-04-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ddb3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在因果估计和统计估计之间建立联系</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e5acfc0714d284a07fc7ef0e0cd3ea33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KtEHGiwdMoDZZNXsYKaKoA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://github.com/cryptexis/causal_inference/blob/main/collider_fork/collider_fork.ipynb" rel="noopener ugc nofollow" target="_blank">https://github . com/crypt exis/causal _ inference/blob/main/collider _ fork/collider _ fork . ipynb</a></p></figure><p id="4532" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我将避免重复其他教程和书籍中的大部分内容，例如什么是碰撞器或分叉。当讨论相关话题时，我会提供有用的链接。否则，我假设读者要么熟悉这个主题，要么有足够的动机去了解更多。万一你觉得缺乏知识或背景，这里有一套我推荐参考的资源:[ <a class="ae kv" href="https://www.bradyneal.com/causal-inference-course" rel="noopener ugc nofollow" target="_blank">因果推断入门课程</a>，<a class="ae kv" href="https://mixtape.scunning.com/" rel="noopener ugc nofollow" target="_blank">因果推断:统计学中的混合磁带</a> <a class="ae kv" href="https://www.amazon.de/-/en/Judea-Pearl/dp/1119186846" rel="noopener ugc nofollow" target="_blank">因果推断:初级读本</a>，<a class="ae kv" href="https://www.amazon.de/-/en/Judea-Pearl/dp/052189560X" rel="noopener ugc nofollow" target="_blank">因果关系</a></p><p id="8a3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为我写作的第一个实验，我选择写关于因果推理的文章，并在这篇<a class="ae kv" href="https://academic.oup.com/ije/article/48/2/640/5248195" rel="noopener ugc nofollow" target="_blank">论文</a>的基础上做一个小练习。这篇论文将在<a class="ae kv" href="https://www.bradyneal.com/causal-inference-course" rel="noopener ugc nofollow" target="_blank">因果推理入门课程</a>的第四周讨论。<br/>这里的不同之处在于我保留了:</p><ol class=""><li id="fd40" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">变量之间的关系完全相同，而在视频中它们被修改了</li><li id="996c" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">治疗变量是连续的，而在视频中，它被修改为二元变量，以显示一种估计平均治疗效果的特殊技术。</li></ol><p id="70ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，我愿意联系一些点，说明为什么某些技术正在估计平均因果效应，并强调如果天真地估计因果效应会发生什么。</p><h2 id="92bf" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">“我妈妈总是说生活就像一盒巧克力。你永远不知道你会得到什么”——阿甘正传</h2><p id="0612" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated"><strong class="ky ir">因果推断……哪里需要？</strong></p><p id="a9a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简称:不可能进行随机对照试验(RCT)时。无法进行RCT的原因有很多，其中一些在参考博文的<a class="ae kv" href="https://emilyriederer.netlify.app/post/causal-design-patterns/" rel="noopener ugc nofollow" target="_blank">“为什么在行业中进行CI”</a>小节中有描述。</p><p id="3879" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了激励我们的练习，让我们想象以下情景:<br/>当你正在工作中放松、摆弄数据或与Tensorboard进行凝视比赛时，你的老板打电话给你，让你调查变量<strong class="ky ir"> <em class="ne"> X </em> </strong>对业务KPI <strong class="ky ir"> <em class="ne"> Y </em> </strong>的影响。</p><p id="9a8e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可能的答案是什么？</p><p id="05c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> A. </strong>为了准确理解效果，我们需要设置一个RCT，对一定比例的用户关闭产品功能<strong class="ky ir"><em class="ne">X</em></strong>N次。</p><p id="4037" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好的，我会尽我所能。</p><p id="df47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你答<strong class="ky ir">答</strong>会导致很多复杂情况:</p><ol class=""><li id="a3b3" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">也许特性<strong class="ky ir"> <em class="ne"> X </em> </strong>是成功的:关闭它会导致大量的机会成本</li><li id="abe5" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">RCT？说起来容易做起来难。建立RCT有其自身的挑战。即使有成熟的A/B测试框架的公司有时也很难把它做好。</li><li id="36af" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">如果你想随机化的东西不可能随机化呢？</li></ol><p id="04db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果:如果你的意图是让你的老板滚蛋，那么，任务完成了！</p><p id="4995" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你的答案是B，那么我希望下面的练习能对一些实践和理论问题有所启发。更具体地说:</p><ul class=""><li id="a64d" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr nf ly lz ma bi translated">如何/为什么线性回归系数可以用来估计一个变量对另一个变量的平均因果影响？</li><li id="f73b" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nf ly lz ma bi translated">如果在估计平均因果效应的过程中控制了错误的变量，会发生什么？</li></ul><h1 id="77a0" class="ng mh iq bd mi nh ni nj ml nk nl nm mo jw nn jx mr jz no ka mu kc np kd mx nq bi translated">关于数据生成过程</h1><p id="9b3d" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">当我们谈论数据生成过程时，我们不得不谈论它的因果结构。为了表示世界的因果结构，当前的文献建议使用两种工具:</p><ol class=""><li id="97c2" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">结构因果模型</li><li id="e235" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">图形模型</li></ol><p id="b4ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">给定随机变量<strong class="ky ir"> <em class="ne"> X </em> </strong>，<strong class="ky ir"> <em class="ne"> Y </em> </strong>和<strong class="ky ir"> <em class="ne"> Z，</em> </strong>单片机可能会得到<strong class="ky ir"> <em class="ne"> Z=f(X，Y) </em> </strong>。这意味着变量<strong class="ky ir"> <em class="ne"> X </em> </strong>和<strong class="ky ir"> <em class="ne"> Y </em> </strong>导致变量<strong class="ky ir"><em class="ne"/></strong>。还有，单片机的部分是描述<strong class="ky ir"> <em class="ne"> f </em> </strong>的确切形式。将变量之间的关系建模为线性函数往往是一种方便的选择(原因是可解释性)。</p><p id="aece" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">示例:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/57e6ae93cc5bd40247903aeb765bb368.png" data-original-src="https://miro.medium.com/v2/resize:fit:376/format:webp/1*FunzbTFrPNuV_OJ77akIrQ.png"/></div></figure><p id="4d9e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与上面的SCM相对应的图形模型如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/6d87cb977c96066509f8a299fb05318f.png" data-original-src="https://miro.medium.com/v2/resize:fit:358/format:webp/0*uqsZfTZsszenOdFu.png"/></div></figure><p id="e935" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了遵循<a class="ae kv" href="https://academic.oup.com/ije/article/48/2/640/5248195" rel="noopener ugc nofollow" target="_blank">论文</a>中提供的数据生成过程，我做了两件事。把用R编写的巫术(无意冒犯R专家，我只是讨厌那种语言)翻译成Python，并引入了一点结构:</p><p id="9a44" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文提出的所有研究中，变量<strong class="ky ir"> <em class="ne"> T </em> </strong>到<strong class="ky ir"> <em class="ne"> Y </em> </strong>的影响始终是研究的主题。因此，当谈论像<em class="ne">分叉</em>或<em class="ne">碰撞器</em>这样的特定结构时，它意味着强调第三个变量如何与<strong class="ky ir"><em class="ne"/></strong>和<strong class="ky ir"> <em class="ne"> Y </em> </strong>相关。</p><p id="fdae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">生成分叉结构</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/911f9696d0f70b567661109759db4a0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hblA9QAJVdcJSAQEH90TEw.png"/></div></div></figure><p id="38b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">具有相应的SCM和图形模型:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/03bedbf135e6caafdac6ad4a149e9305.png" data-original-src="https://miro.medium.com/v2/resize:fit:422/format:webp/1*Tg7XZiDQmH_SzvLJon2A0w.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/dd432d1b5cb7ed7c2e8d0c6e15ed6de5.png" data-original-src="https://miro.medium.com/v2/resize:fit:238/format:webp/0*pNTRF2RpydVD190-.png"/></div></figure><p id="e7c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本<a class="ae kv" href="https://github.com/cryptexis/causal_inference/blob/main/collider_fork/collider_fork.ipynb" rel="noopener ugc nofollow" target="_blank">笔记本</a>中还可以找到另外两个例子。其中研究了<strong class="ky ir"><em class="ne"/></strong>对<strong class="ky ir"><em class="ne"/></strong>的平均因果效应。在其他文献中<strong class="ky ir"> <em class="ne"> ACE </em> </strong>被命名为<strong class="ky ir"> <em class="ne">吃了</em> </strong>(治疗效果一般)。就我个人而言，我喜欢平均因果效应，因为平均治疗效应表明变量t的二值化，例如，受试者是否接受治疗。这些只是语义。可能只是我吧:)</p><p id="b7af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了理解估算<strong class="ky ir"> <em class="ne"> ACE </em> </strong>的程序，让我们退一步来做。</p><h1 id="cb74" class="ng mh iq bd mi nh ni nj ml nk nl nm mo jw nn jx mr jz no ka mu kc np kd mx nq bi translated">一点形式主义:关于回归系数的一个小故事</h1><p id="6a07" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">让我们想象一下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/8f56a1be237f8abb490b943756d678a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*SWOFCVUYjVN_HtvCNcPLXw.png"/></div></figure><p id="a6b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们用线性回归来满足</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/0e1e6cd70baf0f8616215a29eb8fd0e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:398/format:webp/1*Ahc4tev_cTyyT1KZp89Cng.png"/></div></figure><p id="8fe0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其中<strong class="ky ir"> <em class="ne"> X </em> </strong>是其他协变量的向量。让我们根据期望值改写等式:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/56aa70c753fdca70654e2e8398286cc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:548/format:webp/1*CpJUutFi4YySeVQt5qLzNg.png"/></div></figure><p id="c853" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">并且对于<strong class="ky ir"><em class="ne"/></strong>的每一个<em class="ne">值:</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/f83d9b9ac52a3c66d4e20a36e1460567.png" data-original-src="https://miro.medium.com/v2/resize:fit:770/format:webp/1*IPpB1jwtzGH8sAliYljRDA.png"/></div></figure><p id="3165" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们看看当我们用<strong class="ky ir"><em class="ne"/></strong>改变<em class="ne">值</em>时，期望值的差异会发生什么。<strong class="ky ir"><em class="ne">△</em></strong>代表一个单位改变int $ T $的值。不失一般性，我们可以假设<strong class="ky ir"> <em class="ne"> delta = 1 </em> </strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/46bc0cb1c1bb5f35b7106f3a85095660.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*u1zY5GAHtDaw9eD_ksrvbg.png"/></div></figure><p id="6fa9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这不应该让我们感到惊讶:这就是我们总是如何解释线性回归的系数——当相应的协变量改变一个单位时，结果变量的预期变化。然而，这个估计真的带有因果性质吗？让我们再做一步来理解其中的区别。</p><h1 id="5ad4" class="ng mh iq bd mi nh ni nj ml nk nl nm mo jw nn jx mr jz no ka mu kc np kd mx nq bi translated">多一点形式主义</h1><p id="facd" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">如果<strong class="ky ir"> <em class="ne"> T </em> </strong>为二进制，我们将<strong class="ky ir"> <em class="ne"> ACE </em> </strong>定义为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/79c352b996cee8499b3b585a980a8b97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*y7GGTe0-VNyDsZd3CvQYoQ.png"/></div></figure><p id="4f16" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">左右的重要区别<em class="ne"> =？</em> </strong>标志是<strong class="ky ir"> <em class="ne">的存在，做</em></strong>-操作符。<strong class="ky ir"> <em class="ne">做</em></strong>-操作符代表干预。更具体地说，<strong class="ky ir"><em class="ne">E[Y | do(T = 1)】</em></strong>测量当群体中的每个人都采取处理<strong class="ky ir"><em class="ne"/></strong>时<strong class="ky ir"> <em class="ne"> Y </em> </strong>的期望值，而<strong class="ky ir"> <em class="ne"> E[Y|T=1] </em> </strong>以采取处理<strong class="ky ir">的子群体为条件的<strong class="ky ir"> <em class="ne"> Y </em> </strong>的期望值</strong></p><p id="438c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在当<strong class="ky ir"> <em class="ne"> T </em> </strong>是我们感兴趣的连续值时:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/c5f3cd33350137af0c0066e9ef96db12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4BVvolCyBY9AJ1h8sjHobw.png"/></div></div></figure><p id="10c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">和线性回归的情况一样，我们可以假设<strong class="ky ir"> <em class="ne"> delta=1 </em> </strong>。上述等式的左边转化为:</p><p id="c114" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ne">“治疗变量</em> <strong class="ky ir"> <em class="ne"> T </em> </strong> <em class="ne">对结果变量</em> <strong class="ky ir"> <em class="ne"> Y </em> </strong> <em class="ne">的平均因果效应是什么，当我们将变量</em> <strong class="ky ir"> <em class="ne"> T </em> </strong> <em class="ne">改变一个单位时”</em></p><p id="16bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里一个重要的问题是<em class="ne">“我们怎样才能表达出=？就右侧而言？”</em></p><p id="0a80" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">定义</strong>(后门准则):给定DAG <strong class="ky ir"> <em class="ne"> G </em> </strong>中的一对有序变量<strong class="ky ir"> <em class="ne"> (T，Y) </em> </strong>，如果<strong class="ky ir"><em class="ne">Z<em class="ne">中没有节点，则一组变量<strong class="ky ir"><em class="ne"/></strong>相对于<strong class="ky ir"> <em class="ne"> (T，Y) </em> </strong>满足后门准则</em></em></strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/a1b6663c7aaf8e845d569b32b56d23d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*vgCbtJ7xygfhPOMx4CPLQg.png"/></div></figure><p id="2e04" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(以上定义摘自朱迪亚·珀尔)</p><p id="d49e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这基本上意味着为了进行上述分解，一个<strong class="ky ir">需要控制所有不是<strong class="ky ir"> <em class="ne"> T </em> </strong>的后代的变量</strong>，并且<strong class="ky ir">不应该控制任何一个后代。</strong></p><p id="8de2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好吧，让我们看看这与回归系数的关系，以防我们必须控制一个变量<strong class="ky ir"><em class="ne">【Z】</em></strong>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/f4bb1f3810e3a2e162cfa171aa4151e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*8VPIiyGWIoWW3R5qs7b0Uw.png"/></div></figure><p id="2453" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，对于变量之间的线性关系:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi of"><img src="../Images/dad2a08cce7c659a714fc937ca9b7dc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:974/format:webp/1*P8r3_-kuubHaoOHeqe4aMA.png"/></div></figure><p id="1a96" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">类似于线性回归的推导，我们可以从刚刚获得的结果中推导出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/2be5e57844e9e0d70ba20100c8b9b423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*hrYPC91YMcngtiBzVT_4cQ.png"/></div></figure><p id="3ab5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这基本上表明，在我们对右变量进行<strong class="ky ir">控制的情况下，我们可以通过对数据拟合线性回归(当然，只有当SCM由线性关系组成时才成立)并查看治疗变量的系数来估计<strong class="ky ir"><em class="ne"/></strong>。</strong></p><h1 id="081f" class="ng mh iq bd mi nh ni nj ml nk nl nm mo jw nn jx mr jz no ka mu kc np kd mx nq bi translated">进行实验</h1><p id="466d" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated"><a class="ae kv" href="https://academic.oup.com/ije/article/48/2/640/5248195" rel="noopener ugc nofollow" target="_blank">论文</a>模拟了24小时膳食钠摄入量(<strong class="ky ir"><em class="ne"/></strong>)与收缩压(<strong class="ky ir"> <em class="ne"> Y </em> </strong>)关系的现实研究数据。随着年龄的增长,<strong class="ky ir"> <em class="ne"> W </em> </strong>我们的肾脏会发生变化，从而影响我们体内钠的平衡和收缩压。由此可见，<strong class="ky ir"> <em class="ne"> W </em> </strong>是既有<strong class="ky ir"> <em class="ne"> T </em> </strong>又有<strong class="ky ir"> <em class="ne"> Y </em> </strong>的共同原因。另一方面，24小时膳食钠摄入量和高收缩压都会导致尿蛋白排泄<strong class="ky ir"> <em class="ne"> Z </em> </strong>。由此可见，<strong class="ky ir"><em class="ne"/></strong>是由<strong class="ky ir"><em class="ne"/></strong>和<strong class="ky ir"> <em class="ne"> Y </em> </strong>共同造成的。</p><p id="71f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">数据生成过程和生成的图表如下所示:</p><p id="928a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">生成Fork + Collider数据</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/3ddebeb316b3349f82f117b5d07bf95d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cn1Zr1CCV-vD-5Lh7zpUPA.png"/></div></div></figure><p id="19b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">具有相应的SCM和图形模型:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/c4d4745df702b2089f2cfcb5d27ab384.png" data-original-src="https://miro.medium.com/v2/resize:fit:428/format:webp/1*PKn7ub_Ceuc-LC6C3cWAUA.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/c04c87f7d91c3d5a5236168379bd6a0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:312/format:webp/0*_G8zvjy0iGnHUTFe.png"/></div></figure><p id="7054" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们可以看到<strong class="ky ir"> <em class="ne"> T </em> </strong>对<strong class="ky ir"> <em class="ne"> Y </em> </strong>的因果作用是<strong class="ky ir"> <em class="ne"> 1.05 </em> </strong>。</p><p id="4852" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">假设<br/> </strong>我们假设已经为我们提供了图形模型，并且我们知道变量之间的关系是线性的。</p><p id="028c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">“我们如何在真实世界场景中获得这样的图形模型？”- 好问题！</p><p id="8d11" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是方法:</p><ol class=""><li id="43e8" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><a class="ae kv" href="https://arxiv.org/abs/1803.01422" rel="noopener ugc nofollow" target="_blank">研究的一个分支</a>致力于从数据中学习因果DAG。</li><li id="c16a" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">领域知识:给定领域中的数据和足够的专业知识，人们可以提出一个相当不错的图形模型。</li></ol><p id="dde2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">估算</strong> <br/>如上图所示，我们需要的是对一组变量进行线性回归拟合，看变量的系数<strong class="ky ir"> <em class="ne"> T </em> </strong>。</p><p id="2c7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们看看用不同的方法估算<strong class="ky ir"> <em class="ne"> ACE </em> </strong> …</p><p id="d192" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">方法一:</strong>白调整</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/317e1da078710d3eeb1266ce23215fab.png" data-original-src="https://miro.medium.com/v2/resize:fit:312/format:webp/0*3Z-760DV1CCz1HXT.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/4c046aa80afcc09882a95ef3edd27396.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GuPR9L2fr-aCmHKtYiQT8A.png"/></div></div></figure><p id="0bf2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们只是由<strong class="ky ir"><em class="ne"/></strong>高估了<strong class="ky ir"> <em class="ne"> T </em> </strong>的效果。想象一下，如果你向你的老板传达这样一个评估，会对业务产生什么影响。结论:仅仅收集数据和比较组平均值而不做进一步检查是不允许的！。</p><p id="9739" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">方法2: </strong>残酷的数据科学家模式——将所有变量倒入:调整<strong class="ky ir"> <em class="ne"> W </em> </strong>和<strong class="ky ir"> <em class="ne"> Z </em> </strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/e5b4dba4c9e5597224d2c92b8398d56c.png" data-original-src="https://miro.medium.com/v2/resize:fit:312/format:webp/0*3lDrF7r0tbY7jTKr.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/5152e992af9346b6b756459d66dbbc6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ga1VDvwsqAGonLkVrdN8Jw.png"/></div></div></figure><p id="f366" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">何？<strong class="ky ir"> <em class="ne"> -0.9117 </em> </strong>？完全不同的符号。这意味着不仅幅度是错误的，而且结论也有180度的不同。</p><p id="dd7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在一个简化的世界中，对于第一种方法，你可以告诉你的老板<em class="ne">“如果你花1美元，你将产生3.22”</em>在第二种情况下，消息将是<em class="ne">“如果你花1美元，你将损失额外的90美分”。</em></p><p id="bbf6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">方法3: </strong>我们停止抄近路，看看DAG。DAG说，<strong class="ky ir"> <em class="ne"> W </em> </strong>是分叉，<strong class="ky ir"> <em class="ne"> Z </em> </strong>是碰撞器。或者放入后门准则(BC)的话，<strong class="ky ir"> <em class="ne"> Z </em> </strong>不满足BC准则，<strong class="ky ir"> <em class="ne"> W </em> </strong>满足。因此我们只需要控制<strong class="ky ir"> <em class="ne"> W </em> </strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/fd55f798da91a6f57e57066231b87e13.png" data-original-src="https://miro.medium.com/v2/resize:fit:312/format:webp/0*VGErdcAxRXA6oVxF.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/9821b3b2634b944df18e51e7ba985d1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8V1iQK-3yPVy0RVj-R-HNw.png"/></div></div></figure><p id="aeb3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">似乎我们击中了目标。这里令人不安的是置信区间的宽度。它们看起来像是格朗德穿过的。</p><p id="31ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但这是另一个时代的故事了…</p><p id="bf2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你正在读这一行，这意味着你已经通过:)感谢阅读！我将在未来回到因果推理主题，以涵盖更现实和有趣的用例。</p><h1 id="3e7f" class="ng mh iq bd mi nh ni nj ml nk nl nm mo jw nn jx mr jz no ka mu kc np kd mx nq bi translated">参考</h1><p id="a366" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">[1]米格尔·安杰尔·卢克-费尔南德斯，迈克尔·斯科梅克，丹尼尔·雷东多-桑切斯，玛利亚·何塞·桑切斯·佩雷斯，阿南德·瓦伊迪亚，米蕾尤·E·修尼泽，<a class="ae kv" href="https://academic.oup.com/ije/article/48/2/640/5248195" rel="noopener ugc nofollow" target="_blank">教育笔记:非传染性疾病流行病学数据分析中的矛盾对撞机效应:可再现的图解和网络应用</a> (2019)，《国际流行病学杂志》</p></div><div class="ab cl on oo hu op" role="separator"><span class="oq bw bk or os ot"/><span class="oq bw bk or os ot"/><span class="oq bw bk or os"/></div><div class="ij ik il im in"><p id="f417" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ne">最初发布于</em><a class="ae kv" href="https://cryptexis.github.io/projects/colliders-and-forks" rel="noopener ugc nofollow" target="_blank"><em class="ne">https://cryptexis . github . io</em></a><em class="ne">。</em></p></div></div>    
</body>
</html>