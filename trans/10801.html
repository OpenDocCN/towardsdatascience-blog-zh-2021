<html>
<head>
<title>7 Considerations Before Pushing Machine Learning Models to Production</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将机器学习模型推向生产之前的7个考虑事项</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/7-considerations-before-pushing-machine-learning-models-to-production-efab64c4d433?source=collection_archive---------10-----------------------#2021-10-19">https://towardsdatascience.com/7-considerations-before-pushing-machine-learning-models-to-production-efab64c4d433?source=collection_archive---------10-----------------------#2021-10-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b7a1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在投入生产之前进行快速的健全性检查</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0db189ed77c1fab337b15e1780a7b9e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aCpxBhJV_MlU9Gf3"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Arie Wubben 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="f98d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一家重视可扩展性的公司的一部分，作为一名数据科学家，我每天都看到将基于人工智能的解决方案投入生产所带来的挑战。</p><p id="903c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些挑战是众多的，涵盖了许多方面:建模和系统设计、数据工程、资源管理、SLA等。</p><p id="fd65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不会假装精通任何一个领域。然而，我知道实现一些软件工程原则和使用正确的工具对我的工作有很大的帮助，使我的工作可重复并为生产做好准备。</p><blockquote class="lv lw lx"><p id="03f4" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated"><strong class="lb iu"> <em class="it">在这篇文章中，我将与你分享我在生产我的模型之前的7个考虑因素。</em> </strong></p></blockquote><p id="e89a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们谈谈这个💬</p><h1 id="7645" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak"> 1 —处理随机性</strong></h1><blockquote class="lv lw lx"><p id="c4c2" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">确定性代码就不那么令人担心了</p></blockquote><p id="0b0a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">机器学习模型不是确定性的:如果你使用相同的数据和相同的超参数训练一个神经网络两次，你不会得到相同的模型。这两个模型对相同测试数据的输出可能看起来非常相似，但它们并不完全相同。</p><p id="c6e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种差异是由多种原因造成的。一个非常常见的问题与模型最初的训练方式有关。事实上，优化者，或者通俗地说，成本函数最小化(即模型的训练，基本上)背后的算法在更新权重值之前计算梯度时引入了随机性:这种随机性来自于对训练集的采样。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/3fea2e06f1013a5b95202d1f500cfeee.png" data-original-src="https://miro.medium.com/v2/resize:fit:792/format:webp/1*MExFfQFgi-bGzF2uxTsoyw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SGD —随机梯度下降(用户修改的图像)</p></figure><p id="5cc7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">🔴尽管随机性是神经网络和许多其他机器学习模型的固有部分，但在某些情况下，尤其是在可重复性很重要的情况下，这是一种不可取的品质。</p><h2 id="ee9a" class="mv md it bd me mw mx dn mi my mz dp mm li na nb mo lm nc nd mq lq ne nf ms ng bi translated">解决方案:设置随机种子🌱</h2><p id="052b" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">通过为所有使用随机性的包(NumPy，SciPy，Torch，TensorFlow)设置种子，您可以强制您的代码具有确定性。<br/>例如，如果您正在使用NumPy和Pytorch，您可以这样做:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="b986" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你使用Tensorflow，你可以用另一种方法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h1 id="3758" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak"> 2 —记录您的模型、指标和工件</strong></h1><blockquote class="lv lw lx"><p id="2399" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">代码不是唯一应该被版本化的资产</p></blockquote><p id="ba25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">跟踪你的机器学习实验是在任何时间点重现它们的关键。</p><p id="b00b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您当然可以用老方法来完成，将您的模型保存在文件夹中，将您的度量保存在JSON或(甚至更糟)Excel文件中，但是这使得很难与人协作，并且随着时间的推移保持一致的数据结构。</p><p id="55b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最近开始使用<a class="ae ky" href="https://mlflow.org/" rel="noopener ugc nofollow" target="_blank"> MLflow </a>来跟踪我的机器学习项目，我非常高兴。</p><p id="6b68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在MLflow术语中，每个项目都可以被认为是一个<strong class="lb iu">实验</strong>，在<strong class="lb iu">中有多个<strong class="lb iu">运行</strong>。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/9404fd97cd48c18c0789765cd7a2ae3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zNwpxYWqff3w3jH2.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片— MLflow术语</p></figure><p id="2dba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每次运行对应一个迭代，您可以记录:</p><ul class=""><li id="85c1" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">模型超参数和附加配置</li><li id="3364" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">模型权重和二进制文件</li><li id="5c21" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">运行产生的其他工件:文本文件、图像、日志文件或任何您想要的东西</li></ul><p id="3321" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">MLflow将这些数据存储在<strong class="lb iu">跟踪服务器</strong>上。这可以是您在个人计算机上启动的本地服务器(在这种情况下，存储系统将是您的文件系统),也可以是您部署在云上的远程服务器。</p><blockquote class="lv lw lx"><p id="4328" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">在云上使用跟踪服务器是非常有意义的，因为团队可以一起工作并将工件推到同一个中心位置。T13】</p></blockquote><p id="a9e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您有兴趣了解更多关于MLflow的信息，请查看我以前关于这个主题的帖子。</p><div class="od oe gp gr of og"><a rel="noopener follow" target="_blank" href="/how-to-use-mlflow-on-aws-to-better-track-machine-learning-experiments-bbcb8acded65"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">如何在AWS上使用MLflow来更好地跟踪你的机器学习实验</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">记录一切以获得更好的再现性</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">towardsdatascience.com</p></div></div><div class="op l"><div class="oq l or os ot op ou ks og"/></div></div></a></div><p id="ef82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">如何看待MLflow的实际应用？</strong>下面是一小段代码，它执行许多模型拟合，并针对超参数的每个组合，将指标和数据记录到MLflow中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="180b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，开销是最小的。代码实际上没有变化。</p><h1 id="ee3a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3-创建管线并对其进行调度</h1><blockquote class="lv lw lx"><p id="ba34" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">你必须把你的python脚本放到某个地方</p></blockquote><p id="6016" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你的代码在你的本地计算机上正确运行是一回事:你只需要按下一个按钮或者输入一个命令并运行它。</p><p id="dede" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，在生产环境中，您的代码被集成到一个<strong class="lb iu">管道中。</strong>必须安排这个管道定期运行，以应对潜在的故障转移，启动虚拟机来运行您的代码并对其进行扩展，向用户显示信息，发出警报或通知等。</p><p id="b291" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你的代码只是整个机器的一小部分🏭。</p><p id="1d5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有一个流行的解决方案来创建管道并编排它们:<a class="ae ky" href="https://airflow.apache.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">气流</strong> </a> <strong class="lb iu">。</strong></p><p id="c525" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">气流以由<strong class="lb iu">任务组成的有向无环图(或<strong class="lb iu">Dag</strong>)的形式接近管道。任务是执行python代码的计算单元。</strong></p><p id="8dda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Airflow为您提供了以任何顺序重新排列任务的语法，只要它们符合DAG(这意味着永远没有循环)。)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/c70eaae6d74b60bd7273b30156ab8707.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iCz4zLNlDjfcTBro.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者修改</p></figure><p id="d775" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它还提供了以编程方式调度任务的灵活性。</p><p id="858c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要了解更多关于气流的知识，我推荐去看看这个人的视频:他们解释得很好。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ow nn l"/></div></figure><h1 id="a1ab" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak"> 4 —外部化配置(如路径)</strong></h1><blockquote class="lv lw lx"><p id="cd61" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">或任何其他敏感信息</p></blockquote><p id="6434" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该避免将路径等变量硬编码到代码中。</p><p id="62fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们都做过一次，它可能看起来像这样:</p><pre class="kj kk kl km gt ox oy oz pa aw pb bi"><span id="ba47" class="mv md it oy b gy pc pd l pe pf"><strong class="oy iu">import pandas as pd</strong></span><span id="e108" class="mv md it oy b gy pg pd l pe pf"><strong class="oy iu">data = pd.read_csv("../../../../data.csv")</strong></span></pre><blockquote class="lv lw lx"><p id="201f" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">但是在我的电脑上可以用！</p></blockquote><p id="83b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种做法的问题是，任何运行您的代码的人都必须将文件放在与您完全相同的位置，否则将面临一个<code class="fe ph pi pj oy b">OS error</code>。这不太实用，而且限制了你作品的可复制性。</p><p id="2ee8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">路径应该被认为是配置参数，因此必须放在外部配置文件中，或者注入到环境变量中，或者从其他系统中读取。通过将逻辑与配置分离，您的代码更加模块化，也更易于维护。</p><p id="c68f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您的代码在生产环境中运行时，路径和配置很少。硬编码:它们是从外部文件系统读取或加载的。</p><p id="f924" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在特定项目中加载环境变量而不污染全局名称空间的一个解决方案是使用<code class="fe ph pi pj oy b"><strong class="lb iu">python-dotenv</strong></code>库<strong class="lb iu"> ( </strong> <code class="fe ph pi pj oy b"><strong class="lb iu">pip install python-dotenv</strong></code> <strong class="lb iu">)。</strong></p><p id="21bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了能够使用这个包，首先必须创建一个<code class="fe ph pi pj oy b">.<strong class="lb iu">env</strong></code>文件，并把它放在项目的根目录下。该文件将包含您希望注入到项目运行时的环境变量。这些环境变量可以包括<strong class="lb iu">路径</strong>、<strong class="lb iu">凭证</strong>、<strong class="lb iu">主机名</strong>等。</p><pre class="kj kk kl km gt ox oy oz pa aw pb bi"><span id="9f30" class="mv md it oy b gy pc pd l pe pf"><strong class="oy iu">API_KEY=my_secret_key<br/>PORT=3030<br/>OUTPUT_PATH=/opt/trained_models/</strong></span></pre><p id="9c45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，在主脚本中添加下面一行:</p><pre class="kj kk kl km gt ox oy oz pa aw pb bi"><span id="6330" class="mv md it oy b gy pc pd l pe pf"><strong class="oy iu">from dotenv import load_dotenv</strong></span></pre><p id="b623" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要使环境变量可访问，请执行以下操作:</p><pre class="kj kk kl km gt ox oy oz pa aw pb bi"><span id="0e1b" class="mv md it oy b gy pc pd l pe pf"><strong class="oy iu">from dotenv import load_dotenv<br/>import os</strong></span><span id="0fc5" class="mv md it oy b gy pg pd l pe pf"><strong class="oy iu">api_key = os.environ["API_KEY"]</strong></span></pre><p id="3c2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想轻松地从代码中外部化环境变量，那么<code class="fe ph pi pj oy b"><strong class="lb iu">python-dotenv</strong></code>是一个流行的选择。要了解更多信息，你可以查看我以前的帖子:</p><div class="od oe gp gr of og"><a rel="noopener follow" target="_blank" href="/stop-hardcoding-sensitive-data-in-your-python-applications-86eb2a96bec3"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">停止在Python应用程序中硬编码敏感数据</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">使用将您的设置和凭据保密。环境文件</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">towardsdatascience.com</p></div></div><div class="op l"><div class="pk l or os ot op ou ks og"/></div></div></a></div><h1 id="b732" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">5 —设置CI-CDs以自动化工作流程</h1><blockquote class="lv lw lx"><p id="ca39" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">git push——等待奇迹</p></blockquote><p id="ff70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在将项目部署到生产环境之前，您通常希望在验证单元测试时，确保它在临时环境中正确地构建和部署。</p><p id="5c47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CI-CD工作流允许您在Git事件(如特定分支上的push或pull请求)触发时自动化此类(以及更多)流程。</p><p id="b331" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我使用带有Github动作的CI-CD管道来自动化:</p><ul class=""><li id="d63c" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">单元测试和代码覆盖率</li><li id="cf49" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">通过运行代码格式化程序(例如<a class="ae ky" href="http://mypy-lang.org/" rel="noopener ugc nofollow" target="_blank"> Black </a>或静态类型检查程序(<a class="ae ky" href="http://mypy-lang.org/" rel="noopener ugc nofollow" target="_blank"> mypy </a>)对代码进行完整性检查</li><li id="4a2b" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">构建Python包并在S3上存储它们的轮子</li><li id="e204" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">自动部署到远程服务器</li></ul><p id="f495" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于最后一点，如果你有兴趣用FastAPI构建一个机器学习API，并用Docker和Github操作部署它，可以看看我以前的帖子。</p><div class="od oe gp gr of og"><a rel="noopener follow" target="_blank" href="/how-to-deploy-a-machine-learning-model-with-fastapi-docker-and-github-actions-13374cbd638a"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">如何用FastAPI、Docker和Github动作部署机器学习模型</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">具有CI/CD的端到端管道</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">towardsdatascience.com</p></div></div><div class="op l"><div class="pl l or os ot op ou ks og"/></div></div></a></div><h1 id="12b0" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">6 —不要相信用户的输入，要事先验证</h1><blockquote class="lv lw lx"><p id="d7dc" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">永远不要相信用户。有时他们根本不知道他们在做什么，当他们知道时，他们可能想弄乱你的代码。所以要做好准备。</p></blockquote><p id="51d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您将代码投入生产时，您可以期待任何事情。字面上。</p><p id="327d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您期望一个整数，但却收到一个字符串，您的代码不应该无声地失败或抛出一个用户无法理解的无法解释的错误信息。</p><p id="410b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您的代码在这种特定情况下失败时，它必须向最终用户表明，他刚刚输入的内容不符合程序的预期。代码可能需要特定的类型、匹配正则表达式的字符串或区间值。如果它接收到不一致的东西，用户必须明确地知道它，<strong class="lb iu">。</strong></p><p id="c40d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是我们所说的<strong class="lb iu">数据验证。</strong></p><p id="4300" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有不同的方法来处理数据验证。为此，我喜欢使用的一个特殊的库是Pydantic:它为您提供了在类的每个属性上添加验证的灵活性。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pm"><img src="../Images/484c1d87da5aa955159b8413e10869be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Gc4hdQJnTyZeF72e.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者制作的图像</p></figure><p id="7f41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要了解更多关于Pydantic以及如何使用它有效地验证用户输入的信息，可以看看我以前发表的关于这个主题的文章。</p><div class="od oe gp gr of og"><a rel="noopener follow" target="_blank" href="/8-reasons-to-start-using-pydantic-to-improve-data-parsing-and-validation-4f437eae7678"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">开始使用Pydantic改进数据解析和验证的8个理由</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">改善您的应用程序需要控制它们的数据质量</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">towardsdatascience.com</p></div></div><div class="op l"><div class="pn l or os ot op ou ks og"/></div></div></a></div><h1 id="b748" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak"> 7 —使用模板引导您的项目</strong></h1><p id="9e14" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">我讨厌重复，我总是努力使任务自动化。我不知道自动化的一个特殊方面是构建项目。</p><p id="d3f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">组织项目可能是一项乏味且重复的任务。当我开始一个新项目，并希望它的结构与我以前的工作一致时，我必须检查旧项目，将它们的结构复制粘贴到新文件夹中，删除不必要的文件，添加新文件，重写配置文件，等等。这不是一个特别困难的任务，但是时间值得花在别的事情上。</p><blockquote class="lv lw lx"><p id="9ae4" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">你可以通过使用Cookiecutter库来自动化这个过程。T13】</p></blockquote><p id="fc4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Cookiecutter允许你创建模板来启动一个项目:如果你的一些项目遵循相同的结构，这是非常实用的。您所要做的就是调用cookiecutter，并将您感兴趣的模板的URL传递给它。Cookiecutter会询问您一些信息，您可以在终端上填写这些信息，一旦完成，您的项目就创建好了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi po"><img src="../Images/fdb8d6fa7d284ac32b49ae110e860761.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*L9m4J190ODer6bf6.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="a847" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想了解更多关于cookiecutter以及如何自动化您的数据科学项目的结构，您可以看看我以前的帖子，在那里我尝试了一些开源的Cookiecutter模板，这些模板实施了行业的最佳实践。</p><div class="od oe gp gr of og"><a rel="noopener follow" target="_blank" href="/automate-the-structure-of-your-data-science-projects-with-cookiecutter-937b244114d8"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">使用Cookiecutter自动化数据科学项目的结构</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">停止手工操作，重新使用项目模板</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">towardsdatascience.com</p></div></div><div class="op l"><div class="pp l or os ot op ou ks og"/></div></div></a></div><h1 id="47a1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">资源</h1><p id="279c" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">将机器学习引入生产不仅仅是关于训练模型和执行分析:它包括各种软件工程实践。这篇文章是对我目前正在实践的原则以及我正在使用的工具的一个小小的概述。</p><p id="7032" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一如既往，这里有一些很好的资源，可以用来学习如何生产你的机器学习模型。</p><ul class=""><li id="235e" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated"><a class="ae ky" href="https://dev.to/azure/10-top-tips-for-reproducible-machine-learning-36g0" rel="noopener ugc nofollow" target="_blank">https://dev . to/azure/10-top-tips-for-reproducible-machine-learning-36g 0</a></li><li id="7116" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">https://neptune.ai/blog/how-to-solve-reproducibility-in-ml<a class="ae ky" href="https://neptune.ai/blog/how-to-solve-reproducibility-in-ml" rel="noopener ugc nofollow" target="_blank"/></li><li id="6f02" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><a class="ae ky" href="https://medium.com/microsoftazure/9-advanced-tips-for-production-machine-learning-6bbdebf49a6f" rel="noopener">https://medium . com/Microsoft azure/9-advanced-tips-for-production-machine-learning-6 bbdebf 49 a 6 f</a></li><li id="59fc" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/6-tips-for-mlops-acceleration-simplification-36539adab29b">https://towards data science . com/6-tips-for-mlops-acceleration-simplification-36539 adab 29 b</a></li><li id="9bb6" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><a class="ae ky" href="https://www.montecarlodata.com/why-production-machine-learning-fails-and-how-to-fix-it/" rel="noopener ugc nofollow" target="_blank">https://www . montecallodata . com/why-production-machine-learning-fails-and-how-to-fix-it/</a></li></ul><h1 id="c34e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">感谢阅读🙏</h1><p id="b913" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">这篇文章概述了我用来改进代码并为生产做准备的原则。如果你有其他的建议，把它们列在列表中，并在评论中告诉我😉</p><p id="af3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天就这些了。直到下一次更多的编程技巧和教程。👋</p></div><div class="ab cl pq pr hx ps" role="separator"><span class="pt bw bk pu pv pw"/><span class="pt bw bk pu pv pw"/><span class="pt bw bk pu pv"/></div><div class="im in io ip iq"><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi px"><img src="../Images/2bc592877bcca31ea87de4a9b6ec93a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZrhlPr56gav8QSwQuNBPaA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@karsten116?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">卡斯滕·怀恩吉尔特</a>在<a class="ae ky" href="https://unsplash.com/@karsten116?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="7f2a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">新到中？您可以每月订阅5美元，并解锁无限的文章— <a class="ae ky" href="https://ahmedbesbes.medium.com/membership" rel="noopener">点击此处。</a></h1></div></div>    
</body>
</html>