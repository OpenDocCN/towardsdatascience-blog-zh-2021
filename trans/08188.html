<html>
<head>
<title>Re-Imagining NFL Cornerback Performance using Pandas &amp; Plotly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用熊猫和Plotly重新想象NFL角卫的表现</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/re-imagining-nfl-cornerback-performance-using-pandas-plotly-21e86fe2c445?source=collection_archive---------32-----------------------#2021-07-27">https://towardsdatascience.com/re-imagining-nfl-cornerback-performance-using-pandas-plotly-21e86fe2c445?source=collection_archive---------32-----------------------#2021-07-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5aaf" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从Kaggle的Data Bowl 2021数据构建我们自己的防御性统计数据故事</h2></div><h1 id="d015" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">理解数据问题:并非所有的捕获都是平等的</h1><p id="8808" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在美式足球中，角卫的工作极其艰难，他们要防止外接手——通常是场上最快最高的球员——接到传球。</p><p id="81bc" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">你可以想象，今天用来衡量角卫表现的统计数据包括<code class="fe mb mc md me b">yards_allowed</code>和<code class="fe mb mc md me b">completions_per_target</code>，它们被广泛用于展示强弱角卫球员之间的差异</p><p id="8cf7" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">但是这些传统的目标DB度量未能捕捉到<strong class="lc iu">游戏背景</strong>的关键元素。以下是这方面的一些具体例子:</p><blockquote class="mf mg mh"><p id="f7a3" class="la lb mi lc b ld lw ju lf lg lx jx li mj ly ll lm mk lz lp lq ml ma lt lu lv im bi translated">第3洞和第2洞的5码完成比第2洞和第22洞的5码完成差得多，即使统计表会将计算为相等。</p><p id="2a3a" class="la lb mi lc b ld lw ju lf lg lx jx li mj ly ll lm mk lz lp lq ml ma lt lu lv im bi translated">此外，将Julio Jones(2018年前10名接球手)保持在30码内只有3次接球，这比将Russell Gage(2018年不是前10名接球手)保持在相同的数字上要令人印象深刻得多。</p></blockquote><p id="b205" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">正是考虑到这个体育分析的缺点，我们将创造一个新的视角来看待我们的CBs: <strong class="lc iu">游戏影响</strong>。</p><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mm"><img src="../Images/71723e79d14b5ad1464bd99b4af5142e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nh0y-NyXwqm-I92a"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">Riley McCullough 在<a class="ae nc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="730a" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">以下是指导我们流程的一般规则:</p><ul class=""><li id="67e2" class="nd ne it lc b ld lw lg lx lj nf ln ng lr nh lv ni nj nk nl bi translated">获得进攻里程碑的码数(第一次进攻，上篮，红区码数)应该受到处罚</li><li id="d61b" class="nd ne it lc b ld nm lg nn lj no ln np lr nq lv ni nj nk nl bi translated">关键的不完整应该得到奖励</li><li id="a65f" class="nd ne it lc b ld nm lg nn lj no ln np lr nq lv ni nj nk nl bi translated">势均力敌的游戏(好的和坏的)比井喷游戏更有价值</li></ul><p id="54bf" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">记住这些规则，让我们生成新的“游戏影响”分数的第一个版本！</p><p id="c33f" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated"><strong class="lc iu"> <em class="mi">注</em> </strong> <em class="mi">:由于这是一个足球分析问题，我假设你对足球术语有基本的了解，所以我可以专注于数据分析过程</em></p></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><h1 id="7e71" class="ki kj it bd kk kl ny kn ko kp nz kr ks jz oa ka ku kc ob kd kw kf oc kg ky kz bi translated"><strong class="ak">如何通过<em class="od">游戏情境</em> </strong>权衡游戏胜负</h1><p id="2f00" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们可以首先从Kaggle的NFL Databowl 2021加载数据:</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="d831" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">这给了我们看起来像这样的原始数据集:</p><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi og"><img src="../Images/301bccab6c8e9ee987fa8ca7b68ffd36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*62YXPxIeep0rme9cJwklHQ.png"/></div></div></figure><p id="c495" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我们的第一个观点是增加对导致进攻里程碑的完整传球的处罚。</p><p id="ce3d" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">熊猫快速评论:</p><blockquote class="mf mg mh"><p id="be9c" class="la lb mi lc b ld lw ju lf lg lx jx li mj ly ll lm mk lz lp lq ml ma lt lu lv im bi translated">我们可以使用<code class="fe mb mc md me b">.loc</code>函数，后跟一个条件语句，有条件地修改单个内联列。</p><p id="c808" class="la lb mi lc b ld lw ju lf lg lx jx li mj ly ll lm mk lz lp lq ml ma lt lu lv im bi translated">例如，如果X.col列值大于5，则<code class="fe mb mc md me b">test_pd.loc[test_pd.Xcol&gt;5,’Ycol’] = 10</code>会将Ycol列值更改为10。</p><p id="aa2c" class="la lb mi lc b ld lw ju lf lg lx jx li mj ly ll lm mk lz lp lq ml ma lt lu lv im bi translated">这是一个非常有用的函数，因为它比<code class="fe mb mc md me b">.apply()</code>或您计划用来迭代DF的任何for循环都要快</p></blockquote><p id="afef" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">为此，我们需要…</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="1bb9" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我们还需要清除无意义的码，在那里通过是完整的，但EPA是阴性的(<code class="fe mb mc md me b">completed_pd.loc[(completed_pd.epa &lt;= 0), ‘epa_yards’] = 0</code>)</p><p id="bd2c" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我们现在已经用熊猫生成了一个新的游戏影响分数！🚀</p><p id="85fa" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">然后，我们可以使用<code class="fe mb mc md me b">Plotly</code>来创建一个交互式数据可视化，显示我们新的游戏影响得分和传统的“增加的码数”指标之间的差异</p><p id="4bc5" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">快速回顾:</p><blockquote class="mf mg mh"><p id="aa5c" class="la lb mi lc b ld lw ju lf lg lx jx li mj ly ll lm mk lz lp lq ml ma lt lu lv im bi translated">改进图表的一个有效方法是添加多个变量。由于Plotly的交互组件，我们可以用X轴值、Y轴值、标记颜色、<strong class="lc iu">和</strong>悬停信息讲述一个引人注目的故事。</p><p id="4830" class="la lb mi lc b ld lw ju lf lg lx jx li mj ly ll lm mk lz lp lq ml ma lt lu lv im bi translated">我们可以通过将跟踪中的<code class="fe mb mc md me b">text= field</code>分配给悬停信息来修改悬停信息，并在跟踪构造函数中包含标志<code class="fe mb mc md me b">hoverinfo=’text’</code></p></blockquote><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="e39b" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">作为一名数据科学家，理解并阐明数据可视化的价值非常重要。通常，数据项目的价值在从数据人员到产品/业务人员的转换中丢失了。</p><p id="a982" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我发现有效的数据交流最好是用清晰的视觉效果，以及适合非技术性叙述的具体数据示例。</p><p id="2712" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">为了进一步帮助我们讲述我们的数据故事，添加一些注释来帮助阅读我们的图表将是明智的。我们可以通过下面的代码片段做到这一点:</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="2fda" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">所有这些为我们提供了以下图表:</p><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi oh"><img src="../Images/2864807bc5908c95114b20e4725a51d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vy77-4O-NNFaHZKIcR7oiQ.png"/></div></div></figure><p id="7d92" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated"><strong class="lc iu">图表分析&amp;数据故事</strong></p><p id="b4c3" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">下面是我对上图的解读。在向非技术运动爱好者解释产品时，它很受欢迎。希望这个例子能帮助你解释数据</p><p id="f9cd" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">上面的图表量化了游戏环境和完成的影响。</p><p id="2249" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">虽然一般随着绝对码数的增加而线性增加，但当比赛导致触地得分或第一次触地得分时，特别是在第三次或第四次触地得分时，<strong class="lc iu">比赛影响</strong>会达到峰值。</p><p id="fb8b" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">在比分接近的比赛中，第三回合的大规模进攻对防守来说是痛苦的，所以《游戏影响》很好地捕捉到了这种效果。相反，对游戏没有影响的大块码被降低到0游戏影响，以确保垃圾时间码数不会惩罚一个DB。</p><p id="e795" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">举例说明这一点:</p><p id="267c" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated"><strong class="lc iu">第一场比赛</strong>(在上面的图表中用红色标记，在50，150坐标附近)是第四场比赛的47码触地传球，比赛还剩不到2分钟。放弃绝对是一场可怕的比赛，因为停止很可能会结束比赛；因此，这场比赛对游戏的影响是重大的。</p><p id="c11e" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated"><strong class="lc iu">第二场比赛</strong>(在上面的图表中以绿色标记，坐标约为55，0)虽然比第一场比赛稍微多了<em class="mi">码</em>，但在时间到期前没有到达端区，这是孤注一掷。这出戏的DB通过阻止TD完成了他的工作，因此游戏的影响被中和了。</p><p id="f203" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">根据游戏环境对游戏进行加权的行为将有助于我们稍后的分析将总体良好的数据库与那些<em class="mi">几乎从未</em>放弃重要游戏的数据库区分开来……并有望揭示一些角落，这些角落的表现实际上比它们的统计数据乍一看要差得多</p><p id="4b7b" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我们可以不完整地重复熊猫的预处理。这次的不同之处在于，我们将计算未完成的奖励，而不是惩罚。</p><p id="de7a" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">对代码的唯一更改是将我们的修饰符添加到EPA，而不是减去它:</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="02bc" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">和生动的视觉效果:</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="9457" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">要为未完成部分生成类似的图表:</p><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi oi"><img src="../Images/338b5a506029b1c535742f820517ef81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zEoAmzMZ-V1CL4CO1ngEPg.png"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">我们的未完成比赛影响得分与码到端区的比较</p></figure><p id="1f28" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我们将Y轴从“增加的码数”切换到“到端区的码数”的原因是因为所有这些比赛增加的码数都是0。距离端区100码的距离为分析我们的数据提供了一个更好的视角</p><p id="b07b" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated"><strong class="lc iu">图表分析&amp;数据故事</strong></p><p id="0873" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">正如一些完成比其他的覆盖更差，一些<em class="mi">未完成</em>比其他的是更好的防守。</p><p id="09b8" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">虽然所有这些比赛都是不完整的，但是在红区中的近距离比赛中出现的不完整被拦截，或者以其他方式影响对手获胜的机会，则被奖励以负的比赛影响分数。</p><p id="3ca6" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">注意有多少第四次向下击球有很大的向下重量——好的DBs确保第四次向下转换不会发生</p><p id="c928" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">上面的截图突出了一个例子:汤姆·布拉迪在比赛还剩7分钟的时候，第4局没有完成。这是一次重要的防守行动，因此应该得到奖励！一个持续这样打球的角后卫应该被认为是精英角后卫，我们的比赛影响力得分反映了这一点。</p></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><h1 id="b16d" class="ki kj it bd kk kl ny kn ko kp nz kr ks jz oa ka ku kc ob kd kw kf oc kg ky kz bi translated">结论和后续步骤</h1><p id="2bca" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">争论一个新的指标是一项有趣的工作，但它不仅需要数据分析技能，还需要强有力的有说服力的论据。通常，模型和度量标准可以提供对行为/性能的一些洞察，但显然没有什么度量标准是万能的。</p><p id="ea2d" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">这就是为什么数据分析在体育运动中发挥着如此重要的作用，以及数据人如何在不够运动的情况下接触球场🤓，仍然可以通过提供衡量场上表现的标准来产生影响。</p><p id="12b8" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">有很多理由说明这个新的比赛影响力分数是当前角卫指标的一个很好的发展…也有很多理由说明它不是。例如，足球是一项团队运动，因此将比赛结果完全归因于一个球员是不公平的。</p><p id="2b6d" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">但是这篇文章希望向您展示(1)如何使用Pandas作为Plotly来构建一个可解释的数据可视化，以及(2)如何围绕可视化来形成一个数据故事，以促进所需的对话。</p><p id="8154" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">即使NFL不采用我的新指标(Goodell打电话给我),我也希望这些指标至少成为谈论球员表现的一部分。</p><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi oj"><img src="../Images/fd1af6e7345aaad10de3ca5d8faaae05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*svXu_aKbehiB3QQq"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">照片由<a class="ae nc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae nc" href="https://unsplash.com/@anspchee?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">铝烟灰</a>拍摄</p></figure><p id="242f" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我希望你学到了一些东西，并喜欢阅读。如果你想看到更多这样的文章，请告诉我！</p></div></div>    
</body>
</html>