<html>
<head>
<title>Defining, Predicting, and Preventing Disengaged Users in FinTech</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">定义、预测和防止金融科技领域的自由用户</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/defining-predicting-and-preventing-disengaged-users-in-fintech-30dcb3bc0460?source=collection_archive---------25-----------------------#2021-06-02">https://towardsdatascience.com/defining-predicting-and-preventing-disengaged-users-in-fintech-30dcb3bc0460?source=collection_archive---------25-----------------------#2021-06-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="011c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><em class="kf">设计和开发机器学习模型和AB测试实验，以减少FinTech中的空闲用户</em></h2></div></div><div class="ab cl kg kh hu ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="ij ik il im in"><p id="35f4" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">FinTech代表了金融业数字化转型的颠覆。像Wise(以前称为Transferwise)、Monzo和其他许多初创公司都是从汇款和转账服务开始的，并发展成为无国界的数字银行。随着三星、沃尔玛和谷歌等知名企业建立了自己的电子钱包服务，金融科技领域的竞争越来越激烈。</p><p id="f8e9" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">为了在竞争中生存，金融科技机构采取了不同的策略。一些公司扩展了服务并采用加密货币，另一些公司以共生关系合作。一个例子是整合Wise和Google Pay，使其用户群能够向海外汇款。就像几乎所有的B2C商业模式一样，一个常见的策略是通过让当前用户满意来保留用户群。</p><p id="73d9" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">这个练习的目的是展示一个实用的机器学习方法来解决这个问题，从它的定义开始到干预。</p><p id="720a" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><a class="ae lj" href="#93c1" rel="noopener ugc nofollow">第一部:</a> <br/> 1。<a class="ae lj" href="#74e9" rel="noopener ugc nofollow">定义啮合</a> <br/> 2。<a class="ae lj" href="#3fb7" rel="noopener ugc nofollow">预测参与度(使用pySpark和Scikit-Learn的数据管道、特征提取和模型训练)</a> <br/> 3 .<a class="ae lj" href="#9218" rel="noopener ugc nofollow">模型评估</a></p><p id="0b3f" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><a class="ae lj" href="#dd5c" rel="noopener ugc nofollow">第二部分</a> : <br/> 4。<a class="ae lj" href="#82e0" rel="noopener ugc nofollow">设计干预(使用ALS的上下文推荐系统)</a> <br/> 5 .<a class="ae lj" href="#12a1" rel="noopener ugc nofollow">设计A/B测试</a>T21 6。<a class="ae lj" href="#12a1" rel="noopener ugc nofollow">评估和解释结果</a></p><h1 id="2e28" class="lk ll iq bd lm ln lo lp lq lr ls lt lu jw lv jx lw jz lx ka ly kc lz kd ma mb bi translated">数据和代码库</h1><p id="56a1" class="pw-post-body-paragraph kn ko iq kp b kq mc jr ks kt md ju kv kw me ky kz la mf lc ld le mg lg lh li ij bi translated">该数据是非规范化表的结构化和合成化数据集，表示金融交易中的基本信息。该数据包含每个客户在19个月时间范围内的详细交易日志(入站、出站、费用等)，包括交易金额、时间戳、状态以及基本人口统计和位置。这项工作的主要目标是展示解决问题的方法和途径，而不是数据本身。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mh"><img src="../Images/9057abcbc19bd4db60c38dffea8bbbfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LIlg5UIK7G41bf1XMOBldQ.png"/></div></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">原始数据:用户历史事务的非规范化表</p></figure><p id="497d" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">数据、笔记本和完整的代码库可在:<a class="ae lj" href="https://github.com/kristiyanto/fintech-user-engagement" rel="noopener ugc nofollow" target="_blank">https://github.com/kristiyanto/fintech-user-engagement</a>获得。</p></div><div class="ab cl kg kh hu ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="ij ik il im in"><h1 id="93c1" class="lk ll iq bd lm ln mx lp lq lr my lt lu jw mz jx lw jz na ka ly kc nb kd ma mb bi translated">第一部分:定义和预测敬业度</h1><h2 id="74e9" class="nc ll iq bd lm nd ne dn lq nf ng dp lu kw nh ni lw la nj nk ly le nl nm ma nn bi translated">定义参与度</h2><p id="92fc" class="pw-post-body-paragraph kn ko iq kp b kq mc jr ks kt md ju kv kw me ky kz la mf lc ld le mg lg lh li ij bi translated">参与可以解释为许多不同的含义。在这种情况下，定义参与度的最常见方法之一是检查用户是否在一定时间内进行了交易。例如，参与用户是指在过去14天内至少使用过一次该服务的用户。</p><p id="7604" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">虽然更直接，但一个对所有的方法可能会错过一个特定的用户群。自然，FinTech用户以不同的方式使用这项服务。有些人会偶尔或每月汇款给国外的家人。其他一些人可能每天用借记卡使用这项服务，或者作为商户接收汇款。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi no"><img src="../Images/cf5a35fbd42ae92340afcad20cf350ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iOt2y2FWGqG0DBaz2k1dog.png"/></div></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">2019年3月脱离的不同模式用户。每日用户比每周用户具有更低阈值</p></figure><p id="e387" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">较好的方法之一是从历史数据中学习用户行为模式。计算一段时间内的总交易量，而不是交易间隔天数，可以提供更好的信号。每个人都有不同的阈值，一旦阈值被突破，用户就被标记为脱离。</p><p id="4782" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在这种情况下，空闲用户是指没有进行任何超过其正常交易时间的交易的用户。例如，每月用户如果距上次交易已超过一个月，则被视为退出用户；而对于周用户，如果他们已经超过一周没有交易了。由于模式会随着时间的推移而改变，这个解决方案的另一个变体是设置截止日期(例如，只考虑最近6个月的数据)。</p><h2 id="7913" class="nc ll iq bd lm nd ne dn lq nf ng dp lu kw nh ni lw la nj nk ly le nl nm ma nn bi translated">机器学习解释</h2><p id="cab9" class="pw-post-body-paragraph kn ko iq kp b kq mc jr ks kt md ju kv kw me ky kz la mf lc ld le mg lg lh li ij bi translated">早期检测对于确保有足够的时间进行干预至关重要。一旦用户退出，通常为时已晚。使用历史数据，我们可以训练一个机器学习模型来进行预测。有各种机器学习解释适用于这个问题，例如:</p><p id="1f42" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">1.时间序列预测或回归:预测一个用户或一组用户在一段时间内的活动数量。生存模型或回归:在个体层面预测下一步行动何时发生<br/> 3。分类:预测用户在个人层面是否会成为辍学用户</p><p id="0bb4" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">然而，它们也有局限性:如果仅仅是为了识别异常值，那么在个体层面进行预测可能是一项艰巨的任务。同样，准确预测下一笔交易可能需要精心设计的机器学习解决方案，如深度学习(RNN/LSTM)。</p><p id="8852" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在这种特殊情况下，解决方案3简单到足以执行和迭代。目标是预测用户下个月是否会被归类为空闲用户。该模型设计为每月运行一次，提供一个月的窗口来进行干预和评估。</p><pre class="mi mj mk ml gt np nq nr ns aw nt bi"><span id="2176" class="nc ll iq nq b gy nu nv l nw nx">y = end_of_month(days_between_transaction &gt; 90_percentile_of_ days_between_transaction)</span><span id="ea27" class="nc ll iq nq b gy ny nv l nw nx">y^ = next_month(y)</span></pre><p id="7766" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><em class="nz">限制</em> <br/>学习用户的行为模式需要足够的信息。少于10个活动的用户被排除在培训和测试之外，可以设计不同的方法来解决这些用户。10是一个任意数字，可以根据业务需求或数据(例如，人口平均值)进行调整。</p><h2 id="3fb7" class="nc ll iq bd lm nd ne dn lq nf ng dp lu kw nh ni lw la nj nk ly le nl nm ma nn bi translated">机器学习管道</h2><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi oa"><img src="../Images/7af1253e23c99f11ede2a1f308533c71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VhHqNLAQzFOJ5IrHCZcuDw.png"/></div></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">用于预测空闲用户的机器学习管道，由Spark和Scikit-Learn管道组成。</p></figure><p id="b07f" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">该解决方案使用两条数据管道:<br/> a) <a class="ae lj" href="https://spark.apache.org/docs/latest/ml-pipeline.html" rel="noopener ugc nofollow" target="_blank"> Spark管道</a>用于数据摄取、清理、特征提取和数据探索。该管道的输入是原始数据文件，输出是结构化特征数据集，可用于各种下游，包括仪表板和模型训练，以及干预和A/B测试(手稿的第二部分)。</p><p id="b39f" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">b) <a class="ae lj" href="https://scikit-learn.org/stable/modules/compose.html" rel="noopener ugc nofollow" target="_blank"> Scikit-Learn </a>管道，用于模型特定的数据任务。输入是特征数据(火花管道的输出)，输出是训练好的模型/预测。该管道输入特征并执行额外的数据预处理、插补、特征选择(单变量和多变量)和模型训练。</p><h2 id="2e7f" class="nc ll iq bd lm nd ne dn lq nf ng dp lu kw nh ni lw la nj nk ly le nl nm ma nn bi translated">特征提取</h2><p id="b659" class="pw-post-body-paragraph kn ko iq kp b kq mc jr ks kt md ju kv kw me ky kz la mf lc ld le mg lg lh li ij bi translated">虽然训练数据足够小，可以放在计算机中，但特征计算使用pyspark来确保管道可以在更大的规模上运行。特性在pyspark定制转换器中组装，并在spark管道中执行。</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="ob oc l"/></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">扩展spark自定义转换器计算特征模块。此处提供完整列表。</p></figure><p id="cf10" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">特征被提取到逻辑桶中(历史活动、时间和新近性、人口统计等。)，可以轻松扩展或用于其他目的，如业务洞察(BI)报告。</p><p id="08ad" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">下面是如何组装特征提取管线的示例。这个管道的输出可以保存为一个工件，以便于部署或版本控制。</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="ob oc l"/></div></figure><h2 id="4c99" class="nc ll iq bd lm nd ne dn lq nf ng dp lu kw nh ni lw la nj nk ly le nl nm ma nn bi translated">预处理</h2><p id="61f5" class="pw-post-body-paragraph kn ko iq kp b kq mc jr ks kt md ju kv kw me ky kz la mf lc ld le mg lg lh li ij bi translated">每个要素的预处理任务由其功能和数据类型决定。分类特征被转换成一个热编码，没有数据插补是必要的。无损数据预处理在pyspark中完成，以提高下游可用性(BI或ML)。这意味着数据以最少的插补或过滤保留了原始数据。</p><p id="4e92" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">无损数据预处理在pyspark中完成，以提高下游可用性(BI或ML)。这意味着数据可以像原始数据一样保留，只需最少的操作，如数据插补或过滤。</p><p id="1cec" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">仅在ML中使用的额外数据处理，如对数转换或标准化，是在scikit-learn管道中完成的(下面将详细介绍)。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi od"><img src="../Images/f39eb46091c272bbf00f6edb66764c02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lhHRzHAUtMhKD6DMuENnMg.png"/></div></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">特征间的相关图</p></figure><p id="bc22" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">这些要素中的相关矩阵提供了诊断信息，以防止可能损害模型的多重共线性。通过浏览此图表，<code class="fe oe of og nq b">user_transcCurrMonth_count</code>似乎与许多其他特征具有中等或强相关性。这些强烈的相关性是由于诸如多少转移或总额最终反映到<code class="fe oe of og nq b">user_transcCurrMonth_count</code>中的特征。一切都说得通。</p><p id="5005" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">相比之下，只有一个变量/特征<code class="fe oe of og nq b">user_isDropOutCurrentMonth</code>与<code class="fe oe of og nq b">is_dropOut_nextMonthwith</code> 0.97的相关性高度相关。这种相关性表明，本月空闲的用户很可能在下个月继续空闲。因此，<code class="fe oe of og nq b">user_isDropoutCurrentMonth</code>从功能列表中删除。这一信息还表明，早期预防至关重要；这个月的用户可能会结转到下个月的用户。</p><h2 id="3380" class="nc ll iq bd lm nd ne dn lq nf ng dp lu kw nh ni lw la nj nk ly le nl nm ma nn bi translated">模型训练和基线</h2><p id="fe12" class="pw-post-body-paragraph kn ko iq kp b kq mc jr ks kt md ju kv kw me ky kz la mf lc ld le mg lg lh li ij bi translated">由于该模型计划每月以批处理模式运行，因此正向链接交叉验证是合适的，模拟了现实世界的场景。考虑到数据的大小、形状和分布，随机森林是一个很好的起点(数据探索是单独进行的，不包括在本文中)。</p><p id="517e" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">虽然pyspark内置了随机森林，但为了方便起见，模型训练使用了scikit-learn。需要时，可以使用内置和定制的转换器将管道轻松编写为pyspark管道。</p><p id="5fb6" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">流水线包括额外的预处理，例如:<br/> -对一些选择的特征执行标准化<br/> -将一些特征转换成对数<br/> -通过移除同质特征进行单变量特征选择<br/> -通过使用随机森林特征选择进行多变量特征选择</p><p id="663b" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">随后，grid-search-cv调整超参数，为流水线的每一步找到最佳配置。</p><p id="ad1d" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">作为基线，分层虚拟模型，基于训练标签分布随机分配预测的策略。</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="ob oc l"/></div></figure><h2 id="9218" class="nc ll iq bd lm nd ne dn lq nf ng dp lu kw nh ni lw la nj nk ly le nl nm ma nn bi translated">模型评估和诊断</h2><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi oh"><img src="../Images/f63bd767d5c8b6001e7d959fd8055b3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wTNnGulnHpUqrh-LPLMnWA.png"/></div></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">跨交叉验证的模型性能与基线的比较。AUC是测试集。</p></figure><p id="a103" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">随机森林对训练数据的AUC为0.9，对测试数据的AUC为0.94。在每一次迭代中，训练和测试的差异始终很低，这表明模型没有过度拟合。随着更多数据的可用，几乎所有指标都有所改善。该模型在所有迭代中也优于基线模型。</p><p id="8786" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir">特征重要性</strong> <br/>在每次训练迭代中提取特征重要性，以了解模型如何做出决策。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi oi"><img src="../Images/6dab8a50a5d0b48a144a23e669019df9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D655pONcxy_qQ7luk1DRKQ.png"/></div></div></figure><p id="8bcf" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">上图显示<code class="fe oe of og nq b">user_atmPrevMonth_count</code>一直被评为用户参与度的最佳预测指标之一，这表明ATM是这项服务的重要组成部分。</p><p id="9ce7" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir">部署策略</strong><br/>py spark和scikit-learn管道都可以轻松地保存为泡菜或工件。存储、版本控制和部署这些工件完全由<a class="ae lj" href="https://www.mlflow.org" rel="noopener ugc nofollow" target="_blank"> MLFlow </a>或其他ML部署框架支持。</p></div><div class="ab cl kg kh hu ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="ij ik il im in"><h1 id="dd5c" class="lk ll iq bd lm ln mx lp lq lr my lt lu jw mz jx lw jz na ka ly kc nb kd ma mb bi translated">第二部分:设计干预和AB测试实验</h1><p id="2650" class="pw-post-body-paragraph kn ko iq kp b kq mc jr ks kt md ju kv kw me ky kz la mf lc ld le mg lg lh li ij bi translated">不可能让每个人都开心。找出用户对服务满意(或不满意)的共同原因是一个巨大的探索空间。但是，我们可以改进服务的某些部分，并鼓励当前用户群充分利用提供的所有服务和产品。首先，我们将使用上一个练习中的一个见解。预测脱离的模型将上个月的ATM使用率列为最关键的因素。</p><p id="8c27" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">进一步的调查显示，只有54%的用户至少使用过一次ATM服务。确保用户了解并充分利用所有的服务是一件轻而易举的事。假设是增加自动取款机的使用会降低辍学率。</p><p id="f81e" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">可能有许多不同的方法来增加ATM的使用率。审查、评估与ATM网络提供商的合作关系；旨在战略性地扩展服务<br/> 2。降低ATM交易手续费<br/> 3。提高对现有ATM服务的认识<br/> 4。为那些没有充分使用服务来过渡的人提供促销或激励</p><p id="8858" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">上述解决方案的任何组合都适用。然而，考虑到复杂的业务合同、成本和其他因素，解决方案1和2成本高昂，而且在投资回报方面存在风险。使用现有平台(应用程序或网络)，解决方案3和4更可行，风险很小或没有风险。</p><p id="5269" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">提高知名度的策略之一是<em class="nz">说服</em>用户这项服务是可用的。这可以通过广告来实现，比如电子邮件活动或应用内通知。</p><h2 id="904a" class="nc ll iq bd lm nd ne dn lq nf ng dp lu kw nh ni lw la nj nk ly le nl nm ma nn bi translated">推荐系统</h2><p id="9209" class="pw-post-body-paragraph kn ko iq kp b kq mc jr ks kt md ju kv kw me ky kz la mf lc ld le mg lg lh li ij bi translated">推荐系统在几乎所有数据驱动的公司中无处不在。推荐系统的主要目标是利用数据产生有效的推荐。有效可以转化为更个性化的建议、说明性的、有用的或这些的任意组合。</p><p id="8b8e" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">作为最活跃的研究领域之一，有许多不同的技术可用；从一行代码到复杂的火箭科学。对于这种特殊情况，该问题可以分为不同的场景:</p><p id="4904" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">- <a class="ae lj" href="https://en.wikipedia.org/wiki/Expert_system" rel="noopener ugc nofollow" target="_blank">基于规则/专家系统</a>:比如推荐(或给予激励)每一个没有使用过ATM服务的人使用该服务。</p><p id="2394" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">- <a class="ae lj" href="https://en.wikipedia.org/wiki/Collaborative_filtering" rel="noopener ugc nofollow" target="_blank">协同过滤</a>:比如经常使用纽约ATM机的用户，平时经常使用坎昆的ATM机。因此，在坎昆向纽约人推广ATM的使用。常见的技术有<a class="ae lj" href="http://dl.acm.org/citation.cfm?id=1608614" rel="noopener ugc nofollow" target="_blank">矩阵分解</a> (ALS，SVD，NMF)及其变体。</p><p id="b7a8" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">- <a class="ae lj" href="https://en.wikipedia.org/wiki/Nearest_neighbor_search" rel="noopener ugc nofollow" target="_blank">邻域/相似度</a>:比如一个用户经常使用纽约的ATM，那么很可能也会使用伦敦的ATM(因为纽约和伦敦<em class="nz">相似</em>)。因此，如果他们在伦敦为这些用户做交易，就给予促销(折扣/激励)。常见的技术包括<a class="ae lj" href="https://en.wikipedia.org/wiki/K-means_clustering" rel="noopener ugc nofollow" target="_blank"> kmeans </a>、<a class="ae lj" href="https://en.wikipedia.org/wiki/Locality-sensitive_hashing" rel="noopener ugc nofollow" target="_blank"> LSH </a>或其他基于相似性的模型、排名或信息检索技术。</p><p id="0aca" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">-深度学习/其他复杂模型:例如，如果用户今天在纽约使用ATM，下一个城市很可能是华盛顿DC。因此，如果他们在华盛顿DC为这些用户做交易，给予促销(折扣/激励)。常见的技术有<a class="ae lj" href="https://medium.com/decathlondevelopers/building-a-rnn-recommendation-engine-with-tensorflow-505644aa9ff3" rel="noopener"> LSTM </a>、<a class="ae lj" href="https://dl.acm.org/doi/10.1145/3292500.3330668" rel="noopener ugc nofollow" target="_blank"> RNN </a>或其变体。</p><p id="b49a" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">混合推荐系统:上述系统的任意组合。</p><p id="b74c" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">构建推荐系统的一个挑战性方面是缩小细微差别和上下文。像这样的问题:如果有以前的数据可供学习，应该做什么(冷启动问题)，什么指标是必要的，以及我们应该如何测量它们；此指标与关键绩效指标(KPI)有何关联？如果它给出一个<em class="nz">不正确的</em>推荐怎么办？—都很难回答，因为答案没有对错之分。解决这些问题是一个独立的领域，值得单独讨论，并且需要对领域和业务模型有很好的理解。</p><p id="361a" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">给定可用的数据，协同过滤(选项2)结合基于规则的推荐器(选项1)。这种配置对于试点研究来说是合理的，执行起来也足够简单。结果可以作为未来模型或改进的基准。</p><h2 id="82e0" class="nc ll iq bd lm nd ne dn lq nf ng dp lu kw nh ni lw la nj nk ly le nl nm ma nn bi translated">上下文推荐系统</h2><p id="72f0" class="pw-post-body-paragraph kn ko iq kp b kq mc jr ks kt md ju kv kw me ky kz la mf lc ld le mg lg lh li ij bi translated">上下文在推荐系统中至关重要。给定一周中的某一天作为背景，我们在周一晚上消费的饮料、电影和物品可能与周五晚上不一样。添加最近、天气、地理位置、偏好或其他信息作为上下文可能会产生更个性化的推荐，唉，设计起来也更复杂。找到哪种语境是实际的需要大量的实验。</p><p id="42b0" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">首先，我们将使用一年中的月份作为上下文。由于数据有限(没有地理数据或商家信息)，我们可以重新构建问题并缩小范围。例如:对于每个用户，排列可能使用ATM服务的前五个城市，并提供这些城市的促销价格。作为上下文，我们将使用一年中的月份。例如，通常在纽约使用ATM的用户更可能在2月份使用佛罗里达州的ATM，而在8月份使用芝加哥的ATM。</p><h2 id="a192" class="nc ll iq bd lm nd ne dn lq nf ng dp lu kw nh ni lw la nj nk ly le nl nm ma nn bi translated">使用ALS设计上下文推荐</h2><p id="52dc" class="pw-post-body-paragraph kn ko iq kp b kq mc jr ks kt md ju kv kw me ky kz la mf lc ld le mg lg lh li ij bi translated">交替最小二乘(ALS)是用于协同过滤的常用技术之一。与其他协同过滤技术一样，ALS将原始矩阵(用户和交互)分解为矩阵U和V，例如两个矩阵相乘产生原始矩阵的近似。ALS与其他ALS的不同之处在于ALS如何学习和逼近U和v。</p><p id="aaaa" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">虽然其他一些算法使用梯度下降或其他方法，但ALS在回归问题中使用类似于普通最小二乘法(OLS)的方法。ALS通常对有噪声的数据表现更好，比如推断排名时(隐式排名)。ALS学习方式的简单解释:</p><ol class=""><li id="ddde" class="oj ok iq kp b kq kr kt ku kw ol la om le on li oo op oq or bi translated">它从伪随机初始化U和V开始。</li><li id="348c" class="oj ok iq kp b kq os kt ot kw ou la ov le ow li oo op oq or bi translated">通过对矩阵V中的每一行执行OLS变换来学习矩阵V，其中每一行作为特征，并且来自原始矩阵的其对应的列向量作为标签。</li><li id="3174" class="oj ok iq kp b kq os kt ot kw ou la ov le ow li oo op oq or bi translated">类似于步骤2；除了我们用矩阵V中的列向量作为特征，用原始矩阵中的相应行作为标签。</li><li id="aed6" class="oj ok iq kp b kq os kt ot kw ou la ov le ow li oo op oq or bi translated">迭代直到收敛或达到最大迭代次数。</li></ol><p id="c439" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">Spark ML提供了ALS，所以我们不必从头开始实现算法。此外，协同过滤会产生大而稀疏的矩阵，spark ML可以轻松扩展。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/85964b1b7e4e6cf6d9cc80dce0a63cb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FioSwc0uOwYuAMcfsyn0Hg.png"/></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">使用ALS的上下文推荐器的特征</p></figure><p id="77f4" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">与其他协同过滤技术类似，ALS将用户和交互作为输入。添加上下文的一种可能方法是简单地将交互分成不同的上下文。对于大范围的上下文，不建议使用这种方法，因为它会进一步增加大小和稀疏性。</p><p id="26f7" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">通过比较原始矩阵和重建矩阵来评估ALS。可以通过测量平均绝对差(MAE)或误差的均方根(RMSE)来计算比较，以惩罚大的误差。这个练习的ALS模型产生RMSE: 2.4，MAE: 1.8。</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="ob oc l"/></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">pyspark管道上使用ALS的上下文推荐器</p></figure><h2 id="12a1" class="nc ll iq bd lm nd ne dn lq nf ng dp lu kw nh ni lw la nj nk ly le nl nm ma nn bi translated">设计A/B测试</h2><p id="b925" class="pw-post-body-paragraph kn ko iq kp b kq mc jr ks kt md ju kv kw me ky kz la mf lc ld le mg lg lh li ij bi translated">在科学研究(通常称为随机对照试验，RCT)和工业中，A/B测试是研究因果关系的黄金标准方法。一般来说，A/B测试包括:<br/> 1。随机分割一群人<br/> 2。在一段时间内对其中一组进行治疗<br/> 3。评估各组之间的结果是否有差异<br/> 4。决定下一步</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi oy"><img src="../Images/94e61c11261ea30515a676c5edbb25e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QT0nNxXTH_7W4vXU9ZwTGA.png"/></div></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">A/B测试设计-包含和群组分裂</p></figure><p id="2e3b" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">对于上面的每一步，都有许多不同的技术和场景需要考虑:</p><h2 id="ece5" class="nc ll iq bd lm nd ne dn lq nf ng dp lu kw nh ni lw la nj nk ly le nl nm ma nn bi translated">步骤1:群组选择</h2><p id="bf5e" class="pw-post-body-paragraph kn ko iq kp b kq mc jr ks kt md ju kv kw me ky kz la mf lc ld le mg lg lh li ij bi translated"><strong class="kp ir">问:谁是合格用户？</strong> <br/>答:在这种背景下，只有防止处于退学边缘的用户才有意义。向所有人返还现金可能会损害收入，而且向不再使用这项服务的用户提供奖励也没有意义。在这种情况下，我们只考虑被预测为退出用户的用户和在过去60天内仍在使用该服务至少一次的用户。</p><p id="b296" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir">问:这项研究需要多少用户？</strong> <br/>答:在进行研究之前，可以使用<a class="ae lj" href="https://en.wikipedia.org/wiki/Power_of_a_test" rel="noopener ugc nofollow" target="_blank">功效分析</a>计算样本数。计算需要:<br/> a)两个群组的度量(例如，退出用户的总数)<br/> b)组B的预期差异百分比，以及错误率<br/>c)α(1型错误/假阳性率，通常为5%或更低)，以及<br/> d)功效(2型错误/假阴性率，理想情况下为80%或更高)。<br/>参数b、c和d可以调整，结果越明确，通常需要的样本量就越大。</p><p id="8956" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">关于功耗分析的更多详细信息可在<a class="ae lj" href="https://emj.bmj.com/content/20/5/453" rel="noopener ugc nofollow" target="_blank">这里</a>获得。</p><p id="ddee" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir">问:如何确保A组和B组具有可比性？</strong> <br/>答:技术之一是进行分层随机抽样。可以基于用户的人口统计、地理或其他数据点，尤其是可疑的混淆因素来决定阶层。<br/>还需要对样本大小、阶层分布和KPIs测量指标进行测试(参数或非参数),以确保两组相似。</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="ob oc l"/></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">出生年份和设备的分层随机抽样</p></figure><p id="5190" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">关于如何设计队列规模和选择的更深入的文章可在<a class="ae lj" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2267325/" rel="noopener ugc nofollow" target="_blank">此处</a>获得。</p><h2 id="b4bf" class="nc ll iq bd lm nd ne dn lq nf ng dp lu kw nh ni lw la nj nk ly le nl nm ma nn bi translated">第二步:实验</h2><p id="689b" class="pw-post-body-paragraph kn ko iq kp b kq mc jr ks kt md ju kv kw me ky kz la mf lc ld le mg lg lh li ij bi translated"><strong class="kp ir">问:不同的团队需要做哪些不同的事情？</strong> <br/>答:对照组(A组)不需要做任何事情，除了记录指标。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi oz"><img src="../Images/0f532c2e066507f66b40d6b8c1c5cc2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z0gpo7eSJavfwAR88cYjbg.png"/></div></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">八月份对治疗组参与者的个性化建议。每个参与者都被分配了个性化的促销城市，他们在该月最有可能使用ATM服务。</p></figure><p id="6b63" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">对于治疗组(B组)，在特定的时间间隔给出宣传消息(电子邮件或推送通知)。推荐系统根据历史数据和一年中的月份为每个人生成个性化的城市列表。用户被给予促销费率，这是研究期间在这些城市进行的ATM交易的免费(以返现的形式)。</p><p id="d21a" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">值得注意的是，这种返现可能会在结果中产生混淆因素，即当用户仅仅因为奖励而渴望使用ATM时。可能需要进行后续研究(返现与不返现)来评估这一因素。一个实际的例子是对这个群体进行A/A测试，以比较推广期之前(有返现)和之后(没有奖励)，看是否有任何显著差异。</p><p id="8694" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir">问:研究需要进行多长时间？答:对此没有灵丹妙药。合理的期限应该足够长，以评估行为的转变。在这种情况下，由于模型和KPI是按月计算的，因此研究可以进行一个季度。</strong></p><h2 id="99ff" class="nc ll iq bd lm nd ne dn lq nf ng dp lu kw nh ni lw la nj nk ly le nl nm ma nn bi translated">步骤3:结果和评估</h2><p id="d3ad" class="pw-post-body-paragraph kn ko iq kp b kq mc jr ks kt md ju kv kw me ky kz la mf lc ld le mg lg lh li ij bi translated"><strong class="kp ir">问:我们如何知道研究是否成功？</strong> <br/>答:需要在研究之前预先定义一个指标。在这种情况下，每个群组的辍学用户数量。步骤A确保在调查之前指标是可比较的。在研究期间，定期记录或计算指标(例如，每天或每周)。在研究结束时，使用统计方法对这些指标进行评估(例如，如果指标呈正态分布，则使用<a class="ae lj" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4667138/" rel="noopener ugc nofollow" target="_blank">配对t检验</a>或<a class="ae lj" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4125590/" rel="noopener ugc nofollow" target="_blank"> Wilcoxon秩和检验</a>，否则使用回归分析来研究每个变量的相互作用)。这些统计分析总结了研究结果。</p><h2 id="a6fb" class="nc ll iq bd lm nd ne dn lq nf ng dp lu kw nh ni lw la nj nk ly le nl nm ma nn bi translated">步骤4:后续行动</h2><p id="69c7" class="pw-post-body-paragraph kn ko iq kp b kq mc jr ks kt md ju kv kw me ky kz la mf lc ld le mg lg lh li ij bi translated">问:如果研究失败了怎么办？<br/> 答:失败的研究——即对照组和治疗组之间没有不同的变化——是正常的，即使每个步骤都完美地执行了。由此产生的数据可以提供更好的线索，提出更好的假设可能提供有价值的指针，例如，是否需要更长的研究周期。</p><p id="0a5c" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir">问:如果研究成功，该怎么办？<br/> </strong>答:从分析中获得的洞察力可以作为促进组织变革的输入。分解成组、地理位置或其他逻辑类别可能揭示有价值的洞察力，这提供了使产品更好的声音证据。还可以进行额外的和后续的研究，以进一步改进产品。</p></div><div class="ab cl kg kh hu ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="ij ik il im in"><p id="5d55" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">数据、笔记本和完整的代码库可在:<a class="ae lj" href="https://github.com/kristiyanto/fintech-user-engagement" rel="noopener ugc nofollow" target="_blank">https://github.com/kristiyanto/fintech-user-engagement</a>获得。</p></div></div>    
</body>
</html>