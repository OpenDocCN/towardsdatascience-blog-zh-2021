<html>
<head>
<title>How To Use Python’s New Match Statement</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python的新匹配语句</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-use-pythons-new-match-statement-d81981f8adc4?source=collection_archive---------16-----------------------#2021-05-30">https://towardsdatascience.com/how-to-use-pythons-new-match-statement-d81981f8adc4?source=collection_archive---------16-----------------------#2021-05-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c104" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">快速浏览Python的新匹配语句以及如何使用它。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/38366ff90bdc0cbfc658661f719580df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B-4kR8H-j9muz-AoEBv-dA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(src =<a class="ae ky" href="https://pixabay.com/images/id-20237/" rel="noopener ugc nofollow" target="_blank">https://pixabay.com/images/id-20237/</a></p></figure><h1 id="e2a7" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="9912" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Python 3.10已经发布了一段时间，并带来了一些新的额外特性。与许多版本一样，语言的许多变化并不太显著，也没有中断。要明确的是，这不是传统意义上的破坏，旧代码将被破坏，但这是说，未来使用该语法的代码不能使用旧版本的Python。</p><p id="0d80" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然而，Python的一个新变化是全新的，意义重大。这种变化就是匹配语句。这个语句肯定是Python早期版本中所缺少的，它确实可以帮助语言的控制流。今天，我想讨论一下这句话的用法，并更详细地介绍一下。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="c232" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">匹配语句是什么？</h1><p id="6dab" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果你是一个C或C++程序员，很可能你使用过或者至少听说过使用match语句，只是它被重命名为switch语句。该语句用于控制代码执行的流程。该语句可以接受一个值，并将其与多个可能条件中的一个完美匹配。这也被称为模式匹配，这是Rust程序员可能熟悉的一个术语。该语句可以像条件语句一样使用，并且基本上遵循与以下语句非常相似的语法:</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="c607" class="nj la it nf b gy nk nl l nm nn"><strong class="nf iu">from</strong> <strong class="nf iu">enum</strong> <strong class="nf iu">import</strong> <strong class="nf iu">Enum</strong><br/><strong class="nf iu">class</strong> <strong class="nf iu">Command</strong>(<strong class="nf iu">Enum</strong>):<br/>    QUIT = 0<br/>    RESET = 1<br/><br/>match command:<br/>    <strong class="nf iu">case</strong> <strong class="nf iu">Command</strong>.QUIT:<br/>        quit()<br/>    <strong class="nf iu">case</strong> <strong class="nf iu">Command</strong>.RESET:<br/>        reset()</span></pre><p id="b292" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们可以匹配任何条件，并快速将控制流移入或移出块。虽然使用简单的条件语句当然可以做到这一点，但match/case方法要漂亮得多，甚至优于使用传统的条件语句。虽然这是一个简单的特性，但是对于Python程序员来说，这是一个非常受欢迎并且非常酷的特性。</p><h1 id="edc9" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">重要注意事项</h1><p id="dd60" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在我们已经使用了match语句，让我们再多谈一点。您可能已经意识到，当我们将match语句与其他具有相似表达式类型的编程语言进行比较时，它们都是系统/低级、命令式编程语言。match语句本身属于一个非常必要的计算领域。这就提出了一个非常有趣的问题，为什么它现在出现在所有语言的Python中？</p><p id="056f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们应该考虑到很多Python程序员也可能写C++或C，这可能是来回切换的一个有效原因，在某些情况下可能会被忽略。但是我想提出的问题是，这是否意味着Python在未来会变得更加必要。当然，我们可以预期Python将保持相当高的声明性和高级别，但是推测Python在未来是否会更适用于较低级别的事物将会很有趣。当然，没有办法知道，但是我希望看到更多类似这样的迭代特性在未来实现，因为我认为它真的可以使语言更加通用。</p><p id="5e16" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">一些人可能会担心的一个问题是命名。Python 3中编写的许多遗留函数都使用match和case作为变量名，那么这两者的增加是否是对代码的重大改变呢？简单的回答是肯定的，你仍然可以使用match和case作为变量名。匹配和大小写已经成为所谓的软关键字。这意味着大多数时候，它们没有特殊的含义，但是当在某些应用程序中使用时，比如a case块，它们就成为Python解释器使用的关键字。</p><p id="9eea" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">关于匹配和大小写需要注意的另一件奇怪的事情是它不能处理下划线。下划线是Python中通配符变量的另一个软关键字，但在这种情况下，我们可以通过case/match语句传递它，但它不会改变匹配的值。</p><p id="506b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">最后一个问题也许是最重要的，这是一个范围问题。Python中的代码块有自己的作用域是很常见的，那么如果我们在匹配块中使用一个变量，那么它是在什么作用域中声明的呢？Python中的Case块没有自己的作用域。这意味着变量将被应用到最近的可用局部作用域。换句话说，我们可以在没有初始化的情况下在这些块中定义变量，并在函数周围使用它们，这可能是您所不希望的，因为在大多数其他情况下不会发生这种情况。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="ba9c" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">结论</h1><p id="cce4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">match语句无疑是Python编程语言中一个很酷的新特性。至于这是否暗示了这种方法可能会带来更多的特性，我真的很期待看到结果。该语句当然是一个受欢迎的补充，尽管它不一定提供那么多新功能。我们可以做的另一个假设是，一旦Python 4准备好做出突破性的改变，这可能会成为Python 4中的一个常规关键字。不管怎样，我认为这是一个有趣的附加功能，我将来会不时地使用它。感谢您的阅读，我希望您对Python的最新特性有所了解！</p></div></div>    
</body>
</html>