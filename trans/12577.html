<html>
<head>
<title>The Secret of Delivering Machine Learning to Production</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将机器学习应用于生产的秘密</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-secret-of-delivering-machine-learning-to-production-1f6681f5e30c?source=collection_archive---------0-----------------------#2021-12-26">https://towardsdatascience.com/the-secret-of-delivering-machine-learning-to-production-1f6681f5e30c?source=collection_archive---------0-----------------------#2021-12-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7fcb" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">绝大多数机器学习(ML)项目都失败了。</h2></div><h2 id="cc9c" class="kf kg iq bd kh ki kj dn kk kl km dp kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">如果你是一名数据科学家，这可能并不奇怪:你已经看到许多项目开始时是一个很好的承诺，后来逐渐消失，或者更糟——影响了生产，然后由于糟糕的性能和客户投诉而倒退。有些人只是将此视为 ML 团队中“生活的一部分”。但是你有没有想过这些失败是否有一个共同点？</h2><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/2f254df7db2f5384f210f66b2579a792.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gHQZ8ob4BIfhUnK1"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">赛义德·卡里米在<a class="ae lr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="4766" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma ko mb mc md ks me mf mg kw mh mi mj mk ij bi translated"><a class="ae lr" href="https://venturebeat.com/2019/07/19/why-do-87-of-data-science-projects-never-make-it-into-production/" rel="noopener ugc nofollow" target="_blank"> 87%的 ML 项目最终没有交付生产</a> (VB)。这篇来自 2019 年的文章几乎在每个 MLOps 初创公司的宣传资料中被引用，这个数字在 ML 话语中已经得到了很好的确立。老实说，我试图追溯这个数字，并找出它是如何被检索到的——但没有找到任何可靠的来源或研究来支持它。但是，如果您还考虑到在 PoC 的早期阶段停止的项目，这个数字似乎相当合理。更令人痛苦的数字是已经向管理层甚至客户承诺的项目的相对数量，在这些项目中已经投入了巨大的努力——这些项目在投产之前(或之后)被终止。在我之前的文章中:“<a class="ae lr" href="https://inbal-budo.medium.com/how-to-run-a-machine-learning-technical-due-diligence-415970f77d5f" rel="noopener">如何对 ML 团队进行尽职调查</a>”，我对成功 ML 团队的要素进行了高度概括。在这里，你可以找到一些关于如何建立高影响力 ML 团队的实用建议。</p><p id="eb14" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma ko mb mc md ks me mf mg kw mh mi mj mk ij bi translated">公司向 ML 团队投资数百万，雇佣顶尖人才并支付相应的薪酬，悬而未决的问题是:“这值得吗？”作为一个 ML 的领导者和爱好者，我知道它是。当 ML 被正确生产时，它提供了其他算法类型所不能提供的价值，并可能成为采用它的公司的一个关键区别。同时，我认为，作为数据科学家，我们应该意识到阻碍我们实现目标的陷阱。正如我经常做的那样，我将陷阱分为三大类:</p><ol class=""><li id="962e" class="ml mm iq lu b lv lw ly lz ko mn ks mo kw mp mk mq mr ms mt bi translated"><strong class="lu ir"> ML 团队心态</strong></li><li id="17da" class="ml mm iq lu b lv mu ly mv ko mw ks mx kw my mk mq mr ms mt bi translated"><strong class="lu ir">公司为 ML 做好准备</strong></li><li id="cb10" class="ml mm iq lu b lv mu ly mv ko mw ks mx kw my mk mq mr ms mt bi translated"><strong class="lu ir"> ML 基础设施&amp;运营</strong></li></ol><p id="7d7b" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma ko mb mc md ks me mf mg kw mh mi mj mk ij bi translated">在这篇博文中，我分享了我对这些陷阱的经验(是的，我都遇到过)，并提供了如何避免它们的实用方法。</p></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><h1 id="4998" class="ng kg iq bd kh nh ni nj kk nk nl nm kn jw nn jx kr jz no ka kv kc np kd kz nq bi translated">陷阱 1——ML 团队思维</h1><p id="1e2b" class="pw-post-body-paragraph ls lt iq lu b lv nr jr lx ly ns ju ma ko nt mc md ks nu mf mg kw nv mi mj mk ij bi translated">众所周知，数据科学家通常被认为与业务脱节。他们坐在象牙塔里，讨论复杂的科学思想，开发没人理解也没人最终使用的东西。这一点也不夸张，我见过很多公司的情况正是如此。ML 团队中的人都是高水平的个人，通常拥有理学硕士或博士学位，但他们的思维倾向于科学而不是影响。</p><p id="27ed" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma ko mb mc md ks me mf mg kw mh mi mj mk ij bi translated">以下是一些可以说明上述情况的例子:</p><ul class=""><li id="cb94" class="ml mm iq lu b lv lw ly lz ko mn ks mo kw mp mk nw mr ms mt bi translated">给定一个需要文本或表格数据分类的业务问题，推动最新和最棒的深度学习模型，而不是首先开发一个简单的基线模型，一直到生产。<br/> <a class="ae lr" href="https://arxiv.org/pdf/2106.03253.pdf" rel="noopener ugc nofollow" target="_blank">英特尔人工智能小组(2021)的这篇</a>伟大论文显示，对于表格数据，XGBoost 等集成模型的性能与深度学习模型相当。<a class="ae lr" href="https://arxiv.org/abs/1702.05531" rel="noopener ugc nofollow" target="_blank">IBM(2017)的这篇</a>漂亮的论文声称，对于文本分类任务，基于 Word2Vec 表示的线性模型的表现类似于深度学习解决方案。<br/>我并不反对深度学习，我只是说，建立一个最初产生相当好结果的基线模型是一个更好的策略，可以更快地交付。</li><li id="ed1a" class="ml mm iq lu b lv mu ly mv ko mw ks mx kw my mk nw mr ms mt bi translated">规划一个为期一年的项目，没有任何中间交付给客户或生产。这种心态非常学院派——“在我完成之前不要打扰我”，但不适合行业的节奏，因为需求可能会随着时间的推移而变化，ML 团队和客户之间应该经常互动，即使在开发阶段也是如此。当然，这取决于项目，但我们应该打破常规，将一个长期项目分解成能够带来生产价值的小部分。我最近遇到的一个例子是一个为期一年的复杂分类模型项目。我们建议添加一个里程碑，在指定的仪表板中显示所选的功能。事实上，它并不像预测本身那样具有最终价值，但是发布特性选择的中间结果仍然向我们的客户传达了价值，并且允许我们更快地实践交付到生产，在我们的组织内部发展信任，并且也获得我们的客户的信任。</li></ul><p id="acf6" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma ko mb mc md ks me mf mg kw mh mi mj mk ij bi translated">当我面试数据科学职位的候选人时，我非常重视了解什么对他们更重要:<strong class="lu ir">影响还是科学</strong>。虽然与熟悉最新模型并对科学充满热情的数据科学家一起工作对我来说很重要，但为了让团队取得成功，他们的首要任务必须是影响优先。</p></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><h1 id="24bf" class="ng kg iq bd kh nh ni nj kk nk nl nm kn jw nn jx kr jz no ka kv kc np kd kz nq bi translated">陷阱 2——公司对 ML 的准备情况</h1><p id="02c4" class="pw-post-body-paragraph ls lt iq lu b lv nr jr lx ly ns ju ma ko nt mc md ks nu mf mg kw nv mi mj mk ij bi translated">这里收集了一些技巧，它们都是 ML 团队之外的，与一般的公司观念有关，但是没有它们，将很难甚至不可能成功地将 ML 交付到生产中。</p><ol class=""><li id="bb6f" class="ml mm iq lu b lv lw ly lz ko mn ks mo kw mp mk mq mr ms mt bi translated">当心<a class="ae lr" href="https://whatis.techtarget.com/definition/moonshot" rel="noopener ugc nofollow" target="_blank"><strong class="lu ir"/></a>——为 ML 团队设定雄心勃勃，甚至是想象中的目标是公司常犯的一个错误。作为 ML 的领导者，我们应该把期望摆正，公司必须承认 ML 团队不可能一下子解决所有可能的问题。尤其重要的是，不要在一开始就承诺大型项目。<br/> <strong class="lu ir">从小做起，传递渐进价值，创造信任。</strong></li><li id="1e65" class="ml mm iq lu b lv mu ly mv ko mw ks mx kw my mk mq mr ms mt bi translated">雇佣一名 ML 产品经理——这应该是你的第一份工作。从我的经验来看，拥有一个一方面面向业务，另一方面理解 ML 开发的流程和复杂性的项目经理是无价的。拥有基于 ML 的产品，发现客户的需求和商业价值，以及设计 ML 项目的本质要求，应该由一个非常了解 ML 硬币两面的人来完成:客户方面和数据科学方面。</li><li id="29a2" class="ml mm iq lu b lv mu ly mv ko mw ks mx kw my mk mq mr ms mt bi translated"><strong class="lu ir">发展值得信赖的客户关系</strong> —在从事 ML 项目时，调整客户对结果的期望并创建一个快速获得客户反馈的流程非常重要。我建议与接受 ML 理念的客户发展关系，让他们成为设计伙伴。设计合作伙伴允许我们在开发阶段使用他们的数据，讨论我们的中期结果，获得他们的反馈，并确保随着项目的发展，我们有一个适合市场的产品，并且我们专注于正确的方向。</li><li id="3215" class="ml mm iq lu b lv mu ly mv ko mw ks mx kw my mk mq mr ms mt bi translated"><strong class="lu ir">团队合作</strong>——在软件开发中，公认的是 scrum 团队应该包含交付一个特性所需的所有角色(例如后端、前端和 QA 自动化)，并快速带来商业价值。不知何故，在许多组织中，ML 团队并不在类似的模型中工作:他们是孤立的，并以瀑布方式工作——只有在模型准备好之后，它才被发送到工程团队，工程团队将它翻译成可伸缩的代码。这个过程是适得其反的，并且与现代软件开发方法相矛盾:ML 团队也应该以小组的形式运作，包含数据科学家和工程师，他们在 ML 组件上端到端地一起工作。这使得在发布到产品之前对真实世界的生产数据进行实验变得更加简单，并且有助于团队的速度。<br/>如果你的模型的发布依赖于另一个团队，你应该考虑到另一个团队的优先级可能会改变，这会给你的交付带来风险。</li><li id="4946" class="ml mm iq lu b lv mu ly mv ko mw ks mx kw my mk mq mr ms mt bi translated"><strong class="lu ir">投资 ML 基础设施</strong> —公司应该意识到，为了拥有可扩展的 ML 系统，我们需要投资开发适当的基础设施。也就是说，我们不仅仅是在特设项目上工作，而且我们有一个统一的系统来开发、部署和监控 ML 模型。这将引导我们进入下一部分，但是让管理层接受这一点很重要。</li></ol></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><h1 id="b6a6" class="ng kg iq bd kh nh ni nj kk nk nl nm kn jw nn jx kr jz no ka kv kc np kd kz nq bi translated">陷阱 3 — ML 基础设施和运营</h1><blockquote class="nx ny nz"><p id="7118" class="ls lt oa lu b lv lw jr lx ly lz ju ma ob mb mc md oc me mf mg od mh mi mj mk ij bi translated">“快速移动并打破东西”</p><p id="a6f3" class="ls lt oa lu b lv lw jr lx ly lz ju ma ob mb mc md oc me mf mg od mh mi mj mk ij bi translated">马克·扎克伯格</p></blockquote><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oe"><img src="../Images/ddb7c18966a39d75f9289593c82ffb31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eu4rfEmmGCC7MnVV"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">照片由<a class="ae lr" href="https://unsplash.com/@chuttersnap?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> CHUTTERSNAP </a>在<a class="ae lr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="507e" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma ko mb mc md ks me mf mg kw mh mi mj mk ij bi translated">软件工程中最重要的原则之一是“<a class="ae lr" href="https://en.wikipedia.org/wiki/Fail-fast" rel="noopener ugc nofollow" target="_blank">快速失效</a>”。为了快速失败，需要一个良好的基础设施来测试、部署、监控和在出现故障时发出警报。在这样一个系统上投入时间、思想和精力是值得的，因为它加速了软件开发。</p><p id="88bf" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma ko mb mc md ks me mf mg kw mh mi mj mk ij bi translated">问题是，ML 组件不同于传统的软件组件。让我们以一个 web 服务为例，它预测汽车图像传感器拍摄的图像中是否有红绿灯。这项服务运行良好，但突然开始返回错误的预测:当交通灯不在那里时预测它们，反之亦然。“怎么回事？”你可能会问。一个可能的原因是，开始下雨了，ML 模型没有在雨中拍摄的图像上进行训练。另一种解释可能是开发人员部署了新的代码来压缩图像文件并节省了数百万的存储成本，但是 ML 模型并没有针对压缩的图像进行训练。可能有其他解释，但是，在任何情况下，ML 都会产生不好的输出，因为它没有在这个群体上训练:“垃圾输入-垃圾输出”。然而，web 服务的响应将是成功的(返回代码:2XX)，因为服务被认为是健康的，即使它返回完全错误的预测。坏消息是，第一个注意到失败的人将是我们的客户，这是，嗯，让我们说这是不愉快的。除非我们找到一种持续监控和测试输入群体的方法。</p><p id="824a" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma ko mb mc md ks me mf mg kw mh mi mj mk ij bi translated">ML 需要一套不同的工具来建立一个“故障快速”系统，而 ML 的可信 CI/CD 管道是一个相对较新的概念。这些工具通常属于“MLOps”(ML 操作)的定义，好消息是这个领域在不断发展和改进。<a class="ae lr" href="https://martinfowler.com/articles/cd4ml.html" rel="noopener ugc nofollow" target="_blank">这里的</a>是一篇很好的文章，总结了 ML 管道需要的东西，可以帮助你规划在你自己的 ML 系统中需要建立哪些能力。</p></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><p id="b302" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma ko mb mc md ks me mf mg kw mh mi mj mk ij bi translated">那么，你会问，把机器学习交付给生产的<strong class="lu ir">秘诀是什么？</strong></p><p id="4b74" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma ko mb mc md ks me mf mg kw mh mi mj mk ij bi translated">在你的 ML 团队中保持一种以影响为导向的心态，让你的公司准备好接受 ML 及其复杂性，投资开发快速失败的基础设施——你就走在了一条美好而顺利的 ML 交付的正确道路上。祝你好运！</p><p id="7d66" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma ko mb mc md ks me mf mg kw mh mi mj mk ij bi translated"><em class="oa">欢迎你联系我，对这篇博文或任何与 ML 相关的事情有任何评论、讨论或问题，我总是很乐意讨论:)</em></p></div></div>    
</body>
</html>