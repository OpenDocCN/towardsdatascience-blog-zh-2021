<html>
<head>
<title>Levels of Logs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">日志级别</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/levels-of-logs-a261a0f291a2?source=collection_archive---------35-----------------------#2021-04-09">https://towardsdatascience.com/levels-of-logs-a261a0f291a2?source=collection_archive---------35-----------------------#2021-04-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5196" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">解释并举例说明日志级别</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d596d0f367c1a27656021b10ffe7d6e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FS3X5KBIJFSeKxwz"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片由<a class="ae kv" href="https://unsplash.com/@yusufevli" rel="noopener ugc nofollow" target="_blank"> Yusud Evil </a>在<a class="ae kv" href="https://unsplash.com" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="f03e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是一篇附录文章，写在文章<a class="ae kv" href="https://medium.com/@naomikriger/log-your-flow-392d0d399127" rel="noopener">记录你的心流</a>之后。<br/>本文的目的是总结和举例说明我们在代码中使用的不同日志级别。</p><p id="c349" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面解释的级别按严重程度升序排列。<br/>当我们读取日志时，我们可以公开所需的严重性级别。暴露一个特定的严重级别——也暴露给我们，读者，更高的级别。<br/>因此，例如，如果我们选择“信息”级别，我们也会看到警告&amp;错误&amp;严重。如果我们选择“关键”级别，这将是我们看到的唯一日志级别日志读取系统。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/5d1d73480d08903ff363a4283cdeed6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*yiuPLXi8UEI5c6JWq36ilA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者捕获</p></figure><p id="d6ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的解释附有例子。所有的例子都是汽车贷款申请系统。<br/>系统检查客户是否有资格申请汽车贷款，如果有资格，系统将计算客户有资格申请的贷款金额。</p><h1 id="e2b5" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">调试</h1><p id="7807" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">用于为开发人员、IT、技术支持等提供诊断信息。<br/>回答“为什么会出现这个问题？”，“为什么会触发这种情况？”</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="2da8" class="mv lu iq mr b gy mw mx l my mz"><strong class="mr ir">logger.debug(f'</strong>Cannot offer the customer {customer_id} car loan — the customer is underage<strong class="mr ir">')</strong></span></pre><h1 id="08a4" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">信息</h1><p id="f85f" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这一级提供了“快乐流”中的信息，关于代码中发生的合法事件。</p><p id="b5c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在一些公司中，这也是在生产中调试时可见的默认级别，因此被认为是生产调试中最“详细”的日志级别。</p><p id="4941" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这一级别，我们将提供我们希望了解的相关变更的信息。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="84fc" class="mv lu iq mr b gy mw mx l my mz"><strong class="mr ir">logger.info(f'</strong>Customer {customer_id} — car loan application is approved. Loan amount is {loan_amount}<strong class="mr ir">')</strong></span></pre><h1 id="abb8" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">警告</h1><p id="c0f6" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">当我们可能在系统中发生错误时，这是相关的。错误可能会再次出现或被独立解决，但系统的关键功能/流程工作正常。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="0244" class="mv lu iq mr b gy mw mx l my mz"><strong class="mr ir">logger.info(f'</strong>Customer {customer_id} — car loan application is approved. Loan amount is {loan_amount}<strong class="mr ir">')</strong></span><span id="baaf" class="mv lu iq mr b gy na mx l my mz"><strong class="mr ir">logger.warning(f'</strong>Customer {customer_id} — approval notification failed. Retrying to notify the customer<strong class="mr ir">')</strong></span></pre><h1 id="5069" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">错误</h1><p id="fb35" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">一种干扰正常操作但不干扰应用程序本身的错误。这些错误将需要开发人员/ IT /客户采取额外的步骤来解决问题，但这些步骤不包括重启应用程序等重大干预。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="d797" class="mv lu iq mr b gy mw mx l my mz"><strong class="mr ir">logger.error(f'</strong>Customer {customer_id} — eligibility for car loan cannot be processed. Bank statements provided by the customer are empty<strong class="mr ir">')</strong></span></pre><h1 id="51e2" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">批评的</h1><p id="ba33" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">一种严重错误，需要关闭/重新启动应用程序，以防止进一步的损坏，如数据丢失或额外的数据丢失。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="6184" class="mv lu iq mr b gy mw mx l my mz"><strong class="mr ir">logger.critical(f'</strong>Connection to DB is lost at {datetime.datetime.now()}<strong class="mr ir">')</strong></span></pre></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h1 id="be92" class="lt lu iq bd lv lw ni ly lz ma nj mc md jw nk jx mf jz nl ka mh kc nm kd mj mk bi translated">例外</h1><p id="93a2" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">当我们浏览日志时，读取异常的堆栈跟踪也是我们调试过程的一部分。</p><p id="7c50" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然“错误”日志级别存在并且在许多情况下使用，但我们需要考虑到，除非另有定义，否则错误日志的使用不会打印我们的错误位置。但是一个异常的堆栈跟踪会。</p><p id="6b22" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这可以通过以下方式完成:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="3c23" class="mv lu iq mr b gy mw mx l my mz"><strong class="mr ir">def dividing_by_zero(a):<br/>    </strong>try:<br/>        a / 0<br/>    except ZeroDivisionError:<br/>        logger.exception<strong class="mr ir">('</strong>my exception message<strong class="mr ir">')</strong></span><span id="40de" class="mv lu iq mr b gy na mx l my mz">&gt;&gt;&gt; <strong class="mr ir">dividing_by_zero(2)</strong></span><span id="77d0" class="mv lu iq mr b gy na mx l my mz"><em class="nn">ERROR:__main__:my exception message<br/>Traceback (most recent call last):<br/>    File "/Users/my_user/my_repo/my_module/my_file.py", line 12, in </em>dividing_by_zero<em class="nn"><br/>    1 / 0<br/>ZeroDivisionError: division by zero</em></span></pre></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h2 id="9989" class="mv lu iq bd lv no np dn lz nq nr dp md lf ns nt mf lj nu nv mh ln nw nx mj ny bi translated">脚注</h2><p id="14b8" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这篇文章是从“Pythonic的观点”写的。当用其他编程语言编写日志时，您可能会意识到一些差异。例如，“严重”可以替换为“致命”，或者可以使用其他日志级别，如“跟踪”。</p><p id="7f07" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">涵盖Python中的日志与其他语言中的日志之间的所有差异超出了本文的范围，但是我将简要解释一下“跟踪”级别:</p><p id="e365" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">“Trace”用于指示代码中的“我们在哪里”,其严重性级别低于“info”。例如，我们在代码中进入了一个重要的“if”或“else”语句，输入了一个特定的函数，等等。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="4530" class="mv lu iq mr b gy mw mx l my mz"><strong class="mr ir">logger.trace(f'</strong>Customer {customer_id} — starting to calculate average bank balance in the past {MONTHS_TO_CHECK} months based on bank statements<strong class="mr ir">')</strong></span></pre></div></div>    
</body>
</html>