<html>
<head>
<title>Yes, You Can Run PyTorch Natively on M1 MacBooks, and Here’s How</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">是的，你可以在M1的MacBooks上运行PyTorch，具体操作如下</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/yes-you-can-run-pytorch-natively-on-m1-macbooks-and-heres-how-35d2eaa07a83?source=collection_archive---------1-----------------------#2021-07-29">https://towardsdatascience.com/yes-you-can-run-pytorch-natively-on-m1-macbooks-and-heres-how-35d2eaa07a83?source=collection_archive---------1-----------------------#2021-07-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b7b4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在M1苹果电脑上安装PyTorch并训练你的第一个神经网络——一个完整的分步指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/53cb1caa492244ed360890f4206db2c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hsIzbaZLW6bsrwhvYkYWzQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@ilepilin?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">伊戈尔·莱皮林</a>在<a class="ae ky" href="https://unsplash.com/s/photos/torch?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="5ef9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">M1 macbook已经不再是新的了。不知何故，安装Python的深度学习库仍然不是一个简单的过程。至少有了TensorFlow。PyTorch不一样。</p><p id="99c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天您将学习如何在您的M1机器上安装和运行PyTorch。你用哪台M1电脑(Air、Pro、Mini或iMac)都没什么区别。</p><p id="ba8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们开始吧。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a557" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">步骤1 —安装和配置Miniforge</h1><p id="2442" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我花了很多时间为数据科学配置M1 Mac电脑。它从来没有一点瑕疵。直到我发现了这个选项。根据网速的不同，完全设置需要5到10分钟。</p><p id="e0c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，你需要安装<a class="ae ky" href="https://brew.sh/" rel="noopener ugc nofollow" target="_blank">自制软件</a>。这是一个用于Mac的软件包管理器，您可以通过从终端执行以下行来安装它:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="1dbb" class="ne md it na b gy nf ng l nh ni">/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"</span></pre><p id="0cfa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请记住——如果你正在安装一台新的M1 Mac，很可能你不会安装自制软件所需的XCode构建工具。终端会通知您这些是否丢失，并询问您是否要安装它们。</p><p id="f9d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦安装了XCode构建工具和Homebrew，您就可以重启终端并安装Miniforge:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="0a17" class="ne md it na b gy nf ng l nh ni">brew install miniforge</span></pre><p id="cb1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是几百MB的下载，所以需要一些时间来完成。完成后，初始化Z外壳(zsh)的conda:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="e5a1" class="ne md it na b gy nf ng l nh ni">conda init zsh</span></pre><p id="139d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，重启终端。<strong class="lb iu">就是这样！</strong> Miniforge现已安装，您可以开始创建虚拟环境了。接下来我们就这样做吧。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c288" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">步骤2 —创建虚拟环境</h1><p id="9864" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">以下终端命令将基于Python 3.8创建一个名为<code class="fe nk nl nm na b">pytorch_env</code>的新虚拟环境:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="1bf1" class="ne md it na b gy nf ng l nh ni">conda create --name pytorch_env python=3.8</span></pre><p id="d8d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建后，使用以下命令激活它:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="3b40" class="ne md it na b gy nf ng l nh ni">conda activate pytorch_env</span></pre><p id="2f08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该会看到类似这样的内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/e304d147840382856cc401f4f000430a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uk6PRgXoRpKUxFXMekDQTA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图1 —激活PyTorch环境(图片由作者提供)</p></figure><p id="b317" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来让我们安装库。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="cc44" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">步骤3 —安装PyTorch</h1><p id="b496" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">你可以在Anaconda的网站上找到一个本地PyTorch包。您应该在Platform下查找<code class="fe nk nl nm na b">osx-arm64</code>,它会告诉您它是M1兼容的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/0a04c91f1731e52ff59b6ced34073a7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SZXEmUJSAyd0GDOmSfKZGg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图2 —蟒蛇身上的PyTorch包(图片由作者提供)</p></figure><p id="4190" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击软件包将为我们提供安装说明，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/e139302214cabaefc5d3ca76b47218b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KoYSDvjSCdm2miBWsr0XAA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图3 — PyTorch安装说明(图片由作者提供)</p></figure><p id="5343" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用以下命令安装PyTorch和Torchvision(针对数据集):</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="a138" class="ne md it na b gy nf ng l nh ni">conda install -c pytorch pytorch torchvision</span></pre><p id="bc7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就这样——py torch现在安装好了！接下来让我们测试这该死的东西。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="070f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">步骤4 —测试</h1><p id="2212" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们保持简单，不要从头开始写任何东西。PyTorch的GitHub页面附带了许多例子，其中之一是用于训练手写数字分类器的脚本(<a class="ae ky" href="https://github.com/pytorch/examples/blob/master/mnist/main.py" rel="noopener ugc nofollow" target="_blank"> link </a>)。</p><p id="cede" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只需下载脚本并从终端运行它:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="c8eb" class="ne md it na b gy nf ng l nh ni">python main.py</span></pre><p id="a451" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将看到以下输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/d293179df604ebcd75564a5c7941aa08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2RIhR41Ht1az_lU2z89nlg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片4 — PyTorch模型培训(图片由作者提供)</p></figure><p id="e1fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一切按预期运行！让我们打开活动监视器来验证Python是否正在本机运行:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/745059d5f59548f4dd9b8d8f2148fde6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qatKNtBNIEHNTiH78kxTvA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图5——Mac上的活动监视器(图片由作者提供)</p></figure><p id="0d40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你在“Kind”下看到“Apple”，这意味着程序是在M1芯片上本地运行的，而不是在Rosetta仿真器下。</p><p id="a549" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">检查！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8e3c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">最后的想法</h1><p id="9899" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在，PyTorch已经成功安装在M1机器上。你不能对TensorFlow遵循同样的步骤，因为一旦你开始训练模型，Python就会崩溃。如果你想让我也涵盖TensorFlow安装，请告诉我。</p><p id="178d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您必须承认，原生安装PyTorch比您预期的要容易。当然，它不会像在GPU上运行得那么快，但它足以让你开始学习和尝试。</p><p id="4156" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="db93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nj">喜欢这篇文章吗？成为</em> <a class="ae ky" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="nj">中等会员</em> </a> <em class="nj">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="nr ns gp gr nt nu"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">通过我的推荐链接加入Medium-Dario rade ci</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">medium.com</p></div></div><div class="od l"><div class="oe l of og oh od oi ks nu"/></div></div></a></div></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="322a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">了解更多信息</h1><ul class=""><li id="59ac" class="oj ok it lb b lc mu lf mv li ol lm om lq on lu oo op oq or bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/top-5-books-to-learn-data-science-in-2020-f43153851f14">2021年学习数据科学的前5本书</a></li><li id="dcea" class="oj ok it lb b lc os lf ot li ou lm ov lq ow lu oo op oq or bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/how-to-schedule-python-scripts-with-cron-the-only-guide-youll-ever-need-deea2df63b4e">如何使用Cron调度Python脚本——您需要的唯一指南</a></li><li id="77ff" class="oj ok it lb b lc os lf ot li ou lm ov lq ow lu oo op oq or bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/dask-delayed-how-to-parallelize-your-python-code-with-ease-19382e159849"> Dask延迟—如何轻松并行化您的Python代码</a></li><li id="34ec" class="oj ok it lb b lc os lf ot li ou lm ov lq ow lu oo op oq or bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/how-to-create-pdf-reports-with-python-the-essential-guide-c08dd3ebf2ee">如何使用Python创建PDF报告—基本指南</a></li><li id="624e" class="oj ok it lb b lc os lf ot li ou lm ov lq ow lu oo op oq or bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/become-a-data-scientist-in-2021-even-without-a-college-degree-e43fa934e55">即使没有大学文凭也要在2021年成为数据科学家</a></li></ul><h1 id="aa4a" class="mc md it bd me mf ox mh mi mj oy ml mm jz oz ka mo kc pa kd mq kf pb kg ms mt bi translated">保持联系</h1><ul class=""><li id="5cc7" class="oj ok it lb b lc mu lf mv li ol lm om lq on lu oo op oq or bi translated">关注我在<a class="ae ky" href="https://medium.com/@radecicdario" rel="noopener">媒体</a>上的更多类似的故事</li><li id="209c" class="oj ok it lb b lc os lf ot li ou lm ov lq ow lu oo op oq or bi translated">注册我的<a class="ae ky" href="https://mailchi.mp/46a3d2989d9b/bdssubscribe" rel="noopener ugc nofollow" target="_blank">简讯</a></li><li id="5c79" class="oj ok it lb b lc os lf ot li ou lm ov lq ow lu oo op oq or bi translated">在<a class="ae ky" href="https://www.linkedin.com/in/darioradecic/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上连接</li></ul></div></div>    
</body>
</html>