<html>
<head>
<title>Graph Queries and Cinema Bookings</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">图表查询和影院预订</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/graph-queries-and-cinema-bookings-cfb8fe02db25?source=collection_archive---------38-----------------------#2021-05-10">https://towardsdatascience.com/graph-queries-and-cinema-bookings-cfb8fe02db25?source=collection_archive---------38-----------------------#2021-05-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d217" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">知识图商业语言子查询变得简单</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/37fd89c270ac1211acd498ba42c1e6b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*EzyCIFRhnSTiF4k_az1I6w.jpeg"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">在<a class="ae ku" href="https://unsplash.com/s/photos/cinema?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ku" href="https://unsplash.com/@myke_simon?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Myke Simon </a>拍摄的照片。皇家自由形象。</p></figure><p id="04bc" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我的业务被称为FactEngine，这是一项从根本上改变人们对数据库和知识图查询语言的看法的举措。</p><p id="3324" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">假设您想在一家电影院预订一个座位，该影院使用一个数据库来跟踪这些预订。如果你想找到那个座位，你应该问:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi lr"><img src="../Images/7e15f28e9f473859c34dd7adcb332f2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CBA02LPid9PQLBBke0pINw.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">FactEngine查询语言中的图形查询。图片作者。</p></figure><p id="cb42" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">以上是FactEngine中的图表查询，对以下图表进行操作:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi lw"><img src="../Images/646a416bad658f5ce99369a381373e75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qkQEyjPzFplbS5alfNbQkw.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">显示电影院中会话属性的属性图模式。图片作者。</p></figure><p id="538b" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><strong class="kx iu">子查询</strong></p><p id="4292" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">对于initiated，该查询包含一个子查询，该子查询将首先找到那些已经预订的座位，并返回该集合之外的座位，或者相反地使用一个<a class="ae ku" href="https://en.wikipedia.org/wiki/Correlated_subquery" rel="noopener ugc nofollow" target="_blank">相关子查询</a>，其中“座位的预订计数为零”针对电影院中的每个座位进行操作。</p><p id="e524" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">由于FactEngine查询引擎位于将所有数据库概念模型首先视为<a class="ae ku" rel="noopener" target="_blank" href="/why-learn-object-role-modelling-4eebd93dcda2#:~:text=When%20you%20learn%20ORM%2C%20you,to%20learn%20Object%2DRole%20Modelling.">对象-角色模型</a>(如下)的架构内，因此该查询既是图形查询又是自然语言查询。</p><p id="a789" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在我们的对象-角色模型中，会话是“<strong class="kx iu">电影<em class="lx">在</em>日期时间<em class="lx">在</em>电影院</strong>上映”的地方，这允许在我们的子查询中进行简单的图形横切，即:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi ly"><img src="../Images/62fef30729f70268c31ab78c4e272b3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nrcqGUAKQBV5TyNgL1C9Vw.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">使用对象-角色模型的事实类型读数的图遍历。图片作者。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi lz"><img src="../Images/ac181e8640040989fb1e4cab0ae909d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CS44JZwiIy1OFaEq9Uuoqw.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">点击放大。电影院订票的对象-角色模型。图片作者。</p></figure><p id="27d9" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">也就是说，在我们的模型的图形表示中，日期时间是一个<strong class="kx iu"> <em class="lx">属性</em> </strong>，在我们的图形查询中，日期时间成为一个有效的<strong class="kx iu"> <em class="lx">节点</em> </strong>，其中对象角色建模中的对象类型是超图中的有效节点。</p><p id="385a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们示例中的子查询受单词“NO”的影响。即哪个座位没有预订。</p><h2 id="dbde" class="ma mb it bd mc md me dn mf mg mh dp mi le mj mk ml li mm mn mo lm mp mq mr ms bi translated">一个词彻底改变了查询</h2><p id="fdf5" class="pw-post-body-paragraph kv kw it kx b ky mt ju la lb mu jx ld le mv lg lh li mw lk ll lm mx lo lp lq im bi translated">与自然语言一样，FactEngine查询中的一个单词就可以从根本上改变查询的含义。</p><p id="7669" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">将“无预订”更改为“有预订”，将返回所有已预订的座位:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi my"><img src="../Images/869168f8f0e86f3c7a0cb656c6b08aa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0tOqbINh_nmJCLQOVLoomQ.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">通过更改查询中的一个单词来删除子查询需求。图片作者。</p></figure><p id="4ce1" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">也就是说，我们已经有效地去除了对任何子查询的需求，现在我们的查询变成了简单的图遍历。</p><p id="60fe" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我觉得这很有趣。人类自然明白，句子中的一个单词就能从根本上改变他们处理信息的方式。让一台计算机在没有机器学习的情况下做那件事<strong class="kx iu"><em class="lx"/></strong>是我的动力所在。</p><h2 id="b98b" class="ma mb it bd mc md me dn mf mg mh dp mi le mj mk ml li mm mn mo lm mp mq mr ms bi translated">为什么是图形查询？谁在乎呢。</h2><p id="af94" class="pw-post-body-paragraph kv kw it kx b ky mt ju la lb mu jx ld le mv lg lh li mw lk ll lm mx lo lp lq im bi translated">事实引擎目前在关系数据库上运行，关系数据库通常使用SQL进行查询。如果您必须为本文顶部的查询编写SQL，您将会遇到一些麻烦。这是:</p><p id="eb94" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">选择[座位]。Cinema_Id，[座位]。RowNr，[座位]。字母，[行]。Cinema_Id，[Row]。RowNr <br/>从【座位】，<br/>【Row】<br/>那里【座位】。Cinema_Id = [Row]。Cinema_Id <br/>和【座位】。RowNr = [Row]。RowNr <br/>和1 &gt;(从【预订】、<br/>【场次】、<br/>【电影】、<br/>【影院】<br/>、bookinghaseat<br/>中选择COUNT(*) <br/>)其中【bookinghaseat】。person _ Id =[预订]。Person_Id <br/>和【BookingHasSeat】。film _ Id =[预订]。Film_Id <br/>和【BookingHasSeat】。日期时间=[预订]。日期时间<br/>和【BookingHasSeat】。CinemaId =[预订]。Cinema_Id <br/>和【BookingHasSeat】。RowNr = [Seat]。RowNr <br/>和【BookingHasSeat】。Cinema_Id = [Seat]。Cinema_Id <br/>和【BookingHasSeat】。字母=[座位]。信<br/>和【预订】。Film_Id = [Session]。Film_Id <br/>和【预约】。日期时间=[会话]。日期时间<br/>和【预约】。Cinema_Id = [Session]。Cinema_Id <br/>和【会话】。Film_Id = [Film]。Film_Id <br/>和【会话】。Cinema_Id=[Cinema]。Cinema_Id <br/>和【电影】。Name = 'Rocky' <br/>和[Session]。DateTime = '12/08/2020 10:00' <br/>和【影院】。CinemaName = '大西部电影院'<br/>)</p><p id="3956" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">可能只有我，但我更愿意这样写查询:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mz"><img src="../Images/ca731c48dbe7ebbab0971e3544ebcb4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*0VxLyyJpd2gKtf5ILVQDlg.gif"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">事实引擎中的自然语言查询。图片作者。</p></figure><p id="fc6e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我觉得关系数据库供应商有很大的机会通过使关系数据库的查询更容易来夺回图形数据库的失地。</p><p id="a9f3" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">下一步是实现机器学习和复杂的机制不一定是计算机解释和理解大量自然/商业语言查询所必需的。</p><p id="2ae7" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">对于门外汉来说，子查询总是一个学习曲线，所以我觉得，任何可以使生活变得简单的工具都是好东西。</p><p id="c58e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">感谢您的阅读。如果时间允许，我会写更多关于图形查询、图形数据库、关系数据库和对象角色建模的文章。</p><p id="a3f5" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><strong class="kx iu"> NB </strong>本文表达的模型的原始版本版权归DataConstellation所有，在GitHub上的ActiveFacts项目下共享:<a class="ae ku" href="https://github.com/cjheath/activefacts" rel="noopener ugc nofollow" target="_blank">https://github.com/cjheath/activefacts</a></p><p id="71ea" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">——————End————</p></div></div>    
</body>
</html>