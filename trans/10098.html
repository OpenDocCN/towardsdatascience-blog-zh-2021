<html>
<head>
<title>Dual Axis plots in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的双轴绘图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/dual-axis-plots-in-python-95e5ef24a4e0?source=collection_archive---------6-----------------------#2021-09-24">https://towardsdatascience.com/dual-axis-plots-in-python-95e5ef24a4e0?source=collection_archive---------6-----------------------#2021-09-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="25e0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">本文讨论了如何向Python绘图添加辅助轴</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/30fe90a694598f08f66b7666c0df2e8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IWKTDXElpzLDMMnFLdn4Zw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">克里斯·利维拉尼在<a class="ae kv" href="https://unsplash.com/s/photos/graphs?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="8474" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有时，我们可能需要将两个不同比例的变量添加到绘图轴上。例如，我们希望在y轴上显示人均GDP(单位为美元)和年GDP增长率%,在x轴上显示年份。换句话说，我们需要可视化多年来人均GDP($)和GDP增长率的趋势。20世纪80年代以来，人均国内生产总值(美元)和国内生产总值增长率有不同的比例.使用相同的y轴绘制它们会破坏另一个。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/34af0a9a01e38fa87874abdea449d07d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lXbvNrVeojegvqXrTcl9bA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="9a08" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上图中，我们可以看到，年增长率的趋势完全被人均国内生产总值(美元)所破坏。在下图中，我们看到在y轴上使用对数刻度也没有帮助。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lt"><img src="../Images/b04affe1f93729affd6870a63bd85953.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MkJTI1b12KH4ysEP9yWnvA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">对数y轴(图片由作者提供)</p></figure><p id="e48d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这使得年增长率(%)必须有一个辅助y轴。为了说明新增的副轴，我们将使用下面显示的数据框(名为“gdp”)，其中包含2000年至2020年的人均GDP($)和年增长率(%)数据。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/3e62a6b20754a8aff78b275c659ce8ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*NuDpfLGXvWOabjDrZIVVFQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">gdp数据框(图片由作者提供)</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="e87b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的代码中，我们使用twinx()函数创建了一个名为“ax2”的辅助轴。twinx()创建一个共享x轴的辅助轴。还有一个名为twiny()的函数用于创建一个共享y轴的次轴。在下图中，我们可以清楚地看到人均GDP)和年增长率(%)的趋势。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lx"><img src="../Images/110fae2568a39409cf35652daaf8df0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jXAYTgS6Wlfbe4koJHn-vg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">带副轴的绘图(作者提供的图片)</p></figure><p id="1210" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在下一个例子中，我们将绘制Nifty(印度的一个股票指数)的趋势和成交量。在本例中，我们将对指数值使用折线图，对成交量使用条形图。下面是我们将在本例中使用的数据框(名为“nifty_2021”)的前几条记录。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/597b7b339f85c35b54a88f35e83f0ca8.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/format:webp/1*7RoOWWCap-XsINeaZHXXrA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">nifty_2021数据框(图片由作者提供)</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="bded" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的代码类似于我们之前看到的代码。然而，有一些不同之处需要注意。</p><ol class=""><li id="f0e6" class="lz ma iq ky b kz la lc ld lf mb lj mc ln md lr me mf mg mh bi translated">在上面的代码中，我们使用了pandas plot()来绘制音量条图。这是因为Matplotlib的plt.bar()函数可能无法正常处理不同类型的绘图。因此，我更喜欢Matplotlib只用于线图。</li><li id="d56b" class="lz ma iq ky b kz mi lc mj lf mk lj ml ln mm lr me mf mg mh bi translated">我们使用了<strong class="ky ir"> ax2.plot(ax.get_xticks() </strong>而不是<strong class="ky ir">ax2 . plot(nifty _ 2021[' Date ']</strong>。这是因为使用<strong class="ky ir"> nifty_2021['Date'] </strong>是将图向右移动或者根本不显示线图。</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mn"><img src="../Images/047f4ecd6e3b4e3eb9f8426ad37eb80f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U_b2K-_cMr_qeflRD-GAUw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="5d0d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本文到此结束。我们已经讨论了不同比例的变量在一起绘图时可能会产生的问题，并看到了添加一个副轴是如何解决问题的。我们还看到了如何使用次轴绘制折线图和条形图。</p></div></div>    
</body>
</html>