<html>
<head>
<title>4 Must-Know Special Methods for Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python的4个必须知道的特殊方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/4-must-know-special-methods-for-python-2ffa62b59326?source=collection_archive---------4-----------------------#2021-04-10">https://towardsdatascience.com/4-must-know-special-methods-for-python-2ffa62b59326?source=collection_archive---------4-----------------------#2021-04-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="db8d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">您需要在用户定义的类中实现的方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0b03cf4a82e48011fc72b241388733f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R_haFEfjfI4yWTinTSXCWw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">多萝西娅·奥德尼在<a class="ae ky" href="https://unsplash.com/s/photos/special?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="41ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python中的一切都是对象，我们通过类来定义对象。当我们定义一个对象时，我们实际上创建了一个类的实例。因此，类是Python中最基本的部分。</p><p id="cea8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">课程有:</p><ul class=""><li id="eded" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">数据属性:定义创建一个类的实例需要什么</li><li id="2aa4" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">方法(即过程属性):定义如何与类的实例交互</li></ul><p id="ca38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用数据和过程属性创建自己的类。这是我们的游乐场，所以我们可以实现各种功能来定制一个类。</p><p id="53eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了用户定义的函数，还可以在用户定义的类中使用内置的Python函数。这就是特殊(或神奇)方法的用途。</p><p id="7ab9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">特殊的方法允许使用内置的Python函数来丰富用户定义的类。考虑打印函数，这是最常用的Python函数之一。如果您使用它来打印您的类的实例，它将打印出如下内容:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="f5b0" class="mo mp it mk b gy mq mr l ms mt">&lt;__main__.Book object at 0x7f9ed5b1d590&gt;</span></pre><p id="17f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它显示类(书)的名称和对象的存储位置，这不是打印功能的正确使用。我们可以通过在类中实现__str__ special方法来自定义它的行为。</p><p id="f93f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我们将讨论4种你可能会在课堂上用到的特殊方法。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="3572" class="mo mp it bd nb nc nd dn ne nf ng dp nh li ni nj nk lm nl nm nn lq no np nq nr bi translated">1.__init__</h2><p id="1304" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">创建类的实例时，会自动执行__init__ special方法。它也被称为类构造函数。__init__的参数表示一个类的数据属性。</p><p id="066e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们创建一个名为Book的类。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="30ad" class="mo mp it mk b gy mq mr l ms mt">class Book():</span><span id="84d5" class="mo mp it mk b gy nx mr l ms mt">    def __init__(self, name, writer, pages):<br/>       self.name = name<br/>       self.writer = writer<br/>       self.pages = pages</span></pre><p id="add7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自我指的是实例本身。Book类有3个数据属性，需要在创建Book实例时指定。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="f149" class="mo mp it mk b gy mq mr l ms mt">b = Book("Moby Dick", "Herman Melville", "378")</span><span id="98cb" class="mo mp it mk b gy nx mr l ms mt">type(b)<br/>__main__.Book</span></pre><p id="8bea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">变量b是Book类的一个实例。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="ba4b" class="mo mp it bd nb nc nd dn ne nf ng dp nh li ni nj nk lm nl nm nn lq no np nq nr bi translated">2.__str__</h2><p id="9205" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">我们使用__str__特殊方法在我们的类中实现内置的打印函数。如果没有__str__，下面是print函数的作用。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="9db7" class="mo mp it mk b gy mq mr l ms mt">print(b)<br/>&lt;__main__.Book object at 0x7f9ed5b1d590&gt;</span></pre><p id="b2a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们在类定义中定义__str__方法。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="604d" class="mo mp it mk b gy mq mr l ms mt">def __str__(self):<br/>   return f"The title of the book is {self.name}"</span></pre><p id="de03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在打印功能将返回名称的标题。它通过name属性访问图书的名称。你可以用你喜欢的任何方式定制它。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="f2b5" class="mo mp it mk b gy mq mr l ms mt">print(b)<br/>The title of the book is Moby Dick</span></pre></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="3920" class="mo mp it bd nb nc nd dn ne nf ng dp nh li ni nj nk lm nl nm nn lq no np nq nr bi translated">3.__len__</h2><p id="bd50" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">len函数返回对象的长度。对于字符串，它返回字符数。对于熊猫数据框，它返回行数。</p><p id="9c2c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过在类定义中实现__len__ special方法来自定义它的行为。让我们用它来返回一个book对象的页数。</p><p id="7704" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果__len__没有在类定义中实现，当您试图在类的对象上使用它时，将会出现错误。它没有像打印功能那样的默认行为。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="8717" class="mo mp it mk b gy mq mr l ms mt">def __len__(self):<br/>   return int(self.pages)</span><span id="6a5f" class="mo mp it mk b gy nx mr l ms mt">len(b)<br/>378</span></pre><p id="f191" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，每次向类中添加新函数时，都需要重新创建对象才能使用新函数。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="2e99" class="mo mp it bd nb nc nd dn ne nf ng dp nh li ni nj nk lm nl nm nn lq no np nq nr bi translated">4.__eq__</h2><p id="0d0a" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">__eq__特殊方法允许比较一个类的两个实例。如果它是在我们的类中定义的，我们可以检查一个实例是否等于另一个实例。使用__eq__方法指定相等条件。</p><p id="0327" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的例子中，如果两本书的名字和作者相同，我们可以声明这两本书是相等的。它们可能有不同的页数。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="cc0a" class="mo mp it mk b gy mq mr l ms mt">def __eq__(self, other):<br/>   return (self.name == other.name) &amp; (self.writer == other.writer)</span></pre><p id="c453" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果两个实例的名称和写入都相同，则“==”运算符将返回True。让我们创建两本书并检查它们是否相等。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="81a3" class="mo mp it mk b gy mq mr l ms mt">b = Book("Moby Dick", "Herman Melville", "378")</span><span id="220b" class="mo mp it mk b gy nx mr l ms mt">a = Book("Moby Dick", "Herman Melville", "410")</span><span id="dcf6" class="mo mp it mk b gy nx mr l ms mt">b == a<br/>True</span></pre><p id="b048" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果names或writes不同，相等运算符将返回False。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="0d4a" class="mo mp it mk b gy mq mr l ms mt">b = Book("Moby Dick", "Herman Melville", "378")</span><span id="f41a" class="mo mp it mk b gy nx mr l ms mt">a = Book("Moby Dick", "Melville", "410")</span><span id="3118" class="mo mp it mk b gy nx mr l ms mt">b == a<br/>False</span></pre></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="ba2a" class="mo mp it bd nb nc nd dn ne nf ng dp nh li ni nj nk lm nl nm nn lq no np nq nr bi translated">结论</h2><p id="0fbc" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">对象是Python的核心，因此创建健壮的、功能强大的、设计良好的类至关重要。我们已经介绍了4种特殊的方法，您需要在自己的类中实现它们。</p><p id="dad3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>