<html>
<head>
<title>Introduction to Linear Programming</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">线性规划导论</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/introduction-to-linear-programming-b6647d20d5f6?source=collection_archive---------18-----------------------#2021-06-10">https://towardsdatascience.com/introduction-to-linear-programming-b6647d20d5f6?source=collection_archive---------18-----------------------#2021-06-10</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="365e" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">识别线性程序问题并使用CVXPY在Python中解决它们</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/52215bc76913999256d1ff6fb1022485.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uJ8czSiS3nwAa_07"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae kz" href="https://unsplash.com/@kstock?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Karoline Stk </a>拍摄的照片</p></figure><h1 id="6c3d" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">动机</h1><p id="6f9d" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">想象一下，不管出于什么原因，你想只吃苹果和草莓。你并不真的偏爱一种水果，但你想确保你…</p><ol class=""><li id="6db1" class="mo mp iu lu b lv mq ly mr mb ms mf mt mj mu mn mv mw mx my bi translated">摄入足够的维生素C和</li><li id="10b4" class="mo mp iu lu b lv mz ly na mb nb mf nc mj nd mn mv mw mx my bi translated">摄入足够的热量。</li></ol><p id="93f2" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">除了维生素C和卡路里含量不同，苹果和草莓的价格也不同。所以，很自然地，你会要求最便宜的<strong class="lu iv">饮食，同时满足你的两个<em class="nh">约束</em>。</strong></p><h1 id="6028" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">数例</h1><p id="37e1" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">假设你想每天至少摄入300毫克的维生素C(这太多了，但是这让问题变得更好)，以及至少2000卡路里的热量。水果数据如下所示:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ni"><img src="../Images/f2664baa3838b0b761c3014a0da9c302.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*nAphSye8N5qpMDunP8_oaQ.jpeg"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">图片由作者提供。</p></figure><p id="d93d" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">现在怎么才能找到苹果和草莓的最佳组合呢？从变量开始总是好的:我们将你每天消耗的苹果质量记为<em class="nh"> A </em>，草莓质量记为<em class="nh"> S </em>(都以100克为单位)<em class="nh">。</em>由于<em class="nh"> A </em>和<em class="nh"> S </em>都是量，<strong class="lu iv">应该都大于等于零</strong>。</p><p id="bc54" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">有了这些定义，我们就可以用<em class="nh"> A </em>、<em class="nh"> S </em>和价格:<strong class="lu iv"><em class="nh">c</em>= 0.3 *<em class="nh">A</em>+0.4 *<em class="nh">S</em></strong>来写成本。<em class="nh"> c </em>应该是最小化了，不过这个到目前为止很容易:<em class="nh">什么都不吃，花0€。</em>然而，我们目前没有纳入我们的营养限制。分别是<strong class="lu iv">4.6 *<em class="nh">A</em>+58.8 *<em class="nh">S</em>≥300</strong>和<strong class="lu iv">52 *<em class="nh">A</em>+33 *<em class="nh">S</em>≥2000</strong>。饮食<em class="nh"> A </em> = 0，<em class="nh"> S </em> = 0违反了这些约束，因此不是解决方案。</p><blockquote class="nj"><p id="49ff" class="nk nl iu bd nm nn no np nq nr ns mn dk translated">上面的问题是一个简单的带有两个变量和四个约束的<em class="nt">线性规划</em>的情况，可以通过<em class="nt">线性规划</em>来解决。</p></blockquote></div><div class="ab cl nu nv hy nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="in io ip iq ir"><p id="aa1c" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">用一种更简洁的表示法，我们必须解决以下问题:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ob"><img src="../Images/c396b1198cdd232305adfcee1368ff9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k2h3fDemqjntoIUuhIoAIw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">图片由作者提供。</p></figure><p id="f3c7" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">你可以在维基百科上找到<a class="ae kz" href="https://en.wikipedia.org/wiki/Linear_programming" rel="noopener ugc nofollow" target="_blank">的确切定义。</a></p><blockquote class="oc od oe"><p id="95fa" class="ls lt nh lu b lv mq jv lx ly mr jy ma of ne md me og nf mh mi oh ng ml mm mn in bi translated">注:<em class="iu">称之为线性规划是因为最小化项是线性的，</em> <strong class="lu iv"> <em class="iu">不是</em> </strong> <em class="iu">是因为约束是线性的。</em></p></blockquote><p id="9468" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">有几种方法可以解决这个问题。为了获得一些直觉，我们将首先通过一个图解方法。这是唯一可能的，因为我们只有两个变量，可以画在平面上。在更高的维度中，我们需要使用不同的算法来解决问题。</p><h1 id="0847" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">图解法</h1><p id="e8e7" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">我们能够画出我们所拥有的约束。例如，约束4.6 *<em class="nh">A</em>+58.8 *<em class="nh">S</em>≥300<strong class="lu iv"/>可以被可视化如下:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oi"><img src="../Images/48b9f09551644e9e74f944dabc1ba3d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gAyAInA1A8G52FJdcj4s1w.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">图片由作者提供。</p></figure><p id="e701" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">粗橙线正好是等式4.6 *<em class="nh">A</em>+58.8 *<em class="nh">S</em>= 300。因为我们有更大的等号，所以不仅线上的点，而且线上的每个点也遵守这个约束。</p><p id="37d4" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">让我们加上卡路里限制:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oj"><img src="../Images/2eac91f34b7a687d230e460b003bf8f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z_GfMsm7Mr03k8J2Obumdw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">图片由作者提供。</p></figure><p id="98fb" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">此外，我们有约束条件，A<em class="nh">和S</em>和<em class="nh"> S </em>应该是正数，但我就是这样限制情节的。这意味着我们搜索的解决方案<strong class="lu iv">必须在右上区域</strong>带有交叉阴影图案的某处，因为只有这些点考虑所有约束。我们称这个区域为<em class="nh">可行区域</em>。</p></div><div class="ab cl nu nv hy nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="in io ip iq ir"><p id="0fd2" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">好的，我们知道现在要去哪里找，但是目标是什么？<strong class="lu iv">最小化0.3* <em class="nh"> A </em> + 0.4* <em class="nh"> S </em>！</strong></p><p id="7948" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">我们现在可以从可行域中盲目地插入一些值，但是由于有无限多的点，我们不能期望得到正确的解。比如<em class="nh"> A </em> = 60，<em class="nh"> S </em> = 3就是候选。这种减肥法的成本是0.3*60 + 0.4*3 = 19.2 €，由6公斤苹果和300克草莓组成。</p><blockquote class="oc od oe"><p id="d539" class="ls lt nh lu b lv mq jv lx ly mr jy ma of ne md me og nf mh mi oh ng ml mm mn in bi translated">一天6斤苹果，让每个医生永远远离。</p></blockquote><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oi"><img src="../Images/dce93c0a698a82c6c1eb6e480117e10e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qb3UDyXa35Zxt8U68G-WFQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">图片由作者提供。</p></figure><p id="f421" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">你能想到更好的候选人吗？为了最小化成本，小值的<em class="nh"> A </em>和<em class="nh"> S </em>是有利的，那么我们如何从✖移动到底部和左侧呢？</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oi"><img src="../Images/5d69822f42e52a642ad0f32260af1c37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hDbGbo6mwXFWcVFfamlqgA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">图片由作者提供。</p></figure><p id="358b" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">我们插上，点在<em class="nh"> A </em> = 37，<em class="nh"> S </em> = 2.2左右。这种减肥法的费用是0.3*37 + 0.4*2.2 ≈ 12 €，比第一种减肥法便宜7 €左右！作为一个很好的副作用，我们每天只需要吃3.7公斤的苹果。愿这是最好的解决方案？</p></div><div class="ab cl nu nv hy nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="in io ip iq ir"><p id="265b" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">嗯，是的！现在有一些很好的理论说:</p><blockquote class="nj"><p id="6d18" class="nk nl iu bd nm nn no np nq nr ns mn dk translated">最优解总是在可行域的某个角落。</p></blockquote><p id="438d" class="pw-post-body-paragraph ls lt iu lu b lv ok jv lx ly ol jy ma mb om md me mf on mh mi mj oo ml mm mn in bi translated">让我们检查一下另一个角，大约在<em class="nh"> A </em> ≈ 65，<em class="nh"> S </em> = 0。这里的成本大约是0.3*65 = 19.5 €，再次高于其他角落的成本。因此，我们用图解法找到了最优解。甚至没有那么难。</p><h1 id="51a4" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">使用CVXPY解决问题</h1><p id="d24c" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">正如我之前所说，我们可以解决它，因为我们有两个变量。在更高维度中，我们不能画一些线和检查角落。在这些情况下，我们需要依靠算法来解决这类问题。其中一些是Dantzig 的<a class="ae kz" href="https://en.wikipedia.org/wiki/Linear_programming#Simplex_algorithm_of_Dantzig" rel="noopener ugc nofollow" target="_blank">单纯形算法或</a><a class="ae kz" href="https://en.wikipedia.org/wiki/Linear_programming#Interior_point" rel="noopener ugc nofollow" target="_blank">内点方法</a>族，我在此不再描述。相反，让我们使用Python库<a class="ae kz" href="https://www.cvxpy.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="lu iv"> CVXPY </strong> </a>来完成繁重的工作。</p><p id="0d78" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">之后，你可以用下面几行来解决上面的饮食问题:</p><pre class="kk kl km kn gu ot os ou bn ov ow bi"><span id="81ee" class="ox lb iu os b be oy oz l pa pb">import cvxpy as cp<br/><br/>A = cp.Variable()<br/>S = cp.Variable()<br/><br/>objective = cp.Minimize(0.3*A + 0.4*S)<br/><br/>constraints = [<br/>    4.6*A + 58.8*S &gt;= 300,<br/>    52*A + 33*S &gt;= 2000,<br/>    A &gt;= 0,<br/>    S &gt;= 0<br/>]<br/><br/>linear_program = cp.Problem(objective, constraints)<br/><br/>result = linear_program.solve()<br/><br/>print(f'A = {A.value:.2f}, S = {S.value:.2f}, costs = {result:.2f}')</span></pre><p id="7cb6" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">这个短程序输出<em class="nh"> A </em> = 37.06，<em class="nh"> S </em> = 2.20，costs = 12.00，这证实了我们的图形解决方案确实是正确的！</p><p id="1601" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">看看CVXPY库的界面有多漂亮。没有比这更瘦的了。你告诉它最小化，并给出公式，你提供一个简单的约束列表，你可以很容易地写，你创建一个问题实例，然后你解决它。你可以清楚地看到我们之前用过的所有公式。</p></div><div class="ab cl nu nv hy nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="in io ip iq ir"><p id="7bbd" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">还有其他很棒的包装，另一个著名的是<a class="ae kz" href="https://coin-or.github.io/pulp/" rel="noopener ugc nofollow" target="_blank">果肉</a>。然而，我认为CVXPY语法仍然是最好的。</p><h1 id="303a" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">结论</h1><p id="9d04" class="pw-post-body-paragraph ls lt iu lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn in bi translated">在本文中，我们已经看到，线性程序不是一种特殊风格的计算机程序，而是一个优化问题。我们制定了一个简单的玩具问题，并用两种不同的方法解决了它。</p><ol class=""><li id="7a89" class="mo mp iu lu b lv mq ly mr mb ms mf mt mj mu mn mv mw mx my bi translated">最多只能处理两个变量的图解法，但易于理解和手动应用。</li><li id="46ed" class="mo mp iu lu b lv mz ly na mb nb mf nc mj nd mn mv mw mx my bi translated">隐藏在CVXPY等令人敬畏的高级线性程序库中的高级算法。</li></ol><p id="851c" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">CVXPY甚至可以解决比线性规划更一般的问题，比如最小化公式为二次的<a class="ae kz" href="https://en.wikipedia.org/wiki/Quadratic_programming" rel="noopener ugc nofollow" target="_blank">二次规划</a>。它还可以解决带有某些约束的线性程序，这些约束使求解变得更加困难，例如变量必须是<strong class="lu iv">整数</strong>，或者只能是<strong class="lu iv"> 0/1 </strong>。这些问题甚至是<a class="ae kz" href="https://en.wikipedia.org/wiki/NP-completeness" rel="noopener ugc nofollow" target="_blank"> NP-complete </a>，这通常意味着解决大型实例变得不可行。但是<a class="ae kz" href="https://www.cvxpy.org/" rel="noopener ugc nofollow" target="_blank"> CVXPY </a>还是尽力了。</p><p id="e021" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">最后一点，当然，还有比我们讨论的更有趣的线性程序。例如，检查一下<a class="ae kz" href="https://en.wikipedia.org/wiki/Stigler_diet" rel="noopener ugc nofollow" target="_blank">斯蒂格勒饮食</a>，这是一个类似的问题，但是有更多的食物和营养。无论如何，你现在能够发现线性规划，并相应地采取行动解决它们！</p></div><div class="ab cl nu nv hy nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="in io ip iq ir"><p id="7da4" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">我希望你今天学到了新的、有趣的、有用的东西。感谢阅读！</p><p id="d578" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated"><strong class="lu iv">作为最后一点，如果你</strong></p><ol class=""><li id="3149" class="mo mp iu lu b lv mq ly mr mb ms mf mt mj mu mn mv mw mx my bi translated"><strong class="lu iv">想支持我多写点机器学习和</strong></li><li id="da17" class="mo mp iu lu b lv mz ly na mb nb mf nc mj nd mn mv mw mx my bi translated"><strong class="lu iv">无论如何都要计划获得中等订阅量，</strong></li></ol><p id="669a" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated"><strong class="lu iv">为什么不做</strong> <a class="ae kz" href="https://dr-robert-kuebler.medium.com/membership" rel="noopener"> <strong class="lu iv">通过这个环节</strong> </a> <strong class="lu iv">？这将对我帮助很大！😊</strong></p><p id="9566" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">透明地说，给你的价格不变，但大约一半的订阅费直接归我。</p><p id="0dd7" class="pw-post-body-paragraph ls lt iu lu b lv mq jv lx ly mr jy ma mb ne md me mf nf mh mi mj ng ml mm mn in bi translated">非常感谢，如果你考虑支持我的话！</p><blockquote class="nj"><p id="b78c" class="nk nl iu bd nm nn no np nq nr ns mn dk translated"><em class="nt">有问题就在</em><a class="ae kz" href="https://www.linkedin.com/in/dr-robert-k%C3%BCbler-983859150/" rel="noopener ugc nofollow" target="_blank"><em class="nt">LinkedIn</em></a><em class="nt">上写我！</em></p></blockquote></div></div>    
</body>
</html>