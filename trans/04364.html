<html>
<head>
<title>4 Must-Know Objects in Python Datetime Module</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python日期时间模块中的4个必须知道的对象</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/4-must-know-objects-in-python-datetime-module-d18565fddd05?source=collection_archive---------23-----------------------#2021-04-13">https://towardsdatascience.com/4-must-know-objects-in-python-datetime-module-d18565fddd05?source=collection_archive---------23-----------------------#2021-04-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d10e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">综合实践指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/731966366f745c49b95601764aae72a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XSl5z9T7WCvf-7_wX6B0cA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com/s/photos/time?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@insungyoon?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">尹新荣</a>拍摄的照片</p></figure><p id="c89e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">时间是许多数据科学相关任务的重要特征。例如，每日销售和库存信息对于零售分析至关重要。算法交易需要分钟级别的交易数据。</p><p id="05af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们表示和使用时间相关信息的方式随着任务的不同而不同。对于一个科学实验，我们可能会谈到微秒级的测量记录。但是，对于人口统计信息，如人口、平均家庭收入等，我们不需要这样的精度。</p><p id="568e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python的datetime模块帮助我们处理任何精度级别的时间相关信息。在本文中，我们将详细介绍本模块中的4个对象，它们是日期、时间、日期时间和时间增量。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="f5fe" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">日期</h2><p id="4e5d" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">对象用年、月和日来表示日期。让我们看几个例子来演示如何使用它们。</p><p id="9f07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以创建一个日期对象，通过传递年、月和日信息来存储特定的日期。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="8a91" class="mc md it nb b gy nf ng l nh ni">from datetime import date</span><span id="80e2" class="mc md it nb b gy nj ng l nh ni">mydate = date(2020, 4, 11)</span><span id="d7c2" class="mc md it nb b gy nj ng l nh ni">print(mydate)<br/>2020-04-11</span></pre><p id="6492" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以基于今天的日期创建一个date对象。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="ed79" class="mc md it nb b gy nf ng l nh ni">today = date.today()</span><span id="e4f9" class="mc md it nb b gy nj ng l nh ni">print(today)<br/>2021-04-13</span></pre><p id="c6c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以从日期对象中提取各个属性。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="ecfb" class="mc md it nb b gy nf ng l nh ni">type(today)<br/>datetime.date</span><span id="49e1" class="mc md it nb b gy nj ng l nh ni">today.year<br/>2021</span><span id="4526" class="mc md it nb b gy nj ng l nh ni">today.month<br/>4</span><span id="e7f9" class="mc md it nb b gy nj ng l nh ni">today.day<br/>13</span></pre><p id="8db1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">需要注意的是，我们不能在月和日信息中使用前导零。例如，下面的代码将返回一个语法错误。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="0e27" class="mc md it nb b gy nf ng l nh ni">mydate = date(2020, 04, 02)   # SyntaxError</span><span id="a825" class="mc md it nb b gy nj ng l nh ni">mydate = date(2020, 4, 2)     # OK</span></pre><p id="7a26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以对date对象使用的另一个有用的方法是ctime，它以更详细或扩展的格式返回日期。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="755d" class="mc md it nb b gy nf ng l nh ni">mydate = date(2021, 2, 15)</span><span id="360b" class="mc md it nb b gy nj ng l nh ni">mydate.ctime()<br/>Mon Feb 15 00:00:00 2021</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="8c09" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以用减号来计算两个日期之间的差异。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="e676" class="mc md it nb b gy nf ng l nh ni">mydate1 = date(2021, 2, 15)<br/>mydate2 = date(2021, 3, 12)</span><span id="bb9f" class="mc md it nb b gy nj ng l nh ni">mydate1 - mydate2<br/>datetime.timedelta(days=-25)</span></pre><p id="26d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">返回的对象属于timedelta类型，我们也将在本文中介绍这一类型。差额以天计算。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="6511" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">时间</h2><p id="412d" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">时间对象表示小时、分钟、秒和微秒级别的时间。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="c647" class="mc md it nb b gy nf ng l nh ni">from datetime import time</span><span id="80c0" class="mc md it nb b gy nj ng l nh ni">mytime = time(14, 20)</span><span id="784c" class="mc md it nb b gy nj ng l nh ni">print(mytime)<br/>14:20:00</span></pre><p id="c3c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们只定义了小时和分钟部分。默认情况下，Python为剩余的时间属性分配0。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="872f" class="mc md it nb b gy nf ng l nh ni">mytime.second<br/>0</span><span id="5126" class="mc md it nb b gy nj ng l nh ni">mytime.microsecond<br/>0</span></pre><p id="7bc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以通过传递所有属性来创建更精确的时间对象。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="9d7f" class="mc md it nb b gy nf ng l nh ni">mytime = time(2, 14, 25, 30)</span><span id="cdf8" class="mc md it nb b gy nj ng l nh ni">print(mytime)<br/>02:14:25.000030</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="9c83" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">日期时间</h2><p id="03e9" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Datetime是一种日期和时间的组合。它可以表示日期和时间对象的所有属性。让我们跳到例子上来使它更清楚。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="60ea" class="mc md it nb b gy nf ng l nh ni">from datetime import datetime</span><span id="5b25" class="mc md it nb b gy nj ng l nh ni">mydatetime = datetime(2021, 1, 14)<br/>print(mydatetime)<br/>2021-01-14 00:00:00</span><span id="0cba" class="mc md it nb b gy nj ng l nh ni">mydatetime2 = datetime(2021, 1, 14, 16, 20)<br/>print(mydatetime2)<br/>2021-01-14 16:20:00</span></pre><p id="2651" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">datetime对象提供了仅使用日期或组合使用日期和时间的灵活性。参数之间有一个等级，从年份开始，一直到微秒级。</p><p id="2930" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">today函数也可以与datetime对象一起使用。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="ed8b" class="mc md it nb b gy nf ng l nh ni">datetime.today()<br/>datetime.datetime(2021, 4, 13, 16, 34, 45, 137530)</span><span id="e2a6" class="mc md it nb b gy nj ng l nh ni">print(datetime.today())<br/>2021-04-13 16:35:49.965258</span></pre><p id="3bc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果打印datetime对象，输出将以更结构化的方式显示。</p><p id="7976" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就像日期和时间对象一样，可以提取日期时间对象的各个属性。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="1d09" class="mc md it nb b gy nf ng l nh ni">mydatetime = datetime(2021, 1, 14, 16, 20)</span><span id="4a57" class="mc md it nb b gy nj ng l nh ni">print(mydatetime.month)<br/>1</span><span id="c90a" class="mc md it nb b gy nj ng l nh ni">print(mydatetime.minute)<br/>20</span></pre><p id="d778" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以计算两个datetime对象之间的差异。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="25a7" class="mc md it nb b gy nf ng l nh ni">mydatetime1 = datetime(2021, 1, 14, 16, 20)<br/>mydatetime2 = datetime(2021, 1, 10)</span><span id="517b" class="mc md it nb b gy nj ng l nh ni">diff = mydatetime1 - mydatetime2</span><span id="7a50" class="mc md it nb b gy nj ng l nh ni">print(diff)<br/>4 days, 16:20:00</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="b2c4" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">时间增量</h2><p id="1525" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Timedelta对象表示一个持续时间，因此我们可以使用它们来计算两个日期或时间之间的差异。</p><p id="8cdc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个timedelta对象，表示6天的持续时间。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="e612" class="mc md it nb b gy nf ng l nh ni">mydelta = timedelta(days=6)</span><span id="d6cd" class="mc md it nb b gy nj ng l nh ni">print(mydelta)<br/>6 days, 0:00:00</span></pre><p id="5d28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以用周、天、小时、分钟、秒和微秒来创建timedelta对象。输出以天数和小时-分钟-秒的组合形式显示。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="3071" class="mc md it nb b gy nf ng l nh ni">mydelta1 = timedelta(minutes=40)<br/>print(mydelta1)<br/>0:40:00</span><span id="88eb" class="mc md it nb b gy nj ng l nh ni">mydelta2 = timedelta(weeks=4)<br/>print(mydelta2)<br/>28 days, 0:00:00</span></pre><p id="2cb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不同的单位也可以组合起来创建一个timedelta对象。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="4c9a" class="mc md it nb b gy nf ng l nh ni">mydelta3 = timedelta(days=2, hours=4)<br/>print(mydelta3)<br/>2 days, 4:00:00</span></pre><p id="c2e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经看到了如何计算两个日期或日期时间对象之间的差异。timedelta对象的另一个常见用例是修改它们。</p><p id="2e19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以给一个日期加上一个特定的持续时间来计算未来的日期。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="b9a7" class="mc md it nb b gy nf ng l nh ni">mydate = date.today()<br/>print(mydate)<br/>2021-04-13</span><span id="692e" class="mc md it nb b gy nj ng l nh ni">two_weeks_from_now = mydate + timedelta(weeks=2)<br/>print(two_weeks_from_now)<br/>2021-04-20</span></pre><p id="9a5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以使用timedelta对象修改datetime对象。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="b71a" class="mc md it nb b gy nf ng l nh ni">mydate = datetime(2020, 10, 4, 15, 10)<br/>print(mydate)<br/>2020-10-04 15:10:00</span><span id="6d57" class="mc md it nb b gy nj ng l nh ni">past_date = mydate - timedelta(weeks=7, days=4)<br/>print(past_date)<br/>2020-08-12 15:10:00</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="e8da" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">结论</h2><p id="d29f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Python的Datetime模块提供了许多不同的方法来操作日期和时间。它在处理日期时非常方便。</p><p id="e986" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经介绍了datetime模块的4种主要对象类型。这些对象是日期、时间、日期时间和时间增量。datetime对象是日期和时间对象的一种组合。它可以存储从几年到几微秒的信息。</p><p id="6f24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">datetime模块还提供了其他一些对象类型，如timezone、strftime和strptime。</p><p id="ac5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>