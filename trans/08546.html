<html>
<head>
<title>How to Detect Seasonality, Outliers, and Changepoints in Your Time Series</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何检测时间序列中的季节性、异常值和变化点</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-detect-seasonality-outliers-and-changepoints-in-your-time-series-5d0901498cff?source=collection_archive---------1-----------------------#2021-08-07">https://towardsdatascience.com/how-to-detect-seasonality-outliers-and-changepoints-in-your-time-series-5d0901498cff?source=collection_archive---------1-----------------------#2021-08-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4d3a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">只需要Kats和几行代码</h2></div><h1 id="22ea" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">动机</h1><p id="f01e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">你有没有看过一个时间序列，想知道其中是否有重复的模式、异常值或变化点？</p><p id="5d0e" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">当我查看2021年1月至8月每天有多少用户浏览我的页面时，我问了同样的问题。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="3a61" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">当看到上面的图表时，我想知道:</p><ul class=""><li id="121a" class="mj mk it lc b ld lw lg lx lj ml ln mm lr mn lv mo mp mq mr bi translated">我的页面平均浏览量有变化吗？如果是，什么时候？</li><li id="2e82" class="mj mk it lc b ld ms lg mt lj mu ln mv lr mw lv mo mp mq mr bi translated">我的时间序列中有异常值吗？如果是，什么时候？</li><li id="c142" class="mj mk it lc b ld ms lg mt lj mu ln mv lr mw lv mo mp mq mr bi translated">我怀疑有一些时间比其他时间有更多的活跃用户。这是真的吗？</li></ul><p id="f09d" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">如果您能像下面这样用几行代码就能检测出时间序列中的突然变化，那不是很好吗？</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi mx"><img src="../Images/319e4fe5c9aed6f05f691287be3efb85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nJAj2bkCWEtaeVwj7hu3Wg.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">作者图片</p></figure><p id="496d" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">这就是Kats派上用场的时候。在<a class="ae mb" rel="noopener" target="_blank" href="/kats-a-generalizable-framework-to-analyze-time-series-data-in-python-3c8d21efe057">的上一篇文章</a>中，我介绍了Kats提供的一些分析时间序列的有用方法。在本文中，我将更深入地研究Kats的检测模块。</p><h1 id="d1e9" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">什么是Kats？</h1><p id="6a23" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><a class="ae mb" href="https://facebookresearch.github.io/Kats/" rel="noopener ugc nofollow" target="_blank"> Kats </a>是一个轻量级的、易于使用的、通用的框架，用Python来执行时间序列分析，由脸书研究院开发。您可以将Kats视为Python中时间序列分析的一站式商店。</p><p id="6a3d" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">要安装Kats，请键入:</p><pre class="mc md me mf gt ni nj nk nl aw nm bi"><span id="7d9a" class="nn kj it nj b gy no np l nq nr">pip install --upgrade pip<br/>pip install kats==0.1 ax-platform==0.2.3 statsmodels==0.12.2</span></pre><p id="4b19" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我把我的页面浏览量数据上传到了Google Drive上，这样你就可以自己摆弄这些数据了。要下载数据，请使用gdown:</p><pre class="mc md me mf gt ni nj nk nl aw nm bi"><span id="18dd" class="nn kj it nj b gy no np l nq nr">pip install gdown</span></pre><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ns mi l"/></div></figure><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="0123" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">上面的数据显示了从6月1日到8月2日，我的网站<strong class="lc iu">每小时</strong>的访问量。让我们想象一下这些数据是什么样子的。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ns mi l"/></div></figure><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nt"><img src="../Images/906aa2215ba6c21e733396927eae99f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YchhMhsYfC6_aEmWhswUMg.png"/></div></div></figure><p id="2203" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我怀疑每天都有正常运行时间和停机时间。让我们通过放大2021年6月1日的数据来验证一下:</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ns mi l"/></div></figure><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nu"><img src="../Images/f6a209bfe9867b2038dc888c2007800f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BLAcPNzQ-Hkguy0NFVsuGQ.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">作者图片</p></figure><p id="7db6" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">这里有一些模式。让我们看看2021年6月2日是否能看到同样的模式:</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nv"><img src="../Images/b340b71ccae2a29d6cba4b2edb38b84e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_ohQ4MUwuk6Iq__WTp8Xkg.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">作者图片</p></figure><p id="5f24" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">看起来这里有一些重复的模式，但不是很容易看到。上图中混合了季节性、趋势和噪声。让我们使用Kats将时间序列分解成趋势、季节性和残差。</p><h1 id="e550" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">检测季节性</h1><p id="dcac" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">什么是季节性？季节性是时间序列的一个特征，在该时间序列中，类似的变化以小于一年的特定规则间隔发生，例如每小时、每天、每周或每月。</p><h2 id="0ab2" class="nn kj it bd kk nw nx dn ko ny nz dp ks lj oa ob ku ln oc od kw lr oe of ky og bi translated">时间序列分解-季节性分解</h2><p id="38d7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">要使用Kats分解时间序列，首先要构建一个时间序列对象。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ns mi l"/></div></figure><p id="f384" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">接下来，将时间序列分解为3个不同的部分:</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ns mi l"/></div></figure><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi oh"><img src="../Images/4b50b809438756725048b5f8676d5e11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*unpNaX-Ir77WM8YjYyxZKA.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">作者图片</p></figure><p id="6cfb" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">啊哈！看起来数据中有季节性。让我们仔细看看6月1日的季节性部分。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ns mi l"/></div></figure><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi oi"><img src="../Images/def4a791dd80b87aadacc50db091e035.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VzS5HLZPcpDpfcOVIdOsuw.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">作者图片</p></figure><p id="3000" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">让我们再来看看6月2日的季节性:</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ns mi l"/></div></figure><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi oj"><img src="../Images/bf8a738b1a262bc83c9e0414eafa3cf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a8HSZbadYIcIpvQGstzDBA.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">作者图片</p></figure><p id="03c7" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">6月3日时间序列:</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ns mi l"/></div></figure><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi oj"><img src="../Images/b9180071bb10c93c3ddf0302631c6675.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sTYautsJhK7kC647QlvCTQ.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">作者图片</p></figure><p id="696e" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">现在格局清晰多了！早上8点到晚上12点是观看人数的高峰。这种模式是有意义的，因为我每天早上8点左右写一篇新文章，早上10点发一篇时事通讯。</p><p id="5d8e" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">除了手动查看图表，有没有一种测试可以让我们确认时间序列中确实存在季节性？是的，我们可以用Kats的快速检测器来做。</p><h2 id="0f71" class="nn kj it bd kk nw nx dn ko ny nz dp ks lj oa ob ku ln oc od kw lr oe of ky og bi translated">快速傅立叶变换季节性检测器</h2><p id="2647" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">除了分解时间序列，Kats还允许我们使用快速傅立叶变换来检测季节性，并找出潜在的周期长度。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ns mi l"/></div></figure><pre class="mc md me mf gt ni nj nk nl aw nm bi"><span id="7e27" class="nn kj it nj b gy no np l nq nr">{'seasonality_presence': True, 'seasonalities': [56.0, 24.0]}</span></pre><p id="8c78" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">酷！现在我们知道时间序列中确实存在季节性，季节性要么是24小时，要么是56小时。24小时季节性证实了我们之前看到的。</p><h1 id="6006" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">检测变化点</h1><h2 id="13ef" class="nn kj it bd kk nw nx dn ko ny nz dp ks lj oa ob ku ln oc od kw lr oe of ky og bi translated">CUSUMDetector —检测平均值的向上/向下移动</h2><p id="e7b2" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">现在，我好奇的另一个问题是，是否存在一个<strong class="lc iu">期，在此之后，每天的平均浏览量</strong>会发生变化。</p><p id="011d" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">要回答这个问题，先从获取1月1日到8月2日的<strong class="lc iu">日报</strong>数据开始:</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ns mi l"/></div></figure><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="08b3" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">可视化数据:</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ns mi l"/></div></figure><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="03a8" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">看起来在2021年4月初的某个地方有一个手段的转变。让我们用CUSUM来确认。</p><p id="be0a" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">CUSUM是一种测试变点是否具有统计显著性的方法。Kats允许您将累计方法与累计检测器一起使用。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ns mi l"/></div></figure><pre class="mc md me mf gt ni nj nk nl aw nm bi"><span id="9e27" class="nn kj it nj b gy no np l nq nr">TimeSeriesChangePoint(start_time: 2021-04-01 00:00:00, <br/>                      end_time: 2021-04-01 00:00:00, <br/>                      confidence: 0.9999999999999967)</span></pre><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ok"><img src="../Images/aca35c83b5928e3f47e8046c214f7741.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qocgOdkpmSmfIDBCDrui8w.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">作者图片</p></figure><p id="d21c" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">是啊！现在我们被证实在4月1日有一个手段的转变。</p><h2 id="d4a4" class="nn kj it bd kk nw nx dn ko ny nz dp ks lj oa ob ku ln oc od kw lr oe of ky og bi translated">BOCPDetector —检测突然的变化</h2><p id="c0cd" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">贝叶斯在线变化点检测(BOCPD)是一种<strong class="lc iu">检测持续时间较长的时间序列中的突然变化</strong>的方法。BOCPD的一些属性是:</p><ul class=""><li id="4d45" class="mj mk it lc b ld lw lg lx lj ml ln mm lr mn lv mo mp mq mr bi translated"><strong class="lc iu">在线模型:</strong>这个检测只需要看前面几步，而不是看整个系列来做预测。随着新数据的到来，它会修正自己的预测。</li><li id="7578" class="mj mk it lc b ld ms lg mt lj mu ln mv lr mw lv mo mp mq mr bi translated"><strong class="lc iu">贝叶斯模型:</strong>您可以指定关于变点概率的先验信念。例如，如果您认为1%的数据将是一个变化点，那么您可以设置<code class="fe ol om on nj b">changepoint_prior=0.01</code>。</li></ul><p id="558c" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">目前，Kats支持3种概率模型:</p><ul class=""><li id="826a" class="mj mk it lc b ld lw lg lx lj ml ln mm lr mn lv mo mp mq mr bi translated">正态分布</li><li id="6ef3" class="mj mk it lc b ld ms lg mt lj mu ln mv lr mw lv mo mp mq mr bi translated">趋势变化分布</li><li id="67fe" class="mj mk it lc b ld ms lg mt lj mu ln mv lr mw lv mo mp mq mr bi translated">泊松过程模型。</li></ul><p id="888e" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">在此找到BOCPDetector <a class="ae mb" href="https://facebookresearch.github.io/Kats/api/kats.detectors.bocpd.html#kats.detectors.bocpd.BOCPDetector" rel="noopener ugc nofollow" target="_blank">中所有可用的参数。</a></p><p id="e017" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我们将使用正态分布作为潜在的概率模型。因为我相信我的数据中大约有1%是一个变点，所以我将设置<code class="fe ol om on nj b">changepoint_prior=0.01</code>。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ns mi l"/></div></figure><pre class="mc md me mf gt ni nj nk nl aw nm bi"><span id="11ed" class="nn kj it nj b gy no np l nq nr">TimeSeriesChangePoint(start_time: 2021-06-14T00:00:00.000000000,<br/>                      end_time: 2021-06-14T00:00:00.000000000, <br/>                      confidence: 0.74723810504334)</span><span id="475b" class="nn kj it nj b gy oo np l nq nr">TimeSeriesChangePoint(start_time: 2021-06-23T00:00:00.000000000,<br/>                      end_time: 2021-06-23T00:00:00.000000000,  <br/>                      confidence: 0.5250604974512938)</span></pre><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nu"><img src="../Images/f4c4e990816f8896daeff9ce25d87136.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LJREhPIN9kAWjEXxgeF3bg.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">作者图片</p></figure><p id="2678" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">变化点在2021年6月14日和2021年6月23日。这个结果是有意义的，因为我们看到2021年6月14日的浏览量显著增加，而2021年6月23日的浏览量下降。</p><h1 id="b326" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">异常检测和去除器</h1><p id="0341" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">剔除异常值在时间序列中非常重要，因为异常值会给下游处理带来问题。幸运的是，Kats使得检测和去除异常值变得很容易。</p><p id="4d25" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">Kats的异常值检测算法是这样工作的:</p><ol class=""><li id="ddd8" class="mj mk it lc b ld lw lg lx lj ml ln mm lr mn lv op mp mq mr bi translated">使用季节分解来分解时间序列</li><li id="46de" class="mj mk it lc b ld ms lg mt lj mu ln mv lr mw lv op mp mq mr bi translated">去除趋势和季节性以生成剩余时间序列</li><li id="33a3" class="mj mk it lc b ld ms lg mt lj mu ln mv lr mw lv op mp mq mr bi translated">检测残差中超出四分位数范围3倍的点</li></ol><p id="e7f8" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">让我们使用OulierDectector来尝试一下这种检测算法:</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ns mi l"/></div></figure><pre class="mc md me mf gt ni nj nk nl aw nm bi"><span id="2b26" class="nn kj it nj b gy no np l nq nr">[Timestamp('2021-04-03 00:00:00'),<br/> Timestamp('2021-06-20 00:00:00'),<br/> Timestamp('2021-06-21 00:00:00')]</span></pre><p id="9dc4" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">不错！我们能够检测2021年4月3日、2021年6月20日和2021年6月21日的异常值。</p><p id="66c3" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">现在我们已经检测到了这些异常值，让我们使用<code class="fe ol om on nj b">remover</code>方法移除它们。我们还将使用新的线性插值替换移除的值:</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ns mi l"/></div></figure><p id="51cf" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">绘制原始时间序列和剔除异常值的新时间序列。</p><figure class="mc md me mf gt mg"><div class="bz fp l di"><div class="ns mi l"/></div></figure><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi oq"><img src="../Images/f63382678d5f11d175f88ff8331e65e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I9hJJrWzAWziar7IZz_7cg.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">作者图片</p></figure><p id="5fcf" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">酷！从上图中我们可以看出，剔除异常值后的时间序列(橙色线)与2021年4月3日、2021年6月20日和2021年6月21日的原始时间序列(蓝色线)不同。</p><p id="e70f" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">在新的时间序列中似乎没有显著的异常值。现在，您可以放心地将这个新的时间序列用于其他过程，例如预测。</p><h1 id="d0f4" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">结论</h1><p id="913a" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">恭喜你！您刚刚学习了如何使用Kats检测季节性、变化点和异常值。我希望这篇文章能给你在自己的时间序列中发现模式的动力。</p><p id="d464" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">您只需使用几行代码就可以获得有用的信息。还有什么比这更好的呢？</p><p id="4614" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">随意发挥，并在这里叉这篇文章的源代码:</p><div class="or os gp gr ot ou"><a href="https://github.com/khuyentran1401/Data-science/blob/master/time_series/google_analytics/google-analytics-analysis.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">数据科学/Google-analytics-analysis . ipynb at master khuyentran 1401/数据科学</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">收集有用的数据科学主题以及代码和文章-Data-science/Google-analytics-analysis . ipynb，网址为…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">github.com</p></div></div><div class="pd l"><div class="pe l pf pg ph pd pi nc ou"/></div></div></a></div></div><div class="ab cl pj pk hx pl" role="separator"><span class="pm bw bk pn po pp"/><span class="pm bw bk pn po pp"/><span class="pm bw bk pn po"/></div><div class="im in io ip iq"><p id="a7d9" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的算法和数据科学工具。你可以通过<a class="ae mb" href="https://www.linkedin.com/in/khuyen-tran-1401/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae mb" href="https://twitter.com/KhuyenTran16" rel="noopener ugc nofollow" target="_blank"> Twitter </a>与我联系。</p><p id="7b93" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">如果你想查看我写的所有文章的代码，请点击这里。在Medium上关注我，了解我的最新数据科学文章，例如:</p><div class="or os gp gr ot ou"><a rel="noopener follow" target="_blank" href="/similarity-encoding-for-dirty-categories-using-dirty-cat-d9f0b581a552"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">使用dirty_cat对脏类别进行相似性编码</h2><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">towardsdatascience.com</p></div></div><div class="pd l"><div class="pq l pf pg ph pd pi nc ou"/></div></div></a></div><div class="or os gp gr ot ou"><a rel="noopener follow" target="_blank" href="/kats-a-generalizable-framework-to-analyze-time-series-data-in-python-3c8d21efe057"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">kats:Python中分析时间序列数据的通用框架</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">预测、检测变化点、异常，并获得时间序列中的关键统计数据</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">towardsdatascience.com</p></div></div><div class="pd l"><div class="pr l pf pg ph pd pi nc ou"/></div></div></a></div><div class="or os gp gr ot ou"><a rel="noopener follow" target="_blank" href="/pydash-a-bucket-of-missing-python-utilities-5d10365be4fc"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">Pydash:缺少Python实用程序的厨房水槽</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">以函数的方式使用Python</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">towardsdatascience.com</p></div></div><div class="pd l"><div class="ps l pf pg ph pd pi nc ou"/></div></div></a></div><div class="or os gp gr ot ou"><a rel="noopener follow" target="_blank" href="/how-to-sketch-your-data-science-ideas-with-excalidraw-a993d049f55c"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">如何用Excalidraw勾画您的数据科学想法</h2><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">towardsdatascience.com</p></div></div><div class="pd l"><div class="pt l pf pg ph pd pi nc ou"/></div></div></a></div></div></div>    
</body>
</html>