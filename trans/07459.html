<html>
<head>
<title>My Unfair Advantages in Computing Resources that Are Accessible to Most People</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我在大多数人都能使用的计算资源上的不公平优势</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/my-unfair-advantage-in-computing-resources-that-are-accessible-to-most-people-5bb95932f247?source=collection_archive---------26-----------------------#2021-07-07">https://towardsdatascience.com/my-unfair-advantage-in-computing-resources-that-are-accessible-to-most-people-5bb95932f247?source=collection_archive---------26-----------------------#2021-07-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="70e3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何将Google Colab推向极限</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0efa7807f889122e5ffd89937e041619.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cG8bgvXNA31Ivtbe"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@patrickian4?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">帕特里克·福尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="0204" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在参加研究生机器学习课程时，开始使用谷歌协作实验室(Colab)，这是一个附带免费计算资源的python笔记本。</p><p id="6452" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在最初的一两个月里，这是相当毁灭性的，因为相当比例的学生可以从他们的实验室或系里访问计算资源。试图通过免费GPU获得更高结果的学生看到并感受到了这种差异。</p><p id="40d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">起初我也在其中，但幸运的是，有从前的学生传下来的提示和技巧，或在同龄人之间分享，大多数人都愿意帮助。我也开发了一些我自己的技术，为泳池做出了贡献。</p><p id="bd27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最终Colab成了我手中越来越强大的工具，我也能过得去了。我甚至幸运地在我们的几个Kaggle比赛中连续几天名列第一。</p><h1 id="540e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">知道你在做什么图形处理器</h1><p id="a6db" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">您可以通过运行<code class="fe ms mt mu mv b">!nvidia-smi</code>来实现这一点。举个下面的例子，我正在用一辆特斯拉K80。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mw"><img src="../Images/5356b6ea336e96624711fc73f1a9fbd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tive4zProL7b1dOeDHgx6g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">跑步！尼维迪亚-斯米</p></figure><p id="658e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在撰写本文时，Colab提供了4种类型的GPU，下面按照一般性能从高到低列出了它们。</p><ol class=""><li id="b9cd" class="mx my it lb b lc ld lf lg li mz lm na lq nb lu nc nd ne nf bi translated">V100</li><li id="4322" class="mx my it lb b lc ng lf nh li ni lm nj lq nk lu nc nd ne nf bi translated">T4</li><li id="f9a4" class="mx my it lb b lc ng lf nh li ni lm nj lq nk lu nc nd ne nf bi translated">P100</li><li id="fb7b" class="mx my it lb b lc ng lf nh li ni lm nj lq nk lu nc nd ne nf bi translated">K80</li></ol><p id="07ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">GPU会在每次会话时重新启动，并且通过单击左上角工具栏上的运行时&gt;恢复出厂设置运行时来重新启动会话。</p><h1 id="512c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">并非所有时段都生来平等</h1><p id="52d2" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">人们发现，获得更好的GPU和更长的运行时间的可能性并不固定。从我和我周围的人分享的经验来看，一些客户享受更长的会话，长达3到9个小时，而其他人在达到略高于1个小时后就停止了。</p><p id="e0ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过跨不同帐户的测试，我发现允许的运行时间与两个因素最相关。</p><h2 id="572c" class="nl lw it bd lx nm nn dn mb no np dp mf li nq nr mh lm ns nt mj lq nu nv ml nw bi translated">1.哪个谷歌账号在用Colab</h2><p id="e65d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">查看了20多个谷歌账户和100多次运行，发现谷歌对每个账户使用该服务的时间有不同的标准。</p><p id="6432" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我没有找到任何可靠的预测一个帐户的持久性。起初，人们很容易认为活跃了一段时间的账户比新创建的实体更持久，教育账户也比免费的谷歌账户更持久。令人惊讶是，这些假设没有一个被证明是正确的，我经常看到类似的客户资料以非常不同的方式处理。</p><p id="b28d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基于它的不可预测性，我会说，最好的方法来找出一个帐户是否是好的，将得到你的手脏，只是测试自己。通过比较不同的账户，你应该能够决定哪个账户是你的深度学习项目的最佳选择。</p><h2 id="598a" class="nl lw it bd lx nm nn dn mb no np dp mf li nq nr mh lm ns nt mj lq nu nv ml nw bi translated">2.客户多久使用一次Colab</h2><p id="e33f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">谷歌似乎也采用了一种“冷静”的政策:最近在Colab中使用较多的账户通常比最近被滥用的账户训练时间更长。</p><p id="ff2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，前一点仍然适用，每个帐户在冷却之前使用GPU的起始配额是不同的。一些帐户在最初的几次会议后就被禁止了，而其他人则喜欢默认分配到T4 GPU，可以训练8或9个小时进行多次跑步。</p><p id="b007" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简而言之，如果你在Colab上遇到了使用问题，考虑改变使用帐户，这可能会有所帮助。</p><h1 id="c51b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">用一点编码保存训练进度</h1><p id="5572" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在默认设置中，会话中发生的一切，包括训练参数或检查点，都只是临时存储在colab上，会话结束后就会消失。以下是一些防止悲剧发生的措施。</p><h2 id="1ac3" class="nl lw it bd lx nm nn dn mb no np dp mf li nq nr mh lm ns nt mj lq nu nv ml nw bi translated">在Google drive上安装您的内容</h2><p id="c26c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在Colab的左侧，点击“文件”&gt;“安装驱动器”,并按照说明将文件保存或加载到您的google drive。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/dfe96220f6684a8d79ea50a68dbd0dc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*fixXFLUJ4yvhmc4NYsk3Fw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">文件&gt;安装驱动器</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/c8fe194afcdc1d43db42415eb191e1f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w4H6FkMJpbnbryq8DvL7tw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">装载驱动器提示</p></figure><p id="293f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe ms mt mu mv b">%cd content/drive/MyDrive/the_name_of_folder</code>在你的驱动器中移动目录。</p><p id="d68c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成后，会话期间创建的所有文件都将自动保存到帐户的Google drive中，并且不会在会话结束后立即消失。</p><h2 id="2d6e" class="nl lw it bd lx nm nn dn mb no np dp mf li nq nr mh lm ns nt mj lq nu nv ml nw bi translated">客户对客户的培训</h2><p id="3d02" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">只需在Colab上登录不同的Google帐户，就可以持续不断地进行培训，但要安装在同一个帐户的Google drive上。</p><p id="6946" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，这是假设你熟悉如何保存训练检查点，从我的角度来看，这对初学者来说并不容易。我建议从<a class="ae ky" href="https://pytorch.org/tutorials/beginner/saving_loading_models.html" rel="noopener ugc nofollow" target="_blank"> Pytorch </a>的指南开始。</p><h1 id="1aa8" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">我最喜欢的订阅:Colab Pro</h1><p id="5824" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Colab为更快的GPU和更长的运行时间提供每月9.99美元的订阅计划，这通常是一笔相当不错的交易，除非你遇到问题。</p><p id="1911" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简而言之，您选择升级订阅的帐户对您将获得的体验至关重要。</p><p id="3f9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我是吃了苦头才知道的。一听到这个计划，我立即掏出我的卡，骑了上去。令人发指的是，用了不到1个小时，我的会话就被切断了，连不上GPU。</p><p id="4d12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">冷却一段时间后，我仍然可以使用它，但我在使用1小时左右后被切断。(与免费计划中的3-9小时相比)</p><p id="c393" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，我甚至没有得到最好的图形处理器。虽然通常分配给T4，但Colab Pro的默认分配是P100。</p><p id="1e57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">话虽如此，我还是想训练我的神经网络。我决定用一个不同的帐户再次订阅Pro，结果是体验好得多。在这个帐户下，我可以用以下好处进行训练。</p><h2 id="594d" class="nl lw it bd lx nm nn dn mb no np dp mf li nq nr mh lm ns nt mj lq nu nv ml nw bi translated">使用V100加快训练速度</h2><p id="8c1b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">V100很好。虽然很难量化有多好，但在我的一些NLP项目中，我可以看到它比T4快10倍。</p><p id="9127" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">快速不仅节省时间，有时还能发挥很大作用。有一次，我的最后期限是23小时，但通常需要24小时才能完成培训。我几乎要放弃了，但在最后的10个小时里，我上了V100，按时完成了。</p><h2 id="d954" class="nl lw it bd lx nm nn dn mb no np dp mf li nq nr mh lm ns nt mj lq nu nv ml nw bi translated">通宵训练</h2><p id="b156" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">只有在使用正确的帐号登录Pro后，我才能在训练过程中睡足8个小时。</p><h2 id="02b1" class="nl lw it bd lx nm nn dn mb no np dp mf li nq nr mh lm ns nt mj lq nu nv ml nw bi translated">不稳定互联网下的训练</h2><p id="3d03" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这也很难量化，但是当我的互联网被切断时，培训仍在继续，这在我的印象中与我们在免费计划中获得的不同。</p><h2 id="a496" class="nl lw it bd lx nm nn dn mb no np dp mf li nq nr mh lm ns nt mj lq nu nv ml nw bi translated">打开多个会话</h2><p id="2276" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在免费版中，你一次只能训练一个笔记本，而在付费版中，你有时可以训练多达三个标签。这同样不适用于每个账户，在我看来，这增加了被GPU禁止的几率。因此，我通常做一两个标签，它工作得很好。</p><h1 id="15fa" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">柯基和凯蒂</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/02f667ef16317f72db56c9856ca8b733.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*A_KzsscVsshte2rkzC11ZA.gif"/></div></div></figure><p id="8af4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，Colab附带了这个可爱的功能，除了让你保持愉快的心情工作更长时间之外，它什么也没做，我认为这是一个优势。你可以在设置&gt;杂项中找到它，然后点击Corgi模式/Kitty模式。</p><h1 id="99c9" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">最后的话</h1><p id="e605" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Colab让我的数据科学之旅变得有趣和可能，我希望你也会喜欢你的旅程。</p></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><p id="e9f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">中级会员资格使我有可能学到足够的知识，并为数据科学写作。<a class="ae ky" href="https://twanchen.medium.com/membership" rel="noopener">用我的个人链接</a>报名，然后在下面评论，我会给你发一个分享我全程的pdf。</p></div></div>    
</body>
</html>