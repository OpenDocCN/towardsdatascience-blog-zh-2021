<html>
<head>
<title>PyPy Is Faster than Python, but at What Cost?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PyPy比Python快，但代价是什么？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/pypy-is-faster-than-python-but-at-what-cost-12739bf2b8e9?source=collection_archive---------12-----------------------#2021-04-21">https://towardsdatascience.com/pypy-is-faster-than-python-but-at-what-cost-12739bf2b8e9?source=collection_archive---------12-----------------------#2021-04-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="1b0f" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">学习机</h2><div class=""/><div class=""><h2 id="128a" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">提示:绝对不适合数据科学项目</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/07b31e8ba7aeac5a5094e18aac691828.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ne_9n1OBA9sJkDA8"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">美国宇航局在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><div class="li lj gp gr lk ll"><a rel="noopener follow" target="_blank" href="/run-your-python-code-as-fast-as-c-4ae49935a826"><div class="lm ab fo"><div class="ln ab lo cl cj lp"><h2 class="bd jd gy z fp lq fr fs lr fu fw jc bi translated">像C语言一样快速运行您的Python代码</h2><div class="ls l"><h3 class="bd b gy z fp lq fr fs lr fu fw dk translated">如何在不做任何改变的情况下提高python代码的性能。</h3></div><div class="lt l"><p class="bd b dl z fp lq fr fs lr fu fw dk translated">towardsdatascience.com</p></div></div><div class="lu l"><div class="lv l lw lx ly lu lz lb ll"/></div></div></a></div><p id="69bc" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi mw translated">在过去的几天里，上面链接的故事在“媒体趋势”排行榜上排名第一。当我第一次偶然发现它时，它只有不到100次鼓掌。现在它有成千上万个这样的问题，我觉得有必要把事情搞清楚。</p><p id="d5fd" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">这个故事的核心思想是使用PyPy而不是普通的Python。这将用PyPy替换默认的CPython解释器，PyPy据说比Python快得多，而且“没有任何改变”</p><p id="9032" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">然后作者给出了一个用Python和PyPy测量在一个循环内将0到100，000，000之间的整数相加所需时间的例子。这里，Python需要9.28秒，而PyPy需要0.22秒。</p><p id="0dba" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">但是作者忽略了一个重要的东西。</p><blockquote class="nf"><p id="fd4b" class="ng nh it bd ni nj nk nl nm nn no mv dk translated">它不支持一些机器学习库。</p></blockquote><p id="5894" class="pw-post-body-paragraph ma mb it mc b md np kd mf mg nq kg mi mj nr ml mm mn ns mp mq mr nt mt mu mv im bi translated">考虑到TDS出版了它，这是一件奇怪的事情。</p><p id="1e98" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">一些读者可能会兴奋地认为，如果9.28秒和0.22秒的比较成立，他们可以将机器学习模型的训练时间缩短40倍以上。</p><p id="a4a1" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">在现实中，这是他们大多数人都会经历的。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nu"><img src="../Images/fd32c616cc6d2016804cb23334866e5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ETWh8QWdZim71fpw4S67Mg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者对文章的评论截图。</p></figure><p id="970f" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">原因是大多数机器学习库使用PyPy不支持的C API。</p><p id="e6d0" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">有些人请求对流行的ML库提供PyPy支持，但是他们似乎没有任何进展。下面是2019年开放的关于PyTorch的PyPy支持的GitHub问题。</p><div class="li lj gp gr lk ll"><a href="https://github.com/pytorch/pytorch/issues/17835" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab fo"><div class="ln ab lo cl cj lp"><h2 class="bd jd gy z fp lq fr fs lr fu fw jc bi translated">PyPy支持问题#17835 pytorch/pytorch</h2><div class="ls l"><h3 class="bd b gy z fp lq fr fs lr fu fw dk translated">这是2019年3月9日引用的facebook-github-bot添加了引用此问题的提交2019年3月10日摘要…</h3></div><div class="lt l"><p class="bd b dl z fp lq fr fs lr fu fw dk translated">github.com</p></div></div><div class="lu l"><div class="nv l lw lx ly lu lz lb ll"/></div></div></a></div><p id="84e2" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">这是GitHub的另一个问题，关于2015年TensorFlow的同一问题。</p><div class="li lj gp gr lk ll"><a href="https://github.com/tensorflow/tensorflow/issues/252" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab fo"><div class="ln ab lo cl cj lp"><h2 class="bd jd gy z fp lq fr fs lr fu fw jc bi translated">使TensorFlow与PyPy问题#252 tensorflow/tensorflow兼容</h2><div class="ls l"><h3 class="bd b gy z fp lq fr fs lr fu fw dk translated">我知道这不是当务之急，要实现它还有很长的路要走；但是让TF兼容PyPy会超级酷…</h3></div><div class="lt l"><p class="bd b dl z fp lq fr fs lr fu fw dk translated">github.com</p></div></div><div class="lu l"><div class="nw l lw lx ly lu lz lb ll"/></div></div></a></div><p id="358e" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">Scikit-learn在他们的FAQ 中声明<a class="ae lh" href="https://scikit-learn.org/stable/faq.html#do-you-support-pypy" rel="noopener ugc nofollow" target="_blank">他们对PyPy有“实验支持”,但当前最先进的机器学习模型很可能会使用PyTorch、TensorFlow甚至Transformers包，而不是scikit-learn。</a></p><p id="f7f8" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">也就是说，我认为在您的数据科学项目中使用PyPy是不可行的，甚至是不可能的。</p><p id="f745" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">您必须检查您的项目使用的所有包是否都受PyPy支持。关于Python包与PyPy兼容性的完整列表，您可以访问下面的页面。</p><div class="li lj gp gr lk ll"><a href="http://packages.pypy.org/" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab fo"><div class="ln ab lo cl cj lp"><h2 class="bd jd gy z fp lq fr fs lr fu fw jc bi translated">PyPy包装</h2><div class="ls l"><h3 class="bd b gy z fp lq fr fs lr fu fw dk translated">PyPy是Python语言的一种快速、兼容的替代实现。几乎所有的Python包都会安装…</h3></div><div class="lt l"><p class="bd b dl z fp lq fr fs lr fu fw dk translated">packages.pypy.org</p></div></div></div></a></div><h1 id="d0a1" class="nx ny it bd nz oa ob oc od oe of og oh ki oi kj oj kl ok km ol ko om kp on oo bi translated">结论</h1><p id="e60c" class="pw-post-body-paragraph ma mb it mc b md op kd mf mg oq kg mi mj or ml mm mn os mp mq mr ot mt mu mv im bi translated">目前，还不能使用PyPy作为Python数据科学项目的解释器。至少现在是这样。</p><p id="46ff" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">很多机器学习库，如Torch和TensorFlow，都依赖于与C库的兼容性，而PyPy在撰写本文时还不支持C库。</p><p id="e9f2" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">对我来说，我使用Python编写小脚本来实现自动化、抓取网站和机器学习。在所有用例中，我看不出PyPy在较小的任务中有什么不同，缺乏对机器学习库的支持绝对是一个障碍。</p><p id="8442" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">其他用例实际上可能受益于PyPy，但是您需要在替换常规Python之前评估您的代码。使用PyPy意味着限制您的代码使用一组受支持的包，而不是Python可用的完整包。</p><p id="39ee" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">回顾过去，PyPy在几年前不支持熊猫和NumPy，但是现在它支持它们。因此，将来有可能会有更多的库支持PyPy或被PyPy支持，但肯定不是在不久的将来。</p></div><div class="ab cl ou ov hx ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="im in io ip iq"><p id="1796" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">感谢阅读！这里有一些我的其他故事，你可能会喜欢。</p><div class="li lj gp gr lk ll"><a href="https://medium.com/swlh/the-one-tool-that-every-machine-learning-engineer-should-master-68aecd920b0" rel="noopener follow" target="_blank"><div class="lm ab fo"><div class="ln ab lo cl cj lp"><h2 class="bd jd gy z fp lq fr fs lr fu fw jc bi translated">每个机器学习工程师都应该掌握的工具</h2><div class="ls l"><h3 class="bd b gy z fp lq fr fs lr fu fw dk translated">你每天都在使用它，没有注意。</h3></div><div class="lt l"><p class="bd b dl z fp lq fr fs lr fu fw dk translated">medium.com</p></div></div><div class="lu l"><div class="pb l lw lx ly lu lz lb ll"/></div></div></a></div><div class="li lj gp gr lk ll"><a rel="noopener follow" target="_blank" href="/maybe-its-time-to-upgrade-your-terminal-experience-a9e12b2af77"><div class="lm ab fo"><div class="ln ab lo cl cj lp"><h2 class="bd jd gy z fp lq fr fs lr fu fw jc bi translated">也许是时候升级你的终端体验了</h2><div class="ls l"><h3 class="bd b gy z fp lq fr fs lr fu fw dk translated">默认的MacOS终端不适合你，也不适合任何人。</h3></div><div class="lt l"><p class="bd b dl z fp lq fr fs lr fu fw dk translated">towardsdatascience.com</p></div></div><div class="lu l"><div class="pc l lw lx ly lu lz lb ll"/></div></div></a></div><div class="li lj gp gr lk ll"><a rel="noopener follow" target="_blank" href="/5-things-i-learned-from-my-first-time-working-with-big-data-a6193deb982f"><div class="lm ab fo"><div class="ln ab lo cl cj lp"><h2 class="bd jd gy z fp lq fr fs lr fu fw jc bi translated">我从第一次使用大数据中学到的5件事</h2><div class="ls l"><h3 class="bd b gy z fp lq fr fs lr fu fw dk translated">你从事过大数据或“大数据”方面的工作吗？</h3></div><div class="lt l"><p class="bd b dl z fp lq fr fs lr fu fw dk translated">towardsdatascience.com</p></div></div><div class="lu l"><div class="pd l lw lx ly lu lz lb ll"/></div></div></a></div></div><div class="ab cl ou ov hx ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="im in io ip iq"><p id="cbf5" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">《学习机》是一系列关于我学到的东西的故事，我认为这些故事很有趣，值得分享。有时也是关于机器学习的基础。 <a class="ae lh" href="https://chandraseta.medium.com/subscribe" rel="noopener"> <em class="pe">获得定期更新</em> </a> <em class="pe">上新故事和</em> <a class="ae lh" href="https://chandraseta.medium.com/membership" rel="noopener"> <em class="pe">成为中等会员</em> </a> <em class="pe">阅读无限故事。</em></p><div class="li lj gp gr lk ll"><a href="https://chandraseta.medium.com/membership" rel="noopener follow" target="_blank"><div class="lm ab fo"><div class="ln ab lo cl cj lp"><h2 class="bd jd gy z fp lq fr fs lr fu fw jc bi translated">成为媒体成员—里奥纳尔迪·钱德拉塞塔</h2><div class="ls l"><h3 class="bd b gy z fp lq fr fs lr fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事</h3></div><div class="lt l"><p class="bd b dl z fp lq fr fs lr fu fw dk translated">chandraseta.medium.com</p></div></div><div class="lu l"><div class="pf l lw lx ly lu lz lb ll"/></div></div></a></div></div></div>    
</body>
</html>