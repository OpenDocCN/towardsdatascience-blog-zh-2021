<html>
<head>
<title>How to Predict and Visualize Data in one Chart</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在一个图表中预测和可视化数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-predict-and-visualize-data-in-one-chart-62901cecbd70?source=collection_archive---------23-----------------------#2021-05-08">https://towardsdatascience.com/how-to-predict-and-visualize-data-in-one-chart-62901cecbd70?source=collection_archive---------23-----------------------#2021-05-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/2eb03f4752e8d0549d7061ea1ef13c64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W0V1hhp8jstY4orD1_hD9Q.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">蒂姆·波格丹诺夫在<a class="ae jg" href="https://unsplash.com/collections/95135508/medium/af07ddeda5faed6872d60437a48d9819?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h2 id="fbe5" class="jh ji jj bd b dl jk jl jm jn jo jp dk jq translated" aria-label="kicker paragraph">教程-预测-R</h2><div class=""/><div class=""><h2 id="d303" class="pw-subtitle-paragraph kp js jj bd b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dk translated">如何使用R和ggplot2以及线性回归的分步教程</h2></div><p id="a767" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在我最近的一个项目中，我被要求执行一个简单的线性回归来预测可能的价格发展。为了比较实际的价格发展，我们使用<a class="ae jg" href="https://en.wikipedia.org/wiki/Consumer_price_index" rel="noopener ugc nofollow" target="_blank">消费者价格指数</a>作为基线。本文将向您展示我如何尝试使用不同的数据集来实现这一点——使用ggplot2进行绘图，使用线性回归进行预测。</p><h1 id="98d5" class="md me jj bd mf mg mh mi mj mk ml mm mn ky mo kz mp lb mq lc mr le ms lf mt mu bi translated">1.设置</h1><p id="2a5f" class="pw-post-body-paragraph lh li jj lj b lk mv kt lm ln mw kw lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">我将简要解释我的设置，包括我正在使用的数据和R包。</p><h2 id="fc5f" class="na me jj bd mf nb nc dn mj nd ne dp mn lq nf ng mp lu nh ni mr ly nj nk mt jp bi translated">包装</h2><p id="bbdc" class="pw-post-body-paragraph lh li jj lj b lk mv kt lm ln mw kw lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">一般来说，我总是使用<a class="ae jg" href="https://www.tidyverse.org/" rel="noopener ugc nofollow" target="_blank"> Tidyverse包</a>。它包括像<a class="ae jg" href="https://ggplot2.tidyverse.org/" rel="noopener ugc nofollow" target="_blank"> ggplot2 </a>这样的软件包，以非常直观的方式创建美丽的图形，<a class="ae jg" href="https://dplyr.tidyverse.org/" rel="noopener ugc nofollow" target="_blank"> dplyr </a>使数据操作如此简单，等等。</p><p id="f886" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">此外，我使用了<a class="ae jg" href="https://github.com/jrnold/ggthemes" rel="noopener ugc nofollow" target="_blank"> ggthemes </a>包，为你的剧情提供了更多开箱即用的主题。</p><figure class="nl nm nn no gt iv"><div class="bz fp l di"><div class="np nq l"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><h2 id="f27e" class="na me jj bd mf nb nc dn mj nd ne dp mn lq nf ng mp lu nh ni mr ly nj nk mt jp bi translated">啤酒节啤酒价格和通货膨胀指数数据</h2><p id="1967" class="pw-post-body-paragraph lh li jj lj b lk mv kt lm ln mw kw lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">作为focus中的领先价格指数，我使用了世界上最大的啤酒节啤酒节的可用数据。该数据不仅包含啤酒价格信息，还包含游客数量、鸡肉价格和啤酒销量。</p><figure class="nl nm nn no gt iv"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="nl nm nn no gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nr"><img src="../Images/96299480fc188ec956309761ebfc3bab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ykynp6Uj_icznJ6sBXUCXA.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者创建的表(限于三行)</p></figure><p id="0ccb" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我将使用德国消费者价格指数的可用信息来比较啤酒价格的发展。</p><blockquote class="ns nt nu"><p id="2a00" class="lh li nv lj b lk ll kt lm ln lo kw lp nw lr ls lt nx lv lw lx ny lz ma mb mc im bi translated">“<strong class="lj jt">消费者价格指数</strong> ( <strong class="lj jt"> CPI </strong>)是衡量经济中<a class="ae jg" href="https://simple.wikipedia.org/wiki/Goods" rel="noopener ugc nofollow" target="_blank">消费品</a>和<a class="ae jg" href="https://simple.wikipedia.org/w/index.php?title=Services_marketing&amp;action=edit&amp;redlink=1" rel="noopener ugc nofollow" target="_blank">服务</a>的总体价格水平的一种方式。”—来源维基百科。</p></blockquote><p id="037f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">数据本身来自德国联邦统计局的<a class="ae jg" href="https://www-genesis.destatis.de/genesis/online?operation=sprachwechsel&amp;language=en" rel="noopener ugc nofollow" target="_blank">数据库。请注意</a><a class="ae jg" href="https://www-genesis.destatis.de/genesis/online?operation=result&amp;code=61111-0001&amp;deep=true#abreadcrumb" rel="noopener ugc nofollow" target="_blank">Verbraucherpreisindex</a>(VPI)是德语的消费价格指数(CPI)。</p><figure class="nl nm nn no gt iv"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="nl nm nn no gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nz"><img src="../Images/24af6eecd705e1a1e783a75c879bccc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fzrHAg44ydZOW4VAjb2dsw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">以1991年为基准年的消费者价格指数与啤酒价格一致；作者创建的表(限于三行)</p></figure><h1 id="bd72" class="md me jj bd mf mg mh mi mj mk ml mm mn ky mo kz mp lb mq lc mr le ms lf mt mu bi translated">2.我预测和可视化价格发展的工作流程</h1><h2 id="fe8b" class="na me jj bd mf nb nc dn mj nd ne dp mn lq nf ng mp lu nh ni mr ly nj nk mt jp bi translated">加入啤酒价格和VDI数据</h2><figure class="nl nm nn no gt iv"><div class="bz fp l di"><div class="np nq l"/></div></figure><h2 id="8521" class="na me jj bd mf nb nc dn mj nd ne dp mn lq nf ng mp lu nh ni mr ly nj nk mt jp bi translated">创建线性回归模型</h2><figure class="nl nm nn no gt iv"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="nl nm nn no gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oa"><img src="../Images/6c4fd282537e328f29f2df945ec5534a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Y7c0K1gxF7VttbbId5_ug.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">啤酒价格预测；作者创建的表(限于三行)</p></figure><figure class="nl nm nn no gt iv"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="nl nm nn no gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ob"><img src="../Images/cfe2f20e98c97837dea9f67c0edaa76a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oaS6Y3XkoCwrymilkmqjHQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">消费价格预测；由作者创建的表(限于三行)</p></figure><h2 id="bae6" class="na me jj bd mf nb nc dn mj nd ne dp mn lq nf ng mp lu nh ni mr ly nj nk mt jp bi translated">连接所有数据集</h2><figure class="nl nm nn no gt iv"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="nl nm nn no gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oc"><img src="../Images/9c543c32cc2dc3aea8ec56a1b4105abe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8WI8KV0gRfHZcBjHyyYO9g.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">联合数据集(原始数据、预测数据)；由作者创建的表(限于三行)</p></figure><h2 id="c159" class="na me jj bd mf nb nc dn mj nd ne dp mn lq nf ng mp lu nh ni mr ly nj nk mt jp bi translated">创建一个包括预测和置信水平的线形图</h2><figure class="nl nm nn no gt iv"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="nl nm nn no gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi od"><img src="../Images/1df4c955e8bdf098db0c53c86a632b08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7P6Iq_z3X58u-GrjF3lJgg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">啤酒节啤酒价格的发展与预测:作者创造的形象</p></figure><figure class="nl nm nn no gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oe"><img src="../Images/c03e786883ca5117bfccb09f1099bc31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aPEZKyX3YKTFEiOj_RVpUg.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">啤酒节啤酒价格的发展与预测:作者根据ggplot2结果创建的图像</p></figure><h1 id="d809" class="md me jj bd mf mg mh mi mj mk ml mm mn ky mo kz mp lb mq lc mr le ms lf mt mu bi translated">结论</h1><p id="3c92" class="pw-post-body-paragraph lh li jj lj b lk mv kt lm ln mw kw lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">本文向您展示了我如何可视化价格发展，以及我如何使用线性回归模型整合价格预测。当我查看结果时，我看到了两个明显的局限性。</p><p id="416c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">首先，我知道线性回归通常不是价格的最佳预测工具，尽管在这种情况下它可能是合理的(例如，预测每年啤酒节啤酒价格的变化)。尽管我在可视化中包括了误差幅度，但它并没有考虑未来每一年不确定性的增加。而这一点并没有在这个模型中体现出来。我认为有必要研究一下<a class="ae jg" href="https://otexts.com/fpp2/holt-winters.html" rel="noopener ugc nofollow" target="_blank">霍尔特-温特斯</a>预测方法和时间序列来应对这个问题。霍尔特-温特斯也考虑到了季节性。</p><p id="0cc5" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">其次，通过包含文本注释来创建可再现的图表会使代码变得非常混乱，难以维护(甚至难以编写)。此外，我不确定情节本身是否不平衡，是否充斥着所有的文本注释。</p><blockquote class="of"><p id="6eea" class="og oh jj bd oi oj ok ol om on oo mc dk translated">你认为我可以做些什么来改进这个解决方案？</p></blockquote><p id="2f65" class="pw-post-body-paragraph lh li jj lj b lk op kt lm ln oq kw lp lq or ls lt lu os lw lx ly ot ma mb mc im bi translated">如有任何问题和意见，请随时联系我。谢谢你。<strong class="lj jt">在这里找到更多我的文章</strong>:</p><ol class=""><li id="95de" class="ou ov jj lj b lk ll ln lo lq ow lu ox ly oy mc oz pa pb pc bi translated"><a class="ae jg" rel="noopener" target="_blank" href="/create-beautiful-art-from-your-personal-data-9dc0abfeeaf">学习如何从你的个人资料中创造美丽的艺术作品</a></li><li id="aac1" class="ou ov jj lj b lk pd ln pe lq pf lu pg ly ph mc oz pa pb pc bi translated"><a class="ae jg" rel="noopener" target="_blank" href="/how-to-visualize-your-runners-high-with-python-and-altair-45dde7803141">了解我如何获得和分析我的Garmin跑步数据</a></li><li id="2406" class="ou ov jj lj b lk pd ln pe lq pf lu pg ly ph mc oz pa pb pc bi translated"><a class="ae jg" rel="noopener" target="_blank" href="/how-to-setup-logging-for-your-python-notebooks-in-under-2-minutes-2a7ac88d723d">了解如何为您的Python代码设置日志记录</a></li><li id="6f90" class="ou ov jj lj b lk pd ln pe lq pf lu pg ly ph mc oz pa pb pc bi translated"><a class="ae jg" rel="noopener" target="_blank" href="/the-flawless-pipes-of-python-pandas-30f3ee4dffc2">学习如何使用链接(或管道)在Python中编写干净的代码</a></li></ol></div></div>    
</body>
</html>