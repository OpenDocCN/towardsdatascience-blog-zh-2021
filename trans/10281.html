<html>
<head>
<title>Deploy a Public Streamlit Web App for Free — Here’s How</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">免费部署一个公共的Streamlit Web应用程序—方法如下</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/deploy-a-public-streamlit-web-app-for-free-heres-how-bf56d46b2abe?source=collection_archive---------2-----------------------#2021-09-30">https://towardsdatascience.com/deploy-a-public-streamlit-web-app-for-free-heres-how-bf56d46b2abe?source=collection_archive---------2-----------------------#2021-09-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="de7c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Google Sheets作为其后端，由Streamlit Sharing托管</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/992fe4a000426b86293e20a96818523c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*i1_8bGWsU6u32lz1"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@smiletania?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">泰蒂亚娜·西罗娃</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="ef3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着Python越来越受欢迎，成为许多数据科学家的首选，传播他们的发现已经成为一种迫切的需要。Web应用程序代表了一种跨平台的解决方案，它提供了足够的交互性。然而，传统的开发需要Python用户充分熟悉相对复杂的web框架，如Flask和Django。尽管对于任何有经验的Python用户来说，学习这些框架并不是最难的事情，但对于数据科学家来说，展示他们的数据科学项目可能有点过头了。</p><p id="e959" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，我们数据科学家现在有了一个更好的选择——Streamlit框架。它只需在几分钟内将简单的Python脚本转换成实用的、交互式的、可共享的web应用程序。因为它是为展示数据科学产品而设计的，所以它本身支持主要数据科学库的数据模型和图形，如pandas和matplotlib。因此，如果您已经非常了解Python，那么它不需要什么学习曲线。如果您还没有尝试过，这里有一些我以前发表的文章，可以帮助您开始使用streamlit。</p><div class="lv lw gp gr lx ly"><a rel="noopener follow" target="_blank" href="/build-your-first-interactive-data-science-web-app-with-streamlit-d4892cbe4792"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">使用Streamlit构建您的首个交互式数据科学Web应用</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">突出一些最常见的特征</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">towardsdatascience.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ks ly"/></div></div></a></div><div class="lv lw gp gr lx ly"><a rel="noopener follow" target="_blank" href="/8-simple-and-useful-streamlit-tricks-you-should-know-ad16c6691b84"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">你应该知道的8个简单有用的Streamlit技巧</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">编写更好的简化应用</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">towardsdatascience.com</p></div></div><div class="mh l"><div class="mn l mj mk ml mh mm ks ly"/></div></div></a></div><p id="744b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我想进一步向大家展示如何发布web应用程序，以便其他人可以公开访问您的数据科学项目。更重要的是，我将向您展示如何将Google Sheets集成为我们项目的免费数据库主机。请注意，Google Sheets不是一个行业级的数据库，但它足以容纳一个小型数据集。更重要的是，它是免费的。</p><p id="0df4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事不宜迟，让我们开始吧。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="644a" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">第一步。在本地构建Web应用程序</h1><p id="e819" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">首先，我想确保你已经在电脑上安装了streamlit，并且能够在本地启动web应用程序。</p><h2 id="1f9f" class="ns mw it bd mx nt nu dn nb nv nw dp nf li nx ny nh lm nz oa nj lq ob oc nl od bi translated">1.1.安装Streamlit</h2><p id="7e11" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">您可以使用pip工具安装streamlit框架:<code class="fe oe of og oh b">pip install streamlit</code>。</p><p id="9661" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只需查看版本:<code class="fe oe of og oh b">streamlit --version</code>即可检查是否安装。这个命令应该告诉您所安装的streamlit包的版本。在我写这篇教程的时候，显示的版本信息是<code class="fe oe of og oh b">Streamlit, version 0.89.0</code>。</p><h2 id="a5cd" class="ns mw it bd mx nt nu dn nb nv nw dp nf li nx ny nh lm nz oa nj lq ob oc nl od bi translated">1.2.创建应用程序的脚本</h2><p id="37cb" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">创建一个Python脚本文件，我们姑且称之为<code class="fe oe of og oh b">streamlit_sharing.py</code>。因为本教程的目标是向您展示如何发布web应用程序，所以我们将尽量减少应用程序中的内容。假设该脚本包含以下代码行。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">简化共享—基本设置</p></figure><h2 id="6843" class="ns mw it bd mx nt nu dn nb nv nw dp nf li nx ny nh lm nz oa nj lq ob oc nl od bi translated">1.3.在本地启动应用程序</h2><p id="ce4d" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">要在本地启动应用程序，在终端中，您可以运行以下命令:<code class="fe oe of og oh b">streamlit run streamlit_sharing.py</code>。请确保您需要导航到保存Python脚本的目录。否则，您必须指定文件的完整路径。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/cecb63510894110c250b3088521a8f1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8suyn1q2qVvIE1J4kIDabQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">本地Streamlit Web应用程序</p></figure><p id="25e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的屏幕截图显示了在本地主机上运行的web应用程序。太好了！您已经启动了您的第一个Streamlit web应用程序。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h2 id="6bb4" class="ns mw it bd mx nt nu dn nb nv nw dp nf li nx ny nh lm nz oa nj lq ob oc nl od bi translated">第二步。连接到Google工作表</h2><p id="5106" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">我们应该理解，Streamlit支持到许多不同类型的数据库的连接，但是在线数据库主机通常不是免费的。为了向您提供概念证明，我们将使用一个公开的Google工作表作为我们web应用程序的数据源。假设我们的工作表有以下数据。</p><h2 id="661b" class="ns mw it bd mx nt nu dn nb nv nw dp nf li nx ny nh lm nz oa nj lq ob oc nl od bi translated">2.1.创建一个Google表单</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">谷歌表单中的数据</p></figure><h2 id="d8db" class="ns mw it bd mx nt nu dn nb nv nw dp nf li nx ny nh lm nz oa nj lq ob oc nl od bi translated">2.2.分享工作表</h2><p id="20fc" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">创建Google工作表后，请打开公开共享，以便我们的web应用程序可以直接访问它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/95a316fe223ac6773f1da8ede12b4d43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nWCo933_YC-EfyQGdlpXaA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">启用公共共享</p></figure><p id="f509" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">重要提示:</strong>为了保持应用程序的简单，我们将只考虑使用公共谷歌表单的设置。如果你想使用一个私人的谷歌表单，它需要启用谷歌API，感兴趣的读者可以参考<a class="ae ky" href="https://docs.streamlit.io/en/latest/tutorial/private_gsheet.html" rel="noopener ugc nofollow" target="_blank"> Streamlit的网站</a>获取更多说明。</p><h2 id="63e3" class="ns mw it bd mx nt nu dn nb nv nw dp nf li nx ny nh lm nz oa nj lq ob oc nl od bi translated">2.3.使用gsheetsdb连接板材</h2><p id="1ebd" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">为了以编程方式访问Google sheet，我们需要通过运行<code class="fe oe of og oh b">pip install gsheetsdb</code>来安装包<code class="fe oe of og oh b"><a class="ae ky" href="https://github.com/betodealmeida/gsheets-db-api" rel="noopener ugc nofollow" target="_blank">gsheetsdb</a></code>。安装完成后，我们可以将脚本更新到以下版本:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">整合谷歌表单</p></figure><p id="e682" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上述代码涉及以下更改:</p><ul class=""><li id="127c" class="om on it lb b lc ld lf lg li oo lm op lq oq lu or os ot ou bi translated">我们使用<code class="fe oe of og oh b">gsheetsdb</code>来连接到谷歌表单。</li><li id="cb6f" class="om on it lb b lc ov lf ow li ox lm oy lq oz lu or os ot ou bi translated">为了使用该表，我们使用类似SQL的语法来检索数据。值得注意的是，我们需要指定工作表的URL，而不是指定工作表的名称。不要忘记工作表URL的双引号。</li><li id="6003" class="om on it lb b lc ov lf ow li ox lm oy lq oz lu or os ot ou bi translated">我们从检索到的行中创建一个<code class="fe oe of og oh b">DataFrame</code>对象。</li></ul><p id="7bd6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了所有这些变化，我们的web应用程序现在看起来如下。如您所见，我们确实能够从创建的Google sheet中检索数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pa"><img src="../Images/75c8e0e9f11f317b4a65c6fd05583526.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AGklkt0M7hYpcAsnu_gErg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">更新的Web应用程序</p></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="6f96" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">第三步。公开部署应用程序</h1><h2 id="4044" class="ns mw it bd mx nt nu dn nb nv nw dp nf li nx ny nh lm nz oa nj lq ob oc nl od bi translated">3.1.创建Streamlit共享帐户</h2><p id="43b0" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">有不同的选项来托管一个Streamlit应用程序，比如Heroku(你可以在一篇<a class="ae ky" rel="noopener" target="_blank" href="/a-quick-tutorial-on-how-to-deploy-your-streamlit-app-to-heroku-874e1250dadd">中型文章</a>中找到教程)。在这里，我想向您展示如何使用Streamlit Share——Streamlit提供的免费Streamlit web应用程序共享服务。你可以在它的官方<a class="ae ky" href="https://blog.streamlit.io/introducing-streamlit-sharing/" rel="noopener ugc nofollow" target="_blank">博客</a>找到更多信息。以下是一般步骤。</p><ol class=""><li id="f3fb" class="om on it lb b lc ld lf lg li oo lm op lq oq lu pb os ot ou bi translated">由于Streamlit团队仍在开发该平台，您需要请求邀请才能在Streamlit Share上部署该应用程序。您可以在这里提交请求:【https://streamlit.io/cloud T4】</li><li id="e8d3" class="om on it lb b lc ov lf ow li ox lm oy lq oz lu pb os ot ou bi translated">一旦你提交了你的请求，他们很快就会批准你的请求。就我而言，不到一天就收到了邀请。</li><li id="1569" class="om on it lb b lc ov lf ow li ox lm oy lq oz lu pb os ot ou bi translated">您现在可以使用您的GitHub身份验证登录Streamlit共享(<a class="ae ky" href="https://share.streamlit.io/" rel="noopener ugc nofollow" target="_blank">https://share.streamlit.io/</a>)。</li></ol><h2 id="4c72" class="ns mw it bd mx nt nu dn nb nv nw dp nf li nx ny nh lm nz oa nj lq ob oc nl od bi translated">3.2.更新您的脚本文件</h2><p id="cb52" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">接下来你会看到，我们将在一个公共的GitHub存储库中共享我们的应用，因此我们不想暴露Google sheet的URL，这可能是一个潜在的安全问题。当然，使用私有的谷歌表单或其他数据库进行认证更加安全。</p><p id="20e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以将URL存储在共享应用程序的设置中，而不是直接在脚本中指定URL，这样您就可以使用设置的名称进行访问。</p><pre class="kj kk kl km gt pc oh pd pe aw pf bi"><span id="9086" class="ns mw it oh b gy pg ph l pi pj"># Original<br/>gsheet_url = "the_link"</span><span id="39dd" class="ns mw it oh b gy pk ph l pi pj"># Updated, when the URL is saved in the settings<br/>gsheet_url = st.secrets["public_gsheets_url"]</span></pre><h2 id="fa6a" class="ns mw it bd mx nt nu dn nb nv nw dp nf li nx ny nh lm nz oa nj lq ob oc nl od bi translated">3.3.创建一个公共GitHub库</h2><p id="c34d" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">一旦你更新了你的脚本，就终于到了公开你的应用程序的时候了(在某种程度上)。您要做的是创建一个公共的GitHub存储库。在这里，我不打算详述您如何做到这一点。我使用PyCharm，我只需要使用内置的Git工具就可以轻松地创建一个存储库。</p><h2 id="7327" class="ns mw it bd mx nt nu dn nb nv nw dp nf li nx ny nh lm nz oa nj lq ob oc nl od bi translated">3.4.分享Web应用程序！</h2><p id="becd" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">转到Streamlit Share网站，你可以通过点击“新建应用”来创建一个新的web应用，它会弹出如下图所示的窗口(左图)。</p><div class="kj kk kl km gt ab cb"><figure class="pl kn pm pn po pp pq paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/8faa7b77faa20425a5c9a0ce8f161423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/1*5Mm6Z_N1sWps5inW7yPDdA.png"/></div></figure><figure class="pl kn pr pn po pp pq paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/aea9674c9c50f00ae4eaf1942ba3b25b.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/1*n6umihrVTN06yIXdMiTmXg.png"/></div></figure></div><p id="16b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你已经链接了你的GitHub账户，Streamlit足够智能，可以拉出存储库列表，你可以简单地选择一个并指定文件路径。</p><p id="a73c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重要的是，您单击“高级设置”并在那里指定链接，因为如前所述，这是我们的streamlit脚本文件访问机密信息的方式。需要时，您需要为您的项目选择合适的Python版本，因为默认情况下，它被设置为3.7。</p><p id="405a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后，单击“部署！”按钮，等待几分钟，您应该能够看到您的应用程序启动并运行！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ps"><img src="../Images/04c1e3075959595fbac8e7efa9ed83ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t2-wnWex0-yPJ9Egtql5HA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">公共Web应用程序</p></figure><p id="451b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为它是由Streamlit Share作为公共网站托管的，所以你可以将链接分享给你的队友或客户，他们可以从他们想要的任何地方访问它。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="dbab" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">最后的话</h1><p id="114d" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">Streamlit使数据科学家开发web应用程序变得容易，因为它负责web元素的布局，而我们数据科学家只负责我们应用程序的核心部分——数据。</p><p id="32fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您从未尝试过Streamlit，我强烈建议您尝试一下，我敢打赌您会爱上它。</p><p id="7d4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读这篇文章。通过<a class="ae ky" href="https://medium.com/subscribe/@yong.cui01" rel="noopener">注册我的简讯</a>保持联系。还不是中等会员？<a class="ae ky" href="https://medium.com/@yong.cui01/membership" rel="noopener">用我的会员链接</a>支持我的写作。</p></div></div>    
</body>
</html>