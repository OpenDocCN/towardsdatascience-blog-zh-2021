<html>
<head>
<title>Debug Python Scripts Like a Pro</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">像专家一样调试 Python 脚本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/debug-python-scripts-like-a-pro-78df2f3a9b05?source=collection_archive---------7-----------------------#2021-12-14">https://towardsdatascience.com/debug-python-scripts-like-a-pro-78df2f3a9b05?source=collection_archive---------7-----------------------#2021-12-14</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="e5e3" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">调试 Python 代码的好方法、好方法和聪明方法。</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/846c8af0c6536592912c0475cbd5533d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OroODN404vwXakDOFkbUXg.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">调试 Python 脚本的工具和技巧——图片来自<a class="ae kz" href="https://www.pexels.com/photo/faceless-master-choosing-screwdriver-from-toolbox-4792511/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的<a class="ae kz" href="https://www.pexels.com/@anete-lusina?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Anete Lusina </a></p></figure><p id="4f9d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我花了一些时间来领会调试的思想。</p><p id="2c88" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我相信这是大多数代码新手的通病。对我来说，作为一个自学成才的 Python 程序员，找到问题并以最快的方式修复它们是一项挑战。</p><p id="3f4c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是这些年来，我学会了几种技术来发现脚本中的错误。有些改变了，有些我停止了。在这篇文章中，我将带你了解我认为调试 Python 代码的坏的、好的和聪明的方法。</p><div class="lw lx gq gs ly lz"><a rel="noopener follow" target="_blank" href="/poetry-to-complement-virtualenv-44088cc78fd1"><div class="ma ab fp"><div class="mb ab mc cl cj md"><h2 class="bd iv gz z fq me fs ft mf fv fx it bi translated">你不会还在用 Virtualenv 吧？</h2><div class="mg l"><h3 class="bd b gz z fq me fs ft mf fv fx dk translated">有一种更好的方法来管理依赖项、打包和发布 Python 项目。</h3></div><div class="mh l"><p class="bd b dl z fq me fs ft mf fv fx dk translated">towardsdatascience.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn kt lz"/></div></div></a></div><p id="7273" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们从坏的开始。</p><h1 id="4aa9" class="mo mp iu bd mq mr ms mt mu mv mw mx my ka mz kb na kd nb ke nc kg nd kh ne nf bi translated">打印报表</h1><p id="2b1e" class="pw-post-body-paragraph la lb iu lc b ld ng jv lf lg nh jy li lj ni ll lm ln nj lp lq lr nk lt lu lv in bi translated">也许“打印”是最常用的 Python 函数。</p><p id="dc8c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">自然，任何想知道代码中发生了什么的人都会使用 print 语句。因为这是最简单也是最普遍的选择。它似乎也适用于较小的脚本。</p><p id="e392" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您打算测试您的代码是否到达某个点，或者检查某个特定点的变量值，请继续使用它。如果只是一次。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nl"><img src="../Images/f23e474fb75a1f6acd8dee41c7a98a68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v5oltbEVx9tnoE2MZTNQmA.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">print 语句用于调试 Python 代码。—作者图片</p></figure><p id="a3cc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是随着代码变得越来越大，你就有麻烦了。打印声明将会出现在整个项目中。您很快就会忘记代码中哪个打印行对应哪个打印语句。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nl"><img src="../Images/634b5ad6b5f205820972d286678460cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ue8TryyX32bxDivyyzSAAA.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">多个打印语句打乱了输出——按作者排列的图像</p></figure><p id="1b5f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您的项目并行或异步执行代码，情况会变得更加复杂。现在使用并行执行也并不罕见。</p><p id="5fed" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这个问题的直接解决方案是在每个 print 语句中使用描述。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nl"><img src="../Images/d0877d61cd0a7eef00a382ae2a5db483.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nGMXdvM0kkaexji1GjMvLg.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">在调试中使用描述性打印语句—按作者排列的图像</p></figure><p id="88fb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是这会吸走开发者的灵魂。有更好的方法。这是我们在列表中的以下技术。</p><div class="lw lx gq gs ly lz"><a rel="noopener follow" target="_blank" href="/5-python-gui-frameworks-to-create-desktop-web-and-even-mobile-apps-c25f1bcfb561"><div class="ma ab fp"><div class="mb ab mc cl cj md"><h2 class="bd iv gz z fq me fs ft mf fv fx it bi translated">5 Python GUI 框架来创建桌面、Web 甚至移动应用程序。</h2><div class="mg l"><h3 class="bd b gz z fq me fs ft mf fv fx dk translated">你可以纯粹用 Python 来构建漂亮的应用程序。</h3></div><div class="mh l"><p class="bd b dl z fq me fs ft mf fv fx dk translated">towardsdatascience.com</p></div></div><div class="mi l"><div class="nm l mk ml mm mi mn kt lz"/></div></div></a></div><h1 id="15a8" class="mo mp iu bd mq mr ms mt mu mv mw mx my ka mz kb na kd nb ke nc kg nd kh ne nf bi translated">冰淇淋</h1><p id="e0d2" class="pw-post-body-paragraph la lb iu lc b ld ng jv lf lg nh jy li lj ni ll lm ln nj lp lq lr nk lt lu lv in bi translated">打印报表是一个繁琐、耗时的过程。冰淇淋让调试变得甜蜜。</p><p id="35da" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Icecream 是一个 Python 包，可以让你检查脚本中不同点的变量。简而言之，它打印变量值、执行的函数，以及某些情况下的行号和文件名。</p><p id="1393" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下面介绍如何使用<a class="ae kz" href="https://github.com/gruns/icecream" rel="noopener ugc nofollow" target="_blank">冰激凌</a>调试 Python 代码。</p><ol class=""><li id="f394" class="nn no iu lc b ld le lg lh lj np ln nq lr nr lv ns nt nu nv bi translated">使用 pip 安装冰淇淋。</li></ol><pre class="kk kl km kn gu nw nx ny nz aw oa bi"><span id="0e43" class="ob mp iu nx b gz oc od l oe of">pip install icecream</span></pre><p id="7015" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">2.将冰淇淋导入您的脚本</p><pre class="kk kl km kn gu nw nx ny nz aw oa bi"><span id="8a5f" class="ob mp iu nx b gz oc od l oe of">from icecream import ic</span></pre><p id="9c6a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">3.用 ic 包装您的函数调用和语句</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj og"><img src="../Images/b148928a7f0ec956a81c7702290c088e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bA0IPbON-_jr-NNoQ6OZUQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">冰激凌用于调试 Python 脚本。—作者图像</p></figure><p id="0360" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">冰激凌通过自动将上下文添加到开发者创建的每一个日志中，让开发者的生活变得简单。这是调试 Python 代码的好方法。</p><p id="80d2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但这仍然是额外的工作。</p><p id="bf64" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">像 PyCharm 和 VSCode 这样的现代 IDE 允许您将代码停在某一行，并在该行检查所有局部和全局变量。</p><p id="899e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这是调试的聪明方法。</p><p id="1dcf" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" rel="noopener" target="_blank" href="/plotly-dashboards-in-python-28a3bb83702c"/></p><h1 id="7a5e" class="mo mp iu bd mq mr ms mt mu mv mw mx my ka mz kb na kd nb ke nc kg nd kh ne nf bi translated">如何在现代集成开发环境中调试 Python 代码</h1><p id="d8d2" class="pw-post-body-paragraph la lb iu lc b ld ng jv lf lg nh jy li lj ni ll lm ln nj lp lq lr nk lt lu lv in bi translated">实时调试是在运行时使用代码的一种方式。</p><p id="06b1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们中的一些人开始在记事本应用程序中编码。后来我们换成了<a class="ae kz" href="https://notepad-plus-plus.org/downloads/" rel="noopener ugc nofollow" target="_blank">记事本++ T5。然后是革命性的</a><a class="ae kz" href="https://www.sublimetext.com/" rel="noopener ugc nofollow" target="_blank">崇高文本</a>和<a class="ae kz" href="https://atom.io/" rel="noopener ugc nofollow" target="_blank"> Atom </a>编辑。他们是那个时代的伟大工具。</p><p id="7b6e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们中的一些人从<a class="ae kz" href="https://www.jetbrains.com/pycharm/" rel="noopener ugc nofollow" target="_blank"> PyCharm </a>开始。我是爱上这个优秀的 IDE 的人之一。然而，我转向了 VSCode，因为它是免费的，它的社区曾经(现在仍然)飞速发展。</p><p id="1001" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">不出我所料，用<a class="ae kz" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VSCode </a>调试对初学者来说也是超级容易的。这就是这篇文章的其余部分。让我们把这一部分分成三个部分:用断点调试、流行框架的配置和调试数据帧。</p><div class="lw lx gq gs ly lz"><a rel="noopener follow" target="_blank" href="/how-to-create-stunning-web-apps-for-your-data-science-projects-c7791102134e"><div class="ma ab fp"><div class="mb ab mc cl cj md"><h2 class="bd iv gz z fq me fs ft mf fv fx it bi translated">如何为您的数据科学项目创建令人惊叹的网络应用程序</h2><div class="mg l"><h3 class="bd b gz z fq me fs ft mf fv fx dk translated">数据科学家不必学习 HTML、CSS 和 JavaScript 来构建网页。</h3></div><div class="mh l"><p class="bd b dl z fq me fs ft mf fv fx dk translated">towardsdatascience.com</p></div></div><div class="mi l"><div class="oh l mk ml mm mi mn kt lz"/></div></div></a></div><div class="lw lx gq gs ly lz"><a href="https://thuwarakesh.medium.com/how-to-create-progressive-web-apps-pwa-in-python-86ab3fb0d7cf" rel="noopener follow" target="_blank"><div class="ma ab fp"><div class="mb ab mc cl cj md"><h2 class="bd iv gz z fq me fs ft mf fv fx it bi translated">如何用 Python 创建渐进式网络应用程序(PWA)？</h2><div class="mg l"><h3 class="bd b gz z fq me fs ft mf fv fx dk translated">您可以用 Python 网络框架构建可安装的网络应用程序。以下是使用姜戈创建一个的指南。</h3></div><div class="mh l"><p class="bd b dl z fq me fs ft mf fv fx dk translated">thuwarakesh.medium.com</p></div></div><div class="mi l"><div class="oi l mk ml mm mi mn kt lz"/></div></div></a></div><h2 id="caf0" class="ob mp iu bd mq oj ok dn mu ol om dp my lj on oo na ln op oq nc lr or os ne ot bi translated">在 VSCode 中使用断点调试 Python 脚本。</h2><p id="4ea9" class="pw-post-body-paragraph la lb iu lc b ld ng jv lf lg nh jy li lj ni ll lm ln nj lp lq lr nk lt lu lv in bi translated">您可以通过三个步骤启动调试器。方法如下:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nl"><img src="../Images/3c24c4db68ada71f8e03cb575f2a9a01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0OQu35KR83iwKoOODpzJfQ.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">在 VSCode 中调试 Python 脚本—作者映像</p></figure><ol class=""><li id="2117" class="nn no iu lc b ld le lg lh lj np ln nq lr nr lv ns nt nu nv bi translated">单击边栏上的调试器。是这个上面有臭虫的播放按钮。</li><li id="3ae9" class="nn no iu lc b ld ou lg ov lj ow ln ox lr oy lv ns nt nu nv bi translated">在代码中创建断点。您可以通过单击行号前的来完成。您创建的每个断点都会出现一个红色指示器。</li><li id="e20e" class="nn no iu lc b ld ou lg ov lj ow ln ox lr oy lv ns nt nu nv bi translated">现在，通过单击“运行并调试”按钮并在下拉列表中选择“Python 文件”来启动调试器。</li></ol><p id="a0ac" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当您这样做时，VSCode 将启动一个线程来运行您的脚本，并在您有第一个断点的地方停止。屏幕将如下所示:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nl"><img src="../Images/36ffa61c8f7570682b6ce1f813d85f3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Zl-D65Y436k6qhe53DQMQ.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">在 VSCode 的断点处进行实时调试。—图片由作者提供。</p></figure><p id="bed8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当它在您创建的断点处停止时，您现在可以看到该行被突出显示，侧栏发生了变化，并且一个新的工具栏出现在右上角(此位置在您的窗口中可能有所不同)。</p><p id="6d63" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">工具栏是调试器的控制器。“播放”按钮将忽略当前断点，并移到下一个断点。“停止”按钮将停止调试器，而“刷新”按钮将重新启动调试器。</p><p id="8e36" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我发现介入按钮非常有用。它是调试器工具栏上的向下箭头键。请看看下面的录音，以了解它是如何工作的，它是多么有用。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oz"><img src="../Images/9d47f2d8845e39a7c9465c8f3a1e0199.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Xsgk4UC2bcKmEkslsn9bqg.gif"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">在 VSCode 调试器中逐行单步执行—图片由作者提供</p></figure><p id="2d95" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我的第一个断点在第 14 行。这一行调用了一个名为“sum_odd_numbers”的函数当我点击 step in 键时，解释器移动到下一行，但停在那里。它在我调用的函数中(第 4 行。)</p><p id="fd64" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">注意侧边栏中的变量部分。因为我们现在在函数中，所以范围改变了。在“本地”区域，我们看到 n 的值是 100。v 的值是可用的，因为解释器还没有执行第 4 行。</p><p id="9068" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是当你不断点击进入键时。你看，v 的值也在变化。当我们进入循环时，你也可以看到“I”的值。</p><p id="11e5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">请注意，只有当“I”的值为奇数时，我们才会到达第 8 行。当我们执行第 8 行时,“v”的值增加了“I”的值。</p><p id="f2e9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">太好了，我们可以在脚本运行的时候一行一行地讲述所有的事情。这就是为什么实时调试是发现和修复代码问题的更好的方法。</p><h2 id="3d03" class="ob mp iu bd mq oj ok dn mu ol om dp my lj on oo na ln op oq nc lr or os ne ot bi translated">配置 VSCode 以调试流行的 Python 框架。</h2><p id="641a" class="pw-post-body-paragraph la lb iu lc b ld ng jv lf lg nh jy li lj ni ll lm ln nj lp lq lr nk lt lu lv in bi translated">VSCode 支持流行的框架，如 Django、Flask、FastAPI 和 Pyramid out of the box。在大多数情况下，您不必为这些框架配置任何特殊的东西。启动调试器时，您只需在下拉列表中选择框架。</p><blockquote class="pa pb pc"><p id="356b" class="la lb pd lc b ld le jv lf lg lh jy li pe lk ll lm pf lo lp lq pg ls lt lu lv in bi translated">如果这是您第一次使用 django 项目，您可以使用<code class="fe ph pi pj nx b">pip install django</code>安装 django，并使用命令<code class="fe ph pi pj nx b">Django startproject &lt;project_name&gt;</code>创建一个 Django 项目</p></blockquote><p id="6f97" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是在某些情况下，您必须覆盖默认值。例如，如果另一个进程阻塞了 8000 端口，Django 需要另一个进程来启动。您可以使用 launch.json 文件向调试器提供附加信息。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nl"><img src="../Images/26f684b9595980ce181a2238c0dc2964.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IRbRNlyYGbdBszWaWNtREg.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">配置 VSCode 以调试 Django 应用程序。—图片由作者提供。</p></figure><p id="7526" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">转到调试器窗口，选择“创建一个 launch.json 文件”选项。在下拉列表中，选择您正在使用的框架。我选择了姜戈作为这个例子。</p><p id="75ae" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您将看到一个新的 JSON 文件打开，带有一些熟悉的选项。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nl"><img src="../Images/726d5e7a3e6ecaca305f21ec1ca8e773.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LRqiU74h6MgGnJXIDg6eOw.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">覆盖 VSCode 中的调试配置—按作者排列的图像</p></figure><p id="6729" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">上述文件运行＄{ workspace folder }中的“manage.py”文件(这是您在 VSCode 中打开的项目的根目录)。此外，它接受命令行参数“runserver”。</p><p id="3da4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这意味着当调试器启动时，它将要执行<code class="fe ph pi pj nx b">python manage.py runserver</code>。</p><p id="1ddd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我通过扩展“args”列表添加了另一个参数。在第 11 行，我将 Django dev 服务器的端口配置为 5000，而不是默认的 8000。这个修改将让调试器运行<code class="fe ph pi pj nx b">python manage.py runserver 5000</code>。</p><p id="fbe4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">转到一个新行，按住 ctrl(或 command)键，看看还有哪些其他选项。如上图所示，会弹出一个选项列表。</p><p id="cc52" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们看看调试器的运行情况。</p><p id="a3fb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">将<proj> /urls.py 的内容替换为以下内容。</proj></p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="pk pl l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">非常基本的 Django URL 配置，说明如何调试 web 请求——作者的代码片段。</p></figure><p id="cce3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">并使用以下内容创建一个名为 views.py 的文件。我们运行着与 web 服务相同的奇数计数器。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="pk pl l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">非常基本的 Django 视图，说明如何调试 web 请求——作者的代码片段。</p></figure><p id="33de" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">点击侧边栏中的 play 按钮启动调试器。现在，在你的网络浏览器中，如果你去<a class="ae kz" href="http://127.0.0.1:5000/sum_odd_numbers/10" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:5000/sum _ odd _ numbers/10</a>，浏览器会显示结果 25。尝试在 URL 中使用不同的数字而不是 10 来查看 web 服务器是如何工作的。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pm"><img src="../Images/c006e9e216236739c325ba1e556cbc34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*S80_5Z5qF176g0lVOVA5TA.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">浏览器上示例 web 响应的输出—图片由作者提供。</p></figure><p id="5ac4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，让我们在第 7 行放置一个断点，并再次访问浏览器上的 URL。这一次，浏览器一直在等待响应。但是 VSCode 在我们的断点处停止处理请求。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pn"><img src="../Images/45b2743cdd91c24cc159def3e93be495.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uqzA53CJiGFF4r-kKqBn9w.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">检查 VSCode 中的 Django 请求对象。—作者图片</p></figure><p id="ae31" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">看看你在变量面板里得到了什么。您可以访问整个请求对象，包括有关路径、请求类型的信息和浏览器 cookie 信息。</p><p id="a43a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在实时调试模式下调试 web 服务器毫不费力。我们将在下一部分讨论允许我调试数据帧的最新特性之一。</p><h2 id="c241" class="ob mp iu bd mq oj ok dn mu ol om dp my lj on oo na ln op oq nc lr or os ne ot bi translated">用 VSCode 调试 pandas 数据帧</h2><p id="1eb8" class="pw-post-body-paragraph la lb iu lc b ld ng jv lf lg nh jy li lj ni ll lm ln nj lp lq lr nk lt lu lv in bi translated">VSCode 已经在数据科学中非常有用，内置了 Jupyter 笔记本。</p><p id="8f63" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然而，如果一个分析项目在一个脚本上，那么调试它是很困难的。在我的日常工作中，一个非常常见的情况是处理 web 请求中的数据集。</p><p id="ef17" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">列表、字典、甚至对象都可以相对直接地显示在变量部分。但是熊猫数据框是一个需要表格格式的复杂对象。只有这样，开发人员才能从中发现问题。</p><p id="bbd1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">VSCode 以最好的方式解决了这个问题。您只需右键单击变量部分中的数据框对象，然后选择“在数据查看器中查看值”</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nl"><img src="../Images/ea873688728a19d12b966c56a39ed9e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9NwBi3vyGOkdyGxm3WjNZA.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">使用 VSCode 的数据查看器调试 pandas 数据框。—作者图片</p></figure><p id="74cc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在上面的截图中，我在第 5 行添加了一个断点。此时，解释器已经读取了 CSV，数据帧在存储器中。当我们在 Dat 查看器中打开它时，我们会得到以下内容。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj po"><img src="../Images/662512038b657a507dd2cf3830c1d645.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*JtTIchPXH2ELB0DzK74i-w.gif"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">VSCode 的数据查看器正在运行—图片由作者提供</p></figure><p id="d6cf" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这是我们的数据框的一个支持正则表达式的可过滤表格视图。当你不在 Jupyter 笔记本上时，这个特性是调试项目的一个方便的技术。在大多数生产系统中查找和修复 bug 时都是如此。</p><p id="8edb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您在右键菜单上没有看到数据查看器选项，您必须在 VSCode 中安装或更新<a class="ae kz" href="https://marketplace.visualstudio.com/items?itemName=ms-python.python" rel="noopener ugc nofollow" target="_blank"> Python 扩展。只有最近的版本才有这个功能。</a></p></div><div class="ab cl pp pq hy pr" role="separator"><span class="ps bw bk pt pu pv"/><span class="ps bw bk pt pu pv"/><span class="ps bw bk pt pu"/></div><div class="in io ip iq ir"><h1 id="1e9e" class="mo mp iu bd mq mr pw mt mu mv px mx my ka py kb na kd pz ke nc kg qa kh ne nf bi translated">最后的想法</h1><p id="f795" class="pw-post-body-paragraph la lb iu lc b ld ng jv lf lg nh jy li lj ni ll lm ln nj lp lq lr nk lt lu lv in bi translated">不管你有多有经验，调试都是非常具有挑战性的。</p><p id="e756" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">对于大多数初学者来说，打印语句是最容易做到的。但是用打印语句来查找大型生产级系统中的 bug 是不实际的。只有正确的工具和技术才能帮助减轻工作。</p><p id="6d81" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">一个可爱的救援工具是冰淇淋。Icecream 会自动包含记录语句的上下文描述。然而，每次您想要测试不同的东西时，您都必须重新运行整个脚本。</p><p id="cd66" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现场调试是发现和修复软件项目中问题的最聪明的方法。大多数现代 IDE 都支持实时调试。在这篇文章中，我们介绍了 VSCode 调试器是如何工作的。</p><p id="7fad" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我希望这个指南有助于让你的代码没有 bug。</p></div><div class="ab cl pp pq hy pr" role="separator"><span class="ps bw bk pt pu pv"/><span class="ps bw bk pt pu pv"/><span class="ps bw bk pt pu"/></div><div class="in io ip iq ir"><blockquote class="pa pb pc"><p id="806f" class="la lb pd lc b ld le jv lf lg lh jy li pe lk ll lm pf lo lp lq pg ls lt lu lv in bi translated">感谢阅读，朋友！在<a class="ae kz" href="https://www.linkedin.com/in/thuwarakesh/" rel="noopener ugc nofollow" target="_blank"><strong class="lc iv">LinkedIn</strong></a><a class="ae kz" href="https://twitter.com/Thuwarakesh" rel="noopener ugc nofollow" target="_blank"><strong class="lc iv">Twitter</strong></a><a class="ae kz" href="https://thuwarakesh.medium.com/" rel="noopener"><strong class="lc iv">Medium</strong></a>上跟我打招呼。</p><p id="2b4a" class="la lb pd lc b ld le jv lf lg lh jy li pe lk ll lm pf lo lp lq pg ls lt lu lv in bi translated">还不是中等会员？请使用此链接<a class="ae kz" href="https://thuwarakesh.medium.com/membership" rel="noopener"> <strong class="lc iv">成为会员</strong> </a>因为，不需要你额外付费，我为你引荐赚取一小笔佣金。</p></blockquote></div></div>    
</body>
</html>