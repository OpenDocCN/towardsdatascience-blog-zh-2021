<html>
<head>
<title>How to Analyse Data in Python without Coding</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在不编码的情况下用Python分析数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/reproducible-data-analysis-in-python-without-coding-806a7652dd34?source=collection_archive---------29-----------------------#2021-06-09">https://towardsdatascience.com/reproducible-data-analysis-in-python-without-coding-806a7652dd34?source=collection_archive---------29-----------------------#2021-06-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d96b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用导出Python代码的免费pandas/plotly GUI</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4c1ea7f7fbf6eb13c85cda3552a6dc17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5E4MxZWOu2TQ7z6Y"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Marc-Olivier Jodoin 在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="711a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="ls">免责声明</em> </strong> <em class="ls"> : ⚠️前方傻笑话！此外，我是bamboolib的共同创建者。</em></p><p id="2824" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">数据无处不在，现在比以往任何时候，我们都有免费的工具来探索它们。用于数据争论和探索的最流行的python库之一是pandas(我猜你已经第1354次读到这句话了)。但是，说实话，它没有最直观的语法。这不仅使它很难学，而且如果你不天天和熊猫一起工作，也很难记住它的语法。</p><blockquote class="lt"><p id="05e5" class="lu lv iq bd lw lx ly lz ma mb mc lr dk translated">熊猫没有最直观的语法</p></blockquote><p id="e5fb" class="pw-post-body-paragraph kw kx iq ky b kz md jr lb lc me ju le lf mf lh li lj mg ll lm ln mh lp lq lr ij bi translated">此外，编写pandas代码有时感觉有点像用北欧战斧切菜:它完成了工作，我在做这件事的时候莫名其妙地觉得很酷，但当看到结果时，它看起来并不好，所以我宁愿不积极参与那种混乱。</p><p id="1f9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">脑海中浮现出这个怪异的画面，我有一种强烈的冲动，想创建一个GUI来为我生成Python代码，这样我就可以专注于从我的数据中获得见解，并与我心爱的人分享它们……嗯……我是说，我的同事。</p><h1 id="c95c" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">遇见bamboolib</h1><p id="cde8" class="pw-post-body-paragraph kw kx iq ky b kz na jr lb lc nb ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">bamboolib 是一个免费的GUI，可以让你准备和探索你的数据。每次编辑数据以及使用该工具创建的每个交互式绘图，它都会为您创建python代码。这样，您可以跟踪您的步骤，重复您的分析，并创建交互式报告。</p><blockquote class="lt"><p id="ee0f" class="lu lv iq bd lw lx ly lz ma mb mc lr dk translated">专注于获取和分享见解，而不是编码</p></blockquote><p id="09e6" class="pw-post-body-paragraph kw kx iq ky b kz md jr lb lc me ju le lf mf lh li lj mg ll lm ln mh lp lq lr ij bi translated">如果您想使用Jupyter Notebook/JupyterLab使用Python pandas分析和探索数据，但是a)完全是初学者，b)不想一直查找pandas语法，或者b)只是想快速理解您的数据，而不必在笔记本中编写太多代码，那么这篇博客文章就是为您准备的。</p><p id="f697" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您将了解到:</p><ul class=""><li id="622c" class="nf ng iq ky b kz la lc ld lf nh lj ni ln nj lr nk nl nm nn bi translated">如何立即探索一个你从未见过的数据集(<em class="ls">手指交叉</em>)，而不必自己写一行代码</li><li id="273b" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated">同时还在生产python代码。</li></ul><h2 id="52eb" class="nt mj iq bd mk nu nv dn mo nw nx dp ms lf ny nz mu lj oa ob mw ln oc od my oe bi translated">一个小实验</h2><p id="3a64" class="pw-post-body-paragraph kw kx iq ky b kz na jr lb lc nb ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">关于博客帖子的格式，我想我会做一个实验:我将探索一个我以前从未见过的数据集<strong class="ky ir">并和你一起经历我的EDA步骤。所以，不管这些数据有多乱/干净/无聊/令人兴奋，我都会探索并写一篇关于它的博客文章与你分享。而你(读这几行)是我做的见证人！</strong></p><p id="f347" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么，从哪里获取数据呢？由于我过去经常编写R代码并且<a class="ae kv" href="https://www.statworx.com/de/blog/show-me-your-pipe/" rel="noopener ugc nofollow" target="_blank">写了很多关于它的文章</a>，我去了<a class="ae kv" href="https://github.com/rfordatascience/tidytuesday" rel="noopener ugc nofollow" target="_blank">的数据科学“TidyTuesday”网站</a>，搜索了第一个引起我注意的随机数据集。</p><p id="5a25" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我在那里找到了它:关于“<a class="ae kv" href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2021/2021-04-06/readme.md" rel="noopener ugc nofollow" target="_blank">全球森林砍伐——大豆生产和使用</a>”❤️.的数据这听起来就像“和公公婆婆在孤岛上呆一个月……”一样有趣，但至少引起了我的注意。</p><p id="0fd7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简而言之，数据集显示了生产了多少吨大豆用于动物饲料、人类食物和燃料。</p></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><h1 id="12e7" class="mi mj iq bd mk ml om mn mo mp on mr ms jw oo jx mu jz op ka mw kc oq kd my mz bi translated">安装bamboolib</h1><p id="fc6e" class="pw-post-body-paragraph kw kx iq ky b kz na jr lb lc nb ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">在我们开始之前，让我们按照<a class="ae kv" href="https://docs.bamboolib.8080labs.com/" rel="noopener ugc nofollow" target="_blank">文档</a>中的描述安装bamboolib。</p><pre class="kg kh ki kj gt or os ot ou aw ov bi"><span id="0e1d" class="nt mj iq os b gy ow ox l oy oz">pip install bamboolib<br/>python -m bamboolib install_extensions</span></pre><h1 id="4268" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">探索全球大豆的使用</h1><p id="4b95" class="pw-post-body-paragraph kw kx iq ky b kz na jr lb lc nb ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">让我们打开一个Jupyter笔记本或JupyterLab，无论你喜欢哪个。你可以自己输入数据</p><pre class="kg kh ki kj gt or os ot ou aw ov bi"><span id="005b" class="nt mj iq os b gy ow ox l oy oz">import pandas as pd<br/>soybean_use = pd.read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-04-06/soybean_use.csv')</span></pre><p id="f539" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们用bamboolib来看看。在笔记本单元格中运行以下代码:</p><pre class="kg kh ki kj gt or os ot ou aw ov bi"><span id="fa98" class="nt mj iq os b gy ow ox l oy oz">import bamboolib as bam</span><span id="2447" class="nt mj iq os b gy pa ox l oy oz">soybean_use</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pb"><img src="../Images/ea96b125882bc90ceefa147dc61b3f18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MwuunoydmNJ-4GRU0_8aOg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们数据的交互视图。bamboolib在静态熊猫HTML输出中添加了一个绿色小按钮。如果你点击那个按钮，你会看到如上所示的数据。</p></figure><p id="4a1e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">列<strong class="ky ir">实体</strong>引起了我的注意，因为我不确定它会包含什么值。第一个观察结果来自非洲，所以我认为<strong class="ky ir">实体</strong>可能包含大洲，但是滚动数据会发现<strong class="ky ir">实体</strong>也包含国家和一些人工聚类，如“净粮食进口发展中国家”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pc"><img src="../Images/23e6ed72dc00249e8e4e14c79d375730.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ax_i_o7LwAhDY-R3XP5shw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我滚动浏览这些行，找到了国家名称和人造集群的名称。</p></figure><p id="12cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我只对国家感兴趣。那么剩下的怎么去除呢？</p><p id="dc25" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我有一种感觉<strong class="ky ir">代码</strong>指的是国家代码(开个玩笑，其实在<a class="ae kv" href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2021/2021-04-06/readme.md#soybean_usecsv" rel="noopener ugc nofollow" target="_blank">数据描述</a>里是这么说的)，所以如果我把所有没有<strong class="ky ir">代码</strong>的行都去掉，我的数据里应该只有国家。但是在盲目丢弃任何行之前，我首先检查缺失代码的实体确实不是国家(“因为我们是谨慎的数据科学家！”).我这样做是通过过滤掉所有缺少<strong class="ky ir">代码</strong>的行，然后查看过滤后的数据来验证数据中不再有国家。</p><p id="7f39" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，我在搜索字段中搜索“filter ”,并使用UI过滤掉所有缺少代码的行</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pd"><img src="../Images/4dd8881a38c1ef3bfb574a30c855cf69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xyEajSE1Rjyj9jFnWrZCSQ.png"/></div></div></figure><p id="43a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我给这个临时数据起了一个新名字<em class="ls"> missings </em>，因为我不想覆盖原来的数据集。执行过滤器后，我从界面得到一些反馈，有8，163行(82%的数据)被删除了。另外，bamboolib为我生成了以下代码:</p><pre class="kg kh ki kj gt or os ot ou aw ov bi"><span id="0437" class="nt mj iq os b gy ow ox l oy oz">missings = soybean_use.loc[soybean_use['code'].isna()]</span></pre><p id="f721" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我点击新的<em class="ls">缺失</em>数据框的<strong class="ky ir">实体</strong>列标题时，我得到一个列摘要:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pe"><img src="../Images/3df5c2d9e46124e2a93dd7c6b09dd596.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k7SQV38F10f1695Yxg-7Qg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们的缺失数据框中<strong class="bd pf"> <em class="pg">实体</em> </strong> <em class="pg">列的汇总</em></p></figure><p id="dd01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我点击了<em class="ls"> show all value counts </em>按钮，滚动了所有的实体值，正如所料，数据中不再有国家(如果你认为“北非”是一个国家，请给我发消息:-)。</p><p id="257a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为我现在知道删除缺少代码的行不会丢弃任何国家，所以我从上面撤销那个过滤器(通过点击<em class="ls">撤销</em>按钮)<em class="ls"> </em>并选择所有缺少<strong class="ky ir">代码</strong>是<em class="ls">而不是</em>的行。</p><p id="71bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">过滤后，我的数据看起来像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ph"><img src="../Images/8c2e467c1c3b620d54940716d89910e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jnGR0gNQbZ8fo7E5CF2Zuw.png"/></div></div></figure><p id="f114" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们来看看其余的列。</p><ul class=""><li id="7480" class="nf ng iq ky b kz la lc ld lf nh lj ni ln nj lr nk nl nm nn bi translated"><strong class="ky ir">年份</strong>明显。</li><li id="43be" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><strong class="ky ir">人类食物</strong>包含用于人类食物(豆豉、豆腐、豆浆、毛豆等)的大豆数量(以吨为单位)</li><li id="c4d8" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><strong class="ky ir">动物饲料</strong>包含直接喂给动物的大豆数量(吨)<em class="ls"/>。</li><li id="045e" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><strong class="ky ir">已加工</strong>包含加工成植物油、生物燃料和加工动物饲料(如豆饼)的大豆数量(以吨计)</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/1b54f7b60ce9272ee1b1e967ce0fe240.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*Ykwikkb7D6XGu-YN3wD-Mw.jpeg"/></div></figure></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><h1 id="3456" class="mi mj iq bd mk ml om mn mo mp on mr ms jw oo jx mu jz op ka mw kc oq kd my mz bi translated">一点数据争论</h1><p id="fb66" class="pw-post-body-paragraph kw kx iq ky b kz na jr lb lc nb ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">目前，数据是宽格式的，但我希望它是长格式的，以便更容易绘制(长格式数据(也称为整齐数据)使聚合和绘制更方便。你可能会问，为什么？你一会儿就会明白了)。</p><p id="3661" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，我们需要重塑我们的数据。</p><p id="8c19" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我现在可以继续尝试在文本中解释从宽到长的重塑，但我更愿意将一些❤️放入一个漂亮的彩色图像中，以便更好地解释这一点。最后，我想得到的是以下内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pj"><img src="../Images/5bff59d1615f741a21d551d5a0aeb5fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OathfXdBUBfSSOhIViOm5A.png"/></div></div></figure><p id="15dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我的例子中，ID将对应于三列<strong class="ky ir">实体</strong>、<strong class="ky ir">代码</strong>和<strong class="ky ir">年份。</strong></p><p id="785d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在UI中，我搜索“重塑”，得到两个选项可供选择。因为我想变宽→变长，所以我选择“Unpivot/Melt”转换。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pk"><img src="../Images/d0c4d68fcaf0af081a82008d36b410d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:732/format:webp/1*cRCd0nU5bTWrkLu2f3XApQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">重塑— 1</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pl"><img src="../Images/c3e237b8e42e8512ba3a295a2d264520.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TEDGy-VNeiS0LYBbsOVU_Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">重塑— 2</p></figure><p id="a28d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我选择<strong class="ky ir">实体</strong>、<strong class="ky ir">代码</strong>和<strong class="ky ir">年份</strong>作为ID列。瞧:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pm"><img src="../Images/e8fe51bc4f34cbe8bc1f5abb21967fa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0ta7EJNB01L4le9l8eA8Lw.png"/></div></div></figure><p id="bc44" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">生成的代码是:</p><pre class="kg kh ki kj gt or os ot ou aw ov bi"><span id="e2d4" class="nt mj iq os b gy ow ox l oy oz"># Step: Melt columns based on the index columns entity, code, year<br/>soybean_use_long = soybean_use.melt(id_vars=['entity', 'code', 'year'])</span></pre><p id="f65e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我还会给两列<strong class="ky ir">变量</strong>和<strong class="ky ir">值</strong>起更直观的名字。为此，我使用了“重命名列”转换。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pn"><img src="../Images/f67384b40b811ad28bcca3c71eb05813.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qUspJdrTkbDVnougMPW3kw.png"/></div></div></figure><p id="da63" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">生成的代码是:</p><pre class="kg kh ki kj gt or os ot ou aw ov bi"><span id="37dd" class="nt mj iq os b gy ow ox l oy oz"># Step: Rename multiple columns<br/>soybean_use_long = soybean_use_long.rename(columns={'value': 'soy_use_in_tonnes', 'variable': 'category'})</span></pre></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><h1 id="fb62" class="mi mj iq bd mk ml om mn mo mp on mr ms jw oo jx mu jz op ka mw kc oq kd my mz bi translated">一些交互式可视化？</h1><p id="3fdd" class="pw-post-body-paragraph kw kx iq ky b kz na jr lb lc nb ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">有了这些数据，我觉得可以开始一些可视化了。例如，我想展示以下内容:</p><ol class=""><li id="532a" class="nf ng iq ky b kz la lc ld lf nh lj ni ln nj lr po nl nm nn bi translated">全球大豆产量如何随时间变化(假设我有地球上每个国家的数据)</li><li id="b2c1" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr po nl nm nn bi translated">世界范围内大豆使用在各个类别中的变化</li><li id="182f" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr po nl nm nn bi translated">还有更多的，但这将变得和我奶奶主持的长达4小时的dia节目一样无聊。所以让我们只关注上面的两个项目。</li></ol><p id="e34d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但在我们开始回答问题之前，我只是好奇看看哪些国家的大豆使用量最高，所以我把我的数据按<strong class="ky ir">大豆使用量吨降序排列。</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pp"><img src="../Images/e4616ad331f9ef34eb4db56e648f0c0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tqNEdbLPE1ov1PE9YqdiDA.png"/></div></div></figure><p id="99b7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它产生代码</p><pre class="kg kh ki kj gt or os ot ou aw ov bi"><span id="6e62" class="nt mj iq os b gy ow ox l oy oz"># Step: Sort column(s) soy_use_in_tonnes descending (Z-A)<br/>soybean_use_long = soybean_use_long.sort_values(by=['soy_use_in_tonnes'], ascending=[False])</span></pre><p id="128e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这样做的时候，我发现我们的数据中仍然有条目不是来自一个国家，而是包含了整个世界！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pq"><img src="../Images/55493d9e7d7b8b26fe7302d7ae439a50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DfSEpeLicLlijdMqw8-voA.png"/></div></div></figure><p id="6c79" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是相当幸运的！无论如何，我想显示全球大豆的使用量，所以我不用自己生成总数，而是简单地使用来自世界实体的数据。</p><p id="f316" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我这样做是通过过滤<strong class="ky ir">实体</strong>等于“World”的行。我称这些数据为大豆使用世界。你可怜的拇指(或者指针，如果你用电脑和鼠标阅读这篇文章的话)今天可能会让你浏览更多的东西，所以我在这里给你省略了截图。生成的代码是:</p><pre class="kg kh ki kj gt or os ot ou aw ov bi"><span id="8160" class="nt mj iq os b gy ow ox l oy oz"># Step: Keep rows where entity is one of: World<br/>soy_use_world = soybean_use_long.loc[soybean_use_long['entity'].isin(['World'])]</span></pre><p id="a393" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以有了<em class="ls"> soy_use_world </em>在我手里，让我们最终创造一些互动的剧情吧！</p></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><h1 id="d692" class="mi mj iq bd mk ml om mn mo mp on mr ms jw oo jx mu jz op ka mw kc oq kd my mz bi translated">最后，一些交互式可视化！</h1><p id="6cc8" class="pw-post-body-paragraph kw kx iq ky b kz na jr lb lc nb ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">随着时间的推移，全球大豆产量发生了怎样的变化？为了回答这个问题，我们使用<em class="ls"> soy_use_world </em>和sum<strong class="ky ir">soy _ use _ in _ tonts</strong>。为此，我在文本字段中搜索“aggregate”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pr"><img src="../Images/95a2c48737378fe12d2b9aee8d559c48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UhmVb_qCFlWkS88UElFGKQ.png"/></div></div></figure><p id="d3a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">代码:</p><pre class="kg kh ki kj gt or os ot ou aw ov bi"><span id="4f3b" class="nt mj iq os b gy ow ox l oy oz"># Step: Group by and aggregate<br/>soy_use_world_by_year = soy_use_world.groupby(['entity', 'year']).agg(soy_use_in_tonnes_sum=('soy_use_in_tonnes', 'sum')).reset_index()</span></pre><p id="0998" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我点击<em class="ls">创建情节</em>。</p><p id="5589" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们创建一个面积图(因为折线图是如此2020！)显示了大豆产量随时间的变化。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ps"><img src="../Images/5ad8ddf432e7a9c032be6291c8fc2541.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E9lJcvqpCBq8QQlJE6YRNA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">全球大豆产量(吨)</p></figure><p id="76a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">已经生成的代码是:</p><pre class="kg kh ki kj gt or os ot ou aw ov bi"><span id="7344" class="nt mj iq os b gy ow ox l oy oz">import plotly.express as px<br/>fig = px.area(soy_use_world_by_year, x='year', y='soy_use_in_tonnes_sum')<br/>fig</span></pre><p id="cda5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我将大豆在各个类别中的使用情况进行可视化。为此，我撤销了上面的聚合步骤，并创建了以下可视化:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pt"><img src="../Images/3af3f423c08c8a0d6556a5f3f6210661.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*atyHTPkX_gYgt_Ra-AE75Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按类别分列的全球大豆产量(吨)</p></figure><p id="0a0d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还记得我在上面写的关于将数据从宽到长重新整形的文章吗？没有吗？别担心，你不是唯一一个浏览博客文章寻找相关内容的人；-).但是如果你阅读了到目前为止的所有内容，你最终会明白为什么我改变了数据。我这样做是因为对于长格式的数据，我只需选择<strong class="ky ir">类别</strong>作为我的绘图的颜色属性，就可以用plotly创建一个堆积条形图。这就是哈德利·韦翰称之为“整洁数据”( T21)的美妙之处。</p><p id="a60b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有意思！看起来大多数大豆被加工成油、燃料和豆饼。</p><h2 id="c92d" class="nt mj iq bd mk nu nv dn mo nw nx dp ms lf ny nz mu lj oa ob mw ln oc od my oe bi translated">一些更好的可视化！</h2><p id="aa55" class="pw-post-body-paragraph kw kx iq ky b kz na jr lb lc nb ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">我想给你看的最后一件事是:使用plot creator，你可以调整你的图形。让我们给它一个更好的调色板和一般的图形主题，创建一个吸引人的图形标题，并删除轴标签。</p><p id="4150" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最终的剧情看起来是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pu"><img src="../Images/ae70c2f0c5ec1432bee2f23bbc46e00f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i-_dPquctPzoEU2vUKxVmQ.png"/></div></div></figure><p id="db47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很漂亮，是吧？嗯，代码并不整洁:</p><pre class="kg kh ki kj gt or os ot ou aw ov bi"><span id="4b74" class="nt mj iq os b gy ow ox l oy oz">import plotly.express as px<br/>fig = px.bar(soy_use_world, x='year', y='soy_use_in_tonnes', color='category', color_discrete_sequence=px.colors.qualitative.Pastel, template='presentation', title='Where has my soy gone? Global soy use in tonnes', labels={'soy_use_in_tonnes': ' ', 'year': ' '})<br/>fig</span></pre><p id="cce6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还好我不用自己去谷歌那些东西！</p><h1 id="adf7" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">离别的思绪</h1><p id="3658" class="pw-post-body-paragraph kw kx iq ky b kz na jr lb lc nb ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">在这篇博文中，我们看了一个数据集，希望我们俩都没见过(至少我没见过！)—大豆的全球生产和使用。我们在几分钟内探索、准备并可视化了数据，没有搜索语法，也没有编写一行代码，同时仍然在创建代码。</p><p id="f0ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望bamboolib能帮助你更快地从数据中获得洞察力，并在你即将到来的项目中减少认知负荷。</p><p id="a179" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后一件事:您可以用插件扩展bamboolib(例如，创建一个类似“大写所有列名，然后只保留以'<em class="ls"> _xyz' </em>'结尾的列，最后计算每对列之间的百分比差异”的转换)。在这里阅读更多关于如何为bamboolib自己编写插件的<a class="ae kv" href="https://github.com/tkrabel/bamboolib/tree/master/plugins" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><p id="b033" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">如果你喜欢这篇文章，请告诉我你接下来想读什么！</em></p></div></div>    
</body>
</html>