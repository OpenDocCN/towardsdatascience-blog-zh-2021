<html>
<head>
<title>Spearman coefficient: Tool for a generalized correlation analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Spearman系数:广义相关分析的工具</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/spearman-coefficient-tool-for-a-generalized-correlation-analysis-d15b70d4ff1e?source=collection_archive---------32-----------------------#2021-11-01">https://towardsdatascience.com/spearman-coefficient-tool-for-a-generalized-correlation-analysis-d15b70d4ff1e?source=collection_archive---------32-----------------------#2021-11-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="db4e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">线性关系并不是相关性分析所能揭示的全部。我们讨论基于等级的相关性，这种相关性更加普遍和有效。</h2></div><h1 id="d5de" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">超越线性关系</h1><p id="fbf7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">是常见的数据科学面试问题。</p><blockquote class="lw lx ly"><p id="4138" class="la lb lz lc b ld ma ju lf lg mb jx li mc md ll lm me mf lp lq mg mh lt lu lv im bi translated">比方说，<em class="it"> y </em> = <em class="it"> x </em> +噪声，你画出<em class="it"> y </em>对<em class="it"> x </em>并试着确定相关系数。会是什么呢？</p></blockquote><p id="8389" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated">如果你说的不是零分，大多数面试官不会给你分数。在大多数情况下，相关性这个词会引起变量之间的线性或线性关系的概念。</p><p id="3548" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated">这里有一个直观的例子说明我的意思。</p><div class="mi mj mk ml gt ab cb"><figure class="mm mn mo mp mq mr ms paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><img src="../Images/61f4450ddebc1aa5e9e7a9cfd9d2e52b.png" data-original-src="https://miro.medium.com/v2/resize:fit:682/format:webp/1*7F-PzgFuTwKXOtG3aQDROg.png"/></div></figure><figure class="mm mn mz mp mq mr ms paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><img src="../Images/3f51c53bf3787261c6b3d05e3675960b.png" data-original-src="https://miro.medium.com/v2/resize:fit:678/format:webp/1*wneOn0vu8mpX7QozaDY3Yg.png"/></div></figure><figure class="mm mn na mp mq mr ms paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><img src="../Images/3e6863c36944e506460024c3a44b9236.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*9F6BMOvux_4VKVWTgvcGsQ.png"/></div><p class="nb nc gj gh gi nd ne bd b be z dk nf di ng nh translated">图片来源:作者创作</p></figure></div><p id="e014" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated">这种线性概念来自统计分析或数据科学中最广泛使用的特定相关系数的定义，即<a class="ae ni" href="https://en.wikipedia.org/wiki/Pearson_correlation_coefficient" rel="noopener ugc nofollow" target="_blank">皮尔逊系数</a>。</p><p id="2db5" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated">它以著名的英国统计学家卡尔·皮尔逊的名字命名，</p><figure class="mi mj mk ml gt mn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/523c07d4183e955bb27a4dc5729577c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:466/format:webp/1*TsADc8EuouHnMsQvNYehGA.png"/></div></figure><p id="3b03" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated">其中cov( <em class="lz"> X </em>，<em class="lz"> Y </em>)是两个随机变量<em class="lz"> X </em>和<em class="lz"> Y </em>的协方差，分母由它们的标准差的乘积组成。</p><figure class="mi mj mk ml gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nk"><img src="../Images/9c99f4fe8ef45a222ae2d8b4df722342.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WloJZodoU6YvhM9lAp6vaA.jpeg"/></div></div><p class="nb nc gj gh gi nd ne bd b be z dk translated"><strong class="bd nl">卡尔·皮尔逊，图片来源:</strong> <a class="ae ni" href="https://en.wikipedia.org/wiki/Karl_Pearson#/media/File:Karl_Pearson,_1912.jpg" rel="noopener ugc nofollow" target="_blank"> <strong class="bd nl">维基媒体</strong> </a> <strong class="bd nl">，免费媒体使用</strong></p></figure><p id="2c8a" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated">皮尔逊系数足以进行一阶分析，但会受到异常值的影响，无法处理定义的非线性。因此，有必要超越线性相关分析。</p><p id="fd20" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated">对于这样的广义相关性分析，还有一些工具。其中，斯皮尔曼系数是最容易理解和计算的。在本文中，我们将讨论这一点。</p><h1 id="dd69" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">斯皮尔曼系数</h1><p id="5463" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">Spearman系数是一个<a class="ae ni" href="https://en.wikipedia.org/wiki/Rank_correlation" rel="noopener ugc nofollow" target="_blank">等级相关性</a>(两个随机变量的<a class="ae ni" href="https://en.wikipedia.org/wiki/Ranking" rel="noopener ugc nofollow" target="_blank">等级</a>之间的<a class="ae ni" href="https://en.wikipedia.org/wiki/Correlation_and_dependence" rel="noopener ugc nofollow" target="_blank">统计相关性</a>的度量)。它是以英国心理学家查尔斯·斯皮尔曼的名字命名的，他以因素分析和其他贡献而闻名。</p><p id="bdf9" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated">那么，这和我们熟悉的正则相关系数有什么不同呢？斯皮尔曼系数是不同的，因为它不仅仅是关于原始数值，而是关于排名。</p><h2 id="8ba3" class="nm kj it bd kk nn no dn ko np nq dp ks lj nr ns ku ln nt nu kw lr nv nw ky nx bi translated">什么是等级？</h2><p id="eca3" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">那么，什么是等级呢？这里是<a class="ae ni" href="https://en.wikipedia.org/wiki/Ranking" rel="noopener ugc nofollow" target="_blank">维基百科的定义</a>，</p><p id="d8c4" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated"><em class="lz">一个</em> <strong class="lc iu"> <em class="lz">排名</em> </strong> <em class="lz">是一组条目之间的关系，使得对于任何两个条目，第一个要么“排名高于”、“排名低于”，要么“排名等于”第二个。</em></p><p id="7d33" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated">取两组数字——1，2，3和10，24，102。这些集合之间的精确数字关系可能看起来很奇怪，但如果我们只考虑它们的排名，它们在“一对一”的意义上非常相似。<em class="lz">每组中的第二个数大于第一个数，小于第三个数。从这个角度来看，两组是相同的</em>。相对顺序很重要，而不是实际的数值。</p><p id="8dc1" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated">这两个集合的皮尔逊(线性)相关系数可以完全不同于1。但是斯皮尔曼系数将是一个完美的1。</p><p id="a119" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated">遵循类似皮尔逊系数的公式，它由下式给出:</p><figure class="mi mj mk ml gt mn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/c444f27625fe034c0533095cbede760a.png" data-original-src="https://miro.medium.com/v2/resize:fit:588/format:webp/1*56Vqdof7Sz49clBtZMw6Uw.png"/></div></figure><p id="ee1c" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated">唯一的区别是，所有原始数值都被它们的等级值(即，第1、第2、第3、第50百分位等的顺序值)所取代。).</p><h2 id="581d" class="nm kj it bd kk nn no dn ko np nq dp ks lj nr ns ku ln nt nu kw lr nv nw ky nx bi translated">Python的一个例子</h2><p id="1035" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">使用Scipy库，计算两组一维或二维数组的Spearman系数非常简单。</p><p id="810b" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated">让我们用一个典型的例子来展示这两种类型的相关性之间的明显区别，</p><pre class="mi mj mk ml gt nz oa ob oc aw od bi"><span id="4592" class="nm kj it oa b gy oe of l og oh">import numpy as np, matplotlib.pyplot as plt<br/>import scipy.stats as stat</span><span id="c7d7" class="nm kj it oa b gy oi of l og oh">x = np.linspace(0,10,20)<br/>y = np.log(1+1/(x+0.1))</span><span id="75d8" class="nm kj it oa b gy oi of l og oh">pearson = stat.pearsonr(x,y)<br/>spearman = <strong class="oa iu">stat.spearmanr(x,y)</strong></span></pre><p id="de0d" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated">如果我们检查它们的值，它们将分别是-0.65和-1.0。这是视觉表现，</p><figure class="mi mj mk ml gt mn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/21da76cd56fbb0a32559d2a68b8d6ce6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*0IZoPMFdfUMrvVlOU3cibQ.png"/></div><p class="nb nc gj gh gi nd ne bd b be z dk translated">图片来源:作者创作</p></figure><p id="48cf" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated">为什么斯皮尔曼系数是完美的-1.0？因为两个数组的排列顺序完全相同。只要基础函数遵循单调(递增或递减)顺序，这将是正确的。显然，生成函数是高度非线性的(对数的倒数)，但这不会影响Spearman系数。</p><h2 id="f596" class="nm kj it bd kk nn no dn ko np nq dp ks lj nr ns ku ln nt nu kw lr nv nw ky nx bi translated">Spearman系数对异常值更稳健</h2><p id="131d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果我们将一些随机异常值引入到如上所述的相同阵列中，我们将会看到Spearman系数对于这些异常值更加稳健，因为等级顺序受到的干扰比实际数值小得多。这是一个带有异常值的样本结果。</p><figure class="mi mj mk ml gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ok"><img src="../Images/502a3b4b824a1d04104c3edf19b2b530.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*YT0Mb5FueEa3gnFHfhG2rQ.png"/></div></div><p class="nb nc gj gh gi nd ne bd b be z dk translated">图片来源:作者创作</p></figure><p id="ff9d" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated">皮尔逊系数受到异常值的干扰(从-0.65到-0.79)，但是斯皮尔曼系数几乎没有变化(从-1.0到-0.99)。</p><h1 id="706e" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">摘要</h1><p id="6806" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在本文中，我们讨论了Spearman系数，它相当于更广泛使用的Pearson系数，但用于相关数组的排序。这是更广义的相关性分析的一个特例，它着眼于与两个随机变量可以假定的数字数组或数值集相关联的多级属性。</p><p id="5e3c" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated">在许多情况下，可以使用超出线性皮尔逊系数的方法，例如在存在异常值的情况下，或者当排序比原始数值更值得分析时。在这种情况下，像斯皮尔曼系数这样的概念对数据科学家来说将会派上用场。</p></div><div class="ab cl ol om hx on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="im in io ip iq"><p id="1ea7" class="pw-post-body-paragraph la lb it lc b ld ma ju lf lg mb jx li lj md ll lm ln mf lp lq lr mh lt lu lv im bi translated">喜欢这篇文章吗？成为 <a class="ae ni" href="https://medium.com/@tirthajyoti/membership" rel="noopener"> <strong class="lc iu"> <em class="lz">中等会员</em> </strong> </a> <em class="lz">继续</em> <strong class="lc iu"> <em class="lz">无限制学习</em> </strong> <em class="lz">。如果您使用下面的链接，</em> <strong class="lc iu"> <em class="lz">，我将收取您的一部分会员费，而不会对您产生额外费用</em> </strong> <em class="lz">。</em></p><div class="os ot gp gr ou ov"><a href="https://medium.com/@tirthajyoti/membership" rel="noopener follow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd iu gy z fp pa fr fs pb fu fw is bi translated">通过我的推荐链接加入媒体</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">medium.com</p></div></div><div class="pe l"><div class="pf l pg ph pi pe pj mx ov"/></div></div></a></div></div></div>    
</body>
</html>