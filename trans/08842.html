<html>
<head>
<title>The Difference Between Where and Select Functions of Python NumPy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python NumPy的Where和Select函数的区别</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-difference-between-where-and-select-functions-of-python-numpy-9c81273ed5fb?source=collection_archive---------14-----------------------#2021-08-15">https://towardsdatascience.com/the-difference-between-where-and-select-functions-of-python-numpy-9c81273ed5fb?source=collection_archive---------14-----------------------#2021-08-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="eeba" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">实践教程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a93afc767c4d8a773b297eb23b33e32c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1AQ1Z8YgWzuWAQxt_yhfuw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Vanesa Giaconi 在<a class="ae ky" href="https://unsplash.com/s/photos/comparison?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="5c86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas和NumPy是用于数据分析和操作的两个伟大的Python库。它们可以说是数据科学生态系统中最受欢迎的库。</p><p id="9a8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">两者都提供了一些功能和方法来简化复杂的操作。在本文中，我们将讨论NumPy的两个这样的函数:Where和Select。</p><p id="7eb6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些函数可用于根据列的值对列进行评估。因此，在过滤数据框或创建新列时，它们会派上用场。</p><p id="44bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从导入库和创建样本数据框开始。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0d15" class="ma mb it lw b gy mc md l me mf">import numpy as np<br/>import pandas as pd</span><span id="4112" class="ma mb it lw b gy mg md l me mf">df = pd.DataFrame(<br/>  np.random.randint(30, size=(5,6)),<br/>  columns = list("ABCDEF")<br/>)</span><span id="0b97" class="ma mb it lw b gy mg md l me mf">df.insert(0, "Cat", ["A","A","B","A","B"])</span><span id="5bd3" class="ma mb it lw b gy mg md l me mf">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/c95a313477aff66f84a47339c45f8471.png" data-original-src="https://miro.medium.com/v2/resize:fit:498/format:webp/1*M7skyGuzzGUZxLdT8LgxYQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">df(作者图片)</p></figure><p id="07c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用randint函数来填充数据框。它由用size参数定义的5行和6列组成。这些值是0到30之间的随机整数。</p><p id="6496" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我还想添加一个分类列作为数据框的第一列，所以我使用insert函数，而不是传统的创建新列的方法。</p><p id="c120" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">insert函数允许使用列索引指定新列的位置。</p><p id="e4a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是时候实践我们宝贵的功能了。让我们从哪里开始。</p><p id="83c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">where函数接受一个或一组条件。然后，我们可以为符合和不符合条件的行分配单独的值。</p><p id="db63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用一个例子更容易理解。</p><p id="5343" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们基于以下条件创建一个名为“where”的新列:</p><ul class=""><li id="5db8" class="mi mj it lb b lc ld lf lg li mk lm ml lq mm lu mn mo mp mq bi translated">如果Cat列中的值是A，而B列中的值大于10，则新列的值为1。</li><li id="b730" class="mi mj it lb b lc mr lf ms li mt lm mu lq mv lu mn mo mp mq bi translated">对于不符合上述条件的行，新列的值为0。</li></ul><p id="31da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是我们如何完成这项任务。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="d916" class="ma mb it lw b gy mc md l me mf">df["WhereCol"] = np.where((df.Cat == "A") &amp; (df.B &gt; 10), 1, 0)</span><span id="8adb" class="ma mb it lw b gy mg md l me mf">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/dc7f159654fc61070dee0fe4f8688a25.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*IHLuvTqNpzCdMt1Nbfw8XQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">df(作者图片)</p></figure><p id="b7a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以增加条件的数量，也可以更改新列中的值。</p><p id="ed9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">where函数能够计算一组条件的值。因此，我们只能在新列中分配两个不同的值:一个用于符合条件的行，另一个用于其他行。</p><p id="7b87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">select函数更进一步。它接受多组条件。然后，我们可以为每组条件分配不同的值。因此，新列可以根据需要包含任意多的不同值。</p><p id="db53" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们基于以下条件创建一个名为“SelectNew”的列:</p><ul class=""><li id="4fa7" class="mi mj it lb b lc ld lf lg li mk lm ml lq mm lu mn mo mp mq bi translated">如果Cat列中的值是A，而B列中的值大于10，则新列的值为1。</li><li id="7952" class="mi mj it lb b lc mr lf ms li mt lm mu lq mv lu mn mo mp mq bi translated">如果Cat列中的值是B，而B列中的值大于10，则新列的值为2。</li><li id="5812" class="mi mj it lb b lc mr lf ms li mt lm mu lq mv lu mn mo mp mq bi translated">对于不符合上述条件的行，新列的值为0。</li></ul><p id="ee76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该任务可以使用选择功能完成，如下所示:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="be01" class="ma mb it lw b gy mc md l me mf">conditions = [<br/>  (df.Cat == "A") &amp; (df.B &gt; 10),<br/>  (df.Cat == "B") &amp; (df.B &gt; 10)<br/>]</span><span id="7e5f" class="ma mb it lw b gy mg md l me mf">values = [1, 2]</span><span id="ded1" class="ma mb it lw b gy mg md l me mf">df["SelectCol"] = np.select(conditions, values, default=0)</span><span id="f8d6" class="ma mb it lw b gy mg md l me mf">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/cfdf02e42f4af64564ebbf3cd28d8d9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/1*mlb8LYBOs1B03sWXTTwVhA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">df(作者图片)</p></figure><p id="7ce2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">条件和值作为列表传递给select函数。第一个条件与第一个值相关联，第二个条件与第二个值相关联，依此类推。</p><p id="b0a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认参数用于不符合任何条件的行。</p><p id="bcf9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以在单个列上指定条件。再来做一个例子。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c100" class="ma mb it lw b gy mc md l me mf">conditions = [<br/>  (df.B % 2 == 0) &amp; (df.B &gt; 20),<br/>  (df.B % 2 == 1) &amp; (df.B &gt; 20),<br/>  (df.B &lt; 10)<br/>]</span><span id="c907" class="ma mb it lw b gy mg md l me mf">values = ["first","second","third"]</span><span id="9226" class="ma mb it lw b gy mg md l me mf">df["SelectCol2"] = np.select(conditions, values, default="other")</span><span id="9618" class="ma mb it lw b gy mg md l me mf">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi my"><img src="../Images/ced403615ea2f7b8a41ba164d19dbf1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*76UrjHYLkp9ELFbsRx20jg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">df(作者图片)</p></figure><p id="438d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“SelectNew2”列是基于以下条件创建的:</p><ul class=""><li id="7897" class="mi mj it lb b lc ld lf lg li mk lm ml lq mm lu mn mo mp mq bi translated">如果B列是大于20的偶数，则它是“第一个”。</li><li id="333b" class="mi mj it lb b lc mr lf ms li mt lm mu lq mv lu mn mo mp mq bi translated">如果B列是大于20的奇数，则为“第二列”。</li><li id="2d01" class="mi mj it lb b lc mr lf ms li mt lm mu lq mv lu mn mo mp mq bi translated">如果B列的值小于10，则为“第三”。</li><li id="9183" class="mi mj it lb b lc mr lf ms li mt lm mu lq mv lu mn mo mp mq bi translated">对于其他值，它是“其他”。</li></ul></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h2 id="156c" class="ma mb it bd ng nh ni dn nj nk nl dp nm li nn no np lm nq nr ns lq nt nu nv nw bi translated">结论</h2><p id="3981" class="pw-post-body-paragraph kz la it lb b lc nx ju le lf ny jx lh li nz lk ll lm oa lo lp lq ob ls lt lu im bi translated">where和select函数都允许创建条件列。where函数产生具有两个不同值的列。一个用于符合指定条件的行，一个用于另一个。</p><p id="c9a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">select函数更加灵活，因为它允许根据需要创建包含任意多不同值的条件列。我们只需要分别指定每个值的条件。</p><p id="918d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>