<html>
<head>
<title>The Quick Guide To Using Environment Variables in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Python中使用环境变量快速指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-quick-guide-to-using-environment-variables-in-python-d4ec9291619e?source=collection_archive---------5-----------------------#2021-06-13">https://towardsdatascience.com/the-quick-guide-to-using-environment-variables-in-python-d4ec9291619e?source=collection_archive---------5-----------------------#2021-06-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="fd9b" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">在您的数据科学应用中轻松设置应用机密、加载和检索它们。</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/53b197ba542817c419d69b780a01ae87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NsknVZfCWbU0FLEe"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://unsplash.com/@jarrodreed?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">贾罗德·里德</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="b3b2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在我们的日常工作中，我们都遇到过在公共版本控制系统(如<strong class="lc iv"> Git </strong>)上共享特定内容之前，对我们的应用程序隐藏这些内容的需求。</p><p id="f7d0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">你可能会处理你的SQL数据库名称和网址，它们的密码，一些与AWS或谷歌云平台用户组相关的密钥，API秘密，等等。</p><blockquote class="lw lx ly"><p id="a18f" class="la lb lz lc b ld le jv lf lg lh jy li ma lk ll lm mb lo lp lq mc ls lt lu lv in bi translated">每个应用程序都有自己的怪癖，总有一段时间<strong class="lc iv">我们不喜欢将这些应用程序的秘密</strong>直接硬编码到我们的代码库中。</p></blockquote><p id="3d40" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">幸运的是，我们有了<strong class="lc iv">环境变量的概念，</strong>为我们提供了一种配置Python应用程序的好方法，在处理这种秘密时，不需要对我们的源代码做任何修改。</p><p id="90a7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这篇小文章中，我将分享我在自己的数据科学项目中使用环境变量的方式。</p><p id="1160" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们开始吧👇</p><h1 id="be9f" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">直接将它们提供给当前的bash会话</h1><p id="2cb8" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">这是在Python或其他语言中配置环境变量的最简单的方法之一。</p><p id="18d5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您只需导出它们，使它们在您当前的bash会话中可见，这意味着在您使用终端而不关闭之前，您将能够通过您的代码访问您设置的所有变量。</p><p id="9d50" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">它就像键入和输入一样简单:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj na"><img src="../Images/22d49ce65dab622b8f90e6f3499f6ac4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LqZVX92Tt0NLaRPSblQr4A.png"/></div></div></figure><p id="2323" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">请注意，必须完全按照我显示的那样输入，两边的等号之间不能有空格，双引号内的密钥也不能有空格。</strong></p><p id="3ae6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">好的，太好了！这看起来很简单，对吗？</p><p id="300c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">接下来，让我向您展示另一种方法，但这种方法会稍微持久一些。</p><h1 id="b49f" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">在应用程序中使用. env文件</h1><p id="06ad" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">老实说，在bash中逐个设置每个环境变量会变得非常不方便，当您关闭terminal选项卡时就会丢失它们。</p><p id="d851" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此外，您还需要知道如何在您的操作系统上正确地这样做——显然，它在Windows上的工作方式与基于Unix的系统不同。</p><p id="b718" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">因此，我通常做的是通过一个<strong class="lc iv">管理我所有的环境变量。env </strong>文件，可以保存在我的app里面。</p><p id="f7f1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">它在各种操作系统下的工作方式完全相同，并且易于安装和使用我们的Python应用程序。</strong></p><p id="1582" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">做一个新的。env文件，并在其中设置所有变量，然后保存，例如:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nb"><img src="../Images/64c2d94ba5cff93557a33b3e0a38d6a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hgYyzVrzYeZcWRfAgIKXRg.png"/></div></div></figure><p id="eaf2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">就是这样！您所有的变量都可以设置一次，您可以完全忘记它们与bash的关联。</p><blockquote class="lw lx ly"><p id="4e56" class="la lb lz lc b ld le jv lf lg lh jy li ma lk ll lm mb lo lp lq mc ls lt lu lv in bi translated">另外，不要忘记在您的<strong class="lc iv">中添加这个文件名。gitignore </strong>文件，为了保护它不受你无所不知的版本控制系统的影响！</p></blockquote><h1 id="959e" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">访问代码中的环境变量</h1><p id="8e64" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">到目前为止，我们已经看到了如何以两种方式设置我们的秘密变量——通过我们的bash会话和作为一个单独的文件。现在，让我们看看如何在Python代码中访问它们。</p><ol class=""><li id="b623" class="nc nd iu lc b ld le lg lh lj ne ln nf lr ng lv nh ni nj nk bi translated"><strong class="lc iv"/><code class="fe nl nm nn no b">os.environ.get()</code><strong class="lc iv">功能</strong></li></ol><p id="7317" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果在bash会话中设置变量，可以通过如下代码片段轻松访问它们:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj np"><img src="../Images/e05d707f9bfd599a226d9cae86915e1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k7smMEE3R615AMfpQ-Ka0A.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">取回环境变量！</p></figure><p id="bfdd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这里，我们获得了环境变量<code class="fe nl nm nn no b"><strong class="lc iv">DATABASE_URL</strong></code>的值，并将其默认值指定为:<code class="fe nl nm nn no b"><strong class="lc iv">‘sqlite:////’</strong></code>。</p><p id="f667" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您将默认值保留为空，它将返回<code class="fe nl nm nn no b"><strong class="lc iv">None</strong></code>，如果您还没有用这个名称设置变量的话。</p><p id="94e0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您采用了第二种方法，并通过。env文件，您可以在代码中使用不同的方法来访问它们。</p><h2 id="9274" class="nq me iu bd mf nr ns dn mj nt nu dp mn lj nv nw mp ln nx ny mr lr nz oa mt ob bi translated">2.使用dotenv包</h2><p id="ccb9" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated"><a class="ae kz" href="https://pypi.org/project/python-dotenv/" rel="noopener ugc nofollow" target="_blank">在您的虚拟环境中简单地通过这个命令安装软件包</a>:</p><pre class="kk kl km kn gu oc no od oe aw of bi"><span id="2398" class="nq me iu no b gz og oh l oi oj">pip install python-dotenv</span></pre><p id="3e4e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">接下来，我们可以从。env文件通过它。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ok"><img src="../Images/222bbc442ab6b34aafaa5e0bcd7a4671.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*grmAMpxdBTCBPQjO6YPDxA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">从目录中的. env文件加载变量</p></figure><p id="576f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">接下来，我们可以很容易地使用<code class="fe nl nm nn no b"><strong class="lc iv">os.environ.get()</strong></code>函数，通过变量的名称获取变量，就像上一步一样。</p><h1 id="6f06" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">结束…</h1><p id="9a1e" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">在你的应用程序中设置环境变量可以让你省去很多麻烦(也可能是心脏病:P)，因为它们有助于隐藏你的<em class="lz">中的敏感信息。env </em>文件，如URL、密码和API密钥。</p><p id="dd9f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我希望这篇文章对你在自己的应用程序中使用它们有所帮助。</p><p id="5276" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://medium.com/@ipom" rel="noopener">在这里跟随我</a>每周阅读更多这样的文章！我经常写关于编程的文章，还有我作为数据科学家的经历。:)</p><p id="c222" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">你也可以在这里查看与我所有文章相关的代码和资源。</p></div><div class="ab cl ol om hy on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="in io ip iq ir"><p id="bbd9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我的另外几篇文章，你可能想看看:</p><div class="os ot gq gs ou ov"><a rel="noopener follow" target="_blank" href="/the-nice-way-to-use-docker-with-vscode-f475c49aab1b"><div class="ow ab fp"><div class="ox ab oy cl cj oz"><h2 class="bd iv gz z fq pa fs ft pb fv fx it bi translated">将Docker与VSCode结合使用的好方法</h2><div class="pc l"><p class="bd b dl z fq pa fs ft pb fv fx dk translated">towardsdatascience.com</p></div></div><div class="pd l"><div class="pe l pf pg ph pd pi kt ov"/></div></div></a></div><div class="os ot gq gs ou ov"><a rel="noopener follow" target="_blank" href="/how-to-use-bash-to-automate-the-boring-stuff-for-data-science-d447cd23fffe"><div class="ow ab fp"><div class="ox ab oy cl cj oz"><h2 class="bd iv gz z fq pa fs ft pb fv fx it bi translated">如何使用Bash来自动化数据科学的枯燥工作</h2><div class="pj l"><h3 class="bd b gz z fq pa fs ft pb fv fx dk translated">使用命令行为您的数据科学项目编写一些可重用代码的指南</h3></div><div class="pc l"><p class="bd b dl z fq pa fs ft pb fv fx dk translated">towardsdatascience.com</p></div></div><div class="pd l"><div class="pk l pf pg ph pd pi kt ov"/></div></div></a></div></div></div>    
</body>
</html>