<html>
<head>
<title>Storing Data: R Data Types</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">存储数据:R数据类型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/storing-data-in-r-data-types-d0fa076ba5ad?source=collection_archive---------46-----------------------#2021-05-25">https://towardsdatascience.com/storing-data-in-r-data-types-d0fa076ba5ad?source=collection_archive---------46-----------------------#2021-05-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="048b" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">教程| R |数据类型和结构</h2><div class=""/><div class=""><h2 id="5597" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">R中数据科学的构建块</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/c6aecc6225724f7a08dd1874390ffda0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nYLa99nxbAJnEAak"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">Iker Urteaga 在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="93ba" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了用R做数据科学，我们需要将数据存储在变量中。根据我们的数据是什么，我们需要给它正确的类型。通过选择不同的类型，我们能够在以后访问不同的工具来操作和使用该变量。有些更灵活，有些计算效率更高。让我们开始吧。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="2a3c" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">数据类型</h1><p id="aeb2" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">让我们从不同类型的数据开始。虽然这不是一个全面的列表，但它将涵盖数据科学中使用的一些最重要的数据类型。</p><ol class=""><li id="ba78" class="ni nj it lk b ll lm lo lp lr nk lv nl lz nm md nn no np nq bi translated">数字的</li><li id="c2a6" class="ni nj it lk b ll nr lo ns lr nt lv nu lz nv md nn no np nq bi translated">因素</li><li id="7fde" class="ni nj it lk b ll nr lo ns lr nt lv nu lz nv md nn no np nq bi translated">性格；角色；字母</li><li id="6f97" class="ni nj it lk b ll nr lo ns lr nt lv nu lz nv md nn no np nq bi translated">日期/时间</li></ol><h2 id="208f" class="nw mm it bd mn nx ny dn mr nz oa dp mv lr ob oc mx lv od oe mz lz of og nb iz bi translated">数字的</h2><p id="d4db" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">数字类型可以有多种形式，例如数字、整数和复数。数字可以是任何带或不带小数位的数字。在其他语言中，它们被称为浮点数。<code class="fe oh oi oj ok b">31</code>、<code class="fe oh oi oj ok b">-4.2</code>、<code class="fe oh oi oj ok b">0.00324</code>都是数字。整数只包含整数。<code class="fe oh oi oj ok b">3</code>和<code class="fe oh oi oj ok b">-24</code>是整数的例子。复数有虚数部分，比如<code class="fe oh oi oj ok b">2 + 3i</code>。</p><p id="e17a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您可以像这样定义这些数值类型:</p><pre class="ks kt ku kv gt ol ok om on aw oo bi"><span id="57b7" class="nw mm it ok b gy op oq l or os"># Numeric<br/>x &lt;- 27.5</span><span id="cb1b" class="nw mm it ok b gy ot oq l or os"># Integer<br/>y &lt;- 12L</span><span id="ac04" class="nw mm it ok b gy ot oq l or os"># Complex<br/>z &lt;- 2 + 3i</span></pre><p id="91e8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果使用RStudio，可以将鼠标悬停在环境窗格中的每个变量上，以查看其类型。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/8e47092b7b6cd9d9388b5f276805afb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*TIK0xmYk1eCPUvJC7l5JyQ.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">z是“复杂”类型</p></figure><p id="ea77" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe oh oi oj ok b">typeof()</code>函数也可以用来获取变量的类型。x的<code class="fe oh oi oj ok b">double</code>类型是处理数字数据时最常见的数字格式之一。</p><pre class="ks kt ku kv gt ol ok om on aw oo bi"><span id="0fca" class="nw mm it ok b gy op oq l or os">typeof(x)<br/># "double"</span><span id="5a5c" class="nw mm it ok b gy ot oq l or os">typeof(y)<br/># "integer"</span><span id="6622" class="nw mm it ok b gy ot oq l or os">typeof(z)<br/># "complex"</span></pre><p id="2150" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">定义了一些数字数据后，就可以把R当作计算器使用了。所有的标准运算符都工作，如<code class="fe oh oi oj ok b">+</code>、<code class="fe oh oi oj ok b">-</code>、<code class="fe oh oi oj ok b">*</code>和<code class="fe oh oi oj ok b">/</code>。还有一些有用的函数，比如<code class="fe oh oi oj ok b">abs()</code>，用于查找一个数字的绝对值，或者<code class="fe oh oi oj ok b">exp()</code>，用于计算<code class="fe oh oi oj ok b">e</code>到括号内的值。</p><pre class="ks kt ku kv gt ol ok om on aw oo bi"><span id="1e0f" class="nw mm it ok b gy op oq l or os">x + y<br/># 39.5</span><span id="cfcb" class="nw mm it ok b gy ot oq l or os">x * z<br/># 23+36i</span><span id="6c4c" class="nw mm it ok b gy ot oq l or os">abs(x)<br/># 27.5</span><span id="846a" class="nw mm it ok b gy ot oq l or os">exp(x)<br/># 877199251319</span></pre><h2 id="f3eb" class="nw mm it bd mn nx ny dn mr nz oa dp mv lr ob oc mx lv od oe mz lz of og nb iz bi translated">因素</h2><p id="062e" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">因素是数据中的类别。在你的数据中，你通常会看到像雄性和雌性或者刚毛藻、杂色花、海滨草这样的东西(来自<a class="ae lh" href="https://archive.ics.uci.edu/ml/datasets/iris" rel="noopener ugc nofollow" target="_blank">鸢尾</a>数据集)。这些是分割你的数据的方法，它们会包含很多重复。因子将每个类别表示为一个数字，有助于更有效地存储这些信息。</p><pre class="ks kt ku kv gt ol ok om on aw oo bi"><span id="c70c" class="nw mm it ok b gy op oq l or os">gender &lt;- factor("male", levels = c("male", "female"))</span><span id="d4a1" class="nw mm it ok b gy ot oq l or os">flower_type &lt;- factor("setosa", levels = c( "virginica", "setosa", "versicolor"))</span><span id="d243" class="nw mm it ok b gy ot oq l or os">print(gender)<br/># male<br/># Levels: male female</span><span id="4328" class="nw mm it ok b gy ot oq l or os">print(flower_type)<br/># setosa<br/># Levels: virginica setosa versicolor</span></pre><p id="4162" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">打印因子时，您会看到级别的名称。如果您在RStudio的环境窗格中查看，您会看到一个数字。通过将因子表示为变量的相应级别，节省了空间。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/ee3cfe364021d4a73c93719381983e65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*Ix2T8wqUwsgk5FIfhLU4aA.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">在幕后，flower_type是a 2，gender是a 1</p></figure><p id="c40d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当我们创建<code class="fe oh oi oj ok b">gender_2</code>时，您可以开始看到这是如何节省空间的。我们将有5个因素，而不是1个因素。</p><pre class="ks kt ku kv gt ol ok om on aw oo bi"><span id="e3ef" class="nw mm it ok b gy op oq l or os">gender_2 &lt;- factor(c("male", "female", "female", "female", "male"), levels = c("male", "female"))</span><span id="a9bd" class="nw mm it ok b gy ot oq l or os">print(gender_2)<br/># male female female female male<br/># Levels: male female</span></pre><p id="e225" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在我们的环境窗口中，我们现在看到在<code class="fe oh oi oj ok b">gender_2</code>中有多个1和2来代表我们不同的性别。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/fbeb0ea5e63af2622a4199de9c793540.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*Q_T1bBbxzB7AoscN0JFK0A.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">在幕后，gender_2只是一系列表示因子级别的数字</p></figure><p id="3e02" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe oh oi oj ok b">table()</code>函数对于处理因子很有用。它给出了数据中每个级别的计数。</p><pre class="ks kt ku kv gt ol ok om on aw oo bi"><span id="aaa6" class="nw mm it ok b gy op oq l or os">table(gender_2)<br/># gender_2<br/># male   female<br/>#    2        3       </span></pre><p id="9a3e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">根据您需要了解的内容，<code class="fe oh oi oj ok b">nlevels()</code>和<code class="fe oh oi oj ok b">levels()</code>分别给出了因子中的级别数和级别名。</p><pre class="ks kt ku kv gt ol ok om on aw oo bi"><span id="48fd" class="nw mm it ok b gy op oq l or os">nlevels(gender_2)<br/># 2</span><span id="1e3f" class="nw mm it ok b gy ot oq l or os">levels(gender_2)<br/># "male" "female"</span></pre><h2 id="0a3c" class="nw mm it bd mn nx ny dn mr nz oa dp mv lr ob oc mx lv od oe mz lz of og nb iz bi translated">特性</h2><p id="ee36" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">字符是R表示文本的方式。如果你来自另一种编程语言，这些通常被称为字符串。您可以将整本书存储在单个字符串变量中，或者从网站调查的文本条目中获得自由回答。</p><p id="7571" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了定义R中的字符，我们将文本放在引号中。可以用单引号(<code class="fe oh oi oj ok b">'</code>)，也可以用双引号(<code class="fe oh oi oj ok b">"</code>)。r也是这么解释的。我发现双引号在R中更常见，但是单引号在其他编程语言中也经常使用，所以你可能也会遇到。</p><pre class="ks kt ku kv gt ol ok om on aw oo bi"><span id="94bf" class="nw mm it ok b gy op oq l or os">character &lt;- 'string'<br/>print(character)<br/># "string"</span><span id="15ab" class="nw mm it ok b gy ot oq l or os">text &lt;- "This is also a string"<br/>print(text)<br/># "This is also a string"</span></pre><p id="b41a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">r包含一些内置函数，在处理字符文本时很有用。<code class="fe oh oi oj ok b">nchar()</code>给出字符变量中的字符数，而<code class="fe oh oi oj ok b">paste()</code>将字符变量组合在一起，用空格分隔。</p><pre class="ks kt ku kv gt ol ok om on aw oo bi"><span id="ec28" class="nw mm it ok b gy op oq l or os">nchar(text)<br/># 21</span><span id="7a85" class="nw mm it ok b gy ot oq l or os">paste(character, text)<br/># "string This is also a string"</span></pre><p id="bbb1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">还有一个包<code class="fe oh oi oj ok b"><a class="ae lh" href="https://stringr.tidyverse.org/" rel="noopener ugc nofollow" target="_blank">stringr</a></code>，它允许文本操作技术，比如替换、获取字符可变长度，甚至用正则表达式(或regex)查找文本。正则表达式非常灵活，对于掌握文本操作非常重要。</p><div class="ox oy gp gr oz pa"><a rel="noopener follow" target="_blank" href="/a-gentle-introduction-to-regular-expressions-with-r-df5e897ca432"><div class="pb ab fo"><div class="pc ab pd cl cj pe"><h2 class="bd jd gy z fp pf fr fs pg fu fw jc bi translated">R正则表达式的简明介绍</h2><div class="ph l"><h3 class="bd b gy z fp pf fr fs pg fu fw dk translated">正则表达式是数据科学家对付非结构化文本最强大的武器。他们曾经是野餐…</h3></div><div class="pi l"><p class="bd b dl z fp pf fr fs pg fu fw dk translated">towardsdatascience.com</p></div></div><div class="pj l"><div class="pk l pl pm pn pj po lb pa"/></div></div></a></div><div class="ox oy gp gr oz pa"><a rel="noopener follow" target="_blank" href="/anchors-away-more-regex-concepts-in-r-f00fe7f07d52"><div class="pb ab fo"><div class="pc ab pd cl cj pe"><h2 class="bd jd gy z fp pf fr fs pg fu fw jc bi translated">起锚！R中更多的正则表达式概念</h2><div class="ph l"><h3 class="bd b gy z fp pf fr fs pg fu fw dk translated">更先进的正则表达式工具，为您的R文本争论武器库</h3></div><div class="pi l"><p class="bd b dl z fp pf fr fs pg fu fw dk translated">towardsdatascience.com</p></div></div><div class="pj l"><div class="pp l pl pm pn pj po lb pa"/></div></div></a></div><h2 id="33df" class="nw mm it bd mn nx ny dn mr nz oa dp mv lr ob oc mx lv od oe mz lz of og nb iz bi translated">日期和时间</h2><p id="e340" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">在商业世界和<a class="ae lh" href="https://en.wikipedia.org/wiki/Longitudinal_study" rel="noopener ugc nofollow" target="_blank">纵向研究</a>中，相同的数据被定期收集，例如在月末、每天或每年。为了组织这些观察结果以便以后进行可视化和分析，我们需要日期和时间变量。</p><p id="fbf7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">r有一些内置的日期和时间变量，但是使用<code class="fe oh oi oj ok b"><a class="ae lh" href="https://lubridate.tidyverse.org/" rel="noopener ugc nofollow" target="_blank">lubridate</a></code>包使它们更容易解析和处理。您可以使用<code class="fe oh oi oj ok b">lubridate</code>以多种不同的格式定义日期。它甚至可以自动处理日期中的分隔符，如斜线、破折号、冒号或空格！</p><pre class="ks kt ku kv gt ol ok om on aw oo bi"><span id="5be0" class="nw mm it ok b gy op oq l or os">library(lubridate)</span><span id="a7b1" class="nw mm it ok b gy ot oq l or os">sample_date &lt;- ymd("2020-01-21")<br/>print(sample_date)<br/># "2020-01-21"</span><span id="691b" class="nw mm it ok b gy ot oq l or os">sample_datetime &lt;- mdy_hms("1/23/2021 2:53:22")<br/>print(sample_datetime)<br/># "2021-01-23 02:53:22"</span></pre><p id="816a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">一旦你定义了日期和时间，你可以用它们做很多不同的事情。您可以提取日期时间的每个单独部分，添加一段时间，或者对它们进行舍入。</p><pre class="ks kt ku kv gt ol ok om on aw oo bi"><span id="3e81" class="nw mm it ok b gy op oq l or os"># Extract datetime components ----------------<br/>month(sample_date)<br/># 1<br/>second(sample_datetime)<br/># 21</span><span id="1c91" class="nw mm it ok b gy ot oq l or os"># Add a period of time -----------------------<br/>sample_date + years(50)<br/># "2070-01-21"</span><span id="1cdc" class="nw mm it ok b gy ot oq l or os"># Round a datetime down by month -------------<br/>floor_date(sample_date, unit = "month")<br/># "2020-01-01"</span></pre><p id="2b34" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你可以用日期和时间做很多其他的事情，如果你有兴趣了解更多，看看<code class="fe oh oi oj ok b">lubridate</code> <a class="ae lh" href="https://rawgit.com/rstudio/cheatsheets/master/lubridate.pdf" rel="noopener ugc nofollow" target="_blank">备忘单</a>。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="8e91" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">结论</h1><p id="a21a" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">通过对R中一些最常见的数据类型的简要概述，您可以了解如何存储变量以及不同类型的一些优点。为了继续学习R中的数据类型知识，您需要了解一下数据结构。这些是R中的变量集合，它们用于存储数据和更高级的分析。</p><div class="ox oy gp gr oz pa"><a href="https://realdrewdata.medium.com/membership" rel="noopener follow" target="_blank"><div class="pb ab fo"><div class="pc ab pd cl cj pe"><h2 class="bd jd gy z fp pf fr fs pg fu fw jc bi translated">通过我的推荐链接加入Medium-Drew Seewald</h2><div class="ph l"><h3 class="bd b gy z fp pf fr fs pg fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pi l"><p class="bd b dl z fp pf fr fs pg fu fw dk translated">realdrewdata.medium.com</p></div></div><div class="pj l"><div class="pq l pl pm pn pj po lb pa"/></div></div></a></div><div class="ox oy gp gr oz pa"><a href="https://realdrewdata.medium.com/storing-data-r-data-structures-717245c6bab8" rel="noopener follow" target="_blank"><div class="pb ab fo"><div class="pc ab pd cl cj pe"><h2 class="bd jd gy z fp pf fr fs pg fu fw jc bi translated">存储数据:R数据结构</h2><div class="ph l"><h3 class="bd b gy z fp pf fr fs pg fu fw dk translated">存放数据科学剩余产品的容器</h3></div><div class="pi l"><p class="bd b dl z fp pf fr fs pg fu fw dk translated">realdrewdata.medium.com</p></div></div><div class="pj l"><div class="pr l pl pm pn pj po lb pa"/></div></div></a></div></div></div>    
</body>
</html>