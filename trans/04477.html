<html>
<head>
<title>Predicting the Future: Learn to Forecast with Arima Models</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">预测未来:学会用Arima模型预测</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/predicting-the-future-learn-to-forecast-with-arima-models-2c41eaa8b548?source=collection_archive---------29-----------------------#2021-04-16">https://towardsdatascience.com/predicting-the-future-learn-to-forecast-with-arima-models-2c41eaa8b548?source=collection_archive---------29-----------------------#2021-04-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c613" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">是什么让Makes天体对预测如此有用？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/ee7a4bddddc2bb5d9406ec2ebfb6ef8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*-DrUL6G1Rlv-LfxGxfXEnA.jpeg"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片来自<a class="ae ku" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3973695" rel="noopener ugc nofollow" target="_blank">pix abay</a>Alexas _ Fotos</p></figure><h1 id="331c" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">XTS物体</h1><p id="517b" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">如果您没有使用XTS对象来执行R中的预测，那么您很可能会错过！我们将从头到尾探讨的主要好处是，当涉及到建模、预测和可视化时，这些对象更容易使用。</p><h1 id="0d71" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">让我们来看看细节</h1><p id="c510" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">XTS物体由两部分组成。第一个是日期索引，第二个是传统的数据矩阵。</p><p id="2999" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">不管你是想预测客户流失、销售、需求还是其他什么，让我们开始吧！</p><p id="511a" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">您需要做的第一件事是创建日期索引。我们使用<code class="fe mo mp mq mr b">seq</code>函数来实现。非常简单，这个函数获取您的开始日期、您拥有的记录数量或长度，然后是时间间隔或<code class="fe mo mp mq mr b">by</code>参数。对我们来说，数据集从以下内容开始。</p><pre class="kj kk kl km gt ms mr mt mu aw mv bi"><span id="0969" class="mw kw it mr b gy mx my l mz na">days &lt;- seq(as.Date("2014-01-01"), length = 668, by = "day")</span></pre><p id="0451" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">现在我们有了索引，我们可以用它来创建我们的XTS对象。为此，我们将使用xts函数。</p><p id="4e14" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">别忘了<code class="fe mo mp mq mr b">install.packages('xts')</code>然后加载库！<code class="fe mo mp mq mr b">library(xts)</code></p><p id="7a51" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">一旦我们完成了这些，我们将调用xts并传递我们的数据矩阵，然后对于日期索引，我们将把索引传递给<code class="fe mo mp mq mr b">order.by</code>选项。</p><pre class="kj kk kl km gt ms mr mt mu aw mv bi"><span id="4599" class="mw kw it mr b gy mx my l mz na">sales_xts &lt;- xts(sales, order.by = days)</span></pre><h1 id="2ba8" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">让我们用Arima创建一个预测</h1><p id="9436" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">Arima代表自回归综合移动平均线。一种非常流行的时间序列预测技术。我们可以花几个小时单独谈论ARIMA，但对于这篇文章，我们将给出一个高层次的解释，然后直接进入应用程序。</p><h1 id="30f1" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">AR:自回归</h1><p id="7131" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">这是我们使用前几个月的滞后值或数值来预测结果的地方。某个月的结果可能在一定程度上依赖于以前的值。</p><h1 id="af1a" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">I:集成</h1><p id="6b13" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">当谈到时间序列预测时，一个隐含的假设是，我们的模型在某种程度上依赖于时间。这似乎很明显，否则我们可能不会让我们的模型基于时间；).假设不存在了，我们需要理解时间相对于我们的模型在依赖谱上的位置。是的，我们的模型依赖于时间，但多少呢？这个的核心是<strong class="lp iu">平稳性</strong>的思想；这意味着时间的影响随着时间的推移而减少。</p><p id="80cb" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">更深入地说，数据集的历史平均值往往是未来结果的最佳预测器…但肯定有不正确的时候..你能想到历史平均值不是最佳预测值的情况吗？</p><ul class=""><li id="6e01" class="nb nc it lp b lq mj lt mk lw nd ma ne me nf mi ng nh ni nj bi translated">预测12月份的销售额怎么样？季节性趋势</li><li id="ed9a" class="nb nc it lp b lq nk lt nl lw nm ma nn me no mi ng nh ni nj bi translated">高速增长的saas公司销售情况如何？持续的上升趋势</li></ul><p id="f682" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">这里就介绍了<strong class="lp iu">差分</strong>的过程！差异用于消除趋势&amp;季节性的影响。</p><h1 id="989c" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">马:移动平均线</h1><p id="72fe" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">移动平均线模型的存在是为了处理你的模型的误差。</p><h1 id="1bb2" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">让我们开始建模吧！</h1><h1 id="f948" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">培训/验证分割</h1><p id="b9e4" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">首先，让我们将数据分解成一个训练数据集，然后我们称之为验证数据集。</p><p id="2e1b" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">这与其他验证测试(如交叉验证测试)的不同之处在于，我们在这里按时间划分，将训练划分到给定的时间点，并对之后的所有内容进行验证。</p><pre class="kj kk kl km gt ms mr mt mu aw mv bi"><span id="55c0" class="mw kw it mr b gy mx my l mz na">train &lt;- sales_xts[index(sales_xts) &lt;= "2015-07-01"] <br/>validation &lt;- sales_xts[index(sales_xts) &gt; "2015-07-01"]</span></pre><h1 id="b33e" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">是时候建立一个模型了</h1><p id="dae6" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated"><code class="fe mo mp mq mr b">auto.arima</code>函数包含了我们刚刚谈到的逼近最佳<code class="fe mo mp mq mr b">arima</code>模型的想法。我将在另一篇文章中详细介绍更实用的方法，但下面我将探索一个<code class="fe mo mp mq mr b">auto.arima</code>模型的生成以及如何使用它进行预测。</p><pre class="kj kk kl km gt ms mr mt mu aw mv bi"><span id="3c0f" class="mw kw it mr b gy mx my l mz na">model &lt;- auto.arima(train)</span></pre><p id="1e2d" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">现在让我们生成一个预测。与之前一样，我们将创建一个日期索引，然后用数据矩阵创建一个xts对象。</p><p id="5cbd" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">从这里开始，您将绘制验证数据，然后将预测放在绘图的顶部。</p><pre class="kj kk kl km gt ms mr mt mu aw mv bi"><span id="b1e4" class="mw kw it mr b gy mx my l mz na">forecast &lt;- forecast(model, h = 121) <br/>forecast_dates &lt;- seq(as.Date("2015-09-01"), length = 121, by = "day")</span><span id="2e20" class="mw kw it mr b gy np my l mz na">forecast_xts &lt;- xts(forecast$mean, order.by = forecast_dates)</span><span id="5a7a" class="mw kw it mr b gy np my l mz na">plot(validation, main = 'Forecast Comparison')</span><span id="d414" class="mw kw it mr b gy np my l mz na">lines(forecast_xts, col = "blue")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nr ns di nt bf nu"><div class="gh gi nq"><img src="../Images/f13dbebd52d3d19ed2877be87e2347c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*62QNczE8azVBl4YK"/></div></div></figure><h1 id="aeef" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">结论</h1><p id="f2fd" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">我希望这是一个对ARIMA预报有帮助的介绍。一定要让我知道什么是有帮助的，以及你想了解的任何其他细节。</p><p id="a50c" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">如果你觉得这很有帮助，一定要看看我在<a class="ae ku" href="http://datasciencelessons.com" rel="noopener ugc nofollow" target="_blank">datasciencelessons.com</a>上的其他帖子。祝数据科学快乐！</p></div></div>    
</body>
</html>