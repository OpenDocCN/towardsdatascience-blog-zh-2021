<html>
<head>
<title>Creating Generative Art NFTs from Genomic Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从基因组数据创建生殖艺术NFT</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/creating-generative-art-nfts-from-genomic-data-16a48ae4df99?source=collection_archive---------3-----------------------#2021-10-09">https://towardsdatascience.com/creating-generative-art-nfts-from-genomic-data-16a48ae4df99?source=collection_archive---------3-----------------------#2021-10-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/579b12921cae6711d217777d327d1cd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qX6oimlVHy4QAexX3lqqFw.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</p></figure><p id="bc53" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在这篇文章中，我概述了我和IPFS在区块链以太坊创建动态NFT的旅程，并讨论了科学数据可能的用例。我不讨论静态图像的算法生成(你应该阅读Albert Sanchez Lafuente的neat <a class="ae la" rel="noopener" target="_blank" href="/algorithmically-generated-image-dataset-71aee957563a">一步一步的</a>),而是演示当从浏览器查看NFT时，我如何使用Cytoscape.js、Anime.js和基因组特征数据在运行时动态生成可视化/艺术。我也不会提供区块链的概述，但我强烈推荐阅读黄一飞最近的帖子:<a class="ae la" rel="noopener" target="_blank" href="/why-every-data-scientist-should-pay-attention-to-crypto-39b4c25ff319">为什么每个数据科学家都应该关注加密</a>。</p><p id="d5a4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">疫情期间，我被困在家里，我是在我们位于布鲁克林的小公寓阳台上尝试园艺的1000万T4人之一。日本黄瓜很受我们邻居的欢迎，西红柿很受松鼠的欢迎，但我最喜欢看辣椒生长。这就是我的第一个NFT的目标:描绘一个随着时间而成熟的辣椒。</p><p id="6f14" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">有多少描绘是视觉化的，多少是艺术？这是旁观者的看法。当你花时间仔细检查数据点，崇拜最佳实践，优化从内存使用到午餐订单的一切时，采取一些艺术许可，仅仅因为你喜欢就做出一些东西，这是很好的，这正是我在这里所做的。该描述真实地产生于基因组数据特征，但显然这不应被视为任何种类的严肃的生物学分析。</p><p id="5fbe" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你正在寻找最终的实况结果，你可以在这里查看它<a class="ae la" href="https://opensea.io/assets/0x86944176301532d4432b50838cea252e3b2990bb/1001" rel="noopener ugc nofollow" target="_blank">，在这里</a>查看GitHub <a class="ae la" href="https://github.com/s1monj/nft-peppers" rel="noopener ugc nofollow" target="_blank">上的源代码。</a></p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div class="gh gi li"><img src="../Images/b0678b33f75f6cfc46868d7f60c4cfba.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*4veohTomIFpK30iYfTBT9w.png"/></div></figure><h2 id="28f9" class="ln lo iq bd lp lq lr dn ls lt lu dp lv kn lw lx ly kr lz ma mb kv mc md me mf bi translated">准备基因组数据</h2><p id="d4be" class="pw-post-body-paragraph kc kd iq ke b kf mg kh ki kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ij bi translated">这里没有什么新的东西，但为了完整起见，我将快速浏览一遍。我的第一站是访问NCBI <a class="ae la" href="https://www.ncbi.nlm.nih.gov/assembly/?term=Capsicum" rel="noopener ugc nofollow" target="_blank">装配</a>页面，搜索辣椒。我很惊讶地发现了8个结果，我想我也许可以创造8种不同的辣椒，但在进一步挖掘后，我发现并非所有的数据集都有注释，同一物种有一些重叠。在对那些既有注释又有独特物种的进行过滤后，我得到了3个可行的数据集:</p><ul class=""><li id="41d7" class="ml mm iq ke b kf kg kj kk kn mn kr mo kv mp kz mq mr ms mt bi translated"><a class="ae la" href="https://www.ncbi.nlm.nih.gov/assembly/GCF_000710875.1" rel="noopener ugc nofollow" target="_blank">辣椒</a>来自Jo YD等人【1】与<a class="ae la" href="https://www.diark.org/diark/species_list/Capsicum_annuum_cultivar_Zunla-1" rel="noopener ugc nofollow" target="_blank">红辣椒</a></li><li id="1448" class="ml mm iq ke b kf mu kj mv kn mw kr mx kv my kz mq mr ms mt bi translated"><a class="ae la" href="https://www.ncbi.nlm.nih.gov/assembly/GCA_002271885.2" rel="noopener ugc nofollow" target="_blank">辣椒baccatum </a>来自金S等人【2】用<a class="ae la" href="https://www.diark.org/diark/species_list/Capsicum_baccatum" rel="noopener ugc nofollow" target="_blank">黄椒</a></li><li id="ea2e" class="ml mm iq ke b kf mu kj mv kn mw kr mx kv my kz mq mr ms mt bi translated"><a class="ae la" href="https://www.ncbi.nlm.nih.gov/assembly/GCA_002271895.2" rel="noopener ugc nofollow" target="_blank">黄灯笼辣椒</a>来自金S等人【2】与<a class="ae la" href="https://www.diark.org/diark/species_list/Capsicum_chinense" rel="noopener ugc nofollow" target="_blank">甜椒</a></li></ul><p id="94f5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我发现Dubey等人[3]的这篇论文T14列出了11个怀疑与辣椒果实成熟有关的基因组区域，并从补充材料中复制了引物核苷酸序列和长度。</p><p id="6f27" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">来自NCBI的gff文件是简单的tsv文本文件，列出了一个特征(如基因、mRNA、外显子等)以及开始和结束坐标以及任何其他元数据——参见下面的示例。我们的目标是将这些文件分成子集，只包含那些属于Dubey研究中成熟过程所涉及的区域的特征。</p><pre class="lj lk ll lm gt mz na nb nc aw nd bi"><span id="18e5" class="ln lo iq na b gy ne nf l ng nh">NC_029977.1  Gnomon  gene  590985  592488  .  -  .  ID=gene-LOC10...<br/>NC_029977.1  Gnomon  mRNA  619017  620755  .  +  .  ID=rna-XM_016...<br/>NC_029977.1  Gnomon  exon  619829  620755  .  +  .  ID=exon-XM_01...</span></pre><p id="ab7f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为了只从那些感兴趣的区域提取gff特征，我们需要相应的坐标，这是通过NCBI基本局部比对搜索工具(<a class="ae la" href="https://blast.ncbi.nlm.nih.gov/Blast.cgi" rel="noopener ugc nofollow" target="_blank"> BLAST </a>)实现的。使用这个工具，我们获得了Dubey研究中发现的每一个核苷酸序列(例如GGCATCGT…)，并在每种植物的整个基因组序列中查找它——类似于在一本非常大的书中查找特定的短语。</p><p id="d861" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">BLAST确实有一个web界面，但我想编写这个步骤的脚本，以便它可以在三个数据集上一致地重复，所以接下来我下载了他们的<a class="ae la" href="https://www.ncbi.nlm.nih.gov/books/NBK569861/" rel="noopener ugc nofollow" target="_blank">命令行</a>应用程序。我首先试图通过传递<code class="fe ni nj nk na b">-remote</code>标志来使用NCBI服务器进行处理。结果以令人怀疑的速度返回，我没有得到任何点击，但是我发现你还需要通过短序列的<code class="fe ni nj nk na b">-task blastn-short</code>,这似乎在任何地方都没有记录。</p><pre class="lj lk ll lm gt mz na nb nc aw nd bi"><span id="859d" class="ln lo iq na b gy ne nf l ng nh">blastn -db “GPIPE/4072/100/GCF_000710875.1_top_level” -query dubey.fsa -out results.out -task “blastn-short” -remote</span></pre><p id="45f6" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这现在产生了相反的效果——远程进程运行了很长时间，而我得到了<code class="fe ni nj nk na b">Error: [blastn] Failed to fetch sequences in batch mode</code>。此时，我决定对子弹进行字节化处理，并创建自己的BLAST数据库来本地运行这个过程。我从同一个NCBI页面下载了所有fna文件，并编写了一个类似如下的命令:</p><pre class="lj lk ll lm gt mz na nb nc aw nd bi"><span id="0b00" class="ln lo iq na b gy ne nf l ng nh">for g in "${genome_ids[@]}"; do<br/>  for ((i=1;i&lt;=12;i++)); do<br/>    makeblastdb -in datasets/ncbi_dataset/data/${g}/chr${i}.fna<br/>      -dbtype nucl -parse_seqids -out blast/dbs/${g}/chr${i}.blast<br/>  done<br/>done</span></pre><p id="e59f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这被证明是值得的:我重复了blastn命令，但没有使用<code class="fe ni nj nk na b">-remote</code>标志，不久后就有了一个坐标列表，报告了成熟过程中涉及的每个基因序列的完美匹配。最后一步是使用一堆bash命令(参见<a class="ae la" href="https://github.com/s1monj/nft-peppers" rel="noopener ugc nofollow" target="_blank">源</a>代码)来修剪和格式化数据，因此我为3个物种中的每一个留下了一个简单的3列tsv，如下所示——第一列是Dubey研究中用于识别该区域的基因位置ID(总共11个不同的loc ),第二和第三列是gff文件中该区域的基因组坐标和特征(有误差)。</p><pre class="lj lk ll lm gt mz na nb nc aw nd bi"><span id="edc6" class="ln lo iq na b gy ne nf l ng nh">LOC107843860 213978278 gene<br/>LOC107843860 213989346 mRNA<br/>LOC107843860 213991885 exon<br/>...</span></pre></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div class="gh gi li"><img src="../Images/be6940c130a6f60396e581a6e3e1194d.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*2xac-feWTzP02-Mmr6v3dw.png"/></div></figure><h2 id="d847" class="ln lo iq bd lp lq lr dn ls lt lu dp lv kn lw lx ly kr lz ma mb kv mc md me mf bi translated">用Cytoscape.js生成可视化</h2><p id="0cd6" class="pw-post-body-paragraph kc kd iq ke b kf mg kh ki kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ij bi translated">几年前，我摆弄过Cytoscape桌面应用程序，我一直觉得它生成的网络图形很有美感。显然，我在这里准备的数据绝不是网络，所以这不是一个典型的用例，但我接受了那个创造性的许可并选择了它，因为我喜欢它的外观。</p><p id="1e70" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">不足为奇的是，Cytoscape.js需要JSON格式的数据，而<em class="nl">是什么呢</em>有点令人惊讶的是，它不能像桌面版本那样读取表格(2D数组)并推断节点和边。相反，我们需要明确地将每个节点和边定义为一个数据对象，如下例所示。</p><pre class="lj lk ll lm gt mz na nb nc aw nd bi"><span id="d99f" class="ln lo iq na b gy ne nf l ng nh">const dataAnnuum = [{<br/>  "data": {<br/>    "id": "6679599"<br/>  }<br/>},{<br/>  "data": {<br/>    "id": "gene"<br/>  }<br/>},{<br/>  "data": {<br/>    "id": "6679599-gene",<br/>    "source": "6679599",<br/>    "target": "gene"<br/>  }<br/>},<br/>...</span></pre><p id="6b7c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">jq来拯救:</p><pre class="lj lk ll lm gt mz na nb nc aw nd bi"><span id="de97" class="ln lo iq na b gy ne nf l ng nh">for g in "${genome_ids[@]}"; do<br/>  for loc in "${loc_ids[@]}"; do<br/>    cat graph/$g-$loc.txt | jq --raw-input --slurp 'split("\n") | map(split(" ")) | .[0:-1] | map( { "data": { "id": .[1] } }, { "data": { "id": .[2] } }, { "data": { "id": (.[1] + "-" + .[2]), "source": .[1], "target": .[2] } } )' &gt;&gt; json/$g.js<br/>    cat graph/$g-$loc.txt | jq --raw-input --slurp 'split("\n") | map(split(" ")) | .[0:-1] | map( { "data": { "id": .[0] } }, { "data": { "id": .[1] } }, { "data": { "id": (.[0] + "-" + .[1]), "source": .[0], "target": .[1] } } )' &gt;&gt; json/$g.js<br/>  done<br/>done</span></pre><p id="df48" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">一旦你格式化了你的数据，对我来说唯一的另一个问题是，我需要将构造函数包装在一个<code class="fe ni nj nk na b">DOMContentLoaded</code>监听器中(见下文)，但是除此之外，他们的<a class="ae la" href="https://js.cytoscape.org/#getting-started/initialisation" rel="noopener ugc nofollow" target="_blank">入门</a>例子很好地工作了。</p><pre class="lj lk ll lm gt mz na nb nc aw nd bi"><span id="f3d0" class="ln lo iq na b gy ne nf l ng nh">document.addEventListener("DOMContentLoaded", function () {<br/>  cyto1 = cytoscape({<br/>    container: document.getElementById("target"),<br/>    elements: dataAnnuum,<br/>    style: [...],<br/>    layout: {<br/>      name: "circle",<br/>    },<br/>  });<br/>});</span></pre><p id="d474" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Cytoscape.js为动画提供了一个令人印象深刻的<a class="ae la" href="https://js.cytoscape.org/#core/animation" rel="noopener ugc nofollow" target="_blank"> API，可用于动态设置节点和边的样式(见下文),但也值得注意的是，它有一个完整的视口操作特性集，如缩放和平移，这对于需要单步执行和叙述图表的正确通信可视化来说非常方便。作为一个简单的动画示例，在下面的代码中，我找到了与一种基因特征(基因、外显子等)相关的所有边缘，并改变了颜色，将线条的宽度加倍。</a></p><pre class="lj lk ll lm gt mz na nb nc aw nd bi"><span id="d686" class="ln lo iq na b gy ne nf l ng nh">cyto1<br/>  .nodes("#" + geneFeature)[0]<br/>  .connectedEdges()<br/>  .animate({<br/>    style: {<br/>      lineColor: RIPE_COLOR[seqNum],<br/>      width: SKELETAL_WIDTH[seqNum] * 2<br/>    },<br/>  });</span></pre></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div class="gh gi li"><img src="../Images/729d183d67ea69c5d87312b7e72a2a1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*2k-iiHNhWRCMKOhzIQ0yVA.png"/></div></figure><h2 id="562c" class="ln lo iq bd lp lq lr dn ls lt lu dp lv kn lw lx ly kr lz ma mb kv mc md me mf bi translated">用Anime.js制作动画</h2><p id="0f02" class="pw-post-body-paragraph kc kd iq ke b kf mg kh ki kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ij bi translated">我想让图片更生动一些，但是Cytoscape.js的平移和缩放并不是我真正想要的效果。我过去曾和<a class="ae la" href="https://p5js.org/" rel="noopener ugc nofollow" target="_blank"> p5.js </a>一起玩，这似乎在生成艺术界很流行，但我想借此机会给<a class="ae la" href="https://animejs.com/" rel="noopener ugc nofollow" target="_blank"> anime.js </a>一个机会，好家伙，我很高兴我这么做了。只需几行代码，我就能拿起包含细胞图的<code class="fe ni nj nk na b">div</code>,并流畅地前后旋转它，轻松地开始和停止。</p><pre class="lj lk ll lm gt mz na nb nc aw nd bi"><span id="a498" class="ln lo iq na b gy ne nf l ng nh">anime({<br/>  targets: #graph1,<br/>  rotate: [45, -45],<br/>  duration: 10000,<br/>  easing: "easeInOutSine",<br/>  direction: "alternate",<br/>  loop: true,<br/>});</span></pre><p id="7645" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我还使用了倾斜效果，在页面第一次加载时将图形放大。当你需要开始对效果进行计时和排序时，事情会变得稍微复杂一些，anime.js为此提供了一个<a class="ae la" href="https://animejs.com/documentation/#timelineBasics" rel="noopener ugc nofollow" target="_blank">时间线</a>特性。当我将所有的动画移动到时间线上时，我发现还有一个简单的<code class="fe ni nj nk na b">complete:</code>选项，可以在每个动画完成时触发一个功能，这被证明是一个对这个简单的动画进行排序的更优雅的解决方案。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div class="gh gi li"><img src="../Images/67f383f07336553a40e9c8a13c27a624.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*ISuJ-oTpflRVFCJjAAa07A.png"/></div></figure><h2 id="b42c" class="ln lo iq bd lp lq lr dn ls lt lu dp lv kn lw lx ly kr lz ma mb kv mc md me mf bi translated">在IPFS部署</h2><p id="2eb2" class="pw-post-body-paragraph kc kd iq ke b kf mg kh ki kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ij bi translated">不可替代是一个经济术语<a class="ae la" href="https://www.investopedia.com/terms/f/fungibility.asp" rel="noopener ugc nofollow" target="_blank"/>,用来描述独一无二且不能与其他同类事物互换的事物。不可替代令牌背后的概念是，它们不仅是唯一的，而且其唯一性可以很容易地通过区块链上的公共记录来验证。当一个数字资产，比如一个静态的“photo.jpg”文件，作为一个<a class="ae la" href="https://ethereum.org/en/nft/" rel="noopener ugc nofollow" target="_blank"> NFT </a>被添加到以太坊区块链时，一个常见的误解是文件“photo.jpg”的实际字节码被写入一个区块。仅交易和链上数据，以太坊区块链今天就超过了1TB的大关，所以你可以想象，如果每个NFT的jpeg、gif和电影文件都被添加进去，它会迅速膨胀到Pb级的数据。鉴于区块链的主要动机是去中心化，如果链增长到这种规模，对于大多数节点来说，维护起来会非常大，留下一个更集中的大盒子网络。</p><p id="ad7c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">NFT没有将NFT数据文件存储在链上，而是有一个不可变的<code class="fe ni nj nk na b">tokenURI</code>记录指向一个文件。如果这个<code class="fe ni nj nk na b">tokenURI</code>使用位置寻址，例如传统的web服务器，例如<a class="ae la" href="http://myserver.com/photo.jpg" rel="noopener ugc nofollow" target="_blank">http://myserver.com/photo.jpg</a>，那么拥有不可撤销的<code class="fe ni nj nk na b">tokenURI</code>记录是没有意义的，如果地址目的地的文件可以被切换出去，这就是<a class="ae la" href="https://www.theverge.com/2021/3/25/22349242/nft-metadata-explained-art-crypto-urls-links-ipfs" rel="noopener ugc nofollow" target="_blank">一些不高兴的NFT所有者所发生的事情</a>。</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/37708427e976df8e3d8d81401c4351e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ooJSkncluOKuODvS5XxcKQ.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</p></figure><p id="94a1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这就是IPFS的用武之地。星际文件系统是一个点对点的分布式存储网络，与BitTorrent不同，它由遍布全球的计算机组成，存储和共享数据。IPFS还使用一种名为FileCoin的加密货币作为激励层，这样用户就可以因为在电脑上存储数据而获得奖励。这里的关键区别是，IPFS不像传统的网站那样使用位置寻址，而是使用内容寻址，这涉及到生成文件或目录的散列(“CID”)并使用它进行检索。</p><pre class="lj lk ll lm gt mz na nb nc aw nd bi"><span id="814b" class="ln lo iq na b gy ne nf l ng nh">Location addressing: <a class="ae la" href="http://myserver.com/photo.jpg" rel="noopener ugc nofollow" target="_blank">http://myserver.com/photo.jpg</a><br/>Content addressing:  ipfs://QmP7u9UzoUtfpiNkj3Sa...</span></pre><p id="6f25" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">要从web浏览器访问IPFS内容，您需要使用网关，如Cloudflare提供的<em class="nl"> ipfs.io </em>，例如:</p><p id="68ae" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae la" href="https://ipfs.io/ipfs/QmP7u9UzoUtfpiNkj3SaL5TLym2ngrUfvsiNhf21uFF3L1" rel="noopener ugc nofollow" target="_blank">https://ipfs . io/ipfs/qmp 7 u 9 uzoutpinkj 3 sal 5 tly m2 ngrufvsinhf 21 uff 3 l 1</a></p><p id="7a2b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">对NFT数据使用IPFS的好处在于，它不仅是分散的和始终在线的，而且如果文件中的一个字节发生变化，CID也会发生变化。这意味着NFT记录的不可变<code class="fe ni nj nk na b">tokenURI</code>总是保证返回完全相同的数据。</p><p id="919b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在开始将数据上传到IPFS之前，还有一个额外的考虑事项:用于显示NFT的元数据。与其将NFT的<code class="fe ni nj nk na b">tokenURI</code>设置为直接指向IPFS上的文件，不如将它指向IPFS上的一个元数据JSON文件，该文件包含NFT的信息，并依次指向源文件以及任何其他文件，如预览图像。因为这个元数据文件也存储在IPFS上，所以可以保证它也没有被修改。没有官方的以太坊规范，但是OpenSea描述的<a class="ae la" href="https://docs.opensea.io/docs/metadata-standards" rel="noopener ugc nofollow" target="_blank">格式</a>已经成为标准。</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/143b3785f51665bb53fce9615d45abb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*guJJXwu4dGmVQY1UiGr-vg.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</p></figure><p id="b2df" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">要将文件上传到IPFS，你可以下载<a class="ae la" href="https://docs.ipfs.io/install/ipfs-desktop/" rel="noopener ugc nofollow" target="_blank">桌面应用</a>，并使用它上传完整的源目录，包括index.html、基因组数据、javascript、支持库和预览图像。请注意，index.html中的文件路径不需要使用内容寻址(IPFS网关可以在目录级别解析位置寻址)，但由于这个原因，它们需要是相对的。</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/c9f90e721792ea2a70ed84246eecfa8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x91i8RkVgVQnzRe3qQ8skg.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</p></figure><p id="fa5b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在有了IPFS上的数据，然后复制目录和图像预览文件的CID，并完成metadata.json文件中的条目。最后，上传元数据文件并复制将用于NFT的CID。请注意，传递给<code class="fe ni nj nk na b">index.html</code>的<code class="fe ni nj nk na b">tokenId=1001</code>参数只是用作一个序列号，以便单个源代码目录可以根据元数据中引用的URL生成3个不同的变体(种类)。</p><pre class="lj lk ll lm gt mz na nb nc aw nd bi"><span id="46ee" class="ln lo iq na b gy ne nf l ng nh">{<br/>  "token_id": 1001,<br/>  "name": "Capcicum annuum",<br/>  "description": "This red pepper depiction is generated...",<br/>  "image": "ipfs://QmYpZF5D95THTiF4gVuUuze46eA4SHjwWEZBvFXSn7GE2k/annuum-preview.png",<br/>  "background_color": "fcf5e5",<br/>  "external_url": "<a class="ae la" href="https://nicetotouch.eth.link/peppers" rel="noopener ugc nofollow" target="_blank">https://nicetotouch.eth.link/peppers</a>",<br/>  "animation_url": "ipfs://QmYpZF5D95THTiF4gVuUuze46eA4SHjwWEZBvFXSn7GE2k/index.html?tokenId=1001",<br/>  "attributes": [<br/>    { "trait_type": "Species", "value": "Capsicum annuum" },<br/>    ...<br/>  ]<br/>}</span></pre><p id="ecaf" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">IPFS桌面应用程序实际上是向全世界提供你的文件，所以它们只有在你的电脑运行时才可用。为了确保文件始终在线并复制到其他对等点(而不仅仅是临时缓存)，我们需要“固定”它们。有一些不同的锁定服务，但我选择了<a class="ae la" href="https://www.pinata.cloud/" rel="noopener ugc nofollow" target="_blank"> Pinata </a>，它给你1GB的免费空间，而且非常简单易用。只需注册，点击上传/添加并粘贴您想要pin的cid。</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/89689bc7dcaab161b7f11d75f9948d52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XCk2TjVkFCGZxnSOK9D88A.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</p></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div class="gh gi li"><img src="../Images/eccf480492b3b87f655dd1d6bcf3c2b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*NJ7u9B7QRtThSEy1luQYjA.png"/></div></figure><h2 id="7727" class="ln lo iq bd lp lq lr dn ls lt lu dp lv kn lw lx ly kr lz ma mb kv mc md me mf bi translated">以太坊区块链上的造币</h2><p id="3bcd" class="pw-post-body-paragraph kc kd iq ke b kf mg kh ki kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ij bi translated">最后一步是通过在区块链上创建一个公共的、可验证的记录来主张你的数据的所有权。有很多像OpenSea这样的NFT聚合器提供造币服务，但不幸的是，它们只支持创建简单的单文件NFT，如图像和电影。BeyondNFT 是我发现的唯一一个允许你通过上传zip文件来创建动态NFT的网站，但在撰写本文时，还不支持创建你自己的智能合约，相反，你必须使用他们的通用总括合约。</p><p id="008e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为了概念化契约的角色，NFT的“令牌”部分可以被认为是一个对象类的实例，该对象类是<a class="ae la" href="https://eips.ethereum.org/EIPS/eip-721" rel="noopener ugc nofollow" target="_blank"> ERC721 </a>智能契约的实现。智能合约存在于区块链上，并具有一个mint函数，该函数使用一组不可变的变量(例如一个<code class="fe ni nj nk na b">tokenId</code>和<code class="fe ni nj nk na b">tokenURI</code>)创建一个唯一的令牌。由于这个原因，从同一个契约创建的所有令牌都被视为一个“集合”并被分组在一起，因此当创建一组NFT(如本例所示)时，您确实希望使用自己的契约，而不是加入一些您无法控制的现有大型通用集合。</p><p id="64c4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">创建你自己的智能合同，然后铸造一个NFT需要几个步骤，幸运的是，阿米尔·索雷玛尼在<a class="ae la" href="https://medium.com/@mondoir/your-very-own-smart-contract-for-nfts-b068b7d65e5d" rel="noopener">这本精彩的指南</a>中完美地概述了这些步骤。我以前没有使用Solidity或部署智能合同的经验，但在这篇文章之后，我在大约半小时内完成了3个NFT。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div class="gh gi li"><img src="../Images/9ab1d50cc9c7d9239661cb7e725de9e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*4QLoe8b4MkT0GIFvuCSFQw.png"/></div></figure><h2 id="c311" class="ln lo iq bd lp lq lr dn ls lt lu dp lv kn lw lx ly kr lz ma mb kv mc md me mf bi translated">科学数据的用例</h2><p id="4179" class="pw-post-body-paragraph kc kd iq ke b kf mg kh ki kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ij bi translated">当我在生物信息学领域工作时，我似乎花了大量的时间来检查、再三检查我认为我正在存储、移动或处理的文件是否确实是正确的文件。带有相应文件名、服务器位置和目录路径的样本名称的电子表格，以及“新的”、“最新的”或“已修复的”这些词困扰着我。</p><p id="e487" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你混淆了Word文档、电子表格或JavaScript源文件的命名，你可以很快确定你打开的文件是错误的，但科学数据通常不是这样。样本数据可能是如此密集和同质，以至于除了结果之外，没有简单可靠的方法来区分文件内容，这就是<em class="nl">分析，这意味着文件名混淆可能是灾难性的。</em></p><p id="3203" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这就是内容寻址数据非常有意义的地方。是的，当你有校验和的时候，它们是很棒的，但是要想有用，它们真的需要从数据的来源产生，并携带到数据去的任何地方。<em class="nl">然而，通过校验和寻址</em>给了我们一石二鸟的机会:我们可以保证我们下载的是正确的、原始的、未修改的文件，我们还可以在我们这边对它进行校验和，以确保我们已经完全传输了它。</p><p id="5261" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">IPFS的分散性质也非常适合科学数据。学术界很少拥有与企业同等的资源来提供高度可用、高度冗余的数据，具有讽刺意味的是，大多数学术数据都是公开的，是为了公众利益。如果NCBI网站今天离线，虽然他们可能会将数据镜像到其他服务器上并备份到磁带上，但如果我无法访问他们的网站，我就无法访问我需要的数据。有了内容地址，我可以直接从IPFS下载数据，独立于任何URL，也不管NCBI节点或网关是否关闭。除此之外，点对点组件的操作就像一个内容交付服务，所以当我在处理一个巨大的基因组参考文件时，如果我隔壁的同事想下载相同的数据，他们会自动从我这里直接获得，而不是跨越全球。</p><p id="9f1e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">IPFS不太适合科学数据的地方是起源和血统方面，这是区块链和非功能性测试的方向。在最基本的层面上，在高度可访问、完全冗余、安全、分散的服务上拥有不可变的记录来描述一个数据集或多个数据集，为数据科学带来了巨大的价值。当负责拥有数据的实体改变时，可以处理NFT，并且永久记录历史，并且如果需要更新记录，可以发布具有更新的元数据的新令牌，该元数据包括对旧令牌和旧数据的引用。</p><p id="6acf" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在一个更高的层次上，是对一个记录引用和知识产权的新系统的可能应用。我不是一个学者，但在今天的信息时代，期刊出版和引用系统似乎过时和笨重。几年前，理查德·福达·伯利发表了一篇论文，提议建立一个受比特币启发的分散式共享引用分类账。他指出，集中式分类账(如Scopus和Web of Science)是一项大业务，通常“……关于什么被索引和不被索引的重要决定在许多方面都基于经济考虑”，这对于传播科学知识来说是一个问题。想象一下，如果一篇研究论文，连同所有附带的补充材料、数据集和软件被存放在区块链和IPFS，归作者所有，任何人都可以阅读和复制。索引呢？像<a class="ae la" href="https://thegraph.com" rel="noopener ugc nofollow" target="_blank"> The Graph </a>这样的项目已经发明了Dapps(去中心化应用程序)来索引区块链数据，许多人认为我们像今天使用谷歌一样搜索和浏览Web3(去中心化Web)只是时间问题。</p><p id="0579" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">最后，区块链是记录知识产权的明显匹配，正如去年世界知识产权组织<a class="ae la" href="https://www.wipo.int/wipo_magazine_digital/en/2020/article_0002.html" rel="noopener ugc nofollow" target="_blank">指出的</a>。虽然他们的讨论集中在设计和商标上，但我也设想了一个与这个例子相关的专利申请。再一次，从我对化学实用专利的有限理解来看，专利的很大一部分是描述这项工作，以及它是如何制作的，以及如何重复或复制(“实现”)。想象一下，如果数据在一个去中心化的区块链上被很好地打包并打上时间戳，这个包用于发布和引用，没有利益冲突或国际政治干预，那么专利当局可以简单地指向这个记录让世界看到。</p><p id="16c0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我希望这为如何将动态可视化作为NFTs添加到以太坊区块链提供了一些见解，也让你思考Web3在数据科学中可能的未来用例。你可以在这里查看最终结果<a class="ae la" href="https://opensea.io/assets/0x86944176301532d4432b50838cea252e3b2990bb/1001" rel="noopener ugc nofollow" target="_blank">，在这里</a>查看GitHub <a class="ae la" href="https://github.com/s1monj/nft-peppers" rel="noopener ugc nofollow" target="_blank">上的源码。</a></p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="5f16" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">剪贴画</strong></p><p id="9ce9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">以上所有剪贴画均来自un draw(<a class="ae la" href="https://undraw.co" rel="noopener ugc nofollow" target="_blank">https://undraw.co</a>)并在<a class="ae la" href="https://undraw.co/license" rel="noopener ugc nofollow" target="_blank"> unDraw开源许可</a>下使用。</p><p id="6d3c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">参考文献</strong></p><p id="d082" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">[1] Jo，Y. D .，Park，j .，Kim，j .，Song，w .，Hur，C. G .，Lee，Y. H .，&amp; Kang，B. C .，辣椒质体基因组的完整测序和比较分析揭示了辣椒质体基因组上串联重复和大插入/缺失的高频率(2011)，<em class="nl">植物细胞报告</em>，<em class="nl"> 30 </em> (2)，217–229。<a class="ae la" href="https://doi.org/10.1007/s00299-010-0929-2" rel="noopener ugc nofollow" target="_blank">https://doi.org/10.1007/s00299-010-0929-2</a></p><p id="2dd2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">[2] Kim S，Park J，Yeom SI等，辣椒新的参考基因组序列揭示了植物抗病基因的大量进化(2017)，<em class="nl"> Genome Biol </em>。2017;18(1):210.发布于2017年11月1日。<a class="ae la" href="https://doi.org/10.1186/s13059–017–1341–9" rel="noopener ugc nofollow" target="_blank">https://doi.org/10.1186/s13059–017–1341–9</a></p><p id="49bd" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">[3] Meenakshi Dubey，Vandana Jaiswal，Abdul Rawoof，Ajay Kumar，Mukesh Nitin，Sushil Satish Chhapekar，Nitin Kumar，易勒雅斯·艾哈迈德，Khushbu Islam，Vijaya Brahma，Nirala Ramchiary，辣椒果实发育/成熟相关基因的鉴定和功能标记的开发(2019年)，<em class="nl">基因组学</em>，第111卷，第6期，2019年，<a class="ae la" href="https://doi.org/10.1016/j.ygeno.2019.01.002." rel="noopener ugc nofollow" target="_blank">https://doi.org/10.1016/j.ygeno.2019.01.002.</a></p><p id="5470" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">[4]伯利·理查德·福特，稳定而分散？共享引用账本的承诺与挑战(2018)，<em class="nl">信息服务&amp;使用</em>，第38卷，第3期，第141–148页，2018，<a class="ae la" href="https://doi.org/10.3233/ISU-180017" rel="noopener ugc nofollow" target="_blank">https://doi.org/10.3233/ISU-180017</a></p></div></div>    
</body>
</html>