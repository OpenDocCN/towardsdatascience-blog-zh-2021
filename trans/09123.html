<html>
<head>
<title>6 Pandas Tricks That You Might Not Know, But Should</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">6个你可能不知道但应该知道的熊猫把戏</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/6-pandas-tricks-that-you-might-not-know-but-should-6f766dfdb2c2?source=collection_archive---------21-----------------------#2021-08-23">https://towardsdatascience.com/6-pandas-tricks-that-you-might-not-know-but-should-6f766dfdb2c2?source=collection_archive---------21-----------------------#2021-08-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="66df" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">对您的日常任务有帮助</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/89ac597532bf28eb603de4d19d892656.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nLI9YUORiLbHELG4rAwLrw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.pexels.com/@vlada-karpovich?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> <strong class="bd kz">弗拉达·卡尔波维奇</strong> </a>拍摄自<a class="ae ky" href="https://www.pexels.com/photo/positive-woman-using-earphones-and-laptop-at-home-during-free-time-4050333/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> <strong class="bd kz">佩克斯</strong> </a></p></figure><p id="f5d7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果你愿意学习数据科学，Pandas是你需要学习的最重要的库之一。</p><p id="1cb9" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">Pandas是数据组织清理和操作的行业标准库，全球几乎所有的数据科学家都在使用它。虽然使用起来非常强大，但还是有一些技巧可以让你的工作流程更有效率。</p><p id="bd5b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在本文中，我们将讨论6个这样的技巧，无论你是初学者还是有经验的程序员，它们都会对你有益。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="13b6" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">1.<strong class="ak">调整数据帧的行和列</strong></h1><p id="d583" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">很多时候，当我们检查一些未处理的数据集时，我们会遇到一些问题，如行数或列数过多，单元大小不规则，以及具有大量数字的浮点数等。</p><p id="fb06" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们可以很容易地解决这些问题，通过指定我们可以看到的最大行数/列数的某个值，浮点数的精度等…</p><p id="187a" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">导入Pandas库后，您可以编写下面几行代码来进行设置。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="7219" class="nf me it nb b gy ng nh l ni nj"><strong class="nb iu">pd.options.display.max_columns = 50</strong>  <br/># to see max 50 columns</span><span id="4de0" class="nf me it nb b gy nk nh l ni nj"><strong class="nb iu">pd.options.display.max_rows = 200</strong>    <br/># max 200 rows at a time</span><span id="9601" class="nf me it nb b gy nk nh l ni nj"><strong class="nb iu">pd.options.display.max_colwidth = 100 <br/></strong>#max column width is set to 100</span><span id="9723" class="nf me it nb b gy nk nh l ni nj"><strong class="nb iu">pd.options.display.precision = 3</strong>     <br/>#floating point precision upto 3 decimal</span></pre><h1 id="3021" class="md me it bd mf mg nl mi mj mk nm mm mn jz nn ka mp kc no kd mr kf np kg mt mu bi translated">2.<strong class="ak">选择特定的列/行</strong></h1><p id="0e7c" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">假设您想要从包含许多行和列的大型数据集中获得一些特定的行和列。在熊猫身上使用<code class="fe nq nr ns nb b">df.iloc</code>和<code class="fe nq nr ns nb b">df.loc</code>可以很容易做到这一点。<code class="fe nq nr ns nb b">df.iloc</code>根据您的需要帮助您选择特定范围的行和列，<code class="fe nq nr ns nb b">df.loc</code>可以根据特定条件执行布尔选择。</p><p id="a590" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">看看下面几行代码。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="c0cf" class="nf me it nb b gy ng nh l ni nj"><strong class="nb iu">&gt;&gt; df.iloc[4:7,2:5]</strong>                                <br/># select the 4th to 6th row &amp; 2nd to the 4th column</span><span id="97e8" class="nf me it nb b gy nk nh l ni nj"><strong class="nb iu">&gt;&gt; df.loc[:,'column_x':] </strong>                          <br/># select all columns starting from 'column_x'</span><span id="e76e" class="nf me it nb b gy nk nh l ni nj"><strong class="nb iu">&gt;&gt; df.loc[df[‘value’] &lt; 100, [‘name’, ‘location’]]</strong> <br/>#selects the columns 'name' &amp; 'location' having value &lt; 100</span></pre><h1 id="ba26" class="md me it bd mf mg nl mi mj mk nm mm mn jz nn ka mp kc no kd mr kf np kg mt mu bi translated">3.<strong class="ak">数据集中所有行和列的总和</strong></h1><p id="99e3" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">假设您想要获得特定数据集中所有列的所有行的总和。在lambda函数的帮助下，你可以很容易地在Pandas中使用<code class="fe nq nr ns nb b">df.apply()</code>方法。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="9cfc" class="nf me it nb b gy ng nh l ni nj"><strong class="nb iu">df = pd.DataFrame(dict(A=[1,2,3], B=[4,5,6], C=[7,8,9]))</strong></span><span id="a3d3" class="nf me it nb b gy nk nh l ni nj"><strong class="nb iu">df['column total'] = df.apply(lambda x: x.sum(), axis=1)</strong></span><span id="bcb7" class="nf me it nb b gy nk nh l ni nj"><strong class="nb iu">df.loc['row total'] = df.apply(lambda x: x.sum())</strong></span><span id="0e0d" class="nf me it nb b gy nk nh l ni nj"><strong class="nb iu">df.head()</strong></span></pre><p id="2579" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">输出将是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/b806780a671ab674e537e8b80fa30b6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:534/format:webp/1*4R0G-xxa6ygmJkkNuoG6mw.png"/></div></figure><h1 id="f387" class="md me it bd mf mg nl mi mj mk nm mm mn jz nn ka mp kc no kd mr kf np kg mt mu bi translated">4.<strong class="ak">用条件</strong>屏蔽数据帧</h1><p id="3cc1" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">假设您想要屏蔽不满足特定要求的数据集的行和列。你可以在熊猫身上很容易地做到这一点，只要设定一个条件:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="63e7" class="nf me it nb b gy ng nh l ni nj">con = df['A'] &lt; 2 #elements of A having value less than 2</span></pre><p id="e81d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">然后使用以下方法将该条件应用于数据集:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="f86e" class="nf me it nb b gy ng nh l ni nj">df = pd.DataFrame(dict(A=[1,2,3], B=[4,5,6], C=[7,8,9]))</span><span id="49fb" class="nf me it nb b gy nk nh l ni nj">con = df['A'] &lt; 2 #elements of A having value less than 2</span><span id="fe50" class="nf me it nb b gy nk nh l ni nj">df2 = df[con]</span><span id="4e4f" class="nf me it nb b gy nk nh l ni nj">df2.head()</span></pre><blockquote class="nu nv nw"><p id="126d" class="la lb nx lc b ld le ju lf lg lh jx li ny lk ll lm nz lo lp lq oa ls lt lu lv im bi translated"><strong class="lc iu">输出</strong></p></blockquote><div class="kj kk kl km gt ab cb"><figure class="ob kn oc od oe of og paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/5af2bf648abf90942ac419226c5865d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*H_zlYMKmJlYBTItB6ThdOg.png"/></div></figure><figure class="ob kn oh od oe of og paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/406ed8ab9e4e9b646ec158962ae12873.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*X-uf9mzYtWftqtosd4vOgw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk oi di oj ok translated">屏蔽前与屏蔽后</p></figure></div><h1 id="9771" class="md me it bd mf mg nl mi mj mk nm mm mn jz nn ka mp kc no kd mr kf np kg mt mu bi translated">5.<strong class="ak">“分解”一个数据帧</strong></h1><p id="2b1e" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">如果您的Pandas数据帧包含某个列，该列包含一个列表或字典作为值，如下所示:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="ebcd" class="nf me it nb b gy ng nh l ni nj">df = pd.DataFrame(dict(A=[1,2,3], B=[4,5,6], C=[[7,8],9,10]))</span><span id="e2d1" class="nf me it nb b gy nk nh l ni nj">df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/d6b2931a96c59a5dba7d0a5fc929d8ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*AR3yLLoKQNY7Car8LlfC4w.png"/></div></figure><p id="53e6" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">为了展平列表，我们可以使用<code class="fe nq nr ns nb b">df.explode()</code>方法，该方法将列名作为参数，并将数据集更改为:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="c675" class="nf me it nb b gy ng nh l ni nj">df.explode('C')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi om"><img src="../Images/5e749511ace114aa790632371b3bfb86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*7ABhQJmpoJp0Vphp2W-sIA.png"/></div></figure><h1 id="f10e" class="md me it bd mf mg nl mi mj mk nm mm mn jz nn ka mp kc no kd mr kf np kg mt mu bi translated">6.<strong class="ak">将一列的所有值设置为特定的数据类型</strong></h1><p id="0cfa" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">在处理未处理的数据时，您可能会遇到这样的情况:一个列中包含多种数据类型。</p><p id="6346" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">使用<code class="fe nq nr ns nb b">df.infer_objects()</code>,我们可以很容易地将所有元素的数据类型更改为单一类型。<code class="fe nq nr ns nb b">infer_objects</code>函数将一个特定列的所有数据类型设置为一个特定的数据类型，并进行合理的猜测:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="97f6" class="nf me it nb b gy ng nh l ni nj"><strong class="nb iu">df = pd.DataFrame({"A": ["a", 1, 2, 3]})</strong></span><span id="77ab" class="nf me it nb b gy nk nh l ni nj"><strong class="nb iu">df = df.iloc[1:]</strong></span><span id="4e2c" class="nf me it nb b gy nk nh l ni nj"><strong class="nb iu">print(df.head())</strong></span><span id="c08f" class="nf me it nb b gy nk nh l ni nj"><strong class="nb iu">df.dtypes</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/3b3ca4b811c91b31ee353c81296b9f4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*-Ivk9kVZ1Z5tBKHfwe5k7g.png"/></div></figure><p id="ee99" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在这里，通常列的大多数元素的数据类型是int，但是由于字符“a”的存在，输出将它显示为object数据类型。</p><p id="e392" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">应用df.infer_objects()后，我们得到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/9cac69c77ad9c1d5749c969730c1fa9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:246/format:webp/1*n8pA13HMVVTU1hFoiRgl5Q.png"/></div></figure><p id="138b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">当前数据帧的数据类型为<strong class="lc iu"> <em class="nx"> int </em> </strong>。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="169d" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated"><strong class="ak">结论</strong></h1><p id="dcbf" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">这些是熊猫的一些小技巧，可以在处理大型和未处理的数据集时节省您大量的时间。</p><p id="8b53" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">还有更多这样的功能和方法，可以节省你很多时间，当工作与熊猫。如果您使用该库并查看文档，您将会了解它们。</p><p id="84d6" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在我即将发表的文章中，请继续关注更多基于Python的技巧和诀窍。</p></div></div>    
</body>
</html>