<html>
<head>
<title>Data Visualization Hack —Lessons from FiveThirtyEight Graphs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据可视化黑客——来自538个图表的教训</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-visualization-hack-lessons-from-fivethirtyeight-graphs-e121080725a6?source=collection_archive---------11-----------------------#2021-03-21">https://towardsdatascience.com/data-visualization-hack-lessons-from-fivethirtyeight-graphs-e121080725a6?source=collection_archive---------11-----------------------#2021-03-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="a535" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">PYTHON。数据可视化。图表</h2><div class=""/><div class=""><h2 id="6b91" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">仅使用Matplotlib包创建专业外观的图形</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/cac552d4045d0d3f6caf60e88ea9beaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bK3e9vY3s_-zpf2X"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://unsplash.com/@claybanks?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">粘土银行</a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><h1 id="ab67" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">介绍</h1><p id="c0a0" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated"><a class="ae lh" href="https://fivethirtyeight.com/" rel="noopener ugc nofollow" target="_blank"> FiveThirtyEight </a>(有时写为538)，是一个分析政治、经济和体育等民意调查主题数据的网站。它的名字来自美国选举团的选举人数。</p><p id="230a" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">但是有助于它们受欢迎的一个因素是它们在转播民意测验结果时的可视化效果。</p><p id="78b5" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我们可以学习一两件事来改善我们的视觉化，让它看起来更专业，更迷人。</p><p id="670e" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">在本文的其余部分，我们将把FiveThirtyEight创建的图称为FTE图。</p><p id="2cdf" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">在本文中，我们将转换这个看起来简单的图表:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nb"><img src="../Images/aac412653d8058f22938015e5752deac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*Mmv7oJ7SYOB04-4e6OiJiA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供:由一行代码生成的原始Matplotlib图</p></figure><p id="c3b3" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">变成了一张看起来像FTE的图表:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nc"><img src="../Images/73c7f75e62036131af4d1489faf288b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CXbtSsgEJ6hdT4KIhHyO_A.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片:最终/目标图</p></figure><p id="9e8e" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">所以，事不宜迟，让我们进入我们的图形改造。</p><h1 id="1ef8" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated"><strong class="ak">数据集—电影预算</strong></h1><p id="c229" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">我是一个超级电影迷，所以毫不奇怪，我发现关于电影预算的数据集很有趣。</p><p id="ac3c" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">例如，假设我们想要检查不同类型电影的预算是如何随时间变化的。为此，让我们使用从Kaggle 获得的<a class="ae lh" href="https://www.kaggle.com/rounakbanik/the-movies-dataset" rel="noopener ugc nofollow" target="_blank">数据集。</a></p><p id="8873" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">检查这些年的预算可能会揭示制作一部特定类型电影的偏好和复杂性的变化。</p><h1 id="3f1f" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">一步一步的图形改造</h1><h2 id="51f9" class="nd lj it bd lk ne nf dn lo ng nh dp ls mj ni nj lu mn nk nl lw mr nm nn ly iz bi translated">预赛</h2><p id="333e" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">首先，让我们导入必要的包来完成这个任务。</p><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="a8be" class="nd lj it np b gy nt nu l nv nw">import pandas as pd</span><span id="ef73" class="nd lj it np b gy nx nu l nv nw">import matplotlib.pyplot as plt<br/>import matplotlib.style as style</span><span id="31fd" class="nd lj it np b gy nx nu l nv nw">%matplotlib inline</span></pre><h2 id="a73a" class="nd lj it bd lk ne nf dn lo ng nh dp ls mj ni nj lu mn nk nl lw mr nm nn ly iz bi translated">导入数据集</h2><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="b3e1" class="nd lj it np b gy nt nu l nv nw">df = pd.read_csv('data\movies.csv', encoding='latin-1')<br/>df.head()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ny"><img src="../Images/9811f4e65ac6f829a1db70b57cac50ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3SZu2ONan6e4mVmsqAFGPQ.png"/></div></div></figure><h2 id="889b" class="nd lj it bd lk ne nf dn lo ng nh dp ls mj ni nj lu mn nk nl lw mr nm nn ly iz bi translated">数据预处理</h2><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="079d" class="nd lj it np b gy nt nu l nv nw"># Data preprocessing<br/>trial = df.groupby(['year', 'genre'])['budget'].sum().reset_index()<br/>trial.head()</span><span id="4a68" class="nd lj it np b gy nx nu l nv nw">trial = trial.pivot(index="year", columns="genre").dropna(axis = 1, how="any").reset_index()<br/></span></pre><h2 id="139e" class="nd lj it bd lk ne nf dn lo ng nh dp ls mj ni nj lu mn nk nl lw mr nm nn ly iz bi translated">默认图表</h2><p id="d69e" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">由<em class="nz"> matplotlib </em>生成的默认图形可以使用以下代码轻松生成:</p><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="ca02" class="nd lj it np b gy nt nu l nv nw">initial_graph = trial.plot(x ='year', y = 'budget')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nb"><img src="../Images/aac412653d8058f22938015e5752deac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*Mmv7oJ7SYOB04-4e6OiJiA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="6cf1" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">以此为基础图，让我们一个接一个地改进元素，产生上面的FTE图。</p><p id="04ac" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">注意:当我们进行增量调整时，理想情况下，整个代码都在一个单元格中，因此调整可以应用于绘图对象。</strong></p><h2 id="d69d" class="nd lj it bd lk ne nf dn lo ng nh dp ls mj ni nj lu mn nk nl lw mr nm nn ly iz bi translated">第一步——改变风格</h2><p id="9b01" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">Matplotlib带有内置样式，这些样式为它生成的图形布局提供了一些默认设置。</p><p id="a345" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">要查看可用的样式:</p><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="24c6" class="nd lj it np b gy nt nu l nv nw">style.available</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/77cf80501fc5391213b8714020f9a7f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:428/format:webp/1*To3VJfv2QzDcxkj9VTrNoA.png"/></div></figure><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="b0bd" class="nd lj it np b gy nt nu l nv nw">#To start, using the set style allows us to easily elevate the level of our visualization<br/>style.use('fivethirtyeight')</span></pre><p id="6467" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">在使用'<em class="nz"> fivethirtyeight </em>'样式后(顺便说一下，您只需要调用一次)，我们可以使用我们的原始代码在同一个图上调用，添加<em class="nz"> figsize </em>参数:</p><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="9a5f" class="nd lj it np b gy nt nu l nv nw">fte_graph = trial.plot(x ='year', <br/>           y = 'budget', <br/>           figsize=(12,8))</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ob"><img src="../Images/b346cb1ea6b74beec6df029481d4f521.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iPgEP60PAdb_TPD3LuXW6w.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="d9dd" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">使用内置样式可以立即对<em class="nz"> matplotlib </em>的基础图进行改进。其中一些如下:</p><ul class=""><li id="b000" class="oc od it mc b md mw mg mx mj oe mn of mr og mv oh oi oj ok bi translated">背景颜色</li><li id="3fe0" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">网格线</li><li id="2d38" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">字体</li><li id="2ce3" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">线条粗细</li><li id="a760" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">移除顶部和右侧的刺</li></ul><p id="ead7" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我们可以通过一个<a class="ae lh" href="https://fivethirtyeight.com/features/our-47-weirdest-charts-from-2015/" rel="noopener ugc nofollow" target="_blank">的例子</a>来考察一个理想的FTE图:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oq"><img src="../Images/bb737cd714602f30b2778ab86f530632.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bp7ixQmyJLJXH4UtJia-Rw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://fivethirtyeight.com/features/our-47-weirdest-charts-from-2015/" rel="noopener ugc nofollow" target="_blank">摄五三八</a>——典型的FTE曲线图</p></figure><p id="120e" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">为了让我们更接近FTE图的风格，我们仍然需要以下组件:</p><ul class=""><li id="41bd" class="oc od it mc b md mw mg mx mj oe mn of mr og mv oh oi oj ok bi translated">标题</li><li id="9ccb" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">小标题</li><li id="4b86" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">签名栏</li><li id="36f4" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">用内嵌标签替换图例</li></ul><p id="cc30" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">对图表的其他微小调整可能包括以下内容:</p><ul class=""><li id="ba40" class="oc od it mc b md mw mg mx mj oe mn of mr og mv oh oi oj ok bi translated">刻度标签的字体大小</li><li id="2e32" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">Y轴的主要刻度标签</li><li id="5360" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">移除X轴标签</li><li id="6de9" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">在y=0处放置一条粗线</li><li id="8505" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">选择合适的配色方案</li></ul><h2 id="bd13" class="nd lj it bd lk ne nf dn lo ng nh dp ls mj ni nj lu mn nk nl lw mr nm nn ly iz bi translated">步骤2-将图表存储在变量中</h2><p id="1d4e" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">将图形存储在变量中使我们更容易访问它们的属性，并对对象应用一些函数。</p><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="61c9" class="nd lj it np b gy nt nu l nv nw">fte_graph = trial.plot(x ='year', <br/>           y = 'budget', <br/>           figsize=(12,8))</span></pre><h2 id="bff5" class="nd lj it bd lk ne nf dn lo ng nh dp ls mj ni nj lu mn nk nl lw mr nm nn ly iz bi translated">注意:先进行小的调整</h2><p id="4b21" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">在标题、副标题、签名栏和图例之前先做一些小的调整是很重要的。正如后面将要详细介绍的，这些元素需要一些手动调整，最好是小调整到位，以尽量减少我们的工作。</p><h2 id="0cdd" class="nd lj it bd lk ne nf dn lo ng nh dp ls mj ni nj lu mn nk nl lw mr nm nn ly iz bi translated">步骤3-X刻度和Y刻度格式</h2><p id="c036" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">在我们开始手动调整之前，回顾一下关于<em class="nz"> matplotlib </em>的术语可能会有所帮助，因为我们将使用它们来调用调整。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi or"><img src="../Images/860e96ed969ff0f9c497c0d613ebf2a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ChFUMdPDnTAkrO6elMzecw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片摄于<a class="ae lh" href="https://matplotlib.org/stable/gallery/showcase/anatomy.html?highlight=anatomy" rel="noopener ugc nofollow" target="_blank">matplotlib.org</a></p></figure><p id="9682" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">通过以下代码修改主要刻度大小和标签大小:</p><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="5669" class="nd lj it np b gy nt nu l nv nw">#Accessing the tick parameters and modifying the size<br/>fte_graph.tick_params(axis = 'both', which = 'major', labelsize = 18)</span><span id="586f" class="nd lj it np b gy nx nu l nv nw"># Customizing the tick labels of the y-axis<br/>fte_graph.set_yticklabels(labels = [-1000000000, 0,  '$1 Billion  ', '$2 Billion  ', '$3 Billion  ', '$4 Billion  ']);</span></pre><p id="8ba4" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我们希望我们的标签与刻度线之间有一些空间，因此，在我们的标签中，我们放置一些空白。在我上面的代码中，我使用了两个空格键来获得我想要的空间。</p><h2 id="ff68" class="nd lj it bd lk ne nf dn lo ng nh dp ls mj ni nj lu mn nk nl lw mr nm nn ly iz bi translated">步骤4 —在Y=0处加粗线条</h2><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="407a" class="nd lj it np b gy nt nu l nv nw"># Generate a bolded horizontal line at y = 0<br/>fte_graph.axhline(y = 0, color = 'black', linewidth = 2, alpha = .7)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ob"><img src="../Images/8f18c7be6fbd0068e671fdfe4ce516f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yZfJXeCnCDLj9teL954QAA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><h2 id="a47e" class="nd lj it bd lk ne nf dn lo ng nh dp ls mj ni nj lu mn nk nl lw mr nm nn ly iz bi translated">步骤5-添加额外的垂直线</h2><p id="656b" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">通过调整x轴的范围添加一条额外的垂直线，因为x轴的主要刻度是5，将<em class="nz"> xlimits </em>设置为1984和2016，在我们的图表中提供了一些急需的空间，特别是这样我们的刻度标签看起来不会太压缩。</p><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="fd7d" class="nd lj it np b gy nt nu l nv nw">fte_graph.set_xlim(left = 1984, right = 2016)</span></pre><h2 id="b16d" class="nd lj it bd lk ne nf dn lo ng nh dp ls mj ni nj lu mn nk nl lw mr nm nn ly iz bi translated">步骤6-移除X轴标签</h2><p id="54fa" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">这一步可以通过将x.axis.label对象的<em class="nz"> set_visible </em>方法设置为false来完成。</p><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="136e" class="nd lj it np b gy nt nu l nv nw">#Remove the label of the x-axis<br/>fte_graph.xaxis.label.set_visible(False)</span></pre><h2 id="9097" class="nd lj it bd lk ne nf dn lo ng nh dp ls mj ni nj lu mn nk nl lw mr nm nn ly iz bi translated">第7步—签名栏</h2><p id="e919" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">签名栏具有以下特征:</p><ul class=""><li id="7210" class="oc od it mc b md mw mg mx mj oe mn of mr og mv oh oi oj ok bi translated">位于底部栏</li><li id="0861" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">签名栏的背景是深灰色的</li><li id="69bc" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">作者的名字写在栏里</li><li id="6a08" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">数据来源如下</li><li id="c0b4" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">文本颜色与'<em class="nz">五个三十八个</em>'样式的颜色一致</li></ul><p id="3ee0" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">添加签名栏需要我们做一些努力。然而，一旦我们完成了，它会把我们的视觉效果和其他的区别开来，当然会让它看起来更专业。</p><p id="b1ea" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">图表的text方法的background参数将突出显示整个文本。这就是我们制作签名“酒吧”所需要的。但是，这种背景只会突出文字的长度。因此，为了产生我们想要的对齐，这必须意味着我们将在文本中使用空白。</p><p id="3c7c" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">因此，要总结签名栏的重要步骤，我们需要以下内容:</p><ul class=""><li id="14fe" class="oc od it mc b md mw mg mx mj oe mn of mr og mv oh oi oj ok bi translated">通过反复试验，使用带有空格的text方法将签名与我们之前创建的tick标签对齐；</li><li id="ba17" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">签名栏的位置(理想情况下低于最低y值)也是通过反复试验完成的。</li><li id="95e5" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">需要注意的是<strong class="mc jd">标题、刻度标签和签名栏的垂直对齐是FTE图表的关键</strong>。因此，选择x值来将签名栏与刻度标签对齐。</li></ul><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="212a" class="nd lj it np b gy nt nu l nv nw"># The signature bar<br/>fte_graph.text(x = 1979.8, y = -1000000000,<br/>    s = ' ©Francis Adrian Viernes                                                          Source: Data Collected by TMDB and GroupLens Accessed via Kaggle ',<br/>               fontsize = 14, color = '#f0f0f0', backgroundcolor = 'grey');</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi os"><img src="../Images/e42744a69e3f42d4730cfb8f53a1c830.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U5Z0YpWaSacZIfoGlOK37w.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><h2 id="86cf" class="nd lj it bd lk ne nf dn lo ng nh dp ls mj ni nj lu mn nk nl lw mr nm nn ly iz bi translated">第8步—标题和副标题</h2><p id="7cb2" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">正如我们对签名栏的放置所做的一样，标题和副标题组件是“文本”元素。位置必须通过图表的x和y坐标的反复试验来完成。标题和副标题位于图表的顶部，因此理想情况下，这些文本的y坐标超过数据集中最高y值的y坐标。</p><p id="b835" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">因为我们关心我们的标题和副标题与我们的签名栏的垂直对齐，我们使用一个靠近我们的签名栏的x值(<em class="nz">，但不是精确的值来说明文本对象的边距/填充</em>)。</p><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="85a2" class="nd lj it np b gy nt nu l nv nw">#Code to find the maximum y-value<br/>trial.to_numpy().max()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/ffe78d4d29932fcd21fa35b4b01e877d.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/format:webp/1*ht0g45l4aWbLpJps6WVBwA.png"/></div></figure><p id="ced3" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">由于y的最大值约为47.9亿美元，我们可以尝试检查一下将标题设置为52亿美元是否合适。如果是，那么我们在它下面找到一个值来放置副标题。</p><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="85e7" class="nd lj it np b gy nt nu l nv nw">#Title and Subtitle Placement<br/>fte_graph.text(x = 1980, y = 5200000000, s = "Movie Budget Across Genres Through the Years",<br/>               fontsize = 26, weight = 'bold', alpha = .75);<br/>fte_graph.text(x = 1980, y = 4900000000,<br/>               s = 'A Peak Into Which Movie Genre Has Become More Expensive To Produce Within The Last 30 Years',<br/>              fontsize = 18, alpha = .85);</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi os"><img src="../Images/b91c5a826060a52db18c0475a7cdf70c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2NRbaW4x63diyksUtF4gfA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="430b" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">看起来没问题。所以还是留着吧。</p><h2 id="965a" class="nd lj it bd lk ne nf dn lo ng nh dp ls mj ni nj lu mn nk nl lw mr nm nn ly iz bi translated">第九步——选择合适的配色方案</h2><p id="9938" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">从技术上来说，这可以在更早的步骤中完成，并且不会改变我们已经完成的任何调整。</p><p id="f27d" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">借用我们正在关注的<a class="ae lh" href="https://www.dataquest.io/blog/making-538-plots/" rel="noopener ugc nofollow" target="_blank">基础文章</a>的观点，并从这个<a class="ae lh" href="https://www.nature.com/articles/nmeth.1618#ref1" rel="noopener ugc nofollow" target="_blank">来源</a>中，选择适合色盲读者的颜色不仅提高了可访问性，而且也是一个良好的图形设计实践。RGB的代码已经由我们的原始文章源准备好了，幸运的是，它与我们上面的类型有相同的编号。</p><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="9921" class="nd lj it np b gy nt nu l nv nw"># Colorblind-friendly colors<br/>colors = [[0,0,0], [230/255,159/255,0], [86/255,180/255,233/255], [0,158/255,115/255],<br/>          [240/255,228/255,66/255], [0,114/255,178/255], [213/255,94/255,0], [204/255,121/255,167/255]]</span><span id="1cf1" class="nd lj it np b gy nx nu l nv nw">fte_graph = trial.plot(x ='year', <br/>           y = 'budget', <br/>           figsize=(12,8), <br/>           color= colors,<br/>           legend= False) #instead of choosing a colormap, we handpick our colors</span><span id="93f0" class="nd lj it np b gy nx nu l nv nw">fte_graph.tick_params(axis = 'both', which = 'major', labelsize = 18)<br/>fte_graph.set_yticklabels(labels = [-1000000000, 0,  '$1 Billion  ', '$2 Billion  ', '$3 Billion  ', '$4 Billion  ']);<br/>fte_graph.axhline(y = 0, color = 'black', linewidth = 2, alpha = .7)<br/>fte_graph.set_xlim(left = 1984, right = 2016)<br/>fte_graph.xaxis.label.set_visible(False)</span><span id="5086" class="nd lj it np b gy nx nu l nv nw">#Signature Bar<br/>fte_graph.text(x = 1979.8, y = -1000000000,<br/>    s = ' ©Francis Adrian Viernes                                                          Source: Data Collected by TMDB and GroupLens Accessed via Kaggle ',<br/>               fontsize = 14, color = '#f0f0f0', backgroundcolor = 'grey');</span><span id="835a" class="nd lj it np b gy nx nu l nv nw">#Title and Subtitle Placement<br/>fte_graph.text(x = 1980, y = 5200000000, s = "Movie Budget Across Genres Through the Years",<br/>               fontsize = 26, weight = 'bold', alpha = .75);<br/>fte_graph.text(x = 1980, y = 4900000000,<br/>               s = 'A Peak Into Which Movie Genre Has Become More Expensive To Produce Within The Last 30 Years',<br/>              fontsize = 18, alpha = .85);</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi os"><img src="../Images/26707e659a9cb5917764ca2122577654.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h1AoLzQ6S2E8Exmxfa9ooQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><h2 id="ed9d" class="nd lj it bd lk ne nf dn lo ng nh dp ls mj ni nj lu mn nk nl lw mr nm nn ly iz bi translated">步骤10-用内嵌标签替换图例</h2><p id="481b" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">与签名栏、标题和副标题一样，这一部分包括文本位置的反复试验。</p><p id="dc52" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">现在，在图表中放置简单标识线条或条形的文本，而不是图例，是一种常见且被接受的节省空间的方式。</p><p id="c581" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">首先，让我们通过将图例合并到主代码中来删除它。</p><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="d400" class="nd lj it np b gy nt nu l nv nw">fte_graph = trial.plot(x ='year', <br/>           y = 'budget', <br/>           figsize=(12,8), <br/>           color= colors,<br/>           legend= False) #instead of choosing a colormap, we handpick our colors</span><span id="940c" class="nd lj it np b gy nx nu l nv nw">fte_graph = trial.plot(x ='year', <br/>           y = 'budget', <br/>           figsize=(12,8), <br/>           color= colors,<br/>           legend= False) #instead of choosing a colormap, we handpick our colors</span><span id="f641" class="nd lj it np b gy nx nu l nv nw">fte_graph.tick_params(axis = 'both', which = 'major', labelsize = 18)<br/>fte_graph.set_yticklabels(labels = [-1000000000, 0,  '$1 Billion  ', '$2 Billion  ', '$3 Billion  ', '$4 Billion  ']);<br/>fte_graph.axhline(y = 0, color = 'black', linewidth = 2, alpha = .7)<br/>fte_graph.set_xlim(left = 1984, right = 2016)<br/>fte_graph.xaxis.label.set_visible(False)</span><span id="2a9f" class="nd lj it np b gy nx nu l nv nw">#Signature Bar<br/>fte_graph.text(x = 1979.8, y = -1000000000,<br/>    s = ' ©Francis Adrian Viernes                                                          Source: Data Collected by TMDB and GroupLens Accessed via Kaggle ',<br/>               fontsize = 14, color = '#f0f0f0', backgroundcolor = 'grey');</span><span id="fa3f" class="nd lj it np b gy nx nu l nv nw">#Title and Subtitle Placement<br/>fte_graph.text(x = 1980, y = 5200000000, s = "Movie Budget Across Genres Through the Years",<br/>               fontsize = 26, weight = 'bold', alpha = .75);<br/>fte_graph.text(x = 1980, y = 4900000000,<br/>               s = 'A Peak Into Which Movie Genre Has Become More Expensive To Produce Within The Last 30 Years',<br/>              fontsize = 18, alpha = .85);</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi os"><img src="../Images/1f0e3c8f6299e8e98d98f108f24c7480.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4DVbw--9L-AlN0h--EszAw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="0961" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">最后，我们手动放置文本，这些文本用它们的特定类型来标识这些行。</p><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="78e0" class="nd lj it np b gy nt nu l nv nw">#Colored Labels Indentifying the Line<br/>fte_graph.text(x = 2010, y = 3500000000, s = 'Action', color = colors[0], weight = 'bold',fontsize=16, rotation = 42,<br/>              backgroundcolor = '#f0f0f0');</span><span id="11c2" class="nd lj it np b gy nx nu l nv nw">fte_graph.text(x = 2015, y = 600000000, s = 'Adventure', color = colors[1], weight = 'bold',fontsize=16, rotation = 52,<br/>              backgroundcolor = '#f0f0f0');</span><span id="5ef6" class="nd lj it np b gy nx nu l nv nw">fte_graph.text(x = 2014, y = 1200000000, s = 'Animation', color = colors[2], weight = 'bold',fontsize=16, rotation = 52,<br/>              backgroundcolor = '#f0f0f0');</span><span id="98a0" class="nd lj it np b gy nx nu l nv nw">fte_graph.text(x = 2016, y = 500000000, s = 'Biography', color = colors[3], weight = 'bold',fontsize=16, rotation = 52,<br/>              backgroundcolor = '#f0f0f0');</span><span id="fcd0" class="nd lj it np b gy nx nu l nv nw">fte_graph.text(x = 2004, y = 1400000000, s = 'Comedy', color = colors[4], weight = 'bold',fontsize=16, rotation = -58,<br/>              backgroundcolor = '#f0f0f0');</span><span id="d894" class="nd lj it np b gy nx nu l nv nw">fte_graph.text(x = 2016, y = 100000000, s = 'Crime', color = colors[5], weight = 'bold',fontsize=16, rotation = 52,<br/>              backgroundcolor = '#f0f0f0');</span><span id="890f" class="nd lj it np b gy nx nu l nv nw">fte_graph.text(x = 2002.8, y = 800000000, s = 'Drama', color = colors[6], weight = 'bold',fontsize=16, rotation = 65,<br/>              backgroundcolor = '#f0f0f0');</span><span id="0d55" class="nd lj it np b gy nx nu l nv nw">fte_graph.text(x = 2016, y = -200000000, s = 'Horror', color = colors[7], weight = 'bold',fontsize=16, rotation = 52,<br/>              backgroundcolor = '#f0f0f0');</span></pre><p id="63f6" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">可以看出，我们为此使用的另一个参数是用于正确放置标签的“旋转”参数。</p><p id="87f6" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">在所有这些步骤之后，我们最终得到了下图:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nc"><img src="../Images/73c7f75e62036131af4d1489faf288b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CXbtSsgEJ6hdT4KIhHyO_A.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="29a5" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">以下是完整代码，供您参考:</p><pre class="ks kt ku kv gt no np nq nr aw ns bi"><span id="ffce" class="nd lj it np b gy nt nu l nv nw"># Colorblind-friendly colors<br/>colors = [[0,0,0], [230/255,159/255,0], [86/255,180/255,233/255], [0,158/255,115/255],<br/>          [240/255,228/255,66/255], [0,114/255,178/255], [213/255,94/255,0], [204/255,121/255,167/255]]</span><span id="d30a" class="nd lj it np b gy nx nu l nv nw">fte_graph = trial.plot(x ='year', <br/>           y = 'budget', <br/>           figsize=(12,8), <br/>           color= colors,<br/>           legend= False) #instead of choosing a colormap, we handpick our colors</span><span id="b156" class="nd lj it np b gy nx nu l nv nw">fte_graph.tick_params(axis = 'both', which = 'major', labelsize = 18)<br/>fte_graph.set_yticklabels(labels = [-1000000000, 0,  '$1 Billion  ', '$2 Billion  ', '$3 Billion  ', '$4 Billion  ']);<br/>fte_graph.axhline(y = 0, color = 'black', linewidth = 2, alpha = .7)<br/>fte_graph.set_xlim(left = 1984, right = 2016)<br/>fte_graph.xaxis.label.set_visible(False)</span><span id="aba7" class="nd lj it np b gy nx nu l nv nw">#Signature Bar<br/>fte_graph.text(x = 1979.8, y = -1000000000,<br/>    s = ' ©Francis Adrian Viernes                                                          Source: Data Collected by TMDB and GroupLens Accessed via Kaggle ',<br/>               fontsize = 14, color = '#f0f0f0', backgroundcolor = 'grey');</span><span id="6505" class="nd lj it np b gy nx nu l nv nw">#Title and Subtitle Placement<br/>fte_graph.text(x = 1980, y = 5200000000, s = "Movie Budget Across Genres Through the Years",<br/>               fontsize = 26, weight = 'bold', alpha = .75);<br/>fte_graph.text(x = 1980, y = 4900000000,<br/>               s = 'A Peak Into Which Movie Genre Has Become More Expensive To Produce Within The Last 30 Years',<br/>              fontsize = 18, alpha = .85);</span><span id="3e8d" class="nd lj it np b gy nx nu l nv nw">#Colored Labels Indentifying the Line<br/>fte_graph.text(x = 2010, y = 3500000000, s = 'Action', color = colors[0], weight = 'bold',fontsize=16, rotation = 42,<br/>              backgroundcolor = '#f0f0f0');</span><span id="42f6" class="nd lj it np b gy nx nu l nv nw">fte_graph.text(x = 2015, y = 600000000, s = 'Adventure', color = colors[1], weight = 'bold',fontsize=16, rotation = 52,<br/>              backgroundcolor = '#f0f0f0');</span><span id="b432" class="nd lj it np b gy nx nu l nv nw">fte_graph.text(x = 2014, y = 1200000000, s = 'Animation', color = colors[2], weight = 'bold',fontsize=16, rotation = 52,<br/>              backgroundcolor = '#f0f0f0');</span><span id="aded" class="nd lj it np b gy nx nu l nv nw">fte_graph.text(x = 2016, y = 500000000, s = 'Biography', color = colors[3], weight = 'bold',fontsize=16, rotation = 52,<br/>              backgroundcolor = '#f0f0f0');</span><span id="b7e8" class="nd lj it np b gy nx nu l nv nw">fte_graph.text(x = 2004, y = 1400000000, s = 'Comedy', color = colors[4], weight = 'bold',fontsize=16, rotation = -58,<br/>              backgroundcolor = '#f0f0f0');</span><span id="1278" class="nd lj it np b gy nx nu l nv nw">fte_graph.text(x = 2016, y = 100000000, s = 'Crime', color = colors[5], weight = 'bold',fontsize=16, rotation = 52,<br/>              backgroundcolor = '#f0f0f0');</span><span id="d822" class="nd lj it np b gy nx nu l nv nw">fte_graph.text(x = 2002.8, y = 800000000, s = 'Drama', color = colors[6], weight = 'bold',fontsize=16, rotation = 65,<br/>              backgroundcolor = '#f0f0f0');</span><span id="765c" class="nd lj it np b gy nx nu l nv nw">fte_graph.text(x = 2016, y = -200000000, s = 'Horror', color = colors[7], weight = 'bold',fontsize=16, rotation = 52,<br/>              backgroundcolor = '#f0f0f0');</span></pre><h1 id="a223" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">结束语</h1><p id="e13e" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">制作一个专业外观的图表，虽然需要在代码方面做一些努力，但最终会吸引我们的观众。</p><p id="bca6" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">按照上面的步骤，以最小化我们的工作为最终目标，我们应该处理微小的调整和元素，这些调整和元素不太可能随着进一步的修改而改变。这指的是我们的什么:</p><ul class=""><li id="c1aa" class="oc od it mc b md mw mg mx mj oe mn of mr og mv oh oi oj ok bi translated">背景或风格</li><li id="327c" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">刻度线</li><li id="926b" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">配色方案和</li><li id="c096" class="oc od it mc b md ol mg om mj on mn oo mr op mv oh oi oj ok bi translated">其他微小的调整，如在某些数据点上加一条粗水平线。</li></ul><p id="6ec6" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">文本元素需要一点精确性和与对齐的协调性，理想情况下应该在最后完成。</p><p id="2e47" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">最后，不要害怕混淆一些元素，尝试使用其他图表和数据集。你甚至可以发挥创意，在这里插入图片。</p><p id="45e1" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">让我知道你的想法。我的<a class="ae lh" href="https://github.com/francisadrianviernes/Visualization/blob/master/Data%20Visualization%20Hack%20-%20Learning%20from%20FiveThirty%20Eight%20Graphs.ipynb" rel="noopener ugc nofollow" target="_blank"> Github页面</a>上的全部代码。</p><h1 id="5dcf" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">参考</h1><p id="1afd" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated"><a class="ae lh" href="https://www.dataquest.io/blog/making-538-plots/" rel="noopener ugc nofollow" target="_blank">制作538剧情</a></p><p id="efdc" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><a class="ae lh" href="https://www.nature.com/articles/nmeth.1618#ref1" rel="noopener ugc nofollow" target="_blank">色盲友好的配色方案</a></p></div></div>    
</body>
</html>