<html>
<head>
<title>Interactive map using Geographical Information in Plotly Express</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Plotly Express中使用地理信息的交互式地图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/interactive-map-using-geographical-information-in-plotly-express-362081457600?source=collection_archive---------22-----------------------#2021-10-11">https://towardsdatascience.com/interactive-map-using-geographical-information-in-plotly-express-362081457600?source=collection_archive---------22-----------------------#2021-10-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="83b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">可视化对于任何数据科学项目来说都是非常强大的工具。它有助于读者理解正在发生的事情。对于某些数据集来说，能够在地图上查看数据非常有助于在进行分析时展示见解。</p><p id="2f4b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有很多软件包可以实现这个目标，它们都有各自的优点和缺点。即<a class="ae kl" href="https://github.com/python-visualization/folium" rel="noopener ugc nofollow" target="_blank">叶子</a>、<a class="ae kl" href="https://plotly.com/python/plotly-express/" rel="noopener ugc nofollow" target="_blank">剧情</a>、<a class="ae kl" href="https://pypi.org/project/mapbox/" rel="noopener ugc nofollow" target="_blank">地图框</a>、<a class="ae kl" href="https://bokeh.org/" rel="noopener ugc nofollow" target="_blank">散景</a>等等。</p><p id="a26d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇文章中，我将展示在使用Plotly分析带有地理信息的数据时，如何在地图上绘制数据。</p></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><p id="4f2d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个演示中，我使用加利福尼亚州旧金山的房屋租赁价格数据集。该数据集首先包含以下特征。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi kt"><img src="../Images/0417dde058fb07e848d346defaa1e897.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*UJ8U5bXISA-OzNNmWpUMtA.png"/></div><p class="lb lc gj gh gi ld le bd b be z dk translated">数据集中的要素。图片作者。</p></figure><p id="84d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">经过初步清理后，我想获得各个房屋的邮政编码信息。我用<code class="fe lf lg lh li b">uszipcode</code>包从经纬度数据中获取那些信息。此外，还使用了pandas和Plotly express。这方面的代码如下:</p><pre class="ku kv kw kx gt lj li lk ll aw lm bi"><span id="052a" class="ln lo iq li b gy lp lq l lr ls"># data manipulation<br/>import pandas as pd</span><span id="6ee8" class="ln lo iq li b gy lt lq l lr ls"># data cleaning<br/>import re<br/>import missingno</span><span id="cb40" class="ln lo iq li b gy lt lq l lr ls"># data visualization<br/>import plotly.express as px</span></pre><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="lu lv l"/></div></figure></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><p id="4461" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我用它按邮政编码对数据进行分组，以获得每个邮政编码的平均租赁价格，并在地图上可视化。这是最终的结果。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi lw"><img src="../Images/73ab40df766b05039dddad0dd1e1e297.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*otXaBLw4hOAKp8Ou2YWQqA.png"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">每个邮编的平均价格。图片作者。</p></figure><p id="f3c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">代码:</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="51bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这种方法利用包含美国邮政编码边界的geojason文件。这些都是由<a class="ae kl" href="https://github.com/OpenDataDE/" rel="noopener ugc nofollow" target="_blank"> OpenDataDE </a>提供的，文件可以在<a class="ae kl" href="https://github.com/OpenDataDE/State-zip-code-GeoJSON/blob/master/ca_california_zip_codes_geo.min.json" rel="noopener ugc nofollow" target="_blank">这里</a>找到。为了获得那些在plotly中有用的信息，使用了下面这一行。</p><pre class="ku kv kw kx gt lj li lk ll aw lm bi"><span id="e3c8" class="ln lo iq li b gy lp lq l lr ls">for feature in zipcode_data['features']:        <br/>    feature['id'] = feature['properties']['ZCTA5CE10']</span></pre><p id="0ad8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">更多来自plotly文档的信息可以在<a class="ae kl" href="https://plotly.com/python/choropleth-maps/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><p id="6df9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了在交互式地图上获得每所房子的位置，我使用了以下代码:</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi mb"><img src="../Images/12635cbd4fadc41493f51b949c9bfaf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dcDH8WNjlO1-fHtojvwtFA.png"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">房子位置。图片作者。</p></figure><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="cc01" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">更多来自plotly文档的信息可以在这里找到<a class="ae kl" href="https://plotly.com/python/scattermapbox/" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><p id="8120" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于静态输出，用这个代替使用<code class="fe lf lg lh li b">fig.show()</code>显示对象。您也可以通过修改输出类型将它保存为图像。</p><pre class="ku kv kw kx gt lj li lk ll aw lm bi"><span id="aa33" class="ln lo iq li b gy lp lq l lr ls">import plotly.io as plyIo<br/>img_bytes = fig.to_image(format="png", width=1200, height=700, scale=1)<br/>from IPython.display import Image<br/>display(Image(img_bytes))</span></pre></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><p id="148d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所有的工作和文件都可以在GitHub上的<a class="ae kl" href="https://github.com/tamjid-ahsan/visuals-map" rel="noopener ugc nofollow" target="_blank">这里</a>找到。可以在Github的<a class="ae kl" href="https://github.com/tamjid-ahsan/House-rental-price-prediction" rel="noopener ugc nofollow" target="_blank">这里</a>找到使用这些数据的房价预测项目的扩展。</p></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><p id="c8b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天到此为止。下次见！</p></div></div>    
</body>
</html>