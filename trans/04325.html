<html>
<head>
<title>Causal Inference in Data Science: A/B Testing &amp; Randomized Trials with Covariate Adjustment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学中的因果推断:A/B检验&amp;有协变量调整的随机试验</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/causal-inference-in-data-science-a-b-testing-randomized-trials-with-covariate-adjustment-f5a24bd023b3?source=collection_archive---------34-----------------------#2021-04-12">https://towardsdatascience.com/causal-inference-in-data-science-a-b-testing-randomized-trials-with-covariate-adjustment-f5a24bd023b3?source=collection_archive---------34-----------------------#2021-04-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2369" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"><strong class="ak">效率&amp;A/B测试中条件协变量调整的统计功效增益&amp;随机试验</strong></h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6fdce09e3219cd9b08bbe217004e24c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*e-zxYpX2oyc6IvC6"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@casparrubin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卡斯帕·卡米尔·鲁宾</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="6d3a" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">1:背景和动机</h1><p id="39b7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">因果推理是一个涉及几个领域的领域，并引起了包括统计学家、数据科学家、机器学习科学家和其他计算研究人员在内的广泛从业者的兴趣。</p><p id="bcb3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">到目前为止，我已经写了几篇关于因果推理空间的方法/主题的文章。其中包括:</p><ul class=""><li id="34a0" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/efficient-sampling-frameworks-in-causal-inference-data-science-52ad44e15f48">因果推理中的有效抽样框架</a></li><li id="609e" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/doubly-robust-estimators-for-causal-inference-in-statistical-estimation-3c00847e9db">因果推断中的双重稳健估计技术</a></li><li id="3cae" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/causal-inference-in-data-science-g-estimation-of-structural-nested-models-d11b1e3c9360?source=post_stats_page-------------------------------------">半参数结构嵌套模型的G-估计</a></li><li id="b7e3" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/causal-inference-in-data-science-structure-of-m-bias-with-confounding-adjustment-70e4a263ad08">存在M偏差结构时因果效应的恢复</a></li><li id="2e95" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/causal-inference-in-data-science-a-b-testing-and-the-need-for-marginal-structural-modeling-b9ab299681bb">在AB试验/随机试验中对边缘结构建模的需求，用于信息性审查调整</a></li><li id="7abd" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/causal-inference-in-data-science-valid-inferential-coverage-with-multiple-comparisons-750e9e3f0259">多重比较的有效推理覆盖率</a></li></ul><p id="4442" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这篇文章涉及A/B检验(又名随机试验)和通过协变量调整的统计有效的条件抽样估计规范。即使在没有混杂因素的情况下，也为调整感兴趣结果的强预测因素的益处提供了数学上严格的论证和计算模拟。</p><p id="a93e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">该作品的内容如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/3d3c3217393cbed78734ad653183dd14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y6A8JT-_pIbYCrJIUNno3Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="2a67" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">2:具有连续结果的简单理想化A/B测试</h1><p id="45a8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们将首先探讨在假设感兴趣的结果是连续的情况下，在A/B测试框架中协变量调整的好处:</p><h2 id="2524" class="nh la it bd lb ni nj dn lf nk nl dp lj ma nm nn ll me no np ln mi nq nr lp ns bi translated">2.1:玩具示例的规格</h2><p id="cdee" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们假设一个简单的“理想化”A/B测试，带有随机二元干预<strong class="lt iu"><em class="nt"/></strong>和连续正态分布结果<strong class="lt iu"> <em class="nt"> Y </em> </strong>。“理想化”是指:</p><ul class=""><li id="4d91" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">完美数据测量</li><li id="4864" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">完美的受试者依从性，无交叉干预</li><li id="d5ae" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">没有失访或丢失数据，因此没有信息审查</li></ul><p id="6e7a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><em class="nt">(关于受试者不依从和信息性审查的调整方法，请见</em> <a class="ae ky" rel="noopener" target="_blank" href="/causal-inference-in-data-science-a-b-testing-and-the-need-for-marginal-structural-modeling-b9ab299681bb"> <em class="nt">见我的</em> </a> <em class="nt">关于信息性审查和边缘结构建模)</em></p><p id="eee4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">与上述理想化A/B测试相对应的边际因果DAG(在零值下)如图1 所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/6d66c2e9b5480b77e7ced9147d84f100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fO-f95BfyYPgFd_-soNh5w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="7b9d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在上面的空因果DAG中，我们有二元介入<strong class="lt iu"><em class="nt"/></strong>和连续结局<strong class="lt iu"> <em class="nt"> Y </em> </strong>。干预<strong class="lt iu"><em class="nt"/></strong>是随机化的，因此没有箭头进入<strong class="lt iu"><em class="nt"/></strong>。但是请注意，我们在集合<strong class="lt iu"><em class="nt">【L】</em></strong>中有一组附加变量，带有指向结果<strong class="lt iu"> <em class="nt"> Y </em> </strong>的箭头。集合<strong class="lt iu"> <em class="nt"> L </em> </strong>中的变量是结果<strong class="lt iu"><em class="nt"/></strong>Y的直接原因(即预测因素)，它们独立于随机干预<strong class="lt iu"><em class="nt"/></strong>而不是通过随机干预来调节。</p><p id="64b5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于有随机试验和A/B试验因果DAG经验的读者来说，在图1 的<em class="nt">DAG中设置<strong class="lt iu"> <em class="nt"> L </em> </strong>可能会显得奇怪。有人可能会问<em class="nt">“如果干预是随机的，那么干预和结果应该是图上唯一的变量？这是随机研究，不是观察研究？set</em><strong class="lt iu"><em class="nt">L</em></strong><em class="nt">中的附加变量从哪里来？”</em></em></p><p id="9ef3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这激发了关于“完全”因果Dag的重要讨论点。当我们指定一个因果DAG并判定图是“完整的”并且“所有的变量都在图上”时，我们具体指的是什么？嗯，具体来说，我们的意思是:</p><ul class=""><li id="b0ad" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">关于我们详细说明的科学上著名的感兴趣的问题，为我们的问题构建和恢复无偏抽样估计量所需的一组充分的变量在图上</li></ul><p id="d83c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">重要的是要记住，在因果DAG上总是有比图示更多的变量。在实践中，我们经常只是形象地展示足以回答我们问题的变量。例如，在图1 的<em class="nt">因果DAG中，理论上有更多的变量在两个方向上无限延伸:</em></p><ul class=""><li id="8ea1" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">集合<strong class="lt iu"> <em class="nt"> L </em> </strong>中变量的直接原因的变量，以及这些变量的直接原因，以此类推</li><li id="a918" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">是<strong class="lt iu"> <em class="nt"> Y </em> </strong>的直接后代的变量，以及这些变量的直接后代，等等</li></ul><p id="b016" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了恢复干预<strong class="lt iu"><em class="nt"/></strong>对结果<strong class="lt iu"><em class="nt"/></strong>的因果效应的无偏估计，我们只需要变量<strong class="lt iu"><em class="nt"/></strong>和<strong class="lt iu"> <em class="nt"> Y </em> </strong>。但是，这并不意味着set <strong class="lt iu"> <em class="nt"> L </em> </strong>中的变量不是真实存在的。</p><p id="5495" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于我们感兴趣的问题以及本文的主题，我们将清楚为什么选择在我们的因果DAG中以图形方式显示集合<strong class="lt iu"> <em class="nt"> L </em> </strong>中的变量。还是那句话，我们不需要包含<strong class="lt iu"> <em class="nt"> L </em> </strong>来恢复一个<strong class="lt iu"><em class="nt"/></strong>A<strong class="lt iu"><em class="nt"/></strong>Y因果效应的无偏估计。但是从推理覆盖和统计功效的角度来看，包括<strong class="lt iu"><em class="nt"/></strong>对我们是有益的，我们很快就会看到。</p><h2 id="1a3f" class="nh la it bd lb ni nj dn lf nk nl dp lj ma nm nn ll me no np ln mi nq nr lp ns bi translated">2.2:<strong class="ak"/>因果效应估计的“标准”边际抽样估计量</h2><p id="1b74" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们具体说明在最简单的随机试验或玩具问题的A/B试验中使用的“标准”边际抽样估计量。</p><p id="e1c8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">同样，从<em class="nt">图1 </em>中的因果DAG开始:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/6d66c2e9b5480b77e7ced9147d84f100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fO-f95BfyYPgFd_-soNh5w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/99043400e4562c97555b7abba7beb219.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9my7qjNgE5ASA7yX4JU0-A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/0f2d237bf8fdd07b1b36f47947b8e83b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ybU57ZGoYg2fIjy_lhU3LQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="c371" class="nh la it bd lb ni nj dn lf nk nl dp lj ma nm nn ll me no np ln mi nq nr lp ns bi translated">2.3:因果效应估计的条件抽样估计量</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/c9c408aa1034e5461c3e870e739af5f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*loTAy_aZpXXOiVA0prR5Wg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="b5ad" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在<em class="nt">图2 </em>中，我们有与<em class="nt">图1 </em>中相同的因果DAG，除了我们现在对集合<strong class="lt iu"> <em class="nt"> L </em> </strong>进行调节。注意，我们仍然对恢复干预<strong class="lt iu"><em class="nt"/></strong>对结果<strong class="lt iu"><em class="nt"/></strong>的平均因果效应的无偏估计感兴趣。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/bbfbbfba629941849872e0936490d151.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-TjYEmE80PnQ2m3gRqy3dA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/c365e68cbb5ee861fbf3004d1c8cb87a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wQIZpK8IccjDrN7qIIniRw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="ba6e" class="nh la it bd lb ni nj dn lf nk nl dp lj ma nm nn ll me no np ln mi nq nr lp ns bi translated">2.4:抽样方差和统计功效的差异</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/854c07971bbcc1f1b5e55ba3dfdcf5a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1mGiavr1JaKaQvEypT6aqA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/bd3a4f93d7cc810026aef20432bf5daa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_AEVJsyvx7Y5bWlnGhYPeQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/e35f53ccce7b54370e776c33cb659218.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K2SWIGlAgQUfdcZXsFtcJw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/6ad975673d81969f70d95e6ae6fda3f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jj-4CA6zfQdoCNf5_za5vQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/f035bc11e86711ae6140c88b558adb64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OMbUaTUD0vsSsNWGnpRKQA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/486b4cdd68aed312502db61e46f2b887.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9fi4eWSqLHi2Gb__AEiiQA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="3734" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">3: <strong class="ak">具有二元结果的简单理想化A/B测试</strong></h1><p id="834a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在，让我们在假设感兴趣的结果是二元的情况下，探讨A/B测试框架中共变量调整的好处。由于优势比的不可压缩性，我们正在分别处理二元结果案例。<em class="nt">关于不可压缩性的详细讨论，</em> <a class="ae ky" href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/" rel="noopener ugc nofollow" target="_blank"> <em class="nt">参见Miguel Hernan和James Robins的《因果推论:如果</em> </a> <em class="nt">会怎样》一文中的第4.3点。</em></p><h2 id="107e" class="nh la it bd lb ni nj dn lf nk nl dp lj ma nm nn ll me no np ln mi nq nr lp ns bi translated">3.1:玩具示例的规格</h2><p id="b45e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们假设一个简单的“理想化”A/B测试，带有随机二元干预<strong class="lt iu"><em class="nt"/></strong>和伯努利分布结果<strong class="lt iu"><em class="nt"/></strong></p><p id="8475" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">与上述理想化A/B测试相对应的边际因果DAG(在零值下)如图3 所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/07d7d496f8982b11d19451d2834940a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4wX4PJa4b_DEIga-joyMFg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="e9c4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在上面的空因果DAG中，我们有二元干预<strong class="lt iu"><em class="nt"/></strong>，二元结果<strong class="lt iu"> <em class="nt"> Y </em> </strong>，以及协变预测结果<strong class="lt iu"><em class="nt"/></strong>中的集合<strong class="lt iu"><em class="nt"/></strong>。请注意，上面的DAG与2.1节中的<em class="nt">图1 </em>几乎相同，除了感兴趣的结果<strong class="lt iu"> <em class="nt"> Y </em> </strong>是二进制而不是连续的。</p><h2 id="da24" class="nh la it bd lb ni nj dn lf nk nl dp lj ma nm nn ll me no np ln mi nq nr lp ns bi translated">3.2:<strong class="ak"/>因果效应估计的“标准”边际抽样估计量</h2><p id="816a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们具体说明在最简单的随机试验或玩具问题的A/B试验中使用的“标准”边际抽样估计量。</p><p id="7415" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">再次从<em class="nt">图3 </em>中的因果DAG开始:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/07d7d496f8982b11d19451d2834940a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4wX4PJa4b_DEIga-joyMFg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/af151a73a788ba6928c3f82e5dd08929.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kwgILZlUib4PzQCVmCpXZw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/0bc8a8be2bec089768475a66a144876a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jdxyZiZ3-MxHiuEDIePVgw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="9f54" class="nh la it bd lb ni nj dn lf nk nl dp lj ma nm nn ll me no np ln mi nq nr lp ns bi translated">3.3: <strong class="ak">因果效应估计的条件抽样估计量</strong></h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/134594353531bc3e235ed021b7e1eec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0xbHIEThe5Ro9DTbNW_BSg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/b61cb8133ed64ee46419a7d8f0a1ab63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J8MUy--SNu6sVeDdBhKeCg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/bae46193f44e01d2c1e13bad7b501052.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pMqQ8E6RHWqXzi-gR0Tl-Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="b3a8" class="nh la it bd lb ni nj dn lf nk nl dp lj ma nm nn ll me no np ln mi nq nr lp ns bi translated">3.4:抽样方差和统计功效的差异</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/83b9733eb1483cf9fda1c31fb2d5e02e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P5XyrpIbg0WDe6MIHELUSw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/19d8d051120862a68ec376b53bee7ed1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zkdvNZQJXFdfCZGDLJn0CQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="2217" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">4.计算模拟</h1><p id="8d86" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">下面是第2节(连续结果病例)和第3节(二元结果病例)中介绍的理想化随机试验的Python计算模拟。研究了有和没有协变量调整的平均因果效应差异的无偏估计的恢复，显示了有协变量调整的统计效率增益:</p><p id="9a3e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们导入我们需要的库:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><p id="e866" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">接下来，我们模拟随机试验的函数，包括有无协变量调整的连续/二元结果，以及功效计算:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><p id="1328" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在连续结果情况下运行模拟:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><p id="2a10" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在二元结果情况下运行模拟:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><p id="5542" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">从上面的结果中，我们可以看到，在连续和二元结果情况下，协变量调整分析与未调整分析相比，在功效方面有效率增益。</p><p id="12bd" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">以上计算模拟的完整代码/笔记本，请看下面的<a class="ae ky" href="https://github.com/atrothman/Randomized_Trial_Covariate_Adjustment" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> github链接</strong> </a>。</p><h1 id="d04e" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">5.总结和结论</h1><p id="dfc8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这总结了我们对协变量调整的A/B检验的推导和计算模拟，以及从统计效率的角度来看这样做的好处。我鼓励任何发现上述材料有见地的人创建自己的模拟示例，利用我的代码作为起点，并自己进行实验！</p><p id="4cbd" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果你想了解更多关于因果推理的方法和注意事项，我会推荐哈佛大学Miguel Hernan和Jamie Robins(我以前的两位教授)的教科书“<em class="nt">因果推理:如果</em>会怎样”，加州大学洛杉矶分校Judea Pearl的教科书“<em class="nt">因果关系</em>，斯坦福大学Daphne黑仔和耶路撒冷希伯来大学Nir Friedman的教科书<em class="nt">概率图形模型:原理和技术</em>，以及加州大学伯克利分校Mark van der Laan和Sheri的两本关于<em class="nt">目标最大似然估计</em>的教科书这些都是很棒的文章。我计划在未来写更多关于因果推理的深度文章。</p><p id="752f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/" rel="noopener ugc nofollow" target="_blank">因果推断:如果</a>会怎样</p><p id="d43d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="http://bayes.cs.ucla.edu/BOOK-2K/" rel="noopener ugc nofollow" target="_blank">因果关系</a></p><p id="6a39" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://mitpress.mit.edu/books/probabilistic-graphical-models" rel="noopener ugc nofollow" target="_blank">概率图形模型:原理和技术</a></p><p id="e0d5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://vanderlaan-lab.org/papers/" rel="noopener ugc nofollow" target="_blank">目标最大似然估计</a></p><p id="a4bb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">希望以上有见地。正如我在以前的一些文章中提到的，我认为没有足够的人花时间去做这些类型的练习。对我来说，这种基于理论的洞察力让我在实践中更容易使用方法。我个人的目标是鼓励该领域的其他人采取类似的方法。我打算在未来写一些基础作品，所以请随时在<a class="ae ky" href="http://www.linkedin.com/in/andrew-rothman-49739630" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> LinkedIn </strong> </a>上与我联系，并在Medium  上<a class="ae ky" href="https://anr248.medium.com/" rel="noopener"> <strong class="lt iu">关注我的更新！</strong></a></p></div></div>    
</body>
</html>