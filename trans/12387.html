<html>
<head>
<title>Stats and R Is 2 Years Old</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">统计和 R 是 2 岁</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/stats-and-r-is-2-years-old-5cdd15455fc1?source=collection_archive---------31-----------------------#2021-12-16">https://towardsdatascience.com/stats-and-r-is-2-years-old-5cdd15455fc1?source=collection_archive---------31-----------------------#2021-12-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2946" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何使用{ googleAnayticsR } R 软件包跟踪页面浏览量、会话、用户参与度和更多 Google 分析数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f0429f4e1c61c74e2bde14d19d0f776b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kjRkuXvfXw7nlXHw"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@mitchel3uo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">米切尔·罗</a></p></figure><h1 id="40fb" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="1e28" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi mn translated">tats 和 R 正好在两年前推出。就像去年的<a class="ae ky" href="https://statsandr.com/blog/track-blog-performance-in-r/" rel="noopener ugc nofollow" target="_blank"/>一样，我认为这是一个很好的时机，通过分享一些关于博客受众的数据来对过去的 12 个月做一个回顾。</p><p id="54ff" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">这篇文章不是炫耀我的数字，而是展示如何使用谷歌分析数据分析你的博客或网站流量的一种方式。关于我的博客的读者的数据对你来说可能是无用的(我相信，不应该与此相比)。然而，这篇文章中使用的代码可以在你自己的博客或网站上重复使用(前提是你也使用 Google Analytics 来跟踪你的受众)。</p><p id="9678" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">请注意，我使用了<code class="fe nb nc nd ne b">{googleAnalyticsR}</code> R 包来分析我博客的 Google Analytics 数据。如果您不熟悉这个包，请先查看<a class="ae ky" href="https://statsandr.com/blog/track-blog-performance-in-r/#prerequisites" rel="noopener ugc nofollow" target="_blank">先决条件</a>。</p><p id="8825" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">如果您已经使用了该软件包，您可以选择如下的帐户(确保使用您自己的属性名称编辑代码):</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="8db4" class="nj la it ne b gy nk nl l nm nn">library(googleAnalyticsR)</span><span id="9b17" class="nj la it ne b gy no nl l nm nn">accounts &lt;- ga_account_list()</span><span id="7736" class="nj la it ne b gy no nl l nm nn"># select the view ID by property name<br/>view_id &lt;- accounts$viewId[which(accounts$webPropertyName == "statsandr.com")]</span></pre><p id="0c68" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">除此之外，我还假设您对<code class="fe nb nc nd ne b"><a class="ae ky" href="https://statsandr.com/blog/graphics-in-r-with-ggplot2/" rel="noopener ugc nofollow" target="_blank">{ggplot2}</a></code>有基本的了解——这是一个流行的 R 包，用于绘制漂亮的图形和可视化效果。</p><h1 id="b95e" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">分析学</h1><p id="3b50" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">去年我主要关注的是节数。今年，我主要关注页面浏览量来说明一个不同的指标。</p><p id="52a0" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">供您参考，<strong class="lt iu">会话</strong>是在给定时间范围内发生的一组用户与您网站的交互，而<strong class="lt iu">页面视图</strong>顾名思义，被定义为您网站上某个页面的视图。</p><p id="9486" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">您可以随时通过编辑下面代码中的<code class="fe nb nc nd ne b">metrics = c("pageviews")</code>来更改指标。在这篇<a class="ae ky" href="https://ga-dev-tools.appspot.com/dimensions-metrics-explorer/" rel="noopener ugc nofollow" target="_blank">文章</a>中查看 Google Analytics 提供的所有可用指标。</p><h1 id="308e" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">用户和页面视图</h1><p id="ffc1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">至于<a class="ae ky" href="https://statsandr.com/blog/track-blog-performance-in-r/" rel="noopener ugc nofollow" target="_blank">去年的点评</a>，先说一些大概的数字，比如整个网站的<strong class="lt iu">用户数和浏览量</strong>。</p><p id="8849" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">请注意，我们仅分析去年的流量，因此我们提取 2020 年 12 月 16 日至昨天(2021 年 12 月 15 日)的数据:</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="45b0" class="nj la it ne b gy nk nl l nm nn"># set date range<br/>start_date &lt;- as.Date("2020-12-16")<br/>end_date &lt;- as.Date("2021-12-15")</span><span id="09a1" class="nj la it ne b gy no nl l nm nn"># get Google Analytics (GA) data<br/>gadata &lt;- google_analytics(view_id,<br/>  date_range = c(start_date, end_date),<br/>  metrics = c("users", "pageviews"),<br/>  anti_sample = TRUE # slows down the request but ensures data isn't sampled<br/>)</span><span id="7951" class="nj la it ne b gy no nl l nm nn">gadata</span><span id="79ea" class="nj la it ne b gy no nl l nm nn">##    users pageviews<br/>## 1 549360    876280</span></pre><p id="ef77" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">在过去的一年里，Stats and R 吸引了<strong class="lt iu"> 549，360 名用户</strong>(访问该网站的新老用户数量)，他们总共产生了<strong class="lt iu"> 876，280 次页面浏览量</strong>。</p><p id="6993" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">这意味着 2021 年每天平均有 2，401 次页面浏览，而 2020 年每天有 1，531 次页面浏览(增长了 56.81%)。</p><h1 id="b533" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">一段时间内的页面访问量</h1><p id="8daa" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">分析博客受众的第一个有趣指标是流量随时间的演变。</p><p id="e4b1" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">随着时间的推移，<strong class="lt iu">页面浏览量的每日数量</strong>可以用<a class="ae ky" href="https://statsandr.com/blog/descriptive-statistics-in-r/#scatterplot" rel="noopener ugc nofollow" target="_blank">散点图</a>呈现出来——连同一条平滑的线——来分析你的博客的受众的<strong class="lt iu">演变</strong>:</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="576c" class="nj la it ne b gy nk nl l nm nn"># get the Google Analytics (GA) data<br/>gadata &lt;- google_analytics(view_id,<br/>  date_range = c(start_date, end_date),<br/>  metrics = c("pageviews"), # edit for other metrics<br/>  dimensions = c("date"),<br/>  anti_sample = TRUE # slows down the request but ensures data isn't sampled<br/>)</span><span id="1a2e" class="nj la it ne b gy no nl l nm nn"># load required libraries<br/>library(dplyr)<br/>library(ggplot2)</span><span id="2ea4" class="nj la it ne b gy no nl l nm nn"># scatter plot with a trend line<br/>gadata %&gt;%<br/>  ggplot(aes(x = date, y = pageviews)) +<br/>  geom_point(size = 1L, color = "steelblue") + # change size and color of points<br/>  geom_smooth(color = "steelblue", alpha = 0.25) + # change color of smoothed line and transparency of confidence interval<br/>  theme_minimal() +<br/>  labs(<br/>    y = "Page views",<br/>    x = "",<br/>    title = "Evolution of daily page views",<br/>    subtitle = paste0(format(start_date, "%b %d, %Y"), " to ", format(end_date, "%b %d, %Y")),<br/>    caption = "Data: Google Analytics data of statsandr.com"<br/>  ) +<br/>  theme(plot.margin = unit(c(5.5, 17.5, 5.5, 5.5), "pt")) + # to avoid the plot being cut on the right edge<br/>  scale_y_continuous(labels = scales::comma) # better y labels</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/6e1e9804d831d2f52b3d4f48e22af6c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oEu45YcdTy_52Bl3.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="01e0" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">尽管页面浏览量变化很大(异常值<a class="ae ky" href="https://statsandr.com/blog/outliers-detection-in-r/" rel="noopener ugc nofollow" target="_blank">在一天内超过 5000 次页面浏览量，有些日子低至不到 1000 次页面浏览量)，但它似乎是周期性的，在夏季会有所下降。值得注意的是，去年出现了同样的下降，可能是因为人们在暑假期间不太可能阅读关于</a><a class="ae ky" href="https://statsandr.com/tags/statistics/" rel="noopener ugc nofollow" target="_blank">统计</a>和<a class="ae ky" href="https://statsandr.com/tags/r/" rel="noopener ugc nofollow" target="_blank"> R </a>的帖子。</p><p id="1494" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">因此，如果你在博客中写一些技术方面的东西，夏季的低数据可能是意料之中的，并不一定意味着你的网站有问题。</p><h1 id="83ba" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">每个频道的页面访问量</h1><p id="59d8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">了解人们如何访问你的博客也是一个非常重要的因素。</p><p id="807c" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">以下是如何在<a class="ae ky" href="https://statsandr.com/blog/descriptive-statistics-in-r/#line-plot" rel="noopener ugc nofollow" target="_blank">线图</a>中可视化每个频道每日页面浏览量的变化:</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="0b83" class="nj la it ne b gy nk nl l nm nn"># Get the data<br/>trend_data &lt;- google_analytics(view_id,<br/>  date_range = c(start_date, end_date),<br/>  dimensions = c("date"),<br/>  metrics = "pageviews",<br/>  pivots = pivot_ga4("medium", "pageviews"),<br/>  anti_sample = TRUE # slows down the request but ensures data isn't sampled<br/>)</span><span id="1a72" class="nj la it ne b gy no nl l nm nn"># edit variable names<br/>names(trend_data) &lt;- c("Date", "Total", "Organic", "Referral", "Direct", "Email", "Social")</span><span id="8340" class="nj la it ne b gy no nl l nm nn"># Change the data into a long format<br/>library(tidyr)<br/>trend_long &lt;- gather(trend_data, Channel, Page_views, -Date)</span><span id="a87c" class="nj la it ne b gy no nl l nm nn"># Build up the line plot<br/>trend_long %&gt;%<br/>  filter(Channel != "Total") %&gt;%<br/>  ggplot() +<br/>  aes(x = Date, y = Page_views, group = Channel) +<br/>  theme_minimal() +<br/>  geom_line(aes(colour = Channel)) +<br/>  labs(<br/>    y = "Page views",<br/>    x = "",<br/>    title = "Evolution of daily page views per channel",<br/>    subtitle = paste0(format(start_date, "%b %d, %Y"), " to ", format(end_date, "%b %d, %Y")),<br/>    caption = "Data: Google Analytics data of statsandr.com"<br/>  ) +<br/>  scale_y_continuous(labels = scales::comma) # better y labels</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/f0129c7394ee05a12e89da903a6e5f69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*86_mgoZYTwhgzcsb.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="8b91" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">从上面的图表中我们可以看出，绝大多数的页面浏览量来自有机渠道(比如来自谷歌、必应等搜索引擎)。)，当一篇文章发表时，一些峰值来自推荐(主要来自 R-bloggers 和 RWeekly)。(顺便说一句，如果你想在新帖子发布时收到电子邮件通知，你可以随时订阅时事通讯。)</p><p id="5439" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">如果你碰巧写教程，你也可以期待大部分访问者来自有机渠道。如果你在社交媒体上非常活跃，你很可能会从社交渠道吸引更多的访问者。</p><h1 id="64c7" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">一周中每天和一年中每月的页面浏览量</h1><p id="e3bc" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">正如在前面的情节中看到的，有许多起伏和交通似乎是周期性的。</p><p id="734e" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">为了进一步研究这个问题，我们绘制了一个一周<strong class="lt iu">的每一天</strong>的页面浏览量的<a class="ae ky" href="https://statsandr.com/blog/descriptive-statistics-in-r/#boxplot" rel="noopener ugc nofollow" target="_blank">箱线图</a>:</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="de30" class="nj la it ne b gy nk nl l nm nn"># get data<br/>gadata &lt;- google_analytics(view_id,<br/>  date_range = c(start_date, end_date),<br/>  metrics = "pageviews",<br/>  dimensions = c("dayOfWeek", "date"),<br/>  anti_sample = TRUE # slows down the request but ensures data isn't sampled<br/>)</span><span id="f153" class="nj la it ne b gy no nl l nm nn">## Recoding gadata$dayOfWeek following GA naming conventions<br/>gadata$dayOfWeek &lt;- recode_factor(gadata$dayOfWeek,<br/>  "0" = "Sunday",<br/>  "1" = "Monday",<br/>  "2" = "Tuesday",<br/>  "3" = "Wednesday",<br/>  "4" = "Thursday",<br/>  "5" = "Friday",<br/>  "6" = "Saturday"<br/>)</span><span id="f0b5" class="nj la it ne b gy no nl l nm nn">## Reordering gadata$dayOfWeek to have Monday as first day of the week<br/>gadata$dayOfWeek &lt;- factor(gadata$dayOfWeek,<br/>  levels = c(<br/>    "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday",<br/>    "Sunday"<br/>  )<br/>)</span><span id="770e" class="nj la it ne b gy no nl l nm nn"># Boxplot<br/>gadata %&gt;%<br/>  ggplot(aes(x = dayOfWeek, y = pageviews)) +<br/>  geom_boxplot(fill = "steelblue") +<br/>  theme_minimal() +<br/>  labs(<br/>    y = "Page views",<br/>    x = "",<br/>    title = "Page views per day of week",<br/>    subtitle = paste0(format(start_date, "%b %d, %Y"), " to ", format(end_date, "%b %d, %Y")),<br/>    caption = "Data: Google Analytics data of statsandr.com"<br/>  ) +<br/>  scale_y_continuous(labels = scales::comma) # better y labels</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/fe1d69162e4061da4087ae264b481bc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cDcFSI67ipDOgFrL.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="85e7" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">我们还可以计算每天的总浏览量和平均浏览量，得到一个数字摘要，而不是一个图表:</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="d24c" class="nj la it ne b gy nk nl l nm nn"># compute sum<br/>dat_sum &lt;- aggregate(pageviews ~ dayOfWeek,<br/>  data = gadata,<br/>  FUN = sum<br/>)</span><span id="7fb6" class="nj la it ne b gy no nl l nm nn"># compute mean<br/>dat_mean &lt;- aggregate(pageviews ~ dayOfWeek,<br/>  data = gadata,<br/>  FUN = mean<br/>)</span><span id="ebfb" class="nj la it ne b gy no nl l nm nn"># combine both in one table<br/>dat_summary &lt;- cbind(dat_sum, dat_mean[, 2])</span><span id="29a0" class="nj la it ne b gy no nl l nm nn"># rename columns<br/>names(dat_summary) &lt;- c("Day of week", "Sum", "Mean")</span><span id="ed00" class="nj la it ne b gy no nl l nm nn"># display table<br/>dat_summary</span><span id="bc87" class="nj la it ne b gy no nl l nm nn">##   Day of week    Sum     Mean<br/>## 1      Monday 141115 2713.750<br/>## 2     Tuesday 143145 2752.788<br/>## 3   Wednesday 146472 2763.623<br/>## 4    Thursday 140712 2706.000<br/>## 5      Friday 128223 2465.827<br/>## 6    Saturday  85766 1649.346<br/>## 7      Sunday  90847 1747.058</span></pre><p id="b8b7" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">不出所料，与周末相比，工作日的读者更多。</p><p id="2616" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">可以对一年中的每个<strong class="lt iu">月</strong>而不是一周中的每一天进行相同的分析:</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="b921" class="nj la it ne b gy nk nl l nm nn"># get data<br/>gadata &lt;- google_analytics(view_id,<br/>  date_range = c(start_date, end_date),<br/>  metrics = "pageviews",<br/>  dimensions = c("month", "date"),<br/>  anti_sample = TRUE # slows down the request but ensures data isn't sampled<br/>)</span><span id="5b1b" class="nj la it ne b gy no nl l nm nn"># Boxplot<br/>gadata %&gt;%<br/>  ggplot(aes(x = month, y = pageviews)) +<br/>  geom_boxplot(fill = "steelblue") +<br/>  theme_minimal() +<br/>  labs(<br/>    y = "Page views",<br/>    x = "Month",<br/>    title = "Page views per month",<br/>    subtitle = paste0(format(start_date, "%b %d, %Y"), " to ", format(end_date, "%b %d, %Y")),<br/>    caption = "Data: Google Analytics data of statsandr.com"<br/>  ) +<br/>  scale_y_continuous(labels = scales::comma) # better y labels</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/2cea8873d23ccd9111a973a554e35ba5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zjDOGcRiOpWkGCd0.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="5e77" class="nj la it ne b gy nk nl l nm nn"># compute sum<br/>dat_sum &lt;- aggregate(pageviews ~ month,<br/>  data = gadata,<br/>  FUN = sum<br/>)</span><span id="bfc0" class="nj la it ne b gy no nl l nm nn"># compute mean<br/>dat_mean &lt;- aggregate(pageviews ~ month,<br/>  data = gadata,<br/>  FUN = mean<br/>)</span><span id="4703" class="nj la it ne b gy no nl l nm nn"># combine both in one table<br/>dat_summary &lt;- cbind(dat_sum, dat_mean[, 2])</span><span id="de35" class="nj la it ne b gy no nl l nm nn"># rename columns<br/>names(dat_summary) &lt;- c("Month", "Sum", "Mean")</span><span id="66a0" class="nj la it ne b gy no nl l nm nn"># display table<br/>dat_summary</span><span id="da6f" class="nj la it ne b gy no nl l nm nn">##    Month   Sum     Mean<br/>## 1     01 68534 2210.774<br/>## 2     02 80953 2891.179<br/>## 3     03 92629 2988.032<br/>## 4     04 88679 2955.967<br/>## 5     05 81739 2636.742<br/>## 6     06 64460 2148.667<br/>## 7     07 49772 1605.548<br/>## 8     08 46389 1496.419<br/>## 9     09 68046 2268.200<br/>## 10    10 79237 2556.032<br/>## 11    11 77745 2591.500<br/>## 12    12 78097 2519.258</span></pre><p id="ec9d" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">从图表和数字摘要中可以清楚地看出，我们的<a class="ae ky" href="https://statsandr.com/blog/what-is-the-difference-between-population-and-sample/" rel="noopener ugc nofollow" target="_blank">样本</a>中的页面浏览量在一周中的每一天和一年中的每个月都是不同的。</p><p id="a48e" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">如果你有兴趣更进一步，你可以随时执行一个<a class="ae ky" href="https://statsandr.com/blog/anova-in-r/" rel="noopener ugc nofollow" target="_blank"> ANOVA </a>来查看每天或每个月的页面浏览量是否有显著的<em class="nq">差异。</em></p><h1 id="69f3" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">每月和每年的页面访问量</h1><p id="3322" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果你有超过一年的数据，比较这些年来你每月博客的流量会很有用。</p><p id="e0c1" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">使用下面的代码，我们创建了一个<a class="ae ky" href="https://statsandr.com/blog/descriptive-statistics-in-r/#barplot" rel="noopener ugc nofollow" target="_blank">条形图</a>，显示每月<strong class="lt iu">和每年</strong>的日页面浏览量:</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="16f1" class="nj la it ne b gy nk nl l nm nn"># set new date range<br/>start_date_launch &lt;- as.Date("2019-12-16")</span><span id="93be" class="nj la it ne b gy no nl l nm nn"># get data<br/>df2 &lt;- google_analytics(view_id,<br/>  date_range = c(start_date_launch, end_date),<br/>  metrics = c("pageviews"),<br/>  dimensions = c("date"),<br/>  anti_sample = TRUE # slows down the request but ensures data isn't sampled<br/>)</span><span id="1891" class="nj la it ne b gy no nl l nm nn"># add in year month columns to dataframe<br/>df2$month &lt;- format(df2$date, "%m")<br/>df2$year &lt;- format(df2$date, "%Y")</span><span id="165a" class="nj la it ne b gy no nl l nm nn"># page views by month by year using dplyr then graph using ggplot2 barplot<br/>df2 %&gt;%<br/>  filter(year != 2019) %&gt;% # remove 2019 because there are data for December only<br/>  group_by(year, month) %&gt;%<br/>  summarize(pageviews = sum(pageviews)) %&gt;%<br/>  # print table steps by month by year<br/>  # print(n = 100) %&gt;%<br/>  # graph data by month by year<br/>  ggplot(aes(x = month, y = pageviews, fill = year)) +<br/>  geom_bar(position = "dodge", stat = "identity") +<br/>  theme_minimal() +<br/>  labs(<br/>    y = "Page views",<br/>    x = "Month",<br/>    title = "Page views per month and year",<br/>    subtitle = paste0(format(start_date_launch, "%b %d, %Y"), " to ", format(end_date, "%b %d, %Y")),<br/>    caption = "Data: Google Analytics data of statsandr.com"<br/>  ) +<br/>  scale_y_continuous(labels = scales::comma) # better y labels</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/d8e898df775addcc98bd14db0d15514c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sjHnVkic8-lPnLfq.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="ef84" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">这个柱状图可以很容易地看到几个月来页面浏览量的变化，但更重要的是，可以比较不同年份之间的变化。</p><h1 id="6120" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">表现最佳的页面</h1><p id="5d7d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">衡量你的博客或网站表现的另一个重要因素是每页的浏览量。</p><p id="5219" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">诚然，在谷歌分析中可以很容易地找到一年中页面浏览量最高的页面(你可以通过<code class="fe nb nc nd ne b">Behavior &gt; Site Content &gt; All pages</code>访问)。</p><p id="b0d0" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">然而，对于感兴趣的读者，这里是如何获得 R 中的数据(注意，您可以在下面的代码中更改<code class="fe nb nc nd ne b">n = 7</code>来更改要显示的最高性能页面的数量):</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="c91f" class="nj la it ne b gy nk nl l nm nn">## Make the request to GA<br/>data_fetch &lt;- google_analytics(view_id,<br/>  date_range = c(start_date, end_date),<br/>  metrics = c("pageviews"),<br/>  dimensions = c("pageTitle"),<br/>  anti_sample = TRUE # slows down the request but ensures data isn't sampled<br/>)</span><span id="5e40" class="nj la it ne b gy no nl l nm nn">## Create a table of the most viewed posts<br/>library(lubridate)<br/>library(reactable)<br/>library(stringr)</span><span id="30ed" class="nj la it ne b gy no nl l nm nn">most_viewed_posts &lt;- data_fetch %&gt;%<br/>  mutate(Title = str_trunc(pageTitle, width = 40)) %&gt;% # keep maximum 40 characters<br/>  count(Title, wt = pageviews, sort = TRUE)</span><span id="2bcc" class="nj la it ne b gy no nl l nm nn">head(most_viewed_posts, n = 7) # edit n for more or less pages to display</span><span id="57d6" class="nj la it ne b gy no nl l nm nn">##                                      Title      n<br/>## 1    Outliers detection in R - Stats and R 119747<br/>## 2 Descriptive statistics in R - Stats a... 109473<br/>## 3 Variable types and examples - Stats a...  83025<br/>## 4 Correlation coefficient and correlati...  65703<br/>## 5 Chi-square test of independence in R ...  62100<br/>## 6 The complete guide to clustering anal...  40440<br/>## 7                 ANOVA in R - Stats and R  32914</span></pre><p id="53c4" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">如果你和我一样喜欢可视化而不是表格，下面是如何在<a class="ae ky" href="https://statsandr.com/blog/descriptive-statistics-in-r/#barplot" rel="noopener ugc nofollow" target="_blank">柱状图</a>中画出表现最好的页面的表格:</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="e9a8" class="nj la it ne b gy nk nl l nm nn"># plot<br/>top_n(most_viewed_posts, n = 7, n) %&gt;% # edit n for more or less pages to display<br/>  ggplot(., aes(x = reorder(Title, n), y = n)) +<br/>  geom_bar(stat = "identity", fill = "steelblue") +<br/>  theme_minimal() +<br/>  coord_flip() +<br/>  labs(<br/>    y = "Page views",<br/>    x = "Page title",<br/>    title = "Top performing pages in terms of page views",<br/>    subtitle = paste0(format(start_date, "%b %d, %Y"), " to ", format(end_date, "%b %d, %Y")),<br/>    caption = "Data: Google Analytics data of statsandr.com"<br/>  ) +<br/>  scale_y_continuous(labels = scales::comma) + # better y labels<br/>  theme(plot.margin = unit(c(5.5, 17.5, 5.5, 5.5), "pt")) # to avoid the plot being cut on the right edge</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/e1f1d3c138f7a6728a23dd42908c8db6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3r7YJkdBpX38qepi.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="e940" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">这给了我一个很好的第一手概览，关于帖子在页面浏览量方面的表现，所以在某种意义上，人们发现什么是有用的。去年排名前三的文章是:</p><ol class=""><li id="1873" class="nr ns it lt b lu mw lx mx ma nt me nu mi nv mm nw nx ny nz bi translated"><a class="ae ky" href="https://statsandr.com/blog/outliers-detection-in-r/" rel="noopener ugc nofollow" target="_blank">R 中的异常值检测</a></li><li id="41b8" class="nr ns it lt b lu oa lx ob ma oc me od mi oe mm nw nx ny nz bi translated"><a class="ae ky" href="https://statsandr.com/blog/descriptive-statistics-in-r/" rel="noopener ugc nofollow" target="_blank">R 中的描述性统计</a></li><li id="ddf5" class="nr ns it lt b lu oa lx ob ma oc me od mi oe mm nw nx ny nz bi translated"><a class="ae ky" href="https://statsandr.com/blog/variable-types-and-examples/" rel="noopener ugc nofollow" target="_blank">变量类型和例子</a></li></ol><p id="b260" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">请注意，这个排名是基于过去 12 个月的总浏览量。因此，一篇最近的文章可能会出现在列表的底部，仅仅是因为它在比旧文章更短的时间段内收集了页面浏览量。因此，最好避免将最近的文章与旧文章进行比较，或者你可以在对页面浏览量进行“时间标准化”后再进行比较。请参见<a class="ae ky" href="https://statsandr.com/blog/track-blog-performance-in-r/#time-normalized-page-views" rel="noopener ugc nofollow" target="_blank">上一年的评估</a>，了解该指标的更多详情和图示。</p><p id="0d1d" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">你也可能有兴趣了解表现最差的人(以便最终改进他们或者将他们列入更高质量的帖子):</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="77d9" class="nj la it ne b gy nk nl l nm nn">tail(subset(most_viewed_posts, n &gt; 1000),<br/>  n = 7<br/>)</span><span id="e561" class="nj la it ne b gy no nl l nm nn">##                                       Title    n<br/>## 49 A guide on how to read statistical ta... 1477<br/>## 50                      About - Stats and R 1470<br/>## 51 How to embed a Shiny app in blogdown?... 1455<br/>## 52                   About me - Stats and R 1277<br/>## 53 One-proportion and chi-square goodnes... 1226<br/>## 54 Running pace calculator in R Shiny - ... 1049<br/>## 55                      Shiny - Stats and R 1018</span></pre><p id="902d" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">请注意，我有意排除了浏览量少于 1000 的页面，以便从排名中删除已删除或隐藏的页面。</p><p id="7c09" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">这个排名的另一个问题是，由于一些页面已经重复(例如，如果你编辑了标题)，它可能会有所偏差，但至少你对表现最差的页面有一个大致的了解。</p><h1 id="fb65" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">按国家列出的页面浏览量</h1><p id="c393" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">了解你的读者来自哪个国家对一些内容创作者或营销者来说也是很方便的。</p><p id="5c37" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">我的读者的位置对我来说并不重要，因为我打算为每个人写作，但如果你在卖东西或经营企业/电子商务，这可能完全相反。</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="de50" class="nj la it ne b gy nk nl l nm nn"># get GA data<br/>data_fetch &lt;- google_analytics(view_id,<br/>  date_range = c(start_date, end_date),<br/>  metrics = "pageviews",<br/>  dimensions = "country",<br/>  anti_sample = TRUE # slows down the request but ensures data isn't sampled<br/>)</span><span id="75ff" class="nj la it ne b gy no nl l nm nn"># table<br/>countries &lt;- data_fetch %&gt;%<br/>  mutate(Country = str_trunc(country, width = 40)) %&gt;% # keep maximum 40 characters<br/>  count(Country, wt = pageviews, sort = TRUE)</span><span id="e525" class="nj la it ne b gy no nl l nm nn">head(countries, n = 10) # edit n for more or less countries to display</span><span id="562f" class="nj la it ne b gy no nl l nm nn">##           Country      n<br/>## 1   United States 244752<br/>## 2           India  71797<br/>## 3  United Kingdom  53272<br/>## 4         Germany  38322<br/>## 5          Canada  33812<br/>## 6         Belgium  26421<br/>## 7       Australia  26225<br/>## 8     Philippines  23193<br/>## 9     Netherlands  21944<br/>## 10         Brazil  17956</span></pre><p id="eb87" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">同样，如果你更喜欢图表而不是表格，你可以在<a class="ae ky" href="https://statsandr.com/blog/descriptive-statistics-in-r/#barplot" rel="noopener ugc nofollow" target="_blank">条形图</a>中显示页面浏览量排名靠前的国家:</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="7523" class="nj la it ne b gy nk nl l nm nn"># plot<br/>top_n(countries, n = 10, n) %&gt;% # edit n for more or less countries to display<br/>  ggplot(., aes(x = reorder(Country, n), y = n)) +<br/>  geom_bar(stat = "identity", fill = "steelblue") +<br/>  theme_minimal() +<br/>  coord_flip() +<br/>  labs(<br/>    y = "Page views",<br/>    x = "Country",<br/>    title = "Top performing countries in terms of page views",<br/>    subtitle = paste0(format(start_date, "%b %d, %Y"), " to ", format(end_date, "%b %d, %Y")),<br/>    caption = "Data: Google Analytics data of statsandr.com"<br/>  ) +<br/>  scale_y_continuous(labels = scales::comma) + # better y labels<br/>  theme(plot.margin = unit(c(5.5, 7.5, 5.5, 5.5), "pt")) # to avoid the plot being cut on the right edge</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/5c7cca4043fd0f799adf40288dee4acd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VdzAefDjnEQ94TUW.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="c6df" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">我们看到很大一部分读者来自美国，而比利时(我的国家)在页面浏览量方面仅排在第六位。</p><p id="e476" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">请注意，由于不同国家的人数差异很大，如果您按绝对数值比较不同国家的页面浏览量，这个排名可能会隐藏一些见解。在去年回顾的<a class="ae ky" href="https://statsandr.com/blog/track-blog-performance-in-r/#page-views-by-country" rel="noopener ugc nofollow" target="_blank">部分</a>中可以看到原因。</p><h1 id="c0b4" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">设备的用户参与度</h1><p id="b1d1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">人们也可能有兴趣根据设备类型检查<strong class="lt iu">用户如何参与</strong>。为了对此进行研究，我们绘制了三张图表，描述了:</p><ol class=""><li id="3933" class="nr ns it lt b lu mw lx mx ma nt me nu mi nv mm nw nx ny nz bi translated">页面浏览量<strong class="lt iu">如何按设备类型分布？</strong></li><li id="2085" class="nr ns it lt b lu oa lx ob ma oc me od mi oe mm nw nx ny nz bi translated">按设备类型划分的第页上的<strong class="lt iu">平均时间(秒)</strong></li><li id="0127" class="nr ns it lt b lu oa lx ob ma oc me od mi oe mm nw nx ny nz bi translated">按设备类型划分的每个会话的<strong class="lt iu">页面浏览量</strong></li></ol><p id="2934" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">那么首先，页面浏览量是如何按设备类型分布的？</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="da27" class="nj la it ne b gy nk nl l nm nn"># GA data<br/>gadata &lt;- google_analytics(view_id,<br/>  date_range = c(start_date, end_date),<br/>  metrics = c("pageviews", "avgTimeOnPage"),<br/>  dimensions = c("date", "deviceCategory"),<br/>  anti_sample = TRUE # slows down the request but ensures data isn't sampled<br/>)</span><span id="b753" class="nj la it ne b gy no nl l nm nn"># plot pageviews by deviceCategory<br/>gadata %&gt;%<br/>  ggplot(aes(deviceCategory, pageviews)) +<br/>  geom_bar(aes(fill = deviceCategory), stat = "identity") +<br/>  theme_minimal() +<br/>  labs(<br/>    y = "Page views",<br/>    x = "",<br/>    title = "Page views per device",<br/>    subtitle = paste0(format(start_date, "%b %d, %Y"), " to ", format(end_date, "%b %d, %Y")),<br/>    caption = "Data: Google Analytics data of statsandr.com",<br/>    fill = "Device" # edit legend title<br/>  ) +<br/>  scale_y_continuous(labels = scales::comma) # better y labels</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/f95edb765e2f5aed7ba4099d3288a12c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FdFIAccryTWucetf.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="ea9a" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">从上面的图中，我们看到大多数读者从桌面上访问博客，只有很小一部分来自平板电脑。</p><p id="4d2f" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">这是有意义的，因为我猜想许多访问者在使用 R(只在桌面上可用)的同时阅读我的文章或教程。</p><p id="5a18" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">然而，每种设备类型的总页面浏览量信息并不能告诉我在每个页面上花费的时间，因此也不能告诉我每种设备类型的参与度。以下情节回答了这个问题:</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="6e8f" class="nj la it ne b gy nk nl l nm nn"># add median of average time on page per device<br/>gadata &lt;- gadata %&gt;%<br/>  group_by(deviceCategory) %&gt;%<br/>  mutate(med = median(avgTimeOnPage))</span><span id="23a2" class="nj la it ne b gy no nl l nm nn"># plot avgTimeOnPage by deviceCategory<br/>ggplot(gadata) +<br/>  aes(x = avgTimeOnPage, fill = deviceCategory) +<br/>  geom_histogram(bins = 30L) +<br/>  scale_fill_hue() +<br/>  theme_minimal() +<br/>  theme(legend.position = "none") +<br/>  facet_wrap(vars(deviceCategory)) +<br/>  labs(<br/>    y = "Frequency",<br/>    x = "Average time on page (in seconds)",<br/>    title = "Average time on page per device",<br/>    subtitle = paste0(format(start_date, "%b %d, %Y"), " to ", format(end_date, "%b %d, %Y")),<br/>    caption = "Data: Google Analytics data of statsandr.com"<br/>  ) +<br/>  scale_y_continuous(labels = scales::comma) + # better y labels<br/>  geom_vline(aes(xintercept = med, group = deviceCategory),<br/>    color = "darkgrey",<br/>    linetype = "dashed"<br/>  ) +<br/>  geom_text(aes(<br/>    x = med, y = 125,<br/>    label = paste0("Median = ", round(med), " seconds")<br/>  ),<br/>  angle = 90,<br/>  vjust = 3,<br/>  color = "darkgrey",<br/>  size = 3<br/>  )</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/80ea45b5a0fb01b56db3ca8473bdfb63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nqfXDanFQQ9CpQaS.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="a6a6" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">从上面的图中，我们看到:</p><ul class=""><li id="8416" class="nr ns it lt b lu mw lx mx ma nt me nu mi nv mm of nx ny nz bi translated">大多数来自平板电脑的读者实际上很快就离开了页面(参见平板电脑方面 0 秒左右的峰值)。</li><li id="1b3f" class="nr ns it lt b lu oa lx ob ma oc me od mi oe mm of nx ny nz bi translated">台式机和移动设备上的读者平均浏览时间分布非常相似，平均浏览时间大多在 125 秒(= 2 分 5 秒)到 375 秒(= 6 分 15 秒)之间。</li><li id="2543" class="nr ns it lt b lu oa lx ob ma oc me od mi oe mm of nx ny nz bi translated">非常令人惊讶的是，访客在移动设备上花费在页面上的平均时间的<a class="ae ky" href="https://statsandr.com/blog/descriptive-statistics-in-r/#median" rel="noopener ugc nofollow" target="_blank">中值</a>略高于桌面上的(中值=移动设备上 316 秒，桌面上 266 秒，参见代表桌面和移动设备中值的垂直虚线)。这表明，尽管更多的人从桌面访问博客(如设备的总页面浏览量所示)，但似乎移动设备上的人每页花费的时间更多。我发现这个结果非常令人惊讶，因为我的大多数文章都包含 R 代码，并且需要一台计算机来运行这些代码。因此，我认为人们在桌面上花的时间会比在移动设备上多，因为在移动设备上他们会快速浏览文章，而在桌面上他们会更仔细地阅读文章，并试图在自己的电脑上复制代码。至少我在手机上阅读博客和在桌面上阅读博客时是这样做的。更耐人寻味的是，去年<a class="ae ky" href="https://statsandr.com/blog/track-blog-performance-in-r/#user-engagement-by-devices" rel="noopener ugc nofollow" target="_blank"/>就已经是这样了。如果有人发现类似的结果，并有一个可能的解释，我会很高兴听到她的意见(如果可能的话，在文章结尾的评论中，这样每个人都可以从讨论中受益)。</li><li id="b8a6" class="nr ns it lt b lu oa lx ob ma oc me od mi oe mm of nx ny nz bi translated">顺便提一句，我们看到今年的中位数比去年高(2021 年分别为 266、316 和 114 秒，而 2020 年在桌面、移动和平板电脑上分别为 190、228 和 106 秒)。这多少有些令人鼓舞，因为这表明人们在每个页面上花费了更多的时间(这至少部分表明了谷歌博客的质量)。<a class="ae ky" href="https://statsandr.com/blog/statsandr-is-2-years-old/#fn1" rel="noopener ugc nofollow" target="_blank"> 1 </a></li></ul><p id="94e2" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">鉴于这一结果，我也相信通过设备类型来说明一个会话期间页面浏览的<strong class="lt iu">数量</strong>是有帮助的。</p><p id="d1a3" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">事实上，可能是这样的情况，移动设备上的访问者平均在每个页面上花费更多的时间<em class="nq">，但是桌面上的人每次会话访问更多的页面</em>(记住，会话是在给定的时间框架内发生的与你的网站的一组交互)。</p><p id="f93d" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">我们通过<a class="ae ky" href="https://statsandr.com/blog/descriptive-statistics-in-r/#density-plot" rel="noopener ugc nofollow" target="_blank">密度图</a>验证了这一观点，为了提高可读性，我们排除了平板电脑的访问:</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="9550" class="nj la it ne b gy nk nl l nm nn"># GA data<br/>gadata &lt;- google_analytics(view_id,<br/>  date_range = c(start_date, end_date),<br/>  metrics = c("pageviewsPerSession"),<br/>  dimensions = c("date", "deviceCategory"),<br/>  anti_sample = TRUE # slows down the request but ensures data isn't sampled<br/>)</span><span id="7fcd" class="nj la it ne b gy no nl l nm nn"># add median of number of page views/session<br/>gadata &lt;- gadata %&gt;%<br/>  group_by(deviceCategory) %&gt;%<br/>  mutate(med = median(pageviewsPerSession))</span><span id="680e" class="nj la it ne b gy no nl l nm nn">## Reordering gadata$deviceCategory<br/>gadata$deviceCategory &lt;- factor(gadata$deviceCategory,<br/>  levels = c("mobile", "desktop", "tablet")<br/>)</span><span id="c4d0" class="nj la it ne b gy no nl l nm nn"># plot pageviewsPerSession by deviceCategory<br/>gadata %&gt;%<br/>  filter(deviceCategory != "tablet") %&gt;% # filter out pageviewsPerSession &gt; 2.5 and visits from tablet<br/>  ggplot(aes(x = pageviewsPerSession, fill = deviceCategory, color = deviceCategory)) +<br/>  geom_density(alpha = 0.5) +<br/>  scale_fill_hue() +<br/>  theme_minimal() +<br/>  labs(<br/>    y = "Frequency",<br/>    x = "Page views per session",<br/>    title = "Page views per session by device",<br/>    subtitle = paste0(format(start_date, "%b %d, %Y"), " to ", format(end_date, "%b %d, %Y")),<br/>    caption = "Data: Google Analytics data of statsandr.com\nDashed lines represent the medians",<br/>    color = "Device", # edit legend title<br/>    fill = "Device" # edit legend title<br/>  ) +<br/>  scale_y_continuous(labels = scales::comma) + # better y labels<br/>  geom_vline(aes(xintercept = med, group = deviceCategory, color = deviceCategory),<br/>    linetype = "dashed",<br/>    show.legend = FALSE # remove legend<br/>  )</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/b8191269ac652f9f5ec1652e9c724e9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LAeEHazbJvjdALG1.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="3c18" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">最后一幅图显示，桌面和移动设备上的读者每次访问的页面数量大致相同，这可以从这两种分布相互重叠且相距不远的事实中看出。的确，使用台式机的人比使用移动设备的人的中位数要高，但差距很小(而且两者之间的差距比去年的调查要小)。</p><p id="0d65" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">总结一下我们从最后三幅图中学到的东西，我们现在知道:</p><ul class=""><li id="a955" class="nr ns it lt b lu mw lx mx ma nt me nu mi nv mm of nx ny nz bi translated">大多数读者从桌面访问博客；</li><li id="6dd3" class="nr ns it lt b lu oa lx ob ma oc me od mi oe mm of nx ny nz bi translated">移动设备上的读者在每个页面上花费的时间比桌面上的读者多(甚至比平板上的读者更多)；</li><li id="7fb4" class="nr ns it lt b lu oa lx ob ma oc me od mi oe mm of nx ny nz bi translated">台式机和移动设备上的用户似乎每个会话访问了大约相同数量的页面。</li></ul><p id="f1d1" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">有人可能想知道为什么我选择比较中位数而不是平均值。主要原因是中位数是一种更稳健的方式来表示<a class="ae ky" href="https://statsandr.com/blog/do-my-data-follow-a-normal-distribution-a-note-on-the-most-widely-used-distribution-and-how-to-test-for-normality-in-r/" rel="noopener ugc nofollow" target="_blank">非正态</a>数据。对于感兴趣的读者，请参阅关于平均值和中值之间的<a class="ae ky" href="https://statsandr.com/blog/descriptive-statistics-by-hand/#mean-vs.-median" rel="noopener ugc nofollow" target="_blank">差异的注释</a>，以及每种度量更合适的上下文。</p><p id="3ebb" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">如果你想更进一步，你也可以执行一个学生的 t-test 来测试每个会话的平均页面浏览量在移动和桌面组之间是否有显著的差异。</p><h1 id="7cea" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">浏览器信息</h1><p id="09bf" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">从更技术性的角度来看，您可能还对浏览器的<strong class="lt iu">页面浏览量感兴趣。我个人并不真的想知道我的访问者使用最多的是哪种浏览器(主要是因为这个博客可以在所有常见的浏览器上使用)，但你们中最极客的可能就是这样。</strong></p><p id="070a" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">该信息可通过以下<a class="ae ky" href="https://statsandr.com/blog/descriptive-statistics-in-r/#barplot" rel="noopener ugc nofollow" target="_blank">柱状图</a>可视化:</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="c248" class="nj la it ne b gy nk nl l nm nn"># get data<br/>browser_info &lt;- google_analytics(view_id,<br/>  date_range = c(start_date, end_date),<br/>  metrics = c("pageviews"),<br/>  dimensions = c("browser"),<br/>  anti_sample = TRUE # slows down the request but ensures data isn't sampled<br/>)</span><span id="66e5" class="nj la it ne b gy no nl l nm nn"># table<br/>browser &lt;- browser_info %&gt;%<br/>  mutate(Browser = str_trunc(browser, width = 40)) %&gt;% # keep maximum 40 characters<br/>  count(Browser, wt = pageviews, sort = TRUE)</span><span id="13c8" class="nj la it ne b gy no nl l nm nn"># plot<br/>top_n(browser, n = 10, n) %&gt;% # edit n for more or less browser to display<br/>  ggplot(., aes(x = reorder(Browser, n), y = n)) +<br/>  geom_bar(stat = "identity", fill = "steelblue") +<br/>  theme_minimal() +<br/>  coord_flip() +<br/>  labs(<br/>    y = "Page views",<br/>    x = "Browser",<br/>    title = "Which browsers are our visitors using?",<br/>    subtitle = paste0(format(start_date, "%b %d, %Y"), " to ", format(end_date, "%b %d, %Y")),<br/>    caption = "Data: Google Analytics data of statsandr.com"<br/>  ) +<br/>  scale_y_continuous(labels = scales::comma) # better y labels</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/6d09272f2530e8a0286cd375d9a521f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1txp3pcf6axc5FOV.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="45a8" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">大多数读者使用<em class="nq"> Chrome </em>、<em class="nq"> Safari </em>和<em class="nq"> Firefox </em>访问该网站(这是意料之中的，因为它们是最常见的浏览器)。</p><p id="a33e" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">这是本次审查中展示的最后一个指标。当然，更多的可能性取决于你的 R 技能(主要是，<a class="ae ky" href="https://statsandr.com/blog/data-manipulation-in-r/" rel="noopener ugc nofollow" target="_blank">数据操作</a>和<code class="fe nb nc nd ne b"><a class="ae ky" href="https://statsandr.com/blog/graphics-in-r-with-ggplot2/" rel="noopener ugc nofollow" target="_blank">{ggplot2}</a></code>)以及你在 SEO 或分析谷歌分析数据方面的专业知识。希望，感谢这篇评论，也可能来自去年的<a class="ae ky" href="https://statsandr.com/blog/track-blog-performance-in-r/" rel="noopener ugc nofollow" target="_blank"/>，你将能够使用 R 和<code class="fe nb nc nd ne b">{googleAnalyticsR}</code>包分析你自己的博客或网站。至少，这是本文的目的。</p><p id="01c8" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">对于那些对更简洁的分析感兴趣的人，请看我的<a class="ae ky" href="https://statsandr.com/blog/files/google-analytics-dashboard/" rel="noopener ugc nofollow" target="_blank">自定义谷歌分析仪表板</a>。<a class="ae ky" href="https://statsandr.com/blog/statsandr-is-2-years-old/#fn2" rel="noopener ugc nofollow" target="_blank"> 2 </a></p><h1 id="c56a" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结束注释</h1><p id="995e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我还想补充一点，这些数字不是用来比较的。每个网站或博客都是独一无二的，每个作者都是独一无二的(有不同的优先级和不同的议程)，而且越多并不总是越好。感谢这个博客，我学到了很多东西，我把它用于个人目的<a class="ae ky" href="https://statsandr.com/blog/7-benefits-of-sharing-your-code-in-a-data-science-blog/#personal-note-to-remind-my-future-self" rel="noopener ugc nofollow" target="_blank">和我的学生，作为我教学任务的一部分。只要我喜欢，只要我有时间，我就会继续写下去，不管点击量多低或多高。</a></p><p id="0e2b" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">感谢过去一年的所有读者，一年后再会！与此同时，如果你保持博客，我会很高兴听到你如何跟踪它的表现。</p><p id="475d" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">和往常一样，如果您有与本文主题相关的问题或建议，请将其添加为评论，以便其他读者可以从讨论中受益。</p></div><div class="ab cl og oh hx oi" role="separator"><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol"/></div><div class="im in io ip iq"><ol class=""><li id="537b" class="nr ns it lt b lu mw lx mx ma nt me nu mi nv mm nw nx ny nz bi translated">在每个页面上花更多的时间对谷歌来说是一个有利因素，因为这意味着人们会更仔细地阅读它。如果博客或帖子质量一般，用户往往会很快反弹(被称为反弹率)，并在其他地方寻找问题的答案(最终导致在页面或网站上花费的时间更少)。<a class="ae ky" href="https://statsandr.com/blog/statsandr-is-2-years-old/#fnref1" rel="noopener ugc nofollow" target="_blank"> ↩︎ </a></li><li id="939c" class="nr ns it lt b lu oa lx ob ma oc me od mi oe mm nw nx ny nz bi translated">感谢<a class="ae ky" href="https://blog.rstudio.com/2021/01/06/google-analytics-part2/" rel="noopener ugc nofollow" target="_blank"> RStudio 博客</a>的启发。<a class="ae ky" href="https://statsandr.com/blog/statsandr-is-2-years-old/#fnref2" rel="noopener ugc nofollow" target="_blank"> ↩︎ </a></li></ol><h1 id="e5a0" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">相关文章</h1><ul class=""><li id="1a8f" class="nr ns it lt b lu lv lx ly ma on me oo mi op mm of nx ny nz bi translated"><a class="ae ky" href="https://statsandr.com/blog/track-blog-performance-in-r/" rel="noopener ugc nofollow" target="_blank">如何在 R 中跟踪自己博客的表现？</a></li><li id="151a" class="nr ns it lt b lu oa lx ob ma oc me od mi oe mm of nx ny nz bi translated"><a class="ae ky" href="https://statsandr.com/blog/7-benefits-of-sharing-your-code-in-a-data-science-blog/" rel="noopener ugc nofollow" target="_blank">为什么我有一个数据科学博客？分享代码的 7 个好处</a></li><li id="4882" class="nr ns it lt b lu oa lx ob ma oc me od mi oe mm of nx ny nz bi translated"><a class="ae ky" href="https://statsandr.com/blog/graphics-in-r-with-ggplot2/" rel="noopener ugc nofollow" target="_blank">R 中的图形与 ggplot2 </a></li><li id="5297" class="nr ns it lt b lu oa lx ob ma oc me od mi oe mm of nx ny nz bi translated"><a class="ae ky" href="https://statsandr.com/blog/mortgage-calculator-r-shiny/" rel="noopener ugc nofollow" target="_blank">R 闪亮中的抵押贷款计算器</a></li><li id="34da" class="nr ns it lt b lu oa lx ob ma oc me od mi oe mm of nx ny nz bi translated"><a class="ae ky" href="https://statsandr.com/blog/how-to-publish-shiny-app-example-with-shinyapps-io/" rel="noopener ugc nofollow" target="_blank">如何发布闪亮的应用程序:以 shinyapps.io 为例</a></li></ul></div><div class="ab cl og oh hx oi" role="separator"><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol"/></div><div class="im in io ip iq"><p id="075e" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><em class="nq">原载于 2021 年 12 月 16 日</em><a class="ae ky" href="https://statsandr.com/blog/statsandr-is-2-years-old/" rel="noopener ugc nofollow" target="_blank"><em class="nq">https://statsandr.com</em></a>T22。</p></div></div>    
</body>
</html>