<html>
<head>
<title>The Three Types of Missing Data Every Data Professional Should Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">每个数据专家都应该知道的三种缺失数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-three-types-of-missing-data-every-data-professional-should-know-d988e17d6ace?source=collection_archive---------28-----------------------#2021-07-04">https://towardsdatascience.com/the-three-types-of-missing-data-every-data-professional-should-know-d988e17d6ace?source=collection_archive---------28-----------------------#2021-07-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="1475" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">数据科学。分析。数据工程。</h2><div class=""/><div class=""><h2 id="3064" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">以及了解它们的重要性</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/33399085ba16a93303fbc5f397bb090e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0Qy4xRnAjwH0jx5B"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://unsplash.com/@two_tees?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">迈特·沃尔什</a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h1 id="42fb" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">介绍</h1><p id="a8a0" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">如果你问数据科学家，他们希望避免但无法避免的一个数据问题是什么，很可能他们都会回答缺失数据。</p><blockquote class="mw mx my"><p id="5467" class="ma mb mz mc b md na kd mf mg nb kg mi nc nd ml mm ne nf mp mq ng nh mt mu mv im bi translated">你知道他们是怎么说的吗，生命中唯一确定的事情就是死亡和税收？对于数据科学家来说，缺失数据可能是第三大问题。</p></blockquote><p id="83d0" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">一般来说，缺失数据会限制我们的机器学习(ML)模型的有效性，尤其是在应用于现实世界的用例时。</p><p id="c32f" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">如果我们仔细想想，让ML模型变得更好的最受欢迎的建议之一是获得更多的数据和更多的观察。因此，如果缺失数据起到相反的作用，也就不足为奇了:削弱模型，模糊我们试图解释或解决的现象。</p><p id="e2ab" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">在《缺失数据:一个温和的介绍》一书中，三位作者收集了数据，发现缺失数据不仅在三年出版的期刊(<strong class="mc jd"> <em class="mz">没错，出版期刊</em> </strong>)中普遍存在，而且据估计平均缺失数据量超过30%。</p><p id="5363" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">因此，是时候让我们投入一些资源来讨论缺失数据，并提出适当的应对措施了。</p><p id="ad79" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">虽然处理缺失数据的常见方法是简单的删除或简单的插补，但这些解决方案并不总是合适的。以数据删除为例，您可能实际删除了高达30%的数据，降低了数据集的统计能力，尤其是对于小数据。</p><p id="e888" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">本文是介绍，也是讨论缺失数据处理的系列文章的第一篇。</p><h1 id="5bc5" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">缺失数据的三种类型</h1><h2 id="7d41" class="ni lj it bd lk nj nk dn lo nl nm dp ls mj nn no lu mn np nq lw mr nr ns ly iz bi translated"><strong class="ak">模拟数据集:体重管理数据集</strong></h2><p id="bc25" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">为了帮助我们理解缺失数据，生成一些我们可以使用的模拟数据将会很有帮助。</p><pre class="ks kt ku kv gt nt nu nv nw aw nx bi"><span id="913a" class="ni lj it nu b gy ny nz l oa ob">#PRELIMINARIES<br/>import random<br/>import numpy as np<br/>import pandas as pd</span><span id="0ba9" class="ni lj it nu b gy oc nz l oa ob">from numpy import random</span></pre><p id="380e" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">假设我们的数据集将与一个<strong class="mc jd">体重管理程序</strong>有关，在该程序中获取初始体重(lbs 中的<em class="mz">)。让我们不要讨论一个人实际上可以安全地失去多少，但为了说明的目的，让我们假设这些都是可能的。</em></p><p id="2769" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">在接下来的两个月里，随后测量体重。</p><pre class="ks kt ku kv gt nt nu nv nw aw nx bi"><span id="6a89" class="ni lj it nu b gy ny nz l oa ob">#INITIAL WEIGHTS<br/>random.seed(19)<br/>initial_weights = random.normal(150,30,10)</span></pre><p id="2392" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">在计划的第一个月之后，让参与者的体重为:</p><pre class="ks kt ku kv gt nt nu nv nw aw nx bi"><span id="66ec" class="ni lj it nu b gy ny nz l oa ob">random.seed(20)<br/>first_weigh_in = random.normal(145,20,10)</span></pre><p id="6f23" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">因此，我们现在拥有的是一个包含初始权重和第一个月权重的数据集。由于我们对数字生成进行了随机化，我们观察到第一个月的体重低于第一个月(表示体重下降)，以及第一个月的体重高于第一个月(表示体重增加)。</p><p id="9e5e" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">对于第二个月——称重，让我们假设那些减肥的人决心继续减肥，因此更有可能减掉更多的体重(大约3到5公斤),或者如果他们增加了一些体重，也只是少量的(大约1到2公斤)。</p><p id="4556" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">然而，那些体重增加的人要么没有动力，反而增加了更多，要么受到减肥者的鼓舞，因此开始减肥。</p><p id="4e17" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">我们可以将这种关系编码如下:</p><pre class="ks kt ku kv gt nt nu nv nw aw nx bi"><span id="3617" class="ni lj it nu b gy ny nz l oa ob">first_month_diff = first_weigh_in - initial_weights</span><span id="6d7f" class="ni lj it nu b gy oc nz l oa ob">second_weigh_in = [None] * 10</span><span id="1af0" class="ni lj it nu b gy oc nz l oa ob">random.seed(21)<br/>for i in range(len(first_month_diff)):<br/>    if first_month_diff[i] &gt; 0:<br/>        second_weigh_in[i] = first_weigh_in[i] + random.randint(-3,7)<br/>    else:<br/>        second_weigh_in[i] = first_weigh_in[i] + random.randint(-5,3)</span></pre><p id="9332" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">让我们来看看我们的完整数据集:</p><pre class="ks kt ku kv gt nt nu nv nw aw nx bi"><span id="975c" class="ni lj it nu b gy ny nz l oa ob">df = pd.DataFrame({"Initial":initial_weights,<br/>                  "First Month": first_weigh_in,<br/>                  "Second Month": second_weigh_in})<br/>df</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi od"><img src="../Images/364edeb9b5a7698b976e37dd8ebb02b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/1*DfSies8rOxyFUbidzTpGvQ.png"/></div></figure><p id="1be7" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">看看我们的数据集，试着记住哪些参与者(1-10)在几个月内体重持续下降，哪些增加了。</p><h2 id="0985" class="ni lj it bd lk nj nk dn lo nl nm dp ls mj nn no lu mn np nq lw mr nr ns ly iz bi translated">模拟三种缺失数据机制</h2><p id="1eb8" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">为了使这个模拟有意义，<strong class="mc jd">我们将在“第二个月称重”观察中应用三种不同的机制</strong>。</p><p id="b880" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">因此，对于每个机制，<strong class="mc jd">可获得初始称重和第一个月称重观测值</strong>。</p><h2 id="f124" class="ni lj it bd lk nj nk dn lo nl nm dp ls mj nn no lu mn np nq lw mr nr ns ly iz bi translated">第一类:完全随机失踪(MCAR)</h2><p id="2fc0" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">完全随机缺失是一种由于<strong class="mc jd">完全随机原因</strong>导致数据缺失的机制；对于数据可能丢失的原因，没有特定的结构。</p><p id="0ad5" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">例如，很有可能在第二个月的称重期间，一名参与者碰巧生病而错过了称重。也有可能是与你正在研究或测量的现象完全无关的事情，比如去健身房/测量中心的路上发生了汽车故障。其他原因包括数据管理，例如意外删除。</p><p id="c6dd" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">这是最简单的编码机制:</p><pre class="ks kt ku kv gt nt nu nv nw aw nx bi"><span id="f4bc" class="ni lj it nu b gy ny nz l oa ob">random.seed(25)<br/>df["MCAR"] = random.binomial(1,0.5, size=10)*df['Second Month']<br/>df["MCAR"] = df["MCAR"].replace(0, np.nan)<br/>df</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/7e647ecce42e683016995e6eb18a1787.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*tSuyylR1464I0vT_Wsdzww.png"/></div></figure><h2 id="43b5" class="ni lj it bd lk nj nk dn lo nl nm dp ls mj nn no lu mn np nq lw mr nr ns ly iz bi translated">类型2:随机缺失(MAR)</h2><p id="a8a8" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">例如，假设体重增加的人在第一个月没有减肥，反而变得没有动力，并故意不在第二个月的称重中出现。</p><p id="7038" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">也就是说，这对于MAR来说是很重要的一点:<strong class="mc jd">最初和第一个月的观察结果决定了第二个月的观察结果是否会缺失</strong>。</p><p id="1e3d" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">这种系统关系可以编码如下:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi of"><img src="../Images/18cd669bfd2a798f75450cfc9fbbb48c.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/format:webp/1*bN-GUJjflnplkkpbxcSMpg.png"/></div></figure><p id="b20e" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated"><strong class="mc jd">请注意，数据缺失并不取决于第二个月的权重值本身</strong>。例如，如果你看一下10号人，他在第二次称重时体重减轻了一些，但是因为我们只看最初的和第一次称重的信息，他从来没有机会发现并选择不测量这些信息。</p><h2 id="397d" class="ni lj it bd lk nj nk dn lo nl nm dp ls mj nn no lu mn np nq lw mr nr ns ly iz bi translated">类型3:非随机缺失</h2><p id="41c9" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">现在，这就变得有点棘手了。假设在第二个月有所增加的人没有参加第二个月的称重。</p><p id="0ce0" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">在这种情况下，<strong class="mc jd">数据丢失的概率与丢失数据本身的价值直接相关</strong>。我们称这种数据为“非随机缺失”或MNAR数据。</p><p id="5e77" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">与MAR不同，其中丢失的概率与<strong class="mc jd">其他观测数据</strong>相关，MNAR具有与丢失的观测数据本身直接相关的结构<strong class="mc jd">。</strong></p><p id="3380" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">以下结构可以编码如下:</p><pre class="ks kt ku kv gt nt nu nv nw aw nx bi"><span id="54c6" class="ni lj it nu b gy ny nz l oa ob">random.seed(34)<br/>df["MNAR"] = [df["Second Month"][i]*random.binomial(1,(1/(df["Second Month"][i]*4/df["First Month"][i]))) if (df["Second Month"][i]- df["First Month"][i] &gt; 0) else df["Second Month"][i]\<br/>for i in range(10)]</span><span id="e78b" class="ni lj it nu b gy oc nz l oa ob">df["MNAR"] = df["MNAR"].replace(0, np.nan)<br/>df</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi og"><img src="../Images/85946ce69c810c51cccf4c3b9b03aa2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*4zuXq9tXXzB70dUA8aDZ0Q.png"/></div></figure><p id="8109" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">在我们考虑的三种机制中，MNAR造成了最难克服的情况。</p><p id="963e" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">如果你仔细观察我们建立的关系，我们会发现在第二个月增加的体重越多，在第二个月的称重中丢失的概率就越高。</p><blockquote class="mw mx my"><p id="c6e0" class="ma mb mz mc b md na kd mf mg nb kg mi nc nd ml mm ne nf mp mq ng nh mt mu mv im bi translated"><strong class="mc jd">但是棘手的部分实际上是这样的:数据科学家不知道这种关系的知识，因为没有观察到这些。</strong></p></blockquote><p id="d21b" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">因此，这是对MAR和MNAR之间的观察结果进行分类的挑战:要分类为MNAR，必须确定<strong class="mc jd">丢失变量和丢失它的概率</strong>之间的关系，但是对于MAR，可以<strong class="mc jd">通过单独查看观察到的可用数据</strong>来建立这种关系。</p><h1 id="e00a" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated"><strong class="ak">最终数据集</strong></h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/babd657ff19fe9b9b5c72e97a8f505a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*jfjaMhKAwKVT-2jYm7szWA.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">在我的Github页面上找到的增强表格可视化的代码</p></figure><h1 id="8205" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">结束语</h1><p id="36f6" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">对于研究人员来说，缺失数据类似于税收和死亡；它们不可避免。本文向我们介绍了三种类型的缺失数据，它们主要由控制缺失的机制(或结构)来识别。</p><p id="5b7c" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">确定数据缺失的机制非常重要，因为并非所有类型都可以被忽略。例如，在MCAR和马尔那里，缺失可以被忽略，对我们正在研究的现象几乎没有影响。</p><p id="c66a" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">然而，对于MNAR，不正确地认识这些将导致有偏见的研究和在现实世界应用中不太有效的模型。</p><p id="8557" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">虽然没有放之四海而皆准的解决方案，但根据缺失的基本机制，可以采用一系列技术来处理缺失数据。例如，处理缺失数据最常用的方法:删除，可能仅适用于MCAR数据集。平均值和中间值插补可能适用于MCAR和马尔</p><p id="39eb" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">在本系列的下一篇文章中，我们将讨论如何像专家一样处理丢失的数据。</p><p id="005e" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/handling-missing-data-like-a-pro-part-1-deletion-methods-9f451b475429">像专家一样处理“缺失数据”——第一部分——删除方法</a></p><p id="4e09" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/handling-missing-data-like-a-pro-part-2-imputation-methods-eabbf10b9ce4">像专家一样处理“缺失数据”——第2部分:插补方法</a></p><p id="03d1" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/handling-missing-data-like-a-pro-part-3-model-based-multiple-imputation-methods-bdfe85f93087">像专家一样处理“缺失数据”——第3部分:基于模型的&amp;多重插补方法</a></p><p id="e4c4" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">让我知道你们的想法！</p><p id="58f5" class="pw-post-body-paragraph ma mb it mc b md na kd mf mg nb kg mi mj nd ml mm mn nf mp mq mr nh mt mu mv im bi translated">模拟的完整代码在我的<a class="ae lh" href="https://github.com/francisadrianviernes/Data-Preprocessing-and-Feature-Engineering/blob/master/Simulating%20Missing%20Data.ipynb" rel="noopener ugc nofollow" target="_blank"> Github页面</a>找到。</p><h1 id="8cdc" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">参考</h1><p id="9501" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">麦克奈特，P. E. (2007)。<em class="mz">缺失数据:温柔的介绍</em>。吉尔福德出版社。</p></div></div>    
</body>
</html>