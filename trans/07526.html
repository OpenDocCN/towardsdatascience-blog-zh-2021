<html>
<head>
<title>Substituting Missing Data with the Group Average: Why It’s Good to Be Cautious</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用群体平均值替代缺失数据:为什么要谨慎</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/substituting-missing-data-with-the-group-average-why-its-good-to-be-cautious-d64bead7a029?source=collection_archive---------19-----------------------#2021-07-09">https://towardsdatascience.com/substituting-missing-data-with-the-group-average-why-its-good-to-be-cautious-d64bead7a029?source=collection_archive---------19-----------------------#2021-07-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a90b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">分类平均法可能比LOCF法或整体平均法更好，但这种方法有一些弱点，会影响你的结论。</h2></div><p id="c1f3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">休伊·费恩·泰</p><p id="7c93" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">和格雷格·佩奇一起</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/0012985886f8e58b760d95711dd8bc82.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/format:webp/1*A52Ca7q6ekhUOCS5M0zaCA.png"/></div><p class="lj lk gj gh gi ll lm bd b be z dk translated">约瑟芬·加塞在<a class="ae ln" href="https://unsplash.com/s/photos/tennis?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="c049" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">网球巨星安德烈·阿加西已经习惯了炎热的天气。他在拉斯维加斯长大，那里的夏季平均气温高达39至41摄氏度(102至105华氏度)。</p><p id="e399" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，当一个适应了亚热带沙漠气候的人把澳大利亚墨尔本枯萎的夏天描述成一个“巨大的窑”时，这意味着一些事情。</p><p id="5d5f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在2020年澳大利亚网球公开赛期间，有一些惩罚的日子。例如，1月31日，气温高达42.9摄氏度(109华氏度)。但是，如果气象局的历史记录中没有这个值，并且没有其他方法可以找到，你就不会知道这一点。如果该年2月7日和其他72天的数据丢失，您将面临更多的问题。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/9b1799987bccc88525a9e8f550c0fb3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:546/format:webp/1*n4j83vfrKkcbUwxdvVSw4w.png"/></div></figure><p id="5c58" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然这是一个极不可能的场景，但是有几种方法可以用来对那些丢失的值进行最可能的猜测。</p><p id="1156" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae ln" href="https://hftdata.medium.com/when-a-crazy-wind-wipes-away-our-records-what-do-you-do-a9f2aab3dc17" rel="noopener"> <strong class="kh ir">在之前的一篇文章</strong> </a>中，我介绍了另外两种插补方法:最后一次观察结转(LOCF)法，以及用整体数据集均值替换。在这里，我将演示另一种方法:用特定的组平均值来估算缺失值。</p><p id="a452" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与使用整个数据集的平均值相比，使用特定组的平均值进行插补是一种更精确的方法。就像侦探在试图解决一个谜时会整合可用的线索一样，数据分析师可以使用组平均值来对替代NAs的可能价值做出更合理的估计。</p><p id="bbdf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，假设我们有大学学生的记录，这些记录的属性中包括“身高”和“性别”。还假设一些身高值缺失，而所有的性别值都是已知的。如果我们用每个性别类别的平均值估算缺失的身高值(男性175 cm，女性163 cm)，我们更有可能接近“真实”值，而不是用“一刀切”的方法估算整个数据集的平均值。</p><p id="f1bc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当然，范畴手段的运用还远远不够完善。正如上面描述的高度插补方法会遗漏异常值一样，使用这种方法计算每日高温也无法预测像2020年1月31日这样破坏图表的日子。但是通过用月平均值代替NAs特别是在一个气候季节性变化的地方——与年平均值相比，我们的替代值更有可能反映现实。</p><p id="a0e2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了实现这一点，我使用R的tidyverse提供的dplyr包按月对数据进行分组。接下来，我用mutate()函数将<em class="lp"> impute_monthlymean </em>列添加到数据集。然后，我给出了R指令，说明在这个函数中要做什么，如下所示:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="41b0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这种策略比用总体均值进行估计更准确。考虑一下:在整个数据集中，月平均插补值与观察值相差0.59。与用全年平均温度代替所有缺失数据的生硬方法相比，这是27.6% (.813-.589)/.813的改进。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/05a7af239e80fe965b8ad9eff514e374.png" data-original-src="https://miro.medium.com/v2/resize:fit:506/format:webp/1*o0iHY01K3j0rSg7kwlsUnA.png"/></div></figure><p id="2263" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然基于类别的插补在上述三种方法中效果最好，但它并不总是理想的。例如，在某些情况下，研究人员旨在建立变量之间的相关性。简单地用该类别的平均值输入缺失值会改变相关分数，从而改变关于变量之间关系的结论。</p><p id="0f93" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，均值插补会扭曲该变量内的数值分布。即使使用类别平均值，它也会影响变量的标准差，以及从普通最小二乘回归等数学模型中得出的推论。同样，获得的见解也会有偏差，尤其是在原始数据集包含大量NAs的情况下。无论如何，对NAs进行任何形式的插补的研究者都应该清楚地说明这一点，以便所有的读者都能理解做了什么，为什么做，以及如何做。</p><p id="424f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">医疗保健行业的许多研究人员避免均值估算，因为它可能对推断统计产生负面的“多米诺骨牌效应”(康，2013)。换句话说，在流程的某一步用平均值替换NAs的决定会影响后续步骤的结论。</p><p id="85f9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，虽然缺失值会降低数据集的统计能力，从而导致令人头疼的问题，但在深入分析和建模之前，需要对缺失数据的处理进行深入思考。根据您分析的目的和数据的性质，默认使用简单的解决方案(如均值插补)可能会带来各种问题。</p><p id="c045" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">参考:</strong></p><p id="cba0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Kang，Hyun(2013年5月24日)。<em class="lp">‘缺失数据的预防和处理’</em>。https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3668100/<a class="ae ln" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3668100/" rel="noopener ugc nofollow" target="_blank">。韩国麻醉学杂志。</a></p><p id="cc85" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">数据来源:<a class="ae ln" href="http://www.bom.gov.au/climate/data/" rel="noopener ugc nofollow" target="_blank">澳大利亚气象局</a></p></div></div>    
</body>
</html>