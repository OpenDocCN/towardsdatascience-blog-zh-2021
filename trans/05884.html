<html>
<head>
<title>Creating Multipage applications using Streamlit (efficiently!)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Streamlit创建多页面应用程序(高效！)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/creating-multipage-applications-using-streamlit-efficiently-b58a58134030?source=collection_archive---------2-----------------------#2021-05-26">https://towardsdatascience.com/creating-multipage-applications-using-streamlit-efficiently-b58a58134030?source=collection_archive---------2-----------------------#2021-05-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/24594024028b3639feb2bf05d88f4167.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*u1U-Lnq7mtD9_K1A"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">由<a class="ae jd" href="https://unsplash.com/@qmikola?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">miko aj</a>在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><h2 id="d7c0" class="je jf jg bd b dl jh ji jj jk jl jm dk jn translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a></h2><div class=""/><div class=""><h2 id="16e0" class="pw-subtitle-paragraph km jp jg bd b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dk translated">使用面向对象编程，而不是条件编程。</h2></div><p id="9ce7" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">你有多少次有一个伟大的ML项目想法，你认为你可以在你的简历上炫耀？你快速收集数据，分析数据，并在此基础上建立模型；所有这些都在一个Jupyter笔记本中，然后你面临你最糟糕的噩梦——<strong class="lg jq">有人要求你部署模型</strong>并用一个用户友好的界面显示推理。如果你独自工作，这有时真的会令人生畏，为什么不呢？你是一个数据科学家，而不是一个网络开发人员！这就是<strong class="lg jq"> </strong> <a class="ae jd" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lg jq">细流</strong> </a>的用武之地。这是一个非常棒的工具，它可以让你快速构建交互式web应用程序，并用图形展示你的模型，这可能会让许多开发人员感到羞愧。</p><p id="59ea" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">Streamlit最棒的一点是，你甚至不需要了解web开发的基础知识就可以开始工作，甚至不需要创建你的第一个web应用程序。因此，如果你对数据科学感兴趣，但因为不喜欢web开发而不愿意部署你的模型，那么这就是你只用Python构建漂亮的数据应用程序的机会！</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><p id="fb77" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">有许多资源可以教你如何开始使用Streamlit。我个人最喜欢的是<a class="ae jd" href="https://www.youtube.com/watch?v=Klqn--Mu2pE" rel="noopener ugc nofollow" target="_blank">这个</a>。然而，一旦你开始，你很快就会意识到仅仅构建一两个页面是不够的，一个好的应用程序会有更多的页面，这就是构建多页面应用程序的需要。所以，我决定把它写下来。在本文中，我将带您构建您的第一个多页面Streamlit应用程序并部署它。先决条件是了解Python和Streamlit的基础知识。</p><p id="e1af" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg jq">编辑:</strong>Streamlit社区成员非常友好地让我在Streamlit共享平台上展示我的应用程序，所以我在那里部署了它。现在任何人都可以实时测试。你可以在这里找到应用<a class="ae jd" href="https://share.streamlit.io/prakharrathi25/data-storyteller/main/app.py" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="ef14" class="mh mi jg bd mj mk ml mm mn mo mp mq mr kv ms kw mt ky mu kz mv lb mw lc mx my bi translated">代码概述</h1><p id="e825" class="pw-post-body-paragraph le lf jg lg b lh mz kq lj lk na kt lm ln nb lp lq lr nc lt lu lv nd lx ly lz ij bi translated">在这一节中，我将带您浏览我做的一个项目，在这个项目中，我实现了Streamlit 的<strong class="lg jq">多页面功能</strong> <strong class="lg jq">。现在，这个<em class="ne">不是使用一个<code class="fe nf ng nh ni b">if-else</code>方法完成的</em>，在这个方法中，我一直检查用户选择了<code class="fe nf ng nh ni b">streamlit.selectbox()</code>的哪个条目，并相应地显示页面。这个方法看起来有点像这样。</strong></p><pre class="nj nk nl nm gt nn ni no np aw nq bi"><span id="4aff" class="nr mi jg ni b gy ns nt l nu nv">import streamlit as st</span><span id="0ad0" class="nr mi jg ni b gy nw nt l nu nv"># Create a page dropdown <br/>page = st.selectbox("Choose your page", ["Page 1", "Page 2", "Page 3"]) </span><span id="01d4" class="nr mi jg ni b gy nw nt l nu nv">if page == "Page 1":<br/>    # Display details of page 1</span><span id="f4d5" class="nr mi jg ni b gy nw nt l nu nv">elif page == "Page 2":<br/>    # Display details of page 2</span><span id="96bb" class="nr mi jg ni b gy nw nt l nu nv">elif page == "Page 3":<br/>    # Display details of page 3</span></pre><p id="9f1d" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">虽然上面的方法没有错，但我发现它非常烦人，因为我必须管理这么多的<code class="fe nf ng nh ni b">if-else</code>和其中的代码。作为程序员，我们应该能够编写更整洁的应用程序，并在任何需要的地方使用面向对象编程。这就是我在这里要做的！</p><p id="ed09" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我制作的应用程序被称为“DataSpeare”(我知道这是一个糟糕的文字游戏)，它是一个基于人工智能的工具，为非技术用户自动化数据分析和机器学习的过程。它可以获取数据集，识别数据中的模式，解释结果，然后基于问题的上下文生成业务用户可以理解的输出故事。该应用程序的功能如下</p><ul class=""><li id="2d6c" class="nx ny jg lg b lh li lk ll ln nz lr oa lv ob lz oc od oe of bi translated">根据给定的数据将数据转化为交互式数据故事</li><li id="b1fe" class="nx ny jg lg b lh og lk oh ln oi lr oj lv ok lz oc od oe of bi translated">产生深刻的见解，推断模式并帮助业务决策。</li><li id="525b" class="nx ny jg lg b lh og lk oh ln oi lr oj lv ok lz oc od oe of bi translated">提供个性化配置文件；这些可以表示为描述给定用户感兴趣的内容的元数据。</li><li id="6867" class="nx ny jg lg b lh og lk oh ln oi lr oj lv ok lz oc od oe of bi translated">使用交互式直观界面生成业务用户可以理解的报告。</li></ul><p id="53ec" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">你可以在这里阅读更多关于应用<a class="ae jd" href="https://github.com/prakharrathi25/data-storyteller/blob/main/README.md" rel="noopener ugc nofollow" target="_blank">的内容。如果你想获得项目的源代码，那么你可以去</a><a class="ae jd" href="https://github.com/prakharrathi25/data-storyteller" rel="noopener ugc nofollow" target="_blank"> GitHub仓库</a>。在这篇文章中，我不会介绍整个应用程序，因为它有一个很大的代码库，但我会介绍它的基本结构。</p><p id="47fa" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">首先，您需要将Streamlit安装到您的设备上。就个人而言，我会推荐使用虚拟环境，但这一步是可选的。</p><pre class="nj nk nl nm gt nn ni no np aw nq bi"><span id="964f" class="nr mi jg ni b gy ns nt l nu nv"><strong class="ni jq">pip install streamlit</strong></span></pre><p id="897c" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对于我的应用程序，如果你正在构建整个系统，你可以下载一堆其他需求。现在，最重要的部分是构建应用程序的结构。我使用了一个基于类的结构，它可以让你在应用程序中添加页面作为<code class="fe nf ng nh ni b">MultiPage</code>类的实例。这已经在我的项目报告中名为<code class="fe nf ng nh ni b">multipage.py</code>的文件中创建。</p><figure class="nj nk nl nm gt is"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="c935" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这是一个简单的类，有两个方法</p><ul class=""><li id="53f0" class="nx ny jg lg b lh li lk ll ln nz lr oa lv ob lz oc od oe of bi translated"><code class="fe nf ng nh ni b">add()</code>:用来给你的应用添加更多的页面。每个新页面都附加到实例变量<code class="fe nf ng nh ni b">pages</code>上。</li><li id="e15c" class="nx ny jg lg b lh og lk oh ln oi lr oj lv ok lz oc od oe of bi translated"><code class="fe nf ng nh ni b">run()</code>:这个方法在应用程序的侧边栏中创建一个下拉菜单，这样你就可以从所有你需要的选项中进行选择。</li></ul><p id="5079" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">它只需要你输入<code class="fe nf ng nh ni b">streamlit</code>，你就可以开始了！</p><p id="d522" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这是一个处理应用程序结构的类，但是你实际上需要file来添加页面和管理代码。这已经在<code class="fe nf ng nh ni b">app.py</code>文件中完成。</p><figure class="nj nk nl nm gt is"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="c00d" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这是我们的Streamlit应用程序中的主文件，它将运行以加载所有页面。在第8行，我创建了一个<code class="fe nf ng nh ni b">MultiPage</code>类的实例<code class="fe nf ng nh ni b">app</code>，它是我在第4行导入的。<code class="fe nf ng nh ni b">app</code>实例让我向应用程序添加页面，并运行应用程序。页面已经从第14行开始添加，用户可以以类似的方式添加他们的页面。最后，在第21行，我使用<code class="fe nf ng nh ni b">run</code>函数运行了应用程序。</p><p id="267f" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg jq">注意:- </strong>使用这种结构的人只需改变第5行的导入，从第14行添加的页面和其余的代码将保持不变。</p><p id="4da6" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">下面是一个片段，展示了您的应用程序导航的外观，具体取决于您在应用程序中添加了哪些页面。</p><figure class="nj nk nl nm gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi on"><img src="../Images/a92c76a7b911824e99d9a1406aace993.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LXcWUPrkao0eLmGEBanbGw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">多页应用程序的简化输出(app.py文件)</p></figure><p id="11f4" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">最后，您可以用下面给出的方式为您的应用程序创建一个页面。我只展示了一页，其余的可以在这里看到。我创建了一个名为<code class="fe nf ng nh ni b">pages</code>的新目录，并将所有页面文件放入其中，您也可以这样做。</p><figure class="nj nk nl nm gt is"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="a26f" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我下面展示的页面叫做<code class="fe nf ng nh ni b">data_upload.py</code>。在这个页面中，我上传了数据集并制作了它的本地副本。这对于在页面之间传输数据很有用。使用<a class="ae jd" href="https://discuss.streamlit.io/t/multi-page-app-with-session-state/3074" rel="noopener ugc nofollow" target="_blank">会话变量</a>有另一种方法可以做到这一点，但是<em class="ne">我不推荐初学者使用</em>(也许我会写另一篇关于它的文章)。上传的数据集以csv格式存储在<code class="fe nf ng nh ni b">data</code>文件夹中，并由其他页面读取。因为这是一个自动化的数据分析应用程序，所以它还会为更新的数据集中的每一列生成一个列数据。这是在第44行使用<code class="fe nf ng nh ni b"><a class="ae jd" href="https://github.com/prakharrathi25/data-storyteller/blob/main/pages/utils.py" rel="noopener ugc nofollow" target="_blank">utils.py</a></code> <a class="ae jd" href="https://github.com/prakharrathi25/data-storyteller/blob/main/pages/utils.py" rel="noopener ugc nofollow" target="_blank">文件</a>中定义的<code class="fe nf ng nh ni b">genMetaData()</code>函数完成的。您可以用类似的方式创建其他页面并构建您的应用程序。</p><p id="ae23" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><em class="ne">注意:-在app()函数中编写代码很重要，因为它在多页面应用程序的结构中被调用。</em></p><p id="4f51" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">一旦所有的页面都制作好、导入并添加到你的应用程序中，就该在你的命令提示符下使用下面的命令来运行你的应用程序了。</p><pre class="nj nk nl nm gt nn ni no np aw nq bi"><span id="6770" class="nr mi jg ni b gy ns nt l nu nv">streamlit run app.py</span></pre><p id="ea01" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">一旦您运行应用程序，您的cmd应该看起来像这样，一旦您重定向到本地URL，您将看到您的应用程序。</p><figure class="nj nk nl nm gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oo"><img src="../Images/6d58aedfd010935386089c921f507705.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*973Zoie_4L20UoTQNxsA-w.png"/></div></div></figure><figure class="nj nk nl nm gt is gh gi paragraph-image"><div class="gh gi op"><img src="../Images/0e605e78c0eb9a42b3ef5ed2d13c5768.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*duqLZaPxBbl4jM225m3PtQ.gif"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">最终多页简化应用程序</p></figure><p id="1839" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">您也可以使用这个方法，并在您定义的页面内建立的新执行个体，在multipage应用程式内建立multipage应用程式。</p><p id="a51d" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">使用Streamlit和它的其他组件，如<em class="ne">会话变量</em>，您可以做很多令人惊奇的事情。我可能会写另一篇关于会话状态和变量的文章，但我希望这篇文章简短且内容丰富。我希望你喜欢它，这是有益的。祝你好运！</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="ba57" class="mh mi jg bd mj mk ml mm mn mo mp mq mr kv ms kw mt ky mu kz mv lb mw lc mx my bi translated">参考</h1><ol class=""><li id="8eff" class="nx ny jg lg b lh mz lk na ln oq lr or lv os lz ot od oe of bi translated"><a class="ae jd" href="https://www.youtube.com/watch?v=nSw96qUbK9o&amp;t=78s" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=nSw96qUbK9o&amp;t = 78s</a></li><li id="8136" class="nx ny jg lg b lh og lk oh ln oi lr oj lv ok lz ot od oe of bi translated"><a class="ae jd" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank">https://streamlit.io/</a></li><li id="f2ee" class="nx ny jg lg b lh og lk oh ln oi lr oj lv ok lz ot od oe of bi translated"><a class="ae jd" href="https://sap-code.hackerearth.com/challenges/hackathon/sap-code/custom-tab/data-4-storytelling/#Data%204%20Storytelling" rel="noopener ugc nofollow" target="_blank">https://sap-code . hackere earth . com/challenges/hackathon/sap-code/custom-tab/Data-4-storying/# Data % 204% 20 storying</a></li></ol></div></div>    
</body>
</html>