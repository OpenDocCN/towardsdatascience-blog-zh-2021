<html>
<head>
<title>How to style your Dataframe with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python设计你的数据框架</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-style-your-dataframe-with-python-eabf376d1efd?source=collection_archive---------36-----------------------#2021-06-28">https://towardsdatascience.com/how-to-style-your-dataframe-with-python-eabf376d1efd?source=collection_archive---------36-----------------------#2021-06-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="eae2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用Python高亮显示、格式化或着色您的数据框</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2d8072a095f557587cf540638c6163e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HQ3Zfd73bPZ2zqptC67L9w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Arnel Hasanovic 在<a class="ae ky" href="https://unsplash.com/s/photos/style-laptop?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="daaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我喜欢Excel的条件格式，这是一种简单而优雅的方式来突出你的表格中的关键要点。我们能在熊猫数据框中做同样的事情吗？绝对的！</p><p id="7d96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将学习如何格式化数据框:</p><ul class=""><li id="3130" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">根据条件给数字涂上颜色</li><li id="22cd" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">突出显示最小值/最大值/空值</li><li id="b5db" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">数据框中的条形图</li><li id="313e" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">热图</li></ul><h2 id="d167" class="mj mk it bd ml mm mn dn mo mp mq dp mr li ms mt mu lm mv mw mx lq my mz na nb bi translated">入门指南</h2><p id="cfe8" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">让我们导入所需的库，并用随机数和NaNs(不是数字)创建一个数据帧。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/147db7fc600870e7d6c35e1c8f0f1b75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YIJ3FaoDxTP25vNwnCkPkQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">具有随机数和NaNs的数据帧</p></figure><p id="feea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用这个数据帧来应用格式和样式。</p><h2 id="eb2a" class="mj mk it bd ml mm mn dn mo mp mq dp mr li ms mt mu lm mv mw mx lq my mz na nb bi translated">根据情况给数字涂上颜色</h2><p id="7fcd" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">我们将根据情况给数字涂上颜色。例如，我们希望负值为红色，位置值为绿色，NaN为蓝色。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/50114ffd268fcbebb50ab46a37e72dae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*43KRUJeYHAKGUzpsBWbhww.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">对数据帧应用颜色</p></figure><p id="3ac3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们必须定义一个<code class="fe nl nm nn no b">apply_colour</code>函数来返回我们想要的颜色。然后我们使用<code class="fe nl nm nn no b">apply_map</code>将颜色应用到数据框的样式上。</p><blockquote class="np nq nr"><p id="8db4" class="kz la ns lb b lc ld ju le lf lg jx lh nt lj lk ll nu ln lo lp nv lr ls lt lu im bi translated">对于<code class="fe nl nm nn no b">Styler.applymap</code>,你的函数应该接受一个标量并返回一个带有CSS属性-值对的字符串。</p></blockquote><h2 id="c25d" class="mj mk it bd ml mm mn dn mo mp mq dp mr li ms mt mu lm mv mw mx lq my mz na nb bi translated">突出显示最小值/最大值/空值</h2><p id="d7eb" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">有一个内置函数可以突出显示系列中数据的最小值/最大值/空值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/dc41628b9c5070ccb118dbd48d8e3a87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X0uHfH-Awt8kQSibtdJdog.png"/></div></div></figure><p id="53e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">应用内置函数非常简单，我们只需将颜色参数传递给函数，它将突出显示每个系列中的最小值/最大值/空值。</p><p id="3117" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">应用于子集</strong></p><p id="fb1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们只想突出显示某一列或某一行，我们可以使用subset参数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/90c53e8a763a7a59439c3e6a0abc4f89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rBzKC3dkQKItlxmXDgWvDA.png"/></div></div></figure><p id="5956" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以将<code class="fe nl nm nn no b">subset=['C','D']</code>传递给<code class="fe nl nm nn no b">highlight_max</code>，这样它将只突出显示列C和d</p><p id="a5b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以定义子集中的行的范围。我们可以使用<code class="fe nl nm nn no b">subset = pd.IndexSlice[2:5, ['C','D']]</code>将C列和d列的第2行切片到第5行。</p><blockquote class="np nq nr"><p id="c328" class="kz la ns lb b lc ld ju le lf lg jx lh nt lj lk ll nu ln lo lp nv lr ls lt lu im bi translated">对于行和列切片，任何到<code class="fe nl nm nn no b">.loc</code>的有效索引器都将工作。</p></blockquote><p id="b697" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">一起申请</strong></p><p id="e876" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以将<code class="fe nl nm nn no b">highlight_max</code>和<code class="fe nl nm nn no b">applymap(apply_colour)</code>一起应用于数据帧。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/9f9dd4589a0acfdeb296f71ab8b64706.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZLTQyEQiyLFYKzko7gZPVA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带有highlight_max和applycolour的数据帧</p></figure><p id="ce8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">塔当！现在你的数据框架上同时有了<code class="fe nl nm nn no b">highlight_max</code>和<code class="fe nl nm nn no b">applycolour</code>样式！</p><h2 id="2e57" class="mj mk it bd ml mm mn dn mo mp mq dp mr li ms mt mu lm mv mw mx lq my mz na nb bi translated">数据框中的条形图</h2><p id="6f88" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">我非常喜欢Excel中的数据栏条件格式，是的，我们也可以在dataframe中这样做！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/c1f70637913a6a69d81e7c3caa0e70d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hZUCjAKRu5eAYkfT8ORagw.png"/></div></div></figure><p id="7893" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nl nm nn no b">style.bar</code>用于在数据框中创建条形图。和<code class="fe nl nm nn no b">highligh_max</code>一样，我们可以给它传入<code class="fe nl nm nn no b">subset</code>或<code class="fe nl nm nn no b">color</code>参数。</p><p id="8a17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在最新版本中，我们能够进一步定制条形图。现在，我们可以使用<code class="fe nl nm nn no b">align = 'mid’</code>将工具栏居中。此外，我们可以将列表<code class="fe nl nm nn no b">[color_negative, color_positive]</code>传递给颜色参数。</p><h2 id="0c9c" class="mj mk it bd ml mm mn dn mo mp mq dp mr li ms mt mu lm mv mw mx lq my mz na nb bi translated">热图</h2><p id="3a83" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">我们也可以在数据帧上创建热图！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/70441dd916902227b3d65440297c3ef4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G7LNkfJItDUcsj_G-ttkfA.png"/></div></div></figure><p id="7f16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<code class="fe nl nm nn no b">seaborn</code>来得到一个漂亮的颜色图！</p><p id="c8c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">否则它接受来自Matplotlib的任何颜色图，你可以在这个<a class="ae ky" href="https://matplotlib.org/stable/gallery/color/colormap_reference.html" rel="noopener ugc nofollow" target="_blank">颜色图参考</a>中查看！与前面的函数相同，<code class="fe nl nm nn no b">background_gradient</code>也接受子集作为参数。</p></div><div class="ab cl ob oc hx od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="im in io ip iq"><p id="a4f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你已经学会了如何用Python 设计你的数据框架的样式。<strong class="lb iu"> </strong>希望这篇文章对你有用。可以在我的<a class="ae ky" href="https://github.com/chingjunetao/medium-article/blob/master/style-your-dataframe/style-dataframe.ipynb" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> Github </strong> </a>中查看完整的Jupyter笔记本。干杯！</p><p id="59ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PS:样式直接在Github中无法正常渲染，你可能想在你的本地机器上试试。</p></div><div class="ab cl ob oc hx od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="im in io ip iq"><p id="c4cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">如果你喜欢读这篇文章，你可能也会喜欢这些:</strong></p><div class="oi oj gp gr ok ol"><a rel="noopener follow" target="_blank" href="/simple-guide-to-data-cleaning-with-python-39203a14afeb"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd iu gy z fp oq fr fs or fu fw is bi translated">使用Python清理数据的简单指南</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">如何使用Python删除重复数据、映射数据和处理空值</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">towardsdatascience.com</p></div></div><div class="ou l"><div class="ov l ow ox oy ou oz ks ol"/></div></div></a></div><div class="oi oj gp gr ok ol"><a rel="noopener follow" target="_blank" href="/how-to-manage-files-in-google-drive-with-python-d26471d91ecd"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd iu gy z fp oq fr fs or fu fw is bi translated">如何用Python管理Google Drive中的文件</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">作为一名数据分析师，大多数时候我需要将我提取的数据分享给我的产品经理/利益相关者和谷歌…</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">towardsdatascience.com</p></div></div><div class="ou l"><div class="pa l ow ox oy ou oz ks ol"/></div></div></a></div><p id="7cf2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在Medium上找到我其他作品的链接，在这里关注我<a class="ae ky" href="https://medium.com/@chingjunetao" rel="noopener"><strong class="lb iu"/></a><strong class="lb iu">。感谢阅读！</strong></p></div></div>    
</body>
</html>