<html>
<head>
<title>How To Label The Values Of Plots With Matplotlib</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用 Matplotlib 标注图的值</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-label-the-values-plots-with-matplotlib-c9b7db0fd2e1?source=collection_archive---------1-----------------------#2021-12-12">https://towardsdatascience.com/how-to-label-the-values-plots-with-matplotlib-c9b7db0fd2e1?source=collection_archive---------1-----------------------#2021-12-12</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="23d1" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">标注地块的简单指南</h2></div><p id="7490" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">Matplotlib 使用起来可能有点棘手。我尤其难以在我的图上显示数据点的值。起初我认为这应该是一个简单的任务，但我发现它并不像我预期的那么简单。因此，在这篇文章中，我会解释你如何做到这一点，并且尽可能的简单易懂。</p></div><div class="ab cl lf lg hy lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="in io ip iq ir"><p id="d907" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">让我们从创建几个随机数据点开始。</p><pre class="lm ln lo lp gu lq lr ls lt aw lu bi"><span id="648e" class="lv lw iu lr b gz lx ly l lz ma">import numpy as np<br/>import matplotlib.pyplot as plt</span><span id="443f" class="lv lw iu lr b gz mb ly l lz ma">x = np.arange(1, 21)<br/>y = np.random.randint(20, size=20)<br/>print(x)<br/>print(y)<br/>&gt;&gt;&gt;[1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20]<br/>&gt;&gt;&gt;[9 13 19  8 13  3 19 17 12  4  7  0  3  9 14  0 11 17  6 10]</span></pre><p id="615a" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">创建一个从 1 到 20 的 NumPy 数组。第一个数字包含在内，最后一个数字不包含在内。</p><p id="7e36" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated"><code class="fe mc md me lr b">np.random.randint(20, size=20)</code>生成 20 个 0 到 20 之间的随机值，(0 包含 20 不包含)。如果你自己运行代码，你会得到不同的值。</p><p id="10a3" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">接下来，我们可以简单地绘制数据。这部分用 Matplotlib 很容易。只需调用<code class="fe mc md me lr b">plot()</code>函数并提供你的 x 和 y 值。调用<code class="fe mc md me lr b">show()</code>函数可视化输出图形。</p><pre class="lm ln lo lp gu lq lr ls lt aw lu bi"><span id="0481" class="lv lw iu lr b gz lx ly l lz ma">plt.plot(x, y)<br/>plt.show()</span></pre><figure class="lm ln lo lp gu mg gi gj paragraph-image"><div class="gi gj mf"><img src="../Images/dd9dda281b45d031f1ed81c25dfa9489.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*J68bnX1l62_WrR-QLE09Ng.png"/></div><p class="mj mk gk gi gj ml mm bd b be z dk translated">作者创作的情节</p></figure><p id="18e5" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">为了让它更有趣一点，让我们修改一下情节。我认为这将是一个伟大的添加一个主要标题，对坐标轴的描述，并增加大小。</p><pre class="lm ln lo lp gu lq lr ls lt aw lu bi"><span id="c4cf" class="lv lw iu lr b gz lx ly l lz ma">plt.figure(figsize=(8,8))<br/>plt.plot(x, y)<br/>plt.xlabel("x values", size=12)<br/>plt.ylabel("y values", size=12)<br/>plt.title("Learning more about pyplot with random numbers chart", size=15)<br/>plt.show()</span></pre><p id="0c94" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">可以使用<code class="fe mc md me lr b">plt.figure(figsize=(12, 8))</code>设置地块的大小。<strong class="kl iv">注意，先调用</strong> <code class="fe mc md me lr b">figure</code> <strong class="kl iv">再调用</strong> <code class="fe mc md me lr b">plot</code>很重要，否则会得到不希望的结果。另外，请注意，绘图的大小是以英寸而不是像素来度量的。</p><p id="d61f" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">轴上的标签和标题可以使用<code class="fe mc md me lr b">xlabel()</code> <code class="fe mc md me lr b">ylabel()</code>和<code class="fe mc md me lr b">title()</code>简单设置。这三个函数中的 size 参数决定了标签的字体大小。</p><p id="d824" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">代码片段的结果如下。</p><figure class="lm ln lo lp gu mg gi gj paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gi gj mn"><img src="../Images/330f7f39dd0e0dc85774f5ab0c31a2a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B-ch6O0lmLVsrEf9wz1Law.png"/></div></div><p class="mj mk gk gi gj ml mm bd b be z dk translated">作者创作的情节</p></figure><p id="f5da" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">我们仍然缺少数据点本身的 y 值。我们可以通过在一个循环中添加表示每个 x 坐标的 y 值的文本来引入它们。但是在这之前，我们首先需要在开头添加一行额外的代码。新添加的代码行用粗体书写。</p><pre class="lm ln lo lp gu lq lr ls lt aw lu bi"><span id="7ece" class="lv lw iu lr b gz lx ly l lz ma"><strong class="lr iv">fig, ax = plt.subplots(figsize=(12,8))</strong><br/>plt.plot(x, y)<br/>plt.xlabel("x values", size=12)<br/>plt.ylabel("y values", size=12)<br/>plt.title("Learning more about pyplot with random numbers chart", size=15)<br/><strong class="lr iv">for index in range(len(x)):<br/>  ax.text(x[index], y[index], y[index], size=12)<br/></strong>plt.show()</span></pre><p id="9609" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">第一行调用了<code class="fe mc md me lr b">plt.subplots()</code>，它为我们创建了两个对象，并将它们存储在<code class="fe mc md me lr b">fig</code>和<code class="fe mc md me lr b">ax</code>中。<code class="fe mc md me lr b">fig</code>对象用于修改图形，但我们不会在本文中进一步探讨。对象是一个支线剧情，我们可以用它来给剧情添加文本。</p><p id="3e71" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated"><code class="fe mc md me lr b">ax.text()</code>允许我们在给定位置添加一个文本到绘图中。前两个参数代表文本的 x 和 y 坐标。第三个参数是文本应该具有的实际值，最后 size 参数决定了文本的字体大小。</p><p id="7a6f" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">通过循环浏览<code class="fe mc md me lr b">range(len(x))</code>，我们创建了 20 个文本。数据中的每个 x 坐标一个。我们在下面看到上面代码片段的结果。</p><figure class="lm ln lo lp gu mg gi gj paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gi gj ms"><img src="../Images/f1bceed2ec05be20653195e6c809f007.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bFAYu6w-yqwZezMdQDcLdA.png"/></div></div><p class="mj mk gk gi gj ml mm bd b be z dk translated">作者创作的情节</p></figure><blockquote class="mt mu mv"><p id="9b92" class="kj kk mw kl b km kn jv ko kp kq jy kr mx kt ku kv my kx ky kz mz lb lc ld le in bi translated">提示:如果你认为图上的值很难读取，因为它们直接在绘制线的上面，你可以简单地在<code class="fe mc md me lr b">ax.text()</code>中的 y 位置参数上增加一点。</p></blockquote><p id="39a9" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">我认为通过增加 x 和 y 刻度的频率来匹配 x 的实际值和 y 的可能值，可以进一步提高图形的可读性。这可以通过将 x 值作为参数添加到<code class="fe mc md me lr b">plt.xticks()</code>并将列表中的值 0 到 19 作为<code class="fe mc md me lr b">plt.yticks()</code>的参数来实现。此外，作为情节的最后一笔，我还想添加网格线。这是通过调用如下所示的<code class="fe mc md me lr b">plt.grid()</code>来实现的。</p><pre class="lm ln lo lp gu lq lr ls lt aw lu bi"><span id="e6ba" class="lv lw iu lr b gz lx ly l lz ma">fig, ax = plt.subplots(figsize=(12,8))<br/>plt.plot(x, y)<br/>plt.xlabel("x values", size=12)<br/>plt.ylabel("y values", size=12)<br/>plt.title("Learning more about pyplot with random numbers chart", size=15)<br/>for index in range(len(x)):<strong class="lr iv"><br/></strong>  ax.text(x[index], y[index], y[index], size=12)<br/><strong class="lr iv">plt.xticks(x, size=12)<br/>plt.yticks([i for i in range(20)], size=12)<br/>plt.grid()</strong><br/>plt.show()</span></pre><figure class="lm ln lo lp gu mg gi gj paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gi gj na"><img src="../Images/1a2d9bbd68f23c2284c18444cb0db805.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RqQs8yyqZuBoKDfcax_H1A.png"/></div></div><p class="mj mk gk gi gj ml mm bd b be z dk translated">作者创作的情节</p></figure><p id="6b8a" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">就是这样！现在，您知道了如何通过添加解释性标签来提高绘图的可读性。</p></div><div class="ab cl lf lg hy lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="in io ip iq ir"><p id="afb0" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">Matplotlib 允许你用你的情节做很多事情，比我在这里提到的要多得多。在这篇文章中，我介绍了一些我一直在努力正确工作的小事情。希望你觉得有用。</p><p id="f26d" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">感谢阅读。</p></div></div>    
</body>
</html>