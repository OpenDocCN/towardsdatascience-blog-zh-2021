<html>
<head>
<title>Building a Real Time Chat Application with NLP Capabilities</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建具有NLP功能的实时聊天应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-a-real-time-chat-application-with-nlp-super-powers-ce800e19cb2b?source=collection_archive---------25-----------------------#2021-06-01">https://towardsdatascience.com/building-a-real-time-chat-application-with-nlp-super-powers-ce800e19cb2b?source=collection_archive---------25-----------------------#2021-06-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ab04" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一款使用TensorFlow JS深度学习API，IBM Cloud，Node的带有情绪分析和语气检测的聊天App。JS、Web Sockets和React</h2></div></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/64af822466dfe21e70c07d7364d0ab8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UALSe7FSNkTbgjqU"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">沃洛季米尔·赫里先科在<a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="8320" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在一个人工智能(AI)和机器学习(ML)模型被用来获取实时信息以不断改善客户体验的世界中，我希望发现ML在试图理解人类对话时可以证明有多有效，甚至尝试构建我们自己的定制应用程序来实现这项技术。</p><h2 id="bb86" class="lz ma iq bd mb mc md dn me mf mg dp mh lm mi mj mk lq ml mm mn lu mo mp mq mr bi translated">实践中的对话式机器学习</h2><p id="1c72" class="pw-post-body-paragraph ld le iq lf b lg ms jr li lj mt ju ll lm mu lo lp lq mv ls lt lu mw lw lx ly ij bi translated">世界正在迅速适应使用人工智能驱动的应用程序来协助人类的日常工作。Siri和Alexa由基于自然语言处理(NLP)的ML模型驱动，这些模型不断训练和迭代，听起来更自然，并通过理解复杂的人类对话提供更多价值。更不用说，谷歌最新的对话技术，<a class="ae lc" href="https://blog.google/technology/ai/lamda/" rel="noopener ugc nofollow" target="_blank"> LaMDA </a>。LaMDA被训练成能够打断更大块的人类对话，并理解多个单词或短语如何相互关联，以获得更多关于输入文本的上下文，特别是针对人类对话。然后，它能够动态地生成一个自然的、类似人类的响应。以下来自谷歌的AI博文，<a class="ae lc" href="https://blog.google/technology/ai/lamda/" rel="noopener ugc nofollow" target="_blank"> <em class="mx"> LaMDA:我们突破性的对话技术</em> </a>，其中简要描述了LaMDA所基于的深度学习技术:</p><blockquote class="my"><p id="7ac4" class="mz na iq bd nb nc nd ne nf ng nh ly dk translated">[1] LaMDA的谈话技巧是多年来练就的。像最近的许多语言模型一样，包括BERT和GPT-3，它建立在<a class="ae lc" href="https://ai.googleblog.com/2017/08/transformer-novel-neural-network.html" rel="noopener ugc nofollow" target="_blank"> Transformer </a>之上，这是谷歌研究院在2017年发明并开源的神经网络架构</p></blockquote><p id="61e9" class="pw-post-body-paragraph ld le iq lf b lg ni jr li lj nj ju ll lm nk lo lp lq nl ls lt lu nm lw lx ly ij bi translated">这项技术令人印象深刻，并迅速证明了它在我们日常生活中的价值，从为我们预订房间到消除对人力呼叫中心的需求。</p><h2 id="fc31" class="lz ma iq bd mb mc md dn me mf mg dp mh lm mi mj mk lq ml mm mn lu mo mp mq mr bi translated">机器学习的挑战</h2><p id="f129" class="pw-post-body-paragraph ld le iq lf b lg ms jr li lj mt ju ll lm mu lo lp lq mv ls lt lu mw lw lx ly ij bi translated">然而，并不是所有的彩虹和阳光，在训练和集成ML模型到生产应用的过程中，会有许多挑战。我们如何测试这些模型？我们如何开发可靠的模型？我们如何确保ML模型中的偏差得到最佳缓解？我们可以多容易地构建使用这些模型的可扩展应用程序？这些都是大规模开发ML解决方案时需要考虑的问题。</p><h1 id="2a49" class="nn ma iq bd mb no np nq me nr ns nt mh jw nu jx mk jz nv ka mn kc nw kd mq nx bi translated">让我们建立自己的应用程序！</h1><p id="143b" class="pw-post-body-paragraph ld le iq lf b lg ms jr li lj mt ju ll lm mu lo lp lq mv ls lt lu mw lw lx ly ij bi translated">在本文中，我们将构建一个定制的全栈应用程序，该应用程序利用<a class="ae lc" href="https://www.tensorflow.org/tutorials/keras/text_classification_with_hub" rel="noopener ugc nofollow" target="_blank"> Google的TensorFlow </a>和<a class="ae lc" href="https://www.ibm.com/cloud/watson-natural-language-understanding" rel="noopener ugc nofollow" target="_blank"> IBM的云机器学习即服务(MLaaS)平台</a>来发现工程师如何使用基于云的工具开发可维护、可靠和可扩展的全栈ML解决方案。</p><p id="1a7d" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="lf ir">我们将构建的应用程序是一个实时聊天应用程序，能够检测用户消息的语气。</strong>正如你所想象的，这方面的用例可以跨越很大的范围，从理解客户与客户服务聊天的交互到理解一个生产人工智能聊天机器人的表现如何。</p><h2 id="cb07" class="lz ma iq bd mb mc md dn me mf mg dp mh lm mi mj mk lq ml mm mn lu mo mp mq mr bi translated">体系结构</h2><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ny"><img src="../Images/d08177994b0821f7cc266bebfc01e167.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lC1Y1l-SsuqRrn4j.png"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">在高层次上，这是应用程序的架构。</p></figure><p id="86cd" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">高级应用程序架构包括利用React和TypeScript来构建我们的自定义用户界面。使用节点。JS和套接字。IO库，支持最终用户和应用服务器之间的实时双向网络通信。自插座。IO允许我们进行基于事件的通信，我们可以根据终端用户主机发送的消息异步地对ML服务进行网络调用。</p><h2 id="e793" class="lz ma iq bd mb mc md dn me mf mg dp mh lm mi mj mk lq ml mm mn lu mo mp mq mr bi translated">后端</h2><p id="a5ee" class="pw-post-body-paragraph ld le iq lf b lg ms jr li lj mt ju ll lm mu lo lp lq mv ls lt lu mw lw lx ly ij bi translated">至于ML服务，我们可以向IBM基于云的音调检测模型发出HTTP请求(包含在有效负载中发送的聊天消息的内容)。来自IBM web服务的响应将是一个JSON对象，其中包含模型对该消息进行分类的一组音调，例如</p><pre class="kn ko kp kq gt nz oa ob oc aw od bi"><span id="d674" class="lz ma iq oa b gy oe of l og oh">[“Joy”, “Positive”, “Happy”]</span></pre><p id="3354" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">异步地，我们的节点。JS web服务可以向TensorFlow的情感API发出请求。TensorFlow的ML模型是一种基于卷积神经网络的深度学习架构，它已经在由IBMD电影评论组成的50，000个带标签的数据点上进行训练，能够预测新引入的输入文本的情感。我们将通过TensorFlow的预训练模型发送每条新聊天消息，以获得整个聊天对话的平均情绪得分。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="oi oj l"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">基于事件的功能，根据新的聊天消息运行ML服务。</p></figure><p id="69b5" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在上面的要点中，您可以看到，在客户端发送新消息时，服务器将调用两个函数，getTone和updateSentiment，同时将聊天消息的文本值传递给这些函数。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="oi oj l"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">为对IBM Cloud Tone Analyzer API进行API调用而创建的getTone函数。</p></figure><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="oi oj l"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">创建的更新情感函数使用输入的聊天消息文本运行TensorFlow ML模型，以计算平均情感。</p></figure><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="oi oj l"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">使用TensorFlow JS框架的预测函数。</p></figure><p id="de5f" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">上面的预测函数在update perspective中调用。该函数通过使用网络获取来加载TensorFlow预训练模型，预处理输入的数据，并使用该模型来评估情感得分。这一切都在后台进行，与处理其他后端任务并行。</p><h2 id="9420" class="lz ma iq bd mb mc md dn me mf mg dp mh lm mi mj mk lq ml mm mn lu mo mp mq mr bi translated">前端</h2><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="oi oj l"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">使用Socket IO客户端库与服务器代码进行双向连接的用户界面。</p></figure><p id="2198" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在上面的代码中，我们构建了一个功能性的React组件来处理客户端与聊天应用程序的交互。因为我们使用的是功能组件，所以我们可以访问React钩子，比如useState和useEffect。<strong class="lf ir">消息</strong>状态保存当前用户输入文本的值。<strong class="lf ir">消息</strong>状态保存所有已发送消息的数组。您可以在useEffect中看到到Socket服务器的连接，每次重新呈现/加载组件时都会调用它。当从服务器发出新消息时，会触发事件，以便UI接收新消息并将其呈现给所有在线用户实例。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="oi oj l"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">用户界面的sendMessage函数，用于构建要发送给套接字服务器的messageObject。</p></figure><p id="4a49" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">从sendMessage函数发出的messageObject将到达服务器，服务器将解析出messageObject.body(用户发送的聊天消息的实际值),并通过之前构建的ML web服务处理数据。然后，它将构建并返回一个新的对象，该对象包含从ML模型的输出中获取的消息、用户名和消息的语气。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="oi oj l"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">客户端JSX代码呈现消息并解析出消息发送者的用户名、消息的语气，当然还有消息体。</p></figure><p id="cc5e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">而最后的结果……<strong class="lf ir">TADA！</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ok"><img src="../Images/01988bb990ab217a51f0d8754eb7cc11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*KmVHS7miXDwxMc1ZRMKXqQ.gif"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">我们在本文中构建的应用程序的演示。每个聊天气泡包含给定消息的语气标签。(来源:作者)</p></figure><h2 id="3a38" class="lz ma iq bd mb mc md dn me mf mg dp mh lm mi mj mk lq ml mm mn lu mo mp mq mr bi translated">完整源代码</h2><p id="fe28" class="pw-post-body-paragraph ld le iq lf b lg ms jr li lj mt ju ll lm mu lo lp lq mv ls lt lu mw lw lx ly ij bi translated">要查看完整代码，请访问Github资源库:</p><div class="ol om gp gr on oo"><a href="https://github.com/devalparikh/NLP_Chat_App" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd ir gy z fp ot fr fs ou fu fw ip bi translated">devalparikh/NLP_Chat_App</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">使用NLP和socket networks Permalink的实体检测/音调检测实时聊天应用程序无法加载最新的…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">github.com</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc kw oo"/></div></div></a></div><h2 id="60a7" class="lz ma iq bd mb mc md dn me mf mg dp mh lm mi mj mk lq ml mm mn lu mo mp mq mr bi translated">结论</h2><p id="0975" class="pw-post-body-paragraph ld le iq lf b lg ms jr li lj mt ju ll lm mu lo lp lq mv ls lt lu mw lw lx ly ij bi translated">通过构建这个概念验证项目，我希望展示开发一个定制应用程序是多么无缝，它可以通过利用基于云的Web服务来集成机器学习工具和技术，从而实现可伸缩性和可维护性。通过使用IBM的云服务和谷歌的TensorFlow预训练情绪模型，我们能够建立一个聊天应用程序，可以对每条聊天消息的语气以及对话的整体情绪进行分类。</p><h2 id="1447" class="lz ma iq bd mb mc md dn me mf mg dp mh lm mi mj mk lq ml mm mn lu mo mp mq mr bi translated"><strong class="ak">参考文献</strong></h2><p id="4adf" class="pw-post-body-paragraph ld le iq lf b lg ms jr li lj mt ju ll lm mu lo lp lq mv ls lt lu mw lw lx ly ij bi translated">[1] E. Collins，Z. Ghahramani，<a class="ae lc" href="https://blog.google/technology/ai/lamda/" rel="noopener ugc nofollow" target="_blank"> LaMDA:我们突破性的对话技术</a> (2021)，https://blog.google/technology/ai<a class="ae lc" href="https://blog.google/technology/ai" rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>