<html>
<head>
<title>Modeling TigerGraph Spotify Data with Cytoscape</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Cytoscape对TigerGraph Spotify数据建模</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/modelling-tigergraph-spotify-data-with-cytoscape-9b82ea614bed?source=collection_archive---------30-----------------------#2021-07-23">https://towardsdatascience.com/modelling-tigergraph-spotify-data-with-cytoscape-9b82ea614bed?source=collection_archive---------30-----------------------#2021-07-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ec84" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用细胞图像可视化创建仪表板</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d567cf5893d49cb29794698fc70feba2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jWUt67wfMPvwJpzi.jpg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">记录，看起来与顶点相似(<a class="ae kv" href="https://pixabay.com/photos/vinyl-retro-plastic-old-black-1595847/" rel="noopener ugc nofollow" target="_blank">来自Pixabay </a>的图像)</p></figure><blockquote class="kw kx ky"><p id="d270" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">注:使用的Spotify数据可以在<a class="ae kv" href="https://shreya-chaudhary.medium.com/spotify-graph-dashboard-part-i-creating-a-spotify-graph-with-tigergraph-af97c436e538" rel="noopener">这个博客</a>中找到。</p></blockquote><h1 id="fbbe" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">概观</h1><h2 id="7bcc" class="mo lx iq bd ly mp mq dn mc mr ms dp mg mt mu mv mi mw mx my mk mz na nb mm nc bi translated">目标</h2><p id="f670" class="pw-post-body-paragraph kz la iq lc b ld nd jr lf lg ne ju li mt nf ll lm mw ng lp lq mz nh lt lu lv ij bi translated">有兴趣利用TigerGraph的图形数据库和Cytoscape令人惊叹的可视化功能吗？在这篇博客中，我们将使用Cytoscape对TigerGraph中的Spotify数据进行建模，特别是Plotly Dash的Cytoscape包。然后，我们将把这些整合到一个很酷的交互式仪表板中。Cytoscape是为数据及其连接建模而构建的，让我们用Cytoscape对连接的TigerGraph数据建模，以便轻松地将我们的可视化集成到Python应用程序中。</p><h2 id="ec98" class="mo lx iq bd ly mp mq dn mc mr ms dp mg mt mu mv mi mw mx my mk mz na nb mm nc bi translated">工具</h2><ul class=""><li id="9d82" class="ni nj iq lc b ld nd lg ne mt nk mw nl mz nm lv nn no np nq bi translated"><a class="ae kv" href="https://tgcloud.io/" rel="noopener ugc nofollow" target="_blank">tiger graph Cloud</a>:tiger graph是世界上“唯一可扩展的企业级图形数据库”我们将特别使用TG Cloud，这是一种开始使用TigerGraph(甚至通过GraphStudio提供无代码解决方案)的简单方法，并免费托管您的图形！</li><li id="f2d5" class="ni nj iq lc b ld nr lg ns mt nt mw nu mz nv lv nn no np nq bi translated"><a class="ae kv" href="https://cytoscape.org/" rel="noopener ugc nofollow" target="_blank"> Cytoscape </a> : Cytoscape是一个"<a class="ae kv" href="https://cytoscape.org/download.html" rel="noopener ugc nofollow" target="_blank">开源</a>软件平台，用于可视化复杂网络，并将这些网络与任何类型的属性数据集成在一起。具体来说，我们将使用与Plotly Dash的集成来建模我们互连的TigerGraph数据。</li></ul><h1 id="32e1" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">第一部分:准备你的图表</h1><h2 id="7fbb" class="mo lx iq bd ly mp mq dn mc mr ms dp mg mt mu mv mi mw mx my mk mz na nb mm nc bi translated">第一步:确保图表准备就绪</h2><p id="70c5" class="pw-post-body-paragraph kz la iq lc b ld nd jr lf lg ne ju li mt nf ll lm mw ng lp lq mz nh lt lu lv ij bi translated">首先，让我们确保我们的图表已经准备好运行。转到<a class="ae kv" href="https://tgcloud.io/app/solutions" rel="noopener ugc nofollow" target="_blank">https://tgcloud.io/app/solutions</a>并确保您可以在“状态”栏下看到一个绿点和“就绪”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/9f1c70fc1b1de95f38c6fafccce6ecfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QgxGQebPkIHFVwAiKnngaQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">确保状态为“就绪”！</p></figure><p id="393c" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">如果它有一个带有“停止”字样的蓝点，请单击“解决方案操作”，然后从下拉列表中单击“启动”。</p><p id="2bca" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">等到状态为绿色并显示“就绪”(这可能需要几分钟)，然后您就可以继续前进了！</p><h2 id="7a87" class="mo lx iq bd ly mp mq dn mc mr ms dp mg mt mu mv mi mw mx my mk mz na nb mm nc bi translated">第二步:连接到您的解决方案</h2><p id="8024" class="pw-post-body-paragraph kz la iq lc b ld nd jr lf lg ne ju li mt nf ll lm mw ng lp lq mz nh lt lu lv ij bi translated">首先，让我们再次从我们的Colab笔记本连接到TG Cloud上的解决方案。首先，我们将安装并导入pyTigerGraph。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="6352" class="mo lx iq ny b gy oc od l oe of">!pip install pyTigerGraph</span><span id="968a" class="mo lx iq ny b gy og od l oe of">import pyTigerGraph as tg</span></pre><p id="81e5" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">接下来，我们将创建TigerGraphConnection。记住用它们各自的值替换子域和密码。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="00d4" class="mo lx iq ny b gy oc od l oe of">conn = tg.TigerGraphConnection(host="https://SUBDOMAIN.i.tgcloud.io/", password="PASSWORD", graphname="SpotifyGraph")</span><span id="5b17" class="mo lx iq ny b gy og od l oe of">conn.apiToken = conn.getToken(conn.createSecret())</span></pre><p id="560e" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">我的TigerGraphConnection将如下所示:</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="b2b9" class="mo lx iq ny b gy oc od l oe of">conn = tg.TigerGraphConnection(host="https://spotifygraph.i.tgcloud.io/", password="tigergraph", graphname="SpotifyGraph")</span><span id="e093" class="mo lx iq ny b gy og od l oe of">conn.apiToken = conn.getToken(conn.createSecret())</span></pre><p id="18b2" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">一旦它运行，我们就准备好了！</p><h1 id="15c1" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">第二部分:准备仪表板</h1><h2 id="0c99" class="mo lx iq bd ly mp mq dn mc mr ms dp mg mt mu mv mi mw mx my mk mz na nb mm nc bi translated">第一步:导入库</h2><p id="d31f" class="pw-post-body-paragraph kz la iq lc b ld nd jr lf lg ne ju li mt nf ll lm mw ng lp lq mz nh lt lu lv ij bi translated">首先，我们将安装并导入我们的库。第一个库将是pandas，它允许我们将查询结果格式化为cytoscape。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="d135" class="mo lx iq ny b gy oc od l oe of">import pandas as pd</span></pre><p id="084f" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">接下来，我们将导入所有的标准dash库。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="b84a" class="mo lx iq ny b gy oc od l oe of">!pip install -q jupyter-dash</span><span id="3d22" class="mo lx iq ny b gy og od l oe of">from jupyter_dash import JupyterDash<br/>import dash_core_components as dcc<br/>import dash_html_components as html<br/>from dash.dependencies import Input, Output</span></pre><p id="6f2f" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">最后，我们将安装这个博客的专用库:dash_cytoscape，Plotly Dash的cytoscape库。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="ebd0" class="mo lx iq ny b gy oc od l oe of">!pip install dash_cytoscape</span><span id="8b5a" class="mo lx iq ny b gy og od l oe of">import dash_cytoscape as cyto</span></pre><p id="9aea" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">太好了！现在让我们创建应用程序的布局！</p><h2 id="e5c1" class="mo lx iq bd ly mp mq dn mc mr ms dp mg mt mu mv mi mw mx my mk mz na nb mm nc bi translated">步骤二:创建应用程序布局</h2><p id="d9ac" class="pw-post-body-paragraph kz la iq lc b ld nd jr lf lg ne ju li mt nf ll lm mw ng lp lq mz nh lt lu lv ij bi translated">首先，让我们创建应用程序，初始化一个JupyterDash仪表板。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="34b2" class="mo lx iq ny b gy oc od l oe of">app = JupyterDash(__name__)</span></pre><p id="d2e6" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">接下来，我们将组件添加到我们的仪表板。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="d779" class="mo lx iq ny b gy oc od l oe of">app.layout = html.Div([<br/>   html.H1("CytoTG + Spotify"),<br/>   html.H2("Style"),</span><span id="fe32" class="mo lx iq ny b gy og od l oe of">dcc.Dropdown(id = "layout", options=[<br/>      {"value": "preset", "label": "preset"},<br/>      {"value": "random", "label": "random"},<br/>      {"value": "grid", "label": "grid"},<br/>      {"value": "circle", "label": "circle"},<br/>      {"value": "concentric", "label": "concentric"},<br/>      {"value": "breadthfirst", "label": "breadthfirst"},<br/>      {"value": "cose", "label": "cose"},<br/>   ], value="circle", clearable=False),</span><span id="e4f5" class="mo lx iq ny b gy og od l oe of">html.H2("Data"),</span><span id="ccda" class="mo lx iq ny b gy og od l oe of">dcc.Dropdown(id = "opt", options=[<br/>      {'value': "Artist", 'label': "Artist"},<br/>      {'value': "Playlist", 'label': "Playlist"},<br/>      {'value': 'Genre', 'label': 'Genre'},<br/>      {'value': 'Song', 'label': 'Song'}<br/>   ], value="Playlist", clearable=False),</span><span id="cede" class="mo lx iq ny b gy og od l oe of">dcc.Dropdown(id = "artist", value="Altar", clearable=False),</span><span id="4989" class="mo lx iq ny b gy og od l oe of">cyto.Cytoscape(id = "cyto", layout={'name': 'circle'}, style={'width': '100%', 'height': '400px'}),</span><span id="6a22" class="mo lx iq ny b gy og od l oe of">cyto.Cytoscape(id = "scape", layout={'name': 'circle'}, style={'width': '100%', 'height': '400px'}),</span><span id="7084" class="mo lx iq ny b gy og od l oe of">])</span></pre><p id="0f36" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">我们来分析一下。我们将从标题和副标题开始。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="9ab0" class="mo lx iq ny b gy oc od l oe of">html.H1("CytoTG + Spotify"),<br/>html.H2("Style"),</span></pre><p id="4bf8" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">然后，我们将添加不同布局类型的下拉列表。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="5909" class="mo lx iq ny b gy oc od l oe of">dcc.Dropdown(id = "layout", options=[<br/>      {"value": "preset", "label": "preset"},<br/>      {"value": "random", "label": "random"},<br/>      {"value": "grid", "label": "grid"},<br/>      {"value": "circle", "label": "circle"},<br/>      {"value": "concentric", "label": "concentric"},<br/>      {"value": "breadthfirst", "label": "breadthfirst"},<br/>      {"value": "cose", "label": "cose"},<br/>   ], value="circle", clearable=False),</span></pre><p id="dd3f" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">接下来，我们将添加另一个副标题。接下来的两个下拉列表将是顶点类型和每个顶点类型的值。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="50f8" class="mo lx iq ny b gy oc od l oe of">html.H2("Data"),</span><span id="1041" class="mo lx iq ny b gy og od l oe of">dcc.Dropdown(id = "opt", options=[<br/>      {'value': "Artist", 'label': "Artist"},<br/>      {'value': "Playlist", 'label': "Playlist"},<br/>      {'value': 'Genre', 'label': 'Genre'},<br/>      {'value': 'Song', 'label': 'Song'}<br/>   ], value="Playlist", clearable=False),</span><span id="f0ff" class="mo lx iq ny b gy og od l oe of">dcc.Dropdown(id = "artist", value="Altar", clearable=False),</span></pre><p id="1ef0" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">最后，我们将添加两张细胞图。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="8599" class="mo lx iq ny b gy oc od l oe of">cyto.Cytoscape(id = "cyto", layout={'name': 'circle'}, style={'width': '100%', 'height': '400px'}),</span><span id="db81" class="mo lx iq ny b gy og od l oe of">cyto.Cytoscape(id = "scape", layout={'name': 'circle'}, style={'width': '100%', 'height': '400px'}),</span></pre><p id="2ed0" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">完美！现在格式已经准备好了，让我们用回调来进行交互。</p><h1 id="2c7d" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">第三部分:撰写回访</h1><h2 id="af0b" class="mo lx iq bd ly mp mq dn mc mr ms dp mg mt mu mv mi mw mx my mk mz na nb mm nc bi translated">回调I:更新布局</h2><p id="3af6" class="pw-post-body-paragraph kz la iq lc b ld nd jr lf lg ne ju li mt nf ll lm mw ng lp lq mz nh lt lu lv ij bi translated">我们的第一个回调很简单:我们将获取布局下拉列表的值，并将其分配给细胞图。因此，如果布局下拉列表的值为“预设”，细胞图的布局值将为{“name”:“preset”}如果布局下拉列表的值改变，细胞图布局的值也会改变。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="3d25" class="mo lx iq ny b gy oc od l oe of">@app.callback(<br/>   Output('cyto', 'layout'),<br/>   Output('scape', 'layout'),<br/>   Input('layout', 'value')<br/>)</span><span id="57a9" class="mo lx iq ny b gy og od l oe of">def update_graph(lay):<br/>   return {"name": lay}, {"name": lay}</span></pre><p id="bc93" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">完美！现在，我们将能够使用下拉菜单修改细胞图的布局。</p><h2 id="c801" class="mo lx iq bd ly mp mq dn mc mr ms dp mg mt mu mv mi mw mx my mk mz na nb mm nc bi translated">回调II:更新下拉列表</h2><p id="6a9a" class="pw-post-body-paragraph kz la iq lc b ld nd jr lf lg ne ju li mt nf ll lm mw ng lp lq mz nh lt lu lv ij bi translated">接下来，我们将更新下拉列表。第一个下拉列表将决定我们要查看的顶点类型，然后我们需要用该顶点类型的值填充第二个下拉列表。该函数将根据opt下拉列表的值运行getArtists、getPlaylists、getGenres和/或getSongs查询。最后，它将以这种形式返回该顶点的所有选项(其中name、name1、name2等。是歌曲、艺术家、播放列表和流派的名称，取决于opt下拉列表的值)。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="0382" class="mo lx iq ny b gy oc od l oe of">[{"label": name, "value": name}, {"label": name1, "value": name1}, {"label": name2, "value": name2}]</span></pre><p id="ec9b" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">让我们把它组合成一个回调:</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="58bf" class="mo lx iq ny b gy oc od l oe of">@app.callback(<br/>   Output('artist', 'options'),<br/>   Input('opt', 'value'),<br/>)</span><span id="2e08" class="mo lx iq ny b gy og od l oe of">def update_graph(opt):</span><span id="1c91" class="mo lx iq ny b gy og od l oe of">   if opt == "Artist":</span><span id="f256" class="mo lx iq ny b gy og od l oe of">      artists = conn.runInstalledQuery("getArtists")<br/>      artists = [{"label": i["attributes"]["name"], "value": i["attributes"]["name"]} for i in artists[0]["Seed"]]<br/>      return artists</span><span id="d67d" class="mo lx iq ny b gy og od l oe of">   elif opt == "Playlist":</span><span id="734d" class="mo lx iq ny b gy og od l oe of">      playlists = conn.runInstalledQuery("getPlaylists")<br/>      playlists = [{"label": i["attributes"]["name"], "value": i["attributes"]["name"]} for i in playlists[0]["Seed"]]<br/>      return playlists</span><span id="fbc9" class="mo lx iq ny b gy og od l oe of">   elif opt == "Genre":</span><span id="0842" class="mo lx iq ny b gy og od l oe of">      genres = conn.runInstalledQuery("getGenres")<br/>      genres = [{"label": i["attributes"]["name"], "value": i["attributes"]["name"]} for i in genres[0]["Seed"]]<br/>      return genres</span><span id="a40d" class="mo lx iq ny b gy og od l oe of">   elif opt == "Song":</span><span id="064a" class="mo lx iq ny b gy og od l oe of">      songs = conn.runInstalledQuery("getSongs")<br/>      songs = [{"label": i["attributes"]["name"], "value": i["attributes"]["name"]} for i in songs[0]["Seed"]]<br/>      return songs</span></pre><h2 id="c95b" class="mo lx iq bd ly mp mq dn mc mr ms dp mg mt mu mv mi mw mx my mk mz na nb mm nc bi translated">回调III:更新第一个细胞图</h2><p id="8a88" class="pw-post-body-paragraph kz la iq lc b ld nd jr lf lg ne ju li mt nf ll lm mw ng lp lq mz nh lt lu lv ij bi translated">这个回调比较长，可以在笔记本里查看完整的功能。但是，我们将分解关键组件。</p><p id="8921" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">在标题中，我们将输出作为元素(顶点和边)，接受opt(顶点类型)和artist(顶点类型的特定值)这两个下拉列表的输入。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="75bf" class="mo lx iq ny b gy oc od l oe of">@app.callback(<br/>   Output('cyto', 'elements'),<br/>   Input('artist', 'value'),<br/>   Input('opt', 'value'),<br/>)<br/>def update_graph(art, opt):</span></pre><p id="72a1" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">接下来，对于前三种顶点类型，它有一个if语句，使用opt检查顶点的类型。然后，运行getSongsByXXX，其中XXX是顶点类型(艺术家、播放列表和流派)。将数据格式化如下:</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="84b9" class="mo lx iq ny b gy oc od l oe of">{"data": {'id': XXX, 'label': XXX, 'classes': YYY}}</span></pre><p id="a7c4" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">总的来说，它看起来像这样:</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="106b" class="mo lx iq ny b gy oc od l oe of">if opt == "Artist":</span><span id="434a" class="mo lx iq ny b gy og od l oe of">   res = conn.runInstalledQuery("getSongsByArtist", {"artist": art})[0]["@@songs"] # Runs query<br/>   cyto_data = [{'data': {'id': art, 'label': art, 'classes': 'artist'}}] # Adds artist vertex<br/>   for i in res:<br/>      cyto_data.append({"data": {'id': i['name'], 'label': i['name'], 'classes': 'song'}}) # Adds songs vertices<br/>      cyto_data.append({'data': {'source': art, 'target': i['name']}}) # Adds edges<br/>   return cyto_data</span></pre><p id="5463" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">对艺术家、播放列表和流派重复此操作。然而，宋将略有不同。运行“getVerticesFromSongs”查询。然后为每种类型添加顶点和边。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="2d56" class="mo lx iq ny b gy oc od l oe of">if opt == "Song":</span><span id="db4b" class="mo lx iq ny b gy og od l oe of">   res = conn.runInstalledQuery("getVerticesFromSongs", {"song_name": art})[0]["connectedVals"] # Runs query<br/>   cyto_data = [{'data': {'id': art, 'label': art, 'classes': 'song'}}] # Adds song vertex</span><span id="a294" class="mo lx iq ny b gy og od l oe of">   for i in res:</span><span id="6296" class="mo lx iq ny b gy og od l oe of">      if i['vertex_type'] == 'genre':<br/>         cyto_data.append({"data": {'id': i['name'], 'label': i['name'], 'classes': 'genre'}}) # Adds genres vertices</span><span id="d370" class="mo lx iq ny b gy og od l oe of">      if i['vertex_type'] == 'artist':<br/>         cyto_data.append({"data": {'id': i['name'], 'label': i['name'], 'classes': 'artist'}}) # Adds artist vertices</span><span id="9519" class="mo lx iq ny b gy og od l oe of">      if i['vertex_type'] == 'playlist':<br/>         cyto_data.append({"data": {'id': i['name'], 'label': i['name'], 'classes': 'playlist'}}) # Adds playlist vertices</span><span id="efe3" class="mo lx iq ny b gy og od l oe of">      cyto_data.append({'data': {'source': art, 'target': i['name']}}) # Adds edges</span><span id="6f06" class="mo lx iq ny b gy og od l oe of">   return cyto_data</span></pre><h2 id="5abc" class="mo lx iq bd ly mp mq dn mc mr ms dp mg mt mu mv mi mw mx my mk mz na nb mm nc bi translated">回调IV:更新第二个细胞图</h2><p id="e73f" class="pw-post-body-paragraph kz la iq lc b ld nd jr lf lg ne ju li mt nf ll lm mw ng lp lq mz nh lt lu lv ij bi translated">太棒了。我们现在是在最后的回调！同样，这个查询对于博客来说太长了，所以它将被分段显示。</p><p id="bdcb" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">输入将是在第一个细胞图中点击的顶点，输出将是第二个细胞图的顶点和边。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="4198" class="mo lx iq ny b gy oc od l oe of">@app.callback(<br/>   Output('scape', 'elements'),<br/>   Input('cyto', 'tapNodeData'),<br/>)<br/>def update_graph(main_data):</span></pre><p id="710b" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">接下来，我们将只返回main_data存在的数据。接下来，我们将分配art和opt值，然后查询将与之前完全相同。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="51f4" class="mo lx iq ny b gy oc od l oe of">if (main_data):<br/>   art = main_data["id"]<br/>   opt = main_data["classes"]</span></pre><p id="a450" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">最后，如果main_data不存在(没有点击任何东西)，就返回一个空列表。</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="4b6e" class="mo lx iq ny b gy oc od l oe of">else:<br/>   return []</span></pre><p id="5d88" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">就这样，你完成了！现在让我们运行应用程序！</p><h1 id="84af" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">第四部分:运行应用程序！</h1><p id="fa24" class="pw-post-body-paragraph kz la iq lc b ld nd jr lf lg ne ju li mt nf ll lm mw ng lp lq mz nh lt lu lv ij bi translated">最后，我们将运行一行代码来激活我们所有的辛勤工作:</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="5132" class="mo lx iq ny b gy oc od l oe of">app.run_server(mode='external')</span></pre><p id="0117" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">您将看到一个链接，您可以点击该链接查看控制面板。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/5517aaf2d716882609855d7a99be282b.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*_v4n7DmmnbBOiV2wzwgtuQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">点击链接</p></figure><p id="ce1a" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">然后…瞧！您的仪表板处于活动状态！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/3af82bb59dcbe7598aed2ef29da5edd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qm5Ttk-qPRjnBfBVXthPDw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">实时仪表板</p></figure><p id="b0ff" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">如果单击某个顶点，下图将显示该顶点的连接。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/ec9c53f6b2c952da7723928870a73212.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jJ-gvGAN9QKZ_jsCoRvOjQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">两种细胞骨架</p></figure><p id="df68" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">最后，您可以切换不同的选项来创建不同的图和子图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/0f33a4ebb6a7bb91bd8cd1c57070abb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ybl-IV3u9FirZo_IqXzhew.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">更改使用的选项和数据</p></figure><h1 id="e37c" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">第五部分:祝贺+资源</h1><p id="3ab3" class="pw-post-body-paragraph kz la iq lc b ld nd jr lf lg ne ju li mt nf ll lm mw ng lp lq mz nh lt lu lv ij bi translated">恭喜你。您已经用TigerGraph数据正式创建了细胞图！</p><p id="d42d" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">如果您有任何问题，请在Discord或社区论坛中提问。</p><div class="oj ok gp gr ol om"><a href="https://discord.gg/gRHWBZNpxW" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd ir gy z fp or fr fs os fu fw ip bi translated">加入TigerGraph Discord服务器！</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">查看Discord上的TigerGraph社区-与595名其他成员一起玩，享受免费的语音和文本聊天。</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">不和谐. gg</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa kp om"/></div></div></a></div><div class="oj ok gp gr ol om"><a href="https://community.tigergraph.com/" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd ir gy z fp or fr fs os fu fw ip bi translated">老虎图</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">一个学习、提问、展示酷项目以及与其他TigerGraph开发人员交流的地方！</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">community.tigergraph.com</p></div></div><div class="ov l"><div class="pb l ox oy oz ov pa kp om"/></div></div></a></div><p id="8c15" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">最后，这是对原始细胞景观论文的引用:</p><pre class="kg kh ki kj gt nx ny nz oa aw ob bi"><span id="e86f" class="mo lx iq ny b gy oc od l oe of">Shannon P, Markiel A, Ozier O, Baliga NS, Wang JT, Ramage D, Amin N, Schwikowski B, Ideker T.</span><span id="2e67" class="mo lx iq ny b gy og od l oe of">Cytoscape: a software environment for integrated models of biomolecular interaction networks</span><span id="c247" class="mo lx iq ny b gy og od l oe of">Genome Research 2003 Nov; 13(11):2498-504</span></pre><p id="3b5a" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">您可以在这个Colab笔记本中跟随:</p><div class="oj ok gp gr ol om"><a href="https://colab.research.google.com/drive/1zXSVNFe1f26UdFIXZisfRZ4TWH9sbdX9?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd ir gy z fp or fr fs os fu fw ip bi translated">谷歌联合实验室—TG+细胞图</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">TigerGraph和细胞图整合</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">colab.research.google.com</p></div></div><div class="ov l"><div class="pc l ox oy oz ov pa kp om"/></div></div></a></div><p id="13d7" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">接下来，使用您自己的数据创建您自己的TigerGraph-Cytoscape集成！一旦你这样做了，一定要分享它，让你的条纹在社区贡献计划！</p><div class="oj ok gp gr ol om"><a href="https://www.tigergraph.com/community-contribution/" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd ir gy z fp or fr fs os fu fw ip bi translated">图表分析用例|图表数据库解决方案</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">使用TigerGraph的图形数据库解决方案连接、分析和学习数据。探索图表分析使用…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">www.tigergraph.com</p></div></div><div class="ov l"><div class="pd l ox oy oz ov pa kp om"/></div></div></a></div><p id="e6f9" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mt lk ll lm mw lo lp lq mz ls lt lu lv ij bi translated">非常感谢你阅读这个博客，我迫不及待地想看到你创造的很酷的项目！</p><blockquote class="kw kx ky"><p id="5f87" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">注:除非另有说明，所有图片均由作者(Shreya Chaudhary)创作。</p></blockquote></div></div>    
</body>
</html>