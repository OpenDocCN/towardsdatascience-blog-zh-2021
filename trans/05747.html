<html>
<head>
<title>Turn JSON into Actionable Data — Lunch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将JSON转化为可操作的数据—午餐</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/turn-json-into-actionable-data-lunch-fb5a2834212f?source=collection_archive---------29-----------------------#2021-05-22">https://towardsdatascience.com/turn-json-into-actionable-data-lunch-fb5a2834212f?source=collection_archive---------29-----------------------#2021-05-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/10581653973c4c9ce7590a8b064e850d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Em4lY8WlTWAPj7ytVUFxIg.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">作者照片</p></figure><p id="5177" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">心理学认为，在我们的短期记忆中，人类一次能够处理多达7条信息。这就是为什么我们很难快速处理JSON对象。信息太多了，我们小小的大脑容纳不下。要将JSON转换成可操作的数据，我们需要将其加载到表中，并使用SQL缩小范围。</p><p id="e99c" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这里有一些有趣的JSON资源，其中的食谱比我能理解的还要多。我想总结一下这些数据，找出一些好吃的东西来做——最好是在午饭前，因为我饿了。我将使用JSON解析把它加载到Snowflake中。</p><ul class=""><li id="c3e0" class="ld le it kh b ki kj km kn kq lf ku lg ky lh lc li lj lk ll bi translated">阿特金斯标签中的食谱</li><li id="ab96" class="ld le it kh b ki ln km lo kq lp ku lq ky lr lc li lj lk ll bi translated"><a class="ae lm" href="https://github.com/fictivekin/openrecipes" rel="noopener ugc nofollow" target="_blank">公开菜谱</a></li></ul><p id="534b" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我可以看到像https://schema.org/Recipe<a class="ae lm" href="https://schema.org/Recipe" rel="noopener ugc nofollow" target="_blank">这样的JSON模式，但是我的小脑袋就是不能理解它。这就是为什么我会使用像雪花数据库这样的工具将数据转换成表格，并将其总结成小块。</a></p><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ls"><img src="../Images/8f38ecd4560c675b3eb18d1aebe49e9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vHdMpAMPnUYgn3a04McqgQ.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">作者照片</p></figure><p id="217f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在Snowflake中存放数据的最佳方式是使用存储集成来避免密码共享并正确利用角色。</p><ul class=""><li id="95c7" class="ld le it kh b ki kj km kn kq lf ku lg ky lh lc li lj lk ll bi translated"><a class="ae lm" href="https://docs.snowflake.com/en/sql-reference/sql/create-storage-integration.html" rel="noopener ugc nofollow" target="_blank">创建存储集成</a></li></ul><p id="55f3" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">一旦你有了一个合适的存储集成，把上面的食谱复制到S3的stage文件夹中，然后为每个文件夹创建一个stage。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="dafa" class="mc md it ly b gy me mf l mg mh">create or replace stage owlmtn.stage.recipes<br/>storage_integration = azrius_data<br/>url = 's3://my-s3-data-bucket/stage/recipes';</span></pre><p id="3106" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">从查询将普通JSON转换成表开始。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="4603" class="mc md it ly b gy me mf l mg mh">create or replace table tab_atkins_recipes as<br/>select t.KEY as ID, value:name::String name, value:tags tags_variant, value:ingredients ingredients_variant<br/>from <strong class="ly iu">@owlmtn.stage.recipes </strong>(<br/>                        pattern =&gt;'.*.json',<br/>                        file_format =&gt; stage.json_file_format) s,<br/>     table(flatten((s."$1"))) t;</span></pre><p id="93a1" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">该表为我提供了一种快速查询数据库的方法，以找出午餐做什么。我们吃素吧。当然，还有…我要用完鸡蛋了。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="d848" class="mc md it ly b gy me mf l mg mh">select *<br/>from tab_atkins_recipes<br/>where tags_variant like '%vegetarian%'<br/>and ingredients_variant like '%eggs%';</span></pre><p id="36e1" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这产生了28个结果。太多了，我的小脑袋无法理解。煎蛋卷怎么样？</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="43ad" class="mc md it ly b gy me mf l mg mh">select *<br/>from tab_atkins_recipes<br/>where tags_variant like '%vegetarian%'<br/>and ingredients_variant like '%eggs%'<br/>and name like '%omelet%';</span></pre><p id="c4cf" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">通过查看表格，我可以很容易地理解做出选择所需的信息。我想我会选择墨西哥马铃薯煎蛋卷。</p><figure class="lt lu lv lw gt ju"><div class="bz fp l di"><div class="mi mj l"/></div></figure><h1 id="2026" class="mk md it bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">结论</h1><p id="936e" class="pw-post-body-paragraph kf kg it kh b ki nh kk kl km ni ko kp kq nj ks kt ku nk kw kx ky nl la lb lc im bi translated">将JSON数据转换成表格是理解、交流和决策的强大工具。表格布局在我们的大脑中组织数据，并允许我们快速进行关联。</p><p id="6b2c" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">将雪花实例上的JSON转换放在手边，并在需要生成可操作的事件时使用JSON数据上的转换，即使该事件只是午餐。</p></div></div>    
</body>
</html>