<html>
<head>
<title>Build a Dash app with Python in 7 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python在7分钟内构建一个Dash应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-a-dash-app-with-python-in-7-minutes-72b6cca7d268?source=collection_archive---------4-----------------------#2021-08-02">https://towardsdatascience.com/build-a-dash-app-with-python-in-7-minutes-72b6cca7d268?source=collection_archive---------4-----------------------#2021-08-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="50f3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Python从头开始创建一个漂亮的可视化应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/99f215a60869b5093f5c7c660fe3b196.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*whkXZfPAdGtQcI-I.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">卢克·切瑟在<a class="ae ky" href="https://unsplash.com/s/photos/visualization?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="15e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我几个月前开始我的顶点项目时，我想为我的机器学习模型创建一个交互式仪表板。</p><p id="f6b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这个仪表板是web应用程序的形式，并在新数据进入系统时显示实时更新。</p><p id="402d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在探索了许多可视化工具之后，我决定使用Dash。</p><p id="3021" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Dash是一个开源库，允许您用Python创建交互式web应用程序。</p><p id="ba40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您经常使用Python来构建数据可视化，Dash是您的理想工具。您可以围绕您的数据分析创建一个GUI，并允许用户使用您的仪表板应用程序。</p><p id="dc45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Dash最棒的地方在于它允许你纯粹用Python来构建这些东西。您可以创建web组件，而无需编写任何HTML或Javascript代码。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="940e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，我将展示如何用Dash创建一个简单的数据可视化应用程序。</p><p id="c0cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最终产品将如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mc"><img src="../Images/cb9b8c64955008e2cfa458e6262bf7c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*7zGfOmzhOq5qEIcRO84LLA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="8220" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">步骤1:先决条件</h1><p id="81f5" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在我们开始构建应用程序之前，您需要具备:</p><ul class=""><li id="7f91" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">Python IDE:我使用Visual Studio代码进行分析，但是任何Python IDE都可以使用(<em class="nj">除了Jupyter笔记本)。</em></li><li id="43df" class="na nb it lb b lc nk lf nl li nm lm nn lq no lu nf ng nh ni bi translated">库:安装Dash、Pycountry、Plotly和Pandas</li><li id="2d4d" class="na nb it lb b lc nk lf nl li nm lm nn lq no lu nf ng nh ni bi translated">数据:我使用Zomato Kaggle数据集来构建web应用程序。我对数据集做了一些修改，使其适合这个分析，你可以在这里找到预处理版本<a class="ae ky" href="https://github.com/Natassha/zomato_clean/blob/main/restaurants_zomato.csv" rel="noopener ugc nofollow" target="_blank"/>。</li></ul><h1 id="5f5a" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">步骤2:构建仪表板</h1><p id="c7ee" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">首先，让我们导入构建应用程序所需的所有库:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="c0d2" class="nu me it nq b gy nv nw l nx ny">import dash<br/>import dash_core_components as dcc<br/>import dash_html_components as html<br/>import dash_bootstrap_components as dbc<br/>from dash.dependencies import Input, Output, State<br/>import plotly.graph_objs as go<br/>import plotly.express as px<br/>import numpy as np<br/>import pandas as pd</span></pre><p id="91d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果上面几行代码执行成功，干得好！所有的装置都工作正常。</p><p id="b24c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就在导入的下面，添加这行代码以在Dash应用程序中包含CSS样式表:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="7cbb" class="nu me it nq b gy nv nw l nx ny">external_stylesheets = ['https://codepen.io/chriddyp/pen/bWLwgP.css']</span></pre><p id="a2bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，让我们初始化Dash:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="ac02" class="nu me it nq b gy nv nw l nx ny">app = dash.Dash(__name__, external_stylesheets=external_stylesheets)<br/>server = app.server</span></pre><p id="49a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以用下面几行代码将数据帧读入Pandas:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="81f2" class="nu me it nq b gy nv nw l nx ny">df = pd.read_csv('restaurants_zomato.csv',encoding="ISO-8859-1")</span></pre><p id="7211" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据帧的头看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/892bce286a9866ff2894cc0622c8afa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mm48R8sQpGbRtpZq.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="cd66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该数据框由餐厅数据组成，即每家餐厅的名称、位置、评级和受欢迎程度。</p><p id="3941" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将在Dash应用程序中可视化这些数据。</p><p id="01b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将创建三个图表显示在我们的Dash应用程序上——一个<strong class="lb iu">地图</strong>，一个<strong class="lb iu">条形图</strong>，以及一个<strong class="lb iu">饼图</strong>。</p><p id="1d7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">先说地图。</p><p id="1c4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将按国家显示数据集中的餐馆数量。最终产品将如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/9b561cc68d2e9302b71a61afb8c46d1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*biInPZPBBdFTHO9C.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="ac24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，我们将使用数据集中的'<em class="nj"> country_iso' </em>'列。我们需要计算每个国家的餐馆数量，并创建一个新的“<em class="nj"> count </em>”列，这可以用下面几行代码来完成:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="6448" class="nu me it nq b gy nv nw l nx ny"># country iso with counts<br/>col_label = "country_code"<br/>col_values = "count"<br/><br/>v = df[col_label].value_counts()<br/>new = pd.DataFrame({<br/>    col_label: v.index,<br/>    col_values: v.values<br/>})</span></pre><p id="e927" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太好了！现在，我们可以创建包含<em class="nj">【国家/地区_ iso】</em>和<em class="nj">计数</em>列的地图:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="f0b9" class="nu me it nq b gy nv nw l nx ny">hexcode = 0<br/><br/>borders = [hexcode for x in range(len(new))],<br/>map = dcc.Graph(<br/><br/>            id='8',<br/>            figure = {<br/>            'data': [{<br/>            'locations':new['country_code'],<br/>            'z':new['count'],<br/>            'colorscale': 'Earth',<br/>            'reversescale':True,<br/>            'hover-name':new['final_country'],<br/>            'type': 'choropleth'<br/>            <br/>            }],<br/>            <br/>            'layout':{'title':dict(<br/>            <br/>                text = 'Restaurant Frequency by Location',<br/>                font = dict(size=20,<br/>                color = 'white')),<br/>                "paper_bgcolor":"#111111",<br/>                "plot_bgcolor":"#111111",<br/>                "height": 800,<br/>                "geo":dict(bgcolor= 'rgba(0,0,0,0)') } <br/>                <br/>                })</span></pre><p id="a300" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面几行代码将创建地图，并根据列出的餐馆数量给每个区域着色。</p><p id="e5cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以开始创建条形图了。</p><p id="7f85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您查看上面显示的地图，印度在数据框中拥有最多的餐厅。数据框中列出的8，155家餐厅位于印度。</p><p id="a0a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们用下面几行代码来看看印度最受欢迎的餐馆:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="e9d4" class="nu me it nq b gy nv nw l nx ny">df2 = pd.DataFrame(df.groupby(by='Restaurant Name')['Votes'].mean())<br/>df2 = df2.reset_index()<br/>df2 = df2.sort_values(['Votes'],ascending=False)<br/>df3 = df2.head(10)<br/><br/>bar1 =  dcc.Graph(id='bar1',<br/>              figure={<br/>        'data': [go.Bar(x=df3['Restaurant Name'],<br/>                        y=df3['Votes'])],<br/>        'layout': {'title':dict(<br/>            text = 'Top Restaurants in India',<br/>            font = dict(size=20,<br/>            color = 'white')),<br/>        "paper_bgcolor":"#111111",<br/>        "plot_bgcolor":"#111111",<br/>        'height':600,<br/>        "line":dict(<br/>                color="white",<br/>                width=4,<br/>                dash="dash",<br/>            ),<br/>        'xaxis' : dict(tickfont=dict(<br/>            color='white'),showgrid=False,title='',color='white'),<br/>        'yaxis' : dict(tickfont=dict(<br/>            color='white'),showgrid=False,title='Number of Votes',color='white')<br/>    }})</span></pre><p id="a0c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的代码将呈现一个如下所示的条形图:</p><p id="85e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">(<em class="nj">注意，在完成所有组件的创建和显示之前，您还不能运行代码)</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/f65582403f3843085b315a4a26f6ac8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/0*iD5spiaEOrvFh-2P.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="bb20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们创建最终的图表。</p><p id="aaef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将查看数据集中的总体评分分布:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="93b6" class="nu me it nq b gy nv nw l nx ny">col_label = "Rating text"<br/>col_values = "Count"<br/><br/>v = df[col_label].value_counts()<br/>new2 = pd.DataFrame({<br/>    col_label: v.index,<br/>    col_values: v.values<br/>})<br/><br/>pie3 = dcc.Graph(<br/>        id = "pie3",<br/>        figure = {<br/>          "data": [<br/>            {<br/>            "labels":new2['Rating text'],<br/>            "values":new2['Count'],<br/>              "hoverinfo":"label+percent",<br/>              "hole": .7,<br/>              "type": "pie",<br/>                 'marker': {'colors': [<br/>                                                   '#0052cc',  <br/>                                                   '#3385ff',<br/>                                                   '#99c2ff'<br/>                                                  ]<br/>                                       },<br/>             "showlegend": True<br/>}],<br/>          "layout": {<br/>                "title" : dict(text ="Rating Distribution",<br/>                               font =dict(<br/>                               size=20,<br/>                               color = 'white')),<br/>                "paper_bgcolor":"#111111",<br/>                "showlegend":True,<br/>                'height':600,<br/>                'marker': {'colors': [<br/>                                                 '#0052cc',  <br/>                                                 '#3385ff',<br/>                                                 '#99c2ff'<br/>                                                ]<br/>                                     },<br/>                "annotations": [<br/>                    {<br/>                        "font": {<br/>                            "size": 20<br/>                        },<br/>                        "showarrow": False,<br/>                        "text": "",<br/>                        "x": 0.2,<br/>                        "y": 0.2<br/>                    }<br/>                ],<br/>                "showlegend": True,<br/>                "legend":dict(fontColor="white",tickfont={'color':'white' }),<br/>                "legenditem": {<br/>    "textfont": {<br/>       'color':'white'<br/>     }<br/>              }<br/>        } }<br/>)</span></pre><p id="5473" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由上述代码创建的饼图将如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/eec26a9173db18321e60f05ed0253621.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/0*i8o08Y9MIEbc88Zp.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="4b63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经创建了所有三个图表，让我们在网页上显示它们并运行Dash应用程序。</p><p id="aa2c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们首先需要想出我们的web应用程序的页面布局和结构。</p><p id="ee54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Dash组件遵循网格结构(类似于CSS网格布局)。Dash有三个核心组件——行、列和容器。</p><p id="c8e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以以任何方式排列这些组件，以适合页面上的元素。</p><p id="4167" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们只有三张图表，所以我想出了这个简单的布局:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/826b218242928a9eaf88c991b3036c7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/0*vshKwOEI7MUoU9Dt.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="7128" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这些图表，我们将只使用两行，第二行将有两列来容纳条形图和饼图。</p><p id="1ee0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是在Dash中创建这样的布局的一些代码:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="4724" class="nu me it nq b gy nv nw l nx ny">graphRow1 = dbc.Row([dbc.Col(map,md=12)])<br/>graphRow2 = dbc.Row([dbc.Col(bar1, md=6), dbc.Col(pie3, md=6)])</span></pre><p id="e0d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在需要做的就是定义我们的应用程序布局并运行服务器:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="805e" class="nu me it nq b gy nv nw l nx ny">app.layout = html.Div([navbar,html.Br(),graphRow1,html.Br(),graphRow2], style={'backgroundColor':'black'})<br/><br/>if __name__ == '__main__':<br/>    app.run_server(debug=True,port=8056)</span></pre><p id="d279" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，Dash在端口8050上运行。如果正在使用，您可以手动指定要运行它的端口。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="34cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经完成了仪表板应用程序的编码。</p><p id="a9a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只需运行Python应用程序并导航至仪表盘位置，您将看到您的可视化效果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mc"><img src="../Images/cb9b8c64955008e2cfa458e6262bf7c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*7zGfOmzhOq5qEIcRO84LLA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="7f06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是这个Dash项目的<strong class="lb iu">完整代码</strong>:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="d523" class="nu me it nq b gy nv nw l nx ny">import dash<br/>import dash_core_components as dcc<br/>import dash_html_components as html<br/>import dash_bootstrap_components as dbc<br/>from dash.dependencies import Input, Output, State<br/>import chart_studio.plotly as py<br/>import plotly.graph_objs as go<br/>import plotly.express as px<br/>external_stylesheets =['https://codepen.io/chriddyp/pen/bWLwgP.css', dbc.themes.BOOTSTRAP, 'style.css']<br/>import numpy as np<br/>import pandas as pd <br/><br/>app = dash.Dash(__name__, external_stylesheets=external_stylesheets)<br/>server = app.server <br/><br/>df = pd.read_csv('restaurants_zomato.csv',encoding="ISO-8859-1")<br/><br/>navbar = dbc.Nav()<br/><br/><br/># country iso with counts<br/>col_label = "country_code"<br/>col_values = "count"<br/><br/>v = df[col_label].value_counts()<br/>new = pd.DataFrame({<br/>    col_label: v.index,<br/>    col_values: v.values<br/>})<br/><br/>hexcode = 0<br/>borders = [hexcode for x in range(len(new))],<br/>map = dcc.Graph(<br/>            id='8',<br/>            figure = {<br/>            'data': [{<br/>            'locations':new['country_code'],<br/>            'z':new['count'],<br/>            'colorscale': 'Earth',<br/>            'reversescale':True,<br/>            'hover-name':new['country_code'],<br/>            'type': 'choropleth'<br/>            }],<br/>            'layout':{'title':dict(<br/>                text = 'Restaurant Frequency by Location',<br/>                font = dict(size=20,<br/>                color = 'white')),<br/>                "paper_bgcolor":"#111111",<br/>                "plot_bgcolor":"#111111",<br/>                "height": 800,<br/>                "geo":dict(bgcolor= 'rgba(0,0,0,0)') } })<br/><br/><br/># groupby country code/city and count rating<br/>df2 = pd.DataFrame(df.groupby(by='Restaurant Name')['Votes'].mean())<br/>df2 = df2.reset_index()<br/>df2 = df2.sort_values(['Votes'],ascending=False)<br/>df3 = df2.head(10)<br/><br/>bar1 =  dcc.Graph(id='bar1',<br/>              figure={<br/>        'data': [go.Bar(x=df3['Restaurant Name'],<br/>                        y=df3['Votes'])],<br/>        'layout': {'title':dict(<br/>            text = 'Top Restaurants in India',<br/>            font = dict(size=20,<br/>            color = 'white')),<br/>        "paper_bgcolor":"#111111",<br/>        "plot_bgcolor":"#111111",<br/>        'height':600,<br/>        "line":dict(<br/>                color="white",<br/>                width=4,<br/>                dash="dash",<br/>            ),<br/>        'xaxis' : dict(tickfont=dict(<br/>            color='white'),showgrid=False,title='',color='white'),<br/>        'yaxis' : dict(tickfont=dict(<br/>            color='white'),showgrid=False,title='Number of Votes',color='white')<br/>    }})<br/><br/><br/># pie chart - rating<br/><br/>col_label = "Rating text"<br/>col_values = "Count"<br/><br/>v = df[col_label].value_counts()<br/>new2 = pd.DataFrame({<br/>    col_label: v.index,<br/>    col_values: v.values<br/>})<br/><br/>pie3 = dcc.Graph(<br/>        id = "pie3",<br/>        figure = {<br/>          "data": [<br/>            {<br/>            "labels":new2['Rating text'],<br/>            "values":new2['Count'],<br/>              "hoverinfo":"label+percent",<br/>              "hole": .7,<br/>              "type": "pie",<br/>                 'marker': {'colors': [<br/>                                                   '#0052cc',  <br/>                                                   '#3385ff',<br/>                                                   '#99c2ff'<br/>                                                  ]<br/>                                       },<br/>             "showlegend": True<br/>}],<br/>          "layout": {<br/>                "title" : dict(text ="Rating Distribution",<br/>                               font =dict(<br/>                               size=20,<br/>                               color = 'white')),<br/>                "paper_bgcolor":"#111111",<br/>                "showlegend":True,<br/>                'height':600,<br/>                'marker': {'colors': [<br/>                                                 '#0052cc',  <br/>                                                 '#3385ff',<br/>                                                 '#99c2ff'<br/>                                                ]<br/>                                     },<br/>                "annotations": [<br/>                    {<br/>                        "font": {<br/>                            "size": 20<br/>                        },<br/>                        "showarrow": False,<br/>                        "text": "",<br/>                        "x": 0.2,<br/>                        "y": 0.2<br/>                    }<br/>                ],<br/>                "showlegend": True,<br/>                "legend":dict(fontColor="white",tickfont={'color':'white' }),<br/>                "legenditem": {<br/>    "textfont": {<br/>       'color':'white'<br/>     }<br/>              }<br/>        } }<br/>)<br/><br/>graphRow1 = dbc.Row([dbc.Col(map,md=12)])<br/>graphRow2 = dbc.Row([dbc.Col(bar1, md=6), dbc.Col(pie3, md=6)])<br/><br/>app.layout = html.Div([navbar,html.Br(),graphRow1,html.Br(),graphRow2], style={'backgroundColor':'black'})<br/><br/><br/>if __name__ == '__main__':<br/>    app.run_server(debug=True,port=8056)</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="2f80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以摆弄代码，尝试改变图表的颜色和布局。您甚至可以尝试使用上面的数据集创建新行和添加更多图表。</p><p id="9015" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Dash有比我在本教程中提到的更多的功能。您可以创建过滤器、卡片，并添加实时更新数据。如果你喜欢这篇教程，我会写另一篇介绍Dash更多特性和功能的文章。</p><p id="9c96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读，祝您有美好的一天:)</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="9d52" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文原载<a class="ae ky" href="https://www.natasshaselvaraj.com/" rel="noopener ugc nofollow" target="_blank">此处</a>。</p></div></div>    
</body>
</html>