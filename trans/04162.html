<html>
<head>
<title>All you need to know to build your first Shiny app</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建您的第一个闪亮应用程序所需要知道的一切</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/all-you-need-to-know-to-build-your-first-shiny-app-653603fd80d9?source=collection_archive---------14-----------------------#2021-04-08">https://towardsdatascience.com/all-you-need-to-know-to-build-your-first-shiny-app-653603fd80d9?source=collection_archive---------14-----------------------#2021-04-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6db8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">涵盖了从数据准备到连接用户界面和服务器再到在线发布应用程序的基本概念</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/828259af6b253fb595820cba29c4d60a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oOP8GZqgttZP5xyt"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">斯蒂芬·道森在Unsplash<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">拍摄的照片</a></p></figure><p id="7c40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">hiny是数据分析师和数据科学家手中开发基于web的应用程序和交互式数据可视化的强大工具之一。闪亮的应用程序包含两个重要的功能:UI和服务器功能。Shiny的一个关键特性是使用反应式编程，在输入发生变化时自动更新输出。</p><p id="ef75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用联合国粮食及农业组织(FAO)的数据集来获得从头构建一个闪亮应用程序的实践经验(应用程序的<a class="ae ky" href="https://abhinavmalasi.shinyapps.io/World_food_waste/" rel="noopener ugc nofollow" target="_blank">链接</a>)。本文分为以下几个部分:</p><ol class=""><li id="0381" class="me mf it lb b lc ld lf lg li mg lm mh lq mi lu mj mk ml mm bi translated">Shiny概述:了解Shiny的工作原理和不同的可用选项</li><li id="96dc" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">数据准备:准备应用程序要使用的数据</li><li id="72b7" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">编写UI代码</li><li id="4db7" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">连接到服务器</li><li id="4182" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">运行和发布应用程序</li></ol><h1 id="3fbe" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">闪亮的概览</h1><p id="1f53" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">RStudio开发的Shiny是一个同名的包。闪亮的框架由CSS、HTML和Java组成。这给了它添加功能的自由。在闪亮服务器的帮助下，这些应用程序托管在shinyapps.io上。</p><p id="b95e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从闪亮的RStudio <a class="ae ky" href="https://shiny.rstudio.com/gallery/" rel="noopener ugc nofollow" target="_blank">画廊</a>看一些例子来获得动力。Shiny还为用户提供演示、布局和<a class="ae ky" href="https://shiny.rstudio.com/gallery/widget-gallery.html" rel="noopener ugc nofollow" target="_blank">小部件</a>。这也有助于确定它们的工作原理，并为您自己的应用选择它们。</p><p id="b802" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以让我们开始吧…</p><p id="7a77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要开始构建应用程序，我们可以打开一个新的闪亮的Web应用程序文档，如下图所示。这将弹出一个新窗口，提示您选择应用程序名称、应用程序类型(选择单个文件选项)，并设置工作目录。这将打开一个名为app.R的文件。该文件有一个默认代码为“老忠实喷泉数据”应用程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/0c2b0c6f61b7794e3c7c37a3707d5e77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*cQuXrF2adgDmrWA9RfBMSQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="76a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个选择是打开一个新的R脚本(Windows的Ctrl+Shift+N ),并以app的名称保存它。R ( <strong class="lb iu">这很重要</strong>)在选择的文件夹中。然后只需在编辑器中键入<code class="fe nq nr ns nt b">shinyapp</code>，这将打印出应用程序的框架，如下图所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/66801c21878339c2e16d94e37ea98bcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/format:webp/1*GUtrC55MZS0Ii4rtRx1mHQ.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="68fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此时，我们将使用命令<code class="fe nq nr ns nt b">install.packages(“shiny”)</code>确保我们已经在over设备上安装了闪亮的包。</p><p id="f52f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行<code class="fe nq nr ns nt b">shinyapp</code>命令后，我们看到编辑器上显示了4个内容。</p><ol class=""><li id="e000" class="me mf it lb b lc ld lf lg li mg lm mh lq mi lu mj mk ml mm bi translated">它通过调用<code class="fe nq nr ns nt b">library(shiny)</code>来加载闪亮的包。</li><li id="1ed7" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">UI是用户界面，它决定了用户如何与HTML网页交互。</li><li id="76c6" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">服务器是应用程序的后端，UI端的所有交互都在这里实现，它们的结果被发送回UI进行显示。</li><li id="b588" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated"><code class="fe nq nr ns nt b">shinyapp</code>功能是构建app。</li></ol><p id="f964" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在深入研究UI和服务器提供的功能细节之前，让我们来设计一下用户界面的布局。一旦解决了这个问题，构建我们的应用程序将会更加直观。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/7f53d3bb4fc7c2555f8d8a771e189eec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*ciD-SSt60mrHlg_v3UV5zg.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="3cc6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以看看UI和服务器提供的功能。</p><h2 id="34a3" class="nw mt it bd mu nx ny dn my nz oa dp nc li ob oc ne lm od oe ng lq of og ni oh bi translated"><strong class="ak">用户界面控件</strong></h2><p id="900d" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">这部分将处理用户在面板上可以访问的不同输入和输出控件。面板的宽度为12。我们可以定义我们选择的布局，并相应地定制它。实现这一目标的关键功能是:</p><p id="d933" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"><em class="oi">【fluid page()</em></strong>:确保应用自动调整以填充浏览器空间。</p><p id="4534" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="oi"> titlePanel() </em> </strong>:这应该是默认情况下在代码中标识应用程序将做什么。</p><p id="cb96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"><code class="fe nq nr ns nt b">sidebarLayout()</code>需要的其他功能是<code class="fe nq nr ns nt b">sidebarPanel()</code>和<code class="fe nq nr ns nt b">mainPanel()</code>。与在面板上向与侧边栏相关的最终用户显示功能相关的所有代码都将在<code class="fe nq nr ns nt b">sidebarPanel()</code>中，而对于主面板，则在<code class="fe nq nr ns nt b">mainPanel()</code>函数中。</strong></p><pre class="kj kk kl km gt oj nt ok ol aw om bi"><span id="d114" class="nw mt it nt b gy on oo l op oq">ui &lt;- fluidPage(<br/>  titlePanel("My first App"),<br/>  <br/>  sidebarLayout(<br/>    sidebarPanel("Sidebar panel"),<br/>    mainPanel("Main panel")<br/>  )<br/>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/590683357f6041eff7f797f94ad81af7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bYvk63qFR6n-f8uymIu9kQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="eead" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="oi"> fluidRow() </em> </strong>:另一种方式可以是将面板分成多行。并且这些行中的每一行都可以有多列。通过多次使用<code class="fe nq nr ns nt b">fluidRow()</code>函数实现多行，在<code class="fe nq nr ns nt b">fluidRow()</code>函数中，我们可以使用<code class="fe nq nr ns nt b">column()</code>定义列。</p><pre class="kj kk kl km gt oj nt ok ol aw om bi"><span id="ed26" class="nw mt it nt b gy on oo l op oq">ui &lt;- fluidPage(<br/>  titlePanel("My first App"),<br/>  <br/>  fluidRow(<br/>    titlePanel("Row 1"),<br/>    column(4,"Column 1"),<br/>    column(4,"Column 2"),<br/>    column(4,"Column 3")<br/>  ),<br/>  fluidRow(<br/>    titlePanel("Row 2"),<br/>    column(6,"Column 1"),<br/>    column(6,"Column 2")<br/>  )<br/>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/e8f369dac8e7e46d47a5645f93212a43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S0s7zr7UwFad_Hpv1-7Lww.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="2658" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们知道如何建立骨架，我们可以开始填充前端的空白空间。前端处理Shiny应用程序提供的输入和输出。</p><h2 id="709f" class="nw mt it bd mu nx ny dn my nz oa dp nc li ob oc ne lm od oe ng lq of og ni oh bi translated">输入部件</h2><p id="100f" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">用户界面中的输入部件可以是文本、数字或日期，可以使用文本字段、滑块输入、单选按钮、复选框等输入。所有输入函数都有相同的第一个参数，即标识字段。</p><blockquote class="ot ou ov"><p id="5982" class="kz la oi lb b lc ld ju le lf lg jx lh ow lj lk ll ox ln lo lp oy lr ls lt lu im bi translated">这个分配的id对于函数应该是唯一的，并且应该是仅由字母、数字和分数组成的单个字符串。</p></blockquote><p id="25aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二个参数是标签，它是用户理解要执行的操作的标识符。这个参数存在于大多数输入函数中。其他参数更具体地针对输入函数类型，最好的方法是浏览它们的文档或直观地查看<a class="ae ky" href="https://shiny.rstudio.com/gallery/widget-gallery.html" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="ad01" class="nw mt it bd mu nx ny dn my nz oa dp nc li ob oc ne lm od oe ng lq of og ni oh bi translated">输出</h2><p id="6397" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">像输入函数或输入小部件这样的输出函数有一个惟一的标识符作为它们的第一个参数。输出可以是图表、数据表、文本或总结的形式。</p><h2 id="e5e5" class="nw mt it bd mu nx ny dn my nz oa dp nc li ob oc ne lm od oe ng lq of og ni oh bi translated">计算机网络服务器</h2><p id="0803" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">服务器功能是你的应用程序的大脑，所有的决定都在这里做出，并反映到用户界面上。</p><p id="154b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经有了用Shiny构建一个应用程序所需的所有基础知识和细节，所以让我们开始吧。</p></div><div class="ab cl oz pa hx pb" role="separator"><span class="pc bw bk pd pe pf"/><span class="pc bw bk pd pe pf"/><span class="pc bw bk pd pe"/></div><div class="im in io ip iq"><h1 id="732b" class="ms mt it bd mu mv pg mx my mz ph nb nc jz pi ka ne kc pj kd ng kf pk kg ni nj bi translated">数据集和包</h1><p id="1591" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">为了构建应用程序，我们将使用粮农组织提供的粮食损失和浪费数据库。到数据集的链接在这里是<a class="ae ky" href="http://www.fao.org/platform-food-loss-waste/flw-data/en/" rel="noopener ugc nofollow" target="_blank"/>。数据由18k多行和22列组成。</p><p id="07e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用<code class="fe nq nr ns nt b">shiny</code>包来构建应用程序，<code class="fe nq nr ns nt b">readxl</code>包用于读取CSV文件，<code class="fe nq nr ns nt b">plotly</code>包用于交互式数据可视化，<code class="fe nq nr ns nt b">tidyverse</code>包用于所有数据操作，<code class="fe nq nr ns nt b">ggplot2</code>包用于绘图。</p><h1 id="ccb5" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">数据准备</h1><p id="39ec" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">在开始开发app之前，需要准备好资料。在目前的研究中，我们将在一定程度上复制粮农组织开发的应用程序。在本练习中，我们将获取两个输入，并以图表和数据表的形式生成两个输出。</p><p id="09fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装相关软件包后，使用<code class="fe nq nr ns nt b">read_csv()</code>功能读取CSV文件，同时用<em class="oi"> NA </em>值替换所有空单元格。为了简单起见，删除了一些不必要的列。因为我们对粮食损失如何随时间变化感兴趣，所以为了简单起见，带有年份数据的列被重命名为<em class="oi"> year </em>。</p><p id="3032" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，变量<em class="oi"> supplychain </em>已被定义，并被赋予我们感兴趣的参数。仅绘制相对于<em class="oi"> fsc_location1 </em>的百分比损失数据就显示了一个收割的错别字，该错别字随后被纠正。</p><p id="20b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe nq nr ns nt b">filter()</code>函数后，定义了一个新变量<em class="oi"> food_new </em>。由于我们只关心<em class="oi">供应链</em>变量中的参数，我们将数据过滤到新创建的变量中。</p><p id="cc7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">定义了一个名为<em class="oi">换行符</em>的函数，以避免稍后在UI中重复使用换行符。定义了一个名为<em class="oi">复选框</em>的新变量，包含使用<code class="fe nq nr ns nt b">checkboxGroupInput()</code>功能可获得的所有选项。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pl pm l"/></div></figure><h1 id="94ea" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">编写UI代码</h1><p id="bdb0" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">我们的目标是让用户界面带有侧边栏，主面板带有两个选项卡。我们将从<code class="fe nq nr ns nt b">fluidPage()</code>函数开始，并在其中构建所有东西。有三个主要步骤:</p><ol class=""><li id="040d" class="me mf it lb b lc ld lf lg li mg lm mh lq mi lu mj mk ml mm bi translated">使用<code class="fe nq nr ns nt b">titlePanel()</code>功能向应用程序提供航向。</li><li id="bab6" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">定义<code class="fe nq nr ns nt b">sidebarLayout()</code>功能，定义其主体部分由<code class="fe nq nr ns nt b">sidebarPanel()</code>和<code class="fe nq nr ns nt b">mainPanel()</code>组成。</li><li id="53e4" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">在<code class="fe nq nr ns nt b">mainPanel()</code>函数中，我们使用<code class="fe nq nr ns nt b"> tabsetPanel()</code>中的<code class="fe nq nr ns nt b">tabPanel()</code>函数定义标签。</li></ol><p id="4e87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦创建了框架，我们就可以开始填充细节了。我们从侧边栏面板开始，用户将在那里与数据进行交互。考虑的两种不同的交互方式是(1)滑块输入和(2)复选框。对于滑块输入，我们将使用带有<em class="oi"> id = "year" </em>，<em class="oi">label = " Select year range "</em>的<code class="fe nq nr ns nt b">sliderInput()</code>函数，设置所考虑年份的最小值和最大值以及默认年份范围。从复选框中选择选项时，将使用<code class="fe nq nr ns nt b">checkboxGroupInput()</code>功能。此函数有一个标识符，<em class="oi"> id="valuechain" </em>，<em class="oi">label = " Select value chain "</em>，<em class="oi"> check_box </em>变量，所有选项都显示给用户，默认选择值为“all”。</p><p id="9292" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在转到<code class="fe nq nr ns nt b">mainPanel()</code>功能。在<code class="fe nq nr ns nt b">tabsetPanel()</code>函数中，我们设置<em class="oi"> type="tabs" </em>在用户界面的布局上有标签。接下来，我们定义两个<code class="fe nq nr ns nt b">tabPanel()</code>来表示两个不同的选项卡。将名称分配给选项卡作为第一个参数，在我们的例子中，它们是<em class="oi">“盒图”</em>和<em class="oi">“数据表”</em>。</p><p id="1211" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦定义了输入函数，我们就开始输出函数。第一个选项卡将显示使用<code class="fe nq nr ns nt b"> plotlyOutput()</code>功能的交互图，第二个选项卡将显示使用<code class="fe nq nr ns nt b">dataTableOutput()</code>功能的数据表，这些功能生成具有内置搜索功能的动态表。像输入函数一样，输出函数的第一个参数是标识符。对于图形和表格输出，标识符值分别设置为<em class="oi">“box _ plot”</em>和<em class="oi">“food data”</em>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pl pm l"/></div></figure><h1 id="7c9e" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">连接到服务器</h1><p id="6b40" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">完成UI代码后，我们将使用UI的各种输入和输出函数中定义的标识符将UI连接到服务器。服务器函数有三个参数:输入、输出和会话。我们将只处理输入和输出参数。</p><blockquote class="ot ou ov"><p id="ffea" class="kz la oi lb b lc ld ju le lf lg jx lh ow lj lk ll ox ln lo lp oy lr ls lt lu im bi translated">session参数确保每次在网络上打开应用程序时，它都会启动一个新的会话。这样，一个用户所做的更改不会反映到另一个用户的会话中。</p></blockquote><p id="d896" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">服务器中定义了两种不同的函数:反应函数和渲染函数。我们将逐一查看它们，看看这些函数是如何与UI通信的。</p><p id="8a42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将<code class="fe nq nr ns nt b">reactive()</code>功能留到最后，先讨论渲染功能。在UI中，我们为每个输入和输出函数定义了标识符。在这里，我们将使用信息流的标识符来连接UI和服务器。</p><p id="634c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看盒图，我们看到<em class="oi">输出$box_plot </em>变量被分配给<code class="fe nq nr ns nt b">renderPlotly()</code>函数。需要注意的重要一点是，<em class="oi">输出$box_plot </em>借助于<em class="oi"> box_plot </em>标识符连接到UI中的<code class="fe nq nr ns nt b">plotlyOutput()</code>功能。UI中的每个输出功能都与服务器中的一个<code class="fe nq nr ns nt b">render()</code>功能相关联。在该应用中，UI中的<code class="fe nq nr ns nt b">plotlyOutput()</code>功能与<code class="fe nq nr ns nt b">renderPlotly()</code>关联，<code class="fe nq nr ns nt b">dataTableOutput()</code>与<code class="fe nq nr ns nt b">renderDataTable()</code>功能关联。并且为UI中的每个输出函数定义的唯一标识符<em class="oi">将其与相关的渲染函数连接起来。这样，我们就将用户界面中的盒图和数据表与服务器连接起来了。</em></p><p id="b033" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nq nr ns nt b">renderDataTable()</code>函数中，我们定义了<code class="fe nq nr ns nt b">options</code>参数，将页面长度限制为10行数据。</p><p id="9367" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在已经准备好了静态应用程序，可以在线发布了。这个应用程序所缺少的是，对滑块或复选框所做的更改不会显示在boxplot或数据表中。为了让应用程序更加动态，我们将使用<code class="fe nq nr ns nt b">reactive() </code>表达式。</p><p id="6d59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里要解决的一个关键点是，应用程序的动态特性不需要一个<code class="fe nq nr ns nt b">reactive()</code>表达式。UI的所有输入功能都可以直接连接到<code class="fe nq nr ns nt b">render()</code>功能。这种风格可能适用于具有基本功能的应用程序，但随着应用程序变得复杂，最好使用<code class="fe nq nr ns nt b">reactive()</code>表达式。</p><p id="a9f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nq nr ns nt b">reactive()</code>表达式做了两件重要的事情:它使应用程序更快更有效，消除了代码的重复，并保持渲染函数与所有外部操作的清洁。<code class="fe nq nr ns nt b">reactive()</code>表达式被分配给在Shiny中被称为<em class="oi"> variable() </em>的变量。在我们的例子中，我们定义了两个反应表达式<em class="oi"> plot1 </em>和<em class="oi"> plot2 </em>。在<em class="oi"> plot2 </em>中，对UI中的复选框输入面板进行基于条件的过滤。在<em class="oi"> plot1 </em>中，过滤与滑块输入相关联。因为我们希望这两个变化都反映在显示的输出中，所以，我们使用了<em class="oi"> plot2() </em>作为<em class="oi"> plot1 </em>的输入变量。最后，<em class="oi"> plot1() </em>被用作<code class="fe nq nr ns nt b">render()</code>函数中的数据。</p><p id="fc7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了反映用户界面上所做的更改，我们将在标识符的帮助下连接UI的输入函数，就像输出函数一样。这里，我们将使用<em class="oi">输入$valuechain </em>来反映对“选择价值链”选项所做的任何更改，这些更改将直接告诉服务器使用<code class="fe nq nr ns nt b">reactive()</code>表达式采取行动，并将反映在用户界面上的方框图和数据表中。类似地，<em class="oi">输入$year </em>将反映在绘图和数据表的滑块上所做的更改。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pl pm l"/></div></figure><h1 id="26ec" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">运行应用程序</h1><p id="79d2" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">现在您已经填写了UI和服务器的详细信息。现在是时候使用编辑器右上角的运行应用程序选项来启动应用程序了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pn"><img src="../Images/2897cd43bb56a2a9ea79a33d8a230947.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*apvZTvqo9Awl3z1-3RIHpQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="6eb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">按下运行应用程序按钮，应用程序将在一个新窗口中打开，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi po"><img src="../Images/0d2f97d9d634291029c04a2cbabd33e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MlpAEuHyDcBOPp1nT7F7ug.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="a28e" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">在线发布应用程序</h1><p id="d4a6" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">如果这是你第一次在ShinyApps.io上打开一个用户帐户，接下来，在R上安装<em class="oi"> rsconnect包</em>，然后从你的Shiny帐户复制令牌细节，并在R控制台上运行命令，这将授权你从你的笔记本电脑发布到ShinyApps.io网页。</p><p id="2c64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要在线发布应用程序，请按应用程序右上角的发布按钮(您可以参考上图)。现在将打开一个窗口，按下一步，然后选择ShinyApps.io选项。接下来的事情是选择需要发布的文件，并给你的应用程序命名，这将显示在URL中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/316987562a6bfe797419fff9ddef27d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*iIZa5BWG_c4NKysIgDZJDQ.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="8a6d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">按下“发布”后，应用程序需要几分钟才能上线。这将显示在ShinyApps网站上您帐户的仪表盘中。</p><p id="8a1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">已发布app链接:<a class="ae ky" href="https://abhinavmalasi.shinyapps.io/World_food_waste/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"/></a></p></div><div class="ab cl oz pa hx pb" role="separator"><span class="pc bw bk pd pe pf"/><span class="pc bw bk pd pe pf"/><span class="pc bw bk pd pe"/></div><div class="im in io ip iq"><h1 id="e375" class="ms mt it bd mu mv pg mx my mz ph nb nc jz pi ka ne kc pj kd ng kf pk kg ni nj bi translated">结束语</h1><p id="84ce" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">Shiny是一个强大的工具，一旦你对它的内部工作有了基本的了解，它就可以非常直观和容易地构建应用程序。它既被动又懒惰。在用户界面上所做的改变会很快反映在界面上，从而使它变得被动和懒惰，因为它只会做最少量的工作来更新应用程序。</p><p id="3919" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用Shiny构建应用程序的最佳方法是首先在一张纸上设计用户界面，以确定你需要什么。然后开始在UI中逐个添加组件，然后连接到服务器。确保为UI中的每个功能定义唯一的标识符。这样，当一个功能完成时，运行应用程序，看看它是否能根据您的需要工作。如果它是好的，然后添加其他功能，并与前一个连接。这样，在构建你的应用程序时，卡住的机会就少了。</p><p id="b1d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这能激励你构建自己的闪亮应用。有大量关于构建闪亮应用的文献和教程。从<a class="ae ky" href="https://shiny.rstudio.com/tutorial/" rel="noopener ugc nofollow" target="_blank">闪亮网站</a>的教程开始，并从网页上分享的<a class="ae ky" href="https://shiny.rstudio.com/gallery/" rel="noopener ugc nofollow" target="_blank">应用中获得灵感。然后你也可以读一读《掌握闪亮的T9》这本书，这本书很好地理解了哈德利·威克姆(Hadley Wickham)构建闪亮应用背后的思维过程。</a></p><p id="d5ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你开发了应用程序，请在评论或链接中分享你的想法。到那时，快乐的编码！</p><p id="1d3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对R的更多阅读感兴趣，请查看:</p><div class="pq pr gp gr ps pt"><a rel="noopener follow" target="_blank" href="/3-lesser-known-pipe-operators-in-tidyverse-111d3411803a"><div class="pu ab fo"><div class="pv ab pw cl cj px"><h2 class="bd iu gy z fp py fr fs pz fu fw is bi translated">Tidyverse三家不太知名的管道运营商</h2><div class="qa l"><h3 class="bd b gy z fp py fr fs pz fu fw dk translated">Tee、exposition和赋值管道操作符，用于干净的代码编写。</h3></div><div class="qb l"><p class="bd b dl z fp py fr fs pz fu fw dk translated">towardsdatascience.com</p></div></div><div class="qc l"><div class="qd l qe qf qg qc qh ks pt"/></div></div></a></div><div class="pq pr gp gr ps pt"><a rel="noopener follow" target="_blank" href="/data-visualization-using-ggplot2-5-features-worth-knowing-c0447a760335"><div class="pu ab fo"><div class="pv ab pw cl cj px"><h2 class="bd iu gy z fp py fr fs pz fu fw is bi translated">使用ggplot2的数据可视化:值得了解的5个特性</h2><div class="qa l"><h3 class="bd b gy z fp py fr fs pz fu fw dk translated">使用ggplot2包提高dataviz效率的技巧</h3></div><div class="qb l"><p class="bd b dl z fp py fr fs pz fu fw dk translated">towardsdatascience.com</p></div></div><div class="qc l"><div class="qi l qe qf qg qc qh ks pt"/></div></div></a></div><div class="pq pr gp gr ps pt"><a rel="noopener follow" target="_blank" href="/create-your-resume-with-pagedown-package-in-r-123ca6310d52"><div class="pu ab fo"><div class="pv ab pw cl cj px"><h2 class="bd iu gy z fp py fr fs pz fu fw is bi translated">用R中的pagedown包创建你的简历</h2><div class="qa l"><h3 class="bd b gy z fp py fr fs pz fu fw dk translated">使用pagedown包在1小时内制作令人印象深刻的简历</h3></div><div class="qb l"><p class="bd b dl z fp py fr fs pz fu fw dk translated">towardsdatascience.com</p></div></div><div class="qc l"><div class="qj l qe qf qg qc qh ks pt"/></div></div></a></div><div class="pq pr gp gr ps pt"><a rel="noopener follow" target="_blank" href="/7-shortcuts-worth-knowing-for-efficient-workflow-in-r-cc52c351cb73"><div class="pu ab fo"><div class="pv ab pw cl cj px"><h2 class="bd iu gy z fp py fr fs pz fu fw is bi translated">R中高效工作流值得知道的7个捷径</h2><div class="qa l"><h3 class="bd b gy z fp py fr fs pz fu fw dk translated">RStudio中常规编码的便捷键盘快捷键</h3></div><div class="qb l"><p class="bd b dl z fp py fr fs pz fu fw dk translated">towardsdatascience.com</p></div></div><div class="qc l"><div class="qk l qe qf qg qc qh ks pt"/></div></div></a></div><div class="pq pr gp gr ps pt"><a rel="noopener follow" target="_blank" href="/master-data-visualization-with-ggplot2-theme-customization-8421695d24e2"><div class="pu ab fo"><div class="pv ab pw cl cj px"><h2 class="bd iu gy z fp py fr fs pz fu fw is bi translated">使用ggplot2: theme()定制的主数据可视化</h2><div class="qa l"><h3 class="bd b gy z fp py fr fs pz fu fw dk translated">自定义ggplot2主题，为高效工作流程创建您的个性化主题模板。</h3></div><div class="qb l"><p class="bd b dl z fp py fr fs pz fu fw dk translated">towardsdatascience.com</p></div></div><div class="qc l"><div class="ql l qe qf qg qc qh ks pt"/></div></div></a></div><h2 id="93c1" class="nw mt it bd mu nx ny dn my nz oa dp nc li ob oc ne lm od oe ng lq of og ni oh bi translated">参考资料:</h2><ol class=""><li id="4bef" class="me mf it lb b lc nk lf nl li qm lm qn lq qo lu mj mk ml mm bi translated"><a class="ae ky" href="https://mastering-shiny.org/index.html" rel="noopener ugc nofollow" target="_blank">https://mastering-shiny.org/index.html</a></li><li id="18cc" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated"><a class="ae ky" href="https://datacatalog.worldbank.org/dataset/what-waste-global-database" rel="noopener ugc nofollow" target="_blank">https://data catalog . world bank . org/dataset/what-waste-global-database</a></li><li id="7cc7" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">【http://www.fao.org/platform-food-loss-waste/flw-data/en/ T4】</li><li id="73f7" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated"><a class="ae ky" href="https://shiny.rstudio.com/reference/shiny/1.5.0/" rel="noopener ugc nofollow" target="_blank">https://shiny.rstudio.com/reference/shiny/1.5.0/</a></li></ol><p id="e407" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该应用程序的完整代码的链接是<a class="ae ky" href="https://github.com/amalasi2418/Blog-post/tree/master/Blog%2012-Shiny%20app" rel="noopener ugc nofollow" target="_blank">这里是</a>。</p><p id="f50a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在<a class="ae ky" href="https://www.linkedin.com/in/abhinav-malasi/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae ky" href="https://twitter.com/malasi_abhinav" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上与我联系，跟随我的数据科学和数据可视化之旅。</p></div></div>    
</body>
</html>