<html>
<head>
<title>Makie: High-Level, Beautiful Plots</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Makie:高水平，美丽的情节</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/makie-high-level-beautiful-plots-3ae670de2fa1?source=collection_archive---------16-----------------------#2021-04-05">https://towardsdatascience.com/makie-high-level-beautiful-plots-3ae670de2fa1?source=collection_archive---------16-----------------------#2021-04-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d622" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">熟悉Makie.jl，这是一个用于Julia编程语言的高级绘图和统计图形库。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/565701e7a86f7ed0c5b46feaaaecbbf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T0YfzWqCPPtoab_tdvU1Yg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="a91e" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">介绍</h1><p id="cdc8" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi mm translated">在Julia的生态系统中，已经出现了许多可视化数据的奇妙解决方案。尽管如此，许多用户经常最终使用Plots.jl。虽然Plots.jl肯定是一个很酷的包，但重要的是要记住，该包必须提供的是来自其他编程语言的不同软件的三个独立端口。这些端口是Plot.ly、Matplotlib.pyplot和GR。默认情况下，Plots.jl使用GR可视化库，这是一个很好的库，但在许多方面非常缺乏特色。此外，像这样使用端口真的会减少预编译时间，而且使用PyCall这样的包会影响Julia的性能。有趣的是，如果你感兴趣，我确实有一个关于Plots.jl的GR后端的完整教程:</p><div class="mv mw gp gr mx my"><a rel="noopener follow" target="_blank" href="/spruce-up-your-gr-visualizations-in-julia-88a964450a7"><div class="mz ab fo"><div class="na ab nb cl cj nc"><h2 class="bd iu gy z fp nd fr fs ne fu fw is bi translated">在Julia中美化您的GR可视化</h2><div class="nf l"><h3 class="bd b gy z fp nd fr fs ne fu fw dk translated">没错，又是Julia，我保证R，Scala，Python还在这个爱情圈里</h3></div><div class="ng l"><p class="bd b dl z fp nd fr fs ne fu fw dk translated">towardsdatascience.com</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm ks my"/></div></div></a></div><p id="789c" class="pw-post-body-paragraph lq lr it ls b lt nn ju lv lw no jx ly lz np mb mc md nq mf mg mh nr mj mk ml im bi translated">还有一些其他纯粹的朱利安解决方案已经出现。在我看来，最大的例子是牛虻包。牛虻包的交互性比不上Plot.ly，但对大多数情况来说已经足够了。最重要的是，牛虻可视化很容易操作，而且看起来很好！我还写了一篇关于使用该包的教程和概述，如果您感兴趣，可以在这里查看:</p><div class="mv mw gp gr mx my"><a rel="noopener follow" target="_blank" href="/gadfly-jl-the-pure-julia-plotting-library-from-your-dreams-3ee6ca107a5c"><div class="mz ab fo"><div class="na ab nb cl cj nc"><h2 class="bd iu gy z fp nd fr fs ne fu fw is bi translated">牛虻. JL——来自你梦中的纯朱莉娅绘图库</h2><div class="nf l"><h3 class="bd b gy z fp nd fr fs ne fu fw dk translated">看看朱莉娅对2020年统计绘图的最佳选择</h3></div><div class="ng l"><p class="bd b dl z fp nd fr fs ne fu fw dk translated">towardsdatascience.com</p></div></div><div class="nh l"><div class="ns l nj nk nl nh nm ks my"/></div></div></a></div><p id="7f65" class="pw-post-body-paragraph lq lr it ls b lt nn ju lv lw no jx ly lz np mb mc md nq mf mg mh nr mj mk ml im bi translated">在Julia中还有另一个很棒的可视化库，名为Vegalite.jl。我见过许多其他科学家，他们发誓说这是Julia中最好的一个，但我仍然偏爱牛虻. jl。这是因为我发现牛虻更容易使用。Vegalite有一个奇怪的方法，它涉及到在你的绘图中为各种不同的设置使用大量的数组，而不是参数。也就是说，我要说的是，与列表中的其他选项相比，Vegalite确实有一些严肃的统计可视化。实际上，我比较了另一篇文章中提到的所有三个选项，如果您愿意，可以在这里查看:</p><div class="mv mw gp gr mx my"><a rel="noopener follow" target="_blank" href="/gadfly-jl-the-pure-julia-plotting-library-from-your-dreams-3ee6ca107a5c"><div class="mz ab fo"><div class="na ab nb cl cj nc"><h2 class="bd iu gy z fp nd fr fs ne fu fw is bi translated">牛虻. JL——来自你梦中的纯朱莉娅绘图库</h2><div class="nf l"><h3 class="bd b gy z fp nd fr fs ne fu fw dk translated">看看朱莉娅对2020年统计绘图的最佳选择</h3></div><div class="ng l"><p class="bd b dl z fp nd fr fs ne fu fw dk translated">towardsdatascience.com</p></div></div><div class="nh l"><div class="ns l nj nk nl nh nm ks my"/></div></div></a></div><blockquote class="nt"><p id="69ff" class="nu nv it bd nw nx ny nz oa ob oc ml dk translated">所有这些文章都有更多的信息可以链接，这真是太棒了。</p></blockquote><p id="cec0" class="pw-post-body-paragraph lq lr it ls b lt od ju lv lw oe jx ly lz of mb mc md og mf mg mh oh mj mk ml im bi translated">Julia语言及其绘图功能的另一个新增功能是Plot.ly打包了该语言的官方端口。我必须承认，我还没有机会尝试这一点，但我很高兴尝试一下，我甚至可能会写一篇关于它的文章，并将其与Python实现进行比较！</p><p id="b65b" class="pw-post-body-paragraph lq lr it ls b lt nn ju lv lw no jx ly lz np mb mc md nq mf mg mh nr mj mk ml im bi translated">有了生态系统中的所有这些图形库，我真的很想接触所有这些库，以便公开比较所有可用的选项，并找出我想要使用的那个。很高兴知道他们中的许多人，因为我认为他们都有自己的功能。在Julian图形库之旅中，我的下一站是Makie.jl. Makie.jl有点独特，因为有多个使用不同图形库的库实现。例如，我决定使用OpenGL，所以我将通过Pkg添加MakieGL.jl。还有一个webgl版本和一个Cairo版本，分别是WGLMakie.jl和CairoMakie.jl。让我们继续添加软件包并开始吧！</p><blockquote class="nt"><p id="b6b9" class="nu nv it bd nw nx oi oj ok ol om ml dk translated"><a class="ae on" href="https://github.com/emmettgb/Emmetts-DS-NoteBooks/blob/master/Julia/Starting%20with%20Makie.ipynb" rel="noopener ugc nofollow" target="_blank">笔记本</a></p></blockquote><pre class="oo op oq or os ot ou ov ow aw ox bi"><span id="0382" class="oy kz it ou b gy oz pa l pb pc">julia &gt; ]<br/>pkg &gt; add GLMakie</span></pre></div><div class="ab cl pd pe hx pf" role="separator"><span class="pg bw bk ph pi pj"/><span class="pg bw bk ph pi pj"/><span class="pg bw bk ph pi"/></div><div class="im in io ip iq"><h1 id="b6e0" class="ky kz it bd la lb pk ld le lf pl lh li jz pm ka lk kc pn kd lm kf po kg lo lp bi translated">基本绘图</h1><p id="db71" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">由于我从未实际使用过Makie.jl包，所以我决定稍微熟悉一些基本情节。Makie.jl遵循图形库的典型高级约定，所以幸运的是这里不会有任何Vegalite-esc曲线球。</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="6040" class="oy kz it ou b gy oz pa l pb pc">using GLMakie</span></pre><p id="06c2" class="pw-post-body-paragraph lq lr it ls b lt nn ju lv lw no jx ly lz np mb mc md nq mf mg mh nr mj mk ml im bi translated">像Plots.jl一样，我注意到Makie也需要很长时间来预编译。这可能是因为我决定使用OpenGL，但我怀疑事实是否如此。我说真的<strong class="ls iu">真的</strong>花了很长时间。这不太重要，但肯定是您在应用程序中使用该包时需要记住的事情。我绘制的第一个例子直接来自Makie文档:</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="4e5b" class="oy kz it ou b gy oz pa l pb pc">points = [Point2f0(cos(t), sin(t)) <strong class="ou iu">for</strong> t <strong class="ou iu">in</strong> LinRange(0, 2pi, 20)] colors = 1:20 <br/>figure, axis, scatterobject = scatter(points, color = colors, markersize = 15) <br/>figure</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pp"><img src="../Images/a31af96f4c4b52258808bed91bbb1106.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EseMSQ2rhZInHh_W6wOSzQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="eca6" class="pw-post-body-paragraph lq lr it ls b lt nn ju lv lw no jx ly lz np mb mc md nq mf mg mh nr mj mk ml im bi translated">看起来像是OpenGL驱动程序加载失败！好消息是我碰巧知道一个事实，Cairo在我的电脑上可以很好地运行我的Julia安装，所以我们将切换到CairoMakie，而<strong class="ls iu">必须再次预编译它</strong>。</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="ba57" class="oy kz it ou b gy oz pa l pb pc">julia &gt; ]<br/>pkg &gt; add CairoMakie<br/>using CairoMakie</span><span id="4e82" class="oy kz it ou b gy pq pa l pb pc">points = [Point2f0(cos(t), sin(t)) for t in LinRange(0, 2pi, 20)]<br/>colors = 1:20<br/>figure, axis, scatterobject = scatter(points, color = colors, markersize = 15)<br/>figure</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pr"><img src="../Images/dba3dee995001d78002dcee9ced01d3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FpL5RYuAeBfrCI_6a8DGmA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><blockquote class="nt"><p id="e60b" class="nu nv it bd nw nx ny nz oa ob oc ml dk translated">耶！</p></blockquote><p id="2926" class="pw-post-body-paragraph lq lr it ls b lt od ju lv lw oe jx ly lz of mb mc md og mf mg mh oh mj mk ml im bi translated">实际上，我很喜欢这个库的功能，虽然它是极简的可视化，类似于没有交互性的GR，这是我在大多数情况下所需要的。类型是可变的，所以我们现在可以改变这个结构内部的数据来产生不同的结果。更牛逼的是，我们可以在这个数字上加数字！这实际上让我想起了很多很久以前制作的图形库。这真的很酷，因为它是元编程和面向对象的，但该项目已经停止。实际上，我在《走向数据科学》上写过相关文章，所以如果你碰巧对那个项目感兴趣，里面有很多非常非常有趣的Julia，你可以在这里查看:</p><div class="mv mw gp gr mx my"><a rel="noopener follow" target="_blank" href="/metaprogramming-grids-and-labels-for-hone-jl-f434c8dc24ad"><div class="mz ab fo"><div class="na ab nb cl cj nc"><h2 class="bd iu gy z fp nd fr fs ne fu fw is bi translated">Hone.jl的元编程网格和标签</h2><div class="nf l"><h3 class="bd b gy z fp nd fr fs ne fu fw dk translated">为Julia修复我的网格并将轴标签添加到我的图形库中</h3></div><div class="ng l"><p class="bd b dl z fp nd fr fs ne fu fw dk translated">towardsdatascience.com</p></div></div><div class="nh l"><div class="ps l nj nk nl nh nm ks my"/></div></div></a></div><p id="3ce9" class="pw-post-body-paragraph lq lr it ls b lt nn ju lv lw no jx ly lz np mb mc md nq mf mg mh nr mj mk ml im bi translated">该系列有许多不同的部分，所以如果您真的对这个包及其背后的代码感兴趣，这可能是一个不错的读物。无论如何，从我的开发历史来看，很明显我是图形模块化的狂热爱好者，Makie.jl正是提供了这一点！这很快成为我最喜欢的图形库。我们可以添加基本上任何新的数字到我们的数字，通过使用！版本散点！方法。</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="3454" class="oy kz it ou b gy oz pa l pb pc">circlefunc = ts -&gt; 1.5 .* Point2f0.(cos.(ts), sin.(ts))<br/>scatter!(circlefunc, LinRange(0, 2pi, 30), color = :red)<br/>figure</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pt"><img src="../Images/56676c0481c6a6c15cd61314fcd04fac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hU1e6oYL4th8e_guANdgBQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="5ff7" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">布局</h1><p id="279d" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">Makie.jl也有一个相当健壮的布局实现。它们比GR更容易理解和制作，看看吧！我们可以制作一个完全空的图形，并在其上添加我们可视化的所有模块部分！</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="4cbc" class="oy kz it ou b gy oz pa l pb pc">fig = Figure(resolution = (700, 500), backgroundcolor = RGBf0(0.98, 0.98, 0.98))<br/>ax1 = fig[1, 1] = Axis(fig, title = "Pre Treatment")<br/>data1 = randn(50, 2) * [1 2.5; 2.5 1] .+ [10 10]</span><span id="ffc7" class="oy kz it ou b gy pq pa l pb pc">line1 = lines!(ax1, 5..15, x -&gt; x, color = :red, linewidth = 2)<br/>scat1 = scatter!(ax1, data1,<br/>    color = (:red, 0.3), markersize = 15px, marker = '■')<br/>fig.layout<br/>ax2, line2 = lines(fig[1, 2], 7..17, x -&gt; -x + 26,<br/>    color = :blue, linewidth = 4,<br/>    axis = (title = "Post Treatment",))</span><span id="54fc" class="oy kz it ou b gy pq pa l pb pc">fig</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pu"><img src="../Images/d4ddee4f105649b9ddd8a48077b16920.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1MOYwlDwRc8qHYJs1zmK0Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="c167" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">动画片</h1><p id="14b1" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">Makie.jl除了之前牛逼且实现良好的特性外，还有对动画的支持！我真的很兴奋，我已经知道我会一直使用这个图书馆了！我已经很高兴我尝试了这一点，动画只是一个蛋糕上的糖衣，它已经非常湿润，可以在你的嘴里融化。为了创建一个动画情节，我们还需要添加“AbstractPlots”包。</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="2a05" class="oy kz it ou b gy oz pa l pb pc">julia &gt; ]<br/>pkg &gt; add AbstractPlots</span></pre><p id="55d9" class="pw-post-body-paragraph lq lr it ls b lt nn ju lv lw no jx ly lz np mb mc md nq mf mg mh nr mj mk ml im bi translated">我将继续尝试它。为了实际创建动画，我们将使用record()方法。这实际上会将其输出到一个视频文件。这有点奇怪，因为我当然更喜欢GIF之类的东西——但不管怎样，它会起作用的。</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="99d5" class="oy kz it ou b gy oz pa l pb pc"><strong class="ou iu">using</strong> GLMakie <br/><strong class="ou iu">using</strong> AbstractPlotting.Colors<br/>figure, ax, lineplot = lines(0..10, sin; linewidth=10)<br/>n_frames = 30 <br/>framerate = 30 <br/>hue_iterator = LinRange(0, 360, n_frames)  <br/>record(figure, "color_animation.mp4", hue_iterator; framerate = framerate)<br/> <strong class="ou iu">do</strong> hue     lineplot.color = HSV(hue, 1, 0.75) <strong class="ou iu">end</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pv"><img src="../Images/fb72e099293b3207cf097ad1dea7f565.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ONNKePnLSNmlo4WufqBRsQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><blockquote class="nt"><p id="8c23" class="nu nv it bd nw nx ny nz oa ob oc ml dk translated">也可能行不通。</p></blockquote></div><div class="ab cl pd pe hx pf" role="separator"><span class="pg bw bk ph pi pj"/><span class="pg bw bk ph pi pj"/><span class="pg bw bk ph pi"/></div><div class="im in io ip iq"><h1 id="33b6" class="ky kz it bd la lb pk ld le lf pl lh li jz pm ka lk kc pn kd lm kf po kg lo lp bi translated">结论</h1><p id="2004" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我相信随着时间和努力，一定会有办法加载适当的驱动程序，并实际上让我的系统与Makie.jl的全部功能一起工作。不管动画斗争，我非常兴奋地开始使用这个图形库！它的模块化性质和原始能力正是我在这样的东西寻找。我真的很高兴我试用了它，我现在实际上对这个包感到非常兴奋。我强烈推荐它。我认为这个包最糟糕的部分可能是包的分段性，你需要用Pkg添加很多包。当然，这没什么大不了的，我认为这个图形库的能力绝对值得。感谢您的阅读！我当然推荐试试这个库！</p></div></div>    
</body>
</html>