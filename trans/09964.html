<html>
<head>
<title>Stop Using CSVs for Storage — Here Are the Top 5 Alternatives</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止使用CSV存储—以下是5大替代方案</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/stop-using-csvs-for-storage-here-are-the-top-5-alternatives-e3a7c9018de0?source=collection_archive---------2-----------------------#2021-09-20">https://towardsdatascience.com/stop-using-csvs-for-storage-here-are-the-top-5-alternatives-e3a7c9018de0?source=collection_archive---------2-----------------------#2021-09-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9da3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">CSV耗费您的时间、磁盘空间和金钱。以下是每个数据科学家都必须知道的五种选择。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ce23e34562a156f31a5450806280c5c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9cfuFgQD7QgCSCqF_5aQ4g.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@magictype?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">杰基尚·帕特尔</a>在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="2dfd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个人和他们的祖母都知道CSV文件是什么。<em class="lv">但这是存储数据的最佳方式吗？不，如果你不打算实时查看或编辑数据，这可能是最糟糕的存储格式。</em></p><p id="56b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您要存储大量数据，选择CSV将耗费您的时间和金钱。</p><p id="1302" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天，您将了解五种CSV替代方案。无论是在读/写时间还是在文件大小方面，两者都各有优势。有些甚至各方面都更好。</p><p id="e7d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在查看文件格式之前，让我们先设置一下环境。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="7318" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">入门—环境设置</h1><p id="2c87" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">您将需要几个库来跟进。最佳实践是将它们安装在虚拟环境中，这正是您要做的。下面的代码片段通过Anaconda创建了一个新的虚拟环境，并安装了每个必需的库:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="5431" class="nf me it nb b gy ng nh l ni nj">conda create --name file_formats python=3.8<br/>conda activate file_formats<br/><br/>conda install -c conda forge numpy pandas fastavro pyarrow feather-format jupyter jupyterlab</span></pre><p id="c24e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装完成后，您可以执行以下命令来启动JupyterLab会话:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="2ae4" class="nf me it nb b gy ng nh l ni nj">jupyter lab</span></pre><p id="0587" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一步是导入库并创建任意数据集。您将创建一个5列10M行的数据库:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="5d55" class="nf me it nb b gy ng nh l ni nj">import numpy as np<br/>import pandas as pd<br/><br/>import feather<br/>import pickle<br/>import pyarrow as pa<br/>import pyarrow.orc as orc <br/>from fastavro import writer, reader, parse_schema<br/><br/>np.random.seed = 42<br/>df_size = 10_000_000<br/><br/>df = pd.DataFrame({<br/>    'a': np.random.rand(df_size),<br/>    'b': np.random.rand(df_size),<br/>    'c': np.random.rand(df_size),<br/>    'd': np.random.rand(df_size),<br/>    'e': np.random.rand(df_size)<br/>})<br/>df.head()</span></pre><p id="2562" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它看起来是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nk"><img src="../Images/e3054f9076046aeca6d06621e8db3207.png" data-original-src="https://miro.medium.com/v2/format:webp/1*XxPFhZPAraXZJCgZAn7YkQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片1-随机虚拟数据集(图片由作者提供)</p></figure><p id="bd86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您已经具备了开始尝试不同数据格式所需的一切。先来盖ORC。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="9b6e" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">妖魔</h1><p id="9506" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">ORC代表<em class="lv">优化行列</em>。这是一种针对Hive中的读写而优化的数据格式。由于Hive慢得令人痛苦，Hortonworks的人决定开发ORC文件格式来加速它。</p><p id="c345" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Python中，可以使用Pandas的<code class="fe nl nm nn nb b">read_orc()</code>函数来读取ORC文件。不幸的是，没有替代函数来编写ORC文件，所以您必须使用PyArrow。</p><p id="71c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个写熊猫数据帧的例子:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="b5eb" class="nf me it nb b gy ng nh l ni nj">table = pa.Table.from_pandas(df, preserve_index=False)<br/>orc.write_table(table, '10M.orc')</span></pre><p id="9c87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是读取ORC文件的命令:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="27ea" class="nf me it nb b gy ng nh l ni nj">df = pd.read_orc('10M.orc')</span></pre><p id="d9e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里了解更多关于兽人的信息:</p><div class="no np gp gr nq nr"><a rel="noopener follow" target="_blank" href="/stop-using-csvs-for-storage-this-file-format-is-faster-and-lighter-8fec7ebad6fc"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">停止使用CSV存储—这种文件格式更快、更轻便</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">编辑描述</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">towardsdatascience.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of ks nr"/></div></div></a></div></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="843b" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">Avro</h1><p id="7d91" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Avro是一个开源项目，为Apache Hadoop提供数据序列化和交换服务。它用一个类似JSON的模式存储数据，所以正确的数据类型是预先知道的。这就是压缩发生的地方。</p><p id="3ca2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Avro对每一种主流编程语言都有API，但是默认不支持熊猫。</p><p id="83cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是将熊猫数据帧保存到Avro文件的一组命令:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="7989" class="nf me it nb b gy ng nh l ni nj"># 1. Define the schema<br/>schema = {<br/>    'doc': 'Float data',<br/>    'name': 'Data',<br/>    'namespace': 'data',<br/>    'type': 'record',<br/>    'fields': [<br/>        {'name': 'a', 'type': 'float'},<br/>        {'name': 'b', 'type': 'float'},<br/>        {'name': 'c', 'type': 'float'},<br/>        {'name': 'd', 'type': 'float'},<br/>        {'name': 'e', 'type': 'float'},<br/>    ]<br/>}<br/>parsed_schema = parse_schema(schema)<br/><br/># 2. Convert pd.DataFrame to records - list of dictionaries<br/>records = df.to_dict('records')<br/><br/># 3. Write to Avro file<br/>with open('10M.avro', 'wb') as out:<br/>    writer(out, parsed_schema, records)</span></pre><p id="a00a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">读取Avro文件也不容易:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="6c21" class="nf me it nb b gy ng nh l ni nj"># 1. List to store the records<br/>avro_records = []<br/><br/># 2. Read the Avro file<br/>with open('10M.avro', 'rb') as fo:<br/>    avro_reader = reader(fo)<br/>    for record in avro_reader:<br/>        avro_records.append(record)<br/>        <br/># 3. Convert to pd.DataFrame<br/>df = pd.DataFrame(avro_records)</span></pre><p id="a9cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在此了解有关Avro的更多信息:</p><div class="no np gp gr nq nr"><a rel="noopener follow" target="_blank" href="/csv-files-for-storage-absolutely-not-use-apache-avro-instead-7b7296149326"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">用于存储的CSV文件？绝对不行。请改用Apache Avro</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">编辑描述</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">towardsdatascience.com</p></div></div><div class="oa l"><div class="og l oc od oe oa of ks nr"/></div></div></a></div></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="bd84" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">镶木地板</h1><p id="cdef" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Apache Parquet是一种为提高效率而设计的数据存储格式。这背后的原因是列存储架构，因为它允许您快速跳过不相关的数据。这样，查询和聚合都更快，从而节省了硬件。</p><p id="0aa1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最好的消息是——Pandas完全支持拼花文件。</p><p id="b751" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是将熊猫数据帧写入拼花文件的命令:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="f830" class="nf me it nb b gy ng nh l ni nj">df.to_parquet('10M.parquet')</span></pre><p id="99fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是阅读的对等词:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="23b6" class="nf me it nb b gy ng nh l ni nj">df = pd.read_parquet('10M.parquet')</span></pre><p id="d6fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里了解更多关于拼花地板的信息:</p><div class="no np gp gr nq nr"><a rel="noopener follow" target="_blank" href="/csv-files-for-storage-no-thanks-theres-a-better-option-72c78a414d1d"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">用于存储的CSV文件？不用了，谢谢。有更好的选择</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">编辑描述</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">towardsdatascience.com</p></div></div><div class="oa l"><div class="oh l oc od oe oa of ks nr"/></div></div></a></div></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="0a9a" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">泡菜</h1><p id="07ca" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">您可以使用<code class="fe nl nm nn nb b">pickle</code>模块来序列化对象并将它们保存到一个文件中。同样，您可以反序列化该序列化文件，以便在需要时将其加载回去。Pickle与其他格式相比有一个主要优势——可以用它来存储任何Python对象。最广泛使用的功能之一是在训练完成后保存机器学习模型。</p><p id="8d2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最大的缺点是Pickle是特定于Python的，所以不能保证跨语言支持。例如，对于任何需要Python和R之间的数据通信的项目来说，这可能是一个障碍。</p><p id="baff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是如何将熊猫数据帧写入Pickle文件:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="25f4" class="nf me it nb b gy ng nh l ni nj">with open('10M.pkl', 'wb') as f:<br/>    pickle.dump(df, f)</span></pre><p id="226b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">读取Pickle文件时，您只需更改文件模式:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="810e" class="nf me it nb b gy ng nh l ni nj">with open('10M.pkl', 'rb') as f:<br/>    df = pickle.load(f)</span></pre><p id="f770" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里了解更多关于泡菜的信息:</p><div class="no np gp gr nq nr"><a rel="noopener follow" target="_blank" href="/stop-using-csvs-for-storage-pickle-is-an-80-times-faster-alternative-832041bbc199"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">停止使用CSV进行存储——泡菜是速度快80倍的替代品</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">编辑描述</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">towardsdatascience.com</p></div></div><div class="oa l"><div class="oi l oc od oe oa of ks nr"/></div></div></a></div></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="80a9" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">羽毛</h1><p id="432d" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">羽化是一种用于存储数据帧的数据格式。它是围绕一个简单的前提设计的—尽可能有效地将数据帧推入和推出内存。它最初是为Python和R之间的快速通信而设计的，但是您并不局限于这个用例。</p><p id="6e10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用<code class="fe nl nm nn nb b">feather</code>库来处理Python中的羽毛文件。这是目前最快的选择。</p><p id="6fa6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是将熊猫数据帧保存到羽毛文件的命令:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="f295" class="nf me it nb b gy ng nh l ni nj">feather.write_dataframe(df, '10M.feather')</span></pre><p id="e956" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是读取的命令:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="12aa" class="nf me it nb b gy ng nh l ni nj">df = feather.read_dataframe('10M.feather')</span></pre><p id="b890" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里了解更多关于羽毛的信息:</p><div class="no np gp gr nq nr"><a rel="noopener follow" target="_blank" href="/stop-using-csvs-for-storage-this-file-format-is-150-times-faster-158bd322074e"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">停止使用CSV进行存储—这种文件格式速度快150倍</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">编辑描述</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">towardsdatascience.com</p></div></div><div class="oa l"><div class="oj l oc od oe oa of ks nr"/></div></div></a></div></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="889e" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">比较时间-您应该使用哪种数据格式？</h1><p id="abbf" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">如果您需要即时更改甚至查看数据，许多高度优化的文件格式都是无用的。如果不是这样，你通常应该避免CSV。</p><p id="8af4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是CSV和其他提到的数据格式在写入时间上的比较。目标是在本地保存之前创建的10Mx5数据集:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/afea1084c0cbd29843e92d929e5188bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y1k2bephs6fp5d7SyMj1Zw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图2 —以秒为单位的写入时间比较(CSV:34.7；兽人:9.66；avro:9.58；拼花:2.06；泡菜:0.5；羽毛:0.304)(图片由作者提供)</p></figure><p id="f59c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">差异是巨大的。对于存储相同的数据集，Feather比CSV快大约115倍。即使您决定使用更兼容的产品，如拼花地板，写入时间仍然会减少17倍。</p><p id="2759" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来说说阅读次数。目标是比较读取不同格式的相同数据集所需的时间:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/edbcaf6761aa95dc1935657435d6fbe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z0MGbtavEHrSH2SiR0my6A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图3 —以秒为单位的读取时间对比(CSV:3.83；ORC: 3.02，Avro:27.6；拼花:1.23；泡菜:0.193；羽毛:1.16)(图片由作者提供)</p></figure><p id="fcbc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CSV在这里没那么可怕。由于需要解析，Apache Avro绝对是最糟糕的。Pickle是最快的，所以如果你只使用Python，它看起来是最有前途的选择。</p><p id="4646" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，让我们比较一下磁盘上的文件大小:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/3bb47df58d2351c695944ace16d89580.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mcbAJp_cwseCI0pxfPI2FQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图4 —以MB为单位的文件大小比较(CSV:963.5；ORC:379.5；avro:200.3；拼花:401.4；咸菜:400；羽毛:400.1)(图片由作者提供)</p></figure><p id="c437" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CSV的情况看起来不妙。文件大小减少了2.4倍到4.8倍，具体取决于文件格式。</p><p id="d844" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总而言之，如果您每天存储千兆字节的数据，选择正确的文件格式至关重要。如果你只使用Python，Pickle是不会错的。如果你需要更通用一点的东西，就用其他提到的格式。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="29b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您对这些CSV替代品有什么想法？如果不需要实时查看和编辑数据，您会使用哪一种？请在下面的评论中告诉我。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="b27c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">喜欢这篇文章吗？成为</em> <a class="ae ky" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="lv">中等会员</em> </a> <em class="lv">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="no np gp gr nq nr"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">通过我的推荐链接加入Medium-Dario rade ci</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">medium.com</p></div></div><div class="oa l"><div class="on l oc od oe oa of ks nr"/></div></div></a></div></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="75d7" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">保持联系</h1><ul class=""><li id="d3f9" class="oo op it lb b lc mv lf mw li oq lm or lq os lu ot ou ov ow bi translated">在<a class="ae ky" href="https://medium.com/@radecicdario" rel="noopener">媒体</a>上关注我，了解更多类似的故事</li><li id="dc7d" class="oo op it lb b lc ox lf oy li oz lm pa lq pb lu ot ou ov ow bi translated">注册我的<a class="ae ky" href="https://mailchi.mp/46a3d2989d9b/bdssubscribe" rel="noopener ugc nofollow" target="_blank">简讯</a></li><li id="a036" class="oo op it lb b lc ox lf oy li oz lm pa lq pb lu ot ou ov ow bi translated">在<a class="ae ky" href="https://www.linkedin.com/in/darioradecic/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上连接</li></ul></div></div>    
</body>
</html>