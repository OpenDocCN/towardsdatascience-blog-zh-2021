<html>
<head>
<title>Understanding the Impact of COVID-19 on Traffic with Computer Vision</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用计算机视觉理解新冠肺炎对交通的影响</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/understanding-the-impact-of-covid-on-traffic-in-singapore-with-computer-vision-852d2a94882f?source=collection_archive---------41-----------------------#2021-08-16">https://towardsdatascience.com/understanding-the-impact-of-covid-on-traffic-in-singapore-with-computer-vision-852d2a94882f?source=collection_archive---------41-----------------------#2021-08-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="73da" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a></h2><div class=""/><div class=""><h2 id="ce1a" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">用Python和OpenCV分析新加坡的交通</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/042f688de62625a821c77c5dccc5121a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mKVg4j_yOCC75G6nAphG3g.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">照片由来自<a class="ae le" href="https://www.pexels.com/photo/photo-of-gray-and-orange-bus-1058830/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">佩克斯</a>的<a class="ae le" href="https://www.pexels.com/@alameen-a-dae-399116?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">阿拉明·阿-达伊</a>拍摄</p></figure><p id="ceac" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi mb translated">ovid-19深刻影响了我们生活的方方面面，从全球供应链到我们的工作方式。在疫情期间，大多数国家都在不同程度的限制下实施了某种形式的封锁。这些封锁的一个有趣的方面是对世界不同地区日常生活的影响，最常见的预防措施之一是留在家中的命令。新加坡作为一个人口密集的城市国家和岛屿，为观察这些影响提供了一个有趣的测试案例。这两个因素，加上强有力的政府干预，应该为这些影响提供了充分的证据。通过使用政府的交通摄像头数据库和计算机视觉，我们将试图了解城市中心附近的交通如何受到并仍然受到整个疫情的影响。</p><p id="61b7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这篇文章的重点是回答以下问题:</p><blockquote class="mk ml mm"><p id="6144" class="lf lg mn lh b li lj ka lk ll lm kd ln mo lp lq lr mp lt lu lv mq lx ly lz ma ij bi translated">新冠肺炎对新加坡的交通有影响吗？如果是，影响是什么，是什么造成的？</p></blockquote></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><p id="3132" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">本文中的代码是用于解释目的的补充工具，已经从原始代码中进行了缩写和略微修改；这不是一次演练，而是如何解决问题的一个可能的脚手架。如果您只是对数据感兴趣，请随意跳到结果部分。</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h1 id="58a5" class="my mz iq bd na nb nc nd ne nf ng nh ni kf nj kg nk ki nl kj nm kl nn km no np bi translated">数据收集</h1><p id="6f67" class="pw-post-body-paragraph lf lg iq lh b li nq ka lk ll nr kd ln lo ns lq lr ls nt lu lv lw nu ly lz ma ij bi mb translated">ingapore拥有一个令人难以置信的公共数据库，涵盖了城市及其功能的方方面面。你可以去参观:<a class="ae le" href="https://data.gov.sg/" rel="noopener ugc nofollow" target="_blank">https://data.gov.sg/</a>。该项目利用由陆路运输管理局管理的<a class="ae le" href="https://data.gov.sg/dataset/traffic-images" rel="noopener ugc nofollow" target="_blank">交通摄像头</a>部分。该API允许用户指定时间戳，并返回城市中每个摄像机的所有数据。我们可以使用python中的请求库来指定时间戳，并接收一个JSON对象，该对象包含所有摄像机的位置和视频帧。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="abbb" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">返回的JSON对象是每台摄像机和各种数据的列表，包括位置、视频帧的链接和一些关于图像的元数据。我们对三个方面最感兴趣:</p><ul class=""><li id="e857" class="nx ny iq lh b li lj ll lm lo nz ls oa lw ob ma oc od oe of bi translated">camera_id —嵌套在相机键内的相机数组中</li><li id="f320" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma oc od oe of bi translated">image:一个URL，包含摄像机当时看到的图像</li><li id="3572" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma oc od oe of bi translated">位置:相机的GPS线，嵌套在相机对象中</li></ul><p id="1762" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为此，需要对JSON响应进行规范化和解析。这可以通过熊猫图书馆来完成，它将用于管理我们的数据。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="fb24" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这将给我们留下一个87行8列的熊猫数据帧。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">前十行</p></figure><p id="68f6" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这个数据帧是对于给定的时间戳，城市周围的所有 摄像机的<strong class="lh ja"> <em class="mn">。为了减少收集的数据量并控制范围，我们将把摄像机的数量限制为1702和1711。它们位于璧山区和实龙岗区之间的<a class="ae le" href="https://en.wikipedia.org/wiki/Central_Expressway,_Singapore#/media/File:Expressways_and_Semi-expressways_of_Singapore_2012.png" rel="noopener ugc nofollow" target="_blank"> CTE高速公路</a>上。在主干道上，交通的任何显著变化都应该很容易被发现。下面是每个摄像机看到的一个例子。</em></strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/bdaee0d5445590fc11fa1fd34691b72c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*2gn6cRDeoS3Bal-IjGU08w.jpeg"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">照相机1702例子</p></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/00e1cc1964f45c25fdaf77b5c7d26bdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*qYE9X-fR0NXdsd0YrP0K2Q.jpeg"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">照相机1711的例子</p></figure><p id="734d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">下一步是建立一个测量流量模式的时间框架。选择了2019、2020和2021年从3月1日到5月1日的两个月时间，以每三分钟为增量。选择这一点有三个主要原因:</p><ol class=""><li id="6a7a" class="nx ny iq lh b li lj ll lm lo nz ls oa lw ob ma om od oe of bi translated">包含三年的时间框架可以实现COVID之前、之中和之后的评估，其中2019年作为正常流量模式的示例。</li><li id="032a" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma om od oe of bi translated">这个时间框架在封锁方面也很重要-因为最严格的措施是在2020年4月推出的，限制将在2021年取消。</li><li id="ff83" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma om od oe of bi translated">将时间范围限制为每三分钟，可以更好地管理要标记的图像数据集。</li></ol><p id="3f9f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">使用pandas，可以建立批量请求的框架。首先，用date_range函数制作时间戳的数据帧:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="69ed" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">其次，将时间戳格式化成可以传递给API的格式。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="72a4" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在我们有了要循环的日期，我们可以利用并发库使用futures函数进行并发请求。未来的库通过创建不同的工人，使批量请求数据变得容易得多，这些工人可以彼此并行地进行请求。关于如何使用期货的一个很好的指南可以在这里找到。</p><p id="8c11" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">下面是将要使用的功能的基本概要。Fair wairing:每个电话仍然需要大约2个小时才能完成。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="61ab" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这将产生一个包含所有响应的庞大列表。下一步是按camera_id列对响应进行排序，并将它们保存为各自的. csv文件。我还建议将原始列表保存为DataFrame，以便以后需要时可以引用。(因此，如果我们想在未来研究其他相机，我们不必重复2019年的API调用。)</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="2575" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">2020年和2021年重复这些步骤，总共留下6个单独的文件，每个相机3个。请求部分的总运行时间约为6小时。我们现在有了图像的链接，可以继续从数据库中抓取图像了。为了获取图像，我们将使用与之前相同的结构来进行并发调用，但是首先，加载上一步中创建的数据帧。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="7e83" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">加载数据帧后，我们可以编写新的请求函数和并发请求框架。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="3700" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">关于上面的代码块及其输出，有几点需要注意。首先，我们正在抓取<strong class="lh ja">大量</strong>图像；所以要确保有足够的空间来存放它们。第二，每个呼叫大约需要1.5到2个小时，具体取决于定义的工作人员数量。</p><p id="0697" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">收集完图像后，我们就可以开始生成数据了。我们将使用OpenCV并利用google提供给Colab用户的GPU能力。为了做到这一点，我建议按照这个<a class="ae le" rel="noopener" target="_blank" href="/how-to-use-opencv-with-gpu-on-colab-25594379945f">教程</a>来设置OpenCV，以便在colab环境中使用GPU来加速图像的标记。</p><p id="759b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">设置完成后，多亏了OpenCV，标记图像变得相当简单。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi on"><img src="../Images/0e2c8cb6e3a4545858aa4534fe287b0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*z30TBBhOHjdgWX8lil9sUQ.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">OpenCV_example.py的输出</p></figure></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><p id="2709" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">关于如何设置detect_common_objects函数，有一些重要的注意事项:</p><ol class=""><li id="f0f0" class="nx ny iq lh b li lj ll lm lo nz ls oa lw ob ma om od oe of bi translated">你可能已经注意到，它既没有标记图像前面的模糊汽车，也没有标记旁边的汽车。这是因为默认过滤级别为0.5。置信度值低于0.5的任何对象都不会被认为可以防止误报。通过在函数调用中定义nms_thershold，可以将该级别调整为所需的任何级别。更多信息可以在<a class="ae le" href="https://docs.cvlib.net/object_detection/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</li><li id="f64b" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma om od oe of bi translated">您可以使用model关键字修改在其中对模型进行训练的标记数据集。然而，YOLOv4非常适合这项任务。如果你有兴趣了解更多，<a class="ae le" href="https://reckoning.dev/blog/yolo-v4/" rel="noopener ugc nofollow" target="_blank">这里有一个YOLOv4结构和设计</a>的链接。</li></ol><p id="618e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们的基本工作流现在已经设置好了，我们可以编写函数来处理2019年数据集中的所有图像，并建立一种方法来跟踪标签并将它们添加回数据帧。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="a37c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">接下来，我们可以使用该函数遍历收集的所有数据，并生成可用于分析的标签数据帧。下面是摄像头1702的2019年图像的通话情况。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="652d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">然后，我们对每一年和每一台相机重复这一步。最后，我们准备开始做一些分析！如果您已经完成了数据采集过程，我想澄清几个可能出现的问题。</p><ol class=""><li id="1525" class="nx ny iq lh b li lj ll lm lo nz ls oa lw ob ma om od oe of bi translated">数据集仅限于调用api_imageRequest函数返回的内容。我使用了一个try-expect块，这样即使调用失败，它也不会抛出错误，并且不是所有的时间戳都有有效的图像可以提取。因此，您的数据集可能与我生成的数据集有所不同，但流量数据的总体趋势应该仍然相对相似。此外，抓取2021年的图像导致图像减少了约35%,这很可能是在数据库方面。</li><li id="697a" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma om od oe of bi translated">为什么我们没有在get_label_count块中定义要计数的标签？我们想跟踪摩托车、卡车和任何可能在路上行驶的车辆。虽然人或其他物体有可能被计算在内，但由于每个数据集包含数以千计的图像，因此它对流量的整体趋势只会产生极小的影响。</li><li id="a916" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma om od oe of bi translated">下载图片时，3月17日和18日1711相机的2019都不完整。严重缺乏白天的图像导致那些日子的数据不准确。经过调查，在此期间进行了定期维护，这可以解释异常现象。我们通过替换在数据分析部分对此进行了说明。</li></ol></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h1 id="2b13" class="my mz iq bd na nb nc nd ne nf ng nh ni kf nj kg nk ki nl kj nm kl nn km no np bi translated">数据分析</h1><p id="b577" class="pw-post-body-paragraph lf lg iq lh b li nq ka lk ll nr kd ln lo ns lq lr ls nt lu lv lw nu ly lz ma ij bi translated">在进行探索性数据分析时，记住我们在项目开始时提出的“全局”问题并使用这些问题来指导过程是很重要的。</p><blockquote class="mk ml mm"><p id="c0fd" class="lf lg mn lh b li lj ka lk ll lm kd ln mo lp lq lr mp lt lu lv mq lx ly lz ma ij bi translated">【COVID对新加坡的交通有影响吗？如果是，影响是什么，是什么造成的？</p></blockquote><p id="7ea2" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">第一步是加载所有以前收集的数据，并开始将其聚合成我们可以使用的东西。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">关于编码示例的注意事项:我们将查看相机1711，因为它提供了一些有趣的挑战(如上所述)，然而，相同的步骤应用于相机1702以生成本文中的图形。</p></figure><p id="d83a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在数据被加载之后，我们可以通过添加一个名为“num_cars”的新列来将标签DataFrame与原始数据合并，该列表示生成的标签。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="da5f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们还可以继续修改“时间戳”列，这对以后的重采样很重要。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="1113" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">通过运行。在我们的每个数据帧上描述()，我们可以了解我们正在处理的数据。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">从该输出中得出的最重要的细节之一是2020年到2021年的计数差异。虽然大约13k的数据点仍然为这种分析提供了典型的流量模式，但实际上不可能比较总计数。</p></figure><p id="1052" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">下一步是了解我们数据的形状，我们可以通过观察标签的频率来做到这一点。这使我们对交通模式的分布有了一个大致的了解。我们将使用pandas的count_values()函数来生成这些数据。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">我们使用normalized关键字来获得标签的比例，而不是精确的计数，然后将它们四舍五入到最接近的百分之一，以使绘制它们更容易！</p></figure><div class="kp kq kr ks gt ab cb"><figure class="oo kt op oq or os ot paragraph-image"><img src="../Images/2688a1401cc06f432110947507f7e87d.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*8W-As6v1pnbPJOuQ__SCyA.jpeg"/></figure><figure class="oo kt op oq or os ot paragraph-image"><img src="../Images/dce5a50bd827fa204595fb8911cc7c44.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*ilQ_p7cXNS7zHViVLblrGg.jpeg"/><p class="la lb gj gh gi lc ld bd b be z dk ou di ov ow translated">一定数量汽车的车架比例</p></figure></div><p id="3399" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们可以从图表中看到，2020年和2021年，较大流量急剧下降，空帧或稀疏帧大幅增加。这些图表提供了一个很好的概览，并显示了很大的差异。然而，为了得出有意义的结论，处理当前数据集的一些问题是很重要的。</p><p id="a003" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">每年之间数据点数量的差异和偏斜分布使得很难知道到底发生了什么。我们可以对数据进行重新采样，以更好地了解整个人口，并进行时间序列分析。由于我们的数据是有时间戳的，panda内置的重采样工具是获取时间序列的有效方法。为了处理年份之间的计数差异，我们将避免任何依赖于总计数的度量，而是使用描述数据的度量，如平均值、最大值和中值。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="f8be" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如上所述，2019年的数据集存在问题。3月17日和18日显示异常低值。我们可以使用列索引将其与数据集中的其他日期进行比较。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="49d7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">确定异常值是否是真实数据点的一个重要部分是查看生成它们的元素——在这种情况下，是图像。在对图像进行了一些检查之后，很明显，在那些日子里，大量的图像丢失了，而serval实际上是维护消息。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/06defc1d484fcc97a67dac7bbde1b12d.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*tfszleIsoVZPxcFu90boqQ.jpeg"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">从数据库返回的维护消息</p></figure><p id="a73e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">因为我们已经确定这两个数据点很可能不具有代表性，所以可以用几种不同的方法来解决这个缺失的数据。一种方法是尝试只在那几天再次请求映像，但是如果维护是他们捣乱的原因，这将不起作用。另一种方法是使用数据集中的其他星期日和星期一来生成值。这种方法将给出一个合适的近似值来代替缺失的数据，并且可以通过将这些天的平均值作为每个测量值的替代来实现。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="60fb" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">准备好数据集后，下一步是可视化数据。如上所述，我们应该对数据的形状有一个概念，因为它将指导未来的步骤和统计测试。我们将使用箱线图来理解数据的形状，并使用pyplot的subplot函数来为两台摄像机生成信息丰富的紧凑视图。生成可视化后，将上下文应用到数据中以真正理解每个图表所表达的内容是很重要的。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oy"><img src="../Images/c7b3fd5500417f87d3b99fd3af52d301.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lfOw-PoPK5kcSdNt4yKe2Q.jpeg"/></div></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oy"><img src="../Images/51c6b1b84e1058e16f83b6c4c257a5d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qBoSTu_IN1VaBqEfQOeLdg.jpeg"/></div></div></figure><ul class=""><li id="08cd" class="nx ny iq lh b li lj ll lm lo nz ls oa lw ob ma oc od oe of bi translated">中位数——这是一个很好的指标，可以衡量在任何给定的时间你在路上会看到多少辆车。</li><li id="8562" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma oc od oe of bi translated">均值-也是在任何给定时间你期望在路上看到的东西的度量，但它更容易受到异常值的影响。</li><li id="f6e3" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma oc od oe of bi translated">max——当天一帧中的最大汽车数量，这是衡量交通高峰的一个很好的指标。</li></ul><p id="e5fc" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们可以收集到一些东西(新冠肺炎)在2020年引起了巨大的变化，展开数据:每个指标都有总体下降的趋势。平均值的线形图可用于观察这一趋势。</p><div class="kp kq kr ks gt ab cb"><figure class="oo kt op oq or os ot paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><img src="../Images/7ae05346456f1e5174e2000ed7cd3bcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*lMrJ0q8RmmPI4oR7LqvXUQ.jpeg"/></div></figure><figure class="oo kt op oq or os ot paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><img src="../Images/f68c634e1a487bccb5e3c8b466a408f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*Ni1xoOF2IFLvnitqPWtGWg.jpeg"/></div></figure></div><h1 id="f7cd" class="my mz iq bd na nb oz nd ne nf pa nh ni kf pb kg nk ki pc kj nm kl pd km no np bi translated">理解数据</h1><p id="2d55" class="pw-post-body-paragraph lf lg iq lh b li nq ka lk ll nr kd ln lo ns lq lr ls nt lu lv lw nu ly lz ma ij bi translated">很明显，这两个地点在4月7日左右显示出2020年的急剧下降，这与总理的“电路中断”相吻合，该中断大大限制了旅行，并呼吁所有个人限制在公共场所聚集。每个摄像头都显示，除了4月27日星期一之外，本月剩余时间的平均流量大幅减少了50%。虽然当天没有重大新闻或事件，但数据与其他周一一致。这一减少证明了疫情及其相关政策极大地减少了交通流量。</p><p id="613e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">交通流量似乎还没有恢复到2021年疫情之前的水平。这个假设可以用单侧韦尔奇T检验来检验。这个统计测试将有助于了解每年的流量水平是否实际上在变化，并且不在变化范围内。我们将测试数据集的平均值(道路上汽车的平均数量)和最大值(高峰业务),以了解全貌。Scipy库的<a class="ae le" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.ttest_ind.html" rel="noopener ugc nofollow" target="_blank">。ttest_ind() </a>函数提供了一种简洁的方法。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="f90e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">运行T-test函数会给出两个输出:T-stat和P-value。T-stat表示两个样本组差异的方向和水平，P值表示确定性水平。在这种背景下，负T-stat意味着2021组小于2019组。确定性是P值减1，或我们确定存在差异的程度。确定性值&gt; 95%被认为是显著的。将所有这些放在一起，对于每个测量，两组在每帧的平均汽车数量以及最大数量方面显示出统计上的显著差异。</p><p id="454d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在该项目中，两个交通摄像头与OpenCV结合使用，以了解新冠肺炎疫情对新加坡交通的影响，包括2020年4月交通流量减少50%，以及统计测试，以提供新加坡交通仍未恢复到疫情之前水平的证据。虽然不可能把一切都归咎于疫情，但有强有力的证据表明，疫情周围的政策和公众反应已经改变了新加坡最繁忙道路之一的交通状况。</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h1 id="b789" class="my mz iq bd na nb nc nd ne nf ng nh ni kf nj kg nk ki nl kj nm kl nn km no np bi translated">提及和最终注释</h1><p id="e7af" class="pw-post-body-paragraph lf lg iq lh b li nq ka lk ll nr kd ln lo ns lq lr ls nt lu lv lw nu ly lz ma ij bi translated">这个项目的灵感来自于一个探索更有限的日期和时间范围的高级编码项目。这些项目是有指导的，但不会给用户任何代码，这使得它成为一种很好的实践方式，同时仍然提供了一个体面的挑战。我还想说，如果你自己做这个项目，你的数据集将很可能与我的不同，只是由于调用的数量和最终用户与数据库之间的通信。也就是说，数据的总体趋势和分布应该是相似的，因为我试图摆脱依赖于计数的测量。另外，对于那些对使用新加坡数据库感兴趣的人，你可以在这里找到<a class="ae le" href="https://data.gov.sg/privacy-and-website-terms#api-terms" rel="noopener ugc nofollow" target="_blank">条款和服务</a>的链接！最后，感谢您花时间阅读这篇文章，我希望它能激励其他人。</p></div></div>    
</body>
</html>