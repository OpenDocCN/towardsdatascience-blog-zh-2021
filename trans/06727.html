<html>
<head>
<title>Time Series Forecasting of Solar Radiation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">太阳辐射的时间序列预测</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/time-series-forecasting-of-solar-radiation-294b2a0c94e5?source=collection_archive---------15-----------------------#2021-06-17">https://towardsdatascience.com/time-series-forecasting-of-solar-radiation-294b2a0c94e5?source=collection_archive---------15-----------------------#2021-06-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fa69" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">利用一年的训练数据，我们能多好地预测太阳辐射？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2de73b1de0456144268daa656a6a50c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k8o5y0EfjGXyo2P-wTvMRg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="3874" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">太阳能发电在美国正在兴起。根据EIA，德克萨斯州正计划在2022年底前增加10吉瓦(GW)的公用事业规模太阳能发电能力。这意味着短期和长期的电源管理需求也越来越大。在这种情况下，我们能否利用与太阳能相关的数据做出任何种类的短期和长期预测，帮助我们监控/管理/分配发电？</p><p id="477a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">太阳辐射是一种用于测量太阳辐射的性质。有不同种类的测量:总太阳辐照度，光谱太阳辐照度，全球水平辐照度等。测量主要通过卫星或地面传感器完成。在这项研究中，我们将使用表面传感器测量。</p><p id="8a37" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">美国国家海洋和大气管理局(NOAA)维持了几个测量站点，以记录地球表面的每日太阳辐射。这些是典型的时间序列数据，因此我们可以使用机器学习来预测未来的辐照度。未来对太阳辐照度的预测有利于估计太阳能发电机在几天、几周甚至几个月内可以产生多少能量。这有助于管理不同来源的配电。</p><h2 id="6edb" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">数据</h2><p id="bcd3" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">从NOAA数据ftp站点获得美国各地7个站点的日地面辐射数据:【https://gml.noaa.gov/aftp/data/radiation/surfrad/<br/>T3</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/96ccf0481dac6479550744bc6d768639.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*4QDPNfR06GtQE4Aaqk5zhg.png"/></div></figure><p id="7dba" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这些数据每天都有，即每个位置每年总共有365–366个文件。手动下载这些数据是一项痛苦的任务。下面我做了一个小脚本来根据地点和年份自动下载，以防你有兴趣使用这些数据进行任何分析:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><h2 id="99bd" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">数据探索</h2><p id="62d9" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">该数据以大约17秒的日记录间隔提供，每年每个位置将进行超过520，000次观测。如果我们使用多年，这将成为一个大数据集。在这项研究中，数据被重新采样为每小时和每天的平均值，这大大减少了数据量，从而允许小型PC在相当大的神经网络上进行训练。这些数据提供了超过28种功能。然而，对于这项研究，我们只选择了一个主要特征，“净太阳能”辐射，作为预测的单变量时间序列。太阳辐射是一种季节性现象，因此应该能够通过机器学习算法进行有效建模。</p><p id="1d1d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面，我们可以看到2020年10天平均太阳辐射的季节性变化。显然，在夏季辐射会很高，因此我们可以在这个图的中间观察到一个驼峰。除此之外，辐射也应该是每天周期性的。因此，这项研究侧重于短期预测(每小时到10天)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mt"><img src="../Images/40152487492e3582d59d917f7db7b4cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fAYdmaNo_KB3Mj4UAijEag.png"/></div></div></figure><h2 id="f3a2" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">系统模型化</h2><p id="935b" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">我对这项研究的最初兴趣是创建一个短期预测模型——几个小时到10天。因此，我只使用了一年的数据进行训练(在这种情况下，是2020年的测量值)，并使用它来预测2021年的数据。但我们还没有2021年的全部数据(在我写这篇文章时，今天是2021年6月16日)，所以对这个日期之后的未知时期进行预测是有意义的。对于每小时的预报，数据被重采样为1小时的平均值，对于每天的预报，数据被重采样为1天的平均值。</p><p id="5b81" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们的建模方法始于传统建模技术的应用，如ARIMA和SARIMAX。然而，这些模型并没有很好地概括这些数据。这也许是因为一年的数据是不充分的。此外，当前数据在测量中具有高波动性，这可能会给模型增加额外的噪声。(可以尝试的是滚动平均训练，我还没做过！).另一方面，类似神经网络的模型结构，如LSTM，似乎在时间序列上表现很好。</p><h2 id="e88f" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">长短期记忆(LSTM)</h2><p id="fc7e" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">LSTM是具有存储过去记忆能力的循环神经网络。正是由于这种性质，LSTM网络在预测序列数据方面非常有用。LSTM的细节超出了本文的范围，但是你可以在网上很容易地找到它。在下一节中，我将向你展示辐射时间序列的LSTM应用的初步结果。</p><p id="a40e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是一个用于最终建模的LSTM建筑的例子。如果您对完整的代码感兴趣，我在本文末尾提供了一个GitHub链接。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/079aa09cd57283d29dc017eed4e4d9af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1086/format:webp/1*U8Hhwybd31Lch7jH3cea8w.png"/></div></figure><h2 id="29ef" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">培训评估</h2><p id="acbf" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">在进行任何预测之前，让我们看看模型预测在实际数据集上的表现。对于当前数据，我们的模型对短期预测表现良好。随着我们增加滞后期，我们的模型开始表现不佳。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/5af7548ffe37fdfd3b675265f531eb02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W4VDVmBBXUR0FIHiS-yGsg.png"/></div></div></figure><h2 id="253c" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">未来预测</h2><p id="1924" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">在这项研究的整个期间，最具挑战性的部分是弄清楚如何对未知时期进行预测。网上有很多资料比较预测时间序列的训练和测试数据，但只有少数资料显示了对未知的实际预测。特别是，工作的代码很难找到，老实说，我努力使我的代码为这一部分工作。下面是我用来做预测的一个函数的例子。如果您想要使用此代码，您必须使用下面显示的两个代码块:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="d9b1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以下是生成的数据帧的示例:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/feb7d60d386effe745554379917de6e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:484/format:webp/1*CtdjNpR40OCV06YFMsATYw.png"/></div></figure><p id="f936" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">此后，您可以使用任何类型的可视化库来绘制结果。我发现plotly库特别有用，因为它允许你放大和缩小，这对于时间序列数据非常方便。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/37b405f53e740c04b5509614b4788cd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*o-WPjEMnMEW3rSCXKw62Fw.png"/></div></figure><h2 id="4923" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">预测结果</h2><p id="a011" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">最后，该看预测结果了。我用这个模型测试了24小时、10天和30天的预测。总的来说，24小时和10天的天气预报相当不错。对于30天的预测，模型表现不佳，这是意料之中的，因为我们仅使用1年的数据进行训练。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/ca6c2ab061ed1d8592b566edc6e75dfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gYNc-2d5MtGB-zLTWhbvvw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">每日平均数据的预测结果(10天滚动平均)</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/325d628d2763f3b9383d505c66853fda.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*iJQCG94tapKjNn32rbpNJg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">缩放部分</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/c229647dcb66dad42d1b257561424dfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Gx6XQux_tgOqIcK4xPb5w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">小时平均数据的预测结果</p></figure><h2 id="9eed" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">结论</h2><ul class=""><li id="43f4" class="nb nc iq kx b ky mk lb ml le nd li ne lm nf lq ng nh ni nj bi translated">当前的研究显示了短期预测和中期(最多10天)预测的有希望的结果。从长期来看，该模型需要根据更多的历史数据进行训练。下载多年数据的脚本在处理大量文件时会很方便，这意味着我可以轻松地将更多历史数据合并到分析中。</li><li id="7cdb" class="nb nc iq kx b ky nk lb nl le nm li nn lm no lq ng nh ni nj bi translated">当前数据的短期波动非常大，因此使用滚动平均数据来训练像SARIMAX这样的传统模型有意义吗？</li><li id="8450" class="nb nc iq kx b ky nk lb nl le nm li nn lm no lq ng nh ni nj bi translated">最后，辐射数据中有许多额外的特征，因此看看多变量预测是否会表现得更好会很有趣。这是对未来的考验！</li></ul><p id="8619" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">GitHub链接:</p><div class="np nq gp gr nr ns"><a href="https://github.com/sgautam666/Time_Series_Forecasting_of_Solar_Irradiance" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd ir gy z fp nx fr fs ny fu fw ip bi translated">sgautam 666/时间序列太阳辐照度预测</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">太阳能发电增长迅速，例如，根据环境影响评估，得克萨斯州已计划增加10…</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">github.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og kp ns"/></div></div></a></div><p id="ad6a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">领英:<a class="ae mp" href="https://www.linkedin.com/in/suman-gautam-9091572b/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/suman-gautam-9091572b/</a></p></div></div>    
</body>
</html>