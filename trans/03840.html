<html>
<head>
<title>Sort NumPy Arrays By Columns or Rows</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">按列或行对NumPy数组排序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/sort-numpy-arrays-by-columns-or-rows-18dfd2ef28c4?source=collection_archive---------26-----------------------#2021-03-30">https://towardsdatascience.com/sort-numpy-arrays-by-columns-or-rows-18dfd2ef28c4?source=collection_archive---------26-----------------------#2021-03-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6e0a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用NumPy的内置函数来简化排序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/77c2d0f6bd05884f85c009404d663c68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_xx4yNOXcRI-ujaQ.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@alexblock?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Alex Block </a>在<a class="ae ky" href="https://unsplash.com/s/photos/sort?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="7fdd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">NumPy是许多Python程序和分析中使用的基本模块，因为它非常有效地进行数值计算。然而，对于NumPy的新手来说，一开始可能很难理解。具体来说，理解数组索引和排序很快变得复杂。幸运的是，NumPy有一些内置函数，使得执行基本的排序操作非常简单。</p><p id="38a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">NumPy数组可以使用<code class="fe lv lw lx ly b">argsort()</code>函数按单列、单行或多列或多行排序。<code class="fe lv lw lx ly b">argsort</code>函数返回一个索引列表，该列表将对数组中的值进行升序排序。<code class="fe lv lw lx ly b">argsort</code>函数的<code class="fe lv lw lx ly b">kind</code>参数使得对多行或多列的数组进行排序成为可能。本文将使用简单的示例和代码，对单行和单行进行排序，对多列进行排序。</p><h1 id="6828" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">创建一个NumPy随机整数数组</h1><p id="76dc" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">首先，导入<code class="fe lv lw lx ly b">numpy</code>模块。</p><p id="87cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在创建一个随机整数数组。在这里，我创建了一个5行4列的数组。数组中的值是随机的，所以如果使用相同的代码，得到的值将与这里显示的不同。</p><pre class="kj kk kl km gt mw ly mx my aw mz bi"><span id="9b3a" class="na ma it ly b gy nb nc l nd ne">a = np.random.randit(100, size=(5, 4)) </span><span id="2a1d" class="na ma it ly b gy nf nc l nd ne">output: <br/>[[44 47 64 67] <br/>[67 9 83 21] <br/>[36 87 70 88] <br/>[88 12 58 65] <br/>[39 87 46 88]]</span></pre><h1 id="b14f" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">按列对NumPy数组排序</h1><p id="e51e" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">为了按照特定的列对数组进行排序，我们将使用<code class="fe lv lw lx ly b">numpy</code> <code class="fe lv lw lx ly b">argsort()</code>函数。<code class="fe lv lw lx ly b">argsort()</code>返回将导致排序数组的数组索引(<a class="ae ky" href="https://numpy.org/doc/stable/reference/generated/numpy.argsort.html" rel="noopener ugc nofollow" target="_blank"> source </a>)。让我们快速看一下<code class="fe lv lw lx ly b">argsort</code>返回什么，然后如何使用<code class="fe lv lw lx ly b">argsort</code>获得一个排序后的数组。</p><p id="9c67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，在我们创建的数组的第一列上调用<code class="fe lv lw lx ly b">argsort</code>。您应该会得到类似这样的结果。其中<code class="fe lv lw lx ly b">argsort</code>结果给出了从最小到最大值的索引。</p><pre class="kj kk kl km gt mw ly mx my aw mz bi"><span id="9ae8" class="na ma it ly b gy nb nc l nd ne">a[:, 0].argsort() </span><span id="2608" class="na ma it ly b gy nf nc l nd ne">output: <br/>[2 4 0 1 3]</span></pre><p id="aa98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出显示第一列中的最小值位于位置2(第三个值)。这是正确的，数组第一列中的最小值是36，这是第一列中的第三个值(位置2)。</p><p id="5885" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了对数组进行排序，我们现在需要使用来自<code class="fe lv lw lx ly b">argsort</code>结果的索引来对数组中的行进行重新排序。这是一个简单的过程，只用一行代码就可以完成。我们将简单地使用<code class="fe lv lw lx ly b">argsort</code>结果作为行索引，并将结果数组赋回给<code class="fe lv lw lx ly b">a</code>，如下所示。</p><pre class="kj kk kl km gt mw ly mx my aw mz bi"><span id="199c" class="na ma it ly b gy nb nc l nd ne">a = a[a[:, 0].argsort()] </span><span id="7461" class="na ma it ly b gy nf nc l nd ne">output:<br/>[[36 87 70 88] <br/>[39 87 46 88] <br/>[44 47 64 67] <br/>[67 9 83 21] <br/>[88 12 58 65]]</span></pre><p id="8f54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，现在根据第一列将行从最少到最多排序。要对不同的列进行排序，只需更改列索引。例如，我们可以用<code class="fe lv lw lx ly b">a[a[:, 1].argsort()]</code>对第2列进行排序。</p><h1 id="762c" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">按行对NumPy数组排序</h1><p id="057b" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">NumPy数组也可以按行值排序。这与使用列进行排序的方式相同。我们只需要改变索引位置。例如，假设我们创建的数组在第一列进行排序，然后根据第一行中的值对列进行排序。</p><p id="b5a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，只需将索引(0)移动到行位置，并将<code class="fe lv lw lx ly b">argsort</code>结果移动到列位置。下面的代码显示了演示和结果。</p><pre class="kj kk kl km gt mw ly mx my aw mz bi"><span id="0572" class="na ma it ly b gy nb nc l nd ne">a = a[:, a[0, :].argsort()] </span><span id="0c57" class="na ma it ly b gy nf nc l nd ne">output: <br/>[[36 70 87 88] <br/>[39 46 87 88] <br/>[44 64 47 67] <br/>[67 83 9 21] <br/>[88 58 12 65]]</span></pre><h1 id="76fc" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">多列排序</h1><p id="1bd6" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">有时需要对多列进行排序。这方面的一个例子是在单独的列中包含年、月、日和值的数据。NumPy的<code class="fe lv lw lx ly b">argsort</code>可以使用<code class="fe lv lw lx ly b">kind</code>参数处理多个列的排序。</p><p id="fc1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们首先创建一个包含4列的数组，分别代表年、月、日和值。</p><pre class="kj kk kl km gt mw ly mx my aw mz bi"><span id="58c5" class="na ma it ly b gy nb nc l nd ne">b = np.array([<br/>[2020, 1, 1, 98], <br/>[2020, 2, 1, 99], <br/>[2021, 3, 6, 43], <br/>[2020, 2, 1, 54], <br/>[2021, 1, 1, 54], <br/>[2020, 1, 2, 74], <br/>[2021, 1, 3, 87], <br/>[2021, 3, 9, 23]])</span></pre><p id="a790" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们将使用<code class="fe lv lw lx ly b">argsort</code>对列进行排序，从最低优先级开始。这意味着如果我们想按年排序，然后按月排序，然后按日排序，我们需要先按日排序，然后按月排序，再按年排序。对于除第一个排序之外的所有排序，我们需要将<code class="fe lv lw lx ly b">kind</code>指定为‘merge sort ’,这将保持之前的排序上下文。下面的代码块演示了这一点。</p><pre class="kj kk kl km gt mw ly mx my aw mz bi"><span id="4f6b" class="na ma it ly b gy nb nc l nd ne">b = b[b[:, 2].argsort()] # sort by day <br/>b = b[b[:, 1].argsort(kind='mergesort')] # sort by month <br/>b = b[b[:, 0].argsort(kind='mergesort')] # sort by year </span><span id="11f9" class="na ma it ly b gy nf nc l nd ne">output:<br/>[[2020 1 1 98] <br/>[2020 1 2 74] <br/>[2020 2 1 99] <br/>[2020 2 1 54] <br/>[2021 1 1 54] <br/>[2021 1 3 87] <br/>[2021 3 6 43] <br/>[2021 3 9 23]]</span></pre><p id="aa8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，该过程成功地基于三列进行了排序。</p><h1 id="377d" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">结论</h1><p id="1c85" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">NumPy是一个基本的Python包。因为它是用编译语言构建的，所以它可以大大提高Python程序在Python列表和元组上的速度(如果合适的话)。缺点是NumPy可能有一个陡峭的学习曲线。一旦你能够理解数组造型、索引和排序，你就已经是一个熟练的NumPy用户了。</p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><p id="74db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nn">最初发表于</em><a class="ae ky" href="https://opensourceoptions.com/blog/sort-numpy-arrays-by-columns-or-rows/" rel="noopener ugc nofollow" target="_blank"><em class="nn">https://opensourceoptions.com</em></a><em class="nn">。</em></p></div></div>    
</body>
</html>