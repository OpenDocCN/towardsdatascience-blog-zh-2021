<html>
<head>
<title>The Battle of Interactive Geographic Visualization Part 1 — Interactive Geoplot Using One Line of Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">交互式地理可视化之战第1部分—使用一行代码的交互式Geoplot</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-battle-of-interactive-geographic-visualization-part-1-interactive-geoplot-using-one-line-of-8214e9ed1bb4?source=collection_archive---------21-----------------------#2021-11-03">https://towardsdatascience.com/the-battle-of-interactive-geographic-visualization-part-1-interactive-geoplot-using-one-line-of-8214e9ed1bb4?source=collection_archive---------21-----------------------#2021-11-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="f409" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">PYTHON。数据科学。地理可视化</h2><div class=""/><div class=""><h2 id="c36d" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用Holoviews和Python的地理可视化</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/f19b21ade74f49a466f8b35aa79b7b82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7wzy4NA3wVVvJjR6"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://unsplash.com/@geojango_maps?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> GeoJango Maps </a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><h1 id="3ca8" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">介绍</h1><p id="9745" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">地理空间数据可能是目前存在的最复杂的数据形式之一。一个原因是，这种形式的数据不用于分析师之间的日常对话。例如，分析师通常不谈论纬度和经度，和/或形状文件。</p><p id="244b" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">另一个原因是，地理空间数据所展示的模式并不容易显现。</p><p id="0e7c" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">因此，地理可视化在研究的初步分析和设计中发挥着重要作用。</p><h1 id="9c3d" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">地理散点图</h1><p id="371f" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">地理散点图与普通散点图相似，只是地理散点图使用观察的地理编码(位置)作为制图的参考基础。这意味着，与具有x和y变量的普通散点图(<em class="nb">有理数字类型</em>)相反，地理散点图的x和y是经度和纬度，并且是<em class="nb">名义值</em>。</p><p id="0ae6" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">由于数据科学家追踪新冠肺炎感染的努力，地理散点图最近变得更加流行。</p><p id="642f" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">在本系列文章中，我们将使用相同的数据集，但使用不同的包。</p><h1 id="5193" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">关于数据集</h1><p id="9a03" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">我们将要使用的数据集是“菲律宾咖啡店足迹”数据集，它是我在2020年生成的，用来绘制谷歌地图上列出的菲律宾咖啡店。</p><p id="8628" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">生成这些数据的过程如下:<a class="ae lh" rel="noopener" target="_blank" href="/mapping-your-favorite-coffee-shop-in-the-philippines-using-google-places-api-and-folium-2f9d5ad697bf">https://towards data science . com/mapping-your-favorite-coffee-shop-in-the-Philippine-using-Google-places-API-and-folio-2 F9 D5 ad 697 BF</a></p><h2 id="53ed" class="nc lj it bd lk nd ne dn lo nf ng dp ls mj nh ni lu mn nj nk lw mr nl nm ly iz bi translated">加载数据集</h2><pre class="ks kt ku kv gt nn no np nq aw nr bi"><span id="f013" class="nc lj it no b gy ns nt l nu nv">import pandas as pd<br/>df = pd.read_csv('data/Coffee Brands Footprint.csv',<br/>                index_col=0)<br/>df.head()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nw"><img src="../Images/3ce6800c31d245ab428260aee124cd41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LmRXIkoO4FGu2FpYl5Brww.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片:数据集预览</p></figure><p id="8851" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">请注意，对于绘制地理空间图形，有一个经度和纬度列是很重要的。在某些情况下，您可以用GeoPandas几何对象(点、线、多边形)来替换它。</p><p id="1236" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">不多说了，我们开始吧。</p><h1 id="2719" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">使用全息视图的一行代码</h1><p id="3d52" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">Holoviews是目前存在的高级绘图包之一。它非常容易使用，对于那些时间紧张的人，我推荐这个包。</p><p id="e3ca" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><code class="fe nx ny nz no b">pip install holoviews</code></p><p id="2f36" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">注意确保也安装<code class="fe nx ny nz no b">geoviews</code>包。</p><p id="f3e2" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><code class="fe nx ny nz no b">pip install geoviews</code></p><p id="e1a6" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">使用这一行代码可以生成地理散射图:</p><pre class="ks kt ku kv gt nn no np nq aw nr bi"><span id="0359" class="nc lj it no b gy ns nt l nu nv">df.hvplot.points(<br/>    x='lng', #longitude column<br/>    y='lat', #latitude column<br/>    hover_cols=['vicinity'], #tooltip when hovered over<br/>    c='brand', #color argument<br/>    title='Coffee Shops in The Philippines', <br/>    geo=True,<br/>    tiles='CartoLight')</span></pre><p id="92d9" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">请注意，它就像绘制一个普通的散点图！正如我们的介绍所述，x和y参数属于经度和纬度列。</p><p id="2de7" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><code class="fe nx ny nz no b">geo=True</code>的参数对于holoviews将x和y变量解释为地理编码非常重要。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oa"><img src="../Images/4d698caa902fbcb50a5c276c813bee1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*47EuEXjD30GCFCVq1w2Nnw.gif"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者生成的GIF。尝试使用以下任一选项来更改拼贴:#'CartoDark '，' CartoEco '，' CartoLight '，' CartoMidnight '，' EsriImagery '，<br/># ' EsriNatGeo '，' EsriReference''EsriTerrain '，' EsriUSATopo '，' OSM '，<br/># ' stamen labels '，' StamenTerrain '，' StamenTerrainRetina '，' StamenToner '，' StamenTonerBackground '，' stamen水彩'</p></figure><p id="36b5" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">让我们删除框架，以及它可能不会在视觉上吸引人。这可以通过将<code class="fe nx ny nz no b">xaxis</code>和<code class="fe nx ny nz no b">yaxis</code>设置为<code class="fe nx ny nz no b">None</code>来实现。</p><pre class="ks kt ku kv gt nn no np nq aw nr bi"><span id="74a4" class="nc lj it no b gy ns nt l nu nv">df.hvplot.points(<br/>    x='lng', <br/>    y='lat',<br/>    frame_height=1000,<br/>    frame_width=500,<br/>    xaxis=None,<br/>    yaxis=None,<br/>    hover_cols=['brand', 'vicinity'], <br/>    c='brand', <br/>    title='Coffee Shops in The Philippines', <br/>    geo=True,<br/>    tiles='CartoLight')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oa"><img src="../Images/3e50a3754141095a90439d35ed09f8ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*jV4PW_ZdXzTjH7zN5XZfpw.gif"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者生成的GIF。与第一张GIF图像相同，但没有x轴和y轴。</p></figure><p id="94cb" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">由于重叠的点，很难看到在特定区域有多少商店。在这种情况下，将点的透明度设置为小于100%会有所帮助。</p><p id="9351" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">对于这些情况，我们可以尝试用关键字<code class="fe nx ny nz no b">alpha=0.3</code>将其设置为30%。</p><pre class="ks kt ku kv gt nn no np nq aw nr bi"><span id="dd60" class="nc lj it no b gy ns nt l nu nv">df.hvplot.points(<br/>    x='lng', <br/>    y='lat',<br/>    alpha=0.3,<br/>    frame_height=1000,<br/>    frame_width=500,<br/>    xaxis=None,<br/>    yaxis=None,<br/>    hover_cols=['vicinity'], <br/>    c='brand', <br/>    title='Coffee Shops in The Philippines', <br/>    geo=True,<br/>    tiles='CartoLight')</span></pre><h1 id="b24e" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">全息视图的优点和CONS</h1><p id="e31c" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">除了holoviews易于使用和理解的事实之外，我们上面生成的图表可以部署为一个网页，您可以使用它进行演示。</p><p id="e98e" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我们的许多高管不希望看到原始代码，因此在报告时将它部署为一个单独的网页是一个很大的优势。</p><p id="a47e" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">要部署为单独的页面:</p><pre class="ks kt ku kv gt nn no np nq aw nr bi"><span id="bebc" class="nc lj it no b gy ns nt l nu nv">import panel as pn<br/>import holoviews as hv<br/>import holoviews.plotting.bokeh</span><span id="5a2e" class="nc lj it no b gy ob nt l nu nv">pn.panel(geoscatter).servable(title='HoloViews App').show() #.show() makes it to be a separate html</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oc"><img src="../Images/28c52bbfbb55596618ee2db853c01311.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*6jilMLW7lp5lFnnY41H-5Q.gif"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者生成的GIF。</p></figure><p id="238d" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">与大多数包一样，一个缺点是与其他包(如follow)相比，定制可能不太全面。</p><h1 id="13b1" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">结束语</h1><p id="23eb" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">我们可以做很多定制来改进我们上面已经有的可视化。对于有兴趣持续改进geo-scatter的读者，推荐以下:<br/> <br/> 1。<strong class="mc jd">选择定制的调色板</strong> —特别是，我们上面的是咖啡品牌，它们可以与特定的颜色相关联。例如，星巴克有一种特殊的绿色，可以很好地识别品牌。这里建议的方法是为品牌的颜色创建一个列，该列被提供给<code class="fe nx ny nz no b">c</code>或颜色参数。</p><p id="ed75" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">2.<strong class="mc jd">尝试不同的图块</strong> —对于有许多不同颜色(非单调)的图表，理想的是图块颜色不太鲜艳，以强调要点。对于单调的颜色，适用于连续变量，彩色图形可以谨慎使用。主要的想法是，瓷砖不应该分散或带走地理图的信息，这就是为什么我们这样做的原因。</p><p id="6b2c" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">正如您从上面所看到的，可视化点提升了我们对地理空间数据的理解。像网络效应这样的模式是很容易得到的，我们可以推断这个地区的咖啡店越多，这个地方就越发达。</p><p id="ab81" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">在下一个系列中，我们将尝试不同的包来比较整体的语法和美学。</p><p id="57ef" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我的<a class="ae lh" href="https://github.com/francisadrianviernes/GeoVisualization/blob/master/The%20Battle%20of%20Interactive%20Geographic%20Visualization%20Part%201%E2%80%8A-%E2%80%8AInteractive%20Geoplot%20Using%20One%20Line%20of%C2%A0Code.ipynb" rel="noopener ugc nofollow" target="_blank"> Github页面</a>上的全部代码。</p><p id="2162" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">让我知道你的想法！</p></div></div>    
</body>
</html>