<html>
<head>
<title>Structuring Your Dash App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建您的Dash应用</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/structuring-your-dash-app-e33d8e70133e?source=collection_archive---------10-----------------------#2021-09-28">https://towardsdatascience.com/structuring-your-dash-app-e33d8e70133e?source=collection_archive---------10-----------------------#2021-09-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c54f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">选择正确的结构使得开发和部署Dash应用程序变得更加容易</h2></div><p id="2725" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由<a class="ae le" href="https://www.linkedin.com/in/edkrueger/" rel="noopener ugc nofollow" target="_blank">爱德华·克鲁格</a>和<a class="ae le" href="https://www.linkedin.com/in/erin-oefelein-3105a878/" rel="noopener ugc nofollow" target="_blank">艾琳·欧菲莱因</a></p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/ab3e21adf571c2a7da6f41b938f53b7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jxxI7h3jkD3RzhrHA5HPbA.jpeg"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/s/photos/dash?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">上</a>的<a class="ae le" href="https://unsplash.com/@jannerboy62?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">刻痕</a>拍摄</p></figure><h1 id="2edb" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">引入破折号</h1><p id="4a50" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">简而言之，Dash是一个Python包，允许在不使用HTML、CSS或JavaScript的情况下用纯Python创建“仪表板”。由于它是可编程的，它比其他仪表板选项更强大。</p><p id="0f3b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">近年来，有一股将Python脚本制作成web应用程序的强大推动力。某种程度上，甚至Jupyter笔记本也在这个方向推动Python。然而，包括Dash和Streamlit在内的新工具通过允许用户将web应用程序编写为脚本，使Python的分发变得更加容易。</p><h2 id="f84f" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">为什么结构和工具很重要？</h2><p id="0027" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">您已经完成了项目，并创建了一个应用程序来展示您的成果。现在，您想通过部署Dash应用程序来分享您的项目见解。本文将带您了解如何将您的应用程序构建成易于部署的形式！</p><p id="1560" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果这种工具看起来很多，确实很多。但是，如果你不愿意，你不需要把它都写出来。我们不仅在下面的回购中提供了代码，而且还将其作为模板。所以，你可以点击“使用这个模板”按钮，按照指示开始编辑<code class="fe ne nf ng nh b">app/</code>目录中的代码。</p><div class="ni nj gp gr nk nl"><a href="https://github.com/edkrueger/dash-template" rel="noopener  ugc nofollow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">GitHub-edkrueger/dash-模板</h2><div class="ns l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">github.com</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny lp nl"/></div></div></a></div><h2 id="5b45" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">示例应用程序</h2><p id="6bf2" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">我们将使用一个示例应用程序来展示一个项目。让我们快速看一下我们正在部署的应用程序。Erin的项目是收集微小房屋列表、将结果存储为CSV并在Dash应用程序中可视化结果的结果。有些地块需要地图框，因此需要地图框标记。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi nz"><img src="../Images/cab1c87542059c6aaf355d2ac9ef1e85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HCtIcMPmagCQiTsDyv6KaQ.png"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">应用程序截图(来源:作者)</p></figure><h1 id="c502" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">如何构建你的Dash应用</h1><p id="2d99" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">在我们开始之前，这里有一个我们将涵盖的概述。</p><p id="5e4f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将涵盖:</p><ul class=""><li id="5e86" class="oa ob it kk b kl km ko kp kr oc kv od kz oe ld of og oh oi bi translated">关于Pipenv的内容已经足够，可以开始了</li><li id="3016" class="oa ob it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">如何使用Pipenv安装依赖项</li><li id="43a3" class="oa ob it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">我们如何以及为什么安装开发依赖项</li><li id="4312" class="oa ob it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">我们如何以及为什么使用预提交钩子</li><li id="06e0" class="oa ob it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">如何设置环境变量</li><li id="a521" class="oa ob it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">如何构建存储库</li><li id="9621" class="oa ob it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">如何测试我们所有的工具</li></ul><h2 id="b437" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">Pipenv基础知识</h2><p id="2239" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">强烈建议使用pipenv包管理您的应用程序的虚拟环境，因为pipenv允许其他功能，例如:</p><ul class=""><li id="ee2d" class="oa ob it kk b kl km ko kp kr oc kv od kz oe ld of og oh oi bi translated">自动获取环境资源的能力。env)文件。</li><li id="0df4" class="oa ob it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">在Pipfile中指定应用需求的能力，避免了在生产中使用它们的需要。</li><li id="bd09" class="oa ob it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">虚拟环境中使用的Python版本的规范。</li></ul><p id="335a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">pipenv提供的功能使部署您的应用程序变得更加容易。如果您希望在此时安装pipenv，可以通过运行以下命令来完成:</p><pre class="lg lh li lj gt oo nh op oq aw or bi"><span id="ccb7" class="ms lw it nh b gy os ot l ou ov">pip install pipenv</span></pre><div class="ni nj gp gr nk nl"><a rel="noopener follow" target="_blank" href="/virtual-environments-for-data-science-running-python-and-jupyter-with-pipenv-c6cb6c44a405"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">数据科学的虚拟环境:使用Pipenv运行Python和Jupyter</h2><div class="ow l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">为Python设置虚拟环境。</h3></div><div class="ns l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">towardsdatascience.com</p></div></div><div class="nt l"><div class="ox l nv nw nx nt ny lp nl"/></div></div></a></div><h2 id="bb69" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">属国</h2><p id="f72a" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">在项目文件夹中，运行:</p><pre class="lg lh li lj gt oo nh op oq aw or bi"><span id="e0f0" class="ms lw it nh b gy os ot l ou ov">pipenv install &lt;your app dependencies&gt;</span></pre><p id="bfb6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们的微型家用仪表盘应用程序使用熊猫、Dash和Plotly。因此，为了创建我们的 pipenv环境，我们运行:</p><pre class="lg lh li lj gt oo nh op oq aw or bi"><span id="d502" class="ms lw it nh b gy os ot l ou ov">pipenv install pandas dash plotly gunicorn</span></pre><p id="1dbc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="oy">注意加了gunicorn。将gunicorn包含在您的Pipfile中非常重要，这样，如果您希望部署到Google云平台应用程序引擎服务或为您的应用程序构建Docker容器，两者都将按预期工作。</em></p><p id="596e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">上面的<code class="fe ne nf ng nh b">pipenv</code>命令将创建一个Pipfile和一个Pipfile.lock，包含您的应用程序的依赖项。</p><h2 id="bfd2" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">开发依赖性</h2><p id="3a35" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">开发依赖是应用程序在生产中运行时不需要的所有依赖，但可以增强开发人员的体验或代码质量。</p><p id="2147" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将使用以下开发依赖项:</p><ul class=""><li id="5903" class="oa ob it kk b kl km ko kp kr oc kv od kz oe ld of og oh oi bi translated"><code class="fe ne nf ng nh b">black</code>将格式化你的代码。</li><li id="14b4" class="oa ob it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated"><code class="fe ne nf ng nh b">pylint</code>会检查你的应用程序的代码风格，并对一行代码的长度，是否存在未使用的变量，导入是否正确地放在模块的顶部等提出建议。</li><li id="60b1" class="oa ob it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated"><code class="fe ne nf ng nh b">pipenv-to-requirements</code>将您的应用需求写入requirements.txt文件，多家云提供商要求以此格式正确识别。</li><li id="6647" class="oa ob it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated"><code class="fe ne nf ng nh b">pre-commit</code>是在你的代码提交到你的GitHub repo之前，自动检查你的代码的工具(这里是black，pylint和pipenv-to-requirements)。</li></ul><p id="bb05" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可以用<code class="fe ne nf ng nh b">pipenv install --dev --pre black pylint pipenv-to-requirements pre-commit</code>安装。</p><p id="8a97" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者，从我们的模板中取出下面的代码片段，粘贴到您的Pipfile中并运行<code class="fe ne nf ng nh b">pipenv install --dev --pre</code>。</p><pre class="lg lh li lj gt oo nh op oq aw or bi"><span id="2075" class="ms lw it nh b gy os ot l ou ov">[dev-packages]<br/>black = "*"<br/>pylint = "*"<br/>pre-commit = "*"<br/>pipenv-to-requirements = "*"</span></pre><h2 id="4130" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">预提交挂钩:预提交配置. yaml</h2><p id="cc4b" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">接下来，您将通过运行以下命令将<code class="fe ne nf ng nh b">pre-commit-config.yaml</code>文件添加到您的项目中:</p><pre class="lg lh li lj gt oo nh op oq aw or bi"><span id="384e" class="ms lw it nh b gy os ot l ou ov">touch pre-commit-config.yaml</span></pre><p id="931b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="oy">*注意:为了正确识别，该文件必须命名为</em> <code class="fe ne nf ng nh b">pre-commit-config.yaml</code> <em class="oy">！</em></p><p id="bba5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以使用下面的文本轻松复制并粘贴我们的<code class="fe ne nf ng nh b">pre-commit-config.yaml</code> <em class="oy"> </em>文件的文本:</p><pre class="lg lh li lj gt oo nh op oq aw or bi"><span id="8373" class="ms lw it nh b gy os ot l ou ov">repos:<br/>    - repo: <a class="ae le" href="https://github.com/psf/black" rel="noopener ugc nofollow" target="_blank">https://github.com/psf/black</a><br/>      rev: 19.10b0<br/>      hooks:<br/>        - id: black<br/>    - repo: <a class="ae le" href="https://github.com/pre-commit/pre-commit-hooks" rel="noopener ugc nofollow" target="_blank">https://github.com/pre-commit/pre-commit-hooks</a><br/>      rev: v2.5.0<br/>      hooks:<br/>        - id: check-added-large-files<br/>    - repo: local<br/>      hooks:<br/>        - id: pylint<br/>          name: pylint<br/>          entry: pylint app/<br/>          language: system<br/>          always_run: true<br/>          pass_filenames: false<br/>        - id: pipenv-to-requirements<br/>          name: pipenv-to-requirements<br/>          entry: pipenv_to_requirements<br/>          language: system<br/>          always_run: true<br/>          pass_filenames: false</span></pre><p id="e0c4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你的文件夹不是git repo，你需要在创建预提交钩子之前运行<code class="fe ne nf ng nh b">git init</code>。现在，通过运行以下命令，使用<code class="fe ne nf ng nh b">pre-commit</code> dev依赖项(在创建虚拟环境时安装)来安装和设置git挂钩:</p><pre class="lg lh li lj gt oo nh op oq aw or bi"><span id="8273" class="ms lw it nh b gy os ot l ou ov">pipenv run pre-commit install</span></pre><p id="5414" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">pipenv包再次用于运行预提交钩子。你开始明白我们为什么推荐它了吗？现在<code class="fe ne nf ng nh b">pre-commit</code>在运行<code class="fe ne nf ng nh b">git commit</code>时会自动运行！</p><p id="a31b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是文件在您选择的编辑器中的外观:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/0b2b13384ac068ededc0556e8e98cc06.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*JODl2Tb2M7ygvN2J7LsoJQ.png"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated"><code class="fe ne nf ng nh b">pre-commit-config.yaml (source: by authors)</code></p></figure><p id="7c27" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想阅读更多关于预提交钩子的内容，可以看看我们下面的文章。</p><div class="ni nj gp gr nk nl"><a rel="noopener follow" target="_blank" href="/getting-started-with-python-pre-commit-hooks-28be2b2d09d5"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">Python预提交挂钩入门</h2><div class="ow l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">定义拒绝不符合要求的提交的规则。</h3></div><div class="ns l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">towardsdatascience.com</p></div></div><div class="nt l"><div class="pa l nv nw nx nt ny lp nl"/></div></div></a></div><h2 id="5d5d" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">环境变量</h2><p id="968a" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">环境变量有助于提高应用程序的安全性。您可以使用环境变量引用令牌，而不是将令牌保存在脚本中。您的应用程序中使用的令牌的一些示例可能是到数据库的连接、第三方API等。</p><p id="5d5c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我们的例子中，我们使用Mapbox来呈现美国的交互式follow地图，而不是在脚本中保存我们的令牌，我们使用一个环境变量来引用我们的令牌的密钥。</p><p id="a0f4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要创建一个环境变量，您将首先使用以下命令创建一个<code class="fe ne nf ng nh b">.env</code>文件:</p><pre class="lg lh li lj gt oo nh op oq aw or bi"><span id="2a94" class="ms lw it nh b gy os ot l ou ov">touch .env</span></pre><p id="7c4a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，创建一个<code class="fe ne nf ng nh b">.gitignore</code>文件，并将刚刚创建的<code class="fe ne nf ng nh b">.env</code>文件添加到<code class="fe ne nf ng nh b">.gitignore</code>文件中，如下所示:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/29099a7e531908766e200e86d01dc68a.png" data-original-src="https://miro.medium.com/v2/resize:fit:194/format:webp/1*IVx8hTW4buIVzLvHftDR0A.png"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated"><code class="fe ne nf ng nh b">.gitignore (source: by authors)</code></p></figure><p id="cb93" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<code class="fe ne nf ng nh b">.env</code>文件中，我们现在可以创建我们的环境变量。为此，指定变量的名称，这里命名为<code class="fe ne nf ng nh b">MAPBOX_TOKEN</code>，并指定其值。为了安全起见，我们把令牌的密钥藏在这里了。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/c76a87460ffdc044fe65d13313fb6d92.png" data-original-src="https://miro.medium.com/v2/resize:fit:310/format:webp/1*NiYsnKHo21GguCAvE4Ezdw.png"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated"><code class="fe ne nf ng nh b">.env (source: by authors)</code></p></figure><p id="4a9b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，当运行<code class="fe ne nf ng nh b">pipenv</code>时，您的环境变量将自动从<code class="fe ne nf ng nh b">.env</code>文件中获取并加载。跑步时:</p><pre class="lg lh li lj gt oo nh op oq aw or bi"><span id="4359" class="ms lw it nh b gy os ot l ou ov">pipenv run echo $MAPBOX_TOKEN</span></pre><p id="fa44" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您的令牌值将打印到控制台。</p><p id="feea" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您最初没有以这种方式设置您的令牌，您可以很容易地将您的env变量设置为等于您的应用程序的令牌的原始名称(此处为<code class="fe ne nf ng nh b">mapbox_access_token</code>)，以避免在您的应用程序中出现的每个地方都更改令牌名称:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/a834124f1d2038ef9e2e0bef39a229a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*V1Hg2KvtWFIM5a8C2331tw.png"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated"><code class="fe ne nf ng nh b">app.py (source: by authors)</code></p></figure><h2 id="5f04" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">构建您的应用程序代码</h2><p id="f65d" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">现在，您已经拥有了部署应用程序所需的所有文件，您需要确保您的应用程序能够被理解并轻松部署到云。</p><p id="9f98" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建一个名为<code class="fe ne nf ng nh b">app</code>的文件夹，并将所有必要的文件保存到app文件夹中，这样您的项目结构如下所示:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/54de378baeb67bdde3cb2c2efae9aab9.png" data-original-src="https://miro.medium.com/v2/resize:fit:462/format:webp/1*mnsAkDnzDfrUheEzCKkrRw.png"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated"><code class="fe ne nf ng nh b">Tree Structure of the Repo (source: by authors)</code></p></figure><h2 id="e8cd" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">测试你的应用</h2><p id="ce97" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">首先在本地运行你的应用程序<strong class="kk iu">来确保一切按预期运行总是一个好主意</strong>！您不希望将您的应用程序部署到云后发现它在那里不工作，然后在问题与您的云部署相关的前提下进行调试，却发现问题出在应用程序本身！</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/0ed2bf9d5b76989c3c5e05c6272eceda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*O-Xqx_sHm_zKXmzeoIBjcQ.png"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated"><code class="fe ne nf ng nh b">Dash App in Action (source: by authors)</code></p></figure><p id="0107" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦你确认你的应用可以在你的机器上运行，你就可以把你的工作提交给GitHub了！</p><h2 id="e350" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">提交到GitHub</h2><p id="cf4f" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">如果您还没有创建GitHub repo来备份您的文件，现在就创建吧。您可以通过遵循这些说明来轻松设置GitHub repo。将您的应用程序文件暂存并添加到存储库中:</p><pre class="lg lh li lj gt oo nh op oq aw or bi"><span id="788c" class="ms lw it nh b gy os ot l ou ov">git add pre-commit-config.yaml Pipfile Pipfile.lock app/</span></pre><p id="c85e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">并承诺他们:</p><pre class="lg lh li lj gt oo nh op oq aw or bi"><span id="b9cc" class="ms lw it nh b gy os ot l ou ov">git commit -m "Update package management"</span></pre><p id="9684" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，您的应用程序已正确构建，并且所有文件都已暂存，要对所有应用程序文件运行挂钩，请运行:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/3ae3f2ff44aabd69b8a27376ad234dda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/1*mccg635HGVw2oOFRj9TBkg.png"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated"><code class="fe ne nf ng nh b">The Pre-commit Hooks Running (source: by authors)</code></p></figure><p id="9fc9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将显示并执行您已经实现的钩子。</p><p id="4106" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="oy">* *注意:预提交挂钩要求文件在运行</em> <code class="fe ne nf ng nh b">pipenv run pre-commit run --all-files</code>时被分阶段发现</p><p id="ad36" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当使用预提交钩子时，你需要添加和存放你的文件两次，因为<code class="fe ne nf ng nh b">black</code>和<code class="fe ne nf ng nh b">pipenv-to-requirements</code>会对你的代码进行修改，也就是说black会格式化你的脚本，pipenv-to-requirements会创建一个requirements.txt文件。这将导致本地存储的版本和已提交的版本不同步。</p><p id="9e57" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通过运行以下命令，添加刚刚通过<code class="fe ne nf ng nh b">pipenv-to-requirements</code>钩子创建的requirements.txt文件:</p><pre class="lg lh li lj gt oo nh op oq aw or bi"><span id="12a2" class="ms lw it nh b gy os ot l ou ov">git add requirements*</span></pre><p id="46ac" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">完成后，通过运行以下命令推送文件:</p><pre class="lg lh li lj gt oo nh op oq aw or bi"><span id="0c91" class="ms lw it nh b gy os ot l ou ov">git commit -m "your-message"</span></pre><p id="03c0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不错！你的应用已经被结构化、清理并保存到GitHub。</p><p id="a81d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想更仔细地观察和更深入地理解这个过程，看看我们下面的文章。<em class="oy">注意:我们使用一些不同的工具，但是概念是相同的。</em></p><div class="ni nj gp gr nk nl"><a rel="noopener follow" target="_blank" href="/ci-cd-by-example-in-python-46f1533cb09d"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">Python中的CI/CD示例</h2><div class="ow l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">用Python简单演示了CI/CD，带有诗歌和预提交钩子</h3></div><div class="ns l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">towardsdatascience.com</p></div></div><div class="nt l"><div class="ph l nv nw nx nt ny lp nl"/></div></div></a></div><p id="97a8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们的下一篇文章将带您了解如何使用Google的应用引擎服务部署Dash应用。在这个平台上部署很方便，因为不需要对你的应用进行Dockerize，而在部署到谷歌的云运行和计算引擎服务时，这是必要的。</p><p id="76d3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们希望你喜欢这篇文章！有关数据科学、机器学习和开发的更多内容，请查看<a class="ae le" href="https://www.youtube.com/channel/UCmvdvjDaSjjMRIAxE5s7EZA" rel="noopener ugc nofollow" target="_blank"> Edward的YouTube频道</a>并订阅我下面的邮件列表，成为第一个听到新文章的人！</p><div class="ni nj gp gr nk nl"><a href="https://edkruegerdata.com/subscribe" rel="noopener  ugc nofollow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">每当爱德华·克鲁格发表文章时，就收到一封电子邮件。</h2><div class="ns l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">edkruegerdata.com</p></div></div><div class="nt l"><div class="pi l nv nw nx nt ny lp nl"/></div></div></a></div></div></div>    
</body>
</html>