<html>
<head>
<title>ElasticSearch 411</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">弹性搜索411</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/elasticsearch-411-5f2f1872977c?source=collection_archive---------11-----------------------#2021-05-01">https://towardsdatascience.com/elasticsearch-411-5f2f1872977c?source=collection_archive---------11-----------------------#2021-05-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9f09" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Elasticsearch是一个开源的分布式数据搜索引擎，越来越受欢迎——下面是你应该知道的411</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/20a6eab1ad7a986749a2e80494c4d4d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WjkRAXgka0kig3yI"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">JOSHUA COLEMAN 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="4d49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如今，由于数字化，非结构化数据正以比以往更高的数量和速度生成。组织坐拥大量非结构化数据，但从这些数据中检索有效信息并非易事。Elasticsearch是一个流行的面向文档的搜索引擎，以其快速高效地搜索和检索非结构化和结构化数据的能力而闻名。</p><p id="3ea6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将对Elasticsearch做一个简单的介绍，到此结束时，初学者将能够理解它的优势、架构和一些值得注意的用例。</p><h1 id="c038" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">什么是Elasticsearch？</h1><p id="6414" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">有很多像MongoDB、PostgreSQL、Solr这样的NoSQL数据库可以用来存储和查询非结构化数据。然而，这些NoSQL数据库执行复杂查询的能力有限，并且它们通常不能很好地执行实时信息检索。这就是Elasticsearch填补空白的地方。</p><p id="24bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Elasticsearch是一个具有分析能力的开源分布式搜索引擎。它建立在Lucene框架之上，用Java编写。从2010年它的创造者Shay Banon首次发布以来，Elasticsearch就获得了开发者和公司的积极关注。它越来越受欢迎很大程度上是因为它强大的搜索引擎，可以搜索<a class="ae ky" href="https://www.elastic.co/what-is/elasticsearch" rel="noopener ugc nofollow" target="_blank">任何类型的数据，包括文本、数字、地理空间、结构化和非结构化数据。</a></p><p id="b5a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与NoSQL数据库不同，Elasticsearch主要被设计成一个搜索引擎，而不是一个数据库。它有惊人的能力来执行快速，几乎实时，和先进的搜索。通常，它集成在其他数据库之上，但Elasticsearch本身也可以用作数据存储。</p><p id="f4e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Elasticsearch的另一个强大且广受欢迎的特性是，可以使用其强大的Restful APIs进行搜索，因此其他系统很容易与之集成。</p><h1 id="a75a" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">弹性研究架构</h1><p id="f5e7" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">让我们一个接一个地快速看一下Elasticsearch架构的不同组件。</p><h2 id="91ab" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">文档和类型</h2><p id="26f4" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">一个<em class="ne">文档</em>是Elasticsearch中数据的基本单位。文档以JSON格式保存，可以有多个属性，并且与一个<em class="ne">类型</em>相关联。例如，如果我们想要添加关于电子商务产品的数据，那么我们可以创建一个“产品”类型的文档对象，其属性类似于<em class="ne">名称、描述、价格、评论</em>。类似地，我们可以创建<em class="ne">客户</em>类型的文档，这些文档可能具有像<em class="ne">姓名、联系人、地址、订单历史</em>这样的属性。</p><p id="fa63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于那些来自SQL背景的人来说，他们可能将类型关联为RDBMS的表，将文档关联为表的行，将属性关联为表的列。</p><p id="2ce3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而应该注意的是，Elasticsearch已经计划淘汰类型的概念。他们已经在6.0和7.0中限制了类型的使用</p><h2 id="9d29" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">弹性搜索指数</h2><p id="61fa" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">逻辑上相关的文档或那些具有相似特征的文档被组织在称为索引的公共集合下。在我们的例子中，所有的产品文档被绑定到一个索引，所有的客户文档被绑定到另一个索引。</p><p id="dfd0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">索引类似于RDBMS中的数据库。然而，请注意，我们与RDBMS的所有类比都是为了便于理解，这并不是说Elasticsearch的工作方式与RDBMS类似。</p><h2 id="96ec" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">倒排索引</h2><p id="e50c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">一旦文档被编入索引，Elasticsearch就会创建一个称为倒排索引的数据结构，它主要负责闪电般快速的搜索结果检索。简而言之，倒排索引包含这些术语以及这些术语在所有文档中出现的信息。下图将清楚地说明这一点。例如，如果搜索“blue ”, elastic search将在倒排索引中进行查找，并快速返回文档1和2。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/bd89ce62813b12730b01f57549a98775.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*ECQfL40eeBT486ryI2vFFw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">弹性搜索指数图解(图片由作者提供，来源)</p></figure><h2 id="0069" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">节点和集群</h2><p id="46ca" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在Elasticsearch中，数据分布在多个称为节点的服务器上。当启动查询时，必须从多个节点整合搜索数据的结果。所有这些节点的集合称为一个集群。</p><h2 id="300f" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">分片和复制</h2><p id="5b13" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Elasticsearch将一个索引分解成多个分片，每个分片本身就是一个保存在一个节点上的全功能索引。分片有助于跨多个节点水平分布索引所需的资源，并确保将来的可伸缩性。</p><p id="c6d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Elasticsearch的另一个非常重要的特性是跨集群上的多个节点复制分片，以提高容错能力。如果一个节点由于某种原因出现故障，那么由于碎片的复制，相同的数据在另一个节点上可用。</p><h1 id="0a72" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">什么是弹性栈(以前叫ELK栈)</h1><p id="bbd5" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">不谈到弹性叠加，对弹性研究的介绍是不完整的。Elasticsearch是一个通用的文档搜索引擎，可以独立工作。然而，大约在2010年代早期创建ES的同时，乔丹·西塞尔创建了一个名为Logstash的数据摄取工具，它能够将日志数据摄取到任何目标系统中，其中之一就是Elasticsearch。</p><p id="0583" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现场还有一个可视化工具，叫做Kibana。基巴纳是由拉什德·卡汉开发的，因此它可以用来有效地可视化日志数据。人们发现这三个工具对于日志搜索和日志分析的常见用例非常有用。于是三位产品负责人决定在<a class="ae ky" href="https://www.elastic.co/about/history-of-elasticsearch#group-1" rel="noopener ugc nofollow" target="_blank"> 2012 </a>年联手，正式组建了ELK stack，即Elasticsearch、Logstash、Kibana stack。这个名字后来更名为弹性堆栈。此后，弹性堆栈在数据工程领域广为人知。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/886f1c2f3e5911eb34e9448b88d87998.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*UqxBwtscuuWuL6awapB-dw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">弹性栈基巴纳仪表板(信用:【https://www.elastic.co/】T2)</p></figure><h1 id="fc80" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">基巴纳的挑战</h1><p id="e650" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">尽管Kibana仍然是可视化组件的一个流行选项，但是最近出现了一些具有更多特性的其他选项。</p><p id="080a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其原因是，尽管Kibana非常适合在Elasticsearch中可视化日志数据，但Elastic的用例已经远远超出了它们最初的日志数据来源(参见下面关于用例的部分)。</p><p id="435b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于范围的扩大，基巴纳</p><h1 id="010c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">为什么Elasticsearch受欢迎</h1><p id="24fc" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">根据Stackshare的<a class="ae ky" href="https://stackshare.io/elasticsearch#description" rel="noopener ugc nofollow" target="_blank">调查</a>，以下是开发者和公司选择Elasticsearch的主要原因:</p><ol class=""><li id="9f77" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated">强大的API</li><li id="6dee" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">伟大的搜索引擎</li><li id="a4c1" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">开放源码</li><li id="b01d" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">安静的</li><li id="1be3" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">近实时搜索</li><li id="82b7" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">自由的</li><li id="e14d" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">搜索一切</li><li id="9e74" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">易于上手</li><li id="d8da" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">分析学</li><li id="9e2a" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">分布的</li></ol><h1 id="ae13" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">弹性搜索的用例</h1><p id="b31c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Elasticsearch在日志搜索和分析、应用程序监控、网络搜索、应用程序搜索和商业分析方面有着广泛的应用。有许多知名的公司和企业都在使用Elasticsearch，让我们来看看其中的一些用例。</p><p id="4228" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">● <a class="ae ky" href="https://www.elastic.co/elasticon/tour/2019/boston/elastic-as-a-fundamental-core-to-pfizers-scientific-data-cloud" rel="noopener ugc nofollow" target="_blank">辉瑞</a>在其名为科学数据云(SDC)的数据湖之上使用Elasticsearch进行审计、搜索和近乎实时的仪表板报告。</p><p id="f701" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">● <a class="ae ky" href="https://www.elastic.co/elasticon/conf/2016/sf/all-the-data-thats-fit-to-find-search-at-the-new-york-times" rel="noopener ugc nofollow" target="_blank">纽约时报</a>正在利用Elasticsearch搜索过去160年出版历史中的1500万篇文章。</p><p id="34f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">● <a class="ae ky" href="https://www.elastic.co/videos/ebay-and-elasticsearch-this-is-not-small-data" rel="noopener ugc nofollow" target="_blank"> Ebay </a>正在使用Elasticsearch在几秒钟内搜索8亿个商品列表。</p><p id="66aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">● <a class="ae ky" href="https://www.elastic.co/elasticon/tour/2015/chicago/extended-custom-scripting-at-groupon" rel="noopener ugc nofollow" target="_blank"> Groupon </a>正在利用Elasticsearch为其客户检索最相关的本地交易。</p><p id="31e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">● <a class="ae ky" href="https://www.elastic.co/blog/improving-the-godaddy-user-experience-with-elastic-machine-learning" rel="noopener ugc nofollow" target="_blank"> GoDaddy </a>正在使用Elasticsearch及其内置的机器学习功能来检测他们日志中的异常，以提供更好的客户体验。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/ce9db0bb6daeab49af217742828e0e37.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*FNBd-TxQnmkhbGIdSWhZvw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">弹性机器学习(信用:<a class="ae ky" href="https://www.elastic.co/)" rel="noopener ugc nofollow" target="_blank">https://www.elastic.co/)</a></p></figure><h1 id="2150" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="fece" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果您是初学者，这篇文章会让您对Elasticsearch及其特性有一个较高层次的了解。我们还简单介绍了麋鹿生态系统以及一些真实的行业用例。我们希望这将成为你为你的项目需求采用Elasticsearch的动力和垫脚石。</p></div></div>    
</body>
</html>