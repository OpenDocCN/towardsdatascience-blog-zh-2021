<html>
<head>
<title>How to Catch Profanity with R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用R捕捉亵渎</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-catch-profanity-with-r-4a21e024d4db?source=collection_archive---------28-----------------------#2021-11-08">https://towardsdatascience.com/how-to-catch-profanity-with-r-4a21e024d4db?source=collection_archive---------28-----------------------#2021-11-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b861" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">忘了肥皂吧，我们会用数据科学的力量给他们洗洗嘴</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d9fc475ec7f26741274a1b942b533d0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qBAOH3eymfkNfh_s"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">泰勒·尼克斯在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="80ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">人们说脏话。如果你或你的公司碰巧有任何类型的用户生成内容，这些人会在你的网站、社交媒体、评论、评论等上说脏话。他们会匿名坐在他们的小屏幕后面，像海军陆战队队员一样在你的网站上骂人！</p><p id="aeb2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">幸运的是，我曾经是一名海军陆战队员，所以我认为自己是骂人的专家。我将教你如何用几行r来捕捉亵渎。</p><h1 id="d26a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">问题比你想象的要大</h1><p id="8daf" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在深入研究代码之前，让我们先思考一下这个问题是如何难以解决的。无论我们认为自己有多聪明，都比不上那些找到新方法骂人的人。仅f-bomb就有数千种变体，每天都有新的变体被创造出来(我在写这篇文章的时候就创造了几个新的！).</p><p id="6a07" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是你所面临的一些例子:</p><ul class=""><li id="63ef" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">符号替换:cat = c@t</li><li id="a5cb" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">语音替换:duck = duc</li><li id="1dbc" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">大写替换:狗=干旱</li><li id="1c7a" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">字母分隔:goose = g o o s e</li><li id="83e6" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">字符重复:mouse = moooouuuusssse</li><li id="5093" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">内心世界掩蔽:马=海马</li><li id="1ece" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">语言替换:bird = pajaro</li><li id="0cd7" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">字母反转:rat = tar</li><li id="2be4" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">还有很多很多其他人…</li></ul><p id="79e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这排除了每个人的个人喜好，昨天还是良性的单词和短语今天可能突然变得具有攻击性。加分的是，这个词在世俗和非世俗的语境中都可以恰当地使用。</p><p id="de9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么我们有机会吗？嗯，算是吧。</p><p id="2e57" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们当然可以用黑名单和模式匹配来解决这个问题。)、机器学习和事后措施(例如暂停或禁止有毒用户)。但是没有什么能真正打败人类的节制。</p><p id="132a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">语言变化的速度比我们的算法还快，我们的ML模型将永远与最后一个例子(一个好词一夜之间变坏)作斗争。</p><p id="5f63" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最好的方法通常是上述所有措施的结合。你想要黑名单(由人类版主每天添加新词)，模式匹配来捕捉给定词的所有排列，ML模型标记潜在的不良内容，以及足够严格的暂停/禁止措施来劝阻用户越过这条线。将所有这些与通过身份验证消除匿名结合起来，你<em class="nd">可能</em>就有机会了。</p><p id="b1de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">今天，我们将只关注第一项，通过黑名单捕捉亵渎。</p><h1 id="d20c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">不良</h1><p id="d347" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了让你免于阅读一堆淘气的单词，我们要做一个小小的思维实验。就在今天，让我们假设“培根”、“莴苣”和“番茄”是英语中最卑鄙、最可怕、最亵渎的词汇。</p><p id="8db2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你用脚趾踢床脚，你可能会说‘培根！！!'。如果你在祖母家说“番茄”，她可能会和你断绝关系，并把你从遗嘱中删除。如果你说“莴苣”这个词……你就明白了。</p><p id="b8fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在不要担心你不会学习如何真正抓住亵渎。我们将建立我们自己的不良词汇(又名黑名单)，但你将能够使用我的代码通过交换一个变量来捕捉实际的亵渎。</p><p id="6aee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">漂亮的西红柿很酷，对吧？！</p><h1 id="badf" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">获取数据</h1><p id="62b4" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在我们已经确定BLT是不好的，我们需要找到一些BLT。我们在哪里可以找到这些原料？在美食菜谱上怎么样！Kaggle有一个免费的食物食谱数据集(Shuyang Li，“Food.com食谱和互动。”卡格尔，2019，doi:10.34740/卡格尔/DSV/783630。)你可以从他们的网站上下载。该数据集被许可用于商业用途(CC BY 4.0)。</p><h1 id="c27e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">编写代码</h1><p id="c20a" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">首先打开RStudio并创建一个名为“ProfanityFinder”的新R项目。将RAW_recipes.csv放到项目的文件夹中。同时在这个项目中创建一个新的R脚本，名为“BadWords”。r '</p><p id="1ab6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用你的话说。脚本，安装这些软件包你你还没有他们。Tidyverse允许我们使用一些漂亮的管道语法来操作数据，sentimentr有一些很棒的NLP &amp; profanity函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="ebd2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们将配方数据导入tibble (Tidyverses版本的R数据帧)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="c2ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们的数据已经导入，让我们稍微清理一下。首先，我们只需要name和ingredients列，所以让我们选择它。</p><p id="1630" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们通过删除标点来清理成分栏。这个专栏有一些特殊的字符，比如方括号，它们会对我们的亵渎函数造成很大的破坏。我们将使用一行简单的代码来删除所有这些。</p><p id="6bee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，食谱数据超过230，000行！虽然我们可以耐心地处理所有数据，但最好将其限制在100行以内。事实证明，如果不碰到一些熏肉、生菜和西红柿，你就无法深入了解食谱数据(请原谅我的法语！).</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="c146" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们到了最精彩的部分。我们需要一个我们关心的不良词汇的列表。公司将这些列表称为黑名单或阻止列表。在NLP领域，我们通常将单词列表称为“词典”。不管你喜欢什么术语，让我们现在就建立它。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="78d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的词典是一个由三个顽皮单词组成的字符向量，它们被分配给一个名为customCussWords的变量。</p><p id="9a42" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意了！这是魔法酱被搅拌的地方。我们的词典可能是一个简单的3个单词的列表，但是sentimentr包碰巧有相当多的实际不良单词的词典。想亲眼看看吗？在RStudio中，只需在控制台中键入我们的变量来读取其内容。</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="459d" class="nl lt iq nh b gy nm nn l no np">customCussWords</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/62c9613dc2ed4371cda758436e8bdf87.png" data-original-src="https://miro.medium.com/v2/resize:fit:594/format:webp/1*g9oGWxUQMfgqZUZhLNjilQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="dbca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里有一个警告，下面的命令会在你的控制台上显示一些非常可怕的单词。是时候开始锻炼你的铁胃了，因为事实证明你停止亵渎的方法就是用亵渎！</p><p id="ff9e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在运行import(sentimentr)命令后，在控制台中键入以下命令，将会显示字符向量的内容，就像我们的“customCussWords”变量一样。</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="b50e" class="nl lt iq nh b gy nm nn l no np">lexicon::profanity_alvarez<br/>lexicon::profanity_banned<br/>lexicon::profanity_arr_bad</span></pre><p id="ec7b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些只是一些不好的词汇。还有很多很多可以使用。为了更好的效果，为什么不把它们都结合起来。更好的是，定义你自己的！</p><p id="ab94" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么所有这些意味着什么，我提到的神奇调味汁到底是什么？简单。无论你在哪里看到我们的BLT词典“自定义脏话”,你都可以用上面的脏话词典替换掉，现在你的代码会神奇地捕捉到脏话！</p><p id="6074" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="d3bc" class="nl lt iq nh b gy nm nn l no np">do_stuff(customCussWords)</span></pre><p id="d376" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">可以变成:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="1f74" class="nl lt iq nh b gy nm nn l no np">do_stuff(lexicon::profanity_alvarez)</span></pre><p id="faf8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么，我们实际上如何捕捉亵渎？sentimentr包有一个方便的功能叫‘亵渎’！这个方便的函数有两个输入。第一个输入是文本，第二个输入是要与文本进行比较的单词词典！</p><p id="bfcf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们给亵渎函数一个旋转。首先，我们将使用一个不包含脏话的短语。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/099c1ecefb808c99b12ce82af534a52b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*Sw9pCiyX-6bLC1FXlQnVdQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="7d5a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">profanity函数返回一个包含几个有趣列的表。它有元素和句子的id、单词计数、亵渎计数，最后还有提供的文本中包含亵渎的单词的百分比。让我们在函数中加入一些诅咒，让它变得更有趣！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/653d2149edd7b153f974153551ffd525.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*uyRKSU2Rr6i5-9x-NBRC-A.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="e3fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果意味着我们有一个包含3个单词的句子，其中一个在我们的词典中找到。因为1/3的文章都是脏话，所以我们的脏话比例是33%。</p><p id="300a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于给定的文本，profanity函数不仅返回1行。它实际上通过一个叫做“句子边界消歧”的过程将单词分解成句子。这是一种奇特的NLP语言，用于在我们的语言中寻找可能代表句子开始和结束的东西。</p><p id="fbc9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你还记得的话，我们之前已经删除了文本中所有的标点符号。句号是决定句子结束位置的众多方法之一。以下代码将从亵渎函数返回多行结果:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/2613fef85203aeeb38ee299f47e1d989.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PRgM7Xygj-zluXKB9tUXnQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="b07b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">理解所有这些很重要，但是对于我们的简单练习，我们将只查看profanity_count列。我们可以sum()这个列，以确保我们捕获了所有出现的句子！</p><p id="f000" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用base R语法，我们可以像这样访问特定的列:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/8cfd95c5695a29d4848ece7c216cfa7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*CG55YATJg3pd6eZr3uMX_A.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="301e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">万一有多个句子，我们可以这样总结:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/c980193d27a67349edf59f7af3998610.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*kj3sCIOb32228_Jc_BkZog.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="d75d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们知道了做这件事需要知道的一切！让我们获取配方数据，并使用Tidyverse添加一个带有mutate()的列。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="0d0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是在做什么？</p><ol class=""><li id="b8f9" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr nw mv mw mx bi translated">称我们的食谱为数据框架</li><li id="37d0" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr nw mv mw mx bi translated">行方式——对于每一行数据，执行以下操作</li><li id="c065" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr nw mv mw mx bi translated">mutate——添加一个新列，使用我们的customCussWords词典将配料列传递到sentimentr的亵渎函数中</li><li id="102c" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr nw mv mw mx bi translated">过滤器-只显示有亵渎的记录</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/de595fab7ea62acb4dbd6e888f391307.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AjC9tBFEjF_K6ZgbpfTwTw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="d74f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们做到了！我们新的“亵渎计数”专栏正在查找并计算单词bacon、莴苣和番茄的所有出现次数！</p><p id="1495" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">知道我们的文本中哪里存在亵渎是很好的，但是我们可以更进一步。让我们添加一列，返回我们的程序发现的实际亵渎。Sentimentr确实有一个应该做这件事的函数(extract_profanity_terms)，但至少在我拥有的R的构建上，这个函数似乎坏了。别担心，我们会写我们自己的函数！</p><p id="ff77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的目标是将文本和词典传递给一个函数，并让它返回它能找到的所有熏肉、生菜和西红柿。再说一次，如果你需要找到真正的脏话，只需传递上面提到的一个词汇就可以了！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="83fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的函数在做什么？</p><ul class=""><li id="044e" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">我们定义了一个名为returnText的空字符</li><li id="bb8c" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">我们循环使用词典中的单词(培根、生菜、西红柿),看看这个单词是否在文本中。如果找到这个单词，Grepl将返回true或false。</li><li id="bf3a" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">如果找到这个单词，我们用粘贴函数把它附加到returnText变量中</li><li id="666c" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">我们退回所有找到的脏话。</li></ul><p id="9966" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们可以在代码中添加一个新的mutate，将recipe传递给这个函数，它将像这样返回脏话:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/9fdcbe3eb9152dd75450a14a7af862da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7rWkpdCo_GMh9gGzz_NNWw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="5a9a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样！我们已经编写了在文本中发现亵渎的代码！</p><h1 id="4634" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">关于效率的一个注记</h1><p id="4f98" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们在这里写的代码在大多数小数据集上都能很好地工作，但是在一些场景中这是行不通的。</p><p id="8c6c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，句子边界消歧是一个代价很高的计算。如果您有一个较大的数据集，您会希望将所有文本预处理成句子。Sentimentr有一个名为get_sentences的函数可以做到这一点。此外，从我们的数据中删除所有标点符号可能不是最明智的做法。您可能希望保留句点和感叹号，以帮助您的代码找出句子的开始和结束位置。</p><p id="0569" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二，我们编写的返回文本中的脏话的小循环并不是最有效的方法。你可以通过不同的方法获得更好的性能，比如lapply，sapply等。</p><p id="133d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，如果您试图标记实时数据或仔细阅读数十亿条记录，R真的不适合这种语言。r不完全是最快的编程语言，它的并行处理能力徘徊在“<em class="nd">有限的</em>和“<em class="nd">不存在的</em>”之间。如果您的用例涉及大量或实时数据，您会希望选择一种更接近机器的语言。</p><h1 id="caee" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">那是一个(BLT)包装！</h1><p id="61a2" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在你知道怎么抓坏人了吧！你可以从我的GitHub 下载所有的代码<a class="ae kv" href="https://github.com/KendonDarlington/FindProfanity" rel="noopener ugc nofollow" target="_blank">！。</a></p><p id="5cdc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你知道你可以在一篇文章上点击鼓掌按钮多达50次吗？如果你觉得这篇文章内容丰富，那就把生菜从那玩意儿里砸出来！</p></div></div>    
</body>
</html>