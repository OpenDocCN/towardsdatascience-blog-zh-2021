<html>
<head>
<title>Survival analysis in clinical trials — Log-rank test</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">临床试验中的生存分析——对数秩检验</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/survival-analysis-in-clinical-trials-log-rank-test-8f1229e7f0f0?source=collection_archive---------11-----------------------#2021-08-22">https://towardsdatascience.com/survival-analysis-in-clinical-trials-log-rank-test-8f1229e7f0f0?source=collection_archive---------11-----------------------#2021-08-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1bee" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我们如何模拟药物疗效？第二部分</h2></div><p id="6d36" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本系列的第1部分的<a class="ae lb" rel="noopener" target="_blank" href="/survival-analysis-in-clinical-trials-f87b8cbc2b1a">中，我解释了Kaplan-Meier生存曲线估计量背后的推理。虽然它是一种用于可视化临床试验结果的无处不在的工具，涉及到时间-事件分析，但它只是描述性的。为了能够得出结论并展示新疗法的益处，我们需要一个正式的测试程序。一个这样的程序是对数秩检验。</a></p><p id="c2fa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我将看看它是如何得到的，为什么它仍然被认为是药物疗效的最重要的指标之一。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="7f8b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从一个<code class="fe lj lk ll lm b">survfit</code>对象的<code class="fe lj lk ll lm b">ggplot</code>开始，使用与<a class="ae lb" rel="noopener" target="_blank" href="/survival-analysis-in-clinical-trials-f87b8cbc2b1a">第1部分</a>相同的数据集:</p><pre class="ln lo lp lq gt lr lm ls lt aw lu bi"><span id="9f0d" class="lv lw iq lm b gy lx ly l lz ma">library(survival)<br/>library(survminer)<br/>data(ovarian)</span><span id="1b88" class="lv lw iq lm b gy mb ly l lz ma">fit &lt;- survfit(Surv(ovarian$futime, ovarian$fustat) ~ rx, <br/>               data = ovarian, conf.type="log")</span><span id="c0c1" class="lv lw iq lm b gy mb ly l lz ma">p_fit &lt;- ggsurvplot(<br/>  fit, conf.int = TRUE, pval = TRUE<br/>)<br/>p_fit</span></pre><figure class="ln lo lp lq gt md gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/1a0419ff11569a07053b799b5b690d2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*0fz9ICdU3r4jUuIV136tAA.png"/></div></figure><p id="443b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如何获得生存概率估计值和置信区间在<a class="ae lb" rel="noopener" target="_blank" href="/survival-analysis-in-clinical-trials-f87b8cbc2b1a">第1部分</a>中描述。如果<code class="fe lj lk ll lm b">pval</code>被设置为<code class="fe lj lk ll lm b">TRUE</code>，该函数还打印出<em class="mg">p</em>-值0.3，这是一个对数秩测试的结果。那么是怎么计算出来的呢？</p><h1 id="0278" class="mh lw iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">费希尔精确试验</h1><p id="664f" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">对数秩检验基本上是多个独立的Fisher精确检验汇集在一起。稍后我会解释我的意思。但是有必要首先了解费希尔精确测试是如何工作的。所以让我们从一个虚构的例子开始。</p><p id="4136" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设大学二年级有一门<em class="mg">统计学导论</em>课。他们可以在学期中参加辅导课，有些人参加，有些人不参加。期末考试后，我们想看看考试不及格是否与辅导课出勤有关。因此，对于每个学生，除了他们是否通过外，我们还记录他们是否至少有75%的时间出席辅导课。我们得到了下面的图片:</p><figure class="ln lo lp lq gt md gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi nd"><img src="../Images/787baf94d4bd8baff095700b6f8ba647.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dp9GMgQvsUOd1-IXfz1TYg.jpeg"/></div></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">图:四个类别的学生人数。</p></figure><p id="3698" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在要测试补习出勤和通过考试是否独立。概率表如下所示:</p><figure class="ln lo lp lq gt md gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi nm"><img src="../Images/8ac34daefa29b3db898ce5357b9a1ee1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vCPFmgh0Ep5LSOPNReqGbQ.jpeg"/></div></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">图:概率表。</p></figure><p id="121b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，这意味着</p><figure class="ln lo lp lq gt md gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/f1ad5f7904b8d53dd6711a3608837478.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/format:webp/1*Bg4IXXpJrzPVD54nvYyAqg.png"/></div></figure><p id="757c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而我们要检验的假设是<em class="mg">h</em>₀:<em class="mg">π</em>₁₁/<em class="mg">π</em>₁₊=<em class="mg">π</em>₂₁/<em class="mg">π</em>₂₊.现在假设这个假设是真的。这意味着，我们预计辅导出勤率高的小组中不及格学生的比例与出勤率低的小组中不及格学生的比例相似。换句话说，</p><figure class="ln lo lp lq gt md gh gi paragraph-image"><div class="gh gi no"><img src="../Images/5437266d2778dc7fd038b06efbb73fab.png" data-original-src="https://miro.medium.com/v2/resize:fit:422/format:webp/1*yHTlt0sEwv64XKTUoW79dw.png"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">通过并参加了75%以上辅导课的学生的期望值是整个样本中通过的学生的比例乘以参加了75%以上辅导课的学生人数。</p></figure><p id="21ce" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其中<em class="mg"> A </em>是随机变量，其值是参加了75%以上的辅导课并通过考试的学生人数。<em class="mg"> A </em>的分布如何？</p><p id="ed3f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意<em class="mg"> n++ </em>以及余量(失败/通过&amp;出勤-是/否计数)是固定的。<strong class="kh ir">在零假设</strong>下，<em class="mg"> A=a </em>的概率(通过并参加75%+辅导课的学生人数等于<em class="mg"> a </em>的概率)是如果在<em class="mg"> n++= </em> 343名学生中，其中217名参加了75%+辅导课，我们随机挑选281名，<em class="mg"> a </em>将参加75%+辅导课的概率。</p><p id="4344" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是因为我们假设这281名通过测试的学生和全部343名学生在去补习班的时间上没有什么不同。<em class="mg"> A </em>的分布被称为<strong class="kh ir">超几何分布</strong>，人们可以从维基百科推导或复制其概率质量函数和方差:</p><figure class="ln lo lp lq gt md gh gi paragraph-image"><div class="gh gi np"><img src="../Images/cad6290929f1978d1dd85ebcd3d93b51.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*GgsNDzkQrv0GrfPwleBXXg.png"/></div></figure><p id="dfe6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为这么大的样本计算精确的<em class="mg"> p- </em>值是有问题的，但是我们可以使用以下统计的卡方近似值来代替:</p><figure class="ln lo lp lq gt md gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/2794ae1dce2ba2de2b3e07e6d75401cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:586/format:webp/1*VBFPZoRG7-UYFl8aR0yR9Q.png"/></div></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="06df" class="mh lw iq bd mi mj nr ml mm mn ns mp mq jw nt jx ms jz nu ka mu kc nv kd mw mx bi translated">分析来自多个站点的数据</h1><p id="d8bb" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">假设同样的实验在12所不同的大学进行。我们不想将这些合并到一个表中，因为各个大学之间可能会有差异。我们想检验以下假设:</p><p id="014c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mg">h</em>₀:<em class="mg">π</em>₁₁=<em class="mg">π</em>₁₂，<em class="mg"> π </em> ₂₁ = <em class="mg"> π </em> ₂₂，…，<em class="mg"> πk </em> ₁ = <em class="mg"> πk₂ </em>，其中k为站点数量(本例中为12)。</p><p id="e8c4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这可以使用<a class="ae lb" href="https://en.wikipedia.org/wiki/Cochran%E2%80%93Mantel%E2%80%93Haenszel_statistics" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir">Mantel–Haenszel统计</strong> </a> <strong class="kh ir"> : </strong>来完成</p><figure class="ln lo lp lq gt md gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/3f3bcc53c4c91b25c4f0053bed3fcf9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*w7_Q1vYyzMFSA-4UpmE1Bg.png"/></div></figure><p id="12f5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mg"> i </em>是组指数<em class="mg">，O </em>是观察到的死亡的总和，<em class="mg"> E </em>是预期死亡的总和，<em class="mg"> V </em>是所有地点的人口1中死亡的方差的总和。我们将总和代入MH，注意它的渐近分布:</p><figure class="ln lo lp lq gt md gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/2112633924b6b34e2e5e3f4b912e6db4.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/format:webp/1*YXjFZCHUANW1aFI3d3WNPw.png"/></div></figure><p id="95fa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是用来测试零假设通常的方式。现在，我们可以使用同样的统计数据，并将其应用于我们的审查数据。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="c7df" class="mh lw iq bd mi mj nr ml mm mn ns mp mq jw nt jx ms jz nu ka mu kc nv kd mw mx bi translated">对数秩检验</h1><p id="50f7" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">这与对数秩检验有什么关系？本质上，我们把死亡被观察的每个时间点看作上面例子中的“大学”,并为每个时间点创建一个列联表。</p><figure class="ln lo lp lq gt md gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi ny"><img src="../Images/5470b019ba61aafd067bafd994a772e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bUh-VA8j_4UzzpGJGORpVw.png"/></div></div></figure><p id="8ee4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">即使样本(“大学”)不是独立的，门泽耳-海恩斯泽尔统计量的渐近分布仍然是一个自由度的卡方分布。</p><p id="fc9d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">实际上，我们测试了假设<em class="mg"> H₀: F₁ = F₂，</em>或者联合治疗和标准治疗组的生存曲线相等。</p><h2 id="bd0a" class="lv lw iq bd mi nz oa dn mm ob oc dp mq ko od oe ms ks of og mu kw oh oi mw oj bi translated">手工对数秩检验</h2><p id="9f6e" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">现在让我们检查一下他们是如何从文章开头的图上获得<em class="mg">p</em>-值的。我们基本上为一个事件的每个时间点t创建一个列联表。</p><figure class="ln lo lp lq gt md gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi ok"><img src="../Images/34074e728b32ac5e547b8c6c48fcbaed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uz1d4aOmzw0mef5e1oZS-w.jpeg"/></div></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">手工进行对数秩检验。仅显示了4个事件时间，但整行都是针对所有事件时间计算的。审查时间对统计数据没有贡献，但是如果将风险数据包含在表格中，就更容易跟踪这些数据。</p></figure><p id="2960" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从这个表中，我们可以计算出在零假设下每个t <em class="mg"> i </em>的死亡数<em class="mg"> a </em>以及<em class="mg"> A </em>的期望和方差。剩下的就是将这些相加，并代入我们的测试统计量MH的表达式。在这种情况下，MH =(7–5.23)/2.94 = 1.066。</p><h2 id="20da" class="lv lw iq bd mi nz oa dn mm ob oc dp mq ko od oe ms ks of og mu kw oh oi mw oj bi translated">注意</h2><ul class=""><li id="1739" class="ol om iq kh b ki my kl mz ko on ks oo kw op la oq or os ot bi translated">请注意，事件时间不进入统计计算，只有他们的排名。</li></ul><h2 id="ac10" class="lv lw iq bd mi nz oa dn mm ob oc dp mq ko od oe ms ks of og mu kw oh oi mw oj bi translated">R中生存包的对数秩检验</h2><p id="ebdb" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">在R中，可以使用包<code class="fe lj lk ll lm b">survival</code>中的函数<code class="fe lj lk ll lm b">survdiff()</code>进行对数秩测试。</p><pre class="ln lo lp lq gt lr lm ls lt aw lu bi"><span id="2dc4" class="lv lw iq lm b gy lx ly l lz ma">logr &lt;- survdiff(Surv(ovarian$futime, ovarian$fustat) ~ rx, <br/>                 data = ovarian)<br/>logr</span><span id="4864" class="lv lw iq lm b gy mb ly l lz ma">## Call:<br/>##   survdiff(formula = Surv(ovarian$futime, ovarian$fustat) ~ rx,<br/>##            data = ovarian)<br/>## <br/>##       N Observed Expected (O-E)^2/E (O-E)^2/V<br/>## rx=1 13        7     5.23     0.596      1.06<br/>## rx=2 13        5     6.77     0.461      1.06<br/>## <br/>## Chisq= 1.1  on 1 degrees of freedom, p= 0.3</span></pre><p id="99fd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">除了由于四舍五入造成的一些差异，测试给出的答案与上面手动计算的答案相同。特别是<code class="fe lj lk ll lm b">(O-E)^2/V</code>是1.06，这是MH统计。具有1个自由度的卡方分布变量大于该值的概率为0.3，可以使用以下代码进行检查:</p><pre class="ln lo lp lq gt lr lm ls lt aw lu bi"><span id="74fe" class="lv lw iq lm b gy lx ly l lz ma">1 - pchisq(1.06, df = 1)</span><span id="81e2" class="lv lw iq lm b gy mb ly l lz ma">## [1] 0.3032152</span></pre><p id="73e0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们不能拒绝联合治疗不比标准治疗更好(或更差)的无效假设。</p><h1 id="1adb" class="mh lw iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">控制协变量:分层</h1><p id="51ca" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">为了解释协变量，我们可以将样本分层。在这种情况下，数据集中有一个变量<em class="mg"> resid.ds </em>，指示在研究开始时是否存在最小的残留疾病(resid.ds=1)，或者疾病是晚期的(resid.ds=2)。</p><p id="946e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">分层的作用是对每一层的一系列列联表分别进行分析，然后汇总结果。这确保了如果患有轻微残留疾病的妇女与患有广泛残留疾病的妇女之间存在差异(这是可以预期的)，这将不会扭曲对治疗效果的估计。</p><h2 id="fd88" class="lv lw iq bd mi nz oa dn mm ob oc dp mq ko od oe ms ks of og mu kw oh oi mw oj bi translated">协变量不平衡</h2><p id="3927" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">在对照组中，患有广泛残留疾病的患者比患有轻微残留疾病的患者多(8比5)，而在治疗组中，这一比例更平衡(7比6)。</p><pre class="ln lo lp lq gt lr lm ls lt aw lu bi"><span id="a13d" class="lv lw iq lm b gy lx ly l lz ma">table(ovarian$resid.ds, ovarian$rx, dnn=c("resid.ds", "rx"))</span><span id="b476" class="lv lw iq lm b gy mb ly l lz ma">##         rx<br/>## resid.ds 1 2<br/>##        1 5 6<br/>##        2 8 7</span></pre><h2 id="a681" class="lv lw iq bd mi nz oa dn mm ob oc dp mq ko od oe ms ks of og mu kw oh oi mw oj bi translated">survdiff()函数如何分层</h2><p id="1460" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">为了确保我们测试的是治疗的差异，而不是晚期和非晚期疾病患者之间的差异，我们分别计算了每一层中的观察计数和预期计数及其方差(广泛残留疾病和微小残留疾病)。右上方列出了每个治疗组的事件时间(审查时间后有一个加号):</p><figure class="ln lo lp lq gt md gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi ou"><img src="../Images/a59d1c1ce875d2ed10bf58b47f68fd8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QZxuu76dnEshCqj7Bqa-MQ.png"/></div></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">为有广泛残留疾病的组单独计算的对数秩检验值。</p></figure><figure class="ln lo lp lq gt md gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi ov"><img src="../Images/03efa5ad2ec640eedf7700c7a63cc73e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ey8ur0ajovIoQ0wtU5QnYg.png"/></div></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">为残留疾病最少的组单独计算的对数秩检验值。</p></figure><p id="dd58" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将结果汇总在一起(取两组的<em class="mg"> a </em>、E( <em class="mg"> A </em>)和Var( <em class="mg"> A </em>)之和，我们得到MH =(7–5.09)/(0.743+2.093)= 1.286。现在，我们检查在公式中添加了<code class="fe lj lk ll lm b">strata(resid.ds)</code>参数时<code class="fe lj lk ll lm b">survdiff()</code>函数的输出:</p><pre class="ln lo lp lq gt lr lm ls lt aw lu bi"><span id="26af" class="lv lw iq lm b gy lx ly l lz ma">logr_strat &lt;- survdiff(Surv(ovarian$futime, ovarian$fustat) ~ rx + <br/>                         strata(resid.ds), data = ovarian)<br/>logr_strat</span><span id="29d4" class="lv lw iq lm b gy mb ly l lz ma">## Call:<br/>##   survdiff(formula = Surv(ovarian$futime, ovarian$fustat) ~ rx + <br/>##              strata(resid.ds), data = ovarian)<br/>## <br/>##       N Observed Expected (O-E)^2/E (O-E)^2/V<br/>## rx=1 13        7      5.1     0.712      1.28<br/>## rx=2 13        5      6.9     0.525      1.28<br/>## <br/>## Chisq= 1.3  on 1 degrees of freedom, p= 0.3</span></pre><p id="b419" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，除了舍入误差之外，我们获得了MH的相同结果，即<code class="fe lj lk ll lm b">(O-E)^2/V</code>是1.28。</p><p id="343f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这种情况下，<em class="mg">p</em>-值仍然是<em class="mg"> 0.3 </em>，因此与分层前的值相比变化不大。请注意，对于预计对存活率有显著影响的重要协变量，<strong class="kh ir">在随机化阶段(即设计实验时)进行分层至关重要</strong>。这意味着，我们必须确保每个治疗组中来自各个阶层的患者比例大致相同，以便检测出足够有效的潜在治疗效果。</p><h1 id="4e4e" class="mh lw iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">摘要</h1><p id="f905" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">当我们想要确定<strong class="kh ir">两组的生存分布是否不同时，使用对数秩检验。</strong>这是证明药物具有积极治疗效果的最普遍和公认的方法之一。它是对Fisher精确检验的一种改编，或者更准确地说，是对删失数据的Mantel Haenszel检验。为事件的每个时间创建一个列联表，然后汇集结果以计算所需的统计数据。</p><p id="6ec6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们想避免意外测试另一个组间不平衡的协变量，或防止治疗效果被协变量掩盖，我们可以使用<strong class="kh ir">分层</strong>。在这种情况下，为协变量的每个级别分别创建列联表，并将结果汇总在一起，如上所示。</p><h1 id="4d9d" class="mh lw iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">关于对数秩检验的进一步说明</h1><ul class=""><li id="4237" class="ol om iq kh b ki my kl mz ko on ks oo kw op la oq or os ot bi translated">对数秩检验是非参数的:我们没有假设事件时间的任何分布。</li><li id="63b1" class="ol om iq kh b ki ow kl ox ko oy ks oz kw pa la oq or os ot bi translated">然而，它是作为半参数Cox比例风险模型中的得分测试出现的(下一篇文章将详细介绍)。</li><li id="091a" class="ol om iq kh b ki ow kl ox ko oy ks oz kw pa la oq or os ot bi translated">请注意，在比较两条存活曲线的情况下,“检验显著的治疗效果”是一项任意的任务。<a class="ae lb" href="https://web.stanford.edu/~lutian/coursepdf/unitweek3.pdf" rel="noopener ugc nofollow" target="_blank">这里</a>很好地展示了所有具有积极治疗效果的不同场景。log-rank面向这些场景中的一种。</li></ul></div></div>    
</body>
</html>