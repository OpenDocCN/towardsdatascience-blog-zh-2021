<html>
<head>
<title>How to Schedule a Serverless Google Cloud Function to Run Periodically</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何安排无服务器谷歌云功能定期运行</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-schedule-a-serverless-google-cloud-function-to-run-periodically-249acf3a652e?source=collection_archive---------6-----------------------#2021-07-04">https://towardsdatascience.com/how-to-schedule-a-serverless-google-cloud-function-to-run-periodically-249acf3a652e?source=collection_archive---------6-----------------------#2021-07-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7840" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你有一些需要定期运行的代码吗？请继续阅读，了解如何在谷歌云平台(GCP)上使用无服务器功能来实现这一点。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/705939d05f56e9814de4a4f0b52b96dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hmjgJ_f9zS9o0lhP"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@writecodenow?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Boitumelo Phetla </a>拍摄的照片</p></figure><p id="7625" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一名数据科学家/工程师，我经常有需要定期运行的代码。这可能是每天下午02:00处理一些日志文件，或者每天凌晨01:00运行机器学习模型。</p><p id="abc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果它可以在内存限制<a class="ae ky" href="https://cloud.google.com/functions/quotas" rel="noopener ugc nofollow" target="_blank"> 8 GiB内运行，并且不到9分钟</a>，那么它可能值得作为一个无服务器功能来实现。</p><p id="c863" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您对此感兴趣，那么在本文中，我将向您展示如何使用无服务器架构，利用谷歌云平台(GCP)的云功能无服务器计算产品来调度您的代码。</p><p id="eaa6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要了解更多关于谷歌云功能及其好处的信息，请查看我在Medium上的另一篇文章。第一节简明扼要地解释了它。😄</p><div class="lv lw gp gr lx ly"><a rel="noopener follow" target="_blank" href="/machine-learning-model-as-a-serverless-endpoint-using-google-cloud-function-a5ad1080a59e"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">使用谷歌云功能作为无服务器端点的机器学习模型</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">因此，你已经建立了一个模型，并希望将其生产为谷歌云平台(GCP)上的无服务器解决方案。让我…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">towardsdatascience.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ks ly"/></div></div></a></div></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="3205" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">⚠️⚠️家政公司</h1><p id="a5e7" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated"><em class="nr">本文假设您已经拥有一个GCP账户。如果你没有，在这里注册</em><a class="ae ky" href="https://cloud.google.com/" rel="noopener ugc nofollow" target="_blank"><em class="nr"/></a><em class="nr">可以获得一些免费积分。</em></p><p id="f5c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nr">如果你想从你的本地机器上与你的GCP账户进行交互，使用</em> <a class="ae ky" href="https://cloud.google.com/sdk/docs/quickstart" rel="noopener ugc nofollow" target="_blank"> <em class="nr">这里</em> </a> <em class="nr">列出的步骤安装Google Cloud SDK。</em></p><p id="bc18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nr">确保在您的GCP项目中使用</em> <a class="ae ky" href="https://console.developers.google.com" rel="noopener ugc nofollow" target="_blank"> <em class="nr"> API控制台</em> </a> <em class="nr">为Google云存储、函数、发布/订阅和调度程序启用API</em><em class="nr">。</em></p><p id="2262" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nr">本文中的所有代码都是用Python 3.8开发的。所有必要的代码都可以通过GitHub Gist获得。</em></p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="9861" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">任务和解决方案架构示例</h1><p id="6c78" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">那么，我们在建造什么？为了本文的目的，我们将安排一个每15分钟打印一次钞票的云函数。当然不是字面上的钱😄，而是钱这个字。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/62175aebd46588ab12b5434f1ee8cd61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M_hAvJZVNbKTy86VOlK4QA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">云解决方案架构。(来源:作者)</p></figure><p id="0685" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用谷歌云平台(GCP)的4项服务来完成这项工作。</p><ol class=""><li id="621d" class="nt nu it lb b lc ld lf lg li nv lm nw lq nx lu ny nz oa ob bi translated"><a class="ae ky" href="https://cloud.google.com/functions" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">云功能</strong> </a>:哦，是的，这个无服务器计算服务将托管并执行我们所有的代码。该服务将每隔15分钟触发一次。当它执行时，它将运行我们的代码，将单词“money”写入一个文本文件，并将其保存在Google云存储桶中。这是一项简单的任务，可以轻松适应您的使用情形。</li><li id="47ed" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated"><a class="ae ky" href="https://cloud.google.com/pubsub" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">Cloud Pub/Sub</strong></a><strong class="lb iu">:</strong>这是一个事件驱动的实时消息服务，允许我们创建异步通信的系统。它使得系统设计中存在事件生产者和消费者，也称为发布者和订阅者。在我们的例子中，云调度器将产生一个Pub/Sub事件，该事件将触发我们的云功能消费者，该消费者正在从Pub/Sub服务中监听特定的主题。</li><li id="e042" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated"><a class="ae ky" href="https://cloud.google.com/scheduler" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">云调度器</strong> </a> <strong class="lb iu"> : </strong>这是一款来自GCP的全托管企业级cron作业调度器。它基本上可以安排任何事情。在这种情况下，我们使用它每隔15分钟为一个主题生成一个发布/订阅事件。</li><li id="7572" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated"><a class="ae ky" href="https://cloud.google.com/storage" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">云存储</strong> </a> <strong class="lb iu"> : </strong>嗯……这里真的不多说了。它基本上是一个保存任何类型数据的位置。它可能没有其他的性感，但在我看来，它是GCP上一切的可靠支柱！</li></ol><p id="887a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在…我们开始建造！🚀 🚧</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="6d74" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">步骤0:创建一个Google云存储桶</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/c47c3773e2f27c582b2562eea64f4660.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XPv7r3f7kWcZOE4y-xS6NA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在GCP控制台上搜索存储。(来源:作者)</p></figure><p id="8824" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在GCP控制台中，搜索存储以找到云存储，然后单击<strong class="lb iu">创建存储桶。</strong>给存储桶取一个合适的名称，并确保在计划运行云功能的同一区域创建存储桶。您可以保留其余设置，然后点击<strong class="lb iu">创建</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/7bbe09feb4270199b941fe0e26104a8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*PlH__Qah6guS8l6iFb2ibQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建云存储桶来存储文本文件。(来源:作者)</p></figure><h2 id="ffa5" class="oj mv it bd mw ok ol dn na om on dp ne li oo op ng lm oq or ni lq os ot nk ou bi translated"><strong class="ak">第一步:创建并配置云功能</strong></h2><p id="b7d7" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">现在在GCP控制台上搜索云函数，点击<strong class="lb iu">创建函数</strong>。给云函数取一个合适的名字，并确保它与存储桶在同一个区域。</p><p id="5e7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">选择<strong class="lb iu"> </strong>功能<strong class="lb iu">触发类型</strong>为<strong class="lb iu">云发布/订阅</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/d4ac4145132c86ead43e2136ec6394fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*rb3mI_QeMBM0shofJWOGog.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建由发布/订阅触发的云函数。(来源:作者)</p></figure><p id="d664" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击<strong class="lb iu">创建一个主题</strong>来创建一个新的发布/订阅主题，这将触发这个云功能。给它起一个合适的名字，点击<strong class="lb iu">创建主题，</strong>然后点击<strong class="lb iu">保存</strong>来完成发布/订阅触发器。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/cf2bc8f44f7bbbc218d7f2881b0b9b25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j16FM4mSZS89JmBDC9BZIg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建新的发布/订阅主题。(来源:作者)</p></figure><p id="d5bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，在<strong class="lb iu">运行时、构建和连接设置</strong>部分下，保持<strong class="lb iu">运行时</strong>选项卡设置不变。我们的功能非常简单。因此，256 MiB内存的执行环境已经足够了。</p><p id="9bf5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，在<strong class="lb iu">连接</strong>选项卡中，选择<strong class="lb iu">仅允许内部流量</strong>。出于安全原因，这样做是因为它只允许来自项目环境内部的流量，而不会被恶意的外部请求触发。</p><p id="f3c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成后，点击下一个的<strong class="lb iu">对功能进行编码。</strong></p><h1 id="8411" class="mu mv it bd mw mx ox mz na nb oy nd ne jz oz ka ng kc pa kd ni kf pb kg nk nl bi translated">步骤2:编码和部署云功能</h1><p id="d218" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">现在，您应该会看到内联源代码编辑器窗口。这是我们定义运行时环境和编写要执行的函数的地方。</p><p id="012d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">选择<strong class="lb iu">运行时环境</strong>为Python 3.8，因为我们将用Python编码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/5a7c6af0eb51087f5b7d2ae82f9daca6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s0scnda00xOYVrgNMGppoQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">云函数的内联编辑器。(来源:作者)</p></figure><p id="68a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，源代码内联编辑器选项卡下显示了两个文件。让我们了解它们是什么。</p><h2 id="608e" class="oj mv it bd mw ok ol dn na om on dp ne li oo op ng lm oq or ni lq os ot nk ou bi translated">文件:main.py</h2><p id="f1aa" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">这个文件是所有函数代码驻留的地方，当触发事件发生时被执行。因为我们已经选择了Pub/Sub作为触发器，所以在这个文件中应该有一个签名为<em class="nr"> hello_pubsub(event，context) </em>的函数，默认情况下会填充这个函数。</p><p id="5203" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是由发布/订阅事件触发的主函数的签名。显然，您可以更改主函数名，但请确保在<strong class="lb iu">入口点</strong>函数名选项卡中相应地更新它。这就是环境如何知道调用哪个函数来处理发布/订阅事件。</p><p id="817c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">出于本文的目的，我们将保持名称不变，只更新内容。</p><h2 id="99d1" class="oj mv it bd mw ok ol dn na om on dp ne li oo op ng lm oq or ni lq os ot nk ou bi translated"><strong class="ak">文件:requirements.txt </strong></h2><p id="5431" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">在这里，我们声明需要安装在云函数环境中的库，以执行我们的函数。默认情况下，环境预装了一堆库。因为这是一个简单的函数，所以我们不需要安装太多额外的库。</p><h2 id="6ebb" class="oj mv it bd mw ok ol dn na om on dp ne li oo op ng lm oq or ni lq os ot nk ou bi translated">编码和部署</h2><p id="6a50" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">你可以从下面的要点中复制并粘贴这两个文件的内容。代码是不言自明的，并被注释。如果您有任何问题，请联系我们。😃</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pd pe l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">本文所需的云函数代码。(来源:作者)</p></figure><p id="079b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦将代码从gist复制到相关文件中，就可以点击<strong class="lb iu"> deploy </strong>。</p><p id="a44c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将需要一些时间，因为正在设置云功能环境，并且安装了所有要求。您应该会在函数名旁边看到一个加载圆圈。</p><p id="5535" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">成功部署函数时，函数名称旁边会出现一个绿色对勾。👊</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/bf8e918fc4a5c5ef24afbeafd4326dcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wwWx2LXV5cIsFK12psyZhA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">云功能部署成功。(来源:作者)</p></figure><p id="44bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好吧，那么…让我们看看它是否有效！😅为此，点击<strong class="lb iu">动作</strong>下的3点按钮，并点击<strong class="lb iu">测试功能</strong>。</p><h1 id="69c3" class="mu mv it bd mw mx ox mz na nb oy nd ne jz oz ka ng kc pa kd ni kf pb kg nk nl bi translated">步骤3:测试云功能</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/790dcac9a773c05a6a425bd50a19a19e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fU4ZNtcYJjmSukorgW4ZDQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">测试部署的云功能。(来源:作者)</p></figure><p id="729e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于我们的云函数不需要任何输入数据或上下文，我们只需单击蓝色的<strong class="lb iu">测试函数</strong>按钮，让触发事件输入保持空白。</p><p id="4a1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当函数成功完成时，它应该在下面的日志中显示OK。如果出现错误，请阅读日志进行诊断。</p><p id="c06c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还应该看到云存储桶里有一个新的文本文件，里面有钱！💲 💲 😄</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/e5c8941a3c7e757ad7f4eb8a28337179.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aCDcUP7MXcHBqbFUaTv83w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">云存储桶，带有由云功能生成的文本文件。(来源:作者)</p></figure><p id="7c8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在剩下的就是安排函数定期运行。</p><h1 id="3127" class="mu mv it bd mw mx ox mz na nb oy nd ne jz oz ka ng kc pa kd ni kf pb kg nk nl bi translated">步骤4:计划云功能</h1><p id="8796" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">回到GCP控制台，搜索云调度程序，并点击<strong class="lb iu">创建作业</strong>。这应该会将您带到一个设置页面来配置cron作业。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/386214cefd5dd2851dbbce39117c085b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*che3YvIXaMPT-UpHxpe2ug.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">设置云调度程序作业。(来源:作者)</p></figure><p id="58dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<strong class="lb iu">下定义作业</strong>部分，给出一个合适的名称，并使用unix-cron格式，指定调度频率。</p><p id="612b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们想安排我们的函数每15分钟运行一次，所以使用下面的:<strong class="lb iu"> */15 * * * * </strong>。您可以从<a class="ae ky" href="https://cloud.google.com/scheduler/docs/configuring/cron-job-schedules" rel="noopener ugc nofollow" target="_blank">这里</a>了解更多关于格式的信息，并根据您的需求进行调整。</p><p id="3cca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">哦，还要确保你在正确的时区。😅</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/f595a728907eb43f2b416c66e6054cd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*PyR-Dpu21nTOS07XrGwQgQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">为我们的发布/订阅主题设置cron作业的目标。(来源:作者)</p></figure><p id="0ea0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<strong class="lb iu">配置作业目标</strong>部分下，选择发布/订阅主题作为目标。这将显示当前项目中的所有主题。确保您选择了正确的发布/订阅主题，如步骤1中所创建的。</p><p id="cfd2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">必须提供消息正文。我们只是说“你好”,尽管在我们的体系结构中它不会被处理。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/fe52400aa198ef2a349683871881cacc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5QSpGWeM-WCdh-4GGIONpA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建后的云调度程序作业列表。(来源:作者)</p></figure><p id="1955" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在点击create来安排这个任务。现在应该每15分钟运行一次我们的云功能。</p><p id="fd9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，我们可以点击调度程序作业页面中的<strong class="lb iu">立即运行</strong>，立即运行该功能。</p><p id="3f7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该能够在云存储桶中看到一个新的货币文本文件，它是在您点击<strong class="lb iu"> run now </strong>时创建的。如果出现错误，请检查日志进行诊断。</p><p id="59f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，在你最后一次运行后的每15分钟，你应该能够看到新的货币文本文件被添加到云存储桶中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/388d6a59322d266006ed0509292d77c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GSkcsEic7RWHVKkqGH6FSA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">预定的云功能每15分钟产生一次钱。(来源:作者)</p></figure><p id="3f6b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">恭喜你，你现在已经成功地安排了一个定期执行的无服务器功能。😄 🚀</p><p id="ade9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> ⚠️注意:<em class="nr">确保删除/暂停云调度程序作业和其他资源，以避免产生持续成本。</em>🔥</strong></p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="0d4e" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">最后的想法</h1><p id="8434" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">通常，人们(包括我)会使用虚拟机和其他工具来运行他们的cron作业。但是，重新审视这些任务，看看它们的内存/计算约束是否符合云功能的限制，可能是值得的。</p><p id="fc0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从数据科学系统的角度来看，我可以看到如此多的任务可以采用这种架构。定期处理一些CSV数据文件、运行模型预测、每天生成摘要报告表、每天将外部文件加载到大型查询表中，等等。</p><p id="45a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，拥有像这样的无服务器架构可以实现很大的灵活性并提高可维护性。嗯…这就是微服务架构的全部。<em class="nr"> ***条款和条件适用。</em>😄<em class="nr"> *** </em></p><p id="f0a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">希望这篇文章能为您的下一个解决方案架构提供一些思路。</p><p id="7b4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><p id="f98c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="nr">希望这篇文章对你有用。如果你有任何问题或者你认为我能帮忙，请联系我。总是期待与新朋友建立联系。</em>😄</strong></p><p id="747e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="nr">你可能也会喜欢我的这些文章:</em> </strong></p><div class="lv lw gp gr lx ly"><a href="https://python.plainenglish.io/the-only-data-science-machine-learning-book-i-recommend-4fc23b947dfe" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">我推荐的唯一一本数据科学/机器学习书籍</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">无论您是数据科学新手，还是正在寻找参考指南的经验丰富的专业人士，这都是一本好书，可以…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">python .平原英语. io</p></div></div><div class="mh l"><div class="pm l mj mk ml mh mm ks ly"/></div></div></a></div><div class="lv lw gp gr lx ly"><a rel="noopener follow" target="_blank" href="/machine-learning-model-as-a-serverless-app-using-google-app-engine-b760de59156"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">使用谷歌应用引擎的无服务器应用的机器学习模型</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">因此，您构建了一个模型，并希望将其部署为一个无服务器应用程序。让我告诉你如何使用Docker来做这件事…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">towardsdatascience.com</p></div></div><div class="mh l"><div class="pn l mj mk ml mh mm ks ly"/></div></div></a></div><div class="lv lw gp gr lx ly"><a href="https://medium.com/codex/3-simple-side-hustles-to-make-extra-income-per-month-as-a-data-scientist-7470030fbf43" rel="noopener follow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">作为一名数据科学家，3个简单的兼职每月赚取额外收入</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">除了你的全职工作之外，这些副业也很容易做。</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">medium.com</p></div></div><div class="mh l"><div class="po l mj mk ml mh mm ks ly"/></div></div></a></div></div></div>    
</body>
</html>