<html>
<head>
<title>Working with Image Pixels in OpenCV</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在OpenCV中使用图像像素</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/working-with-image-pixels-in-opencv-fb03b1fe9439?source=collection_archive---------16-----------------------#2021-08-30">https://towardsdatascience.com/working-with-image-pixels-in-opencv-fb03b1fe9439?source=collection_archive---------16-----------------------#2021-08-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div class="gh gi ir"><img src="../Images/98824fbb430d861f43510bddd4b32789.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*jGL0FtZoxTXu_f0mCVnWBw.jpeg"/></div><p class="iy iz gj gh gi ja jb bd b be z dk translated"><a class="ae jc" href="https://unsplash.com/@umby?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">翁贝托</a>在<a class="ae jc" href="https://unsplash.com/s/photos/pixels?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><div class=""/><div class=""><h2 id="7a02" class="pw-subtitle-paragraph kc je jf bd b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dk translated">使用OpenCV获取和设置要处理的图像像素</h2></div><p id="f548" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">像素是计算机视觉中图像的重要属性。它们是代表图像中特定空间的光的颜色强度的数值，是图像中最小的数据单位。</p><p id="7e88" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">图像中的像素总数是其高度、宽度和通道的乘积。</p><p id="de95" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">由于<strong class="kw jg"> OpenCV </strong>中的图像被读取为像素值的<strong class="kw jg"> Numpy </strong>数组，因此可以使用数组切片操作来获取和处理由该区域的像素表示的图像区域。</p><p id="6cee" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">切片操作用于检索序列的子集，例如列表、元组和数组，并且同样可以用于获得图像区域的像素值以进行处理，例如编辑、格式化或裁剪。</p><p id="8136" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw jg">切片操作</strong></p><p id="b1bc" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw jg">脚本:使用切片操作获得列表的子集。</strong></p><figure class="lq lr ls lt gt iv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="lq lr ls lt gt iv gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/3a12b099a6e1b1a96f92146351654c74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*b61jLTKzrLsfax6tdRP64A.png"/></div><p class="iy iz gj gh gi ja jb bd b be z dk translated">输出(图片由作者提供)。</p></figure><p id="1caa" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，我使用了索引值来分割字母列表。例如，传递起始索引1(列表中第二个字母的索引)和4会返回列表的一部分，从第二个值到第四个值。</p><p id="f6c3" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">由于索引值以这种方式用于检索感兴趣的子集，所以它们也用于定位和检索图像中的感兴趣区域。</p><p id="2d24" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以图像中的某个区域为目标的切片由图像的两个轴(水平轴(X)和垂直轴(Y))的起始值和结束值定义，格式如下:</p><p id="1a6f" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw jg"> <em class="lx">图像【startY: endY，startx:endX】</em></strong></p><p id="0296" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">它返回所需感兴趣区域的(图像像素的)Numpy数组。</p><p id="df63" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw jg">那么，我们如何确定感兴趣区域的X轴和Y轴的起始值和终止值呢？</strong></p><p id="0897" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这些值(startX，endX，startY，endY)是标出感兴趣区域的坐标值。当使用<strong class="kw jg"> OpenCV </strong>显示时，这些值不会显示在图像旁边，但我们可以使用其他应用程序(如Photoshop、Corel Draw、Paint e.t.c)或其他python可视化库(如Matplotlib)来显示图像及其X和Y坐标值。</p><p id="538c" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一如既往，这在实践中更容易理解。让我们使用<strong class="kw jg"><em class="lx">matplotlib . py plot</em></strong>显示一幅图像，从中我们可以检索出绘制出图像中感兴趣的目标区域的坐标。</p><p id="4ed7" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我用加纳共和国国旗的图像来证明这一点。在这里，我的目标是图像中围绕黑星的区域。</p><p id="c73a" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw jg">获取感兴趣区域的坐标值。</strong></p><ol class=""><li id="ab8a" class="ly lz jf kw b kx ky la lb ld ma lh mb ll mc lp md me mf mg bi translated"><strong class="kw jg">使用<em class="lx"> Matplotlib </em>加载并显示图像。</strong></li></ol><figure class="lq lr ls lt gt iv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="lq lr ls lt gt iv gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/eb178bb55a5511467ca258134862579a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*J89ybXYdorsjFcyISkIHrQ.png"/></div><p class="iy iz gj gh gi ja jb bd b be z dk translated">输出:加载的图像及其X和Y坐标。(图片由作者提供)。</p></figure><p id="231c" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如您所见，<strong class="kw jg"> <em class="lx"> plt.imshow </em> </strong>函数返回读取的图像以及x和y轴的坐标值。</p><p id="74c1" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，我们可以检索感兴趣区域(黑星)的起点和终点坐标值。下面是一个如何追踪星形区域的值的图。</p><figure class="lq lr ls lt gt iv gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/7ecc53b15041432072151843c4369a1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*ox0Ve9_UyZsrZvY4lDCwlg.jpeg"/></div><p class="iy iz gj gh gi ja jb bd b be z dk translated">追踪黑星区域的坐标值。(图片由作者提供)。</p></figure><p id="f307" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该图像显示了如何追踪目标黑星周围区域的坐标。</p><p id="2ce4" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从图像中，我们可以检索坐标(startY(y1)，endY(y2)，startX(x1)，endX(x2))。然后，我们可以定义两个轴的起点和终点坐标，并将星形裁剪为:</p><p id="d09e" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw jg"> <em class="lx">图像【y1: y2，x1:x2】</em></strong></p><pre class="lq lr ls lt gt mj mk ml mm aw mn bi"><span id="8f11" class="mo mp jf mk b gy mq mr l ms mt">if we get y1, y2 = [145, 295] and x1, x2 = [245, 400]</span></pre><p id="4fb4" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">那么画出黑星的区域应该是:</p><pre class="lq lr ls lt gt mj mk ml mm aw mn bi"><span id="5672" class="mo mp jf mk b gy mq mr l ms mt">black_star = image[145:295, 245:400]</span></pre><p id="47aa" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这将返回绘制感兴趣区域(在本例中为黑色星号)的像素值(在Numpy数组中)。</p><p id="eb3c" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，我们可以使用这种技术来针对各种图像处理对图像区域进行定位和切片。</p><p id="5bb9" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我使用一个来自尼日利亚埃努古的煤矿工人雕像的图像演示了切片操作的常见图像处理技术。</p><p id="cbe2" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw jg">使用切片操作裁剪图像</strong></p><p id="b36b" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw jg"> 1。加载并显示原始图像</strong></p><figure class="lq lr ls lt gt iv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="lq lr ls lt gt iv gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/6f7e5930221ee84da65a2c913dfa0810.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*xULC5B39JKhgiw0CNe7iLw.png"/></div><p class="iy iz gj gh gi ja jb bd b be z dk translated">输出:显示加载的图像(作者的图像)。</p></figure><p id="29de" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw jg"> 2。获取图像的空间尺寸</strong></p><figure class="lq lr ls lt gt iv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="lq lr ls lt gt iv gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/97b4f00ec8e0add02ad72f0edf221c69.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*AJZk_234HQcP4vbn8nIGSQ.png"/></div><p class="iy iz gj gh gi ja jb bd b be z dk translated">输出:显示图像的空间维度。(图片由作者提供)。</p></figure><p id="879d" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw jg"> 3。使用尺寸来裁剪图像</strong></p><p id="9b43" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw jg">裁剪掉图像的左上角</strong></p><figure class="lq lr ls lt gt iv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="lq lr ls lt gt iv gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/d63f7e1d03c65fc9af930938aa684987.png" data-original-src="https://miro.medium.com/v2/resize:fit:594/format:webp/1*lhSSPLjy8zL8kGtMjeIHFA.png"/></div><p class="iy iz gj gh gi ja jb bd b be z dk translated">输出:图片左上角(图片由作者提供)。</p></figure><p id="1a6d" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw jg">裁剪掉图像的右上角</strong></p><figure class="lq lr ls lt gt iv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="lq lr ls lt gt iv gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/910c94063847dc6a4df0f97c7833f3e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*_O2VBPPoFMLOHObvB3Mqcw.png"/></div><p class="iy iz gj gh gi ja jb bd b be z dk translated">输出:图片右上角(图片由作者提供)。</p></figure><p id="21ab" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw jg">裁剪掉图像的左下角</strong></p><figure class="lq lr ls lt gt iv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="lq lr ls lt gt iv gh gi paragraph-image"><div class="gh gi my"><img src="../Images/e9ec1e03817135a355799dac0996aa0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*UUnzSZVHxtSDpKpjZY6uxg.png"/></div><p class="iy iz gj gh gi ja jb bd b be z dk translated">输出:图片左下角(图片由作者提供)。</p></figure><p id="fb18" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw jg">裁剪掉图像的右下角</strong></p><figure class="lq lr ls lt gt iv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="lq lr ls lt gt iv gh gi paragraph-image"><div class="gh gi my"><img src="../Images/62d9c858f96a0dbbe78933f6c9357b0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*--UGYLJ1WRduFR5J489T5g.png"/></div><p class="iy iz gj gh gi ja jb bd b be z dk translated">输出:左下角(图片作者)。</p></figure><p id="e2d2" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw jg"> 4。使用尺寸将部分图像设置为特定颜色。</strong></p><figure class="lq lr ls lt gt iv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="lq lr ls lt gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi mz"><img src="../Images/29baa80142f7c546653592a7ab5b2897.png" data-original-src="https://miro.medium.com/v2/resize:fit:1186/format:webp/1*8JrNDKf2BEVEcwz2icKmog.png"/></div></div><p class="iy iz gj gh gi ja jb bd b be z dk translated">输出:设置左上角为绿色(图片由作者提供)。</p></figure><p id="422e" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw jg">概要:</strong></p><p id="564e" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">图像像素是表示图像中颜色强度的数值。OpenCV获取和设置不同图像处理的图像像素的过程是基于Numpy数组的切片操作。对像素值进行切片在裁剪、重置、复制或增强图像时非常有用。</p></div></div>    
</body>
</html>