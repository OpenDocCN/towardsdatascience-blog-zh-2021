<html>
<head>
<title>Applications of Different Parts of an ROC Curve</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ROC曲线不同部分的应用</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/applications-of-different-parts-of-an-roc-curve-b534b1aafb68?source=collection_archive---------6-----------------------#2021-11-13">https://towardsdatascience.com/applications-of-different-parts-of-an-roc-curve-b534b1aafb68?source=collection_archive---------6-----------------------#2021-11-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a1d5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">理解ROC曲线不同部分的重要性，探索ML应用的AUC变量</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/92d752f8f149cdb385c3ff47d25d4968.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gnSd0Ad9UIdi32eaZGME_g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="kv">作者图片</em></p></figure><h1 id="d9a9" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="fa49" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">受试者工作特性(<strong class="lq ir"> ROC </strong>)曲线是诊断二元分类器能力的最常用图形工具之一，独立于固有的分类算法。几十年来，ROC分析已经用于许多领域，包括医学、放射学、生物统计学、自然灾害预测、气象学、模型性能评估和其他领域，并且越来越多地用于机器学习和数据挖掘研究[1]。如果你是一名数据科学家，你可能每天都在使用它。</p><p id="2c9f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">ROC曲线是通过绘制真阳性率(TPR)对假阳性率(FPR ),基于不同模型分数设置下的二元结果而创建的。理想的分类器将在非常低的FPR下给出非常高的TPR值(即，它将正确地识别阳性而不会错误地标记阴性)。但是，理想的模型很少存在，因此，尝试不同模型和机器学习实验的目标是确定一个最佳模型，该模型将给出最佳的成本(FPR)/收益(TPR)权衡。ROC分析有助于实现这一目标。</p><h1 id="b345" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">ROC曲线下的总面积(AUC)</h1><p id="aff5" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">通常，(并且在“几乎所有”情况下)，我们使用ROC曲线下的总面积(<strong class="lq ir"> AUC </strong>)作为评估标准来找到最佳分类器。AUC也是大多数Kaggle比赛中使用的评估标准。这是因为AUC是一个单一的数字，它提供了各种阈值设置下整体模型性能的平均信息。关于AUC的一个有趣的性质是，它独立于类别分布，即无论类别分布是10%/90%还是50%/50%，基于AUC的模型的排名将是相同的。<em class="mp">(注意我提到的“有趣”，并不总是好的属性。有用性取决于手头的问题。在某些情况下，这个属性可能不好，数据科学家转而使用精确-召回曲线下的面积。但是让我们把这个放在一边)。AUC在大多数情况下是信息性的和有用的，但是有许多现实世界的问题，在这些问题中，它未能提供对模型能力的正确关注，而在投入生产之前需要理解该模型的能力。在许多实际应用中(下面讨论的例子)，ROC曲线的主要部分几乎没有用，但AUC总结了整个曲线，给予所有区域同等的重要性，包括不相关的区域。</em></p><p id="cf87" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">应对上述AUC挑战的常用解决方案是确定一个FPR(或TPR)截止点，并找到在该截止点最大化TPR(或最小化FPR)的模型。但是在任一轴上固定截止值需要业务方面的具体要求，并且在输出值上具有更高的方差。这不是一个理想的解决方案，它忽略了ROC曲线的大部分操作范围。也很难查看各种指标的网格来比较模型，例如TPR @ 1% FPR、2%FPR、10% FPR、20% FPR等。</p><p id="936f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">简而言之，我们认为完全AUC在某些情况下存在问题，查看固定的截断点集并不是这些问题的理想解决方案。建议的解决方案介于两者之间，即，我们不使用所有可能的FPR/TPR值，而是在一组重要的点上进行聚合。这可以通过ROC曲线下的<strong class="lq ir">部分面积来实现。</strong></p><p id="13c7" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在剩下的帖子中，<strong class="lq ir"> </strong>让我们来了解一下文献中发现的部分面积度量的不同变体，如何计算每个变体以及何时使用它们。但首先，让我们从一些AUC未能强调部分面积指标需求的例子开始。</p><h2 id="aa88" class="mq kx iq bd ky mr ms dn lc mt mu dp lg lx mv mw li mb mx my lk mf mz na lm nb bi translated"><strong class="ak">完全AUC问题示例</strong></h2><ol class=""><li id="a9b5" class="nc nd iq lq b lr ls lu lv lx ne mb nf mf ng mj nh ni nj nk bi translated">当类别分布高度不平衡时(例如0.1%/99.9%，用例:欺诈检测、癌症检测等。)，不同的分类器即使被正确排序<strong class="lq ir">也会在AUC值上表现出非常小的差异</strong>，<strong class="lq ir">，使得模型比较变得困难</strong>。例如，您可能正在比较像0这样的数字。AUC中9967 vs. 0.9961并且认为对比的两个模型相当相似。实际上，这两个模型在用于实际决策时可能会有显著的差异。</li><li id="5575" class="nc nd iq lq b lr nl lu nm lx nn mb no mf np mj nh ni nj nk bi translated">如果只有1个肯定和999个否定，即使是一个像样的模型也能够通过错误分类一小部分否定(FPR，假设20%)来捕捉100%的肯定(即1)。在这种情况下，比较高FPR范围(例如&gt; 20%)的面积是没有用的，因为<strong class="lq ir">所有模型在高FPR区域都达到了100%的TPR。</strong>但是AUC仍然使用高FPR无用区域。在这种情况下，理想情况下，我们希望找到一种模型，它可以通过错误分类非常低%的否定来识别很大%的肯定。</li><li id="6080" class="nc nd iq lq b lr nl lu nm lx nn mb no mf np mj nh ni nj nk bi translated">在临床实践中，具有高FPR的诊断测试导致显著的经济费用，因为很大比例的非患病候选人将耗尽医学治疗的稀缺资源。此外，在诊断致命疾病时，未能正确识别严重患病受试者(低TPR)将导致严重的伦理后果。因此，<strong class="lq ir"> FPR和TPR需要同时分别维持在低和高水平</strong>；以便从AUC中排除不经济和不道德的区域。[2]</li><li id="ea1b" class="nc nd iq lq b lr nl lu nm lx nn mb no mf np mj nh ni nj nk bi translated">在使用乳房x光片检测良性与恶性癌症时，识别恶性癌症比对良性疾病进行不必要的活检更重要。即高TPR ≥ 0.9是感兴趣区域。完整的AUC可能不会显示不同模型之间的显著差异，即使它们在感兴趣的区域有所不同。</li><li id="c90a" class="nc nd iq lq b lr nl lu nm lx nn mb no mf np mj nh ni nj nk bi translated">AUC警告的另一个经典例子是两个分类器的比较，这两个分类器具有彼此交叉的非常不同的ROC曲线。一个具有高TPR，另一个具有高真阴性率(TNR)，但两者具有相同的AUC。在这种情况下，AUC无法选择更好的分类器。[6]</li></ol><blockquote class="nq nr ns"><p id="566c" class="lo lp mp lq b lr mk jr lt lu ml ju lw nt mm lz ma nu mn md me nv mo mh mi mj ij bi translated"><strong class="lq ir">边注:</strong>顺便说一句，这里有一个有趣的琐事，以及ROC曲线中“<a class="ae nw" href="https://en.wikipedia.org/wiki/Receiver_operating_characteristic#:~:text=to%201.0.%5B55%5D-,History,-%5Bedit%5D" rel="noopener ugc nofollow" target="_blank">”这个词的由来。ROC在二战期间首次被用于分析雷达信号，更具体地说，被美国陆军用于从他们的雷达信号中探测日本飞机。通过观察屏幕，雷达接收机操作员必须手动决定屏幕上的一个光点是代表敌机还是某种噪音。他们做出这些区分的能力被称为受试者操作特征。</a></p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/711e4ecb3ec5d0b60dda0ba15df7c532.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CAriMosS9RySa-7tPiJOZQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">ROC曲线(<em class="kv">图片作者</em></p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/74386ec06a93d503af725aa8e75f0424.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xb37yPqbDRAkkqXZc5iRBw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">ROC曲线的不同部分(<em class="kv">图片作者</em></p></figure><p id="dfd8" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">左边的ROC曲线表示被训练来分类二元结果的样本分类器的性能。该分类器的AUC是0.969。</p><p id="9a37" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">注:AUC范围从0到1，在0.5之间对称。即AUC为0.5是最差的分类器。AUC在0和0.5之间的分类器预测与被评估的类别相反的类别。</p><p id="3c31" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在，我们将了解如何使用同一ROC曲线的不同区域(如左侧突出显示的区域)来计算不同的部分指标。</p><h1 id="b857" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">ROC曲线下部分面积的变量</h1><p id="2b0e" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">局部区域度量并不新鲜。我最后引用的一些论文发表于80年代。我写这篇文章的目的是重温它们，并引起您对处理实际生产问题时可能遇到的常见场景的注意，尤其是在数据科学竞赛的世界之外。</p><h2 id="3a32" class="mq kx iq bd ky mr ms dn lc mt mu dp lg lx mv mw li mb mx my lk mf mz na lm nb bi translated"><strong class="ak"> 1。暂停</strong></h2><p id="8f3c" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><strong class="lq ir">定义</strong>:低于某一FPR的ROC曲线下归一化面积。[4]</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/9c1a265ddeca5ad0ae86b858ebecec5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P5WdOh8liFud45scHthGvw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">pAUCcn @ &lt;10% FPR. Green area divided by red area. (A/B) <em class="kv">(图片由作者提供)</em></p></figure><p id="c0cc" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">优点:</strong>关注ROC曲线最左边部分对高TPR的需求；对高度不平衡的数据最重要的区域。</p><p id="b5aa" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">缺点:</strong> pAUCn缺乏AUC在0.5左右所享有的对称性。pAUCn没有固定的下限，因为下限随着所选择的FPR阈值而变化。</p><h2 id="6656" class="mq kx iq bd ky mr ms dn lc mt mu dp lg lx mv mw li mb mx my lk mf mz na lm nb bi translated">2.矿泉</h2><p id="b4f7" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><strong class="lq ir">定义:</strong>主对角线以上ROC曲线下标准化部分面积。[7]</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/41623480f95422f38aceaa7160597614.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T8ceinbLSOs731AgMmWv8A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">sPA @ &lt;10% FPR. <em class="kv"> 0.5 * (1 + A/(A+B))(图片由作者提供)</em></p></figure><p id="0b2f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">优点:</strong>关注ROC曲线最左边部分对高TPR的需求。对于随机分类器，其被缩放以给出0.5的值，即，给出固定的下限，而不考虑FPR截止。<strong class="lq ir"> <br/>缺点:</strong> sPA也缺乏对称性，0.5以下没有意义。其下限不为0。</p><h2 id="3469" class="mq kx iq bd ky mr ms dn lc mt mu dp lg lx mv mw li mb mx my lk mf mz na lm nb bi translated">3.个人事故保险（Personal Accident Insurance的缩写）</h2><p id="ca8a" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><strong class="lq ir">定义:</strong>局部面积指数。特定TPR以上ROC曲线下的面积。换句话说，TPR临界值和1之间的所有FPRs值的TPR平均值。[3]</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/5430f1493eacd46b40f691284e0ec0f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6i9vtvneLBloxEnqsWIvVw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">PAI @ &gt;70% TPR。绿色区域除以红色区域。(A/B) <em class="kv">(图片由作者提供)</em></p></figure><p id="5e7f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">优点:</strong>关注高TPR需求，不考虑FPR。在一些临床实践中，如早期癌症检测，如果高FPR意味着更好的捕获率，是否可以容忍。</p><p id="77fb" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">缺点:</strong>下限不是固定的，并且随着TPR截止值而变化。相对于其他部分面积度量，缺少大约0:0.5和0.5:1的对称性。</p><h2 id="9cf0" class="mq kx iq bd ky mr ms dn lc mt mu dp lg lx mv mw li mb mx my lk mf mz na lm nb bi translated">4.tpAUCn</h2><p id="6ec8" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><strong class="lq ir">定义:</strong>ROC曲线下低于一定FPR、高于一定TPR的双向部分区域。[2]</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/fbcacdcbbeefc5adc224c3f7a75e34ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-umvqLcI_266Q3Wc7gm_Hg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">tpAUCn @ &lt;10% FPR &amp; &gt; 70% TPR。绿色区域除以红色区域。(A/B) <em class="kv">(图片由作者提供)</em></p></figure><p id="0f2c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">优点:</strong>允许同时控制TPR和FPR。许多用例需要高TPR和低FPR。例如使用昂贵测试仪器的致命疾病的诊断。</p><p id="8adc" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">反对意见:</strong>用户应该了解TPR和FPR临界值。</p><h2 id="7a27" class="mq kx iq bd ky mr ms dn lc mt mu dp lg lx mv mw li mb mx my lk mf mz na lm nb bi translated">5.pAUCcn</h2><p id="ef31" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><strong class="lq ir">定义:</strong>ROC曲线下一致的部分面积。ROC曲线下垂直部分面积(pAUCn)和ROC曲线下水平部分面积(pAUCxn)之和的一半。[5]</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/46dd32638a926d78408f77c9d949a3d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BvwWwZ38F1lKJrrjZcqb9Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">pAUCcn @ &gt;10% FPR &amp; &lt;20% FPR. Green area divided by red area <em class="kv">(图片由作者提供)</em></p></figure><p id="0a61" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">优点:</strong>比例与sPA相似，给随机分类器0.5分。与其他局部面积测量不同，这种方法认为AUC与平均TPR、平均FPR和<a class="ae nw" href="https://www.mcw.edu/-/media/MCW/Departments/Biostatistics/vo19no4.pdf" rel="noopener ugc nofollow" target="_blank"> c统计</a>有类似的关系。</p><p id="7636" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">缺点:</strong>其下界不为0。</p><p id="213f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><em class="mp">【后作者注:关于pAUCcn利弊的知识需要根据ROC曲线下一致部分面积作者的最新论文进行更新。基于新的归一化方法，cons是无效的，并且具有类似于AUC的对称性。我将很快做出必要的改变。】</em></p><h2 id="db85" class="mq kx iq bd ky mr ms dn lc mt mu dp lg lx mv mw li mb mx my lk mf mz na lm nb bi translated">6.HAUC</h2><p id="be49" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><strong class="lq ir">定义:</strong>Half-AUC，AUC分两半测量，当TPR &gt; TNR或TPR &lt; TNR时。当已知需要高灵敏度(TPR)还是高特异性(TNR)时，用于比较分类器。两半之和等于完全AUC。[6]</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/e24d1dac871034ecacd792774c7b23ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J4phv0SK1piIHRwJTag-gA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">HAUCsp: A+0.5*C，HAUCse:B+0.5c . HAUCsp+HAUCse = AUC<em class="kv">(图片由作者提供)</em></p></figure><p id="703a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">优点:</strong>不需要就FPR或TPR停产做出决定。临界值是从ROC曲线中FPR = 1 - TPR的点自动得出的。唯一需要决定的是你需要高TPR还是高TNR。范围从0到0.5，0.25随机。</p><p id="f530" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">缺点:</strong>当截止点已知且不同于FPR = 1 - TPR时，没有用。</p><h1 id="5760" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">比较研究</h1><p id="2d3f" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我用一个合成数据的比较研究来说明部分AUC的有用性。可能还有其他几个例子我没有在这篇文章中演示(长话短说)。这些例子包括:A)具有高AUC但在低FPRs下表现不同的两个分类器的比较，B)具有相同AUC但在高TPRs下表现不同的分类器，C)具有相同AUC但灵敏度或特异性水平不同的交叉ROC曲线，以及更多…</p><h2 id="ee9d" class="mq kx iq bd ky mr ms dn lc mt mu dp lg lx mv mw li mb mx my lk mf mz na lm nb bi translated">两个分类器具有相似的高AUC，但在低FPR时性能不同</h2><p id="5fba" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在下面的例子中，我使用sklearn的<a class="ae nw" href="https://scikit-learn.org/stable/modules/generated/sklearn.datasets.make_classification.html#sklearn.datasets.make_classification" rel="noopener ugc nofollow" target="_blank"> make_classification </a>方法准备了一个合成数据集。为了强调标签分布高度不平衡的数据场景，我将标签比率保持为99%/1%。然后我训练了两个分类器，一个用LogisticRegression (LR)训练，另一个用CatBoostClassifier (CB)训练。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/af60fc0c8b25359ffc125a7da7400bc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M-d7AkHYfPFYLwIvoFlJSg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">线性和对数标度的ROC曲线。对数标度强调低FPR时的差异。<em class="kv">(图片作者</em></p></figure><p id="ef81" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们看到LR和CB的AUC非常接近(99.78%对99.96%)。事实上，线性标度ROC曲线看起来非常相似。有人可能会认为CB的排名很好，但并不比LR好多少。但是在对数标度上看到相同的曲线(右侧)强调了在低FPRs下的差异(&lt;1%). Let’s see what would a partial area give.</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/9c33a2dff722fb0aa6dea0a8763d801a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bkztLmGwfqcvYhlT-tAyOQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Emphasis on partial area under curve below certain FPR. FPR at log scale. <em class="kv">(图片由作者提供)</em></p></figure><p id="be1c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在1% FPR的截止值处的pAUCn显示了LR和CB之间的相当大的性能差异(89.9%对97.9%)，表明CB做得更好。</p><p id="bf8a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这种情况的一个例子(除了前面提到的癌症检测)是训练一个分类器，用于从在线认证中检测账户泄露。设想一个模型，该模型检测登录是来自攻击者(受损的)还是来自原始帐户持有人。考虑到在线活动的巨大规模，实际上只有极小比例的登录会受到影响(例如万分之一)。您可以使用该模型将高风险登录放入人工调查队列中。由于很大的不平衡，在FPR低至1%的情况下，您将调查100个良好的登录，以努力找到1个折衷方案。由于调查中产生的费用，您的业务需求可能会限制您只调查所有登录中的X%,从业务角度来看，将X% FPR以上的区域视为无用。</p><h2 id="138b" class="mq kx iq bd ky mr ms dn lc mt mu dp lg lx mv mw li mb mx my lk mf mz na lm nb bi translated">包含创建图和计算部分指标的代码的笔记本</h2><div class="oa ob gp gr oc od"><a href="https://github.com/groverpr/Machine-Learning/blob/master/notebooks/11_Applications_of_different_parts_of_an_ROC_curve.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">machine-Learning/11 _ Applications _ of _ different _ parts _ of _ an _ ROC _ curve . ipynb at master…</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">机器学习笔记。在GitHub上创建一个帐户，为Grover pr/机器学习开发做贡献。</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">github.com</p></div></div><div class="om l"><div class="on l oo op oq om or kp od"/></div></div></a></div><h1 id="85f2" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="fd56" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">AUC通常被用作一个汇总指标，根据TPR和FPR在不同阈值下的准确性，指示二元检验的总体表现。更简单地说，它是所有可能的FPR上的平均TPR和所有可能的TPR上的平均FPR(本质上是对称的)。AUC在大多数情况下是信息性的和有用的，但是存在许多真实世界的问题，其中ROC曲线的许多部分是不感兴趣的，并且AUC未能聚焦于重要的区域。有时，您感兴趣的区域低于某个FPR，有时高于某个TPR，或者其他时候同时受FPR和TPR的限制。有时特异性(TNR，1-FPR)比敏感性(TPR)更重要，有时反之亦然。在所有这些情况下，部分AUC测量做了正确的事情，集中在ROC曲线的重要区域。这篇文章提供了一些文献中的局部面积测量，帮助我们将它们可视化，并总结了它们的优缺点。</p><p id="8a83" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">复习学分:</strong> <a class="os ot ep" href="https://medium.com/u/83100b0fd306?source=post_page-----b534b1aafb68--------------------------------" rel="noopener" target="_blank">什卡·古普塔</a></p><h1 id="0c59" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">参考文献</strong></h1><p id="2ba3" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我上面提到的度量标准基本上是从过去写的几篇关于部分AUC的论文中挑选出来的。</p><ol class=""><li id="2943" class="nc nd iq lq b lr mk lu ml lx ou mb ov mf ow mj nh ni nj nk bi translated">维基百科:<a class="ae nw" href="https://en.wikipedia.org/wiki/Receiver_operating_characteristic" rel="noopener ugc nofollow" target="_blank">https://en . Wikipedia . org/wiki/Receiver _ operating _ character istic</a></li><li id="4da5" class="nc nd iq lq b lr nl lu nm lx nn mb no mf np mj nh ni nj nk bi translated"><a class="ae nw" href="https://arxiv.org/abs/1508.00298" rel="noopener ugc nofollow" target="_blank">杨H，陆K，吕X，胡f .双向偏AUC及其性质。</a></li><li id="176e" class="nc nd iq lq b lr nl lu nm lx nn mb no mf np mj nh ni nj nk bi translated"><a class="ae nw" href="https://pubmed.ncbi.nlm.nih.gov/8939225/" rel="noopener ugc nofollow" target="_blank">姜Y，梅斯策，西川RM。高灵敏度诊断试验用的接收机工作特性局部面积指数。</a></li><li id="313f" class="nc nd iq lq b lr nl lu nm lx nn mb no mf np mj nh ni nj nk bi translated"><a class="ae nw" href="https://onlinelibrary.wiley.com/doi/abs/10.1002/sim.2103" rel="noopener ugc nofollow" target="_blank">沃尔特·SD。汇总ROC曲线下的部分面积。</a></li><li id="75b0" class="nc nd iq lq b lr nl lu nm lx nn mb no mf np mj nh ni nj nk bi translated"><a class="ae nw" href="https://pubmed.ncbi.nlm.nih.gov/31906931/" rel="noopener ugc nofollow" target="_blank"> Carrington等人。机器学习算法评估中不平衡数据的新的协调部分AUC和部分c统计。</a></li><li id="2aa3" class="nc nd iq lq b lr nl lu nm lx nn mb no mf np mj nh ni nj nk bi translated">布拉德利美联社。用于评价敏感或特异分类器的半AUC。</li><li id="d4da" class="nc nd iq lq b lr nl lu nm lx nn mb no mf np mj nh ni nj nk bi translated"><a class="ae nw" href="https://pubmed.ncbi.nlm.nih.gov/23508757/" rel="noopener ugc nofollow" target="_blank">马等利用ROC曲线下部分面积评价诊断性能。</a></li></ol></div></div>    
</body>
</html>