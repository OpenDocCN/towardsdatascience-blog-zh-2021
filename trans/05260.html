<html>
<head>
<title>Your Python Output Can Be Prettier</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">您的Python输出可以更漂亮</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/your-python-output-can-be-prettier-c697ace3f161?source=collection_archive---------9-----------------------#2021-05-09">https://towardsdatascience.com/your-python-output-can-be-prettier-c697ace3f161?source=collection_archive---------9-----------------------#2021-05-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/cb2b92b18751b2c74e4f85f6e4607ec4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1BsPlyKgXeRz6EYQ4RgCsQ.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由Pixabay上的<a class="ae jg" href="https://pixabay.com/users/lnlnln-1131094/" rel="noopener ugc nofollow" target="_blank"> LNLNLN </a>拍摄</p></figure><div class=""/><div class=""><h2 id="43cc" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">从Python Pretty打印机库的基础到高级用法</h2></div><p id="4cfe" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">每种编程语言都可以输出。控制台中的打印变量可以被认为是最基本的调试方法——至少您知道它包含什么。如果您使用诸如Jupyter Notebook之类的交互式笔记本，这对Python来说更是如此，因为运行一个单元后，输出就是您所拥有的全部。</p><p id="a181" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，您是否对输出的格式感到困扰？例如</p><ul class=""><li id="8336" class="lu lv jj la b lb lc le lf lh lw ll lx lp ly lt lz ma mb mc bi translated">有许多打印在一行中的键-值对的字典</li><li id="1c23" class="lu lv jj la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">嵌套列表打印在不可读的一行中</li><li id="6be7" class="lu lv jj la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">有非常深的不感兴趣的嵌套对象的字典</li></ul><p id="a4e8" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可能已经知道Python中漂亮的打印机库，也可能不知道。无论哪种情况适合你，本文都将尝试引导你进入其中，并进行深入探讨。</p><p id="6fa9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请注意，漂亮的打印机库是Python内置的，因此您不需要下载任何东西。</p><h1 id="6b13" class="mi mj jj bd mk ml mm mn mo mp mq mr ms kp mt kq mu ks mv kt mw kv mx kw my mz bi translated">1.基本用法</h1><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/c094e9a501e2904787ec5969e1278043.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a0RuPbQ5uUzvLVFowjGhaA.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://pixabay.com/users/jamesdemers-3416/" rel="noopener ugc nofollow" target="_blank">詹姆斯·德莫斯</a>在<a class="ae jg" href="https://pixabay.com/photos/bridge-park-garden-japanese-garden-53769/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>拍摄</p></figure><p id="f87b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，我们需要导入这个库，并为演示目的构建一个示例字典。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="0c99" class="nj mj jj nf b gy nk nl l nm nn">import pprint as pp</span><span id="fc35" class="nj mj jj nf b gy no nl l nm nn">sample_dict = {<br/>    'name': 'Chris',<br/>    'age': 33,<br/>    'message': 'Thank you for reading my article!',<br/>    'topic':'Python Programming'<br/>}</span></pre><p id="c641" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，如果我们简单地打印这本字典，所有内容都将在一行中输出。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="b919" class="nj mj jj nf b gy nk nl l nm nn">print(sample_dict)</span></pre><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi np"><img src="../Images/0a57d03f40a24b9f75122627890a4467.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_-74yeESFSC2KVhXFEZOFA.png"/></div></div></figure><p id="32d4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">嗯，这可能还不算太糟，但是如果我们有更多的键值对或者一些值非常长怎么办？阅读起来会很困难。现在，让我们来看看漂亮的打印机库能做些什么。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="3237" class="nj mj jj nf b gy nk nl l nm nn">pp.pprint(sample_dict)</span></pre><figure class="na nb nc nd gt iv gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/651b4085ebc36c1c5ac0f5fa9a997ece.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*AmWKh-LpfY8TEO7JeQd4mQ.png"/></div></figure><p id="7e87" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，每个键值对都显示在一行中，这样可读性更好。此外，您可能没有注意到，字典会自动按字母顺序对键名进行排序。</p><h1 id="3d21" class="mi mj jj bd mk ml mm mn mo mp mq mr ms kp mt kq mu ks mv kt mw kv mx kw my mz bi translated">2.文本换行</h1><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/cbaf4f0f6f3067531bd8fbb72c989275.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NtqNGjN4xA7xndOrjKZkAg.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://pixabay.com/users/spencerwing-4260422/" rel="noopener ugc nofollow" target="_blank"> SpencerWing </a>在<a class="ae jg" href="https://pixabay.com/photos/gifts-ribbons-wrapping-holiday-2872124/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄</p></figure><p id="674d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我猜大多数Python开发者都知道上面显示的基本用法。然而，你知道漂亮的打印机库有更多的参数和标志，可以用来进一步定制输出吗？</p><p id="cd93" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">其中一个示例用法是文本换行。假设我们不仅满足于每行有一个键-值对，还希望在值太长时有文本换行。在这种情况下，我们可以使用<code class="fe nr ns nt nf b">width</code>参数。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="5548" class="nj mj jj nf b gy nk nl l nm nn">pp.pprint(sample_dict, width=30)</span></pre><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nu"><img src="../Images/763f3cdd150057f345cdd23b89cf4a13.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*5bMsiSltKYa3Jgejc_g6FA.png"/></div></div></figure><p id="82f6" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，我们可以使用宽度来约束行的长度，以获得更好的可读性。除此之外，<code class="fe nr ns nt nf b">indent</code>参数可以在每一行前面添加缩进。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="9860" class="nj mj jj nf b gy nk nl l nm nn">pp.pprint(sample_dict, width=30, indent=10)</span></pre><figure class="na nb nc nd gt iv gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/53d7c98e0319b49480f2b0479f173c0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*rx6AESCsqT_Yw75fdvH9eg.png"/></div></figure><h1 id="36ef" class="mi mj jj bd mk ml mm mn mo mp mq mr ms kp mt kq mu ks mv kt mw kv mx kw my mz bi translated">3.嵌套对象截断</h1><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/e0a7c251d138eff0391169dbbd31ce9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PTxaVKYKZ2q3ScuNsIVhEw.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://pixabay.com/photos/egg-nest-tree-branches-leaves-1600890/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上的<a class="ae jg" href="https://pixabay.com/users/jerzygorecki-2233926/" rel="noopener ugc nofollow" target="_blank"> JerzyGorecki </a>拍摄的照片</p></figure><p id="95b2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有时，我们可能不想查看输出内容的所有细节。例如，我们可能想防止递归打印，或者只是对嵌套对象中更深层次的内容不感兴趣。</p><p id="9e8a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">假设我们有一个如下的嵌套Python列表。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="8578" class="nj mj jj nf b gy nk nl l nm nn">sample_list = ['level1', ['level2', ['level3']]]</span></pre><p id="d4c5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们使用普通漂亮的打印机，将不会有什么不同，从正常的打印。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="51e5" class="nj mj jj nf b gy nk nl l nm nn">pp.pprint(sample_list)</span></pre><figure class="na nb nc nd gt iv gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/d1f255bc58882b2e561d1d3afe845da2.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*DaubfggSWiaYOo-KBy6opw.png"/></div></figure><p id="7b1b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，如果我们指定了<code class="fe nr ns nt nf b">depth</code>参数，任何比参数更深的内容都将被截断。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="04a9" class="nj mj jj nf b gy nk nl l nm nn">pp.pprint(sample_list, depth=2)<br/># OR<br/>pp.pprint(sample_list, depth=1)</span></pre><figure class="na nb nc nd gt iv gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/775ebb1d852a93910bef286867dc88ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:706/format:webp/1*Q3d7hb64t2_XJWEQRfsncg.png"/></div></figure><h1 id="3f58" class="mi mj jj bd mk ml mm mn mo mp mq mr ms kp mt kq mu ks mv kt mw kv mx kw my mz bi translated">4.实例化漂亮的打印机</h1><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/b8b52ac39b8c5ff50c8559b6adf37ed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sPIf-77U0C3P7E52zJOR6w.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">Pixabay上<a class="ae jg" href="https://pixabay.com/users/leulietmorgan-817101/" rel="noopener ugc nofollow" target="_blank"> leulietmorgan </a>的照片</p></figure><p id="9b2c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">到目前为止，它是非常酷的。然而，编写上面演示的代码只是为了打印某些东西，每次都是<strong class="la jk"/>，这可能太冗长和累了。</p><p id="0a3a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">的确，我不会建议用漂亮的打印机来代替默认的打印功能。听起来有点怪:)所以，只在必要的时候使用。例如，当您调试来自web服务的JSON响应时。</p><p id="f717" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，这是另一个问题。当你想不止一次而是多次使用漂亮的打印机时。每次都写带参数的函数也很累。事实上，我们可以用所有必要的参数实例化Pretty Printer类。然后，我们可以反复使用它。</p><p id="d644" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe nr ns nt nf b">PrettyPrinter</code>类位于<code class="fe nr ns nt nf b">pprint</code>包的根层。所以，还是重新导入吧。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="d3b4" class="nj mj jj nf b gy nk nl l nm nn">import pprint</span></pre><p id="bd03" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，我们可以在构造函数中传递参数，如下所示。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="01cb" class="nj mj jj nf b gy nk nl l nm nn">pp = pprint.PrettyPrinter(depth=2)</span></pre><p id="dd9c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">之后，我们得到了具有预定义样式的实例，可以直接使用。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="7733" class="nj mj jj nf b gy nk nl l nm nn">pp.pprint(sample_list)</span></pre><figure class="na nb nc nd gt iv gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/9756d97bc76345346c7deca411752caf.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*0ZW2NG0_EGn_1APIlYWenw.png"/></div></figure><h1 id="cc83" class="mi mj jj bd mk ml mm mn mo mp mq mr ms kp mt kq mu ks mv kt mw kv mx kw my mz bi translated">5.实践中的例子</h1><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/a0f9b075f557faaf4abd3dec0c0b6b63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cAKitLjDAzWJDIAwd8zXWA.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://pixabay.com/users/free-photos-242387/" rel="noopener ugc nofollow" target="_blank">在<a class="ae jg" href="https://pixabay.com/photos/businessman-newspaper-business-man-1031755/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上的</a>自由照片拍摄的照片</p></figure><p id="14e8" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后但同样重要的是，我想向您展示一个实际的例子来说明我们何时需要漂亮的打印机库。</p><p id="e43c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们使用PyPI样例项目中的样例JSON。这个例子也在官方文档中使用。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="0af7" class="nj mj jj nf b gy nk nl l nm nn">import json<br/>import pprint<br/>from urllib.request import urlopen<br/>with urlopen('<a class="ae jg" href="https://pypi.org/pypi/sampleproject/json'" rel="noopener ugc nofollow" target="_blank">https://pypi.org/pypi/sampleproject/json'</a>) as res:<br/>    project_info = json.load(res)['info']</span><span id="b83a" class="nj mj jj nf b gy no nl l nm nn">del project_info['description']</span></pre><p id="4064" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请注意，我已经删除了<code class="fe nr ns nt nf b">description</code>键，因为它太长了，无法在本文中恰当地演示。</p><p id="7b96" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们简单地打印它，我们从输出中得不到任何有用的信息。一切都在一条线上。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="daca" class="nj mj jj nf b gy nk nl l nm nn">print(project_info)</span></pre><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nz"><img src="../Images/77f86f5f7194edb93afa877199888f6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cMcnvggz_NQml6zCVNyWtA.png"/></div></div></figure><p id="816e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们不能简单地使用Pretty Printer库来生成可读的输出，而不是复制输出并使用Sublime等额外的文本编辑器来格式化和美化JSON文档。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="0449" class="nj mj jj nf b gy nk nl l nm nn">pprint.pprint(project_info, depth=1, width=60)</span></pre><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oa"><img src="../Images/4029958f99448e7d5f82a704217c479f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*CRmFXan4erq6gPgUlF6zCA.png"/></div></div></figure><h1 id="6794" class="mi mj jj bd mk ml mm mn mo mp mq mr ms kp mt kq mu ks mv kt mw kv mx kw my mz bi translated">摘要</h1><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/755bde4e4961f8c3e45780a84a402185.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ngY4-o31p8P2YRexncuh9w.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://pixabay.com/users/free-photos-242387/" rel="noopener ugc nofollow" target="_blank">免费拍摄的照片</a>在<a class="ae jg" href="https://pixabay.com/photos/laptop-desk-workspace-workplace-336373/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上</p></figure><p id="fac9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我介绍了Python内置的漂亮的打印机库。当然，我们不一定要用它来代替默认的打印功能。我们必须在使用前导入它，代码会变得冗长。然而，在某些情况下，我们可以使用它来生成更好的可读输出，以方便我们的编程和调试活动。</p><div class="is it gp gr iu ob"><a href="https://medium.com/@qiuyujx/membership" rel="noopener follow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd jk gy z fp og fr fs oh fu fw ji bi translated">通过我的推荐链接加入Medium克里斯托弗·陶</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">medium.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op ja ob"/></div></div></a></div><p id="481e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">如果你觉得我的文章有帮助，请考虑加入灵媒会员来支持我和成千上万的其他作家！(点击上面的链接)</strong></p></div></div>    
</body>
</html>