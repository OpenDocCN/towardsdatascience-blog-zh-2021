<html>
<head>
<title>Why FHIR Terminologies Don’t Work for Analytics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么他们的术语不适用于分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/why-fhir-terminologies-dont-work-for-analytics-d462103204c1?source=collection_archive---------22-----------------------#2021-08-11">https://towardsdatascience.com/why-fhir-terminologies-dont-work-for-analytics-d462103204c1?source=collection_archive---------22-----------------------#2021-08-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="7e3d" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/notes-from-industry" rel="noopener" target="_blank">行业笔记</a></h2><div class=""/><div class=""><h2 id="df7f" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">以及该怎么做</h2></div><p id="c2dd" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我想谈谈任何医疗保健分析系统的一个重要组成部分——术语。这些是医疗保健数据中普遍使用的诊断、药物、程序、设备和其他医疗保健服务的基础代码。在ClosedLoop，我们在数据科学平台中维护和利用许多术语。我们发现快速医疗保健互操作性资源(FHIR)——一种描述数据格式和元素的标准，以及一种用于交换健康数据的应用程序编程接口——对于这项任务来说既非常有用，又非常令人沮丧。FHIR为这些术语提供了一致的结构，这些术语以前通常作为具有不同格式和约定的文件和数据库表来管理。FHIR擅长管理数据，但不是为分析而设计的。在这篇文章中，我将谈论我们在试图构建一个纯粹基于FHIR的术语服务时所面临的一些问题，以及我们如何最终迁移到一种使用FHIR来维护和管理源数据的方法，然后在此基础上构建我们自己的术语图来支持分析查询。</p><h1 id="a105" class="lk ll iq bd lm ln lo lp lq lr ls lt lu kf lv kg lw ki lx kj ly kl lz km ma mb bi translated">什么是FHIR？</h1><p id="a1f4" class="pw-post-body-paragraph ko kp iq kq b kr mc ka kt ku md kd kw kx me kz la lb mf ld le lf mg lh li lj ij bi translated">FHIR彻底改变了医疗保健数据互操作性。单纯为了促进医疗数据交换而存在的应用程序需要一种通用语言，而FHIR就是这种通用语言。它使苹果健康工具包、CMS BlueButton等应用程序获得了成功。FHIR规范的一个完整的小节涉及术语服务，并描述了在整个医疗记录中使用的无数诊断、程序和其他代码如何在FHIR中使用。你可能会认为，对于那些对医疗保健数据进行分析的人来说，FHIR术语会非常有用。使所有代码标准化并可从单个FHIR服务器访问可以使构建和维护分析查询更加容易。不幸的是，FHIR是为互操作性而构建的，它有两个严重的缺点，这使得它很难用于分析。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mh"><img src="../Images/89ce61a78b846618c310eee20e00a827.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TuoTlfZ01rb3Cwqd"/></div></div></figure><p id="c17f" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><em class="mt">图1: FHIR术语资源概述。转载自</em>【http://hl7.org/fhir/2021Mar/terminology-module.html】<em class="mt"/></p><p id="c1b1" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">为了理解这些缺点，了解一下术语在FHIR中的工作原理是很有用的。如图1所示，FHIR定义了3个管理术语的关键资源:代码系统、值集和概念图。毫不奇怪，代码系统是一组独特的代码，是一些受控术语的一部分。ICD-10诊断代码是一个代码系统，就像SNOMED一样，甚至是FHIR语言的官方列表。代码系统可以是分层的，因此代码系统中的单个代码可以有子代码。代表“哮喘”的ICD-10代码J45有一个代表“轻度间歇性哮喘”的J45.2的孩子。代码系统本身有一个标识符，所以如果你在FHIR中看到一个代码，你就知道它来自哪里。</p><p id="9e0d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">除了代码系统，FHIR还定义了另外两种资源，值集和概念图。值集定义了可以在特定地方使用的代码组。例如，您可能有一个特定的字段，可以是CPT代码或ICD-10程序代码。该字段的值集将是这两个代码的组合。概念图定义了代码之间的关系。例如，概念图可以将RxNorm概念代码与同该概念相关的NDC列表联系起来。</p><h1 id="b72d" class="lk ll iq bd lm ln lo lp lq lr ls lt lu kf lv kg lw ki lx kj ly kl lz km ma mb bi translated">使用FHIR进行分析的挑战</h1><p id="840a" class="pw-post-body-paragraph ko kp iq kq b kr mc ka kt ku md kd kw kx me kz la lb mf ld le lf mg lh li lj ij bi translated">使用FHIR进行分析的第一个主要问题是，代码系统、值集和概念图都定义了代码之间的关系，但用不同的规则和不同的查询函数以不同的方式定义。这使得即使是涉及将来自多个代码系统的代码聚合到更高级分组中的基本分析查询也变得非常困难。</p><p id="eb15" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在一个简单的例子中，假设您想要查找带有某组传染病诊断的医疗索赔。您有这些诊断的高级代码列表。其中之一是针对“结核病”的CCS类别1.1.1。该CCS分组包括ICD-10代码A15。A15对不同种类的结核病有几个子码，A15.0，A15.4等。您希望能够获得您的初始代码列表，并确定与您的查询匹配的所有ICD-10代码。也就是说，您希望获得CCS 1.1.1的所有子代码，这需要包括ICD-10 A15.0和ICD-10 A15.4。要在FHIR中获取这些代码，您需要一个定义初始代码列表的值集，其中包括CCS 1.1.1。CCS到诊断代码的映射将通过概念图来完成，A15及其子代码之间的关系将存储在ICD-10代码系统的层次结构中。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mh"><img src="../Images/bf7aa62bed071f1de93690ecffdfc8e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*q3CpowuoJd2_lcc2"/></div></div><p class="mv mw gj gh gi mx my bd b be z dk translated">作者图片</p></figure><p id="302d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">当您尝试将初始列表解析为一组诊断代码时，FHIR的局限性就变得很明显；您需要运行3个单独的FHIR查询。您必须首先扩展值集，然后遍历概念图，最后获得ICD-10代码的所有子代码。更糟糕的是，FHIR查询的这种组合是特定于这种特定的数据结构的。如果概念图或代码系统层次结构的结构不同，您可能需要执行一组不同的查询。</p><p id="2c1d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">如果您发现前面的例子令人困惑，不要担心。这个例子的目的是展示使用FHIR查询进行分析是多么困难。对于分析，一个更自然的术语视图是一个有向图，其中每个代码是一个节点，它们之间的关系是边。任何一种聚合都是一种简单的图遍历。</p><p id="4770" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">第二个主要问题是，FHIR的版本化方法使得处理可能跨越多个先前术语版本的历史数据变得困难。在分析中，我们通常会查看包含历史数据的数据集，有时是几年前的数据。一个特定的代码可能在今天已经过时了，但是它在几年前使用的时候是有效的，你不希望在做分析的时候扔掉所有这些代码。对于分析，您需要术语的历史视图，包括当前和过期的代码，并无缝地使用它们。在FHIR中，您要么需要指定一个特定的版本，要么只选择最新的版本。您不能合并不同版本的搜索。</p><h1 id="624c" class="lk ll iq bd lm ln lo lp lq lr ls lt lu kf lv kg lw ki lx kj ly kl lz km ma mb bi translated">救援术语图表</h1><p id="7f5a" class="pw-post-body-paragraph ko kp iq kq b kr mc ka kt ku md kd kw kx me kz la lb mf ld le lf mg lh li lj ij bi translated">为了解决这两个问题，我们开发了一种混合术语方法，即闭环术语图。ClosedLoop术语图是一个高性能的术语图，可以快速解析代码关系。它位于我们的FHIR服务器的前面，并提供了一个基于图形的查询API，用于分析比标准的FHIR端点更快、更简单。通过使用仅存储节点和边结构的高度压缩的格式将图形结构存储在存储器中来实现性能，并且根据需要从FHIR服务器检索关于每个代码的底层信息。这个图能够合并多个版本的FHIR资源，因此它可以包含一个完整的历史代码集。默认情况下，图形会返回任何代码的最新版本，但如果某个代码已被删除，它会从该代码处于活动状态的最新版本中检索该代码。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mh"><img src="../Images/730f4043cf26eea8684cf179027d205b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ItY1CSowGcBQiOMx"/></div></div><p class="mv mw gj gh gi mx my bd b be z dk translated">作者图片</p></figure><p id="9ee1" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">闭环术语图为我们提供了两个世界的精华。FHIR是存储和维护代码系统、概念图和值集的一种很好的方式，我们用它来达到这个目的。在FHIR之上，我们提供了一个基于图表的术语视图，可以跨越多个历史版本，以实现快速方便的分析查询。虽然构建我们自己的图表并找到与我们的FHIR服务器保持同步的方法是一个挑战，但最终的好处超过了成本。它使我们能够保持标准合规性，但仍能提供出色的分析体验。FHIR可能会在某个时候纳入更多的分析工作流，并解决这些问题。在那之前我们有一个解决方案。</p></div></div>    
</body>
</html>