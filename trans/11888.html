<html>
<head>
<title>How to Create Hashtags with NLP, Viewed Through a Social Justice Lens</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从社会公正的角度看如何用NLP创建标签</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-transform-technical-jargon-into-simple-bi-tri-grams-with-nlp-on-a-public-dataset-2081f5609c1f?source=collection_archive---------16-----------------------#2021-11-28">https://towardsdatascience.com/how-to-transform-technical-jargon-into-simple-bi-tri-grams-with-nlp-on-a-public-dataset-2081f5609c1f?source=collection_archive---------16-----------------------#2021-11-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/132d810e9e75751c867f205f295585c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EFdrhqxHSzaEaUSp"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@claybanks?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">粘土银行</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><blockquote class="kd ke kf"><p id="ce2e" class="kg kh ki kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">那么，互联网是一种人工制品，既是正式教育过程的延伸，也是“非正式文化”，因此它是一种“主体性的发挥”。这一想法提供了另一个有利的角度，可以理解媒体中的代表性(和虚假陈述)是权力关系的一种表达方式——Safiya Umoja Noble(压迫的算法:搜索引擎如何强化种族主义，2018年)</p></blockquote><p id="34fa" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi li translated">屏幕另一边的人工智能对谦逊声音的压制正在扩大。我最近遇到一个小企业主。她的商业吸引力减少了，因为她的网站不再符合最近更新的搜索引擎优化算法。她的问题的解决方案比用于故障排除的标准技术更复杂。与谷歌<strong class="kj ir">自然语言</strong>或“搜索引擎”算法合作的最佳方式是什么？人类可以“学习人工智能来设计他们的方式来提高谷歌搜索的排名吗？</p><p id="04c3" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">谷歌使用复杂的语料库和单词包算法来绘制现有网站，每秒钟可以理解40，000次搜索。让少数民族、残疾人、退伍军人和女性拥有的企业等不太为人所知的声音发出来的方法是，让这些社区拥有一个能够理解并向SEO算法提供微调参数(词)的人工智能。有一种方法可以借鉴Google NLP算法，优化并动态更新自报能力。在本文结束时，您将会实现以下目标:</p><ul class=""><li id="6cc0" class="lr ls iq kj b kk kl ko kp lf lt lg lu lh lv le lw lx ly lz bi translated">将句子转换成有意义的二元模型和三元模型。</li><li id="da01" class="lr ls iq kj b kk ma ko mb lf mc lg md lh me le lw lx ly lz bi translated">轻松添加和更改数据框和数据类型。</li><li id="2fbe" class="lr ls iq kj b kk ma ko mb lf mc lg md lh me le lw lx ly lz bi translated">对公开报道的利基数据应用PMI、<a class="ae kc" href="https://machinelearningmastery.com/gentle-introduction-bag-words-model/" rel="noopener ugc nofollow" target="_blank">单词包</a>、n-grams和非结构化数据清理，以生成标签。</li><li id="d7fc" class="lr ls iq kj b kk ma ko mb lf mc lg md lh me le lw lx ly lz bi translated">文本摘要、模型偏差和改进后端数据集的方法。</li></ul><p id="3622" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">我们会从这里学习如何处理事情-</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="a61b" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">到这里-</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="c2b2" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">让我们直接进入解决方案-</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ml"><img src="../Images/961169bd4f859d45dcea0fb2bb5a77ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0YSFwH-ApmU9bIhI"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@christianw?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Christian Wied</a>Let ' s son<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></p></figure><h1 id="9259" class="mm mn iq bd mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj bi translated">数据集</h1><p id="0c76" class="pw-post-body-paragraph kg kh iq kj b kk nk km kn ko nl kq kr lf nm ku kv lg nn ky kz lh no lc ld le ij bi translated">纽约州在州属企业数据库中维护<strong class="kj ir">D</strong>isabled/<strong class="kj ir">W</strong>omen/<strong class="kj ir">M</strong>Bbusiness<strong class="kj ir">E</strong>E。审计官办公室托管主数据库，帝国审计官根据具体情况授予企业认证，并将其纳入<a class="ae kc" href="https://ny.newnycontracts.com/FrontEnd/SearchCertifiedDirectory.asp" rel="noopener ugc nofollow" target="_blank">法律登记处</a>。纽约市为特定城市的公司维护另一个数据库。接下来的部分将介绍我们如何合并这些数据库和数据可视化。</p><p id="8c6c" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">州数据库可能很难导航。应该与自我报告功能相对应的Google搜索可能不会映射州数据库，因为它具有受保护的性质。在定义了问题之后，让我们更深入地研究数据库的核心。对于这个问题，我将使用的数据库是<a class="ae kc" href="https://online.ogs.ny.gov/SDVOB/search" rel="noopener ugc nofollow" target="_blank">SDVOB</a>——截至2022年1月27日，数据库中有<strong class="kj ir"> 932家认证的伤残退伍军人所有的企业</strong>。您可以通过按下<strong class="kj ir">搜索</strong>按钮下载excel文件。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi np"><img src="../Images/1a3bcabff28ea8a9ab4c2ac8285f1148.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kbzfByGCqEDwlP9o"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">乔希·阿佩尔在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="bf6e" class="mm mn iq bd mo mp nx mr ms mt ny mv mw mx nz mz na nb oa nd ne nf ob nh ni nj bi translated">配方的模块</h1><pre class="mf mg mh mi gt oc od oe of aw og bi"><span id="cf72" class="oh mn iq od b gy oi oj l ok ol">import numpy as np<br/>import pandas as pd<br/>from pandas import DataFrame, Series  # for convenience<br/>import re<br/>import glob<br/>import copy<br/>import os<br/>import xlrd<br/>import nltk<br/>import unicodedata<br/>import re<br/>from collections import Counter<br/>from nltk.collocations import *<br/>bigram_measures = nltk.collocations.BigramAssocMeasures()<br/>trigram_measures = nltk.collocations.TrigramAssocMeasures()<br/>from nltk.tokenize import word_tokenize<br/>from nltk.tag import pos_tag<br/>import spacy<br/>#!pip install -U pip setuptools wheel<br/>#!pip install -U spacy<br/>#!python -m spacy download en_core_web_sm<br/>nlp = spacy.load("en_core_web_sm")<br/>import en_core_web_sm<br/>nlp = en_core_web_sm.load()<br/>from bs4 import BeautifulSoup<br/>from html import unescape</span></pre><h1 id="8024" class="mm mn iq bd mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj bi translated">探索数据集</h1><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="f1bd" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">数据集包含936行× 21列，其中一列包含自我报告功能-</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="4dd7" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">-以及关键字和关于列。由于每一列都包含关键信息，这些信息可以让我们深入了解企业在做什么，因此我们需要训练一个模型，该模型使用这些信息的<strong class="kj ir">组合作为之前的</strong>，而没有任何嵌入的<strong class="kj ir">分类</strong>(或偏差)。这意味着我们的模型没有考虑信息是否来自关键字或关于列；该模型假设<strong class="kj ir">自我报告的信息与公共记录认证和验证的信息一样有价值</strong>。</p><p id="dc75" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">因此，下一步是将信息组合成一个列表；列表的索引对应于企业在数据库中的位置。正如你可能看到的，特征数据是<strong class="kj ir">不干净的，</strong>有几个不需要的ASCII字符，但是如果你仔细观察，这些字符是分隔关键字的，例如:</p><pre class="mf mg mh mi gt oc od oe of aw og bi"><span id="dfa7" class="oh mn iq od b gy oi oj l ok ol">string1 = "Marijuana Dispensary, Online Retail Sales"<br/>string2 = "Environmental remediation services; Fire and or Water Damage Restoration Services"</span><span id="db60" class="oh mn iq od b gy om oj l ok ol">print(string1.split(sep =', '))<br/>&gt;&gt;['Environmental remediation services',  'Fire and or Water Damage Restoration Services']</span><span id="7bd4" class="oh mn iq od b gy om oj l ok ol">#try - string2.split(sep='; ')</span></pre><p id="eb3d" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">因此，要在没有NLP的情况下提取所需的二元模型和三元模型，我们可以使用分隔符，分隔符的选择取决于我们！这里有一些我可以观察到的分隔符<code class="fe on oo op od b">&amp;, --,: etc.</code>,所以在我们下一步清理数据之前，让我们列出一个可以循环的列表。</p><h1 id="5673" class="mm mn iq bd mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj bi translated">数据集分离</h1><p id="017f" class="pw-post-body-paragraph kg kh iq kj b kk nk km kn ko nl kq kr lf nm ku kv lg nn ky kz lh no lc ld le ij bi translated">下面是我如何制作一个总数据的<strong class="kj ir">列表</strong></p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="23d9" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">在我们进入清理和提取hashtags的循环之前，我将定义<strong class="kj ir">关键函数来清理、提取和整理数据。</strong></p><h2 id="08e6" class="oh mn iq bd mo oq or dn ms os ot dp mw lf ou ov na lg ow ox ne lh oy oz ni pa bi translated">基本功能</h2><p id="89eb" class="pw-post-body-paragraph kg kh iq kj b kk nk km kn ko nl kq kr lf nm ku kv lg nn ky kz lh no lc ld le ij bi translated">0.<strong class="kj ir"> Basic clean </strong>是最重要的函数，它使用NLP并返回一个没有Unicode、ASCII和停用词的字符串列表！通过使用Beautifulsoup来清理HTML语法或定义停用词，您可以将它提升到一个更高的水平。当我们<strong class="kj ir">在将成为数据框单元一部分的字符串列表中获得重复的</strong>时，该函数获取一组列表并将它们转换成一个字符串。</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="pb mk l"/></div></figure><p id="15c3" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">现在我们有了基本的清理，我们可以创建这个整洁的函数来大写单词-</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="pb mk l"/></div></figure><ol class=""><li id="b382" class="lr ls iq kj b kk kl ko kp lf lt lg lu lh lv le pc lx ly lz bi translated">下面的函数将帮助我们<strong class="kj ir">删除位于数据框单元格内的字符串列表</strong>中的重复项，并吐出组合了这些单词的<strong class="kj ir">字符串。</strong></li></ol><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="a1b8" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">比如说—</p><pre class="mf mg mh mi gt oc od oe of aw og bi"><span id="440e" class="oh mn iq od b gy oi oj l ok ol">`s = “ Hello Hello Sir”<br/>strsetoflist(s.split())<br/>&gt;&gt;'Hello Sir'</span></pre><p id="8eb9" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">2.不幸的是，<strong class="kj ir"> np nan </strong>一直是我所有数据方的客人，我不得不使用这个函数<strong class="kj ir">将其从字符串列表</strong>中移除——</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="c2c4" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">3.<strong class="kj ir">如果你没有字符串列表，那么在字符串中删除重复项</strong>就有点复杂了，所以为了安全起见，这里是第一个函数的扩展。</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="8943" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">4.移除非类型是我们需要考虑的另一个麻烦。</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="pb mk l"/></div></figure><h1 id="b739" class="mm mn iq bd mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj bi translated">标签生成</h1><p id="422e" class="pw-post-body-paragraph kg kh iq kj b kk nk km kn ko nl kq kr lf nm ku kv lg nn ky kz lh no lc ld le ij bi translated">欢迎使用机器！这里有几个移动部分——选择和调整参数。其中第一个是<strong class="kj ir">字数</strong><em class="ki">(len(q))</em><strong class="kj ir"/>第二个是<strong class="kj ir"/><a class="ae kc" href="https://blog.xrds.acm.org/2017/10/introduction-n-grams-need/" rel="noopener ugc nofollow" target="_blank"><strong class="kj ir">三元组和二元组</strong></a><strong class="kj ir"/>第三个是<a class="ae kc" href="https://medium.com/dataseries/understanding-pointwise-mutual-information-in-nlp-e4ef75ecb57a" rel="noopener"><strong class="kj ir">PMI</strong></a><strong class="kj ir">(</strong>点态互信息)。我们使用PMI来识别“<em class="ki">搭配</em>的单词。首先，让我们解开双循环，走向if-else。</p><p id="bfcd" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">因为数据列表的长度等于行数，所以让我们在原始数据框中创建一个单独的列来开始操作。我们可以通过更改列表本身并将其附加到数据框来实现相同的目标。</p><ol class=""><li id="7609" class="lr ls iq kj b kk kl ko kp lf lt lg lu lh lv le pc lx ly lz bi translated">首先，我们将对数据中的每个字符串元素使用<code class="fe on oo op od b">split()</code>函数来创建一个双列表。然后我们将<code class="fe on oo op od b">basic_cleanandcapitalize()</code>这些单词，并开始一个接一个地删除和操作双列表中的每个单词/字符串。</li></ol><p id="8d54" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">2.我们将<strong class="kj ir">分割字符串(总数据中的单词)并创建一个我们想要检查的虚拟</strong>列表‘q’。</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="pb mk l"/></div></figure><p id="4ba7" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">3.正如您可能看到的，我们希望将单词限制在长度2–4之间，所以我们想要一个长度在(1，5) 之间的<strong class="kj ir">字符串。然后，我们将列表放回字符串中，并将其与原始数据框连接起来。</strong></p><p id="9790" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">4.否则——我们使用列表中的三元模型查找器，并<em class="ki">应用过滤器</em> <code class="fe on oo op od b">apply_freq_filter</code> ( <strong class="kj ir">移除频率小于min_freq </strong>的候选元模型)。— 1表示单词至少出现一次，这是另一个可以考虑的值。这里你也可以使用一个bigram_measures和<a class="ae kc" href="https://tedboy.github.io/nlps/generated/generated/nltk.BigramCollocationFinder.html" rel="noopener ugc nofollow" target="_blank">bigram collocation finder</a>。</p><p id="b163" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">5.我们还使用<strong class="kj ir"> finder和nbest来测量PMI </strong>以检查单词<strong class="kj ir">一起是否有意义</strong>，并从该元组([0:1]) 中选择<strong class="kj ir">前两个候选项，这里的机制是位扭曲的，试错法将比PMI 的<a class="ae kc" href="https://courses.engr.illinois.edu/cs447/fa2018/Slides/Lecture17HO.pdf" rel="noopener ugc nofollow" target="_blank">数学解释得更多。</a></strong></p><p id="cc59" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">6.最后，我们将<strong class="kj ir">元组转换成字符串</strong>，并在将临时变量合并到数据帧之前使用tidy函数。我们可以通过制作标签来总结:</p><pre class="mf mg mh mi gt oc od oe of aw og bi"><span id="0722" class="oh mn iq od b gy oi oj l ok ol">df1['Hashtags'] = df1['Data_total_grams'].apply(nonetype_remove )</span></pre></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="c228" class="mm mn iq bd mo mp nx mr ms mt ny mv mw mx nz mz na nb oa nd ne nf ob nh ni nj bi translated">结论</h1><p id="52bc" class="pw-post-body-paragraph kg kh iq kj b kk nk km kn ko nl kq kr lf nm ku kv lg nn ky kz lh no lc ld le ij bi translated">上述过程解释了如何将句子转换成有意义的两个或三个单词的组合，并选择适合应用的单词。这篇文章的总体目标是解释简单的人工智能算法如何帮助和授权资源有限的社区进行“标记”和“标注”。关于<a class="ae kc" href="https://www.nature.com/articles/s41599-019-0278-x.pdf" rel="noopener ugc nofollow" target="_blank">人工智能的社会挑战</a>和<a class="ae kc" href="https://hbr.org/2021/07/everyone-in-your-organization-needs-to-understand-ai-ethics" rel="noopener ugc nofollow" target="_blank">组织人工智能伦理</a>的定性文章阐明了这个问题。这篇文章是将事情付诸行动的一个小小尝试。我们可以在https://toughleaf.com<a class="ae kc" href="https://toughleaf.com" rel="noopener ugc nofollow" target="_blank">的</a>找到算法的应用</p></div></div>    
</body>
</html>