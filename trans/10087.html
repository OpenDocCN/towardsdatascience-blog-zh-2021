<html>
<head>
<title>Simulating Mancala: What happens when I push this game to its limits?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">模拟曼卡拉:当我把这个游戏推到极限时会发生什么？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/simulating-mancala-what-happens-when-i-push-this-game-to-its-limits-28d9c0a58616?source=collection_archive---------13-----------------------#2021-09-23">https://towardsdatascience.com/simulating-mancala-what-happens-when-i-push-this-game-to-its-limits-28d9c0a58616?source=collection_archive---------13-----------------------#2021-09-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="57ff" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我用MATLAB模拟了10万个曼卡拉游戏，看看会发生什么。结果如下:</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/616e87cdbdb4ee808e86f883a95d3769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*t1LoJ0oJdILDs7vc8OHt7Q.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片由作者提供</p></figure></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h2 id="2561" class="lb lc it bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">简介:</h2><p id="d14f" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf lk mg mh mi lo mj mk ml ls mm mn mo mp im bi translated">由于曼卡拉是世界上最古老的游戏之一，所以选择这款游戏作为我的下一个棋盘游戏MATLAB项目是有意义的。曼卡拉是一个零和游戏，意思是一个人的收获直接导致另一个人的损失。这使得一次模拟几十万个游戏变得非常容易。</p></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h2 id="f778" class="lb lc it bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">曼卡拉规则:</h2><p id="1126" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf lk mg mh mi lo mj mk ml ls mm mn mo mp im bi translated">这是一个非常简单的游戏。每个玩家有6个坑和一个商店，棋盘上总共有12个坑和2个商店。每个坑开始时有4粒种子。目标是在您的商店中获得最多的种子。每回合，一名玩家从他们的6个坑中选择一个，取出所有的种子。逆时针方向移动，玩家从手中丢下一粒种子到下一个坑或仓库，直到手中的种子用完。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mq"><img src="../Images/e9c8eaaf01af91c603617023cce6413c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fJcoeHBYm-eRpWA-3kS-VQ.jpeg"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片由<a class="ae mv" href="https://www.pexels.com/" rel="noopener ugc nofollow" target="_blank">pexels.com</a>提供</p></figure><p id="a76c" class="pw-post-body-paragraph lx ly it lz b ma mw ju mc md mx jx mf lk my mh mi lo mz mk ml ls na mn mo mp im bi translated">还有一些特殊的规则需要注意:</p><ul class=""><li id="f479" class="nb nc it lz b ma mw md mx lk nd lo ne ls nf mp ng nh ni nj bi translated">如果你的最后一粒种子在你的店里用完了，你可以再去一次。</li><li id="33c2" class="nb nc it lz b ma nk md nl lk nm lo nn ls no mp ng nh ni nj bi translated">如果你的最后一粒种子落在你这边的一个完全空的坑里，你可以直接收集棋盘上的所有种子。</li></ul><p id="8745" class="pw-post-body-paragraph lx ly it lz b ma mw ju mc md mx jx mf lk my mh mi lo mz mk ml ls na mn mo mp im bi translated">当一方完全空了，游戏结束，另一方从他们的坑里收集剩余的种子，放入他们的仓库。商店被计算出来，种子最多的人获胜。</p></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h2 id="dad0" class="lb lc it bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">编码Mancala:</h2><p id="b998" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf lk mg mh mi lo mj mk ml ls mm mn mo mp im bi translated">这种模拟的工作原理是让两个玩家互相随机移动，直到一个人获胜。随机选取一个有种子的坑，这些种子沿着棋盘逆时针分布(见下文)。</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="fdcc" class="lb lc it nq b gy nu nv l nw nx">while gameover == 0 % while nobody has won</span><span id="ac0b" class="lb lc it nq b gy ny nv l nw nx">while p1_turn == 0 % while still player 1 turn</span><span id="4409" class="lb lc it nq b gy ny nv l nw nx">if sum(layout(1:6)) ~= 0 % while player 1 still has seeds in pits</span><span id="0a64" class="lb lc it nq b gy ny nv l nw nx">moves = moves + 1; % plus 1 for total moves</span><span id="76db" class="lb lc it nq b gy ny nv l nw nx">while good_pick1 == 0 % loop to find a pit with seeds</span><span id="3d30" class="lb lc it nq b gy ny nv l nw nx">p1 = randi(6); % picks random pit</span><span id="5114" class="lb lc it nq b gy ny nv l nw nx">amount = layout(p1); % finds amount of seeds in that pit</span><span id="83a9" class="lb lc it nq b gy ny nv l nw nx">if amount &gt; 0 % if pit has seeds</span><span id="74ed" class="lb lc it nq b gy ny nv l nw nx">break % breaks out of loop (found a good pit)</span><span id="7105" class="lb lc it nq b gy ny nv l nw nx">end</span><span id="1822" class="lb lc it nq b gy ny nv l nw nx">end</span></pre><p id="2f01" class="pw-post-body-paragraph lx ly it lz b ma mw ju mc md mx jx mf lk my mh mi lo mz mk ml ls na mn mo mp im bi translated">在每场比赛结束时，感兴趣的数据点被记录下来，并一直进行到所有100，000次模拟完成。</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="f068" class="lb lc it nq b gy nu nv l nw nx">move_data(repeats) = moves; % adds moves to move dataset</span><span id="dbf8" class="lb lc it nq b gy ny nv l nw nx">p1_data(repeats) = mean(p1_moves); % adds average move to player 1 move dataset</span><span id="19f0" class="lb lc it nq b gy ny nv l nw nx">p2_data(repeats) = mean(p2_moves) - 7; % adds average move to player 1 move dataset</span><span id="8da6" class="lb lc it nq b gy ny nv l nw nx">score1_data(repeats) = layout(7); % adds player 1 score to player 1 score dataset</span><span id="9229" class="lb lc it nq b gy ny nv l nw nx">score2_data(repeats) = layout(14); % adds player 2 score to player 2 score dataset</span></pre></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h2 id="9334" class="lb lc it bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">结果是:</h2><p id="31e5" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf lk mg mh mi lo mj mk ml ls mm mn mo mp im bi translated">一个标准的曼卡拉游戏是什么样子的？完成一局游戏平均需要多少回合？最短的游戏是什么？所有这些问题都可以通过10万次曼卡拉模拟来回答。</p><p id="42a7" class="pw-post-body-paragraph lx ly it lz b ma mw ju mc md mx jx mf lk my mh mi lo mz mk ml ls na mn mo mp im bi translated">曼卡拉(每坑4粒种子)的平均游戏需要41.42步才能完成一局。找到的最长的游戏是77步，最短的是11步(见下面的柱状图)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/0d80c8ad18ddc86acfd318d2c88e2cb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xwBNcS-4Wd05zGdE9D177A.jpeg"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片由作者提供</p></figure><p id="b23b" class="pw-post-body-paragraph lx ly it lz b ma mw ju mc md mx jx mf lk my mh mi lo mz mk ml ls na mn mo mp im bi translated">最短可能的游戏发生在一个玩家很快用完他们所有的种子，然后游戏结束，另一个玩家收集剩下的种子。</p><p id="b050" class="pw-post-body-paragraph lx ly it lz b ma mw ju mc md mx jx mf lk my mh mi lo mz mk ml ls na mn mo mp im bi translated">每个玩家的获胜概率是多少？先走对你的胜算有影响吗？嗯，开始时每个坑有4粒种子，先走的玩家有48.624%的机会获胜，而另一个玩家有44.604%的机会获胜(剩下的6.772%的机会是平局)。</p><p id="d6ff" class="pw-post-body-paragraph lx ly it lz b ma mw ju mc md mx jx mf lk my mh mi lo mz mk ml ls na mn mo mp im bi translated">开始游戏时有没有一个最好的第一坑可以选择，以增加自己的胜算？如果你是第一个出手的玩家，选择6号坑(最右边的坑)将使你平均每局获得24.9033粒种子，比第二高的坑平均多0.3粒种子。第二个玩家也一样。第6号坑将让他们平均每场比赛获得23.9039粒种子。</p></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h2 id="b3a0" class="lb lc it bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">将曼卡拉推向极限:</h2><p id="1b0d" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf lk mg mh mi lo mj mk ml ls mm mn mo mp im bi translated">开始时每个坑有100个种子的游戏是什么样子的？1000呢？这对胜负概率有什么影响？</p><p id="b52b" class="pw-post-body-paragraph lx ly it lz b ma mw ju mc md mx jx mf lk my mh mi lo mz mk ml ls na mn mo mp im bi translated">我对下面显示的每个初始种子数量(1-10、15、20、50和100)运行了100，000次模拟，以查看获胜百分比如何变化。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/616e87cdbdb4ee808e86f883a95d3769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*t1LoJ0oJdILDs7vc8OHt7Q.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片由作者提供</p></figure><p id="4752" class="pw-post-body-paragraph lx ly it lz b ma mw ju mc md mx jx mf lk my mh mi lo mz mk ml ls na mn mo mp im bi translated">随着首发种子数量的增加，比赛平局的几率下降。这是有道理的，因为随着种子数量的增加，商店最终拥有准确数量种子的几率越来越低。</p><p id="03b9" class="pw-post-body-paragraph lx ly it lz b ma mw ju mc md mx jx mf lk my mh mi lo mz mk ml ls na mn mo mp im bi translated">这里值得注意的是获胜概率。第一次行动的玩家和第二次行动的玩家之间的差异似乎变小了，这意味着随着更多种子的加入，游戏变得更加公平。当每个坑有10粒种子时，这种差异又跳回来重新开始。这意味着，如果你想要最公平的比赛，每个坑9个种子是理想的设置(100个种子也有一点点差别，但这种游戏将永远持续下去)。</p><p id="46e6" class="pw-post-body-paragraph lx ly it lz b ma mw ju mc md mx jx mf lk my mh mi lo mz mk ml ls na mn mo mp im bi translated">我还想看看开始种子的数量如何影响完成游戏的总平均移动。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/d6f24fadf8e94fbc7a27360f54f9fe21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*7UxLtdEEOOevsdAufeciog.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片由作者提供</p></figure><p id="0a03" class="pw-post-body-paragraph lx ly it lz b ma mw ju mc md mx jx mf lk my mh mi lo mz mk ml ls na mn mo mp im bi translated">每场比赛的平均移动不是线性增加的，而是以对数的方式增加的。我将其扩展到1000个种子和5000个种子，找到了一个R值为0.9715的最佳拟合方程(如下所示)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi ob"><img src="../Images/3c662121335b9f76afd38bceb641512f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c5hGd_LlcWBflLffCv0agw.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片由作者提供</p></figure><p id="f049" class="pw-post-body-paragraph lx ly it lz b ma mw ju mc md mx jx mf lk my mh mi lo mz mk ml ls na mn mo mp im bi translated">假设你从3个或更多的种子开始，最佳拟合方程可以用来找出一个游戏在任何初始种子数量下大概要走多少步。</p></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h2 id="afeb" class="lb lc it bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">结论:</h2><p id="aa3c" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf lk mg mh mi lo mj mk ml ls mm mn mo mp im bi translated">当您以不同的方式调整初始设置时，Mancala会出现一些有趣的模式。先走一步可以大大增加你获胜的机会，如果你想降低比赛以平局结束的几率，就多加些种子。观察棋盘游戏的极限以及游戏在这些时刻的反应是非常有趣的。</p><p id="3ddf" class="pw-post-body-paragraph lx ly it lz b ma mw ju mc md mx jx mf lk my mh mi lo mz mk ml ls na mn mo mp im bi translated">如果您对这类内容感兴趣，我推荐您阅读我的其他一些关于用MATLAB模拟棋盘游戏的文章:</p><ul class=""><li id="9be1" class="nb nc it lz b ma mw md mx lk nd lo ne ls nf mp ng nh ni nj bi translated"><a class="ae mv" href="https://medium.com/codex/the-best-and-worst-catan-board-setups-989df4ba550a" rel="noopener">打造最好的卡坦板</a></li><li id="b36c" class="nb nc it lz b ma nk md nl lk nm lo nn ls no mp ng nh ni nj bi translated"><a class="ae mv" rel="noopener" target="_blank" href="/simulating-monopoly-finding-the-best-properties-using-matlab-130fe557b1ae">寻找最佳垄断属性</a></li><li id="cf75" class="nb nc it lz b ma nk md nl lk nm lo nn ls no mp ng nh ni nj bi translated"><a class="ae mv" rel="noopener" target="_blank" href="/the-surprisingly-interesting-mathematics-within-chutes-and-ladders-40f931c18489">滑道和梯子里的数学</a></li><li id="a947" class="nb nc it lz b ma nk md nl lk nm lo nn ls no mp ng nh ni nj bi translated"><a class="ae mv" rel="noopener" target="_blank" href="/applying-machine-learning-to-tic-tac-toe-47d954671c73">教机器玩井字游戏</a></li><li id="112f" class="nb nc it lz b ma nk md nl lk nm lo nn ls no mp ng nh ni nj bi translated"><a class="ae mv" rel="noopener" target="_blank" href="/i-taught-a-machine-how-to-play-connect-4-df261da4e23f">教机器玩Connect-4 </a></li></ul></div></div>    
</body>
</html>