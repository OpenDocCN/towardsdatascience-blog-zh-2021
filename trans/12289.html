<html>
<head>
<title>Data Cleaning and EDA on Airbnb Dataset with Python Pandas and Seaborn</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于 Python Pandas 和 Seaborn 的 Airbnb 数据集的数据清洗和 EDA</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-cleaning-and-eda-on-airbnb-dataset-with-python-pandas-and-seaborn-7c276116b650?source=collection_archive---------12-----------------------#2021-12-14">https://towardsdatascience.com/data-cleaning-and-eda-on-airbnb-dataset-with-python-pandas-and-seaborn-7c276116b650?source=collection_archive---------12-----------------------#2021-12-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6ed2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">发现改变价格的特征</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a2c0f1685c36b9208b0bd68dd0d6dbd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v8FWop3C64JtrQADCsMGzg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@stephen2002?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">斯蒂芬·惠勒</a>在<a class="ae ky" href="https://unsplash.com/s/photos/airbnb?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="49f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Airbnb 把有地方租的人和需要地方住的人联系起来。它变得如此受欢迎和成功，以至于我们大多数人都将 Airbnb 视为我们旅行计划中的一个选项。</p><p id="81d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在确定一个地方的价格时，有几个因素起着关键作用。主人应该为他们的住处列出一个合理的价格。</p><p id="1d97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，寻找住处的人会从几个方面来评估房源，比如位置、面积、便利设施，最重要的是价格。</p><p id="20db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将尝试找出哪些功能对一个地方的价格有影响。有许多 Airbnb <a class="ae ky" href="http://insideairbnb.com/get-the-data.html" rel="noopener ugc nofollow" target="_blank">数据集</a>可以通过<a class="ae ky" href="https://creativecommons.org/licenses/by/4.0/" rel="noopener ugc nofollow" target="_blank"> creative commons </a>许可获得，因此可以随意使用和探索它们。</p><p id="54b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将为 Python 使用 Pandas 和 Seaborn 库。因此，本文也将是这些库的实用指南。</p><p id="063b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<a class="ae ky" href="http://insideairbnb.com/get-the-data.html" rel="noopener ugc nofollow" target="_blank">网站</a>上有很多可用的数据集。我们将使用的是 2021 年 7 月 7 日西班牙巴塞罗那的列表文件。让我们从导入 Pandas 开始，从 CSV 文件中读取数据来创建一个数据帧。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="a6ed" class="ma mb it lw b gy mc md l me mf">import pandas as pd</span><span id="eaf5" class="ma mb it lw b gy mg md l me mf">listings = pd.read_csv("listings.csv")</span><span id="a6ec" class="ma mb it lw b gy mg md l me mf">print(listings.shape)<br/>(17079, 74)</span></pre><p id="bfae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有两个清单文件。一定要用 74 列的。</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="ff23" class="mo mb it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">数据清理</h1><p id="8633" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">某些列的格式不适合分析。例如,“价格”、“主机接受率”和“主机响应率”列存储为字符串。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="a90b" class="ma mb it lw b gy mc md l me mf">listings[<br/>    ["price","host_response_rate","host_acceptance_rate"]<br/>].dtypes</span><span id="8ef9" class="ma mb it lw b gy mg md l me mf"># output<br/>price                   object<br/>host_response_rate      object<br/>host_acceptance_rate    object<br/>dtype: object</span><span id="74ca" class="ma mb it lw b gy mg md l me mf">---------------------------------------------------------</span><span id="402f" class="ma mb it lw b gy mg md l me mf">listings[<br/>    ["price","host_response_rate","host_acceptance_rate"]<br/>].head()</span><span id="ee62" class="ma mb it lw b gy mg md l me mf"># output</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/1307242bacb4221aa77c6ea4e8603b36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*x7bLKE_F6dX7fGuPv9Mr0Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="6f0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些列需要转换成数字格式。我们可以使用<code class="fe nl nm nn lw b">astype</code>函数来改变数据类型。但是，需要事先删除“$”和“%”字符。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c798" class="ma mb it lw b gy mc md l me mf">listings["price"] = listings["price"].str[1:].str.replace(",","").astype("float")</span><span id="ba2e" class="ma mb it lw b gy mg md l me mf">listings["host_response_rate"] = listings["host_response_rate"].str[:-1].astype("float") / 100</span><span id="235e" class="ma mb it lw b gy mg md l me mf">listings["host_acceptance_rate"] = listings["host_acceptance_rate"].str[:-1].astype("float") / 100</span></pre><p id="92ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于“$”和“%”字符是字符串中的第一个和最后一个字符，我们可以使用它们的索引来删除它们。</p><p id="98d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nl nm nn lw b">str[1:]</code>选择从第二个字符开始的所有字符，而<code class="fe nl nm nn lw b">str[:-1]</code>选择直到最后一个字符的所有字符(最后一个字符除外)。然后，<code class="fe nl nm nn lw b">astype</code>函数将数据类型改为 float。</p><p id="2729" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些列现在如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/322a334c454656723aaa766622ed15e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*t7pGQOcJxTZMdJ0ODDXtAg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><p id="4641" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有一个名为“浴室文本”的列，其中包含一些信息:浴室数量和浴室类型。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="77e8" class="ma mb it lw b gy mc md l me mf">listings[["bathrooms_text"]].head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/5f942af0992c99f5d1fa47ceb1aafa45.png" data-original-src="https://miro.medium.com/v2/resize:fit:514/format:webp/1*5iZiG19I-dtH17fgwbYyrQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="615d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我认为最好是两个单独的栏目，分别列出浴室的数量和类型。我们可以通过使用<code class="fe nl nm nn lw b">str</code>访问器下的<code class="fe nl nm nn lw b">split</code>函数来完成这项任务。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="5f19" class="ma mb it lw b gy mc md l me mf">listings["bathroom_qty"] = listings["bathrooms_text"].str.split(" ", expand=True)[0]</span><span id="eda5" class="ma mb it lw b gy mg md l me mf">listings["bathroom_type"] = listings["bathrooms_text"].str.split(" ", expand=True)[1]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/0b32a2bf81207be466493a709db3747b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*HKzBhPkFmVpd2PPifNtjLg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="08fa" class="mo mb it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">探索性数据分析</h1><p id="34e1" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">数据集中有 74 个要素。最好将它们分成一些主要的组，以保持我们分析的完整性。</p><p id="ba84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我想从价格这个目标变量开始。</p><h2 id="1fd0" class="ma mb it bd mp nr ns dn mt nt nu dp mx li nv nw mz lm nx ny nb lq nz oa nd ob bi translated">价格</h2><p id="62a9" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">让我们创建一个 price 列的直方图，以了解它的分布情况。我将使用 Seaborn 库进行数据可视化，所以第一步是导入它。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="8721" class="ma mb it lw b gy mc md l me mf">import seaborn as sns<br/>sns.set_theme(font_scale=1.5, style="darkgrid")</span></pre><p id="ef9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">直方图可通过使用<code class="fe nl nm nn lw b">displot</code>功能创建。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="e976" class="ma mb it lw b gy mc md l me mf">sns.displot(data=listings, x="price", kind="hist", aspect=1.5)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/c4ca83db83122e3fb2a0960c85ada5c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*rSMRhwPmQw6Uqo5vY-5Hzw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">价格直方图(图片由作者提供)</p></figure><p id="ab23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于价格非常高的异常值，分布是高度偏斜的。在这种情况下，最好取价格的对数。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="fde1" class="ma mb it lw b gy mc md l me mf">listings = listings[listings.price!=0]</span><span id="869a" class="ma mb it lw b gy mg md l me mf">listings.loc[:,"log_price"] = np.log(listings.loc[:,"price"])</span><span id="2e15" class="ma mb it lw b gy mg md l me mf">sns.displot(data=listings, x="log_price", kind="hist", aspect=1.5)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/fb5a6d25bc4aceb80fd870f31944e016.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*SH69CBhHhuhdilPFKV0yFQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">价格的自然记录(图片由作者提供)</p></figure><p id="8baa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在记录日志之前，我从数据框中删除了一些价格为 0 的列表。价格似乎呈对数正态分布。</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h2 id="faa5" class="ma mb it bd mp nr ns dn mt nt nu dp mx li nv nw mz lm nx ny nb lq nz oa nd ob bi translated">主持</h2><p id="b88d" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">关于主人的一些特征在一个地方的价格中起着关键作用。例如，比起未验证的主机，人们更倾向于信任具有验证身份的主机。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c46c" class="ma mb it lw b gy mc md l me mf">listings.groupby(<br/>    ["host_identity_verified"], <br/>    as_index=False<br/>).agg(<br/>    avg_price = ("price","mean"),<br/>    qty = ("price","count")<br/>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/f18689aa082cb454df487e8f292b8ee6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*jjwnfK6EkyPY41_PdvnVjw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="2439" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">列表按<code class="fe nl nm nn lw b">host_identity_verified</code>列分组，并计算每组的平均价格。“t”代表真，“f”代表假。主机经过验证的列表平均价格要高得多。</p><p id="6b34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最好也检查每组中的列表数量，以确保数据不是非常不平衡。</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><p id="0ac2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们用类似的方法检查主机响应时间。响应更快的主机可能平均价格更高，因为没有人喜欢等待太久。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="d583" class="ma mb it lw b gy mc md l me mf">listings.groupby(<br/>    ["host_response_time"], as_index=False<br/>).agg(<br/>    avg_price = ("price","mean"),<br/>    qty = ("price","count")<br/>).sort_values(<br/>    by="avg_price", ascending=False<br/>).reset_index(drop=True)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/3cfdbda9906c0e58baf6dfc54e7d07da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1086/format:webp/1*PmhXqDueeB70EjGRyjEkoQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="3c10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了前面的例子，使用<code class="fe nl nm nn lw b">sort_values</code>函数按平均价格对结果进行排序。这有助于我们更清楚地看到响应时间和价格之间的关系。</p><p id="6bd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如预期的那样，平均价格随着响应时间的增加而降低。</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h2 id="246f" class="ma mb it bd mp nr ns dn mt nt nu dp mx li nv nw mz lm nx ny nb lq nz oa nd ob bi translated">大小</h2><p id="dd50" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">一个地方的大小或容量是价格的决定因素。<code class="fe nl nm nn lw b">accommodates</code>栏显示了这个地方可以容纳多少人。</p><p id="a819" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们使用箱线图来比较不同<code class="fe nl nm nn lw b">accommodates</code>值的价格分布。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="d62f" class="ma mb it lw b gy mc md l me mf">sns.catplot(<br/>    data=listings, <br/>    x='accommodates', y='log_price', kind='box',<br/>    height=6, aspect=1.8, width=0.5<br/>)</span></pre><p id="0edc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将<code class="fe nl nm nn lw b">kind</code>参数设置为 box 的 Seaborn 的<code class="fe nl nm nn lw b">catplot</code>函数创建一个盒图。<code class="fe nl nm nn lw b">height</code>和<code class="fe nl nm nn lw b">aspect</code>参数调整绘图的大小。最后，<code class="fe nl nm nn lw b">width</code>参数改变图中方框的大小。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/5b6eff11c6dba7459262251b5c026208.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JRSywVAGWXJn4Mjg28OJyQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="f55a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们清楚地看到，一般来说，价格随着容纳价值的增加而增加。</p><ul class=""><li id="814c" class="oh oi it lb b lc ld lf lg li oj lm ok lq ol lu om on oo op bi translated">盒子的底线是第一个四分位数，所以 25%的值在这条线以下。</li><li id="5d1f" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu om on oo op bi translated">方框中间的线表示中间值。一半的数值在这条线以下。</li><li id="24bd" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu om on oo op bi translated">方框的顶行是第三个四分位数，这意味着 75%的值在这条线以下。</li></ul><p id="609f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一半的值在盒子的底部和顶部线之间，所以我们得到了值分布的概况。底部和顶部的点表示异常值。</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h2 id="4ce0" class="ma mb it bd mp nr ns dn mt nt nu dp mx li nv nw mz lm nx ny nb lq nz oa nd ob bi translated">有效性</h2><p id="8aab" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">有几个栏目与一个地方的可用性有关。例如，<code class="fe nl nm nn lw b">availability_30</code>列显示了未来 30 天的可用天数。</p><p id="710b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以看到未来 60、90 和 365 天的可用天数。</p><p id="b5ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们检查一下可用天数和价格之间是否存在相关性。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="f934" class="ma mb it lw b gy mc md l me mf">listings[[ <br/>    'availability_30', 'availability_60', <br/>    'availability_90', 'availability_365',<br/>    'log_price'<br/>]].corr()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/cbd0ea8679fc956d7e55670730f762a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f5DvhY7JL7WKx-WHJppCPw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="b6c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可用天数和价格之间似乎有一点正相关。我们还发现，未来 30 天、60 天和 90 天的可用天数之间存在高度正相关，这其实并不令人意外。</p><p id="a67f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有一个名为<code class="fe nl nm nn lw b">instant_bookable</code>的栏目可能会对价格产生影响。急需一个地方的人会寻找可以立即预订的地方。对他们来说，钱通常是第二关心的事情。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="9c35" class="ma mb it lw b gy mc md l me mf">listings.groupby(<br/>    ['instant_bookable'], as_index=False<br/>).agg(<br/>    avg_price = ("price","mean"),<br/>    qty = ("price","count")<br/>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/20267e92037fc71ce2b28b706468853f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*qezlPqNz-BlCSHoc89SfnA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h2 id="6b9f" class="ma mb it bd mp nr ns dn mt nt nu dp mx li nv nw mz lm nx ny nb lq nz oa nd ob bi translated">地方的类型</h2><p id="f0e8" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">数据集中有酒店房间、私人房间、共享房间和整个家庭。我们可以使用 group by 函数的箱线图来检查价格如何根据地点的类型而变化。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="6fb1" class="ma mb it lw b gy mc md l me mf">sns.catplot(<br/>    data=listings, <br/>    x='room_type', y='log_price', kind='box',<br/>    height=6, aspect=1.8, width=0.5<br/>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/5f8234013c134025b78421965c191d4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uR3fD5PCQ-lRHaYR3XTsDA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="b421" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一般来说，私人房间和共享房间更便宜。我们在私人房间类别中看到许多异常值。它们可能位于城市中非常受欢迎的地方。</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h2 id="9523" class="ma mb it bd mp nr ns dn mt nt nu dp mx li nv nw mz lm nx ny nb lq nz oa nd ob bi translated">舒适</h2><p id="2b19" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">我们通常在预订或租房时会考虑一个地方的便利设施。例如，一台像样的咖啡机可能会改变游戏规则。</p><p id="feaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据集中有一个名为<code class="fe nl nm nn lw b">amenities</code>的列，但它包含了这个地方所有可用的便利设施。为了检查某个功能或设施对价格的影响，我们需要从该列中提取它。</p><p id="5181" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">谢天谢地，使用 Python 和 Pandas，这是一个简单的操作。下面的代码片段使用列表理解来检查“咖啡机”是否存在于便利设施列中。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b656" class="ma mb it lw b gy mc md l me mf">listings.loc[:,"has_coffee_maker"] = ['coffee maker' in row.lower() for row in listings.amenities]</span></pre><p id="171e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在检查之前，每个值都被转换成小写，因为我们感兴趣的是“咖啡机”、“咖啡机”或咖啡机的任何其他大写和小写组合。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="4565" class="ma mb it lw b gy mc md l me mf">listings.has_coffee_maker.value_counts()</span><span id="eae3" class="ma mb it lw b gy mg md l me mf">False    8777<br/>True     8298<br/>Name: has_coffee_maker, dtype: int64</span></pre><p id="c8ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">几乎一半的地方都有咖啡机。让我们看看有和没有咖啡机的地方的平均价格。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3f5b" class="ma mb it lw b gy mc md l me mf">listings.groupby(<br/>    ["has_coffee_maker"]<br/>).agg(<br/>    avg_price = ("price", "mean")<br/>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/369176401e3cffaf53f47562cefa7ce3.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/format:webp/1*oNRIOF7tKeuF4cBlsqhbrw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h2 id="cbdd" class="ma mb it bd mp nr ns dn mt nt nu dp mx li nv nw mz lm nx ny nb lq nz oa nd ob bi translated">位置</h2><p id="c8f1" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">位置是一个地方非常重要的特征。在某些情况下，靠近某个地方是极其重要的，位置是人们花钱的目的。</p><p id="1f13" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“邻居”和“邻居组”栏让我们了解这个地方的位置。我们将根据这些值检查平均价格。</p><p id="0812" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想更进一步，有一个单独的邻域文件，其中包含每个邻域的地理坐标。这有助于进行彻底的基于位置的评估。例如，当有重要的足球比赛时，靠近诺坎普可以提高价格。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="1184" class="ma mb it lw b gy mc md l me mf">listings.groupby(<br/>    ["neighbourhood_group_cleansed"], as_index=False<br/>).agg(<br/>    avg_price = ("price", "mean"),<br/>    qty = ("price", "count")<br/>).sort_values(<br/>    by="avg_price", ascending=False<br/>).reset_index(drop=True)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/a71dd1f984676d6402c2814c08c6adc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*t6BBNKl8vzfaYYgJ3jz2iw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="1ce0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Les Corts 是最贵的邻里团体。让我们也来看看 Les Corts 内不同社区的平均价格是如何变化的。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="4aa0" class="ma mb it lw b gy mc md l me mf">listings[listings.neighbourhood_group_cleansed=="Les Corts"].groupby(<br/>    ["neighbourhood_cleansed"]<br/>).agg(<br/>    avg_price = ("price", "mean"),<br/>    qty = ("price", "count")<br/>).sort_values(<br/>    by="avg_price", ascending=False<br/>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/85123bfcec2654520bd2d3eaa640c563.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*Cgx0j_EyMjKBcbPS_8EjPw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="f9c1" class="mo mb it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated"><strong class="ak">结论</strong></h1><p id="893e" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">我们试图探索来自西班牙巴塞罗那的 Airbnb 数据集。我们的重点是了解一个列表的不同特征如何影响它的价格。</p><p id="9954" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，我们可以更深入，寻找更具体的特征和关系。然而，我们所做的展示了探索性数据分析过程中的典型操作。</p><p id="b2bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还做了一些数据清理，以便使数据更适合数据分析。</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><p id="5448" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="pa">别忘了</em> <a class="ae ky" href="https://sonery.medium.com/subscribe" rel="noopener"> <em class="pa">订阅</em> </a> <em class="pa">如果你想在我发表新文章时收到电子邮件。</em></p><p id="955d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="pa">你可以成为</em> <a class="ae ky" href="https://sonery.medium.com/membership" rel="noopener"> <em class="pa">媒介会员</em> </a> <em class="pa">解锁我的全部写作权限，外加其余媒介。如果您使用以下链接，我将收取您的一部分会员费，无需您支付额外费用。</em></p><div class="pb pc gp gr pd pe"><a href="https://sonery.medium.com/membership" rel="noopener follow" target="_blank"><div class="pf ab fo"><div class="pg ab ph cl cj pi"><h2 class="bd iu gy z fp pj fr fs pk fu fw is bi translated">通过我的推荐链接加入 Medium-Soner yl DRM</h2><div class="pl l"><h3 class="bd b gy z fp pj fr fs pk fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pm l"><p class="bd b dl z fp pj fr fs pk fu fw dk translated">sonery.medium.com</p></div></div><div class="pn l"><div class="po l pp pq pr pn ps ks pe"/></div></div></a></div></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><p id="0f72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>