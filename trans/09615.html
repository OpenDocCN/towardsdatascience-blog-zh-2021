<html>
<head>
<title>Exquisite hand and finger tracking in web browsers with MediaPipe’s machine learning models</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">借助MediaPipe的机器学习模型，在网络浏览器中实现精致的手和手指跟踪</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/exquisite-hand-and-finger-tracking-in-web-browsers-with-mediapipes-machine-learning-models-2c4c2beee5df?source=collection_archive---------13-----------------------#2021-09-07">https://towardsdatascience.com/exquisite-hand-and-finger-tracking-in-web-browsers-with-mediapipes-machine-learning-models-2c4c2beee5df?source=collection_archive---------13-----------------------#2021-09-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="93a5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解这个精通JavaScript风格的计算机视觉库，这里重点介绍它的手部跟踪工具。有了这个，你的网络应用程序可以检测和跟踪每只手的21个点，实时获得每个点的流体x，y，z坐标。好几个手！也可以看看他们的其他基于ML的计算机视觉工具。</h2></div><h1 id="39df" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">快速链接</h1><ul class=""><li id="ffd8" class="la lb it lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated"><a class="ae ls" href="#b33f" rel="noopener ugc nofollow">简介</a></li><li id="9a4a" class="la lb it lc b ld lt lf lu lh lv lj lw ll lx ln lo lp lq lr bi translated"><a class="ae ls" href="#47d2" rel="noopener ugc nofollow">动手测试</a></li><li id="d225" class="la lb it lc b ld lt lf lu lh lv lj lw ll lx ln lo lp lq lr bi translated"><a class="ae ls" href="#2a7b" rel="noopener ugc nofollow">在MediaPipe的CodePen示例中测试更多高级功能</a></li><li id="7429" class="la lb it lc b ld lt lf lu lh lv lj lw ll lx ln lo lp lq lr bi translated"><a class="ae ls" href="#19dc" rel="noopener ugc nofollow">手跟踪工具的性能</a></li><li id="8320" class="la lb it lc b ld lt lf lu lh lv lj lw ll lx ln lo lp lq lr bi translated"><a class="ae ls" href="#4369" rel="noopener ugc nofollow">media pipe的所有跟踪工具</a></li><li id="a338" class="la lb it lc b ld lt lf lu lh lv lj lw ll lx ln lo lp lq lr bi translated"><a class="ae ls" href="#61d6" rel="noopener ugc nofollow">想象潜在应用的范围</a></li></ul><h1 id="b33f" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">介绍</h1><p id="a42d" class="pw-post-body-paragraph ly lz it lc b ld le ju ma lf lg jx mb lh mc md me lj mf mg mh ll mi mj mk ln im bi translated">MediaPipe只使用设备的常规网络摄像头，为增强现实应用提供基于跨平台机器学习的解决方案。具体来说，它提供了各种(脸、手、身体等。)检测和跟踪算法，允许程序员生成令人惊叹的视觉效果。最棒的是，这些工具中的许多都受JavaScript支持，这意味着您可以为您的web应用程序和页面添加出色的功能。</p><p id="d65f" class="pw-post-body-paragraph ly lz it lc b ld ml ju ma lf mm jx mb lh mn md me lj mo mg mh ll mp mj mk ln im bi translated">在最近发布了在我的电脑和智能手机上运行良好的文档和示例之后，我在这里重点介绍MediaPipe的JavaScript手部跟踪库。该工具可以检测和跟踪视频馈送中的手，并为每只手返回21个节点的{x，y，z}坐标(相当于每根手指4个关节加上1个手掌)。</p><h1 id="47d2" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">动手测试</h1><p id="4909" class="pw-post-body-paragraph ly lz it lc b ld le ju ma lf lg jx mb lh mc md me lj mf mg mh ll mi mj mk ln im bi translated">通过简单地复制和粘贴MediaPipe提供的最少代码，我在30秒内就让它在我的网站上运行了。确保通过https提供服务，因为它需要访问网络摄像头。这是它在Firefox上运行的第一个证据:</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi mq"><img src="../Images/42faf3eb673aac2160328b20be80588f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tH3BXpoz9sCcyHxI1YwUAQ.png"/></div></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">首先在浏览器中测试MediaPipe(这里是Firefox，但它在Chrome中也能完美运行)。在<a class="ae ls" href="https://lucianoabriata.altervista.org/tests/mediapipe/hand-tracking-with-webcam-simplest.html" rel="noopener ugc nofollow" target="_blank">https://lucianoabriata . alter vista . org/tests/media pipe/hand-tracking-with-web cam-simplest . html</a>播放并查看代码。注意:要查看估计的手部模型，请向下滚动到画布，这可能需要几秒钟才能显示出来！作者Luciano Abriata截图。</p></figure><p id="aa31" class="pw-post-body-paragraph ly lz it lc b ld ml ju ma lf mm jx mb lh mn md me lj mo mg mh ll mp mj mk ln im bi translated">使用这个网页，我进一步测试了它能多好地检测各种姿势的手…如你所见，它能全部正确！即使是那些手部姿势本质上包含遮挡的姿势。</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi ng"><img src="../Images/66045a78791e40d39ea128d7adb082a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WhYiJkSaqJAMEloRIiWHTQ.png"/></div></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">测试不同的手部姿势，包括一些包含相当多遮挡的姿势。由作者Luciano Abriata的截图组成。</p></figure><p id="3de1" class="pw-post-body-paragraph ly lz it lc b ld ml ju ma lf mm jx mb lh mn md me lj mo mg mh ll mp mj mk ln im bi translated">您可以在此链接中自己运行此示例:<a class="ae ls" href="https://lucianoabriata.altervista.org/tests/mediapipe/hand-tracking-with-webcam-simplest.html" rel="noopener ugc nofollow" target="_blank">https://lucianoabriata . alter vista . org/tests/media pipe/hand-tracking-with-web cam-simplest . html</a></p><p id="a826" class="pw-post-body-paragraph ly lz it lc b ld ml ju ma lf mm jx mb lh mn md me lj mo mg mh ll mp mj mk ln im bi translated">注意:要查看估计的手部模型，请向下滚动到画布，这可能需要几秒钟才能显示出来！</p><p id="41aa" class="pw-post-body-paragraph ly lz it lc b ld ml ju ma lf mm jx mb lh mn md me lj mo mg mh ll mp mj mk ln im bi translated">这是代码。看看你需要写的有多少:</p><pre class="mr ms mt mu gt nh ni nj nk aw nl bi"><span id="4a46" class="nm kj it ni b gy nn no l np nq">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&lt;head&gt;<br/>  &lt;meta charset="utf-8"&gt;<br/>  &lt;script src="<a class="ae ls" href="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js</a>" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>  &lt;script src="<a class="ae ls" href="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js</a>" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>  &lt;script src="<a class="ae ls" href="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js</a>" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>  &lt;script src="<a class="ae ls" href="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js</a>" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>&lt;/head&gt;</span><span id="a7ca" class="nm kj it ni b gy nr no l np nq">&lt;body&gt;<br/>  &lt;div class="container"&gt;<br/>    &lt;video class="input_video"&gt;&lt;/video&gt;<br/>    &lt;canvas class="output_canvas" width="1280px" height="720px"&gt;&lt;/canvas&gt;<br/>  &lt;/div&gt;<br/>&lt;/body&gt;</span><span id="8a9a" class="nm kj it ni b gy nr no l np nq">&lt;script type="module"&gt;<br/>const videoElement = document.getElementsByClassName('input_video')[0];<br/>const canvasElement = document.getElementsByClassName('output_canvas')[0];<br/>const canvasCtx = canvasElement.getContext('2d');</span><span id="0138" class="nm kj it ni b gy nr no l np nq">function onResults(results) {<br/>  canvasCtx.save();<br/>  canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);<br/>  canvasCtx.drawImage(<br/>      results.image, 0, 0, canvasElement.width, canvasElement.height);<br/>  if (results.multiHandLandmarks) {<br/>    for (const landmarks of results.multiHandLandmarks) {<br/>      drawConnectors(canvasCtx, landmarks, HAND_CONNECTIONS,<br/>                     {color: '#00FF00', lineWidth: 5});<br/>      drawLandmarks(canvasCtx, landmarks, {color: '#FF0000', lineWidth: 2});<br/>    }<br/>  }<br/>  canvasCtx.restore();<br/>}</span><span id="4442" class="nm kj it ni b gy nr no l np nq">const hands = new Hands({locateFile: (file) =&gt; {<br/>  return `<a class="ae ls" href="https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`</a>;<br/>}});<br/>hands.setOptions({<br/>  maxNumHands: 2,<br/>  minDetectionConfidence: 0.5,<br/>  minTrackingConfidence: 0.5<br/>});<br/>hands.onResults(onResults);</span><span id="5691" class="nm kj it ni b gy nr no l np nq">const camera = new Camera(videoElement, {<br/>  onFrame: async () =&gt; {<br/>    await hands.send({image: videoElement});<br/>  },<br/>  width: 1280,<br/>  height: 720<br/>});<br/>camera.start();<br/>&lt;/script&gt;<br/>&lt;/html&gt;</span></pre><p id="45ee" class="pw-post-body-paragraph ly lz it lc b ld ml ju ma lf mm jx mb lh mn md me lj mo mg mh ll mp mj mk ln im bi translated">您还可以在MediaPipe的网站上看到该代码的核心以及一些基本信息:</p><div class="ns nt gp gr nu nv"><a href="https://google.github.io/mediapipe/solutions/hands#javascript-solution-api" rel="noopener  ugc nofollow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd iu gy z fp oa fr fs ob fu fw is bi translated">手</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">感知手的形状和动作的能力是改善跨领域用户体验的重要组成部分。</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">google.github.io</p></div></div><div class="oe l"><div class="of l og oh oi oe oj na nv"/></div></div></a></div><h1 id="2a7b" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">在MediaPipe的CodePen示例中测试更多高级功能</h1><p id="e4a4" class="pw-post-body-paragraph ly lz it lc b ld le ju ma lf lg jx mb lh mc md me lj mf mg mh ll mi mj mk ln im bi translated">MediaPipe刚刚在CodePen上发布了一个示例，展示了各种功能，例如:</p><ul class=""><li id="6d69" class="la lb it lc b ld ml lf mm lh ok lj ol ll om ln lo lp lq lr bi translated">更换网络摄像头和交换视频(在手机、平板电脑和笔记本电脑等各种设备中处理应用程序的关键)，</li><li id="94ce" class="la lb it lc b ld lt lf lu lh lv lj lw ll lx ln lo lp lq lr bi translated">跟踪2、3或4手牌(我试过4手牌，仍然很好用！)</li><li id="6b10" class="la lb it lc b ld lt lf lu lh lv lj lw ll lx ln lo lp lq lr bi translated">调整检测参数(尽管默认参数在我尝试的所有条件下都工作得很好)。</li><li id="8d8c" class="la lb it lc b ld lt lf lu lh lv lj lw ll lx ln lo lp lq lr bi translated">此外，CodePen示例提供了运行时的刷新率，单位为fps。</li></ul><p id="5447" class="pw-post-body-paragraph ly lz it lc b ld ml ju ma lf mm jx mb lh mn md me lj mo mg mh ll mp mj mk ln im bi translated">我把这个例子复制到我网站的一个干净的网页上。运行时看起来是这样的:</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi on"><img src="../Images/96fd01ba6a7a2bb9d298ea533213122c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rLm2VB6buLIxb48R0X5p9g.png"/></div></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">MediaPipe的笔，在<a class="ae ls" href="https://lucianoabriata.altervista.org/tests/mediapipe/hand-tracking-with-webcam.html" rel="noopener ugc nofollow" target="_blank">https://lucianabriata . alter vista . org/tests/media pipe/hand-tracking-with-web cam . html</a>清理过，在我的智能手机上运行。作者Luciano Abriata截图。</p></figure><p id="95c7" class="pw-post-body-paragraph ly lz it lc b ld ml ju ma lf mm jx mb lh mn md me lj mo mg mh ll mp mj mk ln im bi translated">原笔在https://codepen.io/mediapipe/pen/RwGWYJw的<a class="ae ls" href="https://codepen.io/mediapipe/pen/RwGWYJw" rel="noopener ugc nofollow" target="_blank"/>但是你可以在这里更容易地尝试:<a class="ae ls" href="https://lucianoabriata.altervista.org/tests/mediapipe/hand-tracking-with-webcam.html" rel="noopener ugc nofollow" target="_blank">https://lucianabriata . alter vista . org/tests/media pipe/hand-tracking-with-web cam . html</a></p><h1 id="19dc" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">手跟踪工具的性能</h1><p id="d9b5" class="pw-post-body-paragraph ly lz it lc b ld le ju ma lf lg jx mb lh mc md me lj mf mg mh ll mi mj mk ln im bi translated">当我在笔记本电脑上追踪两只手时，我得到了大约25 fps，在智能手机上大约20 fps。都不是很新(笔记本电脑是2017款东芝，带i7和8GB RAM，没有专门的GPU手机是2019年的谷歌Pixel 3)，两者都有很多程序和浏览器标签打开。因此，尽管有改进的地方，我还是要说这个库工作得很好。</p><p id="ca2f" class="pw-post-body-paragraph ly lz it lc b ld ml ju ma lf mm jx mb lh mn md me lj mo mg mh ll mp mj mk ln im bi translated">使用默认参数，该示例在各种光照条件下运行良好。实际上，我找不到它不能正确检测我的手的情况！</p><h1 id="4369" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">MediaPipe的所有跟踪工具</h1><p id="5d19" class="pw-post-body-paragraph ly lz it lc b ld le ju ma lf lg jx mb lh mc md me lj mf mg mh ll mi mj mk ln im bi translated">截至2021年9月7日，MediaPipe不仅提供手和手指跟踪，还提供人脸检测和人脸网格计算、虹膜检测、全身姿势检测、头发分割、一般对象检测和跟踪、特征匹配和自动视频裁剪。并非所有这些工具在JavaScript中都可用(至少到目前为止),但它们很可能会变得可用。要了解更多关于JavaScript可用的MediaPipe工具，请查看:</p><div class="ns nt gp gr nu nv"><a href="https://google.github.io/mediapipe/getting_started/javascript" rel="noopener  ugc nofollow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd iu gy z fp oa fr fs ob fu fw is bi translated">JavaScript中的媒体管道</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">MediaPipe目前提供以下解决方案:单击上面的解决方案链接以了解更多信息，包括API…</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">google.github.io</p></div></div></div></a></div><p id="824a" class="pw-post-body-paragraph ly lz it lc b ld ml ju ma lf mm jx mb lh mn md me lj mo mg mh ll mp mj mk ln im bi translated">要了解所有编程语言中所有这些工具的更多信息，请访问它们的主要网站:</p><div class="ns nt gp gr nu nv"><a href="https://github.com/google/mediapipe" rel="noopener  ugc nofollow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd iu gy z fp oa fr fs ob fu fw is bi translated">GitHub——Google/media pipe:用于直播和流媒体的跨平台、可定制的ML解决方案。</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">MediaPipe为直播和流媒体提供跨平台、可定制的ML解决方案。</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">github.com</p></div></div><div class="oe l"><div class="oo l og oh oi oe oj na nv"/></div></div></a></div><h1 id="61d6" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">想象潜在的应用范围</h1><p id="b8f0" class="pw-post-body-paragraph ly lz it lc b ld le ju ma lf lg jx mb lh mc md me lj mf mg mh ll mi mj mk ln im bi translated">在其网站上，MediaPipe预计将应用于艺术(参见一些惊人的例子:<a class="ae ls" href="https://developers.googleblog.com/2021/07/bringing-artworks-to-life-with-ar.html" rel="noopener ugc nofollow" target="_blank">https://developers . Google blog . com/2021/07/bring-artworks-to-life-with-ar . html</a>)、通信，特别是基于标志的通信(这里有一个项目正在进行:<a class="ae ls" href="https://developers.googleblog.com/2021/04/signall-sdk-sign-language-interface-using-mediapipe-now-available.html" rel="noopener ugc nofollow" target="_blank">https://developers . Google blog . com/2021/04/signal 1-SDK-sign-language-interface-using-media pipe-now-available . html</a>)、假体控制和<a class="ae ls" href="https://developers.googleblog.com/2021/05/control-your-mirru-prosthesis-with-mediapipe-hand-tracking.html" rel="noopener ugc nofollow" target="_blank">https://developers . Google blog . com/2021/05/control-your-mirru-prosthesis-with-media pipe-hand-tracking . html</a>。</p><p id="fd8e" class="pw-post-body-paragraph ly lz it lc b ld ml ju ma lf mm jx mb lh mn md me lj mo mg mh ll mp mj mk ln im bi translated">事实上，谷歌的meet已经使用了MediaPipe的一些工具来控制背景(<a class="ae ls" href="https://ai.googleblog.com/2020/10/background-features-in-google-meet.html" rel="noopener ugc nofollow" target="_blank">https://ai . Google blog . com/2020/10/background-features-in-Google-meet . html</a>)。他们还使用这项技术来跟踪全身姿势(<a class="ae ls" href="https://ai.googleblog.com/2020/08/on-device-real-time-body-pose-tracking.html" rel="noopener ugc nofollow" target="_blank">https://ai . Google blog . com/2020/08/on-device-real-time-body-pose-tracking . html</a>)，这项技术可以被健身房应用程序重新利用，谁知道是否可以对体操表演进行更客观的评估。</p><p id="623f" class="pw-post-body-paragraph ly lz it lc b ld ml ju ma lf mm jx mb lh mn md me lj mo mg mh ll mp mj mk ln im bi translated">我还可以在人机界面中推进增强现实的应用，人类用户可以用手抓住物体，在3D中探索它们，就像它们实际在手中一样。类似于Oculus Quest或MS的HoloLens等高端设备提供的功能，但可以在任何设备上运行。</p><p id="70c4" class="pw-post-body-paragraph ly lz it lc b ld ml ju ma lf mm jx mb lh mn md me lj mo mg mh ll mp mj mk ln im bi translated">作为一名科学家和业余音乐学习者，我不能忽视手跟踪工具在研究鼓手、吉他手等肢体运动和协调方面的潜力。尽管这项技术可能还不能满足正常的执行速度，但我认为它已经足够满足一些初步调查。我会玩这个，如果我发现一些有趣的东西，我会发一个新帖子让你知道。</p></div><div class="ab cl op oq hx or" role="separator"><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou"/></div><div class="im in io ip iq"><p id="2001" class="pw-post-body-paragraph ly lz it lc b ld ml ju ma lf mm jx mb lh mn md me lj mo mg mh ll mp mj mk ln im bi translated">喜欢这篇文章，想给我提示？【<a class="ae ls" href="https://www.paypal.me/LAbriata" rel="noopener ugc nofollow" target="_blank"><strong class="lc iu"/></a>】-谢谢！</p><p id="04b0" class="pw-post-body-paragraph ly lz it lc b ld ml ju ma lf mm jx mb lh mn md me lj mo mg mh ll mp mj mk ln im bi translated"><em class="ow">我是一个自然、科学、技术、编程和DIY爱好者。生物技术专家和化学家，在潮湿的实验室和计算机里。我写我广泛兴趣范围内的一切。查看我的</em> <a class="ae ls" href="https://lucianosphere.medium.com/lists" rel="noopener"> <em class="ow">列表</em> </a> <em class="ow">了解更多故事。</em> <a class="ae ls" href="https://lucianosphere.medium.com/membership" rel="noopener"> <em class="ow">成为媒介会员</em> </a> <em class="ow">访问我和其他作家的所有故事，</em> <a class="ae ls" href="https://lucianosphere.medium.com/subscribe" rel="noopener"> <em class="ow">订阅通过邮件获取我的新故事</em> </a> <em class="ow">(平台原创附属链接)。</em></p></div></div>    
</body>
</html>