<html>
<head>
<title>Pyvis: Visualize Interactive Network Graphs in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Pyvis:用Python可视化交互式网络图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/pyvis-visualize-interactive-network-graphs-in-python-77e059791f01?source=collection_archive---------2-----------------------#2021-06-12">https://towardsdatascience.com/pyvis-visualize-interactive-network-graphs-in-python-77e059791f01?source=collection_archive---------2-----------------------#2021-06-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1f1b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">只需要几行代码</h2></div><h1 id="1484" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">动机</h1><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="740a" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">给你一张显示一组人之间友谊的表格，你被要求把这个组分成两个一组。但是，通过查看表格很难做到这一点。</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="md lg l"/></div></figure><p id="f115" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果您可以使用如下的交互式网络图来可视化他们的联系，这不是很好吗？</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi me"><img src="../Images/eeb7393de3b3a61034456f7132e27212.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*4rSaugyj7_jf0uXozP0oxg.gif"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者GIF</p></figure><p id="3fdb" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这时候pyvis就派上用场了。</p><h1 id="33c2" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">皮维斯是什么？</h1><p id="86ed" class="pw-post-body-paragraph lh li it lj b lk mp ju lm ln mq jx lp lq mr ls lt lu ms lw lx ly mt ma mb mc im bi translated">Pyvis是一个Python库，允许你用几行代码创建交互式网络图。</p><p id="3cc2" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">要安装pyvis，请键入:</p><pre class="la lb lc ld gt mv mw mx my aw mz bi"><span id="867f" class="na kj it mw b gy nb nc l nd ne">pip install pyvis</span></pre><h1 id="73fe" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">添加节点</h1><p id="dca4" class="pw-post-body-paragraph lh li it lj b lk mp ju lm ln mq jx lp lq mr ls lt lu ms lw lx ly mt ma mb mc im bi translated">要向网络图添加节点，只需使用<code class="fe nf ng nh mw b">net.add_node(id, label)</code>。<code class="fe nf ng nh mw b">id</code>是每个节点独有的。<code class="fe nf ng nh mw b">label</code>用于显示图中节点的标签。</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="ni lg l"/></div></figure><p id="8e9f" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">运行<code class="fe nf ng nh mw b">net.show('nodes.html')</code>之后，一个名为nodes.html的文件应该会保存到您当前的目录中。你可以像下面这样和它互动。</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="nj lg l"/></div></figure><p id="b8b7" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">要查看Jupyter笔记本中的图表，只需将参数<code class="fe nf ng nh mw b">notebook=True</code>添加到<code class="fe nf ng nh mw b">Network</code>。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/fd7d85834cc995f25695f5bc11eab865.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*wnqp4X1FpVbQtC8A7YxK_w.png"/></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者图片</p></figure><h2 id="fda4" class="na kj it bd kk nl nm dn ko nn no dp ks lq np nq ku lu nr ns kw ly nt nu ky nv bi translated">添加节点列表</h2><p id="3b5a" class="pw-post-body-paragraph lh li it lj b lk mp ju lm ln mq jx lp lq mr ls lt lu ms lw lx ly mt ma mb mc im bi translated">如果您有许多节点，您可能希望添加一个节点列表。这可以用<code class="fe nf ng nh mw b">add_nodes</code>方法来完成。</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="ni lg l"/></div></figure><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="nj lg l"/></div></figure><p id="99b6" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">不错！让我们通过给节点添加颜色来让它们看起来更有趣一点。</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="ni lg l"/></div></figure><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="nj lg l"/></div></figure><p id="d657" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">单独拥有节点并不好玩。让我们弄清楚如何用边将这些节点连接在一起。</p><h1 id="f6e9" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">添加边缘</h1><p id="6c12" class="pw-post-body-paragraph lh li it lj b lk mp ju lm ln mq jx lp lq mr ls lt lu ms lw lx ly mt ma mb mc im bi translated">要给图表添加边，使用<code class="fe nf ng nh mw b">add_edge</code>方法。该方法获取边的源和边的目的地。</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="ni lg l"/></div></figure><p id="d84c" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">要一次添加多条边，使用<code class="fe nf ng nh mw b">add_edges</code>，它的参数是元组列表。</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="ni lg l"/></div></figure><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="nj lg l"/></div></figure><p id="5474" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">酷！但是，如果一些边的权重比其他边大(例如，奥利弗可能更喜欢亚历克斯而不是迈克尔)，该怎么办呢？</p><p id="4c81" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们可以通过向<code class="fe nf ng nh mw b">add_edge</code>添加参数<code class="fe nf ng nh mw b">value</code>或者向<code class="fe nf ng nh mw b">add_edges</code>的每个元组添加第三个值来指定每个边的权重。</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="ni lg l"/></div></figure><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="nj lg l"/></div></figure><p id="d00a" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在，当您选择特定节点时，连接到该节点的边将高亮显示。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/f307bf4f4d054f59b856c0942f55c696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/1*VoFus6cHi5hft4q3gtXr7A.gif"/></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者GIF</p></figure><h1 id="edb9" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">调整节点距离和弹簧长度</h1><p id="bf57" class="pw-post-body-paragraph lh li it lj b lk mp ju lm ln mq jx lp lq mr ls lt lu ms lw lx ly mt ma mb mc im bi translated">节点距离是节点之间的距离。弹簧长度是边的剩余长度。</p><p id="10da" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们可以使用<code class="fe nf ng nh mw b">repulsion</code>方法调整节点之间的距离和弹簧长度。让我们看看当我们改变参数<code class="fe nf ng nh mw b">node_distance</code>和参数<code class="fe nf ng nh mw b">spring_length</code>时，图是如何变化的。</p><p id="a071" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">默认值:</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="ni lg l"/></div></figure><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="nj lg l"/></div></figure><p id="95af" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">增加弹簧长度:</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="ni lg l"/></div></figure><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="nj lg l"/></div></figure><p id="69a9" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">增加节点距离:</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="ni lg l"/></div></figure><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="nj lg l"/></div></figure><h1 id="d22e" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">可视化脸书社交网络</h1><p id="f84d" class="pw-post-body-paragraph lh li it lj b lk mp ju lm ln mq jx lp lq mr ls lt lu ms lw lx ly mt ma mb mc im bi translated">让我们应用我们所学的知识来想象一个真实的社交网络。我们将使用<a class="ae mu" href="https://snap.stanford.edu/data/ego-Facebook.html" rel="noopener ugc nofollow" target="_blank">脸书数据，</a>由来自脸书的朋友列表组成。</p><p id="8e7e" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">脸书的数据是从调查参与者那里收集的，这些数据中的用户已经匿名。</p><p id="ef1a" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你可以从<a class="ae mu" href="https://snap.stanford.edu/data/facebook_combined.txt.gz" rel="noopener ugc nofollow" target="_blank">这里</a>下载数据。下载完数据后，解压保存为<code class="fe nf ng nh mw b">facebook_combined.txt</code>。</p><pre class="la lb lc ld gt mv mw nx bn ny nz bi"><span id="20d9" class="oa kj it mw b be ob oc l od ne">data = pd.read_csv("facebook_combined.txt", sep=" ", header=None)<br/>data.columns = ["person1", "person2"]</span></pre><p id="4ace" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">由于这是一个大型数据集，我们将只可视化数据中的1000个样本。</p><pre class="la lb lc ld gt mv mw nx bn ny nz bi"><span id="99db" class="oa kj it mw b be ob oc l od ne">sample = data.sample(1000, random_state=1)<br/>sample.head(10)</span></pre><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/64315210be42ea5cb085c35f1ded90bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*0JzVXKzfcAduwaUTcXIbFg.png"/></div></figure><p id="a4e9" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">可视化网络:</p><pre class="la lb lc ld gt mv mw nx bn ny nz bi"><span id="a46f" class="oa kj it mw b be ob oc l od ne">net = Network(<br/>    notebook=True,<br/>    cdn_resources="remote",<br/>    bgcolor="#222222",<br/>    font_color="white",<br/>    height="750px",<br/>    width="100%",<br/>)<br/>nodes = list(set([*sample.person1, *sample.person2]))<br/>edges = sample.values.tolist()<br/>net.add_nodes(nodes)<br/>net.add_edges(edges)</span></pre><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi of"><img src="../Images/87e8675a7bf09c69e1f1262f4ac12c88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-G1vTh6zWwEpCisPeDpqcQ.png"/></div></div></figure><h2 id="7ef6" class="na kj it bd kk nl nm dn ko nn no dp ks lq np nq ku lu nr ns kw ly nt nu ky nv bi translated">过滤并突出显示节点</h2><p id="dc27" class="pw-post-body-paragraph lh li it lj b lk mp ju lm ln mq jx lp lq mr ls lt lu ms lw lx ly mt ma mb mc im bi translated">通过设置<code class="fe nf ng nh mw b">select_menu=True</code>和<code class="fe nf ng nh mw b">filter_menu=True</code>，可以高亮显示一个节点及其相邻的边和节点:</p><pre class="la lb lc ld gt mv mw nx bn ny nz bi"><span id="01cb" class="oa kj it mw b be ob oc l od ne">net = Network(<br/>    notebook=True,<br/>    cdn_resources="remote",<br/>    bgcolor="#222222",<br/>    font_color="white",<br/>    height="750px",<br/>    width="100%",<br/>    select_menu=True,<br/>    filter_menu=True,<br/>)<br/>net.add_nodes(nodes)<br/>net.add_edges(edges)</span></pre><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi og"><img src="../Images/c5c8818ad0b2073e261303126e0b1705.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*fucEWiKhxUet3Xmb9XQ5uQ.gif"/></div></div></figure><h2 id="0475" class="na kj it bd kk nl nm dn ko nn no dp ks lq np nq ku lu nr ns kw ly nt nu ky nv bi translated">动态调整<code class="fe nf ng nh mw b">Network</code>设置</h2><p id="045a" class="pw-post-body-paragraph lh li it lj b lk mp ju lm ln mq jx lp lq mr ls lt lu ms lw lx ly mt ma mb mc im bi translated">我们还可以使用配置UI来更改网络设置。这允许我们快速试验不同的布局和图形物理。</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="ni lg l"/></div></figure><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oh"><img src="../Images/80a362783d3b05f35097ac6c30d1449f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ZZ3FXE8A5wqLiSKimhfm0Q.gif"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者GIF</p></figure><p id="1bd1" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">设置<code class="fe nf ng nh mw b">filter_=True</code>会显示三个控件(<code class="fe nf ng nh mw b">nodes</code>、<code class="fe nf ng nh mw b">edges</code>、<code class="fe nf ng nh mw b">physics</code>)。如果您想只显示<code class="fe nf ng nh mw b">physics</code>小部件，使用<code class="fe nf ng nh mw b">filter_=['physics']</code>:</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="ni lg l"/></div></figure><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oi"><img src="../Images/2984f111b21babf01923fd548131b7db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*rll1o7tI8VuoNSI2tSuBow.gif"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者GIF</p></figure><h1 id="9121" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">结论</h1><p id="f733" class="pw-post-body-paragraph lh li it lj b lk mp ju lm ln mq jx lp lq mr ls lt lu ms lw lx ly mt ma mb mc im bi translated">恭喜你！您刚刚学习了如何使用pyvis创建网络图。我希望这篇文章能激励你创建你的网络图。既然创建一个交互式网络图只需要几行代码，为什么不试试呢？</p><p id="d24f" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这个回购中，您可以随意使用这篇文章的代码:</p><div class="oj ok gp gr ol om"><a href="https://github.com/khuyentran1401/Data-science/blob/master/visualization/pyvis_examples/pyvis.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">khuyentran 1401/数据科学</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">有用的数据科学主题以及代码和文章的集合- khuyentran1401/Data-science</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">github.com</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa mj om"/></div></div></a></div></div><div class="ab cl pb pc hx pd" role="separator"><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg"/></div><div class="im in io ip iq"><p id="2dec" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的算法和数据科学工具。你可以在LinkedIn和Twitter上与我联系。</p><p id="01f6" class="pw-post-body-paragraph lh li it lj b lk ll ju lm ln lo jx lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果你想查看我写的文章的代码，请点击这里。在Medium上关注我，了解我的最新数据科学文章，例如:</p><div class="oj ok gp gr ol om"><a rel="noopener follow" target="_blank" href="/how-to-match-two-people-with-python-7583b51ff3f9"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">如何用Python找到最佳匹配</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">给定个人偏好，如何匹配使得总偏好最大化？</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">towardsdatascience.com</p></div></div><div class="ov l"><div class="pi l ox oy oz ov pa mj om"/></div></div></a></div><div class="oj ok gp gr ol om"><a rel="noopener follow" target="_blank" href="/how-to-sketch-your-data-science-ideas-with-excalidraw-a993d049f55c"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">如何用Excalidraw勾画您的数据科学想法</h2><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">towardsdatascience.com</p></div></div><div class="ov l"><div class="pj l ox oy oz ov pa mj om"/></div></div></a></div><div class="oj ok gp gr ol om"><a rel="noopener follow" target="_blank" href="/how-to-create-bindings-and-conditions-between-multiple-plots-using-altair-4e4fe907de37"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">如何使用Altair创建多个图之间的绑定和条件</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">使用绘图绑定从不同角度理解数据</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">towardsdatascience.com</p></div></div><div class="ov l"><div class="pk l ox oy oz ov pa mj om"/></div></div></a></div><div class="oj ok gp gr ol om"><a rel="noopener follow" target="_blank" href="/introduction-to-yellowbrick-a-python-library-to-explain-the-prediction-of-your-machine-learning-d63ecee10ecc"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">Yellowbrick简介:可视化机器学习预测的Python库…</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">您将f1分数提高到了98%！但这是否意味着你的模型表现更好呢？</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">towardsdatascience.com</p></div></div><div class="ov l"><div class="pl l ox oy oz ov pa mj om"/></div></div></a></div></div></div>    
</body>
</html>