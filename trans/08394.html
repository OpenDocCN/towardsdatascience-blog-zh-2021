<html>
<head>
<title>Machine Learning with only SQL — Using BigQuery to Identify the Target Audience for Shared Bike</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">仅使用SQL的机器学习—使用BigQuery识别共享自行车的目标受众</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/machine-learning-with-only-sql-using-bigquery-to-identify-the-target-audience-for-shared-bike-aa3a4041be3a?source=collection_archive---------19-----------------------#2021-08-02">https://towardsdatascience.com/machine-learning-with-only-sql-using-bigquery-to-identify-the-target-audience-for-shared-bike-aa3a4041be3a?source=collection_archive---------19-----------------------#2021-08-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="29ff" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">关于如何比较假设和提示以提高准确性的案例</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/55709cd26aaea6d23ae408c7115a3b7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1e1OHJjdjwU0Lrq1.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">佐伊·赖在<a class="ae ky" href="https://unsplash.com/photos/Uqkwu7swTW8" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="d0b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们不能用Python做机器学习的原因有很多:</p><ul class=""><li id="cbae" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">我们仍在学习新的编程语言</li><li id="0701" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">我们需要尽快交付结果，并且更喜欢分析数据所在的位置</li><li id="6a8a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">没有访问Python的权限</li></ul><p id="5253" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论你有哪种情况，我都将分享如何只用SQL进行机器学习，了解影响自行车共享旅行持续时间的关键特征，以及我对数据仓库发展的观察。</p><h1 id="0929" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">内容</h1><ul class=""><li id="5a9c" class="lv lw it lb b lc nb lf nc li nd lm ne lq nf lu ma mb mc md bi translated">用例:预测自行车共享出行的平均持续时间</li><li id="6070" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">挑战</li><li id="0266" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">第一步:假设关键特征</li><li id="954e" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">步骤2:定义指标</li><li id="2aa1" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">步骤3:构建并评估模型</li><li id="f717" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">第四步:预测结果</li><li id="36f2" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">第五步:如何提高你的模型的准确性？</li><li id="8072" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">思想</li></ul></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="35e9" class="mj mk it bd ml mm nn mo mp mq no ms mt jz np ka mv kc nq kd mx kf nr kg mz na bi translated">用例:预测自行车共享出行的平均持续时间</h1><p id="2378" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">自行车共享旅行的平均持续时间与共享自行车业务的收入直接相关，就像零售的平均订单价值一样。为了更深入地了解影响持续时间的关键因素，我使用了谷歌云平台上的公共数据集<a class="ae ky" href="http://console.cloud.google.com/bigquery?p=bigquery-public-data&amp;d=austin_bikeshare&amp;t=bikeshare_trips&amp;page=table" rel="noopener ugc nofollow" target="_blank"> Austin Bikeshare </a>。要分析，登录bigquery后指向big query-public-data:Austin _ bike share。</p><h1 id="3a91" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">挑战</h1><p id="9f35" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">当仔细查看表bikeshare_trips和bikeshare_stations时，有许多功能可供培训选择。一种方法是利用AutoML，但这不是我们在本文中的重点。本文将开发两个假设，并通过将它们训练成模型并用度量标准对它们进行评估来对它们进行比较。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/9c9d32c33cb2d7843e4092d714e81462.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oHEQqqHgOkp9xKOE.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">BigQuery Web界面(按作者)</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/9aee14e039a8487209b5745f0c1ea4ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uByhZloVrUUy3obR.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">BigQuery Web界面(按作者)</p></figure><h1 id="d16b" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">第一步:假设关键特征</h1><p id="d1af" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">这里有两个假设:</p><ul class=""><li id="497f" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">假设A:关键因素是起点站、起点站的位置、一周中的哪一天以及旅行开始的时间</li><li id="a18e" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">假设B:关键因素是始发站、用户类型和旅行开始的时间。</li></ul><h1 id="0c41" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">步骤2:定义指标</h1><p id="59b9" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">在训练模型之前，确定评估指标是至关重要的。毕竟如果要比较两个结果，就要把标准说清楚。机器学习是基于特征、参数和框架的排列和组合。我们需要的是选择一个精确度最高的。</p><p id="1e06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有许多度量标准。以下是回归中常用的一些指标:</p><ul class=""><li id="ba70" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">绝对平均误差</li><li id="c77b" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">均方根误差</li></ul><p id="ac97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你和我一样健忘，不用担心，卡恩学院很好地解释了平均绝对偏差和均方根误差</p><h1 id="77ec" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">步骤3:构建并评估模型</h1><p id="1b25" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">然后，我们使用选择的特性和期望的结果(在这个例子中是持续时间)来使用CREATE MODEL和ML构建一个回归模型。评估语法。</p><p id="fbc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们发现，在假设B中，平均绝对误差和均方根误差要小得多，这意味着假设B的特征与期望的结果正相关。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/d1f6f4b4137d7127ef2cf91e8f09a87e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EdbPrATmegzoIq3D.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">BigQuery Web界面(按作者)</p></figure><h1 id="92c9" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">第四步:预测结果</h1><p id="e6c8" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">最后，使用ML。预测得出2019年数据集中的平均时长将为51分钟的结果。</p><h1 id="e5fc" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">第五步:如何提高你的模型的准确性？</h1><p id="9644" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">如何提高准确性是数据科学家最感兴趣的问题之一。</p><p id="c3b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我曾经<a class="ae ky" rel="noopener" target="_blank" href="/introducing-2-tools-to-speed-up-your-power-bi-10x-e354cce355ae">分解一个过程中的步骤</a>并逐一解决。</p><p id="bfa3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是我的思考过程:</p><ul class=""><li id="7f63" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">数据</li><li id="1931" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">特征</li><li id="5428" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">算法</li><li id="2d61" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">参数</li></ul><p id="02e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们把重点放在基本面上，比如数据和特性。我们已经做了一个调整<strong class="lb iu">特性</strong>的小实验。如果更深入地研究<strong class="lb iu">数据</strong>，可以使用一些基本的观察统计数据，例如观察平均值、最大值和最小值，看看它们是否有意义。例如，表中的一些数据没有意义，持续时间超过30，000小时，或长度&lt; 0。</p><p id="f856" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们能剔除这些数据，预测结果的可信度会更令人满意。</p><h1 id="5038" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">思想</h1><h1 id="d6f2" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">BigQuery让用SQL实现ML成为可能</h1><p id="9006" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">不是每个人都可以使用Python，但是如果我们无论如何都需要交付呢？对于一些数据库管理员或数据分析师来说，熟悉Python可能不是“必备”技能。BigQuery内置ML让我们无需掌握一门新语言就能交付业务结果。</p><h1 id="5ec9" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">简化流程，让您可以专注于最重要的事情</h1><p id="e08a" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">在进入机器学习项目之前，我经常看到我的企业客户在各种先决条件之间跑来跑去。因此，由于数据移动、安全检查、访问控制和网络设置，交付结果更加耗时。现在，许多解决方案提供商集成了工具，使流程更加顺畅。比如做数据分析的时候，我们以前都是下载数据库里的数据，发送数据，导入IDE。现在，只有Mount函数可以完成这项工作，就像使用USB堆栈将数据加载到计算机中一样。</p><h1 id="7315" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">数据仓库正在发展，将BI和ML结合为一个数据分析平台</h1><p id="28e8" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">在过去，数据仓库只是一个并行数据处理和存储的工具。随着时间的推移，它还结合了商业智能和机器学习等新元素，用于更复杂的分析工作。此外，许多数据仓库提供实时分析，以满足大数据场景中的流需求。下面的架构展示了如何将Synapse(微软的数据仓库解决方案)用于物联网设备和web点击数据分析。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/f907fae30dc80e162cfc04f6121aa623.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*R_njq3plsO35omcb.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://docs.microsoft.com/en-us/azure/architecture/solution-ideas/articles/real-time-analytics" rel="noopener ugc nofollow" target="_blank">大数据架构实时分析</a></p></figure></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><p id="91ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">声明:这是在完成<a class="ae ky" href="https://google.qwiklabs.com/quests/146?catalog_rank=%7B%22rank%22%3A1%2C%22num_filters%22%3A0%2C%22has_search%22%3Atrue%7D&amp;search_id=11706616" rel="noopener ugc nofollow" target="_blank">用BigQuery ML </a>创建ML模型之后的一篇文章。如果你需要更多的细节，请随时参考<a class="ae ky" href="https://github.com/wanchunghuang/Create-ML-Models-with-BigQuery-ML-Challenge-Lab/blob/main/query" rel="noopener ugc nofollow" target="_blank">我的问题</a>。</p><h1 id="3768" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">保持联系</h1><ul class=""><li id="6651" class="lv lw it lb b lc nb lf nc li nd lm ne lq nf lu ma mb mc md bi translated">在<a class="ae ky" href="https://medium.com/@wanchunghuang" rel="noopener"> Medium </a>上关注我，了解更多类似的故事</li><li id="ab96" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">在<a class="ae ky" href="https://www.linkedin.com/in/wanchung-huang/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上连接</li><li id="43a8" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">你怎么想呢?留下评论</li></ul></div></div>    
</body>
</html>