<html>
<head>
<title>Try These 5 Tips To Optimize Your Python Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">尝试以下5个技巧来优化你的Python代码</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/try-these-5-tips-to-optimize-your-python-code-c7e0ccdf486a?source=collection_archive---------21-----------------------#2021-09-24">https://towardsdatascience.com/try-these-5-tips-to-optimize-your-python-code-c7e0ccdf486a?source=collection_archive---------21-----------------------#2021-09-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f622" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">编写更好的python代码的快速技巧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f6501c805e10a41843d6e8cfdab9a6a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VwsZyLljie10avMyw_fZUA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.pexels.com/@brunogobofoto?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">T5】布鲁诺布埃诺T7】发自</a><a class="ae ky" href="https://www.pexels.com/photo/person-writing-on-pink-sticky-notes-3854816/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">T9】佩克斯T11】</a></p></figure><p id="8214" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">Python确实是最通用、最流行的语言之一，几乎可以用于任何领域。但是python最突出的缺点之一就是速度。</p><p id="afb7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">由于python是一种解释型语言，执行指令所需的时间比编译型语言(如C、C++甚至Java)要长得多。因此，我们需要注意优化我们编写的Python代码，以使代码执行得更好更快。</p><p id="c5f9" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">虽然在较简单的程序中无法体验到性能的提高，但是在一些真实项目中，我们肯定可以注意到这种变化。</p><p id="2180" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在本文中，我将介绍5个这样的技巧，它们将使您的python代码更加优化，并将提高其性能。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="1bb3" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated"><strong class="ak"> 1。</strong> <strong class="ak">使用内置函数，而不是从头开始编码</strong></h1><p id="a285" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">Python以其惊人的库而闻名，这些库几乎可用于计算机科学的任何领域，你应该好好利用它们。Python中的一些内置函数如<code class="fe na nb nc nd b">map()</code>、<code class="fe na nb nc nd b">sum()</code>、<code class="fe na nb nc nd b">max()</code>等已经在C语言中实现了，所以在执行过程中不会对它们进行解释，节省了大量时间。</p><p id="4d82" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">例如，如果您想将一个字符串转换成一个列表，您可以使用<code class="fe na nb nc nd b">map()</code>函数，而不是手动将字符串的内容追加到一个列表中。代码更加优化，大小也更小。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="aff8" class="ni me it nd b gy nj nk l nl nm">string = ‘Australia’</span><span id="c4ac" class="ni me it nd b gy nn nk l nl nm">U = map(str, s)</span><span id="9daf" class="ni me it nd b gy nn nk l nl nm">print(list(string))</span><span id="ccff" class="ni me it nd b gy nn nk l nl nm">Output: [‘A’, ‘u’, ‘s’, ‘t’, ‘r’, ‘a’, ‘l’, ‘i’, ‘a’]</span></pre><p id="9a9f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">您可以在python上找到更多类似的很酷的功能，它们可以使您的任务变得简单和优化。</p><h1 id="43df" class="md me it bd mf mg no mi mj mk np mm mn jz nq ka mp kc nr kd mr kf ns kg mt mu bi translated"><strong class="ak"> 2。</strong> <strong class="ak">关注代码执行过程中的内存消耗</strong></h1><p id="c09d" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">减少代码中的内存占用肯定会使代码更加优化。我们需要记住不必要的内存消耗是否正在发生。</p><p id="3319" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">让我们观察下面的代码片段。这里我们使用+操作符添加一个较小的字符串来生成一个较大的字符串。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="706d" class="ni me it nd b gy nj nk l nl nm">myString = ‘United ‘</span><span id="ec59" class="ni me it nd b gy nn nk l nl nm">myString += ‘states ‘</span><span id="85ca" class="ni me it nd b gy nn nk l nl nm">myString += ‘of ‘</span><span id="5aa7" class="ni me it nd b gy nn nk l nl nm">myString +=’America’</span><span id="f97a" class="ni me it nd b gy nn nk l nl nm">print(myString)</span></pre><p id="ec7f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这个方法会在我们每次写myString的时候生成一个新的字符串，并且会导致不必要的内存消耗。我们可以在获取一个列表中的所有字符串后，使用函数join()来代替使用这个方法来连接字符串。这将是更快的，并为内存优化。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="ccbe" class="ni me it nd b gy nj nk l nl nm">string2 = [‘United ‘, ‘states ‘, ‘of ‘,’America’]</span><span id="50df" class="ni me it nd b gy nn nk l nl nm">string3 = ‘’.join(string2)</span><span id="bb7f" class="ni me it nd b gy nn nk l nl nm">print(string3)</span></pre><blockquote class="nt nu nv"><p id="7e77" class="la lb nw lc b ld le ju lf lg lh jx li nx lk ll lm ny lo lp lq nz ls lt lu lv im bi translated"><strong class="lc iu">输出</strong></p></blockquote><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="7c34" class="ni me it nd b gy nj nk l nl nm">United states of America</span></pre><p id="c72c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">此外，在打印字符串中的变量时使用<code class="fe na nb nc nd b">f-strings</code>代替传统的'+'操作符在这种情况下也非常有用。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><blockquote class="oa"><p id="c27a" class="ob oc it bd od oe of og oh oi oj lv dk translated"><em class="ok">想</em> <strong class="ak"> <em class="ok">敬请期待</em> </strong> <em class="ok">与更多相似</em> <strong class="ak"> <em class="ok">精彩</em> </strong> <em class="ok">文章上</em> <strong class="ak"> <em class="ok"> Python &amp;数据科学</em> </strong> <em class="ok"> —做会员考虑使用我的推荐链接:</em><a class="ae ky" href="https://pranjalai.medium.com/membership" rel="noopener"><em class="ok">https://pranjalai.medium.com/membership</em></a><em class="ok">。</em></p></blockquote></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="1d26" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated"><strong class="ak"> 3。</strong><strong class="ak">Python中的记忆化</strong></h1><p id="b559" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">那些知道动态编程概念的人非常熟悉记忆的概念。在这个过程中，通过在存储器中存储函数值来避免重复计算。尽管使用了更多的内存，但性能提升是显著的。Python附带了一个名为<code class="fe na nb nc nd b">functools</code>的库，它附带了一个LRU缓存装饰器，可以让你访问用来存储某些值的缓存。</p><p id="2465" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">让我们以斐波那契数列为例。对于普通的python代码，在本地机器上计算fib(35)的执行时间是4.19147315400005秒。</p><p id="797b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">而当我们添加以下代码行时:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="0a90" class="ni me it nd b gy nj nk l nl nm">from functools import lru_cache</span><span id="e719" class="ni me it nd b gy nn nk l nl nm">@lru_cache(maxsize=100)</span></pre><p id="37fe" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在代码块的开头，执行时间减少到3.440899990891921e-05。</p><p id="246e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在这里，本地机器的执行时间呈指数级减少。时间差只会随着fib(n)中n值的增加而增加。</p><h1 id="e744" class="md me it bd mf mg no mi mj mk np mm mn jz nq ka mp kc nr kd mr kf ns kg mt mu bi translated"><strong class="ak"> 4。</strong> <strong class="ak">使用C库/PyPy获得性能增益</strong></h1><p id="06f6" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">如果有一个C库可以做你的工作，那么最好使用它来节省解释代码的时间。最好的方法是使用python中的<code class="fe na nb nc nd b">ctype</code>库。还有一个叫做CFFI的库，它提供了一个优雅的c接口</p><p id="9676" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果你不想使用C语言，那么另一种方法是使用PyPy包，因为JIT(即时)编译器的存在极大地提高了你的Python代码。</p><h1 id="6480" class="md me it bd mf mg no mi mj mk np mm mn jz nq ka mp kc nr kd mr kf ns kg mt mu bi translated"><strong class="ak"> 5。</strong> <strong class="ak">正确使用数据结构和算法</strong></h1><p id="7e99" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">这更像是一个通用的技巧，但却是最重要的一个，因为它可以通过改进代码的时间复杂度，为您带来可观的性能提升。</p><p id="ff4b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">例如，在python中使用字典而不是列表总是一个好主意，以防没有任何重复的元素，并且要多次访问这些元素。</p><p id="c1a0" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这是因为字典使用散列表来存储元素，当在最坏的情况下搜索列表时，时间复杂度为O(1 ),而不是O(n)。因此，它将为您带来可观的性能增益。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b207" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated"><strong class="ak">结论</strong></h1><p id="0c38" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">本文到此为止。这是用python编码时能显著提高性能的五个技巧。但是您应该记住的另一件事是，性能的提高不应该影响代码的可读性，这也是现实项目中的一个重要方面。</p><p id="1a5f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">敬请期待！！了解更多与Python和数据科学相关的技巧。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><blockquote class="nt nu nv"><p id="d4cf" class="la lb nw lc b ld le ju lf lg lh jx li nx lk ll lm ny lo lp lq nz ls lt lu lv im bi translated"><em class="it">在你走之前……</em></p></blockquote><p id="6b43" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果你喜欢这篇文章，并希望<strong class="lc iu">继续关注更多关于<strong class="lc iu"> Python &amp;数据科学</strong>的<strong class="lc iu">精彩文章</strong>——请考虑使用我的推荐链接<a class="ae ky" href="https://pranjalai.medium.com/membership" rel="noopener">https://pranjalai.medium.com/membership</a>成为一名中级会员。</strong></p><p id="5e3d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">还有，可以随时订阅我的免费简讯:<a class="ae ky" href="https://pranjalai.medium.com/subscribe" rel="noopener"> <strong class="lc iu"> Pranjal的简讯</strong> </a>。</p></div></div>    
</body>
</html>