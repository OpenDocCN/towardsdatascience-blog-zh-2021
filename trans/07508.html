<html>
<head>
<title>Your Comprehensive Guide to the Basics of Time Series Modeling</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">时间序列建模基础的综合指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/your-comprehensive-guide-to-the-basics-of-time-series-modeling-f673398b5df3?source=collection_archive---------1-----------------------#2021-07-09">https://towardsdatascience.com/your-comprehensive-guide-to-the-basics-of-time-series-modeling-f673398b5df3?source=collection_archive---------1-----------------------#2021-07-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="eea8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">简单解释了时间序列建模的理论基础</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0b9803a05c85de7304556b8a0b950a4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bLOAR0BaaAvoMsafWZWKhQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://medium.com/@konstantin-rink" rel="noopener">作者</a>拍摄</p></figure><p id="d607" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated"><span class="l lw lx ly bm lz ma mb mc md di"> W </span>当我开始学习时间序列预测时，我首先阅读了许多博客帖子和文章。不幸的是，对于初学者来说，其中只有很少一部分是相当全面的。其他的缺乏完整性(即不包括残差分析)或者更糟，错误地应用了方法。幸运的是，我找到了一些非常好的书(见参考资料)，并有很好的陪练。</p><p id="3c7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我想出写这篇文章的想法有两个原因。首先，你不必像我一样经历眼泪和困惑的低谷。第二，像AR(I)MA这样的经典时间序列模型带有许多假设。因此，理解时间序列建模背后的思想及其基础是至关重要的。</p><p id="aee0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据需求和我的时间，我想写一个关于时间序列预测的系列。从最基础的到先进的时间序列模型，这些模型也用于像著名的<a class="ae ky" href="https://mofc.unic.ac.cy/history-of-competitions/" rel="noopener ugc nofollow" target="_blank"> Makridakis竞赛</a>这样的竞赛中。但首先从本文开始，介绍时间序列建模的基本理论概念和工具。</p><p id="bb5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在开始之前，我想感谢我的同事Justina Ivanauskaite 的精彩对话和对本文的贡献。</p><p id="9202" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文有助于您理解以下主题:</p><ul class=""><li id="4299" class="me mf it lb b lc ld lf lg li mg lm mh lq mi lu mj mk ml mm bi translated">理解<strong class="lb iu">术语</strong></li><li id="203c" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">时间序列<strong class="lb iu">组件</strong>和<strong class="lb iu">如何分解</strong>它们</li><li id="d1ca" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated"><strong class="lb iu">白噪声</strong>和<strong class="lb iu">随机游走</strong>车型</li><li id="793f" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated"><strong class="lb iu">平稳性的概念</strong></li><li id="f377" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated"><strong class="lb iu">自相关</strong>和<strong class="lb iu">偏自相关</strong>函数</li></ul><p id="baf0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">小心那些💡如果你赶时间，要点是什么？</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="a3d9" class="mz na it bd nb nc nd ne nf ng nh ni nj jz nk ka nl kc nm kd nn kf no kg np nq bi translated">术语</h1><p id="8700" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">我们必须区分<strong class="lb iu">随机过程</strong>(也称为<strong class="lb iu">时间序列</strong> <strong class="lb iu">过程或模型</strong>)和<strong class="lb iu">时间序列</strong>。</p><h2 id="f2f4" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated"><strong class="ak">随机过程</strong></h2><p id="a4f3" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">被描述为一组<strong class="lb iu">随机变量</strong> {Y𝑡,𝑡∈𝑇，它们在时间上<strong class="lb iu">排序，并在一组<strong class="lb iu">时间点</strong> 𝑇上定义，可以是<strong class="lb iu">连续</strong>或<strong class="lb iu">离散</strong>。𝑇指示<strong class="lb iu">处于</strong>的哪个过程，<strong class="lb iu">将</strong>或<strong class="lb iu">可以被</strong> <strong class="lb iu">观察到</strong>。<br/>一个例子可以是给定地区连续几天的新新冠肺炎感染人数。</strong></p><blockquote class="oi oj ok"><p id="d875" class="kz la ol lb b lc ld ju le lf lg jx lh om lj lk ll on ln lo lp oo lr ls lt lu im bi translated">在这篇文章中，我们集中在离散时间(DT)随机过程和时间序列。这意味着t可以取0，1，2，…等中的整数值。。因此，当我们在本文的后续课程中谈论时间序列过程、模型或时间序列时，我们总是假设𝑡是离散的。</p></blockquote><h2 id="618c" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated">时间序列</h2><p id="a985" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">一个【观察】<strong class="lb iu">时间序列</strong>是一个<strong class="lb iu">时间序列过程</strong>的<strong class="lb iu">实现</strong>。它可以用小写字母y=(y₁，y₂,…,yₜ).来表示</p><p id="2495" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据上面新冠肺炎的例子，时间序列可以是从2021年1月到2021年3月底德克萨斯每天观察到的新新冠肺炎感染人数。</p><h2 id="93db" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated">落后</h2><p id="6589" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">当您处理时间序列时，您会经常听到术语<strong class="lb iu">滞后</strong>。一个<strong class="lb iu">滞后</strong>可以看作是两点之间的<strong class="lb iu">时间差。在每日数据的情况下，yₜ是时间序列的当前值，而yₜ₋₁(或滞后1)是昨天的值，yₜ₋₂(或滞后2)是前天的观察值，以此类推。</strong></p><h2 id="8253" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated">💡关键要点</h2><ul class=""><li id="a2a8" class="me mf it lb b lc nr lf ns li op lm oq lq or lu mj mk ml mm bi translated">一个<strong class="lb iu">时间序列过程</strong>或时间序列模型是<strong class="lb iu">有序</strong>、<strong class="lb iu">随机</strong>(也叫随机)<strong class="lb iu">过程</strong>的<strong class="lb iu">数学描述。</strong></li><li id="63f9" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">一个<strong class="lb iu">时间序列</strong>就是这样一个描述过程的<strong class="lb iu">实现</strong>。</li><li id="2a74" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated"><strong class="lb iu">滞后</strong>是两个观测值或点之间的<strong class="lb iu">时间差</strong> <strong class="lb iu">。</strong></li></ul></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="5f2d" class="mz na it bd nb nc nd ne nf ng nh ni nj jz nk ka nl kc nm kd nn kf no kg np nq bi translated">时间序列组件</h1><p id="a425" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">时间序列充满了模式。因此，将我们的时间序列分成<strong class="lb iu">个不同的部分</strong>对于更深入地分析其底层结构是非常有用的:</p><ul class=""><li id="3e2e" class="me mf it lb b lc ld lf lg li mg lm mh lq mi lu mj mk ml mm bi translated"><strong class="lb iu">趋势周期Tₜ </strong>:是数据中的<strong class="lb iu">长期增加</strong>或<strong class="lb iu">减少</strong>，不一定总是线性的。在过去的60年里，世界范围内不断增长的电力消耗可以作为一个趋势的例子。</li><li id="0082" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated"><strong class="lb iu">季节性Sₜ </strong>:代表具有固定且已知周期(即一年中的时间等因素)的<strong class="lb iu">变化</strong> <strong class="lb iu">。一个例子是圣诞节期间零售额的增加和假期后的减少。</strong></li><li id="53cb" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated"><strong class="lb iu">余数Rₜ </strong>:是一个时间序列中<strong class="lb iu">包含噪声</strong>(即测量误差引起的)或<strong class="lb iu">随机运动</strong>的<strong class="lb iu">不规则部分</strong>。它有时也被称为<strong class="lb iu">残差</strong>。虽然<strong class="lb iu">我们无法直接观察到</strong>，<strong class="lb iu">它在某种程度上总是存在于</strong>时间序列中。</li></ul><blockquote class="oi oj ok"><p id="92d1" class="kz la ol lb b lc ld ju le lf lg jx lh om lj lk ll on ln lo lp oo lr ls lt lu im bi translated">根据不同的文献，您通常会发现<strong class="lb iu">三个</strong>或<strong class="lb iu">四个</strong>组件。一些作者将<strong class="lb iu">周期</strong>描述为一个独立的成分，其他作者也引入了成分<strong class="lb iu">水平</strong>，它描述了系列的平均值。在这篇文章中，我决定坚持使用Makridakis (1998)提到的三个不同的组件。</p></blockquote><h2 id="a472" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated">分解</h2><p id="e231" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">既然我们已经熟悉了时间序列的组成部分，我们可以考虑<strong class="lb iu">如何将</strong>分割或<strong class="lb iu">分解</strong>一个时间序列为其组成部分。基本上，有两种方法可以组成一个时间序列。</p><h2 id="5fd5" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated"><strong class="ak">添加剂分解</strong></h2><p id="b730" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">Yₜ = Sₜ + Tₜ + Rₜ</p><p id="1c57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">加法分解</strong>是最基本的一种。如果季节性波动的<strong class="lb iu">幅度</strong>(尖峰)<strong class="lb iu">，或<strong class="lb iu">围绕趋势周期</strong>、<strong class="lb iu">的变化</strong>不随时间序列的水平(均值)变化，则适用。因此，当<strong class="lb iu">季节变化随时间</strong>相对恒定时，这是有用的。</strong></p><h2 id="7f53" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated">乘法分解</h2><p id="6f99" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">Yₜ = Sₜ × Tₜ × Rₜ</p><p id="ab50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果有<strong class="lb iu">增加趋势</strong>和<strong class="lb iu">季节性活动幅度增加</strong>，那么<strong class="lb iu">乘法分解</strong>是有用的。换句话说，如果季节性的<strong class="lb iu">幅度</strong>取决于水平的<strong class="lb iu">，则使用<strong class="lb iu">乘</strong>分解</strong>。</p><p id="2412" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为像这样的定义总是很枯燥，所以是时候举一些例子了。为了更清楚地理解加法和乘法分解，以及何时使用哪一种分解，我们将仔细看看下面的图(图1)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/65e1701c5e4ecfa18d9aabe5451c8ae2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fAqz6pgCAa4Dh6YdNFV6iA@2x.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图一。加法和乘法合成的例子。</p></figure><p id="a111" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">左手边的图(a)显示了<em class="ol"> ausbeer </em>数据集的摘录。数据的<strong class="lb iu">季节性变化</strong>随着时间的推移保持<strong class="lb iu">相对恒定。换句话说:峰的高度相对恒定。这意味着<strong class="lb iu">加法分解</strong>对于这个时间序列是正确的。</strong></p><p id="23db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在右侧(b ),我们可以看到绘制的<em class="ol">航空乘客</em>数据集。与左边的图相比，我们可以看到<strong class="lb iu">季节变化</strong> <strong class="lb iu">并不随时间</strong>相对恒定。峰值不会保持不变，而是会改变高度(即1959年的峰值与1953年的峰值相比)。</p><blockquote class="oi oj ok"><p id="e631" class="kz la ol lb b lc ld ju le lf lg jx lh om lj lk ll on ln lo lp oo lr ls lt lu im bi translated">如果你想测试你关于检测加性和倍增季节性的知识，我可以强烈推荐<a class="ae ky" href="https://kourentzes.com/forecasting/2014/11/09/additive-and-multiplicative-seasonality/" rel="noopener ugc nofollow" target="_blank">交互工具</a>“加性和倍增季节性——你能正确识别它们吗？”尼古拉·考伦茨。</p></blockquote><p id="e408" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经有了所有需要的理论知识，我们可以用python运行一个时间序列分解。<a class="ae ky" href="https://www.statsmodels.org/stable/index.html" rel="noopener ugc nofollow" target="_blank"> statmodels包</a>提供了一个名为<a class="ae ky" href="https://www.statsmodels.org/stable/generated/statsmodels.tsa.seasonal.seasonal_decompose.html" rel="noopener ugc nofollow" target="_blank">季节性分解</a>的函数。对于下面的例子，我们将分解航空乘客数据集。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="b8a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该函数的两个最重要的参数是:</p><ul class=""><li id="1f86" class="me mf it lb b lc ld lf lg li mg lm mh lq mi lu mj mk ml mm bi translated"><strong class="lb iu"> x </strong>:要分解的时间序列</li><li id="9a54" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated"><strong class="lb iu">型号</strong>:分解的类型。</li></ul><p id="3af7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ol">加法</em>是模型参数的默认值。因此，如果您的时间序列需要乘法分解，您必须将参数值设置为“乘法”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/380dee6e03c6831364ff2e1512dc4273.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UNrY2JvR7PVnZI44MJPSTA@2x.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图二。使用statsmodels季节性分解函数的乘法分解示例。</p></figure><p id="03aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">绘制的输出(图2)按时间顺序显示了分解的时间序列、趋势、季节和剩余(Resid)部分。像这样的图有助于我们更详细地直观分析时间序列的组成部分。</p><h2 id="46da" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated">💡关键要点</h2><ul class=""><li id="e63b" class="me mf it lb b lc nr lf ns li op lm oq lq or lu mj mk ml mm bi translated">一个时间序列由<strong class="lb iu">三个组成部分</strong>:趋势周期、季节性<strong class="lb iu"/>和余数<strong class="lb iu"/>(也叫<strong class="lb iu">残差</strong>)。</li><li id="7f62" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">这些组件可以以<strong class="lb iu">加法</strong>或<strong class="lb iu">乘法</strong>的顺序粘在一起。</li><li id="52a8" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">数据的<strong class="lb iu">视觉分析</strong>可以告诉我们这些成分是处于<strong class="lb iu">加法</strong>还是<strong class="lb iu">乘法</strong> <strong class="lb iu">合成</strong>。</li><li id="1060" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">如果趋势周期 <strong class="lb iu">周围的<strong class="lb iu">变化随着平均值</strong>变化，或者我们看到季节性活动</strong>的<strong class="lb iu">振幅增加，我们可以考虑<strong class="lb iu">乘法分解</strong>。</strong></li><li id="c587" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">stats models<em class="ol">seasonal _ decompose</em>函数帮助我们将时间序列分解成它的组成部分。</li></ul></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="6f74" class="mz na it bd nb nc nd ne nf ng nh ni nj jz nk ka nl kc nm kd nn kf no kg np nq bi translated">白噪声和随机游走模型</h1><p id="abc1" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">既然我们已经熟悉了时间序列的术语、组成部分和分解，那么是时候讨论一些基本但也很重要的时间序列模型了。</p><h2 id="839d" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated">白噪声</h2><p id="082b" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">我们先来说说白噪声(图3)模型。白噪声模型可以定义如下:Yₜ = εₜ</p><p id="eca7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其中εₜ是白噪声，<strong class="lb iu">无法根据该系列的过去历史预测的部分</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/59d46557c94c4756cab543e187946f28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X5sVKpXi5IOobeRR1dxWmA@2x.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图3。白噪声例子。</p></figure><p id="0f4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">白噪声具有以下特征:</p><ul class=""><li id="a79a" class="me mf it lb b lc ld lf lg li mg lm mh lq mi lu mj mk ml mm bi translated">它有一个为0的<strong class="lb iu">均值【T21(μ)】<strong class="lb iu"/>和一个<strong class="lb iu">恒定方差</strong>(也写作WN(0，σ))。</strong></li><li id="c7c4" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">它<strong class="lb iu">不遵循任何模式</strong>，因此它<strong class="lb iu">完全随机</strong>(这就是它被称为“噪音”的原因)。</li><li id="9e81" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">它由<strong class="lb iu">独立同分布</strong>(也称i.i.d.) <strong class="lb iu">观测值</strong>组成。</li><li id="a288" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">每个观察值与系列中的其他观察值有一个零相关性。</li></ul><p id="a00a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果观测值遵循一个<strong class="lb iu">正态分布</strong>，我们说它是<strong class="lb iu">高斯白噪声</strong>。<strong class="lb iu">理想情况下</strong>，我们的<strong class="lb iu">预测误差是</strong>(高斯)<strong class="lb iu">白噪声</strong>。这意味着我们用时间序列模型“捕捉”或模拟了所有重要的影响，剩下的只是不可预测的白噪声(见剩余的Rₜ分量)。</p><h2 id="3fa4" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated">随机漫步(有漂移)</h2><p id="7c8c" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">除了白噪声，还有另一个非常基本但重要的模型，叫做随机游走(图4)。<br/>随机漫步模型可以定义为:Yₜ = Yₜ₋₁ + εₜ</p><p id="d414" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其中，Yₜ代表当前值，Yₜ₋₁代表一个滞后之前的y值(例如，昨天的值)，εₜ代表随机误差(也称为噪声)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/4e9b9422425ceb09d39d1b888cd49696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Osz3DZqXh3kGu4ZcdAp0sg@2x.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图4。随机漫步和随机漫步与漂移的例子。</p></figure><p id="5b5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着<strong class="lb iu">当前观测</strong>与<strong class="lb iu">前一个</strong>相距<strong class="lb iu">随机步长</strong>，所有步长<strong class="lb iu">独立</strong>和<strong class="lb iu">相同</strong> <strong class="lb iu">大小分布</strong>(“I . I . d .”)。<br/>因此，随机游走<strong class="lb iu">无法合理预测</strong>。对Yₜ的<strong class="lb iu">最佳预测是前值Yₜ₋₁ </strong>，也称为<strong class="lb iu">天真预测</strong>。随机漫步序列的一个典型现实例子是连续几天的股价。</p><p id="730f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果随机游走序列<strong class="lb iu">遵循上升或下降趋势</strong>，则它包含“漂移”。这就是为什么我们称之为<strong class="lb iu">随波逐流</strong>。可以定义为:<br/> Yₜ= α + Yₜ₋₁ + εₜ其中α代表常数或漂移。</p><p id="dab8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如已经提到的，我们希望我们的残差在后面的建模步骤中是白噪声。这就给我们带来了一个问题，我们如何检验我们的时间序列是否是白噪声？你猜怎么着，有一个统计测试！</p><h2 id="5da2" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated">白噪声测试:永盒测试</h2><p id="a81f" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">这被称为“容格测试”。Ljung-Box检验提出了一个无效假设和另一个假设:</p><ul class=""><li id="c49e" class="me mf it lb b lc ld lf lg li mg lm mh lq mi lu mj mk ml mm bi translated">H₀:这些数据都是<strong class="lb iu">独立</strong>分发的</li><li id="6ffe" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">Hₐ:的数据是<strong class="lb iu">非独立</strong>分发的</li></ul><p id="caad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在python中，包<a class="ae ky" href="https://www.statsmodels.org/stable/index.html" rel="noopener ugc nofollow" target="_blank"> statsmodels </a>提供了一个名为<a class="ae ky" href="https://www.statsmodels.org/stable/generated/statsmodels.stats.diagnostic.acorr_ljungbox.html" rel="noopener ugc nofollow" target="_blank"> acorr_ljungbox </a>的函数。除了数据之外，我们还必须提供一些滞后时间，这就引出了一个问题“什么是合适的滞后时间？”</p><p id="e694" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在他的博客文章中，Hyndman建议:</p><ul class=""><li id="2a5f" class="me mf it lb b lc ld lf lg li mg lm mh lq mi lu mj mk ml mm bi translated">对于非季节性时间序列，使用ℎ=𝑚𝑖𝑛(10,𝑇/5)</li><li id="a7c8" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">对于季节性时间序列，使用ℎ=𝑚𝑖𝑛(2𝑚,𝑇/5) <br/>其中t是滞后次数，𝑚是季节性周期。</li></ul><p id="dacf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于下面的例子，我们将使用720次观察的白噪声数据。关于Hyndman的建议，这意味着我们将滞后的长度设置为10。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="409e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一个数组元素([0])包含p值，而第二个数组元素([1])包含Ljung-Box检验统计量。如果p值<strong class="lb iu">低于0.05阈值</strong>，<strong class="lb iu">我们可以拒绝零假设</strong>，这意味着数据<strong class="lb iu">不是白噪声</strong>。</p><p id="0022" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的例子中，所有的p值都在0.05的阈值(T1)之上(T0)，这意味着我们不能拒绝零假设，并且(T2)我们的数据是白噪声(T3)。</p><h2 id="306b" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated">💡关键要点</h2><ul class=""><li id="617d" class="me mf it lb b lc nr lf ns li op lm oq lq or lu mj mk ml mm bi translated">一个<strong class="lb iu">白噪声时间序列</strong>的<strong class="lb iu">均值</strong> (μ) <strong class="lb iu">为0 </strong>，一个<strong class="lb iu">恒定方差</strong>，并且<strong class="lb iu">由于<strong class="lb iu">完全随机</strong>所以</strong>无法预测。</li><li id="15c6" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">我们拟合的模型<strong class="lb iu">的<strong class="lb iu">残差</strong>应该是白噪声</strong>。</li><li id="6ea6" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">随机游走的<strong class="lb iu">最佳预测</strong><strong class="lb iu"/>是来自<strong class="lb iu">上一步</strong> Yₜ₋₁ <strong class="lb iu">加上误差项</strong> εₜ.的值</li><li id="92ce" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">具有趋势的<strong class="lb iu">随机游走称为具有漂移</strong>的<strong class="lb iu">随机游走。</strong></li><li id="34e1" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">为了<strong class="lb iu">测试一个时间序列</strong>的白噪声，我们可以使用<strong class="lb iu">永盒测试</strong>。</li></ul></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="fc14" class="mz na it bd nb nc nd ne nf ng nh ni nj jz nk ka nl kc nm kd nn kf no kg np nq bi translated">平稳的概念</h1><p id="1444" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">平稳性是时间序列的一个<strong class="lb iu">基本特征</strong>，因为ARMA等(经典)时间序列模型假设它，如果基础数据不是平稳的，可能会导致不正确的结果。</p><p id="d095" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了全面起见，我们必须区分<strong class="lb iu">严格平稳性</strong>和<strong class="lb iu">弱平稳性</strong>。</p><h2 id="c0fa" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated">严格平稳性</h2><ul class=""><li id="068f" class="me mf it lb b lc nr lf ns li op lm oq lq or lu mj mk ml mm bi translated">我们说一个时间序列过程是<strong class="lb iu">严格平稳的</strong>，如果它的属性不受时间起点变化的影响<strong class="lb iu">。</strong></li><li id="005c" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">yₜ，yₜ₊₁，…，yₜ₊ₙ的观测值的联合分布与yₜ+h，yₜ₊ₕ₊₁，…，yₜ₊ₕ₊ₙ.的观测值的联合概率分布完全相同</li><li id="c04b" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">因此，它不受时间向前或向后移动的影响。</li></ul><p id="0bbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">然而</strong>，很多现实生活中的过程<strong class="lb iu">并不是严格静止的</strong>。但是，即使一个过程是严格平稳的，我们通常<strong class="lb iu">没有潜在时间序列过程的明确知识</strong>。由于严格平稳性被定义为过程联合分布的一个属性，因此<strong class="lb iu">不可能从观察到的时间序列</strong>中得到证明。</p><h2 id="84b4" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated"><strong class="ak">弱平稳性</strong></h2><p id="1d26" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">我们将时间序列过程定义为<strong class="lb iu">弱平稳</strong>如果</p><ul class=""><li id="04d5" class="me mf it lb b lc ld lf lg li mg lm mh lq mi lu mj mk ml mm bi translated">期望E(yₜ)随时间是恒定的</li><li id="6d12" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">方差Var(yₜ)随时间是常数</li><li id="bc39" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">协方差Cov(Yₜ,Yₜ₊ₕ)只取决于滞后h，Cov(Yₜ₁,Yₜ₂) = Cov(Yₜ₁₊ₕ,Yₜ₂₊ₕ)</li></ul><p id="d4a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">广义地说，如果均值<strong class="lb iu"/>(即趋势)没有系统变化<strong class="lb iu">，方差</strong>没有系统变化<strong class="lb iu">，并且严格周期性变化</strong>(即季节性)<strong class="lb iu">被移除</strong>，则称时间序列为弱平稳。</p><p id="635d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些定义或类型的平稳性在实践中是如何使用的？</p><blockquote class="oi oj ok"><p id="af49" class="kz la ol lb b lc ld ju le lf lg jx lh om lj lk ll on ln lo lp oo lr ls lt lu im bi translated">实际上，人们通常用平稳性这个术语来表示弱平稳性，因为严格平稳性只是一个理论概念。<strong class="lb iu"> </strong>为了在这里保持一致，当我们指弱平稳性时，我们将从现在起使用平稳性。</p></blockquote><p id="eeed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好了，现在我们知道了平稳性的概念意味着什么，让我们通过观察图5中的下图来测试我们的知识，并检查它们是否是平稳的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/28cad6b6413af3283b2aa50aec84d796.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XEk-r2a8MVpEBlZ_DtSk2w@2x.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图5。平稳和非平稳时间序列的例子。</p></figure><p id="4360" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">图(a)显示数据中有一个<strong class="lb iu">清晰的趋势</strong>(没有随时间变化的恒定平均值)，因此该序列不可能是稳定的。</p><p id="70a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对面<strong class="lb iu">上的图(b)没有显示数据中的趋势或任何季节性</strong>。这表明曲线(b)是稳定的。</p><p id="6cfc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">曲线(c)与曲线(a)一样，在数据中有一个<strong class="lb iu">清晰的趋势</strong>，因此也是非平稳的。</p><p id="0a29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，Hyndman和Athanasopoulos (2018)提出了一个令人困惑的案例。曲线(d)由于其强循环而显得不稳定。然而，这些周期是非周期性的。当猞猁的数量变得太大而无法提供足够的食物时，它们就会停止繁殖，数量就会下降。然后它们食物来源的再生允许种群再次增长等等。这意味着从长远来看，这些非周期性循环的时间是不可预测的。由于这种既没有趋势也没有季节性的周期性行为，该序列是平稳的。</p><p id="97ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我敢打赌，你一定很惊讶图(d)竟然是稳定的。有时很难直观地判断时间序列是否是平稳的。因此，我们需要一种更健壮的方法来检查平稳性。</p><p id="1920" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，有几个统计检验<strong class="lb iu"/>(也称为单位根检验)<strong class="lb iu">来检查一个数列是否平稳</strong>。</p><h2 id="6e71" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated">增强的迪基富勒(<strong class="ak"> ADF </strong>)试验</h2><p id="cd53" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">一个最广泛使用的是扩展的迪基富勒测试。</p><blockquote class="oi oj ok"><p id="a531" class="kz la ol lb b lc ld ju le lf lg jx lh om lj lk ll on ln lo lp oo lr ls lt lu im bi translated">还有很多单位根检验，比如科维亚特科夫斯基-菲利普斯-施密特-申(<strong class="lb iu"> KPSS </strong>)检验或者埃利奥特-罗森伯格-斯托克(<strong class="lb iu"> ADF-GLS </strong>)检验。</p></blockquote><p id="b512" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ADF提出了一个无效假设和另一个假设。</p><ul class=""><li id="aaa2" class="me mf it lb b lc ld lf lg li mg lm mh lq mi lu mj mk ml mm bi translated">H₀:系列有一个单位根，所以它是<strong class="lb iu">非固定</strong>。</li><li id="32ff" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">Hₐ:系列没有单位根，所以它是<strong class="lb iu">静止的</strong>。</li></ul><blockquote class="oi oj ok"><p id="c170" class="kz la ol lb b lc ld ju le lf lg jx lh om lj lk ll on ln lo lp oo lr ls lt lu im bi translated"><em class="it">广义地说，一个</em> <strong class="lb iu"> <em class="it">单位根</em> </strong> <em class="it">是一个随机游走的具有漂移的时间序列。它包含一个随机趋势，显示一个</em> <strong class="lb iu"> <em class="it">不可预测的模式</em> </strong> <em class="it">。如果你对更深入的解释感兴趣，请参见</em> Makridakis (1998)。</p></blockquote><p id="50dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，Statsmodels为我们提供了<a class="ae ky" href="https://www.statsmodels.org/dev/generated/statsmodels.tsa.stattools.adfuller.html" rel="noopener ugc nofollow" target="_blank"> adfuller函数</a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="2409" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这个例子，我使用了上面的<em class="ol"> airpassengers </em>数据集，它不是固定的。由于数据集清楚地显示了趋势，我将函数的<em class="ol">回归</em>参数设置为<em class="ol"> ct </em>(常数和趋势)。</p><p id="3557" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该函数返回几个值。<strong class="lb iu">第二个</strong>代表计算的p值。由于0.55高于0.05的阈值，我们不能拒绝H₀，所以数据不是平稳的。</p><p id="7297" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">既然我们知道我们的数据不是静态的，我们如何使它们稳定呢？</p><h2 id="248f" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated">如何使数据稳定</h2><p id="1d23" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">如前所述，许多(经典)模型<strong class="lb iu">假设时间序列是平稳的</strong>。那么如果我们知道我们的数据不是静态的呢？使数据稳定的两种非常常见的方法是:</p><ul class=""><li id="184d" class="me mf it lb b lc ld lf lg li mg lm mh lq mi lu mj mk ml mm bi translated"><strong class="lb iu">转换</strong>数据(如对数和/或使用平方根转换)</li><li id="4a74" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated"><strong class="lb iu">差异</strong></li></ul><p id="9165" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">转换</strong>数据是一种非常基本的方法，也用于回归等其他统计领域。一种方法是对数据应用<strong class="lb iu">对数</strong>或<strong class="lb iu">平方根</strong>变换，使其稳定。</p><p id="b5c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一种非常常见的方法是<strong class="lb iu">差分</strong>。它可以作为变换方法的替代或补充来应用。我们通常先取<strong class="lb iu">数列的</strong>差值。也就是所谓的<strong class="lb iu">一阶差分</strong>。我们正在创造一个新的时间序列的连续差异Yₜ -Yₜ₋₁.例如，原始时间序列是Y₁，Y₂，Y₃，…，Yₙ，然后我们应用一阶差分，这导致一个新的时间序列Y₂-Y₁，Y₃-Y₂，Y₄-Y₃，…，Yₙ - Y。</p><p id="95c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">如果这不起作用</strong>并且我们仍然有非平稳数据，那么我们也可以考虑<strong class="lb iu">二阶差分</strong>，通过<strong class="lb iu">取所产生的差分</strong>(不要与取二阶差分Yₜ -Yₜ₋₂).混淆</p><p id="bbbc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您的时间序列是数据帧格式，您可以使用pandas功能<em class="ol">。diff() </em>。该函数将您想要进行差异计算的周期数作为参数。</p><p id="653b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们想应用一阶差分，我们只需添加函数<em class="ol">。diff() </em>到我们的数据帧。在我们的例子中，我们应用了。对<em class="ol"> ausbeer </em>数据集的diff()方法(表1)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/e977fbdf37c06f944ac342a7666664b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*-vdYq3U30-DG7x5qbo9Hxw@2x.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">表1。差分ausbeer数据集。</p></figure><p id="c46b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们取系列(Y₂-Y₁)的一阶差分，我们将丢失一个(第一个)数据点。这意味着如果我们应用二阶差分，我们会丢失前两个数据点。</p><h2 id="1e82" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated">💡关键要点</h2><ul class=""><li id="a172" class="me mf it lb b lc nr lf ns li op lm oq lq or lu mj mk ml mm bi translated"><strong class="lb iu">(弱)</strong> <strong class="lb iu">平稳</strong>是许多(经典)时间序列模型假定的一个性质。</li><li id="8e61" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">如果一个时间序列的<strong class="lb iu">属性</strong>(均值，方差)<strong class="lb iu">在时间上</strong> <strong class="lb iu">恒定</strong>并且<strong class="lb iu">协方差仅依赖于滞后h </strong>，则该时间序列是弱平稳的。</li><li id="9162" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">为了测试我们的时间序列的平稳性，我们可以使用<strong class="lb iu">扩展的Dickey-Fuller测试</strong>。</li><li id="1566" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated"><strong class="lb iu">为了使</strong> <strong class="lb iu">时间序列平稳</strong>，我们可以使用<strong class="lb iu">差分</strong>或<strong class="lb iu">变换技术</strong>如对数变换。</li></ul></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="8160" class="mz na it bd nb nc nd ne nf ng nh ni nj jz nk ka nl kc nm kd nn kf no kg np nq bi translated"><strong class="ak">自相关</strong>和<strong class="ak">偏自相关</strong></h1><p id="12ae" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">了解了平稳性的含义以及如何使时间序列平稳后，我们现在将重点关注两个重要工具，以便在预测前进行更深入的时间序列分析。<strong class="lb iu">自相关函数</strong>和<strong class="lb iu">偏自相关函数【PACF】</strong>。<br/>两者都可以用来识别时间序列滞后值之间的解释关系。</p><h2 id="b757" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated"><strong class="ak">自相关函数</strong></h2><ul class=""><li id="f918" class="me mf it lb b lc nr lf ns li op lm oq lq or lu mj mk ml mm bi translated">计算自相关，即<strong class="lb iu">测量</strong>yₜ(变量的<strong class="lb iu">当前值)和yₜ₋ₙ<strong class="lb iu">变量</strong>的<strong class="lb iu">关系。例如，对于滞后-1自相关，ACF计算Yₜ和Yₜ₋ₙ.之间的相关性</strong></strong></li><li id="4915" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">还捕获<em class="ol">间接</em>影响(例如，yₜ与yₜ₋₂相关只是因为两者都与yₜ₋₁相关，而不是因为yₜ₋₂包含的任何有助于预测yₜ).的新信息</li></ul><p id="e97f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以使用statsmodels <a class="ae ky" href="https://www.statsmodels.org/dev/generated/statsmodels.graphics.tsaplots.plot_acf.html" rel="noopener ugc nofollow" target="_blank"> plot_acf </a>函数绘制自相关图:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="6fb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">滞后的数量没有固定的规则。然而，Montgomery (2015)建议，“<em class="ol">一个好的一般经验法则是，至少需要50次观察才能给出ACF的可靠估计，并且单个样本自相关应计算到滞后K，其中K约为T/4 </em>”。</p><p id="c439" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们检查一下ausbeer数据集，以便更好地理解如何解释自相关值(图6)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/93c47f8091d5d8c0defbc5427c3eabb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gQb3zVYjmnMO7yKxr-5ogQ@2x.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图6。带有趋势和季节性附加信息的ausbeer数据集的ACF图。</p></figure><p id="0a55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">左侧显示了<em class="ol"> ausbeer </em>数据集(a)的自相关图。在右边，你会发现绘制的<em class="ol">澳洲啤酒</em>时间序列(b)，它的趋势(c)，和季节性成分(d)。</p><p id="e654" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自相关图(a)向我们展示了观测值与其滞后值之间自相关的<strong class="lb iu">值。它还告诉我们，滞后n处的值是否具有统计显著性。如果自相关值<strong class="lb iu">位于蓝色区域</strong>内，则该值<strong class="lb iu">不重要</strong>。如果<strong class="lb iu">位于</strong>之外的</strong> <strong class="lb iu">，则<strong class="lb iu">有效</strong>。</strong></p><p id="656a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当一个时间序列有一个趋势时，小滞后的自相关往往是大而正的。你可以在滞后1和滞后2的图(a)中找到这一点。</p><blockquote class="oi oj ok"><p id="cdcd" class="kz la ol lb b lc ld ju le lf lg jx lh om lj lk ll on ln lo lp oo lr ls lt lu im bi translated">滞后0处的值将始终为1且非常重要，因为它是时间序列与其自身corr(Yₜ,Yₜ).的自相关可以看做一个参照点。</p></blockquote><p id="fd5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们的时间序列是季节性的时，季节性滞后的自相关值会比其他滞后大。这可以在滞后6、12、18等处看到..</p><h2 id="559b" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated"><strong class="ak">偏自相关函数(PACF) </strong></h2><p id="d9d8" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">如前所述，ACF <strong class="lb iu">也捕捉到了间接影响</strong>。一种只关注Yₜ与其滞后版本Yₜ₋ₙ之间直接关系的方法是<strong class="lb iu">偏自相关函数(PACF) </strong>。一般来说，两个变量之间的“部分”相关性是它们之间的相关性<strong class="lb iu">数量</strong>，这不能用它们与一组特定的其他变量的相互相关性来解释。</p><p id="0b15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里statsmodels还提供了一个<a class="ae ky" href="https://www.statsmodels.org/stable/generated/statsmodels.tsa.stattools.pacf.html" rel="noopener ugc nofollow" target="_blank">函数</a>来计算和绘制部分自相关值:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/3c26f09d77b25d05abee1cc605a74773.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h6UbRpTgCX5TmhJfa7R9rQ@2x.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图7。白噪声和随机游走数据的PACF图。</p></figure><p id="95fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">图7显示了用<em class="ol"> plot_pacf </em>函数创建的两个图。第一种(a)将pacf应用于白噪声数据。由于白噪声的值之间没有相关性，我们在这里也看不到任何相关性(所有值都在蓝色区域，因此不重要)。</p><p id="9fe5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二个图(b)将pacf应用于随机行走数据。如前所述，随机游走的最佳预测是一个滞后之前的值。</p><blockquote class="oi oj ok"><p id="dd13" class="kz la ol lb b lc ld ju le lf lg jx lh om lj lk ll on ln lo lp oo lr ls lt lu im bi translated">根据您的目的，在使用ACF和PCF图对时间序列进行分析之前，可能需要首先使时间序列平稳(即，如果您想要为ARMA模型选择p和q参数值)。</p></blockquote><p id="1f45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ACF和PACF在时间序列建模的后期不仅在<strong class="lb iu">选择正确的参数值</strong>中发挥重要作用，而且在<strong class="lb iu">分析我们预测模型的残差</strong>中也发挥重要作用。白噪声<strong class="lb iu">的ACF和PCAF不包含</strong> <strong class="lb iu">任何</strong> <strong class="lb iu">显著</strong> <strong class="lb iu">自相关</strong>或<strong class="lb iu">部分自相关</strong>。因此，我们可以稍后使用ACF和PACF来<strong class="lb iu">检查我们的残差</strong>是否有希望显示没有<strong class="lb iu">显著自相关和部分自相关</strong>。</p><h2 id="33a8" class="nw na it bd nb nx ny dn nf nz oa dp nj li ob oc nl lm od oe nn lq of og np oh bi translated">💡关键要点</h2><ul class=""><li id="5d50" class="me mf it lb b lc nr lf ns li op lm oq lq or lu mj mk ml mm bi translated">利用自相关函数(ACF)图，我们能够<strong class="lb iu">直观地分析</strong><strong class="lb iu">自相关</strong>及其<strong class="lb iu">显著性</strong>。</li><li id="e9e6" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">与ACF不同的是，<strong class="lb iu">部分自相关函数</strong> (PACF)仅测量Yₜ与其滞后版本Yₜ₋ₙ.之间的<strong class="lb iu">直接关系</strong></li><li id="68a2" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">两者都是为ARMA或ARIMA等模型选择正确参数的重要工具。</li></ul></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><p id="c2e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一篇解释某个领域理论基础的文章总是伴随着过于枯燥的风险。我希望本文中的大部分时间都是这样，而不是这样，现在您已经有了一个更好的时间序列建模的基础。如果您对更多信息和优秀文献感兴趣，请查看下面的参考资料。<br/>如开头所说，最初的想法是把它做成一个系列。如果有需求，我有时间，我保证下面的文章会更有动手能力！</p><h1 id="9cda" class="mz na it bd nb nc ox ne nf ng oy ni nj jz oz ka nl kc pa kd nn kf pb kg np nq bi translated">参考</h1><p id="5c31" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">Box，G. E. P .、Jenkins，G. M .、Reinsel，G. C .和Ljung，G. M. 2015。<strong class="lb iu"> <em class="ol">时间序列分析:预测与控制</em> </strong>。</p><p id="7a34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Chatfield，c .和邢海鹏。2019.<strong class="lb iu"> <em class="ol">《时间序列的分析——与R </em> </strong>一起介绍》，CRC出版社。</p><p id="cb5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">德特林，马塞尔。(未注明)。<a class="ae ky" href="https://stat.ethz.ch/education/semesters/ss2014/atsa/Scriptum_v140523.pdf" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> <em class="ol">应用时间序列分析—课程2020 </em> </strong> </a>。</p><p id="72df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Hyndman，R. J .和Athanasopoulos，G. 2018。<a class="ae ky" href="https://otexts.com/fpp3/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> <em class="ol">预测:原理与实践</em> </strong> </a>。</p><p id="1eed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Makridakis，S. G. 1998年。<strong class="lb iu"> <em class="ol">预测:方法与应用</em>，(第三版。)</strong>，纽约:威利。</p><p id="951c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2015年蒙哥马利特区。<strong class="lb iu"><em class="ol"/>【时间序列分析与预测导论】(第二版。)</strong>《概率与统计》中的威利级数，新泽西州霍博肯:威利。</p></div></div>    
</body>
</html>