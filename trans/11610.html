<html>
<head>
<title>3 Mistakes to Avoid When You Write Your Machine Learning Model</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写机器学习模型时要避免的3个错误</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/3-mistakes-to-avoid-when-you-write-your-machine-learning-model-543ab1a825b5?source=collection_archive---------36-----------------------#2021-11-16">https://towardsdatascience.com/3-mistakes-to-avoid-when-you-write-your-machine-learning-model-543ab1a825b5?source=collection_archive---------36-----------------------#2021-11-16</a></blockquote><div><div class="fc ik il im in io"/><div class="ip iq ir is it"><h2 id="bff4" class="iu iv iw bd b dl ix iy iz ja jb jc dk jd translated" aria-label="kicker paragraph">机器学习</h2><div class=""/><div class=""><h2 id="b3c9" class="pw-subtitle-paragraph kc jf iw bd b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dk translated">关于如何优化机器学习模型的开发过程以避免部署阶段出现意外的一些提示。</h2></div><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj ku"><img src="../Images/79a6dde51b31e90d6571f93570b1f594.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9zuG6g-K5IoHjvDF"/></div></div><p class="lg lh gk gi gj li lj bd b be z dk translated">由<a class="ae lk" href="https://unsplash.com/@astro_nic25?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">尼克·奥瓦尔</a>在<a class="ae lk" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="e3ed" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">最终我可以松一口气了:<strong class="ln jg">我的机器学习模型在训练和测试集上都工作得非常好</strong>。用于衡量我的模型性能的所有指标都达到了非常高的性能。我终于可以说我的工作差不多完成了:只需要部署就可以了。 </p><p id="bbf2" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated"><strong class="ln jg">相反，正是在部署阶段，所有的问题都出现了</strong>:根据新数据，模型似乎给出了不好的结果。最重要的是，它似乎有代码实现的问题。</p><p id="6a07" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">在本文中，我描述了在开发机器学习模型时必须避免的三个常见错误，以防止部署阶段出现意外。</p><h1 id="5d58" class="mi mj iw bd mk ml mm mn mo mp mq mr ms kl mt km mu ko mv kp mw kr mx ks my mz bi translated">1忘记保存缩放器</h1><p id="fbb3" class="pw-post-body-paragraph ll lm iw ln b lo na kg lq lr nb kj lt lu nc lw lx ly nd ma mb mc ne me mf mg ip bi translated">在机器学习模型开发的第一阶段，我们着手清理数据，并将其规范化和标准化。</p><p id="3de0" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">在预处理阶段，可能出现的错误之一是执行以下类型的操作:</p><pre class="kv kw kx ky gu nf ng nh ni aw nj bi"><span id="51ad" class="nk mj iw ng b gz nl nm l nn no">df['normalized_column'] = df['column']/df['column'].max()</span></pre><p id="e7c5" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">在前面的例子中，所有东西似乎都可以在原始数据集上工作。但是，当你去部署时，列规范化的问题就出现了。<strong class="ln jg">您应该使用哪个值作为比例因子？</strong></p><p id="2743" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">这个问题的一个可能的解决方案是将比例因子存储在某个地方:</p><pre class="kv kw kx ky gu nf ng nh ni aw nj bi"><span id="6eb8" class="nk mj iw ng b gz nl nm l nn no">file = open("column_scale_factor.txt", "w")<br/>scale_factor = <!-- -->df['column'].max()<br/>file.write(scale_factor)<br/>file.close()</span></pre><p id="49ad" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">前面的解决方案非常简单。或者，可以使用更强大的缩放器，如Scikit-learn预处理包提供的缩放器:</p><pre class="kv kw kx ky gu nf ng nh ni aw nj bi"><span id="c5f4" class="nk mj iw ng b gz nl nm l nn no">form <a class="ae lk" href="https://scikit-learn.org/stable/modules/classes.html#module-sklearn.preprocessing" rel="noopener ugc nofollow" target="_blank">sklearn.preprocessing</a> import <!-- -->MaxAbsScaler</span><span id="14d2" class="nk mj iw ng b gz np nm l nn no">scaler = <strong class="ng jg">MaxAbsScaler</strong>()<br/>feature = np.array(df[column]).reshape(-1,1)<br/>scaler.fit(feature)</span></pre><p id="1714" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated"><strong class="ln jg">安装好定标器后，不要忘记保存它！您将在部署阶段使用它！</strong></p><p id="e029" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">我们可以通过利用<code class="fe nq nr ns ng b">joblib</code> Python库来保存缩放器:</p><pre class="kv kw kx ky gu nf ng nh ni aw nj bi"><span id="6aa8" class="nk mj iw ng b gz nl nm l nn no">import joblib</span><span id="b432" class="nk mj iw ng b gz np nm l nn no">joblib.dump(scaler, 'scaler_' + column + '.pkl')</span></pre><figure class="kv kw kx ky gu kz"><div class="bz fq l di"><div class="nt nu l"/></div><p class="lg lh gk gi gj li lj bd b be z dk translated">听起来不错的Gif由Giphy上的Leroy Patterson制作</p></figure><h1 id="2f41" class="mi mj iw bd mk ml mm mn mo mp mq mr ms kl mt km mu ko mv kp mw kr mx ks my mz bi translated">2无限制地增加您的笔记本数量</h1><p id="9c80" class="pw-post-body-paragraph ll lm iw ln b lo na kg lq lr nb kj lt lu nc lw lx ly nd ma mb mc ne me mf mg ip bi translated">在寻找表示数据的最佳模型时，我们可能会在获得最佳模型之前测试不同的算法和不同的场景。</p><p id="68f5" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">在这种情况下，<em class="mh">一个可能的错误是在我们测试新算法</em>时创建一个新笔记本。<strong class="ln jg">随着时间的推移，您的文件系统中可能会出现塞满文件的文件夹。</strong>因此，存在无法准确跟踪模型开发过程中采取的步骤的风险。</p><p id="90a4" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated"><strong class="ln jg">那么如何解决问题呢？</strong></p><p id="9748" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">仅仅对代码进行评论是不够的，我们必须将<strong class="ln jg">对话名称</strong>输入到各种笔记本中。一个可能的解决方案是在笔记本的标题前加上一个<strong class="ln jg">渐进数字</strong>，该数字精确地指示在哪个点执行给定的步骤。</p><p id="7285" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">这里有一个可能的例子:</p><pre class="kv kw kx ky gu nf ng nh ni aw nj bi"><span id="3708" class="nk mj iw ng b gz nl nm l nn no">01_01_preprocessing_standard_scaler.ipynb<br/>01_02_preprocessing_max_abs_scaler.ipynb</span><span id="e6b5" class="nk mj iw ng b gz np nm l nn no">02_01_knn.ipynb<br/>02_02_decisiontree.ipynb<br/>..</span></pre><p id="427b" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">在前面的示例中，我们使用了以下命名格式:</p><pre class="kv kw kx ky gu nf ng nh ni aw nj bi"><span id="6f40" class="nk mj iw ng b gz nl nm l nn no">stepnumber_alternative_name.ipynb</span></pre><p id="838c" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">因此，第一个数字表示管道中的步骤号，而第二个数字(下划线后)表示可能的替代方案。</p><p id="75f8" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">当替代方案被接受时，我们可以将文件重命名为:</p><pre class="kv kw kx ky gu nf ng nh ni aw nj bi"><span id="f782" class="nk mj iw ng b gz nl nm l nn no">02_02_decisiontree_accepted.ipynb</span></pre><p id="de47" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">这样，我们在寻找测试中实际使用的模型时就变得容易了。</p><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj nv"><img src="../Images/a809671005a018ba63121bffbfc49e5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QraWRZRbCwabEAC5"/></div></div><p class="lg lh gk gi gj li lj bd b be z dk translated">乔纳森·沃尔夫在<a class="ae lk" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="d1b1" class="mi mj iw bd mk ml mm mn mo mp mq mr ms kl mt km mu ko mv kp mw kr mx ks my mz bi translated">3使用不同的库版本</h1><p id="e4f9" class="pw-post-body-paragraph ll lm iw ln b lo na kg lq lr nb kj lt lu nc lw lx ly nd ma mb mc ne me mf mg ip bi translated">我们可能遇到的最后一个错误是<strong class="ln jg">在训练/测试和部署阶段</strong>使用不同版本的各种被利用的库。</p><p id="26da" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">使用不同版本的风险是会有<strong class="ln jg">意想不到的行为，这可能会导致错误的预测</strong>。</p><p id="0df9" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">这个问题的一个可能的解决方案是<strong class="ln jg">创建一个虚拟环境</strong>并安装所有必要的库，同时指定要使用的版本，然后在培训/测试阶段和部署阶段使用这个虚拟环境。</p><p id="6e6b" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">在我的<a class="ae lk" rel="noopener" target="_blank" href="/have-you-ever-thought-about-using-python-virtualenv-fc419d8b0785">上一篇名为<em class="mh">的文章</em></a>中，你有没有想过使用Python virtualenv？我描述了如何建立一个虚拟环境。</p><figure class="kv kw kx ky gu kz gi gj paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gi gj nw"><img src="../Images/06b2fa1e27520d33d42c5b1508db1587.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yOLISFNtmHIJZDXN"/></div></div><p class="lg lh gk gi gj li lj bd b be z dk translated">照片由<a class="ae lk" href="https://unsplash.com/@uniqueton?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">安东</a>在<a class="ae lk" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="ff37" class="mi mj iw bd mk ml mm mn mo mp mq mr ms kl mt km mu ko mv kp mw kr mx ks my mz bi translated">摘要</h1><p id="d268" class="pw-post-body-paragraph ll lm iw ln b lo na kg lq lr nb kj lt lu nc lw lx ly nd ma mb mc ne me mf mg ip bi translated">在这篇短文中，我描述了在机器学习项目的建模阶段要避免的三个错误:</p><ul class=""><li id="d5c6" class="nx ny iw ln b lo lp lr ls lu nz ly oa mc ob mg oc od oe of bi translated">忘记保存缩放器</li><li id="b22c" class="nx ny iw ln b lo og lr oh lu oi ly oj mc ok mg oc od oe of bi translated">没有任何标准地增加您的笔记本</li><li id="59e1" class="nx ny iw ln b lo og lr oh lu oi ly oj mc ok mg oc od oe of bi translated">在培训/测试和部署阶段使用不同的库版本</li></ul><p id="cb9c" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">如果你避免了这三个错误，你的工作肯定会进展得更快</p><p id="ee2d" class="pw-post-body-paragraph ll lm iw ln b lo lp kg lq lr ls kj lt lu lv lw lx ly lz ma mb mc md me mf mg ip bi translated">如果你已经走了这么远来阅读，对我来说今天已经很多了。谢谢！你可以在<a class="ae lk" href="https://alod83.medium.com/which-topics-would-you-like-to-read-c68314dc6813" rel="noopener">这篇文章</a>中读到更多关于我的信息。</p><h1 id="6736" class="mi mj iw bd mk ml mm mn mo mp mq mr ms kl mt km mu ko mv kp mw kr mx ks my mz bi translated">你愿意支持我的研究吗？</h1><p id="69e4" class="pw-post-body-paragraph ll lm iw ln b lo na kg lq lr nb kj lt lu nc lw lx ly nd ma mb mc ne me mf mg ip bi translated">你可以每月订阅几美元，解锁无限的文章——<a class="ae lk" href="https://alod83.medium.com/membership" rel="noopener">点击这里</a>。</p><h1 id="47d6" class="mi mj iw bd mk ml mm mn mo mp mq mr ms kl mt km mu ko mv kp mw kr mx ks my mz bi translated">相关文章</h1><div class="ol om gq gs on oo"><a href="https://pub.towardsai.net/3-different-approaches-for-train-test-splitting-of-a-pandas-dataframe-d5e544a5316" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fp"><div class="oq ab or cl cj os"><h2 class="bd jg gz z fq ot fs ft ou fv fx jf bi translated">熊猫数据帧训练/测试分割的3种不同方法</h2><div class="ov l"><h3 class="bd b gz z fq ot fs ft ou fv fx dk translated">关于如何通过scikit-learn、pandas或NumPy内建工具将数据集分成训练集和测试集的简短教程…</h3></div><div class="ow l"><p class="bd b dl z fq ot fs ft ou fv fx dk translated">pub.towardsai.net</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc le oo"/></div></div></a></div><div class="ol om gq gs on oo"><a rel="noopener follow" target="_blank" href="/have-you-ever-thought-about-using-python-virtualenv-fc419d8b0785"><div class="op ab fp"><div class="oq ab or cl cj os"><h2 class="bd jg gz z fq ot fs ft ou fv fx jf bi translated">有没有想过用Python virtualenv？</h2><div class="ov l"><h3 class="bd b gz z fq ot fs ft ou fv fx dk translated">在终端和Jupyter笔记本上安装和使用Python virtualenv的实用指南。</h3></div><div class="ow l"><p class="bd b dl z fq ot fs ft ou fv fx dk translated">towardsdatascience.com</p></div></div><div class="ox l"><div class="pd l oz pa pb ox pc le oo"/></div></div></a></div><div class="ol om gq gs on oo"><a rel="noopener follow" target="_blank" href="/three-tricks-on-python-functions-that-you-should-know-e6badb26aac2"><div class="op ab fp"><div class="oq ab or cl cj os"><h2 class="bd jg gz z fq ot fs ft ou fv fx jf bi translated">你应该知道的关于Python函数的三个技巧</h2><div class="ov l"><h3 class="bd b gz z fq ot fs ft ou fv fx dk translated">快速概述一些可以提高你编程技能的技巧:嵌套函数、可变参数和</h3></div><div class="ow l"><p class="bd b dl z fq ot fs ft ou fv fx dk translated">towardsdatascience.com</p></div></div><div class="ox l"><div class="pe l oz pa pb ox pc le oo"/></div></div></a></div></div></div>    
</body>
</html>