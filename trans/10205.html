<html>
<head>
<title>Covid-19 Vaccine Appointment Allocation using Linear Programming</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于线性规划的新冠肺炎疫苗预约分配</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/covid-19-vaccine-appointment-allocation-using-linear-programming-a5e20119090?source=collection_archive---------33-----------------------#2021-09-27">https://towardsdatascience.com/covid-19-vaccine-appointment-allocation-using-linear-programming-a5e20119090?source=collection_archive---------33-----------------------#2021-09-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b5d0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">分享我在马来西亚国家新冠肺炎免疫计划(PICK)中的数据科学经验</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1c8aa290f4430cf5f433dc9ea02c9c53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3pnbcpQ7U2Ss1RXDktxw8A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.pexels.com/photo/covid-19-vaccine-5863391/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的Nataliya Vaitkevich 拍摄</p></figure><p id="cfac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">国家新冠肺炎免疫接种计划</strong>，通常被称为<strong class="lb iu"> PICK </strong>，是马来西亚政府目前正在实施的一项全国疫苗接种运动，旨在通过成功实现居住在马来西亚的公民和非公民的群体免疫，遏制新冠肺炎病毒的传播，并在马来西亚结束新冠肺炎疫情。<a class="ae ky" href="https://en.wikipedia.org/wiki/COVID-19_vaccination_in_Malaysia#cite_note-1" rel="noopener ugc nofollow" target="_blank">【1】</a></p><p id="b8d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为马来西亚卫生部动员计划的一部分，我被分配到<a class="ae ky" href="https://protecthealth.com.my/bm" rel="noopener ugc nofollow" target="_blank">protect Health Corporation Sdn Bhd</a>(<em class="lv">protect Health</em>)协助过去3个月的PICK计划。ProtectHealth是一个由卫生部指定的法人实体，旨在将私人医生转变为新冠肺炎疫苗接种计划中的疫苗接种员。</p><p id="3505" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在ProtectHealth下，我加入了处理私人全科医生(GP)和私人医院的团队。我们的任务是促进他们与州卫生部和我的Sejahtera团队之间的疫苗接种计划。在本文中，我将以全科医生为例，因为仅私人全科医生就贡献了总疫苗接种量的<a class="ae ky" href="https://www.thestar.com.my/news/nation/2021/08/22/gps-involvement-in-vaccination-exercise-is-based-on-current-needs-says-citf" rel="noopener ugc nofollow" target="_blank"> 5% </a>。</p><p id="f9e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每周，我们将与相关方沟通，根据GP预先商定的剂量模型分配<em class="lv">疫苗预约</em>。</p><blockquote class="lw lx ly"><p id="7216" class="kz la lv lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">疫苗接种者预约分配是指在未来某个日期给予GP的新<strong class="lb iu">doe one</strong>预约的数量，对于GP，我们的目标是每周一次。MySejahtera团队将根据分配情况推送已注册的受种者。</p></blockquote><p id="0a18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，GP A同意每周300剂的模型(第一剂和第二剂)，我们将需要用下周的新号码填充空白的第一剂疫苗接种槽。请参考下图以获得更好的说明:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/985a312b21c27c99bd1f52282c44d1a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*robqp1KgZESjLUkOcjlIqA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">过程的图解。作者图片</p></figure><h1 id="a875" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated"><strong class="ak">产生疫苗预约的困难。</strong></h1><p id="5df5" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">当你只需要为一个全科医生或一个小区域分配预约时，这听起来很容易，但当你处理全国所有的全科医生时，事情就会变得混乱，每周大约有<strong class="lb iu">1000-2000人</strong>，<strong class="lb iu">，而时间是你唯一没有的东西。</strong></p><p id="7773" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们面临的情况如下:</p><ul class=""><li id="3622" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">推出辉瑞疫苗，该疫苗需要将特定州或地区的受种者四舍五入到最接近的6位。</li><li id="c724" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">由于各种原因，如EMCO或物流问题，在某个地区突然停止提供疫苗注射</li><li id="d603" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">新给药方案的分配</li><li id="7d3a" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">GPs的各种运行时间/天数</li><li id="7e4a" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">以及更多需要临时决定的情况😢。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/34133598c4f2725cba032ba33e263187.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2NVjUbLuQl34EAazGBAxmw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">问题的说明——每周要安排多少次约会(第一剂)。作者图片</p></figure><p id="c954" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些情况的后果，我们决定<strong class="lb iu">我们需要一个健壮的系统，能够:</strong></p><ul class=""><li id="7090" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">一键重新生成疫苗接种预约，即快速</li><li id="a7a2" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">能够为州和地区添加新的排除或包含规则</li><li id="15be" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">能够添加新的剂量方案</li><li id="f28f" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">根据现有的第二次剂量预约优化我们的分配，以优化全科医生的能力</li><li id="5870" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">能够四舍五入到最接近的六位，以防止疫苗接种者的浪费</li><li id="d7ec" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">不要过量给全科医生增加负担</li></ul><h1 id="74fa" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated"><strong class="ak">线性规划来拯救</strong></h1><p id="81d2" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">线性规划或LP，一种数学建模技术，其中线性函数在受到各种约束时被最大化或最小化。<a class="ae ky" href="https://www.britannica.com/science/linear-programming-mathematics" rel="noopener ugc nofollow" target="_blank">【2】</a></p><p id="7dc9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下面的例子中，我们有一个变量X和Y，其中X + Y必须小于5，只有X必须小于或等于2。X和Y可以是什么？线性规划将从可行域中找出最大(最优)点(2，3)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/36c8e9d5e28efafce28a949912be685d.png" data-original-src="https://miro.medium.com/v2/resize:fit:794/format:webp/1*W8lRtpjG-6Kwz50QtTfCSA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">最佳点的简单说明，作者提供的图像</p></figure><p id="89d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">在接种者预约分配中应用LP:</strong></p><p id="c16c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用上述概念，我们将总剂量方案的约束公式化为:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="4c92" class="nv me it nr b gy nw nx l ny nz"><strong class="nr iu">Mon + Tue + Wed + Thurs + Fri + Sat + Sun &lt; Total Dose</strong></span></pre><p id="de72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们想在一周的某一天停止，我们可以根据状态动态添加规则:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="0ceb" class="nv me it nr b gy nw nx l ny nz">If state == "Johor", then let Fri == 0</span></pre><p id="78a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们想把总剂量减少到6</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="3a82" class="nv me it nr b gy nw nx l ny nz">If drug == "Pfizer" then round_down(Daily dose of M/Tu/W/Th/F/Sa/Su)</span></pre><p id="9fe1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">LP模型为我们的疫苗预约生成提供了灵活性，因为我们能够使用该模型根据多个州和机构的请求添加多个条件。我们使用的python包是PuLP，更多关于PuLP的信息，可以访问<a class="ae ky" href="https://github.com/coin-or/pulp" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><h2 id="e4d0" class="nv me it bd mf oa ob dn mj oc od dp mn li oe of mp lm og oh mr lq oi oj mt ok bi translated">应用LP的结果:</h2><p id="4cdc" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在我们的分配模型中应用LP之后，我们可以在每周不到5分钟的时间内重新生成我们的每周约会。任何特别的变化都可以立即在我们的主数据库中进行。这些变化将反映在重新生成的每周约会中，因为我们已经自动化了整个数据ETL(提取、转换、加载)过程。</p><p id="def5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，值得一提的是，<strong class="lb iu"> LP并没有解决我们所有的问题</strong>，我们仍然需要手动添加一些特殊情况或非常非常特别的情况，但它解决了我们在生成每周疫苗预约分配中几乎95%的问题。</p><h1 id="dfa1" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">最终想法:</h1><p id="bb55" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">将书中的内容应用到现实生活中的问题需要你调整参数并有一点点创造力，但是通过对基本概念的深刻理解，你可以将理论应用到实践中。有些人可能会说LP可能不是问题的最佳解决方案，但它确实解决了我们在疫情期间的痛苦。</p><p id="f47d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，在我看来，LP是数据科学从业者必须学习的重要技术，尤其是当您需要优化生产力和避免设施浪费时。</p><p id="3aa9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你对LP感兴趣，可以看下面另一篇文章:</p><div class="ol om gp gr on oo"><a href="https://medium.datadriveninvestor.com/an-introduction-to-modern-portfolio-theory-mpt-in-portfolio-optimization-d19cd8b16b34" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">投资组合优化中的现代投资组合理论(MPT)导论</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">在每一个股票投资决策中，作为一个理性的投资者，关注的总是股票的回报</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">medium.datadriveninvestor.com</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc ks oo"/></div></div></a></div><p id="502e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想成为中等会员，可以考虑通过这个<a class="ae ky" href="https://manfyegoh.medium.com/membership" rel="noopener">链接</a>支持我</p><h1 id="f9a7" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">致谢:</h1><p id="99a2" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">感谢博士的团队成员。和你们一起工作是我的荣幸。感谢你们在整个疫苗接种项目中几乎每天都在工作。</p><p id="d580" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我的硕士学习期间，我选修了一门叫做商业智能和决策分析的课程，老师是<a class="ae ky" href="https://scholar.google.com.my/citations?user=SpTykxIAAAAJ&amp;hl=en" rel="noopener ugc nofollow" target="_blank">的黄·李沛博士</a>。我很感激他耐心地教我这个技巧。这是一种奇妙的技术！</p></div></div>    
</body>
</html>