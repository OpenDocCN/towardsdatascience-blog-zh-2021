<html>
<head>
<title>Creating Scalable Machine Learning Systems for Analyzing Real-Time Data in Python — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python创建用于分析实时数据的可扩展机器学习系统—第1部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/creating-scalable-machine-learning-systems-for-analyzing-real-time-data-in-python-part-1-c303fbf79424?source=collection_archive---------4-----------------------#2021-12-05">https://towardsdatascience.com/creating-scalable-machine-learning-systems-for-analyzing-real-time-data-in-python-part-1-c303fbf79424?source=collection_archive---------4-----------------------#2021-12-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1e88" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">本系列展示了如何实时输入数据、分析数据并将响应发送回感兴趣的受众。</h2></div><p id="99ee" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最近，人们对用于分析实时数据并将结果实时发送给感兴趣的群体的可扩展机器学习(ML)系统产生了浓厚的兴趣。越来越多的企业热衷于为其业务部署实时预测或分析，这不仅是为了与众不同，也是为了在当今竞争激烈的<em class="lb"/><em class="lb"/>和快节奏的市场中提高整体绩效、客户体验和保留率。</p><p id="42bf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从股票交易到使用天气数据预测航班延误，动物和人类的实时行为分析，或者构建客户支持聊天机器人，有不同的实时问题和不同的解决方法-数据分类和聚类，实时训练ML模型和反馈循环以在发生时进行完善，实时决策树，以及许多这样的不断发展的算法。</p><p id="c91a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">几年前，跟踪这些算法、验证、实施、测试、改进和循环使用是一个非常困难的问题。但是，因为像<a class="ae lc" href="https://tenserflow.org/" rel="noopener ugc nofollow" target="_blank"> TensorFlow </a>、<a class="ae lc" href="https://pytorch.org/" rel="noopener ugc nofollow" target="_blank"> PyTorch </a>、<a class="ae lc" href="https://numpy.org/" rel="noopener ugc nofollow" target="_blank"> NumPy </a>、<a class="ae lc" href="https://scikit-learn.org/" rel="noopener ugc nofollow" target="_blank"> Scikit </a>这样的机器学习和科学计算工具的兴起，这些任务都变得‘琐碎’了。此外，所有这些工具都支持Python或基于Python，因此Python是解决这些问题的最合适的选择。</p><p id="8f97" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然分析部分由这些工具负责，但添加实时通信和实现接近零的延迟也有其自身的挑战——排队、有时限的保证交付和确认、离线交付等。幸运的是，我们有另一个python库来拯救我们，<a class="ae lc" href="https://pypi.org/project/mesibo/" rel="noopener ugc nofollow" target="_blank">mes ibo</a>——它使解决方案变得完整，完全用Python编写。</p><p id="b563" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将学习如何用Python开发可扩展的机器学习系统来分析实时数据，这将带来无限的可能性；处理实时股票市场或地理传感器只是一些随机的例子。如果您是Python开发人员，您会发现这篇文章是一个很好的起点。</p><p id="7566" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了分析任何数据，我们首先需要访问数据。因此，在第一部分中，我们将描述如何向Python应用程序添加实时通信，如何实时输入源数据并发送输出。然后，我们将在第二部分描述将整个实时平台下载到您的服务器，与您的数据库进行交互，以及添加Tensorflow和其他工具。</p><h1 id="a5a1" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">实时与传统数据处理</h1><p id="e18e" class="pw-post-body-paragraph kf kg iq kh b ki lv jr kk kl lw ju kn ko lx kq kr ks ly ku kv kw lz ky kz la ij bi translated">在我们使用<a class="ae lc" href="https://pypi.org/project/mesibo/" rel="noopener ugc nofollow" target="_blank"> mesibo </a>实时库之前，有必要快速了解一下实时和传统数据处理之间的区别。传统的和当今最主要的数据处理模型基于请求-响应模型，通常称为REST，被超过90%的应用程序使用。尽管REST对于静态或缓慢变化的数据非常优秀，但它不适合实时数据。实时数据处理应用程序保持实时连接，以零延迟方式发送和接收数据。如果您使用过传统的基于REST的API，您可能会发现实时API略有不同，如下所述。</p><h1 id="bee3" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">使用mesibo实时Python库</h1><p id="d5da" class="pw-post-body-paragraph kf kg iq kh b ki lv jr kk kl lw ju kn ko lx kq kr ks ly ku kv kw lz ky kz la ij bi translated">让我们从在Python应用程序中添加实时通信开始。首先，您需要使用<code class="fe ma mb mc md b">pip</code>命令从Python包索引中下载<a class="ae lc" href="https://pypi.org/project/mesibo/" rel="noopener ugc nofollow" target="_blank"> mesibo </a>库。或者，您也可以从<a class="ae lc" href="https://github.com/mesibo/python/" rel="noopener ugc nofollow" target="_blank"> mesibo Python库</a>下载库源代码。Mesibo python库支持所有Linux发行版、Mac OS，甚至Raspberry Pi，因此您可以在几乎所有开发人员友好的平台上下载它。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="4885" class="mm le iq md b gy mn mo l mp mq">pip3 install mesibo</span></pre><p id="f128" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦安装了mesibo，就可以将mesibo导入到Python脚本中，如下所示</p><figure class="me mf mg mh gt mr"><div class="bz fp l di"><div class="ms mt l"/></div><p class="mu mv gj gh gi mw mx bd b be z dk translated">将mesibo导入Python脚本</p></figure><p id="e233" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">mesibo有一套定义非常好的API。它有各种发送实时数据的函数和一个回调接口，一旦接收到实时传入数据就调用该接口。下面的脚本是一个简单的mesibo回调示例，当接收到一个实时消息(<code class="fe ma mb mc md b">Mesibo_OnMessage</code>)或者当一个实时消息被发送、传递、读取等时，就会调用这个示例。(<code class="fe ma mb mc md b">Mesibo_OnMessageStatus</code>)。还有更多回调函数，但为了简单起见，这里省略了。</p><figure class="me mf mg mh gt mr"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="6d0a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，mesibo不知道您的侦听器类，因此您应该首先向mesibo注册它，以便它可以在需要时调用您的侦听器类函数。您可以将它作为初始化的一部分，如下所示(细节将在后面解释)。</p><figure class="me mf mg mh gt mr"><div class="bz fp l di"><div class="ms mt l"/></div><p class="mu mv gj gh gi mw mx bd b be z dk translated">梅西博初始化</p></figure><p id="605c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码不言自明。</p><ol class=""><li id="cfe4" class="my mz iq kh b ki kj kl km ko na ks nb kw nc la nd ne nf ng bi translated">它创建了一个mesibo API的实例。</li><li id="1b56" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated">通过调用函数<code class="fe ma mb mc md b"><em class="lb">addListener</em>()</code>，用我们的监听器初始化mesibo。</li><li id="b672" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated">通过调用函数<code class="fe ma mb mc md b"><em class="lb">setAccessToken</em>()</code>初始化API凭证，这将在下一节中解释。</li><li id="fdc1" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated">通过调用函数<code class="fe ma mb mc md b"><em class="lb">setDatabase</em>()</code>设置数据库以存储收到的消息</li><li id="df62" class="my mz iq kh b ki nh kl ni ko nj ks nk kw nl la nd ne nf ng bi translated">启动mesibo，通过调用函数<code class="fe ma mb mc md b"><em class="lb">start</em>()</code>开始发送和接收实时消息</li></ol><p id="9b17" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦你启动了mesibo，你不需要做任何事情就可以获得你的实时数据或消息。<strong class="kh ir"> <em class="lb">您不会像使用REST API</em></strong>时那样轮询或持续检查新消息。相反，一旦接收到新的实时数据，mesibo将自动调用监听器函数，没有任何延迟。</p><p id="9be9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，您的脚本如何知道谁发送了您刚刚收到的数据，或者如何将数据发送到特定的目的地或组？这就带来了实时端点的概念。</p><h1 id="6b67" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">实时端点和地址</h1><p id="0ceb" class="pw-post-body-paragraph kf kg iq kh b ki lv jr kk kl lw ju kn ko lx kq kr ks ly ku kv kw lz ky kz la ij bi translated">当你给你的朋友发电子邮件时，你使用他们的电子邮件地址。同样，当你的朋友收到一封电子邮件时，他们知道这是你发来的，因为邮件中包含了你的电子邮件地址。类似地，在实时系统中，每个端点都有一个地址。端点可以是任何东西，您的Python脚本、聊天用户或群组。在mesibo中，地址可以是任何唯一的字符串，无论是电子邮件地址、电话号码还是任何随机的唯一字符串。</p><p id="40f3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">创建端点<br/>然后，端点使用这些地址相互进行实时通信。当您创建一个端点时，mesibo会生成一个令牌，您可以在<code class="fe ma mb mc md b"><em class="lb">setAccessToken</em>()</code>中初始化时使用这个令牌。</strong></p><p id="2d98" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，您可以通过调用mesibo后端API创建一个地址为<code class="fe ma mb mc md b">123</code>的端点，</p><figure class="me mf mg mh gt mr"><div class="bz fp l di"><div class="ms mt l"/></div><p class="mu mv gj gh gi mw mx bd b be z dk translated">curl请求调用mesibo后端API</p></figure><p id="9b82" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面请求中的<code class="fe ma mb mc md b">token</code>是mesibo API密钥(也称为App token)。强烈建议您阅读<a class="ae lc" href="https://mesibo.com/documentation/tutorials/get-started/" rel="noopener ugc nofollow" target="_blank"> mesibo教程</a>以了解如何将mesibo后端API与您自己的App token一起使用。</p><p id="c885" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的API将返回一个JSON响应，</p><figure class="me mf mg mh gt mr"><div class="bz fp l di"><div class="ms mt l"/></div><p class="mu mv gj gh gi mw mx bd b be z dk translated">来自mesibo后端API的JSON响应</p></figure><p id="eaaa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，您可以在Python <code class="fe ma mb mc md b"><em class="lb">setAccessToken</em>()</code> API中使用上述响应中返回的用户令牌。</p><p id="9ec2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在初始化mesibo和设置listener之后，您现在已经设置好了。我们现在将学习如何发送实时数据</p><h1 id="19f2" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">发送实时数据</h1><p id="2cdc" class="pw-post-body-paragraph kf kg iq kh b ki lv jr kk kl lw ju kn ko lx kq kr ks ly ku kv kw lz ky kz la ij bi translated">向另一个端点发送实时数据很简单。你只需要指定地址，消息，并调用<code class="fe ma mb mc md b"><em class="lb">api.sendMessage</em>()</code>函数，</p><figure class="me mf mg mh gt mr"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="35ab" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">只要发送一条消息，接收端就会立即调用<code class="fe ma mb mc md b"><em class="lb">Mesibo_OnMessage</em></code>功能。参考上面的清单，我们已经定义了监听器函数<code class="fe ma mb mc md b"><em class="lb">Mesibo_OnMessage</em></code></p><p id="a20f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样的，你可以给群发消息，参考<a class="ae lc" href="https://mesibo.com/documentation/tutorials/get-started/" rel="noopener ugc nofollow" target="_blank">梅斯博教程</a>了解更多关于创建群的知识。一旦您向群组发送消息，所有群组成员将立即调用<code class="fe ma mb mc md b"><em class="lb">Mesibo_OnMessage</em></code>功能。</p><figure class="me mf mg mh gt mr"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h1 id="14e2" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">运行和测试您的脚本</h1><p id="dcbb" class="pw-post-body-paragraph kf kg iq kh b ki lv jr kk kl lw ju kn ko lx kq kr ks ly ku kv kw lz ky kz la ij bi translated">我们现在准备运行我们的脚本。为了方便起见，完整的脚本在这里，它是从<a class="ae lc" href="https://github.com/mesibo/python/" rel="noopener ugc nofollow" target="_blank"> mesibo Python库</a>下载的。</p><figure class="me mf mg mh gt mr"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="91e0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要使用您的脚本运行和测试实时通信，如上所述创建两个端点，比如说<code class="fe ma mb mc md b">123</code>和<code class="fe ma mb mc md b">456</code>，并为每个端点生成令牌。然后创建脚本的两个副本，并替换每个端点的令牌值。此外，替换另一个端点的目的地地址，例如，如果您使用端点的令牌<code class="fe ma mb mc md b">123</code>，则在sendMessage中使用目的地<code class="fe ma mb mc md b">456</code>，反之亦然。</p><p id="d244" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在运行脚本，您将看到两者都能够向对方发送实时数据。您还会看到连接状态。一旦成功执行了脚本，就可以探索更多的mesibo APIs来发送各种数据。</p><h1 id="929d" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">关于第二部分的结论和信息</h1><p id="723d" class="pw-post-body-paragraph kf kg iq kh b ki lv jr kk kl lw ju kn ko lx kq kr ks ly ku kv kw lz ky kz la ij bi translated">在第一部分中，我们探索了如何发送和接收实时数据。对于第一部分，我们使用了mesibo托管的API。在第二部分中，我们将学习如何<a class="ae lc" href="https://mesibo.com/documentation/on-premise" rel="noopener ugc nofollow" target="_blank">将整个mesibo平台</a>下载到您的服务器，将其与您的数据库连接，然后添加Tensorflow。同时，我建议浏览一下<a class="ae lc" href="https://mesibo.com/documentation/tutorials/get-started/" rel="noopener ugc nofollow" target="_blank"> mesibo教程</a>，它更详细地描述了本文中显示的步骤。你也可以尝试mesibo支持的其他平台(Android、iOS、Javascript、C++)，并把它们与你的Python脚本接口。</p><p id="ebe7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我希望您喜欢阅读第1部分，并且能够通过实时通信运行您的脚本。如果您有任何问题，或者您希望我在第二部分中解决一些具体的问题，请发表评论。</p></div></div>    
</body>
</html>