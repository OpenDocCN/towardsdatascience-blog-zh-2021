<html>
<head>
<title>Filling Gaps in Time Series Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">填补时间序列数据中的空白</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/filling-gaps-in-time-series-data-2db7366f1965?source=collection_archive---------11-----------------------#2021-10-22">https://towardsdatascience.com/filling-gaps-in-time-series-data-2db7366f1965?source=collection_archive---------11-----------------------#2021-10-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3115" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用熊猫作为时间序列数据准备的一个步骤进行重新采样</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e772f3c74f90d068c8f281dbe9670679.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pOsLSmAdGdWgvWal"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@aronvisuals?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Aron视觉</a>拍摄的照片</p></figure><p id="c86d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">时间序列数据并不总是完全清晰的。有些日子可能会有间隙和缺失值。机器学习模型可能不需要数据缺口，您需要在数据分析和清理过程中填充缺失的值。本文将介绍如何使用pandas重采样方法来识别和填补这些空白。</p><h1 id="f63d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">原始资料</h1><p id="ad69" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">出于演示的目的，我模拟了一些每日时间序列数据(总共10天的范围),其中有一些有目的的缺口。初始数据如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/389ce2ce5dda5fd66536583b0f87cfd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:350/format:webp/0*ULleGhw3H9k6hO0-.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">初始数据集，按作者分类的图像</p></figure><h1 id="53ef" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">再取样法</h1><p id="8e84" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">pandas中一个强大的时间序列功能是<a class="ae ky" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.resample.html" rel="noopener ugc nofollow" target="_blank">重采样功能</a>。这允许我们指定一个规则来对时间序列进行重采样。</p><p id="e1b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们在同一粒度上调用重采样，这种重采样功能对于识别和填充时间序列数据中的间隙也很有用。例如，我们正在处理的原始数据集有间隙，并且不是每天都有值。如下利用重采样功能将这些间隙识别为NA值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/dda0b7769d7bfac89172bea435bcbc45.png" data-original-src="https://miro.medium.com/v2/resize:fit:320/format:webp/0*YGbI2l_qruXHnBMG.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">简单的重新取样，作者的图像</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/de90f73effdd9cb5cafb54d8e2631140.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/0*AEivHeEGcm9lmTJA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">简单的重采样图表，作者图片</p></figure><p id="ca8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您将在上面看到的，重采样方法为不存在的日期插入NA值。这扩展了我们的数据框架，并从本质上确定了需要处理的差距。下一步是根据各种方法用实际数字填充这些NA值。</p><h1 id="46b6" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">正向填充重采样</h1><p id="9ee6" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">填充缺失值的一种方法是向前填充。使用这种方法，直接在前的值用于填充缺失的值。例如，我们的数据中缺少第二个到第四个，将用第一个的值(1.0)填充。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/10cd524c54f0ae0a561005e8f2c41cc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:296/format:webp/0*ZVzJ9GPlFlsxafYq.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">正向填充重采样，按作者排序的图像</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/5a3f78acf330d78118da391f7dc9cacf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/0*1gOBnYfkAkpL0mFT.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">向前填充图表，按作者排序的图像</p></figure><h1 id="5886" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">反向填充重采样</h1><p id="9285" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">类似的方法是反向填充。完成上述操作后，您可能会猜到这是做什么的——使用After值来填充缺失的数据点。不是用我们时间序列中第一天的1.0来填充第二天到第四天，您将在下面看到它现在的值是2.0(从10月5日开始)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi my"><img src="../Images/31d0d9ac800a5ded2efa60a2e19e783e.png" data-original-src="https://miro.medium.com/v2/resize:fit:310/format:webp/0*xa5EEQKhjJbzv0cY.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">反向填充重采样，按作者排序的图像</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/db41b70bbcbe9e80ef0353de24e08c49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/0*lDs72cwnsncsiVHb.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">反向填充图表，按作者排序的图像</p></figure><h1 id="ba26" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">插值填充重采样</h1><p id="d239" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">本文中的最后一种方法是内插法。下图显示了插值，其中数据基本上是从一个点到下一个点的拟合。您将在下面的示例中看到平滑的线条连接缺失的值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/fa4b31add2c326eadc9a277521489751.png" data-original-src="https://miro.medium.com/v2/resize:fit:354/format:webp/0*PJFzsr-i-5tAXnR1.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">插值重采样，作者图像</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/34d4b87e8f3564e926bf83713be7aeb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/0*HeB6dQ_1QovFjbsL.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">插值填充图表，按作者排序的图像</p></figure><h1 id="895b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">摘要</h1><p id="32ff" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">有许多方法可以识别和填补时间序列数据中的空白。重采样功能是一种识别并填充缺失数据点的简单方法。这可以用来在建立机器学习模型之前准备和清理数据。</p><p id="aefd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="na">所有的例子和文件都可以在</em> <a class="ae ky" href="https://github.com/bstuddard/python-examples/tree/master/time-series-resample" rel="noopener ugc nofollow" target="_blank"> <em class="na"> Github </em> </a> <em class="na">上找到。</em></p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><p id="9577" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="na">原发布于</em><a class="ae ky" href="https://datastud.dev/posts/time-series-resample" rel="noopener ugc nofollow" target="_blank"><em class="na">https://data stud . dev</em></a><em class="na">。</em></p></div></div>    
</body>
</html>