<html>
<head>
<title>4 Ways to Effectively Debug Data Pipelines in Apache Beam</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Apache Beam中有效调试数据管道的4种方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/4-ways-to-effectively-debug-data-pipelines-in-apache-beam-6508a880f0b4?source=collection_archive---------37-----------------------#2021-03-29">https://towardsdatascience.com/4-ways-to-effectively-debug-data-pipelines-in-apache-beam-6508a880f0b4?source=collection_archive---------37-----------------------#2021-03-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="522b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过在部署到云之前运行单元测试、使用模块化结构以及以编程方式生成唯一标签来节省调试时间</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/e6594aef384c46610eb46a9258366495.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*ktxccXIG9YqF2zjiBt6PJw.png"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">作者图片</p></figure><p id="ab80" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Apache Beam是一个开源框架，对于大规模清理和处理数据非常有用。它对于实时处理流数据也很有用。事实上，你甚至可以在笔记本电脑上用Apache Beam进行开发，并部署到Google Cloud进行处理(Google Cloud版本称为DataFlow)。</p><p id="dce9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">除此之外，Beam还涉足人工智能领域。更正式的说法是，它被用作机器学习管道的一部分，或者用于机器学习模型的自动部署(MLOps)。作为一个具体的例子，Beam可以用来清除Twitter数据中的拼写错误或标点符号，然后将数据发送到机器学习模型，该模型可以确定推文是否代表快乐或悲伤的情绪。</p><p id="0b93" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用Beam的一个挑战是如何进行调试，以及如何在笔记本电脑上调试基本功能。在这篇博文中，我将展示4种可以帮助你改进调试的方法。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><p id="a0cb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">快速提示:</strong></p><p id="6aea" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这篇博客高度概括了如何调试数据管道。为了更深入的了解，你可能想看一下<a class="ae lu" href="https://courses.whiteowleducation.com/courses/machine-learning-mastery/lectures/30683503" rel="noopener ugc nofollow" target="_blank">这个视频</a>，它讲述了Apache Beam的单元测试；还有<a class="ae lu" href="https://courses.whiteowleducation.com/courses/machine-learning-mastery/lectures/31386945" rel="noopener ugc nofollow" target="_blank">这个视频</a>，它带你完成了一个基本数据管道的调试过程。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><p id="e2ee" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 1)如果安装了依赖库，只运行耗时的单元测试</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="b1a5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您使用的是unittest，那么让测试只在安装了正确的库的情况下运行会很有帮助。在上面的Python例子中，我有一个try块，它在Google Cloud库中寻找一个类。如果找不到该类，将跳过单元测试，并显示一条消息，提示“未安装GCP依赖项”</p><p id="ecde" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 2)运行本地单元测试时使用测试管道</strong></p><p id="18bb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Apache Beam使用一个管道对象来帮助构建一个<a class="ae lu" href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" rel="noopener ugc nofollow" target="_blank">有向无环图</a> (DAG)的转换。您还可以使用Apache _ beam . testing . test pipeline，这样在构建基本测试时就可以减少配置工作。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/cf7c4de9352031dd4dee78c365ebbdc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/1*cnz78hz0iVTO79ansnGTig.png"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">有向无环图的例子(由<a class="ae lu" href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Directed_acyclic_graph</a>提供)</p></figure><p id="7677" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">获得关于如何调试数据管道的另外两个技巧。看看</strong><a class="ae lu" href="https://www.whiteowleducation.com/4-ways-to-effectively-debug-data-pipelines-in-apache-beam/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir">https://www . whiteowleduction . com/4-ways-to-effectively-debug-data-pipelines-in-Apache-beam/</strong></a></p></div></div>    
</body>
</html>