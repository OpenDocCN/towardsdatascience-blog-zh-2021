<html>
<head>
<title>Accessing and Cleaning Data from Garmin Wearables for Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从Garmin可穿戴设备访问和清理数据以进行分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/accessing-and-cleaning-data-from-garmin-wearables-for-analysis-56c22b83d932?source=collection_archive---------9-----------------------#2021-10-02">https://towardsdatascience.com/accessing-and-cleaning-data-from-garmin-wearables-for-analysis-56c22b83d932?source=collection_archive---------9-----------------------#2021-10-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b3d5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个友好的如何为匆忙的人们提取Garmin菲尼克斯数据的指南</h2></div><p id="edb1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我开始做一个项目来分析我的Garmin菲尼克斯数据时，不清楚如何访问这个惊人的数据集，需要一些技术知识。</p><p id="c9f4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Garmin的文档也很难理解和过时，导致我不得不通过代码回购和旧的互联网论坛挖掘…</p><h1 id="ab27" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated"><strong class="ak">这是我开始这个项目时希望存在的Garmin数据指南🚀</strong></h1><p id="f196" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">希望这篇文章能把我花了不少时间的东西变成简单易懂的东西。</p><p id="0d47" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="mb">文中所有图片，除非特别注明，均为作者所有</em></p><h1 id="ec7b" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">步骤0:有哪些数据可用？</h1><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mc"><img src="../Images/d692ccdfbca6e403da1cab67a202c97a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AprW6rlukA0YKCGM"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">照片由<a class="ae ms" href="https://unsplash.com/@zanilic?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Zan </a>在<a class="ae ms" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="3ac4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">虽然有很多因素影响可用的数据，从<a class="ae ms" href="https://developer.garmin.com/connect-iq/reference-guides/devices-reference/#devicereference" rel="noopener ugc nofollow" target="_blank">您使用的Garmin型号</a>到<a class="ae ms" href="https://www8.garmin.com/manuals/webhelp/fenix66s6xpro/EN-US/GUID-6F1082A9-D190-420E-A31D-C4474A015322.html" rel="noopener ugc nofollow" target="_blank">您是否一直佩戴胸部心率监测器</a>，但以下是我能够从没有胸带的Garmin菲尼克斯中提取的特征:</p><p id="3fdb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">一般健身数据:</strong></p><ul class=""><li id="8059" class="mt mu it kk b kl km ko kp kr mv kv mw kz mx ld my mz na nb bi translated">醒来时间</li><li id="aa5b" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">步伐</li><li id="4846" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">周期</li><li id="6454" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">上升/下降</li><li id="7d75" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">心率</li><li id="ca8c" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">活动类型和时间(中度和剧烈)</li><li id="6431" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">总移动时间</li><li id="b875" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">行走步长，平均速度</li><li id="d03b" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">燃烧的卡路里，燃烧的总脂肪卡路里</li><li id="9455" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">训练压力分数</li><li id="2cdd" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">最高和平均温度</li><li id="d61c" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">应力水平</li><li id="159f" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">速度和强度</li><li id="8ec5" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">静息代谢率，静息心率</li><li id="2dd5" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated"><strong class="kk iu">游泳</strong>:泳池长度、泳姿长度和距离、游泳节奏、首圈指数</li><li id="43ab" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated"><strong class="kk iu">跑步</strong>:最大跑步步频、最大一般步频、总步数</li></ul><p id="4b74" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">特定运动事件数据:</strong></p><ul class=""><li id="06ae" class="mt mu it kk b kl km ko kp kr mv kv mw kz mx ld my mz na nb bi translated">时间</li><li id="7d2c" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">旅行距离</li><li id="330a" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">位置(经度/纬度)</li><li id="d206" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">海拔和温度</li><li id="a5f2" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">心率</li><li id="97e4" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">节奏(和分数节奏)</li><li id="da7b" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">速度和功率</li><li id="5b2a" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">左右平衡</li></ul><h1 id="f98d" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">步骤1:获取数据转储</h1><p id="63a1" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">虽然您也可以通过Garmin的名为“<a class="ae ms" href="https://developer.garmin.com/connect-iq/overview/" rel="noopener ugc nofollow" target="_blank"> Garmin Connect IQ </a>的SDK来访问这些数据，但我将通过手动方式来访问这些数据。它实际上容易得多，尤其是对于个人使用，但是Garmin有过时的文档，所以它看起来很复杂…</p><p id="5821" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，进入你的Garmin账户数据管理(<a class="ae ms" href="https://www.garmin.com/en-US/account/datamanagement/" rel="noopener ugc nofollow" target="_blank">https://www.garmin.com/en-US/account/datamanagement/</a>)并登录:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi nh"><img src="../Images/1dbc796bd6362d09702dffccc5d31e4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kREJZ7MTxta7k8p2QkoDSw.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">来自网站的截图</p></figure><p id="6030" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后转到“导出您的数据”并点击<code class="fe ni nj nk nl b">Request Data Export</code>。</p><p id="c6d5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，您将收到一条消息，说明:</p><pre class="md me mf mg gt nm nl nn no aw np bi"><span id="7926" class="nq lf it nl b gy nr ns l nt nu">Your request has successfully submitted.</span><span id="cd37" class="nq lf it nl b gy nv ns l nt nu">You can request a copy of all personal data, including your profile, order history, information from Garmin Connect and other applications, subscriptions, registered devices and more.</span><span id="3a44" class="nq lf it nl b gy nv ns l nt nu">We will send a link to download your export file to [yourAccountEmail@email.com]</span><span id="f45c" class="nq lf it nl b gy nv ns l nt nu">Files typically take about 48 hours to prepare but, depending on the number of requests being processed and the amount of data associated with your profile, could take up to 30 days.</span></pre><p id="8387" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">恭喜你。你很快就会得到你的数据。虽然信息说最多30天，但我在30分钟内就收到了。<em class="mb">(为什么他们需要30天来处理一个数据请求？我是从我的账户里申请的，所以不存在任何许可/安全问题…他们有人手动给我发送数据吗…？)</em></p><p id="be8e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最终你会收到一个. zip文件。打开它以显示文件夹结构:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/03a2a69fe593996521fdf1c2bf70e771.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*zup1PFoTQW-HdqL4fcN5vA.png"/></div></figure><p id="6d5f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对我来说，这些文件夹大部分是空的，因为我没有使用它们。在那些不为空的数据库中，几乎所有的数据库都包含一个包含客户数据或聚合练习数据的JSON文件。</p><p id="4f6a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们唯一关心的是DI _ CONNECT &gt; DI-CONNECT-Fitness-Uploaded-Files:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/1b2e137f8b44d4d83105ec87b0a66858.png" data-original-src="https://miro.medium.com/v2/resize:fit:918/format:webp/1*3hDW2scarWSZ_4oUiHVN2Q.png"/></div></figure><p id="1848" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">点击。zip文件放在这个嵌套的文件夹中，<strong class="kk iu">你将创建一个充满。适合文件类型</strong></p><h1 id="3c47" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">步骤2:转换成可用的文件类型</h1><p id="7dd6" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">这是最棘手的部分，因为我们需要将这些从<code class="fe ni nj nk nl b">.fit</code>转换成。CSV使用命令行。<code class="fe ni nj nk nl b">.fit</code>是Garmin使用的一种特殊文件类型，您的任何数据分析工具(Excel、Atom、Jupyter)都无法使用。</p><p id="526d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将依赖Garmin的FIT SDK的FIT CSV工具(<a class="ae ms" href="https://developer.garmin.com/fit/fitcsvtool/" rel="noopener ugc nofollow" target="_blank">https://developer.garmin.com/fit/fitcsvtool/</a>)。这是免费的，但需要设置。</p><p id="b1d2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，打开命令行终端。如果您不熟悉CLI，它应该是这样的:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/8019c95629fa386c52597b08051dc78a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/format:webp/1*PfQ0GJSJOcoejlEAU4kTWw.png"/></div></figure><p id="db75" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来我们需要检查我们是否安装了JAVA。检查的一个简单方法是在我们的终端中键入<code class="fe ni nj nk nl b">java -version</code>。如果我们得到一个号码返回，它被安装。如果我们收到错误信息，我们需要安装它</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/a38ecffcf2d179b522f2144f7acdd7d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1130/format:webp/1*bgHX5bM7WSJydueaHDA3sQ.png"/></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">安装JAVA时的成功消息</p></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/ec07235bfd4c822adea6e5e25d90df5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*T5NIhOR21VxC0q7G-A2Rcg.png"/></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">未安装JAVA时的错误消息响应</p></figure><p id="e447" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">安装Java: </strong>根据你运行的是MacOS/Windows/Linux，你需要下载不同的文件。正如终端消息所说，前往<a class="ae ms" href="https://www.java.com/en/download/" rel="noopener ugc nofollow" target="_blank">https://www.java.com/en/download/</a>下载java包。这将提示一个安装程序窗口，您可以沿着<a class="ae ms" href="https://www.java.com/en/download/help/mac_install.html" rel="noopener ugc nofollow" target="_blank">这里的</a>进行操作。下载成功后，关闭并重新打开你的终端，并通过同样的<code class="fe ni nj nk nl b">java -version</code>测试验证java是否已安装。</p><p id="5a10" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦我们知道已经下载了Java，继续下载FIT SDK(<a class="ae ms" href="https://developer.garmin.com/fit/download/" rel="noopener ugc nofollow" target="_blank">https://developer.garmin.com/fit/download/</a>)并解压。活力</p><p id="9fec" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将为您提供一个包含以下内容的文件夹:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/5ca249beabf058b41bb84555bf71c2d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:726/format:webp/1*9zS33DfE93UFHCEGUUTPiw.png"/></div></figure><p id="2ac9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我们可以将我们的<code class="fe ni nj nk nl b">.fit</code>文件转换成。战斗支援车🚀完成这项工作的jar文件位于一个名为<code class="fe ni nj nk nl b">FitCSVTool.jar</code>的java文件夹中</p><p id="5eb8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在命令行中键入以下内容，将<code class="fe ni nj nk nl b">&lt;file&gt;</code>替换为<code class="fe ni nj nk nl b">.fit</code>文件的文件路径:</p><pre class="md me mf mg gt nm nl nn no aw np bi"><span id="7b79" class="nq lf it nl b gy nr ns l nt nu">java -jar FitCSVTool.jar &lt;file&gt;</span></pre><p id="49c0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你得到像<code class="fe ni nj nk nl b">Unable to access jarfile FitCSVTool</code>或<code class="fe ni nj nk nl b">(No such file or directory)</code>这样的错误，你需要找出正确的文件路径。在Mac上，直接将文件拖放到终端就像<em class="mb">一样简单。</em>在windows中，您需要从文件属性中复制/粘贴文件路径。</p><p id="00bf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果成功，将在与原始<code class="fe ni nj nk nl b">.fit</code>文件相同的目录下创建一个. csv文件。</p><p id="adf6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这可能是转换过程的结束，但是为每个文件输入上面的命令是一件痛苦的事情。我有超过8000个<code class="fe ni nj nk nl b">.fit</code>文件，你可能有更多。幸运的是，我们可以自动化这一点。</p><p id="1e66" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于这一步，Windows和Mac指南将会有所不同。如文件中所述:</p><blockquote class="oc od oe"><p id="16bb" class="ki kj mb kk b kl km ju kn ko kp jx kq of ks kt ku og kw kx ky oh la lb lc ld im bi translated">FIT SDK包括多个Windows批处理文件，为FitCSVTool提供拖放界面。<strong class="kk iu">这些批处理文件与OSX </strong>不兼容；但是，使用Automator应用程序也可以实现相同的功能。</p></blockquote><p id="0cb9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于苹果电脑，我们可以创建一个如上述文件概述的自动机；打开Automator并…</p><ul class=""><li id="f612" class="mt mu it kk b kl km ko kp kr mv kv mw kz mx ld my mz na nb bi translated">从窗口中选择“应用程序”,然后点按“选取”</li><li id="5e6b" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">给它一个名字</li><li id="7024" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">在“资源库”文件夹中找到“过滤器Finder项目”,并将其拖到右侧屏幕。输入"。适合“包含”字段</li><li id="f944" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">在Library文件夹中找到“Run Shell Script”并拖动到右侧屏幕。用下面的代码片段填充，用上面使用的工具的路径替换<code class="fe ni nj nk nl b">path/to/fit/sdk/java/FitCSVTool.jar</code>(记住你可以拖放！):</li></ul><pre class="md me mf mg gt nm nl nn no aw np bi"><span id="8bb1" class="nq lf it nl b gy nr ns l nt nu">FitCSVToolJar=path/to/fit/sdk/java/FitCSVTool.jar<br/>while read inputfile<br/>do<br/>outputfile=${inputfile/.fit/}<br/>java -jar $FitCSVToolJar -b "$inputfile" "$outputfile"_raw<br/>java -jar $FitCSVToolJar -b "$inputfile" "$outputfile"_definitions --data none<br/>java -jar $FitCSVToolJar -b "$inputfile" "$outputfile"_records --defn none --data record<br/>done</span></pre><p id="7f07" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">完成所有这些后，您的Automator应用程序应该如下所示:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi oi"><img src="../Images/6a91d1346c087e4dfe4ed90f8d0b0420.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9JITm0otjTAGpVlgrwYFow.png"/></div></div></figure><ul class=""><li id="4dd3" class="mt mu it kk b kl km ko kp kr mv kv mw kz mx ld my mz na nb bi translated">将此保存到桌面</li></ul><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/e0563812b805de8b7d65fe0a1fe8503c.png" data-original-src="https://miro.medium.com/v2/resize:fit:428/format:webp/1*hXd3GN9zztHZQ_3vegsQLA.png"/></div></figure><ul class=""><li id="8a06" class="mt mu it kk b kl km ko kp kr mv kv mw kz mx ld my mz na nb bi translated">高亮显示并<em class="mb">拖动所有的</em> <code class="fe ni nj nk nl b"><em class="mb">.fit</em></code> <em class="mb">文件</em>到应用程序桌面图标上，如图所示</li></ul><p id="2055" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将开始自动转换您拥有的所有成千上万的文档。对我来说，这让我的MacBook风扇非常吵，花了大约半个小时。</p><p id="3932" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">虽然我没有Windows机器来测试这一点，但我相信Windows会通过将所有的<code class="fe ni nj nk nl b">.fit </code>文件拖到FitSDK文件夹中的一个<code class="fe ni nj nk nl b">.bat</code>文件上来实现类似的拖放系统:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/d8aa6eec5958e05bb5ec7eb1650bd9e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/1*NP0qRCFMmbYXMUgMrNJPPg.png"/></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">全部5个。FitSDK文件夹中的bat文件。只需拖拽！</p></figure><p id="7852" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如Windows文档中所述:</p><pre class="md me mf mg gt nm nl nn no aw np bi"><span id="6e0c" class="nq lf it nl b gy nr ns l nt nu">An easier way to use FitCSVTool is to use one of the five batch files included in the SDK. These files are located in the same folder as FitCSVTool.jar. Drag-n-drop a FIT file onto any of the batch files and the output .csv files will be created in the same folder as the source FIT file.</span></pre><p id="b9d1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由于之前从<code class="fe ni nj nk nl b">.fit</code>转换到<code class="fe ni nj nk nl b">.csv</code>的步骤，我们现在每个<code class="fe ni nj nk nl b">.fit</code>文件有几个<code class="fe ni nj nk nl b">.csv</code>文件:</p><ul class=""><li id="e10f" class="mt mu it kk b kl km ko kp kr mv kv mw kz mx ld my mz na nb bi translated">概述数据中存在哪些字段的文件</li><li id="0454" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">一个<code class="fe ni nj nk nl b">_records_data</code>文件，包含锻炼程序的距离、速度的汇总数据</li><li id="52cd" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">一个<code class="fe ni nj nk nl b">_records</code>文件，包含每时每刻锻炼程序的位置、速度和距离</li><li id="c4cb" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">一个包含所有内容的<code class="fe ni nj nk nl b">_raw </code>文件，包括压力水平、心率和其他指标。(正如下一节所见，这些极其混乱)</li></ul><p id="14d6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">🎉恭喜你，你有CSV格式的数据了！🎉</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi ol"><img src="../Images/ecb838fa74e3e60f19a45873c127919e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZIAZkUmi7zsUcjZg"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">为你骄傲！扎克·杜兰特在<a class="ae ms" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure></div><div class="ab cl om on hx oo" role="separator"><span class="op bw bk oq or os"/><span class="op bw bk oq or os"/><span class="op bw bk oq or"/></div><div class="im in io ip iq"><h1 id="ed8c" class="le lf it bd lg lh ot lj lk ll ou ln lo jz ov ka lq kc ow kd ls kf ox kg lu lv bi translated">第三步:清洁</h1><p id="0389" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">这一步及以后的一切都是我推荐的数据清理，但是可选的。你也可能有和我不一样的数据，所以这些清理过程可能不适合你。</p><p id="9430" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">也就是说，我很有信心下面的步骤将帮助任何人分析他们的Garmin数据。</p><h2 id="5c36" class="nq lf it bd lg oy oz dn lk pa pb dp lo kr pc pd lq kv pe pf ls kz pg ph lu pi bi translated">删除定义表</h2><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi pj"><img src="../Images/774568ed1f9ad4a080f27bc2ee284135.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gTKtV_UacOA00F0B4f0kmQ.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">定义文件的屏幕截图</p></figure><p id="d55b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">查看定义文件，它们似乎不包含任何有用的内容。从抽查来看，所有的值列似乎都是1。我假设这对<code class="fe ni nj nk nl b">.fit</code>文件很重要，但对我们的目的来说并不重要。</p><p id="768c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要移除定义文件，请通过运行以下命令在终端中导航到csv文件的位置:</p><pre class="md me mf mg gt nm nl nn no aw np bi"><span id="a334" class="nq lf it nl b gy nr ns l nt nu">cd path/to/csv/files</span></pre><p id="8de3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后运行:</p><pre class="md me mf mg gt nm nl nn no aw np bi"><span id="3536" class="nq lf it nl b gy nr ns l nt nu">rm *definitions*</span></pre><p id="fb57" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="mb">这也可以很容易地通过从我们的automator中删除</em> <code class="fe ni nj nk nl b">java -jar $FitCSVToolJar -b "$inputfile" "$outputfile".definitions --data none </code> <em class="mb">来实现，但是要确保任何想要该文件的人都可以使用它</em></p><h2 id="0cb5" class="nq lf it bd lg oy oz dn lk pa pb dp lo kr pc pd lq kv pe pf ls kz pg ph lu pi bi translated">创建一个大型CSV</h2><p id="0329" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">我们仍然有一个问题，需要解析成千上万个CSV来查看我们的数据。您可以将所有CSV与以下内容结合使用:</p><pre class="md me mf mg gt nm nl nn no aw np bi"><span id="d6c2" class="nq lf it nl b gy nr ns l nt nu">cat *.csv &gt;garmin_combined.csv</span></pre><p id="063a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者如果您计划生成与我下面的数据模式相同的数据模式:</p><pre class="md me mf mg gt nm nl nn no aw np bi"><span id="365e" class="nq lf it nl b gy nr ns l nt nu">cat *_records.csv &gt;combined_records_full.csv<br/>cat *_raw.csv &gt;combined_raw_full.csv</span></pre><p id="73ed" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这创建了两个不同的组合CSV供我们使用。</p><h2 id="720c" class="nq lf it bd lg oy oz dn lk pa pb dp lo kr pc pd lq kv pe pf ls kz pg ph lu pi bi translated">创建可用的列</h2><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi pk"><img src="../Images/4b20100322fe183c8743a1ef32c43d25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*luFgOJEvgUKThiu-ePjAUQ.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">来自记录文件的屏幕截图</p></figure><p id="163d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">😃<strong class="kk iu">好消息</strong>:从我们的<code class="fe ni nj nk nl b">.fit</code>转换生成的<code class="fe ni nj nk nl b">_records</code>文件看起来不错。</p><p id="2b64" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">🙁<strong class="kk iu">坏消息</strong>:<code class="fe ni nj nk nl b">_raw</code>数据文件<strong class="kk iu">如此凌乱不堪。</strong>空字段、特殊字符、表示不同意思的列值…天啊。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi pl"><img src="../Images/f5e0b2dc238167df1d0aad3365ef5e5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9vfnbxhjwHLVJ4fuvsFy4A.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">从一个原始数据文件截图…这将需要一些工作</p></figure><p id="c07f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我强烈建议按时间戳进行旋转，这样列才有意义。通过这种方式，您可以在记录时<strong class="kk iu">快速轻松地检查任何感兴趣的指标，这可能是该数据最常见的用途。</strong></p><p id="ff6d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通过时间戳聚合，我们还可以在不丢失任何数据的情况下极大地减小文件大小。双赢！</p><p id="87f8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我用Python编写了一个更简洁的函数来创建这些列。我已经把它上传到一个<a class="ae ms" href="https://github.com/adam1brownell/garmin_data" rel="noopener ugc nofollow" target="_blank"> Github Repo </a>文件<code class="fe ni nj nk nl b">clean_garmin.py</code>中，或者把下面的内容复制粘贴到你自己的<code class="fe ni nj nk nl b">clean_garmin.py</code>文件中:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="pm pn l"/></div></figure><p id="d3f1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">安装Python: </strong>你需要在电脑上安装Python来运行上述功能。去<a class="ae ms" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank">https://www.python.org/downloads/</a>安装Python。然后进入终端，用<code class="fe ni nj nk nl b">python --version</code>确认下载成功。</p><p id="d822" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦保存了上面的代码块，就可以在终端中运行了:</p><pre class="md me mf mg gt nm nl nn no aw np bi"><span id="0a6f" class="nq lf it nl b gy nr ns l nt nu">python clean_garmin.py -i combined_records_full.csv -o combined_records_clean.csv</span><span id="a173" class="nq lf it nl b gy nv ns l nt nu">python clean_garmin.py -i combined_raw_full.csv -o combined_raw_clean.csv</span></pre><p id="9026" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注意:这需要很长时间，尤其是原始文件。我的电脑花了10分钟录制，花了大约2.5小时录制raw。其原因是，有时数据条目上的时间戳是本地的而不是全局的，这意味着它引用最近的全局时间戳。因此，每次我们进行这种转换时，代码都需要找到最近的全局时间戳，并将本地时间戳转换为全局时间戳…但这需要O(n)时间💀</p><p id="2daf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">…我们的数据看起来好多了🙌</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi po"><img src="../Images/296a7fc85265b10755811a74d68892a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9efpJGSCIF2C57VOFWSNAQ.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">转换的记录文件。尼斯（法国城市名）</p></figure><p id="bd94" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我的清理功能对您的数据失败，或者如果您有更好的数据清理实现，请留下评论，以便我们可以合作！</p><h2 id="4367" class="nq lf it bd lg oy oz dn lk pa pb dp lo kr pc pd lq kv pe pf ls kz pg ph lu pi bi translated">清理回购</h2><p id="91fe" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">我们的文件夹里还有成千上万的文件，这让我很紧张。继续删除所有未聚合的CSV，包括:</p><pre class="md me mf mg gt nm nl nn no aw np bi"><span id="3952" class="nq lf it nl b gy nr ns l nt nu">rm *_raw.csv*<br/>rm *_records.csv*<br/>rm *_records_data.csv*</span></pre></div><div class="ab cl om on hx oo" role="separator"><span class="op bw bk oq or os"/><span class="op bw bk oq or os"/><span class="op bw bk oq or"/></div><div class="im in io ip iq"><h1 id="3f6d" class="le lf it bd lg lh ot lj lk ll ou ln lo jz ov ka lq kc ow kd ls kf ox kg lu lv bi translated">第四步:掉进兔子洞</h1><p id="d911" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">现在我们已经有了一个干净的、可用的Garmin数据CSV，我们可以开始分析这个漂亮的数据集并从中获得见解。</p><p id="3fe9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是数据科学/分析的有趣部分，希望我们所经历的一切都是值得的！</p><p id="b8d4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由于这篇文章已经相当长了，我将写一篇后续文章，介绍一些分析Garmin数据的方法，以得出关于我们运动和健身习惯的有趣见解。</p><p id="a9a1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果以上任何步骤对你不起作用，请留下评论，这样我可以试着帮助调试并把解决方案添加到文章中。我的希望是，没有人必须再次通过论坛寻找答案，在这里得到所有的答案。</p><p id="fa6d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">希望您喜欢，并祝您在分析之旅中好运！</p></div></div>    
</body>
</html>