<html>
<head>
<title>A Story in Python Helps You Understand Itertools</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的一个故事帮助你理解Itertools</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-story-in-python-helps-you-understand-itertools-c8a45ed3d80b?source=collection_archive---------28-----------------------#2021-06-27">https://towardsdatascience.com/a-story-in-python-helps-you-understand-itertools-c8a45ed3d80b?source=collection_archive---------28-----------------------#2021-06-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/12cd2d0f5f3cb4a1f4cbc719fb3be978.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ku78NKyZYr9U_1Olciq7VQ.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由<a class="ae jg" href="https://pixabay.com/users/boke9a-2225626/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1357419" rel="noopener ugc nofollow" target="_blank"> Boke9a </a>从<a class="ae jg" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1357419" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>拍摄</p></figure><div class=""/><div class=""><h2 id="2d4c" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">不要总是从枯燥的理论开始学习</h2></div><p id="02a5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">很多Python开发者喜欢用Itertools模块，这个模块确实非常强大。排列和组合是这个模块中最受欢迎的功能。</p><p id="d24f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当人们学习这两个术语时，几乎总是从理论开始。这是数学领域之一——组合学。然后，有很多原理和公式要理解甚至记忆。</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/1e2ce2fea1b68d657ef8cb1afdd898a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*MkJ20inEmzpup-Dnf9i_4g.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">维基百科页面截图— <a class="ae jg" href="https://en.wikipedia.org/wiki/Permutation" rel="noopener ugc nofollow" target="_blank">排列</a></p></figure><p id="ce49" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">嗯，理论是重要的，但有时它可能不是将知识应用于实践的最快方法，特别是当我们想用编程来解决现实生活中的一些问题时。</p><p id="0c5b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，无论有没有替换，我们都不太可能在袋子里捡起红色和蓝色的球。然而，我们更有可能使用编程来生成一个花名册，以计划谁负责某事:)</p><p id="231c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我将使用一个实际的例子来介绍Python中Itertools模块的4个重要函数(<code class="fe lz ma mb mc b">product()</code>、<code class="fe lz ma mb mc b">permutations()</code>、<code class="fe lz ma mb mc b">combinations()</code>和<code class="fe lz ma mb mc b">combinations_with_replacement()</code>)。</p><h1 id="bc31" class="md me jj bd mf mg mh mi mj mk ml mm mn kp mo kq mp ks mq kt mr kv ms kw mt mu bi translated">0.问题定义和准备</h1><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/19cbe1cc4b5d55fd056828c63e396311.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jkZododShDg7lPnGsLnAig.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由<a class="ae jg" href="https://pixabay.com/users/geralt-9301/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3233653" rel="noopener ugc nofollow" target="_blank"> Gerd Altmann </a>来自<a class="ae jg" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3233653" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></p></figure><p id="370d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，我们直接进入问题。假设我们是一个三人团队:</p><ul class=""><li id="774e" class="mv mw jj la b lb lc le lf lh mx ll my lp mz lt na nb nc nd bi translated">爱丽丝</li><li id="2f58" class="mv mw jj la b lb ne le nf lh ng ll nh lp ni lt na nb nc nd bi translated">上下移动</li><li id="2d4a" class="mv mw jj la b lb ne le nf lh ng ll nh lp ni lt na nb nc nd bi translated">克莉丝</li></ul><p id="4102" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们需要有人在这个周末待命，因为促销活动应该会给我们的网站带来非凡的流量。所以，有两天时间，我们需要名字。</p><p id="38fb" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">假设我们需要使用Python来生成花名册的所有可能性。因为我们需要使用Itertools模块，所以为了方便起见，让我们在本文中导入所有的函数。</p><pre class="lv lw lx ly gt nj mc nk nl aw nm bi"><span id="62e5" class="nn me jj mc b gy no np l nq nr">from itertools import *</span></pre></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><h1 id="3e90" class="md me jj bd mf mg nz mi mj mk oa mm mn kp ob kq mp ks oc kt mr kv od kw mt mu bi translated">1.这两天有人吗</h1><p id="a529" class="pw-post-body-paragraph ky kz jj la b lb oe kk ld le of kn lg lh og lj lk ll oh ln lo lp oi lr ls lt im bi translated">在第一种情况下，两个人的<strong class="la jk">顺序确实很重要</strong>。这是可能的，因为周六和周日对某些人来说可能有不同的意义。</p><p id="466c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">还有，假设这些人不介意这两天都<strong class="la jk">值班，只是假设:)</strong></p><p id="6839" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这种情况下，我们可以使用<code class="fe lz ma mb mc b">product()</code>函数，它是一个笛卡尔乘积。基本上所有的可能性都会列出来，穷尽。</p><pre class="lv lw lx ly gt nj mc nk nl aw nm bi"><span id="72b1" class="nn me jj mc b gy no np l nq nr">for i in product(['Alice', 'Bob', 'Chris'], repeat=2):<br/>    print(list(i))</span></pre><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/9305ad517eb6aa7f23cc67c1d8257dd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*hhSR4y9AxqxS8LHCEWEMkQ.png"/></div></figure><p id="7723" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在上面的代码中，<code class="fe lz ma mb mc b">product()</code>函数有两个参数。第一个是所有名字的列表，第二个告诉它我们需要名字填充多少个“空格”。</p><h1 id="7186" class="md me jj bd mf mg mh mi mj mk ml mm mn kp mo kq mp ks mq kt mr kv ms kw mt mu bi translated">2.两天里两个不同的人</h1><p id="dcfc" class="pw-post-body-paragraph ky kz jj la b lb oe kk ld le of kn lg lh og lj lk ll oh ln lo lp oi lr ls lt im bi translated">我能听到团队在抱怨，因为他们肯定不想两天都随叫随到。所以，花名册上的两个名字<strong class="la jk">应该不会重复</strong>。除此之外，<strong class="la jk">顺序仍然很重要</strong>。</p><p id="7120" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这种情况下，我们可以使用<code class="fe lz ma mb mc b">permutations()</code>,因为它严格地选取两个而不重复。</p><pre class="lv lw lx ly gt nj mc nk nl aw nm bi"><span id="0c44" class="nn me jj mc b gy no np l nq nr">for i in permutations(['Alice', 'Bob', 'Chris'], 2):<br/>    print(list(i))</span></pre><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/b3917b516f600b577b43a76d2c8bc994.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*MOMRPn9NyF3U3Z33CgQqIQ.png"/></div></figure><p id="5500" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">由于这个函数，签名已经改变，所以我们不应该使用参数名<code class="fe lz ma mb mc b">repeat</code>。这两个参数不需要改变，仍然是名称列表和空格数。</p><h1 id="6319" class="md me jj bd mf mg mh mi mj mk ml mm mn kp mo kq mp ks mq kt mr kv ms kw mt mu bi translated">3.任何人在这两天没有秩序</h1><p id="638f" class="pw-post-body-paragraph ky kz jj la b lb oe kk ld le of kn lg lh og lj lk ll oh ln lo lp oi lr ls lt im bi translated">在这种情况下，假设团队成员有自己的灵活性，如果他们在名册上，他们可以随时待命。这意味着顺序不再重要了，因为被接走的人可以互相交流，决定哪一天走。</p><p id="0510" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了满足这个需求，我们需要使用<code class="fe lz ma mb mc b">combinations_with_replacement()</code>函数。</p><pre class="lv lw lx ly gt nj mc nk nl aw nm bi"><span id="9312" class="nn me jj mc b gy no np l nq nr">for i in combinations_with_replacement(['Alice', 'Bob', 'Chris'], 2):<br/>    print(list(i))</span></pre><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/ca9961997c290eb6f1423adad666b7a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*J2LD37M0-ODiXhOi9DlzYw.png"/></div></figure><h1 id="98e8" class="md me jj bd mf mg mh mi mj mk ml mm mn kp mo kq mp ks mq kt mr kv ms kw mt mu bi translated">4.两个不同的人在没有订单的两天里</h1><p id="100d" class="pw-post-body-paragraph ky kz jj la b lb oe kk ld le of kn lg lh og lj lk ll oh ln lo lp oi lr ls lt im bi translated">在前一次运行之后，团队再次抱怨，因为我们忘记了使人不可重复。因此，在这种情况下，名称不应重复，顺序也很重要。</p><p id="6b73" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这个场景中，我们需要如下使用<code class="fe lz ma mb mc b">combinations()</code>函数。</p><pre class="lv lw lx ly gt nj mc nk nl aw nm bi"><span id="42fa" class="nn me jj mc b gy no np l nq nr">for i in combinations(['Alice', 'Bob', 'Chris'], 2):<br/>    print(list(i))</span></pre><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div class="gh gi om"><img src="../Images/6775b706e3de67e3a55293853d892b9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*ZWIf09fEzTg2MeGSnNL99Q.png"/></div></figure><h1 id="3880" class="md me jj bd mf mg mh mi mj mk ml mm mn kp mo kq mp ks mq kt mr kv ms kw mt mu bi translated">摘要</h1><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/b6022e727eba6fe9170bd59647bfd89f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9uYPp0ZAUJI-vIWAT1wBew.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片来自<a class="ae jg" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=5314645" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae jg" href="https://pixabay.com/users/joshuaworoniecki-12734309/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=5314645" rel="noopener ugc nofollow" target="_blank"> Joshua Woroniecki </a></p></figure><p id="9eb6" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你有没有注意到我们实际上在玩两个条件？</p><ul class=""><li id="8f7f" class="mv mw jj la b lb lc le lf lh mx ll my lp mz lt na nb nc nd bi translated">秩序是否重要</li><li id="6c0b" class="mv mw jj la b lb ne le nf lh ng ll nh lp ni lt na nb nc nd bi translated">人员是否可重复</li></ul><p id="b422" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于上述两个条件，我们有完全不同的可能性。我们实际上可以使用<code class="fe lz ma mb mc b">product()</code>功能来帮助穷尽所有的可能性，因为“是或否”是可以重复的，而且顺序确实很重要。</p><pre class="lv lw lx ly gt nj mc nk nl aw nm bi"><span id="c540" class="nn me jj mc b gy no np l nq nr">for i in product(['Yes', 'No'], repeat=2):<br/>    print(i)</span></pre><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div class="gh gi on"><img src="../Images/df0cf99164c6f86660de2a84c50b6f86.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/1*7IJSzAncJPCtD-fBzMri3g.png"/></div></figure><p id="1567" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">到目前为止，我希望您已经理解了在某些情况下何时使用Itertools模块中的这4个函数。我也将它们组织在下图中。希望能说的更清楚一点！</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oo"><img src="../Images/3b0847eadeefbdd48adebbcbdc5ab5a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RUu37BwIi3Bp6VshLEjSyA.png"/></div></div></figure><div class="is it gp gr iu op"><a href="https://medium.com/@qiuyujx/membership" rel="noopener follow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd jk gy z fp ou fr fs ov fu fw ji bi translated">通过我的推荐链接加入Medium克里斯托弗·陶</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">medium.com</p></div></div><div class="oy l"><div class="oz l pa pb pc oy pd ja op"/></div></div></a></div><p id="b6e0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你觉得我的文章有帮助，请考虑加入Medium会员来支持我和成千上万的其他作者！(点击上面的链接)</p></div></div>    
</body>
</html>