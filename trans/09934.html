<html>
<head>
<title>Many hyperparameters? Use Gin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">很多超参数？使用杜松子酒</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/many-hyperparameters-use-gin-fdf6741d282?source=collection_archive---------27-----------------------#2021-09-18">https://towardsdatascience.com/many-hyperparameters-use-gin-fdf6741d282?source=collection_archive---------27-----------------------#2021-09-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7ec1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何处理所有的参数</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6205524e36bfcabf2ca880daa51cd211.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3VwWo3pQYvBtUqKH"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Jez Timms 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="005c" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">动机</h1><p id="f449" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">处理特定于用户的设置的常见方法包括解析命令行参数或使用存储定义的单独python文件。对于小型项目，这些技术易于集成和维护。</p><p id="9ce9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然而，一旦您必须处理过多的可配置(超级)参数，您将很快失去对情况的跟踪。</p><p id="5479" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">作为起点，考虑这个简单的代码片段:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="8453" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果您只使用几个参数，比如5到10个，那么您可以通过命令行操作它们，就像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="842f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">或者，您也可以将这些值存储在一个单独的python文件中，并给它们取一个有意义的名称，如下一个代码片段所示。这些值存储在<em class="mu"> definitions.py </em>中(未显示，但内容应该很清楚)。然后，这些文件被导入并按如下方式处理:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="dd14" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在，随着您不断添加越来越多的参数，您要么扩大命令行解析器，要么必须从单独的文件导入所有内容。这种设置意味着您必须跟踪您已经定义/导入的内容以及没有定义/导入的内容。因此，情况可能会迅速失控:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="ac54" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">即使所有的值都被导入，我们仍然必须将它们传递给被调用的函数，这导致我们重复编写相同的代码。如果我们要使用参数解析器，这将是一个类似的方向。而且我们会有很长很混乱的命令行调用。</p><h1 id="d0c5" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">杜松子酒</h1><p id="12d3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输入杜松子酒:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="5627" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://github.com/google/gin-config" rel="noopener ugc nofollow" target="_blank"> Gin </a>帮助您维护所有超参数的概览。它通过从配置文件(类似于假设的<em class="mu"> definition.py </em>文件)中读取它们来实现这一点。但是，与必须全部导入并手动处理它们不同，您可以使用<em class="mu"> @gin.configurable </em>来注释函数，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="05f4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">注意，当调用<em class="mu"> method1 </em>时，我们不必设置任何参数，即使它们都被声明为强制的(即，我们必须传递它们)。这是由于Gin，它解析配置文件并用存储的值加载参数。尽管如此，如果您想在调用该方法时手动设置一个参数，您可以这样做，它会覆盖Gin对该特定参数的设置。</p><p id="28bd" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们看看上面提到的配置文件是什么样子的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="45f5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">正如您所注意到的，参数被写成带注释的方法 &gt;的&lt;<em class="mu">名称。&lt; <em class="mu">参数名称</em> &gt;。按照这个惯例，你可以很容易地将它们与各自的位置联系起来。这也适用于类，在这种情况下，您要覆盖<em class="mu"> __init__ </em>方法。此外，您可以将所有设置捆绑到一个配置文件中。Gin可以通过参数命名约定检测适当的方法，使得每个带注释的方法或类都有一个文件过时。</em></p><p id="6258" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">Gin的魔力随着要跟踪的超参数的数量而展现。您还可以将它与命令行解析器结合起来，解析最重要的参数——比如时期、批量大小、学习速率——并从配置文件中加载更详细的设置。</p><p id="335d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">您还可以维护两个配置文件以便于处理:一个包含所有带注释的方法和类的所有默认参数，另一个包含您的自定义设置。这样，你永远不会忘记你的初始值，并且可以很容易地在默认设置和实验设置之间切换。</p><h1 id="9a7a" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="2d50" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Gin是一个易于使用的框架。它降低了代码的复杂性，同时增加了灵活性。您所要做的就是将所需的参数设置外包给一个配置文件，用<em class="mu"> @gin.configurable </em>注释方法和类，然后在运行时加载配置。</p><p id="6a5a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">负责任地使用杜松子酒。</p></div></div>    
</body>
</html>