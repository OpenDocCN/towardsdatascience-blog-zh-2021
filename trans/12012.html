<html>
<head>
<title>Normalization, Standardization and Normal Distribution</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">规范化、标准化和正态分布</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/normalization-standardization-and-normal-distribution-bfbe14e12df0?source=collection_archive---------3-----------------------#2021-12-03">https://towardsdatascience.com/normalization-standardization-and-normal-distribution-bfbe14e12df0?source=collection_archive---------3-----------------------#2021-12-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f13d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解区别、何时使用以及如何用Python编码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4c3a3761fa175ec262247540b2358756.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IjHIXzjtMJTiwKSBNPlQqg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@itskabita?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> kabita Darlami </a>在<a class="ae ky" href="https://unsplash.com/s/photos/bell?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="d7c0" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我将以一句话开始这篇文章:<em class="mc">规范化</em>和<em class="mc">标准化</em>不会改变你的数据的分布。换句话说，如果你的变量不是正态分布的，它不会用<code class="fe md me mf mg b">normalize</code>方法变成一个。</p><p id="22bd" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">来自<code class="fe md me mf mg b">sklearn</code>的<code class="fe md me mf mg b">normalize()</code>或<code class="fe md me mf mg b">StandardScaler()</code>不会改变数据的形状。</p><h2 id="7685" class="mh mi it bd mj mk ml dn mm mn mo dp mp lp mq mr ms lt mt mu mv lx mw mx my mz bi translated">标准化</h2><p id="ebb4" class="pw-post-body-paragraph lg lh it li b lj na ju ll lm nb jx lo lp nc lr ls lt nd lv lw lx ne lz ma mb im bi translated">使用<code class="fe md me mf mg b">sklearn.preprocessing.StandardScaler</code>模块可以实现标准化。它对变量的作用是将数据集中到平均值0和标准差1。</p><p id="a09f" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">这样做对于将数据放入相同的比例中非常重要。有时你会处理许多不同尺度的变量。例如，假设你正在做一个线性回归项目，这个项目有像<em class="mc">年学习</em>和<em class="mc">薪水这样的变量。</em></p><p id="a6c7" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">你同意我说的学习年限会在1到30年之间浮动吗？而且你也同意薪资变量会在几万范围内吗？</p><p id="1d69" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">这是变量之间的巨大差异。也就是说，一旦线性回归算法将计算系数，自然会给出一个更高的工资数字，而不是多年的研究。但是我们知道我们不希望模型做出这种区分，所以我们可以标准化数据，将它们放在相同的范围内。</p><pre class="kj kk kl km gt nf mg ng nh aw ni bi"><span id="0158" class="mh mi it mg b gy nj nk l nl nm">import pandas as pd<br/>import seaborn as sns<br/>from sklearn.preprocessing import StandardScaler, normalize<br/>import scipy.stats as scs</span><span id="23d9" class="mh mi it mg b gy nn nk l nl nm"># Pull a dataset<br/>df = sns.load_dataset('tips')</span><span id="869f" class="mh mi it mg b gy nn nk l nl nm"># Histogram of tip variable<br/>sns.histoplot(data=df, x='tip');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/f8e264e19900bc895b8f17e4c1637df2.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/1*BxPHj3RtbdZ0Opdo3_wKgw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“tip”变量的直方图。图片由作者提供。</p></figure><p id="f345" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">好的。应用标准化。</p><pre class="kj kk kl km gt nf mg ng nh aw ni bi"><span id="b342" class="mh mi it mg b gy nj nk l nl nm"># standardizing<br/>scaler = StandardScaler()<br/>scaled = scaler.fit_transform(df[['tip']])</span><span id="8e50" class="mh mi it mg b gy nn nk l nl nm"># Mean and Std of standardized data<br/>print(f'Mean: {scaled.mean().round()} | Std: {scaled.std().round()}')</span><span id="4b8d" class="mh mi it mg b gy nn nk l nl nm"><strong class="mg iu">[OUT]:</strong> Mean: 0.0 | Std: 1.0</span><span id="0500" class="mh mi it mg b gy nn nk l nl nm"># Histplot<br/>sns.histplot(scaled);</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/cdeb9a2ab054b1e94377a40c881505b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:974/format:webp/1*QKsb0XFFimaZjGLjB3bFag.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">标准化的“小费”。图片由作者提供。</p></figure><p id="62aa" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">形状是一样的。以前不正常。现在不正常了。我们可以对前后的正态分布进行夏皮罗检验来确认。p值是括号<em class="mc">(统计检验数，p值)</em>中的第二个数字，如果小于0.05，则表示不是正态分布。</p><pre class="kj kk kl km gt nf mg ng nh aw ni bi"><span id="0d49" class="mh mi it mg b gy nj nk l nl nm"># Normal test original data<br/>scs.shapiro(df.tip)</span><span id="da50" class="mh mi it mg b gy nn nk l nl nm"><strong class="mg iu">[OUT]: </strong>(0.897811233997345, 8.20057563521992e-12)</span><span id="49e5" class="mh mi it mg b gy nn nk l nl nm"># Normal test scaled data<br/>scs.shapiro(scaled)</span><span id="4701" class="mh mi it mg b gy nn nk l nl nm"><strong class="mg iu">[OUT]: </strong>(0.8978115916252136, 8.201060490431455e-12)</span></pre><h2 id="50c6" class="mh mi it bd mj mk ml dn mm mn mo dp mp lp mq mr ms lt mt mu mv lx mw mx my mz bi translated">正常化</h2><p id="35ad" class="pw-post-body-paragraph lg lh it li b lj na ju ll lm nb jx lo lp nc lr ls lt nd lv lw lx ne lz ma mb im bi translated">可以用Python中的<code class="fe md me mf mg b">sklearn</code>中的<code class="fe md me mf mg b">normalize()</code>来执行规范化，它也不会改变数据的形状。它也将数据带到相同的范围，但这里的主要区别是它将呈现0和1之间的数字(但它不会将数据集中在平均值0和std =1上)。</p><p id="9dc4" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">最常见的归一化方法之一是<a class="ae ky" href="https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.MinMaxScaler.html" rel="noopener ugc nofollow" target="_blank">最小最大归一化</a>，它基本上使最大值等于1，最小值等于0。介于两者之间的值将是该值的百分比，或介于0和1之间的数字。然而，在这个例子中，我们使用sklearn的<a class="ae ky" href="https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.normalize.html" rel="noopener ugc nofollow" target="_blank">规格化</a>函数。</p><pre class="kj kk kl km gt nf mg ng nh aw ni bi"><span id="40c1" class="mh mi it mg b gy nj nk l nl nm"># normalize<br/>normalized = normalize(df[['tip']], axis=0)</span><span id="0363" class="mh mi it mg b gy nn nk l nl nm"># Normalized, but NOT Normal distribution. p-Value &lt; 0.05<br/>scs.shapiro(normalized)</span><span id="5a90" class="mh mi it mg b gy nn nk l nl nm"><strong class="mg iu">[OUT]: </strong>(0.897811233997345, 8.20057563521992e-12)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/b84174200b4f9806863625baff89f8df.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*hS3UVULg7WZGlPQNkWi0oA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">尖端变量标准化:相同的形状。图片由作者提供。</p></figure><p id="0e70" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">同样，我们的形状保持不变。数据仍然不是正态分布的。</p><h2 id="3431" class="mh mi it bd mj mk ml dn mm mn mo dp mp lp mq mr ms lt mt mu mv lx mw mx my mz bi translated">那为什么要执行那些操作呢？</h2><p id="8ba8" class="pw-post-body-paragraph lg lh it li b lj na ju ll lm nb jx lo lp nc lr ls lt nd lv lw lx ne lz ma mb im bi translated">标准化和规范化对于将所有要素放在同一比例中非常重要。</p><p id="5f29" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">像线性回归这样的算法被称为确定性的，它们所做的是找到解决数学方程的最佳数字，更好的说法是，如果我们谈论的是线性回归，那就是线性方程。</p><p id="830b" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">因此，模型将测试许多值作为每个变量的系数。这些数字将与变量的大小成正比。也就是说，我们可以理解成千上万的变量会比单位范围内的变量有更高的系数。对每一个的重视将随之而来。</p><blockquote class="nr"><p id="2227" class="ns nt it bd nu nv nw nx ny nz oa mb dk translated">在回归中包含非常大的<em class="ob">和非常小的</em>数字会导致计算问题。当你规范化或标准化时，你就减轻了问题。</p></blockquote><h2 id="b394" class="mh mi it bd mj mk oc dn mm mn od dp mp lp oe mr ms lt of mu mv lx og mx my mz bi translated">改变数据的形状</h2><p id="6799" class="pw-post-body-paragraph lg lh it li b lj na ju ll lm nb jx lo lp nc lr ls lt nd lv lw lx ne lz ma mb im bi translated">有一种变换可以改变数据的形状，使其近似于正态分布。这就是对数变换。</p><pre class="kj kk kl km gt nf mg ng nh aw ni bi"><span id="ac36" class="mh mi it mg b gy nj nk l nl nm"># Log transform and Normality <br/>scs.shapiro(df.tip.apply(np.log))</span><span id="d77a" class="mh mi it mg b gy nn nk l nl nm"><strong class="mg iu">[OUT]: </strong>(0.9888471961021423, 0.05621703341603279)<br/>p-Value &gt; 0.05 : Data is normal</span><span id="4c46" class="mh mi it mg b gy nn nk l nl nm"># Histogram after Log transformation<br/>sns.histplot(df.tip.apply(np.log) );</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/6e6a66e4c763720a57f50e664de34d4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*3ndfyjWvFUk5ojhj0HB7JA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">可变“尖端”测井转换。现在是正态分布。图片由作者提供。</p></figure><p id="6e3b" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">对数变换将消除数据集的偏斜，因为它将所有东西都放在一个角度上。方差将是成比例的，而不是绝对的，因此形状发生变化，类似于正态分布。</p><p id="9b2f" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">关于这一点，我看到的一个很好的描述是，对数变换就像是在看一张带有比例图例的地图，其中1厘米= 1公里。我们把整个映射的空间放在厘米的角度上。我们把数据标准化了。</p><h2 id="6002" class="mh mi it bd mj mk ml dn mm mn mo dp mp lp mq mr ms lt mt mu mv lx mw mx my mz bi translated">何时使用每一种</h2><p id="7aae" class="pw-post-body-paragraph lg lh it li b lj na ju ll lm nb jx lo lp nc lr ls lt nd lv lw lx ne lz ma mb im bi translated">就我的研究而言，使用规范化还是标准化更好还没有达成共识。我想每个数据集对转换的反应会不同。鉴于目前的计算能力，这是一个测试和比较的问题。</p><p id="ea91" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">关于对数转换，如果您的数据最初不是正态分布的，那么对数转换就不会使它成为正态分布。你可以变换它，但是你必须在以后反转它以得到实数作为预测结果，例如。</p><p id="9ada" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">普通最小二乘(OLS)回归方法——<em class="mc">计算最符合数据的线性方程，考虑误差的平方和最小</em>——是一个数学表达式，基于常数(截距值)加上系数乘以X加上<em class="mc">误差分量</em> ( <em class="mc"> y = a + bx + e)预测<em class="mc"> y </em>。</em>当这些误差呈正态分布时，OLS方法运行得更好，分析残差(预测值-实际值)是最好的<em class="mc">代理</em>。</p><p id="2f4d" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">当残差不遵循正态分布时，建议我们使用对数变换(或另一个Box-Cox幂变换)将自变量(目标)变换为正态分布。如果这还不够，那么您还可以尝试转换因变量，以更好地拟合模型。</p><p id="c6f8" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">因此，如果您正在使用线性模型并需要改善两个变量之间的线性关系，建议使用对数变换。有时变量之间的关系可以是指数关系，而对数是指数幂的逆运算，因此曲线在变换后就变成了直线。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/b74d0d2cb11fc46ba53e311f99e4a23b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-SoJRSbKmmVBnrei"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">对数变换后变成直线的指数关系。图片由作者提供。</p></figure><h2 id="d247" class="mh mi it bd mj mk ml dn mm mn mo dp mp lp mq mr ms lt mt mu mv lx mw mx my mz bi translated">在你走之前</h2><p id="4633" class="pw-post-body-paragraph lg lh it li b lj na ju ll lm nb jx lo lp nc lr ls lt nd lv lw lx ne lz ma mb im bi translated">我不是统计学家或数学家。我总是清楚地表明这一点，我也鼓励统计学家帮助我向更广泛的公众解释这一内容，尽可能简单的方式。</p><p id="36b5" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">如此密集的内容，用简单的文字来解释，并不容易。</p><p id="4f1f" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我将以这些参考文献结束我的发言。</p><p id="234c" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated"><a class="ae ky" href="https://stats.stackexchange.com/questions/18844/when-and-why-should-you-take-the-log-of-a-distribution-of-numbers" rel="noopener ugc nofollow" target="_blank">为什么要进行日志转换。</a></p><p id="ba8f" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated"><a class="ae ky" href="https://stats.stackexchange.com/questions/360323/does-applying-standard-normalisation-lead-to-normal-distribution" rel="noopener ugc nofollow" target="_blank">归一化和数据整形。</a></p><p id="3548" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated"><a class="ae ky" href="https://stats.stackexchange.com/questions/217953/data-normalization-or-not" rel="noopener ugc nofollow" target="_blank">正常化与否。</a></p><p id="607a" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated"><a class="ae ky" href="https://towardsai.net/p/data-science/how-when-and-why-should-you-normalize-standardize-rescale-your-data-3f083def38ff" rel="noopener ugc nofollow" target="_blank">何时规范化或标准化。</a></p><p id="1d29" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">如果这些内容有用，请关注我的博客。</p><p id="424b" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">如果您想通过订阅medium来支持我的内容，请使用此推荐链接:</p><div class="oj ok gp gr ol om"><a href="https://medium.com/gustavorsantos" rel="noopener follow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">古斯塔夫·桑托斯</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">让我们做出更好的决定。数据驱动的决策。我用Python，R，Excel，SQL创建数据科学项目。</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">medium.com</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa ks om"/></div></div></a></div></div></div>    
</body>
</html>