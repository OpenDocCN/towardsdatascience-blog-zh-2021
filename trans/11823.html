<html>
<head>
<title>How to Use SQL Cross Joins</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 SQL 交叉连接</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-use-sql-cross-joins-5653fe7d353?source=collection_archive---------8-----------------------#2021-11-25">https://towardsdatascience.com/how-to-use-sql-cross-joins-5653fe7d353?source=collection_archive---------8-----------------------#2021-11-25</a></blockquote><div><div class="fc ij ik il im in"/><div class="io ip iq ir is"><div class=""/><div class=""><h2 id="229c" class="pw-subtitle-paragraph js iu iv bd b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj dk translated">您从来不知道存在的 SQL 连接</h2></div><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi kk"><img src="../Images/c1436addcefdc906394cacd4a99d3f82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rFRMN8lIhu8cLMcrnV3vCA.jpeg"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">惠普科赫在<a class="ae la" href="https://unsplash.com/s/photos/weaving?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="e8ca" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">我一直在通读旧代码，并试图以更有效的方式重写它。我遇到过很多奇怪的逻辑，但对我来说最陌生的是交叉连接。</p><p id="515d" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">我使用过左连接、右连接和内连接，但从未使用过交叉连接。我总是把成为 SQL 忍者作为我的目标，所以很自然，我很好奇为什么我以前从来没有听说过这个。</p><p id="f50b" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">当我谷歌它是什么时，我发现它是“<strong class="ld iw">一种连接，从连接</strong>的表中返回行的笛卡尔乘积”。</p><p id="080a" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">交叉连接的结果最好用图片来解释。当您交叉连接表 1 和表 2 时，会得到如下所示的结果。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi lx"><img src="../Images/1a20ace771ec94c89a9a4d1f84e57f58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ppSG5EgwPZyiTQ3eWYNKZw.png"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">作者图片</p></figure><p id="879a" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">这里，第一个表中的第一列与第二个表中的每一列连接，产生三个新行，其组合如下:</p><ul class=""><li id="87f0" class="ly lz iv ld b le lf lh li lk ma lo mb ls mc lw md me mf mg bi translated">1 和 1</li><li id="a035" class="ly lz iv ld b le mh lh mi lk mj lo mk ls ml lw md me mf mg bi translated">1 和 2</li><li id="8bf1" class="ly lz iv ld b le mh lh mi lk mj lo mk ls ml lw md me mf mg bi translated">1 和 3</li></ul><p id="8d4d" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">因此，对于表 2 中的每一行，该值都与表 1 中的每个值相结合。</p><p id="cbe8" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">当我想到这个输出时，我想到了统计课上的经典组合问题。如果度假只允许带两双，有三种不同颜色的可能性，你能做出多少种不同的袜子组合？</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi lx"><img src="../Images/042c47c0f403dc31f7431f6820f97932.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fVw673ynGB3ESzV8ZfSIlA.png"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">作者图片</p></figure><p id="cfa5" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">对于每一双红色的鞋，你都可以搭配一双蓝色或绿色的。对于每一对绿色的，你可以把它和一对蓝色或红色的配对。对于每一双蓝色的，你可以把它和一双红色或绿色的配对。这类似于交叉连接的输出！</p><p id="aa3f" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">让我们看一个实际的 SQL 查询。假设我们有两个不同的表，代表教室里孩子的名字。一个写着女生名字，一个写着男生名字。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi mm"><img src="../Images/63308094103f285be1b9328ba84d5e2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pcssoHmbLeyggPdFPeApIA.png"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">作者图片</p></figure><pre class="kl km kn ko gt mn mo mp mq aw mr bi"><span id="add2" class="ms mt iv mo b gy mu mv l mw mx">SELECT<br/>   girls.name,<br/>   boys.name<br/>FROM girls <br/>CROSS JOIN boys</span></pre><p id="bdb2" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">当交叉连接女孩表和男孩表并从两个表中选择姓名时，您将得到如下所示的输出。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi mm"><img src="../Images/c1fae7547f37e9e6ea2725eff3057963.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ZdtaPkxd5GQaS4ST2tfZw.png"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">作者图片</p></figure><p id="abd2" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">你可以看到每个女孩的名字都与每个男孩的名字配对。您实际上是在两个表之间创建了一个很大的可能组合列表。</p><p id="b479" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">对于交叉连接，您还可以包含一个指定某种连接条件的<code class="fe my mz na mo b">where</code>子句。这在处理数字列时最为常见。</p><pre class="kl km kn ko gt mn mo mp mq aw mr bi"><span id="8d4b" class="ms mt iv mo b gy mu mv l mw mx">SELECT<br/>   schedule.event,<br/>   calendar.number_of_days<br/>FROM schedule<br/>CROSS JOIN calendar<br/>WHERE schedule.total_number &lt; calendar.number_of_days</span></pre><p id="2bc5" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">这里，查询将只连接<code class="fe my mz na mo b">schedule</code>表中的行和<code class="fe my mz na mo b">calendar</code>表中满足指定条件的行。</p><p id="f0bf" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">当您添加<code class="fe my mz na mo b">where</code>子句时，交叉连接的行为类似于<code class="fe my mz na mo b">inner join</code>，除了您没有在任何指定的列上连接它。交叉连接查询中不需要 on 语句！</p><p id="7f66" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">现在，这种连接似乎是低效的。然而，它实际上比解决我们在这里试图做的事情的大多数其他逻辑运行得更快。我决心找到一个更好的交叉连接的解决方案，但我找不到。</p><p id="e037" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">所以，也就是说，如果你知道一个运行更快的技巧，请在下面的评论中留下你的建议。</p><p id="4c86" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">如果你有兴趣学习更多关于 SQL 的知识，可以看看我写的关于<a class="ae la" rel="noopener" target="_blank" href="/how-to-use-sql-window-functions-5d297d29f810">窗口函数</a>、<a class="ae la" rel="noopener" target="_blank" href="/how-to-use-sql-rank-and-dense-rank-functions-7c3ebf84b4e8">排名</a>和<a class="ae la" rel="noopener" target="_blank" href="/top-skills-to-ace-every-sql-interview-question-33356b08845a">面试问题</a>的文章。</p></div></div>    
</body>
</html>