<html>
<head>
<title>Data as Code — Achieving Zero Production Defects for Analytics Datasets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据即代码—实现分析数据集的零生产缺陷</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-as-code-achieving-zero-production-defects-for-analytics-datasets-824251339952?source=collection_archive---------22-----------------------#2021-05-04">https://towardsdatascience.com/data-as-code-achieving-zero-production-defects-for-analytics-datasets-824251339952?source=collection_archive---------22-----------------------#2021-05-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="9ccb" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/notes-from-industry" rel="noopener" target="_blank">行业笔记</a></h2><div class=""/><div class=""><h2 id="456b" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">如何应用真实数据作为代码哲学，使用软件开发中关于数据的可靠方法来实现接近零的产品缺陷。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/20b91ead6a244ef7a9f5eac697c04f22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8u5A7BnX4q-L98xxLydEtQ.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">是的，零缺陷！那太棒了。图片由作者提供。</p></figure><p id="dbc8" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">数据团队将近60%的时间花在运营上，而不是创造价值。根据<a class="ae md" href="https://medium.com/data-ops/add-dataops-tests-for-error-free-analytics-741ee48bd5cc" rel="noopener">数据厨房研究&amp;园丁调查</a>，他们的数据系统也经历了大量的错误。<strong class="lj jd">然而，在软件开发世界中，我们已经有了哲学，允许高性能的团队快速且高质量地交付，没有任何这些问题。</strong></p><p id="530e" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">那么我们为什么不延续完全相同的做法呢？毕竟，它们起源于精益制造领域，并且已经被带到了软件领域。这就是应该称之为<strong class="lj jd"> <em class="me">的数据为</em> </strong>。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><p id="6ba0" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">让我们看看来自软件世界的工具和实践如何转移到一个简单的例子，一个EL (T)工作流，并使我们的示范团队能够:</p><ol class=""><li id="e7f5" class="mm mn it lj b lk ll ln lo lq mo lu mp ly mq mc mr ms mt mu bi translated">将平均恢复时间(MTTR)缩短至几分钟(或几秒钟)。</li><li id="f793" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc mr ms mt mu bi translated">增加“数据部署”和测试的频率</li><li id="cd2d" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc mr ms mt mu bi translated">将失败率(生产错误的相对数量)更改为0%左右</li></ol><p id="f630" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果你想知道为什么我们要看这三个指标，这是四个指标中的三个，这四个指标是<a class="ae md" href="https://www.thoughtworks.com/radar/techniques/four-key-metrics" rel="noopener ugc nofollow" target="_blank">区分高绩效团队和一般团队的</a>。听起来是个不错的目标，对吧？</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><p id="4724" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd"> <em class="me">警告</em> </strong> <em class="me">，这才是真正的“数据如码”，而不仅仅是“啊对了，请版本化数据。这看起来有点奇怪，这就是为什么我要用一个例子。强调为什么这种数据生产流程会产生接近0%的生产缺陷。</em></p><h1 id="fa52" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">我们的例子，数据Ingestors丹，戴夫，达纳</h1><p id="cce9" class="pw-post-body-paragraph lh li it lj b lk ns kd lm ln nt kg lp lq nu ls lt lu nv lw lx ly nw ma mb mc im bi translated">让我介绍三个朋友:丹、戴夫和黛娜。他们三个都是数据感应器。机器。Dan和Dave是“REST吸入器”的实例，Dana是“Salesforce API吸入器”的实例。</p><p id="8cd5" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">他们三个都可以使用数据git，一个可以由lakeFS这样的解决方案托管的数据git。他们可以使用它，就像任何人类开发人员使用他们的代码库一样。</p><p id="a068" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">丹、戴夫和达娜是优秀的开发人员。他们坚持持续集成的所有好原则，经常提交，本地测试，等等…</p><p id="2977" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><em class="me">旁注:为什么我要提到lakeFS？因为与其他工具一样，lakeFS操作并不是数据的实际复制，而主要是元数据操作。因此，下面提到的复制操作实际上只需要几秒钟，即使是万亿字节的数据。</em></p><h1 id="08bb" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">EL (T)数据流</h1><p id="0372" class="pw-post-body-paragraph lh li it lj b lk ns kd lm ln nt kg lp lq nu ls lt lu nv lw lx ly nw ma mb mc im bi translated">我们的数据流非常简单。我们将一个REST API用于“订单”,而Salesforce API使用一些公共转换工具将这两个源连接在一起，并获得一些由典型的客户相关数据划分的客户统计数据。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nx"><img src="../Images/d84640de3f1f4087c055aa0c8fd352bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*I-tu8Ki7Wul-VyYj"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供。</p></figure><h1 id="c042" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">我们的参考工作流性能</h1><p id="e7b3" class="pw-post-body-paragraph lh li it lj b lk ns kd lm ln nt kg lp lq nu ls lt lu nv lw lx ly nw ma mb mc im bi translated">我们的参考工作流程很简单:</p><ul class=""><li id="8aee" class="mm mn it lj b lk ll ln lo lq mo lu mp ly mq mc ny ms mt mu bi translated">数据入口设置为每小时接收一次数据。</li><li id="ecc0" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc ny ms mt mu bi translated">其余的ingestors只有一个源，但它很大，所以并行化到N=2</li><li id="814a" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc ny ms mt mu bi translated">摄取的数据放在一个“原始表”中，并在运行后使用诸如great-expectations这样的工具进行测试。</li><li id="b0ad" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc ny ms mt mu bi translated">如果原始源代码中有一个错误，只有那部分会被暂停，开发人员必须检查并可能修复它。</li></ul><p id="074b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果生产中出现问题，例如创建“客户表”的转换(是的，我知道我们可以在它上面有一个物化视图)，那么我们就丢失了客户数据。<strong class="lj jd">恢复</strong>是指删除数据/修复一些数据问题，然后重新运行一次转换= &gt; <em class="me">，以30分钟到一个小时</em>来衡量。在一般的公司里，这种情况一个月会发生几次。</p><p id="09cc" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这已经描述了典型数据设置中的上述指标。</p><p id="1655" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">现在，让我们来看看Dan、Dave &amp; Dana的智能版本与我们的参考工作流程有何不同！</strong></p><p id="d268" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi">— — — —</p><p id="a72c" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">丹、戴夫&amp;达娜……</p><h1 id="f627" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">Dana提交Salesforce API客户数据</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nz"><img src="../Images/beba002e434d701bf79c99fb19f2b1be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1WBVf5OZbZckb46k"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供。</p></figure><p id="e00b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">Dana知道好数据的关键是“经常承诺”。这样，错误很快就被发现，并被控制在一个很小的“爆炸半径”内。所以她<strong class="lj jd">每5分钟跑一次</strong>。</p><p id="a2f4" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在她“运行”之前，她通过在lakeFS“danar unx 2021–01–01–101”中创建一个分支，将“数据存储库”克隆到她的本地系统中(不是真正的本地系统，但是让我们保持类比)，该分支受到保护并且仅对她可见。</p><p id="a95e" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">当她运行时，她接收数据，然后提交给她的个人分支。</p><p id="c712" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">她没有将数据推送到生产系统的原始表中，<strong class="lj jd">而是将它们“本地”</strong>保存一分钟，并使用这个名为“great-expectations”的酷工具运行测试，该工具运行一系列基本测试，如“非空”等。并检查原始数据的异常值和变化的分布。</p><h1 id="f8fa" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">首次改进本地测试</h1><p id="0bc9" class="pw-post-body-paragraph lh li it lj b lk ns kd lm ln nt kg lp lq nu ls lt lu nv lw lx ly nw ma mb mc im bi translated">当测试中断时会发生什么？Dana对此无能为力(…然而，她毕竟不是机器学习系统之类的东西…)，所以它只是保持原样，而人类开发人员会收到通知说<em class="me">danar unx 2021–01–01–10</em>1失败了。</p><p id="fdcc" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">人类开发人员现在可以检查分支，并在不干扰生产数据的情况下调查问题。</p><p id="9bd6" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">生产数据会发生什么变化？</p><ul class=""><li id="ec98" class="mm mn it lj b lk ll ln lo lq mo lu mp ly mq mc ny ms mt mu bi translated">所有系统保持运行。</li><li id="b4f6" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc ny ms mt mu bi translated">再过5分钟，Dana将下一个数据块带到<em class="me">danar unx 2021–01–01–102</em>并运行她的新测试。</li><li id="6f3f" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc ny ms mt mu bi translated">如果数据错误还没有修复，数据就不在主分支中，所以测试通过了，新数据就在那里。</li><li id="de63" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc ny ms mt mu bi translated">大家都很开心。</li></ul><p id="3426" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">感觉有点像一个中转区，损坏的数据在这里得不到处理，对吗？</p><p id="101b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">接下来会发生什么？</p><h1 id="74e9" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">推到母版上</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oa"><img src="../Images/577349f993a0c02162394beeb2450b4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*npgVLEPOppeJe38y"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供。</p></figure><p id="58d2" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">然后，Dana继续将她的数据放入原始存储库中。自动创建并批准一个合并请求，再次运行测试，并将数据推送到常规的升级订单中。</p><p id="18ce" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">让我们称数据为<strong class="lj jd"> dartifact </strong>，因为它现在实际上是一个“数据工件”，或者更像是一个“飞镖”,从生产环境返回到某个中央git存储库和CI服务器。</p><h1 id="9c09" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">到舞台环境中</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nx"><img src="../Images/3bd4349476087a99e26404c3bd7326ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CMMG_3VvaFvX7jJG"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供。</p></figure><p id="61a5" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">接下来不是生产环境，毕竟Dana是一个很棒的开发者。她知道她必须将自己的数据集成到其他数据中，就像她刚刚做的那样，还要集成到其他组件中。</p><p id="3b49" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">因此，数据一旦被推入中央存储库，就被提升到一个暂存环境。这个登台环境还用于测试和集成所有软件组件。因此，它运行着我们最新版本的数据转换工具。</p><p id="4a09" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在，我们的CI服务器可以执行一系列集成测试，这意味着运行数据转换工具并执行其测试。</p><p id="9e03" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">为了让这个工作流与lakeFS一起工作，我们必须滥用分支机制，至少调用一个分支“env-staging ”,并给予它特殊的访问权限保护，就像它只能通过集成组件访问一样，等等。当然，这也可以在lakeFS API级别上处理，这可能是最好的方法。</p><h1 id="05b8" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">试运行环境中的二次改进集成测试</h1><p id="5930" class="pw-post-body-paragraph lh li it lj b lk ns kd lm ln nt kg lp lq nu ls lt lu nv lw lx ly nw ma mb mc im bi translated">当测试中断时会发生什么？</p><p id="9cd4" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">开发人员在显示器上的常规<strong class="lj jd">信息辐射器</strong>上得到通知，这是任何使用CI的团队都应该在中心位置拥有的。</p><p id="9d4f" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">东西修好了，我们的生产系统也没有问题了。其他数据只是流过有问题的部分。</p><p id="fb60" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">最重要的是，我们还将最新的dbt模型与新数据进行集成，然后再投入生产。</p><h1 id="f783" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">等等，但是我们的数据太大了，无法运行两次转换</h1><p id="ef70" class="pw-post-body-paragraph lh li it lj b lk ns kd lm ln nt kg lp lq nu ls lt lu nv lw lx ly nw ma mb mc im bi translated">如果转换时间太长，我们该怎么办？那就有多种选择了！</p><p id="a8af" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们已经创造了数据“dartifact”。这意味着，我们可以像对待任何其他通过我们的促销订单的软件工件一样对待它。例如，我们可以将我们的数据与某种配置一起提交，这些配置只一起构成dartifact。</p><p id="e0d7" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">一种可能的配置是:对真实数据的采样机制保持分布完整，但仍然使它在登台环境中变得更小。</p><p id="d045" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">或者它可以是一个数据掩码，如果在分段环境中需要的话，它可以屏蔽个人信息。</p><h1 id="ef5e" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">提升到生产</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nx"><img src="../Images/3efd305a61282b4d95c18746c9544322.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YkMQncp52KZVG22U"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由作者提供。</p></figure><p id="0e56" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">最后，Dana可以将她的数据推广到生产中。多亏了今天可用的令人敬畏的自动化，这实际上只需要几分钟。</p><p id="322c" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">但是由于Dana仍然是一个聪明的开发人员，所以她没有直接提升到生产环境。相反，她做了一个“蓝绿色部署”，这意味着她将新的dartifact推入lakeFS中的第二个分支“production-blue”。</p><p id="c0aa" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">然后，她对数据进行一系列冒烟测试，然后才慢慢地将生产流量从“绿色生产”切换到“蓝色生产”。</p><h1 id="e5fd" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">第三项改进产品冒烟测试和即时回滚</h1><p id="3cf9" class="pw-post-body-paragraph lh li it lj b lk ns kd lm ln nt kg lp lq nu ls lt lu nv lw lx ly nw ma mb mc im bi translated">如果东西坏了怎么办？如果冒烟测试失败，则一切正常，不会影响生产流量。</p><p id="1de8" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果它真的崩溃了，那么我们仍然有一个超级简单的回滚选项，我们可以在lakeFS之上的任何CI中实现它。只需将旧的dartifact重新部署到我们的生产分支，或将生产流量切换回旧的工作分支“绿色生产”。</p><p id="d83c" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们仍然需要回滚主分支，以防止将来的合并再次破坏生产系统。</p><h1 id="f35e" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">丹和戴夫怎么办？</h1><p id="7820" class="pw-post-body-paragraph lh li it lj b lk ns kd lm ln nt kg lp lq nu ls lt lu nv lw lx ly nw ma mb mc im bi translated">丹和戴夫遵循相同的工作流程。除此之外，有人忘记在他们的系统中设置“本地测试”选项。</p><p id="fb09" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">有问题吗？不会，因为一旦他们将数据提交给master，并将其推送到原始存储库，它就会被集成，从而被测试。有人会抓住它，实施本地测试，并感到高兴。</p><p id="4263" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">此外，由于两者并行工作，数据确实需要被集成，测试必须在中央存储库中再次运行，在那里它们的两个数据版本被合并在一起。</p><h1 id="206b" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">看看这些数字</h1><p id="5a77" class="pw-post-body-paragraph lh li it lj b lk ns kd lm ln nt kg lp lq nu ls lt lu nv lw lx ly nw ma mb mc im bi translated">与我们的参考工作流相比，看看此工作流实现了什么:</p><ol class=""><li id="19d9" class="mm mn it lj b lk ll ln lo lq mo lu mp ly mq mc mr ms mt mu bi translated"><strong class="lj jd">平均恢复时间:</strong>在参考工作流中，从30分钟到1小时不等。对我们来说，如果数据真的中断了，我们只需切换lakeFS中的一个分支。这是一个元数据操作，意味着它需要几秒钟才能到达一个正在运行的系统。由于事先进行了密集的测试，而且块很小，修复也非常快。</li><li id="1ec7" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc mr ms mt mu bi translated"><strong class="lj jd">变更失败率:</strong>由于我们在新工作流程中有4个测试层，与参考工作流程中的1-2个相比，我们将变更失败率降低到接近0。</li><li id="4c2c" class="mm mn it lj b lk mv ln mw lq mx lu my ly mz mc mr ms mt mu bi translated"><strong class="lj jd">数据部署的频率:</strong>在我们的参考工作流中是每小时一次，这里是每5分钟一次。是的，这是真的，在参考工作流中也可能是5分钟，如果我们放任不管的话。到5分钟意味着减少修复某个东西所花的时间，因为可能的错误区域要小得多。</li></ol><h1 id="4a54" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">转换工具呢？</h1><p id="6d04" class="pw-post-body-paragraph lh li it lj b lk ns kd lm ln nt kg lp lq nu ls lt lu nv lw lx ly nw ma mb mc im bi translated">当然，现在我们把数据作为代码，就像基础设施作为代码一样，我们必须把东西集成在一起。这意味着一旦提交了变更，dbt工具也将触发针对数据的集成测试。</p><p id="37a6" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">推入存储库的新转换也是如此。</p><h1 id="8e57" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">这不是又贵又慢吗？</h1><p id="4cbd" class="pw-post-body-paragraph lh li it lj b lk ns kd lm ln nt kg lp lq nu ls lt lu nv lw lx ly nw ma mb mc im bi translated">如上所述，成本是可调整的和相对的。同样显而易见的是，实际上一直移动数据是没有意义的。相反，像lakeFS这样的工具或任何其他类似的工具都非常适合，因为这些工具处理根本不移动数据的元数据操作。</p><p id="989b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">当然，就像通常的软件开发一样，对于每种情况，在提交大小和获得满足我们对数据的要求的度量的时间间隔之间都有一个最佳点。</p><p id="49e2" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">可能仍然需要一些技术创新，如更好的数据CI工作流，但该流程已经可以用现有的技术很好地实现。</p><p id="b07f" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">的确，如果你的目标是尽可能便宜地获取数据，那么这种工作流程不是你要找的…</p><p id="2d1f" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><em class="me">但考虑到“数据是世界上最宝贵的资产”，我敢肯定，在快速交付</em><strong class="lj jd"><em class="me"/></strong><em class="me"/><strong class="lj jd"><em class="me">高质量</em> </strong> <em class="me">上多花一点钱是值得的。</em></p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><p id="4604" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><em class="me">对如何建立伟大的数据公司、伟大的数据密集型产品、成为伟大的数据团队感兴趣，还是对如何利用开源构建伟大的东西感兴趣？然后考虑加入我的</em> <a class="ae md" href="http://thdpth.com/" rel="noopener ugc nofollow" target="_blank"> <em class="me">免费简讯《三个数据点周四》</em> </a> <em class="me">。它已经成为数据初创企业、风投和数据领导者值得信赖的资源。</em></p></div></div>    
</body>
</html>