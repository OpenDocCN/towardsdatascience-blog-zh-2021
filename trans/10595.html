<html>
<head>
<title>Darts’ Swiss Knife for Time Series Forecasting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">时间序列预测的飞镖瑞士刀</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/darts-swiss-knife-for-time-series-forecasting-in-python-f37bb74c126?source=collection_archive---------2-----------------------#2021-10-11">https://towardsdatascience.com/darts-swiss-knife-for-time-series-forecasting-in-python-f37bb74c126?source=collection_archive---------2-----------------------#2021-10-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="cfa1" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a></h2><div class=""/><div class=""><h2 id="975e" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">一个多方法Python包，用于在您的时间序列上运行比赛</h2></div><p id="cd9b" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">一步一步的教程，教你如何用<em class="ln">飞镖</em>建立一个单独的Python脚本——然后通过几种替代方法运行你的源时间序列，在模型中找到最适合的，类似锦标赛的。</p><p id="fd4f" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在本例中，我们将对源数据运行五种预测方法，然后比较它们的准确性。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi lo"><img src="../Images/3efba3aafb5f298df61edf6ed6d48290.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Be6UlGhLOemTa2eD6DNedA.jpeg"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作者图片</p></figure><p id="cb8d" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><em class="ln"> Darts </em>嵌入了我们从更专业的Python包中知道的大多数广泛使用的时间序列预测方法。其中，它包装了<em class="ln"> facebook Prophet </em>模型和<em class="ln"> pmdarima的</em>自动arima包。<em class="ln"> Darts </em>也实现了几种神经网络架构。</p><ul class=""><li id="04b2" class="me mf it kt b ku kv kx ky la mg le mh li mi lm mj mk ml mm bi translated">指数平滑法</li><li id="62be" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">天真的漂移+季节性预测</li><li id="95c8" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">(自动)SARIMAX</li><li id="2d72" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">㈤ARIMA</li><li id="d3eb" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">θ方法</li><li id="6e6b" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">facebook先知</li><li id="4cde" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">线性回归</li><li id="4fca" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">递归神经网络，如香草RNN，LSTM和GRU</li><li id="fda3" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">时间卷积网络TCN</li><li id="ae4e" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">快速傅立叶变换FFT</li><li id="f0a6" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">神经基扩展分析时间序列预测N拍</li></ul><p id="d631" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">所有这些模型在单个库中的组合大大减少了安装和维护单独应用程序的痛苦；以及努力建立几种可供选择的预测方法。Darts提供了一个相当全面的包，我们可以用几行代码调用多个模型，以确定最佳拟合方法或构建集合预报。</p><p id="65b2" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><em class="ln"> Darts </em>是由总部位于瑞士的数据分析和人工智能公司unit8开发的开源包。(除了安装pip<em class="ln">飞镖</em>之外，我与unit8没有任何关系或联系)</p><h1 id="bf79" class="ms mt it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated">得一个例子。省道的安装</h1><p id="6d11" class="pw-post-body-paragraph kr ks it kt b ku nk kd kw kx nl kg kz la nm lc ld le nn lg lh li no lk ll lm im bi translated">和往常一样，您应该在尝试安装一个庞大的Python包之前创建一个新的虚拟环境，这个包有许多依赖项，比如<em class="ln"> Darts的</em>。您希望避免基础环境中的现有软件包因新安装而降级或升级。</p><p id="5ce0" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在<em class="ln"> Anaconda </em>中创建一个虚拟环境:</p><ul class=""><li id="a6ab" class="me mf it kt b ku kv kx ky la mg le mh li mi lm mj mk ml mm bi translated">conda create--name<your_chosen_env_name>python = 3.7</your_chosen_env_name></li></ul><p id="75be" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">请注意，我在使用fbProphet组件时遇到了困难，但是已经解决了。虽然我的基本环境运行在Python 3.8.8上，并且大多数<em class="ln"> Darts </em>组件都接受它，但我发现我必须建立一个Python 3.7环境，显然是为了适应<em class="ln"> fbProphet </em>。<em class="ln"> Prophet </em>和<em class="ln"> PyTorch </em>具有非Python依赖关系，因此如果试图并行安装所有组件时出现错误消息，安装可以在一个<em class="ln"> Darts </em>核心包和额外组件之间进行。</p><p id="4ba5" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">关于安装的附加信息:<a class="ae np" href="https://pythonrepo.com/repo/unit8co-darts-python-machine-learning" rel="noopener ugc nofollow" target="_blank">一个python库，用于时间序列的简单操作和预测。| PythonRepo </a></p><p id="7299" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">将<em class="ln">飞镖</em>与<em class="ln">所有</em>其延伸部分<em class="ln"> fbProphet进行pip安装；pmdarima </em>(针对SARIMAX)；<em class="ln"> </em>和<em class="ln"> PyTorch </em>(用于神经网络)——使用命令:</p><ul class=""><li id="0153" class="me mf it kt b ku kv kx ky la mg le mh li mi lm mj mk ml mm bi translated"><em class="ln"> pip安装' u8darts[all]' </em></li></ul><p id="9c9a" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">如果你遇到问题，你可以先安装飞镖而不需要额外的东西:</p><ul class=""><li id="3447" class="me mf it kt b ku kv kx ky la mg le mh li mi lm mj mk ml mm bi translated"><em class="ln"> pip安装u8飞镖</em></li></ul><p id="e3d8" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">然后尝试逐步添加额外内容:</p><ul class=""><li id="fdc7" class="me mf it kt b ku kv kx ky la mg le mh li mi lm mj mk ml mm bi translated">pip安装<em class="ln"> 'u8darts[fbprophet]' </em></li><li id="fc66" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">pip安装<em class="ln"> 'u8darts[pmdarima]' </em></li><li id="19f1" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">pip安装<em class="ln">' u8飞镖【火炬】'</em></li></ul><p id="6504" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><em class="ln"> Pmdarima </em>和<em class="ln"> PyTorch </em>没有在我的机器上造成任何安装问题。</p><h1 id="6924" class="ms mt it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated">得了。属国</h1><p id="a0a9" class="pw-post-body-paragraph kr ks it kt b ku nk kd kw kx nl kg kz la nm lc ld le nn lg lh li no lk ll lm im bi translated">在本教程中，我们将导入七个<em class="ln">飞镖的</em>预测模型:</p><ul class=""><li id="0564" class="me mf it kt b ku kv kx ky la mg le mh li mi lm mj mk ml mm bi translated">天真，</li><li id="d502" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">先知，</li><li id="3fca" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">指数平滑，</li><li id="8362" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">ARIMA，我们将与ARIMA汽车公司合并，</li><li id="9279" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">θ法。</li></ul><p id="d604" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们还导入了一个<em class="ln"> Darts </em>预测准确性度量库以及Box-Cox转换器；以及公共领域数据集的目录，这些数据集被构建到Darts中，并且可以被加载而不需要处理外部文件。</p><p id="4ee1" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在本教程中，我们将重点关注Box &amp; Jenkins的经典月度航空乘客数据集。</p><p id="590d" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">对于预测前和预测后诊断，我还将利用从<em class="ln"> pmdarima </em>和<em class="ln"> statsmodels </em>导入的一些假设检验。<em class="ln"> Darts </em>主要依靠其图表提供的视觉线索来评估时间序列属性，比如正态性。由于Python代码本身不容易解释图表，而是需要用户决定如何继续，所以我添加了一些测试来自动化工作流。</p><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="5376" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在dependencies单元格的底部，我们插入几个常量作为默认参数。最重要的常数是训练数据集的截止日期。</p><p id="551a" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在我们的航空客运例子中，我选择1957年5月1日作为测试期的开始；它延伸到1960年。</p><h1 id="dc9e" class="ms mt it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated">1.数据加载和争论</h1><p id="e81c" class="pw-post-body-paragraph kr ks it kt b ku nk kd kw kx nl kg kz la nm lc ld le nn lg lh li no lk ll lm im bi translated">在下一个单元格中，我们加载航空公司数据集。你可以看到几个源代码——都内置在<em class="ln"> Darts </em>包中——我通过在它们前面加上注释指示符#来暂时停用它们。</p><p id="5bb5" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">与<em class="ln">熊猫</em>不同，<em class="ln">飞镖</em>不会将数据集加载到传统的数据帧中。相反，源数据被分配给变量<em class="ln"> ts </em>，一个<em class="ln">时间序列</em>对象(第3行)。</p><p id="8dca" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">如果数据集包含一个以上的序列，如果我们希望将下一步限制在多个列中的一个单变量时间序列，我们可以选择一个列并将其分配给一个series对象。我们的数据集只包含乘客人数，因此第12行将<em class="ln"> ts </em>变量全部赋给序列变量<em class="ln"> series </em>。</p><p id="5581" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">对于Pandas中的数据争论，我们可以通过应用函数<em class="ln">将这个timeseries对象转换成dataframe。pd_dataframe() </em>(第13行)。</p><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="eaee" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">让我们回顾一下原始数据。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/b05a442fd3bd4c92a386594084168559.png" data-original-src="https://miro.medium.com/v2/resize:fit:578/format:webp/1*I5c7uR8b18aX-YQ_Kan5IQ.png"/></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作者图片</p></figure><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作者图片</p></figure><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/a01cc3957c0d902a74db2de9c5268930.png" data-original-src="https://miro.medium.com/v2/resize:fit:596/format:webp/1*CvA-zbWHuuqRsC2_tNr5vg.png"/></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作者图片</p></figure><p id="4d9a" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">为了处理任何丢失的数据或零，我选择应用<em class="ln">的<em class="ln">回填</em>方法。fillna() </em>函数。</p><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="dcd3" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">让我们绘制源数据。</p><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div></figure><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi nu"><img src="../Images/2fb137c72501e220e94e524dcf0a02d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AxWFmyfluIFOHSC4l6CW_A.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作者图片</p></figure><p id="49ff" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">该图在每个日历年都有一个峰值，显示了月度季节性。让我们做个测试来确认视觉线索。</p><h1 id="e63f" class="ms mt it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated"><strong class="ak"> 2。诊断</strong></h1><p id="3eb6" class="pw-post-body-paragraph kr ks it kt b ku nk kd kw kx nl kg kz la nm lc ld le nn lg lh li no lk ll lm im bi translated">便利的是，与许多其他套装不同，<em class="ln"> Darts </em>提供了一个检查季节性的测试。它返回一个布尔值<em class="ln"> is_seasonal </em>以及季节订单号<em class="ln"> mseas </em>(例如，<em class="ln"> mseas </em> =12表示一个日历年中的几个月)<em class="ln">，</em>，它是通过评估时间序列的相关图(ACF)找到的。</p><p id="f8ce" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们将把测试发现的季节性输入到预测模型中。</p><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div></figure><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi nv"><img src="../Images/1e673fe12b72c7f7c17618573d7ac44b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q2tEYl0kwvT6PrHuFLceMw.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作者图片</p></figure><h1 id="e6cd" class="ms mt it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated">3.训练和验证数据集</h1><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="66b6" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><em class="ln"> Darts </em>提供了几种在训练和测试(验证)数据集之间分割源数据的替代方法。</p><p id="2124" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在脚本顶部的dependencies单元格中，我导入了<em class="ln"> numbers </em>库。我使用<em class="ln"> isinstance() </em>函数来检查限制器的类型，我们在依赖关系中将它定义为常量<em class="ln"> TRAIN </em>。根据源数据的不同，<em class="ln">序列</em>可能会对数字索引、日期时间类型的日期或字符串类型的日期进行编码。</p><ul class=""><li id="65e5" class="me mf it kt b ku kv kx ky la mg le mh li mi lm mj mk ml mm bi translated">如果限制器不是一个数字而是一个类似“19571201”的字符串，我们需要使用<em class="ln"> pd。Timestamp </em>方法将其转换为可识别的日期，以供<em class="ln">飞镖</em>使用。</li><li id="e3fc" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">如果限制器是数字，<em class="ln"> Darts </em>检查它是否是整数，例如120——如果是，训练数据集将在该索引号之前结束，即索引#120的行；</li><li id="6b93" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">如果限定符是一个浮点数，Darts将尝试把它解释为一个日期，例如1957–12–1。在我们当前的例子中，我们已经通过输入<em class="ln"> datetime.datetime(1957，5，1)将<em class="ln">列车</em>限制器定义为一个日期时间浮点数。日期()</em>函数。</li></ul><p id="f0d8" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在我们脚本的顶部单元格中，我插入了一个常量<em class="ln"> TRAIN </em>，在其中我设置了日期或索引，在这个日期或索引处，源数据将在训练和测试期间被分割。<em class="ln">序列</em>中的值的类型取决于源数据中的日期或索引列。在脚本中，您可以看到<em class="ln">火车的替代定义— </em>暂时被#注释掉了—我们将用于不同的源数据。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi nw"><img src="../Images/ed3366bbd70027e65af17879f4fc676b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2iAD1k5qxgm7OSlBPdwoBA.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作者图片</p></figure><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi nx"><img src="../Images/ed1c6a280517ea2f702bf5551ddd49fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DLKDi7d9qr1vNTZ6LkxqOA.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作者图片</p></figure><h1 id="cd89" class="ms mt it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated">4.预测</h1><h2 id="dda3" class="ny mt it bd mu nz oa dn my ob oc dp nc la od oe ne le of og ng li oh oi ni iz bi translated">4.1预测功能</h2><p id="a7a0" class="pw-post-body-paragraph kr ks it kt b ku nk kd kw kx nl kg kz la nm lc ld le nn lg lh li no lk ll lm im bi translated">我们定义了一个函数<em class="ln"> eval_model() </em>，它将一次采用一种预测方法(并按顺序采用几个模型)并将它应用于源数据。</p><p id="114b" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><em class="ln"> eval </em>函数使模型符合训练数据集，然后计算估价期的预测值(第9-10行)。这两行完成了大多数方法的所有预测工作。</p><p id="9c92" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">对于<em class="ln">简单的</em>预测方法，我们需要插入一些额外的代码(第13 -19行)。天真的预测实际上由两种方法组成，我们将这七种方法联系在一起:天真的漂移预测和天真的季节性预测。</p><ul class=""><li id="af1e" class="me mf it kt b ku kv kx ky la mg le mh li mi lm mj mk ml mm bi translated"><em class="ln">漂移</em>方法只取第一个和最后一个观察值，并在它们之间画一条线。</li><li id="50e2" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated"><em class="ln">季节性</em>方法预测K步之前出现的值(其中K代表季节性，例如K=12代表月份)将在K步之后再次出现。</li><li id="3e01" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">通过结合<em class="ln">漂移</em>和<em class="ln">季节性</em>，我们得到了一个过于简单，或者说是天真的预测，即这两种模式将继续重演。</li></ul><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="b654" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><em class="ln"> eval_model() </em>代码单元中的第三部分计算由<em class="ln"> Darts </em>提供的预测精度指标，并将它们收集到字典<em class="ln"> res_accuracy </em>中。</p><p id="302c" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们将预测值<em class="ln"> forecast </em>和指标<em class="ln"> res_accuracy </em>组合在一个列表<em class="ln"> results </em>中，并将该列表返回给调用预测函数的代码。</p><h2 id="c665" class="ny mt it bd mu nz oa dn my ob oc dp nc la od oe ne le of og ng li oh oi ni iz bi translated">4.2五种预测方法</h2><p id="1be7" class="pw-post-body-paragraph kr ks it kt b ku nk kd kw kx nl kg kz la nm lc ld le nn lg lh li no lk ll lm im bi translated">在列表<em class="ln">模型</em>中，我们准备了所有<em class="ln">飞镖</em>模型的列表，我们希望为这些模型运行预测函数<em class="ln"> eval_models() </em>。我们将当前的练习限制为五种可选方法。</p><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="8cc9" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">列表理解<em class="ln">模型预测</em>遍历<em class="ln">模型</em>列表，并将每个模型馈送给<em class="ln"> eval_model() </em>函数。</p><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="d3e1" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在<em class="ln"> model_predictions </em>将模型传递给评估函数之前，我们需要为预测器设置它们特定的开始参数。为了这个目的。我们为每个预测者定义一个<em class="ln">模型</em>变量<em class="ln"> m_xxx </em>。</p><p id="e408" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd"> <em class="ln"> 4.2a天真预测</em> </strong></p><p id="f77e" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd"><em class="ln">naive drift()</em></strong><em class="ln"/>方法不需要<em class="ln"> </em>参数。<em class="ln"> </em>它只是从序列中取出第一个和最后一个值，并在它们之间画一条直线趋势线。</p><p id="2604" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">它的近亲，<em class="ln"> NaiveSeasonal() </em>，要求一个季节性参数，在我们的例子中K = 12个月。<em class="ln">Darts check _ seasonity()</em>函数已经确定了季节性<em class="ln"> mseas </em>，12在我们的例子中，我们将把它分配给k。</p><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="d121" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd"><em class="ln">4.2b</em></strong><strong class="kt jd"><em class="ln">指数平滑</em> </strong></p><p id="05c9" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">像SARIMA一样，指数平滑需要知道季节性的顺序，<em class="ln"> mseas </em>，我们已经在上面计算过了。</p><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="3ce4" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd"> <em class="ln"> 4.2c先知</em> </strong></p><p id="9e24" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd"><em class="ln">Facebook Prophet</em></strong>模型可以在其设置中采用可选的季节性参数，但也可以自行确定季节性。</p><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="fe99" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd"> <em class="ln"> 4.2d SARIMAX </em> </strong></p><p id="1e81" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">对于<strong class="kt jd"> <em class="ln">萨里玛</em> </strong>，我跳过了一个额外的环，着眼于平稳性和差异性。额外的代码在<em class="ln">飞镖</em>中并不是绝对必要的，但它是一个故障保护装置。</p><p id="970c" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">省道包裹<em class="ln">PMMA</em>自动arima法。它的调整算法应该在开始网格搜索其他超参数之前应用假设测试来确定差分的适当顺序。</p><p id="50fe" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><em class="ln"> Darts </em>通过<em class="ln"> pmdarima </em>为分析师提供了两种平稳性测试的选择，ADF和KPSS，默认为KPSS。但是ADF和KPSS可能在差异的必要性上存在分歧，而且这种情况并不少见。ADF检验和KPSS检验都不会孤立地证实或破坏平稳性。</p><p id="6561" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">KPSS和ADF测试结果有四种可能的组合:</p><ul class=""><li id="fd96" class="me mf it kt b ku kv kx ky la mg le mh li mi lm mj mk ml mm bi translated">如果KPSS和ADF同意序列是平稳的(KPSS有高p值，ADF有低p值):认为它是平稳的。没必要区别它。</li><li id="e6c3" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">ADF找到一个单位根；但是KPSS发现这个序列在一个确定的趋势附近是稳定的(ADF和KPSS具有高p值)。那么，该序列是趋势稳定的，需要消除趋势。区别它。或者，转型可能会让它摆脱这种趋势。</li><li id="a483" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">ADF找不到单位根；但是KPSS声称它是不稳定的(ADF和KPSS具有低p值)。那么，这个序列是差分平稳的。区别它。</li><li id="cafe" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">如果KPSS和ADF一致认为序列是非平稳的(p值低的KPSS；具有高p值的ADF):认为它是非平稳的。区别它。</li></ul><p id="1503" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">由于<em class="ln">飞镖</em>和<em class="ln"> pmdarima </em>运行单一选择测试来确定差异的顺序，所以我在<em class="ln">飞镖</em>方法之前用<em class="ln">两个</em>测试来捕捉ADF和KPSS不一致的实例。较高的测试结果被传递给自动ARIMA方法。<a class="ae np" rel="noopener" target="_blank" href="/when-a-time-series-only-quacks-like-a-duck-10de9e165e">萨里玛预测和平稳性:当时间序列像鸭子一样呱呱叫|走向数据科学</a></p><p id="b96e" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我还应用了季节性、OCSB和CH的pmdarima检验。这些人有时也会对季节差异的必要顺序产生分歧。我们使用更高的建议。</p><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="bb0d" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们保持<em class="ln"> pmdarima的</em>默认方法<em class="ln">逐步</em>搜索不变，该方法使用Hyndman和Khandakar在2008年开发的算法(<a class="ae np" href="https://cran.r-project.org/web/packages/forecast/vignettes/JSS2008.pdf" rel="noopener ugc nofollow" target="_blank">自动时间序列预测:R(r-project.org)</a>的预测包)。该算法比全网格搜索快得多，因为它避免了在搜索空间中处理许多无意义的参数元组。<a class="ae np" rel="noopener" target="_blank" href="/sweatpants-unleashed-the-data-science-of-an-ignominious-garment-2e0c006202b0">运动裤被解开——时间序列分析|走向数据科学</a></p><p id="2b49" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd"><em class="ln">4.2eθ</em></strong></p><p id="efad" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">最后，我们准备了<strong class="kt jd"> <em class="ln"> Theta </em> </strong>预测器，这是一种简单而有效的快速方法，建立在带漂移的指数平滑的基础上。</p><p id="f928" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">“Theta方法自1999年问世以来，是过去二十年中最成功的单变量时间序列预测方法。该方法的成功已经在需求预测、营销和供应链预测环境中的应用中得到证明；尽管如此，在广泛的盲法经验预测竞赛中的成功也涉及到来自金融、经济和广泛应用的数千个系列，因此被证明是可推广的。θ法的优越性能最初在2000年的M3完井中得到了证明<a class="ae np" href="https://onlinelibrary.wiley.com/doi/abs/10.1002/9781118445112.stat08270" rel="noopener ugc nofollow" target="_blank">用Theta方法预测— Nikolopoulos —主要参考著作—威利在线图书馆</a></p><p id="4a25" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><a class="ae np" href="https://www.e3s-conferences.org/articles/e3sconf/pdf/2019/10/e3sconf_pe2019_01004.pdf" rel="noopener ugc nofollow" target="_blank">用θ法进行短期负荷预测(e3s-conferences.org)</a></p><p id="8dd2" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在将<em class="ln"> Darts的</em>微调过的<em class="ln"> theta </em>预测器传递给我们的<em class="ln"> eval_model() </em>函数之前，我们通过搜索100个可选值来调整Theta参数。</p><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="8cc3" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd"> <em class="ln"> 4.2f运行预测</em> </strong></p><p id="883a" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">list comprehension<em class="ln">model _ predictions</em>将我们想要尝试的预测器传递给model_eval()函数，该函数开始处理它们。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi oj"><img src="../Images/d34179b5fab10d572daf01e170e574db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*03uEkumfyMILn7GbVqd9RQ.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作者图片</p></figure><p id="15f0" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd"> 4.3预测方法的准确性</strong></p><p id="b889" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><em class="ln"> eval_model() </em>函数返回每个模型的预测值和精确度指标。</p><p id="05b7" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们在数据框架<em class="ln"> df_acc中收集所有五个模型的指标。</em></p><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="5fff" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们应用于数据框架的<em class="ln"> .style.highlight </em>方法强调了哪些预测显示出最佳和最差的准确性。</p><p id="1b0e" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">如果你想知道为什么R平方在下面显示的数据帧中显示负值:虽然R平方本身是一个介于0和1之间的非负数，但我颠倒了它的符号，以使它的方向，颜色编码的指导与表中的其他指标对齐。对于所有其他误差测量指标，较低的值是首选。对于R平方，值越高越好。在这个特定的表视图中，R平方前面的负号使它成为“越低越好”的指标，就像其他指标一样。否则，数据帧中最小和最大值的颜色编码将会混淆。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi ok"><img src="../Images/7f7070c2cb2b09fd132a85d5609cc9d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VIl2a9is2l9NP4iXa-FN6Q.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作者图片</p></figure><p id="4b0b" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在我们的例子中，Theta方法在ARIMA之前一英寸穿过终点线:他们的度量标准相差很小。然而，Theta方法只用了0.13秒就赢得了比赛，而ARIMA用了1.1秒。</p><p id="209c" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">尽管Prophet的处理时间是nave模型的42倍，但Prophet的准确性与nave模型几乎没有区别，如果按平均绝对百分比误差或平均绝对误差排名，Prophet甚至排在nave预测的后面。根据R平方的测量，Prophet和nave解释了时间序列中不到70%的运动，而Theta和SARIMA反映了90%的准确性。</p><h2 id="7c4a" class="ny mt it bd mu nz oa dn my ob oc dp nc la od oe ne le of og ng li oh oi ni iz bi translated">4.4绘制预测结果</h2><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div></figure><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi ol"><img src="../Images/f56108b82874362d8774cd3784ebab6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lAN-g40o5odDvW5Zh9d2xA.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作者图片</p></figure><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi om"><img src="../Images/4f535359f4315ec8f17caceb06fd0e5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cE-jSs9eqnGXxnrr8UYHhw.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作者图片</p></figure><p id="5784" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">天真的预测者(右上)和预言者(右下)的图表显示了偏见。蓝色的预测线系统地低估了黑色的实际观测值，比其他三个预测者更低估。</p><p id="5fa9" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd"> 4.5残差诊断</strong></p><p id="01b3" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><em class="ln"> Darts </em>专注于预测值、预测图和准确性指标。但是它很少提供诊断假设测试。为了增加一些精确性，我们引入了对来自<em class="ln"> statsmodels的白噪声残差的<em class="ln"> Ljung-Box </em>测试；</em>和<em class="ln">常态测试</em>来自<em class="ln"> scipy </em>。</p><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div></figure><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi on"><img src="../Images/4330d3992319ce1dd93e054a63ce5b1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*8R0C3-B6mgS1xmNEyutLgg.png"/></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作者图片</p></figure><p id="0105" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">Ljung-Box测试研究残差是否代表白噪声。较低的p值(均远低于0.05)表明它们不是，这意味着所有五个预测模型都未能识别一些本可用于提高预测准确性的信号。下面的诊断图表明一些季节性被排除在预测之外。</p><p id="d1c4" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">如果正态性检验的p值较低，则不会使预测结果无效。但是指数平滑预测的低值意味着我们不能依赖它的置信区间。</p><p id="82ed" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><em class="ln"> Darts </em>提供了有用的<em class="ln">plot _ residuals _ analysis()</em>函数来可视化三个支线剧情中的残差。让我们将每个预测者的残差输入到绘图函数中。</p><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="nq nr l"/></div></figure><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi oo"><img src="../Images/9e888523a499d72036aae0d31c46fc21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uNek4CaBXE7_hQjJ2TyV1A.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作者图片</p></figure><p id="849a" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd">指数平滑:</strong></p><ul class=""><li id="440c" class="me mf it kt b ku kv kx ky la mg le mh li mi lm mj mk ml mm bi translated">上面的ACF图显示了残差中的季节性信号，峰值和谷值以12个月为一个周期波动。这表明该模型在其预测中没有包括所有的季节性，并且在残差中浪费了一些信号。</li><li id="1ee1" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">直方图显示了偏差:其峰值不在零均值处，但它是左偏的。负均值-16.6表示指数平滑器倾向于错误估计同一方向的观测值。</li></ul><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi gj"><img src="../Images/ad880d813ff2b8761946974b1f775c60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UpPr0jb4MlJLQWUy2TFmkg.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作者图片</p></figure><p id="3828" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd">θ法:</strong></p><ul class=""><li id="d420" class="me mf it kt b ku kv kx ky la mg le mh li mi lm mj mk ml mm bi translated">ACF相关图表明，Theta也没有将所有的季节性完全纳入其预测中。</li><li id="078c" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">直方图看起来比指数平滑的情况更好，平均值接近0，意味着接近零的偏差。</li></ul><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi op"><img src="../Images/8299420cfcb6447707d80ee833a5ed3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1SNHrjJTS_3hLUvBPbytfg.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作者图片</p></figure><p id="187c" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd">萨里玛:</strong></p><ul class=""><li id="ab4e" class="me mf it kt b ku kv kx ky la mg le mh li mi lm mj mk ml mm bi translated">此外，SARIMA预报员留下了一些季节性信号，而不是将其纳入其预测中。</li><li id="8680" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">直方图看起来有点右偏，正平均值接近3.5，但比指数平滑器的负平均值反映的大偏差要小得多。</li></ul><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi oq"><img src="../Images/62e4a624d61dff867e46bbd6381c0a9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6wxTzm4oHIz7YK8icWdpcA.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作者图片</p></figure><p id="b5a0" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd">天真的预测:</strong></p><ul class=""><li id="f24a" class="me mf it kt b ku kv kx ky la mg le mh li mi lm mj mk ml mm bi translated">像其他预测者一样，未确定的季节性被搁置在桌面上。</li><li id="7765" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">直方图显示了显著的负偏差，钟形曲线峰值在-30左右，而不是0。天真漂移通过从实际观察值的起点到终点画一条线来计算趋势。在其他模式中，它不会抓住一个加速的趋势。</li></ul><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi or"><img src="../Images/86c98e081a97f05526ccec4fcf433061.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X4b28_Tcd1wsVytT4XCH-A.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作者图片</p></figure><p id="cb24" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd">先知:</strong></p><ul class=""><li id="949b" class="me mf it kt b ku kv kx ky la mg le mh li mi lm mj mk ml mm bi translated">ACF:其他模型显示的峰值和谷值并不太陡。预言者残差看起来似乎更多的季节性信号已经被放弃了。这可以解释为什么先知的MAPE和RMSE的错误几乎是西塔和萨里玛的两倍。</li><li id="88e0" class="me mf it kt b ku mn kx mo la mp le mq li mr lm mj mk ml mm bi translated">直方图显示了小的正偏差，平均值接近3。这条曲线看起来不太正常，因为它有很长的尾巴，但是我们上面的测试证实了正态性，p值为0.10。所以置信区间会比较准确。直方图本身很容易被误解。</li></ul><p id="7ed8" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">完整的Jupyter笔记本可以在GitHub上下载:<a class="ae np" href="https://github.com/h3ik0th/Darts" rel="noopener ugc nofollow" target="_blank"> h3ik0th/Darts: Python Darts时间系列教程(github.com)</a></p><p id="669d" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><em class="ln">所有图片:由作者提供，作为公共领域</em></p></div></div>    
</body>
</html>