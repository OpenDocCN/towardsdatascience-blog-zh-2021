<html>
<head>
<title>What’s the difference between “is” and “==” in Python?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的“是”和“==”有什么区别？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/whats-the-difference-between-is-and-in-python-dc26406c85ad?source=collection_archive---------0-----------------------#2021-08-05">https://towardsdatascience.com/whats-the-difference-between-is-and-in-python-dc26406c85ad?source=collection_archive---------0-----------------------#2021-08-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bdab" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">何时使用哪个，为什么</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/63c52f15e1aead083e67ea54e1d25472.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CzwvVLBUOe-ptel5"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Alex Chumak 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="2626" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们在Python中比较对象时，我们通常使用<code class="fe lv lw lx ly b"><strong class="lb iu">==</strong></code>操作符。我们有时可能会尝试使用<code class="fe lv lw lx ly b"><strong class="lb iu">is</strong></code>操作符来执行相同的任务。</p><p id="f379" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这两个运算符有什么不同吗？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lz"><img src="../Images/9ff8ff52696c20d7cbac097a1440d862.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JfWCpEYlvfwaGj1U1gpflQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="a807" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个简短的帖子，解释两者之间的细微差别，并提供何时使用哪一个的建议。</p><h1 id="7abe" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">有什么区别？</h1><p id="bf58" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">我个人是查了才知道的。这其实很容易理解，但知道这一点也很重要。</p><ul class=""><li id="8f39" class="mx my it lb b lc ld lf lg li mz lm na lq nb lu nc nd ne nf bi translated"><code class="fe lv lw lx ly b">==</code>代表<em class="ng">值相等</em>。它用来知道两个对象是否有相同的值。</li><li id="a727" class="mx my it lb b lc nh lf ni li nj lm nk lq nl lu nc nd ne nf bi translated"><code class="fe lv lw lx ly b">is</code>用于<em class="ng">参考相等</em>。它用来知道两个引用是否指向同一个对象，即它们是否相同。如果两个对象有相同的内存地址，那么它们就是相同的。</li></ul><blockquote class="nm nn no"><p id="98ce" class="kz la ng lb b lc ld ju le lf lg jx lh np lj lk ll nq ln lo lp nr lr ls lt lu im bi translated">两个值相等的物体不一定相同。</p></blockquote><p id="0af5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简单来说:<code class="fe lv lw lx ly b">==</code> <strong class="lb iu">确定两个对象的值是否相等，而</strong> <code class="fe lv lw lx ly b"><strong class="lb iu">is</strong></code> <strong class="lb iu">确定它们是否是完全相同的对象。</strong></p><p id="d320" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者更简单:<strong class="lb iu"/><code class="fe lv lw lx ly b"><strong class="lb iu">is</strong></code><strong class="lb iu">语句是</strong> <code class="fe lv lw lx ly b"><strong class="lb iu">id(a) == id(b)</strong></code>的语法糖</p><p id="4454" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ng"> *id()是Python中的内置函数。它接受单个参数，并使用</em> <strong class="lb iu"> <em class="ng">返回对象</em> </strong> <em class="ng">的标识。</em></p><h1 id="e931" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">让我们看一些例子👨‍💻</h1><p id="f5ec" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">让我们定义一个变量<code class="fe lv lw lx ly b"><strong class="lb iu">a</strong></code>来保存一个列表，让我们将它影响到一个变量<code class="fe lv lw lx ly b"><strong class="lb iu">b</strong></code> <strong class="lb iu">。</strong></p><p id="d2ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b"><strong class="lb iu">a</strong></code>和<code class="fe lv lw lx ly b"><strong class="lb iu">b</strong></code>在内存中引用同一个对象，我们可以使用<strong class="lb iu"> id </strong>函数来检查这一点。(id保证在同时存在的对象中是唯一的)。</p><p id="05ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b"><strong class="lb iu">a</strong></code>和<code class="fe lv lw lx ly b"><strong class="lb iu">b</strong></code>因此具有相同的id，因此语句<code class="fe lv lw lx ly b"><strong class="lb iu">a is b</strong></code>为真。</p><pre class="kj kk kl km gt ns ly nt nu aw nv bi"><span id="c52e" class="nw mb it ly b gy nx ny l nz oa"><strong class="ly iu">a = [1, 2, 3]<br/>b = a</strong></span><span id="9315" class="nw mb it ly b gy ob ny l nz oa"><strong class="ly iu">id(a)<br/># 140545544215872</strong></span><span id="6812" class="nw mb it ly b gy ob ny l nz oa"><strong class="ly iu">id(b)<br/># 140545544215872</strong></span><span id="21b4" class="nw mb it ly b gy ob ny l nz oa"><strong class="ly iu">a is b<br/># True</strong></span><span id="b227" class="nw mb it ly b gy ob ny l nz oa"><strong class="ly iu">a == b<br/># True</strong></span></pre><p id="e9f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们通过slice操作符复制列表<code class="fe lv lw lx ly b"><strong class="lb iu">a</strong></code>。拷贝应该在内存中创建一个新的对象，有一个新的地址，这样就分配了一个新的id。</p><pre class="kj kk kl km gt ns ly nt nu aw nv bi"><span id="2814" class="nw mb it ly b gy nx ny l nz oa"><strong class="ly iu">c = a[:]</strong></span><span id="fa3b" class="nw mb it ly b gy ob ny l nz oa"><strong class="ly iu">id(a)<br/># 140545544215872</strong></span><span id="749e" class="nw mb it ly b gy ob ny l nz oa"><strong class="ly iu">id(c)<br/># 140545544587008</strong></span></pre><p id="7401" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此:</p><pre class="kj kk kl km gt ns ly nt nu aw nv bi"><span id="ea93" class="nw mb it ly b gy nx ny l nz oa"><strong class="ly iu">a is c<br/># False</strong></span><span id="bf39" class="nw mb it ly b gy ob ny l nz oa"><strong class="ly iu">a == c<br/># True</strong></span></pre><p id="ea1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里<code class="fe lv lw lx ly b">a</code>和<code class="fe lv lw lx ly b">c</code>指向内存中两个不同的对象，即使它们的值相等。</p><h1 id="ebc0" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">Python中的一些不一致行为</h1><p id="672c" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">让我们运行这个小例子。</p><pre class="kj kk kl km gt ns ly nt nu aw nv bi"><span id="d6ed" class="nw mb it ly b gy nx ny l nz oa"><strong class="ly iu">&gt;&gt;&gt; a = 1000<br/>&gt;&gt;&gt; b = 1000<br/>&gt;&gt;&gt; a == b<br/>True<br/>&gt;&gt;&gt; a is b<br/>False</strong></span></pre><p id="c944" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种行为是意料之中的，就像我们在前面的例子中看到的一样。</p><p id="2baa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们用100代替1000。</p><pre class="kj kk kl km gt ns ly nt nu aw nv bi"><span id="5952" class="nw mb it ly b gy nx ny l nz oa"><strong class="ly iu">&gt;&gt;&gt; c = 100<br/>&gt;&gt;&gt; d = 100<br/>&gt;&gt;&gt; c == d<br/>True<br/>&gt;&gt;&gt; c is d<br/>True</strong></span></pre><p id="b839" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里发生了什么？这与之前的结果不一致。</p><p id="4db1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果是Python的参考实现缓存了-5范围内的整数对象..256作为单例实例。</p><p id="f46a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样的事情也发生在弦上。</p><h1 id="17eb" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">PEP8对此怎么说？</h1><p id="3387" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">标准库的官方Python风格指南PEP 8也提到了<a class="ae ky" href="https://www.python.org/dev/peps/pep-0008/#programming-recommendations" rel="noopener ugc nofollow" target="_blank">和</a>T6的两个用例:</p><blockquote class="nm nn no"><p id="eec7" class="kz la ng lb b lc ld ju le lf lg jx lh np lj lk ll nq ln lo lp nr lr ls lt lu im bi translated"><em class="it">与None之类的singletons的比较应该总是使用is或is not，而不是等号运算符。</em></p><p id="5e41" class="kz la ng lb b lc ld ju le lf lg jx lh np lj lk ll nq ln lo lp nr lr ls lt lu im bi translated">此外，当您真正的意思是如果x不是None时，要小心编写if x——例如，当测试默认为None的变量或参数是否被设置为其他值时。另一个值的类型(比如容器)在布尔上下文中可能为false！</p></blockquote><h1 id="e359" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">概述</h1><ul class=""><li id="df9c" class="mx my it lb b lc ms lf mt li oc lm od lq oe lu nc nd ne nf bi translated">如果两个对象有相同的内存地址，那么它们就是相同的</li><li id="a59d" class="mx my it lb b lc nh lf ni li nj lm nk lq nl lu nc nd ne nf bi translated">两个相同的对象具有相等的值，但是具有相等值的两个对象不一定相同</li><li id="d1a4" class="mx my it lb b lc nh lf ni li nj lm nk lq nl lu nc nd ne nf bi translated">使用<code class="fe lv lw lx ly b"><strong class="lb iu">is</strong></code>检查同一性，使用<code class="fe lv lw lx ly b"><strong class="lb iu">==</strong></code>检查相等性。</li><li id="2904" class="mx my it lb b lc nh lf ni li nj lm nk lq nl lu nc nd ne nf bi translated">在大多数其他情况下，当你比较像None和<code class="fe lv lw lx ly b"><strong class="lb iu">==</strong></code>这样的单例时，使用<code class="fe lv lw lx ly b"><strong class="lb iu">is</strong></code>:这是一个<a class="ae ky" href="https://lerner.co.il/2015/06/16/why-you-should-almost-never-use-is-in-python/" rel="noopener ugc nofollow" target="_blank">安全的</a>选择。</li></ul><h1 id="4956" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">参考</h1><ul class=""><li id="8653" class="mx my it lb b lc ms lf mt li oc lm od lq oe lu nc nd ne nf bi translated"><a class="ae ky" href="https://stackoverflow.com/questions/132988/is-there-a-difference-between-and-is" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/132988/is-there-a-difference-and-is</a></li><li id="2d35" class="mx my it lb b lc nh lf ni li nj lm nk lq nl lu nc nd ne nf bi translated"><a class="ae ky" href="https://www.python.org/dev/peps/pep-0008/#programming-recommendations" rel="noopener ugc nofollow" target="_blank">https://www . python . org/dev/peps/pep-0008/#编程-建议</a></li><li id="862f" class="mx my it lb b lc nh lf ni li nj lm nk lq nl lu nc nd ne nf bi translated"><a class="ae ky" href="https://lerner.co.il/2015/06/16/why-you-should-almost-never-use-is-in-python/" rel="noopener ugc nofollow" target="_blank">https://Lerner . co . il/2015/06/16/why-you-should-never-use-is-in-python/</a></li></ul><h1 id="82b9" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">感谢阅读🙏</h1><h1 id="83bd" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">新到中？你可以订阅每月5美元，并解锁无限的文章——<a class="ae ky" href="https://ahmedbesbes.medium.com/membership" rel="noopener">点击这里。</a></h1></div></div>    
</body>
</html>