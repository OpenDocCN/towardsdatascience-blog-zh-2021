<html>
<head>
<title>Machine Learning in Medicine — Part II</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">医学中的机器学习——第二部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/machine-learning-in-medicine-part-ii-b9dc0098f825?source=collection_archive---------25-----------------------#2021-08-15">https://towardsdatascience.com/machine-learning-in-medicine-part-ii-b9dc0098f825?source=collection_archive---------25-----------------------#2021-08-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4bf7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">针对医生和医疗保健专业人员的机器学习技术实践入门课程。</h2></div><h1 id="851e" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">数据探索</h1><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi kx"><img src="../Images/8c2d2feffdf743b3ea61f52ffe0977ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kdiYsLaLhsU2N6_i.jpg"/></div></div><p class="lj lk gj gh gi ll lm bd b be z dk translated">图片由粘土银行从<a class="ae ln" href="https://unsplash.com/photos/_Jb1TF3kvsA/info" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><h1 id="1c5f" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">概述</h1><p id="0ea0" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi mk translated"><span class="l ml mm mn bm mo mp mq mr ms di">在本课程的</span> <a class="ae ln" rel="noopener" target="_blank" href="/machine-learning-in-medicine-part-i-90a611025037">第一部分</a>中，我们介绍了几种常见的机器学习算法的名称，如决策树、k-最近邻和神经网络，并讨论了它们如何相互融合。我们通过下载一个公共领域数据集<a class="ae ln" href="https://chronicdata.cdc.gov/500-Cities-Places/500-Cities-Local-Data-for-Better-Health-2019-relea/6vp6-wxuq" rel="noopener ugc nofollow" target="_blank"> 500个城市数据集</a>并建立一个名为<a class="ae ln" href="https://github.com/waihongchung/dress" rel="noopener ugc nofollow" target="_blank">着装套件</a>的JavaScript机器学习库来建立我们的项目。接下来，我们完成了数据准备过程，使用DRESS Kit中的几个基本函数从数据集中提取有用的数据点，这些函数包括<code class="fe mt mu mv mw b">DRESS.local</code>(加载本地文件)、<code class="fe mt mu mv mw b">DRESS.save</code>(将文件保存到本地机器)、<code class="fe mt mu mv mw b">DRESS.fromCSV</code>(将CSV文件转换为本地JavaScript对象)、<code class="fe mt mu mv mw b">DRESS.print</code>(将文本打印到HTML上)，以及<code class="fe mt mu mv mw b">DRESS.async</code>(异步执行函数)。在第一部分的最后，我们创建了一个JSON文件<code class="fe mt mu mv mw b">data.json</code>，其中仅包含来自500个城市数据集的普查区域级别的粗略患病率数据，这些数据来自那些人口计数至少为50的普查轨道。我们还创建了一个JSON文件<code class="fe mt mu mv mw b">measures.json</code>，它将<code class="fe mt mu mv mw b">MeasureId</code>按<code class="fe mt mu mv mw b">Category</code>分组，并将每个<code class="fe mt mu mv mw b">MeasureId</code>从原始数据集映射到它的定义。</p><p id="d35f" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">只是作为一个参考点，这里是<code class="fe mt mu mv mw b">measures.json</code>的内容。</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h1 id="cfa7" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">礼服套件更新</h1><p id="599e" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在继续本课程的其余部分之前，请花点时间更新<a class="ae ln" href="https://github.com/waihongchung/dress" rel="noopener ugc nofollow" target="_blank">着装套件</a>以发布<strong class="lq ir"> 1.1.0 </strong>。该版本包含几项性能改进和一些新功能，包括生成直方图和热图，我们将在课程的这一部分探讨这些内容。</p><h1 id="0021" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">柱状图</h1><p id="252c" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们通过对数据集进行基本的描述性分析来开始数据探索过程，这样我们就可以大致了解可用数据的质量。特别是，我们要注意是否存在任何缺失或错误的数据点，数字特征的相对范围(我们需要标准化/规范化这些特征吗？)、分类特征的维度(对这些特征进行<a class="ae ln" href="https://en.wikipedia.org/wiki/One-hot" rel="noopener ugc nofollow" target="_blank">一键编码</a>是否可行？)，以及这些特征的分布(正态、均匀、偏斜等。)</p><p id="42f6" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">我们再次创建一个名为<code class="fe mt mu mv mw b">part2_1.htm</code>的样板HTML文件，它加载了DRESS Kit以及我们的定制JavaScript文件<code class="fe mt mu mv mw b">part2_1.js</code>。</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="nc nd l"/></div></figure><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="f9e6" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">我们使用<code class="fe mt mu mv mw b">DRESS.local</code>函数加载在课程第一部分创建的数据集。请注意，第三个参数不再设置为<code class="fe mt mu mv mw b">FALSE</code>，因为数据集现在存储为<a class="ae ln" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON" rel="noopener ugc nofollow" target="_blank"> JSON </a>格式，JavaScript可以对其进行本地解析。我们将慢性病的所有27项指标分配到一个数组中，这样我们就不必一遍又一遍地输入它们。数据科学家使用的最流行和最直接的数据探索技术之一是<a class="ae ln" href="https://en.wikipedia.org/wiki/Histogram#Cumulative_histogram" rel="noopener ugc nofollow" target="_blank">直方图</a>。它以简洁直观的方式描述了数据集中值的分布。虽然有大量的统计软件包可以生成高质量的多色直方图，但实际上并没有必要，因为直方图的整体思想是它代表了底层数据集的近似。我们可以从直方图的粗略轮廓中收集我们需要的所有信息，直方图可以使用<code class="fe mt mu mv mw b">DRESS.histograms</code>函数生成。</p><p id="edab" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">在浏览器中打开<code class="fe mt mu mv mw b">part2_1.htm</code>，点击文件输入按钮，选择<code class="fe mt mu mv mw b">data.json</code>文件，生成基于文本的直方图列表。下面是该函数生成的三个直方图。</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="3f7c" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">每个直方图都提供了几条关键信息。首先，它显示包含非空值的数据点的数量(和百分比)。我们可以看到，<code class="fe mt mu mv mw b">CANCER</code>和<code class="fe mt mu mv mw b">BPMED</code>度量没有空值，但是<code class="fe mt mu mv mw b">COREW</code>度量缺少一小部分(0.4%)数据点。接下来，它计算值的范围(第一个条形代表最小值，条形之间的差异代表间隔，最后一个条形代表最大间隔)。例如，我们可以看到<code class="fe mt mu mv mw b">CANCER</code>度量的范围在0.7到22.9之间。最重要的是，我们可以从条形图中看到值的粗略分布。我们可以看到<code class="fe mt mu mv mw b">CANCER</code>指标严重向左倾斜，而<code class="fe mt mu mv mw b">BPMED</code>指标严重向右倾斜。相比之下，<code class="fe mt mu mv mw b">COREW</code>测量值几乎均匀分布在平均值周围。</p><p id="9b9b" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated"><code class="fe mt mu mv mw b">DRESS.histograms</code>函数也可以从分类特征生成直方图。只需将分类特性的名称作为第三个参数传递，如下所示:</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="nc nd l"/></div></figure><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="3b11" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">我们可以看到，来自加利福尼亚州、纽约州和德克萨斯州的数据点构成了数据集的大部分，考虑到美国的人口分布，这并不完全出人意料。重要的是要记住，这个数据集中的每个<code class="fe mt mu mv mw b">subject</code>指的是人口普查区域，而不是个人。还值得注意的是，某些州，如特拉华州、缅因州、佛蒙特州、西弗吉尼亚州和怀俄明州，人口普查区非常少，当我们实际使用数据集来构建我们的机器学习模型时，可能会产生一些问题。我们需要记住这一点。</p><h1 id="79b6" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">归罪</h1><p id="6d80" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">请注意，数据集中的某些特征(如<code class="fe mt mu mv mw b">COREW</code>度量)包含缺失的数据点。在临床研究中，缺失数据是一个相当普遍的问题；参与者可能在研究中途退出，数据可能输入错误，或者数据收集表可能放错了地方。这是大部分统计教材中提出随机缺失<a class="ae ln" href="https://en.wikipedia.org/wiki/Missing_data#Missing_at_random" rel="noopener ugc nofollow" target="_blank"/>(MAR)、完全随机缺失<a class="ae ln" href="https://en.wikipedia.org/wiki/Missing_data#Missing_completely_at_random" rel="noopener ugc nofollow" target="_blank"/>(MCAR)、非随机缺失<a class="ae ln" href="https://en.wikipedia.org/wiki/Missing_data#Missing_not_at_random" rel="noopener ugc nofollow" target="_blank"/>(MNAR)概念的地方。我们不会浪费时间讨论这些定义背后的无聊理论。可以说，MCAR不会影响数据分析，但在现实中，几乎不可能证明数据是完全随机缺失的。MNAR是完全相反的情况，其中数据丢失的原因与丢失数据的值有关。可靠地恢复丢失数据的唯一方法是通过修改数据收集步骤或数据分析步骤来解决根本原因。例如，在一项询问使用电脑时间的在线调查中，那些无法使用电脑(或至少无法访问互联网)的人可能不会出现在数据集中。研究者应尝试亲自收集数据，或者在分析过程中承认研究仅限于那些可以在线访问调查的人。没有一种通用的统计操作可以解决MNAR。在大多数设计良好的临床研究中，我们处理的是MAR，它可以通过某种统计方法来解决。一种策略是忽略那些缺失的数据点。我们可以丢弃整个主题，也可以只丢弃缺失的数据点，这取决于我们想要如何分析数据。第二种策略是用合理的估计值代替缺失的数据，这一过程称为插补。可以通过从其他非缺失数据点中随机选择一个数据点(例如，结转的最后观察或结转的基础观察)，通过计算算术平均值或模式，或通过某种统计回归分析来计算这种估计。</p><p id="cc9c" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">当我们真正建立我们的机器学习模型时，我们将展示一些基本的插补技术。我们还将了解到，一些机器学习技术可以反过来用作插补技术。</p><h1 id="b5ca" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">平均值、中间值和众数</h1><p id="629a" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">更具分析性地探索数据的另一种方法是研究数据集的<a class="ae ln" href="https://en.wikipedia.org/wiki/Central_tendency" rel="noopener ugc nofollow" target="_blank">集中趋势</a>(均值、中值和众数)和<a class="ae ln" href="https://en.wikipedia.org/wiki/Statistical_dispersion" rel="noopener ugc nofollow" target="_blank">离差</a>(方差和四分位间距)。这些特性特别重要，因为许多其他统计方法，如回归分析，都在对它们进行操作，我们经常使用这些特性在两个或更多数据集之间进行比较(即治疗组是否比安慰剂组有更高的平均存活率)。</p><p id="eae1" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">当然，DRESS Kit附带了几个内置函数来计算数据集的集中趋势和分散度。</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="b138" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">这也是脚本产生的结果的一部分。</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="97db" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated"><code class="fe mt mu mv mw b">DRESS.means</code>函数计算平均值、<a class="ae ln" href="https://en.wikipedia.org/wiki/Mean" rel="noopener ugc nofollow" target="_blank">平均值</a>的95%置信区间、<a class="ae ln" href="https://en.wikipedia.org/wiki/Skewness" rel="noopener ugc nofollow" target="_blank">偏斜度</a>(基于第三个<a class="ae ln" href="https://en.wikipedia.org/wiki/Standardized_moment" rel="noopener ugc nofollow" target="_blank">标准化矩</a>)和超额<a class="ae ln" href="https://en.wikipedia.org/wiki/Kurtosis" rel="noopener ugc nofollow" target="_blank">峰度</a>(基于第四个标准化矩)。<code class="fe mt mu mv mw b">DRESS.medians</code>函数计算<a class="ae ln" href="https://en.wikipedia.org/wiki/Median" rel="noopener ugc nofollow" target="_blank">中值</a>、四分位数范围、偏斜度(基于四分位数)和过度峰度(基于百分位数)。最后，<code class="fe mt mu mv mw b">DRESS.frequencies</code>函数从一个分类特征中枚举出所有可能的值，并按其出现频率排序(第一个是<a class="ae ln" href="https://en.wikipedia.org/wiki/Mode_(statistics)" rel="noopener ugc nofollow" target="_blank">模式</a>)。</p><p id="de9b" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">一些非常敏锐的读者可能会指出，数据集中大多数特征的值并不是严格的正态分布<a class="ae ln" href="https://en.wikipedia.org/wiki/Normal_distribution" rel="noopener ugc nofollow" target="_blank"/>，直方图的形状以及显著偏度和过度峰度的存在就是证明。然而，重要的是要注意，当我们处理成千上万的样本时，值是否正态分布就不那么重要了。如果我们应用正式的正态性检验算法，例如<a class="ae ln" href="https://en.wikipedia.org/wiki/Shapiro%E2%80%93Wilk_test" rel="noopener ugc nofollow" target="_blank">夏皮罗-维尔克</a>检验(可以通过使用函数<code class="fe mt mu mv mw b">DRESS.normalities</code>轻松完成)，我们会发现数据集中的所有特征实际上都不是正态分布的。然而，仅仅因为测试结果在统计上是显著的，并不一定意味着它在实践中是有意义的。这里有一篇出色的<a class="ae ln" href="https://pubmed.ncbi.nlm.nih.gov/11910059/" rel="noopener ugc nofollow" target="_blank">评论文章</a>解释了这背后的统计数据。可以说，我们可以在这个数据集上安全地应用大多数参数统计操作，而不用担心潜在的正态性假设。</p><h1 id="6fcf" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">相互关系</h1><p id="24e6" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">了解了数据集中每个要素的特征后，我们应该将注意力转移到数据集中各种要素之间的关系上。请记住机器学习的整体思想，即基于数据集建立模型，然后使用该模型进行预测。理想情况下，我们希望看到数据集中的各种要素相互独立。换句话说，如果一个数据集中的所有要素都高度相关，那么该数据集实际上并不包含比另一个仅包含其中一个要素的数据集更多的信息。我们还想检查数据集中<em class="ne">暴露</em>特征和<em class="ne">结果</em>特征之间的任何相关性。如果暴露和感兴趣的结果之间存在简单的线性关系，那么就真的没有必要采用一些复杂的机器学习算法。</p><p id="2247" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">当然，DRESS KIT附带了一个名为<code class="fe mt mu mv mw b">DRESS.correlations</code>的函数，它可以自动计算皮尔逊相关系数(或斯皮尔曼等级相关系数)。不幸的是，该函数输出的文本可能很长，很难解释。幸运的是，我们可以使用<code class="fe mt mu mv mw b">DRESS.heatmap</code>函数轻松地将文本输出转换成<a class="ae ln" href="https://en.wikipedia.org/wiki/Heat_map" rel="noopener ugc nofollow" target="_blank">热图</a>。</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="nc nd l"/></div></figure><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi nf"><img src="../Images/0cf8d4d0aca669149c34ec4a52f0f0a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*s2BOGLZoES742odd.png"/></div></div><p class="lj lk gj gh gi ll lm bd b be z dk translated">作者图片</p></figure><p id="8642" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">绿色代表正相关，蓝色代表负相关。颜色的深浅表示相关性的强度。红色文字代表统计意义。我们可以看到，乳房x线摄影或巴氏涂片与其他特征之间几乎没有相关性，而代谢综合征的大多数组成部分，包括高血压、高胆固醇和糖尿病，彼此高度相关。这里有一个关于<a class="ae ln" href="https://online.stat.psu.edu/stat501/lesson/12/12.1" rel="noopener ugc nofollow" target="_blank">多重共线性</a>的精彩在线章节。当我们实际上试图建立和解释我们的机器学习模型时，我们需要记住这一点。</p><h1 id="1b46" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">包裹</h1><p id="71b4" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">让我们复习一下第二部分所学的内容。我们经历了数据探索过程的基本步骤。我们首先使用<code class="fe mt mu mv mw b">DRESS.histograms</code>函数创建一系列直方图，允许我们识别数据集中值的范围和分布。我们简要讨论了处理缺失数据的不同方法。接下来，我们通过使用<code class="fe mt mu mv mw b">DRESS.means</code>、<code class="fe mt mu mv mw b">DRESS.medians</code>和<code class="fe mt mu mv mw b">DRESS.frequencies</code>计算平均值、中值和众数，重点关注数据集中每个特征的集中趋势和分散度。我们谈到了偏度和峰度的概念，并讨论了在处理大型数据集时，通常不必担心正态分布。最后，我们展示了一种使用<code class="fe mt mu mv mw b">DRESS.correlations</code>和<code class="fe mt mu mv mw b">DRESS.heatmap</code>函数来评估数据集中各种特征之间相关程度的方法。</p><p id="8063" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">现在，我们已经对数据集中的各种特征有了大致的了解，我们准备好继续使用该数据集构建我们的机器学习模型。</p></div></div>    
</body>
</html>