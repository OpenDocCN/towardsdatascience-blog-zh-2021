<html>
<head>
<title>Deploying a Machine Learning Model as an API on Red Hat OpenShift Container Platform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Red Hat OpenShift容器平台上部署机器学习模型作为API</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/deploying-a-machine-learning-model-as-an-api-on-red-hat-openshift-container-platform-5f6553647917?source=collection_archive---------20-----------------------#2021-07-14">https://towardsdatascience.com/deploying-a-machine-learning-model-as-an-api-on-red-hat-openshift-container-platform-5f6553647917?source=collection_archive---------20-----------------------#2021-07-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1780" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Flask、Scikit-Learn和Docker从GitHub库中的源代码</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/449c53da04b4fbb29f9cc45246bf6cdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BnAMQqNvEQ3b9HMuS4FYHg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Annamária Borsos摄影</p></figure><p id="6516" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">机器和深度学习应用程序变得比以往任何时候都更受欢迎。正如我们之前所看到的，企业Kubernetes平台(Red Hat open shift Container Platform)通过引入额外的安全控制并使环境更易于管理，帮助数据科学家和开发人员使用他们喜欢的工具真正专注于价值。它能够在企业级和高度可用的集群中部署、服务、保护和优化机器学习模型，使数据科学家能够专注于数据的价值。我们可以使用托管服务(IBM Cloud上的Red Hat OpenShift、AWS上的Red Hat OpenShift服务、Azure Red Hat OpenShift)在云中安装Red Hat OpenShift集群，或者我们可以通过从另一个云提供商(AWS、Azure、Google Cloud、平台无关的)安装来自行运行它们。我们还可以在受支持的基础设施(裸机、IBM Z、Power、Red Hat OpenStack、Red Hat虚拟化、vSphere、Platform agonistic)上创建集群，或者在我们的笔记本电脑上创建对本地开发和测试有用的最小集群(MacOS、Linux、Windows)。这里很自由。</p><p id="4d32" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本文中，我们将展示如何在云上的OpenShift集群上部署一个用Python开发的简单机器学习模型。出于本文的目的，我们将在IBM Cloud上创建一个OpenShift集群，并展示如何从GitHub存储库中部署我们的机器学习应用程序，并公开应用程序以访问它(有和没有docker文件)。</p><p id="ec8a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以用很少很简单的步骤做到这一切。</p><h1 id="d17f" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">创建一个OpenShift集群实例</h1><p id="611f" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">我们连接到我们的IBM Cloud帐户，点击导航菜单，OpenShift，Clusters:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/11da6afcef7877c3db5f5bc34de25478.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vn3YfQKjhyvcINN-MdXJTw.png"/></div></div></figure><p id="2ad1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">点击创建集群:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/2de02343bd8deb8bb9ba0e628ee6b54a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_8FP6lb2Ih_jPr9KH8c1og.png"/></div></div></figure><p id="0d6d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以选择几个选项，如位置、运行集群或工作池的计算环境(vCPUs数量、内存、加密本地磁盘……)，然后单击“create”。一个有趣的选择是，我们可以选择卫星，它允许在我们自己的数据中心运行我们的集群。出于本文的目的，我们选择了Classic。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/2b1524c7b75e5d657298bbfde4893481.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oJPSDgFlNVTdH9RyXHieUA.png"/></div></div></figure><p id="ab4e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">搞定了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/3ab860923a1a442e1dce9faf9281b7b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*weNQHmnvQdERVCzNJhHXAQ.png"/></div></div></figure><p id="9f6e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您还可以使用CLI创建集群:<a class="ae mp" href="https://cloud.ibm.com/docs/openshift?topic=openshift-clusters" rel="noopener ugc nofollow" target="_blank">https://cloud.ibm.com/docs/openshift?topic=openshift-clusters </a></p><h1 id="0d22" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">从GitHub存储库中的源代码部署应用程序</h1><p id="6b6b" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">我们可以从源代码、图像或模板创建新的OpenShift企业应用程序，并且可以通过OpenShift web控制台或CLI来完成。用所有的源代码和Docker文件创建了一个GitHub存储库，以便组装Docker映像，并在以后将其部署到OpenShift集群:<a class="ae mp" href="https://github.com/xaviervasques/OpenShift-ML-Online.git" rel="noopener ugc nofollow" target="_blank">https://github.com/xaviervasques/OpenShift-ML-Online.git</a></p><p id="b364" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，让我们看看并测试我们的应用程序。我们克隆我们的存储库:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="2694" class="mv ls iq mr b gy mw mx l my mz">git clone <a class="ae mp" href="https://github.com/xaviervasques/OpenShift-ML-Online.git" rel="noopener ugc nofollow" target="_blank">https://github.com/xaviervasques/OpenShift-ML-Online.git</a></span></pre><p id="d6bd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在文件夹中，我们应该会找到以下文件:</p><p id="89ca" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir"> Dockerfile </strong></p><p id="c7df" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir"> train.py </strong></p><p id="508b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir"> api.py </strong></p><p id="1a4e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir"> requirements.txt </strong></p><p id="94e9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">OpenShift将自动检测是否使用了Docker或源代码构建策略。在我们的存储库中，有一个<strong class="kx ir"> Dockerfile。</strong> OpenShift Enterprise将生成Docker构建策略。<strong class="kx ir"> train.py </strong>是一个python脚本，它加载并分割iris数据集，这是一个经典且非常简单的多类分类数据集，由3种不同类型的iris(Setosa、Versicolour和Virginica)花瓣和萼片长度组成，存储在150 x4 numpy . NDA array中。我们使用scikit-learn创建数据集和模型(支持向量机分类器)。<strong class="kx ir">requirements . txt</strong>(flask，flask-restful，joblib)用于Python依赖关系，而<strong class="kx ir"> api.py </strong>是将被调用来使用REST API执行推理的脚本。API将返回svm模型对测试数据的分类分数。</p><p id="1551" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir"> train.py </strong>文件如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="e347" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir"> api.py </strong>文件如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="3501" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Dockerfile文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="1aca" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后是<strong class="kx ir"> requirements.txt </strong>文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="bf36" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了测试一切是否正常，让我们在本地机器上构建并运行docker映像:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="b438" class="mv ls iq mr b gy mw mx l my mz">cd OpenShift-ML-Online<br/>docker build -t my-ml-api:latest .<br/>docker run my-ml-api</span></pre><p id="ea5e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">输出如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/e235cc240473211697655f22aa6de159.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x_dx3WCoVnp8SXp8O7ba7w.png"/></div></div></figure><p id="c724" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您可以使用带有curl的API:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="3d85" class="mv ls iq mr b gy mw mx l my mz">curl <a class="ae mp" href="http://172.17.0.2:8080/" rel="noopener ugc nofollow" target="_blank">http://172.17.0.2:8080/</a></span></pre><p id="eac3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们应该得到以下输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/46d497148004721532196a28131a37ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*EEnv4JY2KWfE6ioTmKwHxQ.png"/></div></figure><p id="de94" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们现在准备部署。</p><p id="1044" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要创建一个新项目，我们可以同时使用CLI(使用IBM Shell或我们自己的终端)或OpenShift web控制台。在控制台中，为了创建一个新项目，我们从OpenShift集群控制台中选择我们的集群(mycluster-par01-b3c.4x16 ),然后单击OpenShift web控制台。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/9d6b0074f71504701e16530557f921e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PZSrqx8etix6UT9R9cHApA.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/3ac75d752bfc433c0b69e87bfcf6cd20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*isUjXUbqyBcvdp4Y8Jlg6w.png"/></div></div></figure><p id="09bf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从透视图切换器中，我们选择Developer来切换到Developer透视图。我们可以看到菜单提供了+Add、Builds和Topology等项目。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/a3187e28881dce4e21ba35337e28f054.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NVyZtv70dtWYqL16kXVvXA.png"/></div></div></figure><p id="a9bd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们点击+Add并创建项目:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/1467a18dabbcc147be4202533647f420.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*24JwsLx9yClhbqyKTNi9nw.png"/></div></div></figure><p id="fb58" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本章中，我们将在本地机器上使用CLI。由于我们在IBM Cloud上安装了OpenShift集群，如果还没有安装，那么有必要安装:</p><p id="cce0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">- IBM云CLI(<a class="ae mp" href="https://cloud.ibm.com/docs/cli?topic=cli-install-ibmcloud-cli" rel="noopener ugc nofollow" target="_blank">https://cloud.ibm.com/docs/cli?topic = CLI-install-IBM cloud-CLI</a></p><p id="d198" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">-open shift Origin CLI(https://docs . open shift . com/container-platform/4.2/CLI _ reference/open shift _ CLI/getting-started-CLI . html)</p><p id="997a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，我们需要登录OpenShift并创建一个新项目。为了做到这一点，我们需要复制登录命令:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/cf63517e9de1585c3b999f217b624363.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EaaOL2EWomWzGraFq_SD8Q.png"/></div></div></figure><p id="9251" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们登录我们的帐户:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="0c3a" class="mv ls iq mr b gy mw mx l my mz">ibmcloud login</span></pre><p id="ae47" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们复制/粘贴登录命令:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="aa03" class="mv ls iq mr b gy mw mx l my mz">oc login — token=sha256~IWefYlUvt1St8K9QAXXXXXX0frXXX2–5LAXXXXNq-S9E — server=https://c101-e.eu-de.containers.cloud.ibm.com:30785</span></pre><p id="bca7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">new-app命令允许使用本地或远程Git存储库中的源代码创建应用程序。为了使用Git存储库创建应用程序，我们可以在终端中键入以下命令:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="f6ec" class="mv ls iq mr b gy mw mx l my mz">oc new-app <a class="ae mp" href="https://github.com/xaviervasques/OpenShift-ML-Online.git" rel="noopener ugc nofollow" target="_blank">https://github.com/xaviervasques/OpenShift-ML-Online.git</a></span></pre><p id="754c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这个命令有几个选项，比如通过指定— context-dir标志来使用我们的源代码库的子目录，指定Git分支或者设置— strategy标志来指定构建策略。在我们的例子中，我们有一个Socker文件，它将自动生成一个Socker构建策略。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/99edc9ccc9d60739ea2852920608716d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bx8RjqQcBFklz8jt5hC36A.png"/></div></div></figure><p id="7f6b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">应用程序已部署！应用程序需要向外界公开。正如前面的输出所指定的，我们可以通过执行以下命令来实现这一点:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="1d27" class="mv ls iq mr b gy mw mx l my mz">oc expose service/openshift-ml-online</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/4e1f0338425e65c5efaa8403c7d48fdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RiAPdqlT2XT2Yrdo4nf5ow.png"/></div></div></figure><p id="5a65" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以检查状态:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="10e3" class="mv ls iq mr b gy mw mx l my mz">oc status</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/cce89178a0ac569e478b057d03906f96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LThSrHcIVbnp5XJaAuexVQ.png"/></div></div></figure><p id="7d3f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以在输出中找到API的路径:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="812c" class="mv ls iq mr b gy mw mx l my mz">curl <a class="ae mp" href="http://openshift-ml-online-default.mycluster-par01-b-948990-d8688dbc29e56a145f8196fa85f1481a-0000.par01.containers.appdomain.cloud/" rel="noopener ugc nofollow" target="_blank">http://openshift-ml-online-default.mycluster-par01-b-948990-d8688dbc29e56a145f8196fa85f1481a-0000.par01.containers.appdomain.cloud</a></span></pre><p id="3c61" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它提供了预期的输出(svm模型对测试数据的分类得分)</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/7569d078b28dbc31fb0395db555af8e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iI6DzGlrMcll2RUTYAqSCw.png"/></div></div></figure><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="123b" class="mv ls iq mr b gy mw mx l my mz">oc get pods --watch</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/c05f002409b095e9c9232d0719065c0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pZjzWnw0QwF8heUdYvUTxA.png"/></div></div></figure><p id="086c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们还可以在OpenShift web控制台中找到关于我们服务的所有信息:</p><div class="kg kh ki kj gt ab cb"><figure class="ng kk nh ni nj nk nl paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/9e345fefdbb782d16958e5c9431d54a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*eIH_lDK-fiG6yRbkzvc45g.png"/></div></figure><figure class="ng kk nh ni nj nk nl paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/a8c2ad45c10fe39e3df4dc71fae44fe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*yhNnBd-174l1t5k2ZbIB-Q.png"/></div></figure></div><div class="ab cb"><figure class="ng kk nm ni nj nk nl paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/bd07c191e11b0fc9b706c76f360b7da1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*QmoDlSMQ9BvbluQgn_g2lg.png"/></div></figure><figure class="ng kk nn ni nj nk nl paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/4a520d33083d3eeb25974513020e04ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*0BFcxqRA_vfAHsRUcvExpg.png"/></div></figure></div><p id="3ab1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在透视图切换器中，如果我们选择Developer切换到Developer透视图并单击Topology，我们可以看到下面的屏幕:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/eddc885913a959c7c50157adf1b89b9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TrU_hk_maavMPlgParTlJA.png"/></div></div></figure><p id="3814" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在屏幕的右下角，面板显示了可以访问应用程序的公共URL。你可以在路线下看到它。如果我们单击链接，我们也可以从应用程序中获得预期的结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/66e1e539f7ea016556e6d4ae5be71f32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xQ9NhQe0IWRjdz5ob7KEWw.png"/></div></div></figure><p id="e87c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以使用web控制台或CLI创建不安全和安全的路由。不安全路由最容易设置，也是默认配置。然而，如果我们想为保持私有的连接提供安全性，我们可以使用<em class="no"> create route </em>命令并提供证书和密钥。</p><p id="d523" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我们想从OpenShift中删除应用程序，我们可以使用<em class="no"> oc delete all </em>命令:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="9e27" class="mv ls iq mr b gy mw mx l my mz">oc delete all — selector app=myapp</span></pre><p id="a189" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在没有Docker文件的情况下，OpenShift Source to Image (S2I)工具包将创建一个Docker映像。源代码语言是自动检测的。我们可以遵循相同的步骤。OpenShift S2I使用构建器映像及其源来创建部署到集群的新Docker映像。</p><h1 id="9b49" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated"><strong class="ak">结论</strong></h1><p id="c684" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">使用Docker、Python、Flask和OpenShift封装和部署机器/深度学习应用变得很简单。当我们开始将工作负载迁移到OpenShift时，应用程序被封装到一个容器映像中，该映像将被部署到测试和生产环境中，从而减少了我们在现实生活中部署应用程序时会看到的遗漏依赖项和错误配置问题的数量。</p><p id="987d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">真正的生活就是这样。MLOps需要数据科学家、开发人员和IT运营人员之间的交叉协作，这在协调方面非常耗时。在Kubernetes混合云平台(如OpenShift)上构建、测试和培训ML/DL模型，可以实现一致、可扩展的应用部署，并有助于根据需要在我们的生产环境中频繁部署/更新/重新部署。Red Hat OpenShift中集成的DevOps CI/CD功能允许我们将模型自动集成到开发过程中。</p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><p id="0d55" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">来源</strong></p><p id="5e9e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae mp" href="https://developer.ibm.com/technologies/containers/tutorials/scalable-python-app-with-kubernetes/" rel="noopener ugc nofollow" target="_blank">https://developer . IBM . com/technologies/containers/tutorials/scalable-python-app-with-kubernetes/</a></p><p id="a8a2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae mp" href="https://cloud.google.com/community/tutorials/kubernetes-ml-ops" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/community/tutorials/kubernetes-ml-ops</a></p><p id="cd10" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae mp" href="https://developer.ibm.com/tutorials/deploy-python-app-to-openshift-cluster-source-to-image/?mhsrc=ibmsearch_a&amp;mhq=deploy%20python%20app%20to%20openshift%20cluster%20source%20to%20image" rel="noopener ugc nofollow" target="_blank">https://developer . IBM . com/tutorials/deploy-python-app-to-open shift-cluster-source-to-image/？MH src = IBM search _ a&amp;mhq = deploy % 20 python % 20 app % 20 to % 20 open shift % 20 cluster % 20 source % 20 to % 20 image</a></p><p id="5bc1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae mp" href="https://docs.openshift.com/enterprise/3.1/dev_guide/new_app.html" rel="noopener ugc nofollow" target="_blank">https://docs . open shift . com/enterprise/3.1/dev _ guide/new _ app . html</a></p><p id="62a9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae mp" href="https://github.com/jjasghar/cloud-native-python-example-app/blob/master/Dockerfile" rel="noopener ugc nofollow" target="_blank">https://github . com/jjasghar/cloud-native-python-example-app/blob/master/docker file</a></p><p id="4755" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae mp" href="https://docs.openshift.com/container-platform/3.10/dev_guide/routes.html" rel="noopener ugc nofollow" target="_blank">https://docs . open shift . com/container-platform/3.10/dev _ guide/routes . html</a></p><p id="04a2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae mp" href="https://docs.okd.io/3.11/minishift/openshift/exposing-services.html" rel="noopener ugc nofollow" target="_blank">https://docs . okd . io/3.11/minishift/open shift/exposure-services . html</a></p><p id="a576" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae mp" href="https://docs.openshift.com/container-platform/3.10/architecture/networking/routes.html#secured-routes" rel="noopener ugc nofollow" target="_blank">https://docs . open shift . com/container-platform/3.10/architecture/networking/routes . html # secured-routes</a></p><p id="7c4e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae mp" href="https://docs.openshift.com/container-platform/4.7/installing/index.html#ocp-installation-overview" rel="noopener ugc nofollow" target="_blank">https://docs . open shift . com/container-platform/4.7/installing/index . html # OCP-installation-overview</a></p><p id="a182" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae mp" href="https://www.openshift.com/blog/serving-machine-learning-models-on-openshift-part-1" rel="noopener ugc nofollow" target="_blank">https://www . open shift . com/blog/serving-machine-learning-models-on-open shift-part-1</a></p><p id="9acb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae mp" href="https://developer.ibm.com/technologies/containers/tutorials/deploy-python-app-to-openshift-cluster-source-to-image/" rel="noopener ugc nofollow" target="_blank">https://developer . IBM . com/technologies/containers/tutorials/deploy-python-app-to-open shift-cluster-source-to-image/</a></p><p id="82d1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae mp" href="https://scikit-learn.org/stable/modules/generated/sklearn.datasets.load_iris.html" rel="noopener ugc nofollow" target="_blank">https://sci kit-learn . org/stable/modules/generated/sk learn . datasets . load _ iris . html</a></p></div></div>    
</body>
</html>