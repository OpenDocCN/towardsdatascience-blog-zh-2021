<html>
<head>
<title>Graphs 101: Airline Transportation Network</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">图表101:航空运输网络</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/graphs-101-airline-transportation-network-5548739fd22e?source=collection_archive---------23-----------------------#2021-07-13">https://towardsdatascience.com/graphs-101-airline-transportation-network-5548739fd22e?source=collection_archive---------23-----------------------#2021-07-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/08505bd44c1fbbe3645d6701b6f0282d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NOyr4JtdgrNG0JCQ.png"/></div></div></figure><div class=""/><div class=""><h2 id="045e" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">真实世界数据集的实践概述</h2></div><p id="e461" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">美国运输统计局(BTS)发布了大量与运输相关的数据。其中一个名为“<a class="ae lp" href="https://www.transtats.bts.gov/TableInfo.asp" rel="noopener ugc nofollow" target="_blank"> T-100国内航段(美国航空公司)</a>的数据集被描述为:</p><blockquote class="lq lr ls"><p id="e8e5" class="kt ku lt kv b kw kx kf ky kz la ki lb lu ld le lf lv lh li lj lw ll lm ln lo im bi translated"><em class="je">此表包含美国航空公司报告的国内直飞航段数据，包括承运人、始发地、目的地、飞机类型和运送乘客的服务等级、货运和邮件、可用容量、计划出发、已执行的出发、飞机小时数以及当始发地和目的地机场都位于美国及其领地边界内时的客座率。</em></p></blockquote><p id="22aa" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这实际上是一个很大的csv文件，其中每一行对应一个单独的航班，包括航空公司、始发地和目的地机场、登机的乘客数量、日期和时间等。如果我们把机场作为节点，把航班作为边，那么我们就有了自己的网络！</p><h1 id="c8ef" class="lx ly je bd lz ma mb mc md me mf mg mh kk mi kl mj kn mk ko ml kq mm kr mn mo bi translated">飞行情报</h1><p id="05c7" class="pw-post-body-paragraph kt ku je kv b kw mp kf ky kz mq ki lb lc mr le lf lg ms li lj lk mt lm ln lo im bi translated">当下载包含2019年所有航班的文件时，我们发现覆盖一年365天的391，114个独特航班。当我们合计在相同起点和目的地之间旅行的所有乘客时，我们发现我们减少到27，302行。按照乘客数量排序，我们发现2019年排名前五的航空公司是:</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/f940059a08d0f4f51ea3556f00693fe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*VL8e1l46pOc54zah.png"/></div></figure><p id="2a64" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">每人超过160万乘客！</p><p id="a8f8" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这个缩减数据集的每一行现在都对应于一条单独的边。这种格式被称为“<strong class="kv jf">边列表</strong>”，是表示一个图的最常见的形式之一，只是一个边列表，每行一个。如果你曾经看过一个典型的网络科学教程或<a class="ae lp" href="https://snap.stanford.edu/data/" rel="noopener ugc nofollow" target="_blank">在线网络数据仓库</a>这可能是你处理过的数据集的格式。</p><p id="04d8" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">仅仅通过这个简单的例子，我们就可以引入更多的概念。我们没有任何起点和终点相同的边(谁会想不着陆就从起点飞回他们出发的机场呢？).这种边被称为“<strong class="kv jf">自循环</strong>”，在大多数分析中会被丢弃。为了以防万一，我们检查是否有这样的边，发现了超过200个自循环:</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/d21ab28d57dc0300c1268331a90203b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/0*GMPdNvAjN6Zy_sOM.png"/></div></figure><p id="8d0f" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">其中一些似乎归因于空中旅行(例如大峡谷<a class="ae lp" href="https://en.wikipedia.org/wiki/Grand_Canyon_National_Park_Airport" rel="noopener ugc nofollow" target="_blank">和</a>)，而另一些则不那么明显。无论如何，我们将它们从边列表中删除，剩下E=27，072条边。</p><p id="e8b1" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">边也有明确定义的方向，即从起点到目的地，使其成为一个“<strong class="kv jf">有向网络</strong>”。如果我们考虑的不是航班，比如说州际高速公路，那么我们就会有一个“<strong class="kv jf">无向网络</strong>”(因为高速公路通常允许双向交通)。</p><p id="b7b0" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们的网络为每条边关联一个数值(飞行该路线的乘客数量)。这意味着我们定义的航空运输网络是一个“<strong class="kv jf">加权网络</strong>”。在一般情况下，边权重可以表示与边相关联的任何种类的数字属性，例如乘客数量、距离、最大流量等。</p><p id="0a8c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">此外，当我们将所有航班的乘客数量相加时，我们在任何节点对之间都只有一条边。这意味着我们构建的这个网络是一个“<strong class="kv jf">简单图</strong>”(没有多条边，也没有自循环)。如果我们对区分不同航空公司的航班感兴趣，我们可以在同一对节点之间允许多条边(每家航空公司一条)。在这种情况下，我们将处理一个“<strong class="kv jf">多重图</strong>”。</p><h1 id="8fb4" class="lx ly je bd lz ma mb mc md me mf mg mh kk mi kl mj kn mk ko ml kq mm kr mn mo bi translated">机场信息</h1><p id="075d" class="pw-post-body-paragraph kt ku je kv b kw mp kf ky kz mq ki lb lc mr le lf lg ms li lj lk mt lm ln lo im bi translated">既然我们已经探索了网络的边缘，我们将注意力转向节点。我们通过组合起点和终点来提取图中的节点列表。我们发现我们有N=1，318个唯一节点。谁知道仅在美国就有这么多机场？</p><p id="47a1" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">节点通常有一个与之相关联的ID(在本例中是IATA代码<a class="ae lp" href="https://en.wikipedia.org/wiki/IATA_airport_code" rel="noopener ugc nofollow" target="_blank">)并且大量信息可以与所使用的特定ID相关联，例如位置、大小、颜色、重量等。就机场而言，我们可以从另一个BTS表中下载每个机场的额外信息，该表被古怪地命名为“</a><a class="ae lp" href="https://www.transtats.bts.gov/Tables.asp?DB_ID=595&amp;DB_Name=Aviation%20Support%20Tables&amp;DB_Short_Name=Aviation%20Support%20Tables" rel="noopener ugc nofollow" target="_blank">主坐标</a>”表，BTS将其描述为:</p><blockquote class="lq lr ls"><p id="4cb8" class="kt ku lt kv b kw kx kf ky kz la ki lb lu ld le lf lv lh li lj lw ll lm ln lo im bi translated"><em class="je">该表包含航空数据库中使用的机场的历史(基于时间的)信息。它提供了国内和国外机场代码及其相关的世界区号、国家信息、州信息(如果适用)、城市名称、机场名称、城市市场信息以及经度和纬度信息的列表。</em></p></blockquote><p id="a038" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们对每个机场的<strong class="kv jf">纬度</strong>和<strong class="kv jf">经度</strong>坐标特别感兴趣，因为当我们试图可视化网络时，这将使我们的生活更容易。BTS的好心人让我们的生活变得更轻松，他们为我们提供了纬度和经度列，以及一个标志，表明这些是否是最新的可用坐标:</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi na"><img src="../Images/52a9852118ac272e0641b50b88da4b68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fTx_xfL_Qm3vf3U6.png"/></div></div></figure><p id="5665" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">谁知道机场会移动这么多？在我们过滤出最近的机场坐标后，我们发现有分布在世界各地的6，572个机场的信息。</p><p id="17a5" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">因为我们的航班网络只包括美国境内的航班，所以我们通过组合用作始发地或目的地的机场集来提取航班数据集中包含的节点集。美国共有1318个机场。当我们从机场纬度/经度数据库中筛选出这些机场时，我们就可以最终将它们绘制在地图上了！</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/c12e8f33c0fd4c218ce008d062edac88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*m5rI4zQ8xMWwOl7h.png"/></div></div></figure><p id="d2f5" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">由于我们的网络嵌入在真实空间中，我们能够轻松获得每个节点的空间坐标。情况并不总是这样，在我们能够可视化网络之前，我们必须为每个节点计算足够的X和Y坐标。在网络术语中，这被称为“<strong class="kv jf">图布局</strong>，有一整个<a class="ae lp" href="https://en.wikipedia.org/wiki/Graph_drawing" rel="noopener ugc nofollow" target="_blank">家族的算法</a>致力于计算它们。我们将在以后的文章中讨论其中的一些。</p><p id="8bba" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">正如我们所见，BTS数据库非常完整，包括美国所有领土和岛屿上的机场。为了让我们的生活更容易，我们把自己限制在美国48个相邻的州。通过进一步的限制，我们只剩下N=962个节点和E=22，691条边。</p><p id="1370" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们现在不仅可以看到节点，还可以看到这个简化网络的边:</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/08505bd44c1fbbe3645d6701b6f0282d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NOyr4JtdgrNG0JCQ.png"/></div></div></figure><h1 id="1364" class="lx ly je bd lz ma mb mc md me mf mg mh kk mi kl mj kn mk ko ml kq mm kr mn mo bi translated">网络分析</h1><p id="8d06" class="pw-post-body-paragraph kt ku je kv b kw mp kf ky kz mq ki lb lc mr le lf lg ms li lj lk mt lm ln lo im bi translated">随着我们的网络被完全定义，我们现在可以开始更深入地探索它。一个节点最基本的特征之一是它的度，k(T9):它所属的边的数量。在像我们这样的有向网络的情况下，我们区分输入和输出连接的数量，分别为<strong class="kv jf">输入/输出度</strong>。对于我们的网络，我们有:</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/79a5cd9d20ca6d60775b68d85422118e.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/0*0L07OMz8g8SHFG9I.png"/></div></figure><p id="b7c4" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们注意到两个要点。首先。平均入度和出度是相同的。这总是正确的，并且是一个节点的输出边必须是另一个输入边的事实的直接结果。我们还可以使用以下表达式轻松计算总体平均度:</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/b5cb2150ee5173e3ff4bf0e40c184f29.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/format:webp/0*xkQe8bT0k_ekfxZf.png"/></div></figure><p id="876b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在我们的例子中，平均度数是47.27，或者正好是平均进/出度数的两倍。基础数学还没有让我们失望！:)</p><p id="70b2" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">其次，也许更令人惊讶的是，我们注意到有几个节点的入度或出度为0。这意味着有些机场有航班起飞，但没有航班返回(反之亦然)！我们总共有60个这样的机场。在维基百科上快速查找机场代码发现，这些似乎是军事基地和其他通常不接待商业航班的机场。也许这些对应于紧急着陆？</p><p id="7b16" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们还可以看到哪些机场的进出航班数量最多:</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/f3c34ad556bcecd5e37833553479667a.png" data-original-src="https://miro.medium.com/v2/resize:fit:488/format:webp/0*IIUv3vExA3ZNnJh7.png"/></div></figure><p id="9f5d" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">毫不奇怪，这些都是大型航空枢纽，如<a class="ae lp" href="https://en.wikipedia.org/wiki/O%27Hare_International_Airport" rel="noopener ugc nofollow" target="_blank">芝加哥奥黑尔</a>、<a class="ae lp" href="https://en.wikipedia.org/wiki/Dallas/Fort_Worth_International_Airport" rel="noopener ugc nofollow" target="_blank">达拉斯沃斯堡</a>或<a class="ae lp" href="https://en.wikipedia.org/wiki/Hartsfield%E2%80%93Jackson_Atlanta_International_Airport" rel="noopener ugc nofollow" target="_blank">亚特兰大的哈兹菲尔德-杰克森</a>。</p><p id="96ee" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">从该表中，我们还可以看到，虽然接近，但传入和传出边的数量并不相同。当我们绘制k_in对k_out时，我们发现一些节点具有较高的kin值，而其他节点具有较高的kout值，这两者之间存在很强的相关性(尽管并不完美)。总体而言，皮尔逊相关系数为0.986171。</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/b1039114861e9d6a37fe37809ca228a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*O84yiJAunwkUF1SE.png"/></div></div></figure><p id="5649" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">总结网络连通性的更好方法是绘制度分布图，即kin/kout的每个值的相对频率:</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/81da482c07e8d97c61262571c9d29f1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*diKFsIGHqBsSVv7u.png"/></div></div></figure><p id="ec0b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们注意到，程度分布相当广泛，跨越两个数量级。这种分布(对数-对数标度上的线性)是经验网络的典型，有时被称为“<a class="ae lp" href="https://en.wikipedia.org/wiki/Scale-free_network" rel="noopener ugc nofollow" target="_blank">无标度</a>”。我们将在以后的文章中对此进行更多的探讨。</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ne"><img src="../Images/56ed4c31fa6d82b2632acf8daafece97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Muc66dkOYCg8XRhCypsDJQ.png"/></div></div></figure><p id="2321" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">你可以在我们的伙伴<a class="ae lp" href="https://github.com/DataForScience/Graphs4Sci" rel="noopener ugc nofollow" target="_blank"> GitHub知识库</a>中找到这篇文章中分析的所有代码，如果你喜欢这篇文章，你应该订阅数据科学子堆栈的<a class="ae lp" href="https://graphs4sci.substack.com/subscribe" rel="noopener ugc nofollow" target="_blank">图表！</a></p></div></div>    
</body>
</html>