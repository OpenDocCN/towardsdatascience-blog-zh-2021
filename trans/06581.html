<html>
<head>
<title>Exploring Well Log Data Using the Welly Python Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Welly Python库探索测井数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/exploring-well-log-data-using-the-welly-python-library-5e808cd3137b?source=collection_archive---------23-----------------------#2021-06-13">https://towardsdatascience.com/exploring-well-log-data-using-the-welly-python-library-5e808cd3137b?source=collection_archive---------23-----------------------#2021-06-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b79b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">专门用于加载和探索测井LAS文件的Python库</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/79e1e71c4de5a16ed3f041b1479ebf41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zXoOgds2pWA3uMq1"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@hello_ali?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">阿里·埃利奥特</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="8835" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">welly库由Agile Geoscience开发，用于加载、处理和分析单井或多口井的测井数据。该库允许探索las文件头中的元数据，还包含显示典型测井记录的绘图功能。此外，welly库包含用于识别和处理数据质量问题的工具。</p><p id="1f01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Welly库可以在https://github.com/agile-geoscience/welly<a class="ae ky" href="https://github.com/agile-geoscience/welly" rel="noopener ugc nofollow" target="_blank">的敏捷地球科学GitHub上找到</a></p><p id="7a26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个简短的教程中，我们将看到如何从Volve字段加载一个井，并探索这个库中可用的一些功能。</p><p id="dda6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用不同数据的这篇文章的视频版本可以在下面找到。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><h2 id="3213" class="lx ly it bd lz ma mb dn mc md me dp mf li mg mh mi lm mj mk ml lq mm mn mo mp bi translated">数据集</h2><p id="1020" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">我们正在使用的数据集来自于2018年发布的公开发布的Equinor Volve Field数据集。本教程中使用的文件来自15/19-F1B井。Volve数据集的详细信息可以在<a class="ae ky" href="https://www.equinor.com/en/what-we-do/norwegian-continental-shelf-platforms/volve.html" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="6eb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本教程是我的Python和岩石物理学系列的一部分。之前文章的链接可以在<a class="ae ky" href="https://www.andymcdonald.scot/portfolio/proj_python_petrophysics/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="e74e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文附带的笔记本可以在GitHub资源库中找到:<a class="ae ky" href="https://github.com/andymcdgeo/Petrophysics-Python-Series" rel="noopener ugc nofollow" target="_blank">https://github.com/andymcdgeo/Petrophysics-Python-Series</a></p><h2 id="6f69" class="lx ly it bd lz ma mb dn mc md me dp mf li mg mh mi lm mj mk ml lq mm mn mo mp bi translated">导入库和数据</h2><p id="f91b" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">本教程的第一步是从Welly库中加载所需的模块，Well和Curve。这些模块用于处理测井数据和单独的曲线。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="ccad" class="lx ly it mw b gy na nb l nc nd">from welly import Well<br/>from welly import Curve<br/><br/>import matplotlib.pyplot as plt</span></pre><p id="c1b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的LAS文件可以使用<code class="fe ne nf ng mw b">Well.from_las()</code>方法加载。这将创建一个新的井对象。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="fdd7" class="lx ly it mw b gy na nb l nc nd">well = Well.from_las('Data/15_19_F1B_WLC_PETRO_COMPUTED_INPUT_1.LAS')</span></pre><h1 id="8661" class="nh ly it bd lz ni nj nk mc nl nm nn mf jz no ka mi kc np kd ml kf nq kg mo nr bi translated">数据探索</h1><h2 id="5bd5" class="lx ly it bd lz ma mb dn mc md me dp mf li mg mh mi lm mj mk ml lq mm mn mo mp bi translated">文件和油井信息</h2><p id="5ac4" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">现在我们的数据已经加载完毕，我们可以开始研究所选井的内容和元数据。如果我们调用我们的<code class="fe ne nf ng mw b">well</code>对象，我们将看到一个包含井名、位置、坐标和曲线助记符列表的汇总表。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="5d5d" class="lx ly it mw b gy na nb l nc nd">well</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/9ea620cab26ff4f0cfd9d22e9a7ca711.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jehBhgVvTU7IBAHoGwL3xQ.png"/></div></div></figure><p id="be52" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以调用特定的函数来访问所需的信息。</p><p id="e9d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一个是<code class="fe ne nf ng mw b">header</code>，它将返回关键的标题信息，包括井名、唯一的井标识符(UWI)、字段名称和公司名称。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="37ca" class="lx ly it mw b gy na nb l nc nd">well.header</span></pre><p id="39fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将返回:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="97bb" class="lx ly it mw b gy na nb l nc nd">{'name': '15/9-F-1 B', 'uwi': '', 'field': 'VOLVE', 'company': 'Statoil Petroleum'}</span></pre><p id="8f86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们来看看这口井的位置信息。为此，我们可以为我们的数据对象调用<code class="fe ne nf ng mw b">.location</code>方法。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="43a1" class="lx ly it mw b gy na nb l nc nd">well.location</span></pre><p id="5735" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这会以字典的形式返回一个位置对象。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="76e8" class="lx ly it mw b gy na nb l nc nd">Location({'position': None, 'crs': CRS({}), 'location': 'Maersk Inspirer', 'country': '', 'province': '', 'county': '', 'latitude': '058 26\' 29.907" N    DMS', 'longitude': '001 53\' 14.708" E    DMS', 'api': '', 'td': None, 'deviation': None})</span></pre><p id="881d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们正在使用的文件不包含太多关于井的位置的信息，但是我们有关于纬度和经度的信息。这些可以通过在定位方法中添加<code class="fe ne nf ng mw b">.latitude</code>和<code class="fe ne nf ng mw b">.longitude</code>来提取，并转换成更容易阅读的格式。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="12a8" class="lx ly it mw b gy na nb l nc nd">lati = well.location.latitude<br/>long = well.location.longitude<br/><br/>print(lati)<br/>print(long)</span></pre><p id="4fb7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对这些方法使用print函数可以提供更好的输出。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="29ec" class="lx ly it mw b gy na nb l nc nd">058 26' 29.907" N    DMS<br/>001 53' 14.708" E    DMS</span></pre><h2 id="98e5" class="lx ly it bd lz ma mb dn mc md me dp mf li mg mh mi lm mj mk ml lq mm mn mo mp bi translated">探索数据</h2><p id="37ff" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">我们在上一节中看到，在查看井口时，我们有许多曲线。通过调用<code class="fe ne nf ng mw b">count_curves()</code>函数，我们可以知道有多少。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="d6e2" class="lx ly it mw b gy na nb l nc nd">well.count_curves()</span></pre><p id="f0ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将返回总共22条曲线。</p><p id="8168" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以使用方法<code class="fe ne nf ng mw b">_get_curve_menmonics()</code>获得las文件中的曲线助记符列表。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="5137" class="lx ly it mw b gy na nb l nc nd">well._get_curve_mnemonics()</span></pre><p id="b5b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将返回las文件中所有助记符的列表。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="0194" class="lx ly it mw b gy na nb l nc nd">['ABDCQF01',<br/> 'ABDCQF02',<br/> 'ABDCQF03',<br/> 'ABDCQF04',<br/> 'BS',<br/> 'CALI',<br/> 'DRHO',<br/> 'DT',<br/> 'DTS',<br/> 'GR',<br/> 'NBGRCFM',<br/> 'NPHI',<br/> 'PEF',<br/> 'RACEHM',<br/> 'RACELM',<br/> 'RD',<br/> 'RHOB',<br/> 'RM',<br/> 'ROP',<br/> 'RPCEHM',<br/> 'RPCELM',<br/> 'RT']</span></pre><p id="eef3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看所有曲线的另一种方法是调用<code class="fe ne nf ng mw b">.data</code>。这将返回一个包含井名的dictionary对象，以及该曲线的前3个和后3个值。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="8bcb" class="lx ly it mw b gy na nb l nc nd">well.data</span></pre><p id="38fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如下例所示，许多第一个和最后一个值被列为nan，它代表非数字。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="6f62" class="lx ly it mw b gy na nb l nc nd">{'ABDCQF01': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'ABDCQF02': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'ABDCQF03': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'ABDCQF04': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'BS': Curve([36. , 36. , 36. , ...,  8.5,  8.5,  8.5]),<br/> 'CALI': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'DRHO': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'DT': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'DTS': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'GR': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'NBGRCFM': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'NPHI': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'PEF': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'RACEHM': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'RACELM': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'RD': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'RHOB': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'RM': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'ROP': Curve([    nan,     nan,     nan, ..., 29.9699, 29.9903,     nan]),<br/> 'RPCEHM': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'RPCELM': Curve([nan, nan, nan, ..., nan, nan, nan]),<br/> 'RT': Curve([nan, nan, nan, ..., nan, nan, nan])}</span></pre><p id="659c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以更深入地研究las文件中的每条曲线，方法是传递曲线的名称，如下所示:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="5678" class="lx ly it mw b gy na nb l nc nd">well.data['GR']</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/40f1f5c795ee3869ccff0ab7c4faf78c.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*sl9UCSBOoiXBa-02Hqt_Ew.png"/></div></figure><p id="7d23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这为我们提供了一些曲线的汇总统计数据，例如:</p><ul class=""><li id="f04a" class="nu nv it lb b lc ld lf lg li nw lm nx lq ny lu nz oa ob oc bi translated">空值是什么</li><li id="439e" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated">曲线单位</li><li id="6e31" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated">曲线数据范围</li><li id="6c51" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated">数据的步长值</li><li id="c03a" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated">样本总数</li><li id="c033" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated">缺失值的总数(nan)</li><li id="231a" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated">曲线的最小值、最大值和平均值</li><li id="abee" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated">曲线描述</li><li id="0ac8" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated">前3个和后3个值的列表</li></ul><h1 id="c008" class="nh ly it bd lz ni nj nk mc nl nm nn mf jz no ka mi kc np kd ml kf nq kg mo nr bi translated">数据质量控制</h1><p id="6896" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">检查测井数据的质量是岩石物理工作流程的重要组成部分。</p><p id="b91d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">井眼环境可能是一个恶劣的环境，具有高温、高压、不规则的井眼形状等，所有这些都会对测井测量产生影响。这可能会导致许多问题，如缺失值、异常值、常量值和错误值。</p><p id="0eb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">welly library附带了许多质量控制检查，允许我们检查所有数据或特定曲线的问题。</p><p id="3345" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">质量控制检查包括:</p><ul class=""><li id="e2b1" class="nu nv it lb b lc ld lf lg li nw lm nx lq ny lu nz oa ob oc bi translated">检查间隙/缺失值:<code class="fe ne nf ng mw b">.no_nans(curve)</code></li><li id="5a0f" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated">检查整条曲线是否为空:<code class="fe ne nf ng mw b">.not_empty(curve)</code></li><li id="dfa5" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated">检查曲线是否包含常数值:<code class="fe ne nf ng mw b">.no_flat(curve)</code></li><li id="a53d" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated">检查单位:<code class="fe ne nf ng mw b">check_units(list_of_units)</code></li><li id="f037" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated">检查值是否都为正:<code class="fe ne nf ng mw b">all_positive(curve)</code></li><li id="5622" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated">检查曲线是否在范围内:<code class="fe ne nf ng mw b">all_between(min_value, max_value)</code></li></ul><p id="b404" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">方法的完整列表可在Welly帮助文档中找到:<a class="ae ky" href="https://welly.readthedocs.io" rel="noopener ugc nofollow" target="_blank">https://Welly . readthedocs . io</a></p><p id="ed7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">开始之前，我们需要导入质量模块，如下所示:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="6ec7" class="lx ly it mw b gy na nb l nc nd">import welly.quality as wq</span></pre><p id="c66c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们运行任何质量检查之前，我们首先需要创建一个列表，列出我们想要运行的测试以及我们想要运行这些测试的数据。</p><p id="3974" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要做到这一点，我们可以建立一个字典，关键字是我们想要运行检查的曲线。如果想在所有的曲线上运行它，我们需要使用键<code class="fe ne nf ng mw b">Each</code>。</p><p id="d84e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于每条曲线，我们将检查是否有任何平线值，任何差距，并确保曲线不是空的。对于伽马射线(GR)和体积密度(RHOB)曲线，我们将检查所有值是否为正值，它们是否在标准范围内，以及单位是否是我们期望的。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="7fda" class="lx ly it mw b gy na nb l nc nd">tests = {'Each': [wq.no_flat,<br/>                 wq.no_gaps,<br/>                 wq.not_empty],<br/>        'GR': [<br/>                wq.all_positive,<br/>                wq.all_between(0, 250),<br/>                wq.check_units(['API', 'GAPI']),<br/>        ],<br/>        'RHOB': [<br/>                wq.all_positive,<br/>                wq.all_between(1.5, 3),<br/>                wq.check_units(['G/CC', 'g/cm3']),<br/>        ]}</span></pre><p id="7f28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以按原样运行测试，但是，输出不容易阅读。为了更容易和更好，我们将使用IPython.display的HTML函数来制作一个漂亮的表格。</p><p id="221f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦模块被导入，我们可以创建一个名为<code class="fe ne nf ng mw b">data_qc_table</code>的变量来存储信息。分配给这个变量的是<code class="fe ne nf ng mw b">data.qc_table_html(tests)</code>，它从我们上面创建的<code class="fe ne nf ng mw b">tests</code>字典中生成表格。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="720c" class="lx ly it mw b gy na nb l nc nd">from IPython.display import HTML<br/>data_qc_table = well.qc_table_html(tests)<br/>HTML(data_qc_table)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/b386934de1a7177eef9620b022171ad6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*D1Ua1KrDXjvB297QGpPwRg.png"/></div></figure><p id="a95b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行测试后，我们可以看到返回了一个彩色的HTML表。任何用绿色突出显示的都是真的，任何用红色突出显示的都是假的。</p><p id="f8ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从表中我们可以看出，BS(位大小)曲线在三次测试中有一次失败。在<code class="fe ne nf ng mw b">no_flat</code>栏下，我们标记了一个错误值，表明该曲线包含常量/平坦值。当钻头尺寸曲线测量钻头直径时，这已被正确标记，钻头直径对于给定的一次运行或一系列运行是恒定的。</p><p id="ac13" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以看到许多曲线被标记为包含间隙。</p><p id="ce1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">表中还可以看到只针对GR和RHOB运行的测试。当我们在特定的曲线上运行特定的测试时，结果的剩余部分将变灰。</p><p id="9d05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以运行另一个测试来识别不是nan的数据部分。为此，我们设置了一个新的测试，并使用<code class="fe ne nf ng mw b">Each</code>应用于所有曲线。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="a6e1" class="lx ly it mw b gy na nb l nc nd">tests_nans = {'Each': [wq.fraction_not_nans]}<br/><br/>data_nans_qc_table = well.qc_table_html(tests_nans)<br/>HTML(data_nans_qc_table)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/82d42d5240368217523758d07bc27e03.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*Dgzt1VWzHLHQ8fFUzIEu6A.png"/></div></figure><p id="1beb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦我们运行这些测试，我们就会看到一个类似于上面的表格。在最后一列中，我们有每条曲线值的总分数，这不是一个nan。这些值是十进制的，值1.0表示100%完整。分数列包含该数字的四舍五入形式。</p><p id="337d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以写一个短循环，并打印出每条曲线的百分比值。这提供了一个更清晰的表格来了解每条曲线的缺失数据百分比。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="da6e" class="lx ly it mw b gy na nb l nc nd">print((f'Curve \t % Complete').expandtabs(10))<br/>print((f'----- \t ----------').expandtabs(10))<br/><br/>for k,v in well.qc_data(tests_nans).items():<br/>    <br/>    for i,j in v.items():<br/>        values = round(j*100, 2)<br/>    print((f'{k} \t {values}%').expandtabs(10))</span></pre><p id="0bd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将返回一个漂亮的</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="b85b" class="lx ly it mw b gy na nb l nc nd">Curve      % Complete<br/>-----      ----------<br/>ABDCQF01   9.72%<br/>ABDCQF02   9.72%<br/>ABDCQF03   9.72%<br/>ABDCQF04   9.72%<br/>BS         100.0%<br/>CALI       10.6%<br/>DRHO       10.62%<br/>DT         12.84%<br/>DTS        11.48%<br/>GR         97.91%<br/>NBGRCFM    39.73%<br/>NPHI       10.28%<br/>PEF        10.37%<br/>RACEHM     25.72%<br/>RACELM     25.72%<br/>RD         96.14%<br/>RHOB       10.37%<br/>RM         96.14%<br/>ROP        97.57%<br/>RPCEHM     25.72%<br/>RPCELM     25.72%<br/>RT         25.72%</span></pre><p id="1280" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从结果中我们可以看出，许多曲线的缺失值百分比很高。这可能是由于一些测量直到井更深时才开始。我们将能够在下一节用图来确定这一点。</p><h1 id="554a" class="nh ly it bd lz ni nj nk mc nl nm nn mf jz no ka mi kc np kd ml kf nq kg mo nr bi translated">数据绘图</h1><p id="5481" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">可视化测井数据是岩石物理学的核心，测井曲线是最常见的显示格式之一。welly库允许快速、轻松地生成测井曲线。</p><p id="11ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们生成一个我们希望在每个轨道中显示的数据列表。如果我们想在一个轨迹中显示多条曲线，我们可以嵌入另一个列表，例如<code class="fe ne nf ng mw b">['MD', ['DT', 'DTS']]</code>。内部列表中的曲线将绘制在相同的轨迹上，并且比例相同。</p><p id="6d42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们可以调用plot函数并传入曲目列表。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="0845" class="lx ly it mw b gy na nb l nc nd">tracks = ['MD', 'GR', 'RHOB', 'NPHI', ['DT', 'DTS']]<br/>well.plot(tracks=tracks)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl ok"><img src="../Images/8cb685bc0e471a1e8ff0a550a4f190f6.png" data-original-src="https://miro.medium.com/v2/format:webp/1*9maTfkKJiPqO5_lymK-DSA.png"/></div></figure><p id="d217" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如在“数据质量”一节中所讨论的，我们假设一些测井曲线没有一直延伸到油井顶部。这是非常常见的做法，避免了从油井顶部到底部运行工具的需要和成本。</p><p id="0fcc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们把较低的音程放大一点。为此，我们可以使用常规的matplotlib函数来设置y轴限制。请注意，我们确实需要颠倒数字，以便首先是较深的值，然后是较浅的一秒。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="ddc9" class="lx ly it mw b gy na nb l nc nd">tracks = ['MD', 'BS', 'CALI', 'GR', 'RHOB', 'NPHI', ['DT', 'DTS']]<br/>well.plot(tracks=tracks)<br/>plt.ylim(3500, 3000)</span><span id="b48f" class="lx ly it mw b gy ol nb l nc nd">(3500.0, 3000.0)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl ok"><img src="../Images/1253fa5672cd03ef80cae228e55c941c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*lIF-lnc_S9L8rS2wU35jcA.png"/></div></figure><p id="646d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从结果中我们可以看到，我们现在只需很少的努力就可以得到一个漂亮的图。</p><p id="400c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，对绘图外观的控制受到当前实施的限制，不允许对绘图进行粒度控制，如颜色、比例和显示反比例曲线(如中子和密度曲线)。</p><h1 id="ad92" class="nh ly it bd lz ni nj nk mc nl nm nn mf jz no ka mi kc np kd ml kf nq kg mo nr bi translated">测井数据到熊猫数据框</h1><p id="377a" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">在最后一节中，我们将看看如何将测井数据从welly导出到pandas。Pandas是最受欢迎的存储、分析和操作数据的图书馆之一。</p><p id="d5d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转换是一个简单的过程，可以通过调用我们的well对象上的<code class="fe ne nf ng mw b">.df()</code>来实现。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="76ba" class="lx ly it mw b gy na nb l nc nd">df = well.df()</span></pre><p id="4a54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过从pandas调用<code class="fe ne nf ng mw b">.describe()</code>方法来查看数据的汇总统计来确认数据已经被转换。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="d999" class="lx ly it mw b gy na nb l nc nd">df.describe()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl ok"><img src="../Images/bc8a58c272526c9e41ec95703baa3729.png" data-original-src="https://miro.medium.com/v2/format:webp/1*XVQ0DS4IZfPv26yV66Q2EA.png"/></div></figure><h1 id="aa68" class="nh ly it bd lz ni nj nk mc nl nm nn mf jz no ka mi kc np kd ml kf nq kg mo nr bi translated">摘要</h1><p id="aa9a" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">由Agile-Geoscience开发的welly library是一个处理和探索测井记录文件的强大工具。在本例中，我们已经了解了如何加载单个las文件，探索关于油井和曲线内容的元信息，并在测井图上显示测井数据。</p><p id="fa64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Welly有更多的功能，可以处理多个测井记录，并根据钻井数据创建合成地震图。</p><p id="eac9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里找到并探索welly知识库<a class="ae ky" href="https://github.com/agile-geoscience/welly" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="bc78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="om">感谢阅读！</em> </strong></p><p id="aab1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您觉得这篇文章有用，请随时查看我的其他文章，这些文章介绍了Python和测井数据的各个方面。你也可以在<a class="ae ky" href="https://github.com/andymcdgeo" rel="noopener ugc nofollow" target="_blank"><em class="om">GitHub</em></a><em class="om">找到我在这篇文章和其他文章中使用的代码。</em></p><p id="8b20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="om">如果你想联系我，你可以在</em><a class="ae ky" href="https://www.linkedin.com/in/andymcdonaldgeo/" rel="noopener ugc nofollow" target="_blank"><em class="om">LinkedIn</em></a><em class="om">或者我的</em> <a class="ae ky" href="http://andymcdonald.scot/" rel="noopener ugc nofollow" target="_blank"> <em class="om">网站</em> </a> <em class="om">找到我。</em></p><p id="cb14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有兴趣了解更多关于python和测井数据或岩石物理学的知识吗？跟我上 <a class="ae ky" href="https://medium.com/@andymcdonaldgeo" rel="noopener"> <em class="om">中</em> </a> <em class="om">。</em></p></div></div>    
</body>
</html>