<html>
<head>
<title>How to Measure your Team’s A/B Testing Impact</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何衡量您团队的A/B测试影响</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-measure-your-teams-a-b-testing-impact-f74c6f2b4660?source=collection_archive---------27-----------------------#2021-06-01">https://towardsdatascience.com/how-to-measure-your-teams-a-b-testing-impact-f74c6f2b4660?source=collection_archive---------27-----------------------#2021-06-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6b4f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Air BnB估算试验影响的方法</h2></div><p id="3ba0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在评估已实现功能的影响时，我们通常使用A/B测试提升来评估该功能。然而,《赢家的诅咒》使得我们的治疗提升了，平均来说，夸大了一个特征的真实影响。</p><p id="7a86" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面概述的调整允许我们考虑这种偏差，并对功能影响进行更可靠的估计。Air BnB的例子见图1。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/90092e71c4bb230f25481cfb243319c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tUIItVLhwsTTuoYnd-JhHg.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">图1:对Air BnB的偏置调整精度的测试，在7次实验中运行。注意这些数字改编自<a class="ae lr" href="https://www.kdd.org/kdd2018/accepted-papers/view/winners-curse-bias-estimation-for-total-effects-of-features-in-online-contr" rel="noopener ugc nofollow" target="_blank">论文</a>。</p></figure><p id="cd23" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从实现的角度来看，偏差调整只是从特征的观察到的提升中减去一项。它的计算效率和实现简单。然而，开发鲁棒的精度测量需要一个保持组，这很难设计。</p><h1 id="448b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">偏差调整技术TLDR</h1><p id="1840" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated"><strong class="kh ir"> 1)确定每个实验的启动标准。</strong>启动标准(<em class="mp"> b </em>)，即决定一项实验是否会投入生产的规则，是我们参考分布中表示统计显著性的临界点。对于α为0.05的t检验，<em class="mp"> b </em>为1.96。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/e48737d08ca087e91d30c600c5447d34.png" data-original-src="https://miro.medium.com/v2/resize:fit:200/format:webp/1*7eQcZG0OlLlFV1PyCyuNzg.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated"><em class="mr">图2:δ</em>是实验升力，σ是标准偏差(或标准误差)，而<em class="mr"> b是我们参考分布的截止值。</em></p></figure><p id="da1e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> 2)计算每个实验的偏差。</strong>偏差被定义为由于我们的数据中的自然变化而观察到我们的实验寿命的“可能性”,取决于我们的选择标准。这种可能性由未标准化的z值表示。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/4d21b83808f3be515d787b570b263776.png" data-original-src="https://miro.medium.com/v2/resize:fit:628/format:webp/1*uEEPzUC5Nur81ZqxWKGtgg.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">图3: φ是<a class="ae lr" href="https://en.wikipedia.org/wiki/Normal_distribution" rel="noopener ugc nofollow" target="_blank">正态分布pdf </a>，A <em class="mr">是我们选择启动的一组实验。</em></p></figure><p id="1c0b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> 3)从每个实验中减去偏差项，并对结果求和。</strong>我们现在可以开发一个调整后的总实验升力估计值，该值考虑了赢家诅咒的偏差。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/8efd08170933d6b10274184ea51a1df4.png" data-original-src="https://miro.medium.com/v2/resize:fit:456/format:webp/1*FdECi4xuyCNy0HX5XWmcaQ.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">图4:估计无偏升力。</p></figure><p id="74ea" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很简单，对吧？</p><h1 id="c122" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">我想是的，但是偏差调整实际上是如何工作的呢？</h1><h2 id="a9fd" class="mu lt iq bd lu mv mw dn ly mx my dp mc ko mz na me ks nb nc mg kw nd ne mi nf bi translated">胜利者的诅咒</h2><p id="acd2" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">好的，要理解调整在做什么，我们首先需要理解为什么需要调整。赢家的诅咒是一个借用自经济学的概念，认为拍卖的赢家总是出价过高。要理解这种现象，以及它与在线A/B测试的联系，我们来看一张图。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi ng"><img src="../Images/37b0d68c9eab5a27d2437a1c444b304e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AwKgr-3AezyDmMxmY_atuQ.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">图5:展示赢家诅咒的直方图。</p></figure><p id="83a1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里我们看到一个代表拍卖中所有可能出价的钟形曲线。大多数人会出价接近物品的真实价值，即中间的红线。然而，有些人可能对这件物品不感兴趣，所以他们会支付不足，提前离开拍卖。其他人可能真的对这件物品感兴趣，所以他们会支付远远超过其真实价值的价格。最有积极偏见的人会出价最高，赢得拍卖。</p><p id="7a5f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这种情况下，胜出的出价必须高于所有其他出价。让我们用一个条件来定义它，其中管道“|”的左边取决于右边的不等式。</p><pre class="lc ld le lf gt nh ni nj nk aw nl bi"><span id="6da9" class="mu lt iq ni b gy nm nn l no np">Winning Bid := bid | bid &gt; MAX(all other bids)</span></pre><p id="89b1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">太好了。现在我们有了这个条件，让我们把它和在线实验联系起来。</p><p id="779f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与拍卖不同，当运行A/B测试时，我们不知道处理的<strong class="kh ir">真实</strong> <strong class="kh ir">影响</strong>。相反，通过一些统计意义来支持我们的结论，<strong class="kh ir">我们使用获胜(观察到的)影响来估计真正的影响</strong>。因此，当我们选择将治疗方法投入生产时，我们是在挑选最好的解决方案。</p><p id="1a0c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，如果我们选择非常积极和消极的影响，我们的选择平均来说是无偏的，但因为我们只选择积极影响高的治疗，我们更有可能选择高估。</p><p id="de14" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，全球抵制组织(即不具备上述任何特征的组织)可以轻松克服赢家的诅咒。从那里，我们可以进行A/B测试，其中处理是<em class="mp">所有功能都已实现</em>，控制是<em class="mp">所有功能都不是</em>。然而，全球抵制带来了几个问题，其中一些是…</p><ol class=""><li id="e60e" class="nq nr iq kh b ki kj kl km ko ns ks nt kw nu la nv nw nx ny bi translated">高工程升力，</li><li id="c1be" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">处于这种维持状态的用户看不到改进的功能，而且</li><li id="4421" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">抵制不能被实施来隔离单个团队的影响。如果我们想分别比较产品和ML团队的实验影响，我们需要一个支持者。</li></ol><h2 id="dbc8" class="mu lt iq bd lu mv mw dn ly mx my dp mc ko mz na me ks nb nc mg kw nd ne mi nf bi translated"><strong class="ak">赢家诅咒的数学</strong></h2><p id="fd4d" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">事实证明，我们可以从数学上证明，对于我们投入生产的实验，我们的真实实验效果<em class="mp">平均</em>小于我们观察到的实验效果<strong class="kh ir">。这句话的最后一部分是关键；如果我们没有选择要实施的实验，就不存在选择偏差，胜利者的诅咒也不适用。</strong></p><p id="761f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然数学对于实现来说不是必需的，但是它非常简单，所以我们将快速回顾一下。</p><p id="3175" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们希望证明我们观察到的提升的期望值(平均值)大于真实的、不可测量的提升。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/85815e6ce332663fdf8a72b742da9293.png" data-original-src="https://miro.medium.com/v2/resize:fit:316/format:webp/1*2nxTRxUIqm5sBw0C3VgWSw.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">图6:观察到的升力大于真实升力的情况。</p></figure><p id="70e1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里，<em class="mp"> O </em>是观察到的实验升力之和，<em class="mp"> T </em>是我们假设的真实升力之和。注意第二个量是不可测量的。还要注意，这些金额受我们实施其治疗的标准的限制。我们将这个实现条件表示为<em class="mp"> A </em>。</p><p id="4e68" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了包括实施标准，我们将该等式转换为图7中的总和。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi of"><img src="../Images/6c52a6b9de29d7a171d6b806b4fe56c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/1*dgPPoaSUZrm4Mmu05k_dVA.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">图7:总的观察影响减去总的真实影响的期望值。</p></figure><p id="8958" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里，</p><ul class=""><li id="982a" class="nq nr iq kh b ki kj kl km ko ns ks nt kw nu la og nw nx ny bi translated"><em class="mp"> j </em>是我们的<em class="mp"> n </em>总用户的迭代器，</li><li id="d16c" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la og nw nx ny bi translated"><em class="mp"> i </em>是<em class="mp">中每一个实验的一个</em>，我们设定的实验要启动、</li><li id="f38d" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la og nw nx ny bi translated"><em class="mp"> Oⱼ </em>是我们在A/B测试中观察到的效果，以及</li><li id="cecb" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la og nw nx ny bi translated">Tⱼ是我们真实的(不可测量的)效果。</li></ul><p id="1ddf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下一步相当疯狂。我们将参考分布的实验临界值定义为<em class="mp">δ/σ&gt;b</em>，其中b是置信度为α的分布的临界值。在英语中，我们利用统计显著性标准，并将该标准代入等式。请注意，<em class="mp"> b </em>的典型值是1.96，这是置信度为0.05时的t统计值(单侧)。</p><p id="3016" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这种替换产生了下面的等式。请注意，我们也将期望值移到求和中。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/da4ba539672b6a1db217be2ab2d40f56.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*UqUGgeuGUlKtikL31n0a2g.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">图8:替换了stat sig标准的图7。</p></figure><p id="309b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从这里，我们可以从不等式的两边减去Tⱼ，得到图9。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/4bf3eb94d9d162dbfd6bb813e35f710c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*erGvxHjLinkqYZXRtoWMgw.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">图9:图8从不等式的两边减去了我们的T_j。</p></figure><p id="c74b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，因为<em class="mp"> Oⱼ </em>严格大于<em class="mp"> b*σ </em>(根据我们的实现标准)，我们可以保证<em class="mp"> E[O] &gt; E[T] </em>。算出每个例子都很冗长，但是如果你好奇，可以查看3.2部分的完整步骤。</p><p id="b94a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我不确定你的看法，但我认为不等式替换是相当疯狂的。</p><h2 id="8027" class="mu lt iq bd lu mv mw dn ly mx my dp mc ko mz na me ks nb nc mg kw nd ne mi nf bi translated"><strong class="ak">偏置调整</strong></h2><p id="8007" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">现在我们已经对我们的问题有了一些直觉，让我们来谈谈解决方案。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oj"><img src="../Images/7ac9fda72b232b0dee91b1f1912651df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2Kg9A6J55-rjIYzRRs06Bg.gif"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">图10:我们的调整组件的模拟。</p></figure><p id="494a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的目标是考虑在选择要实施的实验时引入的偏差；因为我们只选择非常积极的治疗，我们更有可能选择高估。</p><p id="240d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了调整我们的升力，我们减去这个观察值被高估的“可能性”。同样，这种可能性由z得分乘以我们的度量标准的标准差来表示，这将标准化单位转换为我们的度量单位。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/b3f033b8665a65b07827388e6b223c05.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/format:webp/1*tMluX4mR4Lr9o-OPPbsu1A.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">图11:我们的真实总影响无偏估计的公式。</p></figure><p id="9962" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在图11中，我们看到了完整的调整公式。重点关注的区域是<em class="mp"> φ </em>里面的分子，我们的正态概率分布函数(PDF)。我们可以看到，随着我们观察到的升力(<em class="mp">δ</em>)变大(由于正常pdf中的负号)，我们的调整项变小。<strong class="kh ir">如果我们的lift比我们的实现标准(<em class="mp"> b </em> ᵢ <em class="mp"> *σ </em> ᵢ)大得多，那就更值得信赖，更不容易出现偏差。</strong></p><p id="165e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而且，所有这些标准差(<em class="mp"/>)<em class="mp"/>)只是用来在标准化正态分布(<em class="mp">【N(0，1)】</em>)单位和我们的度量单位之间移动。从直觉的角度来看，它们并不重要；它们只是方便使用普通的pdf，<em class="mp"> φ </em>。</p><p id="5ec6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">置信区间</strong></p><p id="df15" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">既然我们能够估计由于赢家诅咒而产生的偏差，我们可能想要计算我们在这个估计中的置信度。本文讨论了3种置信区间的计算:天真，自助和无偏自助。如果你想计算置信区间，只需参考论文或任何其他关于这些方法的讨论。</p><p id="bc09" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这就是你要的。实验影响的无偏测量。</p><h1 id="e6d7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">实施说明</h1><ul class=""><li id="7254" class="nq nr iq kh b ki mk kl ml ko ol ks om kw on la og nw nx ny bi translated">对于这个公式，我们假设实验影响是相加的，即它们是按顺序测试的。如果不是这种情况，您将不得不调整数学来处理乘法影响。</li><li id="bbe5" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la og nw nx ny bi translated">如数学中所暗示的，我们还假设每个分级实验都有正的和统计上显著的升力，即升力大于<em class="mp"> b </em>。如果不是这样，你必须做一些调整。如果您对调整有任何疑问，请随时联系我们。</li><li id="a16d" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la og nw nx ny bi translated">实施时，重要的是要批判性地思考你的数字意味着什么。例如，确保实验处理中的目标用户能够代表你的用户群体。如果实验的目标是新用户，那么在全球范围内实施时，一定要根据新用户的数量而不是用户总数进行扩展。</li><li id="1af7" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la og nw nx ny bi translated">如前所述，维持组是评估总体功能影响的最准确的方法。如果可能的话，在第一次实现时，对您的评估和坚持组一起运行QA。</li></ul></div><div class="ab cl oo op hu oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="ij ik il im in"><p id="b115" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢你完成这篇文章！我将再写49篇文章，将“学术”研究引入DS行业。查看评论，了解有关调整实验影响的更多链接/想法。</p></div></div>    
</body>
</html>