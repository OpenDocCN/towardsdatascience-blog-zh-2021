<html>
<head>
<title>Analysis of Running Activities from Garmin Watch Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python分析Garmin Watch中的跑步活动</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/analysis-of-runing-activities-from-garmin-watch-using-python-99609f83314e?source=collection_archive---------15-----------------------#2021-10-01">https://towardsdatascience.com/analysis-of-runing-activities-from-garmin-watch-using-python-99609f83314e?source=collection_archive---------15-----------------------#2021-10-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="79b0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">发现你的跑步模式</h2></div><p id="33fc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在疫情期间，我决定寻找一种新的活动，而不是当时关闭的健身房或游泳池。我从来不喜欢跑步，但对我来说，这显然是一个对Covid友好的选择，所以我决定尝试一下。我买了Garmin Vivoactive 4来跟踪我的进展，并开始了旅程。</p><p id="b66b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Garmin Connect应用程序确实提供了一些见解，如平均速度、一段时间内的心率等。但我很好奇，想自己摆弄数据，看看自己的进步。在最初几个月的跑步后，我还受过两次伤(先是左腿，然后右腿)，所以想看看数据是否能揭示这些伤的根本原因。这个项目我用的是Python 3.8和Jupiter Notebook。</p><h1 id="8c95" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">数据收集</h1><p id="f773" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">首先，我们需要得到数据。Garmin提供了几种方式来<a class="ae ly" href="https://support.garmin.com/en-US/?faq=W1TvTPW8JZ6LfJSfK512Q8" rel="noopener ugc nofollow" target="_blank">访问你的数据</a>。您可以将上传的活动导出为CSV文件或请求数据导出，Garmin会将您所有的数据以JSON格式发送到您的电子邮件中(无论如何您都必须将其解析为CSV格式才能进行分析)。我通过“运行”类型过滤了我的活动，并将其导出:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/081c6761f09fa41daea6b87fe0bb1969.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CD8F7URj8v89PAWK"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者图片</p></figure><p id="7e45" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我也使用法定测量单位，所以所有的数据都是英里。如果您更喜欢km，您可以更改Garmin设置并以公制单位导出所有内容，或者稍后修改数据框中的数据。</p><h1 id="b406" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">数据清理</h1><p id="111c" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">我们先来看看数据。我们需要导入pandas库来处理数据框:</p><pre class="ma mb mc md gt mp mq mr ms aw mt bi"><span id="5e78" class="mu lc iq mq b gy mv mw l mx my">import pandas as pd</span><span id="0d86" class="mu lc iq mq b gy mz mw l mx my">df = pd.read_csv('garmin/Activities.csv')</span><span id="6aca" class="mu lc iq mq b gy mz mw l mx my">df.info()</span></pre><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi na"><img src="../Images/e44d0486f8b20c8df0921d4f31c219b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*Wa2kOjE3GSv4o37lwzaWBw.png"/></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者图片</p></figure><p id="a1b8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">哇，32列！我不需要全部，所以让我们先清理一下:</p><p id="6106" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">0.活动类型—这必须始终“运行”,以便我们能够安全地删除它。让我们做一个快速的理智检查:</p><pre class="ma mb mc md gt mp mq mr ms aw mt bi"><span id="d7f2" class="mu lc iq mq b gy mv mw l mx my">df['Activity Type'].describe()</span></pre><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/8b4a0ef0d898b7c365863b2a2927a82e.png" data-original-src="https://miro.medium.com/v2/resize:fit:610/format:webp/1*PlZtKTdjDetaVo6fgV57iw.png"/></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者图片</p></figure><p id="c58c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">是的，正如预测的那样，所有的活动都是“运行”类型的，删除这个列很好。</p><p id="ef98" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">1.Date —我们肯定需要这个列，但是，数据类型是object，而不是datetime，所以我们将稍后修复它。</p><p id="5923" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我也会用4。距离，5。卡路里，6。时间，平均7小时，最大8小时，9小时。平均跑步节奏，10。最大跑步步频，11。平均配速，12。最佳配速，平均步幅15，耗时29。</p><p id="9474" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其中一些是对象类型，我们需要在以后将它们转换成datetime或float64。</p><p id="4e5c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">好了，让我们更新数据框，只保留我们要使用的列:</p><pre class="ma mb mc md gt mp mq mr ms aw mt bi"><span id="8ff3" class="mu lc iq mq b gy mv mw l mx my">df = df[['Date', 'Distance','Calories','Avg HR','Avg Run Cadence', 'Avg Pace', 'Best Pace', 'Avg Stride Length', 'Elapsed Time']]</span></pre><p id="9bb3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们将日期、平均配速、最佳配速、经过时间转换成日期时间，然后将时间转换成分钟数:</p><pre class="ma mb mc md gt mp mq mr ms aw mt bi"><span id="18be" class="mu lc iq mq b gy mv mw l mx my">#convert 'Date', 'Avg Pace', 'Best Pace', 'Elapsed Time' objects to datetime format</span><span id="d4c2" class="mu lc iq mq b gy mz mw l mx my">df['Date'] = pd.to_datetime(df['Date'])</span><span id="e6dd" class="mu lc iq mq b gy mz mw l mx my">df['Avg Pace'] = pd.to_datetime(df['Avg Pace'], format='%M:%S')</span><span id="ac59" class="mu lc iq mq b gy mz mw l mx my">df['Best Pace'] = pd.to_datetime(df['Best Pace'], format='%M:%S')</span><span id="f503" class="mu lc iq mq b gy mz mw l mx my">df['Elapsed Time'] = pd.to_datetime(df['Elapsed Time'])</span><span id="f454" class="mu lc iq mq b gy mz mw l mx my">#convert 'Avg Pace', 'Best Pace', 'Elapced Time' objects to the number of minutes</span><span id="df67" class="mu lc iq mq b gy mz mw l mx my">df['Avg Pace'] = df['Avg Pace'].dt.hour*60 + df['Avg Pace'].dt.minute + df['Avg Pace'].dt.second/60</span><span id="2bea" class="mu lc iq mq b gy mz mw l mx my">df['Best Pace'] = df['Best Pace'].dt.hour*60 + df['Best Pace'].dt.minute + df['Best Pace'].dt.second/60</span><span id="eba8" class="mu lc iq mq b gy mz mw l mx my">df['Elapsed Time'] = df['Elapsed Time'].dt.hour*60 + df['Elapsed Time'].dt.minute + df['Elapsed Time'].dt.second/60</span></pre><p id="bb78" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我更了解速度(英里/小时)而不是配速(分钟/英里)，所以将增加2个新列:</p><pre class="ma mb mc md gt mp mq mr ms aw mt bi"><span id="112b" class="mu lc iq mq b gy mv mw l mx my">#add 'Avg Speed' and 'Best Speed' columns</span><span id="af94" class="mu lc iq mq b gy mz mw l mx my">df['Avg Speed'] = 60 / df['Avg Pace']</span><span id="9309" class="mu lc iq mq b gy mz mw l mx my">df['Best Speed'] = 60 / df['Best Pace']</span></pre><p id="a645" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，让我们将对象类型的其余列转换为float64:</p><pre class="ma mb mc md gt mp mq mr ms aw mt bi"><span id="5e3d" class="mu lc iq mq b gy mv mw l mx my">s = df.select_dtypes(include=’object’).columns</span><span id="74ee" class="mu lc iq mq b gy mz mw l mx my">df[s] = df[s].astype(“float”)</span></pre><p id="9d81" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">总部，我有:</p><p id="b024" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">值错误:无法将字符串转换为浮点数:“—”</p><p id="c731" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我没想到会看到这个。让我们找出我们在哪里有' ——:</p><pre class="ma mb mc md gt mp mq mr ms aw mt bi"><span id="fa11" class="mu lc iq mq b gy mv mw l mx my">df[df.isin(['--']).any(axis=1)]</span></pre><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nc"><img src="../Images/255996472f1624d9a6b5073ddcee8f5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5tkM1vzTQAO7R6PQ_lpleA.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者图片</p></figure><p id="b491" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我的数据集中有1个虚拟运行会话。我们可以用NaN代替'—':</p><pre class="ma mb mc md gt mp mq mr ms aw mt bi"><span id="aaae" class="mu lc iq mq b gy mv mw l mx my">import numpy as np</span><span id="b0d1" class="mu lc iq mq b gy mz mw l mx my">df.replace({'--':np.nan},  inplace=True)</span></pre><p id="9551" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们再次尝试运行我们的小代码来将对象列转换为float64:</p><pre class="ma mb mc md gt mp mq mr ms aw mt bi"><span id="f36d" class="mu lc iq mq b gy mv mw l mx my">#convert remaining columns of object type to float64</span><span id="57e6" class="mu lc iq mq b gy mz mw l mx my">s = df.select_dtypes(include='object').columns</span><span id="81f7" class="mu lc iq mq b gy mz mw l mx my">df[s] = df[s].astype("float")</span><span id="c223" class="mu lc iq mq b gy mz mw l mx my">df.info()</span></pre><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/1b00c8f49e0906907c2807aaceffaf9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*5c25Y-n8My--mB0cC3wSlA.png"/></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者图片</p></figure><p id="8d52" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">终于成功了！最后看一下数据:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi ne"><img src="../Images/92f004ad7319a61112224033874a714d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MBLaytZ2xBzvUWH98qDMtg.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者图片</p></figure><h1 id="3f33" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">数据分析</h1><p id="ee40" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">我将使用seaborn和Matplotlib Pyplot库来可视化我的数据。让我们从心跳分布的简单直方图开始:</p><pre class="ma mb mc md gt mp mq mr ms aw mt bi"><span id="4e88" class="mu lc iq mq b gy mv mw l mx my">import seaborn as sns</span><span id="dc41" class="mu lc iq mq b gy mz mw l mx my">import matplotlib.pyplot as plt</span><span id="330d" class="mu lc iq mq b gy mz mw l mx my">plt.figure(figsize=(14,6))</span><span id="d282" class="mu lc iq mq b gy mz mw l mx my">sns.histplot(data = df, x='Avg HR').set(title = 'Average HR Distribution')</span></pre><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nf"><img src="../Images/0921382556d6787f262578479e6211ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ei05fCSXvFIJut3wQDGYZg.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者图片</p></figure><p id="ffac" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">心跳分布在我看来很正常(:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi ng"><img src="../Images/2fe444cb3a5aa916c1271efa654336e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JjgCUtODJGdB8CigaGCVtA.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">塞巴斯蒂安·劳贝在<a class="ae ly" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="6d59" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">运行期间最有可能的值是大约135 BPM。</p><p id="89a1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">只有两种方法可以提高你的跑步速度:你可以增加你的步频(每分钟的步数)或者步幅。我们去看看。</p><p id="935c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先是节奏:</p><pre class="ma mb mc md gt mp mq mr ms aw mt bi"><span id="8aaf" class="mu lc iq mq b gy mv mw l mx my">sns.jointplot(x='Avg Speed',y='Avg Run Cadence', data=df.dropna(),kind='scatter')</span><span id="e1aa" class="mu lc iq mq b gy mz mw l mx my">print("The correlation coefficient between cadence and speed:", df['Avg Speed'].corr(df['Avg Run Cadence']))</span></pre><p id="fe91" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nh">节奏与速度的相关系数:0.7879793392063</em></p><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/7e2feab7a8e67c8148f9034729d9dead.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/format:webp/1*8hChN0iWy4IYQ8SKtZAGuQ.png"/></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者图片</p></figure><p id="0133" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于步幅长度:</p><p id="c41a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nh">步幅与速度的相关系数:0.792976223204663</em></p><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/de96d06f0536444dc439a15fac5626f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/1*9IZFrdZeOBwop2fhgOnk_g.png"/></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者图片</p></figure><p id="ad79" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">节奏和步幅与速度有很强的相关性。我可以同时增加步频和步幅吗？让我们来看看:</p><p id="004b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nh">步幅与跑步节奏的相关系数:0.4213359685994146 </em></p><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/6d5bc09f0cd03c69fb3ea5f9c321c056.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/1*DtlQ46A3uPFbaqORUo2JYQ.png"/></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者图片</p></figure><p id="dde1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我的例子中，步频和步幅之间的相关性要弱得多。至少还是正面的。比较一年内的数据会很有趣。</p><p id="6628" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们仔细看看速度。我想将它按月分组，并绘制每月的箱线图:</p><pre class="ma mb mc md gt mp mq mr ms aw mt bi"><span id="75f1" class="mu lc iq mq b gy mv mw l mx my">plt.figure(figsize=(14,6))</span><span id="3499" class="mu lc iq mq b gy mz mw l mx my">#add extra column with month for every running session</span><span id="acaf" class="mu lc iq mq b gy mz mw l mx my">df['Month'] = df['Date'].dt.strftime('%b') + " " + df['Date'].dt.strftime('%Y')</span><span id="8f80" class="mu lc iq mq b gy mz mw l mx my">#sort datataset by date in ascending order</span><span id="5f20" class="mu lc iq mq b gy mz mw l mx my">df.sort_values(by='Date', inplace=True)</span><span id="72e5" class="mu lc iq mq b gy mz mw l mx my">#plot boxplots grouped by month</span><span id="c853" class="mu lc iq mq b gy mz mw l mx my">sns.boxplot(x='Month',y='Avg Speed', palette=["m", "g"], data=df.dropna()).set(title = 'Avg Speed by Month')</span></pre><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nk"><img src="../Images/f5f8efab4ceb5dd4ffba3c6f6800fbdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m-NIk1glp8L9kd9PMGX4qw.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者图片</p></figure><p id="552b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有意思。前2个月(2020年12月和2021年1月)是我最快的几个月。我在二月份左腿受伤时放慢了速度，然后我想我恢复了，在四月份右腿受伤。五月和七月几乎没有跑步，七月我开始谨慎锻炼。我的中值速度仍然低于1月份，但你可以看到9月份我的最大速度的离群值(那是因为我参加了5K比赛)。</p><p id="4ccc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们用节奏和步幅做同样的练习:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nl"><img src="../Images/ab48f18fc1de587e05fdeb9aefa39ad0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o2991Me5_Ug4DxR52n1SLA.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者图片</p></figure><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nm"><img src="../Images/39fceb8adc788b675c9e4ca2f7c0f100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VD5VQX0i-snanbsW50o_Wg.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者图片</p></figure><p id="971b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里有一些模式。受伤后，我在7月份开始慢慢增加步频，而我的步幅基本保持在同一水平。这正是我想要达到的目标:增加你的节奏是一种压力小得多的提高速度的方法，我现在想放松一下！</p><p id="b55b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我还想知道现在我每周跑步的次数，以及它与我的平均速度之间的关系。</p><p id="89ab" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，让我们创建一个新的数据集，并按周对数据进行分组。我还将创建“计数”列来计算每周的会议次数:</p><pre class="ma mb mc md gt mp mq mr ms aw mt bi"><span id="82e1" class="mu lc iq mq b gy mv mw l mx my">df['Count'] = 1</span><span id="11ad" class="mu lc iq mq b gy mz mw l mx my">#aggregate data by week</span><span id="5540" class="mu lc iq mq b gy mz mw l mx my">dfW = df.groupby(pd.Grouper(key='Date',freq='W')).agg({'Count':'sum','Distance':'sum', 'Calories':'sum','Avg HR':'mean','Avg Run Cadence':'mean', 'Avg Speed':'mean','Best Speed':'mean', 'Avg Pace':'mean', 'Best Pace':'mean', 'Avg Stride Length':'mean', 'Elapsed Time':'mean'}).reset_index()</span><span id="d94c" class="mu lc iq mq b gy mz mw l mx my">dfM.head()</span></pre><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nn"><img src="../Images/aa4992352b6d81192b4b9f9ae2d40418.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gbf_DMzmHaD5yF9iMmPURg.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者图片</p></figure><p id="648a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我将展示每周的会议次数与我的平均速度:</p><pre class="ma mb mc md gt mp mq mr ms aw mt bi"><span id="40ce" class="mu lc iq mq b gy mv mw l mx my"># create figure and axis objects with subplots()</span><span id="4c9b" class="mu lc iq mq b gy mz mw l mx my">fig,ax = plt.subplots(figsize=(14,6))</span><span id="9839" class="mu lc iq mq b gy mz mw l mx my"># make a barplot</span><span id="2ef1" class="mu lc iq mq b gy mz mw l mx my">count = ax.bar(dfW['Date'], dfW['Count'],width=10, color='red',label='Number of Runs')</span><span id="d91d" class="mu lc iq mq b gy mz mw l mx my">ax.bar_label(count)</span><span id="323a" class="mu lc iq mq b gy mz mw l mx my"># set x-axis label</span><span id="f187" class="mu lc iq mq b gy mz mw l mx my">ax.set_xlabel('Date')</span><span id="a8f9" class="mu lc iq mq b gy mz mw l mx my">ax.legend(loc=2)</span><span id="f757" class="mu lc iq mq b gy mz mw l mx my"># set y-axis label</span><span id="f54b" class="mu lc iq mq b gy mz mw l mx my">ax.set_ylabel('Number of Runs',color='red')</span><span id="16ae" class="mu lc iq mq b gy mz mw l mx my"># twin object for two different y-axis on the sample plot</span><span id="40ed" class="mu lc iq mq b gy mz mw l mx my">ax2=ax.twinx()</span><span id="b055" class="mu lc iq mq b gy mz mw l mx my"># make a plot with different y-axis using second axis object</span><span id="24d9" class="mu lc iq mq b gy mz mw l mx my">ax2.plot(dfW['Date'],dfW['Avg Speed'],color='blue',marker='o',label='Average Speed')</span><span id="dd68" class="mu lc iq mq b gy mz mw l mx my">ax2.set_ylabel('Average Speed',color='blue')</span><span id="1dd4" class="mu lc iq mq b gy mz mw l mx my">ax2.legend()</span><span id="c467" class="mu lc iq mq b gy mz mw l mx my">plt.show()</span></pre><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi no"><img src="../Images/c527d82740ead470141a31aee89f540e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bG_n-NqIfziNQ1omXV1y1Q.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者图片</p></figure><p id="4ac1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我首先在一月份达到了每周训练次数和平均速度的最大值。我感到左腿有些不舒服。我试着减轻负荷，但是没有用，我停止了3周的训练。我试图在二月份以较慢的速度恢复训练，但是我的右腿受伤了，几乎完全停止了几个月。我能说什么，永远不要跳过l̶e̶g̶休息日！</p><p id="528f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以做同样的练习，但这次用步幅代替速度:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi np"><img src="../Images/375af11179c7f63cc32c654acfd1cc82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LHMVtnHOHVkeKbqeK8VpWw.png"/></div></div><p class="ml mm gj gh gi mn mo bd b be z dk translated">作者图片</p></figure><p id="db64" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是有道理的，在我受伤的前几个月，我的平均步幅更高。</p><p id="c0f6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">吸取经验教训，我现在通常每周训练3次，并试着专注于节奏而不是步幅。</p><p id="1d1a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你有兴趣玩代码，可以随意查看<a class="ae ly" href="https://github.com/maxlys/running_data_analysis" rel="noopener ugc nofollow" target="_blank">我的GitHub页面</a>。</p></div></div>    
</body>
</html>