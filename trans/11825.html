<html>
<head>
<title>How to Create Your First Linear Programming Solver in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python创建第一个线性规划求解器</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-create-your-first-linear-programming-solver-in-python-284e3fe5b811?source=collection_archive---------10-----------------------#2021-11-25">https://towardsdatascience.com/how-to-create-your-first-linear-programming-solver-in-python-284e3fe5b811?source=collection_archive---------10-----------------------#2021-11-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7a31" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解这些软件包是如何工作的，以及如何创建您的第一个求解器。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/915aa8c6603241f15337f97a6a1c1ad8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0W6B0tLSWMUTgG3_Q5StsA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@iam_anih?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">夏嫣·胡伊津加</a>在<a class="ae ky" href="https://unsplash.com/s/photos/line?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h2 id="2b4b" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">线性编程</strong></h2><p id="0354" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk lp ml mm mn lt mo mp mq lx mr ms mt mu im bi translated">线性规划(LP)是通过求解线性方程来获得问题的最优解的方法。</p><p id="b3a6" class="pw-post-body-paragraph mc md it me b mf mv ju mh mi mw jx mk lp mx mm mn lt my mp mq lx mz ms mt mu im bi translated">好吧，对你来说还是个谜？那么让我试着简化更多。</p><p id="ad99" class="pw-post-body-paragraph mc md it me b mf mv ju mh mi mw jx mk lp mx mm mn lt my mp mq lx mz ms mt mu im bi translated">线性规划将寻找一个问题，并使用像<em class="na"> x </em>和<em class="na">y</em>这样的变量将它转换成数学方程。之后，就是尝试这些变量的数字，直到你达到最佳解决方案，可能是最大或最小的可能值。</p><p id="75f2" class="pw-post-body-paragraph mc md it me b mf mv ju mh mi mw jx mk lp mx mm mn lt my mp mq lx mz ms mt mu im bi translated">如果我给你等式<em class="na"> x + y = 10 </em>并求<em class="na"> x的最大值，</em>这就是LP的一个好例子。</p><p id="dfc0" class="pw-post-body-paragraph mc md it me b mf mv ju mh mi mw jx mk lp mx mm mn lt my mp mq lx mz ms mt mu im bi translated">之所以称之为<strong class="me iu">线性</strong>是因为那些类似于<em class="na"> xy的</em>数学表达式可以表示为空间中的一条线，这意味着如果我通过找到<em class="na"> x </em>和<em class="na"> y </em>的值来解方程，并将结果组合绘制在二维图形上，结果将是一条线。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/f90425034f363dbca45c8ad311fe4def.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*h4FvWqCnfCp40RFPvPe1Jg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">看，是一条线！[ x + y = 10 ]。图片由作者提供。</p></figure><h1 id="89fd" class="nc lh it bd li nd ne nf ll ng nh ni lo jz nj ka ls kc nk kd lw kf nl kg ma nm bi translated">解释概念</h1><p id="b4ca" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk lp ml mm mn lt mo mp mq lx mr ms mt mu im bi translated">在本节中，我的意图是将线性规划应用于一个非常简单的问题，这将使我们充分理解如何将我们的问题转化为一个方程，线性解算器如何工作以及如何对它们进行编程。</p><p id="1c2e" class="pw-post-body-paragraph mc md it me b mf mv ju mh mi mw jx mk lp mx mm mn lt my mp mq lx mz ms mt mu im bi translated"><em class="na">最重要的事情首先</em>。在编码之前，让我们回顾一些概念。</p><ul class=""><li id="05e3" class="nn no it me b mf mv mi mw lp np lt nq lx nr mu ns nt nu nv bi translated"><strong class="me iu">目标函数</strong>:那就是目标，你实际要解决的问题(比如利润最大化，损失最小化，空间分配最优化)。</li><li id="17f2" class="nn no it me b mf nw mi nx lp ny lt nz lx oa mu ns nt nu nv bi translated"><strong class="me iu">约束</strong>:罐和斜面。在解决问题的过程中，什么会发生，什么不会发生(例如，值不能为负，容器中的最大可用空间)。</li><li id="d196" class="nn no it me b mf nw mi nx lp ny lt nz lx oa mu ns nt nu nv bi translated"><strong class="me iu">变量</strong>:问题的可变部分(如产品、价格、利润、规模)。</li></ul><h2 id="eb54" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">解决者（solver的复数形式）</h2><p id="9adc" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk lp ml mm mn lt mo mp mq lx mr ms mt mu im bi translated">Python中有几个可用的LP求解器包。其中有SciPy，PuLP，CVXOPT。在本教程中，我们将使用<code class="fe ob oc od oe b">PuLP</code>。</p><p id="06b4" class="pw-post-body-paragraph mc md it me b mf mv ju mh mi mw jx mk lp mx mm mn lt my mp mq lx mz ms mt mu im bi translated">使用pip安装它:</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="f130" class="lg lh it oe b gy oj ok l ol om">pip install pulp </span><span id="816d" class="lg lh it oe b gy on ok l ol om"># for Jupyter Notebooks<br/>!pip install pulp</span></pre><h2 id="6fae" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">问题是</h2><p id="1ce1" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk lp ml mm mn lt mo mp mq lx mr ms mt mu im bi translated">想象一下，我们有一个100米乘100米的正方形区域，我们必须从0点到右上角画一条最长的45度对角线。但是，让我们想象一下，在距离上边距5米的地方有一个栅栏，在距离右边距5米的地方又有一个栅栏。我想知道如果我必须停在围栏上，我的X和Y的最大值是多少(我画最长线的坐标)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/a9e64f9f9268acf35f8e4b8a088518ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*bDd9qCvltQLS_N6ys_cNjg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">问题的可视化。图片由作者提供。</p></figure><p id="a5d1" class="pw-post-body-paragraph mc md it me b mf mv ju mh mi mw jx mk lp mx mm mn lt my mp mq lx mz ms mt mu im bi translated">就像我说的，这是一个非常简单的问题。你大概自己算出来答案是x=95，y=95吧？这也是我方法的一部分。既然你已经知道了答案，让我们来研究一下我们可以建立的逻辑，让计算机得到结果。</p><h2 id="db3b" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">目标函数</h2><p id="0bc9" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk lp ml mm mn lt mo mp mq lx mr ms mt mu im bi translated">如前所述，目标函数是我们的目标，是我们想要完成的，是我们试图解决的。</p><blockquote class="op"><p id="8d84" class="oq or it bd os ot ou ov ow ox oy mu dk translated">目标函数就是我们要解决的问题。</p></blockquote><p id="0641" class="pw-post-body-paragraph mc md it me b mf oz ju mh mi pa jx mk lp pb mm mn lt pc mp mq lx pd ms mt mu im bi translated">在我们的例子中，我们想要画一条对角线。你是否同意我的观点，为了在2D图上画一条对角线，我们所要做的就是给X和Y赋予相同的值？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/c7f2b4b8258e2c46bf33f4655354d3ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/1*-X7urJK3qFxYQ_Pmmx7qrw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(x=10，y=10)，(20，20)…。(80,80).X = Y =直线。图片由作者提供。</p></figure><p id="b9c4" class="pw-post-body-paragraph mc md it me b mf mv ju mh mi mw jx mk lp mx mm mn lt my mp mq lx mz ms mt mu im bi translated">此外，我们希望将值加到最大值。这样，我们的目标函数就变成了<strong class="me iu"> <em class="na"> x + y </em> </strong>。</p><h2 id="be0c" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">限制</h2><p id="d922" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk lp ml mm mn lt mo mp mq lx mr ms mt mu im bi translated">在这个问题中，我们只有两个简单的约束:直线不能在栅栏之后，值不能为负。</p><blockquote class="op"><p id="5345" class="oq or it bd os ot ou ov ow ox oy mu dk translated">约束是目标函数必须遵循的规则。</p></blockquote><p id="d743" class="pw-post-body-paragraph mc md it me b mf oz ju mh mi pa jx mk lp pb mm mn lt pc mp mq lx pd ms mt mu im bi translated">现在，为了将约束转化为数学形式，我们必须再次使用x和y。让我们进行逻辑思考。如果场地是100 x 100，我们有一个距离顶部5米、距离右侧5米的围栏，我们应该说<em class="na"> x </em>不能高于100–5(<em class="na">a . k . a . 95)。</em>这同样适用于<em class="na"> y，</em>因为这意味着线越过了围栏。</p><ol class=""><li id="a316" class="nn no it me b mf mv mi mw lp np lt nq lx nr mu pf nt nu nv bi translated"><em class="na"> 0 ≤ x ≤ 95 </em></li><li id="e464" class="nn no it me b mf nw mi nx lp ny lt nz lx oa mu pf nt nu nv bi translated">0≤ y ≤ 95</li></ol><h2 id="42f1" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">创建求解器</h2><p id="2714" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk lp ml mm mn lt mo mp mq lx mr ms mt mu im bi translated">下一步是使用纸浆来创建我们的解决方案，并找到最大的对角线结束坐标值。</p><p id="570c" class="pw-post-body-paragraph mc md it me b mf mv ju mh mi mw jx mk lp mx mm mn lt my mp mq lx mz ms mt mu im bi translated">将模块导入Python会话:</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="f2c5" class="lg lh it oe b gy oj ok l ol om">from pulp import LpMaximize, LpProblem, LpStatus, LpVariable</span></pre><p id="3e55" class="pw-post-body-paragraph mc md it me b mf mv ju mh mi mw jx mk lp mx mm mn lt my mp mq lx mz ms mt mu im bi translated">创建求解器和变量的实例。注意这里的<code class="fe ob oc od oe b">lowBound</code>参数将作为一个约束来防止负值。<code class="fe ob oc od oe b">upBound</code>参数并不那么重要，因为它会被fence约束覆盖，但是知道它的存在还是很好的。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="3b1b" class="lg lh it oe b gy oj ok l ol om"># Create the <strong class="oe iu">maximization </strong>problem<br/>model = LpProblem(name='Field Problem', sense=LpMaximize)</span><span id="e50a" class="lg lh it oe b gy on ok l ol om"># Initialize the <strong class="oe iu">variables</strong><br/>x = LpVariable(name="x", lowBound=0, upBound=100)<br/>y = LpVariable(name="y", lowBound=0, upBound=100)</span></pre><p id="8144" class="pw-post-body-paragraph mc md it me b mf mv ju mh mi mw jx mk lp mx mm mn lt my mp mq lx mz ms mt mu im bi translated">下一步是向模型添加约束。第一个元素是LpConstraint实例。第二个元素是您希望为该约束提供的名称。我们可以创建x≥0和y≥0，但正如前面所解释的，这已经被考虑到了。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="3be7" class="lg lh it oe b gy oj ok l ol om"># <strong class="oe iu">Add the constraints </strong>to the model. Use += to append expressions to the model</span><span id="a8fb" class="lg lh it oe b gy on ok l ol om">model += (x &lt;= 95, "margin_X") #it cannot go past the fence<br/>model += (y &lt;= 95, "margin_Y")</span></pre><p id="f000" class="pw-post-body-paragraph mc md it me b mf mv ju mh mi mw jx mk lp mx mm mn lt my mp mq lx mz ms mt mu im bi translated">现在我们将目标函数添加到模型中。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="d425" class="lg lh it oe b gy oj ok l ol om"># Objective Function<br/>obj_func = x + y</span><span id="1cd6" class="lg lh it oe b gy on ok l ol om"># Add Objective function to the model<br/>model += obj_func</span></pre><p id="f710" class="pw-post-body-paragraph mc md it me b mf mv ju mh mi mw jx mk lp mx mm mn lt my mp mq lx mz ms mt mu im bi translated">如果您想在求解之前查看刚刚创建的模型，只需调用您的模型名称。在那里你会看到它是如何从逻辑上将问题解读为数学问题的。<em class="na">以x和Y小于95 </em>为条件，最大化函数x+y。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="56cb" class="lg lh it oe b gy oj ok l ol om">model</span><span id="2e9d" class="lg lh it oe b gy on ok l ol om">Field_Problem: <br/>MAXIMIZE <br/>1*x + 1*y + 0 <br/>SUBJECT TO <br/>margin_X: x &lt;= 95  <br/>margin_Y: y &lt;= 95 <br/> <br/>VARIABLES <br/>x &lt;= 100 Continuous <br/>y &lt;= 100 Continuous</span></pre><p id="ed09" class="pw-post-body-paragraph mc md it me b mf mv ju mh mi mw jx mk lp mx mm mn lt my mp mq lx mz ms mt mu im bi translated">求解。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="90f8" class="lg lh it oe b gy oj ok l ol om">status = model.solve()</span></pre><p id="ef3e" class="pw-post-body-paragraph mc md it me b mf mv ju mh mi mw jx mk lp mx mm mn lt my mp mq lx mz ms mt mu im bi translated">打印报告。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="9bbe" class="lg lh it oe b gy oj ok l ol om">print(f"status: {model.status}, {LpStatus[model.status]}")<br/>print(f"objective: {model.objective.value()}")<br/>for var in model.variables():<br/>    print(f"{var.name}: {var.value()}")</span><span id="4d0f" class="lg lh it oe b gy on ok l ol om">for name, constraint in model.constraints.items():<br/>    print(f"{name}: {constraint.value()}")</span><span id="db01" class="lg lh it oe b gy on ok l ol om"><strong class="oe iu">[OUT]:</strong><br/>status: 1, Optimal <br/>objective: 190.0 <br/><strong class="oe iu">x: 95.0 <br/>y: 95.0 </strong><br/>margin_X: 0.0 <br/>margin_Y: 0.0</span></pre><p id="7d64" class="pw-post-body-paragraph mc md it me b mf mv ju mh mi mw jx mk lp mx mm mn lt my mp mq lx mz ms mt mu im bi translated">不出所料，<em class="na"> x </em>和<em class="na"> y </em>的最大值是95。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="1c20" class="lg lh it oe b gy oj ok l ol om"># The field solution plot</span><span id="b4da" class="lg lh it oe b gy on ok l ol om"># Create a plot space<br/>plt.figure(figsize=(8,8))</span><span id="74b5" class="lg lh it oe b gy on ok l ol om"># Dimensions of the field.<br/>xlimits=[0,100,0,100]<br/>ylimits=[0,0,100,100]</span><span id="c8ee" class="lg lh it oe b gy on ok l ol om"># Plot field<br/>plt.scatter(xlimits,ylimits)<br/># Plot line SOLUTION<br/>plt.plot([0,x.value()], [0,y.value()], c='red')<br/># Plot MAX POINT<br/>plt.scatter(x.value(),y.value(), c='red')<br/># Plot Fence 1<br/>plt.vlines(95, 0,100, linestyles='--', colors='red')<br/># Plot Fence 2<br/>plt.hlines(95, 0,100, linestyles='--', colors='red')</span><span id="96bf" class="lg lh it oe b gy on ok l ol om"># Annotations<br/>plt.annotate(f'Optimal Value: {x.value(), y.value()} ---&gt;', xy=(47, 96));</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/b969bd45b52b6065f6ec661d7a1f27a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*tTQqBYkY1_stgOZodn-qwA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">解决方法。图片由作者提供。</p></figure><h2 id="f817" class="lg lh it bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">在你走之前</h2><p id="c811" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk lp ml mm mn lt mo mp mq lx mr ms mt mu im bi translated">这篇文章的目的是给你一个温和的和用户友好的Python线性编程的介绍。这个例子非常简单，但我们的想法是从这里开始，理解基本概念，以便能够将其应用于更复杂的问题。</p><p id="efbf" class="pw-post-body-paragraph mc md it me b mf mv ju mh mi mw jx mk lp mx mm mn lt my mp mq lx mz ms mt mu im bi translated">如果你想深入了解，这里有一个来自Real Python的很好的教程。</p><div class="ph pi gp gr pj pk"><a href="https://realpython.com/linear-programming-python/" rel="noopener  ugc nofollow" target="_blank"><div class="pl ab fo"><div class="pm ab pn cl cj po"><h2 class="bd iu gy z fp pp fr fs pq fu fw is bi translated">动手线性编程:用Python优化-真正的Python</h2><div class="pr l"><h3 class="bd b gy z fp pp fr fs pq fu fw dk translated">在本教程中，您将学习:在这一部分，您将学习线性编程的基础知识和相关的…</h3></div><div class="ps l"><p class="bd b dl z fp pp fr fs pq fu fw dk translated">realpython.com</p></div></div><div class="pt l"><div class="pu l pv pw px pt py ks pk"/></div></div></a></div><p id="8ec1" class="pw-post-body-paragraph mc md it me b mf mv ju mh mi mw jx mk lp mx mm mn lt my mp mq lx mz ms mt mu im bi translated">如果这些内容对你有用，请关注我的博客。</p><div class="ph pi gp gr pj pk"><a href="https://medium.com/gustavorsantos" rel="noopener follow" target="_blank"><div class="pl ab fo"><div class="pm ab pn cl cj po"><h2 class="bd iu gy z fp pp fr fs pq fu fw is bi translated">古斯塔夫·桑托斯</h2><div class="pr l"><h3 class="bd b gy z fp pp fr fs pq fu fw dk translated">让我们做出更好的决定。数据驱动的决策。我用Python，R，Excel，SQL创建数据科学项目。</h3></div><div class="ps l"><p class="bd b dl z fp pp fr fs pq fu fw dk translated">medium.com</p></div></div><div class="pt l"><div class="pz l pv pw px pt py ks pk"/></div></div></a></div></div></div>    
</body>
</html>