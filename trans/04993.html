<html>
<head>
<title>30 Examples to Get You From a Novice to an Advanced Pandas User</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">30个例子让你从新手变成高级熊猫用户</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/30-examples-to-get-you-from-a-novice-to-an-advanced-pandas-user-e6eb4e8750b7?source=collection_archive---------3-----------------------#2021-05-02">https://towardsdatascience.com/30-examples-to-get-you-from-a-novice-to-an-advanced-pandas-user-e6eb4e8750b7?source=collection_archive---------3-----------------------#2021-05-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="48de" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">全面和结构化的实用指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/03e825cfae20306549e5fbb9d04ffd24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XXD4rNisPxdk5CH1.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@hengfilms?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">恒电影</a>在<a class="ae ky" href="https://unsplash.com/@hengfilms?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="7f50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas是Python的一个数据分析和操作库。它是数据科学家和分析师中最受欢迎的工具之一。</p><p id="0a25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">熊猫可以处理整个数据分析管道。它提供了多种功能和方法来清理、转换、分析和绘制数据。在本文中，我们将做30个例子来演示每个步骤中最常用的函数。</p><p id="652c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将从基本操作开始，然后逐渐增加复杂性。前4个示例将涵盖创建您自己的数据框以供练习的不同方式。对于本文的剩余部分，我们将使用Kaggle上提供的墨尔本房屋数据集。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="90bb" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">示例1</h2><p id="3b24" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><code class="fe na nb nc nd b">DataFrame</code>函数可用于使用Python字典创建数据框。键用作列，值代表行。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="35e8" class="mc md it nd b gy ni nj l nk nl">import numpy as np<br/>import pandas as pd</span><span id="36dd" class="mc md it nd b gy nm nj l nk nl">dict_a = {<br/>   "name": ["John", "Jane", "Emily"],<br/>   "height": [178, 175, 177],<br/>   "age": [25, 22, 27]<br/>}</span><span id="3b5e" class="mc md it nd b gy nm nj l nk nl">df = pd.DataFrame(dict_a)</span><span id="b88a" class="mc md it nd b gy nm nj l nk nl">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/77fa73701989c74726374df30d46f100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/1*YICV1ubtijcx6m1IJZvrKw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="2e7e" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">示例2</h2><p id="6d25" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在第一个例子中，我们只对字典值使用列表。也可以使用其他数据结构。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="c4d3" class="mc md it nd b gy ni nj l nk nl">dict_b = {<br/>   "date": pd.date_range("2020-01-01", periods=5, freq="D"),<br/>   "store": "A",<br/>   "sales": np.random.randint(50, 100, size=5)<br/>}</span><span id="df01" class="mc md it nd b gy nm nj l nk nl">df = pd.DataFrame(dict_b)</span><span id="ad33" class="mc md it nd b gy nm nj l nk nl">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/17b03f43c27c5ebd912a812e4ea1752c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*mGIhLUyAJz5MOfid2vfZVQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="60ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一列包含连续5天的<code class="fe na nb nc nd b">DatetimeIndex</code>。第二列用相同的字符串填充，第三列用随机整数的numpy数组创建。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="bbee" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">示例3</h2><p id="dfa5" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">如果您只需要一个由随机数组成的数据框，那么二维numpy数组比字典更实用。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="cf21" class="mc md it nd b gy ni nj l nk nl">df = pd.DataFrame(np.random.randint(0, 20, size=(3,4)))</span><span id="2422" class="mc md it nd b gy nm nj l nk nl">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/a0fc3f872a69f93263a19e96f8a9bc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*kvWQd7-APY6KxSE1apYsyQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="25bd" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实例4</h2><p id="aa3b" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">如果没有定义列名，Pandas会分配一个整数索引作为列名。我们总是可以使用<code class="fe na nb nc nd b">columns</code>参数定制列名。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="52bc" class="mc md it nd b gy ni nj l nk nl">df = pd.DataFrame(<br/>   np.random.randint(0, 20, size=(3,4)),<br/>   columns = list("ABCD")<br/>)</span><span id="fc67" class="mc md it nd b gy nm nj l nk nl">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/08c5c7270eef54aed8dae036b10cd51b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*XlJJR8X6A-spy6AyL7SyKA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="2d2b" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实例5</h2><p id="a99a" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">对于其余的例子，我们将使用墨尔本住房<a class="ae ky" href="https://www.kaggle.com/dansbecker/melbourne-housing-snapshot" rel="noopener ugc nofollow" target="_blank">数据集</a>。让我们首先将数据集读入数据框并检查其大小。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="0223" class="mc md it nd b gy ni nj l nk nl">df = pd.read_csv("/content/melb_housing.csv")</span><span id="f257" class="mc md it nd b gy nm nj l nk nl">print(df.shape)<br/>(63023, 13)</span><span id="0571" class="mc md it nd b gy nm nj l nk nl">df.columns<br/>Index(['Suburb', 'Address', 'Rooms', 'Type', 'Price', 'Method', 'SellerG','Date', 'Postcode', 'Regionname', 'Propertycount', 'Distance','CouncilArea'],dtype='object')</span></pre><p id="b6a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe na nb nc nd b">read_csv</code>功能唯一需要的参数是文件路径。尽管它有许多可选参数。我们将在下面的例子中看到其中的一些。</p><p id="fad1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据帧有63023行和13列。我们可以通过在数据框上应用<code class="fe na nb nc nd b">columns</code>方法来检查列名。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="8064" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实例6</h2><p id="8915" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><code class="fe na nb nc nd b">read_csv</code>函数允许根据列或行选择数据集的一部分。我只需要郊区、地址、日期、类型、地区名称、距离和价格列</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="fbb5" class="mc md it nd b gy ni nj l nk nl">df = pd.read_csv(<br/>   "/content/melb_housing.csv",<br/>   usecols = ["Suburb", "Address", "Date", "Type", "Regionname",  <br/>              "Distance", "Price"]<br/>)</span><span id="6856" class="mc md it nd b gy nm nj l nk nl">df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/53f030115cb1d22dc5852f168c40c7d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gsVjDICqB6O4Be7Xdeabfw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="55ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe na nb nc nd b">usecols</code>参数用于选择特定的列。<code class="fe na nb nc nd b">head</code>方法显示数据帧的前5行。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="41f9" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">例7</h2><p id="ecf2" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">有几个函数可以处理日期和时间。为了使用它们，日期必须以适当的数据类型存储。我们可以在创建数据框后随时更改数据类型。然而，更好的方法是在读取csv文件时解析日期。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="0532" class="mc md it nd b gy ni nj l nk nl">df = pd.read_csv(<br/>   "/content/melb_housing.csv",<br/>   usecols = ["Suburb", "Address", "Date", "Type", "Regionname",  <br/>              "Distance", "Price"],<br/>   parse_dates = ["Date"]<br/>)</span><span id="1d97" class="mc md it nd b gy nm nj l nk nl">df.dtypes<br/>Suburb                object <br/>Address               object <br/>Type                  object <br/>Price                float64 <br/>Date          datetime64[ns] <br/>Regionname            object <br/>Distance             float64</span><span id="b055" class="mc md it nd b gy nm nj l nk nl"><br/>df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/9594b76a3a3e439a772cc5271c073678.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XW8EsQ3gJgZiH0CRDxYHmg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="8b42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe na nb nc nd b">dtypes</code>方法可以用来检查每一列的数据类型。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="48d8" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实施例8</h2><p id="4474" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">原始数据并不总是最理想的格式。我们很可能会遇到缺失的价值观。为了保持数据的准确性和一致性，正确检测和处理缺失值至关重要。</p><p id="7016" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe na nb nc nd b">isna</code>函数返回用布尔值填充的数据框，指明丢失的值。由于True被视为1，我们可以应用sum函数来计算每一列中缺失值的数量。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="d8d0" class="mc md it nd b gy ni nj l nk nl">df.isna().sum()</span><span id="f3df" class="mc md it nd b gy nm nj l nk nl">Suburb            0 <br/>Address           0 <br/>Type              0 <br/>Price         14590 <br/>Date              0 <br/>Regionname        0 <br/>Distance          0</span></pre><p id="faa4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们只在价格列中缺少值。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="bf19" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">示例9</h2><p id="b4d7" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><code class="fe na nb nc nd b">fillna</code>功能可用于替换丢失的值。有不同的方法来处理它们。最佳方案取决于手头的数据。</p><p id="cf62" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以用列中值的平均值、中值或众数来填充缺失值。另一种选择是使用常数来替换丢失的值。</p><p id="8087" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在某些情况下，我们可以选择删除缺少值的行或列。<code class="fe na nb nc nd b">dropna</code>功能用于此类任务。它还允许根据条件删除缺少值的行。例如，可以将其定制为删除缺失值超过3个的行。</p><p id="9112" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为数据集的焦点是价格列，所以我选择删除缺少价格的观察值(即行)。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="2ccc" class="mc md it nd b gy ni nj l nk nl">df.dropna(axis=0, how="any", inplace=True)</span><span id="839d" class="mc md it nd b gy nm nj l nk nl">df["Price"].isna().sum()<br/>0</span></pre><p id="e3a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe na nb nc nd b">axis</code>参数选择行或列。默认值为0(即行数)。<code class="fe na nb nc nd b">how</code>参数被设置为“any”以删除有任何缺失值的行。最后，将<code class="fe na nb nc nd b">inplace</code>参数设置为“真”以保存数据框中的更改。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="9158" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实例10</h2><p id="0f91" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><code class="fe na nb nc nd b">astype</code>函数可用于改变列的数据类型。例如，我可能选择用整数而不是浮点数来表示价格。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="8e98" class="mc md it nd b gy ni nj l nk nl">df.Price = df.Price.astype("int")</span><span id="d799" class="mc md it nd b gy nm nj l nk nl">df.Price.dtypes<br/>dtype('int64')</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="ec75" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实施例11</h2><p id="d4db" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">数据分析中的一个常见操作是基于现有列派生列。我们既可以更新一列中的值，也可以根据现有的值创建一个新的值。</p><p id="290a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我将创建一个以百万为单位显示价格的列。简单用价格栏除以100万就可以算出来。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="7149" class="mc md it nd b gy ni nj l nk nl">df["PriceMillion"] = df["Price"] / 1000000</span><span id="420f" class="mc md it nd b gy nm nj l nk nl">df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/9edcbd4d41fbd02de1206b68f07c6bfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w9YQjgZVkLMGzy0x1Vho4Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="20d8" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实例12</h2><p id="7a19" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">正如我们在前面的示例中看到的，新列被添加到数据帧的末尾。但是，我希望它在价格栏旁边。</p><p id="afe1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe na nb nc nd b">insert</code>函数允许使用列索引在特定位置添加列。让我们首先删除新列，然后将其插入到所需的位置。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="cfba" class="mc md it nd b gy ni nj l nk nl">df.drop("PriceMillion", axis=1, inplace=True)</span><span id="d4d2" class="mc md it nd b gy nm nj l nk nl">df.insert(4, "PriceMillion", df["Price"] / 1000000)</span><span id="7b66" class="mc md it nd b gy nm nj l nk nl">df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/6aa2589672ff67e012fa19093eb128f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uA5oDnUs736zHRv6pOianw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="3d9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一个参数指定新列的索引。另外两个参数是列名和值。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="644b" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实施例13</h2><p id="bece" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">当处理分类变量时，我们可能需要检查列中的唯一值。考虑我们的数据框中的区域名称列。了解该列中有多少不同的值以及它们是什么会很有用。</p><p id="3eb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe na nb nc nd b">nunique</code>函数返回不同值的数量，而<code class="fe na nb nc nd b">unique</code>函数显示它们。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="d635" class="mc md it nd b gy ni nj l nk nl">df.Regionname.nunique()<br/>8</span><span id="6461" class="mc md it nd b gy nm nj l nk nl">df.Regionname.unique()<br/>array(['Northern Metropolitan', 'Western Metropolitan',        'Southern Metropolitan', 'South-Eastern Metropolitan',        'Eastern Metropolitan', 'Northern Victoria', 'Eastern Victoria',        'Western Victoria'], dtype=object)</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="8135" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实施例14</h2><p id="da8b" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">过滤观察值(即行)是数据分析的基本部分。我们试图通过根据某些条件检查数据来获得对数据的更好理解。</p><p id="2f82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可能想计算价格超过100万英镑的房子的数量。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="957f" class="mc md it nd b gy ni nj l nk nl">len(df[df.PriceMillion &gt; 1])<br/>17268</span><span id="655a" class="mc md it nd b gy nm nj l nk nl">df[df.PriceMillion &gt; 1]["Price"].count()<br/>17268</span></pre><p id="cacf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用列名在方括号内应用条件。必须使用数据框的名称指定列名。</p><p id="db1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe na nb nc nd b">len</code>是一个内置的Python函数。当用于数据框时，它返回行数。<code class="fe na nb nc nd b">count</code>函数，顾名思义，计算一列中的项数。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="a351" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实施例15</h2><p id="ec36" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">上述方法还允许基于多个条件进行过滤。我们来查一下造价100万以上，类型为“u”的房子有多少？</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="05c1" class="mc md it nd b gy ni nj l nk nl">len(df[(df.PriceMillion &gt; 1) &amp; (df.Type == "u")])<br/>598</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="80d1" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实施例16</h2><p id="9712" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">如果过滤器有几个值，我们可以使用<code class="fe na nb nc nd b">isin</code>功能。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="07ea" class="mc md it nd b gy ni nj l nk nl">suburbs = ['Abbotsford', 'Aberfeldie', 'Airport West', 'Albert Park', 'Albion']</span><span id="c3a3" class="mc md it nd b gy nm nj l nk nl">len(df[df.Suburb.isin(suburbs)])<br/>661</span></pre><p id="239b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们创建一个所需值的列表，然后使用它进行过滤。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="76af" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实例17</h2><p id="b67a" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Pandas提供了几个函数和方法来处理文本数据。我们可以通过str访问器来使用它们。</p><p id="9eda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以使用字符串方法进行过滤。让我们找到以字母d开头的郊区的房子。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="156e" class="mc md it nd b gy ni nj l nk nl">suburb_D = df[df.Suburb.str.startswith("D")]</span><span id="09ea" class="mc md it nd b gy nm nj l nk nl">suburb_D.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/175c7124640f4b8d6b4b1bc13d9e6cea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oK3KHGuDDwLw-DDHmSEACw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="5cd6" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实施例18</h2><p id="de22" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在前面的示例中，我们通过过滤原始数据框创建了一个数据框。正如我们在前5行中注意到的，这些行的索引与原始索引保持一致。</p><p id="efde" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最好有一个从0开始的索引，这可以通过在过滤后应用<code class="fe na nb nc nd b">reset_index</code>函数来实现。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="f299" class="mc md it nd b gy ni nj l nk nl">suburb_D = df[df.Suburb.str.startswith("D")].reset_index(drop=True)</span><span id="02bf" class="mc md it nd b gy nm nj l nk nl">suburb_D.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/77b3b877db82359120ec6a7e67b0ef72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yJzwv6pU_--PiyqbIT32aw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="182f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们没有将<code class="fe na nb nc nd b">drop</code>参数设置为True，那么原始索引将作为一个新列保存在数据框中。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="105d" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实施例19</h2><p id="694d" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">另一种过滤行的方法是<code class="fe na nb nc nd b">query</code>函数。它接受字符串形式的条件，这在某些情况下可能更实用。</p><p id="61b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们使用与之前相同的过滤条件，以确保它能够准确工作。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="0b48" class="mc md it nd b gy ni nj l nk nl">len(df.query("PriceMillion &gt; 1"))<br/>17268</span><span id="1f1d" class="mc md it nd b gy nm nj l nk nl">len(df.query("PriceMillion &gt; 1 and Type == 'u'"))<br/>598</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="76cd" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实施例20</h2><p id="198a" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">str访问器提供了许多操作字符串的函数。常用的一个就是split函数。</p><p id="9c10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以通过从region name列中提取第一个单词来创建region group列。这可以通过如下的分割功能来实现。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="5622" class="mc md it nd b gy ni nj l nk nl">df["RegionGroup"] = df.Regionname.str.split(" ", expand=True)[0]</span><span id="728d" class="mc md it nd b gy nm nj l nk nl">df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/adf9ca863f7d4b4cdbadbd4b3dcc7c54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j9ibiKDch1UYPWbuecWeew.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="299b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当设置为True时，<code class="fe na nb nc nd b">expand</code>参数在分割后为每个片段创建单独的列。我们使用索引0选择第一个单词。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="da1f" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实施例21</h2><p id="ae56" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">另一个功能强大的访问器是dt访问器。它用于操作和处理日期和时间。</p><p id="11bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以从日期中提取月和年，如下所示。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="0400" class="mc md it nd b gy ni nj l nk nl">df["Month"], df["Year"] = df["Date"].dt.month, df["Date"].dt.year</span><span id="b92c" class="mc md it nd b gy nm nj l nk nl">df[["Date", "Year", "Month"]].head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/f8ac24b48d1963c3d6d930e0da508767.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*7L95WnqzFgcpVV6npw1Ulw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="3819" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">dt访问器提供了许多函数和方法。我们不能在这里涵盖所有这些，但是请记住，dt访问器是我们在处理日期和时间时使用的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="ae7a" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实施例22</h2><p id="cba8" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><code class="fe na nb nc nd b">groupby</code>函数在数据分析中经常使用。我们可以根据一些其他值来比较一列中的组或不同值。</p><p id="1244" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以计算每个地区组的平均房价。我们选择感兴趣的列，并指定用于分组的列。然后，对每个组应用聚合函数。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="5da9" class="mc md it nd b gy ni nj l nk nl">df[["RegionGroup", "PriceMillion"]].groupby("RegionGroup").mean()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/ee371028126d5c73259189d412d7adbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*LoAUKW3eL8Q218JWpTfMUA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="a140" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实施例23</h2><p id="e61b" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在前面的示例中，我们在应用<code class="fe na nb nc nd b">groupby</code>函数之前选择了region group和price列。如果我们将groupby函数应用于整个数据框，则聚合将应用于所有适当的列。</p><p id="bb07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在计算平均值的情况下，我们将得到所有数值列的平均值。如果只需要对特定列执行聚合，则命名聚合更为实用。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="525a" class="mc md it nd b gy ni nj l nk nl">df.groupby("RegionGroup", as_index=False)\<br/>  .agg(avg_price = ("PriceMillion", "mean"))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/5ea77856bf6fabd4efa6fb07d5767ec5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I8YTouJPV6jVkjSWxbEu8g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="9dbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用命名聚合的另一个优点是，我们可以为聚合列分配信息性名称。使用“avg_price”作为列名比只使用price更有意义。</p><p id="c258" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<code class="fe na nb nc nd b">as_index</code>参数将组放在数据框的一列中，而不是作为索引。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="7083" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实施例24</h2><p id="977f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><code class="fe na nb nc nd b">rank</code>函数用于根据列中的值为观察值(即行)分配等级。例如，我们可以根据价格对房屋进行排名。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="5e80" class="mc md it nd b gy ni nj l nk nl">df["Rank"] = df["Price"].rank(method="first",  <br/>                              ascending=False).astype("int")</span><span id="faaf" class="mc md it nd b gy nm nj l nk nl">df[["Price", "Rank"]].head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/30311eb9110c5c65b1b193621617e50b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JJJIHVavkMc8nS3_2nxTYQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="1692" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，这些值按升序排列，但是我们可以使用<code class="fe na nb nc nd b">ascending</code>参数来改变这种行为。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="cdb9" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实施例25</h2><p id="721e" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><code class="fe na nb nc nd b">sort_values</code>函数根据给定列中的值对行进行排序。让我们用它来根据价格对房屋进行排序。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="b4d0" class="mc md it nd b gy ni nj l nk nl">df.sort_values(by="Price", ascending=False)[["Price", "Rank"]].head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/537f3a586f7a4300356f76a240ad4a21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*NF41sUxb7bgYamN7Tqy8ig.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="25d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我想在排序后显示前5行，以确认在前面的例子中分配的等级。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="b20d" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实施例26</h2><p id="88b5" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><code class="fe na nb nc nd b">loc</code>和<code class="fe na nb nc nd b">iloc</code>方法用于选择数据框中的特定行和列。</p><ul class=""><li id="e8df" class="od oe it lb b lc ld lf lg li of lm og lq oh lu oi oj ok ol bi translated">iloc通过索引工作</li><li id="7089" class="od oe it lb b lc om lf on li oo lm op lq oq lu oi oj ok ol bi translated">loc按标签工作</li></ul><p id="7e84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们举几个例子来演示它们是如何使用的。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="99df" class="mc md it nd b gy ni nj l nk nl">#rows between 5 and 10 , first 3 columns<br/>df.iloc[5:10, :3]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/b1c50893f2dfa01aaeccb234f84d09f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LZ_SslS36pAxO0UQH1vOmA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="b163" class="mc md it nd b gy ni nj l nk nl">#rows between 20 and 25, address and price columns<br/>df.loc[20:25, ["Address", "Price"]]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/b0d17ba3393b315b6aa50d4b00f9496c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QWTwXENQbtR2aADfTBaGHA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="ecd9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用loc和iloc方法使用相同的值来选择行，因为默认情况下，行的标签是它们的索引。除非创建自定义索引，否则loc和iloc对行采用相同的值。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="06fc" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实施例27</h2><p id="b02c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Pandas不是一个数据可视化库，但它允许创建基本的绘图。它可以方便地快速生成用于数据分析的图表。</p><p id="959c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们通过绘制直方图来看看距离列的分布。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="0424" class="mc md it nd b gy ni nj l nk nl">df.Distance.plot(<br/>   kind="hist",<br/>   figsize=(8,5),<br/>   title = "Histogram of Distance"<br/>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/b00ecddd0ab8f8b8e7212563b5277cb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*5ii-ZE8AxGbot-A2wbukpQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="e198" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实施例28</h2><p id="0865" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们也可以画一个显示每日平均价格的线图。我们首先需要根据日期列对行进行分组，然后应用绘图函数。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="7cad" class="mc md it nd b gy ni nj l nk nl">df.groupby("Date").agg(price = ("Price", "mean")).plot(<br/>   kind="line",<br/>   figsize=(10,5),<br/>   title = "Daily Average Price"<br/>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/16a2366248b08305b29a3fcb6769db03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*p8OphPXOmbZSLR_w5Txz0g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="092b" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">实施例29</h2><p id="07f2" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">探索性数据分析中使用的另一个常用图是散点图。它概述了两个数值变量之间的相关性。</p><p id="d764" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们也创建一个价格和距离列的散点图。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="5178" class="mc md it nd b gy ni nj l nk nl">df.plot(<br/>   kind="scatter",<br/>   x="Price",<br/>   y="Distance",<br/>   figsize=(8,6)<br/>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/1d081187a037fc599157b0052e9470f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*CE0bb6havUDxZbx2Zp5yAQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="de74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">距离和价格是负相关的。这是有道理的，因为离市中心越近，房价越贵。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="9751" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">示例30</h2><p id="3d7c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">最后一个例子是关于<code class="fe na nb nc nd b">sample</code>函数。在某些情况下，我们从大型数据集中随机抽取样本进行分析。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="7f18" class="mc md it nd b gy ni nj l nk nl">print(df.shape)<br/>(48433, 12)</span><span id="e968" class="mc md it nd b gy nm nj l nk nl">df_sample = df.sample(frac=0.5)</span><span id="13e9" class="mc md it nd b gy nm nj l nk nl">print(df_sample.shape)<br/>(24216, 12)</span></pre><p id="2dc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们取原始数据帧一半大小的样本。我们可以使用<code class="fe na nb nc nd b">n</code>参数获取一定行数的样本。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="b405" class="mc md it nd b gy ni nj l nk nl">df_sample = df.sample(n=30000)</span><span id="da8f" class="mc md it nd b gy nm nj l nk nl">print(df_sample.shape)<br/>(30000, 12)</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="065d" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">结论</h2><p id="bd0c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们做了30个例子，涵盖了熊猫常用的功能和方法。他们一定会给你提供相当不错的熊猫知识。</p><p id="0d85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，除了这篇文章，还有更多关于熊猫的内容。当你需要的时候，你可以随时学习它们。</p><p id="6369" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>