<html>
<head>
<title>How to Visualize your Runners’ High with Python and Altair</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python和Altair可视化你的跑步者的High</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-visualize-your-runners-high-with-python-and-altair-45dde7803141?source=collection_archive---------19-----------------------#2021-03-30">https://towardsdatascience.com/how-to-visualize-your-runners-high-with-python-and-altair-45dde7803141?source=collection_archive---------19-----------------------#2021-03-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/9ac4497575f354c26ff3cf4e8630b353.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IfyR1l9HVaDrwyXXGkFoUQ.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><a class="ae jg" href="https://unsplash.com/@bruno_nascimento?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">布鲁诺·纳西门托</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照；作者略有改动</p></figure><h2 id="5964" class="jh ji jj bd b dl jk jl jm jn jo jp dk jq translated" aria-label="kicker paragraph">教程PYTHON运行</h2><div class=""/><div class=""><h2 id="3893" class="pw-subtitle-paragraph kp js jj bd b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dk translated">使用Python和Altair检索和可视化运行数据的分步指南</h2></div><h2 id="a501" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">1.介绍</h2><p id="3dc1" class="pw-post-body-paragraph mc md jj me b mf mg kt mh mi mj kw mk lq ml mm mn lu mo mp mq ly mr ms mt mu im bi translated">大家好，我是Gregor，一名数据科学家，一名充满激情的非竞赛跑步者。我才知道，十年前我就开始在手机上用跑步app了。那时候，我只记录GPS，开始和结束时间。我没有办法记录节奏、心率、海拔等等。我记得我是一个糟糕的跑步者——跑得慢而且容易上气不接下气。我刚完成博士学位，在办公桌前工作太多了。所以我决定以跑步者的身份开始这段旅程。</p><p id="2691" class="pw-post-body-paragraph mc md jj me b mf mv kt mh mi mw kw mk lq mx mm mn lu my mp mq ly mz ms mt mu im bi translated">十年是一段很长的时间，我想知道在这段时间里我的跑步发生了什么变化。我变得更健康、更快或更冷静了吗？我在哪一级训练？虽然大多数健身平台提供了一些报告，但我在过去的10年里错过了这些报告。尤其是我对同比比较感兴趣。</p><p id="4293" class="pw-post-body-paragraph mc md jj me b mf mv kt mh mi mw kw mk lq mx mm mn lu my mp mq ly mz ms mt mu im bi translated">在本文中，我将向您展示(1)如何从<a class="na nb ep" href="https://medium.com/u/3a39196977e6?source=post_page-----45dde7803141--------------------------------" rel="noopener" target="_blank"> Garmin </a> <a class="ae jg" href="https://connect.garmin.com/modern/" rel="noopener ugc nofollow" target="_blank"> connect </a>中导出您的运行数据，(2)如何使用Python <a class="ae jg" rel="noopener" target="_blank" href="/the-flawless-pipes-of-python-pandas-30f3ee4dffc2"> Pandas </a>清理数据，以及(3)如何使用<a class="ae jg" href="https://altair-viz.github.io/index.html" rel="noopener ugc nofollow" target="_blank"> Altair </a>可视化数据。</p><h2 id="21ba" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">2.从Garmin Connect导出数据</h2><p id="b574" class="pw-post-body-paragraph mc md jj me b mf mg kt mh mi mj kw mk lq ml mm mn lu mo mp mq ly mr ms mt mu im bi translated">首先，前往<a class="ae jg" href="https://connect.garmin.com/modern" rel="noopener ugc nofollow" target="_blank"> Garmin Connect </a>，特别是<a class="ae jg" href="https://connect.garmin.com/modern/activities" rel="noopener ugc nofollow" target="_blank">“所有活动”页面</a>。最好通过点击右上角的跑步图标来过滤你的跑步活动。</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nc"><img src="../Images/c5b5bbce549b582039bffbdac53d8b13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wZ7ANDYN_drc4V-sC6ik_w.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">Garmin Connect活动页面；作者图片</p></figure><p id="8307" class="pw-post-body-paragraph mc md jj me b mf mv kt mh mi mw kw mk lq mx mm mn lu my mp mq ly mz ms mt mu im bi translated"><strong class="me jt">在您点击</strong>导出按钮之前，向下滚动您的跑步活动列表很重要。只能导出列表中显示的那些活动。完成后，按右上角的“导出CSV”按钮。这将把文件<code class="fe nh ni nj nk b">Activities.csv</code>下载到您的计算机系统上。数据包括日期、距离、步速、心率、海拔等信息。</p><h2 id="843c" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">3.使用Python Pandas清理数据</h2><p id="3db7" class="pw-post-body-paragraph mc md jj me b mf mg kt mh mi mj kw mk lq ml mm mn lu mo mp mq ly mr ms mt mu im bi translated">数据相当干净，我们只需要关注以下几个方面:</p><ol class=""><li id="e7bb" class="nl nm jj me b mf mv mi mw lq nn lu no ly np mu nq nr ns nt bi translated">将日期信息转换成各种有用的功能</li><li id="c2d0" class="nl nm jj me b mf nu mi nv lq nw lu nx ly ny mu nq nr ns nt bi translated">将配速信息转换为分钟数</li><li id="d9f2" class="nl nm jj me b mf nu mi nv lq nw lu nx ly ny mu nq nr ns nt bi translated">将数字转换成数字类型</li><li id="8b97" class="nl nm jj me b mf nu mi nv lq nw lu nx ly ny mu nq nr ns nt bi translated">处理缺失值</li></ol><p id="ba18" class="pw-post-body-paragraph mc md jj me b mf mv kt mh mi mw kw mk lq mx mm mn lu my mp mq ly mz ms mt mu im bi translated">下面你会发现我用来实现这一点的代码。如果你想了解更多关于日志记录的知识，我推荐这篇文章:“<a class="ae jg" rel="noopener" target="_blank" href="/how-to-setup-logging-for-your-python-notebooks-in-under-2-minutes-2a7ac88d723d">如何为Python </a>设置日志记录”，如果你想了解更多关于我编写代码的方式，请考虑阅读“<a class="ae jg" rel="noopener" target="_blank" href="/the-flawless-pipes-of-python-pandas-30f3ee4dffc2">Python的完美管道</a>”。</p><figure class="nd ne nf ng gt iv"><div class="bz fp l di"><div class="nz oa l"/></div></figure><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ob"><img src="../Images/af7539ec418f8c169e590efa12d378db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JV4Cxyh6kM-mMTx8-zGqzQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">runs_raw.info()的输出；作者图片</p></figure><figure class="nd ne nf ng gt iv"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="6a50" class="pw-post-body-paragraph mc md jj me b mf mv kt mh mi mw kw mk lq mx mm mn lu my mp mq ly mz ms mt mu im bi translated">请注意，我使用函数<code class="fe nh ni nj nk b">assign()</code>来创建额外的变量。这样做的好处是不会为以后的测试覆盖值，并且您可以为命名列实现自己的命名约定。然而，通过函数<code class="fe nh ni nj nk b">filter(like = "run")</code>，我删除了所有旧的变量。请参见下面的结果列名。</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oc"><img src="../Images/c0285b8a39b5f9eb85f82ffd750861f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o-ivf6zR53z0M35StNkF3w.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">清洗过程的结果；作者图片</p></figure><p id="6b74" class="pw-post-body-paragraph mc md jj me b mf mv kt mh mi mw kw mk lq mx mm mn lu my mp mq ly mz ms mt mu im bi translated">最后一步是将清理后的数据保存到系统中。</p><figure class="nd ne nf ng gt iv"><div class="bz fp l di"><div class="nz oa l"/></div></figure><h2 id="8d41" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">4.用Altair实现数据可视化</h2><p id="d997" class="pw-post-body-paragraph mc md jj me b mf mg kt mh mi mj kw mk lq ml mm mn lu mo mp mq ly mr ms mt mu im bi translated">您可能知道，我使用R 开始了我的数据科学生涯<a class="ae jg" rel="noopener" target="_blank" href="/nine-years-on-linkedin-in-data-b34047c77223">，因此，我非常熟悉</a><a class="ae jg" href="https://gscheithauer.medium.com/how-to-add-number-of-observations-to-a-ggplot2-boxplot-b22710f7ef80" rel="noopener"> ggpot2 </a>。随着我在客户项目中越来越频繁地使用Python，我开始寻找类似的Python可视化包。我很高兴地说，有了<a class="ae jg" rel="noopener" target="_blank" href="/data-visualization-in-python-like-in-rs-ggplot2-bc62f8debbf5">剧情</a>就有了一个很好的替代方案。</p><div class="is it gp gr iu od"><a rel="noopener follow" target="_blank" href="/data-visualization-in-python-like-in-rs-ggplot2-bc62f8debbf5"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd jt gy z fp oi fr fs oj fu fw js bi translated">Python中的数据可视化，如R的ggplot2</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">一步一步的教程如何创建一个基本的图表到一个出版就绪的dataviz图表</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">towardsdatascience.com</p></div></div><div class="om l"><div class="on l oo op oq om or ja od"/></div></div></a></div><p id="a0c6" class="pw-post-body-paragraph mc md jj me b mf mv kt mh mi mw kw mk lq mx mm mn lu my mp mq ly mz ms mt mu im bi translated">然而，由于我喜欢尝试新事物，特别是可视化软件包，所以我想尝试Altair软件包。Altair是一个Python数据可视化包，它遵循一种<a class="ae jg" href="https://codeburst.io/declarative-vs-imperative-programming-a8a7c93d9ad2" rel="noopener" target="_blank">声明式方法</a>，就像ggplot2和<a class="ae jg" rel="noopener" target="_blank" href="/data-visualization-in-python-like-in-rs-ggplot2-bc62f8debbf5"> Plotnine </a>一样。</p><p id="ab41" class="pw-post-body-paragraph mc md jj me b mf mv kt mh mi mw kw mk lq mx mm mn lu my mp mq ly mz ms mt mu im bi translated">请跟随接下来的段落，在那里我评估我的一些运行数据。也许你可以学到一些如何使用Altair的知识。</p><p id="dbb5" class="pw-post-body-paragraph mc md jj me b mf mv kt mh mi mw kw mk lq mx mm mn lu my mp mq ly mz ms mt mu im bi translated"><strong class="me jt">设置</strong></p><figure class="nd ne nf ng gt iv"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="af18" class="pw-post-body-paragraph mc md jj me b mf mv kt mh mi mw kw mk lq mx mm mn lu my mp mq ly mz ms mt mu im bi translated">过去十年(105个月)我跑了多少？</p><figure class="nd ne nf ng gt iv"><div class="bz fp l di"><div class="nz oa l"/></div></figure><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi os"><img src="../Images/67700684aec07d8fdfd135356329cf2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PFI8TChC5ANP_tP02pzlhQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">每年运行次数；作者图片</p></figure><figure class="nd ne nf ng gt iv"><div class="bz fp l di"><div class="nz oa l"/></div></figure><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ot"><img src="../Images/1ecf9b7fead8fba354eea9f3034b4d35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2u5j3XDx9u_9q778a8EFSw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">每月运行次数；作者图片</p></figure><p id="13bd" class="pw-post-body-paragraph mc md jj me b mf mv kt mh mi mw kw mk lq mx mm mn lu my mp mq ly mz ms mt mu im bi translated">我每年训练的距离是多少？</p><figure class="nd ne nf ng gt iv"><div class="bz fp l di"><div class="nz oa l"/></div></figure><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ou"><img src="../Images/4daea034c9113d8fdf3c8e2585af525a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*97og5nhnBDwpfz-XNV37Qw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">按年计算的距离；作者图片</p></figure><p id="8a41" class="pw-post-body-paragraph mc md jj me b mf mv kt mh mi mw kw mk lq mx mm mn lu my mp mq ly mz ms mt mu im bi translated"><strong class="me jt">我每年训练的心率是多少？</strong></p><figure class="nd ne nf ng gt iv"><div class="bz fp l di"><div class="nz oa l"/></div></figure><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ov"><img src="../Images/5c9d0a448bdad155ed32cd3ab4fc05cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0T5X0B64GrZH8xYbPIEO4w.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">每年的平均人力资源；作者图片</p></figure><p id="df9e" class="pw-post-body-paragraph mc md jj me b mf mv kt mh mi mw kw mk lq mx mm mn lu my mp mq ly mz ms mt mu im bi translated"><strong class="me jt">我每年以什么速度跑多少距离？</strong></p><figure class="nd ne nf ng gt iv"><div class="bz fp l di"><div class="nz oa l"/></div></figure><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ow"><img src="../Images/e119b520ebf5760b69c8e07183acfb36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nr-aoiM-GjoLOzH1PzO1sg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">每年每段距离的平均配速；作者图片</p></figure><h2 id="1972" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">5.结论</h2><p id="18dc" class="pw-post-body-paragraph mc md jj me b mf mg kt mh mi mj kw mk lq ml mm mn lu mo mp mq ly mr ms mt mu im bi translated">在本文中，我向您展示了如何从Garmin connect获取您的跑步数据，如何使用Pandas清理数据，以及如何使用Altair分析数据。</p><p id="05ca" class="pw-post-body-paragraph mc md jj me b mf mv kt mh mi mw kw mk lq mx mm mn lu my mp mq ly mz ms mt mu im bi translated">你可能已经观察到了，我的跑步在2018年开始变得稍微严重了一点。在那之前，我的工作需要经常出差。一个阻碍我跟上跑步的事实。</p><p id="88b8" class="pw-post-body-paragraph mc md jj me b mf mv kt mh mi mw kw mk lq mx mm mn lu my mp mq ly mz ms mt mu im bi translated">对我来说，这次锻炼是值得的，可以对我的跑步数据进行年度比较。这在Garmin connect上是不可能实现的。此外，它让我对Altair软件包有了更多的了解。因为我更习惯于使用Plotnine，所以目前我将坚持使用<a class="ae jg" rel="noopener" target="_blank" href="/data-visualization-in-python-like-in-rs-ggplot2-bc62f8debbf5"> Plotnine </a>。但是如果一个项目需要互动图表，我强烈推荐你去看看Altair。</p><p id="e203" class="pw-post-body-paragraph mc md jj me b mf mv kt mh mi mw kw mk lq mx mm mn lu my mp mq ly mz ms mt mu im bi translated">如有任何问题和意见，请随时联系我。谢谢你。<strong class="me jt">点击此处查看更多我的文章</strong>:</p><ol class=""><li id="84c7" class="nl nm jj me b mf mv mi mw lq nn lu no ly np mu nq nr ns nt bi translated"><a class="ae jg" href="https://medium.com/technical-excellence/article-pipeline-management-with-notion-app-template-13e83635ed1" rel="noopener">了解我如何为媒体设计文章</a></li><li id="9d80" class="nl nm jj me b mf nu mi nv lq nw lu nx ly ny mu nq nr ns nt bi translated"><a class="ae jg" rel="noopener" target="_blank" href="/how-to-setup-logging-for-your-python-notebooks-in-under-2-minutes-2a7ac88d723d">了解如何为您的Python代码设置日志记录</a></li><li id="c0f5" class="nl nm jj me b mf nu mi nv lq nw lu nx ly ny mu nq nr ns nt bi translated"><a class="ae jg" href="https://medium.com/technical-excellence/article-pipeline-management-with-notion-app-template-13e83635ed1" rel="noopener">了解如何使用链接(或管道)在Python中编写干净的代码</a></li><li id="935f" class="nl nm jj me b mf nu mi nv lq nw lu nx ly ny mu nq nr ns nt bi translated"><a class="ae jg" rel="noopener" target="_blank" href="/nine-years-on-linkedin-in-data-b34047c77223">学习如何使用R分析你的LinkedIn数据</a></li><li id="5b0a" class="nl nm jj me b mf nu mi nv lq nw lu nx ly ny mu nq nr ns nt bi translated"><a class="ae jg" rel="noopener" target="_blank" href="/data-visualization-in-python-like-in-rs-ggplot2-bc62f8debbf5">学习如何使用图形语法在Python中以描述性的方式创建图表</a></li></ol></div><div class="ab cl oy oz hx pa" role="separator"><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd"/></div><div class="im in io ip iq"><p id="e6d7" class="pw-post-body-paragraph mc md jj me b mf mv kt mh mi mw kw mk lq mx mm mn lu my mp mq ly mz ms mt mu im bi translated">Gregor Scheithauer 是一名顾问、数据科学家和研究员。他专门研究流程挖掘、业务流程管理和分析。你可以在<a class="ae jg" href="https://www.linkedin.com/in/gscheithauer/" rel="noopener ugc nofollow" target="_blank"><strong class="me jt">LinkedIn</strong></a><a class="ae jg" href="https://twitter.com/gscheithauer" rel="noopener ugc nofollow" target="_blank"><strong class="me jt">Twitter</strong></a>上和他联系，或者在<a class="ae jg" href="https://gscheithauer.medium.com/" rel="noopener"> <strong class="me jt"> Medium </strong> </a>上这里。谢谢大家！</p></div></div>    
</body>
</html>