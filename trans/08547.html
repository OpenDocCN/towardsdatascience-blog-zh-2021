<html>
<head>
<title>Using the COUNT/GROUP BY/JOIN Combination in SQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SQL中使用计数/分组依据/连接组合</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/using-the-count-group-by-join-combination-in-sql-414d81626764?source=collection_archive---------2-----------------------#2021-08-07">https://towardsdatascience.com/using-the-count-group-by-join-combination-in-sql-414d81626764?source=collection_archive---------2-----------------------#2021-08-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6b5f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">计算SQL中条目的实例数</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/85426c0df01f33dcbea64eb71a548fc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w0R4jeWQ4XSO0r3G1maBEA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:图片来自<a class="ae ky" href="https://pixabay.com/photos/server-cloud-development-business-1235959/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></p></figure><p id="3083" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在使用SQL中的表时，经常会希望计算该表中实例的数量。这可以是产品类别、品牌等。</p><p id="e66c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当使用一个表时，这就足够简单了。但是，当跨多个表工作时，这项任务可能会有些麻烦。</p><p id="2051" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，我们将看一个例子，说明如何将COUNT和GROUP BY函数与一个内部连接结合起来，以计算特定零售商的不同产品类型的数量。</p><h1 id="4150" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">服装店示例</h1><p id="d16a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">让我们假设一个繁忙的服装店有几个表存储在一个数据库中，该数据库包含在任何给定时间存储在其仓库中的所有商品。这些表包含商品名称、价格、品牌、产品类型等信息。业主难以估计仓库中每件产品的具体数量，即仓库中存放了多少条牛仔裤、多少件t恤？</p><p id="d3de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">考虑以下两个表:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="f674" class="mx lw it mt b gy my mz l na nb">&gt;&gt;&gt; select * from clothes1 limit 1;</span><span id="7545" class="mx lw it mt b gy nc mz l na nb">item                | colour   | type <br/>--------------------+----------+----------<br/>Grass Green T-Shirt | Green    | T-Shirt</span><span id="fc28" class="mx lw it mt b gy nc mz l na nb">&gt;&gt;&gt; select * from clothes2 limit 1;</span><span id="f1e3" class="mx lw it mt b gy nc mz l na nb">item               | price   | size <br/>-------------------+---------+--------<br/>Sky Blue Jeans     |  79.99  | 31</span></pre><p id="4d4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设以下场景。<strong class="lb iu"> clothes1 </strong>代表仓库中曾经出现过的所有衣物。<strong class="lb iu"> clothes2 </strong>代表仓库中任何一次出现的所有衣物。</p><p id="6a6c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设只有<strong class="lb iu"> clothes1 </strong>表包含关于<strong class="lb iu">类型</strong>的信息，这意味着第一个表必须与第二个表连接，以便通过类型识别第一个表中出现的每个项目。</p><p id="7a1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们只想计算当前出现的服装项目的类型，而不是那些存储在第二个表中但没有出现的服装项目的类型，所以我们使用内部连接而不是完全连接来实现这个目的。</p><p id="95bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用完全连接将返回clothes1中的所有条目，即曾经出现在仓库中的条目。因为我们只对计算当前库存感兴趣，所以我们使用了一个内部连接。</p><h1 id="6f7e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">询问</h1><p id="9b58" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">以下是查询:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="0be3" class="mx lw it mt b gy my mz l na nb">&gt;&gt;&gt; select t1.type, count(*) from clothes1 as t1 inner join clothes2 as t2 on t1.item=t2.item group by t1.type;</span></pre><p id="55be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从这个查询中，我们获得了一个类似如下的表:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="29b9" class="mx lw it mt b gy my mz l na nb">   type    | count <br/>-----------+-------<br/> T-Shirt   |  2496<br/> Jeans     |  3133<br/> Sneakers  |  2990<br/> Shirts    |  3844<br/> Ties      |  1789<br/> Trousers  |  2500<br/>(6 rows)</span></pre><h1 id="0475" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="08a6" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在这个简短的教程中，您已经看到了如何在SQL中使用COUNT/GROUP BY/JOIN组合来聚合多个表中的条目。</p><p id="e24a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然GROUP BY查询在只处理一个表时可以简单地实现这一点，但在处理多个表时，情况会变得更加复杂。</p><p id="d0dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">非常感谢阅读，任何问题或反馈都非常感谢！您还可以在这里找到原始文章<a class="ae ky" href="https://www.michael-grogan.com/articles/count-groupby-join-sql" rel="noopener ugc nofollow" target="_blank">以及有用的SQL实践的更多示例。</a></p><p id="b370" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nd">免责声明:本文是在“原样”的基础上编写的，没有担保。它旨在提供数据科学概念的概述，不应被解释为专业建议。本文中的发现和解释是作者的发现和解释，不被本文中提到的任何第三方认可或隶属于任何第三方。</em></p></div></div>    
</body>
</html>