<html>
<head>
<title>How To Build A Database Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python构建数据库</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-build-a-database-using-python-f4b62a19d190?source=collection_archive---------5-----------------------#2021-08-23">https://towardsdatascience.com/how-to-build-a-database-using-python-f4b62a19d190?source=collection_archive---------5-----------------------#2021-08-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fc4e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Flask-SQLAlchemy库实现您的数据库，而不处理SQL</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c25e54cd68a5657c97837ef0c74ca306.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BWkIDuOddZWcz5NGTvwh8Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">泰勒·维克在<a class="ae ky" href="https://unsplash.com/s/photos/server?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="a6be" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="11c6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">SQLAlchemy是一个Python库，用于实现SQL数据库，而不使用SQL语言本身。换句话说，您需要做的就是使用Python语言实现您的数据库。</p><p id="2f21" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">SQLAlchemy是一个用于连接Flask项目中的SQLAlchemy库的库，它使您的数据库实现比以往任何时候都更容易。本文将向您展示如何使用Flask-SQLAlchemy库构建您的数据库。</p><p id="de8d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">没有进一步，让我们开始吧！</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="9d56" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">数据库ˌ资料库</h1><p id="ec6d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在我们开始实现之前，让我向您解释一下数据库。什么是数据库？数据库是相互集成的数据集合，我们可以使用我们的计算机访问它。</p><p id="d1e3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在数据科学中，您可能会以电子表格的形式插入和分析数据。在软件开发领域，就有点不一样了。让我们来看看这个电子表格。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/096e65a5c2f0208ef899a4dbc524a63a.png" data-original-src="https://miro.medium.com/v2/resize:fit:548/0*SRp6yOArlY-ubhVE"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">该图像由作者捕获。</p></figure><p id="cfe4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在电子表格中，我们可以看到有两列。有书名和作者的名字。如果您查看author列，您会看到有些值重复了几次。这种情况我们称之为冗余。</p><p id="642d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">将整个数据集用作一个表并不是最佳做法，尤其是对于那些想要构建网站或应用程序的人。相反，我们必须分离表，我们称之为规范化。</p><p id="7e8a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">总之，规范化过程会将数据集分成几个表，每个表都包含唯一的标识符。我们将把每个标识符称为主键。如果我们分离上面的数据集，我们将得到如下所示的数据集:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/d51b33b46775a60622c023c93fe27b0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*V_CXRqZpo3qo1d6w"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">该图像由作者捕获。</p></figure><p id="e21a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">从上面可以看到，数据集已经被分成两个表。有图书表和作者表。作者的名字在作者表上。因此，我们不能像在电子表格中那样直接访问名称。</p><p id="f086" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了检索作者的名字，我们必须通过从author表中获取id来连接Book表和Author表。我们将作者的id作为Book表的外键。</p><p id="f7fd" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">也许这很复杂，但是如果你开始实现一个构建应用程序的数据库，它将提高你的应用程序的性能。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="e4d6" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">履行</h1><h2 id="c8b6" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">安装库</h2><p id="f642" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在我们开始实现之前，我们需要做的第一件事是在我们的计算机中安装这个库。要安装它，我们可以使用pip来完成。以下是安装库的语法:</p><p id="0340" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">要加载库，我们可以调用下面的语法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="29bf" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">正如您从库的名称中所知道的，我们还需要加载Flask库。</p><h2 id="e88e" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">启动数据库引擎</h2><p id="a937" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">加载库之后，下一步是设置SQLAlchemy对象和数据库的路径。默认情况下，SQLAlchemy附带SQLite软件。</p><p id="a2cc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">SQLite是一个数据库管理系统，我们可以在其中建立和分析我们已经建立的数据库。您可以使用其他DBMS，如MySQL、PostgreSQL或您喜欢的任何DBMS。要设置我们的数据库，请添加以下代码行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="2b57" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这段代码将初始化Flask和SQLAlchemy对象，我们设置一个包含数据库路径的参数。在这种情况下，数据库路径是SQLite:///C:\ \ SQLite \ \ library . db。</p><h2 id="803a" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">实现数据库</h2><p id="47a7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">设置好对象和参数后，我们就可以开始实现数据库了。让我们回忆一下上面的数据库表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/686dfdb05578db7d17991c7fddce1930.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8i7j0QJrA4LuOqBw"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">该图像由作者捕获。</p></figure><p id="2f2c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">从上面可以看到，上面有两张桌子。每个表都有自己的类，我们可以在其中初始化列名和表之间的关系。我们将继承一个名为Model的类来实现我们的表。根据上图，代码如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h2 id="c82e" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">插入值</h2><p id="939c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">创建类之后，我们可以构建数据库。要构建数据库，您可以访问终端并运行以下命令:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="bc53" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在让我们尝试在我们的表上插入值。对于这个例子，让我们输入上面的电子表格中的数据。您可以按照下面的代码插入值:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h2 id="a231" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">查询该表</h2><p id="3885" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在表中插入值后，现在让我们运行查询来查看数据是否存在。下面是实现这一点的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="e64f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">从上面可以看出，我们的提交是成功的。好吧，这仍然是一个介绍，但我希望你能掌握这个概念，并在一个更大的项目上实施它。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="e442" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">附加:SQL查询</h1><p id="6f6f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">除了Flask-SQLAlchemy库之外，我还将向您演示如何使用本地SQLite访问数据库。我们这样做是为了确保已经在上面创建了数据库。要访问SQLite，您可以打开终端并编写以下脚本:</p><pre class="kj kk kl km gt nu nv nw nx aw ny bi"><span id="6c13" class="ng la it nv b gy nz oa l ob oc"><strong class="nv iu">sqlite3</strong></span></pre><p id="b1b2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">之后，它会这样显示SQLite的界面:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/6b7d6871b987fa701f368b699a43932f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/0*b_2VSYopHjTZ32No"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">该图像由作者捕获。</p></figure><p id="11a0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在下一步中，您可以使用。打开命令，将路径添加到数据库，如下所示:</p><pre class="kj kk kl km gt nu nv nw nx aw ny bi"><span id="1bd8" class="ng la it nv b gy nz oa l ob oc"><strong class="nv iu">.open absolute//path//to//your//database.db</strong></span></pre><p id="deda" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了确保我们已经打开了数据库，请写信。终端上的表格是这样的:</p><pre class="kj kk kl km gt nu nv nw nx aw ny bi"><span id="b8de" class="ng la it nv b gy nz oa l ob oc"><strong class="nv iu">.tables</strong></span></pre><p id="621b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">它会产生这样的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/8df5a6b0e4caf316e2ab1344e1fbc051.png" data-original-src="https://miro.medium.com/v2/resize:fit:308/0*6RQUq9kscMLBUs_b"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">该图像由作者捕获。</p></figure><p id="472b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">很好，有用。现在让我们尝试使用SQL语言来查询我们的数据库:</p><pre class="kj kk kl km gt nu nv nw nx aw ny bi"><span id="d5e5" class="ng la it nv b gy nz oa l ob oc"><strong class="nv iu">SELECT * FROM books</strong></span></pre><p id="da83" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/efee1d07ff7aa1c5368ef714eb4d4f23.png" data-original-src="https://miro.medium.com/v2/resize:fit:414/0*q9dbJFkrYWvPe3VJ"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">该图像由作者捕获。</p></figure><p id="ffd3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在让我们试着将两个表合二为一。您可以在终端上编写这行代码:</p><pre class="kj kk kl km gt nu nv nw nx aw ny bi"><span id="22f4" class="ng la it nv b gy nz oa l ob oc"><strong class="nv iu">SELECT Book.title, Author.name FROM Book<br/>INNER JOIN Author ON Book.author_id = Author.id;</strong></span></pre><p id="ad59" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/de27eef6186a3a5624a69dd4668fc1d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/0*wr9vltby-fF54xQt"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">该图像由作者捕获。</p></figure><h1 id="3a68" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结束语</h1><p id="2d70" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">干得好！现在，您已经使用Flask-SQLAlchemy库实现了您的数据库。我希望这篇文章能帮助你在项目中实现数据库，尤其是当你想用Flask构建一个web应用程序的时候。</p><p id="c825" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果你对我的文章感兴趣，你可以在媒体上关注我，或者订阅我的时事通讯。还有，如果你有什么问题或者只是想打个招呼，你可以在<a class="ae ky" href="https://www.linkedin.com/in/alghaniirfan/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> LinkedIn </strong> </a>上关注我。</p><p id="429f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">谢谢你看我的文章！</p></div></div>    
</body>
</html>