<html>
<head>
<title>Build command-line interfaces in Python using Argparse</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Argparse在Python中构建命令行界面</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-command-line-interfaces-in-python-using-argparse-6031daa28252?source=collection_archive---------24-----------------------#2021-07-09">https://towardsdatascience.com/build-command-line-interfaces-in-python-using-argparse-6031daa28252?source=collection_archive---------24-----------------------#2021-07-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="07ba" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在Python中使用命令行授权！</h2></div><p id="55db" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Argparse是一个内置的Python库，有助于在Python代码上构建命令行界面。Argparse意味着<em class="le">解析参数</em>。当我第一次听Argparse时，我感到害怕，但一旦我开始探索和学习，它就成为我的脚本中不可或缺的一部分。它为您的Python代码提供了额外的灵活性。您可以发送您修改的参数、参数选择等。通过命令行和Argparse会照顾它。下图解释了我对Argparse的理解:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/5b9c14dd16422ca18807cf17fc19f9bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uLrNtV2k5zYS5yyS0WzUcA.png"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">作者创造的形象</p></figure><p id="0c17" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了实时解释这一点，让我们从一个基本的例子开始。让我们假设我们有下面的脚本<em class="le"> argparsetest.py. </em>该脚本可以根据用户输入执行两个变量的加法或减法。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="2453" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这里，我们只定义了两种可能性“add”或“sub”。如果用户两者都没有提供，它将作为无效操作返回(以黄色突出显示)，如下面的屏幕截图所示:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lx"><img src="../Images/bfdf9b94279c72bcb3a3c28530b2f758.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*bnccbmnEH9mRPZbVNSOBlw.png"/></div></div></figure><p id="b6a6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">用户可以通过提及下面的语法来传递参数:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/428add4f65c7a43336a8a51764b49b2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*tO_3FLDFRaO83XdMgghYAQ.png"/></div></figure><h2 id="05b5" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated">关于库的更多详细信息:</h2><p id="531b" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated"><strong class="kk iu">💡位置参数:</strong>您需要在每次执行脚本时指定这些参数。如果没有提到默认值，则不能跳过它们，因为默认值是必须提供的。例如，在我们之前提到的示例中，如果我们只是要求用户从命令行提供b的值，则需要对脚本进行如下微调:</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="lv lw l"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">显示位置参数的脚本</p></figure><p id="1140" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">命令行中的命令如下所示:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi mx"><img src="../Images/b600a8ecfc29cb759fc76d2c66dfe8ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xUULCN43EDmuZwimFrI0iQ.png"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">带有位置参数的命令</p></figure><p id="75cb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们不指定“b”输入，我们会得到类似下面这样的错误:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi my"><img src="../Images/041f5e7fc0c0981bda8b1a007c3ad4e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*adbO__D0JcJ0PDY4nS1QCw.png"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">不带位置参数的命令</p></figure><blockquote class="mz na nb"><p id="d727" class="ki kj le kk b kl km ju kn ko kp jx kq nc ks kt ku nd kw kx ky ne la lb lc ld im bi translated">如果有多个位置参数，它需要按照脚本的特定顺序出现。试试看，看看效果如何！</p></blockquote><p id="2d67" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">💡可选参数:</strong>与positional相反，这些参数可以是可选的，不指定也可以。将默认值添加到位置参数会转换为可选参数，如以下脚本所示:</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="lv lw l"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">显示可选参数的脚本</p></figure><p id="8263" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如前所述，如果我们不指定参数，它将采用默认值并执行脚本，没有任何错误</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi nf"><img src="../Images/adc708889c05cde93356b69e72dff442.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cvVTuK0-6cXEmzOG4mmVGg.png"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">不带参数的命令</p></figure><p id="31a2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">💡获得帮助:</strong>如果你想知道脚本中需要/使用的参数，你可以通过添加“- h”获得帮助。下面的截图显示了如何做到这一点:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi ng"><img src="../Images/8be7cbeba10414c1d38b619e9788c68a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZvgNNQrMvEH4a-UecMmC3Q.png"/></div></div></figure><p id="3bd8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">💡设置值的数量:</strong>如果您想为一个变量提供多个值作为输入，您也可以这样做。传递的值以列表的形式读取。例如，添加'<strong class="kk iu"> c </strong>'作为参数，并将<strong class="kk iu"> nargs </strong>定义为<strong class="kk iu"> 3，</strong>，这意味着需要3个输入值。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="lv lw l"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">带nargs的脚本</p></figure><p id="e823" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们通过命令行将这些值传递给<strong class="kk iu"> c </strong>，如下所示:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi nh"><img src="../Images/2f739a2595fdb25aeef3087ec063bced.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s0kU9MAuwL30cFBZhiyUTg.png"/></div></div></figure><p id="121f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">💡设置输入参数的类型:</strong>你可以明确地指出需要什么类型的输入。例如，我们只需添加' int '作为b的必需变量，如果用户未能提供所需输入类型的输入，脚本将抛出一个错误。该脚本将更改如下所示的内容:</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="2bc4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我提供<em class="le">字符串</em>而不是<em class="le">整数</em>到<strong class="kk iu"> b </strong>它将抛出如下错误:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/3804105debf4fe69103d8ff8fd7d9a37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*TTYCjuEP_aPdw35L0Pt6FQ.png"/></div></figure><p id="1e45" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">总之，<code class="fe ni nj nk nl b">argparse </code> library是通过命令行界面提供用户友好方法的完美方式！这些只是开始使用argparse的基础。如果你有任何其他的诀窍/技巧，请随时评论。感谢您的宝贵时间！</p></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><p id="095b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<a class="ae nt" href="https://twitter.com/pratikkgandhi" rel="noopener ugc nofollow" target="_blank"> Twitter </a>或<a class="ae nt" href="https://www.linkedin.com/in/pratikkgandhi/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上关注我。你也可以通过pratikkgandhi@gmail.com联系我</p></div></div>    
</body>
</html>