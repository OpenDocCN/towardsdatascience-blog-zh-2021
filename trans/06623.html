<html>
<head>
<title>Your colour map is bad, here’s how to fix it</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你的彩色地图是坏的，这里是如何修复它</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/your-colour-map-is-bad-heres-how-to-fix-it-lessons-learnt-from-the-event-horizon-telescope-b82523f09469?source=collection_archive---------28-----------------------#2021-06-14">https://towardsdatascience.com/your-colour-map-is-bad-heres-how-to-fix-it-lessons-learnt-from-the-event-horizon-telescope-b82523f09469?source=collection_archive---------28-----------------------#2021-06-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d866" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">从视界望远镜中吸取的教训</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b3f05e2b887f74c22d2c751d845f3f2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*raX-eqs_i-eFEbc8JEeoYA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">不同的科学彩色地图应用于GRHD模拟的结果(见<a class="ae kv" href="https://arxiv.org/ftp/arxiv/papers/1906/1906.11241.pdf" rel="noopener ugc nofollow" target="_blank">https://arxiv.org/ftp/arxiv/papers/1906/1906.11241.pdf</a>)</p></figure><p id="dd48" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你还记得那些模糊的excel表格和不可读的颜色的文件吗？没有吗？这很正常，没有人会。即使内容是王道，演示文稿也能激励读者阅读你讲述的故事。</p><p id="8ea6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个重要的因素是信息的颜色编码有多好。数据的准确表示是至关重要的。许多常见的彩色地图通过不均匀的颜色梯度扭曲数据，对于色觉缺陷的人来说通常是不可读的。一个臭名昭著的例子是喷射彩色地图。这些彩色地图没有呈现你想要说明的所有信息，甚至更糟的是通过人工制品呈现虚假信息。不管你是不是科学家，你的目标是以最准确、最吸引人的方式传达视觉信息。此外，不要忽视色觉缺陷，这代表了8%的(高加索)男性人口。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/9a59345fe3c0ff4969cc50e7d0b2e8aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T6qhaJm1sISKUy9Mp7YZOg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">你会为你的演示选择什么颜色的地图？丑陋的喷射还是更平滑的热喷射？参见https://github.com/ThomasBury/scicomap中的<a class="ae kv" href="https://github.com/ThomasBury/scicomap" rel="noopener ugc nofollow" target="_blank"/></p></figure><h1 id="eb68" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">🗺色彩空间</h1><p id="20b5" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">色彩空间是色彩的特定组织，确保色彩的再现。主要原则如下。</p><p id="6205" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感知一致性是指颜色空间中颜色之间的欧几里德距离应该与人类颜色感知距离判断相匹配。例如，相距d的蓝色和红色看起来应该与相距d的绿色和紫色一样可区分。</p><p id="57a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">CAM02-UCS色彩空间(统一色彩空间)是精确信息表示的良好基础。它的三个坐标通常用J’、a’和b’来表示。它的柱面坐标是J’、c’和h’。感知色彩空间戳类似于Lab。然而，Jab使用了一种更新的颜色外观模型，在理论上为辨别力测量提供了更高的精度。</p><ul class=""><li id="82b0" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated"><strong class="ky ir">:明度:</strong>也称为数值或色调，是颜色亮度的表示</li><li id="a3f8" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><strong class="ky ir">色度:</strong>物体的颜色和灰色之间的内在差异</li><li id="f803" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><strong class="ky ir">色调:</strong>一个刺激与被描述为红色、绿色、蓝色和黄色的刺激相似或不同的程度</li></ul><p id="b085" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">CAM02-UCS是Matplotlib的绿色、等离子、岩浆彩色地图所使用的空间，你可能已经知道了。</p><h1 id="8f44" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">信息的🥽视觉编码</h1><p id="28e2" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们可以用这些自由度来编码信息。最佳实践是:</p><ul class=""><li id="8b0d" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated">“明度J”:对于标量值，强度。它必须随物理量线性变化</li><li id="6563" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">色调h '可以编码一个附加的物理量，色调的变化应该与该量成线性比例。色调h’在使图像更有吸引力而不干扰像素值的表示方面也是理想的。</li><li id="cd90" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">色度较难识别，不应用于编码物理信息</li></ul><h1 id="8cb1" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">🤔是什么让彩色地图成为好的彩色地图？</h1><p id="b9b9" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">根据参考文献和理论，一个好的彩色地图是一个不会引入伪像的彩色地图，并且在人眼看来是均匀一致的。通过以下方式执行<em class="ne">均匀化</em></p><ul class=""><li id="064d" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated">使彩色地图在J '中呈线性</li><li id="3170" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">提升彩色地图(使其更亮，即增加J’的最小值)</li><li id="e360" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">对称化色度以避免进一步的伪像</li><li id="94f8" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">避免色度曲线中的扭结和边缘</li><li id="5791" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">双音对称与否</li></ul><h1 id="3017" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">🛠如何修复一个坏的彩色地图？</h1><p id="4cbb" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">使用<a class="ae kv" href="https://github.com/ThomasBury/scicomap" rel="noopener ugc nofollow" target="_blank"> scicomap包</a>(科学彩色地图)，很容易修复各种各样的彩色地图(顺序、发散、会聚、多顺序、圆形、定性)。您可以选择内置的彩色地图，也可以使用之前的Matplotlib彩色地图。</p><p id="d9e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们举一个常见的颜色地图的例子，这是一个糟糕的选择:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="c603" class="nk lu iq ng b gy nl nm l nn no">import scicomap as sc</span><span id="3961" class="nk lu iq ng b gy np nm l nn no"># Import the colour map<br/>sc_map = sc.ScicoSequential(cmap="hot")</span><span id="d478" class="nk lu iq ng b gy np nm l nn no"># Fix the colour map<br/>sc_map.unif_sym_cmap(lift=40, bitonic=False, diffuse=True)</span><span id="5617" class="nk lu iq ng b gy np nm l nn no"># Visualize the rendering of information<br/>fig_examples=sc_map.draw_example(cblind=False, figsize=(22, 4))<br/>fig_cmap=sc_map.assess_cmap(figsize=(22,10))</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/c54e0e65ef2f963706bf4acae261e45d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JF2PXWz85JNDc_dGpOPA2g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">左图:原始彩色地图。太暗，明度不是线性的且有边缘，色度不对称且不平滑。右图:相同的彩色贴图，但是固定:更亮、线性、平滑和对称。可视化建立在<a class="ae kv" href="https://github.com/liamedeiros/ehtplot" rel="noopener ugc nofollow" target="_blank"> EHTplot库</a>的基础上</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/ce6d9bdd973660bb0e62f1c3066ffd41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X_Kk1QBWm_FuJvylPLWRdw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">顶行显示原始的热cmap，底行显示固定的彩色map。原始的彩色地图引入了许多假象，金字塔的逐步渲染(除了边缘的平滑功能)。修复后，伪影几乎消失，可读性更好。</p></figure><h1 id="1a14" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">如何与Matplotlib一起使用</h1><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="804b" class="nk lu iq ng b gy nl nm l nn no">import matplotlib.pyplot as plt<br/>import matplotlib as mpl<br/>import scicomap as sc<br/>from scicomap.utils import _fn_with_roots</span><span id="0d24" class="nk lu iq ng b gy np nm l nn no"># load the color map (built-in or any mpl compatible cmap)<br/>div_map = sc.ScicoDiverging(cmap='watermelon')<br/># mpl_cmap_obj = plt.get_cmap("PRGn")<br/># div_map = sc.ScicoDiverging(cmap=mpl_cmap_obj)</span><span id="c0b6" class="nk lu iq ng b gy np nm l nn no"># correct the colormap<br/>div_map.unif_sym_cmap(lift=15, <br/>                      bitonic=False, <br/>                      diffuse=True)</span><span id="99fc" class="nk lu iq ng b gy np nm l nn no"># get the fixed color map<br/>fixed_cmap = div_map.get_mpl_color_map()<br/>print(type(fixed_cmap))</span><span id="eae5" class="nk lu iq ng b gy np nm l nn no"># use it as you like<br/>im = _fn_with_roots()<br/>norm = mpl.colors.CenteredNorm()<br/>divnorm = mpl.colors.TwoSlopeNorm(vmin=-1, vcenter=0, vmax=1.25)<br/>fig = plt.figure(figsize=(3,3), facecolor="white")<br/>ax = fig.add_subplot(1, 1, 1, facecolor="white")<br/>pos = ax.imshow(im, cmap=fixed_cmap, aspect="auto", norm=divnorm)<br/>fig.colorbar(pos, ax=ax);</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/b41c2457495dba4db03000132a75aa52.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/1*ZZUPfhh62KUnfoz4LQrJBQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">用修正的cmap绘图</p></figure><h1 id="9d8d" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">🌈不要忽视色彩不足的渲染</h1><p id="01d3" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">高达8%的男性(白种人)是色盲用户，在制作图表时不要忽视这一点。使用<a class="ae kv" href="https://github.com/ThomasBury/scicomap" rel="noopener ugc nofollow" target="_blank"> Scicomap库</a>，你可以很容易地把自己放在一个不能清楚区分颜色的人的位置上。</p><p id="4f90" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在使用scicomap绘制的示例中，您可以直观地看到缺乏色彩的人会看到什么，以及色彩映射表是否合适。尤其是红绿色图并不是最好的选择，即使对于没有色觉缺陷的用户来说，红绿色图被校正得看起来是一致的</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="0d4b" class="nk lu iq ng b gy nl nm l nn no">div_map = sc.ScicoDiverging(cmap='watermelon')<br/>div_map.unif_sym_cmap(lift=10, <br/>                      bitonic=False, <br/>                      diffuse=True)<br/>f = div_map.draw_example()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/405ed299940cb4a111ee66d94854d679.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uacOIAdk3QWtPzNDHcZ0Jg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">红绿颜色地图如何呈现给不同类型的缺乏颜色的用户</p></figure><p id="a4d0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你甚至可以快速比较不同的彩色地图</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="843c" class="nk lu iq ng b gy nl nm l nn no">c_l =  ["cividis", "inferno"]<br/>f = sc.plot_colorblind_vision(ctype='sequential', cmap_list=c_l, figsize=(30, 4), n_colors=11, facecolor="black")</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/b82b04b78ed8cf7a8e8b03394bcbe388.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ewNpPK3Gm8L-OkT8CAWwFQ.png"/></div></div></figure><h1 id="4c10" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">🧰更多功能</h1><p id="07d6" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">scicomap包提供了更多的功能(发散、发散、多序列、圆形和定性彩色地图),我将让你探索。没有借口使用喷射彩色地图了，✌</p><h1 id="3ab4" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">📚参考</h1><ul class=""><li id="6261" class="mq mr iq ky b kz ml lc mm lf nv lj nw ln nx lr mv mw mx my bi translated"><a class="ae kv" href="https://www.nature.com/articles/s41467-020-19160-7.pdf" rel="noopener ugc nofollow" target="_blank">科学交流中颜色的误用</a></li><li id="5540" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><a class="ae kv" href="https://www.kennethmoreland.com/color-advice/BadColorMaps.pdf" rel="noopener ugc nofollow" target="_blank">为什么我们使用糟糕的彩色地图，你能做些什么</a></li><li id="e24e" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">彩虹已死…彩虹万岁！—系列大纲</li><li id="dbe1" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><a class="ae kv" href="https://www.fabiocrameri.ch/colourmaps/" rel="noopener ugc nofollow" target="_blank">科学彩色地图</a></li><li id="d931" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><a class="ae kv" href="https://betterfigures.org/2015/06/23/picking-a-colour-scale-for-scientific-graphics/" rel="noopener ugc nofollow" target="_blank">为科学图形选择色标</a></li><li id="393a" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><a class="ae kv" href="https://colorcet.com/" rel="noopener ugc nofollow" target="_blank">颜色</a></li><li id="8a82" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><a class="ae kv" href="https://arxiv.org/abs/1509.03700" rel="noopener ugc nofollow" target="_blank">好的彩色地图:如何设计</a></li><li id="69aa" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><a class="ae kv" href="https://www.osapublishing.org/oe/fulltext.cfm?uri=oe-25-13-15131&amp;id=368272" rel="noopener ugc nofollow" target="_blank">包括高动态范围和宽色域的图像信号的感知均匀色彩空间</a></li><li id="f748" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><a class="ae kv" href="https://github.com/liamedeiros/ehtplot" rel="noopener ugc nofollow" target="_blank"> EHTplot库</a></li></ul></div></div>    
</body>
</html>