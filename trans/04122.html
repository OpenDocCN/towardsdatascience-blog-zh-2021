<html>
<head>
<title>Deploying a basic Streamlit app to Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将基本的Streamlit应用程序部署到Heroku</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/deploying-a-basic-streamlit-app-to-heroku-be25a527fcb3?source=collection_archive---------18-----------------------#2021-04-07">https://towardsdatascience.com/deploying-a-basic-streamlit-app-to-heroku-be25a527fcb3?source=collection_archive---------18-----------------------#2021-04-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0878" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">本文展示了在Heroku上部署一个基本的Streamlit应用程序(模拟中心极限定理)</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0c6c959f1c134e79897c7c3359126e53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fIEKxiVouesevXYZJ0xx_w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="aa15" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae lr" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>是一个应用框架，用于部署使用Python构建的机器学习应用。它是一个开源框架，类似于R. Heroku中的Shiny包。Heroku是一个平台即服务(PaaS ),支持在云中部署和管理用多种编程语言构建的应用程序。</p><p id="1227" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">根据中心极限定理，随着样本容量的增加，样本均值将越来越接近总体均值。如果从总体中抽取足够数量的样本，随着样本量的增加，样本均值的分布(也称为样本均值的抽样分布)看起来更接近高斯分布，而不考虑潜在的总体分布。样本均值的标准偏差(又称标准误差)将等于(总体标准偏差/样本大小的平方根)。</p><h1 id="c4b1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">关于应用程序</h1><p id="d9a8" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">这个Streamlit应用程序模拟了样本和总体特征变化时的中心极限定理。这个应用程序使用户能够玩人口范围，人口规模，样本大小和样本数量。改变总体和样本的这些特征会对总体参数、样本统计、总体分布和样本均值的分布产生影响。这个应用程序可视化了样本均值和人口分布的这些变化。</p><h1 id="1e64" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">文件夹结构</h1><p id="cbe6" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">下面是用于将应用程序部署到Heroku的部署文件夹结构。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/4c443296d6620a0121125003b978b7ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:586/format:webp/1*muFm2khQmUlY9eQChYIitw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><h2 id="0b70" class="mq lt iq bd lu mr ms dn ly mt mu dp mc le mv mw me li mx my mg lm mz na mi nb bi translated"><strong class="ak"> central_limit_theorem.py </strong></h2><p id="8bf1" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">这个Python脚本(。py文件，不是笔记本)包含了Streamlit app的代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h2 id="f92b" class="mq lt iq bd lu mr ms dn ly mt mu dp mc le mv mw me li mx my mg lm mz na mi nb bi translated">requirements.txt</h2><p id="db89" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">“requirements.txt”文件指定了要安装的包。必须指定软件包的版本，以避免“它在我的机器上工作”的问题。软件包的版本必须与我们Conda环境中的版本相匹配。我们将使用的“requirements.txt”文件如下所示。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="4546" class="mq lt iq nf b gy nj nk l nl nm">matplotlib==3.4.1<br/>numpy==1.20.2<br/>pandas==1.2.3<br/>streamlit==0.79.0</span></pre><h2 id="7401" class="mq lt iq bd lu mr ms dn ly mt mu dp mc le mv mw me li mx my mg lm mz na mi nb bi translated">setup.sh</h2><p id="e46e" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">“setup.sh”指定在运行应用程序之前配置环境要执行的命令。在我们的' setup.sh '中，我们首先创建一个'。streamlit '目录来存储凭据和配置文件。然后，我们指定向streamlit.io注册的电子邮件，并将其写入“credentials.toml”文件。然后，我们将配置细节添加到“config.toml”文件中。这两个文件都位于。“简化”目录。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="a4fb" class="mq lt iq nf b gy nj nk l nl nm">mkdir -p ~/.streamlit/<br/><br/>echo "\<br/>[general]\n\<br/>email = \"email@domain\"\n\<br/>" &gt; ~/.streamlit/credentials.toml<br/><br/>echo "\<br/>[server]\n\<br/>headless = true\n\<br/>enableCORS=false\n\<br/>port = $PORT\n\<br/>" &gt; ~/.streamlit/config.toml</span></pre><h2 id="38f0" class="mq lt iq bd lu mr ms dn ly mt mu dp mc le mv mw me li mx my mg lm mz na mi nb bi translated">Procfile</h2><p id="e051" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">“Procfile”列出了启动应用程序时要执行的命令。在我们的“Procfile”中，我们将首先运行创建所需配置文件的“setup.sh ”,然后使用“streamlit run”命令运行应用程序。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="4e23" class="mq lt iq nf b gy nj nk l nl nm">web: sh setup.sh &amp;&amp; streamlit run iris_streamlit_demo.py</span></pre><h1 id="19c3" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">将应用程序部署到Heroku</h1><ol class=""><li id="bcda" class="nn no iq kx b ky mk lb ml le np li nq lm nr lq ns nt nu nv bi translated">登录你的Heroku账户，从右上角的“新建”菜单中选择“创建新应用”。</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/69999fad37f1cb347ae1c8dd5f289f42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Avauhp6zk0zg77Og7UkYQw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="9442" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">2.输入您的应用程序的名称(基于可用性的任何名称)，然后单击“创建应用程序”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/f8a444ea4fc32aab12f253e3175dda8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*ygaTpw1oFyV4lPGpGApHPA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="0755" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">3.选择部署方法。因为我已经使用GitHub托管代码文件(远程回购)，所以我将选择那个选项。如果您是第一次进行连接，可能需要验证您的GitHub凭据。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/ed2c4fe7c2bd55796c922a8282793294.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*tmZytfUvU2QbcZlif8LQiw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="7642" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">4.输入您要部署的GitHub repo的名称，单击“搜索”并单击“连接”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/04f15f310d6b9b884e22cc69b4ed3a74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-liKQK82jlIN02z4zA83bQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="c200" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">5.然后选择要部署的分支，并单击“部署分支”。我不打算在未来修改应用程序，所以我没有启用自动部署。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/3977e2a4c539dc8b5237a6b15153b6b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MCACLTkW7El_bGHwlZ-Iuw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="1272" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">6.成功部署应用程序后，您将看到消息，并单击“查看”查看应用程序。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/961c0c6c9435ac67059eada748b22c03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bf3P9xtXrqCGtHDR-v8kBg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/ed8c01db0d30e80ce90c37f1116cd4b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xDJA29PBmsclN0v2bPwcOw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">已部署应用的屏幕截图(图片由作者提供)</p></figure><p id="a9a4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">部署到Heroku的app可以在 这里找到<a class="ae lr" href="https://clt-streamlit-heroku.herokuapp.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir">。由于该应用程序仅用于演示目的，我使用免费的dynos，这可能会导致应用程序性能不佳。有时，应用程序启动可能需要更长的时间，因为dyno可能会在较长时间不活动时进入睡眠模式。此外，这个应用程序通过滑块(不使用提交按钮)接受输入，并与大型Numpy数组一起工作，这可能会使应用程序崩溃，使其无法访问。然而，我使用了“@st.cache”装饰器，据说它可以在执行高资源要求的计算时提高应用程序的性能。您也可以从Streamlit共享<a class="ae lr" href="https://share.streamlit.io/ksv-muralidhar/central_limit_theorem/main/central_limit_theorem.py" rel="noopener ugc nofollow" target="_blank">T5这里</a></strong> </a>访问应用程序。</p></div></div>    
</body>
</html>