# SSH 远程登录的优势

> 原文：<https://towardsdatascience.com/benefits-of-remote-entry-with-ssh-76acb72f918a?source=collection_archive---------33----------------------->

## 快速教程

## 使用 ssh-keygen 保持您的动力

![](img/2ff57af48413b53bb509c3249e81584b.png)

照片由 [Goh Rhy Yan](https://unsplash.com/@gohrhyyan?utm_source=medium&utm_medium=referral) 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

我所有的工作都是在远程计算机上完成的，这通常需要我在一天中多次输入密码。这个小任务是可以避免的。

在这篇文章中，我将描述如何设置进入服务器的无钥匙进入，这样你就不必每次登录或`scp`文件时都输入密码。我还将描述如何在不输入密码的情况下通过 bastion 服务器远程复制文件，以及如何安排远程备份。

# 0.设置无钥匙进入

在本地计算机上，使用以下命令创建 RSA 密钥:

```
ssh-keygen
```

这将使用您的 RSA 密钥创建一个文件。默认位置是

```
~/.ssh/id_rsa
```

将密钥复制到远程服务器上的`~/.ssh/authorized_keys`中:

```
ssh-copy-id user@remote.server
```

现在你可以不用密码进入`ssh`服务器了:

```
ssh user@remote.server
```

## 如果我的远程服务器有一个堡垒主机怎么办？

在这种情况下，您可以遵循与上面相同的步骤，将您的 bastion 服务器视为您的本地机器。

首先，登录到您的堡垒服务器并创建一个 RSA 密钥。然后使用`ssh-copy-id`将其复制到您的远程服务器。最后，确认你可以用密码`ssh`进入远程服务器。

# 1.复制文件

一旦设置了`ssh`键，你就可以在没有密码的情况下跨服务器传输文件。

## 1.1 从本地机器复制→远程服务器

## 1.2 从远程服务器复制→本地机器

# 2.跨堡垒服务器移动文件

您可以使用移动文件到远程服务器，即使您中间有一个堡垒节点。

首先，确保使用`ssh-keygen`在堡垒服务器和远程服务器上设置了 RSA 密钥

## 2.1.从本地机器复制→远程服务器

您可以使用`rsync`将文件从本地机器复制到远程服务器。

`-e`标志执行其后的命令。它将首先`ssh`进入堡垒服务器，然后`ssh`进入远程服务器。

## 2.2 从远程服务器复制→本地机器

这将把文件从远程服务器复制到您的本地机器。再次绕过堡垒服务器。

# 2.远程备份

启用 RSA 密钥后，您可以使用 cron 作业每月无缝备份一个远程目录。这里有一个简单的例子。

首先，打开您的 crontab:

```
crontab -e
```

并粘贴以下内容来安排远程备份

这将在每月 1 日凌晨 1:00 将远程目录备份到您的本地计算机。

`rsync`标志是:

*   `-r` →递归备份源目录
*   `-t` →保存文件上的时间戳

如果你不熟悉 cron jobs，我推荐以下视频

# 结论

远程登录服务器的能力比无钥匙进入有更多的优势。您可以无缝地将文件移动到远程服务器，跨堡垒服务器传输数据，并安排在指定时间备份远程目录。

*感谢您阅读和支持媒体作者*

<https://lukegloege.medium.com/membership> 