# 建造一个人工智能系统需要什么

> 原文：<https://towardsdatascience.com/what-it-really-takes-to-build-an-ai-system-bd89b935315f?source=collection_archive---------23----------------------->

## 这比许多人想象的要复杂

![](img/2ff2ca673a1c9f1d65dd4adfcb998fc0.png)

夏洛特·梅坐在[的](https://www.pexels.com/photo/crop-students-doing-research-together-5965676/)上

今天，我们生活在一个前所未有的开源代码的世界。谷歌和脸书等公司已经将他们的内部人工智能解决方案放在公共领域，这是以前闻所未闻的一步。如今也有大量关于如何快速轻松地构建人工智能解决方案的资源。尽管如此，开发一个真实世界的人工智能应用程序以达到生产部署通常所需的质量和可靠性水平仍然需要大量的工作，并且所需的工作量经常被低估，即使是有经验的开发人员和经理也是如此。有一句话叫做“最后 20%的工作占用了 80%的时间”，这句话在人工智能系统中再合适不过了。

在这篇文章中，我将解释为什么人工智能系统需要如此多的努力来构建，以及为什么购买一个现有的系统通常是更好的选择。最好用一个例子来强调这一点，我将提到我曾经为一家汽车制造商工作过的交通标志识别(TSR)系统。TSR 听起来很简单吧？它也经常被用在“在 5 分钟内构建你自己的分类器”的帖子中。好吧，让我们开始吧！

# 数据

## 边缘案例。到处都是边缘案例。

你可能已经猜到了，但是数据通常是时间和金钱的头号消费者。这源于我们对现实世界复杂性的一贯低估，以及即使是最简单的任务也有多少边缘案例。

在我的 TSR 项目中，我们遇到了各种各样的事情。例如，许多高速公路使用 LED 标志，除了看起来与正常标志完全不同之外，很难用相机捕捉到(尝试拍摄计算机屏幕)。为了解决这个问题，我们最终建立了一个模块，它可以覆盖多个帧来捕捉一个标志的完整图像。该系统还必须在各种条件下工作。在晚上，高反射性的标志比周围的环境要亮得多，而当在雾中、雨中或阳光下行驶时，标志几乎看不见。

欧洲的标志经常有一个红色的边界，但在旧的标志上，这个边界几乎可以完全消失。此外，在许多欧洲城市，在标志上贴贴纸也变得很流行。标志也经常被植物或其他路边障碍物遮挡。

![](img/46ad80f51619099e2b2555ac9c0ebe2d.png)

具有各种照明条件、贴纸和年龄的交通标志。作者提供的图片

即使标志在良好的条件下完全可见，也很难从所有的噪音中识别出来。例如，欧洲的卡车背面有限速标签，与路边的标志一样，但指示它们可以开多快。在高速公路十字路口，事情也变得棘手，因为从高速公路本身可以完全看到出口限速标志。如果标志被雪覆盖，而雪恰好是大多数交通标志的颜色，那该怎么办？

真实世界的复杂性不仅限于计算机视觉，我最近写了一篇关于真实世界中的正则表达式的补充文章。

## 好的数据集很难找到

许多模型都是公开发布和开源的，但是用于生产应用的数据集通常被锁起来。一些数据(如信用卡号码)尤其难以获得。事实上，数据护城河是许多人工智能公司的主要竞争优势。

但是，你可能会想，研究人员使用的那些有趣的数据集呢？不幸的是，生产应用程序与研究任务并不完全匹配。即使他们这样做了，研究数据集通常不允许商业使用(如 ImageNet)。在研究数据集中有许多标签错误也是很常见的，这阻碍了高质量模型的开发。一个很好的例子是谷歌的 OpenImages 对象检测数据集。它由 170 万张带有 600 个不同类别标签的图像组成，可用于训练物体检测模型。不幸的是，训练分裂的每个图像的标签不到验证分裂的一半，这意味着大量的例子没有被标记。

TSR 的数据集也是这些问题的牺牲品。免费提供的 TSR 数据集不允许商业使用，包含的例子太少，没有任何实际用途，并且被显著的标记错误所破坏。此外，他们只使用在一个国家的良好光照条件下拍摄的样本。汽车有一个令人讨厌的习惯，那就是进入有不同交通法和不同交通标志设计的新管辖区。

## 创建自定义数据集既昂贵又耗时

你会说，为什么不创建自己的数据集呢？好吧，让我们来看看。第一步是决定标签/输出并收集数据，确保捕捉到每一个边缘案例。然后，重要的是要确保你有良好的验证和测试集，提供一个可靠的，平衡的性能快照。

接下来是数据卫生和格式化，这可能需要很多时间。把这一步做好非常重要。例如，当这一步做得不正确时，Transformer 模型的性能会出现惊人的大幅下降。

对于大多数任务，数据需要被标记。对于我参与的项目，我们总是构建自己的标签工具或修改的开源工具，因为现有的开箱即用的工具从来都不太适合手头的任务。您还需要数据基础架构来管理、版本化和服务您的新数据集。

接下来，您需要让一些人来注释您的数据集。如果你运气好，可以在组织外部共享数据，并且你的任务不需要太多领域知识，你可以外包注释任务。如果没有，雇佣和管理新的注释者团队需要大量的工作。在这两种情况下，注释者培训也是一项工作，因为大多数任务需要一些领域知识，并且通常比单击图像中的对象更复杂。由于这类职位的人员流动率很高，你可能会发现自己比你想象的要多得多。支持注释者的最好方法之一是在您进入注释和反馈培训周期之前，让他们从阅读注释指南开始。创建注释指南本身是一项大量的工作，因为如果定义不正确，许多标签都是模糊的，通常必须包括一个详尽的示例列表，以及一个活的 FAQ 部分，当您发现需要越来越多的澄清来说明人们对单个概念的各种理解时，必须添加到该部分中。

最后，验证您的流程以确保保持高质量的输出也很重要。注释者还需要一致地标记边缘案例，以使模型工作良好。例如，在 Private AI，我们经常会遇到成千上万个关于什么构成敏感信息的小问题。例如，“我喜欢权力的游戏”可能不会识别某个人，但是“我喜欢大卫·林奇 1984 年的《沙丘》”就缩小了范围。

总之，虽然可以很便宜地找到数据注释器，但是构建数据集需要大量宝贵的开发/管理时间。作为替代，你可以去亚马逊的机械土耳其人这样的服务外包部分过程。然而，根据我的经验，这些服务非常昂贵，而且不能提供高质量的标签。除此之外，在真实的项目中，需求/规范通常会发生变化。这意味着随着内部和外部需求(如数据保护法规)的变化，要对数据进行多次检查。

在过去的 5 年里，建立数据集的过程也变得越来越困难。我参与的 TSR 项目是在 GDPR 之前，现在收集数据时隐私是必须的。

# 模特的东西

## 你已经拿到数据了。现在怎么办？

现在我们已经到了这个过程中最明显的部分:构建模型。我们可以使用大量的开源解决方案，但通常需要做大量的工作来修复影响准确性的小错误，考虑大量可能的现实世界输入类型，确保代码在给定新数据和标签的情况下尽可能好地工作，等等。不久前，我编写了自己的 MobileNet V3 实现，因为我所能找到的实现中没有一个与论文中的相匹配——甚至包括 [keras-applications 实现](https://github.com/keras-team/keras-applications/blob/master/keras_applications/mobilenet_v3.py)。同样，在私人人工智能领域，让最先进的模型以 100%的能力运行是一项艰巨的工作。您还需要确保代码允许商业使用——这通常会淘汰许多研究论文实现。

一个生产系统经常依赖于特定领域技术的组合来提高性能，这需要将一堆不同的代码库集成在一起。最后，所有的东西都应该测试，开源代码通常很少测试。毕竟谁喜欢写测试呢？

# 部署

因此，您已经获得了数据并构建了模型——现在是将其投入生产的时候了。这是开源代码通常被忽视的另一个领域，尽管在过去的几年里情况已经有了很大的改善。如果您的应用程序要在云中运行，这可能非常简单(只需将您的 Pytorch 模型放入 Docker 容器中)，但这需要注意:在云中运行 ML 会让*变得非常*昂贵。仅仅几个配备 GPU 的实例每年运行起来就要花费数万美元。您通常会在几个不同的区域运行，以减少延迟。

当集成到移动应用或嵌入式系统中时，事情变得更加复杂。在这些情况下，由于硬件碎片(我看着你，Android)或兼容性问题，你通常被迫在 CPU 上运行。我参与的那个 TSR 项目要求所有的代码都按照一个 30 年前的 C 标准编写，而且只能容纳几兆字节！由于围绕安全认证的问题，外部库的使用也被排除。

无论如何，模型优化通常是必要的。麻烦在于，深度学习推理包的就绪程度要低得多，而且比 Tensorflow 或 Pytorch 等训练工具更难使用。最近，我将一个变压器模型转换为英特尔的 OpenVINO 包。除了英特尔的演示例子不再适用于最新版本的 Pytorch，所以我不得不进入 OpenVINO 的源代码，自己做一些修复。

现实世界的应用也不仅仅是运行人工智能模型。通常需要大量的预处理和后处理，所有这些都需要生产化。特别是，应用程序中的集成可能需要移植到应用程序语言(如 C++或 Java)。在 TSR 项目中，需要大量代码来将检测到的标志与导航地图进行匹配。

最后，值得注意的是，很难找到在这方面有专长的人。

# 正在进行的任务

所以，我们在终点线！您的应用程序现在已经投入生产，正在排序/识别/与小部件对话。现在是持续的维护。

像任何一个软件一样，都会有 bug 和模型预测失败。特别是(尽管您尽了最大努力)，在收集数据以填补初始数据收集阶段遗漏的边缘案例时，将有大量的工作要做。我们生活的世界不是一成不变的，因此需要不断地收集数据并通过系统进行处理。一个很好的例子是新冠肺炎。试着问任何 2019 年前的聊天机器人那是什么。

最后，虽然不是绝对必要的，但定期评估和整合最新的研究进展是一个好的做法。

# 摘要

因此，这就是构建一个生产 ML 应用程序真正需要的东西。正如你所看到的，通常需要一个具有不同专业知识的团队，如数据科学、模型部署来构建一个完整的系统，以及应用领域的专业知识。到 2021 年，对这些技能的需求仍然很大，这意味着建立一个团队可能是一项非常昂贵的工作。让问题变得更加复杂的是员工流动，这可能意味着您的公司刚刚花了大量时间&金钱构建的系统突然变得不可维护，带来了非常现实的业务风险。

因此，希望这能帮助你在获得更多信息的情况下做出“购买还是制造”的决定。这比‘哦，让我们得到 X 型车并打开它’要复杂得多。尽管第三方解决方案只提供了总拥有成本的一小部分，但我亲眼目睹并听到许多公司对每年向亚马逊/微软/谷歌支付数十万美元的云计算费用毫不在意。如果你决定建立自己，确保你有很多应急措施！考虑云计算、招聘和管理等所有成本。

TSR 应用程序呢？我可以说，我对我们的系统运行得如此之好感到非常自豪，但它需要开发人员花很多很多*十年*的时间来实现。

## 进一步阅读

[](/beyond-the-ai-hype-5f72914524af) [## 超越人工智能炒作:你真正需要为你的创业想法考虑什么

### 在任何机器学习项目中弥合期望和现实之间的差距

towardsdatascience.com](/beyond-the-ai-hype-5f72914524af) 

【https://integrate.ai/resources/the-ai-dilemma-build-vs-buy/ 