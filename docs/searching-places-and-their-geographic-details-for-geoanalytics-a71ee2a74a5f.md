# 为 geoanalytics 搜索地点及其地理细节

> 原文：<https://towardsdatascience.com/searching-places-and-their-geographic-details-for-geoanalytics-a71ee2a74a5f?source=collection_archive---------8----------------------->

## Google 的 Places API，结合标准的 Python 包，提供了一种使用名称、地址、电话号码、关键字或类别(餐馆、酒吧、商店等)查找地点的简单方法。).

![](img/923b4228a0a60cb2798a096d43dd0e53.png)

[**Unsplash 上 Lucas Sankey 的照片**](https://unsplash.com/photos/S7-KGCezLvA)

地理数据的作用已经成为理解和解决具体问题的政治和商业决策的重要组成部分。例如，我用它来进行我的可持续性研究，比如识别不同行业、人口统计等的集群。在一个特定的地点，企业参与可持续的商业实践。

基于 GIS 的研究面临的主要挑战之一是难以获得数据。尽管存在许多提供建筑物、商业、人口等细节的标准数据库。在一个领域中，这些数据库的主要问题是它们经常变得过时、不准确和不可靠。谷歌地图或类似的服务可以用来补充现有的数据库与最新的细节。在这篇文章中，我将部署 Google Places API 来搜索地点并检索所需地点的必要信息。

**提醒一句**:虽然谷歌 API 服务每个月都有一些免费配额——这对大多数用户来说都绰绰有余，但在发布 API 密钥之前，用户必须提供支付细节(例如信用卡或借记卡)进行注册。如果您不愿意支付或担心意外的费用，有足够的灵活性和选项来限制免费服务之外的请求/使用，以防止触发任何不良的计费。但是，如果不提供可接受的支付凭证，您就无法使用服务(据我所知)。

使用 Google 的官方 API 在 Python 中查找地点有两种方法。人们可以使用 [Google Place 搜索 API 网页](https://developers.google.com/maps/documentation/places/web-service/search?hl=vi)上的搜索指令直接发出 HTTP URL 请求。你也可以使用 [Googlemaps](https://pypi.org/project/googlemaps/) 包，它提供了用 Python 获取地点细节的用户友好的功能。因为使用标准包装更方便，我们将使用它作为你的练习。在 Google API 中搜索地点有四种不同的方式。

1.  **搜索附近的地方**

邻近搜索在由例如纬度、经度和半径指定的区域内寻找地点。我们可以通过提及关键词(咖啡、素食等)来细化搜索请求。)或[类型的目标场所](https://developers.google.com/places/supported_types)(如餐厅、咖啡厅)。它会在谷歌索引的所有内容中搜索一个位置。两种搜索方式(按关键字或类型)通常会返回不同的结果。示例代码片段如下所示:

这个 API 请求返回每个地方的大部分细节，除了`formatted_address`、`phone number`、`website`和`reviews`。虽然这些详细信息在某些情况下可能是相关的，但附近地点功能提供了我们正在寻找的地点的所有相关和令人满意的信息。

2.**搜索地点**

这个请求非常类似于上面讨论的 nearby search API，但是唯一的区别是它返回稍微不同的细节。例如，查询的响应返回该地点的地址，这在附近搜索功能中是不可用的。

3.**找个地方**

这个请求根据地名、地址或电话号码找到一个地方[。API 请求提供了指定参数的灵活性，我们需要这些参数的数据，如下面的代码所示:](https://github.com/googlemaps/google-maps-services-python/blob/master/googlemaps/places.py)

以这种方式提出请求有两个限制。首先，虽然基于电话号码或地址的查询肯定会返回一个结果，但涉及地名的文本查询可能会找到与我们期望的不同的地方。所以，除非我们也知道该地点的确切名称，否则这个功能有些不可靠，或者需要人工干预来验证地点细节。第二，匹配可能但不一定在目标地理范围内。当在期望的区域内没有找到匹配时，它可以返回来自全球任何地方的最接近的匹配，而不是返回零结果——只要在 Google 数据库中有任何匹配。

**4。获取地点详情**

这是查找已知地点信息的最全面的地点 API。Place Details 查询[返回](https://developers.google.com/maps/documentation/places/web-service/details?hl=vi)一个地方的所有细节——取决于请求的 fields 参数 Google 已经为这个地方建立了索引，包括评论(一个个人帐户最多 4-5 个评论)、网站等。与`find_place`类似，这个 API 请求也提供了指定需要返回什么位置属性的灵活性。唯一的区别是它还返回一些第三个 API 没有的额外细节(如网站、评论)。下面显示了一个示例代码片段:

这个函数的主要缺点是它使用`place_id` 进行搜索，并且在发出请求之前必须有确切的`place_id` 。因此，这个 API 通常与通用搜索 API 结合使用，后者提供基于关键字搜索的`place_id`，然后使用`place_id` 来收集特定于地点的信息。

**潜在应用和结束语**

人们可以通过不同的方式使用这样的 API。例如，在我的例子中，API 允许我快速检索购物中心、咖啡店、餐馆、酒吧等的位置。附近有一个特定的办公室、大学或住宅区，这将有助于我了解城市经济和发展模式的演变。这些商业密度和发展模式也可能揭示出基础设施、商业、商店、学校等方面的不平等。在不同的街区。找到这样的集群将有助于在城市或社区层面制定促进区域可持续发展的政策。

这篇博客的主要目的是介绍 Python 中 Google Places API 的特性。用于地理信息的 Google APIs 为应用程序开发人员和其他领域专家(如地理信息研究人员)提供了各种好处。