# é«˜çº§ NumPy:25 ä¸ªå›¾è§£ç»ƒä¹ æŒæ¡æ­¥å¹…æŠ€å·§

> åŸæ–‡ï¼š<https://towardsdatascience.com/advanced-numpy-master-stride-tricks-with-25-illustrated-exercises-923a9393ab20?source=collection_archive---------2----------------------->

![](img/4cdd3ea655ab78fcf08feff7b699c737.png)

## åŒ…æ‹¬æ¥è‡ª StackOverflow çš„ä»£ç ã€è§£é‡Šå’Œé—®é¢˜

*åœ¨æ¡Œé¢ä¸Šç”¨ Chrome æµè§ˆå™¨è§‚çœ‹æ•ˆæœæœ€ä½³*

*å˜æ›´æ—¥å¿—:
2022 å¹´ 12 æœˆ 31 æ—¥:ä½¿ç”¨ Medium çš„æ–°ä»£ç å—è¿›è¡Œè¯­æ³•çªå‡ºæ˜¾ç¤º
2022 å¹´ 1 æœˆ 6 æ—¥:æ ¹æ®æ¥è‡ª*[*Sirouan Nouriddine*](https://medium.com/u/6fb228d2ed8f?source=post_page-----923a9393ab20--------------------------------) *2022 å¹´ 1 æœˆ 5 æ—¥:ä¿®å¤é”™åˆ«å­—å¹¶æé«˜æ¸…æ™°åº¦
2021 å¹´ 12 æœˆ 30 æ—¥:ä» NumPy 1.20.0 å¼€å§‹ï¼Œæœ‰ä¸€ä¸ª sliding_window_view APIï¼Œå®ƒä¹Ÿå¯ä»¥ä½œä¸ºæ›´é«˜çº§åˆ«çš„ API æ›´å¤š*è§ [*æ­¤å¤„*](https://numpy.org/doc/stable/reference/generated/numpy.lib.stride_tricks.sliding_window_view.html?highlight=as_strided#numpy-lib-stride-tricks-sliding-window-view)

**(æ­¤å¤„è·³è½¬åˆ°ä¹ é¢˜*<#4838>**)***

**ä»–å¯ä»¥è¢«çœ‹ä½œæ˜¯è®¿é—®å’Œæ“ä½œ NumPy `[ndarray](https://numpy.org/doc/stable/reference/arrays.ndarray.html)`çš„é€šå¸¸æ–¹å¼çš„æ‰©å±•ï¼Œç»™äºˆç”¨æˆ·æ›´å¤šçš„çµæ´»æ€§æ¥æ§åˆ¶æœ€ç»ˆçš„ NumPy [è§†å›¾](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.view.html)ã€‚è™½ç„¶è¿™æ˜¯ä¸€ä¸ªæ·±å¥¥çš„åŠŸèƒ½ï¼Œä½†ä¸€ä¸ªç‰¹åˆ«å®ç”¨çš„ç”¨æ³•æ˜¯å½“æ¶‰åŠåˆ°*æ»‘åŠ¨çª—å£*æˆ–*æ»šåŠ¨ç»Ÿè®¡*æ—¶ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å®Œæˆä½¿ç”¨è¯¥ API çš„ 25 ä¸ªä¸åŒçš„ç»ƒä¹ (å¹¶ä¸æˆ‘ä»¬é€šå¸¸çš„åšæ³•è¿›è¡Œæ¯”è¾ƒ)ã€‚**

**å¯¹äºæœ¬æ–‡ï¼Œå»ºè®®è¯»è€…å…·å¤‡ Pythonã€NumPyã€`[numpy.dtype](https://numpy.org/devdocs/user/basics.types.html)`ã€`[numpy.ndarray.strides](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.strides.html)`å’Œ`[numpy.ndarray.itemsize](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.itemsize.html)`çš„ä¸­çº§çŸ¥è¯†ã€‚æœ‰å…³ NumPy æ•°ç»„å’Œæ­¥é•¿çš„å¿«é€Ÿä»‹ç»ï¼Œè¯·å‚è§ğŸ’¡**ä¸‹é¢ä¸€ç‚¹èƒŒæ™¯**ã€‚**

**ç»ƒä¹ çš„éš¾åº¦é€æ¸å¢åŠ ï¼ŒæŒ‰ä»¥ä¸‹é¡ºåºç¼–æ’:**

*   **è¿™ä¸ªé—®é¢˜ç”¨ä¸€ä¸ªå›¾æ¥è¯´æ˜ï¼Œå›¾ä¸­æœ‰ NumPy æ•°ç»„è¾“å…¥å’Œé¢„æœŸçš„è¾“å‡ºï¼Œå³ NumPy è§†å›¾ã€‚å‡è®¾æ‚¨è¯»å–å…ƒç´ çš„æ–¹å¼æ˜¯è¿ç»­çš„ã€‚`itemsize`å› é—®é¢˜è€Œå¼‚ã€‚**
*   **ç­”æ¡ˆæ˜¯â€”â€”`strides`å’Œ`shape`å°†è¢«ç”¨ä½œ`numpy.lib.stride_tricks.as_strided`ä¸­çš„å‚æ•°ï¼Œä»¥è·å¾—æœ€ç»ˆçš„æ•°å­—è§†å›¾ã€‚**
*   **è§£é‡Š**
*   **ä»£ç ï¼Œå…¶ä¸­`as_strided`æ˜¯ä»è¿™ä¸ª import è¯­å¥å¯¼å…¥çš„åç§°ç©ºé—´:
    `**from** numpy.lib.stride_tricks **import** as_strided`**

> *****ğŸ’¡ä¸€ç‚¹èƒŒæ™¯*****
> 
> ***å¦‚ä½•ä»ä¸€ä¸ªå›ºå®šå¤§å°çš„å…ƒç´ å—ä¸­è®¿é—®ä¸€ä¸ªç‰¹å®šçš„é¡¹ç›®ï¼Œè¿™äº›å…ƒç´ (I)æ˜¯è¿ç»­æ”¾ç½®çš„ï¼Œå¹¶ä¸”(ii)è¢«ç»„ç»‡æˆåµŒå¥—çš„å­ç»„ï¼Ÿç­”æ¡ˆ:* ***å¤§è¸æ­¥*** *ã€‚æˆ‘åˆšæ‰ç®€å•æè¿°çš„æ˜¯ä¸€ä¸ª NumPy çš„ N ç»´æ•°ç»„(* `*ndarray*` *)æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªå«åš* [*çš„ç®—æ³•ï¼Œæ­¥è¿›ç´¢å¼•æ–¹æ¡ˆ*](https://numpy.org/doc/stable/reference/arrays.ndarray.html#internal-memory-layout-of-an-ndarray) *è¿åŒæ­¥è·ä¸€èµ·éå†å®ƒã€‚***
> 
> **å…³äº NumPy æ•°ç»„ï¼Œè¿™é‡Œæœ‰ 4 ä¸ªä½ åº”è¯¥çŸ¥é“çš„è¦ç‚¹ã€‚**
> 
> ***1)NumPy æ•°ç»„ä¸­çš„å…ƒç´ å ç”¨å†…å­˜ã€‚NumPy æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ç»Ÿä¸€å ç”¨* n *ä¸ªå­—èŠ‚ã€‚ä¾‹å¦‚ï¼Œæ•°æ®ç±»å‹ä¸º* `*np.int64*` *çš„æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ å ç”¨ 8 ä¸ªå­—èŠ‚ã€‚* `*np.ndarray.itemsize*` *æ‰¾å‡ºç‰©å“å°ºå¯¸ã€‚***
> 
> ***2)NumPy æ•°ç»„ä¸­çš„å…ƒç´ åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­å­˜å‚¨çš„ã€‚è¿™æ„å‘³ç€å®ƒä»¬æ˜¯å¹¶æ’å­˜å‚¨çš„(ä¸åƒ Python åˆ—è¡¨ä¸­çš„å…ƒç´ )ã€‚***
> 
> ***3)æœ‰ä¸€æ¡ä¿¡æ¯å«åš shapeï¼Œä½ å¯èƒ½å·²ç»çŸ¥é“äº†ï¼Œå®ƒå®šä¹‰äº†è¿™ä¸ªæ•°ç»„å¯¹äºæ¯ä¸ªç»´åº¦æœ‰å¤šå¤§ã€‚è¦è®¿é—®è¿™äº›ä¿¡æ¯ï¼Œè¯·é€‰æ‹©* `*np.ndarray.shape*` *ã€‚***
> 
> ***4)è¿˜æœ‰å¦ä¸€æ¡ä¿¡æ¯å«åšæ­¥å¹…ï¼Œå®ƒè¡¨ç¤ºè¦è·³åˆ°ç»´åº¦ä¸­ä¸‹ä¸€ä¸ªå€¼çš„å­—èŠ‚æ•°ã€‚è¦è®¿é—®è¿™äº›ä¿¡æ¯ï¼Œè¯·é€‰æ‹©* `*np.ndarray.strides*` *ã€‚***
> 
> ***åˆ©ç”¨è¿™ 4 æ¡ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ä»¥è·¨è·ä¸ºç³»æ•°çš„ç»´åº¦çš„çº¿æ€§ç»„åˆæ¥æ‰¾åˆ°å…ƒç´ çš„å­˜å‚¨ä½ç½®ã€‚æ›´æ·±å…¥çš„è§£é‡Šï¼Œå‚è€ƒæˆ‘ä¸‹é¢* *çš„å‚è€ƒæ–‡çŒ®* [*ã€‚*](#6c04)**

# **ç»ƒä¹ **

1.  **[åˆ‡ç‰‡å‰ 3 ä¸ªå…ƒç´ ](#176a)**
2.  **[åˆ‡ç‰‡å‰ 8 ä¸ªå…ƒç´ ](#9c37)**
3.  **[å±•å¹³ä¸€ä¸ª 2D é˜µåˆ—](#306b)**
4.  **[æ¯éš”ä¸€ä¸ªå…ƒç´ è·³è¿‡ä¸€ä¸ª](#cb6a)**
5.  **[åˆ‡ç‰‡ç¬¬ä¸€åˆ—](#cbd9)**
6.  **[åˆ‡ä¸€æ¡å¯¹è§’çº¿](#e7ad)**
7.  **[é‡å¤ç¬¬ä¸€ä¸ªå…ƒç´ ](#233c)**
8.  **[ç®€å•çš„ 2D åˆ‡ç‰‡](#a323)**
9.  **[åˆ‡æˆé”¯é½¿å½¢](#7108)**
10.  **[ç¨€ç–åˆ‡ç‰‡](#12e7)**
11.  **[è½¬ç½®ä¸€ä¸ª 2D æ•°ç»„](#4651)**
12.  **[é‡å¤ç¬¬ä¸€åˆ— 4 æ¬¡](#93bc)**
13.  **[å°† 1D é˜µåˆ—é‡å¡‘ä¸º 2D é˜µåˆ—](#0dd0)**
14.  **[æ»‘åŠ¨ä¸€ä¸ª 1D çª—å£](#4f4d)**
15.  **[æ»‘åŠ¨ä¸€æ‰‡ 2D çª—ï¼Œç„¶åå±•å¹³](#0dba)**
16.  **[ä» 3D æ•°ç»„ä¸­æŠ˜å ä¸€ä¸ªè½´](#407e)**
17.  **[2 ä¸ªè§’](#a4eb)**
18.  **[äº¤é”™åˆ‡ç‰‡](#74c1)**
19.  **[é‡å¤ä¸€æ¬¡ 2D é˜µåˆ—](#5b85)**
20.  **[3D è½¬ç½®](#9e01)**
21.  **[æ»‘åŠ¨ä¸€ä¸ª 2D çª—å£](#a3f5)**
22.  **[å°† 1D é˜µåˆ—é‡å¡‘ä¸º 3D é˜µåˆ—](#79a7)**
23.  **[è½½ç»ç‰‡ 2D æ„Ÿå—é‡è¿›è¡Œå·ç§¯](#1f28)**
24.  **[é‡å¤ä¸€ä¸ª 3D å¼ é‡](#231a)**
25.  **[å°† 1D é˜µé‡å¡‘ä¸º 4D é˜µ](#345b)**

# **1D æ¼”ä¹ **

## **1)åˆ‡ç‰‡å‰ 3 ä¸ªå…ƒç´ **

**![](img/9176cf6c28d45862e74020487ea50d50.png)**

**è¾“å…¥é¡¹å¤§å°: **1 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **5** ï¼Œ **1** )**

****å›ç­”****

```
**strides = (**1**,)
  shape = (**3**,)**
```

> ***ğŸ’¡* ***è§£é‡Š*** *è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å³ 1 â†’ 2ï¼Œ2 â†’ 3)åŸæ¥éƒ½æ˜¯* ***1*** *å­—èŠ‚ç›¸éš”(=1 å…ƒç´ ç›¸éš”* Ã— *1* *å­—èŠ‚)è¾“å…¥ä¸­çš„ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***3*** *ã€‚***

****ä»£ç ****

```
**>>> x = np.asarray(range(1,26), np.int8).reshape(5,5)
>>> as_strided(x, shape=(3,), strides=(1,))
array([1, 2, 3], dtype=int8)**
```

**ä¸â€¦ç±»ä¼¼**

```
**>>> x[0,:3]
array([1, 2, 3], dtype=int8)**
```

## **2)åˆ‡ç‰‡å‰ 8 ä¸ªå…ƒç´ **

**![](img/19226bdd640dfdb332ef19940ceef741.png)**

**è¾“å…¥é¡¹å¤§å°: **1 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **5** ï¼Œ **1** )**

****å›ç­”****

```
**strides = (**1**,)
  shape = (**8**,)**
```

> ***ğŸ’¡* ***è§£é‡Š*** *è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 2ï¼Œ2 â†’ 3ï¼Œ6 â†’ 7)åŸæœ¬æ˜¯* ***è¾“å…¥ä¸­ç›¸éš” 1*** *å­—èŠ‚(=1 ä¸ªå…ƒç´ ç›¸éš”* Ã— *1* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***8*** *ã€‚***

****ä»£ç ****

```
**>>> x = np.asarray(range(1,26), np.int8).reshape(5,5)
>>> as_strided(x, shape=(8,), strides=(1,))
array([1, 2, 3, 4, 5, 6, 7, 8], dtype=int8)**
```

**ä¸â€¦ç±»ä¼¼**

```
**>>> x[0,:8]
array([1, 2, 3, 4, 5, 6, 7, 8], dtype=int8)**
```

## **3)å±•å¹³ 2D é˜µåˆ—**

**![](img/40ceb8ae8751f0c68b3696162a128972.png)**

**è¾“å…¥é¡¹å¤§å°: **2 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **10** ï¼Œ **2** )**

****å›ç­”****

```
**strides = (**2**,)
  shape = (**25**,)**
```

> ***ğŸ’¡* ***è§£é‡Š*** *è¾“å‡ºä¸­çš„ç›¸é‚»å…ƒç´ (å¦‚ 1 â†’ 2ï¼Œ2 â†’ 3ï¼Œ23 â†’ 24ï¼Œ24 â†’ 25)åŸæœ¬æ˜¯* ***2*** *å­—èŠ‚ç›¸éš”(=1 ä¸ªå…ƒç´ ç›¸éš”* Ã— *2* *å­—èŠ‚)è¾“å…¥ä¸­çš„ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯****25****ã€‚***

****ä»£ç ****

```
**>>> x = np.asarray(range(1,26), np.int16).reshape(5,5)
>>> as_strided(x, shape=(25,), strides=(2,))
array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10,
       11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
       21, 22, 23, 24, 25], dtype=int16)**
```

**ä¸â€¦ç±»ä¼¼**

```
**>>> x.ravel()
array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10,
       11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
       21, 22, 23, 24, 25], dtype=int16)**
```

## **4)è·³è¿‡æ‰€æœ‰å…¶ä»–å…ƒç´ **

**![](img/d6aaa0f6eba624a8a136800c53c78e20.png)**

**è¾“å…¥é¡¹å¤§å°: **1 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **5** ï¼Œ **1** )**

****å›ç­”****

```
**strides = (**2**,)
  shape = (**3**,)**
```

> ***ğŸ’¡* ***è§£é‡Š*** *è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å³ 1 â†’ 3ï¼Œ3 â†’ 5)åŸæœ¬æ˜¯****2****å­—èŠ‚ç›¸éš”(=2 ä¸ªå…ƒç´ ç›¸éš”* Ã— *1* *å­—èŠ‚)çš„è¾“å…¥ã€‚è¿™ä¸ªå°ºå¯¸çš„å½¢çŠ¶æ˜¯****3****ã€‚***

****ä»£ç ****

```
**>>> x = np.asarray(range(1,26), np.int8).reshape(5,5)
>>> as_strided(x, shape=(3,), strides=(2,))
array([1, 3, 5], dtype=int8)**
```

**ä¸â€¦ç±»ä¼¼**

```
**>>> x[0,::2]
array([1, 3, 5], dtype=int8)**
```

## **5)åˆ‡ç‰‡ç¬¬ä¸€åˆ—**

**![](img/f9dfc29fbf1dd980345c6ae1e7324569.png)**

**è¾“å…¥é¡¹å¤§å°: **8 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **40** ï¼Œ **8** )**

****å›ç­”****

```
**strides = (**40**,)
  shape = (**4**,)**
```

> ***ğŸ’¡* ***è§£é‡Š*** *è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å³ 1 â†’ 6ï¼Œ6 â†’ 11ï¼Œ11 â†’ 16)è¢«åŸæœ¬**40*å­—èŠ‚ç›¸éš”(=5 ä¸ªå…ƒç´ ç›¸éš”* Ã— *8* *å­—èŠ‚)è¾“å…¥ä¸­ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***4*** *ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,26), np.int64).reshape(5,5)
>>> as_strided(x, shape=(4,), strides=(40,))
array([ 1,  6, 11, 16])***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> x[:4,0]
array([ 1,  6, 11, 16])***
```

## ***6)åˆ‡ä¸€æ¡å¯¹è§’çº¿***

***![](img/9c0255807a560e8b454f87ec91216246.png)***

***è¾“å…¥é¡¹å¤§å°: **8 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **40** ï¼Œ **8** )***

*****å›ç­”*****

```
***strides = (**48**,)
  shape = ( **5**,)***
```

> ****ğŸ’¡* ***è§£é‡Š*** *è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å³ 1 â†’ 7ï¼Œ7 â†’ 13ï¼Œ13 â†’ 19ï¼Œ19 â†’ 25)åŸæœ¬æ˜¯* ***48*** *å­—èŠ‚ç›¸éš”(=6 ä¸ªå…ƒç´ ç›¸éš”* Ã— *8 ä¸ªå­—èŠ‚)è¾“å…¥ä¸­çš„ã€‚è¿™ä¸ªå°ºå¯¸çš„å½¢çŠ¶æ˜¯* ***5*** *ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,26), np.int64).reshape(5,5)
>>> as_strided(x, shape=(5,), strides=(48,))
array([ 1,  7, 13, 19, 25])***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> x.diagonal()
array([ 1,  7, 13, 19, 25])***
```

## ***7)é‡å¤ç¬¬ä¸€ä¸ªå…ƒç´ ***

***![](img/9c4386651d4e44e48d5d26da98e0645a.png)***

***è¾“å…¥é¡¹å¤§å°: **8 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **40** ï¼Œ **8** )***

*****å›ç­”*****

```
***strides = (**0**,)
  shape = (**5**,)***
```

> ****ğŸ’¡* ***è§£é‡Š*** *è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å³ 1 â†’ 1)åŸæœ¬æ˜¯* ***0*** *å­—èŠ‚ç›¸éš”(=0 ä¸ªå…ƒç´ ç›¸éš”*Ã—8*å­—èŠ‚)è¾“å…¥ä¸­çš„ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***5*** *ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,26), np.int64).reshape(5,5)
>>> as_strided(x, shape=(5,), strides=(0,))
array([ 1, 1, 1, 1, 1])***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> np.broadcast_to(x[0,0], (5,))
array([1, 1, 1, 1, 1])***
```

# ***2D æ¼”ä¹ ***

## ***8)ç®€å•çš„ 2D åˆ‡ç‰‡***

***![](img/c45364ef02fb4b8467e8ff132e82f5a9.png)***

***è¾“å…¥é¡¹å¤§å°: **8 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **40** ï¼Œ **8** )***

*****å›ç­”*****

```
***strides = (**40**,**8**)
  shape = ( **3**,**4**)***
```

> ****ğŸ’¡* ***è§£é‡Š******
> 
> ****è¾“å‡ºçš„å·¦å³å°ºå¯¸(axis=* `-1` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 2ï¼Œ2 â†’ 3ï¼Œ8 â†’ 9)åŸæœ¬æ˜¯è¾“å…¥ä¸­çš„****8****å­—èŠ‚(=1 ä¸ªå…ƒç´ ä¹‹å¤–çš„* Ã— *8* *å­—èŠ‚)ã€‚è¿™ä¸ªå°ºå¯¸çš„å½¢çŠ¶æ˜¯****4****ã€‚****
> 
> ****è¾“å‡ºçš„å·¦å³ç»´åº¦(axis=* `-2` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 6ï¼Œ2 â†’ 7ï¼Œ9 â†’ 14)åŸæ¥åœ¨è¾“å…¥ä¸­ç›¸éš”* ***40*** *å­—èŠ‚(=5 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *8* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***3*** *ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,26), np.int64).reshape(5,5)
>>> as_strided(x, shape=(3,4), strides=(40,8))
array([[ 1,  2,  3,  4],
       [ 6,  7,  8,  9],
       [11, 12, 13, 14]])***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> x[:3,:4]
array([[ 1,  2,  3,  4],
       [ 6,  7,  8,  9],
       [11, 12, 13, 14]])***
```

## ***9)åˆ‡ä¸€ä¸ªé”¯é½¿å½¢***

***![](img/1d4afe3c893a98c161705a8959e84348.png)***

***è¾“å…¥é¡¹å¤§å°: **8 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **40** ï¼Œ **8** )***

*****å›ç­”*****

```
***strides = (**48**,**8**)
  shape = ( **4**,**2**)***
```

> ****ğŸ’¡* ***è§£è¯´******
> 
> ****è¾“å‡ºçš„å·¦å³ç»´åº¦(axis=* `-1` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (ä¾‹å¦‚ 1 â†’ 2ï¼Œ7 â†’ 8ï¼Œ13 â†’ 14ï¼Œ19 â†’ 20)åŸæœ¬æ˜¯è¾“å…¥ä¸­* ***8*** *å­—èŠ‚(=1 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *8* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***2*** *ã€‚****
> 
> ****è¾“å‡ºçš„å·¦å³ç»´åº¦(axis=* `-2` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 7ï¼Œ2 â†’ 8ï¼Œ13 â†’ 19)åŸæœ¬æ˜¯è¾“å…¥ä¸­* ***48*** *å­—èŠ‚(=6 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *8* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***4*** *ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,26), np.int64).reshape(5,5)
>>> as_strided(x, shape=(4,2), strides=(48,8))
array([[ 1,  2],
       [ 7,  8],
       [13, 14],
       [19, 20]])***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> # this may not be achieved concisely***
```

## ***10)ç¨€ç–åˆ‡ç‰‡***

***![](img/b71751589a68f3304033dc215125e05c.png)***

***è¾“å…¥é¡¹å¤§å°: **8 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **40** ï¼Œ **8** )***

*****å›ç­”*****

```
***strides = (**80**,**16**)
  shape = ( **3**, **3**)***
```

> ****ğŸ’¡* ***è§£è¯´******
> 
> ****è¾“å‡ºçš„å·¦å³ç»´åº¦(axis=* `-1` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (ä¾‹å¦‚ 1 â†’ 3ï¼Œ21 â†’ 23ï¼Œ13 â†’ 15)åŸæ¥æ˜¯è¾“å…¥ä¸­****16****å­—èŠ‚(=2 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *8* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯****3****ã€‚****
> 
> ****è¾“å‡ºçš„å·¦å³ç»´åº¦(axis=* `-2` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 11ï¼Œ13 â†’ 23ï¼Œ15 â†’ 25)åŸæ¥åœ¨è¾“å…¥ä¸­ç›¸éš”* ***80*** *å­—èŠ‚(=ç›¸éš” 10 ä¸ªå…ƒç´ * Ã— *8* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***3*** *ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,26), np.int64).reshape(5,5)
>>> as_strided(x, shape=(3,3), strides=(80,16))
array([[ 1,  3,  5],
       [11, 13, 15],
       [21, 23, 25]])***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> x[::2,::2]
array([[ 1,  3,  5],
       [11, 13, 15],
       [21, 23, 25]])***
```

## ***11)è½¬ç½® 2D é˜µåˆ—***

***![](img/2a182c1e5ee2b1761a7425c7a49a54ed.png)***

***è¾“å…¥é¡¹å¤§å°: **1 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **5** ï¼Œ **1** )***

*****å›ç­”*****

```
***strides = (**1**,**5**)
  shape = (**3**,**3**)***
```

> ****ğŸ’¡* ***è§£è¯´******
> 
> ****è¾“å‡ºçš„å·¦å³ç»´åº¦(axis=* `-1` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 6ï¼Œ7 â†’ 12ï¼Œ3 â†’ 8)åŸæœ¬æ˜¯è¾“å…¥ä¸­***ç›¸éš” 5 ä¸ªå­—èŠ‚(=5 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *1* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***3*** *ã€‚*****
> 
> ****è¾“å‡ºçš„ä»ä¸Šåˆ°ä¸‹çš„ç»´åº¦(axis=* `-2` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 2ï¼Œ2 â†’ 3ï¼Œ11 â†’ 12)åŸæ¥åœ¨è¾“å…¥ä¸­æ˜¯* ***1*** *å­—èŠ‚(=1 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *1* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***3*** *ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,26), np.int8).reshape(5,5)
>>> as_strided(x, shape=(3,3), strides=(1,5))
array([[ 1,  6, 11],
       [ 2,  7, 12],
       [ 3,  8, 13]], dtype=int8)***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> x[:3,:3].T
array([[ 1,  6, 11],
       [ 2,  7, 12],
       [ 3,  8, 13]], dtype=int8)***
```

## ***12)é‡å¤ç¬¬ä¸€åˆ— 4 æ¬¡***

***![](img/733baa534cfe97983503c5d99cebca86.png)***

***è¾“å…¥é¡¹å¤§å°: **4 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **20** ï¼Œ **4** )***

*****å›ç­”*****

```
***strides = (**20**,**0**)
  shape = ( **5**,**4**)***
```

> ****ğŸ’¡* ***è§£è¯´******
> 
> ****è¾“å‡ºçš„å·¦å³ç»´åº¦(axis=* `-1` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 1ï¼Œ6 â†’ 6ï¼Œ16 â†’ 16)åŸæ¥æ˜¯è¾“å…¥ä¸­****0****å­—èŠ‚(=0 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *4* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯****4****ã€‚****
> 
> ****è¾“å‡ºçš„ä¸Šä¸‹ç»´(axis=* `-2` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 6ï¼Œ6 â†’ 11ï¼Œ11 â†’ 16)åœ¨è¾“å…¥ä¸­åŸæœ¬æ˜¯* ***ç›¸éš” 20*** *å­—èŠ‚(=ç›¸éš” 5 ä¸ªå…ƒç´ * Ã— *4 å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***5*** *ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,26), np.int32).reshape(5,5)
>>> as_strided(x, shape=(5,4), strides=(20,0))
array([[ 1,  1,  1,  1],
       [ 6,  6,  6,  6],
       [11, 11, 11, 11],
       [16, 16, 16, 16],
       [21, 21, 21, 21]], dtype=int32)***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> np.broadcast_to(x[:,0,None], (5,4))
array([[ 1,  1,  1,  1],
       [ 6,  6,  6,  6],
       [11, 11, 11, 11],
       [16, 16, 16, 16],
       [21, 21, 21, 21]], dtype=int32)***
```

## ***13)å°† 1D é˜µåˆ—é‡å¡‘ä¸º 2D é˜µåˆ—***

***![](img/cae27d14e007b7cac132384a8a10f029.png)***

***è¾“å…¥é¡¹å¤§å°: **8 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **8** ï¼Œ)***

*****å›ç­”*****

```
***strides = (**24**,**8**)
  shape = ( **4**,**3**)***
```

> ****ğŸ’¡* ***è§£è¯´******
> 
> ****è¾“å‡ºçš„å·¦å³å°ºå¯¸(axis=* `-1` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 2ï¼Œ2 â†’ 3ï¼Œ7 â†’ 8ï¼Œ11 â†’ 12)åŸæœ¬æ˜¯è¾“å…¥ä¸­* ***8*** *å­—èŠ‚(=1 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *8* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***3*** *ã€‚****
> 
> ****è¾“å‡ºçš„ä¸Šä¸‹ç»´(axis=* `-2` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 4ï¼Œ4 â†’ 7ï¼Œ7 â†’ 10)åŸæœ¬åœ¨è¾“å…¥ä¸­ç›¸éš”* ***24*** *å­—èŠ‚(=3 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *8* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***4*** *ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,13), np.int64)
>>> as_strided(x, shape=(4,3), strides=(24,8))
array([[ 1,  2,  3],
       [ 4,  5,  6],
       [ 7,  8,  9],
       [10, 11, 12]])***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> x.reshape(4,3)
array([[ 1,  2,  3],
       [ 4,  5,  6],
       [ 7,  8,  9],
       [10, 11, 12]])***
```

## ***14)æ»‘åŠ¨ 1D çª—***

***æ”¹ç¼–è‡ª StackOverflow å¸–å­[ [1](#6c04) ]ã€‚ç±»ä¼¼äº[ [2](#6c04) å’Œ[ [3](#6c04) ]ã€‚***

***![](img/f4119f6705cd1dc813a4bfd486c1f71d.png)***

***è¾“å…¥é¡¹å¤§å°: **1 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **1** ï¼Œ)***

*****å›ç­”*****

```
***strides = (**1**,**1**)
  shape = (**8**,**3**)***
```

> ****ğŸ’¡* ***è§£è¯´******
> 
> ****è¾“å‡ºçš„å·¦å³ç»´åº¦(axis=* `-1` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 2ï¼Œ3 â†’ 4ï¼Œ4 â†’ 5)åŸæ¥æ˜¯è¾“å…¥ä¸­****1****å­—èŠ‚(=1 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *1* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯****3****ã€‚****
> 
> ****è¾“å‡ºçš„ä¸Šä¸‹ç»´(axis=* `-2` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å³ 1 â†’ 2ï¼Œ2 â†’ 3ï¼Œ4 â†’ 5ï¼Œâ€¦ï¼Œ7 â†’ 8)åœ¨è¾“å…¥ä¸­åŸæœ¬æ˜¯* ***1*** *å­—èŠ‚ç›¸éš”(=1 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *1* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***8*** *ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,26), np.int8)
>>> as_strided(x, shape=(8,3), strides=(1,1))
array([[ 1,  2,  3],
       [ 2,  3,  4],
       [ 3,  4,  5],
       [ 4,  5,  6],
       [ 5,  6,  7],
       [ 6,  7,  8],
       [ 7,  8,  9],
       [ 8,  9, 10]], dtype=int8)***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> # this may not be achieved concisely***
```

## ***15)æ»‘åŠ¨ 2D çª—ï¼Œç„¶åå°†å…¶å‹å¹³***

***æ¥è‡ª StackOverflow å¸–å­[ [4](#6c04) ]çš„é—®é¢˜ã€‚***

***![](img/d121642e88a7e578b365eec08f2ac937.png)***

***è¾“å…¥é¡¹å¤§å°: **1 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **2** ï¼Œ **1** )***

*****å›ç­”*****

```
***strides = (**2**,**1**)
  shape = (**4**,**6**)***
```

> ****ğŸ’¡* ***è§£è¯´******
> 
> ****è¾“å‡ºçš„å·¦å³å°ºå¯¸(axis=* `-1` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 0 â†’ 1ï¼Œ1 â†’ 10ï¼Œ31 â†’ 40)åŸæ¥æ˜¯è¾“å…¥ä¸­* ***1*** *å­—èŠ‚(=1 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *1* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***6*** *ã€‚****
> 
> ****è¾“å‡ºçš„ä¸Šä¸‹ç»´(axis=* `-2` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 0 â†’ 10ï¼Œ10 â†’ 20ï¼Œ41 â†’ 51)åŸæ¥åœ¨è¾“å…¥ä¸­æ˜¯* ***2*** *å­—èŠ‚(=2 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *1 å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***4*** *ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(
...         [0,1,10,11,20,21,30,31,40,41,50,51],
...         np.int8).reshape(6,2)
>>> as_strided(x, shape=(4,6), strides=(2,1))
array([[ 0,  1, 10, 11, 20, 21],
       [10, 11, 20, 21, 30, 31],
       [20, 21, 30, 31, 40, 41],
       [30, 31, 40, 41, 50, 51]], dtype=int8)***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> # this may not be achieved concisely***
```

## ***16)ä» 3D æ•°ç»„ä¸­æŠ˜å ä¸€ä¸ªè½´***

***![](img/2228cf78360ff8bb51719b4dca72b4ba.png)***

***è¾“å…¥é¡¹å¤§å°: **1 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **4** ã€ **2** ã€ **1** )***

*****å›ç­”*****

```
***strides = (**4**,**1**)
  shape = (**3**,**4**)***
```

> ****ğŸ’¡* ***è§£è¯´******
> 
> ****è¾“å‡ºçš„å·¦å³ç»´åº¦(axis=* `-1` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 2ï¼Œ3 â†’ 4ï¼Œ4 â†’ 5)åŸæ¥åœ¨è¾“å…¥ä¸­æ˜¯****1****å­—èŠ‚(=1 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *1* *å­—èŠ‚)ã€‚è¿™ä¸ªå°ºå¯¸çš„å½¢çŠ¶æ˜¯****4****ã€‚****
> 
> ****è¾“å‡ºçš„ä¸Šä¸‹ç»´(axis=* `-2` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å³ 1 â†’ 5ï¼Œ5 â†’ 9ï¼Œ2 â†’ 6ï¼Œ6 â†’ 10)åŸæœ¬åœ¨è¾“å…¥ä¸­ç›¸éš”* ***4*** *å­—èŠ‚(=ç›¸éš” 4 ä¸ªå…ƒç´ * Ã— *1* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***3*** *ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,13), np.int8).reshape(3,2,2)
>>> as_strided(x, shape=(3,4), strides=(4,1))
array([[ 1,  2,  3,  4],
       [ 5,  6,  7,  8],
       [ 9, 10, 11, 12]], dtype=int8)***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> x.reshape(3,4)
array([[ 1,  2,  3,  4],
       [ 5,  6,  7,  8],
       [ 9, 10, 11, 12]], dtype=int8)***
```

# ***3D ç»ƒä¹ ***

## ***17)ä¸¤ä¸ªè§’***

***![](img/35911caed941ebebc62df467a84fd94b.png)***

***è¾“å…¥é¡¹å¤§å°: **2 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **10** ï¼Œ **2** )***

*****å›ç­”*****

```
***strides = (**30**,**10**, **2**)
  shape = ( **2**, **2**, **2**)***
```

> ****ğŸ’¡* ***è§£è¯´******
> 
> ****è¾“å‡ºçš„å·¦å³ç»´åº¦(axis=* `-1` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å³ 1 â†’ 2ï¼Œ6 â†’ 7ï¼Œ16 â†’ 17ï¼Œ21 â†’ 22)åŸæ¥åœ¨è¾“å…¥ä¸­æ˜¯* ***2*** *å­—èŠ‚(=1 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *2* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***2*** *ã€‚****
> 
> ****è¾“å‡ºçš„ä¸Šä¸‹ç»´åº¦(axis=* `-2` *):
> è¾“å‡ºä¸­çš„ç›¸é‚»å…ƒç´ (å³ 1 â†’ 6ï¼Œ2 â†’ 7ï¼Œ16 â†’ 21ï¼Œ17 â†’ 22)åŸæœ¬æ˜¯* ***10*** *å­—èŠ‚çš„é—´éš”(=5 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *2* *å­—èŠ‚)è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***2*** *ã€‚****
> 
> ****è¾“å‡ºçš„æ¡†åˆ°æ¡†å°ºå¯¸(axis=* `-3` *):
> è¾“å‡ºä¸­çš„ç›¸é‚»å…ƒç´ (å³ 1 â†’ 16ï¼Œ2 â†’ 17ï¼Œ6 â†’ 21ï¼Œ7 â†’ 22)åŸæœ¬æ˜¯è¾“å…¥ä¸­çš„* ***30*** *å­—èŠ‚(=15 ä¸ªå…ƒç´ ä¹‹å¤–çš„* Ã— *2* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯****2****ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,26), np.int16).reshape(5,5)
>>> as_strided(x, shape=(2,2,2), strides=(30,10,2))
array([[[ 1,  2],
        [ 6,  7]],
       [[16, 17],
        [21, 22]]], dtype=int16)***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> # this may not be achieved concisely***
```

## ***18)äº¤é”™åˆ‡ç‰‡***

***![](img/c9bff0833795bdf413880918e818e12d.png)***

***è¾“å…¥é¡¹å¤§å°: **1 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **5** ï¼Œ **1** )***

*****å›ç­”*****

```
***strides = (**10**,**6**,**1**)
  shape = ( **2**,**2**,**3**)***
```

> ****ğŸ’¡* ***è§£é‡Š******
> 
> ****è¾“å‡ºçš„ç›’å†…ä»å·¦åˆ°å³ç»´åº¦(axis=* `-1` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 2ï¼Œ2 â†’ 3ï¼Œ17 â†’ 18)åŸæœ¬æ˜¯è¾“å…¥ä¸­* ***1*** *å­—èŠ‚(=1 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *1* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***3*** *ã€‚****
> 
> ****è¾“å‡ºçš„ç›’å†…ä¸Šä¸‹ç»´åº¦(axis=* `-2` *):
> è¾“å‡ºä¸­çš„ç›¸é‚»å…ƒç´ (å¦‚ 1 â†’ 7ï¼Œ11 â†’ 17ï¼Œ12 â†’ 18)åŸæœ¬æ˜¯è¾“å…¥ä¸­çš„* ***6*** *å­—èŠ‚(=6 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *1* *å­—èŠ‚)ã€‚è¿™ä¸ªå°ºå¯¸çš„å½¢çŠ¶æ˜¯* ***2*** *ã€‚****
> 
> ****è¾“å‡ºçš„å·¦æ¡†åˆ°å³æ¡†å°ºå¯¸(axis=* `-3` *):
> è¾“å‡ºä¸­çš„ç›¸é‚»å…ƒç´ (ä¾‹å¦‚ 1 â†’ 11ï¼Œ8 â†’ 18ï¼Œ9 â†’ 19)åŸæœ¬æ˜¯è¾“å…¥ä¸­çš„* ***10*** *å­—èŠ‚(=10 ä¸ªå…ƒç´ ä¹‹å¤–çš„* Ã— *1* *å­—èŠ‚)ã€‚è¿™ä¸ªå°ºå¯¸çš„å½¢çŠ¶æ˜¯* ***2*** *ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,26), np.int8).reshape(5,5)
>>> as_strided(x, shape=(2,2,3), strides=(10,6,1))
array([[[ 1,  2,  3],
        [ 7,  8,  9]],
       [[11, 12, 13],
        [17, 18, 19]]], dtype=int8)***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> # this may not be achieved concisely***
```

## ***19)é‡å¤ 2D é˜µåˆ—***

***è¿™ä¸ªé—®é¢˜æ‘˜è‡ª StackOverflow åœ¨è¿™é‡Œçš„ä¸€ä¸ªå¸–å­[ [5](#6c04) ã€‚***

***![](img/7535a70361c08e9a5353be4869686d6a.png)***

***è¾“å…¥é¡¹å¤§å°: **2 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **10** ï¼Œ **2** )***

*****å›ç­”*****

```
***strides = (**0**,**10**,**2**)
  shape = (**3**, **2**,**4**)***
```

> ****ğŸ’¡* ***è§£è¯´******
> 
> ****è¾“å‡ºçš„ç›’å†…ä»å·¦åˆ°å³ç»´åº¦(axis=* `-1` *):
> è¾“å‡ºä¸­çš„ç›¸é‚»å…ƒç´ (ä¾‹å¦‚ 1 â†’ 2ï¼Œ2 â†’ 3ï¼Œ6 â†’ 7)åŸæœ¬æ˜¯è¾“å…¥ä¸­çš„* ***2*** *å­—èŠ‚(=1 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *2* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯****4****ã€‚****
> 
> ****è¾“å‡ºçš„ç›’å†…ä¸Šä¸‹ç»´åº¦(axis=* `-2` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 6ï¼Œ2 â†’ 7ï¼Œ3 â†’ 8)åŸæœ¬åœ¨è¾“å…¥ä¸­ç›¸éš”****10****å­—èŠ‚(=ç›¸éš” 5 ä¸ªå…ƒç´ * Ã— *2* *å­—èŠ‚)ã€‚è¿™ä¸ªå°ºå¯¸çš„å½¢çŠ¶æ˜¯****2****ã€‚****
> 
> ****è¾“å‡ºçš„å·¦æ¡†åˆ°å³æ¡†å°ºå¯¸(axis=* `-3` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 1ï¼Œ3 â†’ 3ï¼Œ7 â†’ 7)åŸæ¥æ˜¯è¾“å…¥ä¸­* ***0*** *å­—èŠ‚(=0 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *2* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***3*** *ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,26), np.int16).reshape(5,5)
>>> as_strided(x, shape=(3,2,4), strides=(0,10,2))
array([[[1, 2, 3, 4],
        [6, 7, 8, 9]],
       [[1, 2, 3, 4],
        [6, 7, 8, 9]],
       [[1, 2, 3, 4],
        [6, 7, 8, 9]]], dtype=int16)***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> np.broadcast_to(x[0:2, 0:-1], (3, 2, 4))***
```

## ***20) 3D è½¬ç½®***

***![](img/811c14a64f058afcccb67d45dbffc9a3.png)***

***è¾“å…¥é¡¹å¤§å°: **4 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **16** ã€ **8** ã€ **4** )***

*****å›ç­”*****

```
***strides = (**16**,**4**,**8**)
  shape = ( **3**,**2**,**2**)***
```

> ****ğŸ’¡* ***è§£è¯´******
> 
> ****è¾“å‡ºçš„å·¦å³å°ºå¯¸(axis=* `-1` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 3ï¼Œ2 â†’ 4ï¼Œ10 â†’ 12)åŸæœ¬æ˜¯è¾“å…¥ä¸­* ***8*** *å­—èŠ‚(=2 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *4* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***2*** *ã€‚****
> 
> ****è¾“å‡ºçš„ä¸Šä¸‹ç»´(axis=* `-2` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 2ï¼Œ3 â†’ 4ï¼Œ9 â†’ 10ï¼Œ11 â†’ 12)åŸæœ¬åœ¨è¾“å…¥ä¸­ç›¸éš”* ***4*** *å­—èŠ‚(=1 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *4* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***2*** *ã€‚****
> 
> ****è¾“å‡ºçš„å·¦æ¡†åˆ°å³æ¡†å°ºå¯¸(axis=* `-3` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (ä¾‹å¦‚ 1 â†’ 5ï¼Œ5 â†’ 9)åŸæœ¬æ˜¯è¾“å…¥ä¸­* ***16*** *å­—èŠ‚(=4 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *4* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯****3****ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,13), np.int32).reshape(3,2,2)
>>> as_strided(x, shape=(3,2,2), strides=(16,4,8))
array([[[ 1,  3],
        [ 2,  4]],
       [[ 5,  7],
        [ 6,  8]],
       [[ 9, 11],
        [10, 12]]], dtype=int32)***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> np.swapaxes(x,1,2)
array([[[ 1,  3],
        [ 2,  4]],
       [[ 5,  7],
        [ 6,  8]],
       [[ 9, 11],
        [10, 12]]], dtype=int32)***
```

## ***21)æ»‘åŠ¨ 2D çª—***

***é—®é¢˜æ”¹ç¼–è‡ª SciPy 2008 ä¼šè®®[ [6](#6c04) ]ã€‚***

***![](img/aaab07ba59ffcb4d2fa094c6f36c760b.png)***

***è¾“å…¥é¡¹å¤§å°: **8 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **40** ï¼Œ **8** )***

*****å›ç­”*****

```
***strides = (**40**,**40**,**8**)
  shape = ( **3**, **2**,**5**)***
```

> ****ğŸ’¡* ***è§£é‡Š******
> 
> ****è¾“å‡ºçš„ç›’å†…ä»å·¦åˆ°å³ç»´åº¦(axis=* `-1` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 2ï¼Œ12 â†’ 13ï¼Œ16 â†’ 17)åŸæœ¬åœ¨è¾“å…¥ä¸­ç›¸éš”* ***8*** *å­—èŠ‚(=1 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *8* *å­—èŠ‚)ã€‚è¿™ä¸ªå°ºå¯¸çš„å½¢çŠ¶æ˜¯* ***5*** *ã€‚****
> 
> ****è¾“å‡ºçš„ç›’å†…ä¸Šä¸‹ç»´åº¦(axis=* `-2` *):
> è¾“å‡ºä¸­çš„ç›¸é‚»å…ƒç´ (å¦‚ 1 â†’ 6ï¼Œ8 â†’ 13ï¼Œ11 â†’ 16)åŸæœ¬æ˜¯è¾“å…¥ä¸­çš„* ***40*** *å­—èŠ‚(=5 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *8* *å­—èŠ‚)ã€‚è¿™ä¸ªå°ºå¯¸çš„å½¢çŠ¶æ˜¯* ***2*** *ã€‚****
> 
> ****è¾“å‡ºçš„å·¦æ¡†åˆ°å³æ¡†å°ºå¯¸(axis=* `-3` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 9 â†’ 14ï¼Œ14 â†’ 19)åŸæœ¬åœ¨è¾“å…¥ä¸­ç›¸éš”* ***40*** *å­—èŠ‚(=5 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *8* *å­—èŠ‚)ã€‚è¿™ä¸ªå°ºå¯¸çš„å½¢çŠ¶æ˜¯* ***3*** *ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,21), np.int64).reshape(4,5)
>>> as_strided(x, shape=(3,2,5), strides=(40,40,8))
array([[[ 1,  2,  3,  4,  5],
        [ 6,  7,  8,  9, 10]],
       [[ 6,  7,  8,  9, 10],
        [11, 12, 13, 14, 15]],
       [[11, 12, 13, 14, 15],
        [16, 17, 18, 19, 20]]])***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> # this may not be achieved concisely***
```

## ***22)å°† 1D é˜µåˆ—æ•´å½¢ä¸º 3D é˜µåˆ—***

***![](img/f2c719e4453d27bbe90f418c63de391d.png)***

***è¾“å…¥é¡¹å¤§å°: **1 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **1** ï¼Œ)***

*****å›ç­”*****

```
***strides = (**6**,**3**,**1**)
  shape = (**2**,**2**,**3**)***
```

> ****ğŸ’¡* ***è§£è¯´******
> 
> ****è¾“å‡ºçš„ç›’å†…ä»å·¦åˆ°å³ç»´åº¦(axis=* `-1` *):
> è¾“å‡ºä¸­çš„ç›¸é‚»å…ƒç´ (ä¾‹å¦‚ 1 â†’ 2ï¼Œ5 â†’ 6ï¼Œ7 â†’ 8ï¼Œ10 â†’ 11)åŸæœ¬æ˜¯è¾“å…¥ä¸­çš„* ***1*** *å­—èŠ‚(=1 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *1* *å­—èŠ‚)ã€‚è¿™ä¸ªå°ºå¯¸çš„å½¢çŠ¶æ˜¯****3****ã€‚****
> 
> ****è¾“å‡ºçš„ç›’å†…ä¸Šä¸‹ç»´åº¦(axis=* `-2` *):
> è¾“å‡ºä¸­çš„ç›¸é‚»å…ƒç´ (å¦‚ 1 â†’ 4ï¼Œ2 â†’ 5ï¼Œ8 â†’ 11)åŸæœ¬æ˜¯è¾“å…¥ä¸­çš„****3****å­—èŠ‚(=3 ä¸ªå…ƒç´ ä¹‹å¤–çš„* Ã— *1* *å­—èŠ‚)ã€‚è¿™ä¸ªå°ºå¯¸çš„å½¢çŠ¶æ˜¯****2****ã€‚****
> 
> ****è¾“å‡ºçš„å·¦æ¡†åˆ°å³æ¡†å°ºå¯¸(axis=* `-3` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 7ï¼Œ2 â†’ 8ï¼Œ3 â†’ 9)åŸæ¥æ˜¯è¾“å…¥ä¸­çš„* ***6*** *å­—èŠ‚(=6 ä¸ªå…ƒç´ ä¹‹å¤–çš„* Ã— *1* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***2*** *ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,13), np.int8)
>>> as_strided(x, shape=(2,2,3), strides=(6,3,1))
array([[[ 1,  2,  3],
        [ 4,  5,  6]],
       [[ 7,  8,  9],
        [10, 11, 12]]], dtype=int8)***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> x.reshape(2,2,3)
array([[[ 1,  2,  3],
        [ 4,  5,  6]],
       [[ 7,  8,  9],
        [10, 11, 12]]], dtype=int8)***
```

# ***4D æ¼”ä¹ ***

## ***23)è½½ç»ç‰‡ 2D æ„Ÿå—é‡è¿›è¡Œå·ç§¯***

***æ”¹ç¼–è‡ª StackOverflow åœ¨ 2D å·ç§¯ä¸Šçš„ä¸€ç¯‡å¸–å­ã€‚***

***![](img/4cdd3ea655ab78fcf08feff7b699c737.png)***

***è¾“å…¥é¡¹å¤§å°: **1 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **5** ï¼Œ **1** )***

*****å›ç­”*****

```
***strides = (**10**,**2**,**5**,**1**)
  shape = ( **2**,**2**,**3**,**3**)***
```

> ****ğŸ’¡* ***è§£è¯´******
> 
> ****è¾“å‡ºçš„ç›’å†…ä»å·¦åˆ°å³å°ºå¯¸(axis=* `-1` *):
> è¾“å‡ºä¸­çš„ç›¸é‚»å…ƒç´ (ä¾‹å¦‚ 1 â†’ 2ï¼Œ17 â†’ 18ï¼Œ24 â†’ 25)åŸæœ¬æ˜¯è¾“å…¥ä¸­çš„* ***1*** *å­—èŠ‚(=1 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *1* *å­—èŠ‚)ã€‚è¿™ä¸ªå°ºå¯¸çš„å½¢çŠ¶æ˜¯* ***3*** *ã€‚****
> 
> ****è¾“å‡ºçš„ç›’å†…ä¸Šä¸‹ç»´åº¦(axis=* `-2` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 6ï¼Œ2 â†’ 7ï¼Œ3 â†’ 8)åŸæœ¬åœ¨è¾“å…¥ä¸­ç›¸éš”* ***5*** *å­—èŠ‚(=5 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *1* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***3*** *ã€‚****
> 
> ****è¾“å‡ºçš„å·¦æ¡†åˆ°å³æ¡†å°ºå¯¸(axis=* `-3` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (ä¾‹å¦‚ 1 â†’ 3ï¼Œ6 â†’ 8ï¼Œ21 â†’ 23ï¼Œ23 â†’ 25)åœ¨è¾“å…¥ä¸­åŸæœ¬æ˜¯* ***2*** *å­—èŠ‚(=2 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *1* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯****2****ã€‚****
> 
> ****è¾“å‡ºçš„é¡¶æ¡†åˆ°åº•æ¡†å°ºå¯¸(axis=* `-4` *):
> è¾“å‡ºä¸­çš„ç›¸é‚»å…ƒç´ (å¦‚ 1 â†’ 11ï¼Œ2 â†’ 12ï¼Œ15 â†’ 25)åŸæœ¬æ˜¯è¾“å…¥ä¸­çš„****10****å­—èŠ‚(=10 ä¸ªå…ƒç´ ä¹‹å¤–çš„* Ã— *1* *å­—èŠ‚)ã€‚è¯¥å°ºå¯¸çš„å½¢çŠ¶ä¸º* **2** *ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,26), np.int8).reshape(5,5)
>>> as_strided(x, shape=(2,2,3,3), strides=(10,2,5,1))
array([[[[ 1,  2,  3],
         [ 6,  7,  8],
         [11, 12, 13]],
        [[ 3,  4,  5],
         [ 8,  9, 10],
         [13, 14, 15]]],
       [[[11, 12, 13],
         [16, 17, 18],
         [21, 22, 23]],
        [[13, 14, 15],
         [18, 19, 20],
         [23, 24, 25]]]], dtype=int8)***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> # this may not be achieved concisely***
```

## ***24)é‡å¤ 3D å¼ é‡***

***![](img/9641d004b2fc70ab12f3e257e12bf95e.png)***

***è¾“å…¥é¡¹å¤§å°: **8 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **48** ã€ **24** ã€ **8** )***

*****å›ç­”*****

```
***strides = (**48**, **0**,**24**, **8**)
  shape = ( **2**, **2**, **2**, **3**)***
```

> ****ğŸ’¡* ***è§£é‡Š******
> 
> ****è¾“å‡ºçš„ç›’å†…ä»å·¦åˆ°å³ç»´åº¦(axis=* `-1` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 2ï¼Œ2 â†’ 3ï¼Œ4 â†’ 5)åŸæœ¬åœ¨è¾“å…¥ä¸­æ˜¯* ***8*** *å­—èŠ‚(=1 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *8* *å­—èŠ‚)ã€‚è¿™ä¸ªå°ºå¯¸çš„å½¢çŠ¶æ˜¯* ***3*** *ã€‚****
> 
> ****è¾“å‡ºçš„ç›’å†…ä¸Šä¸‹ç»´åº¦(axis=* `-2` *):
> è¾“å‡ºä¸­çš„ç›¸é‚»å…ƒç´ (å¦‚ 1 â†’ 4ï¼Œ7 â†’ 10ï¼Œ8 â†’ 11)åŸæœ¬æ˜¯è¾“å…¥ä¸­çš„* ***24*** *å­—èŠ‚(=3 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *8* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***2*** *ã€‚****
> 
> ****è¾“å‡ºçš„å·¦æ¡†åˆ°å³æ¡†å°ºå¯¸(axis=* `-3` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 1ï¼Œ10 â†’ 10ï¼Œ12 â†’ 12)åŸæ¥åœ¨è¾“å…¥ä¸­æ˜¯* ***0*** *å­—èŠ‚(=0 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *8* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***2*** *ã€‚****
> 
> ****è¾“å‡ºçš„é¡¶æ¡†åˆ°åº•æ¡†å°ºå¯¸(axis=* `-4` *):
> è¾“å‡ºä¸­çš„ç›¸é‚»å…ƒç´ (ä¾‹å¦‚ 1 â†’ 7ï¼Œ2 â†’ 8ï¼Œ3 â†’ 9)æœ€åˆåœ¨è¾“å…¥ä¸­æ˜¯* ***48*** *å­—èŠ‚(=6 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *8* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯****2****ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,13), np.int64).reshape(2,2,3)
>>> as_strided(x, shape=(2,2,2,3), strides=(48,0,24,8))
array([[[[ 1,  2,  3],
         [ 4,  5,  6]],
        [[ 1,  2,  3],
         [ 4,  5,  6]]],
       [[[ 7,  8,  9],
         [10, 11, 12]],
        [[ 7,  8,  9],
         [10, 11, 12]]]])***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> np.broadcast_to(x,(2,2,2,3)).swapaxes(0,1)
array([[[[ 1,  2,  3],
         [ 4,  5,  6]],
        [[ 1,  2,  3],
         [ 4,  5,  6]]],
       [[[ 7,  8,  9],
         [10, 11, 12]],
        [[ 7,  8,  9],
         [10, 11, 12]]]])***
```

## ***25)å°† 1D é˜µåˆ—é‡å¡‘ä¸º 4D é˜µåˆ—***

***![](img/7bc13714522a14eb567606f14e6ecb1e.png)***

***è¾“å…¥é¡¹å¤§å°: **8 å­—èŠ‚** |è¾“å…¥æ­¥æ•°:( **8** ï¼Œ)***

*****å›ç­”*****

```
***strides = (**64**,**32**,**16**, **8**)
  shape = ( **2**, **2**, **2**, **2**)***
```

> ****ğŸ’¡* ***è§£é‡Š******
> 
> ****è¾“å‡ºçš„ç›’å†…ä»å·¦åˆ°å³ç»´åº¦(axis=* `-1` *):
> è¾“å‡ºä¸­ç›¸é‚»çš„å…ƒç´ (å¦‚ 1 â†’ 2ï¼Œ2 â†’ 3ï¼Œ4 â†’ 5)åŸæœ¬åœ¨è¾“å…¥ä¸­ç›¸éš”* ***8*** *å­—èŠ‚(=1 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *8* *å­—èŠ‚)ã€‚è¿™ä¸ªå°ºå¯¸çš„å½¢çŠ¶æ˜¯* ***2*** *ã€‚****
> 
> ****è¾“å‡ºçš„ç›’å†…ä¸Šä¸‹ç»´åº¦(axis=* `-2` *):
> è¾“å‡ºä¸­çš„ç›¸é‚»å…ƒç´ (å¦‚ 1 â†’ 4ï¼Œ7 â†’ 10ï¼Œ8 â†’ 11)åŸæœ¬æ˜¯è¾“å…¥ä¸­çš„* ***16*** *å­—èŠ‚(=2 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *8* *å­—èŠ‚)ã€‚è¿™ä¸ªå°ºå¯¸çš„å½¢çŠ¶æ˜¯* ***2*** *ã€‚****
> 
> ****è¾“å‡ºçš„å·¦æ¡†åˆ°å³æ¡†å°ºå¯¸(axis=* `-3` *):
> è¾“å‡ºä¸­çš„ç›¸é‚»å…ƒç´ (ä¾‹å¦‚ 1 â†’ 1ï¼Œ10 â†’ 10ï¼Œ12 â†’ 12)åŸæœ¬æ˜¯è¾“å…¥ä¸­çš„* ***32*** *å­—èŠ‚(=4 ä¸ªå…ƒç´ ä¹‹å¤–* Ã— *8* å­—èŠ‚)ã€‚è¿™ä¸ªå°ºå¯¸çš„å½¢çŠ¶æ˜¯ ***2*** *ã€‚****
> 
> ****è¾“å‡ºçš„é¡¶æ¡†åˆ°åº•æ¡†å°ºå¯¸(axis=* `-4` *):
> è¾“å‡ºä¸­çš„ç›¸é‚»å…ƒç´ (å¦‚ 1 â†’ 7ï¼Œ2 â†’ 8ï¼Œ3 â†’ 9)åŸæœ¬æ˜¯è¾“å…¥ä¸­çš„* ***64*** *å­—èŠ‚(=8 ä¸ªå…ƒç´ ä¹‹å¤–çš„* Ã— *8* *å­—èŠ‚)ã€‚è¿™ä¸ªç»´åº¦çš„å½¢çŠ¶æ˜¯* ***2*** *ã€‚****

*****ä»£ç *****

```
***>>> x = np.asarray(range(1,17), np.int64)
>>> as_strided(x, shape=(2,2,2,2), strides=(64,32,16,8))
array([[[[ 1,  2],
         [ 3,  4]],
        [[ 5,  6],
         [ 7,  8]]],
       [[[ 9, 10],
         [11, 12]],
        [[13, 14],
         [15, 16]]]])***
```

***ä¸â€¦ç±»ä¼¼***

```
***>>> x.reshape(2,2,2,2)
array([[[[ 1,  2],
         [ 3,  4]],
        [[ 5,  6],
         [ 7,  8]]],
       [[[ 9, 10],
         [11, 12]],
        [[13, 14],
         [15, 16]]]])***
```

***âš ï¸:è™½ç„¶ stride æŠ€å·§å¯ä»¥è®©æ‚¨å¯¹ç”Ÿæˆçš„ NumPy è§†å›¾è¿›è¡Œæ›´å¤šçš„æ§åˆ¶ï¼Œä½†æ˜¯è¯¥ API**ä¸æ˜¯å†…å­˜å®‰å…¨çš„**â€”â€”å¦‚æœæ‚¨é”™è¯¯åœ°è®¡ç®—äº† itemsize(è€å®è¯´ï¼Œæˆ‘è®¤ä¸ºè¯¥ API ä¸åº”è¯¥å…è®¸å®¢æˆ·ç«¯ä»£ç å¤„ç†é¡¹ç›®å¤§å°ï¼Œå› ä¸ºæˆ‘æ²¡æœ‰çœ‹åˆ°å…¬å¼€è¿™ä¸€ç‚¹çš„ä»»ä½•å¥½å¤„)æˆ–å½¢çŠ¶æˆ–ç°æœ‰çš„ stridesï¼Œé‚£ä¹ˆäº‹æƒ…ä¼šå˜å¾—éå¸¸ç³Ÿç³•ï¼Œè¿”å›çš„æ•°æ®å®é™…ä¸Šä¸æ˜¯æ‚¨åˆ›å»ºçš„åˆå§‹æ•°ç»„ï¼Œè€Œæ˜¯æ¥è‡ªæ‚¨å¯èƒ½åœ¨å‡ è¡Œä¹‹å‰å®šä¹‰çš„å¦ä¸€ä¸ªæ•°ç»„ğŸ˜±ã€‚è¿™è¢«ç§°ä¸º[ç¼“å†²åŒºæº¢å‡º](https://en.wikipedia.org/wiki/Buffer_overflow)ï¼Œä½¿ç”¨ stride tricks API ä¸éš¾é‡åˆ°è¿™ç§æƒ…å†µã€‚æ›´ç³Ÿç³•çš„æ˜¯å½“ä½ å†³å®š*å†™*è¿™ä¸ªæ•°æ®æ—¶ğŸ˜±ğŸ˜±ã€‚æ­£æ˜¯å› ä¸ºè¿™ä¸ªåŸå› ï¼Œ [stride tricks æ–‡æ¡£](https://numpy.org/doc/stable/reference/generated/numpy.lib.stride_tricks.as_strided.html)æé†’ç”¨æˆ·åœ¨ä½¿ç”¨æ—¶è¦æ ¼å¤–å°å¿ƒã€‚***

***ç†è§£ stride tricks API å¾ˆæœ‰æŒ‘æˆ˜æ€§ï¼Œæˆ‘åœ¨è¿™æ–¹é¢æœ‰é—®é¢˜ã€‚ç„¶è€Œï¼Œè¯€çª(æ²¡æœ‰åŒå…³è¯­)æ˜¯ä»æ›´å°çš„ç»´åº¦å¼€å§‹ï¼Œå¹¶ä¸”*å¯è§†åŒ–*å¼ é‡çš„è¾“å‡ºã€‚ç©å¾—å¼€å¿ƒï¼***

****å‘ç°é”™è¯¯ï¼Ÿè¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ï¼:)å¤§å–Šåˆ°*[*David Chong*](https://medium.com/u/f392dd76f846?source=post_page-----923a9393ab20--------------------------------)*å¯¹è¿™ç¯‡æ–‡ç« è¿›è¡Œç‚¹è¯„ã€‚****

****å¦‚æœä½ å–œæ¬¢æˆ‘çš„å†…å®¹å¹¶ä¸”è¿˜æ²¡æœ‰è®¢é˜… Mediumï¼Œè¯·é€šè¿‡æˆ‘çš„æ¨èé“¾æ¥* [*è¿™é‡Œ*](https://medium.com/@remykarem/membership) *è®¢é˜…ï¼æ³¨æ„:ä½ çš„ä¼šå‘˜è´¹çš„ä¸€éƒ¨åˆ†å°†ä½œä¸ºä»‹ç»è´¹åˆ†é…ç»™æˆ‘ã€‚****

# ***èµ„æº***

***[N ç»´æ•°ç»„(ndarray)](https://numpy.org/doc/stable/reference/arrays.ndarray.html)(numpy.org)***

***å…ˆè¿›æ•°å­—(scipy-lectures.org)***

***å½¢çŠ¶å’Œæ­¥å¹…çš„å›¾è§£æŒ‡å—(ajcr.net)***

***[ä½¿ç”¨ NumPy çš„ stride æŠ€å·§](https://ipython-books.github.io/46-using-stride-tricks-with-numpy/) (ipython-books.github.io)***

***[1][https://stack overflow . com/questions/40084931/taking-sub arrays-from-numpy-array-with-given-stride-stepsize](https://stackoverflow.com/questions/40084931/taking-subarrays-from-numpy-array-with-given-stride-stepsize)***

***[2][https://stack overflow . com/questions/4923617/efficient-numpy-2d-array-construction-from-1d-array](https://stackoverflow.com/questions/4923617/efficient-numpy-2d-array-construction-from-1d-array)***

***[3][https://stack overflow . com/questions/47483579/how-to-use-numpy-as-strided-from-NP-stride-tricks-correctly](https://stackoverflow.com/questions/47483579/how-to-use-numpy-as-strided-from-np-stride-tricks-correctly)***

***[4][https://stack overflow . com/questions/15722324/sliding-window-of-m-by-n-shape-numpy-ndarray](https://stackoverflow.com/questions/15722324/sliding-window-of-m-by-n-shape-numpy-ndarray)***

***[5][https://stack overflow . com/questions/23695851/python-repeating-numpy-array-without-replication-data](https://stackoverflow.com/questions/23695851/python-repeating-numpy-array-without-replicating-data)***

***[https://mentat.za.net/numpy/numpy_advanced_slides/](https://mentat.za.net/numpy/numpy_advanced_slides/)***

***[7][https://stack overflow . com/questions/43086557/convolve2d-just-by-using-numpy](https://stackoverflow.com/questions/43086557/convolve2d-just-by-using-numpy)***