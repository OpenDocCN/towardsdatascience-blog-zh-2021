# æ‚¨çš„ Streamlit ML åº”ç”¨ä¸å¯æˆ–ç¼ºçš„ 10 ä¸ªç‰¹æ€§â€”å·²å®ç°

> åŸæ–‡ï¼š<https://towardsdatascience.com/10-features-your-streamlit-ml-app-cant-do-without-implemented-f6b4f0d66d36?source=collection_archive---------3----------------------->

## [ç®€åŒ–æŠ€å·§å’Œçªé—¨](https://towardsdatascience.com/tagged/streamlit-tips-and-tricks)

## æ·»åŠ  Jupyter labã€ä¼šè¯ç®¡ç†ã€å¤šé¡µé¢ã€æ–‡ä»¶èµ„æºç®¡ç†å™¨ã€conda envsã€å¹¶è¡Œå¤„ç†å’Œéƒ¨ç½²æ¥ç®€åŒ–åº”ç”¨ç¨‹åº

M uch å·²ç»å†™äº†å…³äº [Streamlit æ€æ‰‹çº§æ•°æ®åº”ç”¨](https://towardsdatascience.com/tagged/streamlit)çš„æ–‡ç« ï¼Œçœ‹åˆ° Streamlit æ˜¯è¯¥é¢†åŸŸå‘å±•æœ€å¿«çš„å¹³å°ä¹Ÿå°±ä¸è¶³ä¸ºå¥‡äº†:

![](img/2cda7771eff43da77cb757585b319ab4.png)

å›¾ç‰‡ç”±[æ˜Ÿå²](https://star-history.com/#streamlit/streamlit&rstudio/shiny&plotly/dash&jupyter/notebook&voila-dashboards/voila&holoviz/panel&bokeh/bokeh)æä¾›ï¼Œä½œè€…ç¼–è¾‘

**ç„¶è€Œï¼Œä½¿ç”¨ Streamlit ä¸­çš„**[**CRISP-DM**](https://towardsdatascience.com/tagged/crisp-dm)**é˜¶æ®µå¼€å‘ä¸€ä¸ªå¯¹è±¡åˆ†å‰²åº”ç”¨ç¨‹åºè®©æˆ‘æ„è¯†åˆ°è¿™ä¸ªå¹³å°ç¼ºå°‘äº†è®¸å¤šåŸºæœ¬åŠŸèƒ½ã€‚è¿™äº›åŠŸèƒ½åœ¨ Streamlit çš„æ–‡ç« ä¸­å¾ˆå°‘è¢«æåŠï¼Œå¯èƒ½æ˜¯å› ä¸ºå®ƒä»¬åœ¨åå°åšâ€œè„æ´»â€,ç®€å•åœ°è¯´ï¼Œæ²¡æœ‰é‚£ä¹ˆè¿·äººã€‚å°½ç®¡æ²¡æœ‰è®¨è®ºè¿™äº›åŠŸèƒ½ï¼Œä½†æˆ‘ç›¸ä¿¡æ²¡æœ‰è¿™äº›åŠŸèƒ½ï¼Œæ‚¨çš„æ•°æ®åº”ç”¨ç¨‹åºä¸ä¼šæˆåŠŸã€‚åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œä¸€äº›åŠŸèƒ½æ˜¯ç”±åº”ç”¨ç¨‹åºçš„ç”¨æˆ·ä½œä¸ºéœ€æ±‚æå‡ºæ¥çš„ï¼Œè€Œå…¶ä»–åŠŸèƒ½æ˜¯åœ¨ R-shiny å¹³å°ä¸Šæ„å»ºçš„ï¼Œåœ¨é‚£é‡Œæˆ‘å‚ä¸äº†å¦ä¸€ä¸ª AutoML åº”ç”¨ç¨‹åºçš„å¼€å‘ã€‚**

> Streamlit ç¼ºå°‘è®¸å¤šåŸºæœ¬çš„åº”ç”¨ç¨‹åºåŠŸèƒ½ã€‚æ²¡æœ‰å®ƒä»¬ï¼Œä½ çš„åº”ç”¨ç¨‹åºå°±ä¸ä¼šå‰Šå‡å®ƒã€‚

**é‚£ä¹ˆæˆ‘ä¸ºä»€ä¹ˆè¦å†™è¿™ç¯‡æ–‡ç« å‘¢ï¼Ÿ**æŠ›å¼€ç¼ºå¤±çš„åŠŸèƒ½ä¸è°ˆï¼ŒStreamlit æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„å¹³å°(è§[è¿™é‡Œ](https://awesome-streamlit.org/))ï¼Œå¯èƒ½æ˜¯å‡ ä¹æ²¡æœ‰åº”ç”¨å¼€å‘ç»éªŒçš„äººç”¨ *Python* å¼€å‘åº”ç”¨çš„åŒç±»å¹³å°ä¹‹ä¸€ã€‚å› æ­¤ï¼Œæˆ‘å°½æˆ‘æ‰€èƒ½åœ¨ç½‘ä¸Šæœç´¢é‚£äº›ç¼ºå¤±çš„åŠŸèƒ½ï¼Œè°·æ­Œæœç´¢äº†å‡ åä¸ªè§£å†³æ–¹æ¡ˆï¼Œå¹¶è¯•å›¾å®ç°å®ƒä»¬ã€‚æ­¤å¤–ï¼Œå½“ç½‘ä¸Šæ²¡æœ‰å¥½çš„è§£å†³æ–¹æ¡ˆæ—¶ï¼Œæˆ‘å°±è‡ªå·±å¼€å‘åŠŸèƒ½ã€‚å¦‚æœæˆ‘å·²ç»èŠ±æ—¶é—´æ”¶é›†äº†è¿™äº›ç‰¹å¾ï¼Œä½ ä¸åº”è¯¥è¿™æ ·åšã€‚æ¬¢è¿æ‚¨åä¸‹æ¥ï¼Œæ”¾æ¾ï¼Œäº«å—æ—…ç¨‹â€¦

> æˆ‘å·²ç»èŠ±æ—¶é—´æ”¶é›†äº†è¿™äº›ç‰¹å¾ï¼Œæ‰€ä»¥ä½ ä¸åº”è¯¥è¿™æ ·åšã€‚æ¬¢è¿æ¥åˆ°*åå¥½ï¼Œæ”¾æ¾ï¼Œäº«å—æ—…ç¨‹â€¦â€¦*

åœ¨æ·±å…¥ç ”ç©¶ä»£ç ä¹‹å‰ï¼Œè®©æˆ‘å¼ºè°ƒè¿™é‡Œçš„å¤§å¤šæ•°ç‰¹æ€§éƒ½æ˜¯ç›¸äº’ä¾èµ–çš„ã€‚ä¸è¦æ‹…å¿ƒâ€”â€”å®ƒä»¬æ˜¯æŒ‰ç…§ä¾èµ–å…³ç³»çš„é¡ºåºæåˆ°çš„ï¼Œ,æ‰€ä»¥æ¯ä¸ªå‰ä¸€ä¸ªç‰¹æ€§éƒ½æ˜¯ç‹¬ç«‹äºåä¸€ä¸ªç‰¹æ€§çš„ã€‚æ­¤å¤–ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œæˆ‘æœ¬è´¨ä¸Šæ˜¯ä¸€åæ•°æ®ç§‘å­¦å®¶ï¼Œè€Œä¸æ˜¯ä¸€ååº”ç”¨ç¨‹åºå¼€å‘äººå‘˜ã€‚å› æ­¤ï¼Œå¯¹äºåº”ç”¨ç¨‹åºå¼€å‘é¢†åŸŸçš„æ¦‚å¿µï¼Œæˆ‘å¯èƒ½ä¸ä¼šä½¿ç”¨åˆé€‚çš„æœ¯è¯­ã€‚ç„¶è€Œï¼Œæˆ‘åŸè°…è‡ªå·±ä¸ç²¾ç¡®ï¼Œå› ä¸ºæˆ‘ç›¸ä¿¡ä½ ä»¬å¤§å¤šæ•°äººéƒ½æ¥è‡ªä¸æˆ‘ç›¸ä¼¼çš„èƒŒæ™¯ï¼Œè¿™æ„å‘³ç€ä½ ç²¾é€š Python å’Œå»ºç«‹æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œä½†ä½ å¯¹å¼€å‘åº”ç”¨ç¨‹åºå‡ ä¹ä¸€æ— æ‰€çŸ¥ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨æ˜¯ä¸€åç»éªŒä¸°å¯Œçš„å¼€å‘äººå‘˜ï¼Œæˆ‘åœ¨æ­¤ä¸ºäºµæ¸æ‚¨çš„èŒä¸šè€Œé“æ­‰:)

æ‰€ä»¥ï¼Œäº‹ä¸å®œè¿Ÿï¼Œè¿™é‡Œæœ‰ 10 ä¸ªç‰¹ç‚¹:

1.  [ä¿å­˜åˆ·æ–°å’Œæ‰çº¿å·¥ä½œ](#7b09)
2.  [ä¿å­˜å·¥ä½œä»¥å¤‡åç”¨](#1bd6)
3.  [æ–‡ä»¶æµè§ˆå™¨](#d121)
4.  [ç™»å½•å±å¹•](#35fe)
5.  [å¤šé¡µé¢åº”ç”¨](#7438)
6.  [è¿è¡Œé•¿æ—¶é—´å¹¶è¡Œè®¡ç®—](#f050)
7.  [ä½¿ç”¨ä¸åŒç¯å¢ƒçš„æ¨¡å‹](#13f4)
8.  [åŠ¨æ€ç»˜åˆ¶è®­ç»ƒç»“æœ](#907e)
9.  [åµŒå…¥ Jupyter å¹¶åœ¨æ–°é€‰é¡¹å¡ä¸Šæä¾›è®¸å¯æ–‡ä»¶](#4957)
10.  [éƒ¨ç½²è®­ç»ƒæœ‰ç´ çš„æ¨¡å‹](#0474)

# 1.ä¿ç•™åˆ·æ–°å’Œæ–­å¼€è¿æ¥æ—¶çš„å·¥ä½œ

> **é—®é¢˜**:Streamlit ç”¨æˆ·åœ¨åˆ·æ–°æˆ–è¿æ¥è¶…æ—¶æ—¶ä¸¢å¤±äº†å¥¹çš„å·¥ä½œã€‚
> 
> **è§£å†³æ–¹æ¡ˆ:**ç”¨ä¼šè¯æ–‡ä»¶è‡ªåŠ¨ä¿å­˜å¹¶è‡ªåŠ¨åŠ è½½ç”¨æˆ·çš„ä¼šè¯ã€‚

![](img/1cf7cdf307e7d27bea570eb31a78b885.png)

è¯¥åº”ç”¨ç¨‹åºâ€œè®°ä½â€ç”¨æˆ·çš„é€‰æ‹©ï¼ŒImage by [Streamlit v0.84 æ¼”ç¤º](https://share.streamlit.io/streamlit/release-demos/0.84/0.84/streamlit_app.py?page=headliner)ï¼Œ

ä»»ä½•åº”ç”¨ç¨‹åºä¸­æœ€é‡è¦çš„äº‹æƒ…ä¹‹ä¸€æ˜¯ä¼šè¯ç®¡ç†åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ— è®ºç”¨æˆ·ä½•æ—¶åˆ‡æ¢é¡µé¢ã€åˆ·æ–°ç½‘ç»œæµè§ˆå™¨ï¼Œå½“ç„¶è¿˜æœ‰ä¿å­˜æ¨¡å‹å¹¶åœ¨ä»¥ååŠ è½½ï¼Œåº”ç”¨ç¨‹åºéƒ½å¿…é¡»â€œè®°ä½â€ç”¨æˆ·å·²ç»é…ç½®çš„ä»»ä½•è®¾ç½®ã€‚å¦‚æœä½ çŸ¥é“ä¸€ä¸ª ML æ¨¡å‹ç±»æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œä¸€ä¸ªä¿å­˜çš„ä¼šè¯åªæ˜¯åœ¨ä¸€ä¸ªæ›´å¹¿æ³›çš„ä¸Šä¸‹æ–‡ä¸­æ˜¯åŸºæœ¬ç›¸åŒçš„æ¦‚å¿µã€‚ä¼šè¯ä¸ä»…ä¼šä¿å­˜è¶…å‚æ•°å’Œè®­ç»ƒæ¨¡å‹æƒé‡ï¼Œè¿˜ä¼šä¿å­˜æ•´ä¸ªæ•°æ®é›†(æˆ–å…¶æ–‡ä»¶è·¯å¾„)ã€é¢„æµ‹ã€è®­ç»ƒæ—¥å¿—çš„æ–‡ä»¶è·¯å¾„ã€ç»˜å›¾ã€ç”¨æˆ·ç¼–å†™çš„è„šæœ¬ä»¥åŠç”¨æˆ·åœ¨ä¼šè¯ä¸­å®Œæˆçš„ä»»ä½•å…¶ä»–å·¥ä½œã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä¸ä¿æŒä¼šè¯çš„æŒä¹…æ€§ï¼Œæ¯å½“ç”¨æˆ·åˆ·æ–°æµè§ˆå™¨æˆ–åªæ˜¯æš‚æ—¶å¤±å»ä¸åº”ç”¨ç¨‹åºçš„è¿æ¥æ—¶ï¼Œå¥¹å°±ä¼šä¸¢å¤±æ‰€æœ‰çš„å·¥ä½œã€‚

> å¦‚æœä¸ä¿æŒä¼šè¯çš„æŒä¹…æ€§**ï¼Œæ¯å½“ç”¨æˆ·åˆ·æ–°æµè§ˆå™¨æˆ–è€…åªæ˜¯æš‚æ—¶å¤±å»ä¸åº”ç”¨ç¨‹åºçš„è¿æ¥æ—¶ï¼Œå¥¹å°±ä¼šä¸¢å¤±æ‰€æœ‰çš„å·¥ä½œã€‚**

å³ä½¿è¿™ä¸ªç‰¹æ€§[åœ¨ Streamlit è®ºå›](https://discuss.streamlit.io/t/preserving-state-across-sidebar-pages/107)ä¸­ä»å¹³å°æ—©æœŸå°±ä¸æ–­è¢«è¦æ±‚ï¼Œä¼šè¯ç®¡ç†åœ¨ä¸¤å¹´åæ‰è¢«å¼•å…¥å¹³å°[ã€‚å°½ç®¡å¦‚æ­¤ï¼Œ**å®˜æ–¹çš„ Streamlit è§£å†³æ–¹æ¡ˆæœ‰ä¸€ä¸ªå¾ˆå¤§çš„ç¼ºç‚¹:å®ƒåªèƒ½ä¿å­˜ç”¨æˆ·åœ¨é¡µé¢ä¹‹é—´åˆ‡æ¢æ—¶çš„å·¥ä½œï¼Œè€Œå¦‚æœä¼šè¯æ„å¤–ç»“æŸï¼Œå®ƒ**](https://docs.streamlit.io/library/advanced-features/session-state) [**ä¸èƒ½ä¿å­˜ç”¨æˆ·çš„å·¥ä½œ**](https://docs.streamlit.io/library/advanced-features/session-state#caveats-and-limitations) **ã€‚**æˆ‘çš„è§£å†³æ–¹æ¡ˆæœ‰ï¼Œå®ƒä½¿ç”¨äº†ç”¨æˆ·[*okld*](https://discuss.streamlit.io/t/multi-page-app-with-session-state/3074/48)*çš„ä¼šè¯ç®¡ç†è§£å†³æ–¹æ¡ˆæ¥ä»£æ›¿ã€‚*

***é¦–å…ˆæ˜¯**ï¼Œapp çš„è„šæœ¬åº”è¯¥æœ‰è¿™å‡ è¡Œ:*

***å…¶æ¬¡**ï¼Œæ­¤åŠŸèƒ½ä»…åœ¨ Streamlit ä»¥è°ƒè¯•æ¨¡å¼å¯åŠ¨å¹¶å°†è°ƒè¯•æ¶ˆæ¯å†™å…¥æ—¥å¿—æ–‡ä»¶æ—¶æœ‰æ•ˆ:*

```
*streamlit run app.py **--logger.level=debug** log_file.log 2>&1*
```

*æ—¥å¿—æ–‡ä»¶åº”å­˜å‚¨åœ¨æ–‡ä»¶å¤¹**configs[' APP _ BASE _ DIR ']+'/logs/streamlit _ logs/*ä¸­ï¼Œå› ä¸ºå®ƒåœ¨*was _ session _ shut down()***å‡½æ•°ä¸­ä½¿ç”¨ã€‚****

******ç¬¬ä¸‰ä¸ª**ï¼Œè¿™æ˜¯æ‚¨è‡ªåŠ¨ä¿å­˜ä¼šè¯çš„æ–¹å¼:****

```
****autosave_session(state)****
```

****ä»€ä¹ˆæ—¶å€™åº”è¯¥è‡ªåŠ¨ä¿å­˜å’Œè‡ªåŠ¨åŠ è½½ï¼Ÿæ¯å½“ç”¨æˆ·æ›´æ”¹é…ç½®ï¼Œç”šè‡³åªæ˜¯æ›´æ”¹åº”ç”¨ç¨‹åºä¸­çš„é¡µé¢æ—¶ï¼Œæˆ‘éƒ½ä¼šè°ƒç”¨ autosave å‡½æ•°ï¼Œè¿™æ ·å½“ä¼šè¯é‡æ–°åŠ è½½æ—¶ï¼Œç”¨æˆ·å¯ä»¥ç«‹å³ç»§ç»­å·¥ä½œï¼Œè€Œä¸å¿…æµè§ˆå›ä»–æ­£åœ¨å¤„ç†çš„é¡µé¢ã€‚åŠ è½½éƒ¨åˆ†åº”è¯¥æ˜¯åº”ç”¨ç¨‹åºè„šæœ¬ä¸­é¦–å…ˆè°ƒç”¨çš„å‘½ä»¤ä¹‹ä¸€ï¼Œå› ä¸ºåº”ç”¨ç¨‹åºåˆ·æ–°ä¼šä»å¤´é‡æ–°è¿è¡Œæ•´ä¸ªè„šæœ¬ï¼Œæˆ‘ä»¬å¸Œæœ›ç”¨æˆ·çš„åœæœºæ—¶é—´æœ€çŸ­ã€‚****

******ä»€ä¹ˆæ—¶å€™ä¼šè¯ä¸ä¼šè‡ªåŠ¨åŠ è½½ï¼Ÿ**å½“ç”¨æˆ·æ³¨é”€æ—¶(å‚è§ä¸‹é¢çš„å¤šé¡µ[éƒ¨åˆ†)ï¼Œæˆ–è€…å½“ Streamlit åº”ç”¨ç¨‹åºé‡å¯æ—¶ã€‚](#7438)****

******å®˜æ–¹çš„ Streamlit ä¼šè¯è§£å†³æ–¹æ¡ˆæ˜¯å¦å¯ä»¥æ·»åŠ è‡ªåŠ¨ä¿å­˜åŠŸèƒ½ï¼Ÿå¾ˆæœ‰å¯èƒ½ï¼Œå¦‚æœä½ æˆåŠŸäº†ï¼Œä¸€å®šè¦å‘Šè¯‰æˆ‘ï¼******

# ****2.ä¿å­˜å·¥ä½œä»¥å¤‡åç”¨****

> ******é—®é¢˜** : Streamlit æ²¡æœ‰ä¿å­˜ç”¨æˆ·å·¥ä½œä»¥å¤‡åç”¨çš„é€‰é¡¹ã€‚****
> 
> ******è§£å†³æ–¹æ¡ˆ**:ä¿å­˜ã€åŠ è½½&åˆ é™¤æŒ‰é’®****

****![](img/703c101d4903fffad69ffa81f15c7dfd.png)****

****æŒ‰ä½œè€…ä¿å­˜æ¨¡å‹ã€å›¾åƒ****

****![](img/d2cb4fa27e102f90bf4f51e45f153101.png)****

****åŠ è½½/åˆ é™¤é€‰å®šçš„æ¨¡å‹ã€ä½œè€…çš„å›¾åƒ****

****è®©ç”¨æˆ·ä¿å­˜å’ŒåŠ è½½ä»–çš„å·¥ä½œçš„é€»è¾‘ä¸ä¸Šé¢çš„[éƒ¨åˆ†å®Œå…¨ç›¸åŒï¼Œåªæ˜¯è¿™æ¬¡ä¿å­˜å’ŒåŠ è½½æ˜¯åœ¨ç”¨æˆ·æŒ‰ä¸‹åŠ¨ä½œæŒ‰é’®æ—¶è§¦å‘çš„ã€‚ä¸è¨€è€Œå–»ï¼Œæ‚¨è¿˜å¿…é¡»æä¾›ä¸€ä¸ªè¡¨æ ¼ï¼Œæ˜¾ç¤ºæ‰€æœ‰ä¿å­˜çš„æ¨¡å‹ï¼Œä»¥åŠæŸç§å…³äºæ¨¡å‹æ˜¯å¦è¢«æˆåŠŸä¿å­˜/åŠ è½½/åˆ é™¤çš„æŒ‡ç¤ºã€‚](#7b09)****

# ****3.æ–‡ä»¶æµè§ˆå™¨****

> ******é—®é¢˜**:Streamlit ç”¨æˆ·ä¸èƒ½åˆ›å»ºã€åˆ é™¤æˆ–æµè§ˆæ–‡ä»¶å¤¹****
> 
> ******è§£å†³æ–¹æ¡ˆ**:æ–‡ä»¶å¤¹æ“ä½œçš„é€’å½’å‡½æ•°****

****![](img/39e1269b4e1ababd6d1c76540176e10b.png)****

****åˆ›å»ºæ–‡ä»¶å¤¹ï¼ŒæŒ‰ä½œè€…åˆ†ç±»çš„å›¾åƒ****

****![](img/9f0e5ab9df37b13e1e5d20a71f67b4e9.png)****

****æµè§ˆå­æ–‡ä»¶å¤¹ï¼Œä½œè€…å›¾åƒ****

****![](img/c0bfc4cb0552a825bb4881f1d8c44b09.png)****

****åˆ é™¤æ–‡ä»¶å¤¹ï¼ŒæŒ‰ä½œè€…åˆ†ç±»çš„å›¾åƒ****

****å¯¹äºä»»ä½• CRISP-DM åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œæ–‡ä»¶æµè§ˆå™¨éƒ½æ˜¯ç»å¯¹å¿…è¦çš„ï¼Œå› ä¸ºå®ƒç”¨äºä¿å­˜æ–‡ä»¶ï¼Œå¹¶åœ¨å‡ ä¹æ‰€æœ‰å·¥ä½œé˜¶æ®µå°†å®ƒä»¬ç»„ç»‡åˆ°ç›®å½•ä¸­ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½å†³å®šä¸ºæ¯ä¸ªç”¨æˆ·çš„å®šå‹æ¨¡å‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸ºæ¯ä¸ªç‰¹å®šé¡¹ç›®çš„æ•°æ®é›†åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚å°½ç®¡è¿™æ˜¯ä¸€ä¸ªéå¸¸åŸºæœ¬çš„è¦æ±‚ï¼Œä½†å¦‚æœä½ è°·æ­Œä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯èƒ½ä¼šå‘ç°ä¸€äº›ä¸é‚£ä¹ˆå®ç”¨çš„[ç®€åŒ–ç”¨æˆ·çš„è§£å†³æ–¹æ¡ˆ](https://medium.com/r?url=https%3A%2F%2Fdiscuss.streamlit.io%2Ft%2Fstreamlit-file-explorer%2F16031)ã€‚****

****è¯¥è§£å†³æ–¹æ¡ˆä½¿ç”¨æˆ·èƒ½å¤Ÿåˆ›å»ºã€åˆ é™¤å’Œæµè§ˆæ–‡ä»¶å¤¹ï¼Œå¹¶æŸ¥çœ‹æ–‡ä»¶å¤¹çš„æ ‘å½¢ç»“æ„ã€‚**æœ€é‡è¦çš„æ˜¯ï¼Œå³ä½¿ä½ çš„ Streamlit åº”ç”¨ç¨‹åºè¿è¡Œåœ¨ç”¨æˆ·ä¸èƒ½ç›´æ¥è®¿é—®æ–‡ä»¶ç³»ç»Ÿçš„è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼Œå®ƒä¹Ÿèƒ½å·¥ä½œã€‚******

# ****4.ç™»å½•å±å¹•****

> ******é—®é¢˜**:ç»†æµæ²¡æœ‰å†…ç½®çš„ç”¨æˆ·è®¤è¯å±å¹•****
> 
> ******è§£å†³æ–¹æ¡ˆ**:éªŒè¯ç”¨æˆ·å’Œå¯†ç çš„ main()å‰çš„ If è¯­å¥****

****![](img/420bcc7ecf98f6acd8c36ac9aa4faf30.png)****

****ç™»å½•å±å¹•ï¼ŒæŒ‰ä½œè€…åˆ†ç±»çš„å›¾åƒ****

****ä»»ä½•ä¸“ä¸š app éƒ½éœ€è¦ä¸€ä¸ªâ€œä¿é•–â€æŠŠå®ˆå…¥å£ã€‚Streamlit æ²¡æœ‰ï¼Œå°½ç®¡å¾ˆä¹…ä»¥å‰[çš„ Streamlit ç”¨æˆ·ä¹Ÿè¦æ±‚è¿™ä¹ˆåšã€‚](https://discuss.streamlit.io/t/user-authentication/612)****

****è¯·è®°ä½ï¼Œæˆ‘çš„å®ç°ä½¿ç”¨ç¡¬ç¼–ç çš„ç”¨æˆ·å’Œå¯†ç ï¼Œä½†æ˜¯æ·»åŠ  LDAP æˆ– MongoDB èº«ä»½éªŒè¯åº”è¯¥å¾ˆå®¹æ˜“ã€‚****

# ****5.å¤šé¡µåº”ç”¨ç¨‹åº****

> ******é—®é¢˜** : Streamlit æ²¡æœ‰å†…ç½®çš„å¤šé¡µé¢åŠŸèƒ½****
> 
> ******è§£å†³æ–¹æ¡ˆ**:åœ¨ä¾§è¾¹æ ä¸­æ·»åŠ å•é€‰èœå•ï¼Œé“¾æ¥åˆ°æ¯ä¸ªé¡µé¢çš„åŠŸèƒ½****

****![](img/cd8615fdefeaae4aa2750b6469631dbb.png)****

****å¤šé¡µåº”ç”¨ç¨‹åºï¼Œä½œè€…å›¾ç‰‡****

****ä½¿ç”¨ CRISP-DM éœ€è¦åœ¨ä¸åŒçš„é˜¶æ®µä¹‹é—´æ¥å›åˆ‡æ¢ã€‚è¿™ä¸ªå·¥ä½œè¿‡ç¨‹åœ¨åº”ç”¨ç¨‹åºä¸­ä»¥èœå•çš„æœ‰åºé€‰é¡¹çš„å½¢å¼å¾—åˆ°äº†æœ€å¥½çš„ä½“ç°ï¼Œæ¯ä¸ªé€‰é¡¹éƒ½é“¾æ¥åˆ°ä¸€ä¸ªä¸åŒçš„åŠŸèƒ½ã€‚å½“æ‚¨å¯¹è¿™äº›é˜¶æ®µè¿›è¡Œç¼–ç æ—¶ï¼Œæ¯ä¸ªé˜¶æ®µçš„ç‹¬ç«‹åŠŸèƒ½çš„æ¦‚å¿µä¹Ÿéå¸¸æœ‰æ„ä¹‰ã€‚****

# ****6.è¿è¡Œé•¿æ—¶é—´å¹¶è¡Œè®¡ç®—****

> ******é—®é¢˜** : Streamlit ä¸èƒ½åŒæ—¶è¿è¡Œä¸¤ä¸ªæ“ä½œå¹¶åœ¨ä¸­é€”åœæ­¢****
> 
> ******è§£å†³æ–¹æ¡ˆ**:è¿è¡Œå­æµç¨‹ï¼Œåœ¨ä¾§è¾¹æ ä¸­åˆ›å»ºæµç¨‹æ§åˆ¶è¡¨****

****![](img/f1b97e7efb78cb3c6c15bb68e9f1ea68.png)****

****è¿›ç¨‹è¡¨ï¼ŒæŒ‰ä½œè€…æ’åºçš„å›¾åƒ****

****æ— è®ºæ‚¨æ˜¯åœ¨åŠŸèƒ½å·¥ç¨‹ä¸­å¼ºè¡Œä½¿ç”¨è‡ªå·±çš„æ–¹å¼ï¼Œè¿˜æ˜¯è®­ç»ƒç¹é‡çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œæ‚¨éƒ½éœ€è¦ä¸€ç§å¹¶è¡Œè¿è¡Œçš„æ–¹å¼ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿‡æ—©åœ°æ€æ­»å®ƒä»¬ã€‚æ·»åŠ æ­¤åŠŸèƒ½çš„ä¸€ç§æ–¹æ³•æ˜¯å°†æ¯ä¸ªè®¡ç®—ä½œä¸ºä¸€ä¸ªå­è¿›ç¨‹è¿è¡Œï¼ŒåŒæ—¶æ‹¥æœ‰ä¸€ä¸ªè¿›ç¨‹è¡¨ï¼Œè¯¥è¡¨æ—¢å¯ä»¥åŠ¨æ€æ›´æ–°ï¼Œåˆæœ‰åŠ¨ä½œæŒ‰é’®æ¥åˆ†åˆ«ç»ˆæ­¢æ¯ä¸ªè¿›ç¨‹æˆ–ä¸€æ¬¡å…³é—­æ‰€æœ‰è¿›ç¨‹ã€‚**è¿è¡Œç‹¬ç«‹çš„å­è¿›ç¨‹ä¸ä»…å¯ä»¥è®©æ‚¨ä½¿ç”¨å¹¶è¡Œè®¡ç®—ï¼Œè¿˜å¯ä»¥ç¡®ä¿å³ä½¿ Streamlit ä¼šè¯çªç„¶ç»ˆæ­¢ï¼Œå­è¿›ç¨‹ä»å°†åœ¨æœåŠ¡å™¨ä¸Šç»§ç»­è¿è¡Œè€Œä¸ä¼šä¸­æ–­**ã€‚å› æ­¤ï¼Œæ— è®º Streamlit ä¼šè¯å‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Œç”¨æˆ·éƒ½å¯ä»¥å†æ¬¡ç™»å½•å¹¶æŸ¥çœ‹ç»“æœã€‚è¯¥è§£å†³æ–¹æ¡ˆçš„å¦ä¸€ç§æ–¹æ³•æ˜¯å°†è¿™äº›å­æµç¨‹å‘é€åˆ°äº‘æœåŠ¡ä¸Šï¼Œè€Œä¸æ˜¯åœ¨æ‚¨è‡ªå·±çš„æœºå™¨ä¸Šå·¥ä½œâ€”â€”å¦‚æœæ‚¨éœ€è¦é¢å¤–çš„è®¡ç®—èƒ½åŠ›ï¼Œè¿™å¯èƒ½å¯¹æ‚¨æœ‰ä»·å€¼ã€‚****

****ä½¿ç”¨ *Popen* è¿è¡Œå­æµç¨‹ç›¸å½“å®¹æ˜“:****

```
****try:
    subprocess.Popen(command)
except:
    st.write(f"Couldn't run: {command}")
    e = sys.exc_info()
    st.error(e)
updated_processes_table(process_table_sidebar, state)
# see updated_processes_table() implementation on the gist below****
```

****å¦‚æœæ‚¨æ­£åœ¨è¿è¡Œçš„å‘½ä»¤è¦æ±‚ç”¨æˆ·è¾“å…¥ï¼Œè¿™å°±æœ‰ç‚¹æ£˜æ‰‹äº†ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ç”¨*ç®¡é“*æ¥ç®¡ç†:****

```
****process = subprocess.Popen(command, stdin=subprocess.PIPE, stdout=subprocess.PIPE,
                           universal_newlines=True)
try:
    process.communicate("\n".join(user_arguments), timeout=0.2)
except:
    pass
updated_processes_table(process_table_sidebar, state)****
```

****ä¸‹é¢æ˜¯å®ç°æµç¨‹æ§åˆ¶è¡¨çš„æ–¹æ³•:****

# ****7.ä½¿ç”¨ä¸åŒ**ç¯å¢ƒçš„æ¨¡å‹******

> ****é—®é¢˜ : Streamlit æ²¡æœ‰åœ¨ä¸åŒç¯å¢ƒä¸‹ä½¿ç”¨æ¨¡å‹çš„é€‰é¡¹****
> 
> ******è§£å†³æ–¹æ¡ˆ**:è¿è¡Œå­æµç¨‹æ—¶æ¿€æ´» Conda ç¯å¢ƒ****

****![](img/79c623764bfdc5eeac7d1cc5a849f15c.png)****

****ç”¨äºåˆ‡æ¢ python ç¯å¢ƒçš„ UIï¼Œå›¾ç‰‡ç”±ä½œè€…æä¾›****

****å½“å¤„ç†å¤æ‚çš„ CV å’Œ NLP æ¨¡å‹æ—¶ï¼Œä½ ç»å¸¸éœ€è¦ä¸ºæ¯ä¸ªæ¨¡å‹å®‰è£…ä¸åŒçš„ç¼–ç ç¯å¢ƒï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™å®ƒä»¬ä¾èµ–äºç‰¹å®šçš„ *Tensorflow* æˆ– *Pytorch* ç‰ˆæœ¬ï¼Œè¿™äº›ç‰ˆæœ¬ä¸å…¶ä»–å®‰è£…ä¸å…¼å®¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å°†å¸Œæœ›ä»è‡ªå·±çš„ç¯å¢ƒä¸­è°ƒç”¨æ¯ä¸ªæ¨¡å‹å‘½ä»¤ï¼Œå¹¶ä¸”æ‚¨è¿˜åº”è¯¥å°†æ‰€æœ‰çš„ç¯å¢ƒè¾“å‡ºæ•è·åˆ°ä¸€ä¸ªæ—¥å¿—ä¸­(ä¸‹é¢è¦ç‚¹ä¸­çš„å˜é‡ *output_to_log* )ã€‚å½“ç„¶ï¼Œ *Conda* åªæ˜¯ä¸€ä¸ªå¤š env è§£å†³æ–¹æ¡ˆï¼Œä½ ä¹Ÿå¯ä»¥è€ƒè™‘ *Pyenv* æˆ–è€…ç”šè‡³ä½¿ç”¨ *Docker* å›¾åƒæ¥ä»£æ›¿ã€‚****

****ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•è¿è¡Œå­æµç¨‹(å‚è§ä¸Šé¢çš„[éƒ¨åˆ†)ï¼Œåœ¨ä¸åŒçš„ conda ç¯å¢ƒä¸­è¿è¡Œå®ƒä»¬æ˜¯éå¸¸ç®€å•çš„:](#f050)****

# ****8.**åŠ¨æ€**æ ‡ç»˜è®­ç»ƒç»“æœ****

> ******é—®é¢˜**:è®­ç»ƒæ—¶ Streamlit æ— æ³•æ˜¾ç¤ºè®­ç»ƒè¾“å‡º****
> 
> ******è§£å†³æ–¹æ¡ˆ**:å°¾éƒ¨å»ºæ¨¡æ—¥å¿—ï¼Œé—´éš”ç»˜å›¾****

****![](img/d9556226378f34bce6a860489ce2d84b.png)****

****è®­ç»ƒæ¨¡å‹çš„åŠ¨æ€æ—¥å¿—è¾“å‡ºï¼Œç”±ä½œè€…åˆ¶ä½œå›¾åƒ****

****![](img/95886341d77a0e5fb49984747f10e6eb.png)********![](img/d7ef8d0a21a548422e6f960346aaf868.png)****

****è®­ç»ƒæ¨¡å‹æŒ‡æ ‡çš„åŠ¨æ€å›¾ï¼Œå›¾ç‰‡ç”±ä½œè€…æä¾›****

****ä½ æ˜¯åˆèº«ã€åˆèº«è¿˜æ˜¯åˆšå¥½åˆèº«ï¼Ÿå½“å¤„ç†æ·±åº¦å­¦ä¹ æ¨¡å‹æ—¶(å¦‚åœ¨ä¸Šé¢çš„[éƒ¨åˆ†)ï¼Œå¦‚æœä¸åœ¨è®­ç»ƒæœŸé—´ç»˜åˆ¶æ¨¡å‹çš„åº¦é‡æ ‡å‡†ï¼Œå°±å¾ˆéš¾çŸ¥é“è¿™ä¸€ç‚¹ã€‚æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å‘½ä»¤çš„æ–‡æœ¬è¾“å‡ºï¼Œå¹¶é€‰æ‹©å°†å…¶ä¸‹è½½åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿™å¯èƒ½ä¹Ÿå¾ˆæœ‰ç”¨ã€‚æœ€åï¼Œè®¾ç½®åˆ·æ–°åº¦é‡å›¾çš„é—´éš”å¯èƒ½å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸åœ¨ä¸€ä¸ªè®­ç»ƒæ—¶æœŸç»“æŸæ—¶æ›´æ–°ï¼Œå¹¶ä¸”æ—¶æœŸçš„æŒç»­æ—¶é—´å› ä¸åŒçš„æ¨¡å‹å’Œæ•°æ®é›†è€Œå¼‚ã€‚](#13f4)****

# ****9.åœ¨æ–°æ ‡ç­¾ä¸ŠåµŒå…¥ Jupyter & Serving è®¸å¯è¯****

> ******é—®é¢˜**:ç»†æµæ²¡æœ‰è‡ªç”±ç¼–ç **å¹¶ä¸”**æ— æ³•é‡å®šå‘åˆ°æ–°æ ‡ç­¾é¡µä¸Šçš„æ–‡ä»¶****
> 
> ******è§£å†³æ–¹æ¡ˆ**:å°† Jupyter åµŒå…¥ä¸º HTML iframe **å¹¶**åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ª Jupyter é“¾æ¥****

****![](img/16ed22c3c24fe505b3d662f8ca1a647d.png)****

****Jupyter ç¬”è®°æœ¬ä¸­çš„å…è´¹ç¼–ç ï¼Œå›¾ç‰‡ç”±ä½œè€…æä¾›****

****![](img/1251c1e747147a6171fa3d0e3f1f8dfa.png)****

****Jupyter å®éªŒå®¤çš„å…è´¹ç¼–ç å’Œæ–‡ä»¶æ¢ç´¢ï¼Œå›¾ç‰‡ç”±ä½œè€…æä¾›****

****åœ¨åº”ç”¨ç¨‹åºçš„é¡µé¢ä¸ŠåµŒå…¥ Jupyter ç¬”è®°æœ¬/å®éªŒå®¤å®ä¾‹æ˜¯æˆ‘é¢ä¸´çš„æœ€å¤§æŒ‘æˆ˜ä¹‹ä¸€ã€‚æœ‰å¤šç§ç†è®ºæ–¹æ³•å’Œå·¥å…·å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†ä»æˆ‘çš„ç»éªŒæ¥çœ‹ï¼Œâ€œæ˜Ÿæ˜Ÿéœ€è¦å¯¹é½â€é…ç½®æ‰èƒ½å·¥ä½œã€‚æœ€åï¼Œæˆ‘æˆåŠŸåœ°åµŒå…¥äº† Jupyter æ¥ç®€åŒ–å®ƒï¼Œåªä½¿ç”¨äº†ä¸€ä¸ªç›¸å½“æ··æ‚çš„å®‰å…¨é…ç½®ã€‚å¦‚æœè¿™æ˜¯ä½ æ‰€å…³å¿ƒçš„ï¼Œä»æˆ‘çš„é…ç½®å¼€å§‹ï¼Œè¯•ç€å¢åŠ ä¸€äº›é™åˆ¶ï¼ŒåŒæ—¶ä¿æŒä¸€åˆ‡æ­£å¸¸ã€‚****

****Jupyter å¾ˆéš¾å®ç°ï¼Œä½†å€¼å¾—åŠªåŠ›ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œå› ä¸ºå®ƒè®©çŸ¥è¯†æ¸Šåšçš„ **ç”¨æˆ·ç”¨å·²ç»è®­ç»ƒå¥½çš„æ¨¡å‹åŸºæœ¬ä¸Šåšä»»ä½•ä»–æƒ³åšçš„äº‹æƒ…**ï¼Œç”šè‡³æ·»åŠ ä¸€äº›å°šæœªå®ç°çš„é˜¶æ®µï¼Œå¦‚åå¤„ç†ã€å¯è§£é‡Šæ€§ç­‰ã€‚ä½†æ˜¯å‡ºäºå®Œå…¨ç›¸åŒçš„åŸå› ï¼Œ**å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå±é™©çš„å·¥å…·ï¼Œç»™ç”¨æˆ·ä¸€ä¸ªå¯¹æœåŠ¡å™¨**çš„ç»ˆç«¯è®¿é—®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå‘½ä»¤å°±èƒ½æ‘§æ¯å®ƒçš„èƒ½åŠ›â€”â€”æ‰€ä»¥è¦å°å¿ƒä½¿ç”¨ï¼****

## ****Jupyter æ„å‹****

******é¦–å…ˆ**ï¼Œæ‚¨åº”è¯¥åˆ›å»ºä¸€ä¸ª jupyter é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«:****

```
****jupyter notebook --generate-config****
```

******æ¥ä¸‹æ¥ï¼Œ**ç¼–è¾‘æ–‡ä»¶ï¼Œä½¿å…¶å…·æœ‰ä»¥ä¸‹é…ç½®:****

```
****c.NotebookApp.allow_origin = '*'
c.NotebookApp.disable_check_xsrf = True
c.NotebookApp.ip = '*'
c.NotebookApp.notebook_dir = <directory of datasets and outputs>
c.NotebookApp.open_browser = False
c.NotebookApp.port = 8502
c.NotebookApp.token = ''
c.NotebookApp.tornado_settings = {'headers': {
        'Content-Security-Policy': "frame-ancestors http://<Server-IP>:8501/ "
    }
}
c.NotebookApp.use_redirect_file = True****
```

****æœ€é‡è¦çš„é…ç½®æ˜¯*c . notebook app . tornado _ settings*ï¼Œå®ƒå‘Šè¯‰ Jupyter åœ¨å‘ˆç° Jupyter çš„ iframe æ—¶ä¿¡ä»»ä½ çš„ Streamlit åº”ç”¨ã€‚å¦è¯·æ³¨æ„ï¼Œæ‚¨åº”è¯¥å°† *c.NotebookApp.port* è®¾ç½®ä¸ºä¸€ä¸ªå°šæœªè¢« Streamlit ç«¯å£å ç”¨çš„æ•°å­—ã€‚é»˜è®¤çš„ Streamlit ç«¯å£å·ä¸º 8501ï¼Œä»»ä½•æ–°çš„ Streamlit ä¼šè¯éƒ½å°†ä½¿ç”¨ä¸‹ä¸€ä¸ªç©ºé—²ç«¯å£æ‰“å¼€ï¼Œå³ 8502ã€8503 ç­‰ç­‰ã€‚****

## ****ç®€åŒ–ä»£ç ****

****å¯åŠ¨ Jupyter å¾ˆç®€å•ï¼Œä½ æ‰€è¦åšçš„å°±æ˜¯åœ¨åº”ç”¨ç¨‹åºçš„å¼€å¤´æ·»åŠ ä»¥ä¸‹å‡ è¡Œ:****

```
****# in **if __name__ == "__main__":**
command = rf"""jupyter lab --allow-root"""
try:
    subprocess.Popen(command, stdout=subprocess.PIPE, shell=True)
except:
    st.error(f"Couldn't run {script_type}:")
    e = sys.exc_info()
    st.error(e)****
```

****ä½†æ˜¯å°† Jupyter åµŒå…¥ Streamlit æ˜¯ä¸€ä¸ªä¸åŒçš„ã€æ›´é•¿çš„æ•…äº‹:****

## ******ä½¿ç”¨ Jupyter åœ¨æ–°é€‰é¡¹å¡ä¸Šæä¾›è®¸å¯æ–‡ä»¶******

****![](img/cadd2cbb3582984d48ccc9095cbf6142.png)****

****è®¸å¯è¯é“¾æ¥æŒ‡å‘ä¸€ä¸ªæ–°é€‰é¡¹å¡ä¸­çš„è®¸å¯è¯æ–‡ä»¶ï¼Œå³æŒ‰ä½œè€…åˆ†ç±»çš„å›¾åƒ****

****å¦‚æœä½ å¸Œæœ›ä½ çš„åº”ç”¨ç¨‹åºçš„ç”¨æˆ·åœ¨æ‰“å¼€è®¸å¯æ–‡ä»¶æ—¶è¢«é‡å®šå‘åˆ°ä¸€ä¸ªæ–°çš„å•ç‹¬çš„æ ‡ç­¾ï¼Œæ¢å¥è¯è¯´ï¼Œä½ éœ€è¦ä¸€äº›ç½‘ç»œåº”ç”¨ç¨‹åºæ¥æœåŠ¡ä½ çš„è®¸å¯æ–‡ä»¶ã€‚å¹¸è¿çš„æ˜¯ï¼ŒJupyter å®Œå…¨å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œå› ä¸ºå®ƒæ˜¯å»ºç«‹åœ¨ä¸€ä¸ª [Torando web æœåŠ¡å™¨](https://www.tornadoweb.org/en/stable/)ä¹‹ä¸Šçš„ã€‚****

```
****with col9:
    linespace_generator(2)
    while not is_jupyter_up():
        time.sleep(0)
    link = f"[license](http://{state.jupyter_ip}:{state.jupyter_port}/files/Licence.html)"
    st.markdown(link, unsafe_allow_html=True)****
```

# ****10.éƒ¨ç½²ç»è¿‡è®­ç»ƒçš„æ¨¡å‹****

> ******é—®é¢˜** : Streamlit æ²¡æœ‰äº¤ä»˜è®­ç»ƒæ¨¡å‹çš„é€‰é¡¹****
> 
> ****è§£å†³æ–¹æ¡ˆ:åˆ›å»ºä¸€ä¸ª REST API flask web æœåŠ¡****

****![](img/ec7bd9a68acb131fb82541383c142934.png)****

****ä½¿ç”¨ç»è¿‡è®­ç»ƒçš„ FastFCN æ¨¡å‹é¢„æµ‹çƒ§ç“¶ä¾›åº”æ•°æ®ï¼Œå›¾ç‰‡ç”±ä½œè€…æä¾›****

****å»ºç«‹ä¸€ä¸ªæ¨¡å‹å¾ˆå®¹æ˜“ï¼Œä½†æ˜¯æœåŠ¡äºè¿™ä¸ªæ¨¡å‹ï¼Œä»¥ä¾¿äººä»¬å¯ä»¥åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ç›´æ¥ä½¿ç”¨å®ƒâ€”â€”è¿™æ˜¯ä¸€ä¸ªå®Œå…¨ä¸åŒçš„æŒ‘æˆ˜ã€‚**æˆ‘åœ¨è¿™é‡Œä»‹ç»çš„è§£å†³æ–¹æ¡ˆä¸ Streamlit æ— å…³ï¼Œä½†å®ƒæ˜¯ä»»ä½• CRISP-DM åº”ç”¨ç¨‹åºçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå› æ­¤æˆ‘é€‰æ‹©å°†å…¶åŒ…å«åœ¨æœ¬æ–‡ä¸­**ã€‚æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ Flaskï¼Œè¿™æ˜¯ä¸€ä¸ªç›¸å½“ç®€å•çš„å¹³å°ï¼Œå¯èƒ½è¶³ä»¥æ»¡è¶³æ‚¨çš„ POC éœ€æ±‚ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå½“äº‹æƒ…å˜å¾—ä¸¥é‡ï¼Œä½ éœ€è¦ç®¡ç†å¤šä¸ªä¼šè¯ã€å®‰å…¨æ€§ç­‰ç­‰æ—¶ï¼Œä½ å¯èƒ½æƒ³è¦åˆ‡æ¢åˆ° [Django æˆ– Node.js](/python-vs-node-js-which-one-is-best-for-your-project-e98f2c63f020) ã€‚****

****æˆ‘çš„å›¾åƒåˆ†å‰² API æœ‰å‡ ä¸ªç‹¬ç«‹çš„è·¯å¾„:****

> ****[T3ã€www.AwsomeApp.com:8503ã€‘T5](http://www.awsomeapp.com:8503)****
> 
> ****/models:æŸ¥è¯¢è®­ç»ƒå¥½çš„æ¨¡å‹
> /configs:è®¾ç½®é¢„æµ‹å‚æ•°
> /base64:å°†å›¾åƒæ–‡ä»¶æ ¼å¼è½¬æ¢ä¸º base64 å­—ç¬¦ä¸²
> /predict:å‘æ¨¡å‹æä¾›æ•°æ®å¹¶è·å–é¢„æµ‹****

****ä¸‹é¢æ˜¯å®Œæ•´çš„ API å®ç°ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒçš„è¯´æ˜(å°±åœ¨è¦ç‚¹ä¹‹å):****

## ****æŸ¥è¯¢è®­ç»ƒæ¨¡å‹****

*   ****æŸ¥è¯¢å“ªäº›ç®—æ³•å¯ç”¨äºé¢„æµ‹:****

```
****import requests
IP = "<IP address>"
res = requests.get(f"http://{IP}:8503/models"); res.json()****
```

*   ****æŸ¥è¯¢ç‰¹å®šæ¨¡å‹å¯ç”¨çš„è®­ç»ƒæƒé‡:****

```
****params = {"algorithm":"FastFCN", "Model_path":"coco", "return_weights":"True"}
res = requests.post(f"http://{IP}:8503/models", data=params); res.json()****
```

*   ****æŸ¥è¯¢ç‰¹å®šæ¨¡å‹åœ¨å“ªäº›ç±»ä¸Šæ¥å—è®­ç»ƒ:****

```
****params = {"algorithm":"FastFCN", "Model_path":"coco", "return_classes":"True"}
res = requests.post(f"http://{IP}:8503/models", data=params); res.json()****
```

## ****è®¾ç½®é¢„æµ‹é…ç½®****

******é¦–å…ˆï¼Œ**åˆ›å»ºä¸€ä¸ªåŒ…å«é¢„æµ‹é…ç½®çš„ json æ–‡ä»¶ã€‚è¿™äº›é…ç½®å°†ç”¨äºæ‰€æœ‰åç»­é¢„æµ‹ï¼Œç›´åˆ°æ–°çš„é…ç½®æ–‡ä»¶è¢«å‘é€åˆ° APIã€‚****

*****configs.json* æ–‡ä»¶ç¤ºä¾‹:****

```
****{'algorithm': 'FastFCN',
 'Model_path': 'coco',
 'weight': 'FastFCN_coco1',
 'IMAGE_MIN_DIM': '1024',
 'IMAGE_MAX_DIM': '2048',
 'DETECTION_MIN_CONFIDENCE': '0.7',
 'mode': '2',
 'class_show': 'None'}****
```

******å…¶æ¬¡ï¼Œ**å‘é€æ–‡ä»¶å¹¶è¯„ä¼°å½“å‰é…ç½®:****

```
****IP = "<IP>"
files = {'file': open('configs.json', 'rb')}; json.load(files['file'])
files = {'file': open('configs.json', 'rb')}
res = requests.post(f"http://{IP}:8503/configs", files=files)
res = requests.get(f"http://{IP}:8503/configs"); res.json()****
```

## ****å°†å›¾åƒè½¬æ¢ä¸º base64****

****å¯é€‰:å°†å›¾åƒçš„ zip æ–‡ä»¶é¢„å¤„ç†ä¸º base64 å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œä»¥ä¾¿ä»¥åè¾“å…¥æ¨¡å‹è¿›è¡Œé¢„æµ‹:****

```
****files = {'file': open('image_to_predict.zip', 'rb')}; 
res = requests.post(f"http://{IP}:8503/base64", files=files); list_of_base64=res.json()
params['images'] = list_of_base64****
```

## ****åšé¢„æµ‹****

******é¦–å…ˆï¼Œ**å®šä¹‰ä¸€ä¸ªåä¸º *params* çš„å­—å…¸ï¼Œå¸¦æœ‰ä¸€ä¸ª *images* é”®ï¼Œå…¶å€¼æ˜¯ä¸€ä¸ª base64 å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œä»£è¡¨é¢„æµ‹çš„å›¾åƒ:****

****`params = {'images':[<image0_base64>,<image1_base64>,<image2_base64>]}`****

****å°†æ­¤é…ç½®è®¾ç½®ä¸º True ä»¥è·å–å›¾åƒæ–‡ä»¶å½¢å¼çš„ç»“æœï¼Œè€Œä¸æ˜¯ base64 å­—ç¬¦ä¸²:****

****`params['create_images'] = True`****

******äºŒã€**æå‡ºé¢„æµ‹è¯·æ±‚ï¼Œå¹¶è¯„ä¼°ç»“æœ:****

```
****IP = "<IP>"
res = requests.post(f"http://{IP}:8503/predict", data=params)
res = res.json()['Responses']
predicted_image0 = res[0][1]
json_result0  = res[0][0]
print(f"Classes found: {json_result0['results']['class_name']}") 
print(f"Prediction scores: {json_result0['results']['scores']}")
print(f"Bounding Boxes: {json_result0['results']['rois [y_min, x_min, y_max, x_max]']}")****
```

# ****æ‘˜è¦****

****ä½¿ç”¨ Streamlit å¼€å‘ä¸€ä¸ª ML åº”ç”¨ç¨‹åºå°±åƒä¹˜åæ¸¸ä¹å›­é‡Œæœ€ç–¯ç‹‚çš„è¿‡å±±è½¦:è¶…çº§å¿«ï¼Œéå¸¸åˆºæ¿€ï¼Œæœ‰æ—¶ä»¤äººçœ©æ™•ï¼Œä½†è‚¯å®šéå¸¸æœ‰è¶£ã€‚ç„¶è€Œï¼Œåœ¨ Streamlit ä¸­å¿«é€Ÿå®ç°æ‚¨å‡ºè‰²çš„æœºå™¨å­¦ä¹ æƒ³æ³•åï¼Œå‡ ä¹ä¸å¯é¿å…çš„æ˜¯ï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºå°†ä¸ä¼šçœŸæ­£å¯ç”¨ã€‚è¿™æ˜¯ç”±äº Streamlit ç¼ºä¹ä¸€äº›åŸºæœ¬åŠŸèƒ½é€ æˆçš„:[ä¿å­˜åˆ·æ–°å’Œä¸¢å¤±è¿æ¥çš„å·¥ä½œ](#7b09)ã€[ä¿å­˜å·¥ä½œä»¥å¤‡åç”¨](#1bd6)ã€[æ–‡ä»¶æµè§ˆå™¨](#d121)ã€[ç™»å½•å±å¹•](#35fe)ã€[å¤šé¡µåº”ç”¨](#7438)ã€[è¿è¡Œé•¿æ—¶é—´å¹¶è¡Œè®¡ç®—](#f050)ã€[ä½¿ç”¨ä¸åŒç¯å¢ƒçš„æ¨¡å‹](#13f4)ã€[åŠ¨æ€ç»˜åˆ¶è®­ç»ƒç»“æœ](#907e)ã€[åµŒå…¥ Jupyter å¹¶åœ¨](#4957)****

****ä½ å¯ä»¥å°è¯•è‡ªå·±å®ç°è¿™äº›åŠŸèƒ½ï¼Œç”šè‡³åœ¨è°·æ­Œä¸Šâ€œæ·éª°å­â€ï¼Œä½†ä¸ºä»€ä¹ˆè¦æµªè´¹æ—¶é—´å‘¢ï¼Ÿæ‰€æœ‰è¿™äº›åŠŸèƒ½çš„ä»£ç éƒ½åœ¨ä¸Šé¢â€”â€”æ‰€ä»¥è¯·åå¥½ï¼Œæ”¾æ¾ï¼Œäº«å—æ—…ç¨‹å§:)****

> ****æ¬¢è¿åˆ†äº«æ‚¨çš„åé¦ˆï¼Œå¹¶é€šè¿‡ LinkedIn è”ç³»æˆ‘ã€‚****
> 
> ****æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œç¥æ‚¨å¥½è¿ï¼ğŸ€****