# 因果推理导论(第一部分)

> 原文：<https://towardsdatascience.com/introduction-to-causal-inference-part-1-d65f2e1ab89?source=collection_archive---------10----------------------->

## 在这里，我们讨论因果推断的一些基本概念，以形成对测量治疗效果的基本理解，理解什么是 SUTVA、科学表和其他概念。

![](img/0cc7b30a2b8a4a6ac1753c2910b79ffe.png)

Bradyn Trollip 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

在我们有大量虚假“发现”的现代世界，理解因果推理机制变得越来越重要。媒体推测不同药物、饮食和生活方式的有效性。问题是，在许多课题上都有不错的研究，但人们通常不理解它们，因为它们是用对其他科学家来说乏味的语言写的。我希望这篇文章能帮助你学习和理解因果推理的一些基本概念，从而更好地理解科学研究，不被媒体上的虚假“发现”所误导。

我将把这篇文章分成两部分，因为主题相当广泛。这是第一部分，我们将讨论因果推理的主要范式、度量标准和基本问题。在第二部分中，我们将研究一些更高级的概念，这些概念建立在我们在这一部分中讨论的思想之上。你可以在这里找到《T4》第二部。

整个讨论都是从这个问题开始的:好吧，这到底是怎么回事？这门科学是关于什么的？
这里我们不是说现在数据科学家流行的预测、分类等问题。我们谈论的是实验和观察研究，其主要目标是找出应用于样本或人群的某种治疗的效果。你可以把这想象成医学试验:我们有两组，第一组的参与者服用新药(*治疗组*)，另一组的参与者服用安慰剂(*对照组*)。我们的目标是了解新药的效果，并对其进行评估。然而，正如我们将在本文后面看到的，一些在数据科学中非常流行的概念，如线性和逻辑回归，在解决因果推理的基本问题时非常有用。

# **“经典范式”和“潜在结果框架”**

有两种范式可用于分析研究数据:
*经典范式*着眼于潜在原因(如人们吸烟)和观察到的结果(如肺癌)之间的联系，并试图找出这种关系是否是因果关系。这里问的主要问题是:“要发现吸烟导致肺癌，我们应该知道些什么？”

*潜在结果框架*从不同的角度看待同一个问题。这个框架说的是每个单位有两种(简化情况下)潜在结果:治疗中的潜在结果 *(Y(1))* 和不治疗或控制中的潜在结果 *(Y(0))。*这里的主要问题是:“如果一个人吸烟和不吸烟会有什么不同？”

经典范式主要基于关联，声称关联越强，潜在结果越可能，在我看来，这是解决因果推理问题的更可取的方式，尽管当我们谈论现实世界的观察研究时，这带来了一些困难。我们稍后会谈到它们。

也就是说，潜在结果框架声称所有的潜在结果都已经存在，我们只能选择我们想要观察的结果。这显示在下面的科学表格中，该表格是由姜懿翔·鲁宾在鲁宾(1978)“因果效应的贝叶斯推断:随机化的作用”中介绍的。

![](img/ee53419563882d54e761cd0269abbd20.png)

科学表格示例

D. Rubin 自己也很好地描述了这种表的价值:“所有潜在可观察值的明确表示导致大量的符号，但一旦建立，符号允许几乎立即得出重要的结论”。

基本上，科学表描述了以下列方式收集的整个数据集:

*   单位:单位或单位组的索引(用于更大的研究)
*   协变量:这些都是治疗前的参数，我们可以在治疗前观察到，并可以用来调整我们的研究设计(为了简单起见，上图中只显示了一个协变量)
*   处理:表示哪些单元被处理(1)以及哪些单元在对照组中(0)
*   潜在结果:Y(1)是每个单位的潜在结果向量，如果他们接受治疗，Y(0)-如果他们在对照组。实际上，我们并不知道这两种价值观
*   观察到的:那是我们在实验中观察到的实际值。它等于一个潜在的结果，取决于他们是否得到治疗或得到控制。

# **сausal estimands 和因果推理的基本问题**

因此，当我们知道如何描述从研究中收集的数据时，是时候计算一些指标了。因果推断的目标是计算治疗效果。简单地说——我们想知道治疗对人群/样本/亚群的影响有多大。这有助于我们理解基本的因果关系，并基于这种理解做出决定。

例如，这些估计值在临床试验中用于确定一种新药是否有效。在此基础上，当局决定是否允许这种药物上市。

因此，这些指标都非常相似，只是衡量对象不同(总体/样本/亚组)。所有这些计算起来都相当简单，基本上对每个单位的因果效应的处理是:

![](img/457490ef134c3cde571bbf53353222fb.png)

一级方程式赛车。一个单位的处理效果。

然而，因果推理的基本问题变得更加复杂，尤其是潜在结果框架，因为我们不知道同一个单元的两个潜在结果。我们只知道其中的一个——被观察到的那个。

这个问题基本上有两种可能的解决方案:

1.  科学的解决方案。这里，我们利用我们对环境的先验知识来推断另一个潜在的结果(我们没有观察到的)。我们还可以实现一些假设，使因果推理合法，如:

*   T *时间稳定性—*Y(0)的值不取决于何时将该单元放入控制组。基本上单位时间稳定。
*   *因果短暂性—* Y(1)不受单元优先受控(Y(0))这一事实的影响。这样就可以在治疗组和对照组之间转换单位。
*   *单位齐性—*Yi(1)= Yi '(1)，Yi(0) = Yi'(0)的值。这意味着，对于具有相同解释变量(协变量)的单元，所有潜在结果的期望值是相同的。

2.统计解决方案。当其他潜在的结果即使在这些假设下也不明显时，我们使用基于以下技术的“欺骗”统计方法:利用总体。相同的单元可以在不同的时间点进行不同的处理，或者不同的单元可以同时进行不同的处理。使用这些我们可以做以下的技巧:

*   *找到另一个治疗组中一个单位的近似替代物*,如果它在协变量方面与我们正在比较的单位相等，则使用它。然后我们可以用公式 1 计算个体治疗效果。
*   *估计平均因果效应*对样本或总体中的单位进行平均。

![](img/c819514d43d45872119f806f43e5bdff.png)

方程式 2。平均治疗效果的估计。

以下是计算平均治疗效果的主要指标:

1.  *样本平均处理效果*(状态):

![](img/32afa88de103c4c35f9a42e9db87f3dc.png)

方程式 3。安全

2.*条件平均治疗效果* (CATE)。它本质上与 SATE 相同，但以单位的协变量为条件。对它们的调节使得子群 n_x:

![](img/db3766b38b79a76a1e9c4ab19d0b0dc0.png)

方程式 4。美食

3.*人群平均治疗效果* (PATE)。同样的事情，但对于整个人口 N:

![](img/e942448560575ddaa0b6ba1a81003b17.png)

方程式 5。佩特

> 它来了。因果推断的一个基本问题是计算在不同的环境中，在不同的限制条件下，在不同的单位分布下的平均治疗效果，但主要问题是——我们不知道相同单位的两种潜在结果。

估计平均治疗效果的方法之一是使用回归。事实证明，我们可以建立一个回归模型，使其中一个系数的估计值等于治疗效果的估计值。此外，当存在明显的单位组(如性别、年龄、地理集群、不同职业等)时，这被证明是对协变量进行调整的好方法。)，它们的混合将对治疗效果估计产生一些额外的偏差。我们将在文章的第二部分讨论这些技术。

在文章的这一部分，我想强调的最后一点也是一个基本假设，它对于计算这些影响是必要的，并且在许多其他方面也是有用的。称为*稳定单位治疗值假设(SUTVA)* 。它由两部分组成:

1.  “不干涉”的假设。简而言之，这意味着研究中任何单位的潜在结果都不会受到应用于该研究中其他单位的治疗的影响。
    这个假设不成立的情况的一个例子:一对夫妇中的一方接种了疫苗，这个决定可以影响另一方的决定。
2.  “没有多种治疗方案”的假设。基本上，它是说无论一个单位如何得到一个待遇，潜在的结果 Y(1)都是一样的。
    这个假设不成立的情况的一个例子:当一个人得到一种注射形式的药物而不是一种药丸时，他/她将得到更快和更强的效果，因为药物直接进入血液。

总结一下我们深入因果推理的第一部分，我想鼓励你花些时间自己深入这个主题。因果推理是包括疫苗在内的所有现代发现的基础(理解疫苗的临床试验结果在 2020 年变得如此重要)。这门科学乍看起来似乎微不足道，而且在发现之初就认为这是我的错误。因果推理可以开阔你的眼界，让你了解科学研究的世界，并帮助你设计好自己的实验。

点击阅读[第 2 部分继续探索！](/introduction-to-causal-inference-part-2-13dc0fe2eb90)