# 为什么生产机器学习会失败——以及如何修复它

> 原文：<https://towardsdatascience.com/why-production-machine-learning-fails-and-how-to-fix-it-b59616184604?source=collection_archive---------19----------------------->

## 通过避免这些常见的陷阱，成功部署您的 ML 模型

![](img/772d54474ab4f380c2c95b4766881ed3.png)

图片由 [Unsplash](http://www.unsplash.com) 上的[雅各布·基索](https://unsplash.com/photos/xBxSkvaJz74)提供。

*机器学习已经成为任何严肃的数据团队的必备工具:增强流程，生成更智能、更准确的预测，并普遍提高我们利用数据的能力。然而，在理论上讨论 ML 的应用与在生产中实际应用 ML 模型大相径庭。*

[*巴尔摩西*](https://www.linkedin.com/in/barrmoses/) *、CEO 蒙地卡罗、* [*马努慕克吉*](https://www.linkedin.com/in/manumukerji/) *、工程副总裁— AI、数据和分析、8x8、* *走过* ***共同挑战*******对应解决方案*** *让 ML 成为你的力量倍增器**

*从在谷歌地图上生成你的周末自行车路线，到帮助你在网飞发现下一个值得狂欢的节目，机器学习(ML)已经远远超出了理论上的时髦词汇，成为我们大多数人每天都在使用的强大技术。*

*对于现代企业来说，对 ML 的需求从未如此强烈。但是，尽管某些行业已经被人工智能带来的自动化所改变——想想金融领域的 [**欺诈检测**](https://www.businessinsider.com/ai-in-banking-report) 和电子商务领域的 [**个性化产品推荐**](https://customerthink.com/explained-working-and-advantages-of-a-recommendation-engine/)——残酷的事实是，许多人工智能项目还没有公开就失败了。*

*2020 年 10 月， [Gartner 报告称](https://www.gartner.com/en/newsroom/press-releases/2020-10-19-gartner-identifies-the-top-strategic-technology-trends-for-2021#:~:text=Gartner%20research%20shows%20only%2053,a%20production%2Dgrade%20AI%20pipeline.)只有 53%的项目从原型阶段进入生产阶段——而且是在具有一定人工智能经验的组织中。对于仍在努力发展数据驱动文化的公司来说，这个数字可能要高得多，据估计[的一些失败率](https://venturebeat.com/2019/07/19/why-do-87-of-data-science-projects-never-make-it-into-production/)飙升至近 90%。*

> *谷歌、脸书和亚马逊等数据优先的科技公司正在用 ML 改变我们的日常生活，而其他许多资金雄厚、才华横溢的团队仍在努力实现他们的计划。但是为什么会这样呢？我们如何解决这个问题？*

***我们分享现代数据团队在大规模采用 ML 时面临的四个最大挑战，以及如何克服它们。***

# *实际业务需求和 ML 目标不一致*

*![](img/872d25e3e511feb2cf07dd6bf915c149.png)*

*当你的商业目标和 ML 目标不一致时，你所有最好的计划都注定会失败，就像你用陈旧数据训练的模型一样。图片由 [Unsplash](https://unsplash.com/s/photos/machine-learning) 上的 [Charles Deluvio](https://unsplash.com/photos/pjAH2Ax4uWk) 提供。*

*第一个挑战是战略性的，而不是技术性的:从解决方案开始，而不是从明确定义的问题开始。*

*随着公司竞相将 ML 纳入他们的组织，领导者可能会雇用数据科学家和 ML 实践者来自动化或改进流程，而没有对哪些问题实际上适合 ML 解决的[](https://developers.google.com/machine-learning/problem-framing/good)**有成熟的理解。即使业务问题非常适合 ML，如果没有一个共享的成功定义，项目可能会在实验模式中被搁置数月，而利益相关者等待一个理想化的机器般的完美水平，这是永远无法达到的。***

***机器学习不是魔术，它不会完美地解决每个问题，本质上应该随着时间的推移继续进化。有时，一个模型仅仅达到与人类相同的结果，这是一个有价值的项目——错误和所有。***

> ***在开始任何项目之前，询问你的团队或利益相关者:*我们正在试图解决什么业务问题？为什么我们相信 ML 是正确的道路？这个项目试图达到的商业价值的可测量的阈值是什么？“足够好”是什么样子的？****

***如果没有这些清晰的、共享的定义，许多有价值的 ML 项目将永远无法进入生产，宝贵的资源将被浪费。使用 ML 解决一个商业问题，而不仅仅是开始一个 ML 项目来检查 ML 框。***

# ***不一般化的模型训练***

***有了清晰定义的业务问题和目标成功度量，您的潜在陷阱变得更加技术性。在模型训练阶段，与您的训练数据或模型拟合相关的问题是未来失败的最大可能原因。***

***[**模型训练**](https://elitedatascience.com/model-training) 的目标是开发一个模型，该模型可以进行归纳，或者在给定新数据时做出准确的预测，因为它了解数据点之间的关系，并且可以识别趋势。您的训练数据集应该干净、大小合适，并且能够代表模型在生产中需要处理的实时数据。没有人在生产环境中见过干净的数据。仅仅为了准备好数据，就要花费大量的时间进行清理、标记和特征工程。***

***代表性的训练数据也很关键:如果训练数据没有反映模型将遇到的实际数据集，那么一旦进入测试或生产阶段，模型可能就无法运行了。***

***训练期间可能发生的另一个问题是过度适应和适应不足。当一个模型学习*太多*并且产生与你的训练数据太接近的输出时，过度拟合就发生了。***

***拟合不足恰恰相反-您的模型没有学到足够的知识，甚至不能对训练数据本身做出有用的预测，更不用说它在测试或生产中会遇到的新数据了。***

# ***测试和验证问题***

***当您测试和验证您的模型时，合并多个数据流并进行更新以提高性能可能会带来新的挑战。数据源、模型参数和 [**特征工程**](https://en.wikipedia.org/wiki/Feature_engineering) 的变化都会引入误差。***

> ***这也可能是您在模型中检测到过度拟合或欠拟合的阶段——在训练期间表现出色但在测试期间未能产生有用结果的模型可能是过度拟合的。***

***即使在像谷歌这样有大量人工智能工程师的公司，你的产品模型中的惊喜也会出现。***

# ***部署和服务障碍***

***部署 ML 项目很少是简单的，团队通常不能使用一致的工作流来做到这一点——因为 ML 项目解决了广泛的业务问题，所以有类似的广泛的方法来托管和部署它们。例如，一些项目需要定期进行批量预测，而其他项目则需要在应用程序发出使用模型进行预测的 API 请求时按需生成和交付预测。(这是为什么使模型适用于不同用例具有挑战性的部分原因，无论它对那些认为 ML 模型比狭隘的功能更有魔力的高管来说听起来多么有吸引力。)***

***此外，一些 ML 项目可能需要大量资源，跨职能团队需要就部署的优先级达成一致。工程师们只能生产这么多东西，正如我们已经讨论过的，ML 项目不仅仅是模型和算法:大多数项目需要基础设施、警报、维护等等来成功部署。***

> ***这就是为什么在一开始就清楚地阐明业务问题，就成功的样子达成一致，设计端到端的解决方案，并对您的 ML 项目相对于其他优先事项的价值有一个共同的理解是如此重要。没有这个战略计划，您的项目可能永远得不到最终投入生产所需的工程资源。***

***仅举一个例子，网飞从未将其[百万美元大奖的推荐算法](https://www.wired.com/2012/04/netflix-prize-costs/)投入生产，因为获奖模型实现起来很复杂——而是选择了另一个更容易集成的提交。***

# ***生产中可扩展 ML 的策略***

***![](img/590307bc58511bf9e4b164218c63e90f.png)***

***机器学习不是魔法，但它很强大——而且经常被误解。有点像这个纸简笔画。图片由 [Unsplash 上的](http://www.unsplash.com/) [Kobu 机构](https://unsplash.com/photos/67L18R4tW_w)提供。***

***除了战略规划和人员配备，你还可以采取一些具体的步骤来帮助扩大你的 ML 生产规模。***

## ***倚入云端***

***如果你的团队在本地工作而不是在云中工作，是时候改变了。在云中工作是保持模型培训和部署工作流程同步的“粘合剂”。大多数供应商和开源工具都是为云开发的，一旦有了云，自动化过程就容易多了。测试、培训、验证和模型部署需要是一个可重复的过程，它不应该从本地 Python 代码进入生产环境。***

## ***利用开发运维方法***

***正如我们已经讨论过将 DevOps 实践应用于数据，像 [**设置数据 SLA**](https://www.montecarlodata.com/how-to-make-your-data-pipelines-more-reliable-with-slas/)和沿着[可观察性支柱](https://www.montecarlodata.com/introducing-the-5-pillars-of-data-observability/)测量数据健康，ML 团队可以跟随 DevOps 的脚步，通过实现 [**持续集成(CI)和持续交付(CD)**](https://www.infoworld.com/article/3271126/what-is-cicd-continuous-integration-and-continuous-delivery-explained.html) **模型**，同时引入[持续培训(CT)](https://cloud.google.com/solutions/machine-learning/mlops-continuous-delivery-and-automation-pipelines-in-machine-learning) 。通过设置敏捷构建周期和工具，ML 团队可以更快地将变更交付到代码库中，并提高整体性能。***

> ***类似于 DevOps 最佳实践，ML 团队应该使用容器化来一致地在任何类型的设备上运行软件，并使工程师的工作生产化更简单。保持一致和可见的构建过程，更频繁地部署较小的更改，可以让团队更顺利地工作，并更深入地了解什么工作得好，什么不好。可见性还有助于潜在的代码“看门人”信任构建过程，并加速 ML 团队的工作流程。***

***投入时间建立战略 MLOps 团队和流程将有助于降低项目在生产前停滞的可能性，并使持续改进变得可行，从而为每个项目的长期成功奠定基础。***

## ***投资于可观察性和监控***

***最后，机器学习的首要规则是，你的输出只会和你的输入一样好。健康的数据对 ML 来说是绝对必要的。如果没有干净的数据和有效的管道，模型将无法充分发挥其潜力，并且可能无法做出准确的预测。***

***当您依赖 ML 来做出重要的商业决策时，您不会希望在那些输出已经交付之后才发现管道破裂或数据不准确。***

> ***这就是为什么 [**数据可观察性**](https://www.montecarlodata.com/introducing-the-5-pillars-of-data-observability/) 提供了对数据健康状况的全面了解和全面监控，并且可以首先防止坏数据到达您的 ML 模型，这是非常值得投资的。***

# ***实现大规模生产***

***![](img/f16f96597788e730c8a98b77b2187b71.png)***

***你不需要设计下一个动作激活的安全摄像头来影响你的 ML。图片由[马太·亨利](https://unsplash.com/photos/fPxOowbR6ls)在 [Unsplash](http://www.unsplash.com/) 上提供。***

***机器学习不是魔法，但它很强大——而且经常被误解。***

***尽管如此，通过战略、流程和技术的正确组合，ML 项目可以提供竞争优势并推动每个行业的发展。***

***即使您没有构建下一代欺诈检测算法或虚拟个人助理，我们也希望这些最佳实践能够帮助您迈向(成功！)大规模部署 ML。***

******你最大的 ML 或数据痛点是什么？我们希望收到您的来信！伸出手去*** [***巴尔摩西***](http://www.montecarlodata.com) ***或者*** [***摩奴慕克吉***](https://medium.com/@next2manu) ***。******

***[***Lior GAVI sh***](https://www.linkedin.com/in/lgavish/)***，蒙特卡洛 CTO，对本文有贡献。******