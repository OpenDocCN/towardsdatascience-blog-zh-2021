# åˆ†ä¸‰æ­¥åœ¨ Heroku ä¸Šéƒ¨ç½²æ‚¨çš„ Python æœºå™¨å­¦ä¹ æ¨¡å‹

> åŸæ–‡ï¼š<https://towardsdatascience.com/deploy-your-python-machine-learning-models-on-heroku-in-3-steps-dc5b6aca73d9?source=collection_archive---------19----------------------->

## åœ¨ Flask Web åº”ç”¨ç¨‹åºä¸Šéƒ¨ç½² ML æ¨¡å‹ä»¥ä¾›å…¬å…±ä½¿ç”¨çš„è¯´æ˜æ€§æ•™ç¨‹ã€‚

**å…ˆå†³æ¡ä»¶:**

1.  **Heroku** è´¦å·(å¦‚æœä½ è¿˜æ²¡æœ‰çš„è¯ï¼Œåœ¨ã€https://www.heroku.com/ã€‘çš„æ³¨å†Œ)
2.  **GIT** å®‰è£…åœ¨æœ¬åœ° PC ä¸Š(å…è´¹åœ¨[https://git-scm.com/downloads](https://git-scm.com/downloads)å®‰è£… GIT)
3.  ä¸€ä¸ªç”¨ python å¼€å‘çš„ç»è¿‡è®­ç»ƒçš„ **ML æ¨¡å‹**(æœ¬æ•™ç¨‹ä¸­å°†å…¶å‘½åä¸º *model.pkl* )ã€‚

## æœ¬æ•™ç¨‹çš„ç›®çš„

å› æ­¤ï¼Œåœ¨æ‚¨çš„æœ¬åœ°å¼€å‘ç¯å¢ƒä¸­ï¼Œæ‚¨æœ‰ä¸€ä¸ªå·¥ä½œçš„ ML æ¨¡å‹ï¼Œå¹¶ä¸”æ‚¨åœç•™åœ¨â€œæ¨¡å‹éƒ¨ç½²â€é˜¶æ®µï¼Œå¦‚ä¸‹é¢çš„ ML ç”Ÿå‘½å‘¨æœŸæ‰€ç¤º:

![](img/86b4e2c8208bf774f0e1268082f8cf92.png)

ä½œè€…å›¾ç‰‡|å±•ç¤º ML ç”Ÿå‘½å‘¨æœŸ

é‚£ä½ æ¥å¯¹åœ°æ–¹äº†ï¼æœ¬æ–‡çš„å…¶ä½™éƒ¨åˆ†å°†å…³æ³¨äº**æ¨¡å‹éƒ¨ç½²æ­¥éª¤**ã€‚å®Œæ•´çš„æºä»£ç å¯ä»¥åœ¨æˆ‘ä½äº https://GitHub.com/incubated-geek-cc/your-custom-app-name çš„ github è·å¾—ï¼Œä½ å¯ä»¥éšæ„æŠŠå®ƒä½œä¸ºä½ è‡ªå·±çš„â˜ºä½¿ç”¨

## æ³¨:**æœ¬æ•™ç¨‹ä¸­ä½¿ç”¨çš„æ ·æœ¬** ML æ¨¡å‹**ç”¨äºé¢„æµ‹ä¸€ä¸ªäººåŸºäºå‡ ä¸ªç‰¹å¾(é€»è¾‘å›å½’æ¨¡å‹)é€‰æ‹©å¯»æ±‚ç²¾ç¥ä¿å¥æ²»ç–—çš„å¯èƒ½æ€§ã€‚æ ¹æ®æ‚¨çš„ ML æ¨¡å‹çš„ç”¨ä¾‹ï¼Œåœ¨ä¸‹é¢çš„æ¼”ç¤ºæ–‡ä»¶ä¸­ç›¸åº”åœ°è°ƒæ•´å‚æ•°ã€‚**

# **ç¬¬ä¸€æ­¥ã€‚åœ¨ Heroku ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„åº”ç”¨ç¨‹åº**

![](img/47a631057eb97cee4515581e6590c1b8.png)

å›¾ç‰‡ä½œè€…| **ç¬¬ä¸€æ­¥:**ç™»å½• [Heroku](https://www.heroku.com/) è´¦æˆ·åï¼Œåœ¨é€‰æ‹©â€œåˆ›å»ºæ–°åº”ç”¨â€ã€‚**ç¬¬äºŒæ­¥**:è¾“å…¥ä½ æƒ³è¦çš„ web app åç§°ã€‚**ç¬¬ä¸‰æ­¥**ã€‚é€‰æ‹©â€œåˆ›å»ºåº”ç”¨ç¨‹åºâ€ã€‚

# **ç¬¬äºŒæ­¥ã€‚å¯åŠ¨æœ¬åœ°ç”µè„‘ä¸Šçš„é¡¹ç›®æ–‡ä»¶å¤¹**

ä½œè€…çš„ä»£ç ç‰‡æ®µ|å°† ML æ¨¡å‹( **model.pkl** )å’Œä»¥ JSON æ ¼å¼( **X_test.json)** å­˜å‚¨çš„æ¨¡å‹è¾“å…¥çš„åˆ—å‚æ•°æ”¾åœ¨â€œmodelsâ€æ–‡ä»¶å¤¹ä¸­ã€‚

## **æ¯ä¸ªæ–‡ä»¶å†…çš„å†…å®¹(requirements.txtï¼Œruntime.txtï¼ŒProcfileï¼Œapp.pyï¼ŒX_test.jsonï¼Œindex.htmlï¼Œrun_app.bat):**

## è§£é‡Šå’Œæ³¨æ„äº‹é¡¹:

*   **requirements.txt** â€”åŒ…å«è®¾ç½® Flask web åº”ç”¨ç¨‹åºå’ŒåŠ è½½ ML æ¨¡å‹çš„æ‰€æœ‰ python ä¾èµ–é¡¹ã€‚*å»ºè®®:ä¸ºäº†é¿å…æœ¬åœ° PC ä¸Šçš„ python åº“ç‰ˆæœ¬å†²çªï¼Œå»ºè®®åœ¨ python è™šæ‹Ÿç¯å¢ƒä¸­è¿›è¡Œå¼€å‘å·¥ä½œã€‚*

åˆ›å»ºä¸€ä¸ª python è™šæ‹Ÿç¯å¢ƒâ€”(å°†å…¶å‘½åä¸º**)ã€‚envã€æœ¬æ•™ç¨‹ä¸­çš„ ï¼Œæ‰“å¼€å‘½ä»¤æç¤ºç¬¦å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤:**

ä½œè€…ä»£ç ç‰‡æ®µ|è¯·æ³¨æ„ï¼Œä¸Šè¿°å‘½ä»¤é€‚ç”¨äº Windows æ“ä½œç³»ç»Ÿã€‚å¯¹äº MacBook/Unix ç”¨æˆ·ï¼Œè¿è¡Œ`**source env/bin/activate** in your shell terminal instead to activate your python virtual environment.`

**é‡è¦: **requirements.txt** ä¸­çš„** Python åŒ…ä¾èµ–åº”è¯¥åŒ…æ‹¬ç”¨äºå¼€å‘ä½ çš„ ML æ¨¡å‹çš„*åŒ…ä»¥åŠç”¨äº web app éƒ¨ç½²çš„*Flask+guni corn**ã€‚**

> *è¦è‡ªåŠ¨æå– python ä¾èµ–é¡¹ï¼Œè¿è¡Œå‘½ä»¤:*pip freeze>requirements . txt**

*   ***runtime . txt**-æŒ‡å®šç”¨äºå¼€å‘æ¨¡å‹çš„ Python ç‰ˆæœ¬ã€‚*

> **ä¾‹å¦‚å¯¹äº python 3 . 7 . 9 ç‰ˆæœ¬ï¼Œæ–‡ä»¶å†…å®¹åº”è¯¥æ˜¯:* python-3.7.9*
> 
> **å¯¹äº python 3 . 7 . 2 ç‰ˆæœ¬ï¼Œæ–‡ä»¶å†…å®¹åº”ä¸º:* python-3.7.2*

***é‡è¦æç¤º:**è¯·æ³¨æ„ï¼Œæœ¬æ–‡ä»¶*åŒºåˆ†å¤§å°å†™*å’Œ*ç²¾ç¡®*ã€‚å…³é”®æ˜¯â€œpython-3.7.xâ€è¦ç”¨å°å†™å­—æ¯è¾“å…¥ï¼Œä¸èƒ½æœ‰ç©ºæ ¼ã€‚å¦‚æœå¦å¤–æŒ‡å®šï¼ŒHeroku ç‰ˆæœ¬å°†*å¤±è´¥*ï¼Œä¾‹å¦‚â€œ **P** ython-3.7.9â€(å¤§å†™å­—æ¯â€œPâ€)æˆ–â€œpython 3.7.9â€(æ—  hypenâ€œ-â€)ã€‚*

*   ***X_test.json** â€”æ‚¨çš„ ML æ¨¡å‹çš„è¾“å…¥å‚æ•°åç§°çš„ json æ•°ç»„ã€‚*
*   ***index.html**â€”ä¸ºç”¨æˆ·é€‰æ‹©è¾“å…¥å’Œæ£€ç´¢æ¨¡å‹è¾“å‡ºç»“æœè€Œè®¾ç½®çš„æç®€ç”¨æˆ·ç•Œé¢ã€‚*

***é‡è¦æç¤º:**åŠ¡å¿…æ³¨æ„åœ¨**index.html**ä¸­æ‰¾åˆ°çš„è¡¨å•*è¾“å…¥åç§°*ä¸ **X_test.json** ä¸­é™ˆè¿°çš„*ç‰¹å¾*ç›¸å¯¹åº”*

*è¦åœ¨ localhost ä¸Šæµ‹è¯• web åº”ç”¨ç¨‹åºï¼Œè¯·ç»§ç»­è¿è¡Œ **run_web.bat** æ–‡ä»¶ï¼Œå¹¶æ‰“å¼€æµè§ˆå™¨å¯¼èˆªåˆ° [http://localhost:5000/](http://localhost:5000/) ã€‚æ‚¨åº”è¯¥èƒ½å¤ŸæŸ¥çœ‹ä»¥ä¸‹ç”¨æˆ·ç•Œé¢:*

*![](img/622eed8198826b4bb0852fa365c5dad0.png)*

*ä½œè€…å›¾ç‰‡|é€šè¿‡ **run_app.bat** æ–‡ä»¶ä»æœ¬åœ°ä¸»æœºè¿è¡Œ Flask app æ—¶**index.html**æ–‡ä»¶çš„é¢„è§ˆ*

## *é€šè¿‡é€‰æ‹©ä»¥ä¸‹è¡¨æ ¼è¾“å…¥ï¼Œè¾“å‡º ML æ¨¡å‹çš„ç»“æœ:*

*![](img/0a591bcb9c6b712c70e6ffdd3a73557c.png)*

*å›¾ç‰‡ä½œè€…|æ³¨æ„ï¼Œåœ¨å·¦è¾¹ï¼Œé¢„æµ‹çš„ç­”æ¡ˆæ˜¯â€œæ˜¯â€ï¼Œè€Œåœ¨å³è¾¹ï¼Œé¢„æµ‹çš„ç»“æœæ˜¯â€œå¦â€ï¼Œè¿™å–å†³äºç”¨æˆ·çš„é€‰æ‹©ã€‚*

# *ç¬¬ä¸‰æ­¥ã€‚åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­å¯åŠ¨ GIT*

*ç¡®ä¿ web åº”ç”¨ç¨‹åºåœ¨æœ¬åœ° PC ä¸Šé¡ºåˆ©è¿è¡Œåï¼Œå³é”®å•å‡»å¹¶æ‰“å¼€é¡¹ç›®æ–‡ä»¶å¤¹ä¸­çš„ Git Bash ç»ˆç«¯ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤:*

*![](img/726a7788ad2d95b9d8f7633682539c58.png)*

*ä½œè€…å›¾ç‰‡|ç½‘ç»œæµè§ˆå™¨åº”è‡ªåŠ¨æ‰“å¼€ï¼Œå¹¶é€‰æ‹©å¦‚ä¸Šæ‰€ç¤ºçš„â€œç™»å½•â€ã€‚åœ¨æ‚¨çš„ Git Bash ç»ˆç«¯ä¸Šï¼Œåº”è¯¥ä¼šå‡ºç°**heroku:Waiting to log inâ€¦ï¼Œlog inâ€¦done**ã€‚*

*æœ€åï¼Œæ‰“å¼€å¦ä¸€ä¸ª Git Bash ç»ˆç«¯(åœ¨é¡¹ç›®æ ¹æ–‡ä»¶å¤¹ä¸­)å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤:*

*ä½œè€…ä»£ç ç‰‡æ®µ|æ ¹æ®æ‚¨çš„ heroku web åº”ç”¨ç¨‹åºçš„åç§°ï¼Œç›¸åº”åœ°æ›´æ”¹å‚æ•°ã€‚*

*Heroku åº”æ ¹æ® **requirements.txt** æ–‡ä»¶ä¸­è§„å®šçš„ python ä¾èµ–å…³ç³»ï¼Œä½¿ç”¨ **runtime.txt** ä¸­è§„å®šçš„ç‰¹å®š python ç‰ˆæœ¬ï¼Œç»§ç»­æ„å»ºåº”ç”¨ç¨‹åºã€‚*

# *æœ€åï¼Œæ‰€æœ‰çš„æºä»£ç éƒ½æ„å»ºå¥½äº†ï¼Œéƒ¨ç½²ä¹Ÿå®Œæˆäº†ï¼æ­å–œä½ ï¼*

***(å¿½ç•¥)** *ä½ ç°åœ¨æœ‰ä½ çš„æœºå™¨å­¦ä¹ æ¨¡å‹å¯ä¾›å…¬ä¼—è®¿é—®äº†:*[*https://your-custom-app-name.herokuapp.com/*](https://your-custom-app-name.herokuapp.com/)*

> *æ³¨æ„:ç”±äº Heroku æ‰˜ç®¡å¹³å°çš„å˜åŒ–ï¼Œweb åº”ç”¨ç¨‹åºæ²¡æœ‰è¿ç§»åˆ° https://your-custom-app-name.onrender.com/ã€‚è¯·å¿½ç•¥ä¸Šé¢çš„ Heroku åº”ç”¨ç¨‹åº(é…ç½®å¯ä»¥ä¿æŒä¸å˜)*

*æœ¬æ•™ç¨‹ä¸­çš„æ‰€æœ‰æºä»£ç éƒ½å¯ä»¥åœ¨æˆ‘çš„ GitHub ä¸Šæ‰¾åˆ°:[https://github.com/incubated-geek-cc/your-custom-app-name](https://github.com/incubated-geek-cc/your-custom-app-name)*

## *è¯·éšæ„æ´¾ç”Ÿå®ƒï¼Œå¹¶ç›¸åº”åœ°è°ƒæ•´å®ƒä»¥é€‚åˆæ‚¨çš„ç”¨ä¾‹ã€‚ç©å¾—å¼€å¿ƒï¼â˜º*

*[](https://geek-cc.medium.com/membership) [## é€šè¿‡æˆ‘çš„æ¨èé“¾æ¥åŠ å…¥çµåª’â€”â€”ææ€æ¬£Â·å´”

### è·å¾—ææ€æ¬£Â·å´”å’Œå…¶ä»–ä½œå®¶åœ¨åª’ä½“ä¸Šçš„æ‰€æœ‰å¸–å­ï¼ğŸ˜ƒæ‚¨çš„ä¼šå‘˜è´¹ç›´æ¥â€¦

geek-cc.medium.com](https://geek-cc.medium.com/membership)*