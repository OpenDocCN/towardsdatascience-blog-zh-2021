# ä¸ Julia ä¸€èµ·é˜…è¯» CSV æ–‡ä»¶

> åŸæ–‡ï¼š<https://towardsdatascience.com/reading-csv-files-with-julia-e2623fb62938?source=collection_archive---------20----------------------->

## äº†è§£å¦‚ä½•ä½¿ç”¨ CSV.jl è¯»å–å„ç§é€—å·åˆ†éš”çš„æ–‡ä»¶

![](img/de392d30d9ef357d5d41fc0cb8f88fcd.png)

è§ä½œè€…é¡µé¢ï¼ŒCC ç”± 4.0<[https://creativecommons.org/licenses/by/4.0](https://creativecommons.org/licenses/by/4.0)é€šè¿‡ç»´åŸºå…±äº«

ä½ æ›¾ç»æ”¶åˆ°è¿‡ç”¨åˆ†å·(`;`)ä½œä¸ºåˆ†éš”ç¬¦çš„`.csv`æ–‡ä»¶å—ï¼Ÿè¿˜æ˜¯ä¸€ä¸ªæ²¡æœ‰å¤´æ–‡ä»¶çš„æ–‡ä»¶ï¼Ÿæˆ–è€…ä¹Ÿè®¸ä½ åœ¨æ¬§æ´²æœ‰ä¸€äº›åŒäº‹ç”¨`,`è€Œä¸æ˜¯`.`æ¥è¡¨ç¤ºå°æ•°ï¼Ÿå“¦ï¼Œä½¿ç”¨ CSV æ–‡ä»¶çš„ä¹è¶£â€¦

ç»§ç»­é˜…è¯»ï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨`CSV.jl`åœ¨ Julia ä¸­é˜…è¯»å„ç§åˆ†éš”ç¬¦åˆ†éš”çš„æ–‡ä»¶æ ¼å¼

> è¦è·å¾—æ‰€æœ‰åª’ä½“æ–‡ç« çš„å®Œæ•´è®¿é—®æƒé™ï¼ŒåŒ…æ‹¬æˆ‘çš„æ–‡ç« ï¼Œè¯·è€ƒè™‘åœ¨æ­¤è®¢é˜…ã€‚

## ç”Ÿæˆæ•°æ®

æˆ‘ä»¬å°†è‡ªå·±ç”Ÿæˆæ‰€æœ‰ç¤ºä¾‹ï¼Œå› æ­¤æ‚¨å¯ä»¥è½»æ¾ä¸‹è½½ä»£ç ï¼Œå¹¶åœ¨è‡ªå·±çš„ç¯å¢ƒä¸­è¯•éªŒç»“æœã€‚æˆ‘ä»¬å¼€å§‹å§ï¼é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åŠ è½½å°†è¦ä½¿ç”¨çš„åŒ…ã€‚å³`CSV.jl`å’Œ`DataFrames.jl`:

ä¸‹ä¸€æ­¥æ˜¯ç”Ÿæˆä¸€äº›æˆ‘ä»¬å¯ä»¥å®é™…è¯»å–çš„æ•°æ®ã€‚åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œæ‚¨å¯èƒ½ä¸éœ€è¦è¿™æ ·åšï¼Œå› ä¸ºæ‚¨å·²ç»æœ‰äº†æƒ³è¦è¯»å–çš„æ•°æ®ï¼Œä½†æ˜¯é€šè¿‡æä¾›ä¸€ä¸ªæ˜“äºå¤åˆ¶çš„ç¤ºä¾‹ï¼Œæ‚¨å¯ä»¥è‡ªå·±å¤„ç†ä»£ç ï¼

æˆ‘å°†ä½¿ç”¨`"""`å°†æ–‡ä»¶çš„å†…å®¹è®¾ç½®ä¸ºå¤šè¡Œå­—ç¬¦ä¸²ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¼ ç»Ÿçš„æ–¹å¼å†™å…¥æ–‡ä»¶ï¼Œæ‰“å¼€ä¸€ä¸ªè¿æ¥ï¼Œå°†å­—ç¬¦ä¸²çš„æ‰€æœ‰å†…å®¹è½¬å‚¨åˆ°è¯¥è¿æ¥ä¸­ã€‚

> æ‚¨å¯ä»¥é€šè¿‡ä» REPL ä½¿ç”¨`;`è·³è½¬åˆ° shell æ¨¡å¼å¹¶é”®å…¥`head animals.csv`æ¥æ£€æŸ¥æ–‡ä»¶çš„å†…å®¹

## ä½¿ç”¨é»˜è®¤å‚æ•°è¯»å–æ–‡ä»¶

ç»“æœæ˜¯ä¸€ä¸ªâ€œæ¼‚äº®çš„â€`.csv`æ–‡ä»¶ï¼Œå› ä¸ºå®ƒæ˜¯ç”±é€—å·åˆ†éš”çš„**ï¼Œæœ‰æ ‡é¢˜ï¼Œå¹¶ä¸”æ²¡æœ‰å¥‡æ€ªçš„å¼•ç”¨**æˆ–å…¶ä»–ä¸å¯»å¸¸çš„äº‹æƒ…å‘ç”Ÿ...é»˜è®¤çš„`CSV.read()`å‡½æ•°åº”è¯¥æ²¡æœ‰é—®é¢˜ã€‚

```
4Ã—3 DataFrame
â”‚ Row â”‚ Animal â”‚ Colour â”‚ Cover    â”‚
â”‚     â”‚ String â”‚ String â”‚ String   â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1   â”‚ bunny  â”‚ white  â”‚ fur      â”‚
â”‚ 2   â”‚ dragon â”‚ green  â”‚ scales   â”‚
â”‚ 3   â”‚ cow    â”‚ brown  â”‚ fur      â”‚
â”‚ 4   â”‚ pigeon â”‚ grey   â”‚ feathers â”‚
```

å› ä¸ºæˆ‘ä»¬å°†å¤šæ¬¡æ‰§è¡Œè¿™ä¸€æ­¥éª¤(å°†å­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶),æ‰€ä»¥æˆ‘å‡†å¤‡äº†ä¸€ä¸ªæ–¹ä¾¿çš„å‡½æ•°ä¾›ä»¥åä½¿ç”¨:

## ä¸åŒçš„åˆ†éš”ç¬¦

è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œè®©æˆ‘ä»¬å°è¯•ä¸€äº›æ›´å¤æ‚ã€ä¸é‚£ä¹ˆæ ‡å‡†çš„ä¸œè¥¿â€¦è‡ªå®šä¹‰åˆ†éš”ç¬¦ï¼æ‚¨ä»ç„¶å¯ä»¥ä½¿ç”¨`CSV.read()`ï¼Œæ‚¨åªéœ€è¦æŒ‡å®š`delim`å…³é”®å­—å‚æ•°å°±å¯ä»¥äº†ï¼

> æ›´å¥½çš„æ˜¯ï¼Œ`CSV.jl`è¶³å¤Ÿèªæ˜ï¼Œå¯ä»¥ä¸ºæˆ‘ä»¬çŒœå‡ºåˆ†éš”ç¬¦ã€‚å°è¯•åœ¨æ²¡æœ‰`delim`å‚æ•°çš„æƒ…å†µä¸‹è¯»å–ç®¡é“åˆ†éš”æ–‡ä»¶ï¼

**å¯¹äº** `**tab**` **åˆ†éš”çš„æ–‡ä»¶ï¼Œåªéœ€ä½¿ç”¨** `**delim=`\t`**` **å³å¯ã€‚**

## æ— å¤´æ–‡ä»¶

å¦ä¸€ä¸ªå¸¸è§çš„åœºæ™¯æ˜¯æˆ‘ä»¬è¦è¯»å…¥çš„æ–‡ä»¶æ²¡æœ‰å¤´æ–‡ä»¶ã€‚è®©æˆ‘ä»¬å‡†å¤‡è¿™æ ·ä¸€ä¸ªä¾‹å­:

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ ‡é¢˜çœ‹èµ·æ¥ä¸æ­£æ–‡çš„å…¶ä½™éƒ¨åˆ†æ²¡æœ‰å¤ªå¤§çš„ä¸åŒï¼Œæ‰€ä»¥`CSV.jl`åœ¨è¿™é‡Œä¸èƒ½åšä»»ä½•å·§å¦™çš„äº‹æƒ…ï¼Œä¼šè®¤ä¸ºç¬¬ä¸€è¡Œæ˜¯æ ‡é¢˜ã€‚åš`CSV.read("no_headers.csv", DataFrame)`ä¼šç»™ä½ :

```
3Ã—3 DataFrame
â”‚ Row â”‚ bunny  â”‚ white  â”‚ fur      â”‚
â”‚     â”‚ String â”‚ String â”‚ String   â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1   â”‚ dragon â”‚ green  â”‚ scales   â”‚
â”‚ 2   â”‚ cow    â”‚ brown  â”‚ fur      â”‚
â”‚ 3   â”‚ pigeon â”‚ grey   â”‚ feathers â”‚
```

æˆ‘ä»¬ä¸å¸Œæœ›æˆ‘ä»¬çš„åˆ—è¢«ç§°ä¸º`bunny`ã€`white`å’Œ`fur`...é‚£æ˜¯ä¸æ˜æ™ºçš„ï¼ä½ æœ‰**ä¸¤ä¸ªé€‰æ‹©æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç¬¬ä¸€ï¼Œæ‚¨å¯ä»¥åªè®¾ç½®`header = false`ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨çš„ç»“æœå°†ä»¥é€šç”¨åˆ—åç»“æŸã€‚æˆ–è€…ï¼Œæ‚¨ä¹Ÿå¯ä»¥åœ¨åŒä¸€å‚æ•°ä¸‹æ‰‹åŠ¨è®¾ç½®åˆ—å:**

æ‚¨å°†å¾—åˆ°ä»¥ä¸‹ç»“æœ:

```
julia> CSV.read("no_headers.csv", DataFrame, header=false)
4Ã—3 DataFrame
â”‚ Row â”‚ Column1 â”‚ Column2 â”‚ Column3  â”‚
â”‚     â”‚ String  â”‚ String  â”‚ String   â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1   â”‚ bunny   â”‚ white   â”‚ fur      â”‚
â”‚ 2   â”‚ dragon  â”‚ green   â”‚ scales   â”‚
â”‚ 3   â”‚ cow     â”‚ brown   â”‚ fur      â”‚
â”‚ 4   â”‚ pigeon  â”‚ grey    â”‚ feathers â”‚julia> CSV.read("no_headers.csv", DataFrame, header=["Animal", "Colour", "Cover"])
4Ã—3 DataFrame
â”‚ Row â”‚ Animal â”‚ Colour â”‚ Cover    â”‚
â”‚     â”‚ String â”‚ String â”‚ String   â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1   â”‚ bunny  â”‚ white  â”‚ fur      â”‚
â”‚ 2   â”‚ dragon â”‚ green  â”‚ scales   â”‚
â”‚ 3   â”‚ cow    â”‚ brown  â”‚ fur      â”‚
â”‚ 4   â”‚ pigeon â”‚ grey   â”‚ feathers â”‚
```

è¯·å¯¹åŒäº‹å¥½ä¸€ç‚¹ï¼Œç”¨é€‰é¡¹ 2ï¼ğŸ˜‰

## å¼•ç”¨å­—ç¬¦

åˆ†éš”æ–‡ä»¶çš„å¦ä¸€ä¸ªå…¸å‹çš„å¥‡æ€ªä¹‹å¤„æ˜¯**å­—æ®µæœ¬èº«å¯ä»¥åŒ…å«åˆ†éš”ç¬¦**ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€šå¸¸**å¼•ç”¨å­—æ®µ**ï¼Œè¿™æ ·è§£æå™¨å¯ä»¥å¾ˆå®¹æ˜“åœ°å¿½ç•¥åˆ†éš”ç¬¦ã€‚

![](img/a73b4fc61793db2baaf2f873fc4d6546.png)

è¯¥æ­»çš„ä¸åˆæ ¼çš„å¸•ä¼½ç´¢æ–¯ï¼|ä¿¡ç”¨: [pxfuel](https://www.pxfuel.com/en/free-photo-xlxub)

è®©æˆ‘ä»¬åœ¨åˆ—è¡¨ä¸­æ·»åŠ ä¸€ä¸ªé£é©¬æ¥æ¼”ç¤ºè¿™ä¸€ç‚¹:

äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¯¹`"`æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œå› ä¸ºè¿™äº›æ˜¯é»˜è®¤çš„æŠ¥ä»·ï¼Œæ‰€ä»¥`CSV.read("animals_quoted.csv", DataFrame)`ä¼šå·¥ä½œå¾—å¾ˆå¥½:

```
julia> CSV.read("animals_quoted.csv", DataFrame)
5Ã—3 DataFrame
â”‚ Row â”‚ Animal  â”‚ Colour â”‚ Cover        â”‚
â”‚     â”‚ String  â”‚ String â”‚ String       â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1   â”‚ bunny   â”‚ white  â”‚ fur          â”‚
â”‚ 2   â”‚ dragon  â”‚ green  â”‚ scales       â”‚
â”‚ 3   â”‚ cow     â”‚ brown  â”‚ fur          â”‚
â”‚ 4   â”‚ pigeon  â”‚ grey   â”‚ feathers     â”‚
â”‚ 5   â”‚ pegasus â”‚ white  â”‚ feathers,fur â”‚
```

å¥½å§ï¼Œé‚£ä¹ˆå¼•ç”¨é»˜è®¤å·¥ä½œï¼Œä½†å¦‚æœæˆ‘ä»¬æœ‰ä¸€äº›ç–¯ç‹‚çš„å·¥ä½œå‘¢ğŸ¤ªä¸ºæˆ‘ä»¬å‡†å¤‡æ–‡ä»¶ï¼Œä»–ä»¬å†³å®šä½¿ç”¨`&`ä½œä¸ºå¼•ç”¨å­—ç¬¦ï¼Ÿï¼Ÿç–¯ç‹‚é™ä¸´åœ¨æˆ‘ä»¬èº«ä¸Š...

è¿è¡Œè¿™ä¸ªä¼šç»™æˆ‘ä»¬ä¸€ä¸ªè­¦å‘Šï¼

```
julia> CSV.read("animals_&.csv", DataFrame)
â”Œ Warning: thread = 1 warning: parsed expected 3 columns, but didn't reach end of line around data row: 6\. Ignoring any extra columns on this row
â”” @ CSV ~/.julia/packages/CSV/CJfFO/src/file.jl:606
5Ã—3 DataFrame
â”‚ Row â”‚ Animal  â”‚ Colour â”‚ Cover     â”‚
â”‚     â”‚ String  â”‚ String â”‚ String    â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1   â”‚ bunny   â”‚ white  â”‚ fur       â”‚
â”‚ 2   â”‚ dragon  â”‚ green  â”‚ scales    â”‚
â”‚ 3   â”‚ cow     â”‚ brown  â”‚ fur       â”‚
â”‚ 4   â”‚ pigeon  â”‚ grey   â”‚ feathers  â”‚
â”‚ 5   â”‚ pegasus â”‚ white  â”‚ &feathers â”‚
```

çœ‹çœ‹æœ€åä¸€è¡Œå˜å¾—å¤šä¹ˆå¥‡æ€ªï¼Œç¬¬ä¸‰ä¸ªé€—å·ä¹‹åçš„æ‰€æœ‰å†…å®¹éƒ½è¢«å¿½ç•¥äº†ã€‚ä½ åº”è¯¥æ€»æ˜¯æ³¨æ„ä½ å¾—åˆ°çš„è­¦å‘Šï¼

> ä½ åº”è¯¥æ€»æ˜¯æ³¨æ„ä½ å¾—åˆ°çš„è­¦å‘Šï¼å®ƒä»¬å¯èƒ½åŒ…å«ä¸€äº›å…³äºæ‚¨æ­£åœ¨å¤„ç†çš„æ•°æ®çš„é‡è¦ä¿¡æ¯ã€‚

è§£å†³è¿™ä¸ªé—®é¢˜çš„æ­£ç¡®æ–¹æ³•æ˜¯ç”¨`quotechar='&'`æŒ‡å®šä¸€ä¸ª**è‡ªå®šä¹‰å¼•ç”¨å­—ç¬¦**:

é‚£ä¹ˆåœ¨åŠ¨ç‰©ç‹å›½ä¸€åˆ‡éƒ½å¾ˆå¥½:

```
julia> CSV.read("animals_&.csv", DataFrame, quotechar='&')
5Ã—3 DataFrame
â”‚ Row â”‚ Animal  â”‚ Colour â”‚ Cover        â”‚
â”‚     â”‚ String  â”‚ String â”‚ String       â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1   â”‚ bunny   â”‚ white  â”‚ fur          â”‚
â”‚ 2   â”‚ dragon  â”‚ green  â”‚ scales       â”‚
â”‚ 3   â”‚ cow     â”‚ brown  â”‚ fur          â”‚
â”‚ 4   â”‚ pigeon  â”‚ grey   â”‚ feathers     â”‚
â”‚ 5   â”‚ pegasus â”‚ white  â”‚ feathers,fur â”‚
```

## ç¬”è®°

æ³¨æ„ï¼Œå¯¹äºæ–‡ä»¶çš„ç¼–å†™ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨`CSV.jl`,ä½†æ˜¯æˆ‘è§‰å¾—é‚£æ ·ä¼šè¿èƒŒæœ¬æ•™ç¨‹çš„ç›®çš„ã€‚ä¸ºäº†å®Œæ•´èµ·è§ï¼Œä¸‹é¢æ˜¯ç¼–å†™æ–‡ä»¶çš„ç‰‡æ®µ:

![](img/b8f393b44446b724c65cfe69a8c284ed.png)

å¤§å«Â·å¦å°¼å°”æ–¯ã€Šæ›´å¹´è½»çš„å…¬å…±é¢†åŸŸã€‹ï¼Œç»´åŸºå…±äº«

## ç»“è®º

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä½ å­¦ä¼šäº†å¦‚ä½•:

*   å°†ç®€å•çš„ csv æ–‡ä»¶è¯»å…¥æ•°æ®å¸§
*   æŒ‡å®šåˆ†éš”ç¬¦
*   è¯»å–æ— å¤´æ–‡ä»¶
*   æŒ‡å®šå¼•ç”¨å­—ç¬¦

ä½ æ²¡æœ‰å­¦åˆ°çš„:

*   å¦‚ä½•å¤„ç†ä¸åŒçš„åˆ—ç±»å‹ï¼Œä¾‹å¦‚è§£æå¸ƒå°”å€¼ã€æ—¥æœŸç±»å‹ã€‚
*   å¤„ç†è´§å¸æ ¼å¼ï¼Œå¦‚$1ï¼Œ320.23ã€‚

å¦‚æœæ‚¨æƒ³äº†è§£è¿™äº›ï¼Œè¯·ç»§ç»­é˜…è¯»ç¬¬ 2 éƒ¨åˆ†:

[](/reading-csv-files-with-julia-part-2-51d74434358f) [## ä¸ Julia ä¸€èµ·é˜…è¯» CSV æ–‡ä»¶â€”ç¬¬ 2 éƒ¨åˆ†

### è´§å¸ã€å¸ƒå°”å€¼ç­‰çš„è‡ªå®šä¹‰æ ¼å¼ã€‚

towardsdatascience.com](/reading-csv-files-with-julia-part-2-51d74434358f) 

å…³äº Julia çš„å…¶ä»–å¸–å­ï¼Œæ‚¨å¯èƒ½ä¼šæ„Ÿå…´è¶£:

[](/vectorize-everything-with-julia-ad04a1696944) [## å‘é‡åŒ–æœ±è‰å¨…çš„ä¸€åˆ‡

### å‘Šåˆ« for loopsï¼Œå¹¿æ’­æ‰€æœ‰çš„ä¸œè¥¿

towardsdatascience.com](/vectorize-everything-with-julia-ad04a1696944) [](/control-flow-basics-with-julia-c4c10abf4dc2) [## Julia çš„æ§åˆ¶æµåŸºç¡€çŸ¥è¯†

### ä¼‘æ¯ï¼Œç»§ç»­å’Œæ‰€æœ‰å…¶ä»–æœ‰è¶£çš„äº‹æƒ…

towardsdatascience.com](/control-flow-basics-with-julia-c4c10abf4dc2)