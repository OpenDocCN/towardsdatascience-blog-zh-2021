# 是否应该停止使用 Else？

> 原文：<https://towardsdatascience.com/should-you-stop-using-else-cd1820b00c02?source=collection_archive---------37----------------------->

## else 关键字不好吗？您应该将它完全从代码中删除吗？

![](img/2dfaac3827f39d8e1f5f1b38e6636950.png)

(src =[https://pixabay.com/images/id-634941/](https://pixabay.com/images/id-634941/)

# 介绍

在编程中，为了从一系列的参数中得到想要的回报，程序员常用的技巧有很多。为了在高级编程语言中调用这些技术，我们经常使用关键字。程序员经常为此使用条件和循环，尽可能有效地使用这两者是编程的组成部分。

也就是说，处理问题和使用这些技巧来解决问题，总有一个错误的方法和一个正确的方法。在这方面，一个有争议的话题是 else 关键字。许多程序员已经把 else 这个关键词完全从他们的编程团队中删除了。这是因为使用 else 会带来一些问题，尽管在某些情况下 else 对解决问题很有价值。但是是什么让 else 语句如此糟糕呢？真的有办法可以完全避免使用 else 吗，或者这只是程序员为了恐吓他人而使用的另一种说法？今天，我想回顾一下我对 else 关键字使用不当的主观体验，并回顾一下我对这种无 else 方法的看法。希望所提供的信息可以阐明您自己代码的一些潜在问题，或者对您以某种方式构造条件的方式产生影响。

> [笔记本](https://github.com/emmettgb/Emmetts-DS-NoteBooks/blob/master/Python3/Nesting%20and%20Else.ipynb)

# 嵌套

为了理解 else 块的问题，我们需要首先理解嵌套。在很多方面，我们可以把嵌套看作给定代码块的层。关于嵌套要记住的重要事情是，它本身就是一个循环，不管这个循环是否重复。任何嵌套的东西都可能有自己的作用域，这意味着在其作用域中声明的值不会是全局的。

此外，一个简单的方法是直接在全局范围下嵌套一层。在模块的例子中，我们可以有一个从全局到模块的嵌套层，然后是模块内的方法，然后是方法内的迭代循环。让我们看一个迭代循环来进一步演示这一点。

```
for iteration in range(1, 5):
    z = 5
    print(z)
```

在这个循环中，我们定义了一个新变量 z，它保存整数 5。每当我们试图在这个 for 循环的范围内使用这个值时，我们可以看到这个值被打印了四次，在 1:5 的范围内每次迭代打印一次。我们可以通过编写所谓的嵌套 for 循环来给这个函数添加另一层嵌套。这本质上是一个循环中的循环。现在我们正在一个循环中运行一个循环，事情变得非常复杂，因为为了现在使用 z，我们需要考虑在此之前已经使用过的所有循环。

```
for iteration in range(1, 5):
    z = 5
    for i in range(1, z):
        print("iteration")
    print(z)
```

这对于可读性来说是个很大的问题，因为这意味着任何阅读我们代码的人都必须参考我们之前的代码才能理解我们正在处理的变量。无妨的是，一系列 for 循环同时工作可能会相当混乱。我们也可以对条件句做同样的事情，并创建嵌套的条件句。很容易理解为什么过度使用嵌套会很快使您的项目显得复杂，让任何试图阅读您的代码的人感到困惑。但是这和其他有什么关系呢？

# 其他

既然我们理解了嵌套，else 在可读性方面的重要问题很快就变得非常明显了。else 关键字严重依赖于写在它前面的代码。如果不先写一个 if 块，我们就不能使用 else 块。例如，以下代码不是有效的语法:

```
else:
    print("hi")
```

这意味着每次我们添加一个 else 语句，我们也在它后面添加了各种各样的嵌套，甚至没有意识到这一点。考虑以下函数:

```
def else_test(x):
    if x == 5:
        print("five")
    elif x == 4:
        print("four")
    elif x == 3:
        print("three")
    elif x == 2:
        print("two")
    else:
        print("one")
```

为了让这段代码打印出 1，x 不能等于 5、4、3 或 2。这些条件中的每一个都是程序员在分析代码时需要考虑的。此外，这段代码中的 elifs 遵循相同的功能。因此，这段代码中的每个连续条件语句都有另一层嵌套。

# 重组条件句

考虑到我上面写的函数，现在让我们只用 ifs 来重构它，然后我会谈到你是否真的应该这样做。为了修改这段代码，我们只需要将所有的 elifs 改为 if，将 else 改为新的 if 语句。

```
def else_test(x):
    if x == 5:
        print("five")
    if x == 4:
        print("four")
    if x == 3:
        print("three")
    if x == 2:
        print("two")
    if x == 1:
        print("one")
```

当然，这个新代码有一些优点和缺点。首先，如果我们输入数字 6，这个函数没有任何返回。其次，代码更容易阅读，因为我们可以单独读取每个嵌套的块。在这个例子中可能看起来不是这样，但是在大多数真实的编程情况下，这最终会变得更容易阅读。这是因为一旦到了第五个阶段，我们就不需要再回头去回顾前四个阶段发生的事情了。

现在，如果我要写这个函数，我会写什么代码呢？当然，答案是第一个例子。我认为有一个地方和时间可以用两种方式来写条件句，诚实地说，避免混淆是一个很难驾驭的斜坡。在你自己写完代码之后，你不可能第一次分析你的代码。可读性归结为试图像阅读英语一样阅读自己的代码。您应该能够逐行查看您的代码，并说出每一行的作用。导致代码缺乏可读性的原因有很多，虽然我认为一些 else 语句肯定不好，但我不认为使用关键字本身是一种罪过。

# 结论

嵌套是计算机编程中的一个重要组成部分。它允许我们让简单得多的代码变得更加强大。然而，伴随着强大的能力而来的是巨大的责任，如果不小心的话，嵌套会完全破坏代码的可读性。以我的主观看法，我认为使用 else 关键字是完全可以接受的。然而，就像生活中的任何东西包括水和食物一样，它的使用必须总是适度的。

在我关于代码重构的文章中，过度使用条件句是一种不好的编程实践。如果您还没有机会阅读那篇文章，可以在这里找到，我认为它确实值得一读:

</5-fabulous-refactoring-methods-for-prettier-code-e3bc3447c0b2> [## 更漂亮的代码的 5 个惊人的重构方法

towardsdatascience.com](/5-fabulous-refactoring-methods-for-prettier-code-e3bc3447c0b2) 

条件句的过度使用也适用于 else 的过度使用。用的时候应该是有意识的决定。您还应该考虑它上面的每个条件的开销，并注意只有当所有这些条件都丢失时才会命中 else。换句话说，任何使用你的软件的程序员都需要弄清楚如何调用它，如果它嵌套在数百个条件之下，那就相当困难了。我不认为有必要把它完全从你的编程团队中删除，但是我认为应该负责任地使用它！感谢您阅读我的文章，我希望它能让您对 else 和嵌套有更多的思考！