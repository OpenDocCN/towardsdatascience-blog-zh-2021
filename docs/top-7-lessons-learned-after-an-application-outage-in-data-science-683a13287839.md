# 数据科学应用中断后的 7 大经验教训

> 原文：<https://towardsdatascience.com/top-7-lessons-learned-after-an-application-outage-in-data-science-683a13287839?source=collection_archive---------44----------------------->

## 了解失误并找到前进的道路

![](img/d63461b9fdf1a86236f0b8171ff18e72.png)

照片来自 [Unsplash](https://unsplash.com/) 上的 [Tim Gouw](https://unsplash.com/@punttim)

在设计和维护软件应用程序时，您肯定会遇到至少一次这种情况:计划外的软件中断。在过去的一年半时间里，我遇到过一些小问题，并帮助解决了它们，但最近的一次是我第一次不得不处理不容易解决的中断。这次中断是由软件库中几个较小的错误的累积、2TB 的数据变得太多而无法处理的数据过载以及 Spark 作业挂起造成的。随着停机的发生，问题变得越来越明显，我发现自己在一月的大部分时间里都在努力寻找一件又一件事情的解决方案。通过这次经历，我们从处理数据科学中的应用程序中断中获得了七条经验教训。

# 1.了解效率和生产力下降的风险

当应用程序中断时，最大的打击是效率和生产力。在使用该应用程序一年后，团队开始相信它会正常运行。该应用程序允许他们进行分析，以高效地获得所需的大部分数据。如果它没有覆盖它，那么他们可以继续进行更深入的调查。

一旦应用程序停止运行，团队成员不再能够在几分钟内分析问题。相反，他们必须找到自己生成信息的方法，使用多个来源收集正确的视觉效果，并处理其他工具提供给他们的数据差异。

总而言之，停机开始展示当问题出现时，团队的效率和生产力如何急剧下降。

# 2.开发可靠稳定的代码库

看到团队如何依赖这样一个应用程序，就明白了应用程序必须有一个可靠和稳定的代码库。当我回顾导致停机的原因时，最突出的问题是缺乏测试。与我们的其他软件库不同，这个特定的库缺乏健壮的单元和用户测试。代码库的个体贡献者将在数据的一个小的子集上本地测试他们的改变。但是，他们不确定这种变化会对应用程序的其他方面产生什么影响。

这导致了级联效应，引入了一些小错误，在几个拉请求内就使网站瘫痪了。这些错误需要几天的发现和测试，以确定它们来自哪里以及如何解决它们。我们可以发布一些新的拉请求，这些请求要么决定未解决的 bug，要么在我们的国际团队之间将代码恢复到原始状态，夜以继日地解决问题。这些修复解决了代码库的稳定性问题，但只是导致应用程序失败的三个问题之一。

# 3.不要忽视软件架构

随着代码库的稳定，另一个问题浮出了水面。我们开始面临数据过载，2TB 的数据变得越来越难以在应用程序中处理。并非每个工具都是为处理大数据而设计的，随着数据量的增加，工具的可靠性会下降。它不再能容纳我们扔给它的数据，反而会导致应用程序的主机崩溃。我们不再仅仅面对代码稳定性的问题，而是软件架构的失误。

这次中断证明我们不能像以前那样继续下去，我们需要几次会议来重新思考这个应用程序的架构。理解了这一点，我们回顾了该工具，并做了一些小的修改，以确保它在短期内继续工作。主要区别是将我们托管的数据量从 2TB 减少到 1TB 左右。这种减少仍然给了我们的团队他们需要的原始数据和可视化，同时允许我们稳定地前进。

如果您知道该工具无法处理大量数据，您可能会想，为什么要用它来托管您的应用程序呢？这是我们当时唯一的选择，但现在我们已经证明我们需要一些不同的东西，我们的视野向更多的东西敞开。有时你不得不试着用你所拥有的来凑合，直到你能得到你需要的支持来做得更好。

# 4.利用你的资源，在需要的时候寻求帮助

在解决了前两个问题之后，我们的代码库现在更加可靠，并且通过减少数据来稳定应用程序。尽管如此，我正在运行的分析所有数据的 Spark 工作还是被搁置了。我花了几个星期的时间，用尽我的国际团队的资源来解决上面的所有问题，但是我们离一个完全正常工作的应用程序还很远。有趣的是，我有 DevOps 的背景，我最后的想法是，我需要停止查看 Spark UI，开始查看集群，看看发生了什么。

当我调出一个显示集群利用率的各种可视化界面时，有一件事很突出。Spark 作业显示它正在 UI 中运行，但是集群显示什么也没有发生。任何查看群集利用率的人都会认为群集当时处于运行状态，但没有运行任何作业。

快速的谷歌搜索，然后和一个同事讨论，让我们两个回想起以前合作过的一个承包商。他曾提到，将我们的工作分成成千上万个分区会造成更大的伤害。简单地将我们的分区从 2000 切换到 200，然后重新运行就解决了我们的问题。像往常一样，这项工作已经启动并运行，没有任何迹象表明会持续几个小时。

# 5.作为一个团队胜利，作为一个团队失败，作为一个团队学习

总而言之，您可以看到当面临应用程序停机时，这是一个多么紧张的月份，但是要记住的重要一点是，这是一个看得见的结束。当这些类型的问题出现时，它们将会出现，您需要处理它们。这个月我首先分析手头的问题。我至少花了一天时间阅读所有的错误日志，查看我能找到的每个错误堆栈，并从代码库中一行行地重读代码。一旦我理解了手头的所有问题，我就开始给不同的人分配要解决的问题。我亲自处理了一些 bug，并与我的国际团队同事密切合作，连续两天每天 24 小时进行调查和测试。

当你在一个团队中成长和发展时，很明显，你作为一个团队庆祝你的胜利，你作为一个团队聚集在你的失败周围，努力解决它们。这个月让我们看到了这一点，我们密切合作，确定我们的弱点并加以解决。谁引起了什么错误并不重要。重要的是共同努力解决问题，让我们的应用程序重新上线。

# 6.不要缺少后备计划

如果我可以在上个月重新做这件事，我会专注于找出让应用程序启动并运行的最快途径，然后解决任何其他突出的错误。我们缺少一个备份计划，以便在发生故障时能够快速恢复应用程序，这导致了前面讨论过的生产力和效率损失。

除了改进测试和软件架构之外，我还会详细介绍我们的备份计划，以及如何在未来缓解此类问题。错误时有发生，应用程序中断，作业失败。我们并不是生活在一个完美的世界里，我也不想假装我们是。相反，我想制定一个计划，让我的团队即使在危机中也能有效地运作。

# 7.诚实并做好准备

在崩溃的最后，我的经理安排了一次与我(团队领导)，一个应用程序的用户，和另外两个应用程序的主要开发人员的会议。一个小时的会议是对应用程序的性能审查，其当前的稳定性和可靠性问题，以及我们五个人之间的后续步骤。如果说我在过去的一年半中学到了什么，那就是不要对任何类型的绩效评估毫无准备。

相反，我在当天早些时候花了一个小时详细列出了事件的时间表。每一个拉取请求、每一个 bug、每一个修复及其结果，以及建议的后续步骤，并突出显示流程中的瓶颈。在所有人当中，我是唯一一个为这个电话做好准备的人。当我是第一个被邀请讨论当前问题的人时，我能够和我的经理一起讨论所有问题并回答他的问题。我坦诚地向他指出了弱点和瓶颈，展示了应用程序如何在下一个工作日结束时恢复正常工作。

参加一个准备强调问题的会议可能会很有挑战性，尤其是当你必须诚实地说出哪里出了问题以及为什么出了问题的时候。但是更好的办法是开诚布公地对待手头的问题，以及你是如何解决这些问题的。会议结束时，我知道我得到了老板的支持。他让我画出整个系统的过去、现在和未来的架构图，指出瓶颈并突出应用程序中任何其他明显的弱点。在他这样问的过程中，我意识到他理解了我为协调停机解决方案所做的工作，并认可了我对系统架构和工程的兴趣。

# 最后的想法

过去的一个月是 2021 年意想不到的开始。它没有按计划进行，出现了重大的应用程序中断，但这次经历的教训将伴随我一整年。

*   作为一个团队胜利，作为一个团队失败，作为一个团队学习。你们在一起，所以在各方面一起努力，从彼此犯下的错误中成长。
*   不管你在做什么项目，如果事情没有按预期进行，那就后退一步。查看正在发生的事情，并确定为什么会发生。从问题中吸取教训，并提出解决方案。
*   如果你正面临一个大问题，分析手头的问题，制定一个计划来解决它，并执行这个计划。
*   对你所面临的问题以及你如何解决这些问题要开诚布公。像这样的讨论可能很难与你的经理或任何上级进行，但他们也是人。这些讨论可以让你大开眼界，给团队或你自己带来积极的变化。当你结束这类会议时，确定你的主要收获以及你能从中学到什么。

***您的数据科学团队是否遇到过任何重大问题？你是如何处理它们的？***

如果你想阅读更多，看看我下面的其他文章吧！

</why-does-reliability-and-stability-matter-in-data-science-3040ffb64b1>  </one-big-lesson-on-creating-a-software-library-723c36180941>  </7-lessons-learned-from-7-months-of-remote-mentoring-b9cebf0cf222> 