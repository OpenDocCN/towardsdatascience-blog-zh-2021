# åœ¨ Julia ä¸­ç´¢å¼•ã€æ’åºå’Œèšé›†ä½ çš„æ•°æ®å¸§

> åŸæ–‡ï¼š<https://towardsdatascience.com/index-sort-and-aggregate-your-dataframes-in-julia-38646daf6214?source=collection_archive---------18----------------------->

## ä½¿ç”¨ DataFrames.jl è¿›è¡Œå¸¸è§æ•°æ®åˆ†æçš„æ•™ç¨‹

![](img/6fc41e8dc208800c11c8a31ae82d304e.png)

ç”±[æ°æ–¯æ¸©Â·æ‰˜é©¬æ–¯](https://unsplash.com/@jeswinthomas?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)åœ¨ [Unsplash](https://unsplash.com/s/photos/banana-split?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

æ·±å…¥åˆ° DataFrames.jlï¼Œæˆ‘ä»¬å°†æ¢ç´¢å¦‚ä½•åœ¨ DataFrames ä¸Šåš**å¸ƒå°”ç´¢å¼•**ï¼Œå­¦ä¹ **å¦‚ä½•æŒ‰åˆ—å€¼å¯¹æ•°æ®è¿›è¡Œæ’åº**å’Œ**èšåˆè¡¨**ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚åœ¨æœ€åä¸€èŠ‚ï¼Œæˆ‘ä»¬è¿˜å°†ä»‹ç»ä¸€ç§è¶…çº§å¼ºå¤§çš„åˆ†ææ–¹æ³•ï¼Œç§°ä¸º:**åˆ†å‰²-åº”ç”¨-ç»„åˆ**ã€‚

*å¦‚æœä½ éœ€è¦å¤ä¹  DataFrames.jlï¼Œå…ˆçœ‹çœ‹è¿™äº›æ–‡ç« :*

[](/julia-dataframes-jl-basics-95dba5146ef4) [## Julia DataFrames.jl åŸºç¡€

### ç”¨ DataFrames.jl æˆ³æˆ³ä½ çš„æ•°æ®

towardsdatascience.com](/julia-dataframes-jl-basics-95dba5146ef4) [](/reading-csv-files-with-julia-e2623fb62938) [## ä¸ Julia ä¸€èµ·é˜…è¯» CSV æ–‡ä»¶

### äº†è§£å¦‚ä½•ä½¿ç”¨ CSV.jl è¯»å–å„ç§é€—å·åˆ†éš”çš„æ–‡ä»¶

towardsdatascience.com](/reading-csv-files-with-julia-e2623fb62938) [](/reading-csv-files-with-julia-part-2-51d74434358f) [## ä¸ Julia ä¸€èµ·é˜…è¯» CSV æ–‡ä»¶â€”ç¬¬ 2 éƒ¨åˆ†

### è´§å¸ã€å¸ƒå°”å€¼ç­‰çš„è‡ªå®šä¹‰æ ¼å¼ã€‚

towardsdatascience.com](/reading-csv-files-with-julia-part-2-51d74434358f) 

> è¦è·å¾—æ‰€æœ‰åª’ä½“æ–‡ç« çš„å®Œæ•´ä¿¡æ¯ï¼ŒåŒ…æ‹¬æˆ‘çš„æ–‡ç« ï¼Œè¯·ç‚¹å‡»è¿™é‡Œè®¢é˜…ã€‚

# è·å–ä¸€äº›æ•°æ®

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä»`RDatasets`åŒ…ä¸­æŒ‘é€‰ä¸€ä¸ªæ•°æ®é›†ã€‚è¿™æ ·å°±çœå»äº†æˆ‘ä»¬ä¸‹è½½è¯»å…¥ä¸€ä¸ªæ–‡ä»¶çš„éº»çƒ¦ã€‚å¦‚æœä½ æƒ³çŸ¥é“å¦‚ä½•é˜…è¯» CSVï¼Œè¯·æŸ¥çœ‹æˆ‘ä¹‹å‰åœ¨ CSV.jl å’Œæ•°æ®å¯¼å…¥ä¸Šçš„å¸–å­â€”â€”ä¸Šé¢çš„é“¾æ¥ã€‚è®©æˆ‘ä»¬**å¯¼å…¥åŒ…å¹¶è®¾ç½®æˆ‘ä»¬çš„æ•°æ®é›†**ã€‚

![](img/bf15c4aa85025a2c05fb6f118f6e448f.png)

ç»´å¤šåˆ©äºšåšç‰©é¦†åœ¨ [Unsplash](https://unsplash.com/s/photos/factory-workers?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

è¿™ä¸ªæ•°æ®é›†è¿½è¸ªäº†è¶…è¿‡ 500 ä¸ªäººçš„æ—¶è–ªã€å·¥ä½œç»éªŒã€æ•™è‚²å’Œå…¶ä»–å¯èƒ½ä¸è–ªæ°´ç›¸å…³çš„å› ç´ ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æ›´å¤šå…³äºæ•°æ®é›†[çš„ä¿¡æ¯ã€‚åœ¨æˆ‘ä»¬çš„ç»ƒä¹ ä¸­ï¼Œæˆ‘ä»¬å°†åªä½¿ç”¨ä»¥ä¸‹å„åˆ—:](https://cran.r-project.org/web/packages/plm/plm.pdf)

1.  `NR`:å”¯ä¸€çš„å·¥äººæ ‡è¯†ç¬¦ã€‚
2.  `Year`:è§‚æµ‹å¹´ä»½ã€‚
3.  `Wage`:è®¡æ—¶å·¥èµ„æ—¥å¿—ã€‚
4.  `Ethn`:å·¥äººçš„ç§æ—ç­‰çº§:é»‘äººã€hispã€å…¶ä»–
5.  å¤šå¹´çš„ç»éªŒã€‚

```
julia> first(males, 5)
5Ã—5 DataFrame
 Row â”‚ NR     Year   Wage     Ethn   Exper
     â”‚ Int32  Int32  Float64  Catâ€¦   Int32
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚    13   1980  1.19754  other      1
   2 â”‚    13   1981  1.85306  other      2
   3 â”‚    13   1982  1.34446  other      3
   4 â”‚    13   1983  1.43321  other      4
   5 â”‚    13   1984  1.56813  other      5
```

# ç´¢å¼•

å¯¹æ•°æ®å¸§çš„å…¸å‹æ“ä½œæ˜¯**æ ¹æ®å€¼** s ä¸Šçš„ä¸€äº›æ ‡å‡†å¯¹æ•°æ®è¿›è¡Œå­é›†åŒ–ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡é¦–å…ˆæ„å»ºä¸€ä¸ª**å¸ƒå°”ç´¢å¼•**(çœŸ/å‡å€¼çš„å‘é‡)æ¥å®ç°è¿™ä¸€ç‚¹ï¼Œè¯¥ç´¢å¼•å¯¹äºæœŸæœ›å€¼ä¸ºçœŸï¼Œå¦åˆ™ä¸ºå‡ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒä½œä¸ºæ•°æ®å¸§çš„ç¬¬ä¸€ä¸ªå‚æ•°æ”¾å…¥æ‹¬å·ä¸­ï¼Œä»¥é€‰æ‹©æ‰€éœ€çš„è¡Œã€‚

> ä¸ºäº†èŠ‚çœç©ºé—´ï¼Œæˆ‘å°†åªæ‰“å°å‰ 5 è¡Œã€‚æˆ‘ç”¨`first(dataframe, 5)`æ¥åšè¿™ä¸ªã€‚

```
5Ã—5 DataFrame
 Row â”‚ NR     Year   Wage     Ethn   Exper
     â”‚ Int32  Int32  Float64  Catâ€¦   Int32
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚    13   1980  1.19754  other      1
   2 â”‚    17   1980  1.67596  other      4
   3 â”‚    18   1980  1.51596  other      4
   4 â”‚    45   1980  1.89411  other      2
   5 â”‚   110   1980  1.94877  other      5
```

![](img/de37d47f70f02e92259fe26b7a6f3193.png)

[ç²˜åœŸå ¤](https://unsplash.com/@claybanks?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)åœ¨ [Unsplash](https://unsplash.com/s/photos/selecting?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹ç…§

æˆ‘ä»¬ä½¿ç”¨å†’å·`:`æ¥è¡¨ç¤ºæˆ‘ä»¬æƒ³è¦æ‰€æœ‰å¯ç”¨çš„åˆ—ã€‚æ‚¨åº”è¯¥è¿™æ ·é˜…è¯»ä¸Šé¢çš„å†…å®¹:ç»™æˆ‘æ‰€æœ‰çš„ç”·æ€§è¡Œï¼Œå…¶ä¸­`my_index`ä¸ºçœŸï¼Œå¹¶è¿”å›æ‰€æœ‰å¯ç”¨çš„åˆ—ã€‚é€šå¸¸ï¼Œä½ ä¼š**åœ¨ä¸€ä¸ªæ­¥éª¤**ä¸­å®Œæˆï¼Œå› ä¸ºçœŸçš„æ²¡æœ‰å¿…è¦åˆ†é…ä¸€ä¸ªå•ç‹¬çš„å¸ƒå°”ç´¢å¼•å‘é‡:

è¿™ç»™å‡ºäº†ä¸ä¸Šé¢ç›¸åŒçš„ç»“æœã€‚

å¦‚æœæœ‰å¤šä¸ªæ ‡å‡†å‘¢ï¼Ÿå‡è®¾æˆ‘ä»¬éœ€è¦ 1980 å¹´çš„è§‚å¯Ÿæ•°æ®ï¼Œä½†åªé’ˆå¯¹è¥¿ç­ç‰™è£”å·¥äºº:

```
5Ã—5 DataFrame
 Row â”‚ NR     Year   Wage      Ethn  Exper
     â”‚ Int32  Int32  Float64   Catâ€¦  Int32
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚  1142   1980  1.41311   hisp      2
   2 â”‚  1641   1980  2.11169   hisp      4
   3 â”‚  1644   1980  0.560979  hisp      1
   4 â”‚  1721   1980  1.78447   hisp      5
   5 â”‚  1763   1980  0.6435    hisp      1
```

å¦‚ä½ æ‰€è§ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ AND `&`é€»è¾‘è¿ç®—ç¬¦**å¯¹ä¸¤ä¸ªå¸ƒå°”å‘é‡**è¿›è¡Œé€å…ƒç´ æ¯”è¾ƒ(å› æ­¤æˆ‘ä»¬ç”¨`.&`è¿›è¡Œå¹¿æ’­)ã€‚æ‰€ä»¥æˆ‘ä»¬äº§ç”Ÿç¬¬ä¸‰ä¸ªå‘é‡ï¼Œå½“ä¸”ä»…å½“å¹´ä»½æ˜¯ T6ï¼ŒEthn æ˜¯ T7 æ—¶ï¼Œè¿™ä¸ªå‘é‡ä¸ºçœŸã€‚

ç†Ÿèƒ½ç”Ÿå·§ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬é€‰æ‹©åœ¨ 1980 å¹´æœ‰ 3 å¹´ä»¥ä¸Šå·¥ä½œç»éªŒçš„äºº:

```
males[(males.Year .== 1980) .& (males.Exper .> 3), :]
```

å¦‚æœä½ éœ€è¦å…¶ä»–çš„é€»è¾‘è¿ç®—ç¬¦ï¼Œè¯·æŸ¥é˜… Julia æ‰‹å†Œä¸­çš„æœ¬é¡µã€‚åœ¨é‚£é‡Œä½ å¯ä»¥å­¦ä¹ å¦‚ä½•ç”¨`!`æ±‚**å€¼**çš„åï¼Œå¹¶ä¸**æˆ–è¿ç®—ç¬¦** : `|`äº¤æœ‹å‹ã€‚

ä¸ºäº†å®Œæ•´èµ·è§ï¼Œä¸‹é¢æ˜¯å¦‚ä½•ç”¨`filter`å‡½æ•°åšåŒæ ·çš„äº‹æƒ…:

```
filter(df -> (df.Year == 1980) & (df.Exper > 3), males)
```

è¿™åœ¨æˆ‘ä¹‹å‰çš„æ–‡ç« ä¸­æœ‰æ›´è¯¦ç»†çš„æè¿°ã€‚

# æ’åºæ•°æ®å¸§

![](img/9967ce0c4209d2f8d8d2e3d70e1d5a08.png)

ç…§ç‰‡ç”±[å¾·é²Â·æ¯”é»˜](https://unsplash.com/@drew_beamer?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)åœ¨ [Unsplash](https://unsplash.com/collections/5844710/sorting?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„

è®©æˆ‘ä»¬å­¦ä¹ å¦‚ä½•å¯¹æ•°æ®é›†è¿›è¡Œæ’åºã€‚æ­£å¦‚ä½ æ‰€æƒ³è±¡çš„ï¼Œè¿™åˆæ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„æ“ä½œï¼Œå¹¸è¿çš„æ˜¯ï¼Œå®ƒç¡®å®éå¸¸ç®€å•ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬æŒ‰ç…§`Year`åˆ—å¯¹æ•°æ®è¿›è¡Œæ’åºã€‚

```
5Ã—5 DataFrame
 Row â”‚ NR     Year   Wage     Ethn   Exper
     â”‚ Int32  Int32  Float64  Catâ€¦   Int32
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚    13   1980  1.19754  other      1
   2 â”‚    17   1980  1.67596  other      4
   3 â”‚    18   1980  1.51596  other      4
   4 â”‚    45   1980  1.89411  other      2
   5 â”‚   110   1980  1.94877  other      5
```

ç®€å•å¯¹å—ï¼Ÿåªéœ€å°†ä¸€ä¸ªæ•°æ®å¸§ä¼ é€’ç»™**æ’åºå‡½æ•°ï¼Œå¹¶å‘Šè¯‰å®ƒæ ¹æ®**å¯¹å“ªä¸€åˆ—(æˆ–å“ªäº›åˆ—)è¿›è¡Œæ’åºã€‚ä½ å¸Œæœ›å®ƒå‡å°‘å—ï¼Ÿå¯¹æ­¤æœ‰ä¸€ä¸ªå…³é”®è¯:

æ‚¨å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘ä»¬å¿…é¡»ä¼ å…¥ä¸€ä¸ªåˆ—åæ•°ç»„æ¥è¿›è¡Œæ’åºã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥åŒæ—¶æŒ‡å®šå¤šä¸ªåˆ—è¿›è¡Œæ’åºã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­:

```
5Ã—5 DataFrame
 Row â”‚ NR     Year   Wage     Ethn   Exper
     â”‚ Int32  Int32  Float64  Catâ€¦   Int32
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚    13   1980  1.19754  other      1
   2 â”‚    17   1980  1.67596  other      4
   3 â”‚    18   1980  1.51596  other      4
   4 â”‚    45   1980  1.89411  other      2
   5 â”‚   110   1980  1.94877  other      5
```

è¯·æ³¨æ„ï¼Œæˆ‘ä»¬é¦–å…ˆè·å¾—äº† 1980 å¹´çš„æ‰€æœ‰è§‚æµ‹æ•°æ®ï¼Œè€Œ`NR`æ•°å­—æ­£åœ¨å¢åŠ ã€‚

> `sort()`å‡½æ•°éœ€è¦ä¸€ä¸ªæ•°ç»„ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œè¿™æ ·å°±å¯ä»¥åŒæ—¶å¯¹å¤šåˆ—è¿›è¡Œæ’åºã€‚

æ•°æ®ç§‘å­¦ä¸­ä¸€ä¸ªé‡è¦çš„è€ƒè™‘å› ç´ æ˜¯æ‚¨çš„å†…å­˜å ç”¨ã€‚ä»¥ä¸Šæ‰€æœ‰æ“ä½œ**éƒ½è¿”å›äº† DataFrame** çš„å‰¯æœ¬ï¼Œåªç•™ä¸‹æˆ‘ä»¬çš„åŸå§‹æ•°æ®é›†ã€‚å¦‚æœä½ ä¸æƒ³æ”¹å˜ä½ çš„åŸå§‹æ•°æ®é›†ï¼Œè¿™æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³å‡å°‘ä½ çš„å†…å­˜å ç”¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šç‰ˆæœ¬çš„`sort`ï¼Œç»“å°¾æœ‰ä¸€ä¸ªåˆ˜æµ·:`sort!`ã€‚è¿™æ˜¯ Julia ä¸­çš„ä¸€ä¸ªçº¦å®šï¼Œå‡½æ•°é€šå¸¸æ˜¯ä¸å¯å˜çš„ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°æ”¹å˜äº†å®ƒçš„å‚æ•°ï¼Œé‚£ä¹ˆå®ƒçš„åå­—åº”è¯¥ä»¥ä¸€ä¸ªâ€œç °â€ç»“æŸã€‚ä¸‹é¢æ˜¯å®ƒåœ¨å®è·µä¸­çš„å·¥ä½œåŸç†:

è¿™å°†ä¿®æ”¹åŸå§‹æ•°æ®å¸§ã€‚

```
julia> first(males, 5)
5Ã—5 DataFrame
 Row â”‚ NR     Year   Wage     Ethn   Exper
     â”‚ Int32  Int32  Float64  Catâ€¦   Int32
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚    13   1980  1.19754  other      1
   2 â”‚    17   1980  1.67596  other      4
   3 â”‚    18   1980  1.51596  other      4
   4 â”‚    45   1980  1.89411  other      2
   5 â”‚   110   1980  1.94877  other      5
```

> ä»¥`!`ç»“å°¾çš„å‡½æ•°è¡¨ç¤ºè¯¥å‡½æ•°æ­£åœ¨æ”¹å˜å…¶è¾“å…¥å‚æ•°ã€‚

# æ‹†åˆ†-åº”ç”¨-ç»„åˆèŒƒä¾‹

ç°åœ¨æˆ‘ä»¬çŸ¥é“å¦‚ä½•ç´¢å¼•å’Œæ’åºæˆ‘ä»¬çš„æ•°æ®å¸§ã€‚è¿™å¾ˆæœ‰è¶£ï¼Œä½†æ›´æœ‰è¶£çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä¸éœ€è¦ç”¨çœ¼ç›æ¥è§‚å¯Ÿæ‰€æœ‰è¿™äº›è§‚å¯Ÿç»“æœã€‚å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿä»¥æŸç§æ–¹å¼èšåˆæˆ‘ä»¬çš„æ•°æ®å¹¶æ”¶é›†ä¸€äº›æœ‰è¶£çš„ç»Ÿè®¡æ•°æ®ä¼šæ€ä¹ˆæ ·ï¼Ÿå—¯ï¼Œè¿™åœ¨ SQL ä¸­ç§°ä¸º GROUP BY æ“ä½œï¼Œæˆ‘ä»¬åœ¨ DataFrames.jl ä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„ä¸œè¥¿ã€‚å¯¹äºåˆå­¦è€…ï¼Œè®©æˆ‘ä»¬åšä¸€äº›éå¸¸ç®€å•çš„äº‹æƒ…ã€‚è®©æˆ‘ä»¬ç®—å‡ºæˆ‘ä»¬æ¯å¹´æœ‰å¤šå°‘æ¬¡è§‚å¯Ÿ(è¡Œ):

```
8Ã—2 DataFrame
 Row â”‚ Year   nrow
     â”‚ Int32  Int64
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚  1980    545
   2 â”‚  1981    545
   3 â”‚  1982    545
   4 â”‚  1983    545
   5 â”‚  1984    545
   6 â”‚  1985    545
   7 â”‚  1986    545
   8 â”‚  1987    545
```

è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿæ¶‰åŠä¸¤ä¸ªåŠŸèƒ½:

*   `groupby`:è·å–æ•°æ®å¸§å’Œæˆ‘ä»¬æƒ³è¦å¯¹å…¶è¿›è¡Œåˆ†ç»„çš„åˆ—ã€‚
*   `combine`:è·å–`groupby`çš„è¾“å‡ºï¼Œå¹¶å¯¹æ¯ä¸ªç»„åº”ç”¨å‡½æ•°`nrow`ï¼Œæ±‡æ€»ç»“æœã€‚

> `nrow`å‡½æ•°åªè®¡ç®—æ•°æ®å¸§ä¸­çš„è¡Œæ•°ã€‚

æœ€ç»ˆçš„ç»“æœæ˜¯ä¸€ä¸ª DataFrameï¼Œæ¯ä¸ª`Year`â€”â€”æˆ‘ä»¬åˆ†ç»„çš„åˆ—â€”â€”éƒ½æœ‰ä¸€è¡Œã€‚æŸ±å­ä¹Ÿç”¨`Year`å’Œ`nrow`æ¥å‘½åã€‚

ä½ ä¹Ÿå¯ä»¥**ä½¿ç”¨åŒ¿å(lambda)å‡½æ•°**è¿›è¡Œä¸Šè¿°æ“ä½œã€‚å¦‚æœæ‚¨æœ‰ä¸€äº›å¿«é€ŸåŠŸèƒ½è¦è¿è¡Œï¼Œè¿™æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œä½†è¦è®©æˆ‘ä»¬å¼€å§‹ï¼Œè¿™é‡Œæœ‰ä¸ä¸Šé¢ç›¸å½“çš„åŠŸèƒ½:

```
combine(groupby(males, ["Year"]), df -> nrow(df))
```

æˆ‘è®¤ä¸ºè¿™å‘Šè¯‰äº†æˆ‘ä»¬æ›´å¤šå…³äºå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æˆ‘æ˜¯è¿™æ ·ç†è§£çš„:

**æŒ‰åˆ—`Year`åˆ†å‰²**åä¸º males çš„æ•°æ®é›†ï¼Œç„¶åå¯¹æ¯ä¸ªæ›´å°çš„æ•°æ®é›†`df` **åº”ç”¨**å‡½æ•°`nrow`ã€‚æœ€åï¼Œ**å°†**ç»“æœç»„åˆæˆä¸€ä¸ªæ•°æ®å¸§ï¼Œè¿™æ ·æˆ‘ä»¬æœ€ç»ˆå¾—åˆ°ä¸€ä¸ªåŒ…å«ä¸¤åˆ—çš„è¡¨:ä¸€åˆ—è¡¨ç¤ºæ‹†åˆ†(å¹´ä»½)ï¼Œå¦ä¸€åˆ—è¡¨ç¤ºæˆ‘ä»¬çš„å‡½æ•°ç»“æœã€‚

ä½ åœ¨è¿™é‡Œçœ‹åˆ°çš„å®é™…ä¸Šæ˜¯**æ‹†åˆ†-åº”ç”¨-ç»„åˆèŒƒå¼**ã€‚äº†è§£å¦‚ä½•å¿«é€Ÿæœ‰æ•ˆåœ°å®Œæˆè¿™é¡¹å·¥ä½œï¼Œæ‚¨å°†èƒ½å¤Ÿä»å¤§å¤šæ•°æ•°æ®é›†ä¸­æå–æ‚¨éœ€è¦çš„æ‰€æœ‰ä¿¡æ¯ï¼

è®©æˆ‘ä»¬å¤šåšä¸€äº›ç»ƒä¹ ã€‚å·¥äººæ¯å¹´çš„å¹³å‡å·¥èµ„æ˜¯å¤šå°‘ï¼Ÿ

```
8Ã—2 DataFrame
 Row â”‚ Year   x1
     â”‚ Int32  Float64
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚  1980  1.39348
   2 â”‚  1981  1.51287
   3 â”‚  1982  1.57167
   4 â”‚  1983  1.61926
   5 â”‚  1984  1.69029
   6 â”‚  1985  1.73941
   7 â”‚  1986  1.79972
   8 â”‚  1987  1.86648
```

æˆ‘çŸ¥é“ä½ åœ¨æƒ³ä»€ä¹ˆã€‚é‚£ä¸ªæ ç›®ä¸ºä»€ä¹ˆå«`x1`ï¼Ÿè¿™å¾ˆéš¾çœ‹ï¼Œè€Œä¸”å½“æˆ‘ä¸å¾—ä¸è®°ä½è¿™äº›æ•°å­—ä»£è¡¨ä»€ä¹ˆçš„æ—¶å€™ï¼Œæˆ‘çš„ç”Ÿæ´»ä¼šå˜å¾—æ›´åŠ è‰°éš¾ã€‚ä¸è¦æ‹…å¿ƒï¼Œæˆ‘ä»¬å¯ä»¥**å°†å‡ ä¹ä»»ä½•æˆ‘ä»¬å–œæ¬¢çš„å‡½æ•°**ä¼ é€’åˆ°`combine`ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å®é™…ä¸Šå¯ä»¥åˆ›å»ºä¸€ä¸ªå…·æœ‰æ–°åˆ—åçš„æ•°æ®æ¡†æ¶:

```
8Ã—2 DataFrame
 Row â”‚ Year   wage_avg
     â”‚ Int32  Float64
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚  1980   1.39348
   2 â”‚  1981   1.51287
   3 â”‚  1982   1.57167
   4 â”‚  1983   1.61926
   5 â”‚  1984   1.69029
   6 â”‚  1985   1.73941
   7 â”‚  1986   1.79972
   8 â”‚  1987   1.86648
```

æ•´æ´å¤šäº†ã€‚è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬æ˜¯å¦å¯ä»¥å°†è¿™ä¸ªæ‰©å±•åˆ°**åœ¨æ¯æ¬¡åˆ†å‰²æ—¶æ”¶é›†å¤šä¸ªç»Ÿè®¡æ•°æ®**â€”â€”è®°ä½æˆ‘ä»¬å¯ä»¥åœ¨`combine`ä¸­åšä»»ä½•æˆ‘ä»¬å–œæ¬¢çš„äº‹æƒ…:

```
8Ã—3 DataFrame
 Row â”‚ Year   wage_avg  people
     â”‚ Int32  Float64   Int64
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚  1980   1.39348     545
   2 â”‚  1981   1.51287     545
   3 â”‚  1982   1.57167     545
   4 â”‚  1983   1.61926     545
   5 â”‚  1984   1.69029     545
   6 â”‚  1985   1.73941     545
   7 â”‚  1986   1.79972     545
   8 â”‚  1987   1.86648     545
```

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸ä»…æ”¶é›†æ¯å¹´çš„å¹³å‡å·¥èµ„ï¼Œè¿˜æ”¶é›†æ¯å¹´çš„æ ·æœ¬é‡â€”â€”ç‹¬ç‰¹å·¥äººçš„æ•°é‡ã€‚ä»¥ä¸ŠçœŸçš„å¾ˆå‰å®³ï¼Œåœ¨è°ƒæŸ¥æ•°æ®é›†çš„æ—¶å€™å¯ä»¥å¸®åˆ°ä½ å¾ˆå¤šã€‚

# è¿‚å›åˆ°æ–¹æ³•é“¾æ¥ï¼Œåˆåç®¡é“

![](img/3386bf362fa91b290912d667c661223a.png)

æ˜¯çš„ï¼Œè¿™ä¸æ˜¯çƒŸæ–—ã€‚ä¹”çº³æ£®Â·å¡ç½—å°”åœ¨ [Unsplash](https://unsplash.com/s/photos/this-is-not-a-pipe?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

æ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šé¢çœ‹åˆ°çš„ï¼Œä½¿ç”¨**åŒ¿åå‡½æ•°å¯ä»¥éå¸¸æœ‰æ•ˆåœ°ä»æ•°æ®é›†**ä¸­å¿«é€Ÿè·å¾—ä¸€äº›ç»Ÿè®¡æ•°æ®ã€‚ç„¶è€Œï¼Œå½“å®ƒä»¬å˜å¾—å¤æ‚æ—¶ï¼Œå¯èƒ½æœ‰ç‚¹éš¾ä»¥é˜…è¯»ã€‚æˆ‘å–œæ¬¢é€šè¿‡ä½¿ç”¨ç®¡é“æˆ–æ–¹æ³•é“¾æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

è¿™é‡Œæˆ‘å°†å±•ç¤ºä¸€ä¸ªç®¡é“çš„ä¾‹å­ã€‚å‡è®¾ä½ æœ‰ä¸€ä¸ªåŒ…å« 3 ä¸ªå€¼çš„å‘é‡:`[1,2,3]`ä½ æƒ³å¯¹æ‰€æœ‰çš„å€¼æ±‚å¹³æ–¹ï¼Œæ±‚å’Œï¼Œç„¶åæ±‚å’Œçš„å¹³æ–¹æ ¹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ ‡å‡†å‡½æ•°æ¥å®ç°è¿™ä¸€ç‚¹:

```
julia> sqrt(sum(([1,2,3] .^ 2)))
3.7416573867739413
```

è¯·æ³¨æ„ï¼Œæˆ‘ä»¬å¿…é¡»åƒå†™æ•°å­¦å‡½æ•°ä¸€æ ·ï¼ŒæŠŠä¸Šé¢çš„å†…å®¹å†™å‡ºæ¥ã€‚æˆ‘ä»¬é¦–å…ˆå†™`sqrt`ï¼Œç„¶åå†™`sum`ç­‰ç­‰ï¼Œè€Œä¸æ˜¯åƒæˆ‘ä»¬æè¿°çš„é‚£æ ·ä»å¹³æ–¹å¼€å§‹ã€‚è¿™å°±æ˜¯æ–¹æ³•é“¾å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚é€šè¿‡ä½¿ç”¨ Julia ä¸­å†…ç½®çš„ç®¡é“æ“ä½œç¬¦`|>`ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ“ä½œçš„ç»“æœä¼ é€’ç»™ä¸€ä¸ªæ–°å‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸ä¸Šé¢ç›¸åŒçš„æ“ä½œï¼Œä½†æ˜¯ä½¿ç”¨äº†ç®¡é“:

```
julia> [1,2,3] .^ 2 |> sum |> sqrt
3.7416573867739413
```

æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ç”¨è¿™ä¸ªï¼Ÿå—¯ï¼Œè¿™å…è®¸æˆ‘ä»¬**ç¼–å†™é“¾æ¥åœ¨ä¸€èµ·çš„å¿«é€Ÿè€Œè‚®è„çš„åŒ¿åå‡½æ•°**æ¥åšä¸€äº›å¥‡ç‰¹çš„èšåˆã€‚

# æŠŠæ‰€æœ‰çš„æ”¾åœ¨ä¸€èµ·

![](img/2e56a270888a9a86322abf8e7f8cf0e7.png)

çº¦ç¿°Â·æ–½è¯ºå¸ƒé‡Œå¥‡åœ¨ [Unsplash](https://unsplash.com/s/photos/together?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•ä½¿ç”¨ç®¡é“ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨æ•°æ®å¸§ä¸­ä½¿ç”¨å®ƒä»¬ã€‚ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æƒ³è¦**è·å¾—æ¯ä¸ªäººçš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªè®°å½•çš„å·¥èµ„**ã€‚å› ä¸ºæˆ‘ä»¬çŸ¥é“å¦‚ä½•æ’åºå’Œåˆ†å‰²æ•°æ®å¸§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·åš:

```
julia> first(firstlast, 5)
5Ã—3 DataFrame
 Row â”‚ NR     first    last
     â”‚ Int32  Float64  Float64
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚    13  1.19754  1.66919
   2 â”‚    17  1.67596  1.82033
   3 â”‚    18  1.51596  2.87316
   4 â”‚    45  1.89411  2.13569
   5 â”‚   110  1.94877  2.11239
```

åœ¨ç¬¬ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å¯¹åˆ†å‰²çš„æ•°æ®å¸§è¿›è¡Œæ’åºï¼Œç„¶åæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ª`sorted_df`å’Œ**åº”ç”¨å¦ä¸€ä¸ªå‡½æ•°**æ¥æå–ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå·¥èµ„å€¼ã€‚è®©æˆ‘ä»¬åšä¸€ä¸ªå¿«é€Ÿçš„æ„Ÿè§‰æ£€æŸ¥ï¼Œçœ‹çœ‹è¿™æ˜¯å¦ç¡®å®æ˜¯æˆ‘ä»¬æƒ³è¦çš„:

```
julia> males[(males.NR .== 13) .& (map(year->year âˆˆ [1980, 1987], males.Year)), [:NR, :Year, :Wage]]
2Ã—3 DataFrame
 Row â”‚ NR     Year   Wage
     â”‚ Int32  Int32  Float64
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚    13   1980  1.19754
   2 â”‚    13   1987  1.66919
```

æ˜¯çš„ï¼Œè¿™è¡Œå¾—é€šï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç®€åŒ–ä¸€ä¸‹:

å¾ˆæ¼‚äº®ï¼Œå¯¹å§ï¼Ÿæƒ³è±¡ä¸€ä¸‹ä½ å¯ä»¥ç”¨è¿™äº›åšä»€ä¹ˆæ ·çš„ç–¯ç‹‚åˆ†æï¼ğŸ’ª

è®©æˆ‘ä»¬å¤šç»ƒä¹ ä¸€äº›ã€‚è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸º`is_lower`çš„åˆ—ï¼Œå¦‚æœå‘˜å·¥çš„æœ€ç»ˆå·¥èµ„**ä½äºä»–çš„æœ€ä½³å·¥èµ„**ï¼Œåˆ™è¯¥åˆ—ä¸ºçœŸã€‚æˆ‘ä»¬éœ€è¦åƒä»¥å‰ä¸€æ ·æ‰¾å‡ºä»–ä»¬çš„ç¬¬ä¸€ä»½å’Œæœ€åä¸€ä»½å·¥èµ„ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬è¿˜éœ€è¦å­˜å‚¨æœ€å¤§å·¥èµ„å€¼:

```
julia> first(finishers, 5)
5Ã—5 DataFrame
 Row â”‚ NR     first    max      last     is_lower
     â”‚ Int32  Float64  Float64  Float64  Bool
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚    13  1.19754  1.85306  1.66919      true
   2 â”‚    17  1.67596  1.82033  1.82033     false
   3 â”‚    18  1.51596  2.87316  2.87316     false
   4 â”‚    45  1.89411  2.13569  2.13569     false
   5 â”‚   110  1.94877  2.20252  2.11239      true
```

è¿™çœ‹èµ·æ¥æ˜¯å¯è¡Œçš„ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç¨å¾®æ¸…ç†ä¸€ä¸‹æˆ‘ä»¬çš„ä»£ç ï¼Œå› ä¸ºæˆ‘ä»¬å®é™…ä¸Šä¸éœ€è¦å­˜å‚¨ç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ªå€¼â€”â€”æˆ‘åªæ˜¯æ·»åŠ å®ƒä»¬æ¥åšä¸€ä¸ªå¿«é€Ÿçš„æ„Ÿè§‰æ£€æŸ¥ã€‚

```
julia> first(finishers, 5)
5Ã—2 DataFrame
 Row â”‚ NR     is_lower
     â”‚ Int32  Bool
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚    13      true
   2 â”‚    17     false
   3 â”‚    18     false
   4 â”‚    45     false
   5 â”‚   110      true
```

æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸Šè¿°å†…å®¹åˆå¹¶å›åŸå§‹æ•°æ®é›†:

```
julia> first(new_males, 5)
5Ã—6 DataFrame
 Row â”‚ NR     Year   Wage     Ethn   Exper  is_lower
     â”‚ Int32  Int32  Float64  Catâ€¦   Int32  Bool
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚    13   1980  1.19754  other      1      true
   2 â”‚    13   1981  1.85306  other      2      true
   3 â”‚    13   1982  1.34446  other      3      true
   4 â”‚    13   1983  1.43321  other      4      true
   5 â”‚    13   1984  1.56813  other      5      true
```

# ç»“è®º

ä½ ç°åœ¨å·²ç»æŒæ¡äº†å¯èƒ½æ˜¯æœ€å¼ºå¤§çš„åˆ†ææŠ€æœ¯ï¼Œå¹¶ä¸”çŸ¥é“å¦‚ä½•åœ¨ Julia ä¸­**æ‹†åˆ†-åº”ç”¨-ç»„åˆä½ çš„æ•°æ®æ¡†æ¶**ã€‚

æ‚¨è¿˜å­¦ä¹ äº†å¦‚ä½•:

*   **ä½¿ç”¨å¸ƒå°”å‘é‡ç´¢å¼•**ä½ çš„æ•°æ®å¸§
*   **æ ¹æ®åˆ—å€¼å¯¹æ•°æ®å¸§è¿›è¡Œæ’åº**â€”â€”ç”šè‡³å¯ä»¥ä½¿ç”¨`sort!`å°±åœ°æ’åº
*   **æ ¹æ®**å¯¹æ•°æ®å¸§è¿›è¡Œåˆ†ç»„ï¼Œå¹¶å¯¹å…¶åº”ç”¨å‡½æ•°
*   ä½¿ç”¨**ç®¡é“**æ“ä½œç¬¦`|>`è®©ä½ çš„ lambda å‡½æ•°æ›´åŠ å¼ºå¤§

è°¢è°¢ä½ ä¸€è·¯çœ‹å®Œï¼ğŸ‘

å¦‚æœä½ æƒ³è·å¾—æ›´å¤šæœ±è‰å¨…çš„ä¹è¶£ï¼Œè¯·è®¿é—® DataFrames.jl å’Œ CSV.jl:

[](/julia-dataframes-jl-basics-95dba5146ef4) [## Julia DataFrames.jl åŸºç¡€

### ç”¨ DataFrames.jl æˆ³æˆ³ä½ çš„æ•°æ®

towardsdatascience.com](/julia-dataframes-jl-basics-95dba5146ef4) [](/reading-csv-files-with-julia-e2623fb62938) [## ä¸ Julia ä¸€èµ·é˜…è¯» CSV æ–‡ä»¶

### äº†è§£å¦‚ä½•ä½¿ç”¨ CSV.jl è¯»å–å„ç§é€—å·åˆ†éš”çš„æ–‡ä»¶

towardsdatascience.com](/reading-csv-files-with-julia-e2623fb62938) [](/reading-csv-files-with-julia-part-2-51d74434358f) [## ä¸ Julia ä¸€èµ·é˜…è¯» CSV æ–‡ä»¶â€”ç¬¬ 2 éƒ¨åˆ†

### è´§å¸ã€å¸ƒå°”å€¼ç­‰çš„è‡ªå®šä¹‰æ ¼å¼ã€‚

towardsdatascience.com](/reading-csv-files-with-julia-part-2-51d74434358f)