# E2E æ·±åº¦å­¦ä¹ :æ— æœåŠ¡å™¨å›¾åƒåˆ†ç±»

> åŸæ–‡ï¼š<https://towardsdatascience.com/e2e-deep-learning-serverless-image-classification-d4351372c83e?source=collection_archive---------30----------------------->

## ä½¿ç”¨ TensorFlowã€Dockerã€AWS Lambda å’Œ API Gateway æ„å»ºç«¯åˆ°ç«¯æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œå¯¹çœŸå®ä¸–ç•Œçš„å›¾åƒè¿›è¡Œåˆ†ç±»

![](img/2cb9da8e8856d891a8f3b8d13f020925.png)

æœ¬æ°æ˜Â·æ‹‰æ–¯ç§‘åœ¨ [Unsplash](https://unsplash.com/@dapperprofessional?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šçš„ç…§ç‰‡

# A.ä»‹ç»

## A.1 .èƒŒæ™¯å’ŒåŠ¨æœº

åœ¨æ•°æ®ç§‘å­¦ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œ**éƒ¨ç½²**æ˜¯æˆ‘ä»¬æœ€ç»ˆ**å°†æˆ‘ä»¬çš„äººå·¥æ™ºèƒ½æ¨¡å‹ä»˜è¯¸å®è·µ**çš„é˜¶æ®µã€‚å› æ­¤ï¼Œåœ¨æˆ‘ä»¬æ„å»ºå’Œè¯„ä¼°æ¨¡å‹ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒä½œä¸ºä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ¥éƒ¨ç½²ï¼Œä»¥å¸®åŠ©ä¼ä¸šè§£å†³ç°å®ä¸–ç•Œä¸­çš„é—®é¢˜ã€‚åªæœ‰è¿™æ ·åšï¼Œæˆ‘ä»¬æ‰èƒ½ä»ç”¨æˆ·æˆ–åˆ©ç›Šç›¸å…³è€…é‚£é‡Œè·å¾—åé¦ˆï¼Œä»¥æ”¹è¿›æ¨¡å‹å¹¶è¯„ä¼°å…¶æ€§èƒ½å’Œå½±å“ã€‚æ¢å¥è¯è¯´ï¼Œç®¡ç†**ç«¯åˆ°ç«¯æ•°æ®ç§‘å­¦é¡¹ç›®**çš„æŠ€èƒ½æ˜¯ä»»ä½•æ•°æ®ç§‘å­¦å®¶éƒ½å¿…é¡»å…·å¤‡çš„ã€‚

## A.2 ç›®æ ‡

ç°åœ¨ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦å¤„ç†å¤§é‡çœŸå®ä¸–ç•Œçš„æœè£…å›¾åƒï¼Œè€Œä½ çš„èŒè´£æ˜¯ä¸ºä¸€å®¶ç”µå­å•†åŠ¡å…¬å¸åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨å›¾åƒåˆ†ç±»å™¨ã€‚å› æ­¤ï¼ŒæŒ‘æˆ˜ä¸ä»…åœ¨äºå»ºç«‹ä¸€ä¸ªå¼ºå¤§çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œè¿˜åœ¨äºå°†å…¶éƒ¨ç½²ä¸ºä¸€ä¸ª**æ— æœåŠ¡å™¨åº”ç”¨**ã€‚è¿™ç§æ— æœåŠ¡å™¨æ–¹æ³•æœ‰åŠ©äºæˆ‘ä»¬åªå…³æ³¨ä¸šåŠ¡è§£å†³æ–¹æ¡ˆï¼Œè€Œä¸æ˜¯æ‰¿è½½åº”ç”¨çš„ç¹é‡åŸºç¡€è®¾æ–½ã€‚å¹¸è¿çš„æ˜¯ï¼Œ **AWS Lambda** å’Œ **API Gateway** çš„ç»„åˆå¯ä»¥ç”¨äºæ‰˜ç®¡æ— æœåŠ¡å™¨ APIã€‚

åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€èµ·å­¦ä¹ å¦‚ä½•:

*   **å»ºç«‹æ·±åº¦å­¦ä¹ æ¨¡å‹**ä½¿ç”¨ TensorFlow å¯¹å›¾åƒè¿›è¡Œåˆ†ç±»ã€‚
*   **ä½¿ç”¨ TensorFlow Lite å°†æ¨¡å‹**è½¬æ¢æˆå°ºå¯¸æ•ˆç‡æ›´é«˜çš„æ ¼å¼ã€‚
*   ä½¿ç”¨ Docker åœ¨æˆ‘ä»¬çš„æœºå™¨ä¸Šæœ¬åœ°éƒ¨ç½²æ¨¡å‹ã€‚
*   **ä½¿ç”¨ AWS Lambda å’Œ API Gateway å°†æ¨¡å‹éƒ¨ç½²ä¸º REST API** ã€‚

## A.3 .ç›®å½•

*   **ç®€ä»‹** > *èƒŒæ™¯ä¸åŠ¨æœº* > *ç›®æ ‡>ç›®å½•*
*   **æ¨¡å‹è®­ç»ƒ** > *å›¾åƒæ•°æ®é›†>å»ºç«‹æ¨¡å‹>è®­ç»ƒæ¨¡å‹>è¯„ä¼°æ¨¡å‹*
*   **å‹å·è½¬æ¢** *>è½¬æ¢å‹å·>ä½¿ç”¨è½¬æ¢åçš„å‹å·*
*   **æ¨¡å‹éƒ¨ç½²** *> Lambda åŠŸèƒ½>æœ¬åœ°éƒ¨ç½²ï¼ŒDocker >åœ¨ AWS ä¸Šéƒ¨ç½²*

> ç”±äºè¿™ç¯‡æ•™ç¨‹æ–‡ç« å°†ä¼šéå¸¸**å¹¿æ³›**ï¼Œè¯·éšæ„è·³è½¬åˆ°é€‚åˆæ‚¨éœ€æ±‚çš„ç‰¹å®šéƒ¨åˆ†ã€‚

> **æ³¨æ„:** ä¸ºäº†è·Ÿè¿›è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬å¸Œæœ›ä½ å¯¹å¦‚ä½•ä½¿ç”¨ TensorFlowã€Docker [1]ã€AWS æœ¯è¯­å»ºç«‹æ·±åº¦å­¦ä¹ æ¨¡å‹æœ‰ä¸€ä¸ªåŸºæœ¬çš„äº†è§£ï¼Œå¹¶æ‹¥æœ‰ä¸€ä¸ª AWS å¸æˆ·æ¥è®¿é—®å…¶æœåŠ¡ã€‚
> 
> è¿™ä¸ªé¡¹ç›®åœ¨ [**æˆ‘çš„ GitHub åº“**ä¸­æœ‰å¾ˆå¥½çš„è®°å½•ã€‚å¯¹äºé‚£äº›å¯¹å®Œæ•´ä»£ç æ„Ÿåˆ°å¥½å¥‡çš„äººï¼Œè¯·ä¸€å®šè¦å»çœ‹çœ‹ğŸ‘ã€‚](https://github.com/diardanoraihan/E2E_Deep_Learning)

# B.æ¨¡ç‰¹åŸ¹è®­

## B.1 .å›¾åƒæ•°æ®é›†

è¯¥æ•°æ®é›†åŒ…å« 3781 å¹…æœè£…å›¾åƒï¼Œå…·æœ‰å‰ 10 ä¸ªæœ€æµè¡Œçš„ç±»åˆ«ï¼Œåˆ†ä¸ºè®­ç»ƒé›†ã€æµ‹è¯•é›†å’ŒéªŒè¯é›†ã€‚**è¡¨ 1** æ˜¾ç¤ºäº†æ•°æ®é›†æ‘˜è¦ï¼Œä»¥ä¾¿æ›´å¥½åœ°ç†è§£ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œè®¿é—®æ•°æ®[2]ã€‚

![](img/efd6439a89082a61a12cab9c8f65c085.png)

**è¡¨ 1** ã€‚ç”¨äºè®­ç»ƒæ·±åº¦å­¦ä¹ æ¨¡å‹çš„æœè£…å›¾åƒæ•°æ®é›†ç»¼è¿°ã€‚

è¦ä½¿ç”¨ Python æŸ¥çœ‹å›¾åƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`matplotlib.pyplot.gcf()`ç±»æ¥è·å–å½“å‰å›¾å½¢ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºç‰¹å®šçš„è¡Œæ•°å’Œåˆ—æ•°ã€‚å› æ­¤ï¼Œåœ¨æ¯ä¸€è¡Œå’Œæ¯ä¸€åˆ—ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªå›¾åƒä½œä¸ºä¸€ä¸ªæ”¯çº¿å‰§æƒ…ã€‚

**å›¾ä¸€**ã€‚10 ä¸ªç±»åˆ«ä¸­æ¯ä¸ªç±»åˆ«çš„å›¾åƒæ•°æ®é›†æ ·æœ¬ã€‚

## B.2 .å»ºç«‹æ¨¡å‹

æˆ‘ä»¬å°†ä½¿ç”¨**è¿ç§»å­¦ä¹ **æ–¹æ³•å’Œ**å›¾åƒå¢å¼º**æ¥æ„å»ºæ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œä»¥å®ç°è‰¯å¥½çš„æ€§èƒ½å¹¶é˜²æ­¢è¿‡æ‹Ÿåˆã€‚æˆ‘ä»¬ä½¿ç”¨çš„é¢„è®­ç»ƒæ¨¡å‹æ˜¯ **InceptionV3** ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥éšæ„å°è¯•å¦ä¸€ä¸ªæ¨¡å‹ã€‚TensorFlow Keras ä¸º`InceptionV3`å†…ç½®äº†ä¸€ä¸ª**æ¨¡å‹å®šä¹‰**ã€‚æˆ‘ä»¬å°†ä½¿ç”¨(150ï¼Œ150ï¼Œ3)ä½œä¸ºæ‰€éœ€çš„è¾“å…¥å½¢çŠ¶å›¾åƒï¼Œä¸åŒ…æ‹¬é¡¶éƒ¨çš„å…¨è¿é€šå±‚ï¼Œå¹¶ä½¿ç”¨æˆ‘ä»¬å¯ä»¥åœ¨æ­¤ä¸‹è½½[](https://storage.googleapis.com/mledu-datasets/inception_v3_weights_tf_dim_ordering_tf_kernels_notop.h5)****ã€3ã€‘**çš„å±€éƒ¨æƒé‡ã€‚å¯¼å…¥è¯¥ç±»ï¼Œå¹¶é€šè¿‡æŒ‡å®šä¸Šè¿°é…ç½®å®ä¾‹åŒ–å®ƒï¼Œå¦‚ä¸‹æ‰€ç¤º:**

****å›¾äºŒã€‚**å®šä¹‰é¢„è®­ç»ƒçš„ InceptionV3 æ¨¡å‹ã€‚**

****å›¾ä¸‰ã€‚**é¢„è®­ç»ƒæ¨¡å‹çš„æ€»ç»“ã€‚**

**æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œæ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±çš„åç§°ï¼Œå…¶ä¸­æœ€åä¸€å±‚çš„åç§°æ˜¯ **mixed10** ï¼Œå®ƒå·²ç»è¢«å·ç§¯ä¸º 3 ä¹˜ 3ã€‚æœ‰è¶£çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å†³å®šå‘ä¸Šç§»åŠ¨æœ€åä¸€å±‚ï¼Œä»¥ä½¿ç”¨æ›´å¤šä¸€ç‚¹çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œ**æ··åˆ 7** ï¼Œè¾“å‡º 7 ä¹˜ 7ã€‚å› æ­¤ï¼Œå¯ä»¥æ ¹æ®æˆ‘ä»¬çš„éœ€è¦é€‰æ‹©æœ€åä¸€å±‚è¿›è¡Œå®éªŒã€‚**

****å›¾å››ã€‚**æ ¹æ®æˆ‘ä»¬çš„éœ€æ±‚é€‰æ‹©é¢„è®­ç»ƒæ¨¡å‹çš„æœ€åä¸€å±‚ã€‚**

**æˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ªæ–°çš„æ¨¡å‹ï¼Œè¯¥æ¨¡å‹è€ƒè™‘äº† InceptionV3 çš„ **pre_trained_model** æ¥å¯¹æœè£…å›¾åƒè¿›è¡Œ 10 ä¸ªä¸åŒç±»åˆ«çš„åˆ†ç±»ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæ–°æ¨¡å‹æ„å»ºæœ€åå‡ å±‚ï¼Œå¦‚ä¸‹æ‰€ç¤º:**

****å›¾äº”ã€‚**ä½¿ç”¨è¿ç§»å­¦ä¹ ä¸ºæˆ‘ä»¬çš„ç›®æ ‡é‡æ–°æ„å»ºé¢„è®­ç»ƒæ¨¡å‹ã€‚**

## **B.3 .è®­ç»ƒæ¨¡å‹**

**ç°åœ¨ï¼Œæˆ‘ä»¬å‡†å¤‡è®­ç»ƒæ¨¡å‹ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬é€šè¿‡å°†å›¾åƒåƒç´ å€¼é™¤ä»¥ 255 æ¥æ ‡å‡†åŒ–å®ƒä»¬ï¼Œåœ¨ *ImageDataGenerator* ä¸­è®¾ç½®å‡ ä¸ªå‚æ•°æ¥å¢åŠ ç”¨äºè®­ç»ƒçš„è¾“å…¥å›¾åƒä»¥é˜²æ­¢è¿‡åº¦æ‹Ÿåˆï¼Œå°† batch_size è®¾ç½®ä¸º 32ï¼Œå¹¶å°†ç›®æ ‡å›¾åƒå¤§å°è®¾ç½®ä¸º(150ï¼Œ150)ä»¥é€‚åº”æ¨¡å‹è¾“å…¥å½¢çŠ¶ã€‚**

****å›¾ 6** ã€‚ä½¿ç”¨ 100 ä¸ªæ—¶æœŸçš„å›¾åƒå¢å¼ºæ¥è®­ç»ƒæ¨¡å‹**

****å›¾ 7ã€‚**åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æƒ³è±¡æ¨¡ç‰¹çš„è¡¨ç°ã€‚**

**æ­å–œä½ ã€‚æˆ‘ä»¬åªæ˜¯åˆ©ç”¨è¿ç§»å­¦ä¹ å’Œå›¾åƒå¢å¼ºå»ºç«‹äº†ä¸€ä¸ªå¼ºå¤§çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚æˆ‘ä»¬å®ç°äº† 90.59%çš„æµ‹è¯•å‡†ç¡®ç‡å’Œ 0.273%çš„æµ‹è¯•æŸå¤±ï¼Œå¹¶è®¾æ³•é¿å…è¿‡åº¦æ‹Ÿåˆã€‚å…¶å®æˆ‘ä»¬çš„æµ‹è¯•å‡†ç¡®ç‡æ¯”è®­ç»ƒå‡†ç¡®ç‡é«˜~5%ï¼Œå¾ˆæ£’ï¼**

## **B.4 .è¯„ä¼°æ¨¡å‹**

**è®©æˆ‘ä»¬é€šè¿‡å¯¹çœ‹ä¸è§çš„å›¾åƒè¿›è¡Œæ–°çš„é¢„æµ‹æ¥éªŒè¯è¿™ä¸ªæ¨¡å‹ã€‚æ­£å¦‚æˆ‘ä»¬æ‰€æ–™ï¼Œè¯¥æ¨¡å‹åœ¨å¯¹æ¯å¼ æµ‹è¯•å›¾åƒåšå‡ºæ­£ç¡®é¢„æµ‹æ–¹é¢è¡¨ç°å¾—éå¸¸å¥½ã€‚**

****å›¾ 8ã€‚**ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹é¢„æµ‹æ–°å›¾åƒ**

# **C.æ¨¡å‹è½¬æ¢**

**åœ¨æˆ‘ä»¬ä½¿ç”¨ TensorFlow æ„å»ºæ¨¡å‹åï¼Œæˆ‘ä»¬å¾ˆå¿«å°±ä¼šæ³¨æ„åˆ°æ–‡ä»¶å¤§å°å¤ªå¤§ï¼Œå¹¶ä¸”æ²¡æœ‰é’ˆå¯¹éƒ¨ç½²è¿›è¡Œä¼˜åŒ–ï¼Œå°¤å…¶æ˜¯åœ¨ç§»åŠ¨æˆ–è¾¹ç¼˜è®¾å¤‡ä¸Šã€‚è¿™å°±æ˜¯ tensor flow Lite(TF Lite)å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚TFLite å°†å¸®åŠ©æˆ‘ä»¬å°†æ¨¡å‹è½¬æ¢æˆæ›´æœ‰æ•ˆçš„æ ¼å¼ã€‚ **tfliteã€‚**è¿™å°†ç”Ÿæˆä¸€ä¸ªå°çš„äºŒè¿›åˆ¶å¤§å°çš„æ¨¡å‹ï¼Œå®ƒæ˜¯è½»é‡çº§çš„ï¼Œä½å»¶è¿Ÿçš„ï¼Œå¯¹å‡†ç¡®æ€§å½±å“å¾ˆå°ã€‚**

## **C.1 .è½¬æ¢æ¨¡å‹**

**ä¸‹é¢æ˜¯æˆ‘ä»¬éœ€è¦åšçš„æ­¥éª¤ï¼Œä»¥ä¾¿å°†æˆ‘ä»¬çš„æœ€ä½³è®­ç»ƒæ¨¡å‹è½¬æ¢ä¸º tflite æ–‡ä»¶:**

*   **åœ¨ h5 æ–‡ä»¶ä¸­åŠ è½½æ¨¡å‹ï¼Œ**
*   **ä»åŠ è½½çš„è®­ç»ƒæ¨¡å‹ä¸­å®ä¾‹åŒ– TFLiteConverter å¯¹è±¡ï¼Œ**
*   **è½¬æ¢å¹¶ä»¥ tflite æ–‡ä»¶æ ¼å¼ä¿å­˜è½¬æ¢åçš„æ¨¡å‹ã€‚**

****å›¾ä¹ã€‚**ä½¿ç”¨ TensorFlow Lite è½¬æ¢æ¨¡å‹**

## **C.2 .ä½¿ç”¨è½¬æ¢çš„æ¨¡å‹**

**ä¸€æ—¦æˆ‘ä»¬å°†æ¨¡å‹è½¬æ¢ä¸º tflite æ–‡ä»¶æ ¼å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ TFLite è§£é‡Šå™¨æ¥æŸ¥çœ‹æ¨¡å‹åœ¨ç§»åŠ¨æˆ–è¾¹ç¼˜è®¾å¤‡ä¸Šéƒ¨ç½²ä¹‹å‰å¦‚ä½•è¿›è¡Œé¢„æµ‹ã€‚**

****å›¾ 10ã€‚**ä½¿ç”¨ TFLite è§£é‡Šå™¨è¿›è¡Œé¢„æµ‹**

# **D.æ¨¡å‹éƒ¨ç½²**

**åœ¨æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Dockerã€AWS Lambda å’Œ AWS API Gateway éƒ¨ç½²æ¨¡å‹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª`lambda_function.py`æ¥åœ¨ AWS Lambda æˆ– Docker ä¸Šéƒ¨ç½²æ¨¡å‹ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªé€‰é¡¹éƒ½éœ€è¦è¿™ä¸ªæ–‡ä»¶æ¥è¿è¡Œæ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚**

## **D.1 å‡½æ•°**

**`lambda_function.py`å­˜å‚¨è¿è¡Œåº”ç”¨ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰å‡½æ•°ï¼Œä»å®šä¹‰è§£é‡Šå™¨å¼€å§‹ï¼Œæ¥æ”¶è¾“å…¥å›¾åƒï¼Œé¢„å¤„ç†å›¾åƒï¼Œå¹¶ä½¿ç”¨ä¿å­˜çš„æ¨¡å‹è¿›è¡Œé¢„æµ‹ã€‚**

****å›¾ 11ã€‚**Î»_ function . py**

## **D.2 .ä½¿ç”¨ Docker åœ¨æœ¬åœ°éƒ¨ç½²**

**æˆ‘ä»¬åˆšåˆšåˆ›é€ äº†`lambda_fucntion.py`ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨ AWS Lambda æ¥è·å–å’Œéƒ¨ç½²å®ƒã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Dockerã€‚AWS Lambda æ”¯æŒ dockerï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®¹å™¨æ˜ åƒæ¥éƒ¨ç½²æˆ‘ä»¬çš„åŠŸèƒ½ã€‚**

**åœ¨æœ¬èŠ‚ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•åœ¨æ‚¨çš„æœºå™¨ä¸­ä½¿ç”¨ Docker æ¥æœ¬åœ°è¿è¡Œæ¨¡å‹ã€‚**

## ****D.2.1 .æ–‡æ¡£æ–‡ä»¶****

**ä¸‹ä¸€æ­¥æ˜¯åˆ›å»º Dockerfile æ–‡ä»¶ã€‚ **Dockerfile** æ˜¯ä¸€ç§å°†è¿è¡Œä»£ç æ‰€éœ€çš„æ‰€æœ‰ä¾èµ–é¡¹æ”¾å…¥åŒ…å«æ‰€æœ‰å†…å®¹çš„å•ä¸€æ˜ åƒä¸­çš„æ–¹æ³•ã€‚**Docker é•œåƒ**æ˜¯ä¸€ä¸ªä¸“ç”¨äºä½ çš„å®¹å™¨çš„ç§æœ‰æ–‡ä»¶ç³»ç»Ÿã€‚å®ƒæä¾›äº†å®¹å™¨éœ€è¦çš„æ‰€æœ‰æ–‡ä»¶å’Œä»£ç ï¼Œä¾‹å¦‚:**

*   **å®‰è£… python åŒ…ç®¡ç†ç³»ç»Ÿã€‚**
*   **å®‰è£…æ•å¤´åº“å¤„ç†å›¾åƒæ–‡ä»¶ã€‚**
*   **å®‰è£… TensorFlow Lite tflite_runtime è§£é‡Šå™¨ã€‚**
*   **åœ¨ tflite æ–‡ä»¶ä¸­è·å–æˆ‘ä»¬çš„æ¨¡å‹ï¼Œå¹¶å°†å…¶å¤åˆ¶åˆ° docker å›¾åƒä¸­ã€‚**
*   **è·å– lambda_function.py å¹¶å°†å…¶å¤åˆ¶åˆ° docker æ˜ åƒä¸­ã€‚**

****å›¾ 12ã€‚** Dockerfile**

**æˆ‘ä»¬ç°åœ¨éœ€è¦åšçš„æ˜¯è¿è¡Œå¹¶æ„å»ºè¿™ä¸ª docker æ˜ åƒï¼Œå¹¶åœ¨æœ¬åœ°è¿è¡Œå®ƒã€‚**

## **D.2.2 .å»ºç«‹ Docker å½¢è±¡**

**ä»¥ä¸‹æ˜¯æˆ‘ä»¬åœ¨æœ¬åœ°è¿è¡Œåº”ç”¨ç¨‹åºçš„æ­¥éª¤:**

****è¿è¡Œ docker å®ˆæŠ¤è¿›ç¨‹**ã€‚æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹:**

*   **ç¬¬ä¸€ç§é€‰æ‹©æ˜¯ä»¥**ç®¡ç†å‘˜**çš„èº«ä»½æ‰“å¼€ **cmd** ï¼Œç„¶åå¯åŠ¨ä»¥ä¸‹å‘½ä»¤:`"C:\Program Files\Docker\Docker\DockerCli.exe" -SwitchDaemon`**
*   **ç¬¬äºŒä¸ªé€‰é¡¹æ˜¯ä»å¼€å§‹èœå•è¿è¡Œ **Docker æ¡Œé¢**å¹¶éªŒè¯ Docker æ˜¯å¦å¤„äº**è¿è¡Œ**çŠ¶æ€ã€‚**

**ä» Dockerfile æ–‡ä»¶æ„å»ºä¸€ä¸ªå›¾åƒã€‚**

*   **ä¸‹é¢çš„å‘½ä»¤å°†ä»æ‚¨å½“å‰æ‰€åœ¨çš„æ–‡ä»¶å¤¹çš„å†…å®¹æ„å»ºå›¾åƒï¼Œæ ‡è®°åä¸º`tf-lite-lambda`ã€‚**

```
$ docker build -t tf-lite-lambda .
```

## **è¿è¡Œå®¹å™¨æ˜ åƒ**

****æ ¹æ®æ‚¨åœ¨ä¸Šä¸€æ­¥**ä¸­æ„å»ºçš„æ˜ åƒå¯åŠ¨ä¸€ä¸ªå®¹å™¨ã€‚è¿è¡Œå®¹å™¨ä¼šä½¿ç”¨ç§æœ‰èµ„æºå¯åŠ¨åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸æœºå™¨çš„å…¶ä»–éƒ¨åˆ†å®‰å…¨éš”ç¦»ã€‚**

```
$ docker run --rm -p 8080:8080 --name clothes-classifier tf-lite-lambda
```

*   **`-p`(ä»£è¡¨*å‘å¸ƒ*)è¡¨ç¤ºæˆ‘ä»¬æƒ³è¦å°†å®¹å™¨ç«¯å£ 80 æ˜ å°„åˆ°ä¸»æœºç«¯å£ 80ã€‚å®¹å™¨åœ¨ç«¯å£ 80 ä¸Šæ‰“å¼€ä¸€ä¸ª web æœåŠ¡å™¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†è®¡ç®—æœºä¸Šçš„ç«¯å£æ˜ å°„åˆ°å®¹å™¨å…¬å¼€çš„ç«¯å£ã€‚**
*   **`--rm`(ä»£è¡¨*ç§»é™¤*)è¡¨ç¤ºå½“å®¹å™¨å­˜åœ¨æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›è‡ªåŠ¨ç§»é™¤å®¹å™¨ã€‚**
*   **`--name`ç»™ä¸€ä¸ªæ–°å®¹å™¨å‘½åï¼Œ`tf-lite-lambda`æ˜¯æˆ‘ä»¬ç”¨æ¥åˆ›å»ºå®¹å™¨çš„å›¾åƒåã€‚**

**ä»¥ä¸‹æ˜¯ä¹‹å‰å‘½ä»¤çš„ç»“æœæˆªå›¾:**

**![](img/3e628a8d1b56cc56c1a49f2c4ff1b942.png)**

****å›¾ 13ã€‚**æ„å»ºå¹¶è¿è¡Œ Docker å®¹å™¨æ˜ åƒ**

## **D.2.3 .æµ‹è¯•å®¹å™¨å›¾åƒ**

**åœ¨æˆ‘ä»¬è¿è¡Œæ¨¡å‹ä¹‹åï¼Œæˆ‘ä»¬æƒ³è¦æµ‹è¯•å®ƒã€‚æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨å®ƒæ¥æŸ¥çœ‹æ¨¡å‹é¢„æµ‹çš„ç»“æœã€‚**

**è¯¥æ–‡ä»¶åŒ…å«:**

*   **æ¥è‡ªé¢„æœŸè¾“å…¥å›¾åƒçš„å®Œæ•´ç±»åˆ«ã€‚**
*   **ä»æ­¤é“¾æ¥è·å¾—çš„ä¸€å¼ è£¤å­(æµ‹è¯•)å›¾ç‰‡:[http://bit.ly/mlbookcamp-pants](http://bit.ly/mlbookcamp-pants)ã€‚æˆ‘ä»¬å°†å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªé”®`url`å’Œå›¾åƒçš„ URLã€‚**
*   **ä¸€ä¸ª URL åœ°å€ï¼Œè¡¨æ˜æˆ‘ä»¬éƒ¨ç½²åœ¨ docker å†…éƒ¨çš„æœ¬åœ°ä¸»æœºä¸Šã€‚**
*   **å‘ç›®æ ‡ URL åœ°å€å‘é€ POST è¯·æ±‚ä»¥è·å¾—é¢„æµ‹ç»“æœçš„è¿‡ç¨‹ã€‚**
*   **è§£æé¢„æµ‹ç»“æœå¹¶æ˜¾ç¤ºç»™ç”¨æˆ·ã€‚**

****å›¾ 14ã€‚** test.py**

**åœ¨æ‚¨çš„ CLI ä¸Šè¿è¡Œ`test.py`ï¼Œäº²è‡ªæŸ¥çœ‹ç»“æœ:**

**![](img/e304b5c1dd5684d60c1b3d4315d20a29.png)**

****å›¾ 15ã€‚**è¿è¡Œ test.pyï¼Œé€šè¿‡ Docker å®¹å™¨è¿›è¡Œé¢„æµ‹**

## **D.3 .åœ¨ AWS ä¸Šéƒ¨ç½²**

**æˆ‘ä»¬åˆšåˆšç”¨ Docker åœ¨æœ¬åœ°éƒ¨ç½²äº†æ¨¡å‹ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç›¸åŒçš„å®¹å™¨å¹¶å°†å…¶éƒ¨ç½²åœ¨ AWS ä¸Šã€‚AWS æ‹¥æœ‰æ‚¨åœ¨çº¿éƒ¨ç½²æ·±åº¦å­¦ä¹ æ¨¡å‹æ‰€éœ€çš„ä¸€åˆ‡ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ AWS CLIã€AWS ECRã€AWS Lambda å’Œ AWS API Gatewayã€‚**

## **D.3.1 .å®‰è£… AWS CLI**

**æˆ‘ä»¬ç”¨ AWS åšçš„ä¸€åˆ‡éƒ½æ˜¯ API è°ƒç”¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»æœ‰ä¸€ä¸ªå·¥å…·ï¼Œå…è®¸æˆ‘ä»¬å¯¹è¿™äº› API è°ƒç”¨è¿›è¡Œç¼–ç¨‹æˆ–ç¼–å†™è„šæœ¬ã€‚å…¶ä¸­ä¸€ä¸ªå·¥å…·æ˜¯ AWS å‘½ä»¤è¡Œç•Œé¢(CLI)ã€‚åœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²ç»åœ¨æœ¬åœ°æœºå™¨ä¸Šå®‰è£…äº† AWS CLI[4]ã€‚**

## **D.3.2 .é…ç½®æ‚¨çš„ AWS å¸æˆ·**

**å¦‚æœæˆ‘ä»¬æƒ³åœ¨ AWS ä¸Šéƒ¨ç½²åº”ç”¨ç¨‹åºï¼Œæ˜¾ç„¶æˆ‘ä»¬éœ€è¦åœ¨é‚£é‡Œè®¾ç½®ä¸€ä¸ªå¸æˆ·ã€‚åˆ›å»º AWS IAM ç”¨æˆ·å¸æˆ·åï¼Œè®¾ç½®è®¿é—®å¯†é’¥ IDã€ç§˜å¯†è®¿é—®å¯†é’¥ã€é»˜è®¤åŒºåŸŸå’Œé»˜è®¤è¾“å‡ºæ ¼å¼(é€šå¸¸æ˜¯ JSON)ã€‚ä¸€æ—¦æˆ‘ä»¬å®Œæˆäº†è¿™äº›ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä» AWS CLI å¯¹ AWS è¿›è¡Œç¼–ç¨‹è°ƒç”¨ã€‚**

```
$ aws configure
```

**![](img/6ab1386c9ea6b34df11c5d068c7ae1f1.png)**

****å›¾ 16ã€‚**é€šè¿‡ AWS CLI é…ç½® AWS å¸æˆ·**

## **D.3.3 .åœ¨ AWS ECR(å¼¹æ€§å®¹å™¨æ³¨å†Œ)ä¸­åˆ›å»ºå›è´­**

**AWS ECR æ˜¯æˆ‘ä»¬æ”¾ Docker å›¾ç‰‡çš„åœ°æ–¹ã€‚é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç§æœ‰å­˜å‚¨åº“æ¥å­˜å‚¨æˆ‘ä»¬ä¹‹å‰æ„å»ºçš„ Docker æ˜ åƒã€‚**

```
**$** aws ecr create-repository --repository-name lambda-images
```

**![](img/d11631507ea29d9840ffcd94a63d27e7.png)**

****å›¾ 17ã€‚é€šè¿‡ AWS CLI åœ¨ AWS ECR ä¸­åˆ›å»ºæ–°çš„å­˜å‚¨åº“****

## **D.3.4 .å‘å›è´­å‘å¸ƒå›¾åƒ**

**ç°åœ¨ï¼Œæˆ‘ä»¬æƒ³å‘å¸ƒæˆ‘ä»¬åœ¨æœ¬åœ°æ„å»ºçš„å›¾åƒã€‚ä»¥ä¸‹æ˜¯ç›´æ¥å¼•ç”¨è‡ª AWS çš„æ­¥éª¤(AWS ECR >å­˜å‚¨åº“> lambda-images >æŸ¥çœ‹æ¨é€å‘½ä»¤):**

*   **æ£€ç´¢ä¸€ä¸ªè®¤è¯ä»¤ç‰Œï¼Œå¹¶å‘æ‚¨çš„æ³¨å†Œè¡¨è®¤è¯æ‚¨çš„ Docker å®¢æˆ·ç«¯ã€‚**

```
$ aws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin XXXXXXXXX474.dkr.ecr.us-east-1.amazonaws.com
```

*   **ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ„å»º Docker æ˜ åƒã€‚**

```
$ docker build -t lambda-images .
```

*   **æ ‡è®°æ‚¨çš„å›¾åƒï¼Œä»¥ä¾¿æ‚¨å¯ä»¥å°†å›¾åƒæ¨é€åˆ°æ­¤å­˜å‚¨åº“ã€‚**

```
$ docker tag tf-lite-lambda XXXXXXXXX474.dkr.ecr.us-east-1.amazonaws.com/lambda-images:tf-lite-lambda
```

*   **è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°†è¿™ä¸ªæ˜ åƒæ¨é€åˆ°æ‚¨æ–°åˆ›å»ºçš„ AWS å­˜å‚¨åº“ã€‚**

```
$ docker push XXXXXXXXX474.dkr.ecr.us-east-1.amazonaws.com/lambda-images:tf-lite-lambda
```

**æ£€æŸ¥ AWS ECR ç½‘é¡µä¸Šçš„æ¨é€å›¾åƒã€‚ç¡®ä¿å¤åˆ¶ URIï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å®ƒæ¥åˆ›å»ºä¸€ä¸ª Lambda å‡½æ•°ã€‚**

**![](img/c62aa7d2616761655213fdee2a4074d6.png)**

****å›¾ 18ã€‚**å¤åˆ¶æ¨é€å›¾åƒçš„ URIï¼Œåˆ›å»º lambda å‡½æ•°**

## **D.3.5 .åˆ›å»ºÎ»å‡½æ•°**

**ç°åœ¨ï¼Œæˆ‘ä»¬å‡†å¤‡åˆ›å»ºä¸€ä¸ª Lambda å‡½æ•°ã€‚è¿›å…¥ AWS `Lambda`å¹¶ç‚¹å‡»`Create function`ã€‚é€‰æ‹©`Container Image`ã€‚**

**![](img/9490d7ecd50ce7f47a0e95324cb553ed.png)**

****å›¾ 19ã€‚**é€šè¿‡ AWS Lambda åˆ›å»º Lambda å‡½æ•°**

**ä¸ºæ‚¨çš„å‡½æ•°å–ä¸€ä¸ªæƒŸä¸€çš„åç§°ï¼Œå¹¶ç”¨æ‚¨ä¹‹å‰å¤åˆ¶çš„å›¾åƒ URL å¡«å……å®¹å™¨å›¾åƒ URLã€‚é€šè¿‡å°†ä¸€åˆ‡ä¿ç•™ä¸ºé»˜è®¤ï¼Œç‚¹å‡»`Create function`**

**æ‚¨åˆšåˆšä¸ºé¢„æµ‹ä»»åŠ¡åˆ›å»ºäº†ä¸€ä¸ª lambda å‡½æ•°ã€‚ç„¶è€Œï¼Œç›®å‰çš„é…ç½®å¹¶æ²¡æœ‰ç»™æˆ‘ä»¬è¶³å¤Ÿçš„å†…å­˜å’Œè¶…æ—¶ã€‚æˆ‘ä»¬æœ‰ä¸€ä¸ªå¤§æ¨¡å‹ï¼Œè¯¥åŠŸèƒ½å°†éœ€è¦ä¸€äº›æ—¶é—´æ¥è¿è¡Œï¼Œå¹¶é¦–æ¬¡å°†æ‰€æœ‰å†…å®¹åŠ è½½åˆ°å†…å­˜ä¸­ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°é…ç½®å®ƒã€‚è¿›å…¥`Configuration` > `General Configuration` >ç‚¹å‡»`Edit`ï¼Œå°† RAM å’Œè¶…æ—¶åˆ†åˆ«è®¾ç½®ä¸º **512/1024** å’Œ **30** ç§’ã€‚çœçœå§ã€‚**

**![](img/3c1ba35b1756e9ef57e1846b5f83571b.png)**

****å›¾ 20ã€‚**é‡æ–°é…ç½® lambda åŠŸèƒ½çš„å†…å­˜å’Œè¶…æ—¶**

## **D.3.6 .æµ‹è¯•Î»åŠŸèƒ½**

**æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ä»¥ä¸‹ JSON æ–‡ä»¶æ ¼å¼åˆ›å»ºä¸€ä¸ªæµ‹è¯•:**

```
{
    "url": "https://tinyurl.com/clothes-t-shirt"
}
```

**![](img/fe0e711fbbeb34ef63534050bd4176a4.png)**

****å›¾ 21ã€‚**æµ‹è¯•æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ Lambda å‡½æ•°**

**ä¸ºæ–°äº‹ä»¶å‘½åï¼Œä¿å­˜åç‚¹å‡»`Test`ã€‚ç„¶åï¼Œæ‚¨å°†çœ‹åˆ°ä»¥ä¸‹ç»“æœ:**

**![](img/e28336f4abd07ae78b338d98de1782c2.png)**

****å›¾ 22ã€‚**è¿›è¡Œé¢„æµ‹æ—¶ lambda å‡½æ•°çš„æ‰§è¡Œç»“æœ**

**ä½ éœ€è¦çŸ¥é“çš„ä¸€ä»¶äº‹æ˜¯ï¼Œä½¿ç”¨ AWS Lambdaï¼Œä½ å°†æ ¹æ®è¯·æ±‚çš„æ•°é‡å’ŒæŒç»­æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œæˆ‘ä»¬çš„ä»£ç æ‰€èŠ±è´¹çš„æ—¶é—´æ¥æ”¶è´¹ã€‚è¯·å‚è€ƒæ­¤[é“¾æ¥](https://jovian.ai/outlink?url=https%3A%2F%2Faws.amazon.com%2Flambda%2Fpricing%2F)äº†è§£æ›´å¤šå®šä»·ä¿¡æ¯ã€‚**

## **D.3.7\. API ç½‘å…³é›†æˆ**

**æ‚¨åˆšåˆšæµ‹è¯•äº†è¯¥å‡½æ•°ï¼Œå®ƒåœ¨è¿›è¡Œé¢„æµ‹æ—¶ä¼¼ä¹å·¥ä½œå¾—å¾ˆå¥½ã€‚å‰©ä¸‹çš„å°±æ˜¯ä»å¤–é¢(ç½‘ä¸Š)ç”¨äº†ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ AWS API Gateway åˆ›å»ºä¸€ä¸ª APIã€‚**

****1ã€‚åˆ›å»ºæ–°çš„ API****

*   **è®¿é—® AWS API ç½‘å…³ï¼Œç„¶åç‚¹å‡»`Build`æŒ‰é’®é€‰æ‹© REST APIã€‚**
*   **é€‰æ‹©åè®®:`REST`ã€‚ä¸º**é€‰æ‹©æ–° APIï¼Œåˆ›å»ºæ–° API** ã€‚ç„¶åï¼Œå¡«å†™ API åç§°å¹¶æ·»åŠ ä¸€äº›æè¿°ã€‚**

**![](img/6704fc575b4f861fadaa473564290609.png)****![](img/b825cdc27aa794b4366a79aa93d738d7.png)**

****å›¾ 23ã€‚**é€šè¿‡ AWS API ç½‘å…³ä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ„å»ºæ–°çš„ API**

****2ã€‚åˆ›å»ºèµ„æº:é¢„æµ‹å’Œæ–¹æ³•å¸–å­****

*   **ä»`Actions`ä¸­é€‰æ‹©åˆ¶ä½œèµ„æº>å¡«å†™â€œé¢„æµ‹â€ã€‚**
*   **ä»`Actions`ä¸­é€‰æ‹©åˆ¶ä½œæ–¹æ³•>é€‰æ‹©`POST`**

**![](img/716f1aafa5769c20735178f2cf22cde8.png)**

****å›¾ 24ã€‚**ä¸ºæ–°çš„ API åˆ›å»ºæ–°çš„èµ„æºå’Œæ–¹æ³•**

****3ã€‚é€‰æ‹© Lambda å‡½æ•°ï¼Œæ·»åŠ ä¸€äº›ç»†èŠ‚**ã€‚**

*   **ç‚¹å‡»`POST`ï¼Œç„¶åç¡®ä¿ä¸º **Lambda å‡½æ•°**å†™ä¸‹æ­£ç¡®çš„åç§°ï¼Œå¹¶ä¿ç•™é»˜è®¤è®¾ç½®ã€‚**

**![](img/58e562633352fd052fd943267006940b.png)**

****å›¾ 25ã€‚**å°† Lambda å‡½æ•°é›†æˆåˆ°ä½œä¸ºè§¦å‘å™¨çš„ API ä¸­**

****4ã€‚æµ‹è¯• API** ã€‚**

*   **ä»æµç¨‹å›¾æ‰§è¡Œä¸­ï¼Œç‚¹å‡»`Test`ã€‚**

**![](img/e4f432a2aa450d6e354cbe3d1803ed1e.png)**

****å›¾ 26ã€‚**å®¢æˆ·ç«¯è¯·æ±‚å’Œ lambda å‡½æ•°é€šè¿‡ API çš„æ‰§è¡Œæµç¨‹å›¾**

*   **è¦æµ‹è¯•å®ƒï¼Œåœ¨**è¯·æ±‚ä½“ä¸­è¾“å…¥ä»£ç ã€‚**ç‚¹å‡»**æµ‹è¯•ã€‚**ç„¶åï¼Œæˆ‘ä»¬åº”è¯¥åœ¨**å“åº”ä½“ä¸­çœ‹åˆ°ç»“æœã€‚****

**![](img/7b043257cf596fdace1da68cd59c5b90.png)****![](img/9779168ef59a463c8c5fa07b834086d9.png)**

****å›¾ 27ã€‚**æµ‹è¯•æ¨¡æ‹Ÿå®¢æˆ·ç«¯å’Œ lambda å‡½æ•°ä¹‹é—´åšå‡ºçš„é¢„æµ‹**

****5ã€‚éƒ¨ç½² API****

*   **æœ€åï¼Œæˆ‘ä»¬éœ€è¦éƒ¨ç½² API ä»¥åœ¨å¤–éƒ¨ä½¿ç”¨å®ƒã€‚ä»`Actions`ç‚¹å‡»`DEPLOY API`ã€‚**

**![](img/2d3150952a867b4a2cffdad1a07d8961.png)**

****å›¾ 28ã€‚**éƒ¨ç½² API**

*   **ä»â€œè°ƒç”¨ URLâ€éƒ¨åˆ†è·å– URLã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æœ‰:[](https://xw2bv0y8mb.execute-api.us-east-1.amazonaws.com/test)**
*   ****æ‰“å¼€**é‚®å·® App** æˆ–è€…å» [**reqbin**](https://reqbin.com) æµ‹è¯•æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ REST APIã€‚æ³¨æ„ï¼Œå› ä¸ºæˆ‘ä»¬æŒ‡å®š`predict`ä½œä¸º`POST`çš„æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ URL çš„æœ«å°¾æ·»åŠ `/predict`ã€‚å› æ­¤ï¼Œè¿›è¡Œ API è°ƒç”¨ä»¥è¿›è¡Œé¢„æµ‹çš„å®Œæ•´ URL æ˜¯:[**https://xw 2 bv 0 y8 MB . execute-API . us-east-1 . amazonaws . com/test/predict**](https://xw2bv0y8mb.execute-api.us-east-1.amazonaws.com/test/predict)****
*   ****å°†é“¾æ¥å¤åˆ¶å¹¶ç²˜è´´åˆ°åº”ç”¨ç¨‹åºçš„ URL éƒ¨åˆ†ã€‚****
*   ****å¤åˆ¶ JSON ä¸­çš„ä»¥ä¸‹å¯¹è±¡ä½œä¸ºä¸»ä½“æ¥å‘å‡ºè¿™ä¸ª POST è¯·æ±‚ã€‚ç‚¹å‡»`Send`ã€‚****

```
**{
    "url": "https://tinyurl.com/clothes-t-shirt"
}**
```

*   ****åœ¨å‘å‡º API call POST è¯·æ±‚åï¼Œæ‚¨å¯ä»¥çœ‹åˆ°é¢„æµ‹ç»“æœä½œä¸ºæ¥æ”¶åˆ°çš„å†…å®¹ã€‚****

****![](img/03cc7f1beef90265a5cbb65b6c60665d.png)****

******å›¾ 29ã€‚**é€šè¿‡ **reqbin** è°ƒç”¨ API è¿›è¡Œé¢„æµ‹****

*   ****æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`cURL`(ä»£è¡¨å®¢æˆ·ç«¯ URL)é€šè¿‡ç»ˆç«¯(å³ Git Bash)å°† POST è¯·æ±‚ä¸­çš„æ•°æ®(åœ¨æœ¬ä¾‹ä¸­æ˜¯ t æ¤å›¾åƒ)å‘é€åˆ°æˆ‘ä»¬çš„æœåŠ¡(åœ¨æœ¬ä¾‹ä¸­æ˜¯è¡£æœå›¾åƒåˆ†ç±»å™¨)ã€‚****

```
**$ curl -d '{"url": "https://tinyurl.com/clothes-t-shirt"}' -H "Content-Type: application/json" -X POST [https://xw2bv0y8mb.execute-api.us-east-1.amazonaws.com/test/predict](https://xw2bv0y8mb.execute-api.us-east-1.amazonaws.com/test/predict)**
```

*   ****è¿è¡Œä¸Šé¢çš„å‘½ä»¤å°†ç”Ÿæˆè¿™ä¸ªé¢„æµ‹ç»“æœ:****

****![](img/50553de9ee9d1cd1d86c0822a77e0c80.png)****

******å›¾ 30ã€‚**é€šè¿‡ **Git Bash** é€šè¿‡ API è°ƒç”¨è¿›è¡Œé¢„æµ‹****

> ****æ­å–œä½ ã€‚ç°åœ¨ï¼Œæ‚¨çš„æ·±åº¦å­¦ä¹ æ¨¡å‹å®Œå…¨åœ¨çº¿ï¼Œå¹¶å‡†å¤‡å¥½å¸®åŠ©ä¸–ç•Œå˜å¾—æ›´ç¾å¥½ï¼****

# ****E.ç»“è®º****

****ç”±äºè¦éµå¾ªè®¸å¤šç¨‹åºï¼Œè¿›è¡Œç«¯åˆ°ç«¯æ·±åº¦å­¦ä¹ é¡¹ç›®å¯èƒ½å…·æœ‰æŒ‘æˆ˜æ€§ã€‚ç„¶è€Œï¼Œç”±äº TensorFlow çš„ä¸°å¯Œç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°æ„å»ºå’Œéƒ¨ç½²æ¨¡å‹ã€‚Docker å’Œ AWS ç­‰æœåŠ¡çš„å­˜åœ¨æœ‰åŠ©äºæ•°æ®ç§‘å­¦å®¶å¿«é€Ÿç¦»çº¿æˆ–åœ¨çº¿äº¤ä»˜åº”ç”¨ç¨‹åºï¼Œä»¥è§£å†³ä¸šåŠ¡é—®é¢˜ã€‚****

****ä»¥æ— æœåŠ¡å™¨çš„è¡£æœå›¾åƒåˆ†ç±»å™¨ä¸ºä¾‹ï¼Œæˆ‘å¸Œæœ›è¿™ä¸ªé¡¹ç›®ç»™ä½ ä¸€ä¸ªåŸºæœ¬çš„æƒ³æ³•ï¼Œå¦‚ä½•åœ¨æœªæ¥å¤„ç†ç±»ä¼¼çš„æƒ…å†µã€‚ç»§ç»­æ¿€åŠ±ï¼****

****è°¢è°¢ä½ ï¼Œ****

****diardano Raihan
[LinkedIn ç®€ä»‹](https://www.linkedin.com/in/diardanoraihan/)****

> *******æ³¨*** *:ä½ çœ‹åˆ°çš„ä¸€åˆ‡éƒ½è®°è½½åœ¨* [***æˆ‘çš„ GitHub èµ„æºåº“*** *é‡Œã€‚*](https://github.com/diardanoraihan/E2E_Deep_Learning) *å¯¹äºå¯¹å®Œæ•´ä»£ç æ„Ÿåˆ°å¥½å¥‡çš„äººï¼Œè¯·åŠ¡å¿…è®¿é—®ğŸ‘ã€‚*****

# ****å‚è€ƒ****

*   ****[1] T. Soamï¼Œã€Šåœ¨çª—å£ 10 ä¸Šå®‰è£… Dockerã€‹ï¼Œ *Medium* ï¼Œ[https://Medium . com/@ tushar 0618/Installing-Docker-desktop-on-Window-10-501 e 594 fc 5 EB](https://medium.com/@tushar0618/installing-docker-desktop-on-window-10-501e594fc5eb)ï¼Œ2021 å¹´ 6 æœˆã€‚****
*   ****[2] A .æ ¼é‡Œæˆˆé‡Œè€¶å¤«ï¼Œã€Šæœè£…æ•°æ®é›†(å­é›†)ã€‹ï¼Œ *GitHub* ï¼Œ[https://github.com/alexeygrigorev/clothing-dataset-small](https://github.com/alexeygrigorev/clothing-dataset-small)ï¼Œ2021 å¹´ 6 æœˆã€‚****
*   ****[3] *æœºå™¨å­¦ä¹  Edu* ï¼Œ[https://storage . Google APIs . com/mledu-datasets/inception _ v3 _ weights _ TF _ dim _ ordering _ TF _ kernels _ notop . H5](https://storage.googleapis.com/mledu-datasets/inception_v3_weights_tf_dim_ordering_tf_kernels_notop.h5)ï¼Œ2021 å¹´ 6 æœˆã€‚****
*   ****[4]â€œåœ¨ Windows ä¸Šå®‰è£…ã€æ›´æ–°å’Œå¸è½½ AWS CLI ç‰ˆæœ¬ 2â€ï¼Œ*äºšé©¬é€Š Web æœåŠ¡(AWS)* ï¼Œ[https://docs . AWS . Amazon . com/CLI/latest/user guide/install-CLI v2-Windows . html](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-windows.html)ï¼Œ2021 å¹´ 6 æœˆã€‚****