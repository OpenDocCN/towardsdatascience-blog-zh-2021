# ä¸ºä»€ä¹ˆåº”è¯¥å¼€å§‹ä½¿ç”¨ Pathlib ä½œä¸º OS æ¨¡å—çš„æ›¿ä»£

> åŸæ–‡ï¼š<https://towardsdatascience.com/why-you-should-start-using-pathlib-as-an-alternative-to-the-os-module-d9eccd994745?source=collection_archive---------4----------------------->

## ç¬¬ä¸€ä¸ªåŸå› :é¢å‘å¯¹è±¡ç¼–ç¨‹

![](img/de45a398cfe310f785d4798576016ed3.png)

ä½œè€…åˆ¶ä½œçš„å›¾åƒ

ä½œä¸ºä¸€åæ•°æ®ç§‘å­¦å®¶ï¼Œæˆ‘æ¯å¤©éƒ½è¦æ“ä½œè·¯å¾„å’Œæ–‡ä»¶æ¥è¯»å†™æ•°æ®ã€‚

ä¸ºæ­¤ï¼Œæˆ‘é€šå¸¸ä½¿ç”¨`**os.path**` Python æ¨¡å—æ¥æ‰§è¡Œè¯¸å¦‚è¿æ¥è·¯å¾„ã€æ£€æŸ¥ç›®å½•å†…å®¹æˆ–åˆ›å»ºæ–‡ä»¶å¤¹ä¹‹ç±»çš„æ“ä½œã€‚

äº‹å®ä¸Šï¼Œä½¿ç”¨`**os.path**`æ¨¡å—ä¼¼ä¹æ˜¯è®¿é—®æ–‡ä»¶ç³»ç»Ÿçš„è‡ªç„¶é€‰æ‹©ã€‚

> ***åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘é€šè¿‡å¼•å…¥å¦ä¸€ä¸ªåä¸º Pathlib çš„*è·¯å¾„ç®¡ç†*åº“æ¥æŒ‘æˆ˜è¿™ç§åšæ³•ã€‚
> æˆ‘ä»¬å°†äº†è§£è¿™ä¸ªåº“æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå®ƒä¸ os.path æ¨¡å—æœ‰ä½•ä¸åŒï¼Œå®ƒæä¾›äº†å“ªäº›ç‰¹æ€§å’Œä¼˜åŠ¿ï¼Œä»¥åŠä½•æ—¶åº”è¯¥(æˆ–ä¸åº”è¯¥)ä½¿ç”¨å®ƒã€‚***

äº‹ä¸å®œè¿Ÿï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ğŸ”

# os æ¨¡å—çš„â€œé—®é¢˜â€

`os`æ¨¡å—å¾ˆå—æ¬¢è¿:å®ƒå·²ç»å­˜åœ¨ä¸€æ®µæ—¶é—´äº†ã€‚ç„¶è€Œï¼Œæˆ‘ä¸€ç›´è®¤ä¸ºå®ƒä»¥ä¸€ç§ä¸è‡ªç„¶çš„æ–¹å¼å¤„ç†è·¯å¾„ã€‚

è¿™äº›æ˜¯è®©æˆ‘è´¨ç–‘å…¶ç”¨é€”çš„åŸå› :

*   `**os**`æ˜¯ä¸€ä¸ªå¤§æ¨¡å—:å®ƒç¡®å®æœ‰ä¸€ä¸ª`**path**`å­æ¨¡å—æ¥ç®¡ç†è·¯å¾„å’Œè¿æ¥å®ƒä»¬ï¼Œä½†æ˜¯ä¸€æ—¦ä½ éœ€è¦åœ¨è¿™äº›è·¯å¾„ä¸Šæ‰§è¡Œç³»ç»Ÿæ“ä½œ(åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåˆ—å‡ºå…¶ä¸­çš„å†…å®¹ï¼Œæˆ–è€…é‡å‘½åå’Œåˆ é™¤ä¸€ä¸ªæ–‡ä»¶)ï¼Œä½ å°†ä¸å¾—ä¸ä½¿ç”¨å…¶ä»–æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•è¦ä¹ˆå‡ºç°åœ¨åŒ…å±‚æ¬¡ç»“æ„çš„å…¶ä»–åœ°æ–¹:(`os.makedirs,` `os.listdir,` `os.rename,`ç­‰ç­‰ã€‚)æˆ–ä»å…¶ä»–æ¨¡å—å¦‚`**shutil**`
    æˆ–`**glob**`å¯¼å…¥ã€‚ç»è¿‡ä¸€ç•ªæŒ–æ˜ï¼Œä½ ä»ç„¶å¯ä»¥æ‰¾åˆ°è¿™äº›æ–¹æ³•ï¼Œä½†è¿™ä¼¼ä¹æ˜¯ä¸å¿…è¦çš„åŠªåŠ›
*   `**os**`ä»¥æœ€åŸå§‹çš„æ ¼å¼è¡¨ç¤ºè·¯å¾„:å­—ç¬¦ä¸²å€¼ã€‚è¿™æ˜¯éå¸¸æœ‰é™çš„:å®ƒä¸å…è®¸æ‚¨ç›´æ¥è®¿é—®è¯¸å¦‚æ–‡ä»¶å±æ€§æˆ–å…¶å…ƒæ•°æ®ä¹‹ç±»çš„ä¿¡æ¯ï¼Œä¹Ÿä¸å…è®¸æ‚¨é€šè¿‡è°ƒç”¨ä¸€äº›ç‰¹æ®Šçš„æ–¹æ³•åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šæ‰§è¡Œæ“ä½œã€‚
    ä¾‹å¦‚ï¼Œä¸ºäº†æ£€æŸ¥ä¸€æ¡è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼Œä½ å¯ä»¥åšä¸€äº›ç±»ä¼¼`**os.path.exists(some_path)**`çš„äº‹æƒ…ã€‚ä½†æ˜¯ï¼Œå¦‚æœé€šè¿‡ç±»æ–¹æ³•æˆ–å±æ€§æ›´ç›´æ¥åœ°ä» path å¯¹è±¡è®¿é—®è¿™äº›ä¿¡æ¯ï¼Œä¸æ˜¯æ›´å®¹æ˜“å—ï¼Ÿ
*   `**os**`æ¨¡å—æœ¬èº«å¹¶ä¸å…è®¸æ‚¨åœ¨å±‚æ¬¡ç»“æ„ä¸­æ‰¾åˆ°åŒ¹é…ç»™å®šæ¨¡å¼çš„è·¯å¾„ã€‚æ¯”æ–¹è¯´ï¼Œæ‚¨æƒ³è¦é€’å½’åœ°æŸ¥æ‰¾ä¸€ä¸ªéå¸¸åµŒå¥—çš„æ–‡ä»¶å¤¹ç»“æ„ä¸­çš„æ‰€æœ‰`__init__.py`æ–‡ä»¶ã€‚ä¸ºæ­¤ï¼Œä½ å¿…é¡»å°†`**os**`ä¸å¦ä¸€ä¸ªå«åš`**glob**`çš„æ¨¡å—ç»“åˆèµ·æ¥ã€‚æ‚¨å½“ç„¶å¯ä»¥ä¹ æƒ¯ï¼Œä½†æ˜¯æ‚¨çœŸçš„éœ€è¦ä¸¤ä¸ªæ¨¡å—æ¥æ‰§è¡Œè¿™æ ·çš„ä»»åŠ¡å—ï¼Ÿ
*   è¿™æ›´å¤šçš„æ˜¯ä¸ªäººåå¥½ï¼Œä½†æ˜¯æˆ‘æ€»æ˜¯å‘ç°`os`è¯­æ³•æœ‰ç‚¹ç¬¨æ‹™ã€‚ä½ å¯ä»¥è¯»ï¼Œä½ å¯ä»¥å†™ï¼Œä½†æ˜¯å› ä¸ºæŸäº›åŸå› ï¼Œæˆ‘æ€»è§‰å¾—å¯ä»¥åšä¸€äº›æ”¹è¿›ï¼Œè®©å®ƒå˜å¾—æ›´è½»ã€‚

# ä»€ä¹ˆæ˜¯ Pathlibï¼Ÿ

Pathlib æ˜¯æ ‡å‡† Python åº“çš„ä¸€éƒ¨åˆ†ï¼Œä» Python 3.4(å‚è§ [PEP 428](https://www.python.org/dev/peps/pep-0428/) )å¼€å§‹å¼•å…¥ï¼Œç›®æ ‡æ˜¯å°†è·¯å¾„è¡¨ç¤ºä¸ºå…·æœ‰è®¸å¤šæœ‰ç”¨æ–¹æ³•å’Œå±æ€§çš„è¶…çº§ Python å¯¹è±¡ï¼Œè€Œä¸æ˜¯ç®€å•çš„å­—ç¬¦ä¸²ã€‚

æ­£å¦‚å®˜æ–¹æ–‡ä»¶æ‰€è¿°:

> è¿™ä¸ªåº“çš„ç›®çš„æ˜¯æä¾›ä¸€ä¸ªç®€å•çš„ç±»å±‚æ¬¡ç»“æ„æ¥å¤„ç†æ–‡ä»¶ç³»ç»Ÿè·¯å¾„å’Œç”¨æˆ·åœ¨å®ƒä»¬ä¸Šé¢åšçš„æ™®é€šæ“ä½œ

Pathlib æ—¨åœ¨å‡è½»å‰é¢æåˆ°çš„ä½¿ç”¨`os`æ¨¡å—æ—¶é‡åˆ°çš„æŒ«æŠ˜ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„ä¸€äº›ç‰¹æ€§ã€‚

*è¿™ç¯‡æ–‡ç« ä¸æ˜¯å¯¹ Pathlib çš„æ·±å…¥æ¦‚è¿°ã€‚è¦äº†è§£è¿™ä¸ªåº“çš„æ›´å¤šä¿¡æ¯ï¼Œæˆ‘æ¨èä½ æŸ¥çœ‹å®˜æ–¹çš„* [*æ–‡æ¡£*](https://docs.python.org/3/library/pathlib.html) *æˆ–è€…æˆ‘åœ¨æœ€ååˆ—å‡ºçš„å‚è€ƒèµ„æ–™ã€‚*

# ğŸ‘‰Pathlib æœ‰æ›´ç›´è§‚çš„è¯­æ³•

è¦ç”¨ pathlib æ„é€ ä¸€ä¸ªè·¯å¾„ï¼ŒåŸºæœ¬ä¸Šéœ€è¦å¯¼å…¥ Path ç±»å¹¶å‘å®ƒä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¿™ä¸ªå­—ç¬¦ä¸²æŒ‡å‘æ–‡ä»¶ç³»ç»Ÿä¸Šä¸€ä¸ªä¸ä¸€å®šå­˜åœ¨çš„è·¯å¾„ã€‚

```
**from pathlib import Path****path = Path("/Users/ahmed.besbes/projects/posts")****path** **# PosixPath('/Users/ahmed.besbes/projects/posts')****print(cwd)****# /Users/ahmed.besbes/projects/posts**
```

ç°åœ¨æ‚¨å·²ç»å¯ä»¥è®¿é—®ä¸€ä¸ª`Path`å¯¹è±¡äº†ã€‚ä½ ä¼šå¦‚ä½•è¿›è¡Œç®€å•çš„æ“ä½œï¼Ÿ

*   ***åŠ å…¥è·¯å¾„***

`Pathlib`ä½¿ç”¨ **/** æ“ä½œç¬¦æ¥è¿æ¥è·¯å¾„ã€‚è¿™å¯èƒ½çœ‹èµ·æ¥å¾ˆæœ‰è¶£ï¼Œä½†å®ƒç¡®å®ä½¿ä»£ç æ›´å®¹æ˜“é˜…è¯»ã€‚

æˆ‘ä»¬æ¥åšä¸ªå¯¹æ¯”ã€‚

è¦ä½¿ç”¨ with `os`æ¨¡å—è¿æ¥è·¯å¾„ï¼Œæ‚¨åº”è¯¥è¿™æ ·åš:

ä½¿ç”¨ Pathlibï¼Œç›¸åŒçš„ä»£ç è½¬æ¢æˆ:

å®é™…ä¸Šï¼ŒPathlib å·²ç»å¢å¼ºäº†/æ“ä½œç¬¦æ¥æ‰§è¡Œè·¯å¾„è¿æ¥ã€‚

*   ***è·å–å½“å‰å·¥ä½œç›®å½•/ä¸»ç›®å½•***

å·²ç»å®ç°äº†è¿™æ ·åšçš„æ–¹æ³•ã€‚

```
**from path import Pathlib****cwd = Path.cwd()
home = Path.home()**
```

*   ***çœ‹æ–‡ä»¶***

æ‚¨å¯ä»¥åƒå¤„ç†å…¸å‹è·¯å¾„ä¸€æ ·å°†`open`ä¸ä¸Šä¸‹æ–‡ç®¡ç†å™¨ä¸€èµ·ä½¿ç”¨ï¼Œæˆ–è€…ä½¿ç”¨`read_text`æˆ–`read_bytes`ã€‚

```
**>>> path = pathlib.Path.home() / file.txt'
>>> path.read_text()**
```

æ˜¾ç„¶æœ‰æ›´å¤šçš„åŠŸèƒ½è¦æ¶µç›–ã€‚è®©æˆ‘ä»¬åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­è®¨è®ºæœ€æœ‰è¶£çš„éƒ¨åˆ†ã€‚

# ğŸ‘‰å®ƒå¾ˆå®¹æ˜“åˆ›å»ºæ–‡ä»¶å’Œç›®å½•

ä¸€æ—¦åˆ›å»ºäº† Path å¯¹è±¡ï¼Œå®ƒå°±å¯ä»¥é€šè¿‡è°ƒç”¨å®ƒçš„å†…éƒ¨æ–¹æ³•è‡ªå·±æ‰§è¡Œæ–‡ä»¶ç³»ç»Ÿæ“ä½œã€‚ä¾‹å¦‚ï¼Œå®ƒå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹æˆ–å¼¹å‡ºä¸€ä¸ªæ–‡ä»¶ï¼Œåªéœ€è°ƒç”¨`mkdir`å’Œ`touch`æ–¹æ³•ã€‚

ä»¥ä¸‹æ˜¯è·¯å¾„å¯¹è±¡åˆ›å»ºæ–‡ä»¶å¤¹çš„æ–¹å¼:

åˆ›å»ºæ–‡ä»¶å¤¹

æ–‡ä»¶ä¹Ÿæ˜¯å¦‚æ­¤:

åˆ›å»ºæ–‡ä»¶

å½“ç„¶ï¼Œæ‚¨ä»ç„¶å¯ä»¥ä½¿ç”¨`os`æ¨¡å—æ¥æ‰§è¡Œè¿™äº›æ“ä½œï¼Œä½†æ˜¯è¿™éœ€è¦è°ƒç”¨å¦ä¸€ä¸ªç±»ä¼¼`makedirs`çš„å‡½æ•°ã€‚

# ğŸ‘‰å®ƒé€šè¿‡è®¿é—®çˆ¶æ–‡ä»¶ç³»ç»Ÿæ¥å¯¼èˆªæ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„

æ¯ä¸ª Path å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªåä¸º`parent`çš„å±æ€§ï¼Œå®ƒè¿”å›çˆ¶æ–‡ä»¶å¤¹çš„ Path å¯¹è±¡ã€‚è¿™ä½¿å¾—æ“ä½œå¤§å‹æ–‡ä»¶å¤¹å±‚æ¬¡ç»“æ„å˜å¾—æ›´åŠ å®¹æ˜“ã€‚äº‹å®ä¸Šï¼Œç”±äºè·¯å¾„æ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†æ–¹æ³•é“¾æ¥èµ·æ¥ä»¥åˆ°è¾¾æ‰€éœ€çš„çˆ¶å¯¹è±¡ã€‚

å¦‚æœæ‚¨æƒ³é¿å…é“¾æ¥`parent`å±æ€§æ¥è®¿é—®ç¬¬ n ä¸ªå…ˆå‰çš„çˆ¶æ–‡ä»¶å¤¹ï¼Œæ‚¨å¯ä»¥è°ƒç”¨`parent**s**`å±æ€§æ¥è¿”å›å½“å‰æ–‡ä»¶å¤¹ä¹‹å‰çš„æ‰€æœ‰çˆ¶æ–‡ä»¶å¤¹çš„åˆ—è¡¨ã€‚

# ğŸ‘‰å®ƒå…è®¸æ‚¨è¿­ä»£ç›®å½•å¹¶æ‰§è¡Œæ¨¡å¼åŒ¹é…

è®©æˆ‘ä»¬å‡è®¾æ‚¨æœ‰ä¸€ä¸ªæŒ‡å‘ç›®å½•çš„ Path å¯¹è±¡ã€‚

Pathlib å…è®¸æ‚¨è½»æ¾åœ°éå†è¯¥ç›®å½•çš„å†…å®¹ï¼Œå¹¶è·å–ä¸ç‰¹å®šæ¨¡å¼åŒ¹é…çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚

è¿˜è®°å¾—æ‚¨ç”¨æ¥å’Œ`os`æ¨¡å—ä¸€èµ·å¯¼å…¥çš„`glob`æ¨¡å—å—ï¼Œä»¥ä¾¿è·å¾—åŒ¹é…æ¨¡å¼çš„è·¯å¾„ï¼Ÿ

å—¯ï¼ŒPath å¯¹è±¡æœ‰ä¸€ä¸ª`**glob**`æ–¹æ³•å’Œä¸€ä¸ªé€’å½’ç‰ˆæœ¬(ç§°ä¸º`rglob`)æ¥æ‰§è¡Œç±»ä¼¼çš„ä»»åŠ¡ï¼Œä½†æ˜¯è¯­æ³•è¦ç®€å•å¾—å¤šã€‚

å‡è®¾æˆ‘æƒ³è®¡ç®—ç»™å®šæ–‡ä»¶å¤¹ä¸­ Python æ–‡ä»¶çš„æ•°é‡ï¼Œä½ å¯ä»¥è¿™æ ·åš:

# ğŸ‘‰æ¯ä¸ªè·¯å¾„å¯¹è±¡éƒ½æœ‰å¤šä¸ªæœ‰ç”¨çš„å±æ€§

æ¯ä¸ª Path å¯¹è±¡éƒ½æœ‰å¤šä¸ªæœ‰ç”¨çš„æ–¹æ³•å’Œå±æ€§ï¼Œè¿™äº›æ–¹æ³•å’Œå±æ€§æ‰§è¡Œä»¥å‰ç”±å…¶ä»–åº“è€Œä¸æ˜¯`os`å¤„ç†çš„æ“ä½œ(æƒ³æƒ³`glob`æˆ–`shutil`)

*   `.exists()`:æ£€æŸ¥è·¯å¾„æ˜¯å¦çœŸçš„å­˜åœ¨äºæ–‡ä»¶ç³»ç»Ÿä¸­
*   `.is_dir()`:æ£€æŸ¥è·¯å¾„æ˜¯å¦å¯¹åº”ä¸€ä¸ªç›®å½•
*   `.is_file()`:æ£€æŸ¥è·¯å¾„æ˜¯å¦å¯¹åº”æ–‡ä»¶
*   `.is_absolute()`:æ£€æŸ¥è·¯å¾„æ˜¯å¦ç»å¯¹
*   `.chmod()`:æ›´æ”¹æ–‡ä»¶æ¨¡å¼å’Œæƒé™
*   `is_mount()`:æ£€æŸ¥è·¯å¾„æ˜¯å¦ä¸º*æŒ‚è½½ç‚¹*
*   `.suffix`:è·å–æ–‡ä»¶æ‰©å±•å

è¿˜æœ‰æ›´å¤šæ–¹æ³•ã€‚ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹æ‰€æœ‰åˆ—è¡¨[ã€‚](https://docs.python.org/3/library/pathlib.html)

# èµ„æº

å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äº Pathlib å’Œæœ¬æœº`os.path`æ¨¡å—çš„åŒºåˆ«ï¼Œä½ å¯ä»¥çœ‹çœ‹è¿™ä¸ªç²¾é€‰èµ„æºåˆ—è¡¨:å®ƒæ˜¯ 100%å…è´¹çš„ï¼Œè€Œä¸”è´¨é‡å¾ˆå¥½ã€‚æˆ‘ä¿è¯ã€‚

*   [https://docs.python.org/3/library/pathlib.html](https://docs.python.org/3/library/pathlib.html)
*   [https://trey hunner . com/2018/12/why-you-should-be-using-path lib/](https://treyhunner.com/2018/12/why-you-should-be-using-pathlib/)
*   [https://treyhunner.com/2019/01/no-really-pathlib-is-great/](https://treyhunner.com/2019/01/no-really-pathlib-is-great/)
*   [python.org/dev/peps/pep-0519/#standard-library-changes](http://python.org/dev/peps/pep-0519/#standard-library-changes)
*   [https://youtu.be/YwhOUyTxXVE](https://youtu.be/YwhOUyTxXVE)
*   [https://redna fi . github . io/decadequations/python/2020/04/13/python-path lib . html](https://rednafi.github.io/digressions/python/2020/04/13/python-pathlib.html)
*   [https://www . docstring . fr/blog/gerer-des-chemins-de-fichiers-avec-path lib/](https://www.docstring.fr/blog/gerer-des-chemins-de-fichiers-avec-pathlib/)(æ³•è¯­ğŸ¥å¸–å­)
*   [https://realpython.com/python-pathlib/](https://realpython.com/python-pathlib/)

# æ„Ÿè°¢é˜…è¯»ğŸ™

è¿™æ˜¯ä¸€ç¯‡å…³äº Pathlib ç‰¹æ€§çš„å¿«é€Ÿæ–‡ç« ã€‚

å¦‚æœä½ æƒ³è¿ç§»åˆ°è¿™ä¸ªåº“ï¼Œå¹¶ä¸”å‡è®¾ä½ ä½¿ç”¨çš„æ˜¯ Python +3.4ï¼Œé‚£å°±å»åšå§:ä» **os** è¿ç§»åˆ° **Pathlib** ç›¸å½“å®¹æ˜“ã€‚

ä»Šå¤©å°±è¿™äº›äº†ã€‚ç›´åˆ°ä¸‹ä¸€æ¬¡æ›´å¤šçš„ç¼–ç¨‹æŠ€å·§å’Œæ•™ç¨‹ã€‚ğŸ‘‹

![](img/56452711fd25bb94d8acc9dae2f07676.png)

ç”± [Unsplash](https://unsplash.com/@karsten116?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šçš„ [Karsten Winegeart](https://unsplash.com/@karsten116?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) æ‹æ‘„

# æ–°åˆ°ä¸­ï¼Ÿä½ å¯ä»¥è®¢é˜…æ¯æœˆ 5 ç¾å…ƒï¼Œå¹¶è§£é”æ— é™çš„æ–‡ç« â€”â€”[ç‚¹å‡»è¿™é‡Œã€‚](https://ahmedbesbes.medium.com/membership)