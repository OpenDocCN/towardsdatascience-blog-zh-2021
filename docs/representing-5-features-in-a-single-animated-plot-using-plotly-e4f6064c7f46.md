# 使用 Plotly 在一个动画情节中表现 5 个特征

> 原文：<https://towardsdatascience.com/representing-5-features-in-a-single-animated-plot-using-plotly-e4f6064c7f46?source=collection_archive---------44----------------------->

## 使用单个动画气泡图来分析数据和观察趋势

![](img/9215cfb2c6b0bca1c47d7e82df00c958.png)

在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上[温刚斋](https://unsplash.com/@wgzhai?utm_source=medium&utm_medium=referral)的照片

# 为什么要用 Plotly？

Plotly 是一个可视化库，因其惊人的功能而迅速流行起来。Plotly 与其他可视化库的区别在于它能够提供**交互式、动态、易于使用的**和**高度详细的**图。使用 Plotly，我们可以通过点击按钮、下拉菜单、滑块甚至创建动画来与我们的图进行交互。更好的是，我们可以毫不费力地绘制出非常吸引人的图表，就像 Plotly 在引擎盖下为我们做所有繁重的工作一样。我们将看到使用气泡图是多么容易，只需一次函数调用就可以制作出动画。

# 分析过去 5 年足球运动员的趋势

对于今天的文章，我们将使用 Kaggle 的 [***Fifa 数据集，其中包含 2015 年至 2021 年足球运动员的详细信息。具体来说，我们将看到一个足球运动员的年龄、价值、综合评分、转让价值和比赛位置之间的关系，以及这些属性是否会随着时间的推移而显示出任何模式。为了从各种文件中提取这些特征，我必须做一些预处理，这在整个代码笔记本中都存在。下面是预处理和组合各种文件后的最终数据。***](https://www.kaggle.com/stefanoleone992/fifa-21-complete-player-dataset)

预处理后的最终数据集

# 什么是气泡图？

气泡图本质上是一个散点图，其中的数据点大小不同。气泡的大小可以与一个附加属性(**通常是数字)**相关联，这可以帮助更好地辨别数据点。此外，我们可以根据数据点所属的特定类别对其进行着色。

**总之，下面是气泡图的组成部分**

*   x 和 Y 轴-数字特征
*   气泡的大小—数字特征
*   气泡的颜色——分类特征

# **添加动画**

我们将添加一个动画，自动移动滑块(负责改变我们想要可视化的年份)及时向前显示我们每年的球员属性。调整滑块时，图表会更新，以绘制给定年份的玩家属性。

# 让我们开始吧！

我选择了 2015 年排名前 20 位的玩家(根据总体评分)来观察他们在 2021 年的表现。**注意-** 我只选择了从 2015 年到 2021 年每年都活跃的球员。

1.  我建议你在 Google Colab 上运行这段代码，因为它已经预先安装好了。如果你想在本地运行代码，你必须`pip install plotly`
2.  为情节设置参数。正如你在下面看到的，我们使用了数据集 *名称*作为第一个参数。将 *x* 轴设置为绘制**年龄**，将 *y* 轴设置为绘制总体**。**设置*大小*参数以反映**玩家的** **市场价值**。*颜色* 参数设置为**球员 _ 位置**，分为进攻球员、中场球员、防守球员或守门员。我们还设置了 *hover_name* 参数来显示玩家的**名字**。不要忘记设置 **max_size 参数**，因为真实的市场价值是以百万计的，我们需要限制泡沫的大小。**最重要的是，我们将 animation_frame 参数**设置为*year* 以自动在数据集的 year 列下添加不同年份的滑块。最后，我们为 x 和 y 值设置一个范围，并为图表设置一个标题。

最终气泡图

3.创建一个描述 **5 个特性的综合气泡图和一个动画**只需要一个函数调用！令人印象深刻的是阴谋是多么容易，不是吗？随意使用绘图右上角的选项，例如缩放、选择特定区域或下载图像。还要注意当我们**悬停在一个泡泡上时玩家的信息是如何显示的！**

# 寻找趋势

*   首先我们可以看到**年龄**与**市场价值的关系。一个球员的价值在他将近 30 岁的时候上升并达到顶峰，一旦他进入 30 岁就开始下降。这种下降对于由**蓝色气泡**描绘的进攻者来说是最剧烈的，而对于由**红色气泡描绘的守门员来说是最温和的。**气泡大小有助于我们直观地看到市场价值，并根据市场价值比较玩家。**
*   我们还可以看到随着 T2 年龄的增长，总体 T1 开始下降。这是有道理的，因为足球运动员的职业生涯很短。*再次非常有趣地看到，攻击手和中场比后卫和守门员衰退得更快，因为他们的大部分属性依赖于体格、耐力和速度，在打了这么久的比赛后这些属性开始消失*。
*   一个非常明显的相关性是整体价值和市场价值之间的关系。然而，有趣的是看到年龄也开始影响市场价值，因为俱乐部想要购买可以长期比赛的球员。

# Plotly 中的动画警告

> 当每一行输入都存在于所有动画帧中，并且映射到符号、颜色和面的分类值在各帧中保持不变时，动画可以很好地工作。如果不满足这些约束条件，动画*可能会产生误导或不一致*。—官方 Plotly 文档

# 结论

这只是 Plotly 能力的一瞥，当与 Dash 一起使用时，Plotly 可以创建漂亮的动画仪表盘和图形，具有高度的交互性。我还想指出 Plotly 如何提供按钮和工具(用于缩放、选择等。)就其本身而言，这些在更深入的分析中是非常有用的工具，并且可以使可视化更加容易。

我希望这是有趣和好玩的。下次见！

查看我的 [**github**](https://github.com/rajlm10) 的一些其他项目和整个[代码](https://github.com/rajlm10/FifaPlotly/blob/main/FifaPlotly.ipynb)。你可以在这里联系我[](https://rajsangani.me/)****。*** 感谢您的配合！*