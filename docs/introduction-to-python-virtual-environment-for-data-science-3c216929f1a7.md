# é¢å‘æ•°æ®ç§‘å­¦çš„ Python è™šæ‹Ÿç¯å¢ƒç®€ä»‹

> åŸæ–‡ï¼š<https://towardsdatascience.com/introduction-to-python-virtual-environment-for-data-science-3c216929f1a7?source=collection_archive---------37----------------------->

## æ•°æ®ç§‘å­¦æœ€ä½³å®è·µ

## äº†è§£è™šæ‹Ÿç¯å¢ƒçš„åŸºç¡€çŸ¥è¯†

å¦‚æœæ‚¨ä½¿ç”¨ Python å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µ:å³ä½¿æ‚¨å·²ç»å®‰è£…äº†æ‰€éœ€çš„åŒ…ï¼Œåœ¨å…¶ä»–äººçš„è®¡ç®—æœºä¸Šè¿è¡Œå®Œå…¨ç›¸åŒçš„è„šæœ¬å´ä¸èƒ½åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šè¿è¡Œã€‚è¿™å¯èƒ½æ˜¯å› ä¸ºä¸¤å°è®¡ç®—æœºä¸Šä½¿ç”¨çš„ Python ç¯å¢ƒä¸åŒ(ä¾‹å¦‚ï¼Œå¯èƒ½ä½¿ç”¨ä¸¤ä¸ªä¸åŒç‰ˆæœ¬çš„åŒ…)ã€‚èƒ½å¤Ÿé‡ç°å‡†ç¡®çš„è¾“å‡ºä¸ä»…ä¾èµ–äºå‡†ç¡®çš„è„šæœ¬ï¼Œè¿˜ä¾èµ–äºæ­£ç¡®çš„ç¯å¢ƒè®¾ç½®ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºè™šæ‹Ÿç¯å¢ƒæ¥ç¡®ä¿ä¸ºæˆ‘ä»¬çš„é¡¹ç›®å»ºç«‹åˆé€‚çš„ Python ç¯å¢ƒã€‚

> è™šæ‹Ÿç¯å¢ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æé«˜é¡¹ç›®çš„å¯é‡å¤æ€§ï¼Œæ›´å®¹æ˜“ä¸å…¶ä»–äººåä½œï¼Œå¹¶ä½¿éƒ¨ç½²æ›´åŠ é¡ºåˆ©ã€‚

åœ¨æœ¬å¸–ä¸­ï¼Œæˆ‘ä»¬å°†ç†Ÿæ‚‰ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒç®¡ç†å™¨: *venv* å¹¶äº†è§£è™šæ‹Ÿç¯å¢ƒçš„åŸºç¡€çŸ¥è¯†ã€‚

![](img/ff60d2ca27bded162d0b8f0882da634b.png)

ç”±[é©¬åº“æ–¯Â·æ–¯çš®æ–¯å…‹](https://unsplash.com/@markusspiske?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

# ğŸ“åŸºç¡€

## 0.è®¾ç½®

*è¿™ç¯‡æ–‡ç« å‡è®¾ä½ çš„ç”µè„‘ä¸Šå·²ç»å®‰è£…äº† Python 3.3+ã€‚*

Python æ ‡å‡†åº“åŒ…æ‹¬ *venv* ï¼Œå› æ­¤å½“ä½ å®‰è£… Python æ—¶é»˜è®¤å®‰è£…å®ƒã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸éœ€è¦å®‰è£…ä»»ä½•é¢å¤–çš„åŒ…æ¥å¼€å§‹ã€‚

## 1.è½¬åˆ°é¡¹ç›®ç›®å½•

æˆ‘ä»¬å°†ä½¿ç”¨å‘½ä»¤è¡Œæ¥é”®å…¥å‘½ä»¤ã€‚è¿™é‡Œæœ‰ä¸€ç§æ‰“å¼€å‘½ä»¤è¡Œç•Œé¢çš„æ–¹æ³•ï¼Œå–å†³äºä½ çš„æ“ä½œç³»ç»Ÿ:
â—¼ï¸å¦‚æœä½ åœ¨ Mac ä¸Šï¼Œæ‰“å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œæ­¥éª¤å¦‚ä¸‹:
â¡ï¸æŒ‰ cmd +ç©ºæ ¼é”®â¡ï¸ç±»å‹ç»ˆç«¯â¡ï¸æŒ‰ enter
â—¼ï¸å¦‚æœä½ åœ¨ Windows ä¸Šï¼Œæ‰“å¼€ä¸€ä¸ªå‘½ä»¤æç¤ºçª—å£ï¼Œæ­¥éª¤å¦‚ä¸‹:â¡ï¸æŒ‰ windows é”®â¡ï¸é”®å…¥ cmd â¡ï¸æŒ‰ enter

ç°åœ¨å°†æ‚¨çš„å·¥ä½œç›®å½•æ›´æ”¹ä¸ºæ‚¨çš„é¡¹ç›®ç›®å½•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„é¡¹ç›®ç›®å½•åœ¨æ¡Œé¢ä¸Šï¼Œä¸‹é¢çš„è„šæœ¬å°†å¸®åŠ©æ‚¨å®ç°è¿™ä¸€ç‚¹ã€‚å¦‚æœæ‚¨çš„é¡¹ç›®æ–‡ä»¶å¤¹åœ¨å…¶ä»–åœ°æ–¹ï¼Œæ‚¨å¯ä»¥ç›¸åº”åœ°è°ƒæ•´è„šæœ¬ã€‚

```
$ cd Desktop/project # Mac
$ cd Desktop\project # Windows
```

## 2.åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

æ—¢ç„¶æˆ‘ä»¬ç°åœ¨åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©å°†è™šæ‹Ÿç¯å¢ƒå‘½åä¸º'*ã€‚*ã€‚è¿™å°†åˆ›å»ºä¸€ä¸ªåŒ…å«è™šæ‹Ÿç¯å¢ƒæ–‡ä»¶çš„éšè—(å› ä¸ºåç§°ä»¥ç‚¹å¼€å¤´)ç›®å½•ã€‚ä½ å¯ä»¥æ›¿æ¢æ‰'*ã€‚ç”¨ä½ å–œæ¬¢çš„ä»»ä½•åå­—ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å¯¹è™šæ‹Ÿç¯å¢ƒçš„åç§°æ²¡æœ‰å¼ºçƒˆçš„åå¥½ï¼Œæˆ‘å»ºè®®éµå¾ªæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨çš„ç›¸åŒå‘½åçº¦å®š:'*ã€‚venv'* ã€‚è¿™ä¸ªå‘½åçº¦å®šå¾—åˆ°äº†[å¸ƒé›·ç‰¹Â·å¡å†œ](https://www.linkedin.com/in/drbrettcannon/?originalSubdomain=ca)çš„è®¤å¯ã€‚å¦‚æœä½ å¥½å¥‡ï¼Œè¿™é‡Œæ˜¯ä»–å…³äºè¿™ä¸ªè¯é¢˜çš„è®¨è®ºã€‚*

è¦åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œæˆ‘ä»¬åªéœ€è¦è¿è¡Œä¸‹é¢çš„ä¸€ä¸ªå‘½ä»¤è¡Œç¨‹åº:

```
$ python -m venv .venv
```

è¿™å°†ä½¿ç”¨åŸºç¡€ Python çš„ç›¸åŒ Python ç‰ˆæœ¬(æˆ–[æœ€æ–° Python ç‰ˆæœ¬ï¼Œå¦‚æœæ‚¨æœ‰å¤šä¸ªç‰ˆæœ¬](https://docs.python.org/3/tutorial/venv.html))åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒã€‚ä¸€æ—¦æ‰§è¡Œäº†è¿™ä¸ªå‘½ä»¤ï¼Œæ‚¨ä¼šæ³¨æ„åˆ°æ‚¨æœ‰äº†ä¸€ä¸ªåä¸º'*'çš„æ–°æ–‡ä»¶å¤¹ã€‚venv'* ã€‚åœ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒä¹‹å‰å’Œä¹‹åï¼Œå¦‚æœæ‚¨åœ¨ Mac ä¸Šï¼Œå¯ä»¥ä½¿ç”¨`ls -A`æ£€æŸ¥é¡¹ç›®ç›®å½•ä¸­çš„å†…å®¹ï¼›å¦‚æœæ‚¨åœ¨ Windows ä¸Šï¼Œå¯ä»¥ä½¿ç”¨`dir`æ£€æŸ¥é¡¹ç›®ç›®å½•ä¸­çš„å†…å®¹ã€‚

## 3.æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ

è®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹ä½ å·²ç»å®‰è£…åœ¨ä½ çš„åŸºç¡€ Python ä¸Šçš„åŒ…çš„ç‰ˆæœ¬(å³ Python çš„ç³»ç»Ÿå®‰è£…)ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†é€‰æ‹© *numpy* ,ä½†å®ƒå¯ä»¥æ›¿æ¢ä¸ºæ‚¨é€‰æ‹©çš„ä»»ä½•ç¬¬ä¸‰æ–¹è½¯ä»¶åŒ…:

```
$ python -c "import numpy as np; print(np.__version__)"
```

å®ƒåº”è¯¥è¿”å›æ‚¨çš„åŸºæœ¬ Python ç¯å¢ƒä¸­çš„åŒ…ç‰ˆæœ¬ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¿€æ´»è™šæ‹Ÿç¯å¢ƒå¹¶å†æ¬¡æ£€æŸ¥è½¯ä»¶åŒ…ç‰ˆæœ¬:

```
# Activate virtual environment
$ source .venv/bin/activate # Mac
$ .venv\Scripts\activate # Windows# Check again
$ python -c "import numpy as np; print(np.__version__)"
```

å½“æˆ‘ä»¬è¿è¡Œä¸ä¹‹å‰å®Œå…¨ç›¸åŒçš„è„šæœ¬æ—¶ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„æ–°è™šæ‹Ÿç¯å¢ƒè¢«æ¿€æ´»ï¼Œæˆ‘ä»¬ä¸å†ä½¿ç”¨åŸºæœ¬çš„ Python ç¯å¢ƒã€‚åˆ¤æ–­è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»çš„æœ€ç®€å•æ–¹æ³•æ˜¯åœ¨å‘½ä»¤è¡Œçš„å¼€å¤´æŸ¥æ‰¾ç¯å¢ƒåç§°ã€‚

## 4.è®¾ç½®/å‡†å¤‡è™šæ‹Ÿç¯å¢ƒ

å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒæ—¶ï¼Œå®ƒå°±åƒä¸€å¼ ç™½çº¸ã€‚æˆ‘ä»¬éœ€è¦å°†æ‰€æœ‰å¿…éœ€çš„åŒ…å®‰è£…åˆ°ç¯å¢ƒä¸­æ¥è®¾ç½®å®ƒã€‚å°†è½¯ä»¶åŒ…å®‰è£…åˆ°è™šæ‹Ÿç¯å¢ƒéå¸¸ç®€å•ã€‚ä½ å¯ä»¥åƒå¹³å¸¸å®‰è£…è½¯ä»¶åŒ…ä¸€æ ·ä½¿ç”¨`pip`ã€‚åœ¨è¿™æ ·åšçš„æ—¶å€™ï¼Œæ‚¨éœ€è¦ç¡®ä¿æ‚¨çš„è™šæ‹Ÿç¯å¢ƒæ˜¯æ¿€æ´»çš„ã€‚

è®©æˆ‘ä»¬å®‰è£…ä¸€ä¸ªä¸åŸºç¡€ç¯å¢ƒä¸­çš„ç‰ˆæœ¬ä¸åŒçš„ç‰¹å®šç‰ˆæœ¬çš„åŒ…ã€‚æˆ‘ä»¬å°†ç»§ç»­æˆ‘ä»¬çš„ *numpy* ç¤ºä¾‹ï¼Œå¹¶é€‰æ‹©ç‰ˆæœ¬ 1.19.4(å¦‚æœè¿™æ°å¥½ä¸æ‚¨çš„åŸºæœ¬ç‰ˆæœ¬ *numpy* ç›¸åŒï¼Œè¯·é€‰æ‹©å¦ä¸€ä¸ªç‰ˆæœ¬)è¿›è¡Œæœ¬ç»ƒä¹ :

```
# Install numpy v1.19.4
$ pip install numpy==1.19.4# Check again
$ python -c "import numpy as np; print(np.__version__)"
```

è¿™åº”è¯¥ä¼šè¿”å› 1.19.4ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªæ˜¯åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…äº†ä¸åŒç‰ˆæœ¬çš„ *numpy* ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¦‚æœæˆ‘ä»¬åªæƒ³å®‰è£…è½¯ä»¶åŒ…çš„æœ€æ–°ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥é”®å…¥è½¯ä»¶åŒ…åç§°è€Œä¸æŒ‡å®šä»»ä½•ç‰ˆæœ¬:`pip install numpy`

æ›´å¸¸è§çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®æ¦‚è¿°å¿…è¦åŒ…ç‰ˆæœ¬çš„ *requirements.txt* æ–‡ä»¶æ¥å‡†å¤‡æˆ‘ä»¬çš„è™šæ‹Ÿç¯å¢ƒã€‚ä¸‹é¢æ˜¯å¦‚ä½•æ ¹æ® *requirements.txt* ä¸­æ¦‚è¿°çš„è§„èŒƒå®‰è£…è½¯ä»¶åŒ…:

```
$ pip install -r requirements.txt
```

ä¸€æ—¦ä½¿ç”¨å¿…è¦çš„åŒ…è®¾ç½®å¹¶æ¿€æ´»äº†æ‚¨çš„ç¯å¢ƒï¼Œæ‚¨å°±å¯ä»¥å¼€å§‹ä½¿ç”¨è¯¥ç¯å¢ƒä¸ºé¡¹ç›®å¼€å‘å’Œæµ‹è¯• Python ä»£ç äº†ã€‚

## 5.åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å¯¼å‡ºåŒ…ç‰ˆæœ¬

æœ‰æ—¶ï¼Œæ‚¨å¯èƒ½éœ€è¦å¯¼å‡ºæ‚¨åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒçš„éœ€æ±‚ã€‚æˆ‘ä»¬åªç”¨ä¸€è¡Œä»£ç å°±å¯ä»¥åšåˆ°:

```
$ pip freeze > requirements.txt
```

å¦‚æœæ‚¨æƒ³æ£€æŸ¥æ‚¨åˆšåˆšä¿å­˜çš„ *requirements.txt* çš„å†…å®¹ï¼Œæ‚¨å¯ä»¥åƒæ‰“å¼€å…¶ä»–æ–‡ä»¶ä¸€æ ·æ‰“å¼€å®ƒã€‚txt æ–‡ä»¶ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è„šæœ¬åœ¨å‘½ä»¤è¡Œè§£é‡Šå™¨ä¸­æŸ¥çœ‹å…¶å†…å®¹:

```
$ cat requirements.txt # Mac
$ type requirements.txt # Windows
```

## 6.åœç”¨è™šæ‹Ÿç¯å¢ƒ

åœ¨ç¯å¢ƒä¸­å®Œæˆå·¥ä½œåï¼Œå¦‚æœæ‚¨æƒ³åˆ‡æ¢å›åŸºæœ¬ Pythonï¼Œæ‚¨éœ€è¦åšçš„å°±æ˜¯åƒè¿™æ ·åœç”¨ç¯å¢ƒ:

```
$ deactivate
```

è¿è¡Œæ­¤å‘½ä»¤åï¼Œå‘½ä»¤è¡Œçš„å‰ç¼€åº”è¯¥ä¸å†æ˜¾ç¤ºè™šæ‹Ÿç¯å¢ƒçš„åç§°ã€‚è¿™å°†å‘æ‚¨ç¡®è®¤è™šæ‹Ÿç¯å¢ƒå·²è¢«åœç”¨ã€‚

## 7.åˆ é™¤è™šæ‹Ÿç¯å¢ƒ

å¦‚æœæ‚¨æƒ³è¦åˆ é™¤è™šæ‹Ÿç¯å¢ƒï¼Œåªéœ€åˆ é™¤æ–‡ä»¶å¤¹(*)ã€‚venv'* æ–‡ä»¶å¤¹)å°±åƒä½ é€šå¸¸åˆ é™¤ä»»ä½•æ–‡ä»¶å¤¹ä¸€æ ·ã€‚å¦‚æœæ‚¨å¸Œæœ›ä»å‘½ä»¤è¡Œåˆ é™¤ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è„šæœ¬:

```
$ rm -r .venv # Mac
$ rd /s .venv # Windows, when prompted press Y and enter
```

# æ‘˜è¦ğŸ€

æ€»ç»“ä¸€ä¸‹ï¼Œä¸‹é¢æ˜¯æˆ‘ä»¬åœ¨è¿™ç¯‡æ–‡ç« ä¸­è®¿é—®è¿‡çš„ä¸»è¦å‘½ä»¤çš„æ•´ç†æ‘˜è¦:

```
# Create a virtual environment
$ python -m venv <environment_name># Activate a virtual environment
$ source <environment_name>/bin/activate # Mac
$ <environment_name>\Scripts\activate # Windows# Install required packages from requirements.txt
$ pip install -r requirements.txt# Install a package with a specified version
$ pip install <package_name>==<version># Export installed libraries to requirements.txt
$ pip freeze > requirements.txt# Deactivate virtual environment
$ deactivate
```

é€šå¸¸ä½ ä¼šåœ¨é¡¹ç›®å¼€å§‹çš„æ—¶å€™å»ºç«‹ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒ(å¯èƒ½åœ¨è¿™é‡Œæœ‰ä¸€ä¸ªå°çš„è°ƒæ•´ï¼Œç¨åéœ€è¦)ã€‚è®¾ç½®å®Œæˆåï¼Œå…¸å‹çš„é¡¹ç›®å·¥ä½œæµç¨‹ä¸»è¦æ¶‰åŠæ¿€æ´»å’Œåœç”¨è™šæ‹Ÿç¯å¢ƒã€‚

![](img/c6908ddad52ce00c1e6532852b130e7e.png)

é˜¿è¯ºå¾·Â·å¼—æœ—è¥¿æ–¯å¡åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

*æ‚¨æƒ³è®¿é—®æ›´å¤šè¿™æ ·çš„å†…å®¹å—ï¼Ÿåª’ä½“ä¼šå‘˜å¯ä»¥æ— é™åˆ¶åœ°è®¿é—®åª’ä½“ä¸Šçš„ä»»ä½•æ–‡ç« ã€‚å¦‚æœæ‚¨ä½¿ç”¨* [*æˆ‘çš„æ¨èé“¾æ¥*](https://zluvsand.medium.com/membership)*æˆä¸ºä¼šå‘˜ï¼Œæ‚¨çš„ä¸€éƒ¨åˆ†ä¼šè´¹å°†ç›´æ¥ç”¨äºæ”¯æŒæˆ‘ã€‚*

è°¢è°¢ä½ çœ‹æˆ‘çš„å¸–å­ã€‚å¸Œæœ›ä½ åœ¨ä½¿ç”¨ *venv* æ—¶æ„Ÿè§‰æ›´èˆ’æœã€‚å¯¹äºé‚£äº›ç‹‚çƒ­çš„å­¦ä¹ è€…ï¼Œè¿™é‡Œæœ‰ä¸€äº›å…¶ä»–æµè¡Œçš„åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„æ–¹æ³•:
â—¼ï¸ [åº·è¾¾è™šæ‹Ÿç¯å¢ƒ](https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html)t13ã€‘â—¼ï¸[pyenv](https://github.com/pyenv/pyenv)ç”¨äºç®¡ç†å¤šä¸ªç‰ˆæœ¬çš„ Python

å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¿™é‡Œæœ‰æˆ‘çš„ä¸€äº›å…¶ä»–æ–‡ç« çš„é“¾æ¥:
â—¼ï¸[git æ•°æ®ç§‘å­¦ç®€ä»‹](/introduction-to-git-for-data-science-ca5ffd1cebbe?source=your_stories_page-------------------------------------)
â—¼ï¸ [ç”¨è¿™äº›æç¤ºæ•´ç†ä½ çš„ Jupyter ç¬”è®°æœ¬](/organise-your-jupyter-notebook-with-these-tips-d164d5dcd51f)
â—¼ï¸[python ä¸­çš„ç®€å•æ•°æ®å¯è§†åŒ–ï¼Œä½ ä¼šå‘ç°æœ‰ç”¨çš„](/simple-data-visualisations-in-python-that-you-will-find-useful-5e42c92df51e)
â—¼ï¸ [åœ¨ Seaborn (Python)ä¸­æ›´æ¼‚äº®å’Œå®šåˆ¶æƒ…èŠ‚çš„ 6 ä¸ªç®€å•æç¤º](/6-simple-tips-for-prettier-and-customised-plots-in-seaborn-python-22f02ecc2393)
â—¼ï¸ï¸ [ç»™ç†ŠçŒ«ç”¨æˆ·çš„ 5 ä¸ªæç¤º](/5-tips-for-pandas-users-e73681d16d17)
â—¼ï¸ï¸

å†è§ğŸƒğŸ’¨