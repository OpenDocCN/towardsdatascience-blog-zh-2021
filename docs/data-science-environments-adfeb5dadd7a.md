# 数据科学环境

> 原文：<https://towardsdatascience.com/data-science-environments-adfeb5dadd7a?source=collection_archive---------25----------------------->

## 你的编程问题背后的黑暗秘密

![](img/9a244423372486886656fca77d69d10b.png)

作者照片

在学习数据科学时，环境管理一直是我的眼中钉。无论是让以前运行的代码再次工作，还是尝试与团队的其他成员共享我构建的应用程序，或者想知道为什么我的命令提示符不再工作，我都只是在低声咒骂的同时学习了编程管理。为了避免熬夜和头痛，这里对什么是程序环境以及数据科学家如何让程序环境为他们工作而不是反对他们进行了分析。

# **定义**

程序环境是程序运行的软件和硬件的集合。这样的句子可能有点令人生畏，但概念相当简单。如果你试图在一台旧电脑上运行一款计算密集型视频游戏，这台电脑的硬件可能无法处理这款游戏。每次尝试玩游戏时，运行速度可能会非常慢，甚至会崩溃。视频游戏是为具有更复杂硬件的程序环境而设计的。或者，任何 Python 或 R 程序员都知道，必须先安装一个包，然后才能加载它。当您安装这个包时，您将它添加到 Python / R 解释器的软件环境中，这样它就可以在您想要使用它的时候加载代码。对于数据科学家来说，软件环境问题远比硬件问题更常见。

> 一个程序的软件环境只是程序可以“看到”的文件的集合

一个程序的软件环境只是程序可以“看到”的文件的集合当您安装一个包时，您从一个公共位置下载文件，并且您将这些文件保存在您的计算机上 Python / R 代码知道要查看的位置。当某些代码具有“依赖性”时，这意味着它需要您将依赖的代码从这些包文件加载到环境中，以便可以利用它。

# **常见问题及其解决方案**

软件环境中最令人沮丧的例子之一是路径变量。如果要从命令行运行 Python，需要在操作系统的 PATH 变量中指定要运行的 Python 版本。当您将 python 添加到 PATH 变量中时，您只是告诉您的计算机 Python 解释器可执行文件的位置。如果您没有将这个位置添加到 PATH 变量中，那么当您告诉它运行时，您的计算机将找不到 python 解释器。这将导致“‘python’未被识别为内部或外部命令”错误。或者，如果您的 PATH 变量上有多个 python 解释器(如 Python 3.8 和 Python 3.9)，那么它每次都会选择一个特定的版本(基于一组依赖于您的操作系统的规则)，而它可能不是您期望的版本。

数据科学项目管理的第二个最令人沮丧的问题回到了包依赖上。当您与他人共享您的代码时，他们的环境中安装的包可能与您自己的环境中安装的包不同。如果您的代码依赖于他们没有的特定包，这可能是一个问题。解决这个问题的方法是用一个“包管理器”(如 CRAN、PIP 或 Conda)来分发您的代码，它将确保有人在下载您的包时，在他们的环境中有他们需要的确切的包来运行您的代码。

为了进一步解决这个问题，如果您有一个旧的数据分析需要一个版本的包，而另一个分析使用该包的新版本，会发生什么呢？为了保持数据分析的可重复性，您需要知道您运行的代码在每次运行时都会做同样的事情。随着包的不断开发，它们有时会改变行为，这可能会导致您在使用包的最新版本运行旧数据分析时获得意外的结果。

为了解决这个问题，你可以使用一个“环境管理器”，它可以保存不同的编程环境，并在每个环境中安装不同的包。然后，您可以指定哪个环境是运行数据分析的正确环境。最流行的包/环境管理器之一是 Conda(由 Anaconda 公司维护)。在他们出现之前，用 Python 进行数据科学的环境管理是相当令人沮丧的。

## 环境经理的神奇秘诀是什么？

再次澄清一下，编程环境就是程序可以访问的文件的集合。如果您需要一个安装了软件包版本 1 的环境和另一个安装了版本 2 的环境，那么环境管理器需要确保软件包的两个版本都安装在您计算机上的某个地方，然后它将只让软件包的正确版本对在每个环境中运行的代码可见。当您的代码告诉它的环境加载一个包时，导入的文件将是对应于该特定环境可见的包版本的文件。每个环境应该只有一个对它可见包版本。

# **虚拟机**

环境管理器对于虚拟机的概念至关重要。虚拟机(VM)可以被认为是计算机内部的一台计算机(初始风格)。与这里提到的所有东西一样，虚拟机只是一种文件管理方法。虚拟机是一个程序，它将自己与计算机上的所有其他文件隔离开来；它甚至可以运行不同的操作系统。(例如，MacOS 计算机可能有一个运行 Windows 操作系统的虚拟机。)

当您想要在另一台计算机上重新创建一个编程环境时，虚拟机是非常有效的，因为您不需要了解该计算机当前的依赖关系。您可以设置一个虚拟机，使其拥有您自己计算机的虚拟机上的可见文件。由于这个原因，数据科学大量使用虚拟机；它们确保结果的重现性。基于云的应用程序是虚拟机的另一个常见示例。开发人员认为他们的虚拟机将与托管他们应用程序的服务器上的任何其他代码隔离开来。

要指定应该如何配置虚拟机的环境，您可以使用一个配置文件(使用 Conda 时为. yml 文件),该文件指定在设置虚拟机时要在虚拟机中安装的所有软件包。现在，当您共享一个数据分析时，通常会共享“配置”文件，该文件设置了运行代码的环境以及代码本身。

# **集装箱/码头工人**

将生产应用程序部署到云中时，可能会花费大量时间来创建环境配置，然后在各种服务器计算机上设置它们。为了简化这一点，容器诞生了。创建容器的公司 Docker 仍然是今天部署容器的最受欢迎的选择，所以您会经常在这里互换使用术语 Docker 和 container(有点像面巾纸和纸巾)。

容器很像虚拟机，但是它们少了一层。每个虚拟机都有自己的操作系统，就像一台真正独立的计算机一样工作。容器与除了操作系统之外的一切都是隔离的，这使得它们更加“轻量级”(体积更小，因为与 VM 相比，每个容器中的代码更少)。容器也可以由运行在操作系统之上的一个程序(Docker 引擎)来协调，这允许开发人员以非常分散的块来构建一个协调在一起的应用程序，而不是一个必须处理许多不同任务的大型应用程序。这就像当每一个突击队员的恐龙同步进入一个超级恐龙，终极战斗机器。Docker 的网站有很多很棒的材料来进一步概述容器的区别和好处。

# **那么这对你来说意味着什么？**

作为数据科学家，要使用所有这些信息，您应该:

1.清理路径变量。谷歌如何做到这一点。不过，要小心你从中删除的内容。它*会*回来缠着你。

2.充分利用 Anaconda 这样的环境管理器。在协作时，您和您的团队应该使用相同的环境。有一个大家共享的标准配置文件。

3.将您的代码转换成具有依赖关系的包。即使您在 Github 上共享这些内容，而不将它们提交给包管理器，当您开始一个新的分析或通过包共享代码时，这也将使事情变得简单得多。甚至仪表盘都可以变成包。

4.如果你在云中运行你的代码，欣赏虚拟机(甚至容器)为你做的工作。

# 结论

理解数据科学环境迫使数据分析师走出他们的舒适区，比许多人希望的更深入地研究软件工程原理。然而，这是一个必须面对的邪恶，因为这样做将极大地提高您共享代码的能力，并节省您花费在调试上的时间。幸运的是，对于数据科学家来说，这些概念实际上非常熟悉；都是文件管理而已。