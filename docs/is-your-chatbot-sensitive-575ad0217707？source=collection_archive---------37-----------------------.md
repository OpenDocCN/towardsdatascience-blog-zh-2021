# 你的聊天机器人敏感吗？

> 原文：<https://towardsdatascience.com/is-your-chatbot-sensitive-575ad0217707?source=collection_archive---------37----------------------->

## 对话辅助解决方案越来越多地包括情感分析功能。这是什么意思？相关吗？它对情绪的表达应该有怎样的反应？

![](img/b1e5838a1e1cf56b0936a0bdc1600958.png)

[腾雅特](https://unsplash.com/@tengyart?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

# 情感分析:今天至关重要的必需品

长期以来，公司通过实地调查或满意度表格来分析客户意见。它允许收集客户对产品、品牌或所提供服务的意见。在互联网时代，随着社交网络的爆炸，不可能对每一个观点都做出回应，无论是批评还是祝贺。

因此，考虑到评论的激增、这些评论权重的增加以及消费者在购买过程中的选择评级，分析的自动化已经成为一种必要的行为。尤其是因为这些数据在每个人都可以访问的许多地方都可以获得:论坛、在线评论、社交网络上的出版物……或者可以从电子邮件或纸质邮件中检索。这种自动化包括构建能够从自然语言文本中提取主观信息的计算机工具，以创建决策支持系统可以使用的结构化和可利用的知识。这种发现是从最微妙的、上下文的和文化的方面理解文本意义的工作，因此是一个复杂的过程。

情绪是一个模糊的概念，很难定义，它具有特质的特殊性，也就是说，对每个人的解释都是特定的——我们并不都害怕同样的事情，害怕的程度也不一样。换句话说，某样东西并没有那么明显的“好”或“坏”，而是“它可能会更好”或“它可能会更坏或它已经是了”。这意味着当我们使用这些工具时，我们需要在任何解释之前了解受众(和媒体),这也解释了为什么预训练模型在用于不同于它们被训练的领域时准确性较低。

在情感背景下对语言的自动分析是一个复杂的过程，需要一系列的处理，这些处理对应于不同的理解深度水平，因此对应于不同的提取难度。语言的丰富性意味着一个人表达的情绪不一定是整体情绪的绝对衡量；此外，人们倾向于表达与他们的期望相关的情感，一句话可能会被之前说过的另一句话抵消…

传达信息的媒介会引发不同的情感表达，无论是短的还是长的，是口头的还是书面的，等等。在电子邮件中，作者通常会更倾向于语境化和解释，而推特则更倾向于自发性和夸张。现在让我们看看聊天机器人中的情感分析。

# **检测的规模**

情感分析可以分为几个检测级别:

*   情感的**检测**在于确定作者是否希望传达一种情感，或者它是否纯粹在描述中，在事实陈述中(“我在 9 点钟有一个约会”)。是二元分类:0 或 1，感性或中性。这是最基本的层面。
*   **极性分类**区分表达积极、消极或中性情绪的句子，代表情感的第一级分离，没有更多细节。与这种极性类似的是在聊天信息中或在对话助手发送的信息中使用拇指向上和向下。中立当然表现为没有投票权。
*   **情感检测**被定义为一种态度、一种思想或一种判断，这种态度、思想或判断是由一种更微妙和更长期的感觉所激发的，例如爱、恨、信任等。人们可能想知道这种检测对于“经典”对话助手的相关性:电子商务、支持、自我护理…
*   对情绪**的检测**与更多的自发情况有关，如愤怒、喜悦、悲伤、焦虑、抑郁等。情感的丰富性在社交或专业信息中的表情符号的使用中有其相似之处。这些小图像用表达情感的元素丰富了文本，而不必写出来。[2021 年 4 月，微软宣布将团队中的表情符号选择器从 85 个元素扩展到 800 多个元素。](https://techcommunity.microsoft.com/t5/microsoft-teams-public-preview/preview-exited-now-ga-expanded-emoji-picker/m-p/2282145)

![](img/5d7f5d4d56791b398e0f4aabea0079fa.png)

一些来自 https://openmoji.org/的表情符号

*   检测讽刺和挖苦，人们可以用积极的词语表达他们的消极情绪。如果没有对表达单词的上下文的深刻理解，使用单词权重的算法很难检测到这一点。

由于会话分析的应用领域和涉及的媒介，在谈论聊天机器人会话分析时，说“情绪分析”比“情感分析”更合适。

# 情感的指称

很容易意识到，这种情绪和情感的调色板几乎可以无休止地下降。为了能够以电子方式管理它，有必要建立一个框架，一个参考系统，以便当我们在聊天机器人领域时能够采取相应的行动。

在最广泛使用的参考系统中，我们发现:

*   **极性系统**分三级:*正极*、*中性、*和*负极*。
*   **保罗·艾克曼的模型**【1】根据 6 个基本类别区分情绪。根据他的理论，这些基本情绪源于不同的神经系统，因为一个人感知情况的方式不同。所以，情绪并不是相互依存的。这 6 种基本情绪是*愤怒*、*厌恶*、*恐惧*、*喜悦*、*悲伤、*和*惊喜*。在 20 世纪 90 年代，埃克曼将他的核心情绪列表扩展到 16 种，包括更广泛的积极情绪:*娱乐*、*蔑视*、*满足*、*尴尬*、*兴奋*、*内疚*、*成就自豪*、*解脱*、*满足*、*感官愉悦、*虽然这项工作侧重于面部表情，与书面表达的对应物是可能的。
*   心理学家罗伯特**普卢奇克**【2】的**情绪轮**，它包括 8 种多维度的“基本情绪”:期待、愤怒、厌恶、喜悦、恐惧、惊讶、悲伤和信任。这些情绪的特殊性在于可以根据三个标准来识别:它们的强度、它们的相似性以及它们的“两极性”，即它们彼此之间的对立。一种情绪的强度越低，就越难辨别。

![](img/90fd4bd52e88e127e95e9aba8e52ce27.png)

**普卢奇克的情感之轮**——[机器精灵 1735，公共领域，通过维基共享](https://upload.wikimedia.org/wikipedia/commons/c/ce/Plutchik-wheel.svg)

*   奥托尼、克洛和科林斯模型反对罗伯特·普卢奇克和保罗·艾克曼提出的“基本情感”概念。根据这一模型，情绪产生于人类感知事件的方式，其强度不同。OCC 将情绪分为 22 类，增加了 16 种额外的情绪:*钦佩*、*愤怒*、*失望*、*苦恼*、*恐惧*、*恐惧——证实*、*幸灾乐祸*、*欣慰*、*感激*、*开心——为*、*憎恨*、

*2020 年 6 月，斯坦福和谷歌研究已经公开了一个基于 27 种情绪+中性的数据集。这个数据集被称为 GoEmotions [5]。*

*找到许多其他的参考框架是可能的，但重要的是建立一个框架并使用它。因为它有更多的类，OCC 模型有更广泛的情感表达范围。另一方面，查找示例(标记)和处理完整的列表将需要更多的工作。*

# *检测技术*

*文本中的情感检测通过两种方法解决:*

*   ***显式检测**。显性检测意味着在书面文本中使用明确陈述的词语，或带有情感的词语，如“快乐”或“幸福”，来表达情感(但人们可以找到与这一原则相矛盾的表述，如在句子中:“你的两种服务的组合不快乐”或“你偷走了我的快乐”)。*
*   ***隐性检测**。将文本识别并分类为没有携带情感的词的类别被称为隐含情感检测。当感情是隐性的时候，情绪词的识别就不起作用了(“你的服务宕机了”)。*

*检测方法可以分为三类:*

*   *通过一套**手动精心制定的规则**。在文本挖掘中开发了许多技术:词干提取、标注单词、句法分析、词性标注和组块；词汇的使用(即单词和表达列表)。这里有一个这个系统如何工作的例子，分三步:定义一个极化词的列表(例如，像“丑”、“坏”、“最差”这样的负面词，以及像“漂亮”、“好”、“最好”这样的正面词，等等)。);统计给定文本中的正面词和负面词的数量；如果正面词多于负面词，则该文本被认为是正面的，反之亦然。在出现平局的情况下，文本被认为是中性的。这个系统的主要缺陷是它一个接一个地提取单词，而不是按照单词的顺序，这使得它不是一个完全可靠的系统(例如“好”对“不好”)。然后，有必要添加许多规则来获得令人满意的结果，但是这使得系统的调整和维护变得更加复杂。*
*   *通过来自实例数据的**机器学习技术**。这包括训练模型来学习将输入(例如，句子)与极化的结果(积极的、消极的或中性的)相关联。情感分类可以被建模为分类问题，其中我们给模型一个向量(单词或句子),它返回一类情感(例如，中性、积极、消极、恐惧、焦虑、快乐、悲伤、愤怒、失望等)。).为了训练它，我们学习我们的模型，将对应于要检测的情绪的结果(类别)与单词向量相关联。存在许多预先训练的模型，但是对专有语料库的性能研究表明，这些网络对于会话情况来说不够有效。*
*   *通过一个**混合系统**结合了之前的两个系统。*

*使用任一系统还是两个系统取决于预期的检测水平。*

# *检测的挑战*

1.  ***监督分类工作基于带注释的语料库**。这种有监督的情感分类所固有的主要问题之一是，有必要拥有特定于被处理的领域的人工注释的学习语料库。这是一个复杂的过程，既费时又费钱。此外，由于情感文本的模糊性，标注时往往很难有较高的标注者间评分。最佳-最差缩放技术的使用[4]减少了基于人的注释偏差。*
2.  ***隐性情绪检测很难实现**，因为句子中不包含情绪词。*
3.  ***否定强烈影响检测**。*
4.  *一些含糊不清的词语会影响检测，讽刺和挖苦的使用也是如此。*
5.  *情感检测可能是一个**耗时**(并且 CPU 密集型)的过程。在大量的情况下，它可能需要大量的处理资源，甚至导致聊天机器人响应的传输延迟。*
6.  *根据与对话中其他句子的关联，单词和句子可能具有**不同的强度水平，这可能会影响逐句识别。***
7.  *公共的**预先标注的语料库通常是不平衡的**，这导致了偏见，并且通常是为了不一定与业务目标兼容的特定目的而制作的。*
8.  *包含积极和消极表达的信息很难处理，其中两种极性都不占主导地位，例如“尽管在收银台前等待了很长时间，我还是喜欢你的产品”。*
9.  ***在基于语音的系统**中，调制、节奏、音量和停顿也提供了用户情绪状态的指示，并且检测起来非常复杂。*
10.  *重要的是**定义我们想要捕捉的情绪水平**。要检测的每种情绪代表要执行的治疗。*

*![](img/22a3c9454626c3ac1d04dd4a58048f49.png)*

*从最普通到最特殊的情绪等级的例子*

# *当一个聊天机器人面对一种情绪的表达时应该怎么做？*

*对于一个人来说，知道如何对一种情绪做出反应是很复杂的。对于一个 Bot 和配置它的人来说，就更复杂了！管理对话已经相对复杂，如果答案必须考虑到对话者的情绪水平，就更加困难。*

*面对负面情绪的检测，几种反应是可能的:*

*   *在基于对话树的对话中，可以根据用户的反应添加情感测试。在回答的每个过程中，我们可以尝试检测情绪，根据反馈，根据情绪的类别和强度，有可能触发相应的行动。我们越是试图检测不同的情绪，树的设计和维护就会变得越复杂。*
*   *助手可以保留对话并添加标签，允许领域专家查看这些对话并异步处理它们。这对于理解用户恼怒的原因尤其重要，并且如果必要的话，修改对话以管理这种类型的行为。*
*   *当面临负面情绪(或一系列负面情绪)时，机器人可以安抚用户，并建议他们通过实时聊天对话联系人类。这当然是最容易从事的行为。也有可能触发 web 回调操作。*
*   *在使用自动自然语言生成(NLG)的系统中,“有可能”添加一个情感参数，该参数将允许响应根据一种或多种情感而变化。最简单的是能够通过用静态句子块填充空槽列表来传输文本，直到能够基于检测到的情感生成完整的句子。*

# *结论和展望*

*你应该通过在聊天机器人中添加情绪管理来明确你想要达到的目标。如果你使用一个预先训练好的模型，用你的用户反馈在你的域上测试它。不要想当然地认为出版商做的性能测试是理所当然的，他们是在不同的领域用不同的数据做的。*

*如果您想创建您的模型，不要低估收集、注释和建立对话树所涉及的工作。这是大量的工作，应该考虑到目标。*

*定义你的情绪清单，那些对你的生意有意义的情绪。*

*仔细考虑来龙去脉。没有系统总比一个只起一半作用的系统好。*

*迄今为止，大多数聊天机器人解决方案都允许你在对话过程中或对话结束时发表评论。因此，在场景结束时知道用户的意见是相对容易的，这在许多情况下是足够的。*

# *参考*

*[1]https://en.wikipedia.org/wiki/Paul_Ekman 的保罗·艾克曼*

*[2]罗伯特·普卢奇克——【https://en.wikipedia.org/wiki/Robert_Plutchik *

*[3]奥托尼，a .，克洛尔，G.L .，柯林斯，a .:情绪的认知结构。剑桥大学出版社，英国剑桥(1988 年)*

*[4]最佳-最差缩放—【https://en.wikipedia.org/wiki/Best%E2%80%93worst_scaling *

*[5] GoEmotions:一个细粒度情感的数据集——[https://arxiv.org/abs/2005.00547](https://arxiv.org/abs/2005.00547)*