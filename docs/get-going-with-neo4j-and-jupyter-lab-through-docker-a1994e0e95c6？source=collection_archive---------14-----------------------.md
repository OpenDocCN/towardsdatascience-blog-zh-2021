# 通过 Docker 了解 Neo4j 和 Jupyter 实验室

> 原文：<https://towardsdatascience.com/get-going-with-neo4j-and-jupyter-lab-through-docker-a1994e0e95c6?source=collection_archive---------14----------------------->

## 当你可以两个都做的时候，为什么每次只做一个呢？

![](img/877e7d8868d08b873eabb667a2e94e3b.png)

安托万·佩蒂特维尔在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

Docker 为数据科学家(实际上是软件中的每个人)提供了以可复制的方式共享代码的能力。我记得几年前我第一次接触它的时候。我曾经是一个使用老式虚拟桌面的人，这些虚拟桌面很笨重，仅仅凭借其架构就占用了大量内存。我第一次了解 Docker 的那一天，我是如此兴奋，以至于晚上大部分时间都醒着想着它！像一个过圣诞节的孩子一样，我收集了一大堆不同的容器，因为我可以这样做，也因为这让我对我可以在其中开发(玩耍)的所有这些伟大的新环境感到眩晕。

这让我想到了今天。当然，我可以在虚拟环境中做事，但是如果我搞砸了一些重大的事情怎么办？(想想:和 CUDA 驱动之类的乱搞。)我能够搞砸我的本地系统以及下一个人。在一个容器中完成我所有的开发可以防止我造成任何永久性的伤害。(因为你需要多长时间才能把你的 linux 环境设置好*就像你喜欢的那样*？？？)此外，我可以轻松地与其他人共享该环境，而不必担心系统和软件包的差异。它只是工作。这对数据科学家来说非常好，因为我们倾向于对 Python 包之类的东西有很多软件依赖。

这篇博客文章将是在 [Neo4j](http://neo4j.com) 做数据科学系列文章的第一篇。用图形数据进行数据科学真的很有趣，但是我将在以后的博客文章中深入探讨这个问题。作为开始，任何可能跟进这些未来帖子的人都能够拥有和我一样的环境，这真的很有帮助。为此，您可以在 GitHub repo 中找到 Docker 容器的代码。

# 代码遍历

作为一名图形数据科学家，我需要能够与 Neo4j 数据库以及许多常见的数据科学工具和软件包进行交互，比如 Jupyter 笔记本。理想情况下，我希望 Jupyter 与 Neo4j 交谈时不要太大惊小怪。这就是`docker-compose`的用武之地。

让我们来看看回购中的一些文件，我们将使用这些文件来完成这项工作。

首先是一个明显的`requirements.txt`文件，它详细说明了基本容器之外的任何附加需求:

请注意，我有两个不同的 python 包，用于与我们将要创建的 Neo4j 数据库进行交互。第一个是官方驱动，第二个是社区写的驱动。挑你最喜欢的。

接下来，我有`Dockerfile`，这只是我们在 Jupyter 的朋友推出的标准。它里面有很多很好的公共数据科学包，但是你可以随时通过`pip3 list`检查安装的包。你需要的任何不在列表中的东西都应该放到`requirements.txt`中。

最后，我们需要获得一个 Neo4j 实例，并在容器的 Neo4j 和 Jupyter 部分之间建立某种网络。所以这里我们要用`docker-compose`:

关于这个设置的一些事情。首先，我使用的是 Neo4j 4.2.3，但显然版本号会发生变化，所以你应该考虑使用最新版本(尽管我注意到`:latest`并不总是获得绝对的最新版本)。接下来，我们将打开和转发几个端口。Neo4j 浏览器使用 7474，而 7687 是 bolt 连接器，将用于数据库的 python 连接。在第 15 行，我们用密码`1234`创建用户`neo4j`(比这更有创意！)使用第 16 行中的内容，我们将两个重要的库导入 Neo4j，即 Cypher (APOC)上的 [Awesome 程序和](https://neo4j.com/labs/apoc/)[图形数据科学(GDS)库](https://neo4j.com/product/graph-data-science-library/)。这两者在我们解决数据科学问题时都非常有用。接下来，注意第 18–20 行被注释掉了。GDS 是记忆密集型的。除了默认配置之外，您还需要添加内存。这些值的确切值取决于您的本地系统，因此相应地调整它们，然后取消注释这些行。最后，我们看到我们正在端口 8888 上运行 Jupyter 容器。两个容器都通过`neo_net`网络连接在一起，这样它们就可以互相对话。

# 运行容器

与任何 Docker 容器一样，第一步是构建它。为此，我们从命令行发出通常的命令:

```
docker-compose build
```

这将通过和组装整个事情。接下来，我们通过

```
docker-compose up
```

这将点燃容器的 Neo4j 和 Jupyter 部分。你会看到许多东西滚动而过，但其中之一将是 Jupyter 的链接，其中包含打开它所需的令牌。点击那个链接应该会在你的浏览器中打开 Jupyter。接下来，我们可以导航到`localhost:7474`以进入 Neo4j 浏览器。

现在，我们应该让 Jupyter 和 Neo4j 能够相互通信。为了测试这一点，您可以在`notebooks/test_db_connection.ipynb`中运行笔记本。如果运行时没有错误，就可以开始了！现在，您可以在 Jupyter 笔记本中与 Neo4j 进行交互，也可以直接从 Neo4j 网络浏览器中进行交互。

当然，一旦你完成了，你发出命令

```
docker-compose down
```

干净利落地关闭容器。不过最棒的是，因为我们已经链接了一些像`notebooks/`这样的卷，我们的工作被保存在我们的本地计算机上，并且可以在任何时候再次使用。

*敬请关注下一篇博客文章，通过图表了解数据科学之旅！感谢您的阅读！*