# 为什么伤害这么大:数据迁移的基本策略

> 原文：<https://towardsdatascience.com/why-does-it-hurt-so-much-basic-strategies-for-data-migrations-2e8fdd7def9c?source=collection_archive---------44----------------------->

## 认识并克服移动数据的挑战

![](img/c5618d1b4e79f24ed191ac7fa2bc109c.png)

弗兰基·查马基在 [Unsplash](https://unsplash.com/s/photos/data?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的照片

恭喜你，你刚买了一套新的 IT 系统。除非它将被用来支持一个全新的业务流程，否则您现在面临的任务是将您的数据从一个遗留系统转移到您新获得的工具中。数据迁移充满了挑战、陷阱和危险。同时，它们也是我们处理的最常见的数据项目之一。然而，迁移数据通常是事后的想法，或者被大大低估了。因此，这些举措经常出错也就不足为奇了。在这篇文章中，我将讨论一些绊脚石和降低风险的策略。

# 基本策略:之后你可能不会清理它

![](img/a92573d7ee553923e6bd5c9cbc444b91.png)

*你妈妈已经不住在这里了(图片由*[*Lunail*](https://www.freepik.com/lunail)*on*[*Freepik*](https://www.freepik.com/premium-photo/lot-dirty-dishes-lie-sink-kitchen-that-needs-be-washed_4270872.htm)*)*

虽然将数据从一个系统复制到另一个系统在技术上并不难，但数据迁移的核心问题是如何在不降低目标系统数据质量的情况下执行迁移。您至少会遇到 4 个基本问题:

*   数据丢失:由于没有将某些数据元素映射到目标系统，这些数据元素将不会存在于目标系统中。它们实际上已经丢失了。
*   数据重复:一些数据元素可能已经存在于目标系统中，如果没有有效地进行匹配，就会导致重复。
*   有效性问题:源系统中的数据可能与目标系统中的数据格式不同。如果没有转换，您可能会将格式不良的数据加载到目标系统中。在某些情况下，您可能根本无法加载数据，例如，如果目标系统有验证规则。
*   一致性问题:这与我前面提到的重复问题有关。如果源系统和目标系统中相同的数据元素有不同的值，会发生什么情况？哪个值准确？他们都是吗？字段真的有相同的语义吗？

在迁移的上下文中，有三种处理遗留数据的方法:首先，您可以丢弃它，从不影响目标系统中数据质量的角度来看，这可能是最好的方法。你没有的也不可能是错的或格式不良的。

这种方法带来了巨大的代价:企业实际上将失去与遗留数据进行交互甚至咨询的途径。虽然有一些方法在遵守法律要求的同时允许使用这种策略(例如，您可以将数据以原始形式存储在驱动器上)，但如果企业在日常运营中需要这些数据，这种方法对企业没有帮助，因为情况几乎总是如此。

第二种方法是在源位置或迁移过程中清理数据。虽然这是一种优越的方法，但它需要时间、金钱和资源。此外，遗留系统通常不支持这种清理操作。

第三种方法是按原样迁移数据，并利用新的应用程序清理目标中的数据。通常，这是我们结束的地方，减去实际的净化。数据迁移项目已经结束，资源被重新分配，如果我们正在进行这种讨论，围绕数据质量进行明确治理的可能性实际上微乎其微。

这将导致两件事:第一，新系统中的体验将被涌入的低质量数据所破坏。所有展示给你的漂亮的新应用程序的演示都是由供应商使用特制的高质量数据完成的。还记得在系统中快速查找联系人的过程吗？现在，系统开箱后运行缓慢，遗留系统中有 7 个同名联系人的问题仍然存在。然而，他们向您承诺，所有这些都可以通过实施新工具来解决。

第二，如果你迁移到一个共享的平台，你不仅会遇到你在遗留系统中曾经遇到的同样的问题，你还会把你的问题插入到使用相同系统的同事的生活中。也许他们已经把他们的复制品削减到一个可以接受的水平，却发现有人一下子就毁掉了他们所有的努力。

我参与过一些项目，在这些项目中，我们成功地选择了混合方法，丢弃了一些数据(您真的需要二十年的发票数据吗？)，在传输中或在源处清洗一些，然后在目标处清洗。使最后一步有效的唯一方法是有一个批准的项目，有预算和锁定的资源，以在商定的时间范围内完成清理工作。如果你没有所有这些，简单地假设你迁移的混乱将永远存在。

# 无迁移意味着您从一个空数据库开始

![](img/7a5cb5655336929a4195f766e3515d4d.png)

*我最喜欢的数据迁移策略之一(照片由* [*乔奎因·科普兰*](https://www.freepik.com/joaquincorbalan)*at*[*Freepik*](https://www.freepik.com/premium-photo/silhouette-fireman-trying-control-fire-street-during-night_4469781.htm#page=4&query=fire&position=37)*)*

我想花一点时间谈谈根本不进行数据迁移的概念。我实话实说:就像最好的代码是未编写的代码一样，最好的数据迁移是未执行的。然而，不迁移可以有非常不同的含义，取决于谁使用这个词。

让我先说:当我说不迁移时，我的意思是您将从一个空数据库开始。你的历史:消失了。你的账户:没了。你的联系人:拜拜。正如我之前提到的，出于合规性的原因，我们可以将这些东西存储在某个地方，但是出于所有实际目的，您将无法在操作上使用任何东西。如果你正在转移到一个共享平台，你也许可以重用那里的一些数据。如果您想使用外部购买的数据，我们也可以做到这一点。

但是，当企业说不进行迁移时，他们可能完全是另有所指:也许他们不想花费任何金钱或时间来正确地进行迁移，所以他们更愿意将遗留系统中的所有东西原封不动地放入新的应用程序中。这实际上也是一种数据迁移，只是做得不好。

我在多个组织中见过这种情况，它总是导致悲剧。在某种程度上，当不迁移的后果变得明显时，有一种逐渐改变目标的趋势:也许我们应该尝试迁移一些主数据，对吗？账户数据，没那么难。

在第一轮测试之后，企业真的希望能够看到他们在过去为客户做了什么，所以也许我们也应该尝试加载一些历史记录。诸如此类。你猜怎么着？您现在正在进行数据迁移，只是没有进行任何分析，也没有获得批准的预算或资源。

# 快速加载，快速失败

![](img/8cb941885cd4535de33d9ca10bee3883.png)

*照片由* [*纪尧姆小牢*](https://unsplash.com/@i_am_g?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) *上* [*下*](https://unsplash.com/s/photos/fast?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

说到分析，在预先分析和规划与进行实际迁移之间，什么是正确的平衡？

根据我的经验，当您真正尝试将数据加载到目标系统中时，问题通常会浮出水面。我并不是说你不应该花时间在分析上，恰恰相反。但是，即使您找到了既了解源系统又了解目标系统并且非常了解业务环境的人，在您提取、转换和加载数据之前，也很难完全分析情况。

从产品的角度考虑是有帮助的:实际进行迁移需要什么？您是否在寻找成套 CSV？如果有，他们有哪些领域？它们将映射到目标应用程序中的什么位置？遗留系统中的所有东西在新系统的数据模型中都有位置吗？我们有映射关系的键吗？如果没有，我们能创建这些键吗？如果您正在考虑使用 API 调用来加载数据，这些问题是相似的。

你可能会说，这些事情应该在分析过程中解决，你是对的。我要说的是，我很少遇到这样的情况，在将数据加载到目标之前，所有这些问题都得到了妥善解决。

通常，我们不需要同时加载所有对象，所以一次测试一个对象可能会暴露出您没有计划到的问题。

当然，在某些时候你会想要尝试多个对象的序列，特别是当它们是不同对象之间的关系时。就测试而言，如果可行的话，我非常希望在测试阶段至少运行一次整个迁移。显然，如果您正在考虑为期一周的迁移，这可能会很困难。另一方面，迁移花费的时间越长，遇到不可预见的问题的可能性就越大。当使用较小的样本时，这些问题中的一些可能不会被梳理出来。

也许在实际迁移之前可以加载一些对象，但是需要预见从遗留系统推送更新的一些方法，因为遗留系统仍然会获得某些数据元素的更新。虽然有理由对特定的数据元素进行预迁移，但请记住，这给迁移增加了额外的复杂性，并带来了巨大的数据质量风险。

# 您的整体数据成熟度会直接影响数据迁移的成本

最后，我想强调的是，没有免费的午餐，也绝对没有免费的数据迁移。也就是说，您在做这些事情时遇到的许多问题都是数据相关事务整体成熟度较低的直接后果。在数据成熟度较高的组织中，在购买或实施新系统之前，会询问有关数据迁移的问题。类似地，当您在组织中创建新类型的数据时，您应该考虑未来不可避免的数据迁移。这意味着要考虑粒度(需要时总是可以聚合更粒度的数据，反之则不然)、通用数据模型和共享分类法。

当这些问题在整个数据生命周期中得到解决，而不是在时间紧迫的情况下移动数据时，成本往往会大大降低。

此外，拥有更高的数据成熟度意味着您的业务用户将能够以更结构化的方式推理他们的数据，还会导致更清晰的需求和更现实的期望，这两者都是成功的数据迁移的关键成功因素。