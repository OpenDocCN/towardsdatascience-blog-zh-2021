# 美国最健康的城市:第一部分，食物

> 原文：<https://towardsdatascience.com/healthiest-cities-in-the-us-part-1-food-62b9724467e8?source=collection_archive---------26----------------------->

## 美国城市有多健康？

![](img/7082da6dd9c66a6f4911944436d948e1.png)

在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上由 [Haseeb Jamil](https://unsplash.com/@haseebjkhan?utm_source=medium&utm_medium=referral) 拍照

我一直在思考在城市分析的背景下使用数据科学和统计学，特别是关于美国城市有多健康的问题。在这些由多个部分组成的故事中，我们将使用数据科学来分析这个问题。此刻，我打算这样划分故事:**美食**、**休闲空间**、**工作生活平衡**。在第一部分，我们将关注食物:即快餐连锁店在美国各城市有多普遍，以及美国人民在杂货店购买食物有多容易。让我们开始吧:

## **数据:**

*   快餐数据:[https://www.kaggle.com/datafiniti/fast-food-restaurants](https://www.kaggle.com/datafiniti/fast-food-restaurants)

## **工具:**

*   Jupyter 笔记本
*   熊猫(一个数据帧处理包)
*   Stats (Python 统计分析库)
*   Seaborn 和 Matplotlib(可视化库)

# 1.方便食品

让我们首先尝试围绕数据收集一些基本事实:

*   有多少独特的城镇:

*   **结果:** 2764 个独特的城镇
*   对于每个快餐条目，数据集包含哪些列/数据？

*   **结果:**索引(['id '，' dateAdded '，' dateUpdated '，' address '，' categories '，
    ，' country '，' keys '，' latitude '，'经度'，' name '，' postalCode '，【T21 '，'省'，' sourceURLs '，' websites']，
    dtype='object ')
*   最常见的品牌是哪个？

*   **结果:**麦当劳(1898 家餐厅)，塔可钟(1032 家)，汉堡王(833 家)，赛百味(776 家)，Arby's (663 家)。
*   有多少快餐？

*   结果:10000

计算美国最健康城市的一个主要问题是每个城市有多少家快餐店。要回答这个问题，我们可以使用熊猫按城市名称对数据进行分组，然后按每个城市的快餐数量对数据框进行排序，如下所示:

![](img/e14ff0018ec7f553b609e01a2c9efadc.png)

不足为奇的是，像休斯顿和拉斯维加斯这样的大城市拥有最多的快餐店，因为它们规模庞大。因此，简单地使用餐馆数量是不够的:我们需要一个变量来量化基于人口的数量。为了做到这一点，让我们设计一个新的指标，快餐数量除以每个城市的人口。如果一个城市有许多快餐，但人口很少，这个变量将有一个高值，反之亦然，为低值。将该指标添加到数据帧的代码如下:

以下是我们设计的指标值最高的前 20 个城镇:

![](img/7268bcd764d43e14cf33ac15ab30ab05.png)

你可以看到像恩西诺(加利福尼亚)、吉尔福德(北卡罗来纳)和王国城(密苏里)这样的城镇在列表的顶部。有趣的是，所有这些城市/城镇似乎在规模和人口上都更小，这意味着最大的城市有更少的快餐服务更多的顾客，按照我们的标准，使他们更健康。我们来看看实际情况是否如此。首先，这是数据集中所有城市的人口数量和相应的快餐数量的散点图:

![](img/9413478c1c8c6df1aaf19b4c73fcdc20.png)

虽然对于 250，000 人以下的城镇来说，人口和快餐数量之间的关系似乎是线性的，但随着人口的增加，这种关系似乎不那么明显了。这是人口与我们设计的指标的散点图:

![](img/67b43037fca14c8dc24b1116cabf57b6.png)

在这种情况下，实际上看起来这种关系有点负面:随着人口的增长，人们可以吃的快餐越来越少。

为了真正了解人口较少的城市和人口较多的城市在快餐店方面是否存在实际差异，我们可以对这两种人群进行一些统计分析。对于这个故事，我们将定义两种不同的城市规模:小于或等于 25，000 和大于 25，000。在我们测试这两个群体的差异之前，我们需要决定我们将使用的测试。为此，首先我们必须看看人口是否正态分布。这可以通过使用 QQ 图和夏皮罗-维尔克正态性检验来实现:

## qqplot

QQ 图是一个散点图，绘制两组分位数之间的关系。如果两组分位数来自相同的分布，我们应该看到这些点形成一条大致笔直的线。下面的代码将数据集分成两个预定义的城市大小。

这是较大(超过 25，000 人)城市的 qqplot:

![](img/9cca7caa34da4a7e8c0adfb4694926d7.png)

这是较小城镇的 QQ 图:

![](img/c7808794d5b688feeafef41b474cd064.png)

正如你所看到的，这两个群体都不符合直线，这使我们倾向于说群体不是正态分布的。

## 夏皮罗-维尔克

检验正态性的夏皮罗-维尔克检验通过设定两个假设来工作:

*   零假设:数据呈正态分布。
*   替代假设:数据不是正态分布的。

以下是针对较大城镇的夏皮罗-维尔克测试结果:

![](img/479bcd1912090b218ac649d0509e8672.png)

这是针对小城镇的夏皮罗-维尔克测试结果:

![](img/479bcd1912090b218ac649d0509e8672.png)

## 曼-惠特尼试验

既然我们已经确定数据不是正态分布的，那么一个合适的测试就是曼-惠特尼测试来确定我们两个群体之间的差异。对于这个检验，我们还应该陈述一个无效假设和另一个假设:

*   零假设:两个群体来自同一个基础群体。
*   替代假设:两个群体不来自同一个潜在群体。

该测试的代码如下:

![](img/2c998d6608c7d6324eaeddbc7f013aff.png)

曼·惠特尼测试告诉我们，小城镇和大城镇的快餐数量确实存在差异，这对于根据美国人居住的城市来理解他们可获得的食物类型是很有趣的。

# 2.食品杂货通道

对于这个故事的第二部分，我们将看看美国哪些县最容易获得食品杂货。数据取自经济研究署的食品环境图集([https://www . ers . USDA . gov/data-products/Food-Environment-Atlas/](https://www.ers.usda.gov/data-products/food-environment-atlas/))。

![](img/21eabc047ac5487584f3afbe95b52f97.png)

如您所见，数据集包含了县一级的各种指标的信息。我们将使用的是“LACCESS_POP10”，它指的是 2010 年每个县获得食品杂货的人数。让我们首先过滤数据集，并查看每个州的这一指标的平均值:

![](img/7059908a43aa9561aaccad8b9b5540a4.png)

“值”列包含获得食品杂货的平均人数，最高值属于马萨诸塞州，其次是康涅狄格州和新泽西州，这可能有点令人惊讶，因为它们都是拥有大片城区的州。就像我们对快餐所做的那样，我们应该将这些数字换算成该州的人口数，并用一个比率来表示，所以让我们使用下面的变量:很少接触食品杂货的人数除以该州的人口数。代码如下:

为了解释这些结果，该变量的大值意味着每个州拥有低访问权限的人口比例较高，而小值意味着拥有低访问权限的人口较少。以下是按变量降序排列的前 10 个州:

![](img/7483a454d5ae66ecb56bda64271e2bb5.png)

倒数 10 个州是:

![](img/ccae76389a308fa6f595e1764b6a1447.png)

得克萨斯州是食品杂货收入低的人口比例最小的州，而特拉华州是最高的，其次是罗德岛州和夏威夷。这些结果让你感到惊讶吗？它们对我来说有点小，因为我原本预计美国中部农村人口较多的州会在列表中占主导地位，因为杂货店可能在这些州很少。然而，有趣的是，似乎事实并非如此。

希望你喜欢这个小故事，如果你想看完整的代码，可以在这里找到:[https://github . com/DeaBardhoshi/Data-Science-Projects/blob/main/_ Urban % 20 health % 20 analysis % 20 part % 201% 20-% 20 food . ipynb](https://github.com/DeaBardhoshi/Data-Science-Projects/blob/main/_Urban%20Health%20analysis%20Part%201%20-%20Food.ipynb)

感谢阅读！