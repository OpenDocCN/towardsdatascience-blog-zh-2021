# 分析 Twitter 对话

> 原文：<https://towardsdatascience.com/analyzing-twitter-conversations-4ce28080732e?source=collection_archive---------22----------------------->

## 使用新的 Twitter API v2 端点获得关于某个主题的可行见解

![](img/5918a82b441c877cff64d7be2f4b99d1.png)

普里西拉·杜·普里兹在 [Unsplash](https://unsplash.com/s/photos/talking-eating?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上的照片

近乎实时地了解人们在谈论什么是非常强大的。这类信息可以为活动、品牌战略和产品创新提供信息。收集这些数据的标准方法是走出去，找到消费者，向他们提出有针对性的问题。如果你的问题不完美，这种方法可能会很昂贵、耗时，而且完全不相关。

Twitter 提供了一种收集未经过滤的数据的方式，这些数据是关于人们或公司如何谈论特定话题的。然而，“未经过滤”的部分可能是试图从原始 twitter 数据中提取洞察力的最大挑战。这个数据的一个缺点是它只是拼图的一小部分。API 将只提取包含与您的查询匹配的文本的推文，因此它不能提取所有相关的内容。如今，Twitter 被更多地用于对话，最初的推文可能会引发下面的讨论。我想找出一种方法来绘制出这种类型的信息，并获得给定主题的完整图片。

# 收集

在这个项目中，我想深入了解围绕**园艺**的对话。Twitter 的免费 API 允许你回溯 7 天，所以这是我的出发点。我用他们 API 的新 v2 版本做了一个 7 天的搜索，寻找任何提到“园艺”的推文，大约有 22，000 条！

v2 端点的新特性是对话 ID。这让我们可以围绕这个话题展开全面的讨论，而不仅仅是一次性的推文。为了获得之前获得的 Tweet 对象，我们将:

1.  获取我们保存的所有没有回复的推文(会话的初始节点)
2.  对于其中的每一个，获取具有相同对话 ID 的所有 Tweets
3.  确保我们的数据库中不存在该推文，然后保存。

以下是大致的想法:

# 主题聚类

在收集了这些推文之后，我的第一个想法是使用 NLP 将它们归类到子主题中。在对最适合 tweet 数据的模型进行了一些研究之后，我决定使用潜在的 Dirichlet 分配(LDA) Mallet 模型。为了运行这个，我清理了所有的 Tweet 文本，包括 URL、表情符号、标签和用户标签。

为了简单起见，我选择了 20 个主题。下面是按热门话题排序的输出。

![](img/3919600deedb52dbfe37640ef8b3af1c.png)

作者图片

这个输出非常有趣，但是它只能让我们到此为止。我希望能够更深入地研究这个列表。例如，我想知道每个主题下有哪些推文，以便更好地了解它们真正在谈论什么。

# 主题散点图

为了能够直观地看到这一点，我决定创建一个交互式散景散点图。

下面是我用来生成图的基本代码。我正在获取推文数据，这样我就可以将鼠标悬停在每个节点上，以了解它是什么推文。此外，由于我们在这里处理的数据量很大，我希望能够区分更重要的推文。为此，我使用该推文收到的收藏数量来确定大小。

![](img/46738c168985bff0b4053526e71c1746.png)

作者图片

现在我们越来越近了！使用这个图表，我可以放大集群并阅读最受欢迎的推文，以获得关于主题的真正好主意。然而，这仍然不是全部情况。这些聚类只是随机推文聚类的代表，并不能让我们了解围绕该主题的对话是如何形成的。

# 对话网络图

对话本质上是更大主题中的迷你网络。在这种情况下，它们通过我们之前收集的对话 ID 连接起来。我们可以通过将 Tweet 连接到它们的“回复”Tweet 对象来确定一切是如何链接在一起的。我将坚持使用散景，并根据这个标准创建一个网络图。

散点图中不同大小的节点非常有帮助，因此我将在此图中坚持使用。我注意到的一件事是，由于 Tweet 收藏夹的差异很大，比例有点失调，所以我将大小限制为收藏夹的平方根，从 5 到 150。也很难确定对话的开始推文，因此，如果数据库中没有保存“回复”，我会将其标记为红色。

为了创建网络图，我为我保存的每条推文添加了一个节点，然后通过“回复”字段将推文连接起来。最后，为了更容易可视化，我将删除所有没有连接的节点。如果我们只想绘制出最大的对话，我们也可以删除任何连接少于一定数量的网络。完成此操作的基本步骤如下。

输出是围绕“园艺”的对话的一个很酷的可视化，不管推文是否提到园艺。这让我们对正在发生的事情有了一个全面的了解。从这里我们可以放大到具体的对话，看看用户在说什么

![](img/baa2ff491313f155c40f1061944337dd.png)

全图(作者图片)

![](img/c99335b3c277b7e8c2df5ad4994c6a6d.png)

放大版(图片由作者提供)

我们现在有了一个围绕真实话题的对话地图，它可以提供对一个主题的无限见解。这对于研究博客主题、进行市场研究甚至发现趋势是很有用的。通过调整节点大小，我们可以快速看到哪种类型的推文和内容产生了最多的点击和最多的对话。