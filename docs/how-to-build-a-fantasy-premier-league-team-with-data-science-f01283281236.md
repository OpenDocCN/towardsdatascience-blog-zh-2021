# 如何用数据科学打造梦幻英超球队

> 原文：<https://towardsdatascience.com/how-to-build-a-fantasy-premier-league-team-with-data-science-f01283281236?source=collection_archive---------3----------------------->

## 利用数据科学和数学优化您的 FPL 团队。

![](img/15657c3f6d4ca3f3cdf3095db945a5f4.png)

照片由 [Nguyen Thu Hoai](https://unsplash.com/@thwhoai?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 在 [Unsplash](https://unsplash.com/s/photos/soccer-coach?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

# 介绍

梦幻超级联赛是一个体育战略游戏，我们建立了一个足球队的基础上，从英格兰超级联赛的球队。这个游戏的目标是挑选对比赛有贡献的球员。

为了知道球员有没有贡献，我们可以看看它的分数。这些分数是基于几个统计数据检索的，比如助攻数、进球数、上场时间等等。随着分数越来越大，球员们为比赛做出了巨大的贡献。

对于挑选球员，我们也有几个约束。这些制约因素是:

*   一个队由 15 名队员组成。具体来说，一个球队有两名守门员，五名后卫，五名中场，三名前锋。
*   给一个团队的预算只有 1 亿英镑。
*   我们最多只能从一支英超球队中挑选三名球员。

我们如何在这些限制下建立一个团队？我们可以利用数据科学和数学的帮助，而不是依靠我们的常识！

本文将向你展示如何用一个叫做线性规划的数学概念来构建一个梦幻英超球队。

如果对那个概念理解不深也不用担心。我们将使用一个基于 Python 语言的名为 Pulp 的库。

没有进一步，让我们开始吧！

# 最优化和线性规划

在我们进入实现之前，让我给你解释一下优化和为什么我们应该使用线性编程的原因。

优化过程是优化问题的工作流程。这个问题包括结果和我们受到的限制。一般来说，这个过程分为几个步骤。它们是:

*   获取问题描述。
*   制定数学程序
*   求解数学程序
*   评估结果
*   最终确定结果

在我们的例子中，问题描述是我们想要建立一个足球队，它有大量的分数，同时有效地使用预算。

要将问题公式化为数学问题，我们需要知道一些信息。这些是:

*   我们想要观察的变量。对于我们的问题，我们需要像玩家的价格、点数、团队和位置这样的数据。
*   目标函数。我们想优化这个函数。在这种情况下，我们希望从我们挑选的球员身上得到很多分数。
*   因为 FPL 有像预算和球员数量这样的规则，所以我们给出了约束条件。
*   最后，我们需要跟踪玩家统计数据的数据。

在我们得到所有我们需要的信息后，下一步是解决问题。为此，我们可以使用线性规划。

使用线性编程的原因是因为函数是基于线性表达式格式的。基于该表达式，线性编程将试图找到最佳点。因此，我们可以得到最优的结果。

我不会解释线性规划背后的细节。如果你有更多的兴趣，你可以在网上探索更多。目前，我们主要关注如何使用 Python 解决优化问题。

# 履行

## 数据源

对于数据源，FPL 为我们提供了访问历史数据的 API。我们可以检索数据，如球员的统计数据，每个游戏周的结果，球队的表现，等等。数据本身是 JSON 格式的，所以我们必须先重新格式化它。

如果您不能使用 API 或预处理 JSON，不要担心，我们可以使用来自 vaastav 的 GitHub 存储库中的预处理数据。您可以在这里访问数据[。要下载数据，我们可以使用 git 克隆来完成。在您的终端上，编写如下命令:](https://github.com/vaastav/Fantasy-Premier-League)

```
**git clone** [**https://github.com/vaastav/Fantasy-Premier-League.git**](https://github.com/vaastav/Fantasy-Premier-League.git)
```

## 加载库

获得数据后，下一步是导入库来处理数据集。我们需要像 pandas 这样的库来分析和处理数据，需要 pulp 来应用线性编程。

如果您仍然没有这些库，您可以使用 pip 命令来安装这些库。在终端上，编写以下命令:

```
**pip install pandas
pip install pulp**
```

在你的 jupyter 笔记本上，写下这几行代码:

## 加载数据

加载库之后，下一步是加载数据。我们将在每个比赛周使用包含当前赛季(2021–22)球员统计数据的数据。让我们写这几行代码:

在这种情况下，我们只取前一个游戏周。就像文章目前写的那样，目前的游戏周是游戏第 6 周。因此，我们从第 5 周的游戏中获取数据。让我们写这几行代码:

从上表可以看出，我们有很多列。因此，我们只选取我们实际需要的列。

这些列是玩家的名字、俱乐部、总点数、价格(价值)和位置。关于这些列的细节将在下一节中解释。

现在让我们写这几行代码:

## 初始化变量

现在我们有了我们需要的数据。下一步是初始化几个变量。正如我之前提到的，我们从表中提取了几列。原因有两个，目标和限制。

我们采用总点数变量是因为我们想优化点数。同时遵守我们现有的约束。像团队名称、位置和价格这样的变量是需要满足的约束。

现在让我们编写这些代码行来初始化我们需要的变量:

# 初始化问题

现在我们有了我们需要的变量。下一步是初始化包含我们的目标和约束的 LpProblem 对象。

我们设置参数，如问题的名称和一个对象，以确定问题的目标。因为我们想要最大化点数，所以我们将 LpMaximize 设置为对象的参数。

下面是实现这一点的代码:

## 定义目标

初始化问题后，下一步是定义目标。我们问题的目标是使点数最大化。

让我们写这几行代码:

## 定义约束

让我们回忆一下来自 FPL 的约束:

*   一个队由 15 名队员组成。具体来说，一个球队有两名守门员，五名后卫，五名中场，三名前锋。
*   给一个团队的预算只有 1 亿英镑。
*   我们最多只能从一支英超球队中挑选三名球员。

基于上面的约束，我们创建数学上描述约束的表达式。

让我们写这几行代码:

## 解决问题

我们有了我们需要的变量和数学表达式。现在让我们通过使用这行代码来解决这个问题:

## 检索玩家列表

程序解决问题后，我们可以检索符合约束条件的玩家姓名。让我们写这几行代码:

## 检索预期点数和总成本

现在你有了适合 FPL 限制的球队阵容。如果我们想知道期望的点数和使用的预算呢？

从这个问题中，我们可以得到目标和约束方程。我们可以通过计算等式来计算总点数和价格值。

下面是处理结果的代码:

# 结论

干得好！现在，您已经使用 Python 实现了构建梦幻超级联赛最佳团队的线性规划。

我希望它能帮助你为 FPL 建立你的团队。因此，你可以用有限的预算建立一个能为比赛做出贡献的最佳团队。

如果你对我的文章感兴趣，你可以在 Medium 上关注我。如果有任何问题，可以在 [**LinkedIn**](https://www.linkedin.com/in/alghaniirfan/) 上联系我。

感谢您阅读我的文章。

## 参考

[1][https://towards data science . com/how-our-ai-got-top-10-in-the-fantasy-premier-league-using-data-science-ba88b 185 b 354](/how-our-ai-got-top-10-in-the-fantasy-premier-league-using-data-science-ba88b185b354)
【2】[https://towards data science . com/creating-a-fantasy-cricket-team-application-of-of-linear-programming-4b 60 c 261702d](/creating-a-fantasy-cricket-team-application-of-linear-programming-4b60c261702d)
【3】[https://medium . com](https://medium.com/@joseph.m.oconnor.88/linearly-optimising-fantasy-premier-league-teams-3b76e9694877)