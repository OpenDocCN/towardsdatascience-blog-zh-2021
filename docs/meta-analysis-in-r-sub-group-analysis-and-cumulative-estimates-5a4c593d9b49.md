# R 中的荟萃分析

> 原文：<https://towardsdatascience.com/meta-analysis-in-r-sub-group-analysis-and-cumulative-estimates-5a4c593d9b49?source=collection_archive---------16----------------------->

## 分组分析和累积估计

这篇文章将是我关于 r 中的荟萃分析的介绍性文章的延伸。首先要澄清的是，分组分析在分析治疗效果时肯定有其应有的位置，但永远不应该被滥用。有太多的例子显示了 p-hacking 的危险，当亚组分析没有包括在研究方案中时(意味着采样的数据不打算在组之间划分)，您(作为读者)应该非常小心。然而，如果你有一个坚实的(生物学的)理由来进行亚组分析，这一努力在 r。

为了进行和展示荟萃分析，只需要几个软件包。实际上，对于这个例子，我仅仅依赖于 [**metafor**](https://www.metafor-project.org/doku.php) 包。

让我们加载数据，按照感兴趣的结果和结果类型进行划分。

![](img/7af5c7d4a78b88c487f55235a06f2cbf.png)

我现在已经在 r 中加载了一个数据集，该数据集包含每个研究和每个治疗的总结结果。请记住，为了对连续结果进行荟萃分析，您需要——每次治疗——平均值、标准差和观察次数。

创建单独的数据框架，使分析更加容易。当然，您也可以使用 **dplyr** 或 R 内置管道将数据库连接到分析。

![](img/7ab418a2b691a6ab524c638237fb5e47.png)

包含特定结果和级别的子集。在这里，那分别是 ADG 和高。

分析的最大部分实际上是进行分析。[**metafor**](https://www.metafor-project.org/doku.php/metafor)**包中需要使用的代码非常直观。下面，我要求进行一个随机效应荟萃分析，并根据 *subADG &环境*变量进行一个额外的亚组分析。 *hakn=TRUE* 语句请求 [Hartung-Knapp 调整](https://onlinelibrary.wiley.com/doi/full/10.1002/jrsm.1356)。**

**下图显示了每项研究治疗之间的平均差异和 95%置信区间。共纳入了 9 项研究，累计包含 233 项观察结果。随机效应模型没有显示出效应。人们可能会认为，这很容易通过查看 p 值来发现，但我希望你们忘记这些值。如果曾经有一个案例[着眼于置信区间，而不是 p 值](https://medium.com/@marc.jacobs012/inference-estimates-p-values-and-confidence-limits-a-frequentist-approach-acdd45d94bd5)，你会在这个荟萃分析中找到它。这些置信区间包含的是零，意味着没有影响。**

**然后，看看 tau 和 I，这些是你的异质性指标。至少，任何亚组分析都应该减少这些指标，这是强信噪比的暗示。通过包含子群，你正在分割你的数据，这意味着有效样本量的减少，这通常意味着更多的差异。如果异质性降低，那么这是分割数据实际上增加了信号的迹象。我们看到这种情况确实在发生——从全球 40%的异质性，我们分别下降到 0%和 22%。因此，在这里，分组分析似乎是有意义的，但情况当然不会总是如此。**

**在那之下，还有另一个 p 值，但是再一次忘了它。看置信区间。**

**![](img/8ce402d0056e26a885eee73090a5937f.png)**

**是时候创造那些美丽的森林了。**

**定制你的情节的许多可能性。**

**![](img/42777f8cd09646a7a3017caa20474e35.png)**

**该图清楚地显示了组内和组间方差、组内和组间异质性水平以及总体汇总估计的有效性。不需要 p 值，只需要眼球。**

**如果你想使用荟萃分析的力量，你不能超越累积性荟萃分析。这一过程很简单——每次“添加”新研究时都会计算出治疗差异汇总，因此您可以跟踪治疗估计值和异质性水平的变化。这样，你可以看到是否进行了太多的研究，还需要进行多少研究，或者进行更多的研究是否会有所不同。还是那句话，不要看 p 值，要看治疗估计值和汇总置信区间的变化。**

**![](img/06b4114d44064ca9d9f56434035787fa.png)****![](img/7b8798658ab343942d15b4ab2636ca5b.png)**

**增加更多的研究不会缩小置信区间——你增加的噪音和信号一样多。**

**下面，您将看到上面的工作流，但现在应用于将按比例转换的事件数据。对于这个例子，我将关注死亡率。**

**![](img/7614a40180d7825e3cf0087546e167f6.png)**

**结果衡量不再是平均差异，而是优势比。同样在这里，亚组分析删除了异质性，并清楚地展示了异质性的来源。**

**下面，你会看到我在元分析中比较两种不同的事件数据分析方法。**

**我想比较两个荟萃分析包——**meta for**和 **meta** 。**

**![](img/b2b8f04afef433f704012bd7f2088f2c.png)**

**包之间的结果重叠。唯一的区别是缺少港币调整选项。**

**现在，我们似乎可以相信这个算法，让我们再次建立森林的情节。**

**![](img/4894697fd582e387f4747f54809e817a.png)**

**森林图清楚地显示了每个结果是如何估计的。为了解释，通过公式(6/616) / (16/616)得到 0.37 的比值比(OR)，即 0.0097 / 0.0259 = 0.37**

**![](img/fe360b933e3c0976f66d35446d488fd3.png)****![](img/be77c5d2b8c99e83d632f5d5f147b7d3.png)**

**和累积的荟萃分析结果。在本例中，添加更多研究等于添加更多信号，这意味着没有效果。**

**如您所见，进行亚组和累积元分析非常简单。将一项研究纳入荟萃分析需要做出哪些选择，以及在决定亚组分析时使用哪些标准，这些永远不会是简单明了的。**

**但是话说回来，研究从来都不是简单明了的。也不容易。这就是它的乐趣所在:-)！**