# 5 ä¸ªå¯æ€•çš„æ•°å­—åŠŸèƒ½ï¼Œå¯ä»¥åœ¨ç´§è¦å…³å¤´æ‹¯æ•‘ä½ 

> åŸæ–‡ï¼š<https://towardsdatascience.com/5-awesome-numpy-functions-that-can-save-you-in-a-pinch-ba349af5ac47?source=collection_archive---------16----------------------->

## é¿å…è¢« 5 ä¸ªç®€å•çš„åŠŸèƒ½å›°ä½

![](img/cba6613d2f0d690e8bb9f8bd2b3bd452.png)

[JESHOOTS.COM](https://unsplash.com/@jeshoots?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹ç…§

# æ‚¨çš„æ—…ç¨‹æ¦‚è¿°

*   [è®¾ç½®èˆå°](#9585)
*   [1 â€”å¿«é€Ÿè¿‡æ»¤](#17f2)
*   [2 â€”é‡å¡‘è‡ªæˆ‘ï¼Œèµ°å‡ºå›°å¢ƒ](#3e97)
*   [3 â€”é‡ç»„ä½ çš„å½¢çŠ¶](#40a0)
*   [4 â€”æŸ¥æ‰¾å”¯ä¸€å€¼](#cb34)
*   [5 â€”ç»„åˆæ•°ç»„](#fce7)
*   [åŒ…è£…](#65ba)

# æ­å»ºèˆå°

ç”¨ Python åšæ•°æ®ç§‘å­¦æ—¶ï¼ŒåŒ… [NumPy](https://numpy.org/) æ— å¤„ä¸åœ¨ã€‚æ— è®ºä½ æ˜¯ç”¨ [Scikit-Learn](https://scikit-learn.org/stable/) å¼€å‘æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œè¿˜æ˜¯ç”¨ [Matplotlib](https://matplotlib.org/) ç»˜å›¾ï¼Œä½ çš„ä»£ç ä¸­è‚¯å®šä¼šæœ‰ä¸€äº› NumPy æ•°ç»„ã€‚

å½“æˆ‘å¼€å§‹å­¦ä¹  Python ä¸­çš„æ•°æ®ç§‘å­¦æ—¶ï¼Œæˆ‘å¯¹ NumPy èƒ½åšä»€ä¹ˆçŸ¥ä¹‹ç”šå°‘ã€‚è¿™äº›å¹´æ¥ï¼Œæˆ‘æé«˜äº†æˆ‘çš„æ•°å­—æŠ€èƒ½ï¼Œå¹¶å› æ­¤æˆä¸ºä¸€åæ›´å¥½çš„æ•°æ®ç§‘å­¦å®¶ã€‚

æ“…é•¿æ“ä½œ NumPy æ•°ç»„å¯ä»¥æŒ½æ•‘ä½ çš„ç”Ÿå‘½â€¦æˆ–è€…è‡³å°‘ä¸€ä¸ªå°æ—¶ä»¤äººæ²®ä¸§çš„æœç´¢ã€‚å½“äº‹æƒ…å˜å¾—å›°éš¾æ—¶ï¼Œæˆ‘åœ¨è¿™é‡Œç»™ä½ çš„äº”ä¸ªæ•°å­—å‡½æ•°å¯ä»¥å¸®åŠ©ä½ ğŸ”¥

åœ¨è¿™ç¯‡åšæ–‡ä¸­ï¼Œæˆ‘å‡è®¾æ‚¨å·²ç»å®‰è£…äº† NumPyï¼Œå¹¶ä¸”å·²ç»ä½¿ç”¨åˆ«å`np`å¯¼å…¥äº† NumPy:

```
import numpy as np
```

æˆ‘å»ºè®®åœ¨é˜…è¯»è¿™ç¯‡åšå®¢ä¹‹å‰å…ˆçœ‹çœ‹ NumPyã€‚å¦‚æœä½ å¯¹ NumPy å®Œå…¨é™Œç”Ÿï¼Œé‚£ä¹ˆä½ å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ [NumPy çš„åˆå­¦è€…æŒ‡å—](https://numpy.org/doc/stable/user/absolute_beginners.html)æˆ–è€… NumPy ä¸Šçš„è¿™ä¸ª [YouTube è§†é¢‘ç³»åˆ—ã€‚](https://www.youtube.com/playlist?list=PLSE7WKf_qqo2SWmdhOapwmerekYxgahQ9)

# 1 â€”å¿«é€Ÿè¿‡æ»¤

æ‚¨å¯ä»¥ä½¿ç”¨`where`å‡½æ•°æ ¹æ®æ¡ä»¶å¿«é€Ÿè¿‡æ»¤æ•°ç»„ã€‚å‡è®¾æ‚¨æœ‰ä¸€ä¸ªè¡¨ç¤ºä¸ºä¸€ç»´æ•°ç»„çš„éŸ³é¢‘ä¿¡å·:

```
# Audio Signal (in Hz)
signal = np.array([23, 50, 900, 12, 1100, 10, 2746, 9, 8])
```

å‡è®¾æ‚¨æƒ³è¦åˆ é™¤`signal`ä¸­æ‰€æœ‰ Hz å°äº 20 çš„å†…å®¹ã€‚è¦åœ¨ NumPy ä¸­æœ‰æ•ˆåœ°åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ‚¨å¯ä»¥ç¼–å†™:

```
# Filter the signal
filtered_signal = np.where(signal >= 20, signal, 0)# Print out the result
print(filtered_signal)
>>> np.array([23, 50, 900, 0, 1100, 0, 2746, 0, 0])
```

`where`å‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°:

*   ç¬¬ä¸€ä¸ªå‚æ•°(åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯`signal >= 20`)ç»™å‡ºäº†æ‚¨æƒ³è¦ç”¨äºè¿‡æ»¤çš„æ¡ä»¶ã€‚
*   ç¬¬äºŒä¸ªå‚æ•°(åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯`signal`)æŒ‡å®šäº†å½“æ¡ä»¶æ»¡è¶³æ—¶ä½ å¸Œæœ›å‘ç”Ÿä»€ä¹ˆã€‚
*   ç¬¬ä¸‰ä¸ªå‚æ•°(åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯`0`)æŒ‡å®šäº†å½“æ¡ä»¶ä¸æ»¡è¶³æ—¶æ‚¨å¸Œæœ›å‘ç”Ÿä»€ä¹ˆã€‚

ä½œä¸ºç¬¬äºŒä¸ªä¾‹å­ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªæ•°ç»„`high-pitch`æŒ‡ç¤ºå£°éŸ³çš„éŸ³é«˜æ˜¯å¦åº”è¯¥æé«˜:

```
# Audio Signal (in Hz)
signal = np.array([23, 50, 900, 760, 12])# Rasing pitch
high_pitch = np.array([True, False, True, True, False])
```

æ¯å½“ç›¸åº”çš„`high-pitch`å˜é‡è¿™ä¹ˆè¯´æ—¶ï¼Œè¦æé«˜`signal`çš„éŸ³è°ƒï¼Œæ‚¨å¯ä»¥ç®€å•åœ°å†™:

```
# Creating a high-pitch signal
high_pitch_signal = np.where(high_pitch, signal + 1000, signal)# Printing out the result
print(high_pitch_signal)
>>> np.array([1023, 50, 1900, 1760, 12])
```

é‚£å¾ˆå®¹æ˜“ğŸ˜ƒ

# 2â€”â€”é‡å¡‘è‡ªæˆ‘ï¼Œæ‘†è„±å›°å¢ƒ

é€šå¸¸ï¼Œä¸€ä¸ªæ•°ç»„çš„å…ƒç´ æ˜¯æ­£ç¡®çš„ï¼Œä½†å½¢å¼æ˜¯é”™è¯¯çš„ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œå‡è®¾æ‚¨æœ‰ä»¥ä¸‹ä¸€ç»´æ•°ç»„:

```
my_array = np.array([5, 3, 17, 4, 3])print(my_array.shape)
>>> (5,)
```

è¿™é‡Œä½ å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ•°ç»„æ˜¯ä¸€ç»´çš„ã€‚æ‚¨æƒ³å°†`my_array`è¾“å…¥åˆ°å¦ä¸€ä¸ªéœ€è¦äºŒç»´è¾“å…¥çš„å‡½æ•°ä¸­å—ï¼Ÿåœ¨ Scikit-Learn è¿™æ ·çš„åº“ä¸­ï¼Œè¿™ç§æƒ…å†µç»å¸¸å‘ç”Ÿã€‚ä¸ºæ­¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`reshape`åŠŸèƒ½:

```
my_array = np.array([5, 3, 17, 4, 3]).reshape(5, 1)print(my_array.shape)
>>> (5, 1)
```

ç°åœ¨`my_array`æ˜¯æ°å½“çš„äºŒç»´ã€‚ä½ å¯ä»¥æŠŠ`my_array`æƒ³è±¡æˆä¸€ä¸ªäº”è¡Œå•åˆ—çš„çŸ©é˜µã€‚

å¦‚æœä½ æƒ³å›åˆ°ä¸€ç»´ï¼Œé‚£ä¹ˆä½ å¯ä»¥å†™:

```
my_array = my_array.reshape(5)print(my_array.shape)
>>> (5,)
```

> **ä¸“ä¸šæç¤º:**ç®€å•æ¥è¯´ï¼Œä½ å¯ä»¥ä½¿ç”¨ NumPy å‡½æ•°`squeeze`åˆ é™¤æ‰€æœ‰é•¿åº¦ä¸º 1 çš„ç»´åº¦ã€‚å› æ­¤ï¼Œä½ å¯ä»¥ä½¿ç”¨`squeeze`å‡½æ•°ä»£æ›¿ä¸Šé¢çš„`reshape`å‡½æ•°ã€‚

# 3-é‡ç»„ä½ çš„å½¢çŠ¶

ä½ æœ‰æ—¶éœ€è¦é‡ç»„ä½ å·²ç»æ‹¥æœ‰çš„ç»´åº¦ã€‚ä¸€ä¸ªä¾‹å­å¯ä»¥è¯´æ˜è¿™ä¸€ç‚¹:

å‡è®¾æ‚¨å°†ä¸€ä¸ªå¤§å°ä¸º 1280x720(è¿™æ˜¯ YouTube ç¼©ç•¥å›¾çš„å¤§å°)çš„ RGB å›¾åƒè¡¨ç¤ºä¸ºä¸€ä¸ªåä¸º`my_image`çš„ NumPy æ•°ç»„ã€‚ä½ çš„å›¾åƒæœ‰å½¢çŠ¶`(720, 1280, 3)`ã€‚æ•°å­— 3 æ¥æºäºè¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œå³æœ‰ 3 ä¸ªé¢œè‰²é€šé“:çº¢è‰²ã€ç»¿è‰²å’Œè“è‰²ã€‚

å¦‚ä½•é‡æ–°æ’åˆ—`my_image`ä»¥ä½¿ RGB é€šé“å¡«å……ç¬¬ä¸€ç»´ï¼Ÿæ‚¨å¯ä»¥é€šè¿‡`moveaxis`åŠŸèƒ½è½»æ¾å®ç°:

```
restructured = np.moveaxis(my_image, [0, 1, 2], [2, 0, 1])print(restrctured.shape)
>>> (3, 720, 1280)
```

é€šè¿‡è¿™ä¸ªç®€å•çš„å‘½ä»¤ï¼Œæ‚¨å·²ç»é‡æ„äº†å›¾åƒã€‚`moveaxis`ä¸­çš„ä¸¤ä¸ªåˆ—è¡¨æŒ‡å®šäº†è½´çš„æºä½ç½®å’Œç›®çš„ä½ç½®ã€‚

> **Pro æç¤º:** NumPy è¿˜æœ‰å…¶ä»–å‡½æ•°ï¼Œæ¯”å¦‚`swapaxes`å’Œ`transpose`ï¼Œå®ƒä»¬ä¹Ÿå¤„ç†æ•°ç»„çš„é‡æ„ã€‚`moveaxis`å‡½æ•°æ˜¯æœ€é€šç”¨çš„ï¼Œä¹Ÿæ˜¯æˆ‘ç”¨å¾—æœ€å¤šçš„ä¸€ä¸ªã€‚

## ä¸ºä»€ä¹ˆé‡å¡‘å’Œé‡ç»„ä¸ä¸€æ ·ï¼Ÿ

![](img/d75aa39d85186043dadcd74c928cd2ea.png)

ç…§ç‰‡ç”±[æ™®é‡Œè¥¿æ‹‰Â·æœÂ·æ™®é‡Œå…¹](https://unsplash.com/@priscilladupreez?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) æ‹æ‘„

å¾ˆå¤šäººè®¤ä¸ºç”¨`reshape`åŠŸèƒ½æ•´å½¢å’Œç”¨`moveaxis`åŠŸèƒ½é‡ç»„æ˜¯ä¸€æ ·çš„ã€‚ç„¶è€Œï¼Œå®ƒä»¬ä»¥ä¸åŒçš„æ–¹å¼å·¥ä½œğŸ˜¦

æœ€å¥½çš„æ–¹æ³•æ˜¯ç”¨ä¸€ä¸ªä¾‹å­:å‡è®¾ä½ æœ‰çŸ©é˜µ:

```
matrix = np.array([[1, 2], [3, 4], [5, 6]])# The matrix looks like this:
1 2
3 4
5 6
```

å¦‚æœæ‚¨ä½¿ç”¨`moveaxis`åŠŸèƒ½åˆ‡æ¢ä¸¤ä¸ªè½´ï¼Œé‚£ä¹ˆæ‚¨ä¼šå¾—åˆ°:

```
restructured_matrix = np.moveaxis(matrix, [0, 1], [1, 0])# The restructured matrix looks like this:
1 3 5
2 4 6
```

ç„¶è€Œï¼Œå¦‚æœæ‚¨ä½¿ç”¨`reshape`å‡½æ•°ï¼Œé‚£ä¹ˆæ‚¨ä¼šå¾—åˆ°:

```
reshaped_matrix = matrix.reshape(2, 3)# The reshaped matrix looks like this:
1 2 3
4 5 6
```

`reshape`å‡½æ•°åªæ˜¯æŒ‰è¡Œå¤„ç†ï¼Œå¹¶åœ¨é€‚å½“çš„æ—¶å€™ç”Ÿæˆæ–°è¡Œã€‚

# 4 â€”å¯»æ‰¾ç‹¬ç‰¹çš„ä»·å€¼

`unique`å‡½æ•°æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å®ç”¨å‡½æ•°ï¼Œç”¨äºæŸ¥æ‰¾æ•°ç»„çš„å”¯ä¸€å…ƒç´ ã€‚å‡è®¾æ‚¨æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œä»£è¡¨ä»æ°‘æ„è°ƒæŸ¥ä¸­æŠ½å–çš„äººä»¬æœ€å–œæ¬¢çš„åŸå¸‚:

```
# Favorite cities
cities = np.array(["Paris", "London", "Vienna", "Paris", "Oslo", "London", "Paris"])
```

ç„¶åæ‚¨å¯ä»¥ä½¿ç”¨`unique`å‡½æ•°æ¥è·å–æ•°ç»„`cities`ä¸­çš„å”¯ä¸€å€¼:

```
unique_cities = np.unique(cities)print(unique_cities)
>>> ['London' 'Oslo' 'Paris' 'Vienna']
```

è¯·æ³¨æ„ï¼Œç‹¬ç‰¹çš„åŸå¸‚ä¸ä¸€å®šæŒ‰ç…§å®ƒä»¬æœ€åˆå‡ºç°çš„é¡ºåºæ’åˆ—(ä¾‹å¦‚ï¼Œå¥¥æ–¯é™†åœ¨å·´é»ä¹‹å‰)ã€‚

æœ‰äº†æ°‘è°ƒï¼Œç”»æŸ±çŠ¶å›¾çœŸçš„å¾ˆå¸¸è§ã€‚åœ¨è¿™äº›å›¾è¡¨ä¸­ï¼Œç±»åˆ«æ˜¯æŠ•ç¥¨é€‰é¡¹ï¼Œè€Œæ¡å½¢çš„é«˜åº¦ä»£è¡¨æ¯ä¸ªé€‰é¡¹è·å¾—çš„ç¥¨æ•°ã€‚è¦è·å¾—è¿™äº›ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å¯é€‰å‚æ•°`return_counts`,å¦‚ä¸‹æ‰€ç¤º:

```
unique_cities, counts = np.unique(cities, return_counts=True)print(unique_cities)
>>> ['London' 'Oslo' 'Paris' 'Vienna']print(counts)
>>> [2 1 3 1]
```

`unique`å‡½æ•°å¯ä»¥è®©ä½ é¿å…ç¼–å†™è®¸å¤šçƒ¦äººçš„å¾ªç¯ğŸ˜

# 5-ç»„åˆæ•°ç»„

æœ‰æ—¶ï¼Œæ‚¨ä¼šåŒæ—¶ä½¿ç”¨è®¸å¤šé˜µåˆ—ã€‚é‚£ä¹ˆå°†é˜µåˆ—ç»„åˆæˆå•ä¸ªâ€œä¸»â€é˜µåˆ—é€šå¸¸æ˜¯æ–¹ä¾¿çš„ã€‚åœ¨ NumPy ä¸­ä½¿ç”¨`concatenate`å‡½æ•°å¾ˆå®¹æ˜“åšåˆ°è¿™ä¸€ç‚¹ã€‚

å‡è®¾æ‚¨æœ‰ä¸¤ä¸ªä¸€ç»´æ•°ç»„:

```
array1 = np.arange(10)
array2 = np.arange(10, 20)
```

ç„¶åæ‚¨å¯ä»¥ç”¨`concatenate`å°†å®ƒä»¬ç»„åˆæˆä¸€ä¸ªæ›´é•¿çš„ä¸€ç»´æ•°ç»„:

```
# Need to put the arrays into a tuple
long_array = np.concatenate((array1, array2))print(long_array)
>>> [0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19]
```

## ç»„åˆæˆ‘ä»¬çš„å·¥å…·

å¦‚æœæ‚¨æƒ³å°†`array1`å’Œ`array2`å †å åœ¨å½¼æ­¤çš„é¡¶éƒ¨ä¼šæ€ä¹ˆæ ·ï¼Ÿå› æ­¤ï¼Œæ‚¨å¸Œæœ›åˆ›å»ºä¸€ä¸ªäºŒç»´å‘é‡ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
[[ 0  1  2  3  4  5  6  7  8  9]
 [10 11 12 13 14 15 16 17 18 19]]
```

ä½ å¯ä»¥å…ˆç”¨`reshape`å‡½æ•°å°†`array1`å’Œ`array2`æ•´å½¢ä¸ºäºŒç»´æ•°ç»„:

```
array1 = array1.reshape(10, 1)
array2 = array2.reshape(10, 1)
```

ç°åœ¨æ‚¨å¯ä»¥ä½¿ç”¨`concatenate`å‡½æ•°ä¸­å¯é€‰çš„`axis`å‚æ•°æ¥æ­£ç¡®ç»„åˆå®ƒä»¬:

```
stacked_array = np.concatenate((array1, array2), axis=1)print(stacked_array)
>>> 
[[ 0 10]
 [ 1 11]
 [ 2 12]
 [ 3 13]
 [ 4 14]
 [ 5 15]
 [ 6 16]
 [ 7 17]
 [ 8 18]
 [ 9 19]]
```

å·®ä¸å¤šäº†â€¦ç°åœ¨æ‚¨å¯ä»¥ä½¿ç”¨`moveaxis`åŠŸèƒ½æ¥å®Œæˆå·¥ä½œ:

```
stacked_array = np.moveaxis(stacked_array, [0, 1], [1, 0])print(stacked_array)
>>> 
[[ 0  1  2  3  4  5  6  7  8  9]
 [10 11 12 13 14 15 16 17 18 19]]
```

![](img/2c212522cd5675ae8c4cded71cb49d8b.png)

ç…§ç‰‡ç”± [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šçš„ [Japheth æ¡…æ†](https://unsplash.com/@japhethmast?utm_source=medium&utm_medium=referral)æ‹æ‘„

å‰å®³ï¼æˆ‘å¸Œæœ›è¿™ä¸ªä¾‹å­å‘æ‚¨å±•ç¤ºäº†æ‚¨åˆšåˆšå­¦åˆ°çš„ä¸€äº›ä¸åŒçš„å·¥å…·æ˜¯å¦‚ä½•ç»„åˆåœ¨ä¸€èµ·çš„ã€‚

# åŒ…æ‰

ç°åœ¨ï¼Œæ‚¨åº”è¯¥å¯¹åœ¨ä¸€äº›æ£˜æ‰‹çš„æƒ…å†µä¸‹ä½¿ç”¨ NumPy æ„Ÿåˆ°æ»¡æ„äº†ã€‚å¦‚æœæ‚¨éœ€è¦äº†è§£æ›´å¤šå…³äº NumPy çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆè¯·æŸ¥çœ‹ NumPy æ–‡æ¡£ã€‚

**å–œæ¬¢æˆ‘å†™çš„ï¼Ÿ**æŸ¥çœ‹æˆ‘çš„åšå®¢æ–‡ç« [ç±»å‹æç¤º](/modernize-your-sinful-python-code-with-beautiful-type-hints-4e72e98f6bf1)ã€[é»‘è‰²æ ¼å¼](/tired-of-pointless-discussions-on-code-formatting-a-simple-solution-exists-af11ea442bdc)ã€Python ä¸­çš„[ä¸‹åˆ’çº¿](https://medium.com/geekculture/master-the-5-ways-to-use-underscores-in-python-cfcc7fa53734)å’Œ [5 å­—å…¸æç¤º](/5-expert-tips-to-skyrocket-your-dictionary-skills-in-python-1cf54b7d920d)äº†è§£æ›´å¤š Python å†…å®¹ã€‚å¦‚æœä½ å¯¹æ•°æ®ç§‘å­¦ã€ç¼–ç¨‹æˆ–ä»»ä½•ä»‹äºä¸¤è€…ä¹‹é—´çš„ä¸œè¥¿æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆè¯·éšæ„åœ¨ LinkedIn ä¸ŠåŠ æˆ‘ï¼Œå¹¶å‘âœ‹é—®å¥½