# Jupyter 笔记本与 Dataiku DSS 在数据科学领域的对比

> 原文：<https://towardsdatascience.com/jupyter-notebooks-versus-dataiku-dss-for-data-science-e02264a753ca?source=collection_archive---------12----------------------->

## 体验下一代企业人工智能——无需编码！

![](img/9f164211a64905c1301a70a99eda1d25.png)

图片作者。在 Adobe Illustrator 中创建。

这篇文章可能会引起一些读者的兴趣:

*   数据科学家好奇**数据库**；
*   应用**数据科学&机器学习**的学生；
*   学 **Python** 的人。

Jupyter Notebooks 多年来一直是数据科学原型开发的事实工具，但是需要一定水平的 Python 编码和数据科学经验。

[Dataiku](https://www.dataiku.com/) 的数据科学工作室(DSS)平台为数据准备提供了简单易用的*可视化方法*以及一套 AutoML 功能。非编码人员可以导入和清理数据，训练 ML 模型并将其投入生产——所有这些都在 GUI 环境中完成，无需编写任何代码。

这可能是好的，也可能是坏的，但我会把它留到以后再说。

总体而言，像 Dataiku DSS 这样的平台已经在企业层面上极大地普及了数据分析和机器学习。这与微软 Windows 在多年的基于外壳的 MS-DOS 之后向大众开放个人计算没有什么不同。

Dataiku 现在是一家价值超过 10 亿美元的独角兽创业公司，由一个投资者集团支持，包括谷歌的风险投资部门 CapitalG。

我经常在个人和专业数据科学工作中使用 Jupyter，在一家大型金融服务公司的工作中使用 Dataiku。

为了保持这种品味测试比较的简洁和集中，我们将在数据科学工作流程中对一个分类问题进行一些标准步骤。

1.  **问题表述**
2.  **导入数据**
3.  **探索性数据分析(EDA)**
4.  **数据准备**
5.  **特色工程**
6.  **造型**
7.  **部署**

我们将使用众所周知的**泰坦尼克号数据集**，它可以在 [Kaggle](https://www.kaggle.com/c/titanic) 上找到。这里可以下载[免费版的 Dataiku。Jupyter Labs &笔记本的最新版本是](https://www.dataiku.com/product/get-started/)[这里是](https://www.anaconda.com/products/individual)。

加入 Medium [这里](https://col-jung.medium.com/membership)并获得**无限制访问**互联网上最好的数据科学文章。

# 1.阐明一个问题

您的数据科学分析应该由明确的目标或问题驱动。

在工业界，数据科学家的大部分时间都花在了澄清业务问题、获取正确的数据以及为建模做准备上。

这是一个与泰坦尼克号数据集相关的商业问题的例子:

> "作为白星公司的公关主管，我需要不惜一切代价阻止死亡."

白星航运公司是泰坦尼克号的所有者。像这样的问题陈述意味着我们希望用目标变量**乘客存活率**训练一个**高精度**模型。

高精度模型将假阳性预测(1 型错误)降至最低，而高召回模型将假阴性(2 型错误)降至最低。

对于泰坦尼克号来说，预测一名乘客将会在**中幸存而预测错误**是不可接受的，无论是从伦理上还是从专业上来说都是如此——因此需要最大限度地提高精确度而不是回忆。

我在这里写了一篇关于流行的 ML 度量标准的文章。

这是另一个商业问题的例子:

> "我想找出在泰坦尼克号上幸存的最重要的因素."

在这种情况下，我们对模型训练和验证后的**特性重要性列表**更感兴趣。

# 2.导入数据

## Jupyter 笔记本

我们通常从导入一些标准的 Python 数据科学包开始。

![](img/4b4005858bf51e8dfa6f6252781abb19.png)

然后，我们可以使用 pandas 导入. csv。

![](img/ea0d9146c942f54cf98b10c383bf0b3c.png)

## 大台库决策支持系统

在 DSS 中，我首先创建一个空白的新*项目。*

![](img/25a285f9dd437432610175fb32823fc6.png)

然后，我可以从选项世界中导入数据。

![](img/77a032223d3bc37457e9b1b00257078d.png)

选择**上传文件**后，我现在可以拖放文件，包括我的 titanic_dataset.csv。

![](img/4c1593c258dcde003ee18d4e19909af7.png)

# 3.探索性分析

## Jupyter 笔记本

这是数据的样子。

![](img/ae41032f7f1531a1d0e634ddd84e3f61.png)![](img/2fd03a205c62a4ec579dbbd34366a869.png)

我们有 12 种属性的 891 名乘客。

![](img/5fd748c6f13b2def476af22a702cb915.png)

让我们检查一下数据类型，了解一下每一列的缺失值。

![](img/2fc876384ab49e026f8152546ff203b4.png)

我们的目标变量是**幸存的**。这是我们的机器学习模型将预测的。

从分布来看，我们的数据集有点不平衡，只有 38%的乘客活着出来。

![](img/92c3646efd64f6a50332a2e99872ba0a.png)

极度不平衡的数据集在卫生行业臭名昭著，相对于未受感染的人，受感染的人通常很少。这需要小心使用抽样和仔细选择性能指标。

总之，回到泰坦尼克号。

让我们来看看 7 个数字属性的分布和相关性。

![](img/f82223c1f8467d923947b1dddf4e1480.png)![](img/abccdd3b46a2d8632d4fee17f51b5c58.png)![](img/27d4330ece0813a05c1138e577b4f6e7.png)![](img/6d8a56dcbea331534f715d06e63a9f2f.png)

让我们检查 5 个分类属性中每一个的类的数量。

![](img/a51cbe9cac5319c05ff81dc861234267.png)

*舱*和*票*的数据都是几百班的噪音，很多都是少排的稀缺。

同时，*着手*和*性*各只有几个班。

![](img/8b65455deeb207852f03e7184bdf14d0.png)![](img/17e26aada196f88a98203cede7213e09.png)![](img/d6af5b704d0fadaf4d47804bb2370955.png)

似乎大多数乘客是从南安普顿登机的。

此外，泰坦尼克号的大多数乘客是男性。

那很有趣。那些了解泰坦尼克号命运之旅领域知识的人可能还记得大多数幸存者是女性。

![](img/7d167f3a4742f192281126e004cd7127.png)

这大概是因为我们知道，在争夺有限的救生艇数量时，妇女和儿童得到了优先考虑。

所有这些都意味着我们应该小心。人们可以通过预测所有女性生存而男性死亡来训练一个高精度的模型！

## 大台库决策支持系统

将 csv 拖放到 Dataiku 后，我可以立即在 GUI 环境中研究数据集。

![](img/5db5357eb3b0a040b1e2c8d4c5f45da7.png)

自动标记为红色的位告诉我可能存在数据完整性问题。我还可以很容易地看到哪些行缺少数据。

点击右上角附近的**列视图**按钮，我可以看到我的属性、它们的数据类型以及哪里缺少行。

![](img/effb9faf56c95aa97be19d5a78ea79d4.png)

我可以转到**图表**和**统计数据**选项卡，对我的数据集进行广泛的描述性和可视化分析。

![](img/fb690579d8f6f43e689740456cf415c7.png)

我们可以创建一个**单变量分析**“卡片”，它将显示类似于。hist()和。描述()。

![](img/a3f1fec591ca62f028b83869c62a645f.png)

看起来很棒，不是吗！

![](img/91af0917a87b84b712d33f24c9c7dce4.png)

让我们也创建一个**关联矩阵**卡，在我们的 Jupyter 笔记本中复制 seaborn 关联热图。

![](img/3244fcc42bf61d0540a8a9cebc9866da.png)

你可以在 Dataiku 的 GUI 界面上非常快速地做很多 EDA，这些都不需要编码。

如果你碰巧喜欢编码，Dataiku 提供完整的 Jupyter 笔记本支持。

![](img/1490aa10fcb60acb952b06f51d5de3f4.png)![](img/ae310c5d5ce2a21b9335717022bbc878.png)

# 4.数据准备

## Jupyter 笔记本

回想一下*年龄*、*舱室*和*上船*属性有缺失数据。

![](img/d6b95f03817d41d149ce739a8795c83a.png)

我们来清理一下。我们将用“失踪”替换分类属性*船舱*和*上船*中的“南”。我们将创建一个指示变量来跟踪哪些乘客的*年龄*丢失，同时为算法将这些 NaN 替换为 0。

![](img/16548e58c347fa3142138610237e9059.png)

我们需要为分类变量创建虚拟变量。我还将从我们的特性集中删除*姓名*列，因为所有乘客的姓名都是唯一的。

![](img/2546245762c278e178f89b37b1e4cc2d.png)

请注意，由于 *Cabin* 和 *Ticket* 之间有数百个类，我们的一次热编码使我们的数据集膨胀到超过 800 列。

![](img/a000accef18fbc405c96ed45fec0131c.png)

一般来说，我们应该合并稀疏类，并在每个类中有很多行的分类特性，但是这里我们保持简单。

## 大台库决策支持系统

在 Jupyter 中，我的工作流表现为一个**笔记本**中的一组**单元格**。在 DSS 中，我正在一个**流**上构建一系列**配方**，这是我的逻辑和管道的可视化地图。配方可以是**视觉配方**或**代码配方**。

让我们从一个叫做**准备**的可视化食谱开始。可视化食谱易于使用，不需要编码。它们非常适合非程序员或希望快速原型化想法而无需花费数小时编码的用户。

![](img/9afacd2e2dcbafd942eeae7aa3d3a024.png)

在我最初的**准备食谱**中，我将清理我的分类属性*船舱*和*上船*中缺失的行。请注意，我采取的行动会立即反映在数据集中。太好了！

![](img/a08ec82ed584c2b67445ea3c8c868aa5.png)

接下来我会做一个**代码配方**来清理*年龄*下缺失的行。这正是朱庇特笔记本！

![](img/1b7138a64e4e8757492845bc7bf75a8c.png)

回想一下，最后两个步骤是从数据集中删除*名称*，并为剩余的 4 个分类特征创建虚拟变量。

事实证明，我不必在 Dataiku 内部这样做。

这是因为 Dataiku 自动对 ML 算法的分类特征进行一键编码，我可以在稍后的建模步骤中轻松地打开和关闭这些特征。酷！

好了，到目前为止，我的流程有两个配方:一个**可视化准备配方**清理了我的分类特征，一个**代码 Python 配方**清理了我的数字特征。

![](img/91f420220b2538d436c59c878e689329.png)

# 5.特征工程

## Jupyter 笔记本

更好的数据几乎总是胜过更复杂的算法。从数据中获取更多信息的一种方法是设计新功能。在这里你可以尽情发挥，尤其是如果你有领域专长的话。

在这里，我将设计一个额外的特性 *Total_fam* ，它是给定乘客的亲属总数。这里的假设是，也许一个人带来的家庭规模对他们的生存有影响？

![](img/ae8e8271f9ab3201430a2717dbb078b1.png)

我们现在已经有了一个可以建模的数据集。这被称为**分析基础表(ABT)** 。

## 大台库决策支持系统

在 Dataiku 中，我可以用一个可视化的准备食谱来做到这一点。同样，很高兴我可以看到我的新特征立即反映在数据集中！

![](img/f37fd7cd8feca92e4ef41209798d3653.png)

附加了最新的转换后，我的流现在看起来像这样。

![](img/118db28b97dd50eb6d658e4c1dc709f3.png)

# 6.系统模型化

## Jupyter 笔记本

让我们在泰坦尼克号 ABT 上训练一些常见的分类算法。首先，我们将数据集分成训练集和测试集。

![](img/d8facd46c704d7c47197f3c60ce026d4.png)

然后，我们将设置一些管道对象来同时调整和训练一组模型:**正则化逻辑回归**、**随机森林**和**梯度增强树**。

![](img/339cb0680c68173b57be07d287b4f5dd.png)

培训之后是模型评估。

以下代码输出每个优化算法的各种分类指标的分数。

我在这里写了一个关于流行的 ML 指标的可视化指南。

![](img/f86824c99f521c904bc2ecb02a768bbe.png)

例如，下面是优化的随机森林的输出。

![](img/c56b69cc77bad56b726818aaf31f1ca8.png)

正如文章开头所提到的，预测一名乘客会活下来，如果预测错了，那将是一场灾难。因此，我们希望最小化误报，这相当于最大化**精度**。

我们的随机森林给出了 80%的精确度。具体来说，看看上面的困惑矩阵——在我们的测试集中，我们预测的 13 + 52 = 65 人中有 52 人真的活了下来。

这还不错，但还不够好。如果白星航空公司使用这种模式，他们会导致 20%的乘客死亡！

继续前进。如果我们的首要任务是确定存活率的最高预测值，我们可能会编码出一个排列特征重要性的图。

![](img/4a87173985234522a9edd763a396e265.png)![](img/ef41f1ddfa0117e361c8bf671254510c.png)

正如我们之前推测的那样，乘客的性别是泰坦尼克号上幸存者的一个强有力的预测因素。请注意，我们的工程特征 *Total_fam* 是一个合理的预测器。

正如所料，我们通过对我们的分类变量进行一次性编码获得的数百个稀疏的类特征(对于*小屋*和*车票*)最终只是噪声。

## 大台库决策支持系统

ML 是 DSS 真正闪光的地方。我刚才做的一切都可以通过点击按钮来完成。

![](img/7aad2f77071489aa3a86fcc011f18969.png)

抓住我的 ABT——在这里我称它为 df _ feat _ engineer——我将点击右边的**实验室按钮**。现在让我们在幸存的目标*上创建一些‘快速原型’。*

![](img/641f76f7a436c428f686606b4e811030.png)

Dataiku 马上为你选择一些算法和特性。您可以点击**列车**立即出发。

![](img/9de143602cfee306e12a146b1937b724.png)

深入研究设计，我们可以看到 Dataiku 代表您所做的决定。

它关闭了 *PassengerId* 和 *Name* ，因为这些数据并没有真正给表格带来任何预测能力，只有噪音。

![](img/898b93ebcd7b978f960ff44dd6b0d55f.png)

算法方面，大台库选择了逻辑回归和随机森林。

![](img/8967acc951a5e924b5cb37e3dcff60da.png)

你知道吗，我还会点击渐变提升树和 XGBoost！为什么不呢？

训练完成后，我得到了我的调优模型在各种指标下的表现摘要。例如，GBT 在中华民国得分之下的地区中独占鳌头。

![](img/9fbb62b5dc87c52164b254d3b037afbb.png)

类似于 Jupyter，我可以挖掘找到更多的信息，比如我的混淆矩阵统计和特性重要性。

![](img/8d4db7f000fc372ac7a682d534f6cf9d.png)![](img/51b0dedd35fc21ad5a4a20b0fac23f70.png)

# 7.部署

## Jupyter 笔记本

sklearn 上训练好的模型可以保存为. pkl。

![](img/6bdef3e8b7ec7906881ce8e9092f89a0.png)

个人可以利用这一点在批量运行的基础上对新数据进行评分，或者机器学习工程师可以将其插入更大组织的自动化生产流水线。

## 大台库决策支持系统

在 Dataiku 中，我可以通过点击右上角的 **Deploy** 将任何训练好的模型部署到我的流中。

![](img/fe618123e51acc4fb025949887fb0ed1.png)

然后，我可以使用该模型对导入到*项目*的任何新数据集进行评分。

该项目本身可以作为 Dataiku 捆绑包导出，并由机器学习工程师投入生产环境。

目前，我们的团队正在设计一个 Dataiku 生产路径，该路径将允许整个组织的用户在 Dataiku 中构建原型，然后通过点击按钮将其模型部署到我们的 Hadoop 大数据集群中。

令人兴奋的东西！

在 YouTube 和 Twitter 上关注我。

# 无限制媒体访问

提升你的知识和技能到一个新的水平。

[加入 Medium](https://col-jung.medium.com/membership) 享受**无限制访问**互联网上的**最佳分析&数据科学文章**。你可以在这里加入[支持我和其他顶级作家。](https://col-jung.medium.com/membership)

# 我的数据科学文章

*   微分方程与机器学习——此处[为](https://medium.com/swlh/differential-equations-versus-machine-learning-78c3c0615055)
*   新冠肺炎的数学建模与机器学习— [此处](https://medium.com/swlh/math-modelling-and-machine-learning-for-covid-19-646efcbe024e)
*   回归预测房价— [此处](/predict-house-prices-with-machine-learning-5b475db4e1e)
*   分类预测员工流失— [此处](/will-your-employee-leave-a-machine-learning-model-8484c2a6663ea)
*   流行的机器学习性能指标— [此处](/popular-machine-learning-performance-metrics-a2c33408f29)
*   Jupyter 笔记本与 Dataiku DSS — [此处](/jupyter-notebooks-versus-dataiku-dss-for-data-science-e02264a753ca)
*   Power BI —从数据建模到令人惊叹的报告— [此处](/intro-to-power-bi-from-data-modelling-to-stunning-reports-b34aac43d8a1)