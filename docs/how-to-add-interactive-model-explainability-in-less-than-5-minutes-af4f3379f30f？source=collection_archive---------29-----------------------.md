# å¦‚ä½•åœ¨ä¸åˆ° 5 åˆ†é’Ÿçš„æ—¶é—´å†…å¢åŠ äº¤äº’å¼æ¨¡å‹çš„å¯è§£é‡Šæ€§

> åŸæ–‡ï¼š<https://towardsdatascience.com/how-to-add-interactive-model-explainability-in-less-than-5-minutes-af4f3379f30f?source=collection_archive---------29----------------------->

## è®© shapash python åŒ…ä¸ºæ‚¨å®Œæˆè¿™é¡¹å·¥ä½œ

![](img/eb53773065889eb3dea688e9c0f910e6.png)

ä½œè€… gif

## ä¸è¦åœ¨æ²¡æœ‰å‡†å¤‡å¥½çš„æƒ…å†µä¸‹å‚åŠ ä¸‹ä¸€æ¬¡æ¼”ç¤º

ç†è§£ä½ çš„æ¨¡å‹åœ¨åšä»€ä¹ˆæ˜¯éå¸¸é‡è¦çš„ã€‚è¯„ä¼°æ¨¡å‹çš„ä¿¡æ¯è¶Šå¤šï¼Œå¯¹æ¨¡å‹çš„è°ƒæ•´å°±è¶Šå¥½ã€‚å³ä½¿ä½ å¯¹ç®—æ³•çš„å†…éƒ¨è¿ä½œæœ‰æ·±åˆ»çš„ç†è§£ï¼Œä½ çš„å•†ä¸šä¼™ä¼´ä¹Ÿä¸äº†è§£ã€‚ä½ éœ€è¦èƒ½å¤Ÿç”ŸåŠ¨æœ‰è¶£åœ°å±•ç¤ºä½ çš„å‘ç°ã€‚

æœ‰æ—¶ï¼Œä¸šåŠ¡åˆä½œä¼™ä¼´æœ‰æ›´å¤šçš„ä¸»é¢˜ä¸“ä¸šçŸ¥è¯†ï¼Œå¯èƒ½æœ‰åŠ©äºæä¾›ç‰¹æ€§ä¸Šä¸‹æ–‡ã€‚å¦‚æœä»–ä»¬çœŸçš„ç†è§£ä½ ä¼ è¾¾çš„å†…å®¹ï¼Œä»–ä»¬å¯ä»¥å¸®åŠ©ä½ è¿›ä¸€æ­¥è°ƒæ•´æ¨¡å‹ã€‚

æˆ‘å¬åˆ°çš„æœ€å¸¸è§çš„é—®é¢˜ä¹‹ä¸€æ˜¯ï¼Œâ€œä»€ä¹ˆæ•°æ®è¿›å…¥æ¨¡å‹ï¼Ÿâ€å“ªä¸ªç¿»è¯‘æˆ"*å“ªä¸ªç‰¹æ€§æœ€é‡è¦ï¼Ÿ*â€ã€‚ä½ éœ€è¦å‡†å¤‡å¥½ä»¥ä»–ä»¬èƒ½ç†è§£çš„æ–¹å¼å›ç­”è¿™ä¸ªé—®é¢˜ã€‚Shapash æä¾›äº†ä¸€äº›æœ‰è¶£çš„è¾“å‡ºï¼Œå¯èƒ½æœ‰åŠ©äºæ‚¨é€šçŸ¥æ‚¨çš„å—ä¼—ã€‚

## ä¸ºä»€ä¹ˆè¦å°è¯• shapashï¼Ÿ

æˆ‘æ€»æ˜¯åœ¨å¯»æ‰¾æœ‰è¶£çš„åŒ…æ¥ç”¨äºæˆ‘çš„æ—¥å¸¸å·¥ä½œï¼Œæˆ‘é‡åˆ°äº† shapashã€‚å¦‚æœä½ äº†è§£æˆ‘ï¼Œä½ çŸ¥é“æˆ‘ä¸å–œæ¬¢äº‰è®ºã€‚è¯¥è½¯ä»¶åŒ…å¿…é¡»æ˜“äºä½¿ç”¨ï¼Œå¦åˆ™å®ƒæ²¡æœ‰æœºä¼šå¿«é€ŸéªŒè¯æ¦‚å¿µã€‚ä»…ä»…å‡ è¡Œä»£ç å°±ä¸ºæ‚¨çš„æ¨¡å‹è„šæœ¬å¢åŠ äº†äº¤äº’å¼å’Œç±»ä¼¼æŠ¥å‘Šçš„å¯è§£é‡Šæ€§ã€‚

æˆ‘è®¤ä¸ºè¿™æ˜¯å®Œå…¨å€¼å¾—ä½ èŠ±æ—¶é—´å»çœ‹çœ‹è¿™ä¸ªåŒ…å’Œå®ƒçš„äº§å“ã€‚è®¾ç½®å¾ˆç®€å•(è®°ä½ï¼Œæˆ‘ä¸å¤ªå–œæ¬¢éº»çƒ¦)ã€‚æˆ‘åœ¨ä¸‹é¢è¯¦è¿°äº†è¿™äº›æ­¥éª¤ã€‚

## è£…ç½®

ä¸€å¦‚æ—¢å¾€ï¼Œå»ºè®®æ‚¨åˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒã€‚æˆ‘åœ¨ä¸‹é¢çš„å‚è€ƒèµ„æ–™éƒ¨åˆ†åŒ…å«äº†å®‰è£…è¿‡ç¨‹çš„é“¾æ¥ã€‚å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ Jupyterï¼Œæ‰€ä»¥æˆ‘åªéœ€è¦å®‰è£… ipywidgets(å¹¶å¯ç”¨)å’Œ shapashã€‚

## **æ·»åŠ è¿™ä¸ªç®€å•çš„ä»£ç å—ã€‚**

åœ¨è®­ç»ƒå®Œæ¨¡å‹(åœ¨æœ¬ä¾‹ä¸­ä¸ºâ€œå›å½’å™¨â€)ä¹‹åï¼Œæ·»åŠ ä¸€ä¸ªç®€å•çš„ä»£ç å—æ¥ç¼–è¯‘å’Œæ‰§è¡Œ SmartExplainerã€‚æœ¬æ–‡åé¢é™„æœ‰å®Œæ•´çš„ç¤ºä¾‹ä»£ç ã€‚

```
from shapash.explainer.smart_explainer import SmartExplainer
# shapash Step 1: Declare SmartExplainer Object
xpl = SmartExplainer()# shapash Step 2: Compile Model, Dataset, Encoders
xpl.compile(    x=Xtest,    
                model=regressor,    
                preprocessing=encoder, #optional
                y_pred=y_pred) # shapash Step 3: Display interactive output
app = xpl.run_app()
```

## **è¿è¡Œä»£ç **

æ‚¨åº”è¯¥ä»æ•°æ®è·å–ã€ç‰¹å¾å·¥ç¨‹å’Œæ¨¡å‹è®­ç»ƒåˆ°æ¨¡å‹è¯„åˆ†æ¥è¿è¡Œæ‚¨çš„ä»£ç ã€‚æ¥ä¸‹æ¥ï¼Œå½“æ‚¨æ‰§è¡Œ run_app()æ—¶ï¼Œå°†æ˜¾ç¤ºä¸€ä¸ªåº”ç”¨ç¨‹åºé“¾æ¥ã€‚

![](img/76fb0524e2b45941a2eb97c1266bf5e5.png)

ä½œè€…æˆªå›¾

åªéœ€å•å‡»è¯¥é“¾æ¥ï¼Œæ‰“å¼€ä¸€ä¸ªå¸¦æœ‰æ‚¨çš„è¾“å‡ºçš„æµè§ˆå™¨çª—å£ã€‚æ‚¨å°†èƒ½å¤Ÿæµè§ˆå„ç§å¯è§†åŒ–æ•ˆæœã€‚

![](img/642a7dc10ef7006656ea1af19bd6229b.png)

shapash app â€”ä½œè€… gif

## å¥–åŠ±â€”ç”Ÿæˆ HTML æŠ¥å‘Šçš„ä»£ç ç‰‡æ®µ

å½“æ‚¨æƒ³è¦ä¸åŒäº‹å…±äº«å‘ç°æ—¶ï¼Œæ‚¨å¯ä»¥ç”Ÿæˆ HTML æŠ¥å‘Šæ¥å…±äº«ã€‚

```
# Step 4: Generate the Shapash Report
xpl.generate_report(
        output_file='medium_spending_scores_report2.html',
        project_info_file='shapash_project_info.yml',
        x_train=Xtrain,
        y_train=ytrain,
        y_test=ytest,
        title_story="Spending Scores Report",
        title_description="""This is just an easy sample.
            It was generated using the Shapash library.""",
        metrics=[
            {
                'path': 'sklearn.metrics.mean_absolute_error',
                'name': 'Mean absolute error',
            }])
```

![](img/e83ba56b23af34625c95b91f615f34fe.png)

HTML æŠ¥å‘Šâ€”â€”éå¸¸å¥½ã€‚ä½œè€… gif

## **å®Œæ•´ç¤ºä¾‹ä»£ç **

Jupyter ç¬”è®°æœ¬å’Œæ–‡ä»¶:

[](https://github.com/dmoyer22/simple_shapash_example) [## GitHub-dmoyer 22/Simple _ shapash _ example:äº¤äº’å¼æ¨¡å‹å¯è§£é‡Šæ€§çš„ç®€å•ç¤ºä¾‹ï¼Œä½¿ç”¨â€¦

### ä½¿ç”¨ shapash-GitHub-dmoyer 22/Simple _ shapash _ example çš„äº¤äº’å¼æ¨¡å‹å¯è§£é‡Šæ€§çš„ç®€å•ç¤ºä¾‹:ç®€å•â€¦

github.com](https://github.com/dmoyer22/simple_shapash_example) 

ã€‚py ç‰ˆæœ¬:

## **å‚è€ƒæ–‡çŒ®**

[](https://github.com/MAIF/shapash) [## GitHub-MAIF/æ²™å¸•ä»€:ğŸ”…Shapash ä½¿æœºå™¨å­¦ä¹ æ¨¡å‹å˜å¾—é€æ˜å’Œå¯ç†è§£ï¼Œé€šè¿‡â€¦

### ç‰ˆæœ¬æ–°åŠŸèƒ½æè¿°æ•™ç¨‹ 1.4.x åŠŸèƒ½ç»„æ¼”ç¤ºæ‚¨ç°åœ¨å¯ä»¥é‡æ–°ç»„åˆå…·æœ‰ç›¸åŒåŠŸèƒ½çš„åŠŸèƒ½â€¦

github.com](https://github.com/MAIF/shapash) [](https://shapash.readthedocs.io/en/latest/installation-instructions/index.html) [## å®‰è£…è¯´æ˜- Shapash 1.4.4 æ–‡ä»¶

### å¤§å¤šæ•°æ—¶å€™ï¼Œå®‰è£… ipywidgets ä¼šè‡ªåŠ¨é…ç½® Jupyter Notebook ä½¿ç”¨å°éƒ¨ä»¶ã€‚ipywidgetsâ€¦

shapash.readthedocs.io](https://shapash.readthedocs.io/en/latest/installation-instructions/index.html) 

## ç»“è®º

æˆ‘è®¤ä¸º shapash åœ¨æ¨¡å‹å¯è§£é‡Šæ€§å·¥å…·ç®±ä¸­æœ‰ä¸€å¸­ä¹‹åœ°ã€‚å¦‚æœä½ ä¸èƒ½å‘éæŠ€æœ¯åŒäº‹è§£é‡Šä½ çš„å·¥ä½œï¼Œä½ çš„ç»“æœå¯èƒ½ä¼šè¢«å¿½è§†ã€‚æ²¡æœ‰äººå¸Œæœ›è¿™ç§æƒ…å†µå‘ç”Ÿã€‚

æˆ‘çœ‹åˆ°çš„åœ¨å·¥ä½œåœºæ‰€æ¨è¿›å…¶æ•°æ®ç§‘å­¦èŒä¸šç”Ÿæ¶¯çš„äººï¼Œæ˜¯é‚£äº›æ¼”è®²ç²¾å½©å¹¶ç›´æ¥é¢å‘ç‰¹å®šå—ä¼—çš„äººã€‚æ‰€ä»¥ï¼Œç…§å§ï¼