# 作为数据工程师管理数据—第 3 部分:关键原则和经验教训

> 原文：<https://towardsdatascience.com/managing-data-as-a-data-engineer-part-3-key-principles-lessons-learnt-920d9ebead1d?source=collection_archive---------39----------------------->

在前两篇文章中，我们已经了解了[用户如何查看数据](/managing-data-as-a-data-engineer-part-1-understanding-users-61bc88461d92)以及[数据如何随时间变化](/managing-data-as-a-data-engineer-part-2-understanding-data-changes-b3d23f1fef16)。在**作为数据工程师管理数据**系列的第 3 部分中，我将分享作为数据工程师管理数据时的一些关键原则和经验教训。

# 不要盲目

为了管理不断变化的数据范围，首先要做的事情之一就是不要在黑暗中工作。由于各种原因，数据会随着时间发生变化，这些变化可能会以不同的方式破坏系统。能够监控系统中的数据流并确保它们按预期工作是很重要的。

为了不盲目，首先，我们定义一组度量数据系统的指标。可以测量的一些示例度量是仓库健康度量，例如 CPU 负载、内存负载、到仓库的连接数、查询队列时间的持续时间和存储容量。此外，其他指标，如数据的“新鲜度”、列中 NULL 值的数量和重复行的数量，都是数据系统是否健康的非常有用的指标。

使用我们确定的指标，我们可以设置基线来确定我们定义的“健康”是什么。然后，可以通过建立警报系统，在意外发生时自动通知利益相关方，来实施监控。这允许立即关注并迅速采取补救措施。

将警报反馈给正确的利益相关者也很重要，这样沟通就可以尽可能地顺畅。例如，当产品的数据管道中断时，同一产品的产品经理、数据科学家和数据工程师会一起收到警报。利益相关者列表和警报应该不时地被审查，以便警报总是到达正确的人，而不是被忽略。

有了一个强大的监控系统以及一个有效的利益相关方反馈机制，我们将能够看到数据可用性和可靠性的提高。数据工程师将能够更准确地指导他们的工作，因为排除故障所需的时间更少。这也有助于数据工程师进行容量规划，因为我们可以更好地预测工作负载的变化。

# 应用 80/20 法则

随着公司的发展，数据也呈指数级增长，我们很快发现我们没有足够的资源在所有数据管道上投入同等的精力。80/20 法则可以方便地指导我们的工作，更有效地优化数据系统。

帕累托原则指出，你 20%的活动将会产生 80%的结果。在数据的世界里，我们发现这个原则是成立的。我们观察到的一些例子有:

*   20%的表占用了数据仓库中 80%的存储空间
*   20%的表用于支持 80%的关键业务仪表盘
*   数据仓库中 80%的瓶颈通常是由 20%的查询/工作负载造成的

这个原则对于识别仓库中的瓶颈特别有用，比如释放存储空间和提高查询性能。在进行任何类型的优化工作之前，我们应该始终尝试评估影响的大小。它通常不是最大也不是最复杂的工作，而是最准确的工作，它将对整个系统产生最大的影响。除了瓶颈之外，任何其他地方的优化都是浪费时间。

# 保持简单

作为数据仓库的守护者，组织仓库中的数据以及设计数据权限和用户角色是我们的部分职责。

在日常工作中，随着业务需求的变化或用户加入和离开公司，我们会处理大量的数据创建、数据迁移和数据访问请求。随着公司及其数据的发展，如果数据没有得到很好的组织，即使是授予数据访问权限这样简单的任务也会变得不必要的复杂。这是因为业务用户可能会改变角色，在不同的项目之间切换，并且随着公司产品的成熟，数据用例可能会随着时间而改变。

对于简单的任务，如数据创建和授权数据访问，标准化可以走很长的路。我们不需要十种不同的方式来创建数据资产和授予访问权限。我们只需要一种易于理解的方法，并且可以被管理数据仓库的整个团队所遵循。围绕数据创建的标准化流程有助于减少数据工程师执行任务所需的步骤。它还减少了数据工程师在创建新的数据资产和访问时的认知工作量。

标准化之后，我们可以围绕数据创建和数据访问创建一个流程，然后创建工具来自动化它们。这有助于减少人为错误，并支持审计跟踪。

# 请记住，数据是沉重的

一旦用户开始消费数据，就很难做出改变。随着越来越多的用户使用数据，以及越来越多的应用程序或仪表板使用数据，将会有更多的依赖性。当我们对数据进行更改时，无论是简单地更改列名还是更改数据类型，都有破坏所有数据相关性的风险。这就是为什么数据迁移总是如此缓慢和痛苦。

在消费者使用数据模型之前，最好从一开始就设计和创建数据模型。如果在将数据推送到生产环境后需要进行更改，请在对数据建立更多依赖关系之前尽快进行。对于长期存在的数据资产，最好避免引入对数据的更改，除非不这样做的风险很高并且是绝对必要的。

通常情况下，数据迁移是不可避免的。产品发展如此之快，以至于不可避免地会出现新的需求，甚至需要新的工具来支持这种变化。在这种情况下，当对数据进行更改或旧的数据集被废弃时，与利益相关者的持续沟通非常重要。为您的迁移做好计划，并让您的利益相关者尽可能平稳地完成过渡。

# 建立一个可持续的知识库

人们发现，数据用户实际上花费了超过 50%的时间来发现和理解数据，以确保他们使用的是正确的数据。在创建数据时对其进行记录大有裨益，因为这有助于未来的用户信任和使用这些数据。

这里的关键词是“可持续”。虽然为数据创建文档很重要，但保持文档的活力和更新也同样重要。通常情况下，数据用户使用 Google Sheets 或个人笔记创建自己的数据字典，以便在处理数据时理解数据。然而，这些形式的文档很难与公司的其他部门共享，并且很难维护。

有一些流行的开源工具可以用来创建数据字典。像 [dbt](https://www.getdbt.com/) 这样的工具允许用户使用。yml 文件，并允许用户生成一个 web 静态页面，以便在一个漂亮的网站界面中查看数据字典。Dbt 存储库也可以存储在 git 中进行版本控制，并允许多个数据用户在创建数据模型时轻松协作。

近年来，越来越多的开源项目提供元数据引擎和数据发现解决方案，如[阿蒙森](https://www.amundsen.io/)和[数据中心](https://engineering.linkedin.com/blog/2019/data-hub)。这些工具旨在帮助数据用户记录数据字典和其他元数据。用户还可以使用该工具轻松发现新的和现有的数据集，并在一个地方找到所有相关信息，从而提高他们使用数据的效率。

# 期待改变

尤其是在成长中的初创公司，数据预计会呈指数级增长，我们必须预见到变化。记住这个问题总是好的，如果 X 在未来发生变化，wh *at？*

对于数据系统中重要的移动部分，我们应该使用版本控制工具来集中和跟踪变化。Terraform 等工具有助于将基础设施配置存储为代码，并允许我们将它们存储在 git 存储库中，以便我们可以跟踪对基础设施资源所做的任何更改。dbt 存储库是用于管理数据变更的工具的另一个例子。它帮助我们集中转换后的数据资产，跟踪变更并创建 dbt 数据测试，以确保数据按预期运行。

为了管理由产品变化引起的变化，最好根据业务领域或产品在公司中的结构来组织数据。随着时间的推移，业务用户和角色很容易发生变化，而随着产品的发展，生成的数据总是可以与业务领域联系起来。随着公司和应用的发展，数据的组织方式也需要密切关注。

# 沟通是关键

最后但同样重要的是，尽管这是老生常谈，但沟通是关键。归根结底，只有终端用户和应用程序正确使用数据，数据才能成为有用的信息。将数据视为与公司中的业务用户以及使用您公司产品的最终用户进行交流的一种方式。

业务需求总是在变化的，这些变化会反映在生成的数据中。上下文很重要，仅从生成的数据来看，它的含义通常并不明显。这就是为什么文档对于交流上下文至关重要。

这些是可用工具的一些示例，这些工具可以帮助组织数据、自动化流程，以及有效地向利益相关者传达变更。

*   版本控制:git
*   组织数据模型:dbt，holistics
*   数据文档:Amundsen、dbt、DataHub
*   警报系统:Slack、寻呼机工作、电子邮件、社交网络
*   监控:NewRelic，DataDog，CloudWatch，任何 BI 工具
*   CI/CD: Codefresh、GitLab、Jenkins

沟通是关键无论您是生成应用程序数据的软件工程师、处理数据的数据工程师，还是使用数据的最终用户。对于不同的对应方来说，能够正确理解、使用和反馈数据以创造最佳结果是非常重要的。这将使公司能够制造一流的产品，并为关键决策提供准确的商业见解。我们所有人，而不仅仅是数据工程师，都有责任确保数据管道顺畅运行。

# 结论

好了，这是作为数据工程师管理数据的 3 部分系列**的最后一部分**。如果你错过了前面的文章，这里有这三篇文章的链接:

*   [作为数据工程师管理数据—第 1 部分:了解数据用户](/managing-data-as-a-data-engineer-part-1-understanding-users-61bc88461d92)
*   [作为数据工程师管理数据—第 2 部分:了解数据变化](/managing-data-as-a-data-engineer-part-2-understanding-data-changes-b3d23f1fef16)
*   [作为数据工程师管理数据—第 3 部分:关键原则和经验教训](https://lohmengxin.medium.com/managing-data-as-a-data-engineer-part-3-key-principles-lessons-learnt-920d9ebead1d)

我希望在您踏上数据之旅时，它们会对您有所帮助。感谢阅读！