# ä½¿ç”¨ Flask å’Œ D3.js æ„å»ºäº¤äº’å¼å›¾è¡¨

> åŸæ–‡ï¼š<https://towardsdatascience.com/build-interactive-charts-using-flask-and-d3-js-70f715a76f93?source=collection_archive---------16----------------------->

## ä¸ºç”µå­å•†åŠ¡é”€å”®åˆ†æè®¾è®¡äº¤äº’å¼ D3.js å¯è§†åŒ–ï¼Œå¹¶æ”¯æŒä¸šåŠ¡å†³ç­–

![](img/94156348c0f7d7d4fa3a87468cece4ad.png)

åŠ³æ‹‰Â·ä¹”ä¼Šç‰¹åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

# å¯è§†åŒ–çš„åŠ›é‡

## å¤±æ„çš„å¤©æ‰

æ‚¨æ˜¯ä¸€ä½è‡ªè±ªçš„æ•°æ®ç§‘å­¦å®¶ï¼Œå±•ç¤ºäº†æ‚¨ä½¿ç”¨ä¼˜åŒ–ä»£ç ã€èŠ±å“¨çš„åº“ã€é«˜çº§çº¿æ€§ä»£æ•°å’Œå¤æ‚çš„ç»Ÿè®¡æ¦‚å¿µè®¾è®¡çš„æ–°è§£å†³æ–¹æ¡ˆã€‚

å’Œ[â€¦]

ä¸å‰ä¸€å¤©æ–°å®ä¹ ç”Ÿå±•ç¤ºçš„ç®€å• PowerBI ä»ªè¡¨æ¿ç›¸æ¯”ï¼Œæ‚¨çš„è§£å†³æ–¹æ¡ˆæ²¡æœ‰å¾—åˆ°ç®¡ç†å±‚çš„å…´è¶£ã€è®¤å¯æˆ–çƒ­æƒ…ã€‚

*ä½ é‡åˆ°è¿‡è¿™ç§æŒ«æŠ˜å—ï¼Ÿ*

## ä½ éœ€è¦å‘å±•ä½ çš„è§†è§‰åŒ–æŠ€èƒ½

ç®€å•èŠ±å“¨çš„å¯è§†åŒ–æ¯”éå¸¸å¤æ‚çš„æ¨¡å‹æ›´æœ‰å½±å“åŠ›ï¼Œå°¤å…¶æ˜¯å¯¹éæŠ€æœ¯è§‚ä¼—è€Œè¨€ã€‚

æœ¬æ–‡å°†ç»™ä½ ä¸€ä¸ªåœ¨æ²¡æœ‰ **javascript** *(æˆ–è€…å¾ˆè½»)*çš„å…ˆéªŒçŸ¥è¯†çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ **D3.js** è®¾è®¡*èŠ±å¼*å¯è§†åŒ–çš„èœè°±ã€‚

å…ˆå†³æ¡ä»¶

*   **HTML** çš„åŸºç¡€çŸ¥è¯†
*   **Python** ä¸­çº§çŸ¥è¯†ï¼ŒåŒ…æ‹¬**çƒ§ç“¶æ¡†æ¶**
*   æ‰¾åˆ°ä¸€ä¸ªä½ æƒ³è¦è®¾è®¡çš„å¯è§†åŒ–çš„ä¾‹å­

ğŸ’Œæ–°æ–‡ç« ç›´æ¥å…è´¹æ”¾å…¥ä½ çš„æ”¶ä»¶ç®±:[æ—¶äº‹é€šè®¯](https://www.samirsaci.com/#/portal/signup)

# ä» D3.js çš„ä¾‹å­ä¸­è·å¾—çµæ„Ÿ

## ç¤ºä¾‹:æ‚²æƒ¨ä¸–ç•Œäººç‰©çŸ©é˜µå›¾

ä½ æ­£åœ¨æµè§ˆ[*http://bl.ocks.org*](http://bl.ocks.org/)*/ï¼Œ*ä¸€ä¸ªå¾ˆæ£’çš„ç½‘ç«™æ¥è·å– D3.js çš„æ•™ç¨‹ï¼Œä½ çœ‹ç€**è¿ˆå…‹Â·åšæ–¯æ‰˜å…‹**çš„è¿™ä¸ªçŸ©é˜µå›¾æ‰¾åˆ°äº†çµæ„Ÿã€‚

![](img/b0001f42b48be09b54bdd9ff9d2207cb.png)

ã€Šæ‚²æƒ¨ä¸–ç•Œã€‹åŒç°ï¼Œè¿ˆå…‹Â·åšæ–¯æ‰˜å…‹&è®©Â·ä¸¹å°¼å°”Â·è´¹ç§‘ç‰¹ï¼Œ[é“¾æ¥](https://bost.ocks.org/mike/miserables/)

ã€Šæ‚²æƒ¨ä¸–ç•Œã€‹æ˜¯æ³•å›½è‘—åå†å²å°è¯´ï¼Œä½œè€…ç»´å…‹å¤šÂ·é›¨æœï¼Œå‡ºç‰ˆäº 1862 å¹´ã€‚

è¿™ä¸ªçŸ©é˜µæ˜¾ç¤ºäº†å­—ç¬¦çš„å…±ç°

*   1 ä¸ªå½©è‰²å•å…ƒæ ¼=åŒä¸€ç« ä¸­å‡ºç°çš„ä¸¤ä¸ªå­—ç¬¦
*   æ·±è‰²å•å…ƒæ ¼:å‡ºç°é¢‘ç‡**é«˜**çš„å­—ç¬¦
*   æµ…è‰²å•å…ƒæ ¼:å‡ºç°é¢‘ç‡**ä½çš„å­—ç¬¦**

## å°†è¿™ç§å¯è§†åŒ–åº”ç”¨åˆ°æ‚¨çš„ä¸šåŠ¡æ¡ˆä¾‹ä¸­

æ‚¨æœ‰ä¸€ä¸ªè®¢å•è¡Œçº§åˆ«çš„**å¥¢ä¾ˆå“åŒ–å¦†å“åœ¨çº¿é”€å”®**çš„æ•°æ®é›†ã€‚

ä½ æƒ³è¦å»ºç«‹ä¸€ä¸ªçŸ©é˜µæ¥æ˜¾ç¤ºå“ç‰Œçš„å…±ç°

*   1 ä¸ªå½©è‰²å•å…ƒæ ¼=ä¸¤ä¸ªå“ç‰Œå‡ºç°åœ¨åŒä¸€ä¸ªå®¢æˆ·è®¢å•ä¸­
*   æ·±è‰²å•å…ƒæ ¼:**ä¸è®¸å¤šå…¶ä»–å“ç‰Œä¸€èµ·å‡ºç°çš„å“ç‰Œ**
*   å…‰ç»†èƒ:**ä¸å…¶ä»–å“ç‰Œå¾ˆå°‘å‡ºç°çš„å“ç‰Œ**

> ä½ å¯ä»¥åœ¨æˆ‘çš„ Github èµ„æºåº“ä¸­æ‰¾åˆ°å…±äº«çš„æºä»£ç :[è¨ç±³å°”è¨å¥‡](https://github.com/samirsaci/matrix_brands)
> æˆ‘ä¸å…¶ä»–é¡¹ç›®çš„ä½œå“é›†:[è¨ç±³å°”è¨å¥‡](https://samirsaci.com/)

<http://samirsaci.com>  

# ä½¿ç”¨ Flask æ„å»ºæ‚¨çš„è§£å†³æ–¹æ¡ˆ

## åœ¨ç”¨ Flask æ¸²æŸ“çš„æ¨¡æ¿ä¸Šå¤åˆ¶è¿™ä¸ªä¾‹å­

è®©æˆ‘ä»¬å…ˆé€šè¿‡æ¸²æŸ“ä¸€ä¸ªä¾‹å­å‘ç° b.locks [*(é“¾æ¥)*](http://bl.ocks.org/jdfekete/a8828c88060a1883b3f4) ä¸‹é¢çš„ç»“æ„

```
app.py
/templates
    index.html
/static
    /data
      miserables.json
    /js
      /Libs
      matrix.js
    /css
```

*   /templates:index.html ä»ªè¡¨æ¿é¡µé¢çš„ HTML æºä»£ç ([é“¾æ¥](http://bl.ocks.org/jdfekete/raw/a8828c88060a1883b3f4/))
*   /js/libs:ç”¨äºå‘ˆç° D3.js çš„ javascript åº“
*   /js/matrix.js:ç”¨äºä½¿ç”¨ **miserables.json** å‘ˆç°æ‚¨çš„ä»ªè¡¨æ¿çš„è„šæœ¬
*   /static/Miserables . json:matrix . js ç”¨æ¥æ¸²æŸ“ *(L* [*å¢¨è¿¹*](https://bost.ocks.org/mike/miserables/miserables.json) *)* çš„ JSON æ–‡ä»¶
*   /CSS:ç”¨äºå‘ˆç°é¡µé¢çš„ CSS æ–‡ä»¶

**å…¨éƒ¨ä»£ç ä¸Šä¼ åœ¨æˆ‘çš„ Github èµ„æºåº“(** [**é“¾æ¥**](https://github.com/samirsaci/matrix-miserables) **)ä½¿ç”¨è¿‡**

1.  å°† Github èµ„æºåº“å¤åˆ¶åˆ°æ‚¨çš„æœ¬åœ°æ–‡ä»¶å¤¹ä¸­
2.  ä¸‹è½½ requirements.txt ä¸­åˆ—å‡ºçš„åº“
3.  å¯åŠ¨ app.py

![](img/51f92629d27dace749e63751f93935fa.png)

æ‚¨çš„ç¤ºä¾‹ä½¿ç”¨ Flask [(é“¾æ¥)](https://github.com/samirsaci/matrix_chart_duplicate.git)â€”â€”(å›¾ç‰‡ç”±ä½œè€…æä¾›)

ç°åœ¨ï¼Œæ‚¨å·²ç»ä½¿ç”¨ Flask å’Œ D3.js æ„å»ºäº†ç¬¬ä¸€ä¸ªå¯è§†åŒ–è§£å†³æ–¹æ¡ˆã€‚

æ¥ä¸‹æ¥çš„æ­¥éª¤æ˜¯

*   **ç”¨ä½ çš„æ•°æ®é›†æ›¿æ¢***Miserables . JSON*
*   ****æ”¹ç¼–** matrix.js ä»¥æ˜¾ç¤ºå“ç‰Œå…±ç°**
*   ****æ”¹ç¼–** HTML é¡µé¢ä»£ç ä»¥**

**<http://samirsaci.com> ** 

# **å°†åŸå§‹æ•°æ®é›†å¤„ç†æˆæœ€ç»ˆçš„ JSON**

****ä» *miserables.json* å¼€å§‹****

**ç¬¬ä¸€æ­¥æ˜¯åˆ†æ miserables.json**

```
**1\. Nodes: Characters distributed in different groups**"nodes": {"name"  : Character Name,
          "group" : Group Number}2\. Links: Listing pairs of characters"nodes": {"source"  : Character Name 1,
          "target"  : Character Name 2,
          "value" : Number of Co-occurence}
```

****è·å– brands.json****

**æˆ‘ä»¬æƒ³è¦ä»€ä¹ˆï¼Ÿ**

```
**1\. Nodes: Brands are distributed in groups depending on the number of different brands that are ordered with it**"nodes": {"name"  : Brand Name,
          "group" : Group Number}2\. Links: Listing pairs of brands that with number of orders they appear together"nodes": {"source"  : Brand Name 1,
          "target"  : Character_name2,
          "value" : Number of Orders they appear together}
```

****æ„å»ºèŠ‚ç‚¹****

**ç¬¬ä¸€ä¸ªå‡½æ•° *order_brand* å°†ä¸º *create_nodes* å‡½æ•°å‡†å¤‡æ‰€éœ€çš„æ•°æ®å¸§å’Œåˆ—è¡¨ï¼Œè¯¥å‡½æ•°å°†æ„å»ºæ‚¨çš„èŠ‚ç‚¹å­—å…¸ã€‚**

**è¯„è®º**

*   ****n_groups** :å°†è¦æ‹†åˆ†çš„å“ç‰Œç»„æ•°**
*   ****ç¬¬ 35 è¡Œ:**é™åº
    {ç¬¬ 1 ç»„:ä¸è®¸å¤šå…¶ä»–å“ç‰Œä¸€èµ·è®¢è´­çš„å“ç‰Œï¼Œ
    ç¬¬ n ç»„:ä¸å°‘æ•°å…¶ä»–å“ç‰Œä¸€èµ·å‡ºç°çš„å“ç‰Œ}**

## **å»ºç«‹é“¾æ¥**

****å¯¼å‡º JSON ä¸­çš„æ‰€æœ‰å†…å®¹****

**å†³èµ›æˆç»©**

**è¯„è®º**

*   ****json_to** :è¯¥å‡½æ•°å°†è¿”å› jsonï¼Œé€šè¿‡å‘é¡µé¢'/get-json 'å‘é€ get è¯·æ±‚æ¥æ£€ç´¢è¯¥ JSON**

**ä½ çš„ JSON å·²ç»å¯ä»¥è¢« matrix.js ä½¿ç”¨äº†(ç»è¿‡ä¸€äº›è°ƒæ•´)ã€‚**

**<http://samirsaci.com> ** 

# **è°ƒæ•´ Matrix.js ä»¥é€‚åº”æ‚¨çš„å“ç‰Œ**

## **æ·»åŠ å·¥å…·æç¤ºä»¥æ˜¾ç¤ºæ‚¬åœæ—¶é€‰æ‹©çš„å“ç‰Œå¯¹**

**![](img/2150d55c9b9885c812003c9f776216c5.png)**

**å“ç‰Œå¯¹ä¸è®¢å•æ•°é‡ä¸€èµ·æ˜¾ç¤ºåœ¨å·¦ä¸Šè§’â€”(å›¾ç‰‡ç”±ä½œè€…æä¾›)**

**æˆ‘åœ¨ mouseover å‡½æ•°ä¸­æ·»åŠ äº†è¿™å‡ è¡Œæ¥æ˜¾ç¤ºæ‰€é€‰æ‹©çš„å“ç‰Œå¯¹ã€‚**

****ä¸‹è½½ JSON æ–‡ä»¶****

**è¯¥å‡½æ•°å°†å‘ flask é¡µé¢'/get-json 'å‘é€ä¸€ä¸ª GET è¯·æ±‚ï¼Œè¯¥é¡µé¢å°†ä½¿ç”¨ *create_json* å‡½æ•°è¿”å› *json_to* ã€‚**

# **æœ€åä¸€å‡»**

## **æ”¹ç¼– HTML ä»£ç ä»¥æ·»åŠ æ ‡é¢˜**

**æœ€ç»ˆæ¸²æŸ“**

*   **/CSS: bootstrap å’Œ styles.css æ¥æ”¹è¿›é¡µé¢çš„å‘ˆç°**

**![](img/7e362ffb47ca7f1b6f47dc3effc44df6.png)**

**æ‚¨çš„å¥¢ä¾ˆå“ç‰Œåœ¨çº¿é”€å”®çŸ©é˜µçš„æœ€ç»ˆæ•ˆæœå›¾â€”(å›¾ç‰‡ç”±ä½œè€…æä¾›)**

# **ç»“è®º**

***å…³æ³¨æˆ‘çš„ mediumï¼Œäº†è§£æ›´å¤šä¸ä¾›åº”é“¾æ•°æ®ç§‘å­¦ç›¸å…³çš„è§è§£ã€‚***

**ä½ å¯ä»¥åœ¨æˆ‘çš„ä½œå“é›†é‡Œæ‰¾åˆ°è¿™ä¸ªçŸ©é˜µå›¾çš„é™æ€ç‰ˆæœ¬:[çŸ©é˜µå›¾](https://samirsaci.github.io/matrix.html)**

**è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ 4 æ­¥è¿‡ç¨‹**

1.  **æ‰¾åˆ°ä¸€ä¸ªä½ æƒ³ç”¨äºä½ çš„å•†ä¸šæ¡ˆä¾‹çš„å¥½çš„å¯è§†åŒ–**
2.  **ä¸‹è½½ HTML ä»£ç ã€javascriptã€CSSã€JSON æ–‡ä»¶å’Œæ‰€æœ‰æ„å»ºé¡µé¢æ‰€éœ€çš„æ–‡ä»¶**
3.  **ç”¨**çƒ§ç“¶**åœ¨æœ¬åœ°æ¸²æŸ“è¯¥é¡µé¢**
4.  **åˆ†æ JSON æ ¼å¼å¹¶æ„å»ºå‡½æ•°æ¥é€‚åº”ä½ çš„è¾“å…¥æ•°æ®**
5.  **è°ƒæ•´ javascript ä»¥é€‚åº”æ‚¨çš„æ•°æ®æ¡†æ ¼å¼**
6.  **è‡ªå®šä¹‰ HTML é¡µé¢ä»¥æ·»åŠ æœ‰å…³æ•°æ®é›†çš„ä¿¡æ¯**

# **å…³äºæˆ‘**

**è®©æˆ‘ä»¬è¿æ¥ä¸Š [Linkedin](https://www.linkedin.com/in/samir-saci/) å’Œ [Twitter](https://twitter.com/Samir_Saci_) ï¼Œæˆ‘æ˜¯ä¸€åä¾›åº”é“¾å·¥ç¨‹å¸ˆï¼Œæ­£åœ¨ä½¿ç”¨æ•°æ®åˆ†ææ¥æ”¹å–„ç‰©æµè¿è¥å’Œé™ä½æˆæœ¬ã€‚**

**å¦‚æœä½ å¯¹æ•°æ®åˆ†æå’Œä¾›åº”é“¾æ„Ÿå…´è¶£ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„ç½‘ç«™**

**<https://samirsaci.com>  

# å‚è€ƒ

*ã€1ã€‘â€”*è¿ˆå…‹Â·åšæ–¯æ‰˜å…‹&è®©-ä¸¹å°¼å°”Â·è´¹ç§‘ç‰¹ï¼Œã€Šæ‚²æƒ¨ä¸–ç•Œã€‹å…±ç°ï¼Œ[é“¾æ¥](https://bost.ocks.org/mike/miserables/)

*ã€2ã€‘â€”*[*è¨ç±³å°”è¨å¥‡*](https://medium.com/u/bb0f26d52754?source=post_page-----70f715a76f93--------------------------------) *ï¼Œåˆå§‹ç¤ºä¾‹ä¸ºçƒ§ç“¶æ¸²æŸ“ï¼Œ* [*Github*](https://github.com/samirsaci/matrix-miserables)

*ã€3ã€‘â€”*[*å°è¨å¥‡*](https://medium.com/u/bb0f26d52754?source=post_page-----70f715a76f93--------------------------------) *ï¼Œæœ€ç»ˆè§£å†³ï¼Œ* [*Github*](https://github.com/samirsaci/matrix-ecommerce)

*ã€4ã€‘â€”*[*å°è¨å¥‡*](https://medium.com/u/bb0f26d52754?source=post_page-----70f715a76f93--------------------------------) *ï¼Œæˆ‘çš„ä½œå“é›†ä¸­ä¸€ä¸ªæœ€ç»ˆæ¸²æŸ“çš„ä¾‹å­ï¼Œ* [*æœ€ç»ˆæ¸²æŸ“*](https://samirsaci.com/matrix.html)**