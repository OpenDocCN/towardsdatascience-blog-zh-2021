# ç”¨æ‰‹åŠ¿æ§åˆ¶ DJIÂ·æ³°æ´›æ— äººæœº

> åŸæ–‡ï¼š<https://towardsdatascience.com/control-dji-tello-drone-with-hand-gestures-b76bd1d4644f?source=collection_archive---------2----------------------->

## ä½¿ç”¨ MediaPipe æ‰‹å…³é”®ç‚¹æ£€æµ‹å™¨å’Œç®€å•çš„ç¥ç»ç½‘ç»œæ¥è¯†åˆ«æ‰‹åŠ¿å’Œæ§åˆ¶æ— äººæœº

![](img/bd358cbe2ab2873d6d902be49bab4631.png)

åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Š[å‰‚é‡åª’ä½“](https://unsplash.com/@dose?utm_source=medium&utm_medium=referral)æ‹ç…§

ä½¿ç”¨æ‰‹åŠ¿æ§åˆ¶æ— äººæœºæ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„ä¸»é¢˜ã€‚ä½†æ˜¯å¤§å¤šæ•°è§£å†³æ–¹æ¡ˆéƒ½é›†ä¸­åœ¨æ—§çš„ OpenCV ä¸Šã€‚å› æ­¤ï¼Œè¿™æ˜¯å¿«é€Ÿçš„è§£å†³æ–¹æ¡ˆ(å¦‚æœä½ æƒ³ç›´æ¥åœ¨æ— äººæœºä¸Šè¿è¡Œå®ƒ)ï¼Œä½†å¾ˆéš¾æ·»åŠ è‡ªå®šä¹‰æ‰‹åŠ¿ï¼Œç”šè‡³æ˜¯åŠ¨ä½œã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³ä»‹ç»ä¸€ç§åŸºäºæ‰‹éƒ¨å…³é”®ç‚¹æ£€æµ‹æ¨¡å‹çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒç”± [**MediaPipe**](https://mediapipe.dev) å’Œç®€å•çš„**å¤šå±‚æ„ŸçŸ¥å™¨**(ç¥ç»ç½‘ç»œ)ç»„æˆã€‚

# ä»‹ç»

è¯¥é¡¹ç›®ä¾æ‰˜**ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†**â€”â€”DJI æ³°æ´›æ— äººæœºå’Œ MediaPipe å¿«æ‰‹å…³é”®ç‚¹æ£€æµ‹ã€‚

**DJIÂ·æ³°æ´›**æ˜¯ä»»ä½•ä¸€ç§ç¼–ç¨‹å®éªŒçš„å®Œç¾æ— äººæœºã€‚å®ƒæœ‰ä¸€ä¸ªä¸°å¯Œçš„ Python API(ä¹Ÿæœ‰ Swift å’Œ JS APIs å¯ç”¨)ï¼Œè¿™æœ‰åŠ©äºå‡ ä¹å®Œå…¨æ§åˆ¶æ— äººæœºï¼Œåˆ›å»ºæ— äººæœºç¾¤ï¼Œå¹¶åˆ©ç”¨å…¶ç›¸æœºè¿›è¡Œè®¡ç®—æœºè§†è§‰ã€‚

**MediaPipe** æ˜¯ä¸€ä¸ªä»¤äººæƒŠå¹çš„ ML å¹³å°ï¼Œæ‹¥æœ‰è®¸å¤šå¼ºå¤§çš„è§£å†³æ–¹æ¡ˆï¼Œå¦‚é¢éƒ¨ç½‘æ ¼ã€æ‰‹å…³é”®ç‚¹æ£€æµ‹å’Œ Objectronã€‚æ­¤å¤–ï¼Œä»–ä»¬çš„æ¨¡å‹å¯ä»¥åœ¨å…·æœ‰è®¾å¤‡ä¸ŠåŠ é€Ÿçš„ç§»åŠ¨å¹³å°ä¸Šä½¿ç”¨ã€‚

è¿™æ˜¯ä½ éœ€è¦çš„**å¯åŠ¨åŒ…**:

![](img/556d9deee33484e9d67dec971f35d85f.png)

å›¾ç‰‡ä½œè€…| DJIÂ·æ³°æ´›ï¼Œç¬”è®°æœ¬ç”µè„‘å’Œäººæ‰‹(ç‹—çˆªå­æ­£åœ¨å¼€å‘ä¸­)

# è¿›åœºè¯´æ˜

è¯¥åº”ç”¨åˆ†ä¸ºä¸¤ä¸ªä¸»è¦éƒ¨åˆ†:**æ‰‹åŠ¿è¯†åˆ«**å’Œ**æ— äººæœºæ§åˆ¶å™¨**ã€‚è¿™äº›éƒ½æ˜¯ç‹¬ç«‹çš„å®ä¾‹ï¼Œå¾ˆå®¹æ˜“ä¿®æ”¹ã€‚ä¾‹å¦‚ï¼Œæ·»åŠ æ–°çš„æ‰‹åŠ¿æˆ–æ”¹å˜æ— äººæœºçš„ç§»åŠ¨é€Ÿåº¦ã€‚

è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹æ¯ä¸ªéƒ¨åˆ†ï¼

## æ‰‹åŠ¿è¯†åˆ«

å½“ç„¶ï¼Œè¿™ä¸ªé¡¹ç›®çš„ä¸»è¦éƒ¨åˆ†æ˜¯è‡´åŠ›äºæ‰‹åŠ¿æ£€æµ‹å™¨ã€‚è¿™ä¸ªé¡¹ç›®ä¸­è¯†åˆ«æ–¹æ³•çš„æƒ³æ³•å—åˆ°äº†è¿™ä¸ª [GitHub repo](https://github.com/Kazuhito00/hand-gesture-recognition-using-mediapipe) çš„å¯å‘ã€‚è¿™é‡Œæ˜¯å®ƒå¦‚ä½•å·¥ä½œçš„ä¸€ä¸ªå¿«é€Ÿæ¦‚è¿°ã€‚

MediaPipe ä¸ºä»–ä»¬çš„æ‰‹å…³é”®ç‚¹æ£€æµ‹å™¨æä¾›äº† python å®ç°ã€‚æ­£åœ¨è¿”å› **20 æ‰‹ç•Œæ ‡**çš„ä¸‰ç»´åæ ‡ã€‚åƒè¿™æ ·:

![](img/13b742f7dcd75f758769c6a2bc47ad38.png)

æ¥è‡ªå¼€æ”¾åª’ä½“ç®¡é“åº“çš„ GIF([é“¾æ¥](https://github.com/google/mediapipe/blob/master/docs/images/mobile/hand_tracking_3d_android_gpu.gif))

åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œå°†åªä½¿ç”¨ **2D** åæ ‡ã€‚åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥çœ‹åˆ°æ‰€æœ‰ 20 ä¸ªè¦ç‚¹ã€‚

![](img/a24721e5153a9dfa4203d27dff69c298.png)

å›¾ç‰‡æ¥è‡ªå¼€æ”¾åª’ä½“ç®¡é“åº“([é“¾æ¥](https://github.com/google/mediapipe/blob/master/docs/images/mobile/hand_landmarks.png)

ç„¶åï¼Œå°†è¿™äº›åæ ‡å±•å¹³å¹¶å½’ä¸€åŒ–ã€‚æ‰‹åŠ¿çš„ **ID** è¢«æ·»åŠ åˆ°æ¯ä¸ªç‚¹åˆ—è¡¨ä¸­ã€‚

![](img/9a56353b8dfa18726380e3690502fa0f.png)

ä½œè€…å›¾ç‰‡|æ­¤ç±»ç§¯åˆ†åˆ—è¡¨ç¤ºä¾‹

å½“æˆ‘ä»¬ä¸ºæ¯ä¸ªæ‰‹åŠ¿æ”¶é›†äº†å¤§çº¦**20â€“100 ä¸ªä¾‹å­**æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹è®­ç»ƒæˆ‘ä»¬çš„ç¥ç»ç½‘ç»œäº†ã€‚

MLP åªæ˜¯ä¸€ä¸ªç®€å•çš„ **5 å±‚** NNï¼Œæœ‰ **4 ä¸ªå…¨è¿æ¥**å±‚å’Œ **1 ä¸ª Softmax** å±‚ç”¨äºåˆ†ç±»ã€‚

![](img/681423f1920d9abfd1de954eed5a24f7.png)

å›¾ç‰‡ä½œè€…|ç¥ç»ç½‘ç»œç»“æ„

å› ä¸ºè¿™æ ·ç®€å•çš„ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å°‘é‡çš„ä¾‹å­å¾—åˆ°æå¥½çš„ç²¾åº¦ã€‚æˆ‘ä»¬ä¸éœ€è¦åœ¨ä¸åŒçš„å…‰ç…§ä¸‹ä¸ºæ¯ä¸ªæ‰‹åŠ¿é‡æ–°è®­ç»ƒæ¨¡å‹ï¼Œå› ä¸º MediaPipe æ¥ç®¡äº†æ‰€æœ‰çš„æ£€æµ‹å·¥ä½œã€‚

![](img/cb7cbdc4e14125376399220d13294f7c.png)

ä½œè€…å›¾ç‰‡

åœ¨æˆ‘çš„å®éªŒä¸­ï¼Œæˆ‘å¯ä»¥å¯¹ 8 ç§ä¸åŒçš„æ‰‹åŠ¿ä¸­çš„æ¯ä¸€ç§è·å¾—è¶…è¿‡ 97%çš„å‡†ç¡®ç‡ã€‚

å› ä¸ºç½‘ç»œçš„ç»“æ„éå¸¸ç®€å•ï¼Œæ‚¨å¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿ç”¨**ç½‘æ ¼æœç´¢**æ¥æ‰¾åˆ°æœ€é€‚åˆç¥ç»ç½‘ç»œçš„è¶…å‚æ•°ã€‚

è¿™æ˜¯æˆ‘åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨çš„ Tensorboard çš„ä¸€ä¸ªä¾‹å­:

![](img/d062bde20745a90c21631e91b095567f.png)

ä½œè€…å›¾ç‰‡|ç½‘æ ¼æœç´¢å¯è§†åŒ–ç¤ºä¾‹

## æ— äººæœºæ§åˆ¶å™¨

å¥½äº†ï¼Œæˆ‘ä»¬æœ‰äº†æ— äººæœºçš„å›¾åƒå’ŒåŸºäºæ£€æµ‹åˆ°çš„å…³é”®ç‚¹è¿”å›æ‰‹åŠ¿ ID çš„æ¨¡å‹ã€‚ä½†æ˜¯å¦‚ä½•æ§åˆ¶æˆ‘ä»¬çš„æ— äººæœºå‘¢ï¼Ÿ

æ³°æ´›æœ€æ£’çš„åœ°æ–¹åœ¨äºä»–æœ‰ç°æˆçš„ Python API æ¥å¸®åŠ©æˆ‘ä»¬å®Œæˆè¿™é¡¹å·¥ä½œã€‚æˆ‘ä»¬åªéœ€è¦å°†æ¯ä¸ªæ‰‹åŠ¿ ID è®¾ç½®ä¸ºä¸€ä¸ªå‘½ä»¤ã€‚

å°½ç®¡å¦‚æ­¤ï¼Œä¸ºäº†æ¶ˆé™¤é”™è¯¯è¯†åˆ«çš„æƒ…å†µï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ‰‹åŠ¿ç¼“å†²åŒºã€‚å½“è¿™ä¸ªç¼“å†²åŒºä¸»è¦åŒ…å«ä¸€ä¸ªç‰¹å®šçš„æ‰‹åŠ¿ ID æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å‘é€ä¸€ä¸ªå‘½ä»¤æ¥ç§»åŠ¨æ— äººæœºã€‚

*ä»¥ä¸‹æ˜¯é¡¹ç›®ä»£ç çš„åŠŸèƒ½å®ç°ç¤ºä¾‹:*

è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åªæ˜¯æ ¹æ®æ¯ä¸ª ID è®¾ç½®ä¸åŒæ–¹å‘çš„æœŸæœ›é€Ÿåº¦ã€‚è¿™ä½¿å¾—æ— äººæœºèƒ½å¤Ÿæœç€ä¸€ä¸ªæ–¹å‘é£è¡Œè€Œä¸ä¼šé¢ ç°¸ã€‚

# æ¼”ç¤º

è¿™æ˜¯æœ€ç”œèœœçš„éƒ¨åˆ†ğŸ”¥

ä½†æ˜¯é¦–å…ˆï¼Œè¿è¡Œé¡¹ç›®éœ€è¦ä¸€äº›å‡†å¤‡å·¥ä½œ:

## è®¾ç½®

é¦–å…ˆï¼Œå…‹éš†å­˜å‚¨åº“

```
# Using HTTPS
git clone [https://github.com/kinivi/tello-gesture-control.git](https://github.com/kinivi/tello-gesture-control.git)
# Using SSH
git clone [git@github.com](mailto:git@github.com):kinivi/tello-gesture-control.git
```

**1ã€‚åª’ä½“ç®¡é“è®¾ç½®**

ç„¶åï¼Œå®‰è£…ä»¥ä¸‹ä¾èµ–é¡¹:

```
ConfigArgParse == 1.2.3
djitellopy == 1.5
numpy == 1.19.3
opencv_python == 4.5.1.48
tensorflow == 2.4.1
mediapipe == 0.8.2
```

å›¾åƒå¤„ç†éœ€è¦ OpenCVï¼Œdjitellop æ˜¯ DJI å®˜æ–¹ Python API çš„ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„åŒ…è£…å™¨

**2ã€‚æ³°æ´›è®¾ç½®**

æ‰“å¼€æ— äººæœºå¹¶å°†ç”µè„‘è¿æ¥åˆ°å…¶ WiFi

![](img/cc129381bee9a7c72e3c76682ea83561.png)

ä½œè€…å›¾ç‰‡

æ¥ä¸‹æ¥ï¼Œè¿è¡Œä»¥ä¸‹ä»£ç æ¥éªŒè¯è¿é€šæ€§

æˆåŠŸè¿æ¥åï¼Œæ‚¨å°†çœ‹åˆ°ä»¥ä¸‹å†…å®¹

```
1\. Connection test:
Send command: command
Response: b'ok'2\. Video stream test:
Send command: streamon
Response: b'ok'
```

## è¿è¡Œåº”ç”¨ç¨‹åº

æœ‰ä¸¤ç§æ§åˆ¶æ–¹å¼:**é”®ç›˜**å’Œ**æ‰‹åŠ¿**ã€‚åœ¨é£è¡Œè¿‡ç¨‹ä¸­ï¼Œä½ å¯ä»¥åœ¨ä¸åŒçš„æ§åˆ¶ç±»å‹ä¹‹é—´è½¬æ¢ã€‚ä¸‹é¢æ˜¯å¯¹è¿™ä¸¤ç§ç±»å‹çš„å®Œæ•´æè¿°ã€‚

è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨ tello æ§ä»¶:

```
python3 main.py
```

è¯¥è„šæœ¬å°†å¯åŠ¨ python çª—å£ï¼Œæ˜¾ç¤ºå¦‚ä¸‹:

![](img/6793a5c4e67f18396d28e118bd4d21ea.png)

ä½œè€…å›¾ç‰‡

## é”®ç›˜æ§åˆ¶

ä¸ºäº†å°†ä½ çš„æ— äººæœºå®šä½åˆ°ä¸€ä¸ªå®Œç¾çš„åœ°æ–¹æˆ–è€…åœ¨ç´§æ€¥æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨é”®ç›˜æ§åˆ¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œèµ·é£åï¼Œ*é”®ç›˜çš„æ§åˆ¶æ–¹å¼*æ˜¯**åœ¨**ä¸Š

æ£€æŸ¥ä»¥ä¸‹æŒ‰é”®å’ŒåŠ¨ä½œæè¿°åˆ—è¡¨:

*   `k` - >åˆ‡æ¢é”®ç›˜æ§åˆ¶
*   `g` - >åˆ‡æ¢æ‰‹åŠ¿æ§åˆ¶
*   `Space` - >èµ·é£æ— äººæœº(å¦‚æœé™è½)æˆ–é™è½æ— äººæœº(å¦‚æœé£è¡Œä¸­)
*   `w` - >å‘å‰ç§»åŠ¨
*   `s` - >å‘åç§»åŠ¨
*   `a` - >å‘å·¦ç§»åŠ¨
*   `d` - >å‘å³ç§»åŠ¨
*   `e` - >é¡ºæ—¶é’ˆæ—‹è½¬
*   `q` - >é€†æ—¶é’ˆæ—‹è½¬
*   `r` - >ä¸Šç§»
*   `f` - >å‘ä¸‹ç§»åŠ¨
*   `Esc` - >ç»“æŸç¨‹åºï¼Œé™è½æ— äººæœº

## æ‰‹åŠ¿æ§åˆ¶

æŒ‰ä¸‹`g`æ¿€æ´»*æ‰‹åŠ¿æ§åˆ¶æ¨¡å¼*ã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„å›è´­ä¸­å¯ç”¨æ‰‹åŠ¿çš„å®Œæ•´åˆ—è¡¨:

![](img/07dcdaa9e71e19d0f0aabe4e943a2e58.png)

å›¾ç‰‡ä½œè€…|æ‰‹åŠ¿åˆ—è¡¨

## é£è¡ŒğŸš€

ç°åœ¨ä½ å·²ç»å‡†å¤‡å¥½é£ç¿”äº†ã€‚æŒ‰ä¸‹`Space`èµ·é£ï¼Œäº«å—ğŸ›¸

![](img/220d944c2b8a4278e89c8a5d86ddf35c.png)

ä½œè€… GIF |æ¼”ç¤º

## é¡¹ç›®å›è´­

<https://github.com/kinivi/tello-gesture-control.git>  

## å‚è€ƒ

*   [MediaPipe æ‰‹å…³é”®ç‚¹æ£€æµ‹å™¨](https://google.github.io/mediapipe/solutions/hands)
*   [DJI æ³°æ´› API åŒ…è£…åº“](https://github.com/damiafuentes/DJITelloPy)
*   [ä½¿ç”¨æ‰‹å…³é”®ç‚¹çš„æ‰‹åŠ¿è¯†åˆ«(Kazuhito00)](https://github.com/Kazuhito00/hand-gesture-recognition-using-mediapipe)

**é™„è¨€**ã€‚è¿™ä¸ªé¡¹ç›®ä¹Ÿå¯ä»¥å¾ˆå®¹æ˜“åœ°æ·»åŠ ä½ è‡ªå·±çš„æ‰‹åŠ¿ã€‚åªéœ€æŸ¥çœ‹[è‡ªè¿°](https://github.com/kinivi/tello-gesture-control#Adding-new-gestures)çš„è¿™ä¸€éƒ¨åˆ†ã€‚

**P.S.S.** åœ¨ä¸ä¹…çš„å°†æ¥ï¼Œæˆ‘å°†ä½¿ç”¨ä¸€ä¸ª [**æ•´ä½“æ¨¡å‹**](https://google.github.io/mediapipe/solutions/holistic) æ¥æ£€æµ‹å¤§è·ç¦»çš„æ‰‹åŠ¿ï¼Œå¹¶ä½¿ç”¨ TensorFlow JS æ¥åˆ©ç”¨æ™ºèƒ½æ‰‹æœºä¸Šçš„ **WebGPU åŠ é€Ÿ**(ç”¨æ™ºèƒ½æ‰‹æœºä¸Šçš„æ‘„åƒå¤´æ§åˆ¶æ— äººæœº)ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ å¯¹å®ƒæ„Ÿå…´è¶£ï¼Œè¯·åœ¨ [GitHub](https://github.com/kinivi) ä¸Šå…³æ³¨æˆ‘ã€‚