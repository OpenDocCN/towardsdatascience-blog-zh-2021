# ç”¨ Python å’Œ Pyvis åˆ¶ä½œäº¤äº’å¼ç½‘ç»œå›¾ã€‚

> åŸæ–‡ï¼š<https://towardsdatascience.com/making-network-graphs-interactive-with-python-and-pyvis-b754c22c270?source=collection_archive---------6----------------------->

## ç»˜åˆ¶ç²¾ç¾å›¾è¡¨çš„ç®€å•æ–¹æ³•ã€‚

![](img/b80bf594cfcdc32d6a9986fd14898f04.png)

å›¾ç‰‡ä½œè€…ã€‚

æœ‰ä¸€æ®µæ—¶é—´ï¼Œæˆ‘å’Œ [Streamlit ç¤¾åŒºçš„å…¶ä»–äºº](https://discuss.streamlit.io/) [1]ä¸€ç›´åœ¨å¯»æ‰¾ä¸€ç§å·¥å…·æ¥å‘ˆç°äº¤äº’å¼å›¾å½¢ï¼Œä½†ç›´åˆ°ç°åœ¨ï¼Œåªæœ‰å°‘æ•°äººèƒ½å¤Ÿå®ç°è¿™ä¸€ç‚¹ã€‚è¿™å¯èƒ½æ˜¯å› ä¸ºéœ€è¦ javascript çš„ä¸“ä¸šæ°´å¹³ï¼Œè¿™æ˜¯è®¸å¤š Streamlit ç”¨æˆ·å¯èƒ½æƒ³è¦é¿å…çš„ï¼Œå› ä¸ºè¿™æ˜¯é¡¹ç›®çš„æ‰¿è¯ºï¼Œä» python éƒ¨ç½²æ¼‚äº®çš„ web åº”ç”¨ç¨‹åºï¼Œä¸éœ€è¦ javascriptï¼ï¼(å½“ç„¶ï¼ŒæŒæ¡ javascript æ˜¯åˆ¶ä½œä»¤äººæ•¬ç•çš„ streamlit åº”ç”¨ç¨‹åºçš„ä¸€å¤§ä¼˜åŠ¿)ã€‚

æœ€è¿‘ï¼Œç»è¿‡å‡ å‘¨çš„åŠªåŠ›ï¼Œæˆ‘å‘ç° Pyvis æ­£åœ¨å¯»æ‰¾å…¶ä»–åŸºäº javascript çš„åº“çš„æ›¿ä»£å“ï¼Œè¿™äº›åº“ç”¨äºä½¿å›¾å½¢å…·æœ‰äº¤äº’æ€§ã€‚æˆ‘éå¸¸å–œæ¬¢ pyvisï¼Œå¹¶æƒ³åœ¨è¿™ç¯‡æ–‡ç« ä¸­åˆ†äº«ä¸€äº›æˆ‘å­¦åˆ°çš„æŠ€å·§ã€‚ä½†æ˜¯å¦‚æœä½ æƒ³è‡ªå·±çœ‹ï¼Œå¯ä»¥æŸ¥çœ‹æ–‡æ¡£é¡µé¢[2]:

[](https://pyvis.readthedocs.io/en/latest/index.html#) [## äº¤äº’å¼ç½‘ç»œå¯è§†åŒ–- pyvis 0.1.3.1 æ–‡æ¡£

### ç¼–è¾‘æè¿°

pyvis.readthedocs.io](https://pyvis.readthedocs.io/en/latest/index.html#) 

è¿™ç¯‡æ–‡ç« çš„å…¶ä½™éƒ¨åˆ†å¦‚ä¸‹:é¦–å…ˆï¼Œæˆ‘å°†å±•ç¤ºä¸€ä¸ªè¶…çº§ç®€å•çš„ä¾‹å­æ¥åšä¸€ä¸ªå°çš„ 3 èŠ‚ç‚¹ç½‘ç»œã€‚å…¶æ¬¡ï¼Œæˆ‘å±•ç¤ºäº†å¦‚ä½•å›ºå®šèŠ‚ç‚¹çš„ä½ç½®ï¼Œä»¥åŠå¦‚ä½•ä¿æŒåˆ†å­å›¾å½¢çš„å½¢çŠ¶ã€‚ç¬¬ä¸‰ä¸ªæ¡ˆä¾‹æ˜¯ç”¨ Networkx æ„å»ºä¸€ä¸ªç½‘ç»œã€‚æœ€åï¼Œæˆ‘å±•ç¤ºäº†ä¸€ä¸ªä½¿ç”¨ Pyvis çš„ Streamlit åº”ç”¨ç¨‹åºã€‚

# 1.ç®€å•çš„å›¾å½¢ä¾‹å­ã€‚

æˆ‘å°†ä»ä¸€ä¸ªç®€å•çš„ä¾‹å­å¼€å§‹ï¼Œåˆ›å»ºä¸€ä¸ªç½‘ç»œå¯¹è±¡å¹¶æ·»åŠ  3 ä¸ªèŠ‚ç‚¹(æ–¹æ³• *add_node* )ï¼Œç”¨ä¸¤æ¡è¾¹åˆ†åˆ«æ ‡è®°ä¸º 1ã€2 å’Œ 3(æ–¹æ³•*add _ edge*)[1â€“2]å’Œ[2â€“3]ã€‚ä¸ºäº†éƒ¨ç½²å›¾è¡¨(ä¾‹å¦‚åœ¨ Jupyter æˆ– Colab ç¯å¢ƒä¸­), pyvis ä½¿ç”¨ *show* æ–¹æ³•å°† python ä»£ç â€œç¿»è¯‘â€æˆ html+javascriptã€‚è°ƒç”¨ *g.show('example.html')* å°†å¯ä»¥ç”¨ *display* æ¸²æŸ“çš„ html æ–‡ä»¶å†™å…¥ç£ç›˜:

è¿™æ˜¯ç»“æœï¼Œ

![](img/5177fd8ae7de6f5b3856433f00a1e86c.png)

å›¾ç‰‡ä½œè€…ã€‚Pyvis çš„ç®€å•ç¤ºä¾‹ğŸš€ã€‚

è¿™å¾ˆå®¹æ˜“ï¼Œä¸æ˜¯å—ï¼Ÿè¿™ä¸ªåŸºæœ¬é…æ–¹å°†åœ¨ä¸‹æ–‡ä¸­ä½¿ç”¨ã€‚æˆ‘åšäº†ä¸€ä¸ªå°å‡½æ•° *show_graph()* æ¥ä¸€æ­¥å®Œæˆæ˜¾ç¤ºï¼Œå¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ‰€ç¤ºã€‚æ‚¨å¯ä»¥åœ¨åº•éƒ¨çš„ github repo ä¸­çš„ Colab ç¬”è®°æœ¬ä¸­æ‰¾åˆ°è¿™äº›ä»£ç å’Œæ‰€æœ‰ä»£ç ğŸ™Œã€‚

# 2.å›¾å½¢å½¢å¼çš„åˆ†å­ã€‚

ä¸‹ä¸€ä¸ªæ¡ˆä¾‹æ˜¯æˆ‘è®¤ä¸ºå¯ä»¥å®ç°çš„ï¼Œå°† pyvis ä¸åŒ–å­¦ä¿¡æ¯å­¦åº“ [RDKit](https://www.rdkit.org/) ç»“åˆèµ·æ¥ğŸ¤“ [3].æˆ‘å‡è®¾è¿™ä¸æ˜¯æ™®éæ„Ÿå…´è¶£çš„ï¼Œæ‰€ä»¥æˆ‘å°†é¿å…æ„å»ºåˆ†å­çš„è¿‡ç¨‹ï¼Œç›¸åï¼Œæˆ‘å°†åªå‘ˆç°åŸå­çš„æœ€ç»ˆèŠ‚ç‚¹å’Œè¿æ¥ä¿¡æ¯ã€‚è¿™é‡Œæ˜¾ç¤ºçš„æ˜¯å’–å•¡å› åˆ†å­â˜•ï¸.

![](img/7ec019e92e7b85d3de6f356b06b8738c.png)

å›¾ç‰‡ä½œè€…ã€‚å’–å•¡å› åˆ†å­

å› ä¸ºæˆ‘æƒ³ä¿æŒå®ƒçš„å½¢çŠ¶ï¼Œé¦–å…ˆæˆ‘éœ€è¦åŸå­çš„åæ ‡ï¼Œè¿˜éœ€è¦ä¸€äº›éå¸¸å…·ä½“çš„ç‰©ç†é€‰é¡¹ã€‚è®©æˆ‘ç”¨ä¸€ç§ç®€å•çš„æ–¹å¼æ¥è§£é‡Šè¿™æ˜¯å¦‚ä½•å®Œæˆçš„:å› ä¸ºæœ‰ 14 ä¸ªåŸå­ï¼Œæ‰€ä»¥æˆ‘åœ¨æ¯ä¸ªåŸå­ç¼–å·ä¸Šè¿è¡Œäº†ä¸€ä¸ªå¾ªç¯ï¼Œç”¨ *add_node* æ–¹æ³•åˆ†é…èŠ‚ç‚¹ã€‚å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ç»™å‡ºäº†åŸå­ç¬¦å·ï¼Œä»¥åŠæ¥è‡ªä¸‰ä¸ªç‹¬ç«‹åˆ—è¡¨çš„ç¬›å¡å°”åæ ‡(è¿™æ˜¯æˆ‘ä» RDKit é¢„å¤„ç†ä¸­è·å¾—çš„),è¿™ä¸‰ä¸ªåˆ—è¡¨åˆ†åˆ«å‘½åä¸º*id*ã€ *xs* å’Œ *ys* :

```
for atomo in range(14): 
    g3.add_node(atomo,label=ids[atomo],
    x=int(100*xs[atomo]),y=int(100*ys[atomo]),
    physics=True,size=30)
```

( *xs* å’Œ *ys* è¢«ä»»æ„ä¹˜ä»¥ 100ï¼Œåªæ˜¯ä¸ºäº†ä½¿å›¾å½¢æ›´æ˜“äºç®¡ç†)

å®Œæ•´çš„ç‰‡æ®µç”±â¤ï¸ä¸»æŒ:)ï¼Œåœ¨è¿™é‡Œä½ è¿˜å¯ä»¥çœ‹åˆ°ç‰©ç†é€‰é¡¹:

è¿™å°±æ˜¯æˆ‘è®¤ä¸ºå¯ä»¥æ¥å—çš„ç»“æœ:

![](img/a1739a22a3bfe47714b27af87edd59fa.png)

å›¾ç‰‡ä½œè€…ã€‚ç”¨ Pyvis å°† 2D è¡¨ç¤ºè½¬æ¢æˆäº¤äº’å¼å›¾å½¢ğŸ˜ã€‚

è¿™å¯ä»¥ä¸»è¦ç”¨äºå¸å¼•çœ¼çƒçš„æ¼”ç¤ºæˆ–è®¾è®¡é¢å‘åŒ–å­¦çš„ç½‘é¡µã€‚ä½†æ˜¯ä¹Ÿå¯ä»¥è®¾æƒ³å…¶ä»–ç”¨é€”ã€‚

# 3.ç°åœ¨ï¼Œä¸€äº›ç©ºæ‰‹é“åŠ¨ä½œã€‚

å¦‚æœä½ ç†Ÿæ‚‰[Networkx](https://networkx.org/)ã€4ã€‘çš„è¯ï¼Œä½ åº”è¯¥çŸ¥é“å®ƒå¾ˆå—æ¬¢è¿ï¼Œå› ä¸ºè¿™ä¸ªåº“å¾ˆå¥½ç”¨ï¼Œæ–‡æ¡£ä¹Ÿå¾ˆå¥½ï¼Œä½†æ˜¯æ®æˆ‘æ‰€çŸ¥ï¼Œå®ƒç¼ºå°‘è¿™ä¸ªè®©å›¾å½¢äº¤äº’çš„åŠŸèƒ½ã€‚å¹¸è¿çš„æ˜¯ï¼ŒPyvis æ¼‚äº®åœ°æ¥å—äº†æ¥è‡ª Networkx çš„ graph å¯¹è±¡ã€‚Networkx å·²ç»é¢„å»ºäº† [Zachary çš„ç©ºæ‰‹é“ä¿±ä¹éƒ¨](https://en.wikipedia.org/wiki/Zachary%27s_karate_club)å›¾[5]ï¼Œå…¶ä¸­æœ‰ 34 ä¸ªä¿±ä¹éƒ¨æˆå‘˜ï¼Œ0 å’Œ 33 ä¸ªä¸»å¸­å’Œè€å¸ˆæœ‰å†²çªï¼Œä»–ä»¬æ ¹æ®æˆå‘˜ä¹‹é—´çš„å½±å“å°†ä¿±ä¹éƒ¨åˆ†æˆä¸¤ç»„ã€‚ä¸‹é¢æ˜¾ç¤ºäº† pyvis ä¸­è¿™ä¸ªå›¾å½¢æ‰€éœ€çš„ä»£ç ç‰‡æ®µã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä» Networkx å¾—åˆ°äº†å›¾ *G* ã€‚ç„¶åæˆ‘ä»¬æ„å»º pyvis å¯¹è±¡ *g4ã€*å’Œæ–¹æ³• *from_nx is* ç”¨äºå°†å›¾å½¢å¯¼å…¥ pyvisâ€¦å°±è¿™ä¹ˆç®€å•:

åœ¨è¿™é‡Œï¼Œæˆ‘å¿…é¡»å¼ºè°ƒç¬¬ 8 è¡Œä¸­çš„ *show_buttons* æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨äºéƒ¨ç½²ç‰©ç†é€‰é¡¹ï¼Œå…è®¸ç”¨æˆ·äº¤äº’åœ°æ”¹å˜èŠ‚ç‚¹ç›¸äº’äº¤äº’çš„æ–¹å¼ï¼Œå°±å¥½åƒå®ƒä»¬ç”±å¼¹ç°§è¿æ¥å¹¶å…·æœ‰å…¶ä»–ç‰©ç†äº¤äº’ä¸€æ ·ã€‚è¿™ä½¿å¾—å›¾å½¢çš„åŠ¨æ€çœ‹èµ·æ¥æ›´â€œè‡ªç„¶â€ï¼Œåœ¨è§†è§‰ä¸Šæ˜¯ä¸€ç§äº«å—ã€‚

![](img/d653410cbeae81bfc657f6fe8abf1486.png)

å›¾ç‰‡ä½œè€…ã€‚Pyvis ä¸­ä½¿ç”¨ Networkx ç”Ÿæˆçš„æ‰å¡é‡Œç©ºæ‰‹é“ä¿±ä¹éƒ¨æ•°æ®é›†çš„å›¾è¡¨ğŸ¤›ã€‚

å½“ç„¶ï¼Œè¿˜æœ‰å…¶ä»–æ–¹æ³•å¯ä»¥ä½¿å›¾å½¢å…·æœ‰äº¤äº’æ€§ï¼Œæ¯”å¦‚ä½¿ç”¨é«˜çº§åº“ï¼Œä½†æ˜¯ä¸€èˆ¬æ¥è¯´ï¼Œå®ƒä»¬æ›´å¤æ‚ã€‚pyvis æä¾›çš„ç®€å•æ€§å€¼å¾—èµèµã€‚

# 4.åœ¨ streamlit ä¸Šéƒ¨ç½²ã€‚

æœ€åï¼Œæˆ‘å±•ç¤ºäº†è¿™äº›åŠ¨æ€å›¾è¡¨åœ¨ Streamlit web åº”ç”¨ç¨‹åºä¸­çš„å¤–è§‚ã€‚æˆ‘ä¸æ‰“ç®—è®¨è®ºå¦‚ä½•åšè¿™ä¸ªåº”ç”¨ç¨‹åºï¼Œæˆ‘æŠŠå®ƒä½œä¸ºè¯»è€…çš„å®¶åº­ä½œä¸šã€‚

> æç¤º:ä½ å¯ä»¥åœ¨ä¸‹é¢çœ‹åˆ° github å›è´­ğŸ˜

![](img/fe58ba0b385614ac2678f9d517c92f7b.png)

å›¾ç‰‡ä½œè€…ã€‚Pyvis åœ¨ Streamlit ä¸­è¿è¡ŒğŸ”¥ã€‚

# ç°åœ¨è¯¥æ€ä¹ˆåŠ..

*   **å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œç©ç½‘ç»œåº”ç”¨:**

[https://share . streamlit . io/napoles-uach/streamlit _ network/main/app . py](https://share.streamlit.io/napoles-uach/streamlit_network/main/app.py)

*   **å¦‚æœä½ å–œæ¬¢ï¼Œè¯·å¯åŠ¨ github å›è´­**ğŸŒŸ

[https://github.com/napoles-uach/streamlit_network](https://github.com/napoles-uach/streamlit_network)

*   **è¿™é‡Œå±•ç¤ºçš„ä»£ç ç‰‡æ®µæ˜¯ Colab ç¬”è®°æœ¬çš„ä¸€éƒ¨åˆ†ï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°:**

[https://github . com/napoles-uach/streamlit _ network/blob/main/pyvis _ sample . ipynb](https://github.com/napoles-uach/streamlit_network/blob/main/pyvis_sample.ipynb)

*   åœ¨ twitter ä¸Šå…³æ³¨æˆ‘ğŸ‘‰[https://twitter.com/napoles3D](https://twitter.com/napoles3D)ğŸ™Œ

## æ„Ÿè°¢é˜…è¯»ï¼ï¼

# å¸®åŠ©æˆ‘é€šè¿‡ä½¿ç”¨ä¸‹é¢çš„é“¾æ¥æˆä¸ºåª’ä½“æˆå‘˜æ¥ç»§ç»­åˆ›å»ºè¿™æ ·çš„å†…å®¹ã€‚åªéœ€ 5 ç¾å…ƒ/æœˆï¼Œä½ å°±å¯ä»¥åœ¨åª’ä½“ä¸Šçœ‹åˆ°æ‰€æœ‰çš„æ•…äº‹ï¼Œè¿˜å¯ä»¥ç”¨ 2.27 ç¾å…ƒæ”¯æŒæˆ‘ï¼Œè°¢è°¢ï¼

# [https://medium.com/@jnapoles/membership](https://medium.com/@jnapoles/membership)

[](https://jnapoles.medium.com/membership) [## é€šè¿‡æˆ‘çš„æ¨èé“¾æ¥åŠ å…¥ Medium-josÃ©MANUEL na POLES du arte

### ä½œä¸ºä¸€ä¸ªåª’ä½“ä¼šå‘˜ï¼Œä½ çš„ä¼šå‘˜è´¹çš„ä¸€éƒ¨åˆ†ä¼šç»™ä½ é˜…è¯»çš„ä½œå®¶ï¼Œä½ å¯ä»¥å®Œå…¨æ¥è§¦åˆ°æ¯ä¸€ä¸ªæ•…äº‹â€¦

jnapoles.medium.com](https://jnapoles.medium.com/membership) 

å¼•ç”¨çš„é“¾æ¥:

[](https://discuss.streamlit.io/) [## [1]ç®€åŒ– it

### è®¨è®º Streamlit çš„ç¤¾åŒºã€‚

discuse . streamlit . io](https://discuss.streamlit.io/) [](https://pyvis.readthedocs.io/en/latest/index.html#) [## [2]äº¤äº’å¼ç½‘ç»œå¯è§†åŒ–- pyvis 0.1.3.1 æ–‡æ¡£

### ç¼–è¾‘æè¿°

pyvis.readthedocs.io](https://pyvis.readthedocs.io/en/latest/index.html#) [](https://www.rdkit.org/) [## [3]å¿«é€Ÿè¯Šæ–­è¯•å‰‚ç›’

### ç¼–è¾‘æè¿°

www.rdkit.org](https://www.rdkit.org/)  [## [4] NetworkX - NetworkX æ–‡æ¡£

### NetworkX æ˜¯ä¸€ä¸ª Python åŒ…ï¼Œç”¨äºåˆ›å»ºã€æ“ä½œå’Œç ”ç©¶â€¦çš„ç»“æ„ã€åŠ¨åŠ›å­¦å’ŒåŠŸèƒ½

networkx.org](https://networkx.org/) [](https://en.wikipedia.org/wiki/Zachary%27s_karate_club) [## [5]æ‰å¡é‡Œç©ºæ‰‹é“ä¿±ä¹éƒ¨

### æ‰å¡é‡Œçš„ç©ºæ‰‹é“ä¿±ä¹éƒ¨æ˜¯ä¸€ä¸ªå¤§å­¦ç©ºæ‰‹é“ä¿±ä¹éƒ¨çš„ç¤¾äº¤ç½‘ç»œï¼Œåœ¨è®ºæ–‡â€œä¿¡æ¯æµâ€¦

en.wikipedia.org](https://en.wikipedia.org/wiki/Zachary%27s_karate_club)