# 数据科学家的软件工程最佳实践

> 原文：<https://towardsdatascience.com/software-engineering-best-practices-for-data-scientists-4c199ede6e03?source=collection_archive---------5----------------------->

## 如何弥合数据科学和软件工程之间差距的速成课程

![](img/eded56d6b562bff52ea266a9674356a1.png)

照片由来自 [Pexels](https://www.pexels.com/photo/bridge-with-lights-at-night-240572/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels) 的 Joonas kri inen 拍摄

直到我开始自己编写数据分析代码，我才真正理解为什么人们会抱怨数据科学家产生的代码。

我接受过软件开发方面的教育，我觉得我很好地掌握了编码最佳实践，并且我对自己编写干净代码的能力很有信心。然后是我写第一份数据分析的时候了。

你猜对了。

缺少函数、不清楚的变量名、杂乱无章的代码、没有一点单元测试的迹象，以及严重缺乏风格，在我让代码工作后，留给我的是相当于狗的早餐的东西。

最后，我终于明白了那些工程师在抱怨什么。

数据科学不是一个自然源自计算机科学的领域，它反映在数据科学家拥有的各种背景中。许多数据科学家甚至没有计算机科学学位，因为他们通常来自其他不相关的领域，包括数学、科学、工程、商业、医学等。

因此，难怪数据科学家不总是拥有最干净的代码。

我不是说数据科学家需要能够编写整个复杂的库。相反，数据科学家应该能够产生干净的代码，这些代码可以更新、调试，并在工程部门很少骂人的情况下转移到生产环境中。

编写干净代码的重要性也不仅仅是为了他人。在许多公司，预算不足以聘请数据科学家*和*软件工程师，这意味着数据科学家通常负责创建生产就绪的代码。因此，对于维护和开发干净的、易于使用的和可重用的代码来说，一个人的理智应该算作一个因素。

许多人会认为好的代码是主观的。然而，通常有四个大家都同意的标准，它们定义了使用最佳实践编写的代码:

1.  好的代码应该是高效的——这意味着即使没有速度和效率，也要从 Python 代码中挤出一点点速度和效率。
2.  好的代码是可维护的——这意味着您可以维护代码，并且其他人可以很容易地理解和维护您的代码。
3.  好的代码是可读的，结构良好的——这意味着任何人都应该能够看到你的代码，理解你想要完成什么，而不必太努力。
4.  好的代码是可靠的——干净的代码是好的代码，好的代码是可靠的，不容易出现错误或随机故障。

查看这些最佳实践，您可以实施它们来达到上述四个标准。

# 使用描述性的变量名。

我经常看到数据分析代码使用变量名编写，比如 x 或 y，或者任何数量的数学变量的英文措辞。

虽然这在写出数学公式时是可行的，但当你在别人的代码中阅读时就不那么清晰了。

谈到数据科学，我喜欢确切地说我的变量是什么。例如:

```
null_hypothesis
standard_deviation_paired_differences_population
degrees_of_freedom
observed_frequency
test_statistic_chi_squared
```

任何上过统计学课程的人都能够理解我的变量是什么，以及它们在我的方程中的作用。在具体计算或使用时，这些基本变量可以变得更具描述性。

诀窍是在情况允许的情况下尽量描述。当然，会有计算如此复杂的情况，以至于编写这样的描述性变量没有意义。然而，在那之前，试着描述一下。

# 使用函数。

函数，不考虑你的编程方法(面向对象的，函数式的，等等)。)，对于保持代码的干净、简洁、易读和干爽是至关重要的(我将在后面谈到)。

对于非计算机科学毕业的数据科学家来说，函数并不总是直观的，因为没有它们代码也能正确运行。

然而，最好的程序员据说是最懒的程序员。为什么？因为他们编写最少的代码，而通常编写最干净的代码来产生解决方案。他们尽可能少地工作以使他们的代码工作，并且他们经常产生最简洁的解决方案。这涉及到函数的使用。

以下是一些关于如何编写保持代码整洁的优秀函数的提示:

*   该函数应该只做一件事。不是 10。不是 20。只有一件事。
*   功能应该很小。有些人认为函数包含的代码不应该超过 20 行，但这是一个任意的数字。尽你最大的努力保持你的功能简明扼要。
*   函数应该这样编写，这样你就可以自顶向下地阅读它们并理解它们的逻辑——就像你如何阅读一本书一样。
*   尽量保持函数参数的数量最少(最好少于 3 个)。如果你需要三个以上的函数参数，问问你自己这个函数是否只完成一个任务。
*   确保函数中的逻辑被正确缩进，并且整个函数的代码被正确阻塞。这将有助于其他人看到函数内部的代码，以及函数开始和停止的位置。
*   使用描述性名称。

# 使用注释并编写适当的支持文档。

当你正在构建改变生活的模型时，很容易忽略这一步，但事实是，如果没有其他人可以使用它们，那么它们真的能改变生活吗？

我个人评论的经验法则是:

*   在代码文件的顶部写一条注释，简要描述代码的目标。
*   在每个函数的顶部写一个注释，描述它的输入、输出和它执行的逻辑。
*   在我不完全理解的任何逻辑的顶部写一个评论，这样我可以更好地组织我的想法。这有助于调试和代码重构。

当涉及到编写适当的支持文档时，您的文档不必比自述文件更复杂。最基本的，好的文档应该包括:

*   代码的目标。
*   关于如何安装和使用代码的说明。
*   用长格式解释代码中棘手的部分，花时间逐行准确地描述代码做了什么，甚至可能是为什么你选择这样写代码。
*   屏幕截图有助于调试和故障排除。
*   指向外部支持文档的有用链接，这些文档可以进一步描述和解释您的部分逻辑或代码。

# 使用一致的编码风格，并熟悉您使用的语言的语法约定。

我犯了一个错误，对于一种给定的语言，我并不总是遵循正确的惯例。

当我在大学里主要学习用 C#编码后，我对它的惯例变得熟悉和舒适，然后我继续非常懒散地将那些相同的惯例应用到我遇到的每一种其他语言。

不要像我一样。相反，花时间学习每种新语言的语法约定，并强迫自己正确使用这些约定。这不仅能帮助你沉浸在语言中，还能帮助你写出更简洁的代码，并帮助你与使用相同语言的其他开发者交流。

下面是一个完成相同功能的代码示例，它使用两种不同的语言和相应的约定编写(请记住，这种格式不会导致缩进):

C#:

```
// This is a comment in C#. I am going to write some code that prints out a value if the inputted number is correct.int year = 0;
Console.Write("\nEnter the year that C# became a language: ");
year = Convert.ToInt32(Console.ReadLine());if(year == 2000) 
{
Console.Write("That is correct!");
}
else 
{
Console.Write("This is incorrect.");
}
```

Python:

```
# This is a comment in Python. This code is going to do the same job that the code above just did.year = int(input("Enter the year that Python became a language: "))if year == 1989:
print ("That is correct!")
else:
print ("That is incorrect.")
```

这段愚蠢的代码实际上并没有做太多事情，但是它让您了解了每种语言的约定有多么不同。

# 使用图书馆。

使用预先存在的库可以节省大量时间，尤其是在编码数据分析时。Python 充满了可以处理数据科学家可能抛出的每个请求的库。这些库不仅已经为您编写好了，而且已经调试好，可以投入生产了。

查看这篇概述了[顶级数据科学库](/top-10-python-libraries-for-data-science-cd82294ec266)及其能力的文章。我在这里总结了一下，重点放在我发现最有用的七个库上:

## NumPy

*   基本数组操作:加、乘、切片、展平、整形、索引。
*   先进的数组操作:堆栈数组，分为部分。
*   线性代数。

## 熊猫

*   索引、操作、重命名、排序和合并数据框。
*   数据框中列的基本 CRUD(更新、添加和删除)功能。
*   输入丢失的文件并处理丢失的数据。
*   创建直方图或箱线图。

## Matplotlib

*   所有数据可视化，包括折线图、散点图、条形图、直方图、饼图、柱状图和光谱图等等。

## 张量流

*   语音和声音识别。
*   情感分析。
*   人脸识别。
*   时间序列。
*   视频检测。

## 海生的

*   确定变量之间的相关性。
*   分析单变量或双变量分布。
*   绘制因变量的线性回归模型。

## SciPy

*   普通科学计算，包括线性代数、插值、统计、微积分和常微分方程。

## sci kit-学习

*   用于分类、聚类、回归、维度、模型选择和预处理的监督和非监督学习算法。

# 使用好的 IDE。

Jupyter 并不打算编写生产就绪的代码。

虽然有很多方法可以让 Jupyter 笔记本创建生产就绪代码，但我发现在数据探索和分析的早期阶段使用它更容易，然后在适当的 IDE 中开发生产级代码。

ide 附带了一些简单的工具来帮助保持代码的整洁，比如代码林挺、自动格式化、语法高亮、查找功能和错误捕捉。此外，有大量的 ide 扩展可以帮助您节省编写代码的时间。

您可以查看的一些 ide 包括:

*   [Visual Studio 代码](https://code.visualstudio.com/)(我个人的最爱)
*   [皮查姆](https://www.jetbrains.com/pycharm/)
*   [原子](https://ide.atom.io/)
*   [Spyder](https://www.spyder-ide.org/)

# 保持你的代码干燥。

DRY(不要重复自己)是一种软件工程最佳实践，旨在保持您的代码干净、简洁、切中要点。

目标是不重复任何代码。这意味着，如果你注意到你一遍又一遍地写着相同的代码行，你需要把这些代码变成一个你只写一次的函数。然后可以多次调用该函数。

如果你在保持代码干燥方面有困难，就使用我最喜欢的规则:

1.  如果这是第一次，就编码。
2.  如果这是第二次，那就抄一遍。
3.  如果这是第三次，就把它做成一个函数或者一个类。

# 编写单元测试。

单元测试是一种软件测试，包括测试代码中的单个组件。编写单元测试是为了确保每段代码都能按预期执行。编写测试是为了测试一小部分执行特定功能的代码，以确保它准确地完成工作。被测试的“单元”可以是单独的功能、过程或整个对象。

单元测试的一个很好的例子是测试一个函数在接收到不同的参数类型时是如何响应的。这个测试的结果将确保您已经为每一个可能发生的事情做好了计划，并且函数不会在以后抛出任何无法解释的错误。

查看这篇由微软撰写的关于如何编写单元测试的文章:

<https://docs.microsoft.com/en-us/dotnet/core/testing/unit-testing-best-practices>  

虽然本文只描述了如何用 C#编写单元测试，但是这些经验和例子适用于任何语言。

# 不要沉迷于一行解决方案。

如果你想给你的朋友留下深刻印象，或者如果你想在媒体上写一篇病毒式的文章，一行程序是很好的解决方案。谁不想用一行代码炒股呢？

虽然使用一行代码创建解决方案令人印象深刻，但在调试和重构代码时，您也将自己暴露在一个充满伤害的世界中。

相反，尽量保持每行一两个函数调用，并确保任何阅读您代码的人都容易理解您的逻辑。如果你不能用简单的术语解释一行代码在做什么，你可能已经把这一行弄得太复杂了。

必须指出的是，开发人员编写的代码行数并不能很好地表明他们的能力或实力——不要听任何人告诉你的其他情况。

# 最后的想法。

本文强调了数据科学家可以实施的最重要的最佳实践，以使他们的代码可以投入生产。

你的代码是你的责任，所以花一些时间来确保你写的代码是有效的、简单的和容易理解的是有意义的。虽然有很多其他的技巧和窍门来编写干净的代码，但是上面列出的是你可以从今天开始应用的最简单的一些。