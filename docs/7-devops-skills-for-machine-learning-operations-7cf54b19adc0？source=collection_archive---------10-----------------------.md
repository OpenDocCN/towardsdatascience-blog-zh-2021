# 7 机器学习操作的 DevOps 技能

> 原文：<https://towardsdatascience.com/7-devops-skills-for-machine-learning-operations-7cf54b19adc0?source=collection_archive---------10----------------------->

## 从成功实施 MLOps 中吸取的经验教训

![](img/38f08c72e17bf9f126357511dd15390d.png)

由 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的 [Pietro Jeng](https://unsplash.com/@pietrozj?utm_source=medium&utm_medium=referral) 拍摄

# DevOps 遇上机器学习

MLOps 一直是 2021 年的热门话题，许多人都在谈论它，许多公司都致力于实施它。原因很明显:MLOps 使敏捷原则能够应用于机器学习项目，这意味着更短的发布周期和更高的质量标准。

从技术的角度来看，我想说成功的 MLOps 实现的主要部分是可用的:使用容器训练和服务 ML 模型的能力，大量的数据管道编排工具，自动化测试框架，以及成熟的 DevOps 实践。

然而，拥有技术并不意味着成功。由于通常涉及的角色:数据科学家、机器学习工程师、数据工程师、开发运维工程师和管理人员，构建 MLOps 团队极具挑战性。经验表明，担任这些角色的人不一定说同一种语言，在我看来，应该有人负责将这些点连接起来。

在最近的 MLOps 项目中，我主要关注与开发运维相关的任务。作为一个团队，我们实现了我们的里程碑，我注意到 DevOps 工程师可以在许多方面提供帮助，不仅在技术问题上，而且在更好的团队合作体验方面。我不是说他们比别人更重要，绝对不是。但是，作为团队中的交叉角色，工程师可以从头到尾玩、学习和共享知识，倡导敏捷和工程最佳实践，同时交付 MLOps 的“运营”部分。

想要从事机器学习操作的 DevOps 工程师无疑会利用他们来自“常规”项目的专业知识。正如你接下来将看到的，他们也应该对学习新东西持开放态度，尤其是针对大数据、数据分析和 ML/AI 的云服务。

## GitLab、Terraform 和谷歌云

我在这篇博文中分享的经验来自于用 *GitLab* 、 *Terraform* 和 Google 云托管服务实现 MLOps，例如 *BigQuery* 、*云存储*、*顶点特征存储*、*顶点管道*、*顶点模型*和*顶点端点*。

我们使用了 Google Cloud 关于机器学习 中 [**连续交付和自动化管道的博文作为参考指南。无论如何，考虑到 MLOps 是一种语言、框架、平台和基础设施不可知的实践，我希望使用其他替代方案的人也可以利用这样的经验。**](https://cloud.google.com/architecture/mlops-continuous-delivery-and-automation-pipelines-in-machine-learning)

# 七项技能

## 1.源代码管理

这是 DevOps 工程师的基本技能。他们应该知道 *Git* 的概念，比如分支、合并、重置基础以及相关的命令。此外，广泛使用的工作流，如 [Gitflow](https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow) 、 [GitHub flow](https://docs.github.com/en/get-started/quickstart/github-flow) ，或者设计更适合团队源代码管理需求的定制替代方案。

## 2.持续集成和交付

CI/CD 知识也是 DevOps 工程师必备的工具。与其他团队成员谈论各种话题会很有帮助，包括但不限于:

*   决定支持团队 CI/CD 需求的工具，例如代码评审支持、容器和其他工件注册，以及与第三方服务(例如，云提供商)集成的能力；
*   以数据处理代码、ML/AI 代码、CI/CD 代码和基础设施相关代码同步但独立管理的方式组织储存库；
*   开发适合自动化测试的代码；
*   使代码准备好在隔离的容器上运行；
*   将待办事项分解成小任务，在短周期内持续交付。

## 3.基础设施作为代码

自动化对 MLOps 至关重要。通过代码提供基础设施允许团队在开发、QA 和生产环境中轻松地复制资源。它还保留了应用于所有环境的更改的完整历史记录，使故障排除和回滚任务更加容易。

建议从 MLOps 项目的早期开始就使用基础设施代码。当处理也是手动管理的资源时，诸如 Terraform 的 IaC 工具可能变得复杂并且容易出错。

值得注意的是，MLOps 团队通常依赖托管云服务进行数据处理、存储和模型培训，这意味着在这种情况下，基础架构配置并不严格与网络或虚拟机相关，而是与存储桶、类似数据库的服务和云调度程序相关。

## 4.编程语言

DevOps 工程师通常负责检测容器，这些容器将运行自动化测试或由数据或机器学习工程师创建的端到端管道。虽然他们不需要深入了解他们的同行所使用的编程语言，但至少了解团队最常用的 CLI 工具(例如， *Python* 的`pytest`)以及如何管理外部依赖关系(例如， *Python* 的`pip install`和`requirements.txt`之间的关系)会很有帮助。这些知识将帮助 DevOps 工程师找到 CI/CD 管道中的基本错误，并自行修复它们。

构建自动化工具和脚本语言，如 *Make* 和 *Bash* 帮助团队简化重复性任务。 *Bash* 是必备的，而*让*介于好东西和必备东西之间，适合那些志在从事 MLOps 工作的 DevOps 工程师。

> **专业提示**:在早期使用 Vertex Feature Store 时，我们意识到相关的 Terraform 模块是一个 WIP，缺少创建一些资源的能力。我们的一名 DevOps 工程师需要编写一个 Python 脚本来绕过这个限制，通过 API 调用来创建资源。当使用最近发布的工具时，您的团队可能会面临类似的情况。也就是说，了解一种允许你与第三方服务交互的编程语言可能对你有利。

## 5.定制容器

幸运的是，人们总能找到现成的容器图像。在现实世界的项目中，我们通常需要构建适合特定用例的定制图像([我在以前的博客文章](https://medium.com/google-cloud/how-to-run-vertexai-custom-jobs-in-gitlab-ci-b986e6ebed89)中写过这个)。这意味着你应该理解 Docker 的概念和最佳实践。

## 6.管道编排

在 MLOps 上工作时有两种主要类型的管道:一种用于 CI/CD，另一种用于机器学习。CI/CD 管道是由 *GitLab CI* 、 *GitHub Actions* 、 *Circle CI* 或类似的工具编排的，这些工具都有很好的文档，我在这里就不重复它们的文档了。

另一方面，机器学习管道可能会因项目而异。它们通常包括数据准备、模型训练、模型验证、模型部署和模型监控等步骤。不像 CI/CD 管道在 *Git* 事件时触发，ML 管道通常在日历的基础上触发(例如，每日调度)。顺便说一下，根据所使用的技术，每一步都可能变成一个子管道。DevOps 工程师必须了解团队如何决定协调他们的管道，以便为成功执行提供所有必要的资源。

例如，如果团队使用 *Apache Airflow* (包括托管版本，如 *Cloud Composer* 或*天文学家*)，DevOps 工作可能就像触发机器学习 *DAG* 一样简单。在这种情况下，编排代码通常由数据工程师构建。但是如果像 *Airflow* 这样的编排工具不是一个选项(相信我，它会发生！)，DevOps 工程师可能负责提供类似 cron 的调度程序、无服务器功能和其他旨在以适当的顺序运行机器学习步骤的部分。

## 7.协力

![](img/6d4acb7fb9ab10c452db5aff9a65965c.png)

Antonio Janeski 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

最后但同样重要的是，说几句团队合作的话。正如我之前提到的，DevOps 是 MLOps 团队中的交叉角色，因此 DevOps 工程师与所有其他角色都有联系。为了完成工作，他们需要与其他工程师交流，了解他们使用的编程语言、工具和服务。此外，他们需要了解 ML 管道的每一步是如何相互作用的——例如，他们共享哪些数据以及执行的顺序。

此外，请记住一些队友可能不熟悉敏捷和 DevOps 实践。

也就是说，团队合作是 DevOps 工程师的一项重要技能。为了茁壮成长，他们需要时不时地设身处地为队友着想，感同身受，记住在自动化就绪性方面不是每个人都在同一页上(尤其是在新团队中)，并追求有效的沟通。

# 包扎

我知道，我报道过很多事情。然而，这并不意味着一个人必须掌握所有的技能。相反，为了增加 DevOps 的采用，团队成员分享他们的专业知识是很常见的。

从长远来看，DevOps 思维模式应该在所有团队成员之间共享，以获得更好的结果。此外，这种文化应该在团队中有机地传播，这样每个人都能看到更高质量标准和更短交付周期的好处。

最终，所有团队成员都要对成功实施 MLOps 负责。

感谢阅读到目前为止！

# 参考

*   **机器学习操作**:【ml-ops.org 
*   cloud.google.com/resources/mlops-whitepaper:谷歌云实践者指南 m lops——机器学习的持续交付和自动化框架