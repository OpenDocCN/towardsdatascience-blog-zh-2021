# AI é…éŸ³è¿‡ Subsï¼Ÿç”¨äººå·¥æ™ºèƒ½ç¿»è¯‘å’Œé…éŸ³è§†é¢‘

> åŸæ–‡ï¼š<https://towardsdatascience.com/how-to-translate-and-dub-videos-with-machine-learning-55204e55a960?source=collection_archive---------43----------------------->

![](img/b4feb71002471a9c77fe034cc994c345.png)

[unsplash.com](http://unsplash.com/)

é™¤äº†ä¸ºè‡ªå·±åšé¥­å’Œç»•ç€æˆ¿å­èµ°å‡ åœˆï¼Œæ—¥æœ¬å¡é€š(æˆ–è€…å­©å­ä»¬ç§°ä¹‹ä¸ºâ€œåŠ¨ç”»â€)æ˜¯æˆ‘åœ¨éš”ç¦»æœŸé—´å­¦ä¼šå–œæ¬¢çš„ä¸œè¥¿ã€‚

ä¸è¿‡ï¼Œçœ‹åŠ¨æ¼«çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœä¸å­¦ä¹ æ—¥è¯­ï¼Œä½ å°±è¦ä¾èµ–äººç±»ç¿»è¯‘å’Œé…éŸ³å‘˜æŠŠå†…å®¹ç¿»è¯‘æˆä½ çš„è¯­è¨€ã€‚æœ‰æ—¶ä½ å¾—åˆ°äº†å­—å¹•(â€œsubsâ€)ï¼Œä½†æ²¡æœ‰é…éŸ³(â€œdubsâ€)ã€‚å…¶ä»–æ—¶å€™ï¼Œæ•´å­£çš„èŠ‚ç›®æ ¹æœ¬æ²¡æœ‰è¢«ç¿»è¯‘ï¼Œä½ åªèƒ½ååœ¨åº§ä½çš„è¾¹ç¼˜ï¼Œåªæœ‰ç»´åŸºç™¾ç§‘çš„æ‘˜è¦å’Œ 90 å¹´ä»£çš„ç½‘ç»œè®ºå›å¸¦ä½ ç©¿è¶Šé»‘æš—ã€‚

é‚£ä½ è¯¥æ€ä¹ˆåŠï¼Ÿç­”æ¡ˆæ˜¾ç„¶ä¸æ˜¯è®©è®¡ç®—æœºå°†ä¸€éƒ¨ç”µè§†èŠ‚ç›®çš„å…¨éƒ¨ç‰‡æ®µä»æ—¥è¯­è½¬å½•ã€ç¿»è¯‘å’Œé…éŸ³æˆè‹±è¯­ã€‚ç¿»è¯‘æ˜¯ä¸€é—¨ç²¾ç»†çš„è‰ºæœ¯ï¼Œä¸èƒ½è‡ªåŠ¨åŒ–ï¼Œéœ€è¦äººæ‰‹çš„çˆ±å¿ƒè§¦æ‘¸ã€‚æ­¤å¤–ï¼Œå³ä½¿ä½ ç¡®å®ä½¿ç”¨æœºå™¨å­¦ä¹ æ¥ç¿»è¯‘è§†é¢‘ï¼Œä½ ä¹Ÿä¸èƒ½ä½¿ç”¨è®¡ç®—æœºæ¥é…éŸ³â€¦â€¦æˆ‘çš„æ„æ€æ˜¯ï¼Œè°ä¼šæ„¿æ„å¬ä¸€æ•´å­£çš„æœºå™¨å£°éŸ³å‘¢ï¼Ÿé‚£ä¼šå¾ˆç³Ÿç³•ã€‚åªæœ‰çœŸæ­£çš„ç¥ç»ç—…æ‰ä¼šæƒ³è¦é‚£ä¸ªã€‚

å› æ­¤ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•ä½¿ç”¨æœºå™¨å­¦ä¹ æ¥è½¬å½•ã€ç¿»è¯‘è§†é¢‘ï¼Œå¹¶å°†è§†é¢‘ä»ä¸€ç§è¯­è¨€è½¬æ¢ä¸ºå¦ä¸€ç§è¯­è¨€ï¼Œå³â€œäººå·¥æ™ºèƒ½è§†é¢‘é…éŸ³â€å®ƒå¯èƒ½ä¸ä¼šç»™ä½ å¸¦æ¥ç½‘é£è´¨é‡çš„ç»“æœï¼Œä½†å¿…è¦æ—¶ä½ å¯ä»¥ç”¨å®ƒæ¥æœ¬åœ°åŒ–åœ¨çº¿å¯¹è¯å’Œ YouTube è§†é¢‘ã€‚æˆ‘ä»¬å°†ä»ä½¿ç”¨è°·æ­Œäº‘çš„[è¯­éŸ³è½¬æ–‡æœ¬ API](https://cloud.google.com/speech-to-text) å°†éŸ³é¢‘è½¬æ¢æˆæ–‡æœ¬å¼€å§‹ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨[ç¿»è¯‘ API](https://cloud.google.com/translate) ç¿»è¯‘è¯¥æ–‡æœ¬ã€‚æœ€åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨[æ–‡æœ¬åˆ°è¯­éŸ³è½¬æ¢ API](https://cloud.google.com/text-to-speech) ä¸ºç¿»è¯‘â€œé…éŸ³â€ï¼Œæ ¹æ®æ–‡æ¡£ï¼Œå®ƒäº§ç”Ÿçš„å£°éŸ³â€œåƒäººä¸€æ ·â€ã€‚

(é¡ºä¾¿è¯´ä¸€å¥ï¼Œåœ¨ä½ åœ¨è¯„è®ºä¸­ç‚®è½°æˆ‘ä¹‹å‰ï¼Œæˆ‘åº”è¯¥å‘Šè¯‰ä½ ï¼ŒYouTube å°†è‡ªåŠ¨å…è´¹ä¸ºä½ è½¬å½•å’Œç¿»è¯‘ä½ çš„è§†é¢‘ã€‚æ‰€ä»¥ä½ å¯ä»¥æŠŠè¿™ä¸ªé¡¹ç›®å½“æˆä½ ä»å¤´å¼€å§‹çƒ˜ç„™é…¸é¢å›¢çš„æ–°çˆ±å¥½:è¿™æ˜¯å¯¹ 30 ä¸ªå°æ—¶çš„ä½æ•ˆåˆ©ç”¨ã€‚)

# äººå·¥æ™ºèƒ½é…éŸ³çš„è§†é¢‘:å®ƒä»¬é€šå¸¸å¬èµ·æ¥å¾ˆæ£’å—ï¼Ÿ

åœ¨ä½ å¼€å§‹è¿™æ®µæ—…ç¨‹ä¹‹å‰ï¼Œä½ å¯èƒ½æƒ³çŸ¥é“ä½ æœ‰ä»€ä¹ˆæœŸå¾…ã€‚æˆ‘ä»¬ç°å®åœ°æœŸæœ›ä» ML è§†é¢‘é…éŸ³ç®¡é“ä¸­è¾¾åˆ°ä»€ä¹ˆè´¨é‡ï¼Ÿ

è¿™é‡Œæœ‰ä¸€ä¸ªä»è‹±è¯­è‡ªåŠ¨ç¿»è¯‘æˆè¥¿ç­ç‰™è¯­çš„ä¾‹å­(å­—å¹•ä¹Ÿæ˜¯è‡ªåŠ¨ç”Ÿæˆçš„è‹±è¯­)ã€‚æˆ‘æ²¡æœ‰å¯¹å®ƒè¿›è¡Œä»»ä½•è°ƒæ•´æˆ–è°ƒèŠ‚:

æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè½¬å½•æ˜¯ä½“é¢çš„ï¼Œä½†å¹¶ä¸å®Œç¾ï¼ŒåŒæ ·çš„ç¿»è¯‘ã€‚(å¿½ç•¥è¯´è¯è€…æœ‰æ—¶è¯­é€Ÿå¤ªå¿«çš„äº‹å®â€”â€”ç¨åå†è°ˆã€‚)æ€»çš„æ¥è¯´ï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°ä»è¿™ä¸ªé…éŸ³è§†é¢‘ä¸­äº†è§£äº‹æƒ…çš„è¦ç‚¹ï¼Œä½†å®ƒå¹¶ä¸å®Œå…¨æ¥è¿‘äººç±»çš„è´¨é‡ã€‚

è®©è¿™ä¸ªé¡¹ç›®æ¯”å¤§å¤šæ•°é¡¹ç›®æ›´æ£˜æ‰‹(æ›´æœ‰è¶£)çš„æ˜¯ï¼Œè‡³å°‘æœ‰ä¸‰ä¸ªå¯èƒ½çš„å¤±è´¥ç‚¹:

1.  è¯­éŸ³è½¬æ–‡æœ¬ API å¯èƒ½ä¼šé”™è¯¯åœ°å°†è§†é¢‘ä»éŸ³é¢‘è½¬å½•ä¸ºæ–‡æœ¬
2.  ç¿»è¯‘ API å¯èƒ½ä¼šé”™è¯¯æˆ–ç¬¨æ‹™åœ°ç¿»è¯‘è¯¥æ–‡æœ¬
3.  è¿™äº›ç¿»è¯‘å¯èƒ½ä¼šè¢«æ–‡æœ¬åˆ°è¯­éŸ³è½¬æ¢ API è¯»é”™

ä»¥æˆ‘çš„ç»éªŒæ¥çœ‹ï¼Œæœ€æˆåŠŸçš„é…éŸ³è§†é¢‘æ˜¯é‚£äº›åœ¨æ¸…æ™°çš„éŸ³é¢‘æµä¸­æœ‰ä¸€ä¸ªäººè¯´è¯ï¼Œå¹¶ä»è‹±è¯­é…éŸ³æˆå¦ä¸€ç§è¯­è¨€çš„è§†é¢‘ã€‚è¿™ä¸»è¦æ˜¯å› ä¸ºè‹±è¯­çš„è½¬å½•è´¨é‡(è¯­éŸ³åˆ°æ–‡æœ¬)æ¯”å…¶ä»–æºè¯­è¨€é«˜å¾—å¤šã€‚

äº‹å®è¯æ˜ï¼Œä»éè‹±è¯­è¯­è¨€é…éŸ³æ›´å…·æŒ‘æˆ˜æ€§ã€‚è¿™æ˜¯æˆ‘æœ€å–œæ¬¢çš„èŠ‚ç›®ä¹‹ä¸€ã€Šæ­»äº¡ç¬”è®°ã€‹çš„ä¸€æ®µç‰¹åˆ«å¹³æ·¡æ— å¥‡çš„æ—¥è¯­åˆ°è‹±è¯­çš„é…éŸ³:

æ­»äº¡ç¬”è®°çš„åŸå§‹è§†é¢‘

å¦‚æœä½ æƒ³æŠŠç¿»è¯‘/é…éŸ³ç•™ç»™äººç±»ï¼Œå¥½å§â€”â€”æˆ‘ä¸èƒ½æ€ªä½ ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¯·ç»§ç»­é˜…è¯»ï¼

# æ„å»ºäººå·¥æ™ºèƒ½ç¿»è¯‘é…éŸ³å‘˜

å’Œå¾€å¸¸ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨ç”¨æœºå™¨å­¦ä¹  Github repo åˆ¶ä½œçš„[ä¸­æ‰¾åˆ°è¿™ä¸ªé¡¹ç›®çš„æ‰€æœ‰ä»£ç ã€‚è¦è‡ªå·±è¿è¡Œä»£ç ï¼Œè¯·æŒ‰ç…§è‡ªè¿°æ–‡ä»¶é…ç½®æ‚¨çš„å‡­è¯å¹¶å¯ç”¨ APIã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ç®€å•ä»‹ç»ä¸€ä¸‹æˆ‘çš„å‘ç°ã€‚](https://github.com/google/making_with_ml/tree/master/ai_dubs)

é¦–å…ˆï¼Œæˆ‘ä»¬å°†éµå¾ªä»¥ä¸‹æ­¥éª¤:

1.  ä»è§†é¢‘æ–‡ä»¶ä¸­æå–éŸ³é¢‘
2.  ä½¿ç”¨è¯­éŸ³è½¬æ–‡æœ¬ API å°†éŸ³é¢‘è½¬æ¢ä¸ºæ–‡æœ¬
3.  **å°†è½¬å½•æ–‡æœ¬åˆ†å‰²æˆå¥å­/ç‰‡æ®µè¿›è¡Œç¿»è¯‘**
4.  ç¿»è¯‘æ–‡æœ¬
5.  ç”Ÿæˆç¿»è¯‘æ–‡æœ¬çš„è¯­éŸ³éŸ³é¢‘ç‰ˆæœ¬
6.  **åŠ é€Ÿç”Ÿæˆçš„éŸ³é¢‘ï¼Œä½¿å…¶ä¸è§†é¢‘ä¸­çš„åŸè¯´è¯è€…ä¸€è‡´**
7.  å°†æ–°éŸ³é¢‘ç¼åˆåˆ°æŠ˜å éŸ³é¢‘/è§†é¢‘çš„é¡¶éƒ¨

æˆ‘æ‰¿è®¤ï¼Œå½“æˆ‘ç¬¬ä¸€æ¬¡ç€æ‰‹æ„å»ºè¿™ä¸ªé…éŸ³å™¨æ—¶ï¼Œæˆ‘å……æ»¡äº†å‚²æ…¢â€”â€”æˆ‘æ‰€è¦åšçš„å°±æ˜¯å°†å‡ ä¸ª API æ’åœ¨ä¸€èµ·ï¼Œè¿˜æœ‰ä»€ä¹ˆæ¯”è¿™æ›´ç®€å•çš„å‘¢ï¼Ÿä½†æ˜¯ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œæ‰€æœ‰çš„å‚²æ…¢éƒ½å¿…é¡»å—åˆ°æƒ©ç½šï¼Œå¥½å®¶ä¼™ï¼Œæˆ‘ä¹Ÿå—åˆ°äº†æƒ©ç½šã€‚

å…·æœ‰æŒ‘æˆ˜æ€§çš„éƒ¨åˆ†æ˜¯æˆ‘ä¸Šé¢åŠ ç²—çš„éƒ¨åˆ†ï¼Œä¸»è¦æ¥è‡ªäºå¿…é¡»å°†ç¿»è¯‘ä¸è§†é¢‘å¯¹é½ã€‚ä½†ä¸€ä¼šå„¿æˆ‘ä»¬ä¼šè¯¦ç»†è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚

# ä½¿ç”¨è°·æ­Œäº‘è¯­éŸ³è½¬æ–‡æœ¬ API

ç¿»è¯‘è§†é¢‘çš„ç¬¬ä¸€æ­¥æ˜¯å°†éŸ³é¢‘è½¬æ¢æˆæ–‡å­—ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä½¿ç”¨äº†è°·æ­Œäº‘çš„[è¯­éŸ³è½¬æ–‡æœ¬ API](https://daleonai.com/translate-dub-videos-with-ml?utm_source=blog&utm_medium=partner&utm_campaign=CDR_dal_aiml_ai-dubs_020221) ã€‚è¿™ä¸ªå·¥å…·å¯ä»¥è¯†åˆ« 125 ç§è¯­è¨€çš„éŸ³é¢‘ï¼Œä½†æ­£å¦‚æˆ‘ä¸Šé¢æåˆ°çš„ï¼Œè‹±è¯­çš„è´¨é‡æœ€é«˜ã€‚å¯¹äºæˆ‘ä»¬çš„ç”¨ä¾‹ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ç”¨ä¸€äº›ç‰¹æ®ŠåŠŸèƒ½ï¼Œæ¯”å¦‚:

*   [å¢å¼ºå‹](https://cloud.google.com/speech-to-text/docs/enhanced-models?utm_source=blog&utm_medium=partner&utm_campaign=CDR_dal_aiml_ai-dubs_020221)ã€‚è¿™äº›æ˜¯ç»è¿‡ç‰¹å®šæ•°æ®ç±»å‹(â€œè§†é¢‘â€ã€â€œç”µè¯å‘¼å«â€)è®­ç»ƒçš„è¯­éŸ³åˆ°æ–‡æœ¬æ¨¡å‹ï¼Œé€šå¸¸è´¨é‡æ›´é«˜ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨â€œè§†é¢‘â€æ¨¡å‹ã€‚
*   è„è¯è¿‡æ»¤å™¨ã€‚è¿™ä¸ªæ ‡å¿—é˜²æ­¢ API è¿”å›ä»»ä½•ä¸è‰¯å•è¯ã€‚
*   å­—æ—¶é—´åç§»ã€‚è¿™ä¸ªæ ‡å¿—å‘Šè¯‰ API æˆ‘ä»¬å¸Œæœ›è½¬å½•çš„å•è¯å’Œè¯´è¯è€…è¯´è¿™äº›å•è¯çš„æ—¶é—´ä¸€èµ·è¿”å›ã€‚æˆ‘ä»¬å°†ä½¿ç”¨è¿™äº›æ—¶é—´æˆ³æ¥å¸®åŠ©æˆ‘ä»¬çš„å­—å¹•å’Œé…éŸ³ä¸æºè§†é¢‘å¯¹é½ã€‚
*   [è¯­éŸ³é€‚é…](https://cloud.google.com/speech-to-text/docs/context-strength?utm_source=blog&utm_medium=partner&utm_campaign=CDR_dal_aiml_ai-dubs_020221)ã€‚é€šå¸¸ï¼Œè¯­éŸ³åˆ°æ–‡æœ¬è½¬æ¢æœ€éš¾å¤„ç†çš„æ˜¯ä¸å¸¸ç”¨çš„å•è¯æˆ–çŸ­è¯­ã€‚å¦‚æœæ‚¨çŸ¥é“æŸäº›å•è¯æˆ–çŸ­è¯­å¯èƒ½ä¼šå‡ºç°åœ¨æ‚¨çš„è§†é¢‘ä¸­(å³â€œæ¢¯åº¦ä¸‹é™â€ã€â€œæ”¯æŒå‘é‡æœºâ€)ï¼Œæ‚¨å¯ä»¥å°†å®ƒä»¬ä»¥æ•°ç»„çš„å½¢å¼ä¼ é€’ç»™ APIï¼Œè¿™å°†ä½¿å®ƒä»¬æ›´æœ‰å¯èƒ½è¢«è½¬å½•:

```
client = speech.SpeechClient()  
# Audio must be uploaded to a GCS bucket if it's > 5 min
audio = speech.RecognitionAudio(uri="gs://path/to/my/audio.wav")

config = speech.RecognitionConfig(
  language_code="en-US"
  # Automatically transcribe punctuation 
  enable_automatic_punctuation=True,
  enable_word_time_offsets=True,
  speech_contexts=[
    # Boost the likelihood of recognizing these words:
    {"phrases": ["gradient descent", "support vector machine"], 
     "boost": **15**}
  ],
  profanity_filter=True,
  use_enhanced="video",
  model="video")

res = client.long_running_recognize(config=config, audio=audio).result()
```

API å°†è½¬å½•çš„æ–‡æœ¬è¿åŒå•è¯çº§æ—¶é—´æˆ³ä½œä¸º JSON è¿”å›ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘è½¬å½•äº†[è¿™ä¸ªè§†é¢‘](https://youtu.be/o6nGn1euRjk)ã€‚ä½ å¯ä»¥åœ¨[è¿™ä¸ª gist](https://gist.github.com/dalequark/e983b929b6194adb49d00a9c55ae4e33) é‡Œçœ‹åˆ° API è¿”å›çš„ JSONã€‚è¾“å‡ºè¿˜è®©æˆ‘ä»¬è¿›è¡Œå¿«é€Ÿçš„è´¨é‡å¥å…¨æ€§æ£€æŸ¥:

*æˆ‘å®é™…è¯´çš„:*

> *â€œè½¯ä»¶å¼€å‘è€…ã€‚æˆ‘ä»¬çš„æ‘‡æ»šé£æ ¼å¹¶ä¸å‡ºåï¼Œå¯¹å§ï¼Ÿæˆ–è€…è¯´*æ˜¯*æˆ‘ä»¬ï¼Ÿä»Šå¤©ï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºæˆ‘å¦‚ä½•åˆ©ç”¨ ML è®©è‡ªå·±å˜å¾—æ›´æ—¶å°šï¼Œä»æœ‰å½±å“åŠ›çš„äººé‚£é‡Œè·å–çµæ„Ÿã€‚â€*

*API ä»¥ä¸ºæˆ‘è¯´äº†ä»€ä¹ˆ:*

> *â€œè½¯ä»¶å¼€å‘è€…ã€‚æˆ‘ä»¬çš„æ‘‡æ»šå’Œé£æ ¼å¹¶ä¸å‡ºåã€‚æˆ‘ä»¬è¿˜æ˜¯ä»Šå¤©çš„æˆ‘ä»¬å—ï¼Ÿæˆ‘å°†å‘ä½ å±•ç¤ºæˆ‘æ˜¯å¦‚ä½•åˆ©ç”¨ ml ä»æœ‰å½±å“åŠ›çš„äººé‚£é‡Œè·å–çµæ„Ÿæ¥æ‰“é€ æ–°çš„æ—¶å°šæ½®æµçš„ã€‚â€*

æ ¹æ®æˆ‘çš„ç»éªŒï¼Œè¿™æ˜¯ä½ åœ¨è½¬å½•é«˜è´¨é‡è‹±è¯­éŸ³é¢‘æ—¶å¯ä»¥æœŸå¾…çš„è´¨é‡ã€‚æ³¨æ„æ ‡ç‚¹æœ‰ç‚¹åã€‚å¦‚æœä½ å¯¹è§‚ä¼—ç†è§£è§†é¢‘çš„è¦ç‚¹æ„Ÿåˆ°æ»¡æ„ï¼Œè¿™å¯èƒ½å·²ç»è¶³å¤Ÿå¥½äº†ï¼Œå°½ç®¡å¦‚æœä½ è¯´çš„æ˜¯æºè¯­è¨€ï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°è‡ªå·±æ‰‹åŠ¨ä¿®æ”¹è„šæœ¬ã€‚

æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ API è¾“å‡ºæ¥ç”Ÿæˆ(æœªç¿»è¯‘çš„)å­—å¹•ã€‚äº‹å®ä¸Šï¼Œå¦‚æœæ‚¨ç”¨`-srt 'æ ‡å¿—è¿è¡Œæˆ‘çš„è„šæœ¬ï¼Œå®ƒä¼šä¸ºæ‚¨åšåˆ°è¿™ä¸€ç‚¹( [srt](https://blog.hubspot.com/marketing/srt-file#:~:text=An%20SRT%20file%20(otherwise%20known,the%20sequential%20number%20of%20subtitles.) æ˜¯éšè—å­—å¹•çš„ä¸€ç§æ–‡ä»¶ç±»å‹):

```
python dubber.py my_movie_file.mp4 "en" outputDirectory **--srt** **--targetLangs** ["es"]
```

# æœºå™¨ç¿»è¯‘

ç°åœ¨æˆ‘ä»¬æœ‰äº†è§†é¢‘æŠ„æœ¬ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨[ç¿»è¯‘ API](https://daleonai.com/cloud.google.com/translate?utm_source=blog&utm_medium=partner&utm_campaign=CDR_dal_aiml_ai-dubs_020221) æ¥â€¦å—¯â€¦ç¿»è¯‘å®ƒä»¬ã€‚

è¿™æ˜¯äº‹æƒ…å¼€å§‹å˜å¾—æœ‰ç‚¹ğŸ¤ªã€‚

æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è¿™æ ·çš„:æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿç¿»è¯‘åŸå§‹è§†é¢‘ä¸­çš„å•è¯ï¼Œç„¶ååœ¨å¤§è‡´ç›¸åŒçš„æ—¶é—´ç‚¹æ’­æ”¾å®ƒä»¬ï¼Œä»¥ä¾¿æˆ‘çš„â€œé…éŸ³â€å£°éŸ³ä¸æˆ‘çš„çœŸå®å£°éŸ³ä¿æŒä¸€è‡´ã€‚

ç„¶è€Œï¼Œé—®é¢˜æ˜¯ç¿»è¯‘ä¸æ˜¯é€å­—é€å¥çš„ã€‚ä»è‹±è¯­ç¿»è¯‘æˆæ—¥è¯­çš„å¥å­å¯èƒ½è¯­åºæ··ä¹±ã€‚å®ƒå¯èƒ½åŒ…å«æ›´å°‘çš„è¯ï¼Œæ›´å¤šçš„è¯ï¼Œä¸åŒçš„è¯ï¼Œæˆ–(å¦‚æˆè¯­)å®Œå…¨ä¸åŒçš„æªè¾ã€‚

è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªæ–¹æ³•æ˜¯ç¿»è¯‘æ•´ä¸ªå¥å­ï¼Œç„¶åè¯•ç€è°ƒæ•´è¿™äº›å¥å­çš„æ—¶é—´ç•Œé™ã€‚ä½†æ˜¯å³ä½¿è¿™æ ·ä¹Ÿå˜å¾—å¤æ‚äº†ï¼Œå› ä¸ºä½ å¦‚ä½•è¡¨ç¤ºä¸€ä¸ªå¥å­å‘¢ï¼Ÿåœ¨è‹±è¯­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ ‡ç‚¹ç¬¦å·æ¥æ‹†åˆ†å•è¯ï¼Œä¾‹å¦‚:

`"Hi! My name is Dale. What's up?" --> ["Hi", "My name is Dale", "What's up"]`

ä½†æ ‡ç‚¹ç¬¦å·å› è¯­è¨€è€Œå¼‚(è‹±è¯­ä¸­æ²¡æœ‰)ï¼Œæœ‰äº›è¯­è¨€æ ¹æœ¬ä¸ç”¨æ ‡ç‚¹ç¬¦å·åˆ†éš”å¥å­ã€‚

å¦å¤–ï¼Œåœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¸ä¼šç”¨å®Œæ•´çš„å¥å­è¯´è¯ã€‚ä½ çŸ¥é“å—ï¼Ÿ

å¦ä¸€ä¸ªè®©ç¿»è¯‘æŠ„æœ¬å˜å¾—å›°éš¾çš„é—®é¢˜æ˜¯ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä½ è¾“å…¥åˆ°ç¿»è¯‘æ¨¡å‹ä¸­çš„*è¶Šå¤š*ä¸Šä¸‹æ–‡ï¼Œä½ å°±èƒ½æœŸå¾…æ›´é«˜è´¨é‡çš„ç¿»è¯‘ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘æŠŠä¸‹é¢çš„å¥å­ç¿»è¯‘æˆæ³•è¯­:

"æˆ‘æ„Ÿåˆ°å¿§éƒï¼Œä½†æˆ‘ä¹Ÿå–œæ¬¢ç²‰çº¢è‰²ã€‚"

æˆ‘å»æ‹¿ç¿»è¯‘è¿‡æ¥çš„:

"æˆ‘å–œæ¬¢è“è‰²ï¼Œä½†æˆ‘ä¹Ÿå–œæ¬¢ç«ç‘°."

è¿™æ˜¯å‡†ç¡®çš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘æŠŠè¿™å¥è¯åˆ†æˆä¸¤éƒ¨åˆ†(â€œæˆ‘æ„Ÿåˆ°å¿§éƒâ€å’Œâ€œä½†æ˜¯æˆ‘ä¹Ÿå–œæ¬¢ç²‰çº¢è‰²â€)ï¼Œå¹¶åˆ†åˆ«ç¿»è¯‘æ¯ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä¼šå¾—åˆ°:

â€œJe me sens tristeï¼Œmais j'aime aussi le roseâ€ï¼Œå³â€œæˆ‘æ„Ÿåˆ°æ‚²ä¼¤ï¼Œä½†æˆ‘ä¹Ÿå–œæ¬¢ç²‰çº¢è‰²ã€‚â€

è¿™å°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åœ¨å°†æ–‡æœ¬å‘é€åˆ°ç¿»è¯‘ API ä¹‹å‰åˆ†å‰²å¾—è¶Šå¤šï¼Œç¿»è¯‘çš„è´¨é‡å°±è¶Šå·®(å°½ç®¡åœ¨æ—¶é—´ä¸Šä¸è§†é¢‘ä¿æŒä¸€è‡´ä¼šæ›´å®¹æ˜“)ã€‚

æœ€ç»ˆï¼Œæˆ‘é€‰æ‹©çš„ç­–ç•¥æ˜¯ï¼Œæ¯å½“è¯´è¯è€…åœé¡¿æ—¶é—´è¶…è¿‡ä¸€ç§’é’Ÿæ—¶ï¼Œå°±æŠŠæ‰€è¯´çš„è¯åˆ†å¼€ã€‚è¿™æ˜¯ä¸€ä¸ªçœ‹èµ·æ¥åƒä»€ä¹ˆçš„ä¾‹å­:

```
{
        "en": "Software developers.",
        "start_time": **0.2**,
        "end_time": **1.5**,
    },
    {
        "en": "We're not known for our Rock and style. Are we",
        "start_time": **1.6**,
        "end_time": **4.4**,
    },
    {
        "en": "or are we",
        "start_time": **5**,
        "end_time": **6.2**,
    },
```

è¿™è‡ªç„¶å¯¼è‡´äº†ä¸€äº›å°´å°¬çš„ç¿»è¯‘(å³â€œæˆ–è€…æˆ‘ä»¬â€æ˜¯ä¸€ä¸ªå¥‡æ€ªçš„ç¿»è¯‘ç‰‡æ®µ)ï¼Œä½†æˆ‘å‘ç°å®ƒè¶³å¤Ÿå¥½ã€‚è¿™é‡Œæ˜¯ä»£ç ä¸­çš„é€»è¾‘ã€‚

ä¾§æ :æˆ‘è¿˜æ³¨æ„åˆ°ï¼Œå¯¹äºéè‹±è¯­è¯­è¨€ï¼Œè¯­éŸ³åˆ°æ–‡æœ¬ API è¿”å›çš„æ—¶é—´æˆ³çš„å‡†ç¡®æ€§æ˜æ˜¾è¾ƒä½ï¼Œè¿™è¿›ä¸€æ­¥é™ä½äº†éè‹±è¯­åˆ°è‹±è¯­é…éŸ³çš„è´¨é‡ã€‚

æœ€åä¸€ä»¶äº‹ã€‚å¦‚æœæ‚¨å·²ç»çŸ¥é“å¸Œæœ›å¦‚ä½•ç¿»è¯‘æŸäº›å•è¯(ä¾‹å¦‚ï¼Œæˆ‘çš„åå­—â€œDaleâ€åº”è¯¥æ€»æ˜¯ç®€å•åœ°ç¿»è¯‘ä¸ºâ€œDaleâ€)ï¼Œæ‚¨å¯ä»¥åˆ©ç”¨é«˜çº§ç¿»è¯‘ API çš„â€œè¯æ±‡è¡¨â€åŠŸèƒ½æ¥æé«˜ç¿»è¯‘è´¨é‡ã€‚æˆ‘åœ¨è¿™é‡Œå†™äº†ä¸€ç¯‡å…³äºé‚£ä¸ª[çš„åšæ–‡](https://daleonai.com/improving-machine-translation-with-the-google-translation-api-advanced)ã€‚

ç¢°å·§çš„æ˜¯ï¼ŒGoogle Cloud æ­£åœ¨å¼€å‘ä¸€ä¸ªæ–°çš„ API æ¥å¤„ç†ç¿»è¯‘å£è¯­çš„é—®é¢˜ã€‚å®ƒè¢«ç§°ä¸º[åª’ä½“ç¿»è¯‘ API](https://cloud.google.com/media-translation?utm_source=blog&utm_medium=partner&utm_campaign=CDR_dal_aiml_ai-dubs_020221) ï¼Œå®ƒç›´æ¥åœ¨éŸ³é¢‘ä¸Šè¿è¡Œç¿»è¯‘(å³æ²¡æœ‰è½¬å½•çš„æ–‡æœ¬ä¸­ä»‹)ã€‚æˆ‘ä¸èƒ½åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨è¿™ä¸ª APIï¼Œå› ä¸ºå®ƒè¿˜æ²¡æœ‰è¿”å›æ—¶é—´æˆ³(è¿™ä¸ªå·¥å…·ç›®å‰å¤„äºæµ‹è¯•é˜¶æ®µ)ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºåœ¨æœªæ¥çš„è¿­ä»£ä¸­ä½¿ç”¨å®ƒä¼šå¾ˆæ£’ï¼

# æ–‡æœ¬åˆ°è¯­éŸ³è½¬æ¢

ç°åœ¨å¼€å§‹æœ‰è¶£çš„éƒ¨åˆ†â€”â€”æŒ‘é€‰ç”µè„‘å£°éŸ³ï¼å¦‚æœä½ è¯»è¿‡æˆ‘çš„ [PDF åˆ°æœ‰å£°è¯»ç‰©è½¬æ¢å™¨](https://daleonai.com/pdf-to-audiobook)ï¼Œä½ å°±ä¼šçŸ¥é“æˆ‘å–œæ¬¢å¬èµ·æ¥æ»‘ç¨½çš„ç”µè„‘å£°éŸ³ã€‚ä¸ºäº†ç”Ÿæˆé…éŸ³éŸ³é¢‘ï¼Œæˆ‘ä½¿ç”¨äº†è°·æ­Œäº‘[æ–‡æœ¬åˆ°è¯­éŸ³è½¬æ¢ API](https://daleonai.com/cloud.google.com/text-to-speech?utm_source=blog&utm_medium=partner&utm_campaign=CDR_dal_aiml_ai-dubs_020221) ã€‚TTS API å¯ä»¥ç”¨ä¸åŒå£éŸ³çš„ä¸åŒè¯­è¨€ç”Ÿæˆè®¸å¤šä¸åŒçš„å£°éŸ³ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å¹¶ä½¿ç”¨[æ¥å¼¹å¥](https://cloud.google.com/text-to-speech/docs/voices?utm_source=blog&utm_medium=partner&utm_campaign=CDR_dal_aiml_ai-dubs_020221)ã€‚â€œæ ‡å‡†â€å£°éŸ³å¯èƒ½å¬èµ·æ¥æœ‰ç‚¹ï¼Œå‘ƒï¼Œ*å¾®å°ï¼Œ*å¦‚æœä½ çŸ¥é“æˆ‘çš„æ„æ€ï¼Œä½†æ˜¯ç”±é«˜è´¨é‡ç¥ç»ç½‘ç»œç”Ÿæˆçš„ [WaveNet](https://deepmind.com/blog/article/wavenet-generative-model-raw-audio) å£°éŸ³å¬èµ·æ¥å¾ˆåƒäººç±»ã€‚

åœ¨è¿™é‡Œï¼Œæˆ‘é‡åˆ°äº†å¦ä¸€ä¸ªæˆ‘æ²¡æœ‰é¢„è§åˆ°çš„é—®é¢˜:å¦‚æœè®¡ç®—æœºçš„å£°éŸ³æ¯”è§†é¢‘çš„åŸå§‹æ‰¬å£°å™¨æ…¢å¾—å¤šï¼Œä»è€Œå¯¼è‡´ç”Ÿæˆçš„éŸ³é¢‘æ–‡ä»¶å¤ªé•¿ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿé‚£ä¹ˆé…éŸ³å°†ä¸å¯èƒ½ä¸æºè§†é¢‘å¯¹é½ã€‚æˆ–è€…ï¼Œå¦‚æœè¯‘æ–‡æ¯”åŸæ–‡æ›´åŠ å†—é•¿ï¼Œå¯¼è‡´åŒæ ·çš„é—®é¢˜ï¼Œæ€ä¹ˆåŠï¼Ÿ

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å°è¯•äº†æ–‡æœ¬åˆ°è¯­éŸ³è½¬æ¢ API ä¸­çš„å‚æ•°`speakingRate`ã€‚è¿™å…è®¸æ‚¨åŠ å¿«æˆ–å‡æ…¢ç”µè„‘å£°éŸ³:

```
# Instantiates a client
    client = texttospeech.TextToSpeechClient()

    # Set the text input to be synthesized
    synthesis_input = texttospeech.SynthesisInput(text="Hello World")

    voice = texttospeech.VoiceSelectionParams(
        language_code=languageCode, name=voiceName
    )

    # Select the type of audio file you want returned
    audio_config = texttospeech.AudioConfig(
        audio_encoding=texttospeech.AudioEncoding.MP3,
        # Speed up or slow down speaking
        speaking_rate=speakingRate 
    )

    # Perform the text-to-speech request on the text input with the selected
    # voice parameters and audio file type
    response = client.synthesize_speech(
        input=synthesis_input,
        voice=voice,
        audio_config=audio_config
    )
```

æ‰€ä»¥ï¼Œå¦‚æœç”µè„‘è¯´ä¸€å¥è¯çš„æ—¶é—´æ¯”è§†é¢‘åŸå£°è¯´è¯äººè¯´ä¸€å¥è¯çš„æ—¶é—´é•¿ï¼Œæˆ‘å°±æé«˜è¯´è¯é€Ÿåº¦ï¼Œç›´åˆ°ç”µè„‘å’Œäººç±»èŠ±çš„æ—¶é—´å·®ä¸å¤šã€‚

å¬èµ·æ¥æœ‰ç‚¹å¤æ‚ï¼Ÿä»£ç å¦‚ä¸‹æ‰€ç¤º:

```
**def** **speakUnderDuration**(text, languageCode, durationSecs, voiceName=None):
    """Speak text within a certain time limit.
    If audio already fits within duratinSecs, no changes will be made.

    Args:
        text (String): Text to be spoken
        languageCode (String): language code, i.e. "en"
        durationSecs (int): Time limit in seconds
        voiceName (String, optional): See https://cloud.google.com/text-to-speech/docs/voices

    Returns:
        bytes : Audio in wav format
    """
    # First, generate audio with speakingRate = 1
    baseAudio = speak(text, languageCode, voiceName=voiceName)

    # Save audio to a temporary file
    f = tempfile.NamedTemporaryFile(mode="w+b")
    f.write(baseAudio)
    f.flush()

    # Get the sample's duration
    baseDuration = AudioSegment.from_mp3(f.name).duration_seconds
    f.close()

    # How fast was the generated audio compared to the original?
    ratio = baseDuration / durationSecs

    # if the audio fits, return it
    **if** ratio <= **1**:
        **return** baseAudio

    # If the base audio is too long to fit in the segment, increase
    # the speaking rate
    ratio = round(ratio, **1**)
    # speakingRate must be <= 4
    **if** ratio > **4**:
        ratio = **4**
    **return** speak(text, languageCode, voiceName=voiceName, speakingRate=ratio)
```

è¿™è§£å†³äº†éŸ³é¢‘ä¸è§†é¢‘å¯¹é½çš„é—®é¢˜ï¼Œä½†æœ‰æ—¶è¿™æ„å‘³ç€æˆ‘é…éŸ³ä¸­çš„ç”µè„‘æ‰¬å£°å™¨æœ‰ç‚¹ç¬¨æ‹™åœ°å¿«ã€‚ä½†æ˜¯è¿™å¯¹ V2 æ¥è¯´æ˜¯ä¸ªé—®é¢˜ã€‚

# å€¼å¾—å—ï¼Ÿ

ä½ çŸ¥é“è¿™å¥è¯å—ï¼Œâ€œç©æ„šè ¢çš„æ¸¸æˆï¼Œèµ¢å¾—æ„šè ¢çš„å¥–å“ï¼Ÿâ€æ„Ÿè§‰æˆ‘åœ¨è¿™é‡Œå»ºç«‹çš„æ¯ä¸€ä¸ª ML é¡¹ç›®éƒ½æ˜¯ä¸€ç§çˆ±çš„åŠ³åŠ¨ï¼Œä½†è¿™ä¸€æ¬¡ï¼Œæˆ‘å–œæ¬¢æˆ‘çš„æ„šè ¢çš„å¥–åŠ±:èƒ½å¤Ÿç”Ÿæˆæ— é™æ•°é‡çš„æ€ªå¼‚ï¼Œæœºå™¨äººï¼Œç¬¨æ‹™çš„åŠ¨ç”»é…éŸ³ï¼Œæœ‰æ—¶è¿˜æœ‰ç‚¹åƒæ ·ã€‚

ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹æˆ‘çš„ç»“æœ:

*éµå¾ª*[*dale quark*](http://twitter.com/dalequark)*ä¸ºä¸‡ç‰© MLã€‚æœ€åˆå‘è¡¨äº 2021 å¹´ 2 æœˆ 2 æ—¥ https://daleonai.com**[*ã€‚*](https://daleonai.com/translate-dub-videos-with-ml)*