# 数据科学中更好的软件编写技巧:死程序不会说谎

> 原文：<https://towardsdatascience.com/better-software-writing-skills-in-data-science-dead-programs-tell-no-lies-1f06d581de6f?source=collection_archive---------48----------------------->

## 实用程序设计员的每周指导章节阅读

![](img/48ee50dd5b00cb1405ea94eca665034f.png)

封面图片由[威廉·亚当斯](https://pixabay.com/users/wadams-955461/)在 [Pixabay](http://pixabay.com) 拍摄。

本周的指导和帖子是基于“务实的程序员:从熟练工到大师”的第四章:务实的偏执狂。这一章的重点是确保你的程序做它们应该做的事情，如果它们没有按预期执行，你可以用最快的方式找出原因。

根据您使用的编程语言，可以用不同的方式支持契约式设计。至少，Python 3 可以通过对函数及其返回值使用参数类型来强制实现这一点。强制执行合同的另一个好方法是在你的函数的早期做断言(*断言*)或者简单地*在事情不符合你的合同时抛出*异常。请注意，*断言*无论如何都会引发异常。想一想，是失败并停止执行好，还是用垃圾填充一个表好？你什么时候能发现那是垃圾？你能在那个时间点纠正它吗？你还会有底层数据来做修正吗？

学会知道什么时候使用*断言*和/或什么时候*引发*异常，也就是说，当你知道一个边界、一个合同并且你想要执行它，或者至少告诉一个更高级的程序有问题并且你对此无能为力。当遇到特殊情况时，你可以自己解决，或者让更高级的程序来处理。最后，如果没有更高级别的程序可以处理这种情况，整个程序将被暂停。

我知道对于某些人来说断言和异常的用法可能很难理解，所以让我试着为你建立一个心理模型。异常是发生在程序上的异常事件。如果你负责那个程序的调用并捕捉那个异常，你必须决定你是否有足够的上下文来处理那个异常，需要把那个异常提交给调用你的程序。最后，如果没有人能处理这个异常，程序就会崩溃，你可以调试这个异常是怎么回事。如果你知道在这种特殊情况下该怎么做，那么就由你来处理。也许是重试，也许你需要使用默认值，…只是要确定处理决定，因为这可能会污染你的数据。

至于如何抛出更高的异常，有两种方法:*断言*或者*抛出*。一般来说， *raise* 会在你遇到无法直接处理的错误情况时使用，但更高级的程序可能会处理，例如文件不存在或为空……另一方面， *assert* 会在你发誓这种情况不会发生时使用。在这两种情况下，异常都被抛出。

当你发现你的程序发生了“不好的”事情，你知道这不应该发生，你也知道没有别的办法，抛出异常的方法是通过断言。这将会给上层程序抛出一个异常，它必须决定如何处理这个异常。一个例子是，你期望一个 int 作为输入，你得到一个字符串，这是契约破坏，更高的程序要求你处理不正确的数据，为什么你的程序会决定为什么契约被破坏？正确处理该异常应该是调用者的责任。这可能需要一个断言。

根据您所在的组织，如何使用异常和断言可能会变得很有哲理。另一方面，它也可能受制于非常具体的规则。一个组织可能更喜欢一种方法而不是另一种方法，这可能有真正合理的原因。学习规则，如果没有规则，围绕它进行讨论，并运用你的最佳判断。无论如何，死亡程序不会说谎。与其在未来一年不得不处理被污染的数据，不如杀了它。

跑步之前，应该先学会走路。通常，人们在没有太多编程知识的情况下进入数据科学，突然被要求处理 Python 中现有的 ETL，或者设计新的 ETL。务实的做法是学习编程！如前所述，Python 是一种多范式语言。过程化编程可能是最广为人知的方法，尤其是在笔记本环境中使用 Python 的时候。线性规划和函数的使用…

如果您使用 pytest 或其他一些库，您可能会开始对面向对象编程产生一些疑惑。也许你只是复制了食谱，并没有深入研究这个范例。你的机会来了。我在 Python 中找到了这篇关于[面向对象的写得很好的初级读本，它也链接到了其他资源。如果您要编写可靠的 ETL，您将需要了解一些 OOP 知识。](https://realpython.com/python3-object-oriented-programming/)

如果你操作数据，迟早你会想使用 lambda 函数，映射，过滤，减少，…或者如果你使用 numpy / pandas，你会对 apply 等感兴趣。同样，你可以按照菜谱做，但是同样，如果你想在函数式编程方面变得更强，我又找到了一本有趣的关于 Python 中[函数式编程的入门书。它远未完成，但它链接到其他资源来填补空白，一旦开始，你就会想了解更多！](https://realpython.com/python-functional-programming/)

我说过很多次:熟能生巧！在最初的两周，我向你们推荐了来自 [CheckiO](https://py.checkio.org/) 的练习。随意在那里注册一个账号，沿着一个岛到一个岛的路径，获取 Python 方面的知识。还有其他资源可以用来练习编程。自 2015 年以来，每年圣诞节前的几天，在 12 月份，[降临节代码](https://adventofcode.com/)提出小问题，精灵和圣诞老人面临着传递礼物！你也可以看看你所在的地区是否有编码 dojos，或者实际上，我发现它们也是一个很好的实践场所。

这是我对第四章“实用程序员:从熟练工到大师”阅读的补充，作为提高数据科学中软件写作技能的媒介。下周我们将学习第五章:弯曲或断裂。

![](img/780b3c6970acd52c297aefa716f46ac1.png)

在软件领域 20 多年了。目前在 Shopify 担任数据科学家。在深度学习、机器学习/分析、云计算、物联网、领域特定语言、遗传算法和编程、人工生命/智能以及所有技术领域的研究兴趣！[通过点击](https://thelonenutblog.wordpress.com/author/potvinpascal/)查看所有帖子

*原载于 2021 年 4 月 13 日 http://thelonenutblog.wordpress.com**的* [*。*](https://thelonenutblog.wordpress.com/2021/04/13/better-software-writing-skills-in-data-science-dead-programs-tell-no-lies/)